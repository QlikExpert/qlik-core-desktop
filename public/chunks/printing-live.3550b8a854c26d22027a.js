/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[62],{118:function(e,n,t){"use strict";var r,o;!(r=[t(11)],o=function(){var e=1;var n=256;var t=166/26;var r=12;var o=11;var i=12;var a=i/o;function c(t){var r=/^[^\\/:*?"<>|\x00-\x1f]+$/;return"undefined"!==typeof t&&!u(t,"_")&&!u(t,"$$")&&r.test(t)&&t.length>=e&&t.length<=n}function s(e){return!/[\\*?"()<>|' &$£¤^/+-]+/.test(e)}function l(e){return/^(ftp|http|https):\/\/[^ "]+$/.test(e.toLowerCase())}function d(e){if(/^.*:\/\//.test(e))return e;return"http://"+e}function u(e,n){return 0===e.indexOf(n)}function f(e,n){return-1!==e.indexOf(n,e.length-n.length)}function w(e,n){n||(n="");return e.length>0?e.reduce(function(e,t){return e+n+t}):""}function h(e){var n=e.replace(/.*\[|\]/gi,""),t=n.match(/"[^=]*"|[^;]+/g);return t}function v(e,n){var t=h(e),r;if(t)for(r=0;r<t.length;r++)if(-1!==t[r].toLowerCase().indexOf(n.toLowerCase()))return t[r].split("=")[1];return""}function p(e,n){function t(){return(e+"\\"+n).replace("\\\\","\\")}function r(){if("\\\\"===e.substring(0,2))return"\\"+t()}return r()||t()}function g(e){var n=h(e),t=[],r;n&&n.forEach(function(e){r=e.split("=");r&&t.push({key:r[0],value:r.length>1?r[1]:""})});return t}function y(e){"\\"===e.charAt(0)&&(e=e.substring(1));"\\"===e.charAt(e.length-1)&&(e=e.slice(0,-1));return e}function m(e){"\\"!==e.charAt(e.length-1)&&(e+="\\");return e}function b(e){var n;if("\\\\"===e.substring(0,2)){n=y(e.substring(2)).split("\\");n.pop();return"\\\\"+w(n,"\\")}n=y(e).split("\\");n.pop();return 1===n.length?n[0]+"\\":w(n,"\\")}function x(e){return e.replace(/[0-9]+/g,function(e){var n=e.length,t=""+n,r="000",o=r.substring(0,r.length-t.length)+t;return o+""+e})}function k(e,n,t){e.sort(function(e,r){return S(e[n],r[n],t)})}function S(e,n,t){var r=x(e).toLowerCase(),o=x(n).toLowerCase();return r.localeCompare(o,t)}function E(e,n){if(!e)throw new Error("Haystack is undefined.");if(!n)throw new Error("Needle is undefined.");return-1!==e.indexOf(n)}function R(e,n,t){e+="";n+="";if(!n)return 0;var r=n.match(/^\/(.*)\/([a-z]*)$/);if(!r){if(!t){e=e.toLowerCase();n=n.toLowerCase()}var o=0,i=0;var a=n.length;var c=false;while(!c){i=e.indexOf(n,i);if(i>=0){o++;i+=a}else c=true}return o}try{var s=new RegExp(r[1],-1===r[2].indexOf("i")?"":"i");return e.split(s).length-1}catch(e){return 0}}function O(e){return e.substring(e.lastIndexOf("\\")+1,e.length)}function C(e){return e.substring(0,e.lastIndexOf("\\")+1)}function j(e){var n=e.match(/.*\\(.*)\\.*$/);n||(n=e.match(/^(.*)\\.*$/));return n?n[1]:null}function L(e){return!(!e||"false"===e)}function T(e){var n=3;return(Math.min(e,n)*r+Math.max(e-n,0)*t)/o}function N(e){if(!e)return{latin:0,cjk:0};var n=e.match(/[\u4E00-\u9FFF]/g);var t=e.match(/[\u3040-\u309F]/g);var r=e.match(/[\u30A0-\u30FF]/g);n=n?n.length:0;t=t?t.length:0;r=r?r.length:0;var o=n+t+r;return{latin:e.length-o,cjk:o}}function F(e,n){var t={latin:0,cjk:0};void 0===n?e.forEach(function(e){var n=N(e.qText);t.latin+=n.latin;t.cjk+=n.cjk}):e.forEach(function(e){var r=N(e[n].qText);t.latin+=r.latin;t.cjk+=r.cjk});var r=Math.max(1,t.latin+t.cjk);t.latinRatio=t.latin/r;t.cjkRatio=t.cjk/r;return t}function D(e,n,t){var r=F(n,t);var o=r.latinRatio*e;var i=r.cjkRatio*e;var c=Math.ceil(T(o)+i*a);return c}function P(e,n,t){var r=e<=24?n:t;return e*r}function M(e,n,t,r,o){return e*t+P(n,r,o)}return{MIN_CONNECTION_NAME_LENGTH:e,MAX_CONNECTION_NAME_LENGTH:n,isValidConnectionName:c,isValidFieldName:s,isValidUrl:l,prefixHttpToUrl:d,endsWith:f,startsWith:u,goUpOneFolderLevel:b,removeSurroundingSlashes:y,arrayToString:w,formatDirectoryPathForEngine:m,sortSlightlyMoreNaturallyArray:k,sortSlightlyMoreNaturallySingle:S,_expandNumbersForNaturalSorting:x,getValueFromConnectionString:v,tokenizeConnectionString:g,contains:E,occurrencesRE:R,combinePath:p,fileNameFromPath:O,fileDirectoryFromPath:C,lastFolderFromPath:j,bool:L,stringWidthOverMWidth:T,getCharacterRatios:N,getTotalCharacterRatios:F,getAdjustedMaxGlyphCount:D,estimateLatinLabelWidth:P,estimateLabelWidth:M}}.apply(n,r),void 0!==o&&(e.exports=o))},197:function(e,n,t){"use strict";var r,o;!(r=[t(54),t(118)],o=function(e,n){var t="localstorageservice";function r(n){if(!e.isString(n))throw new Error('The key "'+n+'" is not a String.');return t+"."+n}function o(n,t,o){var i=(new Date).getTime(),a,c;if(!e.isString(n))throw new Error('The key "'+n+'" is not a String.');if(!e.isObject(t))throw new Error('The value "'+t+'" for the key "'+n+'" is not valid object.');if(o){if(!e.isNumber(o))throw new Error('The time to live value "'+o+'" is not numeric.');o+=i}c={timeToLive:o,value:t};a=JSON.stringify(c);localStorage[r(n)]=a}function i(n){if(!e.isString(n))throw new Error('The key "'+n+'" is not a String.');var t=e.isEmpty(localStorage[r(n)]);return!t}function a(n,t){if(!e.isString(n))throw new Error('The key "'+n+'" is not a String.');if(!i(n)){if(void 0!==t)return t;throw new Error('There is no data set for the key "'+n+'". Please use contains() first to verify you should actually do a get().')}var r=c(n);return r.value}function c(e){var n=JSON.parse(localStorage[r(e)]);return n}function s(n){if(!e.isString(n))throw new Error('The key "'+n+'" is not a String.');if(!i(n))throw new Error('There is no data set for the key "'+n+'". Please use contains() first to verify you should actually do a get().');delete localStorage[r(n)]}function l(){var r,o,i;for(r in localStorage)if(n.startsWith(r,t)){r=r.substring(t.length+1);o=c(r);i=(new Date).getTime();e.isNumber(o.timeToLive&&i>o.timeToLive)&&s(r)}}return{set:o,get:a,contains:i,clean:l,remove:s}}.apply(n,r),void 0!==o&&(e.exports=o))},308:function(e,n,t){"use strict";var r,o;!(r=[t(197)],o=function(e){var n=e.get("deviceType",{value:"auto"}).value;return{deviceType:n}}.apply(n,r),void 0!==o&&(e.exports=o))},58:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=r;function r(){return Promise.all([t.e(1),t.e(3),t.e(6),t.e(5),t.e(64)]).then(t.t.bind(null,80,7))}e.exports=n.default},88:function(e,n,t){"use strict";var r,o;var i=Date.now();!(r=[t(58),t(11),t(308)],o=function(e,n,r){var o=function e(n){console.log("page load: "+n+", after: "+(Date.now()-i))};e().then(function(e){o("loadQlik().then(...) inside");var i=function(){var e=[];var n=false;var t=false;function r(e){var n=e?e.error:void 0;i(n,e)}function o(e){var n=e?e.reason:void 0;i(n,e)}function i(n,t){e.forEach(function(e){e(n,t)})}return{start:function e(){if(t)return;if(!n){window.addEventListener("error",r);window.addEventListener("unhandledrejection",o);n=true}t=true},stop:function e(){if(!t)return;window.removeEventListener("error",r);window.removeEventListener("unhandledrejection",o);n=false;t=false},addListener:function n(t){"function"===typeof t&&e.push(t)},removeListener:function n(t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},removeAllListeners:function n(){e.length=0},flush:function e(){this.removeAllListeners();this.stop()}}}();function a(e){return(RegExp(e+"=([^&]*)(&|$)").exec(location.search)||[null,null])[1]}function c(e){return!/^(false|0)$/i.test(e)&&!!e}var s=a("wssecure")?c(a("wssecure")):"https:"===window.location.protocol;var l=a("replayids");var d=l?unescape(l).split(","):[];var u=1*(a("multiinterval")||5);var f=a("nettimeout")||2e4;var w=a("wsclosedelay")||500;var h=1*(a("pollinterval")||100);var v=5;var p=setTimeout;var g=a("opt"),y=a("callback")||"nprinting";var m;var b=false;var x;var k=document.getElementById("cover");var S={};var E=Date.now();var R=0;var O;var C=false;var j=a("logging");var L=j?unescape(j):"";var T=L.indexOf("full")>-1;var N=T||L.indexOf("canvas")>-1;var F=T||L.indexOf("timeout")>-1;var D=T||L.indexOf("frame")>-1;var P=T||L.indexOf("net")>-1;var M=T||L.indexOf("ws")>-1;var A=T||N||F||D||P||L.indexOf("simple")>-1;var W=function e(n,t){return"driverid:"+_+", index: "+R+", after: "+(Date.now()-E)+", "+n+": "+t};var $=function e(n){console.log(W("render",n))};var H=N?function(e){console.log(W("canvas",e))}:function(){};var I=A?function(e){console.log(W("message",e))}:function(){};var V=P?function(e){console.log(W("network",e))}:function(){};var z=M?function(e){console.log(W("ws",e))}:function(){};var _=a("driverid")||"unknown";var J=a("wshost");var U=a("wsport");var q=a("wsprefix");console.log("parameters: wshost="+J+", wsport="+U+", wsprefix="+q+", wssecure="+s+", driverid="+_+", change poll interval="+h+", multi change check interval="+u+",url="+window.location);var B=new window.Proxy(window.WebSocket,{construct:function e(n,t){var r=new n(t.slice(0));var o=function e(){console.log("ws open");C=true};var i=function e(n){if(!b)return;var t=JSON.parse(n.data);V("ws message, id="+t.id);M&&z("ws message, id="+t.id+", data="+n.data)};var a=function e(){console.log("ws close");r.removeEventListener("open",o);r.removeEventListener("message",i);r.removeEventListener("close",e);C=false};r.addEventListener("open",o);r.addEventListener("message",i);r.addEventListener("close",a);var c=new window.Proxy(r.send,{apply:function e(n,t,r){if(b){var o=JSON.parse(r);V("ws send, id="+o.id+" , method="+o.method);M&&z("ws send, id="+o.id+" , data="+r)}n.apply(t,r)}});r.send=c;return r}});window.WebSocket=B;var G=new window.Proxy(HTMLCanvasElement.prototype.getContext,{apply:function e(n,t,r){var o=n.apply(t,r);var i={get:function e(n,t){O=Date.now();H("canvas context get");if("function"===typeof n[t])return n[t].bind(n);return window.Reflect.get(n,t,n)},set:function e(n,t,r){O=Date.now();H("canvas context set");return window.Reflect.set(n,t,r,n)}};var a=new window.Proxy(o,i);return a}});window.HTMLCanvasElement.prototype.getContext=G;var Q=function e(n){return function(e){var t="";var r=-1;if(e){r=e.code;var o=e.stack||e.stacktrace||"";t=e.message+"\nstack:\n"+o}var i=m?n+": "+t+" ("+m.id+")":n+": "+t;y&&window[y].onError&&window[y].onError(r,t);console.log("driverid:"+_+", "+i)}};e.setOnError(Q("qlik.setOnError"));g&&g.indexOf("debug")>-1;var X=function e(){var n=0;O=E;var t;var r=function e(){O=Date.now()};var o=function e(){E=Date.now();n=0;r();b=true;i.start();i.addListener(function(e){I("unhandled exception: "+e.message||false);y&&window[y].onError&&window[y].onError(-2,"js unhandled exception: "+e.message||false)});I("tracking started")};var a=function e(){b=false;r();i.flush();I("tracking stopped")};var c=function e(){a();requestAnimationFrame(function(e){return function(){$("onRendered for "+e);window[y]&&window[y].onRendered&&window[y].onRendered(e)}}(t))};var s={started:function e(){return b},start:function e(){if(b)return false;o();return true},stop:function e(){a()},notifyOnRendered:function e(r){if(!b)return;console.log("driverid:"+_+", notifyOnRendered for "+r+" called after: "+(Date.now()-E));t=r;O=Date.now();if(!n){n=O;c(O)}}};return s};var K;Promise.all([t.e(1),t.e(10),t.e(11),t.e(94)]).then(function(){var a=[t(48),t(90),t(91),t(49),t(2647)];(function(t,a,c,l,u){var b={host:window.location.hostname,prefix:window.location.pathname.replace("/printing-live/","/").replace(/[^/]+\/[^/]+$/i,""),port:window.location.port,isSecure:s,featureFlags:[]};null!==J&&(b.host=decodeURIComponent(J));null!==U&&(b.port=decodeURIComponent(U));null!==q&&(b.prefix=decodeURIComponent(q));var O=Q("renderStop()");function j(e,n){var t,r,o;var i=document.body;if(i.offsetWidth!=window.innerWidth||i.offsetHeight!=window.innerHeight){$("body unexpected size compare to window: expected (w,h): ("+window.innerWidth+","+window.innerHeight+"), was ("+document.body.width+","+document.body.height+")");document.body.width=window.innerWidth;document.body.height=window.innerHeight}k.width=window.innerWidth;k.height=window.innerHeight;var a=T(e);var c=[e];c.push(JSON.stringify(a));$("paintCheckRects("+c.join(",")+")");for(var s=0;s<a.length;s++){t=a[s];r=n[s];o=document.createElement("div");o.id="check"+s;o.style.position="absolute";o.style.left=t[0]+"px";o.style.top=t[1]+"px";o.style.width=e+"px";o.style.height=e+"px";o.style.display="block";o.style.color="rgba("+r[0]+","+r[1]+","+r[2]+",255)";o.style.backgroundColor="rgba("+r[0]+","+r[1]+","+r[2]+",255)";k.appendChild(o)}}var L=function e(){var n=window.devicePixelRatio;return n<1?Math.floor(1/n):Math.ceil(1/n)};var T=function e(n){var t=document.body.getBoundingClientRect();return[[0,0],[t.width-n,0],[t.width-n,t.height-n],[0,t.height-n]]};var N=function e(){return[[0,0,0],[255,0,0],[0,0,255],[0,255,0]]};function F(e){e||(e=L());var n=[e,0,e,0];var t=document.getElementById("content");var r=t.cloneNode(false);r.id=t.id+R;var o=document.body.getBoundingClientRect();r.style.width=o.width-n[1]-n[3]+"px";r.style.height=o.height-n[0]-n[2]+"px";r.style.padding="0";r.style.margin=n.join("px ")+"px";t.parentNode.insertBefore(r,t);r.style.display="block";return r}function D(){if(!x)return;var e=n(x).scope();e&&"function"===typeof e.$broadcast&&e.$broadcast("$destroy");x.innerHTML="";x.parentNode.removeChild(x);x=null}function P(){k.width=window.innerWidth;k.height=window.innerHeight;k.innerHTML=""}function M(e){if(!C){window[y]&&window[y].onStopped&&p(function(){$("onStopped() called after msec "+w);window[y].onStopped()},w);m=null;D();return}if(Date.now()-e>f){O("websocket close timed out after msec:"+f);return}p(M.bind(this),h,e)}var A={stopRender:function e(){$("stopRender() called");try{if(!x){window[y]&&window[y].onStopped&&window[y]&&window[y].onStopped();return}k.style.display="block";x.style.display="none";K.started()&&K.stop();K=null;i.flush();m?m.close().then(function(){M(Date.now())}).catch(O):D()}catch(e){O(e);return null}return true},render:function o(i,s,f,w,h){R++;"string"===typeof h&&(h=JSON.parse(h));var v={transparentBackground:false,language:"en-US"};var p=a.extend(true,v,h||{});S=p||{};S.checkRectSize=S.checkRectSize||L();S.checkColors=S.checkColors||N();var k=Array.prototype.slice.call(arguments,0,-1);k.push(JSON.stringify(p));if(K&&K.started()){var O="error, render is ongoing, trying to call: render('"+k.join("','")+"')";$(O);y&&window[y].onError&&window[y].onError(1,O);return}this.clear();x=F(S.checkRectSize);K=X();if(window.replay)if(0===d.length)window.replay.reset(this.render.bind(this,arguments));else{window.replay.reset(this.render.bind(this,i,s,f,d[window.replay.objIdx],p.transparentBackground,p));window.replay.maxRetry=d.length;window.replay.objIdx++}if(x){x.style.backgroundColor=p.transparentBackground?"transparent":"#FFFFFF";if(p.objectSize){x.style.width=p.objectSize.w+"px";x.style.height=p.objectSize.h+"px"}}this.show();E=Date.now();$("render('"+k.join("','")+"')");var C=Q("render('"+k.join("','")+"')");try{K.start();if(!i){n(x).html("App not specified");return null}var j=Object.assign({},b);s&&(j.identity=decodeURIComponent(s));if(p&&p.wsParams){var T=p.wsParams;"string"===typeof T.host&&T.host.length>0&&(j.host=T.host);"string"===typeof T.prefix&&T.prefix.length>0&&(j.prefix=T.prefix);"number"===typeof T.port&&T.port>0&&(j.port=T.port);"boolean"===typeof T.secure&&(j.isSecure=T.secure)}p&&p.deviceType&&(r.deviceType=p.deviceType);if(!m||m.id!==i||m.global.session.options.identity!==j.identity){$("opening "+i+" with session "+s);m=e.openApp(decodeURIComponent(i),j);if(!m){n(x).html("Can not open App "+i);return null}}if(g&&g.indexOf("noanimate")>-1){n("body").addClass("noanimate");var D=t.getService("$animate");D.enabled(false)}var P=[];P.push(c.setup({context:"client",language:p.language}));p.theme&&P.push(e.theme.apply(p.theme));Promise.all(P).then(function(){var e;if(p.forceFlags&&p.forceFlags.length){var t=l.get();for(e=0;e<p.forceFlags.length;e++)t[p.forceFlags[e]]=true}switch(f){case"object":var r={};p.viewState&&!n.isEmptyObject(p.viewState)&&(r.viewState=p.viewState);u.renderObject(m,x,w,r).then(function(e){var n=e.Validated?e:e.model&&e.model.Validated?e.model:null;n||C("property Validated could not be found");$("renderObject finished for object id:"+e.id);window[y]&&window[y].onValid&&window[y].onValid(e.id);if(window[y]&&window[y].onRendered){$("onRendered for obj"+e.id+" called after: "+(Date.now()-E));K.notifyOnRendered(e.id)}}).catch(function(e){C({message:"renderObject rejected for obj: "+w+", error: "+e,code:-1})});break;case"snapshot":m.getSnapshot(x,w).then(function(e){window[y]&&window[y].onValid&&window[y].onValid(e.id);if(window[y]&&window[y].onRendered){$("onRendered for snapshot"+e.id+" called after: "+(Date.now()-E));K.notifyOnRendered(e.id)}}).catch(Q("app.getSnapshot("+x+","+w+")"));break;case"sheet":$("requesting sheet: "+w);u.renderSheet(m,x,w).then(function(e){$("renderSheet finished for sheet id:"+w);var n=e.map(function(e){return e.id?e.id:e}).join(",");$("rendered objects: "+n);window[y]&&window[y].onValid&&window[y].onValid(w);if(window[y]&&window[y].onRendered){$("onRendered for sheet "+w+" called after: "+(Date.now()-E));K.notifyOnRendered(w)}}).catch(function(e){C("error rendering sheet, error: "+e)});break}});return m}catch(e){C(e);return null}},paintCoverPoints:function e(){console.log("paintCoverPoints() called");P();S.checkRectSize=S.checkRectSize||L();S.checkColors=S.checkColors||N();j(S.checkRectSize,S.checkColors);return true},clearCoverPoints:function e(){P()},clear:function e(){$("clear() called");P();D();return true},show:function e(){$("show() called");x&&(x.style.display="block");x.style.display="block";return true},hide:function e(){$("hide() called");k.style.display="none";x&&(x.style.display="none");return true}};window.qlikPrintingService=A;if(window[y]&&window[y].onReady){window[y].onReady();o("onReady callback after call")}else(function(){var e=0;var n=1e3;var t=2e3;var r=function r(i,a){var c=Date.now()-i;if(c>t||a===n){var s=Math.ceil(c/a);console.log(s);v=v<s?s:v;if(window[y]&&window[y].onReady){window[y].onReady();o("fallback: onReady callback after call")}else console.log("fallback: missing callback: onready")}else p(r,e,i,a+1)};p(r,e,Date.now(),1)})()}).apply(null,a)}).catch(t.oe)})}.apply(n,r),void 0!==o&&(e.exports=o))}}]);