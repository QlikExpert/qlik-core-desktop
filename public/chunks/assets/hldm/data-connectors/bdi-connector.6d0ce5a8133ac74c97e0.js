/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[26,13],Array(100).concat([function(t,e,n){"use strict";var i,s;!(i=[n(89),n(102),n(162),n(1062),n(599),n(603),n(327),n(49),n(261),n(193)],s=function(t,e,n,i,s,o,r,a){var l="sense";var c=null;var u=[];var d={};var p={};var h=true;var f={};var g=new s({providers:{default:true,qrs:!a.getFlag("DISABLE_ONPREM_THEMES"),rls:a.getFlag("CLOUD_THEMES")}});function v(){u.forEach(function(t){t.node.parentNode.removeChild(t.node);o.toggleCssClass(t.cssClass,false)});u=[]}e.create(f,"ThemeChanged");f.getCurrentTheme=function(){return c||l};f.applyTheme=function(e){var n=new t;e===c&&n.resolve(true);g.getRawJson(e).then(function(t){var s=o.parseTheme(t,i,true);c&&v();g.getThemePath(e).then(function(t){g.getResourceUrlParams(e).then(function(i){u=o.injectExtraStyleNodes(s,t,i);d=s;c=e;Object.keys(p).forEach(function(t){p[t].setTheme(c,d)});y();f.ThemeChanged.emit();n.resolve(true)})})}).catch(function(){n.resolve(false)});return n.promise};f.getThemeJSON=function(e){var n=new t;g.getRawJson(e).then(function(t){n.resolve(o.parseTheme(t,i,true))}).catch(function(t){n.reject(t)});return n.promise};f.saveTheme=function(t){n.setProperties({theme:t||f.getCurrentTheme()})};f.isValidTheme=function(e){return g.getType(e).then(function(){return t.resolve(true)}).catch(function(){return t.resolve(false)})};f.getAvailableThemes=function(){return g.getAvailableThemes()};f.getCustomThemesPage=function(t){return g.getCustomThemesPage(t)};f.getPagesTotal=function(){return g.getPagesTotal()};Object.defineProperty(f,"currentPalette",{iterable:false,get:function t(){var e;e=d.palettes&&d.palettes.ui&&d.palettes.ui[0]?d.palettes.ui[0].colors:i.palettes.ui[0].colors;"none"!==e[0]&&e.unshift("none");return e}});Object.defineProperty(f,"smallPalette",{iterable:false,get:function t(){return m}});Object.defineProperty(f,"firstPalette",{iterable:false,get:function t(){return d.palettes&&d.palettes.ui&&d.palettes.ui[0]?d.palettes.ui[0]:i.palettes.ui[0]}});Object.defineProperty(f,"themePalettes",{iterable:false,get:function t(){var e=[],n;for(var s=0;s<d.palettes.ui.length;s++)if(d.palettes&&d.palettes.ui&&d.palettes.ui[s]){n=d.palettes.ui[s];e.push(n)}else{n=i.palettes.ui[0];e.push(n)}return e}});Object.defineProperty(f,"deprecatedPalette",{iterable:false,get:function t(){return m}});Object.defineProperty(f,"scales",{iterable:false,get:function t(){return d.scales||i.scales}});Object.defineProperty(f,"dataPalettes",{iterable:false,get:function t(){return d.palettes&&d.palettes.data||i.palettes.data}});Object.defineProperty(f,"dataColors",{iterable:false,get:function t(){return d.dataColors||i.dataColors}});f.initializeService=function(t){p[t]||(p[t]=new r(t,c,d));return p[t]};f.getMatch=function(t){var e,n={linechart:"lineChart",barchart:"barChart",scatterplot:"scatterPlot",piechart:"pieChart",straightable:"straightTable",pivottable:"pivotTable",table:"straightTable","pivot-table":"pivotTable",listbox:"listBox",referenceline:"referenceLine",datacolors:"dataColors","text-image":"textImage",boxplot:"boxPlot",map:"mapChart",mapchart:"mapChart"};e=n[t.toLowerCase()]?n[t.toLowerCase()]:t;return e};var m=["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"];var b=["none","#ffffff","#46c646","#276e27","#b6d7ea","#7db8da","#4477aa","#8e477d","#ffcf02","#f8981d","#f93f17","#633d0c","#b0afae","#7b7a78","#545352","#000000"];function y(){var t=f.currentPalette;var e=true;t.forEach(function(t,n){b[n]&&b[n].toLowerCase()===t.toLowerCase()||(e=false)});h=e}f.resolveColor=function(t,e){e=e||f.currentPalette;if("undefined"!==typeof t&&null!==t){if(void 0!==t.index&&-1!==t.index&&e[t.index])return e[t.index];if(void 0!==t.color)return t.color?t.color:"none";if(h&&m[t])return m[t];if(e[t])return e[t];return t||"none"}return"none"};f.mapIndex=function(t,e,n){n=n||f.currentPalette;var i=e?n:m,s=e?m:n;t=s.indexOf(i[t]);return-1!==t?t:e?3:6};f.getPaletteScale=function(t,e){var n=this.dataPalettes;var i;n.some(function(e){if(e.propertyValue.toLowerCase()===t.toLowerCase()){i=e;return true}return false});i||(i=n[0]);if("pyramid"===i.type){e=e||i.scale.length;var s=Math.max(Math.min(i.scale.length-1,e-1)%i.scale.length,0);return i.scale[s]}return i.scale};f.hasCardLayout=function(){return!!d._cards};c=l;d=o.parseTheme(i,i,true);return f}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(90)],s=function(t){function e(t){return"object"===o(t.items)&&"array"!==t.type&&("items"===t.type||"items"===t.component||"expandable-items"===t.component||"accordion"===t.component||!t.type&&!t.component)}function n(t,e,n){if("string"!==typeof e)return e;switch(t){case"integer":e=parseInt(e,10);Number.isNaN(+e)&&(e=n);break;case"number":e=parseFloat(e);Number.isNaN(+e)&&(e=n);break;case"boolean":e="true"===e;break}return e}function i(t,e){if("function"===typeof e.defaultValue)return e.defaultValue();if("undefined"!==typeof e.defaultValue)return e.defaultValue;if(Array.isArray(e.options))return e.options[0].value;switch(t){case"array":return[];case"string":return"";case"integer":return 0;case"number":return 0;case"boolean":return false;default:return null}}function s(n){var s={};function o(n){var r,a,l;if(n.schemaIgnore)return;if(e(n)){r=Object.keys(n.items);for(l=0;l<r.length;l++){a=n.items[r[l]];a&&o(a)}}else n.ref&&!n.schemaIgnore&&t.setValue(s,n.ref,i(n.type,n))}if("array"===n.type&&n.items){s={};o({type:"items",items:n.items})}else o(n);return s}function r(t,e){return"undefined"!==typeof e.undefinedValue?e.undefinedValue:i(t,e)}return{getValue:t.getValue,setValue:t.setValue,getTypeValue:n,getDefaultValue:i,getDefaults:s,isHierarchical:e,getUndefinedValue:r}}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t=null;function e(t,e,n,i){e=e||"model";var s=function i(){var s=this;var o=this.getLayout();t.__layoutRPCId=o.rpcId;o.then(function(i){var o=t.$eval(e);if(o!==s)return;n&&n(i)}).catch(function(){})},o,r,a;function l(){var n=t.$eval(e);n&&n.Invalidated&&n.Invalidated.unbind(o)}a=t.$on("$destroy",function(){l()});r=t.$watch(e,function(t,e){e&&e!==t&&e.Invalidated&&e.Invalidated.unbind(o);if(t&&(!t.isClosing||!t.isClosed)){i&&i(t);t.getLayout().then(n);o=s.bind(t);t.Invalidated.bind(o)}});return function(){l();r();a();n&&(n=null);i&&(i=null)}}function n(){return(t||e).apply(this,arguments)}n.mock=function(e){t=e};return n}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(92),n(605)],s=function(t,e){var n=/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/i,i=/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d(\.\d+)?)\)$/i,s=/^#([A-f0-9]{2})([A-f0-9]{2})([A-f0-9]{2})$/i,o=/^#([A-f0-9])([A-f0-9])([A-f0-9])$/i,r=/^hsl\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*\)$/i,a=/^hsla\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*,(\d(\.\d+)?)\)$/i,l=Math.floor,c=Math.round,u;u=t.extend({init:function t(){var n=0,i=0,s=0,o=1,r,a,d,p,h,f,g,v,m,b,y,x;this._invalid=false;if(arguments[0]instanceof u){n=arguments[0]._r;i=arguments[0]._g;s=arguments[0]._b;o=arguments[0]._a;this._invalid=arguments[0]._invalid}else if(arguments.length<3)if("string"===typeof arguments[0]){x=arguments[0];if(y=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i.exec(x)){n=parseInt(y[1],10);i=parseInt(y[2],10);s=parseInt(y[3],10)}else if(y=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d(\.\d+)?)\s*\)$/i.exec(x)){n=parseInt(y[1],10);i=parseInt(y[2],10);s=parseInt(y[3],10);o=parseFloat(y[4])}else if(y=/^#([A-f0-9]{2})([A-f0-9]{2})([A-f0-9]{2})$/i.exec(x)){n=parseInt(y[1],16);i=parseInt(y[2],16);s=parseInt(y[3],16);o=1}else if(y=/^#([A-f0-9])([A-f0-9])([A-f0-9])$/i.exec(x)){n=parseInt(y[1]+y[1],16);i=parseInt(y[2]+y[2],16);s=parseInt(y[3]+y[3],16);o=1}else if(y=/^hsl\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*\)$/i.exec(x)){r=parseFloat(y[1]);a=parseFloat(y[3]);p=parseFloat(y[5]);r%=360;a/=100;p/=100;r=r<0?0:r>360?360:r;a=a<0?0:a>1?1:a;p=p<0?0:p>1?1:p;f=p<=.5?2*p*a:(2-2*p)*a;g=r/60;v=f*(1-Math.abs(g%2-1));m=[];g=Math.floor(g);switch(g){case 0:m=[f,v,0];break;case 1:m=[v,f,0];break;case 2:m=[0,f,v];break;case 3:m=[0,v,f];break;case 4:m=[v,0,f];break;case 5:m=[f,0,v];break;default:m=[0,0,0]}b=p-.5*f;n=m[0]+b;i=m[1]+b;s=m[2]+b;n=c(255*n);i=c(255*i);s=c(255*s);o=1}else if(y=/^hsla\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*,(\d(\.\d+)?)\)$/i.exec(x)){r=parseFloat(y[1]);a=parseFloat(y[3]);p=parseFloat(y[5]);o=parseFloat(y[7]);r%=360;a/=100;p/=100;r=r<0?0:r>360?360:r;a=a<0?0:a>1?1:a;p=p<0?0:p>1?1:p;f=p<=.5?2*p*a:(2-2*p)*a;g=r/60;v=f*(1-Math.abs(g%2-1));m=[];g=Math.floor(g);switch(g){case 0:m=[f,v,0];break;case 1:m=[v,f,0];break;case 2:m=[0,f,v];break;case 3:m=[0,v,f];break;case 4:m=[v,0,f];break;case 5:m=[f,0,v];break;default:m=[0,0,0]}b=p-.5*f;n=m[0]+b;i=m[1]+b;s=m[2]+b;n=c(255*n);i=c(255*i);s=c(255*s)}else if(y=/^hsv\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*\)$/i.exec(x)){r=parseFloat(y[1]);a=parseFloat(y[3]);h=parseFloat(y[5]);r%=360;a/=100;h/=100;r=r<0?0:r>360?360:r;a=a<0?0:a>1?1:a;h=h<0?0:h>1?1:h;f=h*a;g=r/60;v=f*(1-Math.abs(g%2-1));m=[];g=Math.floor(g);switch(g){case 0:m=[f,v,0];break;case 1:m=[v,f,0];break;case 2:m=[0,f,v];break;case 3:m=[0,v,f];break;case 4:m=[v,0,f];break;case 5:m=[f,0,v];break;default:m=[0,0,0]}b=h-f;n=m[0]+b;i=m[1]+b;s=m[2]+b;n=c(255*n);i=c(255*i);s=c(255*s);o=1}else if(e[x.toLowerCase()]){d=x.toLowerCase();n=e[d].r;i=e[d].g;s=e[d].b;o="number"===typeof e[d].a?e[d].a:1}else this._invalid=true}else if("number"===typeof arguments[0]&&arguments[0]>=0&&"argb"===arguments[1]){o=(4278190080&arguments[0])>>>24;o/=255;n=(16711680&arguments[0])>>16;i=(65280&arguments[0])>>8;s=255&arguments[0]}else if("number"===typeof arguments[0]&&arguments[0]>=0){n=(16711680&arguments[0])>>16;i=(65280&arguments[0])>>8;s=255&arguments[0]}else this._invalid=true;else if(arguments.length>=3){n=arguments[0];i=arguments[1];s=arguments[2];o=arguments.length>=4?arguments[3]:1}else this._invalid=true;Number.isNaN(+n+i+s+o)&&(this._invalid=true);this._r=l(n);this._g=l(i);this._b=l(s);this._a=o;this._spaces={}},isInvalid:function t(){return this._invalid},setAlpha:function t(e){this._a=e;this._spaces={}},getAlpha:function t(){return this._a},toRGB:function t(){this._spaces.rgb||(this._spaces.rgb=u.toRGB(this));return this._spaces.rgb},toRGBA:function t(){this._spaces.rgba||(this._spaces.rgba=u.toRGBA(this));return this._spaces.rgba},toString:function t(){this._spaces.rgb||(this._spaces.rgb=u.toRGB(this));return this._spaces.rgb},toHex:function t(){this._spaces.hex||(this._spaces.hex=u.toHex(this));return this._spaces.hex},toHSL:function t(e){this._spaces.hsl||(this._spaces.hsl=u.toHSL(this,e));return this._spaces.hsl},toHSLA:function t(e){this._spaces.hsla||(this._spaces.hsla=u.toHSLA(this,e));return this._spaces.hsla},toHSV:function t(){var e=this.toHSVComponents();return"hsv("+e.h+","+e.s+","+e.v+")"},toHSVComponents:function t(){this._spaces.hsvComp||(this._spaces.hsvComp=u.toHSVComponents(this));return this._spaces.hsvComp},toNumber:function t(){this._spaces.num||(this._spaces.num=u.toNumber(this));return this._spaces.num},isDark:function t(){return this.isInvalid()||this.getLuminance()<125},getLuminance:function t(){"undefined"===typeof this._lumi&&(this._lumi=.299*this._r+.587*this._g+.114*this._b);return this._lumi},shiftLuminance:function t(e){var n,i,s,o,r,a=this.toHSLA();r=/^hsla\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*,(\d(\.\d+)?)\)$/i.exec(a);n=parseFloat(r[1]);i=parseFloat(r[3]);s=parseFloat(r[5]);o=parseFloat(r[7]);s+=e;s=Math.max(0,Math.min(s,100));return"hsla("+n+","+i+","+s+","+o+")"},isEqual:function t(e){if(e instanceof u)return this._r===e._r&&this._g===e._g&&this._b===e._b;e=new u(e);return this._r===e._r&&this._g===e._g&&this._b===e._b},blend:function t(e,n){var i=l(this._r+(e._r-this._r)*n),s=l(this._g+(e._g-this._g)*n),o=l(this._b+(e._b-this._b)*n),r=l(this._a+(e._a-this._a)*n);return"rgba("+[i,s,o,r].join(",")+")"},createShiftedColor:function t(e){(void 0===e||Number.isNaN(+e))&&(e=1);var n=this.getLuminance(),i=this._g<126?1:1+this._g/512,s=this.shiftLuminance(20*(n*i<220?.8+1/(n+1)*4:-(.8+n/255*1))*e);return new u(s)}});u.toRGB=function t(e){if(e instanceof u)return"rgb("+[e._r,e._g,e._b].join(",")+")";"string"===typeof e&&(e=u.toNumber(e));var n=(16711680&e)>>16,i=(65280&e)>>8,s=255&e;return"rgb("+n+","+i+","+s+")"};u.toRGBA=function t(e,n){if(e instanceof u)return"rgba("+[e._r,e._g,e._b,"undefined"!==typeof n?n:e._a].join(",")+")";"string"===typeof e&&(e=u.toNumber(e));var i=(16711680&e)>>16,s=(65280&e)>>8,o=255&e;return"rgba("+i+","+s+","+o+","+("undefined"!==typeof n?n:e._a)+")"};u.toHex=function t(e){var n,i,s;if(e instanceof u){n=e._r.toString(16);i=e._g.toString(16);s=e._b.toString(16);1===n.length&&(n="0"+n);1===i.length&&(i="0"+i);1===s.length&&(s="0"+s);return"#"+[n,i,s].join("")}"string"===typeof e&&(e=u.toNumber(e));n=((16711680&e)>>16).toString(16);i=((65280&e)>>8).toString(16);s=(255&e).toString(16);1===n.length&&(n="0"+n);1===i.length&&(i="0"+i);1===s.length&&(s="0"+s);return"#"+n+i+s};u.toHSL=function(t,e){var n,i,s,o=0,r,a,l,c,d;"string"===typeof t&&(t=new u(t));n=t._r/255;i=t._g/255;s=t._b/255;l=Math.max(n,i,s);c=Math.min(n,i,s);a=e?.21*n+.72*i+.07*s:(l+c)/2;if(l===c){r=0;o=0}else{d=l-c;r=a>.5?d/(2-l-c):d/(l+c);switch(l){case n:o=(i-s)/d+(i<s?6:0);break;case i:o=(s-n)/d+2;break;case s:o=(n-i)/d+4;break}o/=6}return"hsl("+360*o+","+100*r+","+100*a+")"};u.toHSLA=function(t,e){var n,i,s,o,r=0,a,l,c,d,p;"string"===typeof t&&(t=new u(t));n=t._r/255;i=t._g/255;s=t._b/255;o=t._a;c=Math.max(n,i,s);d=Math.min(n,i,s);l=e?.21*n+.72*i+.07*s:(c+d)/2;if(c===d){a=0;r=0}else{p=c-d;a=l>.5?p/(2-c-d):p/(c+d);switch(c){case n:r=(i-s)/p+(i<s?6:0);break;case i:r=(s-n)/p+2;break;case s:r=(n-i)/p+4;break}r/=6}return"hsla("+360*r+","+100*a+","+100*l+","+o+")"};u.toHSVComponents=function(t){var e,n,i,s=0,o,r,a,l,c;"string"===typeof t&&(t=new u(t));e=t._r/255;n=t._g/255;i=t._b/255;a=Math.max(e,n,i);l=Math.min(e,n,i);r=a;if(a===l){o=0;s=0}else{c=a-l;o=0===c?0:c/r;switch(a){case e:s=(n-i)/c+(n<i?6:0);break;case n:s=(i-e)/c+2;break;case i:s=(e-n)/c+4;break}s/=6}return{h:360*s%360,s:100*o,v:100*r}};u.toNumber=function t(){if(1===arguments.length&&arguments[0]instanceof u)return(arguments[0]._r<<16)+(arguments[0]._g<<8)+arguments[0]._b;var e=0,n=0,i=0,s,o;if(1===arguments.length&&"string"===typeof arguments[0]){o=arguments[0];if(s=/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/i.exec(o)){e=parseInt(s[1],10);n=parseInt(s[2],10);i=parseInt(s[3],10)}else if(s=/^#([A-f0-9]{2})([A-f0-9]{2})([A-f0-9]{2})$/i.exec(o)){e=parseInt(s[1],16);n=parseInt(s[2],16);i=parseInt(s[3],16)}else if(s=/^#([A-f0-9])([A-f0-9])([A-f0-9])$/i.exec(o)){e=parseInt(s[1]+s[1],16);n=parseInt(s[2]+s[2],16);i=parseInt(s[3]+s[3],16)}}return(e<<16)+(n<<8)+i};u.blend=function t(e,n,i){e=u.toNumber(e);n=u.toNumber(n);var s=(16711680&e)>>16,o=(65280&e)>>8,r=255&e,a=(16711680&n)>>16,l=(65280&n)>>8,c=255&n,d=s+(a-s)*i,p=o+(l-o)*i,h=r+(c-r)*i;return(d<<16)+(p<<8)+h};u.getBlend=function t(e,n,i){var s=e._r+(n._r-e._r)*i,o=e._g+(n._g-e._g)*i,r=e._b+(n._b-e._b)*i,a=e._a+(n._a-e._a)*i;return new u(s,o,r,a)};u.isCSSColor=function(t){if(arguments.length>1||"string"!==typeof t)return false;return n.test(t)||i.test(t)||s.test(t)||o.test(t)||r.test(t)||a.test(t)||e[t.toLowerCase()]};u.getBestContrast=function(t,e,n){var i=t.getLuminance();return Math.abs(i-e.getLuminance())>Math.abs(i-n.getLuminance())?e:n};u.getContrast=function(t,e){if(!t||!e)return;var n=t.getLuminance()/100,i=e.getLuminance()/100;return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)};u.isDark=function(){var t={getLuminance:u.prototype.getLuminance,isInvalid:u.prototype.isInvalid};u.prototype.init.apply(t,[].slice.call(arguments));return u.prototype.isDark.call(t)};u.useDarkLabel=function(t,e){return t._a>.5?!t.isDark():!e};return u}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(90),n(95),n(94),n(131),n(91)],s=function(t,e,n,i,s,o,r){var a;function l(t,n){e.getService("qvConfirmDialog").show({message:r.get(t),icon:"cogwheel"}).closed.then(function(t){t&&n.apply()})}function c(t){if(!a)throw new TypeError("Permissions are not available yet. Make sure you have initialized this module with init().");switch(t){case"measure":return a.createMeasure;case"dimension":return a.createDimension;case"visualization":return a.createMasterobject;case"odagLink":return a.createOdagLink;default:throw new TypeError("'"+t+"' is an unknown type.")}}var u={init:function e(n,i){n&&(a=t.extend({},n,i))},getContextMenuAddToText:function t(e){var n=o.selectedObject;return e&&"odaglinks"===e?"library.addtoAppNavigation":n&&"sheetCell"===n.type?"contextMenu.addToSheet":"contextMenu.addToVisualization"},getAddToOptions:function t(){var e=o.selectedObject,n=null;if(e&&s.isInEditMode()){n={};"gridCell"===e.type?n.object=true:"sheetCell"===e.type&&(n.sheet=true)}return n},getAddToText:function t(e){var n=o.selectedObject;if(n&&s.isInEditMode())return e&&"odaglinks"===e?"library.addtoAppNavigation":"gridCell"===n.type?"library.addtoVisualization":"sheetCell"===n.type?"library.addtosheet":"";return null},addItemToSheetOrVisualization:function t(e,n){if(!this.isAddToMode())return;var s=o.selectedObject,r={item:e};n&&(r.event=n);s&&"gridCell"===s.type&&(r.cell=s.customObject);i.publish("/ui/library/addToSheet",r)},librarySearchFn:function t(e,i,s){if(!i||""===i)return true;s=s||function(t,e){return n.match([t.name],e)};return s(e,i.toLowerCase())},libraryMultiSearch:function t(e,i,s){e.match={};if(!i||""===i)return true;i=i.toLowerCase();var o=false;for(var r=0;r<s.length;++r){var a=s[r];if(n.match(e[a],i)){o=true;e.match[a]=true}}return o},itemDblClickHandler:function t(e){this.isAddToSheetMode()&&i.publish("/ui/library/addToSheet",{item:e})},removeDialog:l,editDialog:l,hasLinks:function t(e,n){return n.get(e).then(function(t){return t.getLinkedObjects().then(function(t){return 0!==t.length})})},toggleSelection:function e(n,i){var s=t(i.currentTarget);n.selected=!n.selected;if(!n.selected){s.off("qv-outside");return false}s.on("qv-outside",function(e){var i=t(e.target);if(1===i.closest("#library-preview").length||1===i.closest(".qv-contextmenu").length)return;n.selected=false;s.off("qv-outside")});return true},removeSelection:function e(n){t.each(n,function(t,e){e.selected=false})},localeOrderBy:function t(e,n){var i="pseudo"===r.language?"en-US":r.language;if(e){var s=function t(e,n){return e.localeCompare(n,i)};n&&n instanceof Function&&(s=function t(e,s){return n(e).localeCompare(n(s),i)});e.sort(s)}return e},isAddToSheetMode:function t(){return s.model&&s.isInEditMode()&&s.view===s.Views.sheet&&s.model.layout.permissions.update},isAddToVisualizationMode:function t(){return s.isInEditMode()&&(s.view===s.Views.object&&s.model.layout.permissions.update||s.view===s.Views.masterObject)},isAddToMode:function t(){return this.isAddToSheetMode()||this.isAddToVisualizationMode()},hasAppUpdatePermssion:function t(){return a.update},permissionToCreate:c,toggleTableSelect:function t(e,n){e.forEach(function(t){"assets-tab-field"===t.id&&(t.hasTableFilter=n)})}};return u}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(162),n(102)],s=function(t,e){var n={};var i=false;var s="ltr";var o=false;e.mixin(n);n.notification("DirectionChanged");n.init=function(e){return t.getProperties(e).then(function(t){o=true;return n.setRtl(t&&t.rtl)})};n.setRtl=function(t){if(i!==t){i=t;s=i?"rtl":"ltr";n.DirectionChanged.emit(s)}return s};Object.defineProperty(n,"isInit",{get:function t(){return o}});Object.defineProperty(n,"isRtl",{get:function t(){return i}});Object.defineProperty(n,"direction",{get:function t(){return s}});function r(t){n.setRtl(t.rtl)}t.UpdateObjProps.bind(r);return n}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89)],s=function(t,e){function n(n){return n?e.resolve(n.enigmaModel):t.getApp()}var i={};i.create=function(t,e){return n(e).then(function(e){return e.createSheet(t)})};i.remove=function(t,e){return n(e).then(function(e){return e.destroyObject(t)})};i.get=function(t,e){return n(e).then(function(e){return e.getObject(t)})};i.getList=function(t){return n(t).then(function(t){return t.getSheetListObject()})};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(48),n(101),n(89),n(90),n(91)],s=function(t,e,n,i,s){function r(t,e,n){return"function"===typeof t.refFn?t.refFn(e,n):t.ref}var a={defineValue:function n(i,s,o,l){var c,u,d;function p(t){var n=r(s,o(),i.args);var a=e.getValue(o(),n);if("undefined"===typeof a)return e.getUndefinedValue(t,s);return a}function h(n,l,c){var u=e.getTypeValue(n,l,c);var d=o();var p=r(s,d,i.args);s.rollbackInvalid?a.validateType(u,s,d)?e.setValue(d,p,u):t.getService("$timeout")(function(){t.$rootScope.$broadcast("pp-revalidate")}):e.setValue(d,p,u)}if(s.convertFunctions){u=function t(){return s.convertFunctions.get(p,s,i.args)};d=function t(e){return s.convertFunctions.set(e,h,s,i.args)}}else{u=function t(){return p(s.type)};d=function t(n){var i=e.getDefaultValue(s.type,s);h(s.type,n,i)}}c="undefined"!==typeof l?l:"value";Object.defineProperty(i,c,{get:u,set:d})},defineExpression:function t(n,i,s){var a=n.definition.expression,l=n.definition.expressionType,c="optional"===a||"always"===a,u=i?"qValueExpression":"qStringExpression";!l&&c&&(l=i?"ValueExpression":"StringExpression");n.expressionType=l;n.isExpressionDefinition=c;Object.defineProperty(n,"displayValue",{get:function t(){var e=n.value;if(e&&"object"===o(e)){e=e[u].qExpr;e&&"="!==e[0]&&(e="="+e)}return e},set:function t(e){var i=c&&e&&0===e.indexOf("=");var s;if(e&&i){s={};s[u]={qExpr:e.substr(1)}}else s=e;n.value=s}});n.isExpression=function(){if("always"===a)return true;if("optional"===a){var t=r(n.definition,n.data,n.args);var i=e.getValue(n.data,t);return"object"===o(i)}return!!l};n.isLocked=function(){if(c){var t=n.value;"object"===o(t)&&(t=t[u].qExpr);if(!t||i&&"number"===typeof t)return false;var e=s&&-1!==t.indexOf("\n");return t&&(e||t.length>n.maxlength)}return false}},defineChange:function t(e,n){function i(){e.$emit("saveProperties")}e.change=function(){if("function"===typeof e.definition.change){var t=e.definition.change(e.data,n,e.args.properties,e.args);"object"===o(t)&&t.then?t.then(function(t){false!==t&&i()}):false!==t&&i()}else i()}},defineVisible:function t(e,n){var i=e.definition.show;"function"===typeof i?Object.defineProperty(e,"visible",{get:function t(){return i(e.data,n,e.args)}}):e.visible="boolean"!==typeof i||i},defineReadOnly:function t(e,n){var i=e.definition.readOnly;"function"===typeof i?Object.defineProperty(e,"readOnly",{get:function t(){return i(e.data,n,e.args)}}):e.readOnly="boolean"===typeof i&&i},definePlaceholder:function t(e,n){n.placeholderTranslation?e.placeholder=s.get(n.placeholderTranslation):n.placeholder&&(e.placeholder=n.placeholder)},defineLabel:function t(e,n,i,o){n.translation?e.label=s.get(n.translation):"function"===typeof n.label?Object.defineProperty(e,"label",{get:function t(){return n.label(i(),o)}}):n.label&&(e.label=n.label);return""},defineCustom:function t(e,n,i){var s=e.definition[i];"function"===typeof s?Object.defineProperty(e,i,{get:function t(){return s(e.data,n,e.args,e)}}):s&&(e[i]=s)},fillOptions:function t(e,i,r,a,l){var c=new n;function u(){var t=e.options;"function"===typeof t&&(t=e.options.call(null,i,r,l));if("object"===o(t)&&"function"===typeof t.then)return t;return n.resolve(t)}function d(t){return t.filter(function(t){return!!t}).map(function(t){var e={value:t.value};t.translation?e.label=s.get(t.translation):t.label?e.label=t.label:e.label=t.value;t.tooltipTranslation?e.tooltip=s.get(t.tooltipTranslation):t.tooltip&&(e.tooltip=t.tooltip);return e})}u().then(function(t){t=d(t);a.splice(0,a.length);for(var e=0;e<t.length;++e)a.push(t[e]);c.resolve()},c.reject);return c.promise},validateType:function t(e,n,s,o){var r=false;"boolean"===typeof n.invalid&&(r=r||n.invalid);"function"===typeof n.invalid&&(r=r||n.invalid.call(null,s,o.properties,o));if("number"===n.type)if(i.isNumeric(e)){"number"===typeof n.max&&e>n.max&&(r=true);"number"===typeof n.min&&e<n.min&&(r=true)}else r=true;if("integer"===n.type)if(i.isInteger(e)){"number"===typeof n.max&&e>n.max&&(r=true);"number"===typeof n.min&&e<n.min&&(r=true)}else r=true;if("string"===n.type){"undefined"!==typeof n.maxlength&&(r=r||e.length>n.maxlength);"undefined"!==typeof n.minlength&&(r=r||e.length<n.minlength)}return!r}};return a}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(135),n(177),n(90)],s=function(t,e,n){var i={getUrlForHub:function e(){return t.buildHubUrl().replace("/noData/true","")},getUrlForSheet:function i(s,o,r){var a=n.getParameterByName("app");o||(o=e.analysis(a).state);if(r)return t.buildUrl(true,"sense","app",a,"sheet",s,"state",o,"overlay",r);return t.buildUrl(true,"sense","app",a,"sheet",s,"state",o)},getUrlForStory:function i(s,o,r){var a=n.getParameterByName("app");"undefined"===typeof o&&(o=e.story(a).state||"editstory");return r?t.buildUrl(true,"sense","app",a,"story",s,"state",o,"slide",r):t.buildUrl(true,"sense","app",a,"story",s,"state",o)},getUrlForOverview:function e(){var i=n.getParameterByName("app");return t.buildUrl(true,"sense","app",i)},getUrlForDataModelViewer:function e(){var i=n.getParameterByName("app");return t.buildUrl(true,"datamodelviewer","app",i)},getUrlForDataLoadEditor:function e(){var i=n.getParameterByName("app");return t.buildUrl(true,"dataloadeditor","app",i)},getUrlForDataManager:function e(){var i=n.getParameterByName("app");return t.buildUrl(true,"sense","app",i,"datamanager","datamanager")},goToHub:function e(){t.setUrl(i.getUrlForHub(),false,false,true)},goToOverview:function e(){t.setUrl(i.getUrlForOverview())},goToDataManager:function e(){t.setUrl(i.getUrlForDataManager())},goToDataModelViewer:function e(){t.setUrl(i.getUrlForDataModelViewer())},goToDataLoadEditor:function e(){t.setUrl(i.getUrlForDataLoadEditor())},goToSheet:function e(n,s,o){t.setUrl(i.getUrlForSheet(n,s,o))},goToStory:function e(n,s,o){t.setUrl(i.getUrlForStory(n,s,o))}};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={STATIC:0,ANALYSIS:1,EDIT:2};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(13),n(115),n(312),n(332),n(671),n(210),n(345),n(49)],s=function(t,e,i,s,o,r,a,l,c){var u=null;var d=null;var p=false;function h(t,i){i=i||{};i.previewIconURL||"string"===typeof i.preview&&i.preview.match(/\.(?:png|gif|jpe?g|svg)$/)&&(i.cloud?i.previewIconURL="/api/v1/extensions/"+i.id+"/file/"+i.preview:i.folder?i.previewIconURL=n.p+i.folder+"/"+t+"/"+i.preview:i.previewIconURL=e.rootPath+"extensions/"+t+"/"+i.preview);i.icon&&"extension"!==i.icon||(i.icon="puzzle");i.description=i.description||i.name;i.template=i.template||t;i.isLibraryItem=false!==i.isLibraryItem;i.isThirdParty=true;i.name=i.name||i.template||t;return i}function f(t){if(t.data&&"visualization"===t.data.type){if(i.getType(t.id.toLowerCase())){t.data.bundle?console.warn("Bundled extension already loaded (this is likely correct): "+t.id):console.error("Extension id already registered: "+t.id);return}var e=h(t.id,t.data);o.registerThirdPartyLibraryInfo(t.id,e);i.registerType(t.id,new s({type:t.id,path:t.path||"extensions/"+t.id+"/"+t.id}))}}function g(e){if(!p){i.registerType("listbox",new s({type:"listbox",path:"extensions.qliktech/listbox/listbox"}));i.registerType("filterpane",new s({type:"filterpane",path:"extensions.qliktech/filterpane/filterpane"}));c.getFlag("CONTAINER_OBJECT")&&i.registerType("container",new s({type:"container",path:"extensions.qliktech/container/container"}));c.getFlag("DISABLE_AUTO_CHART")||i.registerType("auto-chart",new s({type:"auto-chart",path:"extensions.qliktech/auto-chart/auto-chart"}));i.registerType("boxplot",new s({type:"boxplot",path:"extensions.qliktech/boxplot/boxplot"}));i.registerType("histogram",new s({type:"histogram",path:"extensions.qliktech/histogram/histogram"}));i.registerType("distributionplot",new s({type:"distributionplot",path:"extensions.qliktech/distributionplot/distributionplot"}));i.registerType("waterfallchart",new s({type:"waterfallchart",path:"extensions.qliktech/waterfallchart/waterfallchart"}));i.registerType("gauge",new s({type:"gauge",path:"extensions.qliktech/gauge/gauge"}));i.registerType("kpi",new s({type:"kpi",path:"extensions.qliktech/kpi/kpi"}));i.registerType("table",new s({type:"table",path:"extensions.qliktech/straight-table/straight-table"}));i.registerType("pivot-table",new s({type:"pivot-table",path:"extensions.qliktech/pivot-table/pivot-table"}));i.registerType("barchart",new s({type:"barchart",path:"extensions.qliktech/barchart/barchart"}));i.registerType("piechart",new s({type:"piechart",path:"extensions.qliktech/piechart/piechart"}));i.registerType("scatterplot",new s({type:"scatterplot",path:"extensions.qliktech/scatterplot/scatterplot"}));i.registerType("linechart",new s({type:"linechart",path:"extensions.qliktech/linechart/linechart"}));i.registerType("combochart",new s({type:"combochart",path:"extensions.qliktech/combochart/combochart"}));i.registerType("treemap",new s({type:"treemap",path:"extensions.qliktech/treemap/treemap"}));i.registerType("map",new s({type:"map",path:""}));i.registerType("text-image",new s({type:"text-image",path:"extensions.qliktech/text-image/text-image"}));i.registerType("widget",new s({type:"widget",path:"extensions.qliktech/widget/widget"}));p=true}var n=[];if(d)return e?d:d.then(v);var o=c.getFlag("DASHBOARD_EXT_BUNDLE")?r.getDashBundleList():[];o.forEach(function(t){n.push(t)});var a=c.getFlag("VIZ_EXT_BUNDLE")||c.getFlag("VIZBUN_QCS_31")?r.getVisBundleList():[];a.forEach(function(t){n.push(t)});d=t.all(n);return d.then(function(t){t.forEach(f);if(!e)return v()}).catch(function(){console.warn("Error when loading extensions")})}function v(){if(!u){var e=c.getFlag("DISABLE_ONPREM_EXTENSIONS")?t.resolve([]):a.getList();var n=c.getFlag("CLOUD_EXTENSIONS")?l.getList():t.resolve([]);u=n.then(function(t){t.forEach(f);return e.then(function(t){t.forEach(f)})})}return u}function m(t){i.removeType(t);o.remove(t)}return{load:g,isLoaded:function t(e){return!!i.getType(e)},registerExtension:f,removeExtension:m}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i;!(i=function(){function t(t){return t&&"[object Array]"===Object.prototype.toString.call(t)}function e(t){return t&&"function"===typeof t}function n(n,i){var s,o;if(!t(n))throw new Error("No valid items were specified.");if(!e(i))throw new Error("No valid action function was specified.");if(Array.prototype.forEach)n.forEach(i);else for(s in n){o=n[s];i(o)}}function i(e,n){if(!t(e))throw new Error("No valid items were specified.");if(Array.prototype.indexOf)return-1!==e.indexOf(n);var i=e.length;while(i--)if(e[i]===n)return true;return false}function s(t,e){if(!t||!e||!t.length||!e.length)return false;var n=e.length,i;for(i=0;i<n;i++)if(t.indexOf(e[i])>-1)return true;return false}function o(t,e){if(!t||!e||!t.length||!e.length)return false;var n=t.indexOf(e[0]);if(-1!==n){for(var i=0;i<e.length;i++){var s=t.indexOf(e[i]);if(n>s)return false;n=s}return true}return false}function r(t,e,n){if(n>=t.length){var i=n-t.length;while(1+i--)t.push(void 0)}t.splice(n,0,t.splice(e,1)[0])}function a(t,e,n){var i=t[e];t[e]=t[n];t[n]=i}function l(t,e){var n;for(n=0;n<t.length;++n)t[n]>=0&&t[n]>=e&&++t[n];t.push(e)}function c(t,e,n){var i;for(i=0;i<t.length;++i)t[i]>=0&&t[i]>=e&&++t[i];t.splice(n,0,e)}function u(t,e){var n=0;var i;for(i=0;i<t.length;++i)t[i]>e?--t[i]:t[i]===e&&(n=i);t.splice(n,1);return n}function d(t,e){if(t.length>e)return t.slice(0,e);return t}function p(t){if(!(t instanceof Array))throw new Error("Argument is not an Array.");return t.slice(0)}return{forEach:n,contains:i,move:r,swap:a,limit:d,indexAdded:l,indexAddedAt:c,indexRemoved:u,intersects:s,isOrderedSubset:o,copy:p}}.call(e,n,e,t),void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){return{sectionIDs:{template:"template",cloudExtensions:"cloud-extensions",extensions:"extensions",field:"field",time:"time",dimension:"dimension",measure:"measure",visualization:"visualization",odag:"odag"}}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(106),n(97),n(50),n(131),n(613),n(94),n(11),n(91)],s=function(t,e,n,i,s,o,r,a,l,c){var u=null,d=null,p={gridElement:null,scrollTop:0,scrollTopSheet:0,scrollLeft:0,scrollLeftSheet:0,lastZoomedCell:null,intervalPromise:null,hightlightedCellId:null};function h(t,e){a.setView(t);var n=l(document.body);n.toggleClass("qv-view-sheet",!e);n.toggleClass("qv-view-object",e);n.toggleClass("qv-gridzoom",e)}function f(){u.grid.updateCellsSize()}function g(){u.grid.updateCellsSize()}function v(t){return t?e.resolve():u.grid.autoCollapse()}function m(e){var l;if(u)return;u=t.$rootScope.$new(true);u.grid=new r(this,e.enigmaModel.app);u.model=e;u.stageState=o;n(u,"model",function(t){u&&u.grid.update(t)});s.ViewChanged.bind(f);i.on("end",g);u.$watch(a.isInEditMode,function(t){l=t;if(u.grid.layout){u.grid.update(u.grid.layout);if(l)u.grid.updateActiveCell();else{u.grid.removeResizeHandles();k();v(l)}}});u.$watch("grid.zoomCell",function(t){if(D()||a.view===a.Views.story&&a.state!==a.States.analysis)return;var e=t?a.Views.object:a.Views.sheet;h(e,!!t)});u.$watch("grid.changedZoom",function(t){false!==t||u.grid.zoomCell||f(u.grid)});u.$watch("stageState.selectedObject",function(t){u&&t&&"gridCell"!==t.type&&u.grid.clearActiveCell()});a.SheetChanged.bind(b)}function b(t){if(!u)return;v(a.isInEditMode()).then(function(){if(u){u.model=t;u.grid.unblock()}})}function y(){d||(d=t.getService("$interval"));if(!u)return;u.$destroy();u=null;s.ViewChanged.unbind(f);i.off("end",g);a.SheetChanged.unbind(b);d.cancel(p.intervalPromise);p.gridElement=null}function x(){var e=u&&u.grid.getOptimalCell();e||t.getService("qvAlertDialog").show({title:c.get("Ui.Warning.GridFull.Title"),message:c.get("Ui.Warning.GridFull"),closeLabel:c.get("Common.OK")});return e}function q(t){if(!u)return;_(t.pos)}function S(){return u&&u.grid.isBlocked()}function w(t){if(S())return e.reject();u.grid.block();return u.model.addObject(t).finally(function(){u.grid.unblock()})}function C(t,n){if(S())return e.reject();return u.model.swapObjects(t,n)}function I(t,n){if(S())return e.reject();return u.model.moveObject(t,n)}function _(t){if(S())return e.reject();u.grid.block();return u.model.removeObject(t).finally(function(){u.grid.unblock()})}function D(){return u&&u.grid&&!u.model}function k(){if(!D())return;b(a.model);h(a.Views.sheet,false)}function T(t,e){if(!u)return;u.model=null;u.grid.setEditMaster(t,e);h(a.Views.masterObject,true)}return{start:m,stop:y,goToEditMode:function t(){a.setState(a.States.edit)},getOptimalCell:x,removeCell:q,isActive:function t(){return!!u},getGrid:function t(){return u&&u.grid},getModel:function t(){return u&&u.model},activateCell:function t(e){u&&u.grid.toggleActive(e)},deactivateCell:function t(){u&&u.grid.toggleActive(null)},getZoomCell:function t(){return u&&u.grid.zoomCell},getZoomedCellId:function t(){return u.grid.zoomCell.id},zoomInOnCell:function t(e){var n;if(u){n=u.grid.cells.filter(function(t){return t.id===e});n.length&&u.grid.zoom(n[0])}},zoomOut:function t(){if(u){u.grid.zoom(null);u.grid.gridService.restoreSheetScrollState()}},saveZoom:function t(){u&&u.grid&&p&&!p.lastZoomedCell&&u.grid.zoomCell&&u.grid.zoomCell.id&&(p.lastZoomedCell=u.grid.zoomCell.id)},restoreZoom:function e(){if(p.lastZoomedCell){var n=t.getService("$timeout");n(function(){u.grid.blockZoomAnimation=true;this.zoomInOnCell(p.lastZoomedCell);p.lastZoomedCell=null}.bind(this))}},setGridElement:function t(e){p.gridElement=e},saveScrollState:function t(){if(l(".qvt-sheet").length>0&&!p.lastZoomedCell&&p.gridElement){p.scrollTop=p.gridElement.scrollTop;p.scrollLeft=p.gridElement.scrollLeft;p.scrollTopSheet=l(".qvt-sheet")[0].scrollTop;p.scrollLeftSheet=l(".qvt-sheet")[0].scrollLeft}},restoreScrollState:function e(){d||(d=t.getService("$interval"));if(p.lastZoomedCell)return;p.scrollTop>0&&(p.intervalPromise=d(function(){if(p.gridElement.children.length>0){p.gridElement.scrollTop=p.scrollTop;p.scrollTop=0;d.cancel(p.intervalPromise)}},50));p.scrollLeft>0&&(p.intervalPromise=d(function(){if(p.gridElement.children.length>0){p.gridElement.scrollLeft=p.scrollLeft;p.scrollLeft=0;d.cancel(p.intervalPromise)}},50))},restoreSheetScrollState:function e(n,i){var s=t.getService("$timeout");s(function(){if(l(".qvt-sheet").length>0)if("undefined"!==typeof n||"undefined"!==typeof i){l(".qvt-sheet")[0].scrollTop>0&&(l(".qvt-sheet")[0].scrollTop=0);l(".qvt-sheet")[0].scrollLeft>0&&(l(".qvt-sheet")[0].scrollLeft=0)}else{p.scrollTopSheet>0&&(l(".qvt-sheet")[0].scrollTop=p.scrollTopSheet);p.scrollLeftSheet>0&&(l(".qvt-sheet")[0].scrollLeft=p.scrollLeftSheet)}})},resetSmallDeviceSheetScroll:function e(){var n=t.getService("$timeout");n(function(){var e=t.getService("qvSheetService").get();if(e&&e.length){e=e.find("#grid")[0];if(e){e.scrollTop=0;e.scrollLeft=0}e=null}})},scrollToPos:function t(e,n){if(l(".qvt-sheet").length){l(".qvt-sheet").scrollLeft(e);l(".qvt-sheet").scrollTop(n-80)}},getCellWithId:function t(e){if(u){var n=u.grid.cells.filter(function(t){return t.id===e});return n.length?n[0]:null}return null},highlightedCell:function t(e){e&&(p.hightlightedCellId=e);var n;if(u&&p.hightlightedCellId){n=u.grid.cells.filter(function(t){return t.id===p.hightlightedCellId});if(n.length){u.grid.highlight(n[0]);p.hightlightedCellId=null}}},isBlocked:S,addObject:w,swapObjects:C,moveObject:I,isEditMaster:D,closeEditMaster:k,editMaster:T}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(125),n(144)],s=function(t,e){function n(t){t=t.trim();if("="===t.charAt(0)){t=t.substring(1);t=t.trim()}var e=t.length-1;if("["===t.charAt(0)&&"]"===t.charAt(e)){t=t.substring(1,e);t=t.trim()}return t}function i(i,s){var o=e.expand(t.copy(s));var r,a;i=n(i);if(o)for(r=0;r<o.length;r++){a=o[r];if(a.qName===i)return a}return null}function s(t,e){var n,i;if(e)for(n=0;n<e.length;n++){i=e[n];if(i.qInfo.qId===t)return i}return null}function o(t,e){var n,i;if(e)for(n=0;n<e.length;n++){i=e[n];if(i.qInfo.qId===t)return i}return null}function r(n){return n.getFieldList().then(function(n){return e.expand(t.copy(n)).sort(function(t,e){return t.qName.toLowerCase().localeCompare(e.qName.toLowerCase())})})}function a(e){return e.getDimensionList().then(function(e){return t.copy(e).sort(function(t,e){return t.qData.title.toLowerCase().localeCompare(e.qData.title.toLowerCase())})})}function l(e){return e.getMeasureList().then(function(e){return t.copy(e).sort(function(t,e){return t.qData.title.toLowerCase().localeCompare(e.qData.title.toLowerCase())})})}return{findField:i,findLibraryDimension:o,findLibraryMeasure:s,getSortedFields:r,getSortedDimensions:a,getSortedMeasures:l}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(11)],s=function(t,e){var n={};var i=false;var s=false;n.reset=function(){n.selectedObject=null;n.assetsOpen=true;n.propertiesOpen=false;i=false};n.hasPropertiesBeenClosedByUser=function(){return s};n.togglePropertyPanelByUser=function(){n.propertiesOpen=!n.propertiesOpen;i=n.propertiesOpen;i||(s=true);return n.propertiesOpen};n.resetPropertyPanelToggle=function(){n.propertiesOpen!==i&&(n.propertiesOpen=i)};n.setSelectedObject=function(i){var s={id:"",type:"",customObject:null,canCopy:function t(){return true},copy:null,canCut:function t(){return true},cut:null,paste:null,canRemove:function t(){return true},remove:null,getAllPropertyPanelContent:function e(){var n={objectType:"",iconClass:"",titleRef:"",definition:{},properties:{},layout:{},localeInfo:null,app:null,cache:null,ext:null,globalChangeListeners:null,handler:null,model:null};return t.resolve(n)}};if(i){e.extend(s,i);n.selectedObject=s}else n.selectedObject=null};n.reset();return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89)],s=function(t,e){return{get:function n(i){var s=i?e.resolve(i.enigmaModel):t.getApp();return s.then(function(t){return t.getCurrentSelectionObject()})}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(748),n(90),n(192),n(95),n(154),n(120),n(132),n(89),n(108),n(49),n(749),n(456)],s=function(t,e,n,i,s,o,r,a,l,c,u){var d=null;var p=null;function h(t){if(p)return a.resolve(true);if(t){l.setup();return a.resolve(true)}return l.setup()}var f={addingNewNavPointID:{},odagLinkSessionObjects:{},getODAGLinksPromise:{}};f.ODAGRequestActionConst={CANCEL:"cancel",PAUSE:"pause",RESUME:"resume",CANCEL_ACK:"ackcancel",FAIL_ACK:"ackfailure"};f.getODAGLinks=function(t,e){e=void 0!==e&&e;var i=this;this.getODAGLinksPromise[t.id]&&!e||(this.getODAGLinksPromise[t.id]=n.getList(t).then(function(e){return e.getLayout().then(function(e){return i.onAppLinksLoaded(t,e)})}));return this.getODAGLinksPromise[t.id]};f.onAppLinksLoaded=function(t,e){var n=e.map(function(t){return t.qData.odagLinkRef});return f.loadODAGLinks(t,n)},f.loadODAGLinks=function(t,e){return g(t).getODAGLinksWithIds(t.id,e)};f.loadODAGLink=function(t,e){return g(t).getODAGLink(e)};f.canCreateLink=function(t){return g(t).canCreateLink(t.id)};f.isODAGAvailable=function(t){return h(t).then(function(){var e=l.isPersonalModeSync();return!(c.getFlag("ODAG_CLIENT_SAAS")&&!c.getFlag("ODAG_SAAS_ENABLED"))&&(!e&&g(t).isODAGAvailable().then(function(t){if(c.getFlag("ODAG_SAAS_ENABLED"))return t;return!(!t||!t.available)}).catch(function(){return false}))})};f.createODAGLink=function(t,i){var s=e.extend({},i);s.selectionApp=t.id;return g(t).createODAGLink(s).then(function(e){var i={qMetaDef:{odagLinkRef:c.getFlag("ODAG_SAAS_ENABLED")?e.id:e.objectDef.id}};return n.create(t,i)})};f.deleteODAGLink=function(t,s,r){var l=e.extend({},r);c.getFlag("ODAG_SAAS_ENABLED")&&(l.data.selectionApp=t.id);return g(t).deleteODAGLink(s,l).then(function(){return n.getList(t).then(function(e){return e.getLayout().then(function(e){var r=null;for(var l=0;l<e.length&&!r;l++){var u=e[l];u.qData.odagLinkRef===s&&(r=u.qInfo.qId)}c.getFlag("ODAG_SAAS_ENABLED")&&i.publish("hack_odag_link_update");if(r)return n.remove(t,r).then(function(){return o.getList(t).then(function(t){return t.getLayout().then(function(t){var e=[];t.forEach(function(t){var n=o.get(t.qInfo.qId).then(function(t){return t.removeRefToLinkIDFromNavPoints(s)});e.push(n)});return a.all(e)})})})})})})};f.updateODAGLink=function(t,s,o){var r=e.extend({},o);c.getFlag("ODAG_SAAS_ENABLED")&&(r.selectionApp=t.id);return g(t).updateODAGLink(s,r).then(function(e){return n.getList(t).then(function(s){return s.getLayout().then(function(s){var o=null;for(var r=0;r<s.length;r++){var a=s[r];var l=c.getFlag("ODAG_SAAS_ENABLED")?e.id:e.objectDef.id;if(a.qData.odagLinkRef===l){o=a.qInfo.qId;break}}c.getFlag("ODAG_SAAS_ENABLED")&&i.publish("hack_odag_link_update");if(o)return n.get(t,o).then(function(t){return t.getProperties().then(function(e){e.qMetaDef.timestamp=Date.now();return t.setProperties(e)})})})})})};f.addODAGNavPoint=function(t,n){if(t){var i=e.generateId();this.addingNewNavPointID[t.id]=i;var s={insertBeforeNavPointID:n.insertBeforeItem?n.insertBeforeItem.data.info.id:null,data:{info:{id:i},title:n.title,odagLinkRefID:n.odagLinkRefID}};t.addNavPoint(s)}};function g(e){if(d)return d;var n="";var i="";var s="";var o=false;if(e&&e.enigmaModel&&e.enigmaModel.session){var r=e.enigmaModel.session.sessionConfig?e.enigmaModel.session.sessionConfig:null;if(r){n=r.prefix?r.prefix:"/";i=r.host?r.host:null;s=r.port?r.port:null;o=!(!r.isSecure&&!r.secure)}}d=new t;d.init(i,s,n,o);return d}function v(t,e,n,i,s,o,r){t||(t=[]);e||(e=[]);return i<o?n.getHyperCubeData("/qHyperCubeDef",[{qTop:i,qLeft:0,qWidth:1,qHeight:1e4}]).then(function(a){a[0].qMatrix.forEach(function(n){var i=n[0];s.indexOf(i.qState)>-1&&t.push({selStatus:i.qState,strValue:i.qText,numValue:c.getFlag("ODAG_SAAS_ENABLED")?i.qNum+"":i.qNum});r&&"S"===i.qState&&e.push({selStatus:i.qState,strValue:i.qText,numValue:c.getFlag("ODAG_SAAS_ENABLED")?i.qNum+"":i.qNum})});i+=1e4;return v(t,e,n,i,s,o,r)}):a.resolve({fieldValues:t,selectedFieldValues:e})}function m(t,n,i){var s=n.selectAppParamName;var o=n.selectionStates;var r=e.extend(true,{},u.fieldHyperCubeProperties);r.qHyperCubeDef.qDimensions.push({qDef:{qFieldDefs:[s]},qNullSuppression:true});return t.enigmaModel.createSessionObject(r).then(function(e){return e.getLayout().then(function(n){var s=n.qHyperCube.qSize.qcy;return v(null,null,e,0,o,s,i).then(function(e){b(t,n.qInfo.qId);return e})})})}function b(t,e){var n=t.enigmaModel||t;return n.enigmaModel["destroySessionObject"].apply(n,[e])}function y(t,e){var n={bindingValuesArray:[],selectedValuesArray:[]};if(!e)return a.resolve(null);var i=e.bindings?e.bindings.filter(function(t){return"BDI"!==t.selectAppParamType}):[];var s=e.bindings?e.bindings.filter(function(t){return"BDI"===t.selectAppParamType}):[];return f.getBDIBindingValues(t,s).then(function(e){n.bindingValuesArray=e.bindingValuesArray||[];return f.getCurrentlySelectedFields(t).then(function(e){return f.getAllFieldBindingValues(t,i,e).then(function(s){for(var o=0;o<i.length;o++){var r=s[o];var a=-1;for(var l=0;l<e.length;l++)if(e[l]&&e[l].fieldName===i[o].selectAppParamName){a=l;break}if(a>=0){var c={selectionAppParamType:"Field",selectionAppParamName:i[o].selectAppParamName,values:r.selectedFieldValues.length<10001?r.selectedFieldValues:[],selectedSize:r.selectedFieldValues.length};n.selectedValuesArray.push(c);e.splice(a,1)}var u={selectionAppParamType:"Field",selectionAppParamName:i[o].selectAppParamName,values:r.fieldValues};n.bindingValuesArray.push(u)}var d=[];for(var p=0;p<e.length;p++)d.push({selectAppParamName:e[p].fieldName,selectionStates:"S"});return f.getAllFieldBindingValues(t,d,e).then(function(t){for(var i=0;i<e.length;i++){var s=t[i];var o={selectionAppParamType:"Field",selectionAppParamName:e[i].fieldName,values:s.fieldValues.length<10001?s.fieldValues:[],selectedSize:s.fieldValues.length};n.selectedValuesArray.push(o)}return n})})})})}f.clearSelections=function(t){return r.get(t).then(function(t){return t.clearAll()})};f.renameGenApp=function(t,e,n){return g(t).renameApp(e,n)};f.deleteGenApp=function(t,e){return g(t).deleteApp(e)};f.selectFieldValuesForField=function(t,e,n){var i=[];for(var o=0;o<n.length;o++){var r=n[o];var a={};if(Number.isNaN(+r.numValue)){a.qIsNumeric=false;a.qText=r.strValue}else{a.qIsNumeric=true;a.qNumber=r.numValue}i.push(a)}return s.get(e,null,t).then(function(t){return t.selectValues(i,true,true)})};f.getAllFieldBindingValues=function(t,e,n){if(e.length){var i=[];for(var s=0;s<e.length;s++){var o=e[s];var r=o.selectAppParamName;var l=n&&!!n.filter(function(t){return t.fieldName===r})[0];i.push(m(t,o,l))}return a.all(i)}return a.resolve([])};f.getConstraintFieldBindingValues=function(t,e){if(e.length){var n=[];for(var i=0;i<e.length;i++){var s=e[i];s.range?n.push(m(t,s,false)):n.push(a.resolve({noConstraint:true,fieldValues:[],selectedFieldValues:[]}))}return a.all(n)}return a.resolve([])};f.getCurrentlySelectedFields=function(t){return r.get(t).then(function(t){return t.getLayout().then(function(t){var e=[];for(var n=0;n<t.qSelectionObject.qSelections.length;n++){var i=t.qSelectionObject.qSelections[n];e.push({fieldName:i.qField,selectionCount:i.qSelectedCount})}return e})})};f.getBDIObject=function(t){return t.createSessionObject({qProp:{qInfo:{qType:"BDIObject"},qBDIObjectDef:{}}})};f.getBDISelection=function(t,e){return f.getBDIObject(t,e).then(function(t){return t.getLayout().then(function(n){if(!n||!n.qBDIObject||!n.qBDIObject.qValid)return a.resolve({});return t.setProperties({qProp:{qInfo:{qType:"BDIObject"},qBDIObjectDef:{qHandleCopyInLayout:e}}}).then(function(){return t.getLayout()})})})};f.getTemplateApps=function(t){var e=t.get();return c.getFlag("ODAG_SAAS_ENABLED")?d.getTemplateApps().then(function(t){return e.then(function(e){var n=t.data.filter(function(t){return t.id.toLowerCase()!=e.id.toLowerCase()});return n.map(function(t){return{qDocId:t.id,qDocName:t.name}})})}):e.then(function(e){return t.getList(e.session).then(function(t){var n=t.filter(function(t){return t.qDocId.toLowerCase()!=e.id.toLowerCase()});return n})})};f.getBDIBindingValues=function(t,e){if(e&&e.length>0){var n=[];return f.getBDISelection(t,"model").then(function(i){var s=i&&i.qBDIObject;if(s&&s.qValid){for(var o=0;o<e.length;++o)if("setHandle"===e[o].selectAppParamName){var r={selectionAppParamType:"BDI",selectionAppParamName:e[o].selectAppParamName,values:[{selStatus:"S",strValue:s.qGeneratedHandleCopy,numValue:"NaN"}]};n.push(r)}b(t,i.qInfo.qId)}return{bindingValuesArray:n}})}return a.resolve({})};f.reloadApp=function(t,e,n,i,s){switch(i){case 1:case 2:return y(t,e).then(function(e){if(e){var o=false;2==i&&(o=true);return g(t).reloadApp(n,s,e.bindingValuesArray,e.selectedValuesArray,o)}return a.resolve(null)});default:return g(t).reloadApp(n)}};f.getSelections=function(t,e){return g(t).getSelections(e)};f.generateApp=function(t,e,n,i,s){return y(t,n).then(function(o){return o?g(t).generateApp(n.id,t.id,i,e,s,o.bindingValuesArray,o.selectedValuesArray):a.resolve(null)})};f.removeODAGAppLinkWithODAGLinkId=function(t,e){return n.getList(t).then(function(i){return i.getLayout().then(function(i){var s=i.filter(function(t){return t.qData.odagLinkRef===e});if(s.length)return n.remove(t,s[0].qInfo.qId)})})};f.reorderNavPoints=function(t,e){t.reorderNavPoints(e)};f.moveNavPoint=function(t,e,n){t.moveNavPoint(e,n)};f.requestAction=function(t,e,n,i,s){return g(t).requestAction(e,n,i,s)};f.getGeneratedAppsForLink=function(t,e,n,i,s,o){return g(t).getGeneratedAppsForLink(n,i,t.id,e,s,o,true)};f.clearCachedSessionObjects=function(t){var e=this;function n(n){return e.odagLinkSessionObjects[t.id][n].getLayout().then(function(i){b(t,i.qInfo.qId);delete e.odagLinkSessionObjects[t.id][n]})}var i=[];for(var s in this.odagLinkSessionObjects[t.id])i.push(n(s));this.getODAGLinksPromise[t.id]=null;return a.all(i)};f.getOrCreateSessionObjectsForLink=function(t,e){var n=this;if(this.odagLinkSessionObjects[t.id]&&this.odagLinkSessionObjects[t.id][e.id])return a.resolve(this.odagLinkSessionObjects[t.id][e.id]);u.maxRowExpression.MaxRowCountExpression.qValueExpression.qExpr=e.rowEstExpr;return t.enigmaModel.createSessionObject(u.maxRowExpression).then(function(i){n.odagLinkSessionObjects[t.id]||(n.odagLinkSessionObjects[t.id]={});n.odagLinkSessionObjects[t.id][e.id]=i;return i})};return f}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89),n(90)],s=function(t,e,n){function i(n){return n?e.resolve(n.enigmaModel):t.getApp()}var s={};s.get=function(t,e){return i(e).then(function(e){return e.getDimension(t)})};s.create=function(t,e){return i(e).then(function(e){t.qInfo.qId=t.qInfo.qId||n.generateId();return e.createDimension(t)})};s.remove=function(t,e){return i(e).then(function(e){return e.destroyDimension(t)})};s.getList=function(t){return i(t).then(function(t){return t.getDimensionListObject()})};s.getListLayout=function(t){return s.getList(t).then(function(t){return t.getLayout()})};return s}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(92),n(48),n(11),n(102),n(112)],s=function(t,e,n,i,s){return t.extend({init:function t(n){this.assets=n;this.loading=true;this.$scope=e.$rootScope.$new(true);this.$scope.assets=n;i.create(this,"Resize");this.initLoadData();this.bindWatches()},destroy:function t(){this.$scope.$destroy()},initLoadData:function t(){},onLoadData:function t(){},doFilter:function t(e){return e.slice()},bindWatches:function t(){this.$scope.$watch("assets.query",this.onFilter.bind(this))},onFilter:function t(){var e=this.doFilter(this.list);this.items=e;this.matchCount=this.assets.query?e.length:0},resize:function t(e){this.Resize.emit(e)},addItemToSheetOrActiveObject:function t(e){s.itemDblClickHandler(e)},openContextMenu:function t(){},openPreview:function t(e,i){this.previewManager.open(e,this.assets.query,n(i.currentTarget))},closePreview:function t(){this.previewManager.close()}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(111)],s=function(t){var e,n;e={openPreview:function t(i){e.close();n=i},openContextMenu:function n(i,s,o){e.close();t.getService("qvContextMenu").show(i,{position:{x:o.pageX,y:o.pageY}})},close:function e(){if(n){n.close();n=null}t.getService("qvContextMenu").close()}};return e}.apply(e,i),void 0!==s&&(t.exports=s))},,,,function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89),n(115),n(153),n(90),n(124),n(10)],s=function(t,e,n,i,s,o,r){var a=[];function l(n){return n?e.resolve(n.enigmaModel):t.getApp()}var c={};c.get=function(t,e){return l(e).then(function(e){return e.getObject(t)})};c.createTransient=function(t,e,i){var s,l,c,u=-1,d=a.length;s={that:t,app:e,props:i};for(l=0;l<d;l++)if(a[l].askFor.that===t&&a[l].askFor.app===e&&r.equals(a[l].askFor.props,i)){u=l;break}if(u>=0)return a[u].result;c=o.load().then(function(){return n.getType("listbox").getInitialProperties(i).then(function(t){return e.createSessionObject(t)})});a.push({askFor:s,result:c});return c};c.createTransientField=function(t,e,n){var o={};o.qListObjectDef=i.createFieldDimension(e);s.extend(true,o,n||{});return this.createTransient(this,t,o)};c.createTransientDimension=function(t,e,n){var o={};o.qListObjectDef=i.createLibraryDimension(e);s.extend(true,o,n||{});return this.createTransient(this,t,o)};return c}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){return t&&t.enigmaModel&&t.enigmaModel.app&&t.enigmaModel===t.enigmaModel.app.modalSelectionObject}function e(t){return t&&t.qSelectionInfo&&t.qSelectionInfo.qInSelections}function n(t,e){var n=false;return t.getField(e).then(function(t){return t.getNxProperties().then(function(t){return t.qOneAndOnlyOne||n})})}function i(t){return t.getAppLayout().then(function(t){return["$"].concat(t.qStateNames)})}function s(t,e){var n=!!t.qOneAndOnlyOne;var i=!!e.qOneAndOnlyOne;if(n===i)return t.qSortIndex-e.qSortIndex;return n?-1:1}function o(t){return t.filter(function(t){return!t.qOneAndOnlyOne&&!t.qLocked})}function r(t){return(t||[]).filter(function(t){return o(t.qSelectionObject.qSelections).length})}return{isModalSelectionModel:t,isInSelection:e,isSingleSelect:n,getSelectionStates:i,sortSelections:s,getClearableItems:o,getClearableStates:r}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(153),n(148),n(161),n(186),n(399),n(49),n(157),n(229)],s=function(t,e,n,i,s,o,r){function a(e,a,l,c){var u;if(o.getFlag("DISABLE_AUTO_CHART")||r.isVariableDefined("DISABLE_AUTO_CHART")||c&&c.shiftKey||!e.classifications&&!l.isDerived){u=t.createFieldDimension(e.qName);t.autoSortDimension(u,[e]);return{id:"newObject",args:{template:"filterpane",children:[t.createDefaultListBox(u,n.trimAutoCalendarName(e.qName))],init:{}}}}var d={id:"newObject",args:{template:"auto-chart",init:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qInterColumnSortOrder:[0]}},annotatedFields:a}};if(i.isMeasure(e.classifications))return s.getAggregationForFieldItem(e).then(function(t){d.args.init.qHyperCubeDef.qMeasures.push({qDef:{qDef:i.getMeasureExpression(e.qName,t)},qSortBy:{qSortByNumeric:-1,qSortByLoadOrder:1}});return d});var p={qDef:{qFieldDefs:[e.qName],qSortCriterias:[{qSortByLoadOrder:1}]}};d.args.init.qHyperCubeDef.qDimensions.push(p);return d}function l(t){var e=[];for(var i=0;i<t.length;++i){var s=t[i];s.isDateField=u(s);s.isGeoField=d(s);e.push(s);if(s.qDerivedFieldData)for(var o=0;o<s.qDerivedFieldData.qDerivedFieldLists.length;++o){var r=s.qDerivedFieldData.qDerivedFieldLists[o];for(var a=0;a<r.qFieldDefs.length;++a){var l=r.qFieldDefs[a];e.push({qName:l.qName,displayName:n.trimAutoCalendarName(l.qName),qSrcTables:s.qSrcTables,qTags:l.qTags,isDerived:true,isDerivedFromDate:s.isDateField,sourceField:s.qName,derivedDefinitionName:r.qDerivedDefinitionName})}}}return e}function c(t,e,i){var s=[];if(e)for(var o=0;o<e.qDerivedFieldLists.length;++o){var r=e.qDerivedFieldLists[o];for(var l=0;l<r.qFieldDefs.length;++l){var c=r.qFieldDefs[l];s.push({id:c.qName,qName:c.qMethod,name:c.qName,displayName:n.trimAutoCalendarName(c.qName),qSrcTables:t.qSrcTables,srcTables:t.qSrcTables,qTags:c.qTags,tags:c.qTags,type:"field",isDerived:true,isDerivedFromDate:i,getDropOption:a.bind(null,c,null),sourceField:t.qName,derivedDefinitionName:r.qDerivedDefinitionName})}}return s}function u(t){if(t.qDerivedFieldData)return t.qTags.indexOf("$date")>-1||t.qTags.indexOf("$timestamp")>-1;return false}function d(t){return t.qTags.indexOf("$geoname")>-1}var p={create:function t(n,i){var s=n.map(function(t){var n=u(t);var s=d(t);var o=a.bind(null,t,null);var r=void 0;var l=void 0;var p=void 0;if(i){var h=i._getFields(t.qName,t.qSrcTables);if(h.length>0){r=i.getClassifications(t.qName,t.qSrcTables);l=i.getDataTypes(t.qName,t.qSrcTables);p=i.getDefaultAggregation(t.qName,t.qSrcTables)}o=a.bind(null,t,h);t["defaultAggregation"]=p;t["classifications"]=r;t["dataTypes"]=l}var f={id:t.qName,name:t.qName,type:"field",dataTypes:[],classifications:[],defaultAggregation:"",isDateField:n,isGeoField:s,srcTables:t.qSrcTables,sourceField:t.sourceField,calendarTemplateName:t.derivedDefinitionName,getDropOption:o,tags:t.qTags,icon:e.isDirectDiscoveryField(t)?"direct-discovery":"",iconTooltip:e.getTypeTranslationKey(t.qTags),derivedFields:t.qDerivedFieldData?c(t,t.qDerivedFieldData,n):[]};if(i){f.dataTypes=l;f.classifications=r;f.defaultAggregation=p}return f});return s},expand:l,createFromArray:function t(e,n){var i,s=[];for(i=0;i<e.length;i++){n&&(e[i].qName=e[i][n]);s.push({name:e[i].qName,type:"field",getDropOption:a.bind(null,e[i],null)})}return s},getTables:function t(e){var n=e;var i,s,o;o=[];for(i=0;i<n.length;++i)for(s=0;s<n[i].qSrcTables.length;++s)-1===o.indexOf(n[i].qSrcTables[s])&&o.push(n[i].qSrcTables[s]);return o}};return p}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i;!(i=function(){function t(t,e){0===arguments.length?this.set(0,0):this.set(t,e)}t.prototype={toString:function t(){return this.x+" "+this.y},clone:function e(){return new t(this.x,this.y)},set:function t(e,n){this.x=e;this.y=n},equal:function t(e){return this.x===e.x&&this.y===e.y},closeTo:function t(e,n){if(!e)return false;return Math.abs(this.x-e.x)<n&&Math.abs(this.y-e.y)<n},distanceTo:function t(e){if(!e)return NaN;return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}};return t}.call(e,n,e,t),void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89),n(90)],s=function(t,e,n){function i(n){return n?e.resolve(n.enigmaModel):t.getApp()}var s={};s.get=function(t,e){return i(e).then(function(e){return e.getMeasure(t)})};s.create=function(t,e){return i(e).then(function(e){t.qInfo.qId=t.qInfo.qId||n.generateId();return e.createMeasure(t)})};s.remove=function(t,e){return i(e).then(function(e){return e.destroyMeasure(t)})};s.getList=function(t){return i(t).then(function(t){return t.getMeasureListObject()})};s.getListLayout=function(t){return s.getList(t).then(function(t){return t.getLayout()})};return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){return!!t.qTags&&-1!==t.qTags.indexOf("$dd_measure")}function e(t){return!!t.qTags&&-1!==t.qTags.indexOf("$dd_details")}function n(t){return!!t.qTags&&-1!==t.qTags.indexOf("$dd_dimension")}function i(t){return!!t.qTags&&-1!==t.qTags.indexOf("$directdiscovery")}function s(n){var i=n;n&&(i=n.filter(function(n){return!t(n)&&!e(n)}));return i}function o(i){var s="";var o={qTags:i};t(o)?s="DirectDiscovery.Measure":e(o)?s="DirectDiscovery.Details":n(o)&&(s="DirectDiscovery.Dimension");return s}return{isMeasure:t,isDetails:e,isDimension:n,removeMeasureAndDetailsFields:s,getTypeTranslationKey:o,isDirectDiscoveryField:i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(89),n(97),n(48)],s=function(t,e,n,i){function s(t,n){var i=new e;t.get(n).then(function(t){e.all({properties:t.getProperties(),layout:t.getLayout?t.getLayout():e.resolve()}).then(function(e){i.resolve({model:t,properties:e.properties,layout:e.layout})})});return i.promise}function o(e,n){e=e.map(function(e){return{name:e,matching:n&&t.match(e,n)}});e.sort(function(t,e){return t.matching&&!e.matching?-1:!t.matching&&e.matching?1:t.name.localeCompare(e.name)});return e}function r(t){var e=t.item;var n=t.query&&t.query.toLowerCase();var i=o(e.tags,n);return{query:n,name:e.name,tags:i}}function a(t,e,n,i){function s(){t(n);e()}return{action:s,icon:i.icon,disabled:i.disabled,title:i.title,tid:i.tid}}function l(t,e,n){return a(t,e,n,{icon:"bin",title:"Common.Delete",tid:"preview-delete-item"})}function c(t,e,n){return a(t,e,n,{icon:"lui-icon lui-icon--edit",title:"Common.Edit",tid:"preview-edit-item"})}function u(t,e,n){return a(t,e,n,{icon:"copy",title:"Common.Duplicate",tid:"preview-duplicate-item"})}function d(t,e,n,i,s){return a(t,e,n,{icon:"drop",title:i,tid:"preview-add-to-sheet",disabled:!s})}function p(t,e,n,i){return a(t,e,n,{icon:"drop",title:"library.addtosheet",tid:"preview-add-to-sheet",disabled:!i})}function h(t,e,n,i){return a(t,e,n,{icon:"expression",title:"contextMenu.addToMasterItems.AsMeasure",tid:"preview-add-as-measure",disabled:!i})}function f(t,e,n,i){return a(t,e,n,{icon:"box",title:"contextMenu.addToMasterItems.AsDimension",tid:"preview-add-as-dimension",disabled:!i})}function g(t,e,n,i){return a(t,e,n,{icon:"cogwheel",title:"field.settings.dialog.title",tid:"preview-field-settings",disabled:!i})}function v(t,e,n){return a(t,e,n,{icon:"code",title:"contextMenu.embed",tid:"7a71"})}function m(t,e){if(!e)return;t.alignTo=e;var n=t.alignTo.offset(),i=t.alignTo.parents("ul").outerWidth(),s=t.alignTo.outerHeight(),o=i+7,r=s/2;t.offset={x:n.left+o,y:n.top+r};t.position="centerRight"}function b(t){var e;var s=null;var o;function r(i,r,l){e=false;o=i;function c(c){if(e)return;s=t.createPreview({item:i,query:r,modelInfo:c,$element:l,closePreview:function t(e){e&&"qv-outside"===e.type&&(o=null);a()}});t.itemDialogHandler.openPreview(s);n.on("start.assets-preview",a);t.State.StateChanged.bind(a)}t.getSlowInfo?t.getSlowInfo(i).then(function(t){c(t)}):c()}function a(){if(s){s.close();t.itemDialogHandler.close();t.State.StateChanged.unbind(a);n.off("start.assets-preview",a);s=null;if(o){o.selected=false;o=null;i.$apply(i.$rootScope)}}e=true}return{open:r,close:a}}return{buttonDelete:l,buttonEdit:c,buttonDuplicate:u,buttonAddTo:d,buttonAddToSheet:p,buttonAddMeasure:h,buttonAddDimension:f,buttonFieldSettings:g,buttonEmbed:v,alignPreview:m,getBasePreviewInfo:r,getItemInformation:s,previewManagerFactory:b}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(93),n(89),n(144),n(48),n(678),n(679),n(680),n(681),n(682),n(94),n(683),n(107),n(166),n(91),n(455),n(96),n(685),n(49),n(686),n(99),n(500),n(425),n(710),n(712)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m,b,y,x,q){var S=null,w=null,C=[];function I(){if(w){w.close();w=null}}function _(t){if(C[t]){C[t].close();C[t]=null}}function D(t,e){e.preventDefault();var n=t.controller.previewText();t.codearea.contextApi.replaceSelection(n)}function k(t,e){e.preventDefault();t.codearea.contextApi.replaceSelection(t.controller.selectedFunction.value+"()");var n=t.codearea.contextApi.getCursor();n.ch+=-1;t.codearea.contextApi.setCursor(n)}function T(t,e){e.preventDefault();t.codearea.contextApi.replaceSelection(t.controller.selectedVariable.qName)}function E(t,e){e.preventDefault();"0"===t.controller.setExpressionOption?q.getCurrentSelections(t.controller.app,t.controller.selectedAlternateState).then(function(e){void 0!==e&&void 0!==e.qSetExpression&&""!==e.qSetExpression?t.codearea.contextApi.replaceSelection("{"+e.qSetExpression+"}"):void 0!==e&&void 0!==e.qSetExpression||O()}):t.controller.selectedBookmark&&q.getSelectionsFromBookmarkId(t.controller.app,t.controller.selectedBookmark.value,t.controller.selectedAlternateState).then(function(e){void 0!==e&&void 0!==e.qSetExpression&&""!==e.qSetExpression?t.codearea.contextApi.replaceSelection("{"+e.qSetExpression+"}"):void 0!==e&&void 0!==e.qSetExpression||O()})}function A(t,e){t.functionTipOptions={service:e,view:g}}function L(e,n,i,o){if(!i)return;if(w){a();return}i=i.replace(/\n/g," ");/^(input|textarea)$/i.test(document.activeElement.tagName)&&t.support.touch&&document.activeElement.blur();function r(){a();n.codearea.contextApi.focus()}function a(){t(document).off("keydown",r);t(document).off("mouseup",r);I()}w=s.getService("luiPopover").show({template:"<lui-popover><lui-popover-body><p>{{input.text}}</p></lui-popover-body></lui-popover>",input:{text:i},controller:["$element",function(t){t.css("z-index","1022")}],alignTo:o.target,closeOnEscape:true,closeOnOutside:true,dock:"top",autoFocus:false});w.closed.then(function(){a()});t(document).one("keydown",{self:this},r);t(document).one("mouseup",{self:this},r)}function M(t,e){var n={expression:t,validity:e.validity};return h.validateExpr(n,p)}function P(t){var e={};t.forEach(function(t){t.fglist.forEach(function(n){e[n]||(e[n]=[]);e[n].push(t.func)})});return e}function O(){var t=s.getService("qvAlertDialog");return t.show({title:f.get("ErrorDialog.Title"),message:f.get("ExpressionEditor.TooManySelections"),closeOnEscape:false})}function F(){var t={statusText:"",errorMsg:"",extraErrorMsg:"",status:"",expr:"",expandedExpr:"",codeArea:null};return t}var $=false;var N=b.getFlag("ADVANCED_EXPRESSION_EDITOR_PART3");var R=N&&b.getFlag("ALT_STATE_ONE");var H={template:o,sections:{fields:{key:"fields",translation:"ExpressionEditor.Fields",template:r,state:{sectionExpanded:true,table:{label:"",value:""},field:{label:"",value:""},aggregfunc:{label:"",value:""},setExpressionCheckBox:false,distinctCheckBox:"",totalCheckBox:""},expanded:true},functions:{key:"functions",translation:"ExpressionEditor.Functions",template:a,state:{sectionExpanded:false,functionCategory:{label:"",value:"ALL"},funct:{label:"",value:""}},expanded:false},setExpressions:{key:"setExpressions",translation:"ExpressionEditor.SetExpressions",template:c,state:{sectionExpanded:false,setExpressionOption:"0",selectedBookmark:"",selectedAlternateState:""},expanded:false},variables:{key:"variables",translation:"ExpressionEditor.Variables",template:l,state:{sectionExpanded:false,variable:"",sysVarsCheckBox:false,showVariablesFirstTime:true},expanded:false}},controller:["$scope","$element","$timeout",function(e,n,i){e.stringLimits=p;e.controller=e.input.controller;e.codearea={content:e.input.expr};e.validity={expression:true};e.initializeToolbar=function(){e.undoDisabled=false;e.redoDisabled=false};e.exposeSetExpression=b.getFlag("SET_EXPRESSION_CHECKBOX");e.isAdvancedPart3=b.getFlag("ADVANCED_EXPRESSION_EDITOR_PART3");e.sections=H.sections;e.items=[H.sections.fields,H.sections.functions,H.sections.setExpressions,H.sections.variables];e.$watch("controller.helpmodeActive",function(){if(e.controller.helpmodeActive){e.helpmodeTooltip="Tooltip.HelpMode.Exit";if(e.isAdvancedPart3){e.undoDisabled=true;e.redoDisabled=true}}else{e.helpmodeTooltip="Tooltip.HelpMode.Enter";if(e.isAdvancedPart3){e.undoDisabled=false;e.redoDisabled=false}}});e.$watch("controller.selectedFunctionCategory",function(t){e.sections.functions.state.functionCategory=t;e.controller.setFunctionCategoryFilter(t)});e.$watch("controller.selectedFunction",function(t){e.sections.functions.state.funct=t;t&&(e.controller.selectedFunctionTip=e.input.expressionBnfModel.getFunctionTip(t.value))});e.$watch("controller.selectedTable",function(t){e.sections.fields.state.table=t;e.controller.setTableFilter(t)});e.$watch("controller.selectedField",function(t){e.sections.fields.state.field=t});e.$watch("controller.selectedFunction",function(t){e.sections.fields.state.funct=t});e.$watch("controller.selectedCommonFunction",function(t){e.sections.fields.state.aggregfunc=t});e.$watch("controller.currentOption",function(t){if(e.exposeSetExpression){e.sections.fields.state.setExpressionCheckBox=t;t&&q.getCurrentSelections(e.app,e.controller.stateName).then(function(n){if(void 0!==n&&void 0!==n.qSetExpression&&""!==n.qSetExpression)e.controller.setCurrentSelections(n.qSetExpression);else if(void 0===n||void 0===n.qSetExpression){e.controller.currentOption=!t;e.sections.fields.state.setExpressionCheckBox=!t;O()}else{e.controller.currentOption=!t;e.items[0].state.setExpressionCheckBox=!t}}).catch(function(){e.controller.currentOption=!t;e.sections.fields.state.setExpressionCheckBox=!t})}});e.$watch("controller.distinctOption",function(t){e.sections.fields.state.distinctCheckBox=t});e.$watch("controller.totalOption",function(t){e.sections.fields.state.totalCheckBox=t});e.$watch("controller.showSystemVars",function(t){e.sections.variables.state.sysVarsCheckBox=t;e.controller.setSysVarsFilter()});e.$watch("controller.selectedVariable",function(t){e.sections.variables.state.variable=t;t?t.qDefinition&&0===t.qDefinition.indexOf("=")?e.app.evaluate(t.qDefinition).then(function(n){e.controller.showVariableInfo(t.qDefinition,n)}):e.controller.showVariableInfo(t.qDefinition,t.qDefinition):e.controller.showVariableInfo("","")});e.enableTouchOverlay=v.utils.touch;e.insertTextHandler=D.bind(null,e);e.insertFunctionHandler=k.bind(null,e);e.insertVariableHandler=T.bind(null,e);e.insertSetExpressionHandler=E.bind(null,e);e.info=F();e.showErrorMessage=L.bind(null,n,e);e.qlikviewReloadScriptMode={name:"qlikviewscript",service:e.input.expressionBnfModel};e.helpModeOptions={syntax:"chartsyntax",service:e.input.expressionBnfModel};e.autocompleteOptions={completeSingle:false,service:e.input.expressionBnfModel};A(e,e.input.expressionBnfModel);e.cancel=function(){e.close();e.$destroy()};function o(t){return t.replace(/(\r\n|\r|\n)/,"\r\n")}e.confirm=function(){var t=o(e.codearea.content);var n=M(t,e);(n||e.input.allowEmpty&&""===t)&&e.close(t)};u.StateChanged.bind(e.cancel);function r(t){e.info.codeArea=e.codearea;t=o(t);e.validity.expression||M(t,e)}x.treatAsDesktop()&&i(function(){i(function(){e.codearea.contextApi.focus();e.codearea.contextApi.setCursor(e.codearea.contextApi.lineCount(),0)})});e.$watch("codearea.content",r);e.openPopover=function(t){var n=t.currentTarget.dataset.context;S&&C&&S!==n&&_(S);S=n;if(!C[n]){C[n]=s.getService("luiPopover").show({template:y.template,controller:y.controller,alignTo:t.currentTarget,input:{context:n,ctrl:e.controller,closePopover:_,items:e.controller.getData(S),setSelectedItem:e.controller.setSelectedItem},position:"bottom",closeOnEscape:true});C[n].closed.then(function(){_(n)})}};i(function(){t(".qv-expandable-list-component").on("scroll",function(){_()})});e.closePopoverIfOpen=function(e){var n=t(e.currentTarget).parents(".popover-wrapper").length>0,i=t(e.target).hasClass("expression-editor-dropdown"),s=t(e.target).hasClass("label");n||i||s||_(S)};e.$on("$destroy",function(){I();_(S);t(".qv-expandable-list-component").off("scroll");$=false;u.StateChanged.unbind(e.cancel)});e.onHelpmode=function(){e.controller.helpmodeActive=!e.controller.helpmodeActive;t(document.body).toggleClass("help-mode",e.controller.helpmodeActive)};function a(){e.controller.helpmodeActive=false}e.onUndo=function(){a();e.codearea.contextApi.undo()};e.onRedo=function(){a();e.codearea.contextApi.redo()};e.initializeToolbar();e.changeCurrentSetExpressionOption=function(t){if(!N)return;e.sections.setExpressions.state.setExpressionOption=t;e.controller.selectedBookmark="";e.controller.selectedAlternateState="";"0"===t?R&&e.controller.currentSelectionsAlternateStates.length>0&&(e.controller.selectedAlternateState=e.controller.currentSelectionsAlternateStates[0].value):e.controller.bookmarks.length>0&&(e.controller.selectedBookmark=e.controller.bookmarks[0])};e.$watch("controller.selectedBookmark",function(t){if(!N)return;e.sections.setExpressions.state.selectedBookmark=t;R&&t&&t.alternateStates.length>0&&(e.controller.isStateInArray(t.alternateStates,e.controller.selectedAlternateState)||(e.controller.selectedAlternateState=t.alternateStates[0].value))});e.$watch("controller.selectedAlternateState",function(t){R&&(e.sections.setExpressions.state.selectedAlternateState=t)})}]};function V(t){var o=t.app?n.resolve(t.app.enigmaModel):e.getApp();return o.then(function(e){return n.all({bnf:m.get(e),fields:e.getFieldList(),variables:e.getVariableList(),layout:e.getLayout(),bookmarks:e.getBookmarkList()}).then(function(o){if($)return n.reject();var r=o.bnf;var a=i.expand(o.fields);var l=P(r.getFunctionsAndCategories());var c=String(t.expr||"");var u={title:t.title,allowEmpty:t.allowEmpty,labels:t.labels,expr:c,mode:t.mode,controller:d.create({fields:a,sections:H.sections,functions:l,variables:o.variables,bookmarks:o.bookmarks,translator:f,exposeSetExpression:b.getFlag("SET_EXPRESSION_CHECKBOX"),isAdvancedPart3:N,isAlternateState:R,showAlternateStates:R&&e.layout.qStateNames.length>0,stateName:t.stateName,published:true===o.layout.published,app:e}),app:e,expressionBnfModel:r};$=true;var p=s.getService("luiDialog").show({template:H.template,controller:H.controller,input:u,closeOnOutside:false,showArrow:false});return p.closed.then(function(t){return void 0===t?n.reject():t})})})}function B(){return $}return{_insertTextHandler:D,show:V,isOpen:B}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){var i=n(11);var s=n(54);var o=n(615);(function(t,e){var n=this,s;s=n.SirTrevor={};s.DEBUG=false;s.SKIP_VALIDATION=false;s.version="0.3.0";s.LANGUAGE="en";function r(e){return e instanceof t?e:t(e)}s.DEFAULTS={defaultType:false,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:false,left:"50%",top:"50%"},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",baseImageUrl:"/sir-trevor-uploads/",errorsContainer:void 0};s.BlockMixins={};s.Blocks={};s.Formatters={};s.instances=[];s.Events=o;var a=false;var l={bound:[],_bindFunctions:function(){this.bound.length>0&&e.bindAll.apply(null,e.union([this],this.bound))}};var c={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(t){return this.$el.find(t)},render:function(){return this},destroy:function(){e.isUndefined(this.stopListening)||this.stopListening();this.$el.remove()},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var n=e.extend({},e.result(this,"attributes")),i;this.id&&(n.id=this.id);this.className&&(n["class"]=this.className);if(n.html){i=n.html;delete n.html}var s=t("<"+this.tagName+">").attr(n);i&&s.html(i);this._setElement(s)}},_setElement:function(t){this.$el=r(t);this.el=this.$el[0];return this}};function u(t,e){var n=-1,i=-1,s=e.length,o=t.length;for(var r=0;r<s;r++){-1==n&&t.substr(r,1)!=e.substr(r,1)&&(n=r-1);-1==i&&t.substr(o-r-1,1)!=e.substr(s-r-1,1)&&(i=r)}return{result:e.substr(n,s-i-n+1),pos1:n,pos2:i}}(function(t){function e(t){t.preventDefault()}function n(e){e.originalEvent.dataTransfer.dropEffect="copy";t(e.currentTarget).addClass("st-drag-over");e.preventDefault()}function i(e){t(e.currentTarget).removeClass("st-drag-over");e.preventDefault()}t.fn.dropArea=function(){this.bind("dragenter",e).bind("dragover",n).bind("dragleave",i);return this};t.fn.noDropArea=function(){this.unbind("dragenter").unbind("dragover").unbind("dragleave");return this};t.fn.caretToEnd=function(){var t,e;t=document.createRange();t.selectNodeContents(this[0]);t.collapse(false);e=window.getSelection();e.removeAllRanges();e.addRange(t);return this}})(i);var d=function(t,n){var i=this;var s;s=t&&e.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)};e.extend(s,i,n);var o=function(){this.constructor=s};o.prototype=i.prototype;s.prototype=new o;t&&e.extend(s.prototype,t);s.__super__=i.prototype;return s};s.log=function(t){!e.isUndefined(console)&&s.DEBUG&&console.log(t)};s.Locales={en:{general:{delete:"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};if(void 0===window.i18n){s.log("Using i18n stub");window.i18n={t:function(t,n){var i=t.split(":"),o,r,a,l;r=s.Locales[s.LANGUAGE];for(l=0;l<i.length;l++){a=i[l];e.isUndefined(r[a])||(r=r[a])}o=r;if(!e.isString(o))return"";o.indexOf("__")>=0&&e.each(n,function(t,e){o=o.replace("__"+e+"__",t)});return o}}}else{s.log("Using i18next");i18n.init({resStore:s.Locales,fallbackLng:s.LANGUAGE,ns:{namespaces:["general","blocks"],defaultNs:"general"}})}(function(t,e,n){function i(t,n){var i=e.createElement(t||"div"),s;for(s in n)i[s]=n[s];return i}function s(t){for(var e=1,n=arguments.length;e<n;e++)t.appendChild(arguments[e]);return t}function o(t,e,n,i){var s=["opacity",e,~~(100*t),n,i].join("-"),o=.01+n/i*100,r=Math.max(1-(1-t)/e*(100-o),t),a=p.substring(0,p.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[s]||(h.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+r+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",0),d[s]=1),s}function r(t,e){var i=t.style,s,o;if(i[e]!==n)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(o=0;o<u.length;o++){s=u[o]+e;if(i[s]!==n)return s}}function a(t,e){for(var n in e)t.style[r(t,n)||n]=e[n];return t}function l(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)t[s]===n&&(t[s]=i[s])}return t}function c(t){var e={x:t.offsetLeft,y:t.offsetTop};while(t=t.offsetParent)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var u=["webkit","Moz","ms","O"],d={},p,h=function(){var t=i("style");return s(e.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},g=function t(e){if(!this.spin)return new t(e);this.opts=l(e||{},t.defaults,f)};g.defaults={},l(g.prototype,{spin:function(t){this.stop();var e=this,n=e.opts,s=e.el=a(i(0,{className:n.className}),{position:"relative",zIndex:n.zIndex}),o=n.radius+n.length+n.width,r,l;t&&(t.insertBefore(s,t.firstChild||null),l=c(t),r=c(s),a(s,{left:("auto"==n.left?l.x-r.x+(t.offsetWidth>>1):n.left+o)+"px",top:("auto"==n.top?l.y-r.y+(t.offsetHeight>>1):n.top+o)+"px"})),s.setAttribute("aria-role","progressbar"),e.lines(s,e.opts);if(!p){var u=0,d=n.fps,h=d/n.speed,f=(1-n.opacity)/(h*n.trail/100),g=h/n.lines;!function t(){u++;for(var i=n.lines;i;i--){var o=Math.max(1-(u+i*g)%h*f,n.opacity);e.opacity(s,n.lines-i,o,n)}e.timeout=e.el&&setTimeout(t,~~(1e3/d))}()}return e},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=n),this},lines:function(t,e){function n(t,n){return a(i(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*r+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.width>>1)+"px"})}var r=0,l;for(;r<e.lines;r++)l=a(i(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:p&&o(e.opacity,e.trail,r,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&s(l,a(n("#000","0 0 4px #000"),{top:"2px"})),s(t,s(l,n(e.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}}),!function(){function t(t,e){return i("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=a(i("group"),{behavior:"url(#default#VML)"});!r(e,"transform")&&e.adj?(h.addRule(".spin-vml","behavior:url(#default#VML)"),g.prototype.lines=function(e,n){function i(){return a(t("group",{coordsize:l+" "+l,coordorigin:-r+" "+-r}),{width:l,height:l})}function o(e,o,l){s(u,s(a(i(),{rotation:360/n.lines*e+"deg",left:~~o}),s(a(t("roundrect",{arcsize:1}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),t("fill",{color:n.color,opacity:n.opacity}),t("stroke",{opacity:0}))))}var r=n.length+n.width,l=2*r,c=2*-(n.width+n.length)+"px",u=a(i(),{position:"absolute",top:c,left:c}),d;if(n.shadow)for(d=1;d<=n.lines;d++)o(d,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(d=1;d<=n.lines;d++)o(d);return s(e,u)},g.prototype.opacity=function(t,e,n,i){var s=t.firstChild;i=i.shadow&&i.lines||0,s&&e+i<s.childNodes.length&&(s=s.childNodes[e+i],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=n))}):p=r(e,"animation")}(),t.Spinner=g})(window,document);s.editorStore=function(t,n,i){var o;i=i||{};switch(n){case"create":var r=e.trim(t.$el.val());t.dataStore={data:[]};if(r.length>0)try{var a=JSON.parse(r);e.isUndefined(a.data)||(t.dataStore=a)}catch(e){t.errors.push({text:i18n.t("errors:load_fail")});t.renderErrors();s.log("Sorry there has been a problem with parsing the JSON");s.log(e)}break;case"reset":t.dataStore={data:[]};break;case"add":if(i.data){t.dataStore.data.push(i.data);o=t.dataStore}break;case"save":t.$el.val(t.dataStore.data.length>0?JSON.stringify(t.dataStore):"");break;case"read":o=t.dataStore;break}if(o)return o};s.Submittable=function(t){this.$form=t;this.intialize()};e.extend(s.Submittable.prototype,{intialize:function(){this.$submitBtn=this.$form.find("input[type='submit']");var n=[];e.each(this.$submitBtn,function(e){n.push(t(e).attr("value"))});this.submitBtnTitles=n;this.canSubmit=true;this.globalUploadCount=0;this._bindEvents()},setSubmitButton:function(t,e){this.$submitBtn.attr("value",e)},resetSubmitButton:function(){e.each(this.$submitBtn,function(e,n){t(e).attr("value",this.submitBtnTitles[n])},this)},onUploadStart:function(t){this.globalUploadCount++;s.log("onUploadStart called "+this.globalUploadCount);1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(t){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1;s.log("onUploadStop called "+this.globalUploadCount);0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(t){s.log("onError called");this.canSubmit=false},_disableSubmitButton:function(t){this.setSubmitButton(null,t||i18n.t("general:wait"));this.$submitBtn.attr("disabled","disabled").addClass("disabled")},_enableSubmitButton:function(){this.resetSubmitButton();this.$submitBtn.removeAttr("disabled").removeClass("disabled")},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){e.forEach(this._events,function(t,e){s.EventBus.on(e,this[t],this)},this)}});s.fileUploader=function(n,i,o,r){var a=[n.blockID,(new Date).getTime(),"raw"].join("-");var l=new FormData;l.append("attachment[name]",i.name);l.append("attachment[file]",i);l.append("attachment[uid]",a);n.resetMessages();var c=function(t){s.log("Upload callback called");!e.isUndefined(o)&&e.isFunction(o)&&e.bind(o,n)(t)};var u=function(t,i,o){s.log("Upload callback error called");!e.isUndefined(r)&&e.isFunction(r)&&e.bind(r,n)(i)};var d=t.ajax({url:s.DEFAULTS.uploadUrl,data:l,cache:false,contentType:false,processData:false,dataType:"json",type:"POST"});n.addQueuedItem(a,d);d.done(c).fail(u).always(e.bind(n.removeQueuedItem,n,a));return d};var p=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;e.mixin({isURI:function(t){return p.test(t)},titleize:function(t){if(null===t)return"";t=String(t).toLowerCase();return t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})},classify:function(t){return e.titleize(String(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},classifyList:function(t){return e.map(t,function(t){return e.classify(t)})},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},underscored:function(t){return e.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},reverse:function(t){return t.split("").reverse().join("")},flattern:function(t){var n={};e.each(t,function(i,s){n[e.isArray(t)?i:s]=true});return n},to_slug:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}});s.toHTML=function(t,n){n=e.classify(n);var i=t,o="Text"===n;e.isUndefined(o)&&(o=false);o&&(i="<div>"+i);i=i.replace(/^\> (.+)$/gm,"$1");var r,a;for(r in s.Formatters)if(s.Formatters.hasOwnProperty(r)){a=s.Formatters[r];!e.isUndefined(a.toHTML)&&e.isFunction(a.toHTML)&&(i=a.toHTML(i))}var l;if(s.Blocks.hasOwnProperty(n)){l=s.Blocks[n];!e.isUndefined(l.prototype.toHTML)&&e.isFunction(l.prototype.toHTML)&&(i=l.prototype.toHTML(i))}if(o){i=i.replace(/\n\n/gm,"</div><div><br></div><div>");i=i.replace(/\n/gm,"</div><div>")}i=i.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,"");i=i.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\~/g,"~").replace(/\\\-/g,"-");o&&(i+="</div>");return i};s.toMarkdown=function(t,n){n=e.classify(n);var i=t;i=i.replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|\\?xml:|st1:|o:)(.*?)>/gi,"");var o=["style","script","applet","embed","noframes","noscript"],r,a;for(a=0;a<o.length;a++){r=new RegExp("<"+o[a]+".*?"+o[a]+"(.*?)>","gi");i=i.replace(r,"")}i=i.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\~/g,"\\~").replace(/\-/g,"\\-");function l(t,n,i){e.isUndefined(i)&&(i="");return"**"+n.replace(/<(.)?br(.)?>/g,"")+"**"+i}function c(t,n,i){e.isUndefined(i)&&(i="");return"_"+n.replace(/<(.)?br(.)?>/g,"")+"_"+i}i=i.replace(/\u200b/g,"").replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"");var u,d;for(u in s.Formatters)if(s.Formatters.hasOwnProperty(u)){d=s.Formatters[u];!e.isUndefined(d.toMarkdown)&&e.isFunction(d.toMarkdown)&&(i=d.toMarkdown(i))}i=i.replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>(?!$)/g,"\n").replace(/<(.)?br(.)?>/g,"\n");i=i.replace(/&nbsp;/g," ");var p;if(s.Blocks.hasOwnProperty(n)){p=s.Blocks[n];!e.isUndefined(p.prototype.toMarkdown)&&e.isFunction(p.prototype.toMarkdown)&&(i=p.prototype.toMarkdown(i))}i=i.replace(/<\/?[^>]+(>|$)/g,"");return i};s.EventBus=e.extend({},s.Events);s.BlockMixins.Ajaxable={mixinName:"Ajaxable",ajaxable:true,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(t,e){s.log("Adding queued item for "+this.blockID+" called "+t);s.EventBus.trigger("onUploadStart");this._queued.push({name:t,deffered:e})},removeQueuedItem:function(t){s.log("Removing queued item for "+this.blockID+" called "+t);s.EventBus.trigger("onUploadStop");this._queued=e.reject(this._queued,function(e){return e.name==t})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){e.each(this._queued,function(t){s.log("Aborting queued request: "+t.name);t.deffered.abort()},this)}};s.BlockMixins.Controllable={mixinName:"Controllable",initializeControllable:function(){s.log("Adding controllable to block "+this.blockID);this.$control_ui=t("<div>",{class:"st-block__control-ui"});e.each(this.controls,function(t,n){this.addUiControl(n,e.bind(t,this))},this);this.$inner.append(this.$control_ui)},getControlTemplate:function(e){return t("<a>",{"data-icon":e,class:"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+e})},addUiControl:function(t,e){this.$control_ui.append(this.getControlTemplate(t));this.$control_ui.on("click",".st-block-control-ui-btn--"+t,e)}};s.BlockMixins.Droppable={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],initializeDroppable:function(){s.log("Adding droppable to block "+this.blockID);this.drop_options=e.extend({},s.DEFAULTS.Block.drop_options,this.drop_options);var n=t(e.template(this.drop_options.html,{block:this}));this.$editor.hide();this.$inputs.append(n);this.$dropzone=n;this.$dropzone.dropArea().bind("drop",e.bind(this._handleDrop,this));this.$inner.addClass("st-block__inner--droppable")},_handleDrop:function(n){n.preventDefault();n=n.originalEvent;var i=t(n.target),o=n.dataTransfer.types,r,a=[];i.removeClass("st-dropzone--dragover");!e.isUndefined(o)&&e.some(o,function(t){return e.include(this.valid_drop_file_types,t)},this)&&this.onDrop(n.dataTransfer);s.EventBus.trigger("block:content:dropped")}};s.BlockMixins.Fetchable={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(s.BlockMixins.Ajaxable)},fetch:function(n,i,s){var o=e.uniqueId(this.blockID+"_fetch"),r=t.ajax(n);this.resetMessages();this.addQueuedItem(o,r);e.isUndefined(i)||r.done(e.bind(i,this));e.isUndefined(s)||r.fail(e.bind(s,this));r.always(e.bind(this.removeQueuedItem,this,o));return r}};s.BlockMixins.Pastable={mixinName:"Pastable",initializePastable:function(){s.log("Adding pastable to block "+this.blockID);this.paste_options=e.extend({},s.DEFAULTS.Block.paste_options,this.paste_options);this.$inputs.append(e.template(this.paste_options.html,this));this.$(".st-paste-block").bind("click",function(){t(this).select()}).bind("paste",this._handleContentPaste).bind("submit",this._handleContentPaste)}};s.BlockMixins.Uploadable={mixinName:"Uploadable",uploadsCount:0,initializeUploadable:function(){s.log("Adding uploadable to block "+this.blockID);this.withMixin(s.BlockMixins.Ajaxable);this.upload_options=e.extend({},s.DEFAULTS.Block.upload_options,this.upload_options);this.$inputs.append(e.template(this.upload_options.html,this))},uploader:function(t,e,n){return s.fileUploader(this,t,e,n)}};s.BlockPositioner=function(){var t=["<div class='st-block-positioner__inner'>","<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>","</div>"].join("\n");var n=function(t,e){this.$block=t;this.instanceID=e;this.total_blocks=0;this._ensureElement();this._bindFunctions();this.initialize()};e.extend(n.prototype,l,c,{bound:["onBlockCountChange","onSelectChange","toggle","show","hide"],className:"st-block-positioner",visibleClass:"st-block-positioner--is-visible",initialize:function(){this.$el.append(t);this.$select=this.$(".st-block-positioner__select");this.$select.on("change",this.onSelectChange);s.EventBus.on(this.instanceID+":blocks:count_update",this.onBlockCountChange)},onBlockCountChange:function(t){if(t!=this.total_blocks){this.total_blocks=t;this.renderPositionList()}},onSelectChange:function(){var t=this.$select.val();if(0!==t){s.EventBus.trigger(this.instanceID+":blocks:change_position",this.$block,t,1==t?"before":"after");this.toggle()}},renderPositionList:function(){var t="<option value='0'>"+i18n.t("general:position")+"</option>";for(var e=1;e<=this.total_blocks;e++)t+="<option value="+e+">"+e+"</option>";this.$select.html(t)},toggle:function(){this.$select.val(0);this.$el.toggleClass(this.visibleClass)},show:function(){this.$el.addClass(this.visibleClass)},hide:function(){this.$el.removeClass(this.visibleClass)}});return n}();s.BlockReorder=function(){var n=function(t){this.$block=t;this._ensureElement();this._bindFunctions();this.initialize()};e.extend(n.prototype,l,c,{bound:["onMouseDown","onClick","onDragStart","onDragEnd","onDrag","onDrop"],className:"st-block-ui-btn st-block-ui-btn--reorder st-icon",tagName:"a",attributes:function(){return{html:"reorder",draggable:"true","data-icon":"move"}},initialize:function(){this.$el.bind("mousedown touchstart",this.onMouseDown).bind("click",this.onClick).bind("dragstart",this.onDragStart).bind("dragend touchend",this.onDragEnd).bind("drag touchmove",this.onDrag);this.$block.dropArea().bind("drop",this.onDrop)},onMouseDown:function(){s.EventBus.trigger("block:reorder:down")},onDrop:function(n){n.preventDefault();var i=this.$block,o=n.originalEvent.dataTransfer.getData("text/plain"),r=t("#"+o);e.isUndefined(o)||e.isEmpty(r)||i.attr("id")==o||i.attr("data-instance")!=r.attr("data-instance")||i.after(r);s.EventBus.trigger("block:reorder:dropped",o)},onDragStart:function(e){var n=t(e.currentTarget).parent();e.originalEvent.dataTransfer.setDragImage(this.$block[0],n.position().left,n.position().top);e.originalEvent.dataTransfer.setData("Text",this.$block.attr("id"));s.EventBus.trigger("block:reorder:dragstart");this.$block.addClass("st-block--dragging")},onDragEnd:function(t){s.EventBus.trigger("block:reorder:dragend");this.$block.removeClass("st-block--dragging")},onDrag:function(t){},onClick:function(){},render:function(){return this}});return n}();s.BlockDeletion=function(){var t=function(){this._ensureElement();this._bindFunctions()};e.extend(t.prototype,l,c,{tagName:"a",className:"st-block-ui-btn st-block-ui-btn--delete st-icon",attributes:{html:"delete","data-icon":"bin"}});return t}();var h=function(t){var n=t.attr("data-st-name")||t.attr("name");n||(n="Field");return e.capitalize(n)};s.BlockValidations={errors:[],valid:function(){this.performValidations();return 0===this.errors.length},performValidations:function(){this.resetErrors();var t=this.$(".st-required");e.each(t,this.validateField,this);e.each(this.validations,this.runValidator,this);this.$el.toggleClass("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(e){e=t(e);var n=e.attr("contenteditable")?e.text():e.val();0===n.length&&this.setError(e,i18n.t("errors:block_empty",{name:h(e)}))},runValidator:function(t){e.isUndefined(this[t])||this[t].call(this)},setError:function(t,e){var n=this.addMessage(e,"st-msg--error");t.addClass("st-error");this.errors.push({field:t,reason:e,msg:n})},resetErrors:function(){e.each(this.errors,function(t){t.field.removeClass("st-error");t.msg.remove()});this.$messages.removeClass("st-block__messages--is-visible");this.errors=[]}};s.BlockStore={blockStorage:{},createStore:function(t){this.blockStorage={type:e.underscored(this.type),data:t||{}}},save:function(){this.toData()},saveAndReturnData:function(){this.save();return this.blockStorage},saveAndGetData:function(){var t=this.saveAndReturnData();return t.data||t},getData:function(){return this.blockStorage.data},setData:function(t){s.log("Setting data for block "+this.blockID);e.extend(this.blockStorage.data,t||{})},setAndRetrieveData:function(t){this.setData(t);return this.getData()},setAndLoadData:function(t){this.setData(t);this.beforeLoadingData()},toData:function(){},loadData:function(){},beforeLoadingData:function(){s.log("loadData for "+this.blockID);s.EventBus.trigger("editor/block/loadData");this.loadData(this.getData())},_loadData:function(){s.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead.");this.beforeLoadingData()},checkAndLoadData:function(){e.isEmpty(this.getData())||this.beforeLoadingData()}};s.SimpleBlock=function(){var n=function(t,n){this.createStore(t);this.blockID=e.uniqueId("st-block-");this.instanceID=n;this._ensureElement();this._bindFunctions();this.initialize.apply(this,arguments)};e.extend(n.prototype,l,s.Events,c,s.BlockStore,{focus:function(){},valid:function(){return true},className:"st-block",block_template:e.template("<div class='st-block__inner'><%= editor_html %></div>"),attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return e.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){this.blockCSSClass=e.to_slug(this.type);return this.blockCSSClass},type:"",class:function(){return e.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var t=e.result(this,"editorHTML");this.$el.append(this.block_template({editor_html:t}));this.$inner=this.$el.find(".st-block__inner");this.$inner.bind("click mouseover",function(t){t.stopPropagation()})},render:function(){this.beforeBlockRender();this._setBlockInner();this._blockPrepare();return this},_blockPrepare:function(){this._initUI();this._initMessages();this.checkAndLoadData();this.$el.addClass("st-item-ready");this.on("onRender",this.onBlockRender);this.save()},_withUIComponent:function(t,e,n){this.$ui.append(t.render().$el);e&&n&&this.$ui.on("click",e,n)},_initUI:function(){var e=t("<div>",{class:"st-block__ui"});this.$inner.append(e);this.$ui=e;this._initUIComponents()},_initMessages:function(){var e=t("<div>",{class:"st-block__messages"});this.$inner.prepend(e);this.$messages=e},addMessage:function(e,n){var i=t("<span>",{html:e,class:"st-msg "+n});this.$messages.append(i).addClass("st-block__messages--is-visible");return i},resetMessages:function(){this.$messages.html("").removeClass("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new s.BlockReorder(this.$el))}});n.fn=n.prototype;n.extend=d;return n}();s.Block=function(){var n=function(t,e){s.SimpleBlock.apply(this,arguments)};var i=["<div class='st-block__ui-delete-controls'>","<label class='st-block__delete-label'>","<%= i18n.t('general:delete') %>","</label>","<a class='st-block-ui-btn st-block-ui-btn--confirm-delete st-icon' data-icon='tick'></a>","<a class='st-block-ui-btn st-block-ui-btn--deny-delete st-icon' data-icon='close'></a>","</div>"].join("\n");var o={html:['<div class="st-block__dropzone">','<span class="st-icon"><%= _.result(block, "icon_name") %></span>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:false};var r={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")};var a={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};s.DEFAULTS.Block={drop_options:o,paste_options:r,upload_options:a};e.extend(n.prototype,s.SimpleBlock.fn,s.BlockValidations,{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender"],className:"st-block st-icon--add",attributes:function(){return e.extend(s.SimpleBlock.fn.attributes.call(this),{"data-icon-after":"add"})},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:this.title()})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:true,droppable:false,pastable:false,uploadable:false,fetchable:false,ajaxable:false,drop_options:{},paste_options:{},upload_options:{},formattable:true,_previousSelection:"",initialize:function(){},toMarkdown:function(t){return t},toHTML:function(t){return t},withMixin:function(t){if(!e.isObject(t))return;var n="initialize"+t.mixinName;if(e.isUndefined(this[n])){e.extend(this,t);this[n]()}},render:function(){this.beforeBlockRender();this._setBlockInner();this.$editor=this.$inner.children().first();if(this.droppable||this.pastable||this.uploadable){var e=t("<div>",{class:"st-block__inputs"});this.$inner.append(e);this.$inputs=e}this.hasTextBlock&&this._initTextBlocks();this.droppable&&this.withMixin(s.BlockMixins.Droppable);this.pastable&&this.withMixin(s.BlockMixins.Pastable);this.uploadable&&this.withMixin(s.BlockMixins.Uploadable);this.fetchable&&this.withMixin(s.BlockMixins.Fetchable);this.controllable&&this.withMixin(s.BlockMixins.Controllable);this.formattable&&this._initFormatting();this._blockPrepare();return this},remove:function(){this.ajaxable&&this.resolveAllInQueue();this.$el.remove()},loading:function(){e.isUndefined(this.spinner)||this.ready();this.spinner=new Spinner(s.DEFAULTS.spinner);this.spinner.spin(this.$el[0]);this.$el.addClass("st--is-loading")},ready:function(){this.$el.removeClass("st--is-loading");if(!e.isUndefined(this.spinner)){this.spinner.stop();delete this.spinner}},toData:function(){s.log("toData for "+this.blockID);var t=this.$el,n={};if(this.hasTextBlock()){var i=this.getTextBlock().html();i.length>0&&(n.text=s.toMarkdown(i,this.type))}this.$(":input").not(".st-paste-block").length>0&&this.$(":input").each(function(t,e){e.getAttribute("name")&&(n[e.getAttribute("name")]=e.value)});e.isEmpty(n)||this.setData(n)},focus:function(){this.getTextBlock().focus()},blur:function(){this.getTextBlock().blur()},onFocus:function(){this.getTextBlock().bind("focus",this._onFocus)},onBlur:function(){this.getTextBlock().bind("blur",this._onBlur)},_onFocus:function(){this.trigger("blockFocus",this.$el)},_onBlur:function(){},onDrop:function(t){},onDeleteClick:function(t){t.preventDefault();var n=function(t){t.preventDefault();this.trigger("removeBlock",this.blockID)};var s=function(t){t.preventDefault();this.$el.removeClass("st-block--delete-active");o.remove()};if(this.isEmpty()){n.call(this,new Event("click"));return}this.$inner.append(e.template(i));this.$el.addClass("st-block--delete-active");var o=this.$inner.find(".st-block__ui-delete-controls");this.$inner.on("click",".st-block-ui-btn--confirm-delete",e.bind(n,this)).on("click",".st-block-ui-btn--deny-delete",e.bind(s,this))},pastedMarkdownToHTML:function(t){return s.toHTML(s.toMarkdown(t,this.type),this.type)},onContentPasted:function(t,e){e.html(this.pastedMarkdownToHTML(e[0].innerHTML));this.getTextBlock().caretToEnd()},beforeLoadingData:function(){this.loading();if(this.droppable||this.uploadable||this.pastable){this.$editor.show();this.$inputs.hide()}s.SimpleBlock.fn.beforeLoadingData.call(this);this.ready()},_handleContentPaste:function(n){var i=t(n.currentTarget);e.delay(e.bind(this.onContentPasted,this,n,i),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){var t=new s.BlockPositioner(this.$el,this.instanceID);this._withUIComponent(t,".st-block-ui-btn--reorder",t.toggle);this._withUIComponent(new s.BlockReorder(this.$el));this._withUIComponent(new s.BlockDeletion,".st-block-ui-btn--delete",this.onDeleteClick);this.onFocus();this.onBlur()},_initFormatting:function(){var t;for(var n in s.Formatters)if(s.Formatters.hasOwnProperty(n)){t=s.Formatters[n];e.isUndefined(t.keyCode)||t._bindToBlock(this.$el)}},_initTextBlocks:function(){this.getTextBlock().bind("paste",this._handleContentPaste).bind("keyup",this.getSelectionForFormatter).bind("mouseup",this.getSelectionForFormatter).bind("DOMNodeInserted",this.clearInsertedStyles)},getSelectionForFormatter:function(){e.defer(function(){var t=window.getSelection(),e=t.toString().trim();""===e?s.EventBus.trigger("formatter:hide"):s.EventBus.trigger("formatter:positon")})},clearInsertedStyles:function(t){var e=t.target;e.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){e.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block"));return this.text_block},isEmpty:function(){return e.isEmpty(this.saveAndGetData())}});n.extend=d;return n}();s.Formatter=function(){var t=function(t){this.formatId=e.uniqueId("format-");this._configure(t||{});this.initialize.apply(this,arguments)};var n=["title","className","cmd","keyCode","param","onClick","toMarkdown","toHTML"];e.extend(t.prototype,{title:"",className:"",cmd:null,keyCode:null,param:null,toMarkdown:function(t){return t},toHTML:function(t){return t},initialize:function(){},_configure:function(t){this.options&&(t=e.extend({},this.options,t));for(var i=0,s=n.length;i<s;i++){var o=n[i];t[o]&&(this[o]=t[o])}this.options=t},isActive:function(){return document.queryCommandState(this.cmd)},_bindToBlock:function(t){var e=this,n=false;t.on("keyup",".st-text-block",function(t){17!=t.which&&224!=t.which&&91!=t.which||(n=false)}).on("keydown",".st-text-block",{formatter:e},function(t){17!=t.which&&224!=t.which&&91!=t.which||(n=true);if(t.which==t.data.formatter.keyCode&&true===n){document.execCommand(t.data.formatter.cmd,false,true);t.preventDefault();n=false}})}});t.extend=d;return t}();s.Blocks.Quote=function(){var t=e.template(['<blockquote class="st-required st-text-block" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string st-required js-cite-input" type="text" />'].join("\n"));return s.Block.extend({type:"quote",title:function(){return i18n.t("blocks:quote:title")},icon_name:"quote",editorHTML:function(){return t(this)},loadData:function(t){this.getTextBlock().html(s.toHTML(t.text,this.type));this.$(".js-cite-input").val(t.cite)},toMarkdown:function(t){return t.replace(/^(.+)$/gm,"> $1")}})}();s.Blocks.Heading=s.Block.extend({type:"Heading",title:function(){return i18n.t("blocks:heading:title")},editorHTML:'<div class="st-required st-text-block st-text-block--heading" contenteditable="true"></div>',icon_name:"heading",loadData:function(t){this.getTextBlock().html(s.toHTML(t.text,this.type))}});s.Blocks.Image=s.Block.extend({type:"image",title:function(){return i18n.t("blocks:image:title")},droppable:true,uploadable:true,icon_name:"image",loadData:function(e){this.$editor.html(t("<img>",{src:e.file.url}))},onBlockRender:function(){this.$inputs.find("button").bind("click",function(t){t.preventDefault()});this.$inputs.find("input").on("change",e.bind(function(t){this.onDrop(t.currentTarget)},this))},onDrop:function(e){var n=e.files[0],i="undefined"!==typeof URL?URL:"undefined"!==typeof webkitURL?webkitURL:null;if(/image/.test(n.type)){this.loading();this.$inputs.hide();this.$editor.html(t("<img>",{src:i.createObjectURL(n)})).show();this.uploader(n,function(t){this.setData(t);this.ready()},function(t){this.addMessage(i18n.t("blocks:image:upload_error"));this.ready()})}}});s.Blocks.Text=s.Block.extend({type:"text",title:function(){return i18n.t("blocks:text:title")},editorHTML:'<div class="st-required st-text-block" contenteditable="true"></div>',icon_name:"text",loadData:function(t){this.getTextBlock().html(s.toHTML(t.text,this.type))}});s.Blocks.List=function(){var t='<div class="st-text-block st-required" contenteditable="true"><ul><li></li></ul></div>';return s.Block.extend({type:"list",title:function(){return i18n.t("blocks:list:title")},icon_name:"list",editorHTML:function(){return e.template(t,this)},loadData:function(t){this.getTextBlock().html("<ul>"+s.toHTML(t.text,this.type)+"</ul>")},onBlockRender:function(){this.checkForList=e.bind(this.checkForList,this);this.getTextBlock().on("click keyup",this.checkForList)},checkForList:function(){0===this.$("ul").length&&document.execCommand("insertUnorderedList",false,false)},toMarkdown:function(t){return t.replace(/<\/li>/gm,"\n").replace(/<\/?[^>]+(>|$)/g,"").replace(/^(.+)$/gm," - $1")},toHTML:function(t){t=t.replace(/^ - (.+)$/gm,"<li>$1</li>").replace(/\n/gm,"");return t},onContentPasted:function(t,e){var n=this.pastedMarkdownToHTML(e[0].innerHTML),i=this.$("ul").html(n);this.getTextBlock().caretToEnd()},isEmpty:function(){return e.isEmpty(this.saveAndGetData().text)}})}();s.Blocks.Video=function(){return s.Block.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo.com\/(.+)/,html:'<iframe src="{{protocol}}//player.vimeo.com/video/{{remote_id}}?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/(?:http[s]?:\/\/)?(?:www.)?(?:(?:youtube.com\/watch\?(?:.*)(?:v=))|(?:youtu.be\/))([^&].+)/,html:'<iframe src="{{protocol}}//www.youtube.com/embed/{{remote_id}}" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}},type:"video",title:function(){return i18n.t("blocks:video:title")},droppable:true,pastable:true,icon_name:"video",loadData:function(t){if(!this.providers.hasOwnProperty(t.source))return;this.providers[t.source].square?this.$editor.addClass("st-block__editor--with-square-media"):this.$editor.addClass("st-block__editor--with-sixteen-by-nine-media");var e=this.providers[t.source].html.replace("{{protocol}}",window.location.protocol).replace("{{remote_id}}",t.remote_id).replace("{{width}}",this.$editor.width());this.$editor.html(e)},onContentPasted:function(e){this.handleDropPaste(t(e.target).val())},handleDropPaste:function(t){if(!e.isURI(t))return;var n,i;e.each(this.providers,function(s,o){n=s.regex.exec(t);if(null!==n&&!e.isUndefined(n[1])){i={source:o,remote_id:n[1]};this.setAndLoadData(i)}},this)},onDrop:function(t){var e=t.getData("text/plain");this.handleDropPaste(e)}})}();(function(){var t=s.Formatter.extend({title:"bold",cmd:"bold",keyCode:66,text:"B"});var e=s.Formatter.extend({title:"italic",cmd:"italic",keyCode:73,text:"i"});var n=s.Formatter.extend({title:"link",iconName:"link",cmd:"CreateLink",text:"link",onClick:function(){var t=prompt(i18n.t("general:link")),e=/((ftp|http|https):\/\/.)|mailto(?=\:[-\.\w]+@)/;if(t&&t.length>0){e.test(t)||(t="http://"+t);document.execCommand(this.cmd,false,t)}},isActive:function(){var t=window.getSelection(),e;t.rangeCount>0&&(e=t.getRangeAt(0).startContainer.parentNode);return e&&"A"==e.nodeName}});var i=s.Formatter.extend({title:"unlink",iconName:"link",cmd:"unlink",text:"link"});s.Formatters.Bold=new t;s.Formatters.Italic=new e;s.Formatters.Link=new n;s.Formatters.Unlink=new i})();s.BlockControl=function(){var t=function(t,e){this.type=t;this.instance_scope=e;this.block_type=s.Blocks[this.type].prototype;this.can_be_rendered=this.block_type.toolbarEnabled;this._ensureElement()};e.extend(t.prototype,l,c,s.Events,{tagName:"a",className:"st-block-control",attributes:function(){return{"data-type":this.block_type.type}},render:function(){this.$el.html('<span class="st-icon">'+e.result(this.block_type,"icon_name")+"</span>"+e.result(this.block_type,"title"));return this}});return t}();s.BlockControls=function(){var n=function(t,e){this.instance_scope=e;this.available_types=t||[];this._ensureElement();this._bindFunctions();this.initialize()};e.extend(n.prototype,l,c,s.Events,{bound:["handleControlButtonClick"],block_controls:null,className:"st-block-controls",html:"<a class='st-icon st-icon--close'>"+i18n.t("general:close")+"</a>",initialize:function(){for(var t in this.available_types)if(s.Blocks.hasOwnProperty(t)){var e=new s.BlockControl(t,this.instance_scope);e.can_be_rendered&&this.$el.append(e.render().$el)}this.$el.delegate(".st-block-control","click",this.handleControlButtonClick)},show:function(){this.$el.addClass("st-block-controls--active");s.EventBus.trigger("block:controls:shown")},hide:function(){this.$el.removeClass("st-block-controls--active");s.EventBus.trigger("block:controls:hidden")},handleControlButtonClick:function(e){e.stopPropagation();this.trigger("createBlock",t(e.currentTarget).attr("data-type"))}});n.extend=d;return n}();s.FloatingBlockControls=function(){var n=function(t,e){this.$wrapper=t;this.instance_id=e;this._ensureElement();this._bindFunctions();this.initialize()};e.extend(n.prototype,l,c,s.Events,{className:"st-block-controls__top",attributes:function(){return{"data-icon":"add"}},bound:["handleBlockMouseOut","handleBlockMouseOver","handleBlockClick","onDrop"],initialize:function(){this.$el.on("click",this.handleBlockClick).dropArea().bind("drop",this.onDrop);this.$wrapper.on("mouseover",".st-block",this.handleBlockMouseOver).on("mouseout",".st-block",this.handleBlockMouseOut).on("click",".st-block--with-plus",this.handleBlockClick)},onDrop:function(n){n.preventDefault();var i=this.$el,o=n.originalEvent.dataTransfer.getData("text/plain"),r=t("#"+o);e.isUndefined(o)||e.isEmpty(r)||i.attr("id")==o||this.instance_id!=r.attr("data-instance")||i.after(r);s.EventBus.trigger("block:reorder:dropped",o)},handleBlockMouseOver:function(e){var n=t(e.currentTarget);n.hasClass("st-block--with-plus")||n.addClass("st-block--with-plus")},handleBlockMouseOut:function(e){var n=t(e.currentTarget);n.hasClass("st-block--with-plus")&&n.removeClass("st-block--with-plus")},handleBlockClick:function(e){e.stopPropagation();var n=t(e.currentTarget);this.trigger("showBlockControls",n)}});n.extend=d;return n}();s.FormatBar=function(){var n=function(t){this.options=e.extend({},s.DEFAULTS.formatBar,t||{});this._ensureElement();this._bindFunctions();this.initialize.apply(this,arguments)};e.extend(n.prototype,l,s.Events,c,{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],initialize:function(){var e,n,i;this.$btns=[];for(e in s.Formatters)if(s.Formatters.hasOwnProperty(e)){n=s.Formatters[e];i=t("<button>",{class:"st-format-btn st-format-btn--"+e+" "+(n.iconName?"st-icon":""),text:n.text,"data-type":e,"data-cmd":n.cmd});this.$btns.push(i);i.appendTo(this.$el)}this.$b=t(document);this.$el.bind("click",".st-format-btn",this.onFormatButtonClick)},hide:function(){this.$el.removeClass("st-format-bar--is-ready")},show:function(){this.$el.addClass("st-format-bar--is-ready")},remove:function(){this.$el.remove()},renderBySelection:function(t){var e=window.getSelection(),n=e.getRangeAt(0),i=n.getBoundingClientRect(),s={};s.top=i.top+20+window.pageYOffset-this.$el.height()+"px";s.left=(i.left+i.right)/2-this.$el.width()/2+"px";this.highlightSelectedButtons();this.show();this.$el.css(s)},highlightSelectedButtons:function(){var t;e.each(this.$btns,function(e){t=s.Formatters[e.attr("data-type")];e.toggleClass("st-format-btn--is-active",t.isActive())},this)},onFormatButtonClick:function(n){n.stopPropagation();var i=t(n.target),o=s.Formatters[i.attr("data-type")];if(e.isUndefined(o))return false;!e.isUndefined(o.onClick)&&e.isFunction(o.onClick)?o.onClick():document.execCommand(i.attr("data-cmd"),false,o.param);this.highlightSelectedButtons();return false}});n.extend=d;return n}();s.Editor=function(){var n=function(t){this.initialize(t)};e.extend(n.prototype,l,s.Events,{bound:["onFormSubmit","showBlockControls","hideAllTheThings","hideBlockControls","onNewBlockCreated","changeBlockPosition","onBlockDragStart","onBlockDragEnd","removeBlockDragOver","onBlockDropped","createBlock"],events:{"block:reorder:down":"hideBlockControls","block:reorder:dragstart":"onBlockDragStart","block:reorder:dragend":"onBlockDragEnd","block:content:dropped":"removeBlockDragOver","block:reorder:dropped":"onBlockDropped","block:create:new":"onNewBlockCreated"},initialize:function(t){s.log("Init SirTrevor.Editor");this.blockTypes={};this.blockCounts={};this.blocks=[];this.errors=[];this.options=e.extend({},s.DEFAULTS,t||{});this.ID=e.uniqueId("st-editor-");if(!this._ensureAndSetElements())return false;!e.isUndefined(this.options.onEditorRender)&&e.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender);this._setRequired();this._setBlocksTypes();this._bindFunctions();this.store("create");this.build();s.instances.push(this);s.bindFormSubmit(this.$form)},build:function(){this.$el.hide();this.block_controls=new s.BlockControls(this.blockTypes,this.ID);this.fl_block_controls=new s.FloatingBlockControls(this.$wrapper,this.ID);this.formatBar=new s.FormatBar(this.options.formatBar);this.listenTo(this.block_controls,"createBlock",this.createBlock);this.listenTo(this.fl_block_controls,"showBlockControls",this.showBlockControls);this._setEvents();s.EventBus.on(this.ID+":blocks:change_position",this.changeBlockPosition);s.EventBus.on("formatter:positon",this.formatBar.renderBySelection);s.EventBus.on("formatter:hide",this.formatBar.hide);this.$wrapper.prepend(this.fl_block_controls.render().$el);t(document.body).append(this.formatBar.render().$el);this.$outer.append(this.block_controls.render().$el);t(window).bind("click",this.hideAllTheThings);var n=this.store("read");n.data.length>0?e.each(n.data,function(t){s.log("Creating: "+t.type);this.createBlock(t.type,t.data)},this):false!==this.options.defaultType&&this.createBlock(this.options.defaultType,{});this.$wrapper.addClass("st-ready");e.isUndefined(this.onEditorRender)||this.onEditorRender()},destroy:function(){this.formatBar.destroy();this.fl_block_controls.destroy();this.block_controls.destroy();e.each(this.blocks,function(t){this.removeBlock(t.blockID)},this);this.stopListening();var t=this.$el.detach();s.instances=e.reject(s.instances,e.bind(function(t){return t.ID==this.ID},this));this.store("reset");this.$outer.replaceWith(t)},reinitialize:function(t){this.destroy();this.initialize(t||this.options)},_setEvents:function(){e.each(this.events,function(t,e){s.EventBus.on(e,this[t],this)},this)},hideAllTheThings:function(t){this.block_controls.hide();this.formatBar.hide();e.isUndefined(this.block_controls.current_container)||this.block_controls.current_container.removeClass("with-st-controls")},showBlockControls:function(t){e.isUndefined(this.block_controls.current_container)||this.block_controls.current_container.removeClass("with-st-controls");this.block_controls.show();t.append(this.block_controls.$el.detach());t.addClass("with-st-controls");this.block_controls.current_container=t},store:function(t,e){return s.editorStore(this,t,e||{})},createBlock:function(t,n,i){t=e.classify(t);if(this._blockLimitReached()){s.log("Cannot add any more blocks. Limit reached.");return false}if(!this._isBlockTypeAvailable(t)){s.log("Block type not available "+t);return false}if(!this._canAddBlockType(t)){s.log("Block Limit reached for type "+t);return false}var o=new s.Blocks[t](n,this.ID);this._renderInPosition(o.render().$el);this.listenTo(o,"removeBlock",this.removeBlock);this.blocks.push(o);this._incrementBlockTypeCount(t);o.focus();s.EventBus.trigger(n?"block:create:existing":"block:create:new",o);s.log("Block created of type "+t);o.trigger("onRender");this.$wrapper.toggleClass("st--block-limit-reached",this._blockLimitReached());this.triggerBlockCountUpdate()},onNewBlockCreated:function(t){this.hideBlockControls();this.scrollTo(t.$el)},scrollTo:function(e){t("html, body").animate({scrollTop:e.position().top},300,"linear")},blockFocus:function(t){this.block_controls.current_container=null},hideBlockControls:function(){e.isUndefined(this.block_controls.current_container)||this.block_controls.current_container.removeClass("with-st-controls");this.block_controls.hide()},removeBlockDragOver:function(){this.$outer.find(".st-drag-over").removeClass("st-drag-over")},triggerBlockCountUpdate:function(){s.EventBus.trigger(this.ID+":blocks:count_update",this.blocks.length)},changeBlockPosition:function(t,e){e-=1;var n=this.getBlockPosition(t);var i=this.$wrapper.find(".st-block").eq(e);var s=this.getBlockPosition(i);var o=n>e?"Before":"After";if(i&&i.attr("id")!==t.attr("id")){this.hideAllTheThings();t["insert"+o](i);this.scrollTo(t)}},onBlockDropped:function(t){this.hideAllTheThings();var n=this.findBlockById(t);e.isUndefined(n)||e.isEmpty(n.getData())||!n.drop_options.re_render_on_reorder||n.beforeLoadingData()},onBlockDragStart:function(){this.hideBlockControls();this.$wrapper.addClass("st-outer--is-reordering")},onBlockDragEnd:function(){this.removeBlockDragOver();this.$wrapper.removeClass("st-outer--is-reordering")},_renderInPosition:function(t){this.block_controls.current_container?this.block_controls.current_container.after(t):this.$wrapper.append(t)},_incrementBlockTypeCount:function(t){this.blockCounts[t]=e.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]+1},_getBlockTypeCount:function(t){return e.isUndefined(this.blockCounts[t])?0:this.blockCounts[t]},_canAddBlockType:function(t){var e=this._getBlockTypeLimit(t);return!(0!==e&&this._getBlockTypeCount(t)>=e)},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},removeBlock:function(t){var n=this.findBlockById(t),i=e.classify(n.type),o=n.$el.find(".st-block-controls");if(o.length){this.block_controls.hide();this.$wrapper.prepend(o)}this.blockCounts[i]=this.blockCounts[i]-1;this.blocks=e.reject(this.blocks,function(t){return t.blockID==n.blockID});this.stopListening(n);n.remove();s.EventBus.trigger("block:remove");this.triggerBlockCountUpdate();this.$wrapper.toggleClass("st--block-limit-reached",this._blockLimitReached())},performValidations:function(t,n){var i=0;if(!s.SKIP_VALIDATION&&n&&!t.valid()){this.errors.push({text:e.result(t,"validationFailMsg")});s.log("Block "+t.blockID+" failed validation");++i}return i},saveBlockStateToStore:function(t){var n=t.saveAndReturnData();if(n&&!e.isEmpty(n.data)){s.log("Adding data for block "+t.blockID+" to block store");this.store("add",{data:n})}},onFormSubmit:function(t){t=false!==t;s.log("Handling form submission for Editor "+this.ID);this.removeErrors();this.store("reset");this.validateBlocks(t);this.validateBlockTypesExist(t);this.renderErrors();this.store("save");return this.errors.length},validateBlocks:function(n){if(!this.required&&s.SKIP_VALIDATION&&!n)return false;var i=function(i,s){var o=e.find(this.blocks,function(e){return e.blockID==t(i).attr("id")});if(e.isUndefined(o))return false;this.performValidations(o,n);this.saveBlockStateToStore(o)};e.each(this.$wrapper.find(".st-block"),i,this)},validateBlockTypesExist:function(t){if(!this.required&&s.SKIP_VALIDATION&&!t)return false;var n=function(t,n){if(!this._isBlockTypeAvailable(t))return;if(0===this._getBlockTypeCount(t)){s.log("Failed validation on required block type "+t);this.errors.push({text:i18n.t("errors:type_missing",{type:t})})}else{var i=e.filter(this.getBlocksByType(t),function(t){return!t.isEmpty()});if(i.length>0)return false;this.errors.push({text:i18n.t("errors:required_type_empty",{type:t})});s.log("A required block type "+t+" is empty")}};e.isArray(this.required)&&e.each(this.required,n,this)},renderErrors:function(){if(0===this.errors.length)return false;e.isUndefined(this.$errors)&&(this.$errors=this._errorsContainer());var t="<ul>";e.each(this.errors,function(e){t+='<li class="st-errors__msg">'+e.text+"</li>"});t+="</ul>";this.$errors.append(t);this.$errors.show()},_errorsContainer:function(){if(e.isUndefined(this.options.errorsContainer)){var n=t("<div>",{class:"st-errors",html:"<p>"+i18n.t("errors:title")+" </p>"});this.$outer.prepend(n);return n}return r(this.options.errorsContainer)},removeErrors:function(){if(0===this.errors.length)return false;this.$errors.hide().find("ul").html("");this.errors=[]},findBlockById:function(t){return e.find(this.blocks,function(e){return e.blockID==t})},getBlocksByType:function(t){return e.filter(this.blocks,function(n){return e.classify(n.type)==t})},getBlocksByIDs:function(t){return e.filter(this.blocks,function(n){return e.contains(t,n.blockID)})},getBlockPosition:function(t){return this.$wrapper.find(".st-block").index(t)},_getBlockTypeLimit:function(t){if(!this._isBlockTypeAvailable(t))return 0;return parseInt(e.isUndefined(this.options.blockTypeLimits[t])?0:this.options.blockTypeLimits[t],10)},_isBlockTypeAvailable:function(t){return!e.isUndefined(this.blockTypes[t])},_ensureAndSetElements:function(){if(e.isUndefined(this.options.el)||e.isEmpty(this.options.el)){s.log("You must provide an el");return false}this.$el=this.options.el;this.el=this.options.el[0];this.$form=this.$el.parents("form");var n=t("<div>").attr({id:this.ID,class:"st-outer",dropzone:"copy link move"});var i=t("<div>").attr({class:"st-blocks"});this.$el.wrap(n).wrap(i);this.$outer=this.$form.find("#"+this.ID);this.$wrapper=this.$outer.find(".st-blocks");return true},_setBlocksTypes:function(){this.blockTypes=e.flattern(e.isUndefined(this.options.blockTypes)?s.Blocks:this.options.blockTypes)},_setRequired:function(){e.isArray(this.options.required)&&!e.isEmpty(this.options.required)?this.required=this.options.required:this.required=false}});return n}();s.setDefaults=function(t){s.DEFAULTS=e.extend(s.DEFAULTS,t||{})};s.bindFormSubmit=function(t){if(!a){new s.Submittable(t);t.bind("submit",this.onFormSubmit);a=true}};s.onBeforeSubmit=function(t){var n=0;e.each(s.instances,function(e,i){n+=e.onFormSubmit(t)});s.log("Total errors: "+n);return n};s.onFormSubmit=function(t){var e=s.onBeforeSubmit();if(e>0){s.EventBus.trigger("onError");t.preventDefault()}};s.getInstance=function(t){if(e.isUndefined(t))return this.instances[0];if(e.isString(t))return e.find(this.instances,function(e){return e.ID===t});return this.instances[t]};s.setBlockOptions=function(t,n){var i=s.Blocks[t];if(e.isUndefined(i))return;e.extend(i.prototype,n||{})};s.runOnAllInstances=function(t){if(e.has(s.Editor.prototype,t)){[].unshift.call(arguments,s.instances);e.invoke.apply(e,arguments)}else s.log("method doesn't exist")}})(i,s);t.exports=SirTrevor},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){return{autoSortDimension:function t(e,n){e.qDef.qSortCriterias=[];e.qDef.autoSort=true;n?n.forEach(function(t,n){e.qDef.qSortCriterias[n]={qSortByState:1,qSortByLoadOrder:1,qSortByNumeric:1,qSortByAscii:1}}):e.qDef.qSortCriterias[0]={qSortByState:1,qSortByLoadOrder:1,qSortByNumeric:1,qSortByAscii:1};return e},createFieldDimension:function t(e){return{qDef:{qFieldDefs:[e],qFieldLabels:[e],qSortCriterias:[]}}},createLibraryDimension:function t(e){return{qLibraryId:e,qDef:{qSortCriterias:[]}}},createDefaultListBox:function e(n,i){var s=t.extend(true,{},n),o;s.qShowAlternatives=true;for(o=0;o<s.qDef.qSortCriterias.length;++o)s.qDef.qSortCriterias[o].qSortByState=1;i=!i&&n.qDef.qLabelExpression?{qStringExpression:{qExpr:n.qDef.qLabelExpression}}:i||n.qDef.qFieldLabels&&n.qDef.qFieldLabels.length&&""!==n.qDef.qFieldLabels[0]?i||(n.qDef.qFieldLabels&&n.qDef.qFieldLabels.length?n.qDef.qFieldLabels[0]:""):n.qDef.qFieldDefs[0];return{qInfo:{qType:"listbox"},qListObjectDef:s,title:i,visualization:"listbox"}}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89)],s=function(t,e){function n(n){return n?e.resolve(n.enigmaModel):t.getApp()}var i={};i.get=function(t,e,i){return n(i).then(function(n){return n.getField(t,e||"$")})};i.getList=function(t){return n(t).then(function(t){return t.getFieldListObject()})};i.getOnTheFlyList=function(t){return n(t).then(function(t){return t.getOnTheFlyListObject()})};i.getOnTheFlyWithHiddenList=function(t){return n(t).then(function(t){return t.getOnTheFlyWithHiddenListObject()})};return i}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(383),n(101),n(90)],s=function(t,e,n){var i={},s={},o;o={type:"items",component:"accordion",items:{settings:{uses:"settings"}}};function r(t,n,i){var s,o,a,l=null;if(t.ref===n)return t;if(e.isHierarchical(t)){s=Object.keys(t.items);for(a=0;a<s.length;++a){o=t.items[s[a]];if(o.ref===n){l=o;break}if(i){l=r(o,n,i);if(null!==l)break}}}return l}function a(s,r,l){var c,u,d;l=l||t;s||(s=o);if(r&&i[r])return i[r];var p;while(s.uses){d=e.getValue(l,s.uses);if(!d)throw new Error("No defaults found for: "+s.uses);p=d.uses;s=n.extend(true,{},d,s);if(!p){delete s.uses;break}s.uses=p}if(e.isHierarchical(s)||"array"===s.type&&s.items){u={};Object.keys(s.items).forEach(function(t){s.items[t]&&(u[t]=a(s.items[t],null,l))});c=n.extend({},s,{items:u})}else c=n.extend({},s);r&&!i[r]&&(i[r]=c);return c}function l(t,i,s){var o=a(t,s);return i?n.extend(true,e.getDefaults(o),i):e.getDefaults(o)}function c(t){function n(t){var i={};function s(t){return-1!==t.search(/\.\d/g)}function o(t){var n={type:t.type,defaultValue:e.getDefaultValue(t.type,t)};t.maxlength&&(n.maxlength=t.maxlength);t.min&&(n.min=t.min);t.max&&(n.max=t.max);t.expression&&(n.expression=t.expression);t.options&&"boolean"!==t.type&&(n.enum=t.options.map(function(t){return t.value}));return n}function r(t){var a,l,c,u,d,p;if(e.isHierarchical(t)){a=Object.keys(t.items);for(d=0;d<a.length;d++){l=a[d];c=t.items[l];r(c)}}else if(t.ref&&"array"===t.type&&t.items){u=n({type:"items",items:t.items});p={type:"array",items:u};s(t.ref)||e.setValue(i,t.ref,p)}else if(t.ref){p=o(t);s(t.ref)||e.setValue(i,t.ref,p)}}r(t);return i}return n(t)}function u(t){var n=[];function i(t){var s,o,r;if(e.isHierarchical(t)){s=Object.keys(t.items);for(r=0;r<s.length;++r){o=t.items[s[r]];o.snapshot&&n.push(o);i(o)}}}i(t);return n}function d(t,e){if(e&&s[e])return s[e];var n=[];function i(t){t.globalChange&&n.push(t.globalChange);"items"!==t.type&&"array"!==t.type||!t.items||Object.keys(t.items).forEach(function(e){t.items[e]&&i(t.items[e])})}i(t);e&&!s[e]&&(s[e]=n);return n}return{findDefinition:r,findSnapshotProperties:u,findGlobalListeners:d,mapDefinition:a,mapProperties:l,getPropertyHierarchy:c}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};return{get:function e(){return t},isVariableSet:function e(n){return"1"===t[n]},isVariableDefined:function e(n){return!!t[n]},load:function e(n){return n.getVariableList().then(function(e){e.forEach(function(e){e.qName&&(t[e.qName]=e.qDefinition)});return t}).catch(function(){return t})}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(10),n(48),n(89),n(90),n(138),n(91),n(95),n(108),n(491),n(124),n(115),n(210),n(123),n(114),n(335),n(499),n(99),n(56),n(449),n(193)],s=function(t,e,n,i,s,r,a,l,c,u,d,p,h,f,g,v,m){var b=false,y=false;var x={createVisualizationHtml:E,showVisualization:A,clearElement:L,appDoIt:M,setDefaultId:P,getDefaultListParam:O,createHypercubeDef:F,makeConfig:k,inClient:l.inClient,initClient:S,registerExtension:T,addPatches:$,isMeasure:N,validateColumns:H,createDefinition:V,convertDefinition:B,setLanguage:w,setDeviceType:C,resize:I,getExtensionList:_,callRepository:D,getExtensionSupport:j};Object.defineProperty(x,"Promise",{get:function t(){return n.Promise}});return x;function q(t){r.setup({context:"client",language:t});r.append({"Devhub.Cols.Array":"Cols parameter should be an array.","Devhub.Cols.InvalidQtype":"Invalid qType: {0}","Devhub.Cols.QlibraryIdMissing":"qLibraryId missing: {0}","Devhub.Cols.QdefString":"Measure qDef.qDef should be a string: {0}","Devhub.Cols.QfielddefArray":"Dimension qDef.qFieldDefs should be an array: {0}","Devhub.Cols.QdefOrQfielddefs":"Column needs either qDef.qDef or qDef.qFieldDefs: {0}","Devhub.Cols.QdefOrQlibraryid":"Column needs either qLibraryId or qDef: {0}","Devhub.Cols.Visualization.InvalidType":"The visualization type is incorrect: {0}"})}function S(){if(!b){b=true;if(!l.inClient()){c.configureTouchSupport();s.init({Promise:e.getService("$q")}).then(function(){y||""!==r.localeDetected||q()})}}}function w(t){y=true;q(t)}function C(t){m.setDeviceType(t)}function I(t){t?a.publish("/ui/object/resize."+t):a.publish("/resize/end")}function _(t){console.warn("qlik.getExtensionList(callback) is deprecated since June 2019, use available REST APIs instead.");return p.getList().then(function(e){t&&t(e)})}function D(t,n,i){console.warn("qlik.callRepository(path, method, body) is deprecated since June 2019, use available REST APIs instead.");return e.getService("$contentApi").request({method:n||"GET",url:t,data:i})}function k(t){t=t||{};var e=t._qEvent?new g(t._qEvent.handlers):new g;e.scope=t._qEvent?t._qEvent.scope:null;return{host:t.host||i.hostname,port:t.port?t.port.toString():i.port,isSecure:t.isSecure||i.isSecure,reloadURI:t.reloadURI?t.reloadURI:i.reloadURI,transientApp:!!t.transientApp,prefix:t.prefix||i.basePath.replace("/extensions/","/"),openWithoutData:t.openWithoutData,identity:t.identity,subpath:t.subpath,qEvent:e}}function T(t,e,n){var i="extensions/"+t+"/"+t;window.define(i,e);u.registerExtension({id:t,data:n||{type:"visualization"}});return i}function E(t){var e="",n="";if(t&&t.currentSelections){(t.noInteraction||t.noSelections)&&(n=" style='pointer-events:none;'");t.variant=t.variant||"bright";e+='<qv-stage-current-selections class="qvt-selections" options="options" app="app"'+n+'></qv-stage-current-selections><div class="qv-global-search-container"'+n+"></div>"}else t&&t.showNavigationToolbar?e+='<qv-odag-toolbar class="qv-odag-bar-container" model="model" in-edit-mode="inEdit" stand-Alone="standAlone"></qv-odag-toolbar>':e+='<qv-object model="model" options="options" object="object"></qv-object>';return e}function A(i,s,o,r){var a=new n;"string"===typeof i&&(i=document.getElementById(i));if(i){var l=i[0]?i[0]:i;l.innerHTML=E(o);var c=t.element(l).scope();if(c){var u=c.$new(true);var d=t.copy(o)||{};d.isReadonly=false!==d.isReadonly;if(o){o.noSelections&&(d.selections=false);o.noInteraction&&(d.interactionState=h.STATIC);if(o.showNavigationToolbar){u.inEdit=false;u.standAlone=true}}var p=function n(){u.model=s;u.app=r;u.options=d;u.object={};var i=e.getService("$compile");i(t.element(l).children("qv-object, qv-stage-current-selections, qv-odag-toolbar"))(u)};if(f.isInit){d.direction=f.direction;p();a.resolve(u)}else f.init(r.enigmaModel).then(function(){d.direction=f.direction;e.$apply(u,function(){p();a.resolve(u)})});e.$apply(u)}else a.reject(new Error("Element scope is undefined."))}else a.reject(new Error("Element is undefined."));return a.promise}function L(t,e){var i=function t(e){"string"===typeof e?e=document.getElementById(e):e[0]&&(e=e[0]);if(!e)return;e.innerHTML=""};if(e&&"function"===typeof e.then)return e.then(function(e){e.$destroy();i(t)}).catch(function(t){console.error(t)});i(t);return n.resolve()}function M(t,i,s){var o=new n;t.waitForOpen.promise.then(function(){var n=t.enigmaModel||t;e.$apply(e.$rootScope,function(){o.resolve(n[i].apply(n,s))})});return o.promise}function P(t,e){t.qInfo=t.qInfo||{};t.qInfo.qType=t.qInfo.qType||e||"mashup";t.qInfo.qId=t.qInfo.qId||"MU"+i.generateId()}function O(t,e){var n={};P(n,t);"BookmarkList"===t?n.qBookmarkListDef={qType:"bookmark",qData:{title:"/qMetaDef/title",description:"/qMetaDef/description"}}:"SnapshotList"===t?n.qBookmarkListDef={qType:"snapshot",qData:{title:"/title",libraryTitle:"/qMetaDef/title",description:"/qMetaDef/description",sourceObjectId:"/sourceObjectId",visualizationType:"/visualizationType",timestamp:"/timestamp",snapshotData:"/snapshotData",isClone:"/isClone"}}:"CurrentSelections"===t?n.qSelectionObjectDef=e||{}:"DimensionList"===t?n.qDimensionListDef={qType:"dimension",qData:{title:"/qMetaDef/title",tags:"/qMetaDef/tags",grouping:"/qDim/qGrouping",info:"/qDimInfos"}}:"MeasureList"===t?n.qMeasureListDef={qType:"measure",qData:{title:"/qMetaDef/title",tags:"/qMetaDef/tags"}}:"sheet"===t?n.qAppObjectListDef={qType:"sheet",qData:{title:"/qMetaDef/title",labelExpression:"/labelExpression",description:"/qMetaDef/description",thumbnail:"/thumbnail",cells:"/cells",rank:"/rank",columns:"/columns",rows:"/rows"}}:"masterobject"===t?n.qAppObjectListDef={qType:"masterobject",qData:{name:"/metadata/name",visualization:"/visualization",tags:"/metadata/tags"}}:"VariableList"===t?n.qVariableListDef={qType:"variable",qData:{tags:"/tags"}}:"story"===t?n.qAppObjectListDef={qType:"story",qData:{title:"/qMetaDef/title",description:"/qMetaDef/description",thumbnail:"/thumbnail",rank:"/rank"}}:n["q"+t+"Def"]={};return n}function F(t,e,n){if(Array.isArray(t)&&!Array.isArray(e)){var i=e||{},s=[],o=[],r=[];t.forEach(function(t){if(N(t)){r.push(-1);o.push(t)}else{r.push(s.length);s.push(t)}});var a=s.length;r.forEach(function(t,e){if(t<0){r[e]=a;a++}});i.columnOrder=r;i.qInterColumnSortOrder=r;return F(s,o,i)}var l=n||{};if(t){var c=[];t.forEach(function(t){"string"===typeof t?c.push({qDef:{qFieldDefs:[t]}}):c.push(t)});l.qDimensions=c}var u=[];e.forEach(function(t){"string"===typeof t?u.push({qDef:{qDef:t}}):u.push(t)});l.qMeasures=u;l.qInitialDataFetch=[{qTop:0,qLeft:0,qHeight:20,qWidth:(l.qDimensions?l.qDimensions.length:0)+l.qMeasures.length}];n&&n.rows&&(l.qInitialDataFetch[0].qHeight=n.rows);return l}function $(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(e[i]instanceof Object&&!Array.isArray(e[i])?$(t+i+"/",e[i],n):n.push({qPath:t+i,qOp:"add",qValue:"string"===typeof e[i]?'"'+e[i]+'"':JSON.stringify(e[i])}))}function N(t){if("string"===typeof t)return 0===t.indexOf("=");if(t.qType)return"measure"===t.qType;return!!(t.qDef&&t.qDef.qDef||t.qSortBy||t.qAttributeExpressions)}function R(t,e,n){t=t?t+", ":"";return t+r.get(e,JSON.stringify(n))}function H(t){if(!Array.isArray(t))return r.get("Devhub.Cols.Array");var e;t.forEach(function(t){"object"===o(t)?t.qType?"measure"!==t.qType&&"dimension"!==t.qType?e=R(e,"Devhub.Cols.InvalidQtype",t):t.qLibraryId||(e=R(e,"Devhub.Cols.QlibraryIdMissing",t)):t.qDef?t.qDef.qDef?"string"!==typeof t.qDef.qDef&&(e=R(e,"Devhub.Cols.QdefString",t)):t.qDef.qFieldDefs?Array.isArray(t.qDef.qFieldDefs)||(e=R(e,"Devhub.Cols.QfielddefArray",t)):e=R(e,"Devhub.Cols.QdefOrQfielddefs",t):e=R(e,"Devhub.Cols.QdefOrQlibraryid",t):"string"!==typeof t&&(e=R(e,"Devhub.Cols.InvalidType",t))});return e}function V(t,e,i,s){var o=d.getType(e);if(!o)return n.reject(r.get("Devhub.Visualization.InvalidType",e));if(i){var a=H(i);if(a)return n.reject(a)}return t.model.waitForOpen.promise.then(function(){return v.createProperties(t.model.enigmaModel,e,i,s)})}function B(t,e,n,i){return v.convertProperties(t,e,n,i)}function j(t){var e=["export","exportData","viewData"];var i={};var s=t.layout.visualization||t.layout.qInfo&&t.layout.qInfo.qType;var o=d.getType(s);if(!o)return n.resolve(i);return o.getExtensionType().then(function(t){Object.keys(t.support).forEach(function(n){-1!==e.indexOf(n)&&(i[n]=t.support[n])});return i}).catch(function(){return i})}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11)],s=function(t){var e="[A-Za-zªµºÀ-ÖØ-öø-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͽΆΈ-ϵϷ-҂Ҋ-։ः-हऻऽ-ीॉ-ौॎ-ॐक़-ॡ।-ॿং-হঽ-ীে-ৌৎ-ৡ০-ৱ৴-৺ਃ-ਹਾ-ੀਖ਼-੯ੲ-ੴઃ-હઽ-ીૉ-ૌૐ-ૡ૦-૯ଂ-ହଽ-ାୀେ-ୌୗ-ୡ୦-୷ஃ-ிு-ௌௐ-௲ఁ-ఽు-ౄౘ-ౡ౦-౯౿-ಹಽ-ೋೕ-ೡ೦-ീെ-ൌൎ-ൡ൦-ෆා-ෑෘ-ะา-ำเ-ๆ๏-ະາ-ຳຽ-ໆ໐-༗༚-༴༶༸༾-ཬཿ྅ྈ-ྌ྾-࿅࿇-ာေးျ-ြဿ-ၗၚ-ၝၡ-ၰၵ-ႁႃ-ႄႇ-ႌႎ-ႜ႞-ፚ፠-ᎏᎠ-Ᏼᐁ-ᙿᚁ-ᚚᚠ-ᜑᜠ-ᜱ᜵-ᝑᝠ-ᝰក-ាើ-ៅះ-ៈ។-៚ៜ០-៩᠐-ᢨᢪ-ᤜᤣ-ᤦᤩ-ᤱᤳ-ᤸ᥆-᧚ᨀ-ᨖᨙ-ᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪭ᬄ-ᬳᬵᬻᬽ-ᭁᭃ-᭪᭴-᭼ᮂ-ᮡᮦ-ᮧ᮪-ᯥᯧᯪ-ᯬᯮ᯲-ᰫᰴ-ᰵ᰻-᱿᳓᳡ᳩ-ᳬᳮ-ᶿḀ-ᾼιῂ-ῌῐ-Ίῠ-Ῥῲ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎ-⅏Ⅰ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-ⳤⳫ-ⳮⴀ-⵰ⶀ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ㆺㇰ-㈜㈠-㉏㉠-㉻㉿-㊰㋀-㋋㋐-㍶㍻-㏝㏠-㏾㐀-䶵一-ꒌꓐ-ꘌꘐ-ꙮꚀ-ꛯ꛲-꛷Ꜣ-ꞇ꞉-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠤꠧ꠰-꠷ꡀ-ꡳꢀ-ꣃ꣎-꣙ꣲ-ꤥ꤮-ꥆꥒ-ꥼꦃ-ꦲꦴ-ꦵꦺ-ꦻꦽ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂ-ꯤꯦ-ꯧꯩ-꯬꯰-ﬗＡ-Ｚａ-ｚｦ-ￜ]";var n="[־׀׃׆א-״߀-ߪߴ-ߵߺ-ࠕࠚࠤࠨ࠰-ࡘ࡞‏יִײַ-ﬨשׁ-ﭏ]";var i="[؈؋؍؛-ي٭-ٯٱ-ەۥ-ۦۮ-ۯۺ-܍ܐܒ-ܯݍ-ޥޱﭐ-ﴽﵐ-﷼ﹰ-ﻼ]";var s='[\t-\r-"&-*;-@[-`{-~¡¦-©«-¬®-¯´¶-¸»-¿×÷ʹ-ʺ˂-ˏ˒-˟˥-˭˯-˿ʹ-͵;-΅·϶֊؆-؇؎-؏۞۩߶-߹௳-௸௺౸-౾༺-༽᎐-᎙᐀ ᚛-᚜៰-᠊᠎᥀-᥅᧞-᧿᾽᾿-῁῍-῏῝-῟῭-`´- ‐-\u2029‵-⁃⁅- ⁼-⁾₌-₎℀-℁℃-℆℈-℉℔№-℘℞-℣℥℧℩℺-℻⅀-⅄⅊-⅍⅐-⅟↉-∑∔-⌵⍻-⎔⎖-⒇⓪-⚫⚭-⟿⤀-⭙⳥-⳪⳹-⳿⸀-〄〈-〠〰〶-〷〽-〿゛-゜゠・㇀-㇣㈝-㈞㉐-㉟㉼-㉾㊱-㊿㋌-㋏㍷-㍺㏞-㏟㏿䷀-䷿꒐-꓆꘍-꘏꙳꙾-ꙿ꜀-꜡ꞈ꠨-꠫꡴-꡷﴾-﴿﷽︐-︙︰-﹏﹑﹔﹖-﹞﹠-﹡﹤-﹨﹫！-＂＆-＊；-＠［-｀｛-･￢-￤￨-�]';var o=new RegExp(e);var r=new RegExp(n);var a=new RegExp(i);var l=new RegExp(s);var c=String.fromCharCode(8206),u=String.fromCharCode(8207);var d,p;function h(){void 0===p&&y();return p}function f(t){return o.test(t)}function g(t){return r.test(t)||a.test(t)}function v(t){return l.test(t)}function m(t){var e=t?t.length:0,n,i;for(n=0;n<e;n++){i=t[n];if(f(i))return"ltr";if(g(i))return"rtl"}return"ltr"}function b(t){if(p)return"auto";return m(t)}function y(){var t=document.createElement("div"),e=document.getElementsByTagName("body")[0];t.setAttribute("style","position: absolute; width: 1px; height: 1px; top: -999px; overflow: scroll; white-space:nowrap;");t.setAttribute("dir","rtl");e.appendChild(t);d=x(t);p=q(t);e.removeChild(t)}function x(t){t.innerHTML="RTL-SCROLL-TEST";var e="reverse";if(t.scrollLeft>0)e="default";else{t.scrollLeft=1;0===t.scrollLeft&&(e="negative")}return e}function q(e){e.innerHTML="لا أحد يحب الألم بذاته، يسعى ورائه أو يبت";var n;switch(d){case"reverse":n=false;break;case"default":n=e.scrollLeft>0;break;case"negative":t(e).scrollLeft(-1e3);n=e.scrollLeft<0;break;default:n=false}return n}y();function S(t,e,n){n=Number.isNaN(+n)?0:n;if(t&&"reverse"===d)return e+n;return e-n}return{supportDirAuto:h,detectTextDirection:m,getAutoOrAlternativeDirection:b,isLtrChar:f,isRtlChar:g,isNeutralChar:v,lrm:c,rlm:u,scrollImplementation:d,getScrollPos:S}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={cellBackgroundColor:true,cellForegroundColor:true,colorByAlternative:true,colorByExpression:true,tooltip:true,urlLabel:true};return{create:function e(n,i){if(!n||!t[n])throw new Error("Attribute Expressions Util: ID required");var s={};i&&Object.keys(i).forEach(function(t){s[t]=i[t]});s.id=n;s.qAttribute=true;return s},getById:function t(e,n,i){if(e){i=i||"id";return e.filter(function(t){return t[i]===n})[0]}return false},getIndexById:function t(e,n,i){var s=-1;if(e){i=i||"id";e.forEach(function(t,e){t[i]===n&&(s=e)})}return s},moveById:function t(e,n,i,s){var o=this.getIndexById(e,i,s);n=n||[];var r=this.getIndexById(n,i,s);if(-1!==o&&-1===r){var a=e.splice(o,1);n.push(a[0])}return n},moveByIdFromGroup:function t(e,n,i,s,o){i=i||"qAttributeExpressions";o=o||"id";for(var r=0;r<e.length;r++){var a=e[r][i];var l=n.length;this.moveById(a,n,s,o);if(l!==n.length)return n}return n},clean:function t(e){return e.filter(function(t){return t&&t.id})},IDMAP:{CELL_BACKGROUND_COLOR:"cellBackgroundColor",CELL_FOREGROUND_COLOR:"cellForegroundColor",COLOR_BY_ALTERNATIVE:"colorByAlternative",COLOR_BY_EXPRESSION:"colorByExpression",TOOLTIP:"tooltip",CELL_URL_LABEL:"urlLabel"}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t=".autoCalendar";function e(e){var n=e?e.split(t).join(""):"";return n}return{trimAutoCalendarName:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(598),n(102),n(89),n(90),n(49),n(93)],s=function(t,e,n,i,s,o){var r={},a=null,l=null;e.mixin(r);r.notification("UpdateObjProps");function c(e,n){a=e;t.get(a,n).then(function(t){t.Invalidated.bind(u.bind(this,n))})}function u(t){var e;h(t).then(function(t){e=t;r.UpdateObjProps.emit(e)})}function d(e,n){return t.getList(e).then(function(o){return e.getLayout().then(function(r){return o.getLayout().then(function(o){if(o&&o.length)return c(o[0].qInfo.qId,e);if(n||s.getFlag("THEME_CARDS")&&true===i.getValue(r,"permissions.createMasterobject"))return t.create({},e).then(function(t){return t.getLayout().then(function(){return c(t.id,e)})})})})})}function p(e,n,s){return t.get(e,s).then(function(t){return t.getProperties().then(function(e){var s={};s=i.extend(true,e,n);s.sheetLogoThumbnail.qStaticContentUrl&&delete s.sheetLogoThumbnail.qStaticContentUrl;return t.setProperties(s)})})}function h(e){if(a)return t.get(a,e).then(function(t){return t.getLayout()});l=new n;l.resolve({});return l.promise}function f(t){return t?n.resolve(t):o.getApp()}r.setProperties=function(t,e){return f(e).then(function(e){if(!a)return d(e,true).then(function(){return p(a,t,e)});return p(a,t,e)})};r.getProperties=function(t){return f(t).then(function(t){if(!a)return d(t,false).then(h.bind(this,t));return h(t)})};return r}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(96)],s=function(t,e){var n=e.Gesture.augment(function(t){this.defaults={which:2,radiusThreshold:3};this.start=function(t,n){if(e.utils.touch)return;if(e.utils.msPointer&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType)return;if(this.isValidMouseButton(t,this.options.which)){this.initiated=true;n.startPoint=n.points[0];this.binder.start.call(this,t,n)}};this.update=function(t,e){if(!this.started&&e.startPoint&&e.startPoint.distanceTo(e.points[0])>=this.options.radiusThreshold){this.started=true;this.binder.update.call(this,t,e)}else this.started&&this.binder.update.call(this,t,e)};this.end=function(t,e){if(this.initiated){this.binder.end.call(this,t,e);this.initiated=false}};function n(){t.apply(this,arguments)}return n});e.gestures.add("wheelswipe",n);function i(t,e){t.gestures.forEach(function(n){n!==e&&t.cancelGesture(n)})}function s(t){var e=0,n=0,i=0,s=60;t.wheelDelta&&(e=t.wheelDelta/s);t.detail&&(e=-t.detail/3);i=e;if(void 0!==t.axis&&t.axis===t.HORIZONTAL_AXIS){i=0;n=-1*e}void 0!==t.wheelDeltaY&&(i=t.wheelDeltaY/s);void 0!==t.wheelDeltaX&&(n=-1*t.wheelDeltaX/s);return{delta:e,deltaX:n,deltaY:i,x:t.pageX,y:t.pageY}}function o(t,e,n){var i,s;return function(){var o=n||this;var r=+new Date,a=arguments;if(i&&r<i+e){clearTimeout(s);s=setTimeout(function(){i=r;t.apply(o,a)},e)}else{i=r;t.apply(o,a)}}}var r={debouceTimer:null};function a(t,e,n){return function(){var i=this,s=arguments,o;n=n||r;l(n);o=setTimeout(function(){t.apply(i,s)},e);n.debounceTimer=o}}function l(t){t=t||r;t.debounceTimer&&clearTimeout(t.debounceTimer);t.debounceTimer=null}function c(e){if(!e)return;e=e.map(function(t){return t.qGroupFieldDefs?t.qGroupFieldDefs[t.qGroupPos||0]:t.qFallbackTitle});t.$rootScope.$broadcast("locked-feedback",[e]);a(function(){t.$rootScope.$broadcast("locked-feedback",[e,true])},100)()}return{getMouseWheelData:s,cancelGestures:i,throttle:o,debounce:a,cancelDebounce:l,showLockedFeedback:c}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[],s=function(){var t={missing:{template:"<div></div>",controller:[function(){}]}};function e(e){var n=e.component;if("string"===typeof n){if(t[n])return t[n];window.console.log('Error! No component found with name "'+n+'"');return t.missing}if("object"===o(n))return n;switch(e.type){case"items":return t.items;case"string":return t.string;case"integer":return t.integer;case"number":return t.number;case"boolean":return t.checkbox;case"array":if(e.items)return t.list;return t.slider;default:if(e.type){window.console.log('Error! No component found for type "'+e.type+'"');return t.missing}window.console.log('Warning! Missing component/type in definition. Using "items" component.');return t.items}}function n(e){return t[e]}function i(t){return!!n(t)}function s(e,n){if(t[e])throw new Error("Property panel component already loaded: "+e);t[e]=n}return{getComponent:n,hasComponent:i,findComponent:e,addComponent:s}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){return t.replace(/^=+/,"")}function e(t,e){n(t,e);t.description?t.validity.description=t.description.length<=e.description:t.validity.description=true;return t.validity.name&&t.validity.description}function n(t,e){t.validity.name=!!t.name&&!!t.name.trim()&&t.name.length<=e.name;return t.validity.name}function i(e,n){var i=e.expression;var s="string"===typeof i&&i.trim().length>0&&i.length<=n.expression;i&&(e.expression=t(i));e.validity.expression=s;return s}function s(t){var e=t.selectedFields,n=false;if(!e)return false;"single"===t.type?n=1===e.length:"drilldown"===t.type&&(n=e.length>1);t.validity.selectedFields=n;return n}return{validateMetadata:e,validateMetadataName:n,validateExpr:i,validateFieldsInDimension:s}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};Object.defineProperties(t,{ENTER:{value:13},ESCAPE:{value:27},SPACE:{value:32},TAB:{value:9},BACKSPACE:{value:8},DELETE:{value:46},ALT:{value:18},CTRL:{value:17},SHIFT:{value:16},ARROW_UP:{value:38},ARROW_DOWN:{value:40},ARROW_LEFT:{value:37},ARROW_RIGHT:{value:39},PAGE_DOWN:{value:34},PAGE_UP:{value:33},HOME:{value:36},END:{value:35},F10:{value:121},A:{value:65},F:{value:70}});t.isArrow=function(e){return e===t.ARROW_UP||e===t.ARROW_DOWN||e===t.ARROW_LEFT||e===t.ARROW_RIGHT};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(183)],s=function(t,e,n){var i;var s;var o;var r=t.extend("PrecedentsService",{init:function t(){},_getAPI:function t(){i||(i=n.getApi("api/precedent/v1","openapi"));return i},_handleRestResponse:function t(e,n,i){return i.body.response},_getAppName:function t(){return e.getParameterByName("app")},defineDimension:function t(e){var n=this;var i=arguments;var s={};s.targets=[{type:"dimension",dimension:e}];s.source={type:"user"};s.relation={relation:"define"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:s,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"defineDimension",i))})},defineMeasure:function t(e){var n=this;var i=arguments;var s={};s.targets=[{type:"measure",measure:e}];s.source={type:"user"};s.relation={relation:"define"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:s,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"defineMeasure",i))})},dislikeField:function t(e){var n=this;var i=arguments;s=void 0;var o={};o.targets=[{type:"field",field:e}];o.source={type:"user"};o.relation={relation:"dislike"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:o,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeField",i))})},removeDefinedItem:function t(e){var n=this;var i=arguments;o=void 0;return this._getAPI().then(function(t){return t.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"define",targetNodeId:e}).then(n._handleRestResponse.bind(n,"removeDefinedItem",i))})},getLearnedItems:function t(){var e=this;var n=arguments;if(o&&o.pending)return o;var i={};i.targets=[{type:"field"},{type:"libItem"},{type:"dimension"},{type:"measure"}];i.source={type:"user"};i.relations=[{relation:"define"},{relation:"dislike"}];o=this._getAPI().then(function(t){return t.apis.precedents.getRelationships({appId:e._getAppName()},{requestBody:i,server:t.spec.servers[0].url}).then(e._handleRestResponse.bind(e,"getDefinedItems",n))});return o},undislikeItem:function t(e){var n=this;var i=arguments;s=void 0;return this._getAPI().then(function(t){return t.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"dislike",targetNodeId:e}).then(n._handleRestResponse.bind(n,"undislikeItem",i))})},getDislikedItems:function t(){var e=this;var n=arguments;if(s)return s;var i={};i.targets=[{type:"field"},{type:"libItem"}];i.source={type:"user"};i.relations=[{relation:"dislike"}];s=this._getAPI().then(function(t){return t.apis.precedents.getRelationships({appId:e._getAppName()},{requestBody:i,server:t.spec.servers[0].url}).then(e._handleRestResponse.bind(e,"getDislikedItems",n))});return s},dislikeLibItem:function t(e){var n=this;var i=arguments;s=void 0;var o={};o.targets=[{type:"libItem",libItem:e}];o.source={type:"user"};o.relation={relation:"dislike"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:o,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeLibItem",i))})},likeAnalysis:function t(e){var n=this;var i=arguments;var s={};s.targets=[{type:"analysis",analysis:e}];s.source={type:"user"};s.relation={relation:"like"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:s,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"likeAnalysis",i))})},dislikeAnalysis:function t(e){var n=this;var i=arguments;var s={};s.targets=[{type:"analysis",analysis:e}];s.source={type:"user"};s.relation={relation:"dislike"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:s,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeAnalysis",i))})},undislikeAnalysis:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){return t.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"dislike",targetNodeId:e.precedents.id}).then(n._handleRestResponse.bind(n,"undislikeAnalysis",i))})},scrapeApp:function t(){var e=this;var n=arguments;s=void 0;return this._getAPI().then(function(t){return t.apis.precedents.scrapeApp({appId:e._getAppName()}).then(e._handleRestResponse.bind(e,"scrapeApp",n))})}});return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91)],s=function(t,e){var n=0;var i=6;var s=1;function o(t,e,o,a){var l;if(0===e.length)return;t[o]||(t[o]={});l=t[o];l.string=e;l.isWhitespace=a||e.length<s&&!r(e)||'"'===e;l.colorIx=l.isWhitespace?-1:n;n=l.isWhitespace?n:(n+1)%i}function r(t){return t.match(/[\u3040-\u9FBF]/)||t.match(/[\uFF65-\uFF9F]/)}function a(t,e,n,i){if(e.length<s&&!r(e))return;t.push({string:e,startQuote:n,endQuote:i})}t.service("qvGlobalSearchDataService",function(){this.transformResult=function(t,n){var i=n;t.matches=t.matches||[];t.searchTermGroups=t.searchTermGroups||[];t.searchVisualsGroups=t.searchVisualsGroups||[];for(var s=0;s<i.qSearchGroupArray.length;++s)if("DatasetType"===i.qSearchGroupArray[s].qGroupType){t.searchTermGroups.push(i.qSearchGroupArray[s]);var o=i.qSearchGroupArray[s];-1===t.matches.indexOf(o.qSearchTermsMatched.length)&&t.matches.push(o.qSearchTermsMatched.length)}else t.searchVisualsGroups.push(i.qSearchGroupArray[s]);t.displayResult.data=t.searchTermGroups.length>0;t.displayResult.visuals=t.searchVisualsGroups.length>0;t.searchVisualsGroups.length>0&&(t.existingChartGroupTitle=e.get("GlobalSearch.Existing.ChartsTitle",[t.searchVisualsGroups[0].qItems.length]))};this.showMore=function(t,e){if(!e||!t||1!==t.qSearchGroupArray.length)return;var n=t.qSearchGroupArray[0],i;for(var s=0;s<n.qItems.length;s++)if(n.qItems[s].qIdentifier===e.qIdentifier){i=n.qItems[s].qItemMatches;break}i&&(e.qItemMatches=i)};this.setHeaders=function(t){var e,n=0;for(e=0;e<t.searchTermGroups.length;e++)t.searchTermGroups[e].qTotalNumberOfItems>n&&(n=t.searchTermGroups[e].qTotalNumberOfItems);t.columnCount=n;t.columnWidth=Math.floor(100/n)+"%";t.shadowHeaders=t.shadowHeaders||[];t.shadowHeaders.splice(0,t.shadowHeaders.length-n);for(e=t.shadowHeaders.length;e<n;e++)t.shadowHeaders[e]={}};this.transformSuggest=function(t,e,n){var i,s=0,o,r=[];this.getUnderlinersAndSearchTerms(t.query,r,[]);n=void 0!==n?n:25;n=Math.min(n,e.qSuggestions.length);for(i=0;i<n;++i){o={value:e.qSuggestions[i].qValue,term:e.qSuggestions[i].qTerm};if(t.query===this.getResultingQueryFromSuggestion(r,o))continue;t.suggestions[s]=o;s++}t.suggestions.splice(s,t.suggestions.length-s)};this._whitespaces=[" ","\t","\n","\r","\r\n","　"];this.isWhiteSpaceAt=function(t,e){var n=this._whitespaces;var i=t.charAt(e),s;for(s=0;s<n.length;++s)if(i===n[s])return true;return false};this.getUnderlinersAndSearchTerms=function(t,e,i){var s=0,r=0,l=t.length,c=0,u,d=this._whitespaces,p=this;i.length=0;n=0;function h(t,e){var n,i,s;for(i=0;i<d.length;++i){n=t.indexOf(d[i],e);n>=0&&(!s||n<s)&&(s=n)}return s||-1}function f(t,e){var n;do{n=t.indexOf('"',e);e=n+1}while(n>=0&&e<l&&!p.isWhiteSpaceAt(t,e));return n}function g(){while(r<l&&p.isWhiteSpaceAt(t,r))r++;r>s&&o(e,t.substring(s,r),c++,true);s=r}g();while(s<l){if('"'===t.charAt(s)){o(e,t.substring(s,s+1),c++);r=f(t,++s);u=r>=0?t.substring(s,r):t.substring(s);o(e,u,c++);a(i,u,true,r>0);if(r<0)break;o(e,t.substring(r,r+1),c++);r+=1;s=r;g();continue}r=h(t,s);u=r>=0?t.substring(s,r):t.substring(s);o(e,u,c++);a(i,u,false,false);if(r<0)break;s=r;g()}e.splice(c,e.length-c)};this.getSuggestTerms=function(t,e){var n=this,i,s;function o(t){var e,i,s;t=t.trim();if(0===t.length)return null;e=t.length;i=e-1;s=-1;while(i>-1){if(n.isWhiteSpaceAt(t,i)){s=i+1;break}i--}s=Math.max(s,0);return t.substring(s,e)}s=o(t);i=e.map(function(t){return t.string});s&&2===s.length&&'"'===s.charAt(0)&&i.push(s.charAt(1));return i};this.getUnderlineLengthFromTermIx=function(t,e){var n=0,i,s=0;while(n<t.length){i=t[n];if(!(s<e||i.isWhitespace))break;if(n===t.length-1&&1===i.string.length&&!this.isWhiteSpaceAt(i.string,0)&&'"'!==i.string)break;i.isWhitespace||s++;n++}return n>0?n:0};this.getResultingQueryFromSuggestion=function(t,e){var n,i,s,o,r=this.getUnderlineLengthFromTermIx(t,e.term);n=t.slice(0,r).reduce(function(t,e){return t+e.string},"");i='"'===n.charAt(n.length-1);s=!i&&e.value.indexOf(" ")>=0;o=s||i;return n+(s?'"':"")+e.value+(o?'"':"")};this.getMinQueryLength=function(){return s};this.getMaxColorsNum=function(){return i}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(89),n(310),n(48)],s=function(t,e,n,i){function s(t){t=t.replace(/\$/g,"[dollar]");t=t.replace(/\\/g,"[slash]");return t}function o(t){t=t.replace(/\[dollar\]/g,"$");t=t.replace(/\[slash\]/g,"\\");return t}function r(t){return t}function a(e){e=e.replace(/'/g,"\\'");e=e.replace(/"/g,'\\"');var n=t("div[name='"+e+"']");if(1!==n.length)throw new Error('Could not find the table "'+e+'".');return n}function l(){var e=t("div[table]");return e}function c(t,e){var n=a(t).find("li[data-name='"+e.replace(/'/g,"\\'")+"']");if(1!==n.length)throw new Error('Could not find the field "'+e+'" in the table "'+t+'".');return n}function u(t){var e=a(t);return d(e)}function d(t){return t.find("h1")}function p(t){var e=a(t);return h(e)}function h(t){return d(t).outerHeight()}function f(t,e){return e-n.OFFSET_BETWEEN_TABLE_BOTTOM_AND_UL_BOTTOM-p(t)}function g(t){return a(t).height()}function v(t){var e=a(t);return m(e)}function m(t){return t.width()}function b(t,n,i){var s=new e;var o={top:n,left:i};a(t).animate(o,{duration:750,complete:function t(){return s.resolve()}});return s.promise}function y(t,n,i){var s=new e;var o=E(a(t));var r=P(a(t));var l=L(a(t));n>o&&(n=o);i>l&&(i=l);i<r&&(i=r);var c={height:n,width:i};a(t).animate(c,{duration:750,progress:function e(){x(t)},complete:function e(){x(t);return s.resolve()}});return s.promise}function x(t){var i=g(t)-p(t)-n.OFFSET_BETWEEN_TABLE_BOTTOM_AND_UL_BOTTOM;a(t).find("ul").height(i);return e.resolve()}function q(t){var e=a(t);var n=parseInt(e.css("top"),10);return n}function S(t){return t.height()}function w(t){var e=a(t);var n=parseInt(e.css("left"),10);return n}function C(e){var n=t(".table-container");n.css("opacity",e)}function I(){t("svg.dmv").fadeIn(750)}function _(){var n=new e;t("svg.dmv").fadeOut(750,function(){return n.resolve()});return n.promise}function D(t){var e=i.getService("qvLoader");function n(){var n=t?"DataModelViewer.ReloadInProgress":"DataModelViewer.RefreshingDataModel";var i={messageObj:{task:n},transparentBackground:true};e.show(i)}if(void 0===t)throw new Error("Reloading is undefined.");e.isOpen()?e.close().then(n):n()}function k(){var t=i.getService("qvLoader");t.close()}function T(){var e=0;var n=0;var i=0;var s=0;var o=Number.MAX_VALUE;var r=Number.MAX_VALUE;l().each(function(a,l){var c=t(l);e=Math.max(e,parseInt(c.css("left"),10));n=Math.max(n,parseInt(c.css("top"),10));i=Math.max(i,c.width());s=Math.max(s,c.height());o=Math.min(o,parseInt(c.css("left"),10));r=Math.min(r,parseInt(c.css("top"),10))});return{left:e,top:n,width:i,height:s,bottom:n+s,right:e+i,furthestLeft:o,furthestTop:r}}function E(t){var e=t.css("height");var n=t.find("ul").css("height");t.css("height","auto");t.find("ul").css("height","auto");var i=t.outerHeight();t.css("height",e);t.find("ul").css("height",n);return i}function A(t){var e=a(t);return E(e)}function L(t){var e=t.css("width");t.css("width","auto");var n=t.outerWidth();t.css("width",e);return n}function M(t){var e=a(t);return L(e)}function P(t){var e=Math.min(n.MIN_TABLE_RESIZE_WIDTH,L(t));return e}function O(t){return h(t)}return{encodeTableName:s,decodeTableName:o,decodeFieldName:r,setTablePosition:b,setTableSize:y,setTableContainerElementOpacity:C,getTableWidth:m,getTableWidthByTableName:v,getTableElementHeight:S,getMaxHeightForTable:E,getMaxWidthForTable:L,getMinWidthForTable:P,getTableElement:a,getFieldElement:c,getMinHeightForTable:O,getTableHeader:u,getTableHeaderHeightByTableName:p,getULHeight:f,getTableHeightByTableName:g,getTableElementTop:q,getTableElementLeft:w,getAllTableElements:l,getHighestHeightForAllTables:T,getMaxHeightForTableByName:A,getMaxWidthForTableByName:M,updateULHeightBasedOnTableHeight:x,fadeInLines:I,fadeOutLines:_,fadeInWorkingOverlay:D,fadeOutWorkingOverlay:k}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(10),n(48)],s=function(t,e,n){var i={},s=false,o=false,r=null,a=null,l=null,c={wide:{w:16,h:9},regular:{w:4,h:3}},u={id:"",slide:"",action:""},d={id:null},p=0,h=199,f={},g;function v(e,n){var i=t(".qv-grid-story"),s=i.offset().left+1*n.width-e.outerWidth(),o=i.outerWidth()+i.offset().left-1*n.width,r=i.offset().top+1*n.height-e.outerHeight(),a=i.offset().top+i.outerHeight()-1*n.height;return[s,r,o,a]}function m(t,e,n){var i,s=t.outerHeight(),o=t.outerWidth(),r=t.offset(),a=e.offset(),l=e.outerHeight(),c=e.outerWidth();if(r.left+o<a.left+1*n.width){i=a.left+1*n.width-(r.left+o);t.css("left","+="+i)}if(r.top+s<a.top+1*n.height){i=a.top+1*n.height-(r.top+s);t.css("top","+="+i)}if(r.left+1*n.width>a.left+c){i=r.left+1*n.width-(a.left+c);t.css("left","-="+i)}if(r.top+1*n.height>a.top+l){i=r.top+1*n.width-(a.top+l);t.css("top","-="+i)}}function b(t,e){t=parseInt(t);while(t%e!==0&&t>e)t--;return t<e?e:t}function y(t,e){while(t%e!==0&&t>0)t++;return t}function x(t,e){var n="right"===e?"right":"left",i=t.position().top,s=t.outerWidth(),o=t.outerHeight(),r=t.position().left,a=t.offsetParent().width()-r-s,l=(100*i/t.offsetParent().height()).toFixed(5)+"%",c="right"===n?"auto":(100*r/t.offsetParent().width()).toFixed(5)+"%",u="left"===n?"auto":(100*a/t.offsetParent().width()).toFixed(5)+"%",d=(100*s/t.offsetParent().width()).toFixed(5)+"%",p=(100*o/t.offsetParent().height()).toFixed(5)+"%";return{top:l,left:c,right:u,width:d,height:p,"z-index":parseInt(t.css("z-index"),10)}}function q(t){var e=t.getBoundingClientRect(),n=document.getElementById("selectable").getBoundingClientRect(),i=e.top-n.top,s=e.left-n.left,o=e.width,r=e.height,a=(i/n.height*100).toFixed(2)+"%",l=(s/n.width*100).toFixed(2)+"%",c=(o/n.width*100).toFixed(2)+"%",u=(r/n.height*100).toFixed(2)+"%",d={top:a,left:l,width:c,height:u,"z-index":parseInt(t.style.zIndex,10)};return d}function S(){return i}function w(t){i=t}function C(t){s=t}function I(){return s}function _(t){l=t;e.element(".qv-storytelling-edit-toolbar").scope().$broadcast(t?"slideItemSelected":"slideItemDeselected")}function D(){return l}function k(t){function e(t,e){if(t.qData.rank<e.qData.rank)return-1;if(t.qData.rank>e.qData.rank)return 1;return 0}if(Array.isArray(t)&&t.length>0)return t.sort(e);return t}function T(t,e){var i=n.getService("$compile"),s=n.getService("$rootScope"),o="<div storytelling-thumbnail />",r=s.$new();r.slide={qInfo:{qId:e}};t.empty();t.append(i(o)(r))}function E(){n.getService("$timeout").cancel(g);i.showGrid=true}function A(){n.getService("$timeout").cancel(g);g=n.getService("$timeout")(function(){i.showGrid=false},2300)}return{getContainmentOnElement:v,slideItemOutsideSlide:m,decreaseValueUntilEvenSplit:b,increaseValueUntilEvenSplit:y,getElementPosition:x,getHelperPosition:q,getGridOptions:S,setGridOptions:w,showGridPattern:E,hideGridPattern:A,setPublishState:C,getPublishState:I,sortSlidesByRank:k,setSelectedSlideItemElem:_,getSelectedSlideItemElem:D,currentStoryId:r,currentSlideId:a,createSlideThumbnail:T,availableRatios:c,pasteOffset:p,lastObjPasted:u,lastObjAdded:d,isViewingSource:o,maxNumberOfSlideItems:h,selectionState:f}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(93)],s=function(t,e){function n(n){return n?t.resolve(n.enigmaModel):e.getApp()}var i={};i.get=function(t,e){return n(e).then(function(e){return e.getBookmark(t)})};i.apply=function(t,e){return n(e).then(function(e){return e.applyBookmark(t)})};i.create=function(t,e){return n(e).then(function(e){return e.createBookmark(t)})};i.remove=function(t,e){return n(e).then(function(e){return e.destroyBookmark(t)})};i.getList=function(t){return n(t).then(function(t){return t.getBookmarkListObject()})};i.getListLayout=function(t){return n(t).then(function(t){return t.getBookmarkList()})};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(93),n(90),n(89)],s=function(t,e,n,i){t.service("qvColorMapService",[function(){var t="ColorMapModel_";function s(t){var e=null;return t.getLayout().then(function(t){t.colorMap&&(e=t.colorMap);return e?n.extend(true,{},e):null})}function o(t,e){var i=n.extend(true,{},e);return t.getProperties().then(function(e){if(e.colorMap){e.colorMap=i;return t.setProperties(e)}})}var r={getColorMap:function n(o,r){var a;a=r?i.resolve(r):e.getApp();if(!o)return i.resolve(null);return a.then(function(e){return e.getObject((t+o).toString()).then(function(t){return s(t)})}).catch(function(){return null})},setColorMap:function n(i,s){var r=(t+i).toString();return e.getApp().then(function(t){return t.getObject(r).catch(function(){return t.createObject({qInfo:{qType:"ColorMap",qId:r},colorMap:{}})}).then(function(t){return o(t,s)})})},deleteColorMap:function n(i){return e.getApp().then(function(e){return e.destroyObject((t+i).toString())})},getTemplate:function t(){return{colors:[],nul:null,oth:null,pal:null,single:null,usePal:null,autoFill:true}},getMeasureGradient:function t(n,s){var o;o=s?i.resolve(s):e.getApp();return o.then(function(t){return t.getMeasure(n).then(function(t){return t.getProperties().then(function(t){if(t&&t.qMeasure&&t.qMeasure.coloring)return t.qMeasure.coloring.gradient})})}).catch(function(){return null})}};return r}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(95),n(11),n(10),n(48),n(833),n(839),n(94),n(50),n(202)],s=function(t,e,n,i,s,o,r,a,l){i.service("qvGlobalSelectionsService",["$document","$timeout",function(i,c){var u={},d,p=false,h=null,f=[];function g(t){if(!t)return u[0];return u[m(t)]}function v(t,e){u[m(t)]=e}function m(t){return t&&t.id?t.id.toUpperCase():""}function b(t){function e(){var e=g(t);x(e)}function n(){var e=g(t);x(e);y(e)}return{$container:void 0,$app:t,$selectionCount:false,$showFields:false,getComponent:function t(){return a.isSmallDevice?o:s},setup:function t(){a.ViewChanged.bind(n);r.StateChanged.bind(e)},destroy:function t(){a.ViewChanged.unbind(n);r.StateChanged.unbind(e)}}}function y(t){t.$container=n.element("<div>");i.find("#global-selections-container").length>0?i.find("#global-selections-container").append(t.$container):i.find("body").append(t.$container);t.$container.showComponent(t.getComponent(),["$scope",function(e){e.app=t.$app}]);t.setup()}function x(t){if(t.$container){t.$container.remove();t.$container=void 0}f.forEach(function(t){t()});t.destroy()}function q(t){var e=g(t);if(!e){e=new b(t.enigmaModel);v(t,e)}return e}function S(t){return t&&void 0!==t.$container}function w(){t.publish("/toolbar/setContextItemsVisibility",d.getCaoActive()||d.isSelectActive())}function C(t){var n=l.getCurrentSheetInfo();if(S(t)){l.closeAnalysisOverlay(n.sheetId,n.appId);x(t);e("body").removeClass("qv-global-selections-enabled")}else{l.openAnalysisOverlay(n.sheetId,n.appId,r.States.selections);e("body").addClass("qv-global-selections-enabled");y(t)}w()}d={toggleGlobalSelection:function t(e){C(q(e))},off:function t(){Object.keys(u).forEach(function(t){x(u[t])})},isSelectActive:function t(e){var n=g(e);return!!(void 0!==e&&S(n))},getCaoActive:function t(){return p},setCaoActive:function t(e){c(function(){p=e;w()})},setCsShowCallback:function t(e){h=e},setCsShow:function t(e){h&&h(e)},setSelectionCount:function e(n,i){var s=q(i);s.$selectionCount=n;t.publish("/toolbar/invalidateMobileToolbar",n)},getSelectionCount:function t(e){var n=g(e)||{};return n.$selectionCount},setShowFields:function t(e,n){var i=q(n);i.$showFields=e},getShowFields:function t(e){var n=g(e)||{};return!!n.$showFields},onClose:function t(e){"function"===typeof e&&f.push(e)}};return d}])}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t="q3TnObj";function e(){var e=JSON.parse(sessionStorage.getItem(t));null===e&&(e=JSON.parse(localStorage.getItem(t))||{});return e}function n(){return e()}function i(n){var i=e();if(!i[n]){i[n]={data:{view:"",scriptTabIndex:0},tab:"",analysis:{sheetId:"",state:""},story:{storyId:"",slideId:"",state:""}};sessionStorage.setItem(t,JSON.stringify(i));localStorage.setItem(t,JSON.stringify(i));return i[n]}return i[n]}function s(n,s,o,r){var a=i(n);var l=e();void 0===o&&(o=l[n].data.scriptTabIndex);r||(a.tab="data");a.data={view:s,scriptTabIndex:o};l[n]=a;localStorage.setItem(t,JSON.stringify(l));sessionStorage.setItem(t,JSON.stringify(l));return l[n]}function o(t){var n=e();if(n[t])return n[t].data;return"not_found"}function r(n,s,o,r){var a=i(o);var l=e();a.tab="analysis";a.analysis={sheetId:n,state:s,overlay:r};l[o]=a;localStorage.setItem(t,JSON.stringify(l));sessionStorage.setItem(t,JSON.stringify(l));return l[o]}function a(t){var n=e();if(n[t])return n[t].analysis;return"not_found"}function l(n,s,o,r){var a=i(r);var l=e();a.tab="story";a.story={slideId:n,storyId:o,state:s};l[r]=a;localStorage.setItem(t,JSON.stringify(l));sessionStorage.setItem(t,JSON.stringify(l));return l[r]}function c(t){var n=e();if(n[t])return n[t].story;return"not_found"}function u(n,s){var o=i(s);var r=e();o.tab=n;r[s]=o;localStorage.setItem(t,JSON.stringify(r));sessionStorage.setItem(t,JSON.stringify(r));return r[s]}function d(t){var n=e();if(n[t])return n[t].tab;return"not_found"}return{isInSession:n,setData:s,data:o,setSheet:r,analysis:a,setStory:l,story:c,setTab:u,tab:d}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={getCharacterCount:e,getCharacterIndexes:n,getIsCharacterEncapsulated:i,getNormalizedExpression:s,getFormattedAggregation:o};return t;function e(t,e){if(!t||!e)return 0;return t.split(e).length-1}function n(t,e){var n=[];if(!t||!e)return n;for(var i=0;i<t.length;i++){var s=t.charAt(i);s===e&&n.push(i)}return n}function i(t,n,i,s){if(!t||!i||!s)return false;var o=i===s;var r=e(t,i),a=e(t,s);var l=o?r>1:r+a>1;if(!l)return false;var c=t.substr(0,n),u=e(c,i);if(o){var d=r%2===0,p=u%2!==0;if(d)return p;var h=u>0&&u!==r;return h&&p}var f=e(c,s),g=r===a;if(g)return u>f;var v=u<f;if(v||0===a)return false;var m=r-a;return u<=m}function s(t){if(!t)return"";"="===t.charAt(0)&&(t=t.substr(1));var e=t.length-1;"["===t.charAt(0)&&"]"===t.charAt(e)&&(t=t.substring(1,e));return t}function o(t){if(!t)return"";return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(96),n(90),n(772)],s=function(t,e,n,i){var s,o=0;function r(){return".grid-object-dom-api-"+ ++o}function a(t,e){var n=t.getBoundingClientRect();return Math.round(n.bottom-e.bottom)<1}function l(t,e){var n=t.getBoundingClientRect();return Math.round(n.top-e.bottom)<1}function c(t,e){var n=e-t;return 1===n?e:Math.floor(t+n/2)}function u(t,e,n,i,s){var o=n-e,r=c(e,n),a=s(t[r],i);if(0===o)return a?r:-1;if(1===o)return a?r:u(t,e,e,i,s);return a?u(t,r,n,i,s):u(t,e,r,i,s)}s=t.extend({init:function t(e,n,i,s,o,a){a=a||".scroll-content";this.$element=e;this.$scrollArea=n;this.$scrollContent=n.find(a);this.rowSelector=i;this.firstRowSelector=s;this.lastRowSelector=o;this.namespace=r();this.direction="ltr"},destroy:function t(){this.unbindNativeScroll()},bindNativeScroll:function t(e){this.$scrollArea.on("scroll"+this.namespace,e)},unbindNativeScroll:function t(){this.$scrollArea.off(this.namespace)},resetNativeScroll:function t(){if("rtl"===this.direction&&i.getStartType()===i.RTL_SCROLL_START.POSITIVE){var e=this.getScrollWidth();var n=this.getScrollAreaClientWidth();var s=Math.max(0,e-n);this.$scrollArea.scrollLeft(s)}else this.$scrollArea.scrollLeft(0);this.$scrollArea.scrollTop(0)},preventNativeScroll:function t(){e(this.$scrollArea[0]).tap({id:this.namespace});return function(){e(this.$scrollArea[0]).off("tap",this.namespace)}.bind(this)},getBoundingBox:function t(){return this.$element[0].getBoundingClientRect()},getClientWidth:function t(){return this.$element[0].clientWidth},getClientHeight:function t(){return this.$element[0].clientHeight},getNativeScrollOffsetLeft:function t(){return this.$element[0].scrollLeft},getScrollWidth:function t(){return this.$scrollArea[0].scrollWidth},getScrollAreaBoundingBox:function t(){return this.$scrollArea[0].getBoundingClientRect()},getScrollAreaClientWidth:function t(){return this.$scrollArea[0].clientWidth},getScrollAreaClientHeight:function t(){return this.$scrollArea[0].clientHeight},getScrollAreaOffsetTop:function t(){return this.$scrollArea[0].offsetTop},getScrollContentBoundingBox:function t(){return this.$scrollContent[0].getBoundingClientRect()},getFirstRow:function t(){return this.$scrollArea.find(this.firstRowSelector)},getLastRow:function t(){return this.$scrollArea.find(this.lastRowSelector)},getRows:function t(){var e=this.$element[0].querySelectorAll(this.rowSelector);e=Array.prototype.slice.call(e);return e.filter(function(t){return t.nodeType===Node.ELEMENT_NODE})},getHeightOfRow:function t(e){var n=this.getRows();if(n[e]){var i=n[e];return i.getBoundingClientRect().height}},getPartiallyVisibleRowCount:function t(){var e=this.getRows();if(0===e.length)return 0;var n=this.getScrollAreaBoundingBox(),i=u(e,0,e.length-1,n,l)+1;return i},getVisibleRowCount:function t(e){var i=this.getRows();if(0===i.length)return 0;var s=this.getScrollAreaBoundingBox(),o=u(i,0,i.length-1,s,a)+1;if(o===i.length&&n.isNumeric(e)){var r=i[i.length-1],l=r.getBoundingClientRect(),c=Math.round(s.bottom-l.bottom);o+=Math.floor(c/e)}return o},alignToFirstRow:function t(){var e=this.getFirstRow(),n=48;return function(){var t=e.position().top-n;this.$scrollArea.scrollTop(t)}.bind(this)},alignToLastRow:function t(){var e=this.getLastRow(),n=48;return function(){this.$scrollArea.scrollTop(0);var t=e.position().top-this.getScrollAreaBoundingBox().height+e[0].getBoundingClientRect().height+n;this.$scrollArea.scrollTop(t)}.bind(this)},setDirection:function t(e){this.direction=e}});return s}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(127)],s=function(t,e){var n={a:65,alt:18,b:66,backspace:8,c:67,ctrl:17,d:68,del:46,down:40,e:69,end:35,f:70,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,g:71,h:72,home:36,i:73,insert:45,j:74,k:75,l:76,left:37,m:77,n:78,o:79,p:80,pagedown:34,pageup:33,q:81,r:82,right:39,s:83,shift:16,space:32,t:84,tab:9,u:85,up:38,v:86,w:87,win:224,x:88,y:89,z:90,cmd:91,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"*":106},i="qvKeyboardShortcuts",s=false,o;function r(){this.groups=[];this.shortcuts=[];this.timer={id:null};this.isReleased=true;this.currentEvent=void 0}r.prototype.createGroup=function(t,e){var n=this,i,s;for(s=0;s<this.groups.length;s++)if(this.groups[s].name===t){i=this.groups[s];break}if(!i){i={name:t,priority:e,active:false,shortcuts:[]};this.groups.push(i);this.groups.sort(function(t,e){return t.priority-e.priority})}return{registerKeys:function t(e,s,o){n.registerKeys(i,e,s,o)},unregisterKeys:function t(e,n){var s=i.shortcuts;for(var o=0;o<s.length;o++)if(s[o].keyCombo===e&&s[o].callback===n){s.splice(o,1);break}},on:function t(){n.activateGroup(i)},off:function t(){n.deactivateGroup(i)},delete:function t(){n.deactivateGroup(i);n.deleteGroup(i)}}};r.prototype.activateGroup=function(e){var n=this;e.active=true;if(!s){s=true;t(document).on("keydown."+i,function(t){n.handleEvent(t)})}};r.prototype.deactivateGroup=function(e){var n;e.active=false;n=this.groups.reduce(function(t,e){e.active&&t++;return t},0);if(0===n&&s){s=false;t(document).off("keydown."+i)}};r.prototype.deleteGroup=function(t){this.groups=this.groups.filter(function(e){return e!==t})};r.prototype.registerKeys=function(t,e,i,s){var o=e.toLowerCase().split("+"),r={keyCombo:e,ctrlKey:false,shiftKey:false,altKey:false,keyCode:null,name:"",callback:null,allowInAllContexts:!!(s&&"allowInInput"in s)&&s.allowInInput,preventDefault:!(s&&"preventDefault"in s)||s.preventDefault,delay:s&&"delay"in s?s.delay:250};for(var a in n)for(var l=0;l<o.length;l++){r.name=e.toLowerCase();r.callback=i;"ctrl"!==o[l]&&"cmd"!==o[l]||(r.ctrlKey=true);"alt"===o[l]&&(r.altKey=true);"shift"===o[l]&&(r.shiftKey=true);o[l]===a&&17!==n[a]&&16!==n[a]&&91!==n[a]&&18!==n[a]&&(r.keyCode=n[a])}t.shortcuts.push(r)};r.prototype.preventDefault=function(){this.currentEvent&&this.currentEvent.preventDefault()};r.prototype.handleEvent=function(t){var i=this;this.currentEvent=t;function s(e,s,r,a){var l,c;for(var u=0;u<i.groups.length;u++){l=i.groups[u];if(l.active)for(var d=l.shortcuts.length-1;d>=0;d--){c=l.shortcuts[d];if((c.keyCode===n["*"]||c.keyCode===a&&c.ctrlKey===e&&c.shiftKey===s&&c.altKey===r)&&!o(t,c))break}}}function o(t,n){var i=e.isInput(document.activeElement);return!(i&&!n.allowInAllContexts)&&r(t,n)}function r(t,e){e.preventDefault&&t.preventDefault();if("number"!==typeof i.timer.id){e.delay>0&&(i.timer.id=setTimeout(function(){a()},e.delay));if(true===e.callback(e,t)){a();return true}}}function a(){clearTimeout(i.timer.id);delete i.timer.id}t.shiftKey?!t.ctrlKey&&!t.metaKey||t.altKey?t.ctrlKey||t.metaKey||!t.altKey?s(false,true,false,t.which):s(false,true,true,t.which):s(true,true,false,t.which):!t.ctrlKey&&!t.metaKey||t.altKey?t.ctrlKey||t.metaKey||!t.altKey?s(false,false,false,t.which):s(false,false,true,t.which):s(true,false,false,t.which)};o=new r;return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(113),n(100),n(101),n(216),n(195)],s=function(t,e,n,i,s){var o=1e3;var r=s.baseColor;function a(t){return true!==n.getValue(t,"color.reverseScheme")}function l(t){return"byExpression"===n.getValue(t,"color.mode")&&false===n.getValue(t,"color.expressionIsColor")}function c(t){return"byExpression"===n.getValue(t,"color.mode")&&true===n.getValue(t,"color.expressionIsColor")}function u(t){var e=i.getDimensionLayouts(t)[0];return e&&e.qCardinal>o}function d(t){return"byDimension"===t.color.mode&&!(n.getValue(t,"color.byDimDef.activeDimensionIndex")>-1)||"byMeasure"===t.color.mode&&!(n.getValue(t,"color.byMeasureDef.activeMeasureIndex")>-1)}function p(){var t=[];var n=e.dataPalettes;n.forEach(function(e){if("true"!==e.disabled){var n={type:"classes",component:"color-scale",translation:e.translation||e.name,value:e.propertyValue};"pyramid"===e.type?n.colors=e.scale[e.scale.length-1]:n.colors=e.scale;t.push(n)}});return t}function h(){var t=[];var n=e.scales;n.forEach(function(e){if(!e.disabled){var n={component:"color-scale",reverse:this.helpers.schemeIsReverse,translation:e.translation||e.name,value:e.propertyValue};if("class-pyramid"===e.type){n.colors=e.scale[e.scale.length-1];n.type="classes"}else{n.colors=e.scale;n.type="gradient"}t.push(n)}},this);return t}function f(t){if(!t)return false;if(t.coloring&&t.coloring.baseColor&&t.coloring.baseColor.color)return t.coloring.baseColor;if(t.baseColor&&t.baseColor.color)return t.baseColor;return false}function g(t){return n.getValue(t,"layout.qHyperCube.qMeasureInfo",[]).filter(function(t){return!!f(t)}).length>0}function v(t){var e=n.getValue(t,"layout.layers",false);return e?e.filter(function(t){return n.getValue(t,"qHyperCube.qDimensionInfo",[]).filter(function(t){return!!f(t)}).length>0}).length>0:n.getValue(t,"layout.qHyperCube.qDimensionInfo",[]).filter(function(t){return!!f(t)}).length>0}function m(t,e){var i=n.getValue(t,e,void 0);if(!i||"undefined"===typeof i.label)return;"="===i.label.charAt(0)?t.color.altLabel={qStringExpression:{qExpr:i.label.substr(1)}}:t.color.altLabel=i.label}function b(t){return!n.getValue(t,"color.auto")&&"byDimension"===n.getValue(t,"color.mode")}function y(t){return!n.getValue(t,"color.auto")&&"byMeasure"===n.getValue(t,"color.mode")}function x(t,e){var n=y(t),i=b(t);if(!n&&!i)return;var s=n?t.color.byMeasureDef:t.color.byDimDef;s.label=e}var q={showLegend:function t(e){var s=n.getValue(e,"color.auto"),o=n.getValue(e,"color.mode"),r=n.getValue(e,"color.expressionIsColor"),a=i.getNumDimensions(e),l=i.getNumMeasures(e);return s&&(a>1||l>1)||!s&&"primary"!==o&&("byExpression"!==o||!r)},colorModeOptions:{primary:function t(){return true},dimension:function t(e){return i.getNumDimensions(e)>0&&i.getNumMeasures(e)<=1},multiColor:function t(e){return i.getNumMeasures(e)>1},measure:function t(e){return i.getNumDimensions(e)>0},expression:function t(e){return i.getNumMeasures(e)>=1}},persistentColorsShow:function t(e){return!n.getValue(e,"color.auto")&&"byDimension"===n.getValue(e,"color.mode")&&i.getNumMeasures(e)<=1},useDimValColShow:function t(e){void 0===n.getValue(e,"color.useDimColVal")&&n.setValue(e,"color.useDimColVal",false);return!n.getValue(e,"color.auto")&&"byDimension"===n.getValue(e,"color.mode")&&"libraryItem"===n.getValue(e,"color.byDimDef.type")},expressionLabelChange:function t(e){var i=n.getValue(e,"qHyperCubeDef.qMeasures.0.qAttributeExpressions.0"),s=n.getValue(e,"color");if(i){i.label=n.getValue(e,"color.expressionLabel");s&&(s.colorExpression=i.qExpression)}},attributeExpressionChange:function t(e){var i=n.getValue(e,"qHyperCubeDef.qMeasures.0.qAttributeExpressions.0"),s=n.getValue(e,"color");if(i){i.id="colorByExpression";s&&(s.colorExpression=i.qExpression)}},attributeExpressionGlobalChange:function t(e){var i=n.getValue(e,"qHyperCubeDef.qMeasures",[]),s=n.getValue(e,"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",[]),o,r,a,l=null,c=function t(e,n){"colorByExpression"===e.id&&(r=n)};if(i.length+s.length>1){for(o=s.length-1;o>=0;--o){a=s[o].qAttributeExpressions||[];r=-1;a.every(c);r>=0&&(l=a.splice(r,1)[0])}for(o=i.length-1;o>=0;--o){a=i[o].qAttributeExpressions||[];r=-1;a.every(c);r>=0&&(l=a.splice(r,1)[0])}if(i.length){!i[0].qAttributeExpressions&&l&&(i[0].qAttributeExpressions=[]);l&&i[0].qAttributeExpressions.splice(0,0,l)}}var u=n.getValue(e,"color.colorExpression");1!==i.length||i[0].qAttributeExpressions&&0!==i[0].qAttributeExpressions.length||!u||(i[0].qAttributeExpressions=[{qExpression:u,id:"colorByExpression"}])},colorByGlobalChange:function t(e,n,i){s.colorByUpdater(e,i)},colorByDimensionChange:function t(e){m(e,"color.byDimDef")},colorByMeasureChange:function t(e){m(e,"color.byMeasureDef")},colorByLabelChange:function t(e){var i=n.getValue(e,"color.altLabel",""),s=i.qStringExpression?"="+i.qStringExpression.qExpr:i;if("="===s)return;x(e,s)}};var S={colorModeOptions:{primary:function t(){return true},dimension:function t(){return true},multiColor:function t(){return false},measure:function t(){return true},expression:function t(e){return i.getNumMeasures(e)>=1}},showLegend:function t(e){var i=n.getValue(e,"color.auto"),s=n.getValue(e,"color.expressionIsColor"),o=n.getValue(e,"color.mode");return!(!i&&"primary"===o||!i&&"byExpression"===o&&(s||void 0===s))},persistentColorsShow:function t(e){return!n.getValue(e,"color.auto")&&"byDimension"===n.getValue(e,"color.mode")},dimPrimaryMode:true};var w={colorModeOptions:{primary:function t(){return true},dimension:function t(){return true},multiColor:function t(){return false},measure:function t(){return true},expression:function t(e){return i.getNumMeasures(e)>=1}},showLegend:function t(e){return"primary"!==n.getValue(e,"color.mode")&&!n.getValue(e,"color.auto")},persistentColorsShow:function t(e){return!n.getValue(e,"color.auto")&&"byDimension"===n.getValue(e,"color.mode")}};var C={colorModeOptions:{primary:function t(){return true},dimension:function t(e){return i.getNumDimensions(e)>1},multiColor:function t(e){return i.getNumMeasures(e)>1},measure:function t(e){return i.getNumDimensions(e)<=1},expression:function t(e){return i.getNumMeasures(e)>=1}}};var I={colorModeOptions:{primary:function t(){return true},dimension:function t(e){return i.getNumDimensions(e)>=1},multiColor:function t(e){return i.getNumMeasures(e)>1},measure:function t(e){return i.getNumDimensions(e)>=1},expression:function t(e){return i.getNumDimensions(e)>=1}}};var _={colorModeOptions:{primary:function t(){return true},dimension:function t(){return true},multiColor:function t(){return false},measure:function e(){return t.COLOR_BY_MEA},expression:function t(e){return i.getNumDimensions(e)>=1}}};var D={scatterplot:w,piechart:S,linechart:C,map:I,distributionplot:_};function k(t,e){var n=D[t]||q;return n[e]||q[e]}var T=function t(s,o){var f=k(o,"colorModeOptions"),m=k(o,"persistentColorsShow"),x=k(o,"useDimValColShow"),q=k(o,"expressionLabelChange"),S=k(o,"attributeExpressionChange"),w=k(o,"attributeExpressionGlobalChange"),C=k(o,"colorByGlobalChange"),I=k(o,"colorByDimensionChange"),_=k(o,"colorByMeasureChange"),D=k(o,"colorByLabelChange");this.helpers={schemeIsReverse:a,showCompressionResolution:u,colorModeOptions:f,getMeasureSchemeOptions:h.bind(this),getDimensionSchemeOptions:p};this.color={colorMode:{options:function t(e){var t=[];"explore"===s&&t.push({value:"auto",translation:"Common.Auto"});f.primary(e)&&t.push({value:"primary",translation:"properties.colorMode.primary"});f.multiColor(e)&&t.push({value:"byMultiple",translation:"properties.colorMode.multicolored"});f.dimension(e)&&t.push({value:"byDimension",translation:"properties.colorMode.byDimension"});f.measure(e)&&t.push({value:"byMeasure",translation:"properties.colorMode.byMeasure"});f.expression(e)&&"explore"!==s&&t.push({value:"byExpression",translation:"properties.colorMode.byExpression"});return t},show:function t(e){return!n.getValue(e,"color.auto")}},paletteColor:{show:function t(i,s){if(!n.getValue(i,"color.paletteColor")){var o=e.resolveColor(n.getValue(i,"color.singleColor"));var a={index:-1,color:o};n.setValue(i,"color.paletteColor",a)}return!n.getValue(i,"color.auto")&&"primary"===n.getValue(i,"color.mode")&&!(r.isSupported(i.visualization)&&g(s)&&"measure"===n.getValue(i,"color.useBaseColors")||v(s)&&"dimension"===n.getValue(i,"color.useBaseColors"))},defaultValue:function t(){var n=e.dataColors.primaryColor;var i=e.currentPalette.indexOf(n);return{index:-1===i?Math.min(6,e.currentPalette.length-1):i}}},colorBy:{globalChange:C,dimension:{show:b,change:I},measure:{show:y,change:_},label:{show:function t(e){return!n.getValue(e,"color.auto")&&d(e)&&("byDimension"===n.getValue(e,"color.mode")&&"libraryItem"!==n.getValue(e,"color.byDimDef.type")||"byMeasure"===n.getValue(e,"color.mode")&&"libraryItem"!==n.getValue(e,"color.byMeasureDef.type"))},change:D}},baseColor:{show:function t(e,i){var s=n.getValue(e,"color.mode");return!n.getValue(e,"color.auto")&&("byMultiple"===s||"primary"===s)&&(g(i)&&r.isSupported(e.visualization)||v(i))},showColors:function t(e,i){return!n.getValue(e,"color.auto")&&"byMultiple"===n.getValue(e,"color.mode")&&"measure"===n.getValue(e,"color.useBaseColors")&&r.isSupported(e.visualization)&&i.layout.qHyperCube.qMeasureInfo.length>1&&g(i)},hasMeasureColor:function t(e){return g(e)},hasDimensionColor:function t(e){return v(e)},isSupported:function t(e){return r.isSupported(e)}},persistentColors:{show:function t(e){if(x(e))return m(e)&&!n.getValue(e,"color.useDimColVal");return m(e)},readOnly:function t(e){return n.getValue(e,"qHyperCubeDef.qDimensions.length")>1}},useDimColVal:{show:x},attributeExpression:{change:S,globalChange:w,show:function t(e){return!n.getValue(e,"color.auto")&&"byExpression"===n.getValue(e,"color.mode")&&i.getNumMeasures(e)>0}},expressionIsColor:{show:function t(e){return!n.getValue(e,"color.auto")&&"byExpression"===n.getValue(e,"color.mode")&&i.getNumMeasures(e)>0}},expressionLabel:{change:q,show:function t(e){return!n.getValue(e,"color.auto")&&l(e)&&i.getNumMeasures(e)>0}},colorSchemeMeasure:{show:function t(e){return!n.getValue(e,"color.auto")&&("byMeasure"===n.getValue(e,"color.mode")||l(e))}},reverseScheme:{show:function t(e){return!n.getValue(e,"color.auto")&&("byMeasure"===n.getValue(e,"color.mode")||l(e))}},colorSchemeDimension:{show:function t(e,i){return(!x(e)||!n.getValue(e,"color.useDimColVal"))&&!n.getValue(e,"color.auto")&&("byDimension"===n.getValue(e,"color.mode")||"byMultiple"===n.getValue(e,"color.mode"))&&!("measure"===n.getValue(e,"color.useBaseColors")&&r.isSupported(e.visualization)&&g(i)&&("byMultiple"===n.getValue(e,"color.mode")||n.getValue(e,"color.auto")&&i.layout.qHyperCube.qMeasureInfo.length>1))}},customRange:{show:function t(e){return!n.getValue(e,"color.auto")},autoMinMax:{show:function t(e){return"byMeasure"===n.getValue(e,"color.mode")||l(e)}},min:{show:function t(e){return("byMeasure"===n.getValue(e,"color.mode")||l(e))&&false===n.getValue(e,"color.autoMinMax")},invalid:function t(e){if("minMax"===n.getValue(e,"color.minMax"))return n.getValue(e,"color.measureMin")>=n.getValue(e,"color.measureMax");return false}},max:{show:function t(e){return("byMeasure"===n.getValue(e,"color.mode")||l(e))&&false===n.getValue(e,"color.autoMinMax")},invalid:function t(e){if("minMax"===n.getValue(e,"color.minMax"))return n.getValue(e,"color.measureMin")>=n.getValue(e,"color.measureMax");return false}}}};var T=k(o,"showLegend");this.legend={show:T,showTitle:{show:function t(e){return n.getValue(e,"legend.show")&&T(e)&&!c(e)}},dock:{show:function t(e){return n.getValue(e,"legend.show")&&T(e)}}}};return{getLogicFor:function t(e,n){return new T(e,n)}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(492)],s=function(t,e){var n={dimension:"dimension",measure:"measure",temporal:"temporal"};function i(t,e){e&&t.map(function(t){var n=void 0;var i=void 0;var s=void 0;var o=e._getFields(t.qName,t.qSrcTables);if(o.length>0){n=e.getClassifications(t.qName,t.qSrcTables);i=e.getDataTypes(t.qName,t.qSrcTables);s=e.getDefaultAggregation(t.qName,t.qSrcTables)}t["defaultAggregation"]=s;t["classifications"]=n;t["dataTypes"]=i})}function s(t){if(t&&t.length>0){var n=t[0];return e.ClassificationHelper.isDimension(n)}return false}function o(t){if(t&&t.length>0){var n=t[0];return e.ClassificationHelper.isMeasure(n)}return false}function r(e){return t.escapeField(e)}function a(e,n){if("countdistinct"===n.toLowerCase())return"Count(distinct "+t.escapeField(e)+")";return n+"("+t.escapeField(e)+")"}function l(t){if(t)return t.replace(/=|\[|\]/g,"").toLowerCase();return t}function c(t){if(t)return t.replace(/^=/,"");return t}var u={Constants:n,isDimension:s,isMeasure:o,getDimensionExpression:r,getMeasureExpression:a,normalizeExpression:l,addClassificationDataToFields:i,convertEvaluationExpressionToLabel:c};return u}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={SYMBOLS:{FUNCTION:{LEFT:"(",RIGHT:")"},FIELD:{LEFT:"[",RIGHT:"]"},STRING:{LEFT:"'",RIGHT:"'"}},OPERATORS:{SINGLES:["=","+","-","*","/","<",">","&"],MULTIPLES:["<=",">=","<>",">>","<<"],WORDS:["precedes","follows","bitnot","bitand","bitor","bitxor","not","and","or","xor","like"]},COMMON_FUNCTIONS:["sum","count","avg","min","max"],FALLBACK_FUNCTION:"count",QUALIFIERS:["total","distinct","nodistinct"]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(90),n(447),n(125),n(101),n(156),n(91),n(195),n(204),n(160),n(624)],s=function(t,e,n,i,s,r,a,l,c,u){var d,p,h,f,g,v,m=Math.pow(2,53)-1;function b(t,e,n){e.hasOwnProperty(t)&&(n[t]=e[t])}function y(t,e,n,i){e.hasOwnProperty(t)?n[t]=e[t]:n[t]=i}function x(e,n){var s=t.extend(true,{},n,e);i.getValue(s,"qOtherTotalSpec.qOtherCounted")||i.setValue(s,"qOtherTotalSpec.qOtherCounted",{qv:"10"});i.getValue(s,"qOtherTotalSpec.qOtherLimit")||i.setValue(s,"qOtherTotalSpec.qOtherLimit",{qv:"0"});s.hasOwnProperty("othersLabel")||(s.othersLabel=r.get("properties.dimensionLimits.others"));return s}function q(e,n){return t.extend(true,{},n,e)}function S(t){return-1!==["qMetaDef","descriptionExpression","labelExpression"].indexOf(t)}d={exportProperties:function s(o,r){var a=new e,l=o.qProperty,c=r?i.getValue(l,r).qHyperCubeDef:l.qHyperCubeDef,u=a.data[0],d,p,h;c.qInterColumnSortOrder||(c.qInterColumnSortOrder=[]);for(d=0;d<c.qDimensions.length;++d)u.dimensions.push(c.qDimensions[d]);if(c.qLayoutExclude&&c.qLayoutExclude.qHyperCubeDef&&c.qLayoutExclude.qHyperCubeDef.qDimensions)for(d=0;d<c.qLayoutExclude.qHyperCubeDef.qDimensions.length;++d)u.excludedDimensions.push(c.qLayoutExclude.qHyperCubeDef.qDimensions[d]);for(d=0;d<c.qMeasures.length;++d)u.measures.push(c.qMeasures[d]);if(c.qLayoutExclude&&c.qLayoutExclude.qHyperCubeDef&&c.qLayoutExclude.qHyperCubeDef.qMeasures)for(d=0;d<c.qLayoutExclude.qHyperCubeDef.qMeasures.length;++d)u.excludedMeasures.push(c.qLayoutExclude.qHyperCubeDef.qMeasures[d]);u.interColumnSortOrder=c.qInterColumnSortOrder.concat();if(c.qLayoutExclude&&c.qLayoutExclude.qHyperCubeDef&&c.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder){var f=c.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.concat();n.isOrderedSubset(f,u.interColumnSortOrder)&&(u.interColumnSortOrder=f)}delete c.qLayoutExclude;for(p in l)a.properties[p]=l[p];if(r){a.properties.qHyperCubeDef=i.getValue(l,r).qHyperCubeDef;delete i.getValue(l,r).qHyperCubeDef}l.qLayoutExclude||(l.qLayoutExclude={});if(l.qLayoutExclude.disabled){for(p in l.qLayoutExclude.disabled){h=p;a.properties.hasOwnProperty(h)||(a.properties[h]=l.qLayoutExclude.disabled[p])}delete l.qLayoutExclude.disabled}if(l.qLayoutExclude.changed){I(l);delete l.qLayoutExclude.changed}l.qLayoutExclude.quarantine&&!t.isEmpty(l.qLayoutExclude.quarantine)||delete l.qLayoutExclude;return a},importProperties:function e(i,o,r,a){var l={qChildren:[]},c={},u=i.data[0],d,p,h,f,g={layout:{templateId:o.templateId}};r.mapProperties(g);var v=r.getDefaultDimensionProperties();var C=r.getDefaultMeasureProperties();var I=r.data&&r.data.measures;I||(I=r.definition&&r.definition.items&&r.definition.items.measures||{max:0});var _="function"===typeof I.max?I.max(u.dimensions.length):Number.isNaN(+I.max)?m:I.max;var D="function"===typeof I.min?I.min(u.dimensions.length):Number.isNaN(+I.min)?0:I.min;var k=r.data&&r.data.dimensions;k||(k=r.definition&&r.definition.items&&r.definition.items.dimensions||{max:0});var T="function"===typeof k.max?k.max(_):Number.isNaN(+k.max)?m:k.max;var E="function"===typeof k.min?k.min(D):Number.isNaN(+k.min)?0:k.min;c.qLayoutExclude||(c.qLayoutExclude={});c.qLayoutExclude.disabled={};c.qLayoutExclude.quarantine={};for(p in i.properties)"qLayoutExclude"===p?i.properties[p].quarantine&&(c.qLayoutExclude.quarantine=t.extend(true,{},i.properties[p].quarantine)):"qHyperCubeDef"===p&&a||(o.hasOwnProperty(p)||S(p)?c[p]=i.properties[p]:c.qLayoutExclude.disabled[p]=i.properties[p]);if(a&&i.properties.qHyperCubeDef){c[a]=c[a]||{};c[a].qHyperCubeDef=i.properties.qHyperCubeDef}c=t.extend(true,{},o,c);var A=a?o[a].qHyperCubeDef:o.qHyperCubeDef;var L=a?c[a].qHyperCubeDef:c.qHyperCubeDef;L.qDimensions.length=0;L.qMeasures.length=0;if(u.dimensions.length>T&&T>0||u.measures.length>_&&_>0||u.excludedDimensions.length&&u.dimensions.length+u.excludedDimensions.length>E||u.excludedMeasures.length&&u.measures.length+u.excludedMeasures.length>D||!_&&u.measures.length||!T&&u.dimensions.length){L.qLayoutExclude||(L.qLayoutExclude={});L.qLayoutExclude.qHyperCubeDef||(L.qLayoutExclude.qHyperCubeDef={});(u.dimensions.length>T&&T>0||u.excludedDimensions&&u.excludedDimensions.length&&u.dimensions.length+u.excludedDimensions.length>E)&&(L.qLayoutExclude.qHyperCubeDef.qDimensions||(L.qLayoutExclude.qHyperCubeDef.qDimensions=[]));(u.measures.length>_&&_>0||u.excludedMeasures&&u.excludedMeasures.length&&u.measures.length+u.excludedMeasures.length>D)&&(L.qLayoutExclude.qHyperCubeDef.qMeasures||(L.qLayoutExclude.qHyperCubeDef.qMeasures=[]));!_&&u.measures.length&&(L.qLayoutExclude.qHyperCubeDef.qMeasures||(L.qLayoutExclude.qHyperCubeDef.qMeasures=[]));!T&&u.dimensions.length&&(L.qLayoutExclude.qHyperCubeDef.qDimensions||(L.qLayoutExclude.qHyperCubeDef.qDimensions=[]))}if(T>0)for(h=0;h<u.dimensions.length;++h)L.qDimensions.length<T?L.qDimensions.push(x(u.dimensions[h],v)):L.qLayoutExclude.qHyperCubeDef.qDimensions.push(x(u.dimensions[h],v));else if(u.dimensions.length)for(h=0;h<u.dimensions.length;++h)L.qLayoutExclude.qHyperCubeDef.qDimensions.push(x(u.dimensions[h],v));if(u.excludedDimensions.length)for(h=0;h<u.excludedDimensions.length;++h)L.qDimensions.length<E?L.qDimensions.push(x(u.excludedDimensions[h],v)):L.qLayoutExclude.qHyperCubeDef.qDimensions.push(x(u.excludedDimensions[h],v));if(_>0)for(h=0;h<u.measures.length;++h)L.qMeasures.length<_?L.qMeasures.push(q(u.measures[h],C)):L.qLayoutExclude.qHyperCubeDef.qMeasures.push(q(u.measures[h],C));else if(u.measures.length)for(h=0;h<u.measures.length;++h)L.qLayoutExclude.qHyperCubeDef.qMeasures.push(q(u.measures[h],C));if(u.excludedMeasures.length)for(h=0;h<u.excludedMeasures.length;++h)L.qMeasures.length<D?L.qMeasures.push(q(u.excludedMeasures[h],C)):L.qLayoutExclude.qHyperCubeDef.qMeasures.push(q(u.excludedMeasures[h],C));f=L.qDimensions.length+L.qMeasures.length;L.qInterColumnSortOrder=u.interColumnSortOrder.concat();h=L.qInterColumnSortOrder.length;if(h!==f){L.qLayoutExclude&&(L.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder=u.interColumnSortOrder.concat());while(h!==f)if(h<f){n.indexAdded(L.qInterColumnSortOrder,h);++h}else{--h;n.indexRemoved(L.qInterColumnSortOrder,h)}}d=s.mapProperties(s.mapDefinition(r.definition,r.type),{},r.type);var M=a?d[a]&&d[a].qHyperCubeDef:d.qHyperCubeDef;["qAlwaysFullyExpanded","qSuppressMissing","qSuppressZero"].filter(function(t){return M&&"undefined"===typeof M[t]}).forEach(function(t){b(t,A,L)});b("qMaxStackedCells",A,L);b("qNoOfLeftDims",A,L);y("qInitialDataFetch",A,L,[{qTop:0,qLeft:0,qWidth:0,qHeight:0}]);y("qMode",A,L,"S");y("qReductionMode",A,L,"N");y("qSortbyYValue",A,L);y("qIndentMode",A,L);y("qShowTotalsAbove",A,L);w(c,i,o);l.qProperty=c;return l}};p={exportProperties:function t(n){var i=new e,s=n.qProperty,o=s.qListObjectDef,r=i.data[0],a,l,c;(o.qLibraryId||o.qDef&&o.qDef.qFieldDefs[0])&&r.dimensions.push({qLibraryId:o.qLibraryId,qDef:o.qDef,title:o.title,qOtherTotalSpec:{}});if(o.qLayoutExclude&&o.qLayoutExclude.qHyperCubeDef&&o.qLayoutExclude.qHyperCubeDef.qDimensions)for(a=0;a<o.qLayoutExclude.qHyperCubeDef.qDimensions.length;++a)r.excludedDimensions.push(o.qLayoutExclude.qHyperCubeDef.qDimensions[a]);if(o.qLayoutExclude&&o.qLayoutExclude.qHyperCubeDef&&o.qLayoutExclude.qHyperCubeDef.qMeasures)for(a=0;a<o.qLayoutExclude.qHyperCubeDef.qMeasures.length;++a)r.excludedMeasures.push(o.qLayoutExclude.qHyperCubeDef.qMeasures[a]);if(o.qLayoutExclude&&o.qLayoutExclude.qHyperCubeDef&&o.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder)for(a=0;a<o.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.length;++a)r.interColumnSortOrder.push(o.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder[a]);delete o.qLayoutExclude;for(l in s)i.properties[l]=s[l];if(s.qLayoutExclude&&s.qLayoutExclude._disabled){for(l in s.qLayoutExclude._disabled){c="_"===l.substr(0,1)?l.substring(1):l;i.properties.hasOwnProperty(c)||(i.properties[c]=s.qLayoutExclude.disabled[l])}delete s.qLayoutExclude.disabled}if(r.dimensions.length>0)for(a=0;a<r.dimensions[0].qDef.qSortCriterias.length;++a)r.dimensions[0].qDef.qSortCriterias[a].qSortByFrequency=0;return i},importProperties:function e(n,i){var s={qChildren:[]},o={},r=n.data[0],a=1,l,c;o.qLayoutExclude||(o.qLayoutExclude={});o.qLayoutExclude.disabled={};for(l in n.properties)"qLayoutExclude"===l?n.properties[l].quarantine&&(o.qLayoutExclude.quarantine=t.extend(true,{},n.properties[l].quarantine)):i.hasOwnProperty(l)||S(l)?o[l]=n.properties[l]:o.qLayoutExclude.disabled[l]=n.properties[l];o=t.extend(true,{},i,o);o.qListObjectDef.qLayoutExclude||(o.qListObjectDef.qLayoutExclude={});o.qListObjectDef.qLayoutExclude.qHyperCubeDef||(o.qListObjectDef.qLayoutExclude.qHyperCubeDef={});o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qDimensions||(o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qDimensions=[]);o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qMeasures||(o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qMeasures=[]);o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder||(o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder=[]);for(c=0;c<r.dimensions.length;++c)if(c<a){o.qListObjectDef.qDef=r.dimensions[c].qDef;o.qListObjectDef.qLibraryId=r.dimensions[c].qLibraryId}else o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qDimensions.push(r.dimensions[c]);for(c=0;c<r.excludedDimensions.length;++c)o.qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions.push(x(r.excludedDimensions[c]));for(c=0;c<r.measures.length;++c)o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qMeasures.push(r.measures[c]);for(c=0;c<r.excludedMeasures.length;++c)o.qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures.push(r.excludedMeasures[c]);for(c=0;c<r.interColumnSortOrder.length;++c)o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.push(r.interColumnSortOrder[c]);o.qListObjectDef.qInitialDataFetch=i.qListObjectDef.qInitialDataFetch;w(o,n,i);s.qProperty=o;return s}};h={importProperties:function t(e,n,s){var o=this.hypercube.importProperties(e,n,s),r=i.getValue(o,"qProperty.visualization"),c=i.getValue(o,"qProperty.qHyperCubeDef.qDimensions",[]),u=i.getValue(o,"qProperty.qHyperCubeDef.qMeasures",[]),d=i.getValue(o,"qProperty.qHyperCubeDef.qMeasures.0.qAttributeExpressions",[]),p=i.getValue(o,"qProperty.color.colorExpression",""),h=i.getValue(o,"qProperty.color.mode",""),f=i.getValue(o,"qProperty.color.auto",""),g=i.getValue(o,"qProperty.color.persistent",false);var v=l.canColorBy(o.qProperty,r);if(v[h])if(f)a.colorByUpdater(o.qProperty,"qHyperCubeDef.");else if("byDimension"!==h&&"byMeasure"!==h||!c.length){if("byExpression"===h&&u.length){d.splice(0,0,{qExpression:p,id:"colorByExpression"});i.setValue(o,"qProperty.qHyperCubeDef.qMeasures.0.qAttributeExpressions",d)}}else a.colorByUpdater(o.qProperty,"qHyperCubeDef.");else{i.setValue(o,"qProperty.color.mode","primary");i.setValue(o,"qProperty.color.auto",true);a.colorByUpdater(o.qProperty,"qHyperCubeDef.")}c.length>1&&!g&&C("color.persistent",true,o);c.forEach(function(t){"qTotalMode"in t.qOtherTotalSpec&&delete t.qOtherTotalSpec.qTotalMode});return o},exportProperties:function t(e){var n=this.hypercube.exportProperties(e);var i=n.data[0];c.moveByIdFromGroup(i.dimensions.concat(i.excludedDimensions),[],"qAttributeDimensions",c.IDMAP.COLOR_BY_ALTERNATIVE);c.moveByIdFromGroup(i.dimensions.concat(i.excludedDimensions),[],"qAttributeExpressions",c.IDMAP.COLOR_BY_ALTERNATIVE);c.moveByIdFromGroup(i.measures.concat(i.excludedMeasures),[],"qAttributeExpressions",c.IDMAP.COLOR_BY_EXPRESSION);return n}};f={importProperties:function e(n,i,s){var o=this.colorChart.importProperties.apply(this,[n,i,s]),r=o.qProperty,a,l;i.measureAxis&&"undefined"===typeof i.measureAxis.autoMinMax?D(r,"unsupportedAutoMinMax")||t.extend(r.measureAxis,i.measureAxis):D(r,"supportedAutoMinMax")||t.extend(r.measureAxis,i.measureAxis);if(n.properties.measureAxes&&!i.measureAxes&&i.measureAxis&&"undefined"!==typeof i.measureAxis.autoMinMax){var c=[];r.qHyperCubeDef.qMeasures.length>0&&r.qHyperCubeDef.qMeasures.forEach(function(t){if(t.qDef.series){c[t.qDef.series.axis]||(c[t.qDef.series.axis]={axis:t.qDef.series.axis,type:{line:0,marker:0,bar:0,total:0}});["bar","marker","line"].contains(t.qDef.series.type)&&c[t.qDef.series.axis].type[t.qDef.series.type]++;c[t.qDef.series.axis].type.total++}});if(c.length){var u="barchart"===i.visualization?"bar":"linechart"===i.visualization?"line":"";u&&(a=c.filter(function(t){return t.type[u]>0}).sort(function(t,e){return e.type[u]-t.type[u]}));a&&a.length||(a=c.sort(function(t,e){return e.type.total-t.type.total}));a&&a[0]&&t.extend(r.measureAxis,n.properties.measureAxes[a[0].axis])}else t.extend(r.measureAxis,n.properties.measureAxes[0])}if(r.qHyperCubeDef.qDimensions.length>1){l=r.qHyperCubeDef.qInterColumnSortOrder.indexOf(0);if(0!==l){a=r.qHyperCubeDef.qInterColumnSortOrder[0];r.qHyperCubeDef.qInterColumnSortOrder[0]=0;r.qHyperCubeDef.qInterColumnSortOrder[l]=a}}return o},exportProperties:function t(e){var n=this.colorChart.exportProperties.apply(this,[e]);if("gauge"===n.properties.visualization){_("measureAxis.min",n,"unsupportedAutoMinMax");_("measureAxis.max",n,"unsupportedAutoMinMax")}else{_("measureAxis.min",n,"supportedAutoMinMax");_("measureAxis.max",n,"supportedAutoMinMax")}return n}};g={importProperties:function t(e,n,s){var o,r=this.hypercube.importProperties(e,n,s),a=i.getValue(r,"qProperty.qHyperCubeDef.qDimensions",[]),l=a.length,c=i.getValue(r,"qProperty.qHyperCubeDef.qMeasures",[]).length,u=i.getValue(r,"qProperty.qHyperCubeDef.qInterColumnSortOrder",[]),d,p=true;l+c===u.length&&i.setValue(r,"qProperty.qLayoutExclude.quarantine.interColSortOrder",u.concat());var h=i.getValue(r,"qProperty.qLayoutExclude.quarantine.pivotInterColSortOrder");if(h){u=h;d=h.slice();i.setValue(r,"qProperty.qHyperCubeDef.qInterColumnSortOrder",u);delete r.qProperty.qLayoutExclude.quarantine.pivotInterColSortOrder}else u.length=0;var f=u.indexOf(-1)>-1;var g=l+f;if(g>u.length)for(o=u.length;o<g;o++)u.indexOf(o)<0&&u.push(o-f);for(o=u.length-1;o>=0;o--)u[o]>=l&&u.splice(o,1);c>1&&u.indexOf(-1)<0?u.push(-1):c<2&&u.indexOf(-1)>-1&&u.splice(u.indexOf(-1),1);l>0&&-1===i.getValue(r,"qProperty.qHyperCubeDef.qNoOfLeftDims",-1)&&i.setValue(r,"qProperty.qHyperCubeDef.qNoOfLeftDims",l);if(d&&u&&d.length===u.length){for(o=0;o<d.length;o++)if(d[o]!==u[o]){p=false;break}p&&D(r.qProperty,"noOfLeftDims")}a.forEach(function(t){"qTotalMode"in t.qOtherTotalSpec||(t.qOtherTotalSpec.qTotalMode="TOTAL_EXPR")});return r},exportProperties:function t(e){var n=i.getValue(e,"qProperty.qHyperCubeDef.qInterColumnSortOrder",[]);var s=n.slice(0);var o=n.indexOf(-1);o>-1&&n.splice(o,1);var r=this.hypercube.exportProperties(e),a=r.properties.qHyperCubeDef,l=a.qDimensions.length,c=a.qMeasures.length,u=a.qInterColumnSortOrder;i.setValue(r,"properties.qLayoutExclude.quarantine.pivotInterColSortOrder",s);_("qHyperCubeDef.qNoOfLeftDims",r,"noOfLeftDims");delete r.properties.qHyperCubeDef.qNoOfLeftDims;var d=i.getValue(r,"properties.qLayoutExclude.quarantine.interColSortOrder");if(d){u=d;i.setValue(r,"properties.qHyperCubeDef.qInterColumnSortOrder",u);i.setValue(r,"data.0.interColumnSortOrder",u);delete r.properties.qLayoutExclude.quarantine.interColSortOrder}for(var p=u.length;p<l+c;p++)u.length<=p&&u.push(p);return r}};function w(t,e,n){"masterobject"===e.properties.qInfo.qType?t.qInfo.qType="masterobject":t.qInfo.qType=n.qInfo.qType;t.visualization=n.visualization}function C(t,e,n){var s=n.qProperty,r=n.qProperty.qLayoutExclude;if(!/boolean|number|string/.test(o(e))){i.setValue(s,t,e);return}if(r){r.changed||(r.changed={});r.changed[t]={from:i.getValue(s,t),to:e}}i.setValue(s,t,e)}function I(t){for(var e in t.qLayoutExclude.changed)t.qLayoutExclude.changed[e].to===i.getValue(t,e)&&i.setValue(t,e,t.qLayoutExclude.changed[e].from)}function _(t,e,n){var s=e.properties,r=e.properties.qLayoutExclude,a=i.getValue(s,t),l,c;if(!/boolean|number|string/.test(o(a)))try{l=JSON.stringify(a);c=l.match(/:\{/g);c=c?c.length:0;if(c>2)return;a=JSON.parse(l)}catch(t){return}if(!r){e.properties.qLayoutExclude={quarantine:{}};r=e.properties.qLayoutExclude}r.quarantine||(r.quarantine={});r.quarantine[n]||(r.quarantine[n]={});r.quarantine[n][t]=a}function D(t,e){var n,s=t.qLayoutExclude?t.qLayoutExclude.quarantine:{};if(!s[e])return false;s=s[e];for(n in s)i.setValue(t,n,s[n]);delete t.qLayoutExclude.quarantine[e];return true}v={importProperties:function e(n,i){var s={qChildren:[]},o={},r;o.qLayoutExclude||(o.qLayoutExclude={});o.qLayoutExclude.disabled={};for(r in n.properties){if("qLayoutExclude"===r)continue;i.hasOwnProperty(r)||S(r)?o[r]=n.properties[r]:o.qLayoutExclude.disabled[r]=n.properties[r]}o=t.extend(true,{},i,o);w(o,n,i);s.qProperty=o;return s},exportProperties:function t(n){var i=new e,s=n.qProperty,o,r;for(o in s)i.properties[o]=s[o];s.qLayoutExclude||(s.qLayoutExclude={});if(s.qLayoutExclude.disabled)for(o in s.qLayoutExclude.disabled){r=o;i.properties.hasOwnProperty(r)||(i.properties[r]=s.qLayoutExclude.disabled[o])}delete s.qLayoutExclude;return i}};return{importCommonProperties:w,isMasterItemProp:S,hypercube:d,listbox:p,axisChart:f,colorChart:h,pivotChart:g,other:v,changeProperty:C,quarantineProperty:_,unquarantineObject:D,quarantineConditionalShow:u.quarantine,unquarantineConditionalShow:u.unquarantine}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(102),n(92)],s=function(t,e){var n={Expression:0,NumberOrExpression:1};var i=e.extend("ExpressionValidator",{init:function e(i,s){this.currentExpr=null;this.nextExpr=null;this.hasOutstandingCall=false;this.app=i;this.mode=s||n.Expression;t.create(this,"Update")},onResponse:function t(e){var n,i,s,o,r;this.hasOutstandingCall=false;if(this.nextExpr){n=this.nextExpr;i=this.nextLabels;this.nextExpr=null;this.nextLabels=null;this.callEngine(n,i)}else{n=this.currentExpr;s=!e.qErrorMsg&&0===e.qBadFieldNames.length;for(o=0;o<e.qBadFieldNames.length;o++){r=e.qBadFieldNames[o];r.name=n.substr(r.qFrom||0,r.qCount)}this.Update.emit({valid:s,data:{error:e.qErrorMsg,bad:e.qBadFieldNames}})}},callEngine:function t(e,i){var s=this;if(this.hasOutstandingCall)throw new Error("Invalid state");this.currentExpr=e;this.hasOutstandingCall=true;var o;o=this.mode===n.NumberOrExpression?this.app.checkNumberOrExpression(e):this.app.checkExpression(e,i||[]);o.then(function(t){s.onResponse(t)},function(){s.onResponse({qErrorMsg:"Error",qBadFieldNames:[]})})},validate:function t(e,n){if(this.hasOutstandingCall){this.nextExpr=e;this.nextLabels=n}else this.callEngine(e,n)}});return{ExpressionValidator:i,Modes:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89),n(90)],s=function(t,e,n){function i(n){return n?e.resolve(n.enigmaModel):t.getApp()}var s={};s.create=function(t,e){return i(t).then(function(t){var i={qInfo:{qId:n.generateId(),qType:"odagapplink"},qMetaDef:{odagLinkRef:"",timestamp:Date.now()}};return t.createObject(n.extend(true,i,e))})};s.remove=function(t,e){return i(t).then(function(t){return t.destroyObject(e)})};s.get=function(t,e){return i(t).then(function(t){return t.getObject(e)})};s.getList=function(t){return i(t).then(function(t){return t.getODAGAppLinkObject()})};return s}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(160),n(101),n(385)],s=function(t,e,n){var i=["scatterplot","map"];var s=["scatterplot","map","barchart","linechart","combochart","piechart","treemap","distributionplot"];return{baseColor:{isSupported:function t(e){return e&&e.length&&-1===i.indexOf(e)}},colorBy:{isSupported:function t(e){return s.contains(e)}},colorByUpdater:function i(s,r){var a=e.getValue(s,"color.mode");var d=e.getValue(s,"color.auto");var p=e.getValue(s,r+"qDimensions",[]);var h=e.getValue(s,r+"qMeasures",[]);var f=e.getValue(s,r+"qLayoutExclude.qHyperCubeDef.qDimensions",[]);var g,v,m,b;var y=e.getValue(s,"visualization");if(d)o(p,f);else if(!d&&"byDimension"===a&&p.length){g=e.getValue(s,"color.byDimDef");g&&u(s,g.label);if(g&&g.activeDimensionIndex>-1){g.activeDimensionIndex=Math.min(g.activeDimensionIndex,p.length-1);v=p[g.activeDimensionIndex];b=n.getColorByDefinition("dimension",false,v);b.activeDimensionIndex=g.activeDimensionIndex;l(s,b)}else if(!g||!g.key){v=p[p.length-1];var x=r.split(".");2===p.length&&"map"===y&&"point"===s.layers[Number(x[1])].type&&(v=p[0]);m=t.getById(v.qAttributeDimensions,t.IDMAP.COLOR_BY_ALTERNATIVE);l(s,n.getColorByDefinition("dimension",!!m,m||v));if(m)return}c(s,true,p,f,h,e.getValue(s,"color.byDimDef.label"))}else if(d||"byMeasure"!==a||!p.length||"map"!==y&&!h.length){"byMultiple"===a&&h.length<2&&e.setValue(s,"color.mode","primary");o(p,f)}else{g=e.getValue(s,"color.byMeasureDef");g&&u(s,g.label);if(g&&g.activeMeasureIndex>-1){g.activeMeasureIndex=Math.min(g.activeMeasureIndex,h.length-1);if(g.activeMeasureIndex>-1){var q=h[g.activeMeasureIndex];b=n.getColorByDefinition("measure",false,q);b.activeMeasureIndex=g.activeMeasureIndex;l(s,b)}}else if((!g||!g.key)&&h.length){var S=h[0];v=p[p.length-1];m=t.getById(v.qAttributeExpressions,t.IDMAP.COLOR_BY_ALTERNATIVE);l(s,n.getColorByDefinition("measure",!!m,m||S));if(m)return}c(s,false,p,f,h,e.getValue(s,"color.byMeasureDef.label"))}},setColorByPropertyDef:l,resolveColorByPropertyDef:c,clearColorByItem:o};function o(e,n){e.forEach(function(e){r(e,t.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");r(e,t.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")});n.forEach(function(e){r(e,t.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");r(e,t.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")})}function r(e,n,i){if(e[i]){var s=t.getIndexById(e[i],n);s>=0&&e[i].splice(s,1)}else e[i]=[]}function a(t){return t.split(" ").length>1&&"="!==t[0]&&"["!==t[0]?"["+t+"]":t}function l(t,e,n,i){var s=n?"expression":e.type,o=t.color.mode,r=e.label||e.name||"";u(t,r);switch(s){case"field":o="byDimension";t.color.byDimDef={label:e.label||a(e.name),key:a(e.name),type:"expression",activeDimensionIndex:e.activeDimensionIndex};break;case"expression":o="byMeasure";t.color.byMeasureDef={label:n||e.label||e.name,key:n||e.name,type:"expression",activeMeasureIndex:e.activeMeasureIndex};break;case"dimension":o="byDimension";t.color.byDimDef={label:e.name,key:e.id,type:"libraryItem",activeDimensionIndex:e.activeDimensionIndex};break;case"measure":o="byMeasure";t.color.byMeasureDef={label:e.name,key:e.id,type:"libraryItem",activeMeasureIndex:e.activeMeasureIndex};break}if(!i){t.color.auto=false;t.color.mode=o}}function c(n,i,s,r,a,l){o(s,r);var c=s[s.length-1];if(c){var u=i?e.getValue(n,"color.byDimDef"):e.getValue(n,"color.byMeasureDef");if(u){var d=t.create(t.IDMAP.COLOR_BY_ALTERNATIVE);switch(u.type){case"expression":d.label=l||u.label;i?d.qDef=u.key:d.qExpression=u.key;d.matchMeasure=u.activeMeasureIndex;d.label&&"="===d.label.charAt(0)&&(d.labelExpRef="color.altLabel");break;case"libraryItem":if(!i){var p=-1;a.forEach(function(t,e){u.key===t.qLibraryId&&(p=e)});d.matchMeasure=p}d.qLibraryId=u.key;d.colorMapRef=u.key;break}if(i){d.qSortBy={qSortByAscii:1};c.qAttributeDimensions.push(d)}else c.qAttributeExpressions.push(d)}}}function u(t,e){if(!e)return;var n="="===e.charAt(0);t.color.altLabel=n?{qStringExpression:{qExpr:e.substr(1)}}:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){return{MEASURE:"measure",DIMENSION:"dimension",FIELD:"field",PUBSUB_TOPIC:"/cao/light-editing/swap"}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(92),n(89),n(497),n(622)],s=function(t,e,n,i,s){var o;o=e.extend("BackendApi",{init:function t(e,n,o){this.model=e;this.localeInfo=e.app&&e.app.layout?e.app.layout.qLocaleInfo:{};this.path=n;n&&(this.dataPath=n.slice(1,-3));this.cacheCube=new i(e,"qDataPages",this.path,o);this.backendStackThrottle=new s(e,"qDataPages",this.path)},setPath:function t(e){this.path=e;e&&(this.dataPath=e.slice(1,-3));this.cacheCube.setPath(e);this.backendStackThrottle.setPath(e)},setCacheOptions:function t(e){this.cacheCube.setOptions(e)},updateCache:function t(){},applyPatches:function t(e,n){return this.model.applyPatches(e,n)},clearSoftProperties:function t(){var e=this;return this.model.getLayout().then(function(t){return t.qHasSoftPatches?e.model.clearSoftPatches():n.resolve()})},beginSelections:function t(){return this.model.app.switchModalSelection(this.model,this.path)},endSelections:function t(e){return this.model.app.switchModalSelection(null,null,e)},clearSelections:function t(e){e=e||0;return this.model.clearSelections(this.path,[e])},getDimensionInfos:function t(){if(!this.model.layout[this.dataPath].qDimensionInfo)return[];if(Array.isArray(this.model.layout[this.dataPath].qDimensionInfo))return this.model.layout[this.dataPath].qDimensionInfo;return[this.model.layout[this.dataPath].qDimensionInfo]},getMeasureInfos:function t(){return this.model.layout[this.dataPath].qMeasureInfo},getRowCount:function t(){return this.model.layout[this.dataPath].qSize.qcy},eachDataRow:function e(n){var i=this.model.layout[this.dataPath],s=true;i&&t.each(i.qDataPages,function(e,i){t.each(i.qMatrix,function(t,e){s=n(i.qArea.qTop+t,e);return s});return s})},drillUp:function t(e,n){return this.model.drillUp(this.path,e,n)},hasSelections:function t(){var e=this.getDimensionInfos();for(var n=0;n<e.length;++n)if(e[n].qStateCounts.qSelected>0)return true;return false},inSelections:function t(){return this.model.layout.qSelectionInfo&&this.model.layout.qSelectionInfo.qInSelections},destroy:function t(){this.cacheCube.destroy();this.backendStackThrottle.destroy()},getSize:function t(){return this.model.layout[this.dataPath].qSize}});return o}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(92)],s=function(t){var e;e=t.extend({init:function t(){this._elements=[[1,0,0],[0,1,0],[0,0,1]];this._stack=[]},clone:function t(){var n=new e;return n.multiply(this._elements)},set:function t(e){this._elements=e;return this},save:function t(){this._stack.push(this.elements);return this},restore:function t(){this._stack.length&&(this._elements=this._stack.pop());return this},add:function t(e){var n,i;for(n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)this._elements[n][i]+=e;return this},translate:function t(e,n){this.multiply([[1,0,e],[0,1,n],[0,0,1]]);return this},rotate:function t(e){var n=Math.cos(-e),i=Math.sin(-e);this.multiply([[n,i,0],[-i,n,0],[0,0,1]]);return this},skew:function t(e,n){var i=Math.tan(e),s=Math.tan(n);this.multiply([[1,i,0],[s,1,0],[0,0,1]]);return this},multiply:function t(n){var i,s,o,r;n instanceof e&&(n=n._elements);if(Array.isArray(n)){o=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<this._elements.length;i++)for(s=0;s<this._elements[i].length;s++)for(r=0;r<3;r++)o[i][s]+=this._elements[i][r]*n[r][s];this._elements=o}else for(i=0;i<this._elements.length;i++)for(s=0;s<this._elements[i].length;s++)this._elements[i][s]*=n;return this},scale:function t(e,n){(arguments.length<2||"undefined"===typeof n)&&(n=e);this.multiply([[e,0,0],[0,n,0],[0,0,1]]);return this},determinant:function t(){var e=this._elements[0][0],n=this._elements[0][1],i=this._elements[0][2],s=this._elements[1][0],o=this._elements[1][1],r=this._elements[1][2],a=this._elements[2][0],l=this._elements[2][1],c=this._elements[2][2],u=0;u=e*o*c+n*r*a+i*s*l-i*o*a-n*s*c-e*r*l;return u},invert:function t(){var e=this.determinant(),n=this._elements[0][0],i=this._elements[0][1],s=this._elements[0][2],o=this._elements[1][0],r=this._elements[1][1],a=this._elements[1][2],l=this._elements[2][0],c=this._elements[2][1],u=this._elements[2][2];this._elements=[[r*u-a*c,s*c-i*u,i*a-s*r],[a*l-o*u,n*u-s*l,s*o-n*a],[o*c-r*l,l*i-n*c,n*r-i*o]];this.multiply(1/e);return this},transpose:function t(){var e=Object.create(this._elements);this._elements=[[e[0][0],e[1][0],e[2][0]],[e[0][1],e[1][1],e[2][1]],[e[0][2],e[1][2],e[2][2]]];return this},identity:function t(){this._elements=[[1,0,0],[0,1,0],[0,0,1]];return this},transformPoint:function t(e){var n=[e.x,e.y,1],i,s,o=this._elements,r=[0,0,0];for(i=0;i<this._elements.length;i++)for(s=0;s<this._elements[i].length;s++)r[i]+=n[s]*o[i][s];return{x:r[0],y:r[1]}},transformPoints:function t(e){var n,i,s,o,r,a=this._elements,l=[];for(o=0;o<e.length;o++){n=[e[o].x,e[o].y,1];r=[0,0,0];for(i=0;i<this._elements.length;i++)for(s=0;s<this._elements[i].length;s++)r[i]+=n[s]*a[i][s];l.push({x:r[0],y:r[1]})}return l},toString:function t(){var e="";this._elements.forEach(function(t,n,i){e+=t.join("\t")+(n<i.length?"\n":"")});return e},isIdentity:function t(){var e=this._elements;return 1===e[0][0]&&0===e[0][1]&&0===e[0][2]&&0===e[1][0]&&1===e[1][1]&&0===e[1][2]&&0===e[2][0]&&0===e[2][1]&&1===e[2][2]},identityIfClose:function t(e){var n=this._elements;Math.abs(n[0][0]-1)<e&&Math.abs(n[0][1])<e&&Math.abs(n[0][2])<e&&Math.abs(n[1][0])<e&&Math.abs(n[1][1]-1)<e&&Math.abs(n[1][2])<e&&Math.abs(n[2][0])<e&&Math.abs(n[2][1])<e&&Math.abs(n[2][2]-1)<e&&this.identity()}});Object.defineProperties(e.prototype,{elements:{get:function t(){var e=this._elements;return[[e[0][0],e[0][1],e[0][2]],[e[1][0],e[1][1],e[1][2]],[e[2][0],e[2][1],e[2][2]]]}}});return e}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(90),n(89),n(122),n(177),n(94),n(93),n(49),n(108),n(50)],s=function(t,e,n,i,s,o,r,a,l){function c(){var e=t.getParameterByName("app");var n=t.getParameterByName("sheet");var s=i.analysis(e);var o=s&&s.sheetId?s.sheetId:n;return{appId:e,sheetId:o}}function u(t){if(!a.inClient()||!r.getFlag("SSA_IN_EDIT")||l.isSmallDevice||t)return e.resolve("analysis");return o.getApp().then(function(t){return t.getLayout().then(function(t){var e=t&&t.permissions&&t.permissions.update;var n=e?s.States.edit:s.States.analysis;return s.getAllStateKeys()[n]})}).catch(function(){return e.resolve("analysis")})}function d(n,s){var o=i.analysis(t.getParameterByName("app"));if(a.inClient()&&o&&o.state&&!s)return e.resolve(o.state);return u(n)}function p(t,e,s,o){i.setSheet(t,e,s,o);n.goToSheet(t,e,o)}function h(e){var n=t.getParameterByName("app");var o=i.analysis(n).overlay;return o===s.getAllStateKeys()[e]}function f(){return r.getFlag("SSA_IN_EDIT")||s.state!==s.States.edit}function g(){return h(s.States.insight)}function v(){return h(s.States.selections)}function m(t,e,n){if(a.inClient()){var o=i.analysis(e).state;var r=s.getAllStateKeys()[n];o||u().then(function(n){p(t,n,e,r)});p(t,o,e,r)}}function b(t,e){if(a.inClient()){var n=i.analysis(e).state;n?p(t,n,e,null):u().then(function(n){p(t,n,e,null)})}}return{getCurrentSheetInfo:c,closeAnalysisOverlay:b,openAnalysisOverlay:m,getDefaultSheetViewState:u,getCurrentSheetViewState:d,shouldShowOverlay:f,isInInsightMode:g,isInSelectionsMode:v}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(104),n(398),n(11),n(200),n(89),n(159)],s=function(t,e,n,i,s,o,r){var a,l,c=window.devicePixelRatio||1,u=document.createElement("canvas"),d=u.getContext("2d"),p=document.createElement("span"),h=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1,f=c/h,g={},v=[],m=!r.supportDirAuto();p.innerText="Wj";function b(t,e){v.length>100&&delete g[v.shift()];v.push(t);g[t]=e}function y(t){if(t.font in g)return g[t.font];var e=1.5*t.measureText("m").width;b(t.font,e);return e}function x(t,e,n,i,s){var o=e.shape.points,r=o?o.length:0,a,l;t.beginPath();a=o[0];if(!a)return;t.moveTo(a.x,a.y);for(l=1;l<r;l+=1){a=o[l];t.lineTo(a.x,a.y)}s&&t.closePath();n&&t.fill();i&&t.stroke()}l={rect:function t(e,n,i,s){i&&e.fillRect(n.shape.x||0,n.shape.y||0,n.shape.width||0,n.shape.height||0);s&&e.strokeRect(n.shape.x||0,n.shape.y||0,n.shape.width||0,n.shape.height||0)},roundRect:function t(e,n,i,s){e.beginPath();e.moveTo(n.shape.x+n.shape.radius,n.shape.y);e.lineTo(n.shape.x+n.shape.width-n.shape.radius,n.shape.y);e.quadraticCurveTo(n.shape.x+n.shape.width,n.shape.y,n.shape.x+n.shape.width,n.shape.y+n.shape.radius);e.lineTo(n.shape.x+n.shape.width,n.shape.y+n.shape.height-n.shape.radius);e.quadraticCurveTo(n.shape.x+n.shape.width,n.shape.y+n.shape.height,n.shape.x+n.shape.width-n.shape.radius,n.shape.y+n.shape.height);e.lineTo(n.shape.x+n.shape.radius,n.shape.y+n.shape.height);e.quadraticCurveTo(n.shape.x,n.shape.y+n.shape.height,n.shape.x,n.shape.y+n.shape.height-n.shape.radius);e.lineTo(n.shape.x,n.shape.y+n.shape.radius);e.quadraticCurveTo(n.shape.x,n.shape.y,n.shape.x+n.shape.radius,n.shape.y);e.closePath();i&&e.fill();s&&e.stroke()},circle:function t(e,n,i,s){n.shape&&n.shape.r&&!n.shape.radius&&(n.shape.radius=n.shape.r);if(Number.isNaN(+n.shape.cx)||Number.isNaN(+n.shape.cy)||Number.isNaN(+n.shape.radius)||n.shape.radius<=0)return;var o=.551784;e.save();e.translate(n.shape.cx,n.shape.cy);e.scale(n.shape.radius,n.shape.radius);e.beginPath();e.moveTo(1,0);e.bezierCurveTo(1,-o,o,-1,0,-1);e.bezierCurveTo(-o,-1,-1,-o,-1,0);e.bezierCurveTo(-1,o,-o,1,0,1);e.bezierCurveTo(o,1,1,o,1,0);e.closePath();e.restore();i&&e.fill();s&&e.stroke()},line:function t(e,n,i,s){if(!s)return;e.beginPath();e.moveTo(n.shape.x1,n.shape.y1);e.lineTo(n.shape.x2,n.shape.y2);e.stroke()},polygon:function t(e,n,i,s){x(e,n,i,s,true)},polyline:function t(e,n,i,s){x(e,n,i,s)},polygons:function t(e,n,i,s){var t=n.shape.polygons,o=t?t.length:0,r,a,l,c,u,d;e.beginPath();for(u=0;u<o;u++){r=t[u];a=r.points;l=a?a.length:0;if(0===l)continue;c=a[0];if(!c)continue;e.moveTo(c.x,c.y);for(d=1;d<l;d+=1){c=a[d];e.lineTo(c.x,c.y)}}i&&e.fill();s&&e.stroke()},multipolygon:function t(e,n,i,s){var o=n.shape.geopolygons,r=o?o.length:0,a,l,c,u,d,p,h,f;e.beginPath();for(p=0;p<r;p++){a=o[p].getPolygons();l=a?a.length:0;for(h=0;h<l;h++){c=a[h].points;u=c?c.length:0;if(0===u)continue;d=c[0];if(!d)continue;e.moveTo(d.x,d.y);for(f=1;f<u;f+=1){d=c[f];e.lineTo(d.x,d.y)}}}i&&e.fill();s&&e.stroke()},arc:function t(e,n,i,s){var t=n.shape;e.beginPath();if(t.end-t.start===2*Math.PI){e.arc(t.cx,t.cy,t.radius,t.start+t.radianOffset,t.end+t.radianOffset,false);e.moveTo(t.cx+t.innerRadius*Math.cos(t.radianOffset+t.start),t.cy+t.innerRadius*Math.sin(t.radianOffset+t.start));e.arc(t.cx,t.cy,t.innerRadius,t.end+t.radianOffset,t.start+t.radianOffset,true)}else{e.arc(t.cx,t.cy,t.radius,t.start+t.radianOffset,t.end+t.radianOffset,false);if(!Number.isNaN(+t.innerRadius)&&t.innerRadius!==t.radius){e.lineTo(t.innerRadius*Math.cos(t.end+t.radianOffset)+t.cx,t.innerRadius*Math.sin(t.end+t.radianOffset)+t.cy);t.innerRadius>0&&e.arc(t.cx,t.cy,t.innerRadius,t.end+t.radianOffset,t.start+t.radianOffset,true);e.lineTo(t.radius*Math.cos(t.start+t.radianOffset)+t.cx,t.radius*Math.sin(t.start+t.radianOffset)+t.cy)}}e.closePath();i&&e.fill();s&&e.stroke()},text:function t(e,n){if(!n.shape||!n.shape.text||!n.fill)return;n.shape.font&&(e.font=n.shape.font);n.shape.align&&(e.textAlign=n.shape.align);n.shape.baseline&&(e.textBaseline=n.shape.baseline);C(e,n.shape)}};function q(t,e,n){var i,s=t?t.replace(/^\s*|\s*$/,"").split(" "):[],o=[],r,a,l=s[0];if(!l)return[];for(i=1;i<s.length;i++){r=l+" "+s[i];a=d.measureText(r).width;if(a>e&&n>o.length){o.push(l);l=s[i]}else l=r}o.length<n?o.push(l):o[Math.max(0,o.length-1)]?o[Math.max(0,o.length-1)]+=" "+l:o[Math.max(0,o.length-1)]=" "+l;return o}function S(t,e,n){if(void 0===t)return;var i,s,o,r,a,l,c,u="…",p,h=d.measureText("i").width;for(i=0;i<t.length;i++){s=t[i];c=Math.ceil(Math.max(0,e/h))+1;if(c<s.length){r=s.slice(c);s=s.slice(0,c)}else r="";o=s;if(s&&s.length>1&&d.measureText(s).width>e){a=false;for(l=s.length;l>0;l--){o=o.substring(0,o.length-1);p=o+(i+1<n?"-":u);if(d.measureText(p).width<e){r=s.substring(l-1)+r;s=p;a=true;break}}if(!a){r=s.substring(1);s=s.substring(0,1)}if(!a&&!l){r="";s=u}}t[i]=String(s).trim();r&&i<t.length-1?t[i+1]=r+" "+t[i+1]:r&&t.length<n&&t.push(r)}}function w(t,e,n){var i=n.maxWidth,s;if(Number.isNaN(+i))return[t];s=e>1?q(t,i,e):[t];S(s,i,e);return s}function C(t,e,n){var i=e.text,s=(e.lineHeight||1)*y(t),o="maxWidth"in e?e.maxWidth:e.width,a="maxHeight"in e?e.maxHeight:e.height,l=e.width,c=e.height,u=e.maxNumLines,p,h=e.x||0,f=e.y||0,g=t.textAlign,v="center"===g&&m,b,x,q;d.font=t.font;Number.isNaN(+u)&&(u=a?Math.max(1,Math.floor(a/s)):1);p=w(i,u,{maxWidth:o,maxHeight:a});if(n){l=0;for(b=0;b<p.length;b++)l=Math.max(l,t.measureText(p[b]).width);return{lines:p,numLines:p.length,width:l,height:p.length*s,truncated:Array.isArray(/…$/.exec(p[p.length-1]))}}"middle"===t.textBaseline?"undefined"!==typeof c?f+=c/2:p.length&&(f-=(p.length-1)*s/2):"bottom"===t.textBaseline&&("undefined"!==typeof c?f+=c:f-=(p.length-1)*s);"center"===t.textAlign&&l?h+=l/2:"right"===t.textAlign&&l&&(h+=l);for(b=0;b<p.length;b++){x=r.detectTextDirection(p[b]);t.canvas.dir=x;if(v&&"rtl"===x){t.textAlign="left";q=h-t.measureText(p[b]).width/2}else{t.textAlign=g;q=h}t.canvas.dir=r.detectTextDirection(p[b]);t.fillText(p[b],q,f);f+=s}t.textAlign=g}function I(t,e,n,i,s,o){var r,a,c,u,d,p,h;for(r=0;r<n.length;r+=1){u=n[r];if(!u)continue;t.save();c=u.transform;if(c){e.save();e.multiply(c)}"opacity"in u&&(t.globalAlpha=u.opacity);if(u.fill)if(u.fill.gradient){h=u.fill.gradient;if(Number.isNaN(+h.x0)||Number.isNaN(+h.y0)||Number.isNaN(+h.x1)||Number.isNaN(+h.y1))return;p=t.createLinearGradient(h.x0,h.y0,h.x1,h.y1);for(a=0;a<h.limits.length;a++)p.addColorStop(h.limits[a],h.colors[a]);t.fillStyle=p}else t.fillStyle=u.fill;if(u.stroke&&0!==u.strokeWidth){if(u.stroke.gradient){h=u.stroke.gradient;p=t.createLinearGradient(h.x0,h.y0,h.x1,h.y1);for(a=0;a<h.limits.length;a++)p.addColorStop(h.limits[a],h.colors[a]);t.strokeStyle=p}else t.strokeStyle=u.stroke;t.lineWidth=u.strokeWidth||1;i>1&&"polygon"!==u.type&&(t.lineWidth/=i)}u.lineJoin&&(t.lineJoin=u.lineJoin);u.lineCap&&(t.lineCap=u.lineCap);d=e.elements;if("group"===u.type){e.save();if(u.clip){t.beginPath();t.setTransform(d[0][0],d[1][0],d[0][1],d[1][1],d[0][2],d[1][2]);t.rect(u.clip.rect.x,u.clip.rect.y,u.clip.rect.width,u.clip.rect.height);t.clip()}I(t,e,u.children,void 0,!!u.fill||!!s,!!u.stroke&&0!==u.strokeWidth||!!o);e.restore()}else if(u.type in l){t.setTransform(d[0][0],d[1][0],d[0][1],d[1][1],d[0][2],d[1][2]);l[u.type](t,u,!!u.fill||!!s,!!u.stroke&&0!==u.strokeWidth||!!o)}t.globalAlpha=1;c&&e.restore();t.restore()}}function _(t,e,n){if(n){var i=e.elements;switch(n.type){case"clip":t.save();t.setTransform(i[0][0],i[1][0],i[0][1],i[1][1],i[0][2],i[1][2]);t.beginPath();t.rect(n.rect.x,n.rect.y,n.rect.width,n.rect.height);t.clip();break;case"slice":break;default:break}}}function D(t,e){e&&t.restore()}a=t.extend({init:function t(n,o){var r=i.extend(true,{storeObjects:false},o);this._container=n;this._canvas=document.createElement("canvas");this._canvas.style.position="absolute";this._canvas.width=0;this._canvas.height=0;r.name&&this._canvas.setAttribute("name",r.name);this.storeRenderedObjects=true===r.storeObjects;this.scaling={x:1,y:1};this._container&&this._container.appendChild(this._canvas);this.rect=new e(0,0,0,0);this.shapes=[];this._matrix=new s},setDimensions:function t(e,n,i,s){this.rect.set(e,n,i,s)},setDimensionsToContainerRatio:function t(e,n){this.scaling={x:e,y:n};this.ratios={x:e,y:n}},show:function t(){this._canvas.style.display=""},hide:function t(){this._canvas.style.display="none"},clear:function t(e){if(e){if(!this._clearTimer){var s=this;this._clearTimer=n.request(function(){if(s._clearTimer){s._canvas.width=0;s._clearTimer=0}})}}else{n.cancel(this._clearTimer);this._clearTimer=0;this._canvas.width=0;this._canvas.height=0;i(this._canvas).data("shapes",null);this.shapes=[]}},render:function t(){n.cancel(this._clearTimer);this._clearTimer=0;c=window.devicePixelRatio||1;h=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;f=c/h;var e=this._canvas,s=e.getContext("2d"),r=f,a=this._matrix,l=0,u=0,p,g;g=this.rect.height*this.scaling.y;p=this.rect.width*this.scaling.x;if(this.edgeBleed){l=this.edgeBleed.left*this.scaling.x;u=this.edgeBleed.top*this.scaling.y;g+=this.edgeBleed.top*this.scaling.y+this.edgeBleed.bottom*this.scaling.y;p+=this.edgeBleed.left*this.scaling.x+this.edgeBleed.right*this.scaling.x}g=Math.round(g);p=Math.round(p);this._canvas.style.left=-l+"px";this._canvas.style.top=-u+"px";if(e.width!==p||e.height!==g){e.width=r*p;e.height=r*g;this._canvas.style.width=p+"px";this._canvas.style.height=g+"px"}else s.clearRect(0,0,e.width,e.height);s.save();a.save();a.scale(r*this.scaling.x,r*this.scaling.y);a.translate(l/this.scaling.x,u/this.scaling.y);_(s,a,this.viewBox);I(s,a,this.shapes,this.scaling.x);D(s,this.viewBox);s.restore();a.restore();this.storeRenderedObjects&&i(this._canvas).data("shapes",this.shapes);return o.resolve()},setFont:function t(e){this._canvas.getContext("2d").font=e},getFontHeight:function t(e){if("string"!==typeof e)throw new Error("CanvasRenderer.getFontHeight(): Input font is not a string");if(e in g)return g[e];var n=this._canvas.getContext("2d"),i;if(n.font!==e){n.save();n.font=e;i=1.5*n.measureText("m").width;n.restore()}else i=1.5*n.measureText("m").width;b(e,i);return i},getTextWidth:function t(e,n){var i=this._canvas.getContext("2d"),s;i.save();i.font=n;s=void 0!==e?Math.ceil(i.measureText(e).width):0;i.restore();return s},getEMFontWidth:function t(e){var n="m",i,s=this._canvas.getContext("2d");s.save();s.font=e;i=s.measureText(n).width;s.restore();return i},getAverageLetterWidth:function t(e){var n="eeeaaaiinnoorsstldumcph",i;d.font=e||this._canvas.getContext("2d").font;i=d.measureText(n).width;return i/n.length},release:function t(){i(this._canvas).data("shapes",null);this.shapes=[];if(this._container){this._container.removeChild(this._canvas);this._container=null}},applyTransform:function t(){var e;for(e=0;e<this.shapes.length;e+=1)this.shapes[e].type in k&&k[this.shapes[e].type](this.shapes[e].shape,this.ratios)}});var k={rect:function t(e,n){e.x*=n.x;e.y*=n.y;e.width*=n.x;e.height*=n.y},line:function t(e,n){e.x1*=n.x;e.y1*=n.y;e.x2*=n.x;e.y2*=n.y},circle:function t(e,n){e.cx*=n.x;e.cy*=n.y;e.r*=Math.min(n.x,n.y)},polygon:function t(e,n){var i,s;for(i=0;i<e.points.length;i++){s=e.points[i];s.x*=n.x;s.y*=n.y}},text:function t(e,n){e.x*=n.x;e.y*=n.y;e.width*=n.x;e.height*=n.y}};a.getTextWidth=function(t){return Math.ceil(d.measureText(t).width)};a.setFont=function(t){d.font=t};a.getAverageLetterWidth=function(t){var e="eeeaaaiinnoorsstldumcph",n;d.font=t;n=d.measureText(e).width;return n/e.length};a.measureText=function(t,e){var n=d,i,s,o;if(e&&n.font!==e){n.save();n.font=e}s=n.measureText(t).width;if(e in g)i=g[e];else{i=1.5*n.measureText("m").width;b(e,i)}e&&n.restore();o=void 0!==t?{width:s,height:i}:{width:0,height:0};return o};a.measureTextObject=function(t){t.shape.font&&(d.font=t.shape.font);t.shape.align&&(d.textAlign=t.shape.align);t.shape.baseline&&(d.textBaseline=t.shape.baseline);return C(d,t.shape,true)};a.measureDisplayTextObject=function(t){t.font&&(d.font=t.font);t.align&&(d.textAlign=t.align);t.baseline&&(d.textBaseline=t.baseline);return C(d,t,true)};a.getFontHeight=function(t){var e=d,n;if(t in g)return g[t];if(t){e.save();e.font=t}n=1.5*e.measureText("m").width;b(t,n);t&&e.restore();return n};a.getDevicePixelToBackingStoreRatio=function(){return(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1)};return a}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(238),n(89),n(130),n(125),n(90),n(195),n(185)],s=function(t,e,n,i,s,o,r){var a=1e3,l=1e3;var c;function u(t,e){if(!t)return[];return e&&s.getValue(t,e)?s.getValue(t,e).qHyperCube:t.qHyperCube}c=t.extend({init:function t(e){this._super(e);this.path=e.path},setProperties:function t(e){if(!e)return;this._super(e);this.hcProperties=this.path?s.getValue(e,(this.path?this.path+".":"")+"qHyperCubeDef"):e.qHyperCubeDef;if(!this.hcProperties)return;this.hcProperties.qDimensions||(this.hcProperties.qDimensions=[]);this.hcProperties.qMeasures||(this.hcProperties.qMeasures=[]);this.hcProperties.qInterColumnSortOrder||(this.hcProperties.qInterColumnSortOrder=[]);this.hcProperties.qLayoutExclude||(this.hcProperties.qLayoutExclude={});this.hcProperties.qLayoutExclude.qHyperCubeDef||(this.hcProperties.qLayoutExclude.qHyperCubeDef={});this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions||(this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions=[]);this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures||(this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures=[]);this.hcProperties.qDimensions.forEach(function(t){if(void 0!==t.autoSort){t.qDef.autoSort=t.autoSort;delete t.autoSort}});this.hcProperties.qMeasures.forEach(function(t){if(void 0!==t.autoSort){t.qDef.autoSort=t.autoSort;delete t.autoSort}})},canColorBy:function t(e,n){var i=e||{qHyperCubeDef:this.hcProperties||this.properties.qHyperCubeDef},s=this.layout?this.layout.visualization:null,r=i.qHyperCubeDef.qDimensions.length>=this.minDimensions()&&i.qHyperCubeDef.qMeasures.length>=this.minMeasures();if(o.colorBy.isSupported(s)||n)return r&&this.layout&&this.layout.color?c.canColorBy(i,s):{};return false},getDimensions:function t(){return this.hcProperties?this.hcProperties.qDimensions:[]},getMeasures:function t(){return this.hcProperties?this.hcProperties.qMeasures:[]},getLabels:function t(){return this.getMeasures().filter(function(t){return!t.qLibraryId&&!!t.qDef.qLabel}).map(function(t){return t.qDef.qLabel})},getSorting:function t(){return this.hcProperties.qInterColumnSortOrder},addDimension:function t(n,o,r){var l=this.getDimensions(),c=this;n.qDef.cId||(n.qDef.cId=s.generateId());n.qOtherTotalSpec||(n.qOtherTotalSpec={});if(o){r=void 0!==r?r:this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(r,0,n);return e.resolve(n)}if(l.length<this.maxDimensions()){r=void 0!==r?r:l.length;l.splice(r,0,n);return this.autoSortDimension(n).then(function(){i.indexAdded(c.hcProperties.qInterColumnSortOrder,"undefined"!==typeof r?r:l.length-1);if("function"===typeof c.dimensionDefinition.add)return e.when(c.dimensionDefinition.add.call(c,n,c.properties,c)).then(function(){return n});return n})}if(l.length<a){r=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(r,0,n);return e.resolve(n)}},reinsertDimension:function t(n,o,r){var l=this.getDimensions(),c=this;n.qDef.cId||(n.qDef.cId=s.generateId());if(o){r=void 0!==r?r:this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(r,0,n);if("function"===typeof c.dimensionDefinition.move)return e.when(c.dimensionDefinition.move.call(c,n,c.properties,c)).then(function(){return n})}else if(l.length<this.maxDimensions()){r=void 0!==r?r:l.length;l.splice(r,0,n);i.indexAdded(c.hcProperties.qInterColumnSortOrder,"undefined"!==typeof r?r:l.length-1);if("function"===typeof c.dimensionDefinition.move)return e.when(c.dimensionDefinition.move.call(c,n,c.properties,c)).then(function(){return n})}else if(l.length<a){r=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(r,0,n)}return e.resolve(n)},addMeasure:function t(n,o,r){var a=this.getMeasures(),c=this;n.qDef.cId||(n.qDef.cId=s.generateId());if(o){r=void 0!==r?r:this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(r,0,n);return e.resolve(n)}r=void 0!==r?r:a.length;if(a.length<this.maxMeasures()){a.splice(r,0,n);return this.autoSortMeasure(n).then(function(){i.indexAdded(c.hcProperties.qInterColumnSortOrder,c.getDimensions().length+a.length-1);if("function"===typeof c.measureDefinition.add)return e.when(c.measureDefinition.add.call(null,n,c.properties,c)).then(function(){return n});return n})}if(a.length<l){r=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(r,0,n);return e.resolve(n)}},getDimensionLayouts:function t(){var e=u(this.layout,this.path);return e?e.qDimensionInfo:[]},getDimensionLayout:function t(e){return this.getDimensionLayouts().filter(function(t){return e===t.cId})[0]},getMeasureLayouts:function t(){var e=u(this.layout,this.path);return e?e.qMeasureInfo:[]},getMeasureLayout:function t(e){return this.getMeasureLayouts().filter(function(t){return e===t.cId})[0]},reinsertMeasure:function t(n,o,r){var a=this.getMeasures(),c=this;n.qDef.cId||(n.qDef.cId=s.generateId());if(o){r=void 0!==r?r:this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(r,0,n)}else{r=void 0!==r?r:a.length;if(a.length<this.maxMeasures()){a.splice(r,0,n);i.indexAdded(c.hcProperties.qInterColumnSortOrder,c.getDimensions().length+a.length-1);if("function"===typeof c.measureDefinition.move)return e.when(c.measureDefinition.move.call(null,n,c.properties,c,true)).then(function(){return n})}else if(a.length<l){r=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(r,0,n)}}return e.resolve(n)},replaceDimension:function t(e,n){var i=this.getDimensions(),o=i[e],r=this;return this.autoSortDimension(n).then(function(){n.qDef.cId=s.generateId();i[e]=n;"function"===typeof r.dimensionDefinition.replace&&r.dimensionDefinition.replace.call(null,n,o,e,r.properties,r);return n})},replaceMeasure:function t(e,n){var i=this.getMeasures(),o=i[e],r=this;return this.autoSortMeasure(n).then(function(){n.qDef.cId=s.generateId();i[e]=n;"function"===typeof r.measureDefinition.replace&&r.measureDefinition.replace.call(null,n,o,e,r.properties,r);return n})},autoSortDimension:function t(e){var i=this;function s(t){t.forEach(function(t,n){var s=t.qTags;var o={qSortByLoadOrder:1};if("function"===typeof i.dimensionDefinition.autoSort)i.dimensionDefinition.autoSort(e,i.properties,s,o,i);else{o.qSortByNumeric=1;o.qSortByAscii=1}e.qDef.qSortCriterias?e.qDef.qSortCriterias[n]=o:e.qDef.qSortCriterias=[o]})}return e.qLibraryId?this.app.getDimensionList().then(function(t){var i=n.findLibraryDimension(e.qLibraryId,t);i&&s(i.qData.info);return e}):this.app.getFieldList().then(function(t){var i=n.findField(e.qDef.qFieldDefs[0],t);i&&s([i]);return e})},autoSortMeasure:function t(n){n.qSortBy={qSortByLoadOrder:1,qSortByNumeric:-1};return e.resolve(n)},removeDimension:function t(n,s){var o;if(s){o=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(n,1);if("function"===typeof this.dimensionDefinition.remove)return e.when(this.dimensionDefinition.remove.call(null,o,this.properties,this,n))}else{o=this.hcProperties.qDimensions.splice(n,1)[0];i.indexRemoved(this.hcProperties.qInterColumnSortOrder,n);if("function"===typeof this.dimensionDefinition.remove)return e.when(this.dimensionDefinition.remove.call(null,o,this.properties,this,n))}return e.resolve(o)},removeMeasure:function t(n,s){var o;if(s)o=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(n,1)[0];else{o=this.hcProperties.qMeasures.splice(n,1)[0];i.indexRemoved(this.hcProperties.qInterColumnSortOrder,this.getDimensions().length+n);if("function"===typeof this.measureDefinition.remove)return e.when(this.measureDefinition.remove.call(null,o,this.properties,this,n))}return e.resolve(o)},moveDimension:function t(n,s){var o=this.getDimensions(),r=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions,a,l,c;if(n<o.length&&s<o.length)i.move(o,n,s);else if(n<o.length&&s>=o.length){l=s-o.length;c=r.splice(0,1)[0];o.push(c);c=o.splice(n,1)[0];r.splice(l,0,c)}else if(n>=o.length&&s<o.length){a=n-o.length;c=o.splice(o.length-1,1)[0];r.splice(0,0,c);c=r.splice(a+1,1)[0];o.splice(s,0,c)}else{a=n-o.length;l=s-o.length;i.move(r,a,l)}return e.resolve(c)},moveMeasure:function t(n,s){var o=this.getMeasures(),r=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures,a,l,c;if(n<o.length&&s<o.length)i.move(o,n,s);else if(n<o.length&&s>=o.length){l=s-o.length;c=r.splice(0,1)[0];o.push(c);c=o.splice(n,1)[0];r.splice(l,0,c)}else if(n>=o.length&&s<o.length){a=n-o.length;c=o.splice(o.length-1,1)[0];r.splice(0,0,c);c=r.splice(a+1,1)[0];o.splice(s,0,c)}else{a=n-o.length;l=s-o.length;i.move(r,a,l)}return e.resolve(c)},changeSorting:function t(e,n){i.move(this.hcProperties.qInterColumnSortOrder,e,n)},setSorting:function t(e){e&&e.length===this.hcProperties.qInterColumnSortOrder.length&&(this.hcProperties.qInterColumnSortOrder=e)}});c.canColorBy=function(t,e){var n={primary:true};if(t){var i=r.getLogicFor("hard",e).helpers.colorModeOptions;n.byDimension=i.dimension(t);n.byMeasure=i.measure(t);n.byMultiple=i.multiColor(t);n.byExpression=i.expression(t)}return n};return c}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(89),n(225),n(101)],s=function(t,e,n,i){function s(t){var e=i.getValue(t,"selections.currentDataColIx",void 0);return i.getValue(t,"layout.qHyperCube.qDimensionInfo."+e+".qIsOneAndOnlyOne",false)}var o=t.extend({$scope:null,init:function t(e){this.$scope=e},onPaint:function t(){return e.resolve()},onResize:function t(){return e.resolve()},setInteractionState:function t(){},setFreeResize:function t(){},setDirection:function t(){},setSnapshotData:function t(){},setBackendApi:function t(){},getContextMenu:function t(){},getObjectMenu:function t(){},getSelectionToolbar:function t(){var e=[];s(this.$scope)||e.push({name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:true,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function t(){this.selectionsApi.clear()},isDisabled:function t(){return!this.selectionsApi.selectionsMade}});return new n(this.$scope.backendApi,this.$scope.selectionsApi,false,false,e,[])},getPreferredSize:function t(){},onInit:function t(){return e.resolve()}});o.$inject=["$scope"];return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(102),n(90),n(99),n(179),n(243),n(355),n(773),n(774),n(244)],s=function(t,e,n,i,s,o,r){var a;a=t.extend({destroy:function t(){this.$timeout.cancel(this.initPromise);this.$timeout.cancel(this.setVirtualSizePromise);this.unpreventNativeScroll&&this.unpreventNativeScroll();this.domApi.destroy()},init:function t(s,o){e.create(this,"Scroll");this.$timeout=s;this.initPromise=null;this.setVirtualSizePromise=null;void 0!==o.virtualScrollEnabled?this.virtualScrollEnabled=o.virtualScrollEnabled:this.virtualScrollEnabled=i.treatAsDesktop();this.loaderStyle={width:0,height:0};this.totalRows=0;this.totalColumns=0;this.alignBottomAbsolute=false;this.axisDelta={xAxis:0,yAxis:0};this.alignToBottomReduce={active:false,activeFromStart:false};this.ignoreScroll=false;this.loadNext=false;this.loadPrevious=false;this.settings=n.extend(true,{alignToBottom:"absolute",minRowHeight:21,maxRowHeight:21,minColumnWidth:30,viewportRowCount:0,viewportColumnCount:0,width:0,height:0,blockSize:100,keepItemsCount:10},o)},initialize:function t(e,n,i,a){if(!(e instanceof s))throw new Error("Must provide an instance of domApi");if(!(n instanceof o))throw new Error("Must provide an instance of dataApi");if(!(i instanceof r[r.length-1]))throw new Error("Must provide an instance of ScrollAreaController");if(!a||"function"!==typeof a.fadeIn||"function"!==typeof a.fadeOut)throw new Error("Must provide valid loader api");if(this.initPromise)return this.initPromise;Object.defineProperty(this,"DELTA_MODE",{value:i.DELTA_MODE});this.domApi=e;this.dataApi=n;this.virtualScrollApi=i;this.loaderApi=a;this.initPromise=this.$timeout(function(){this.onInit();this.onInitVirtualScroll();this.bindNativeScroll()}.bind(this));return this.initPromise},onInit:function t(){this.updateViewport()},onInitVirtualScroll:function t(){this.virtualScrollApi.onScroll(this.onVirtualScroll.bind(this));this.virtualScrollApi.getScrollAmount=this.getVirtualScrollAmount.bind(this)},bindNativeScroll:function t(){this.domApi.bindNativeScroll(this.onNativeScroll.bind(this))},activate:function t(){this.virtualScrollEnabled&&this.virtualScrollApi.on();if(this.unpreventNativeScroll){this.unpreventNativeScroll();this.unpreventNativeScroll=null}},deactivate:function t(){this.unpreventNativeScroll=this.domApi.preventNativeScroll();this.virtualScrollApi.off()},updateViewport:function t(){var e=this.domApi.getBoundingBox();this.settings.width=e.width;this.settings.height=e.height;this.settings.viewportRowCount=Math.ceil(this.settings.height/this.settings.minRowHeight);this.settings.viewportColumnCount=Math.ceil(this.settings.width/this.settings.minColumnWidth)},setTotalRows:function t(e){this.totalRows=e},setTotalColumns:function t(e){this.totalColumns=e},getSpliceArgs:function t(){var e=this.dataApi.getRowCount(),n=this.settings.viewportRowCount,i=this.settings.keepItemsCount,s=e-n-i;return[0,s]},onSetVirtualSize:function t(e){var n,i=this.domApi.getScrollAreaBoundingBox(),s=this.domApi.getScrollContentBoundingBox(),o=this.virtualScrollApi.getVirtualPosition(),r=this.settings.minRowHeight*this.totalRows,a,l,c;if("reduce"===this.settings.alignToBottom){this.alignToBottomReduce.active=false;this.alignToBottomReduce.activeFromStart=false;if(s.height>=i.height&&this.settings.viewportRowCount>=this.totalRows){n=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);if(n<this.settings.viewportRowCount){this.alignToBottomReduce.active=true;this.alignToBottomReduce.activeFromStart=true;this.settings.viewportRowCount=n}}l={width:i.width,height:this.settings.viewportRowCount*this.settings.minRowHeight}}else l={width:i.width,height:i.height};a={width:this.settings.minColumnWidth*this.totalColumns,height:r};c={top:0,left:0,width:i.width,height:i.height};this.virtualScrollApi.setVirtualSize(a,l,c);e&&this.virtualScrollApi.scroll(o.vPosX,o.vPosY,true)},setVirtualSize:function t(e){if(!this.virtualScrollEnabled)return;this.setVirtualSizePromise=this.$timeout(function(){this.updateViewport();this.onSetVirtualSize(e);this.updateAlignToBottom()}.bind(this));return this.setVirtualSizePromise},getVirtualScrollAmount:function t(e,n,i){var s=this.virtualScrollApi.getVirtualPosition(),o=this.virtualScrollApi.getMaxPosition();switch(i){case this.DELTA_MODE.LINE:return{deltaX:0,deltaY:this.settings.minRowHeight*n};case this.DELTA_MODE.PAGE:var r=Math.max(0,this.domApi.getVisibleRowCount()-1);return{deltaX:0,deltaY:r*this.settings.minRowHeight*n};case this.DELTA_MODE.AREA:return{deltaX:0,deltaY:n>0?s.vPosY*n:s.vPosY-o.vPosY};default:return{deltaX:e,deltaY:n}}},getPage:function t(e){e||(e=this.virtualScrollApi.getVirtualPosition());return{left:Math.floor(e.vPosX/this.settings.minColumnWidth),top:Math.floor(e.vPosY/this.settings.minRowHeight),width:this.settings.viewportColumnCount,height:this.settings.viewportRowCount}},adjustPageToBounds:function t(e){if(e.top>0&&e.top+e.height>this.totalRows){e.top=Math.max(0,this.totalRows-e.height);e.height=Math.min(this.totalRows,e.height)}if(e.left>0&&e.left+e.width>this.totalColumns){e.left=Math.max(0,this.totalColumns-e.width);e.width=Math.min(this.totalColumns,e.width)}},scroll:function t(e,n,i){var s=this.virtualScrollApi.getScrollAmount(e,n,i);this.virtualScrollApi.scroll(s.deltaX,s.deltaY,false,false)},onVirtualScroll:function t(e,n){this.Scroll.emit();var i=this.virtualScrollApi.getVirtualPosition(),s=this.virtualScrollApi.getMaxPosition(),o=this.getPage(i);if(this.alignToBottomReduce.active&&n<0){this.graduallyLeaveAlignToBottomReduce(o);s=this.virtualScrollApi.getMaxPosition()}"reduce"===this.settings.alignToBottom&&s.vPosY>0&&i.vPosY===s.vPosY&&(this.alignToBottomReduce.active=true);this.adjustPageToBounds(o);this.axisDelta.xAxis=e;this.axisDelta.yAxis=n;return this.dataApi.onVirtualScroll(o.top,o.height,o.left,o.width,e,n).then(function(){this.updateAlignToBottom()}.bind(this)).catch(function(t){false})},updateAlignToBottom:function t(){"reduce"===this.settings.alignToBottom?this.updateAlignToBottomReduce():this.updateAlignToBottomAbsolute()},updateAlignToBottomAbsolute:function t(){var e=this.virtualScrollApi.getVirtualPosition(),n=this.virtualScrollApi.getMaxPosition();this.virtualScrollApi.isVerticalScrollEnabled()&&e.vPosY===n.vPosY?this.alignBottomAbsolute=true:this.alignBottomAbsolute=false},updateAlignToBottomReduce:function t(){var e=false;if(this.alignToBottomReduce.active){if(this.axisDelta.yAxis>0){var n=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);this.settings.viewportRowCount=Math.max(1,n)}else{var i=Math.ceil(this.domApi.getScrollAreaClientHeight()/this.settings.minRowHeight);this.settings.viewportRowCount>=i&&(this.alignToBottomReduce.active=false);e=true}var s=this.domApi.getScrollAreaBoundingBox();this.virtualScrollApi.setViewport({top:0,left:0,width:s.width,height:s.height});this.virtualScrollApi.setVirtualViewport({width:s.width,height:this.settings.viewportRowCount*this.settings.minRowHeight});e&&this.virtualScrollApi.setVirtualScrollPos(0,-1)}},graduallyLeaveAlignToBottomReduce:function t(e){var n=Math.ceil(this.domApi.getScrollAreaClientHeight()/this.settings.minRowHeight);if(this.alignToBottomReduce.activeFromStart)return;e.height=Math.min(this.totalRows-e.top,n);this.settings.viewportRowCount=e.height},updateLoadingButtons:function t(){var e=this.dataApi.getFirstElementIndex(),n=this.dataApi.getRowCount();e+n>=this.totalRows||0===this.totalRows||e<0?this.loadNext=false:this.loadNext=true;this.loadPrevious=e>0},resetNativeScroll:function t(){this.ignoreScroll=true;this.loadNext=false;this.loadPrevious=false;this.domApi.resetNativeScroll();return function(){this.ignoreScroll=false}.bind(this)},onNativeScroll:function t(){if(this.virtualScrollEnabled){this.domApi.resetNativeScroll();return}this.Scroll.emit();if(this.ignoreScroll)return;var e=this.dataApi.getLastElementIndex()+1,n=this.settings.blockSize-e;this.ignoreScroll=true;this.dataApi.onInitialNativeScroll(e,n).then(function(){this.updateLoadingButtons()}.bind(this))},gotoNextBlock:function t(){var e="function"===typeof this.domApi.getHorizontalScroll?this.domApi.getHorizontalScroll():0;this.loaderApi.fadeIn(this.domApi.getScrollAreaOffsetTop(),e,this.domApi.getBoundingBox()).then(function(){var t=this.domApi.alignToLastRow(),e=this.dataApi.getLastElementIndex()+1,n=this.settings.blockSize-this.settings.keepItemsCount;this.dataApi.onGotoNextBlock(e,n).then(function(){this.updateLoadingButtons();this.$timeout(function(){t();this.$timeout(function(){this.loaderApi.fadeOut()}.bind(this))}.bind(this))}.bind(this))}.bind(this))},gotoPreviousBlock:function t(){var e="function"===typeof this.domApi.getHorizontalScroll?this.domApi.getHorizontalScroll():0;this.loaderApi.fadeIn(this.domApi.getScrollAreaOffsetTop(),e,this.domApi.getBoundingBox()).then(function(){var t=this.domApi.alignToFirstRow(),e=this.settings.blockSize-this.settings.keepItemsCount,n=this.dataApi.getFirstElementIndex()-e;if(n<0){e+=n;n=0}this.dataApi.onGotoPreviousBlock(n,e).then(function(){this.updateLoadingButtons();this.$timeout(function(){t();this.$timeout(function(){this.loaderApi.fadeOut()}.bind(this))}.bind(this))}.bind(this))}.bind(this))}});return a}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(249),n(303)],s=function(t,e,n,i){var s=t.extend("SortableItemList",{init:function t(e,n){this.items=[];this.disabled=false;this.typeFlag=e||1;this.locked=false;Object.keys(n||{}).forEach(function(t){this[t]=n[t]},this)},addSortableItem:function t(e,n){Object.defineProperty(e,"__sortableItem__",{configurable:false,enumerable:true,writable:true,value:{typeFlag:n||1}});this.items.push(e)},moveItem:function t(e,n){this.items.splice(n,0,this.items.splice(e,1)[0])},getIndexByItem:function t(e){return this.items.indexOf(e)},get:function t(e){return this.items.filter(e||function(){return true})},getLockedIndices:function t(){return this.get(function(t){return!!(t.__sortableItem__.typeFlag&i.TYPEFLAG_LOCKED)}).map(function(t){return this.getIndexByItem(t)},this)},reset:function t(){this.items.length=0;this.disabled=false},isEmpty:function t(){return 0===this.items.length},setLocked:function t(e){this.locked=e}});Object.defineProperties(s.prototype,{length:{get:function t(){return this.items.length}}});var o=n.extend("SortableItemLists",{init:function t(){this._super.apply(this,arguments);this.lists=[];this.dragPlaceholder=null},addPlaceholder:function t(n){var s=this.getList(n),o=s?s.items.indexOf(n):-1;this.dragPlaceholder=e.extend(true,{},n);this.dragPlaceholder.id="placeholder";this.dragPlaceholder.__sortableItem__.typeFlag=i.TYPEFLAG_PLACEHOLDER;this.dragPlaceholder.style={opacity:"0.3"};s&&s.items.splice(o,0,this.dragPlaceholder);return this.dragPlaceholder},removePlaceholder:function t(){if(!this.dragPlaceholder)return;var e=this.getList(this.dragPlaceholder),n=e?e.items.indexOf(this.dragPlaceholder):-1;if(-1!==n){e.items.splice(n,1);this.dragPlaceholder=null}},getPlaceholder:function t(){return this.dragPlaceholder},createList:function t(e,n){var i=new s(e,n);this.lists.push(i);return i},reset:function t(){this.lists.forEach(function(t){t.reset()})},getList:function t(e){return this.lists.filter(function(t){return-1!==t.items.indexOf(e)})[0]},disable:function t(e){this.lists.forEach(function(t){t.disabled=!(e.__sortableItem__.typeFlag&t.typeFlag)})},enable:function t(){this.lists.forEach(function(t){t.disabled=false})},getIndexOfItem:function t(e){var n=this.getList(e);var i=n?n.items.indexOf(e):-1;return i},moveItem:function t(e,n){var i=this.getList(e),s=this.getList(n),o,r;if(!i||!s)return;r=s.items.indexOf(n);o=i.items.indexOf(e);i.items.splice(o,1);s.items.splice(r,0,e)},onBegin:function t(e,n){this.addPlaceholder(e,n);this.disable(e)},onEnter:function t(e,n){var s=this.getList(e),o=s.getLockedIndices();if(e===this.dragPlaceholder)return;if(n===i.ENTER_BEFORE||n===i.ENTER_AFTER){var r=this.getList(this.dragPlaceholder),a,l;if(!r||!s)return;a=r.getIndexByItem(this.dragPlaceholder);r.items.splice(a,1);l=s.getIndexByItem(e);l+=n===i.ENTER_AFTER?1:0;s.items.splice(l,0,this.dragPlaceholder)}else this.moveItem(this.dragPlaceholder,e);var c=s.getLockedIndices();o.forEach(function(t,e){s.moveItem(c[e],t)})},onEnterList:function t(e){if(e.disabled||e.locked)return;var n=this.getList(this.dragPlaceholder);if(!n)return;var i=n.getIndexByItem(this.dragPlaceholder);n.items.splice(i,1);e.items.push(this.dragPlaceholder)},onMove:function t(e){if(-1===this.getIndexOfItem(e)){this.onCancel();return false}var n=this.dragPlaceholder;this.moveItem(e,n);this.removePlaceholder();this.enable();return true},onMoveToList:function t(e,n){var i=this.getList(e);if(i&&!(n.disabled||n.locked)){var s=i.items.indexOf(e);if(i===n){this.onMove(e,this.dragPlaceholder);return true}i.items.splice(s,1);n.items.push(e)}this.removePlaceholder();this.enable();return!!i},onCancel:function t(){this.removePlaceholder();this.enable()},allowEnter:function t(e,n){var i=this.getList(e);return void 0!==i&&!i.disabled&&!i.locked&&!!(n.__sortableItem__.typeFlag&i.typeFlag)},allowEnterList:function t(e,n){return!e.disabled&&!e.locked&&!!(n.__sortableItem__.typeFlag&e.typeFlag)}});o.create=function(t){var e=o.extend(t||{});t=new e(t&&t.options);return t};return o}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(119),n(718)],s=function(t,e){var n=30;t.directive("qvTagcloud",["$parse",function(t){return{template:e,replace:true,restrict:"E",scope:{tags:"=",onChange:"&"},link:function e(i,s,o){i.tagInput="";var r=s.find(".qv-tagText");r.bind("blur",function(){i.$apply(function(){i.addTags()})});r.bind("keydown",function(t){if(13===t.which){t.stopPropagation();i.$apply(function(){i.addTags()})}});function a(t){var e=i.tags;t=t.trim();if(!t||-1!==e.indexOf(t)||e.length>=n)return;e.push(t)}i.removeTagAt=function(t){i.tags.splice(t,1);i.onChange()};i.addTags=function(){var t=i.tagInput;if(!t)return;i.tagInput="";var e=t.trim().split(",");e.forEach(a);i.tags.sort(function(t,e){return t.localeCompare(e)});i.onChange()};i.addTagsAndFocus=function(t){t.preventDefault();i.addTags();r.focus()};var l=t(o.update);l.assign&&l.assign(i.$parent,i.addTags)}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(48),n(193)],s=function(t,e){var n={list:[]},i=null;n.getList=function(){var n=this;function s(t){e.getService("$contentApi").getExtensions().then(function(e){n.list=[];for(var i in e)e.hasOwnProperty(i)&&n.list.push({id:i,data:e[i]});t.resolve(n.list)},function(){n.list=[];t.resolve(n.list)});return t.promise}if(null===i){i=new t;return s(i)}return i.promise};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(48),n(93),n(716),n(191),n(107),n(90),n(150)],s=function(t,e,n,i,s,r,a){t.directive("qvDescriptionTextarea",function(){return{restrict:"E",scope:{description:"=",descriptionExpression:"=",disableExpression:"=?",isValid:"=?"},template:n,link:function t(n){e.getApp().then(function(t){var e;n.onBlur=c;n.openExpressionDialog=u;n.enableDescriptionExpression=!n.disableExpression;void 0===n.isValid&&(n.isValid=true);n.$watch("editorValue",function(t){if(void 0===t)return;h(n.editorValue,true);f()});e=new i.ExpressionValidator(t);e.Update.bind(v);n.$watchGroup(["description","descriptionExpression"],function(){var t=p();if(!g(t,n.editorValue)){n.editorValue=t;l()}});function l(){var t=d(n.editorValue);t?e.validate(n.editorValue):n.isValid=!n.editorValue||n.editorValue.length<=s.description}function c(){h(n.editorValue,true);l()}function u(){var t={expr:n.editorValue,title:n.editorValue?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"};a.show(t).then(function(t){t.length&&"="!==t[0]&&(t="="+t);h(t,false);l()})}function d(t){return n.enableDescriptionExpression&&0===(t||"").indexOf("=")}function p(){if("object"===o(n.descriptionExpression)&&n.enableDescriptionExpression){var t=r.getValue(n.descriptionExpression,"qStringExpression.qExpr","");"="!==t[0]&&(t="="+t);return t}return n.description}function h(t,e){var i=d(t);if(i){n.description="";n.descriptionExpression={qStringExpression:{qExpr:t.substr(1)}}}else{n.description=(t||"").trim();n.descriptionExpression=void 0}e||(n.editorValue=t)}function f(){n.maxLength=d(n.editorValue)?s.expression:s.description}function g(t,e){t=(t||"").trim();e=(e||"").trim();return t===e}function v(t){n.isValid=t.valid}n.$on("$destroy",function(){e.Update.unbind(v)})})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(10),n(95),n(48),n(909),n(94),n(140),n(184),n(103),n(168),n(155),n(49),n(89),n(202),n(223),n(176),n(175)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f){i.service("qvCaoService",["$document","qvSelectionToolbarService","qvGlobalSelectionsService","qvCaoSelectionService",function(i,g,v,m){var b,y,x;var q=300;var S=new c;var w=new u;var C=false;var I=d.getFlag("CE_PRECEDENTS");var _,D;x=a.createGroup("cao",1);x.registerKeys("ctrl+left",a.preventDefault);x.registerKeys("ctrl+home",a.preventDefault);x.registerKeys("ctrl+right",a.preventDefault);x.registerKeys("ctrl+end",a.preventDefault);x.registerKeys("ctrl+e",a.preventDefault);x.registerKeys("ctrl+c",a.preventDefault);x.registerKeys("ctrl+x",a.preventDefault);x.registerKeys("ctrl+v",a.preventDefault);x.registerKeys("ctrl+z",a.preventDefault);x.registerKeys("ctrl+y",a.preventDefault);x.registerKeys("cmd+shift+z",a.preventDefault);x.registerKeys("del",a.preventDefault);x.registerKeys("ctrl+f",a.preventDefault);x.registerKeys("backspace",a.preventDefault);x.registerKeys("esc",a.preventDefault);x.registerKeys("ctrl+shift+left",E);x.registerKeys("ctrl+shift+right",A);function k(){return{$container:void 0,$containerId:".qv-cao-container",getComponent:function t(){return s},setup:function t(){r.get().then(function(t){o.StateChanged.bind(T);t.enigmaModel.isInModalSelection()&&g.confirm()})},destroy:function t(){o.StateChanged.unbind(T)}}}function T(){(o.isInEditMode()||o.isInAnalysisMode()||o.inObjectView())&&P()}function E(){r.get().then(function(t){f.toggleAssetsPanel(t.id);n.publish("cao/insight/assetsPanelToggled",f.storageObj(t.id).assetsPanel)})}function A(){r.get().then(function(t){f.toggleContextPanel(t.id);n.publish("cao/insight/contextPanelToggled",f.storageObj(t.id).contextPanel)})}function L(n){x.on();y.$container=e.element("<div>");n=n||i;n.find(y.$containerId).append(y.$container);y.$container.showComponent(y.getComponent());y.setup();v.setCaoActive(true);t(".qv-cao").slideDown(q)}function M(){return!(!y||void 0===y.$container)}function P(){x.off();if(!y)return;t(".qv-cao").slideUp(q,function(){if(y.$container){y.$container.remove();y.$container=void 0}y.destroy();y=null;v.setCaoActive(false)})}b={isCaoOpen:M,toggleCao:function t(e){var n=h.getCurrentSheetInfo();m.clearSelection();y||(y=new k);if(M()){P();h.closeAnalysisOverlay(n.sheetId,n.appId);l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"close"});return false}h.openAnalysisOverlay(n.sheetId,n.appId,o.States.insight);L(e);C=false;l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"open"});return true},off:function t(){l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"off"});P()},scrapeApp:function t(){if(I){if(_)return D;_=true;D=S.scrapeApp().then(function(){_=false});return D}return(new p).resolve()},setRefreshIndicatorVisibility:function t(e){C=e},getRefreshIndicatorVisibility:function t(){return C},isInsightsAvailable:function t(){var e=new p;w.isRunning().then(function(){e.resolve(true)},function(){e.resolve(false)});return e.promise}};return b}])}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=c(n(49));var s=c(n(93));var o=c(n(95));var r=c(n(89));var a=c(n(326));var l=c(n(91));function c(t){return t&&t.__esModule?t:{default:t}}var u;var d;var p;var h;var f=false;var g=true;var v="";var m=false;var b="2013-08-08 13:15:19";var y="OBSERVER_KEY_APP_IS_NOW_DIRTY";var x="OBSERVER_KEY_APP_IS_NOW_CLEAN";function q(){if(d&&!p)return true;var t=d>p;return t}function S(){return p>h}function w(t){var e=new Date;e.setTime(24*(t-25569)*3600*1e3);return Math.floor(e.getTime()/1e3)}function C(t){h=w(t.qUtcLastReloadTime);d=p}function I(t){s.default.getApp().then(function(e){e.getProperties().then(function(e){b=e.qLastReloadTimeAsString||b;C(e);t&&t()})})}function _(){setTimeout(function(){var t=S();var e=q()?y:x;o.default.publish(e,t)})}function D(){u=d;d=new Date;_()}function k(t){var e=new r.default;if(t&&"function"!==typeof t)throw new Error("The callback function specified is not a function.");f=true;s.default.getApp().then(function(n){n.doSave().then(function(){f=false;g=true;p=new Date;I(_);t&&t();e.resolve()},function(t){f=false;g=false;e.reject(t)})});return e.promise}function T(){s.default.getApp().then(function(t){t.getLayout().then(function(t){v="";t.qTitle?v=t.qTitle:t.qFileName&&(v=t.qFileName.replace(/\.(qvw|qvf)$/i,""));t.qModified&&D()})})}function E(t){f=t}function A(){return f}function L(){return g}function M(t){o.default.subscribe(y,t)}function P(t){o.default.unsubscribe(y,t)}function O(t){o.default.subscribe(x,t)}function F(t){o.default.unsubscribe(x,t)}function $(){if(!d)throw new Error("Cannot do rollback since the app has never been flagged as dirty.");d=u;_()}function N(){I(_)}var R={saveApp:k,haveWeDoneSaveButNoReload:S,notifyThatNewChangeIsDoneAndSaveIsRequired:D,updateWhenLastScriptWasExecuted:N,isAppDirty:q,isSaveOngoing:A,setSaveOngoing:E,getLastSaveSuccess:L,onAppIsNowDirty:M,onAppIsNowDirtyRemove:P,onAppIsNowClean:O,onAppIsNowCleanRemove:F,getLastSavedAsString:function t(){if(p){var e=new a.default(null);var n=e.format(p,"HH:mm:ss");return l.default.get("scripteditor.autosave.lastsaved",n)}return""},getLastReloadAsString:function t(){return b||""},getTitle:function t(){return v},isAutoSaveOn:function t(e){if(m&&e&&i.default.getFlag("DISABLE_DLE_AUTOSAVE"))return false;return m},doDirtyRollback:$,init:function t(){d=new Date;s.default.getApp().then(function(t){t.global.getConfiguration().then(function(t){var e=t.qFeatures;m=e.qAutoSave});I();T();t.Invalidated.bind(T)})},reset:function t(){I(_)}};e.default=R;t.exports=e.default},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89)],s=function(t,e){function n(n){return n?e.resolve(n.enigmaModel):t.getApp()}var i={};i.create=function(t,e){return n(e).then(function(e){return e.createStory(t).then(function(t){return t.createSlide().then(function(){return t})})})};i.remove=function(t,e){return n(e).then(function(e){return e.destroyObject(t)})};i.get=function(t,e){return n(e).then(function(e){return e.getObject(t)})};i.getList=function(t){return n(t).then(function(t){return t.getStoryListObject()})};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(101)],s=function(t){var e={getDimensions:function e(n){return t.getValue(n,"qHyperCubeDef.qDimensions",[])},getNumDimensions:function e(n){return t.getValue(n,"qHyperCubeDef.qDimensions.length",0)},getMeasures:function e(n){return t.getValue(n,"qHyperCubeDef.qMeasures",[])},getNumMeasures:function e(n){return t.getValue(n,"qHyperCubeDef.qMeasures.length",0)},getDimensionLayouts:function e(n,i){var s=t.getValue(n,i?i+".qHyperCube":"qHyperCube",null);if(s)return s.qDimensionInfo;return[]},getDimensionLayout:function t(e,n,i){return this.getDimensionLayouts(n,i).filter(function(t){return e===t.cId})[0]},getMeasureLayouts:function e(n,i){var s=t.getValue(n,i?i+".qHyperCube":"qHyperCube",null);if(s)return s.qMeasureInfo;return[]},getMeasureLayout:function t(e,n,i){return this.getMeasureLayouts(n,i).filter(function(t){return e===t.cId})[0]}};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(676),n(742),n(745),n(133),n(219),n(147),n(90),n(100)],s=function(t,e,n,i,s,o,r,a,l){function c(t){return l.currentPalette.indexOf(t)}function u(t,e){delete t.baseColor;t.coloring||(t.coloring={});e.baseColor&&e.baseColor.color&&"none"!==e.baseColor.color?a.extend(true,t.coloring,{baseColor:{color:e.baseColor.color,index:c(e.baseColor.color)}}):delete t.coloring.baseColor;e.gradient&&e.gradient.colors&&0!==e.gradient.colors.length?t.coloring.gradient={colors:e.gradient.colors.map(function(t){return{color:t,index:c(t)}}),breakTypes:e.gradient.breakType,limits:e.gradient.limits,limitType:e.gradient.limitType}:delete t.coloring.gradient}function d(t){var e={qInfo:{qType:"measure"},qMetaDef:{title:t.name,description:t.description,tags:t.tags},qMeasure:{qLabel:t.name,qDef:t.expr,qLabelExpression:t.labelExpression,descriptionExpression:t.descriptionExpression}};u(e.qMeasure,t);return r.create(e)}function p(t,e){var n={name:e.name,rowEstExpr:e.rowEstExpr,templateApp:e.templateApp,properties:{rowEstRange:[{highBound:e.rowEstCount}],genAppLimit:[{context:"User_*",limit:e.genAppLimit}],appRetentionTime:[{context:"User_*",retentionTime:e.retentionLimit}],targetSheet:[{context:"User_*",sheetId:e.defaultViewId}]}};e.publishToStreamId&&(n.properties.publishTo=[{context:"User_*",streamId:e.publishToStreamId}]);var i=new o(n);return i.create(t)}function h(t,e,n,i){n.data.name=i.name;n.data.properties.rowEstRange[0].highBound=i.rowEstCount;n.data.properties.genAppLimit[0].limit=i.genAppLimit;n.data.rowEstExpr=i.rowEstExpr;n.data.templateApp=i.templateApp;n.data.properties.appRetentionTime[0].retentionTime=i.retentionLimit;n.data.properties.targetSheet[0].sheetId=i.defaultViewId;i.publishToStreamId?n.data.properties.publishTo.length?n.data.properties.publishTo[0].streamId=i.publishToStreamId:n.data.properties.publishTo=[{context:"User_*",streamId:i.publishToStreamId}]:n.data.properties.publishTo=[];return s.updateODAGLink(t,e,n.data)}function f(t,e,n){t.qMetaDef.title=n.name;t.qMetaDef.description=n.description;t.qMetaDef.tags=n.tags;t.qMeasure.qLabel=n.name;t.qMeasure.qDef=n.expr;t.qMeasure.qLabelExpression=n.labelExpression;t.qMeasure.descriptionExpression=n.descriptionExpression;u(t.qMeasure,n);return e.setProperties(t)}function g(e){function n(n){return p(e,n).then(function(){t.$rootScope.$emit("clearUndo")})}var s=i.show({title:"ODAGLink.Dialog.Add.Title",confirm:"Common.Create",name:"",inEditMode:false,description:"",genAppLimit:5,retentionLimit:"",defaultViewId:"",publishToStreamId:"",confirmCallback:n,app:e});s.resultPromise.then(function(){s.destroy()})}function v(e,n,s){o.get(n,e).then(function(o){var r=o.properties;function a(i){return h(e,n,r,i).then(function(e){s&&s(e);t.$rootScope.$emit("clearUndo")})}var l={title:"ODAGLink.Dialog.Edit.Title",confirm:"Common.Save",inEditMode:true,name:r.data.name,templateApp:r.data.templateApp,rowEstExpr:r.data.rowEstExpr,rowEstCount:r.data.properties.rowEstRange[0].highBound,genAppLimit:r.data.properties.genAppLimit[0].limit,retentionLimit:r.data.properties.appRetentionTime.length?r.data.properties.appRetentionTime[0].retentionTime:"",defaultViewId:r.data.properties.targetSheet.length?r.data.properties.targetSheet[0].sheetId:"",publishToStreamId:r.data.properties.publishTo.length?r.data.properties.publishTo[0].streamId:"",confirmCallback:a,app:e};var c=i.show(l);c.resultPromise.then(function(){c.destroy()})})}function m(n,i,s){var o,r=n||"",l=a.escapeField(r);var c=function e(n){d(n).then(function(e){s&&s(e);t.$rootScope.$emit("clearUndo")})};var u={title:"Measure.Dialog.Add.Title",confirm:"Common.Create",name:r,description:"",tags:[],expr:n?"("+l+")":"",callback:c};o=e.show(u);o.closed.then(function(){o=null})}function b(n,i){r.get(n).then(function(n){n.getProperties().then(function(s){var o=function e(o){f(s,n,o).then(function(e){i&&i(e);t.$rootScope.$emit("clearUndo")})};var r={title:"Measure.Dialog.Edit.Title",confirm:"Common.Save",name:s.qMetaDef.title,description:s.qMetaDef.description,descriptionExpression:s.qMeasure.descriptionExpression,tags:s.qMetaDef.tags,expr:s.qMeasure.qDef,labelExpression:s.qMeasure.qLabelExpression,baseColor:s.qMeasure.coloring?s.qMeasure.coloring.baseColor:s.qMeasure.baseColor,gradient:s.qMeasure.coloring?s.qMeasure.coloring.gradient:s.qMeasure.gradient,callback:o};var a=e.show(r);a.closed.then(function(){a=null})})})}function y(t){n.show({title:"Visualization.Dialog.Add.Title",confirm:"Visualization.Dialog.Saveclose",visualization:{name:t.qMetaDef.title,description:t.qMetaDef.description,tags:t.qMetaDef.tags},onSaveCallback:t.onSave})}function x(t){t.onSave({expr:t.expr,path:t.elem.data("path"),pathAttribute:"definition"})}return{addMeasure:m,editMeasure:b,addMetadata:y,addODAGLink:g,editODAGLink:v,breakLink:x}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(688),n(689)],s=function(t,e){t.directive("objectAddTypeahead",[function(){return{template:e,scope:{},transclude:true,replace:true,restrict:"E",controller:["$scope",function(t){var e=this;t.items=[];function n(){var e=t.menu;if(t.activeItem){var n=t.activeItem;var i=n.getPosition();i.top<0?e.setScrollTop(n.getOffsetTop()):i.top+n.getHeight()>e.getHeight()&&n.scrollIntoView(false)}else e.setScrollTop(0)}this.activate=function(e){t.activeItem=e};this.nextItem=function(i){var s=t.items.indexOf(t.activeItem);"undefined"!==typeof i&&(s=(s+i)%t.items.length);s===t.items.length-1?e.activate(null):-1===s?e.activate(t.items[0]):e.activate(t.items[s+1]);n()};this.prevItem=function(i){var s=t.items.indexOf(t.activeItem);"undefined"!==typeof i&&(s=(s-i+t.items.length)%t.items.length);0===s?e.activate(null):-1===s?e.activate(t.items[t.items.length-1]):e.activate(t.items[s-1]);n()};this.getActiveItem=function(){return t.activeItem};this.selectActiveItem=function(){t.activeItem&&t.activeItem.select()};this.select=function(e){t.select({item:e});t.activeItem=null};this.setMenu=function(e){t.menu=e};this.addItem=function(e){t.items.push(e)};this.removeItem=function(e){var n=t.items.indexOf(e);n>=0&&t.items.splice(n,1)}}]}}]);t.directive("objectAddTypeaheadInput",[function(){return{require:["^objectAddTypeahead","ngModel"],link:function t(e,n,i,s){var o=s[0],r=s[1];n.on("keydown",function(t){t.stopPropagation();if(13===t.which||9===t.which){t.preventDefault();o.getActiveItem()?e.$apply(function(){o.selectActiveItem()}):e.$apply(function(){e.$eval(i.onEnter,{$event:t})})}else if(33===t.which){t.preventDefault();e.$apply(function(){o.prevItem(10)})}else if(34===t.which){t.preventDefault();e.$apply(function(){o.nextItem(10)})}else if(40===t.which){t.preventDefault();e.$apply(function(){o.nextItem()})}else if(38===t.which){t.preventDefault();e.$apply(function(){o.prevItem()})}else if(27===t.which){t.preventDefault();e.$apply(function(){e.$eval(i.onEscape,{$event:t})})}});e.$watch(o.getActiveItem,function(t){t?t.item.label&&n.val(t.item.label):n.val(r.$modelValue)});e.$watch(r.$modelValue,function(t){t||o.activate(null)})}}}]);t.directive("objectAddTypeaheadMenu",[function(){return{require:"^objectAddTypeahead",link:function t(e,n,i,s){e.controller=s;s.setMenu({getHeight:function t(){return n.height()},setScrollTop:function t(e){n[0].scrollTop=e}})}}}]);t.directive("objectAddTypeaheadItem",[function(){return{require:"^objectAddTypeahead",link:function t(e,n,i,s){var o=e.$eval(i.objectAddTypeaheadItem);var r={item:o,getOffsetTop:function t(){return n[0].offsetTop},scrollIntoView:function t(e){n[0].scrollIntoView(e)},getPosition:function t(){return n.position()},getHeight:function t(){return n.height()},select:function t(){a()}};function a(){e.$eval(i.onSelect,{item:o})}s.addItem(r);e.$on("$destroy",function(){s.removeItem(r)});e.$watch(function(){var t=s.getActiveItem();if(t)return t.item===o;return false},function(t){t?n.addClass("object-add-typeahead-active"):n.removeClass("object-add-typeahead-active")});n.on("mouseenter",function(){n.addClass("object-add-typeahead-hover")});n.on("mouseleave",function(){n.removeClass("object-add-typeahead-hover")});n.on("qv-activate",function(t){t.preventDefault();e.$apply(function(){a()})})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(89),n(133),n(92),n(49)],s=function(t,e,n,i,s){var o=i.extend("ODAGLink",{properties:null,getProperties:function t(){return e.resolve(this.properties)},create:function t(e){return n.createODAGLink(e,this.properties.data)},init:function e(n){this.properties={type:"odaglink",data:{id:"",name:"",templateApp:"",rowEstExpr:"",privileges:[],properties:{rowEstRange:[{context:"*",highBound:null}],genAppLimit:[{context:"User_*",limit:5}],appRetentionTime:[{context:"User_*",retentionTime:""}],publishTo:[],targetSheet:[{context:"User_*",sheetId:""}]},tags:[]}};t.extend(true,this.properties.data,n);return this}});o.getLinkedObjects=function(){return e.resolve([])};o.get=function(t,e){return n.loadODAGLink(e,t).then(function(t){var e=s.getFlag("ODAG_SAAS_ENABLED")?t:t.objectDef;var n=new o(e);return n})};o.getList=function(t,e){return n.getODAGLinks(t,e).then(function(e){var i=[];for(var s=0;s<e.length;s++){var r=e[s];if(r&&r.link)if("decommissioned"===r.link.status)n.removeODAGAppLinkWithODAGLinkId(t,r.link.id);else{var a=new o(r.link);i.push(a)}}return i})};return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(155),n(89),n(94),n(91),n(54),n(154),n(147),n(246),n(363),n(273),n(142),n(93),n(275),n(271)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p){t.service("qvSelectionInsightsService",["qvCaoSearchService","qvCurrentSelectionsService",function(t,h){var f;var g=new e;var v=new l(s.localeDetected,"","","","numeric");var m={};var b=2e4;var y="$";function x(t){return v.format(t,"#.#A")}function q(t){var e=parseFloat(t.toFixed(3));return new Intl.NumberFormat(s.localeDetected,{style:"percent",maximumSignificantDigits:3,minimumSignificantDigits:1}).format(parseFloat(e))}function S(t){var e="";var n=t.measureAggregation;if("avg"==n){var i=x(t.excludedMeasure.qNumber);e=s.get("SelectionInsights.CardSummaryAvg",[i])}else e=Number.isNaN(+t.excludedMeasurePercentage.toFixed(1))?"NaN":s.get("SelectionInsights.CardSummarySum",[q(t.excludedMeasurePercentage.toFixed(1)/100)]);return e}function w(t){var e=t.counts.excluded+t.counts.included;var n=t.counts.excluded;var i=t.measureBreakdown.excluded.num;return n>1?s.get("SelectionInsights.InsightSummaryExcludedLongMulti",[n,e,"<span class='dimLabelDesc'>"+t.dimension+"</span>","<span>"+i+"</span>","<span>"+t.measure+"</span>","<span>"+(t.measureAggregation[0].toUpperCase()+t.measureAggregation.slice(1))+"</span>"]):s.get("SelectionInsights.InsightSummaryExcludedLongSingle",[n,e,"<span class='dimLabelDesc'>"+t.dimension+"</span>","<span>"+i+"</span>","<span>"+t.measure+"</span>","<span>"+(t.measureAggregation[0].toUpperCase()+t.measureAggregation.slice(1))+"</span>"])}function C(t,e){var i=new n;var o={};var r=true;o.counts={};o.counts.excluded=parseFloat(e.analysis.numExcluded);o.counts.included=parseFloat(e.analysis.distinctCount)-parseFloat(e.analysis.numExcluded);o.counts.summary=s.get("SelectionInsights.CardCountsSummary",[o.counts.excluded,o.counts.excluded+o.counts.included,q(o.counts.excluded/(o.counts.excluded+o.counts.included))]);var a="";var l="";var c="";var u="";for(var d in e.analysis.matchRecord.matches){var p=e.analysis.matchRecord.matches[d];if("dimension"==p.slotRole){c=p.field||p.libIdLabel;u=p.libId}else{a=p.field||p.libIdLabel;l=Array.isArray(p.aggr)?p.aggr[0]:p.aggr}}o.dimension=c;o.measure=a;o.measureAggregation=l;o.dimensionId=u;var h=[];var f=t.evaluateEx(e.analysis.aggrMrsExcluded);h.push(f);var g=t.evaluateEx(e.analysis.aggrMrsTotal);h.push(g);var v=t.evaluateEx(e.analysis.aggrMrsIncluded);h.push(v);var y=t.evaluateEx(e.analysis.aggrMrs);h.push(y);var C=setTimeout(function(){var e=false;h.forEach(function(n){if(-1===n.$$state.status){e=true;t.global.cancelRequest(n.requestId).then(function(){})}});e&&i.reject()},b);n.all(h).then(function(t){var n=t[0];var s=t[1];var a=t[2];var l=t[3];o.excludedMeasurePercentage=n.qNumber/s.qNumber*100;o.includedMeasurePercentage=a.qNumber/s.qNumber*100;o.excludedMeasure=n;o.totalMeasure=s;o.includedMeasure=a;o.summaryString=S(o);o.excludedVis={dimension:e.analysis.dim,measure:e.analysis.aggrMrsExcluded};o.includedVis={dimension:e.analysis.dim,measure:e.analysis.aggrMrsIncluded};o.measureBreakdown={};o.measureBreakdown.excluded={num:x(n.qNumber),percentage:o.excludedMeasurePercentage.toFixed(1)};o.measureBreakdown.included={num:x(a.qNumber),percentage:o.includedMeasurePercentage.toFixed(1)};o.selectedMeasure={total:x(s.qNumber),selected:{num:x(l.qNumber),percentage:l.qNumber/s.qNumber*100,qNum:l.qNumber},excluded:{num:x(s.qNumber-l.qNumber),percentage:(s.qNumber-l.qNumber)/s.qNumber*100,qNum:s.qNumber-l.qNumber}};o.summaryStringLong=w(o);m[o.dimension].insight=o;clearTimeout(C);r=o.excludedMeasurePercentage+o.includedMeasurePercentage<100.01&&o.counts.included>=0&&o.counts.excluded>=0&&o.excludedMeasurePercentage+o.includedMeasurePercentage>99.9;o.show=r;i.resolve({show:r,summary:o.summaryString})}).catch(function(t){i.reject(t)});return i.promise}function I(t){return t.getObject(i.model.id).then(function(t){return t.getLayout().then(function(t){return t.qMeta.title})})}function _(t){var e=void 0;t||(e={scope:["libItems"]});return e}function D(t){b=t.runtimeSettings.suggestedTimeout;var e={};var n=null;if(!o.isEmpty(t.appRecommendations)){var i=t.appRecommendations[0].visualizations;var s=[];i.forEach(function(t){if("excludedCompareMsrSelector"!=t.analysis.analysis){var i=parseFloat(t.analysis.numExcluded)/parseFloat(t.analysis.distinctCount);var o=(parseFloat(t.analysis.distinctCount)-parseFloat(t.analysis.numExcluded))/parseFloat(t.analysis.distinctCount);var r="";var a="";var l="";for(var c in t.analysis.matchRecord.matches){var u=t.analysis.matchRecord.matches[c];if("dimension"==u.slotRole)l=u.field||u.libIdLabel;else{r=u.field||u.libIdLabel;a=u.aggr}}var d=true;(0===i||0===o||"avg"!=a&&"sum"!=a)&&(d=false);s.indexOf(l)>-1&&(d=false);if(d){s.push(l);e[l]={vis:t,measure:r,measureAggregation:a}}else;}else for(var p in t.analysis.matchRecord.matches){var h=t.analysis.matchRecord.matches[p];"measure"==h.slotRole&&(n=h.field||h.libIdLabel)}})}return{insights:e,measure:n}}function k(t,e){var n=_(t);var i=[];var o=false;if(void 0!=e)if(e.masterItem){i.push(e.libId);o=true}else i.push(e.qName);return g.getExcludedCompareVisualizations(i,n,o).then(function(t){if(t.__report.appDataModel.memberSelectionDone)return D(t);throw{error:s.get("SelectionInsights.Unsupported")}})}function T(e){var n=[];return e?r.getList().then(function(t){return t.getLayout()}).then(function(t){var e=t.filter(function(t){return t.qTags&&(-1===t.qTags.indexOf("$date")||-1===t.qTags.indexOf("$timestamp"))&&-1===t.qTags.indexOf("$geopoint")&&(t.qTags.indexOf("$numeric")>-1||t.qTags.indexOf("$integer")>-1)});n=n.concat(e);return E()}).then(function(e){n=n.concat(e);var i=t.sortFields(n);return i}):E().then(function(e){var n=t.sortFields(e);return n})}function E(){return a.getList().then(function(t){return t.getLayout().then(function(t){var e=t.map(function(t){return{qName:t.qData.title,classifications:["measure"],masterItem:true,libId:t.qInfo.qId,libIdLabel:t.qMeta.title}});return e})})}function A(t){if(t&&t.selectionsInStates){var e=[];t.selectionsInStates.forEach(function(t){t.qSelectionObject.qSelections.forEach(function(e){e.stateName=t.stateName});e=e.concat(t.qSelectionObject.qSelections)});var n=e.filter(function(t){return!t.qIsHidden});n.forEach(function(t){t.translation=h.translate(t);t.screenReaderLabel=h.translatedScreenReaderLabel(t);t.name=t.qReadableName||t.qField;t.displayStateName=t.stateName===y?s.get(u.DEFAULT_STATE_TRANSLATION):t.stateName});var i=c.groupSelectionsByField(n);var o=i.filter(function(t){return!t.isSingleState});o.forEach(function(t){t.translation=h.translate(t);t.screenReaderLabel=h.translatedScreenReaderLabel(t)});i=i.sort(d.sortSelections);return i}}function L(t,e){var n={qHyperCubeDef:{qDimensions:[{qDef:{qFieldDefs:[e?t.excludedVis.dimension:t.includedVis.dimension],qFieldLabels:[t.dimension]},qNullSuppression:true}],qMeasures:[{qDef:{qDef:e?t.excludedVis.measure:t.includedVis.measure,qLabel:t.measureAggregation[0].toUpperCase()+t.measureAggregation.slice(1)+"("+t.measure+")",qNumFormat:{qType:"F",qnDec:2,qUseThou:0,qFmt:"#,##0.00",qDec:".",qThou:","}},qSortBy:{qSortByAscii:-1}}],qInterColumnSortOrder:[1,0],qInitialDataFetch:[{qTop:0,qHeight:500,qLeft:0,qWidth:2}],columnOrder:[0,1],columnWidths:[197,230],qSuppressMissing:true,qReductionMode:"N",qMode:"S",qPseudoDimPos:-1,qNoOfLeftDims:-1,qMaxStackedCells:5e3},qInfo:{qId:"",qType:"visualization"},visualization:"table"};return p.getApp().then(function(t){return t.enigmaModel.createSessionObject(n).then(function(t){return t})})}function M(t){if(t&&t.selectionsInStates){var e=c.getAllSelectionsInStates(t);var n=e.filter(function(t){return true===t.qOneAndOnlyOne}).map(function(t,e){return"<strong>"+(e?" ":"")+t.name+"</strong>"});if(n.length>0)return{isOneAndOnlyOne:true,items:n};return false}return false}function P(t){if(t&&t.selectionsInStates){var e=c.getAllSelectionsInStates(t);if(e.filter(function(t){return true===t.qLocked}).length>0)return true;return false}return false}f={getSheet:function t(e){return I(e).then(function(t){return t})},getInsightDimensions:function t(e,n){return k(e,n).then(function(t){m={};m=t.insights;var e=[];for(var n in m){var i={};i.excluded=parseFloat(m[n].vis.analysis.numExcluded);i.included=parseFloat(m[n].vis.analysis.distinctCount)-parseFloat(m[n].vis.analysis.numExcluded);i.summary=s.get("SelectionInsights.CardCountsSummary",[i.excluded,i.excluded+i.included,q(i.excluded/(i.excluded+i.included))]);e.push({dimension:n,counts:i,measure:m[n].measure,measureAggregation:m[n].measureAggregation,show:true})}return{insights:e,measure:t.measure}}).catch(function(t){throw t})},getInsightSummary:function t(e,n){var i=m[e].vis;return C(n,i).then(function(t){return t})},getInsightDetails:function t(e){return m[e].insight},clearInsights:function t(){m={}},getMeasures:function t(e){return T(e).then(function(t){return t})},getLocalizedPercentage:function t(e){return q(e)},getSelectionItems:function t(e){return A(e)},getTableVis:function t(e,n){return L(e,n).then(function(t){return t})},isOneAndOnlyOne:function t(e){return M(e)},isHasLockedSelections:function t(e){return P(e)}};return f}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(155),n(406),n(367),n(876),n(877),n(880),n(368)],s=function(t,e,n,i,s,o,r,a){t.service("qvCaoChartService",["qvCaoComplexityEstimatorService",function(t){var l;var c;var u=new n;function d(t,e,n){n.title=t;return i.createChart(n,e,false).then(function(t){return{model:t}})}function p(t){if(c)return g(c.app,c.searchPhrase,c.libItems,t);return e.reject({norefresh:true})}function h(t,e,n){var i=[];e.forEach(function(e){i.push(r.generateChartPropertiesForRecommendation(e.visualization,n).then(function(n){e.visualization=new s(e.visualization,t.__report,n);return e}))});return i}function f(n,i){var s=[];var r=3e3;n.runtimeSettings&&n.runtimeSettings.suggestedTimeout&&(r=n.runtimeSettings.suggestedTimeout);n.appRecommendations.forEach(function(e){e.recAnalyses.forEach(function(e){if("fact"===e.analysis.analysis&&1!==e.relevance)return;var n={relevance:e.relevance,suggestedTimeout:r,visualization:e,complexity:t.estimateComplexity(e,i)};s.push(n)})});return e.all(h(n,s,i)).then(function(t){var e=[];n.appCharts&&n.appCharts.forEach(function(t){t.appearsOnSheets.length>0&&e.push({relevance:t.relevance,suggestedTimeout:r,visualization:new o(t.id,t.appearsOnSheets,n.__report,i),complexity:-1})});return{recommendations:t.map(function(t){return new a(t,i)}),chartMatches:e.map(function(t){return new a(t,i)})}})}function g(t,e,n,i){c={app:t,searchPhrase:e,libItems:n};var s={exploreSupplemental:["appInsights"]};var o={};n&&(o={scope:["libItems"]});"boolean"===typeof i&&false===i&&(o.appPrecedents="skip");return u.getInsightRecommendations(e,s,true,[],o).then(function(e){return f(e,t)})}function v(t,e,n){c={app:t,searchPhrase:"",libItems:n};var i={exploreSupplemental:["appInsights"]};var s;n&&(s={scope:["libItems"]});return u.getVisRecommendations(e,true,i,[],s).then(function(e){return f(e,t)})}function m(t,e,n){return d(t,e,n)}function b(t,e){var n=t.matchRecord;var i=t.analysis.analysis;return u.adaptMatchRecord("update",n,i).then(function(n){n[0].analysis={analysis:n[0].analysis,analysisGroup:n[0].analysisGroup,dims:n[0].dims,msrs:n[0].msrs,titleTemplate:n[0].titleTemplate};return r.generateChartPropertiesForRecommendation(n[0],e).then(function(e){return{properties:e,analysis:n[0].analysis,matchRecord:t.matchRecord}})})}l={getInsights:g,getVisualRecommendations:v,refreshInsights:p,buildInsightChart:m,adaptRecommendation:b};return l}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={resizeCharts:function t(e){if("function"===typeof Event)e.dispatchEvent(new Event("resize"));else{var n=e.document.createEvent("UIEvents");n.initUIEvent("resize",true,false,e,0);e.dispatchEvent(n)}}};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t="qCaoStorageObj";function e(){var e=JSON.parse(sessionStorage.getItem(t));null===e&&(e=JSON.parse(localStorage.getItem(t))||{});return e}function n(e){var n=JSON.parse(localStorage.getItem(t))||{};if(!n||!n[e]){n[e]={contextPanel:true,assetsPanel:true};sessionStorage.setItem(t,JSON.stringify(n));localStorage.setItem(t,JSON.stringify(n));return n[e]}return n[e]}var i={storageObj:function t(e){return n(e)},toggleContextPanel:function n(i){var s=e(i);s[i].contextPanel=!s[i].contextPanel;localStorage.setItem(t,JSON.stringify(s));sessionStorage.setItem(t,JSON.stringify(s));return s},toggleAssetsPanel:function n(i){var s=e(i);s[i].assetsPanel=!s[i].assetsPanel;localStorage.setItem(t,JSON.stringify(s));sessionStorage.setItem(t,JSON.stringify(s));return s}};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(48),n(140),n(633),n(451),n(100),n(90),n(162),n(108),n(49)],s=function(t,e,n,i,s,o,r,a,l,c){var u=function e(i,s,o){var r=i&&"function"===typeof i.getConfiguration?i:n.get(s);return t.resolve(r).then(function(t){var e=t.layout&&t.layout.qTitle||"";var n=t.id||"";var i=null;var s=t.getConfiguration().then(function(s){for(var r=0;r<s.qServices.length;r++)if("senseprinting"===s.qServices[r].qName.toLowerCase()){i={appName:e,appId:n,qUrl:c.getFlag("EXPORT_API_ENDPOINT")?"".concat(o||"","/api/export/printing/"):o?o+unescape(s.qServices[r].qUrl):unescape(s.qServices[r].qUrl),localeInfo:t.layout.qLocaleInfo};break}return i});return s})};var d=function e(n,i,r,l,c,d){var p=n.model.layout.qInfo.qType;var h="story"===p||"sheet"===p?p:"object";var f="object"===h?n:n.model;var g=s.snapshot(n.model.id,h,{size:r,source:f,sourceSize:i,sheetLayout:"grid"});var v=u(c,n.model.app.id,d);var m=a.getProperties().then(function(t){return{sheetLogoPosition:t.sheetLogoPosition,sheetLogoThumbnail:t.sheetLogoThumbnail,sheetTitleBgColor:t.sheetTitleBgColor,sheetTitleColor:t.sheetTitleColor,sheetTitleGradientColor:t.sheetTitleGradientColor,rtl:t.rtl}});return t.all([g,v,m]).then(function(e){var n=e[0];var i=e[1];var s=e[2];if(!i)return t.reject();var r=o.getCurrentTheme();var a=i.qUrl;var c=l;c.objTree=n;c.appName=i.appName;c.appId=i.appId;c.appStylingInfo=s;c.localeInfo=i.localeInfo;c.themeName=r;return{qUrl:a,payload:c,snapshotType:h}})};var p={poolPromise:null,printTree:function t(e,n,i,s,o){return d(e,n,i,s).then(function(t){return p.enqueueRequest(t.qUrl,t.payload,t.snapshotType,o,s.timeoutMsec,s.checkInterval)})},getPrintDataForQSC:function e(n,s){var o=t();d(n,null,null,s).then(function(t){var e={imageType:"Jpeg",captureSize:{},images:[{name:"280x375",width:280,height:375,dpi:96,requestId:"?requestId="+i.generateId()},{name:"400x400",width:400,height:400,dpi:96,requestId:"?requestId="+i.generateId()},{name:"fallback",width:1024,height:768,dpi:96,requestId:"?requestId="+i.generateId()}],payload:t.payload,url:t.qUrl+"export/object/image",pollingUrl:t.qUrl+"export/request/status",host:location.host,prefix:r.basePath};o.resolve(e)},function(){o.reject({status:-1})});return o.promise},enqueueRequest:function n(s,o,r,a,l,c){var u=t();this.cancel(a);var d=this.getStates();l=l||36e5;c=c||3e3;var h=l/c;var f=0;var g=i.generateId();var v=s+"export/"+("story"===r?"story":"object")+"/"+a;v=v+"?requestId="+g;var m=e.getService("$http");var b=e.getService("$interval");var y=null;m({url:v,method:"POST",data:o}).then(function(t){var e=t.data;var n=e&&e.requestId;var i=s+"export/request/status?requestId="+n;var o=function t(){m({url:i,method:"GET"}).then(function(t){var e=t.data;f++;if(f>h){b.cancel(y);u.reject({status:d.TIMEOUT});return}if(e&&e.status){var n=e.status;if("Failed"===n||"Canceled"===n){b.cancel(y);u.reject({status:"Canceled"===n?d.CANCELED:d.FAILED})}else if("Completed"===n){b.cancel(y);u.resolve({status:d.COMPLETED,qUrl:e.qUrl})}}else{b.cancel(y);u.reject({status:d.FAILED})}}).catch(function(t,e){b.cancel(y);u.reject({status:d.FAILED,data:t,httpStatusCode:e})})};y=b(o,c);switch(a){case"image":p.poolPromiseImage=y;break;case"pdf":p.poolPromisePdf=y;break;default:p.poolPromise=y}}).catch(function(t,e){u.reject({status:d.FAILED,data:t,httpStatusCode:e})});e.$rootScope.$on("$routeChangeStart",function(){this.cancel()});return u.promise},cancel:function t(n){var i=[];switch(n){case"image":i.push(this.poolPromiseImage);break;case"pdf":i.push(this.poolPromisePdf);break;default:i.push(this.poolPromise,this.poolPromiseImage,this.poolPromisePdf);break}if(i.length>0){var s=e.getService("$interval");i.forEach(function(t){if(t){s.cancel(t);t=null}})}},getStates:function t(){return{NODATA:-4,CANCELED:-3,TIMEOUT:-2,FAILED:-1,IDLE:0,PENDING:1,COMPLETED:2}},printObject:function t(e,n,i,s,o,r,a){return l.setup().then(function(t){return d(n,s,o,r,e,t.isPersonalMode?null:i).then(function(t){return p.enqueueRequest(t.qUrl,t.payload,t.snapshotType,a,void 0,void 0)})})}};return p}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92)],s=function(t){var e;e=t.extend("SelectionToolbar",{menuButtons:[],init:function t(e,n,i,s,o,r){o=o||[];this.menuButtons=r||[];var a=[];this.backendApi=e;this.selectionsApi=n;this.showMenu=i;this.showLock=s;o&&o.length&&a.push({clazz:"sel-toolbar-separator",buttonClass:"sel-toolbar-icon-separator",isDisabled:function t(){return true}});a.push({name:"Tooltip.CancelSelections",tid:"selection-toolbar.undo",isIcon:false,iconClass:"lui-icon lui-icon--close",buttonClass:"sel-toolbar-cancel",action:function t(){this.selectionsApi.cancel()}});a.push({name:"Tooltip.ConfirmSelections",tid:"selection-toolbar.refresh",iconClass:"lui-icon lui-icon--tick",buttonClass:"sel-toolbar-confirm",action:function t(){this.selectionsApi.confirm()},isDisabled:function t(){return!this.selectionsApi.selectionsMade}});this.buttons=o.concat(a)},hasState:function t(e){if(!e)return true;var n=this.backendApi.getDimensionInfos();for(var i=0;i<n.length;++i)for(var s=0;s<e.length;++s)if(n[i].qStateCounts[e[s]]>0)return true;return false}});return e}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(102),n(94),n(50)],s=function(t,e,n){var i={},s,o,r,a,l;i.ViewMode={grid:0,list:1};i.NavigationMode={sheet:"sheet",bookmark:"bookmark",story:"story"};s=i.ViewMode.grid;o=i.NavigationMode.sheet;l=s;r=false;t.mixin(i);i.notification("ViewModeChanged");i.notification("NavigationModeChanged");i.notification("AddingItemChanged");i.setViewMode=function(t){if(t!==s){s=t;i.ViewModeChanged.emit(s)}};i.setNavigationMode=function(t){if(t!==o){o=t;i.NavigationModeChanged.emit(o)}};i.setAddingItem=function(t){if(t!==r){r=t;i.AddingItemChanged.emit(r)}};i.setDuplicatingItem=function(t){t!==a&&(a=t)};e.StateChanged.bind(function(t){t===e.Views.sheet?i.setNavigationMode(i.NavigationMode.sheet):t===e.Views.story&&i.setNavigationMode(i.NavigationMode.story)});n.ViewChanged.bind(function(t){t&&(l=s)});Object.defineProperties(i,{viewMode:{get:function t(){return s}},navigationMode:{get:function t(){return o}},viewModeBeforeEnterSmallDevice:{get:function t(){return l}},addingItem:{get:function t(){return r}},duplicatingItem:{get:function t(){return a}}});return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(92)],s=function(t,e){var n=e.extend("ClassificationModel",{spec:null,init:function t(e){this.spec=e},getDataTypes:function e(n,i){var s=this._getFields(n,i);var o=[];o=s.map(function(t){return t.recommendedDataType||t.dataType});return t.uniq(o)},getClassifications:function e(n,i){var s=this._getFields(n,i);var o=s.map(function(t){return t.classifications});o=t.flatten(o);return t.uniq(o)},getDefaultAggregation:function t(e,n){var i=this._getFields(e,n);return i[0].defaultAggregation},_getFields:function e(n,i){var s=[];i.forEach(function(e){var i=t.findWhere(this.spec.datasets,{name:e});if(i){var o=t.findWhere(i.fields,{name:n});o&&s.push(o)}}.bind(this));return s}});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(173),n(89),n(93)],s=function(t,e,n){function i(t){return t?e.resolve(t.enigmaModel):n.getApp()}var s={},o=500;s.getLibraryContent=function(t,e){return i().then(function(n){return n.getSnapshotListObject().then(function(n){n.Invalidated&&n.Invalidated.unbind();n.Invalidated.bind(e);return n.getLayout().then(function(e){return e.filter(function(e){var n=true;t&&(n=t===e.qData.sourceObjectId);return!e.qData.isClone&&n})})})})};s.unbindList=function(){return i().then(function(t){return t.getSnapshotListObject().then(function(t){t.Invalidated.unbind()})})};s.getSnapshotCount=function(t){return i().then(function(e){return e.getSnapshotList().then(function(e){var n=0;for(var i=0;i<e.length;i++)e[i].qData.isClone||e[i].qData.sourceObjectId!==t||n++;return n})})};s.create=function(e,n){e&&(e.qInfo={qType:"snapshot"});return i().then(function(i){return i.getSnapshotList().then(function(i){var r=0;for(var a=0;a<i.length;a++)i[a].qData.isClone||r++;var l=r<o;return!!l&&t.create.call(s,e,n).then(function(t){return{limit:l,id:t.id}})})})};s.get=function(e,n){return t.get(e,n)};s.remove=function(e,n){return t.remove(e,n)};s.getEmbedded=function(t){return t.enigmaModel.getSnapshotObject()};return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(110),n(91)],s=function(t,e){var n=t.NxLocalizedErrorCode;function i(t){return"ErrorCode."+t}return{getDimensionError:function t(s){var o;o=s===n.LOCERR_CALC_INVALID_DEF?"Object.ErrorMessage.InvalidDimension":s===n.LOCERR_CALC_NOT_IN_LIB?"Object.ErrorMessage.MissingDimension":i(s);return e.get(o)},getMeasureError:function t(s){var o;o=s===n.LOCERR_CALC_INVALID_DEF?"Object.ErrorMessage.InvalidMeasure":s===n.LOCERR_CALC_NOT_IN_LIB?"Object.ErrorMessage.MissingMeasure":i(s);return e.get(o)},getHyperCubeError:function t(n){var s=i(n);return e.get(s)},getListObjectError:function t(n){var s=i(n);return e.get(s)}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(96),n(92),n(102),n(164)],s=function(t,e,n,i){var s=t(document),o=[],r="chart-interaction";function a(t){return r+"."+t}function l(t,e){return t.priority-e.priority}function c(t,e){if(t.filter(function(t){return t.target===e.target&&t.container===e.container}).length)return null;e.priority=Number.isNaN(+e.priority)?0:e.priority;t.push(e);t.sort(l);return e}function u(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function d(t,e,n){return t.filter(function(t){return t[n]===e})}var p={tap:{containers:[]},taptwo:{containers:[]},tapthree:{containers:[]},swipe:{containers:[]},swipetwo:{containers:[]},wheelswipe:{containers:[]},rotate:{containers:[]}};var h={mousemove:{containers:[]},mouseleave:{containers:[]},mousewheel:{containers:[]},mouseup:{containers:[]}};function f(t,n,i){var s=t.gesture,o=t.action,r=t.item.targets,a;for(var l=0;l<r.length;l++){a=r[l].target;if(a.active(r[l].data)){a.preventDefault&&("touchmove"===n.type||"touchstart"===n.type||"touchend"===n.type?e.WebkitHack.prevent():n.preventDefault());a[s][o]&&a[s][o].apply(this,[n,i,r[l].data]);if(a.exclusive())break}}}function g(t,e,n){var i=t.gesture,s=t.item.targets,o;for(var r=0;r<s.length;r++){o=s[r].target;if(o.active()){o.preventDefault&&e.preventDefault();o[i].apply(this,[e,n,s[r].data]);if(o.exclusive&&o.exclusive())break}}}function v(t,e){t.handlers.start=function(n,i){f.apply(this,[{gesture:e,action:"start",item:t},n,i])};t.handlers.end=function(n,i){f.apply(this,[{gesture:e,action:"end",item:t},n,i])};if(["swipe","swipetwo","wheelswipe","rotate"].contains(e)){t.handlers.update=function(n,i){f.apply(this,[{gesture:e,action:"update",item:t},n,i])};t.handlers.cancel=function(n,i){f.apply(this,[{gesture:e,action:"cancel",item:t},n,i])}}}function m(t,e){var n={id:a(e),options:{preventDefault:false}};Object.keys(t.handlers).forEach(function(e){n[e]=t.handlers[e]});switch(e){case"swipe":n.options.useMomentum=true;n.options.inertia=.5;case"tap":n.options.touches=1;break;case"swipetwo":n.options.useMomentum=true;n.options.inertia=.5;case"taptwo":n.options.touches=2;break;case"tapthree":n.options.touches=3;break;case"wheelswipe":case"rotate":default:break}return n}function b(t){switch(t){case"taptwo":case"tapthree":return"tap";case"swipetwo":return"swipe";case"tap":case"swipe":case"wheelswipe":case"rotate":default:return t}}function y(t,n){var i=p[n].containers.filter(function(e){return e.container===t.container})[0];if(!i){i={container:t.container,targets:[],handlers:{}};v(i,n);i.unbind=e(t.container)[b(n)](m(i,n));p[n].containers.push(i)}c(i.targets,t);return i}function x(e,n){var i=h[n].containers.filter(function(t){return t.container===e.container})[0];if(!i){i={container:e.container,targets:[],handler:null};i.handler=function(t){g.apply(this,[{gesture:n,item:i},t])};var s=n+"."+r+("mousewheel"===n?" DOMMouseScroll."+r:"");var o=t(e.container);o.on(s,i.handler);i.unbindJqueryEvents=function(){o.off(s,i.handler)}}c(i.targets,e);return i}function q(t){switch(t){case"tap":case"swipe":case"taptwo":case"swipetwo":case"wheelswipe":case"tapthree":case"rotate":return"touche";case"mousemove":case"mouseleave":case"mousewheel":case"mouseup":return"jquery";default:break}}var S=n.extend({init:function t(){i.mixin(this);this.notification("ShiftToggle");this.notification("CtrlToggle");this.notification("KeyPressed");this.notification("MouseUp");this.notification("MouseLeave");s.on("keydown."+r,function(t){if(16!==t.which||this.shiftPressed){if(17===t.which&&!this.ctrlPressed){this.ctrlPressed=true;this.CtrlToggle.emit(this.ctrlPressed)}}else{this.shiftPressed=true;this.ShiftToggle.emit(this.shiftPressed)}}.bind(this));s.on("keyup."+r,function(t){if(16===t.which&&this.shiftPressed){this.shiftPressed=false;this.ShiftToggle.emit(this.shiftPressed)}else if(17===t.which&&this.ctrlPressed){this.ctrlPressed=false;this.CtrlToggle.emit(this.ctrlPressed)}this.KeyPressed.emit(t.which)}.bind(this));s.on("mouseup."+r,function(t){this.MouseUp.emit(t)}.bind(this));s.on("mouseleave."+r,function(t){this.MouseLeave.emit(t)}.bind(this));this.shiftPressed=false;this.ctrlPressed=false},addInteraction:function t(e,n,i,s,r){var a=c(o,{target:e,container:n,priority:i,types:{},data:r});if(!a)throw new Error("Duplicate add of interaction, potential leak detected.");s.forEach(function(t){if(!e[t])throw new Error("Interaction reciver does not implement the specified interaction type: "+t);switch(t){case"tap":case"taptwo":case"swipe":case"swipetwo":case"wheelswipe":case"tapthree":case"rotate":a.types[t]=y(a,t);break;case"mousewheel":case"mousemove":case"mouseleave":case"mouseup":a.types[t]=x(a,t);break;default:throw new Error("The specified interaction type does not exist: "+t)}})},removeInteraction:function t(n,i){var s=d(o,n,"target");i&&(s=d(s,i,"container"));s&&s.length&&s.forEach(function(t){Object.keys(t.types).forEach(function(n){var i=t.types[n];u(i.targets,t);if(!i.targets.length)if("touche"===q(n)){e(i.container).off("*",a(n));u(p[n].containers,i)}else i.unbindJqueryEvents()});u(o,t)})},removeAllInteraction:function t(){Object.keys(p).forEach(function(t){p[t].containers.forEach(function(n){e(n.container).off("*",a(t))});p[t].containers=[]});o=[]}});var w=new S;return{ShiftToggle:w.ShiftToggle,CtrlToggle:w.CtrlToggle,KeyPressed:w.KeyPressed,MouseUp:w.MouseUp,MouseLeave:w.MouseLeave,addInteraction:w.addInteraction,removeInteraction:w.removeInteraction,removeAllInteraction:w.removeAllInteraction,preventGestures:function t(n){if(!n.gestureHandler)throw new Error("Interaction.js, preventGestures: Called with invalid binder");e.preventGestures(n.gestureHandler)},_unitTestExposure:{toucheHandlers:p}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(92),n(89),n(93),n(90),n(183),n(182)],s=function(t,e,n,i,s,o,r){var a;t.service("classificationService",[function(){var t=e.extend("ClassificationService",{init:function t(){},_errorHandler:function t(e){this._deferredClassificationResult.reject(e)},_getAPI:function t(){a||(a=o.getApi("api/dataprepservice/v1","openapi",void 0,void 0,void 0,void 0,r.getServerNodeId()));return a},_getAppName:function t(){return s.getParameterByName("app")},_waitForLoadComplete:function t(e){var i=new n;this._progressIntervalTimer=setInterval(function(){e.global.getProgress(0).then(function(t){if(t.qFinished){i.resolve(true);clearInterval(this._progressIntervalTimer)}}.bind(this))}.bind(this),1e3);return i.promise},_getClassification:function t(e,i){return e.getAppProperties().then(function(t){if(!this._deferredClassificationResult||t.qLastReloadTime!==this._appLastReload){this._appLastReload=t.qLastReloadTime;this._deferredClassificationResult=new n;this._waitForLoadComplete(e).then(function(){i.apis.model.getClassification({appId:s.getParameterByName("app")}).then(function(t){this._deferredClassificationResult.resolve(t.obj.response)}.bind(this)).catch(this._errorHandler.bind(this))}.bind(this))}return this._deferredClassificationResult.promise}.bind(this))},getClassification:function t(){return this._getAPI().then(function(t){return i.getApp().then(function(e){return this._getClassification(e,t).then(function(t){return t})}.bind(this))}.bind(this)).catch(this._errorHandler.bind(this))}});return new t}])}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(90),n(48),n(91),n(203)],s=function(t,e,n,i){var s="M4,5.84027778 L4,3 L1.2,3 C1.08954305,3 1,3.08954305 1,3.2 L1,12.8 C1,12.9104569 1.08954305,13 1.2,13 L4,13 L4,6.72152812 C3.36593141,6.95951806 2.69926475,7.31160128 2,7.77777778 C2.66666667,6.94444444 3.33333333,6.29861111 4,5.84027778 Z M5,6.43553932 L5,13 L14.8,13 C14.9104569,13 15,12.9104569 15,12.8 L15,3.2 C15,3.08954305 14.9104569,3 14.8,3 L5,3 L5,5.29340278 C6.96296296,4.49594907 8.92592593,5.32407407 10.8888889,7.77777778 C10.8888889,7.77777778 11.2592593,7.40740741 12,6.66666667 L12,10 L8.66666667,10 C9.40740741,9.25925926 9.77777778,8.88888889 9.77777778,8.88888889 C8.52447243,6.88360034 6.93187984,6.06581715 5,6.43553932 Z M1,2 L15,2 C15.5522847,2 16,2.44771525 16,3 L16,13 C16,13.5522847 15.5522847,14 15,14 L1,14 C0.44771525,14 6.76353751e-17,13.5522847 0,13 L0,3 C-6.76353751e-17,2.44771525 0.44771525,2 1,2 Z";var o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function r(t,e,n){this.offsetX=t;this.offsetY=e;this.elem=n}r.prototype.update=function(t,e){var n={x:t.pageX+this.offsetX,y:t.pageY+this.offsetY},i=this.elem;e&&e.snapToGrid&&e.snapToGrid.snapFunc(t,e,n,i);if(o){i.style.left=n.x+"px";i.style.top=n.y+"px"}else{var s="translate3d("+n.x+"px, "+n.y+"px, 0)";i.style.transform=s;i.style.webkitTransform=s;i.style.mozTransform=s;i.style.msTransform=s}};r.prototype.end=function(){this.elem.parentNode.removeChild(this.elem)};function a(t,e,n,i,s){if(t[n]&&t[n][e.type])return t[n][e.type].call(null,i,s);if("function"===typeof t[n])return t[n].call(null,i,s)}function l(t,e,n,i){this.info=t;this.handle=e;this.targets=n;this.scrollComponents=i;this.rects=[];this.scrollRects=[];var s=document.body.getBoundingClientRect();this.docRect=s;var o=document.createElement("canvas");this.canvas=o;o.style.position="absolute";o.style.left=(window.pageXOffset||0)+"px";o.style.top=(window.pageYOffset||0)+"px";o.style.zIndex=999;o.width=s.width;o.height=s.height;o.classList.add("drag-and-drop-canvas");document.body.appendChild(o);this.context=o.getContext("2d")}function c(t,e,n,i){if(t.setLineDash){t.setLineDash(i);t.moveTo(d(e.x),d(e.y));t.lineTo(d(n.x),d(n.y));t.stroke()}else{i=i||[2,4];var s=i.length,o=n.x-e.x,r=n.y-e.y,a=Math.sqrt(o*o+r*r),l=a,c=0,u=true,p,h=e.x,f=e.y;o/=a;r/=a;t.moveTo(d(h),d(f));for(c=0;l>=.1&&c<5e3;++c){p=i[c%s];0===p&&(p=.001);p>l&&(p=l);h+=p*o;f+=p*r;t[u?"lineTo":"moveTo"](d(h),d(f));l-=p;u=!u}}}function u(t,e,n){return t.left<=e&&e<=t.right&&t.top<=n&&n<=t.bottom}function d(t){return Math.round(t)}function p(t,e,n,i){n=n||[5];if(t.setLineDash&&!i){t.setLineDash(n);t.strokeRect(d(e.left),d(e.top),d(e.right-e.left),d(e.bottom-e.top))}else{var s=t.lineWidth/2;t.beginPath();var o={x:e.left+s,y:e.top+s},r={x:e.right-s,y:e.top+s},a={x:e.right-s,y:e.bottom-s},l={x:e.left+s,y:e.bottom-s};i.top||c(t,o,r,n);i.right||c(t,r,a,n);i.bottom||c(t,a,l,n);i.left||c(t,l,o,n);t.stroke()}}function h(t,e,n,i,s){var o=t.lineWidth+4;t.beginPath();t.rect(e.left+o,e.top+o,e.right-e.left-2*o,e.bottom-e.top-2*o);t.fillStyle=n?i||s?"rgba(242,242,242,1)":"rgba(242,242,242,0.9)":"rgba(0,0,0,0.05)";t.fill()}function f(t,e,i,o,r){var a=e.right-e.left,l=e.bottom-e.top,c=e.left+a/2,u=e.top+l/2;if(a>40&&l>40){var d="gridcell"!==i&&(o||r)?"DropZone.CreateChart":"DropZone.DropItem",p=n.get(d),h="bold 13px QlikView Sans";t.fillStyle="#404040";t.textAlign="center";if(g(p,h,a)&&l>60){t.save();t.translate(c-8,u-14);t.fill(new Path2D(s));t.restore();t.font=h;t.fillText(p,c,u+18);return}t.save();t.translate(c-8,u+14);t.fill(new Path2D(s));t.restore()}}function g(t,e,n){var s=i.measureTextObject({type:"text",shape:{text:t,font:e,maxWidth:n-12,align:"center",maxNumLines:1}});return!s.truncated}function v(e,n,i){i.rects=[];for(var s=0;s<e.length;++s)a(e[s],n,"start",i);i.rects.sort(function(e,n){return t.compare(n.prio,e.prio)})}l.prototype.start=function(){var t=this.targets;var n=this.info;v(t,n,this);var i=this.scrollComponents;for(var s=0;s<i.length;++s)a(i[s],n,"start",this);e.$rootScope.$apply()};l.prototype.update=function(e){e.preventDefault();var n=e.pageX;var i=e.pageY;this.handle.update(e,this.info);var s;var o;var r=this.scrollRects;var l;var c;for(c=0;c<r.length;++c){s=r[c].targetRect;o=u(s,n,i);if(o){l=r[c];break}}this.scroller&&a(this.scroller,this.info,"leave",l,e);var d=!!l&&a(l,this.info,"enter",l,e);if(d){this.activeRect&&a(this.activeRect,this.info,"leave",this.info);this.context.clearRect(0,0,this.docRect.width,this.docRect.height);this.activeRect=null;this.scroller=l;return}if(this.scroller){v(this.targets,this.info,this);this.scroller=false}var g=this.rects;var m=null;for(c=0;c<g.length;++c){var b=g[c].targetRect;s=t.isFunction(b)?b():b;o=u(s,n,i);if(o){m=g[c];break}}if(m!==this.activeRect){this.activeRect&&a(this.activeRect,this.info,"leave",this.info);var y=this.context;var x=this.docRect;y.clearRect(0,0,x.width,x.height);if(m){y.strokeStyle="#F7A24D";y.lineWidth=2;var q=m.drawRect;if(q){var S=void 0!==m.isEmpty,w=1===m.prio;p(y,q,[5],m.ignoreLines);h(y,q,S,m.isEmpty,w);S&&f(y,q,this.info.type,m.isEmpty,w)}a(m,this.info,"enter",this.info)}}this.activeRect=m};l.prototype.registerDropRect=function(t){t.prio=t.prio||0;this.rects.push(t)};l.prototype.registerScrollRect=function(t){this.scrollRects.push(t)};l.prototype._end=function(){for(var t=0;t<this.targets.length;++t)a(this.targets[t],this.info,"end",this);document.body.removeChild(this.canvas);this.handle.end();this.ended=true;e.$apply(e.$rootScope)};l.prototype.end=function(t){this.activeRect&&a(this.activeRect,this.info,"drop",this.info,t);this._end()};l.prototype.cancel=function(){this._end()};var m=[];var b=[];var y;return{registerScrollComponent:function t(e){var n=b.indexOf(e);-1===n&&b.push(e)},unregisterScrollComponent:function t(e){var n=b.indexOf(e);-1!==n&&b.splice(n,1)},registerDropTarget:function t(e){var n=m.indexOf(e);-1===n&&m.push(e)},unregisterDropTarget:function t(e){var n=m.indexOf(e);-1!==n&&m.splice(n,1)},startDrag:function t(e,n){if(y&&!y.ended)return false;e.style.position="absolute";e.style.left="0";e.style.top="0";e.style.zIndex=9999;document.body.appendChild(e);var i=e.getBoundingClientRect();var s=new r(-i.width/2,-i.height/2,e);var o=m.filter(function(t){return a(t,n,"accept",n)});var c=b.filter(function(){return true});y=new l(n,s,o,c);try{y.start();return y}catch(t){y.cancel();return false}}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(384)],s=function(t){return{isContinuousChart:function e(n){if(!n.qHyperCube)return false;var i=this.canBeContinuousChart(n),s=t.isTimeDimension(i,n.qHyperCube.qDimensionInfo[0]),o="linechart"===n.visualization||n.qHyperCube.qMeasureInfo.some(function(t){return t.series&&"line"===t.series.type}),r=false;r=n.dimensionAxis&&n.dimensionAxis.continuousAuto?s&&o:i&&n.preferContinuousAxis;return r},canBeContinuousChart:function t(e){if(!e.qHyperCube||e.qHyperCube.qDimensionInfo.length<1)return false;var n=e.qHyperCube.qDimensionInfo[0].qTags||[];return e.qHyperCube.qDimensionInfo[0].qContinuousAxes&&n.indexOf("$numeric")>=0}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(91)],s=function(t,e,n){var i,s;s="Not supported in this object, need to implement in subclass.";i=t.extend({init:function t(e){e=e||{};this.dimensionDefinition=e.dimensionDefinition||{max:0};this.measureDefinition=e.measureDefinition||{max:0};e.dimensionDefinition&&(this.dimensionProperties=e.dimensionProperties||{});e.measureDefinition&&(this.measureProperties=e.measureProperties||{});e.globalChangeListeners&&(this.globalChangeListeners=e.globalChangeListeners);e.addDimensionLabel&&(this.addDimensionLabel=e.addDimensionLabel);this.app=e.app},setProperties:function t(e){this.properties=e},setGlobalChangeListeners:function t(e){this.globalChangeListeners=e},setLayout:function t(e){this.layout=e},type:function t(){throw new Error("Must override this method")},getDimensions:function t(){return[]},getDimension:function t(e){var n=this.getDimensions(),i=0;for(i;i<n.length;++i)if(n[i].qDef.cId===e)return n[i];return null},minDimensions:function t(){if("function"===typeof this.dimensionDefinition.min)return this.dimensionDefinition.min.call(null,this.properties,this);return this.dimensionDefinition.min||0},maxDimensions:function t(e){e=e||0;if("function"===typeof this.dimensionDefinition.max)return this.dimensionDefinition.max.call(null,this.getMeasures().length-e);return Number.isNaN(+this.dimensionDefinition.max)?1e4:this.dimensionDefinition.max},canAddDimension:function t(){return this.getDimensions().length<this.maxDimensions()},minMeasures:function t(){if("function"===typeof this.measureDefinition.min)return this.measureDefinition.min.call(null,this.properties,this);return this.measureDefinition.min||0},maxMeasures:function t(e){e=e||0;if("function"===typeof this.measureDefinition.max)return this.measureDefinition.max.call(null,this.getDimensions().length-e);return Number.isNaN(+this.measureDefinition.max)?1e4:this.measureDefinition.max},canAddMeasure:function t(){return this.getMeasures().length<this.maxMeasures()},getMeasures:function t(){return[]},getLabels:function t(){return[]},getMeasure:function t(e){var n=this.getMeasures(),i=0;for(i;i<n.length;++i)if(n[i].qDef.cId===e)return n[i];return null},addDimension:function t(){throw s},getSorting:function t(){throw s},addFieldDimension:function t(e,n,i){var s=this.createFieldDimension(e,n,i);return this.addDimension(s)},addLibraryDimension:function t(e,n){var i=this.createLibraryDimension(e,n);return this.addDimension(i)},addMeasure:function t(){throw s},addExpressionMeasure:function t(e,n,i){var s=this.createExpressionMeasure(e,n,i);return this.addMeasure(s)},addLibraryMeasure:function t(e,n){var i=this.createLibraryMeasure(e,n);return this.addMeasure(i)},addAlternativeFieldDimension:function t(e,n,i){var s=this.createFieldDimension(e,n,i);return this.addDimension(s,true)},addAlternativeLibraryDimension:function t(e,n){var i=this.createLibraryDimension(e,n);return this.addDimension(i,true)},addAlternativeExpressionMeasure:function t(e,n,i){var s=this.createExpressionMeasure(e,n,i);return this.addMeasure(s,true)},addAlternativeLibraryMeasure:function t(e,n){var i=this.createLibraryMeasure(e,n);return this.addMeasure(i,true)},replaceDimension:function t(){throw s},replaceMeasure:function t(){throw s},autoSortDimension:function t(){throw s},autoSortMeasure:function t(){throw s},createFieldDimension:function t(n,i,s){var o=e.extend(true,{},this.dimensionProperties||{},s||{});o.qDef||(o.qDef={});o.qOtherTotalSpec||(o.qOtherTotalSpec={});if(n){o.qDef.qFieldDefs=[n];o.qDef.qFieldLabels=i?[i]:[""];o.qDef.qSortCriterias=[{qSortByLoadOrder:1}]}else{o.qDef.qFieldDefs=[];o.qDef.qFieldLabels=[];o.qDef.qSortCriterias=[]}o.qDef.autoSort=true;return o},createLibraryDimension:function t(n,i){var s=e.extend(true,{},this.dimensionProperties||{},i||{});s.qDef||(s.qDef={});s.qOtherTotalSpec||(s.qOtherTotalSpec={});s.qLibraryId=n;s.qDef.qSortCriterias=[{qSortByLoadOrder:1}];s.qDef.autoSort=true;delete s.qDef.qFieldDefs;delete s.qDef.qFieldLabels;return s},createExpressionMeasure:function t(n,i,s){var o=e.extend(true,{},this.measureProperties||{},s||{});o.qDef||(o.qDef={});o.qDef.qNumFormat||(o.qDef.qNumFormat={});o.qDef.qDef=n;o.qDef.qLabel=i;o.qDef.autoSort=true;return o},createLibraryMeasure:function t(n,i){var s=e.extend(true,{},this.measureProperties||{},i||{});s.qDef||(s.qDef={});s.qDef.qNumFormat||(s.qDef.qNumFormat={});s.qLibraryId=n;s.qDef.autoSort=true;delete s.qDef.qDef;delete s.qDef.qLabel;return s},updateGlobalChangeListeners:function t(){this.globalChangeListeners&&(this.globalChangeListeners||[]).forEach(function(t){t&&"function"===typeof t&&t(this.properties,this)}.bind(this))},removeDimension:function t(){throw s},removeMeasure:function t(){throw s},moveDimension:function t(){throw s},moveMeasure:function t(){throw s},changeSorting:function t(){throw s},getAddDimensionLabel:function t(){return this.addDimensionLabel||n.get("Visualization.Requirements.AddDimension")}});return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(48),n(140),n(110),n(132),n(230),n(422),n(91),n(628),n(630),n(631),n(334),n(336),n(158),n(632),n(648),n(649),n(113)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m){var b=i.NxLocalizedErrorCode;var y,x,q={},S;function w(t){this.fieldCache={};this.stateCache={};Object.defineProperties(this,{id:{value:t.id},model:{value:t}});t.session&&Object.defineProperties(this,{global:{value:new d(t.session)},bookmark:{value:new c(t)},variable:{value:new u(t,this)},visualization:{value:new f(this)}});Object.defineProperties(this,{theme:{value:new v(t)}});t.rpcOptions&&t.rpcOptions.qEvent&&(this.qEvent=t.rpcOptions.qEvent);this.getAppLayout()}w.prototype.clearAll=function(t,e){return h.appDoIt(this.model,"clearAll",[t||false,e||"$"])};w.prototype.back=function(){return h.appDoIt(this.model,"back")};w.prototype.forward=function(){return h.appDoIt(this.model,"forward")};w.prototype.lockAll=function(t){return h.appDoIt(this.model,"lockAll",[t||"$"])};w.prototype.unlockAll=function(t){return h.appDoIt(this.model,"unlockAll",[t||"$"])};function C(e,n){var i=n||new t;e.getLayout().then(function(){i.resolve(e)},function(t){i.reject(t)});return i.promise}w.prototype.getObject=function(e,n,i){var o,r,l=this.model;var c=this;if(!n){n=e;e=void 0}o=new t;l.waitForOpen.promise.then(function(){if("CurrentSelections"===n){if(e){var u=i||{};u.currentSelections=true;r=h.showVisualization(e,null,u,l)}s.get(l).then(function(t){t.close=function(){return h.clearElement(e,r)};o.resolve(t)})}else if("AppNavigationBar"===n&&m["ODAG_MASHUP"]){var d=i||{};i.app=l;d.showNavigationToolbar=true;r=h.showVisualization(e,i,d,l);o.resolve()}else l.enigmaModel.getObject(n).then(function(n){return C(n).then(function(n){var s;if(e){s=new t;r=h.showVisualization(e,n,i,l);n.close=function(){n.Closed.emit();return s.promise};n.Closed.once(function(){h.clearElement(e,r).then(function(){s.resolve()})})}C(n,o)})},function(t){t.error&&t.error.code===b.LOCERR_GENERIC_NOT_FOUND&&(t={message:a.get("Object not found"),code:t.error.code});if(c.qEvent&&c.qEvent.hasHandlers("error")){c.qEvent.emit("error",t);t.isHandled=true}else if(y){y(t);t.isHandled=true}o.reject(t)})},function(){o.reject()});return o.promise};w.prototype.getSnapshot=function(t,e){if(!e){e=t;t=void 0}var n=this.model;return n.waitForOpen.promise.then(function(){return o.get(e,n).then(function(e){t&&h.showVisualization(t,e.enigmaModel,{APIType:r,noInteraction:true},n);return e.getLayout().then(function(){return e})})})};w.prototype.getObjectProperties=function(t){var e=this.model;return e.waitForOpen.promise.then(function(){return e.enigmaModel.getObject(t)}).then(function(t){return t.getProperties().then(function(){return t})})};w.prototype.getFullPropertyTree=function(t){var e=this.model;return e.waitForOpen.promise.then(function(){return e.enigmaModel.getObject(t)}).then(function(t){return t.getFullPropertyTree().then(function(e){t.propertyTree=e;return t})})};w.prototype.createGenericObject=function(e,n){var i=this;return i.model.waitForOpen.promise.then(function(){var t=n?function(t){n(t,i)}:function(){};h.setDefaultId(e);return i.model.enigmaModel.getOrCreateSessionObject(e).then(function(e){e.Invalidated.bind(function(){e.getLayout().then(t)});e.close=function(){return i.destroySessionObject(e.id).then(function(){e.emit("closed",e);return e})};e.Closed.bind(function(){i.model.enigmaModel._listCache&&i.model.enigmaModel._listCache[this.id]&&delete i.model.enigmaModel._listCache[this.id]});return e.getLayout().then(function(n){t(n);return e})},function(t){if(y){y(t.error,i);t.error.isHandled=true}})},function(){return t.reject()})};w.prototype.destroySessionObject=function(t){return h.appDoIt(this.model,"destroySessionObject",[t])};w.prototype.createCube=function(t,e){return this.createGenericObject({qHyperCubeDef:t},e)};w.prototype.createList=function(t,e){return this.createGenericObject({qListObjectDef:t},e)};w.prototype.getList=function(t,e){return this.createGenericObject(h.getDefaultListParam(t),e)};w.prototype.getAppObjectList=function(t,e){if(!e){e=t;t="sheet"}return this.getList(t,e)};w.prototype.searchSuggest=function(t,e,n){var i=h.appDoIt(this.model,"searchSuggest",[e,t]).then(function(t){return{qResult:t}});n&&i.then(function(t){n(t)});return i};w.prototype.searchAssociations=function(t,e,n,i){var s=h.appDoIt(this.model,"searchAssociations",[n||{},t,e]).then(function(t){return{qResults:t}});i&&s.then(function(t){i(t)});return s};w.prototype.searchResults=function(t,e,n,i){var s=h.appDoIt(this.model,"searchResults",[n||{},t,e]).then(function(t){return{qResult:t}});i&&s.then(function(t){i(t)});return s};w.prototype.selectAssociations=function(t,e,n){return h.appDoIt(this.model,"selectAssociations",[n||{},e,t])};w.prototype.getAppLayout=function(e){var n=this,i=new t,s=e?function(t){e(t.layout,n)}:function(){};n.model.waitForOpen?n.model.waitForOpen.promise.then(function(){n.model.Invalidated&&n.model.Invalidated.bind(function(){C(n.model).then(s)});C(n.model).then(function(t){s(t);i.resolve(t)})}):C(n.model).then(function(t){s(t);i.resolve(t)});return i.promise};w.prototype.addAlternateState=function(t){return h.appDoIt(this.model,"addAlternateState",[t])};w.prototype.removeAlternateState=function(t){return h.appDoIt(this.model,"removeAlternateState",[t])};w.prototype.doReload=function(t,e,n){this.fieldCache={};return h.appDoIt(this.model,"doReload",[t||0,e||false,n||false])};w.prototype.doSave=function(t){return h.appDoIt(this.model,"doSave",[t])};w.prototype.field=function(t,e){var n=e?t+"/"+e:t;this.fieldCache[n]||(this.fieldCache[n]=new l(this,t,e));return this.fieldCache[n]};w.prototype.table=function(t,e){return new p(this,t,e)};w.setErrorCallback=function(t,e){y=t;x=e};w.prototype.createTable=function(t,e,n){var i=h.createHypercubeDef(t,e,n);return new p(this,this.createGenericObject({qHyperCubeDef:i}))};w.prototype.selectionState=function(t){var e=t||"$";if(!this.stateCache[e]){var n=h.getDefaultListParam("CurrentSelections",{qStateName:e});this.stateCache[e]=new g(this,this.createGenericObject(n),e)}return this.stateCache[e]};w.prototype.getScript=function(){if(this.model.getScript)return this.model.getScript().then(function(t){return{qScript:t}});return this.model.rpc("GetScript")};w.prototype.setScript=function(t){var e=this.model;var n="function"===typeof this.model.setScript?function(t){return e.setScript(t)}:function(t){return e.rpc("SetScript",null,[t])};var i="function"===typeof this.model.checkScriptSyntax?function(){return e.checkScriptSyntax().then(function(t){return{qErrors:t}})}:function(){return e.rpc("CheckScriptSyntax")};function s(t,e){return e.qErrors&&e.qErrors.length>0?e:t}return n(t).then(function(t){return i().then(function(e){return s(t,e)})})};w.currApp=function(t){var e;e=t&&t.backendApi&&t.backendApi.model.session&&(t.backendApi.model.session.currentApp||t.backendApi.model.session.app)?t.backendApi.model.session.currentApp||t.backendApi.model.session.app:t&&t.backendApi&&t.backendApi.model.app?t.backendApi.model.app:n.current;if(!e)return null;S||(S=new w(e));if(S.model===e)return S;return new w(e)};w.openApp=function(i,s){h.initClient();i=i||"";s=s||{};this._qEvent&&(s._qEvent=this._qEvent);var o=h.makeConfig(s),r=n.makeCacheId(i,o),a,l;if(q[r])return q[r];a=y?function(t){y(t||{code:b.LOCERR_GENERIC_CONNECTION_LOST,message:"Connection lost"})}:y;x&&(l=x);var c=n.getSync(i,o,true,a,l);if(c){var u=new w(c);u.close=function(){var e=new t;setTimeout(function(){delete q[r];e.resolve(c.close(false))},200);return e.promise};c.waitForOpen.promise.then(function(){document.addEventListener("onAppStateChanged",function(t){if(t.detail&&t.detail.inForegroundNow){e.getService("$delayedModal").close();c.enigmaModel.session.resume(true)}else if(t.detail&&!t.detail.inForegroundNow){u.fieldCache={};u.stateCache={};c.enigmaModel.session.suspend()}})});q[r]=u}return q[r]};w.sessionApp=function(t){return this.sessionAppFromApp("?transient=",t)};w.sessionAppFromApp=function(e,i){var s;h.initClient();var o=h.makeConfig(i),r=n.makeCacheId(e,o),a;o.identity=o.identity||"sessionapp";o.sessionApp={value:true,appId:e};a=function t(e){if(e&&1002===e.code){e.isHandled=true;return}y&&y({code:b.LOCERR_GENERIC_CONNECTION_LOST,message:"Connection lost"})};var l=n.getSync(e,o,true,a,x);if(l){s=new w(l);s.close=function(){var e=new t;setTimeout(function(){delete q[r];e.resolve(l.close(false))},200);return e.promise}}return s};w.table=function(t,e){var n=w.currApp(t);return n.table(t,e)};w.prototype.on=function(t,e){this.qEvent.register({scope:"QApp",name:t,callback:e})};w.prototype.off=function(t){this.qEvent.clear(t)};return w}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(10),n(48),n(102),n(653),n(10)],s=function(t,e,n,i){e.service("qvChartTooltipService",["$document","$timeout",function(e,s){var o,r,a=e.find("body"),l=t.element('<div id="qs-chart-tooltip">').appendTo(a);var c,u,d=false;function p(){s.cancel(u);u=null;s.cancel(c);c=null}o={open:function t(e,n,a){d&&r&&r.hide();p();if(!r){var h=e.position;e.position=void 0;r=l.showComponent(i,e);e.position=h}l.attr("dir",e.dir);c=s(function(){n&&(u=s(function(){o.close()},n));d=true;r.show(e)},a)},close:function t(){this.Closed.emit();r&&s(function(){r.hide()});p()},destroy:function t(){d&&r&&r.hide();r=null}};n.create(o,"Closed");return o}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(119),n(717)],s=function(t,e){t.directive("tinyEditor",function(){return{template:e,replace:true,restrict:"E",scope:{value:"=",invalid:"=?",maxLength:"=?",onOpen:"&",onBlur:"&",alwaysExpression:"@?"},link:function t(e){e.editorValue=e.value;e.isExpression=n(e.editorValue);e.$watch("value",function(){if(e.value!==e.editorValue){e.isExpression=n(e.value);e.editorValue=e.value}});e.focused=function(){e.active=true};e.blurred=function(t){e.isExpression=n(e.editorValue);e.active=false;e.onBlur({$event:t})};e.open=function(t){e.onOpen({$event:t})};e.change=function(){e.value=e.editorValue};function n(t){var n="false"!==e.alwaysExpression;if(n)return(t||"").length>0;return"="===(t||"")[0]}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){var i,s,o;(function(r){true;!(s=[n(11)],i=r,o="function"===typeof i?i.apply(e,s):i,void 0!==o&&(t.exports=o))})(function(t){t.ui=t.ui||{};var e=t.ui.version="1.12.1";var n=0;var i=Array.prototype.slice;t.cleanData=function(e){return function(n){var i,s,o;for(o=0;null!=(s=n[o]);o++)try{i=t._data(s,"events");i&&i.remove&&t(s).triggerHandler("remove")}catch(t){}e(n)}}(t.cleanData);t.widget=function(e,n,i){var s,o,r;var a={};var l=e.split(".")[0];e=e.split(".")[1];var c=l+"-"+e;if(!i){i=n;n=t.Widget}t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i)));t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)};t[l]=t[l]||{};s=t[l][e];o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)};t.extend(o,s,{version:i.version,_proto:t.extend({},i),_childConstructors:[]});r=new n;r.options=t.widget.extend({},r.options);t.each(i,function(e,i){if(!t.isFunction(i)){a[e]=i;return}a[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function s(t){return n.prototype[e].apply(this,t)}return function(){var e=this._super;var n=this._superApply;var o;this._super=t;this._superApply=s;o=i.apply(this,arguments);this._super=e;this._superApply=n;return o}}()});o.prototype=t.widget.extend(r,{widgetEventPrefix:s&&r.widgetEventPrefix||e},a,{constructor:o,namespace:l,widgetName:e,widgetFullName:c});if(s){t.each(s._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)});delete s._childConstructors}else n._childConstructors.push(o);t.widget.bridge(e,o);return o};t.widget.extend=function(e){var n=i.call(arguments,1);var s=0;var o=n.length;var r;var a;for(;s<o;s++)for(r in n[s]){a=n[s][r];n[s].hasOwnProperty(r)&&void 0!==a&&(t.isPlainObject(a)?e[r]=t.isPlainObject(e[r])?t.widget.extend({},e[r],a):t.widget.extend({},a):e[r]=a)}return e};t.widget.bridge=function(e,n){var s=n.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"===typeof o;var a=i.call(arguments,1);var l=this;if(r)this.length||"instance"!==o?this.each(function(){var n;var i=t.data(this,s);if("instance"===o){l=i;return false}if(!i)return t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'");if(!t.isFunction(i[o])||"_"===o.charAt(0))return t.error("no such method '"+o+"' for "+e+" widget instance");n=i[o].apply(i,a);if(n!==i&&void 0!==n){l=n&&n.jquery?l.pushStack(n.get()):n;return false}}):l=void 0;else{a.length&&(o=t.widget.extend.apply(null,[o].concat(a)));this.each(function(){var e=t.data(this,s);if(e){e.option(o||{});e._init&&e._init()}else t.data(this,s,new n(o,this))})}return l}};t.Widget=function(){};t.Widget._childConstructors=[];t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0];this.element=t(i);this.uuid=n++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=t();this.hoverable=t();this.focusable=t();this.classesElementLookup={};if(i!==this){t.data(i,this.widgetFullName,this);this._on(true,this.element,{remove:function(t){t.target===i&&this.destroy()}});this.document=t(i.style?i.ownerDocument:i.document||i);this.window=t(this.document[0].defaultView||this.document[0].parentWindow)}this.options=t.widget.extend({},this.options,this._getCreateOptions(),e);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy();t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i=e;var s;var o;var r;if(0===arguments.length)return t.widget.extend({},this.options);if("string"===typeof e){i={};s=e.split(".");e=s.shift();if(s.length){o=i[e]=t.widget.extend({},this.options[e]);for(r=0;r<s.length-1;r++){o[s[r]]=o[s[r]]||{};o=o[s[r]]}e=s.pop();if(1===arguments.length)return void 0===o[e]?null:o[e];o[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];i[e]=n}}this._setOptions(i);return this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){"classes"===t&&this._setOptionClasses(e);this.options[t]=e;"disabled"===t&&this._setOptionDisabled(e);return this},_setOptionClasses:function(e){var n,i,s;for(n in e){s=this.classesElementLookup[n];if(e[n]===this.options.classes[n]||!s||!s.length)continue;i=t(s.get());this._removeClass(s,n);i.addClass(this._classes({element:i,keys:n,classes:e,add:true}))}},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t);if(t){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(e){var n=[];var i=this;e=t.extend({element:this.element,classes:this.options.classes||{}},e);function s(s,o){var r,a;for(a=0;a<s.length;a++){r=i.classesElementLookup[s[a]]||t();r=e.add?t(t.unique(r.get().concat(e.element.get()))):t(r.not(e.element).get());i.classesElementLookup[s[a]]=r;n.push(s[a]);o&&e.classes[s[a]]&&n.push(e.classes[s[a]])}}this._on(e.element,{remove:"_untrackClassesElement"});e.keys&&s(e.keys.match(/\S+/g)||[],true);e.extra&&s(e.extra.match(/\S+/g)||[]);return n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,function(i,s){-1!==t.inArray(e.target,s)&&(n.classesElementLookup[i]=t(s.not(e.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,false)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,true)},_toggleClass:function(t,e,n,i){i="boolean"===typeof i?i:n;var s="string"===typeof t||null===t,o={extra:s?e:n,keys:s?t:e,element:s?this.element:t,add:i};o.element.toggleClass(this._classes(o),i);return this},_on:function(e,n,i){var s;var o=this;if("boolean"!==typeof e){i=n;n=e;e=false}if(i){n=s=t(n);this.bindings=this.bindings.add(n)}else{i=n;n=this.element;s=this.widget()}t.each(i,function(i,r){function a(){if(!e&&(true===o.options.disabled||t(this).hasClass("ui-state-disabled")))return;return("string"===typeof r?o[r]:r).apply(o,arguments)}"string"!==typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/);var c=l[1]+o.eventNamespace;var u=l[2];u?s.on(c,u,a):n.on(c,a)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.off(n).off(n);this.bindings=t(this.bindings.not(e).get());this.focusable=t(this.focusable.not(e).get());this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"===typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var s,o;var r=this.options[e];i=i||{};n=t.Event(n);n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();n.target=this.element[0];o=n.originalEvent;if(o)for(s in o)s in n||(n[s]=o[s]);this.element.trigger(n,i);return!(t.isFunction(r)&&false===r.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}};t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,s,o){"string"===typeof s&&(s={effect:s});var r;var a=s?true===s||"number"===typeof s?n:s.effect||n:e;s=s||{};"number"===typeof s&&(s={duration:s});r=!t.isEmptyObject(s);s.complete=o;s.delay&&i.delay(s.delay);r&&t.effects&&t.effects.effect[a]?i[e](s):a!==e&&i[a]?i[a](s.duration,s.easing,o):i.queue(function(n){t(this)[e]();o&&o.call(i[0]);n()})}});var s=t.widget;(function(){var e,n=Math.max,i=Math.abs,s=/left|center|right/,o=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=t.fn.position;function u(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function d(e,n){return parseInt(t.css(e,n),10)||0}function p(e){var n=e[0];if(9===n.nodeType)return{width:e.width(),height:e.height(),offset:{top:0,left:0}};if(t.isWindow(n))return{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}};if(n.preventDefault)return{width:0,height:0,offset:{top:n.pageY,left:n.pageX}};return{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var n,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];t("body").append(s);n=o.offsetWidth;s.css("overflow","scroll");i=o.offsetWidth;n===i&&(i=s[0].clientWidth);s.remove();return e=n-i},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),s=!!n[0]&&9===n[0].nodeType,o=!i&&!s;return{element:n,isWindow:i,isDocument:s,offset:o?t(e).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}};t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);e=t.extend({},e);var l,h,f,g,v,m,b=t(e.of),y=t.position.getWithinInfo(e.within),x=t.position.getScrollInfo(y),q=(e.collision||"flip").split(" "),S={};m=p(b);b[0].preventDefault&&(e.at="left top");h=m.width;f=m.height;g=m.offset;v=t.extend({},g);t.each(["my","at"],function(){var t=(e[this]||"").split(" "),n,i;1===t.length&&(t=s.test(t[0])?t.concat(["center"]):o.test(t[0])?["center"].concat(t):["center","center"]);t[0]=s.test(t[0])?t[0]:"center";t[1]=o.test(t[1])?t[1]:"center";n=r.exec(t[0]);i=r.exec(t[1]);S[this]=[n?n[0]:0,i?i[0]:0];e[this]=[a.exec(t[0])[0],a.exec(t[1])[0]]});1===q.length&&(q[1]=q[0]);"right"===e.at[0]?v.left+=h:"center"===e.at[0]&&(v.left+=h/2);"bottom"===e.at[1]?v.top+=f:"center"===e.at[1]&&(v.top+=f/2);l=u(S.at,h,f);v.left+=l[0];v.top+=l[1];return this.each(function(){var s,o,r=t(this),a=r.outerWidth(),c=r.outerHeight(),p=d(this,"marginLeft"),m=d(this,"marginTop"),w=a+p+d(this,"marginRight")+x.width,C=c+m+d(this,"marginBottom")+x.height,I=t.extend({},v),_=u(S.my,r.outerWidth(),r.outerHeight());"right"===e.my[0]?I.left-=a:"center"===e.my[0]&&(I.left-=a/2);"bottom"===e.my[1]?I.top-=c:"center"===e.my[1]&&(I.top-=c/2);I.left+=_[0];I.top+=_[1];s={marginLeft:p,marginTop:m};t.each(["left","top"],function(n,i){t.ui.position[q[n]]&&t.ui.position[q[n]][i](I,{targetWidth:h,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:s,collisionWidth:w,collisionHeight:C,offset:[l[0]+_[0],l[1]+_[1]],my:e.my,at:e.at,within:y,elem:r})});e.using&&(o=function(t){var s=g.left-I.left,o=s+h-a,l=g.top-I.top,u=l+f-c,d={target:{element:b,left:g.left,top:g.top,width:h,height:f},element:{element:r,left:I.left,top:I.top,width:a,height:c},horizontal:o<0?"left":s>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};h<a&&i(s+o)<h&&(d.horizontal="center");f<c&&i(l+u)<f&&(d.vertical="middle");n(i(s),i(o))>n(i(l),i(u))?d.important="horizontal":d.important="vertical";e.using.call(this,t,d)});r.offset(t.extend(I,{using:o}))})};t.ui.position={fit:{left:function(t,e){var i=e.within,s=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,r=t.left-e.collisionPosition.marginLeft,a=s-r,l=r+e.collisionWidth-o-s,c;if(e.collisionWidth>o)if(a>0&&l<=0){c=t.left+a+e.collisionWidth-o-s;t.left+=a-c}else t.left=l>0&&a<=0?s:a>l?s+o-e.collisionWidth:s;else a>0?t.left+=a:l>0?t.left-=l:t.left=n(t.left-r,t.left)},top:function(t,e){var i=e.within,s=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,a=s-r,l=r+e.collisionHeight-o-s,c;if(e.collisionHeight>o)if(a>0&&l<=0){c=t.top+a+e.collisionHeight-o-s;t.top+=a-c}else t.top=l>0&&a<=0?s:a>l?s+o-e.collisionHeight:s;else a>0?t.top+=a:l>0?t.top-=l:t.top=n(t.top-r,t.top)}},flip:{left:function(t,e){var n=e.within,s=n.offset.left+n.scrollLeft,o=n.width,r=n.isWindow?n.scrollLeft:n.offset.left,a=t.left-e.collisionPosition.marginLeft,l=a-r,c=a+e.collisionWidth-o-r,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0],h,f;if(l<0){h=t.left+u+d+p+e.collisionWidth-o-s;(h<0||h<i(l))&&(t.left+=u+d+p)}else if(c>0){f=t.left-e.collisionPosition.marginLeft+u+d+p-r;(f>0||i(f)<c)&&(t.left+=u+d+p)}},top:function(t,e){var n=e.within,s=n.offset.top+n.scrollTop,o=n.height,r=n.isWindow?n.scrollTop:n.offset.top,a=t.top-e.collisionPosition.marginTop,l=a-r,c=a+e.collisionHeight-o-r,u="top"===e.my[1],d=u?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,h=-2*e.offset[1],f,g;if(l<0){g=t.top+d+p+h+e.collisionHeight-o-s;(g<0||g<i(l))&&(t.top+=d+p+h)}else if(c>0){f=t.top-e.collisionPosition.marginTop+d+p+h-r;(f>0||i(f)<c)&&(t.top+=d+p+h)}}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments);t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments);t.ui.position.fit.top.apply(this,arguments)}}}})();var o=t.ui.position;var r=t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])}});var a=t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var l="ui-effects-",c="ui-effects-style",u="ui-effects-animated",d=t;t.effects={effect:{}};(function(t,e){var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",i=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],o=t.Color=function(e,n,i,s){return new t.Color.fn.parse(e,n,i,s)},r={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={byte:{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},l=o.support={},c=t("<p>")[0],u,d=t.each;c.style.cssText="background-color:rgba(1,1,1,.5)";l.rgba=c.style.backgroundColor.indexOf("rgba")>-1;d(r,function(t,e){e.cache="_"+t;e.props.alpha={idx:3,type:"percent",def:1}});function p(t,e,n){var i=a[e.type]||{};if(null==t)return n||!e.def?null:e.def;t=i.floor?~~t:parseFloat(t);if(isNaN(t))return e.def;if(i.mod)return(t+i.mod)%i.mod;return 0>t?0:i.max<t?i.max:t}function h(e){var n=o(),i=n._rgba=[];e=e.toLowerCase();d(s,function(t,s){var o,a=s.re.exec(e),l=a&&s.parse(a),c=s.space||"rgba";if(l){o=n[c](l);n[r[c].cache]=o[r[c].cache];i=n._rgba=o._rgba;return false}});if(i.length){"0,0,0,0"===i.join()&&t.extend(i,u.transparent);return n}return u[e]}o.fn=t.extend(o.prototype,{parse:function(n,i,s,a){if(n===e){this._rgba=[null,null,null,null];return this}if(n.jquery||n.nodeType){n=t(n).css(i);i=e}var l=this,c=t.type(n),f=this._rgba=[];if(i!==e){n=[n,i,s,a];c="array"}if("string"===c)return this.parse(h(n)||u._default);if("array"===c){d(r.rgba.props,function(t,e){f[e.idx]=p(n[e.idx],e)});return this}if("object"===c){d(r,n instanceof o?function(t,e){n[e.cache]&&(l[e.cache]=n[e.cache].slice())}:function(e,i){var s=i.cache;d(i.props,function(t,e){if(!l[s]&&i.to){if("alpha"===t||null==n[t])return;l[s]=i.to(l._rgba)}l[s][e.idx]=p(n[t],e,true)});if(l[s]&&t.inArray(null,l[s].slice(0,3))<0){l[s][3]=1;i.from&&(l._rgba=i.from(l[s]))}});return this}},is:function(t){var e=o(t),n=true,i=this;d(r,function(t,s){var o,r=e[s.cache];if(r){o=i[s.cache]||s.to&&s.to(i._rgba)||[];d(s.props,function(t,e){if(null!=r[e.idx]){n=r[e.idx]===o[e.idx];return n}})}return n});return n},_space:function(){var t=[],e=this;d(r,function(n,i){e[i.cache]&&t.push(n)});return t.pop()},transition:function(t,e){var n=o(t),i=n._space(),s=r[i],l=0===this.alpha()?o("transparent"):this,c=l[s.cache]||s.to(l._rgba),u=c.slice();n=n[s.cache];d(s.props,function(t,i){var s=i.idx,o=c[s],r=n[s],l=a[i.type]||{};if(null===r)return;if(null===o)u[s]=r;else{l.mod&&(r-o>l.mod/2?o+=l.mod:o-r>l.mod/2&&(o-=l.mod));u[s]=p((r-o)*e+o,i)}});return this[i](u)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),s=o(e)._rgba;return o(t.map(n,function(t,e){return(1-i)*s[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});if(1===n[3]){n.pop();e="rgb("}return e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){null==t&&(t=e>2?1:0);e&&e<3&&(t=Math.round(100*t)+"%");return t});if(1===n[3]){n.pop();e="hsl("}return e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();e&&n.push(~~(255*i));return"#"+t.map(n,function(t){t=(t||0).toString(16);return 1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});o.fn.parse.prototype=o.fn;function f(t,e,n){n=(n+1)%1;if(6*n<1)return t+(e-t)*n*6;if(2*n<1)return e;if(3*n<2)return t+(e-t)*(2/3-n)*6;return t}r.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/255,n=t[1]/255,i=t[2]/255,s=t[3],o=Math.max(e,n,i),r=Math.min(e,n,i),a=o-r,l=o+r,c=.5*l,u,d;u=r===o?0:e===o?60*(n-i)/a+360:n===o?60*(i-e)/a+120:60*(e-n)/a+240;d=0===a?0:c<=.5?a/l:a/(2-l);return[Math.round(u)%360,d,c,null==s?1:s]};r.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],s=t[3],o=i<=.5?i*(1+n):i+n-i*n,r=2*i-o;return[Math.round(255*f(r,o,e+1/3)),Math.round(255*f(r,o,e)),Math.round(255*f(r,o,e-1/3)),s]};d(r,function(n,s){var r=s.props,a=s.cache,l=s.to,c=s.from;o.fn[n]=function(n){l&&!this[a]&&(this[a]=l(this._rgba));if(n===e)return this[a].slice();var i,s=t.type(n),u="array"===s||"object"===s?n:arguments,h=this[a].slice();d(r,function(t,e){var n=u["object"===s?t:e.idx];null==n&&(n=h[e.idx]);h[e.idx]=p(n,e)});if(c){i=o(c(h));i[a]=h;return i}return o(h)};d(r,function(e,s){if(o.fn[e])return;o.fn[e]=function(o){var r=t.type(o),a="alpha"===e?this._hsla?"hsla":"rgba":n,l=this[a](),c=l[s.idx],u;if("undefined"===r)return c;if("function"===r){o=o.call(this,c);r=t.type(o)}if(null==o&&s.empty)return this;if("string"===r){u=i.exec(o);u&&(o=c+parseFloat(u[2])*("+"===u[1]?1:-1))}l[s.idx]=o;return this[a](l)}})});o.hook=function(e){var n=e.split(" ");d(n,function(e,n){t.cssHooks[n]={set:function(e,i){var s,r,a="";if("transparent"!==i&&("string"!==t.type(i)||(s=h(i)))){i=o(s||i);if(!l.rgba&&1!==i._rgba[3]){r="backgroundColor"===n?e.parentNode:e;while((""===a||"transparent"===a)&&r&&r.style)try{a=t.css(r,"backgroundColor");r=r.parentNode}catch(t){}i=i.blend(a&&"transparent"!==a?a:"_default")}i=i.toRgbaString()}try{e.style[n]=i}catch(t){}}};t.fx.step[n]=function(e){if(!e.colorInit){e.start=o(e.elem,n);e.end=o(e.end);e.colorInit=true}t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})};o.hook(n);t.cssHooks.borderColor={expand:function(t){var e={};d(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t});return e}};u=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(d);(function(){var e=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){if("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr){d.style(t.elem,n,t.end);t.setAttr=true}}});function i(e){var n,i,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]]){i=s.length;while(i--){n=s[i];"string"===typeof s[n]&&(o[t.camelCase(n)]=s[n])}}else for(n in s)"string"===typeof s[n]&&(o[n]=s[n]);return o}function s(e,i){var s={},o,r;for(o in i){r=i[o];e[o]!==r&&(n[o]||!t.fx.step[o]&&isNaN(parseFloat(r))||(s[o]=r))}return s}t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))});t.effects.animateClass=function(n,o,r,a){var l=t.speed(o,r,a);return this.queue(function(){var o=t(this),r=o.attr("class")||"",a,c=l.children?o.find("*").addBack():o;c=c.map(function(){var e=t(this);return{el:e,start:i(this)}});a=function(){t.each(e,function(t,e){n[e]&&o[e+"Class"](n[e])})};a();c=c.map(function(){this.end=i(this.el[0]);this.diff=s(this.start,this.end);return this});o.attr("class",r);c=c.map(function(){var e=this,n=t.Deferred(),i=t.extend({},l,{queue:false,complete:function(){n.resolve(e)}});this.el.animate(this.diff,i);return n.promise()});t.when.apply(t,c.get()).done(function(){a();t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})});l.complete.call(o[0])})})};t.fn.extend({addClass:function(e){return function(n,i,s,o){return i?t.effects.animateClass.call(this,{add:n},i,s,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,i,s,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},i,s,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,i,s,o,r){return"boolean"===typeof i||void 0===i?s?t.effects.animateClass.call(this,i?{add:n}:{remove:n},s,o,r):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},i,s,o)}}(t.fn.toggleClass),switchClass:function(e,n,i,s,o){return t.effects.animateClass.call(this,{add:n,remove:e},i,s,o)}})})();(function(){t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(e){return function(n){return!!t(n).data(u)||e(n)}}(t.expr.filters.animated));false!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){var n=0,i=e.length;for(;n<i;n++)null!==e[n]&&t.data(l+e[n],t[0].style[e[n]])},restore:function(t,e){var n,i=0,s=e.length;for(;i<s;i++)if(null!==e[i]){n=t.data(l+e[i]);t.css(e[i],n)}},setMode:function(t,e){"toggle"===e&&(e=t.is(":hidden")?"show":"hide");return e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(true),height:e.outerHeight(true),float:e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}e.wrap(i);(e[0]===o||t.contains(e[0],o))&&t(o).trigger("focus");i=e.parent();if("static"===e.css("position")){i.css({position:"relative"});e.css({position:"relative"})}else{t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")});t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i);isNaN(parseInt(n[i],10))&&(n[i]="auto")});e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}e.css(s);return i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;if(e.parent().is(".ui-effects-wrapper")){e.parent().replaceWith(e);(e[0]===n||t.contains(e[0],n))&&t(n).trigger("focus")}return e}});t.extend(t.effects,{version:"1.12.1",define:function(e,n,i){if(!i){i=n;n="effect"}t.effects.effect[e]=i;t.effects.effect[e].mode=n;return i},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,s="vertical"!==n?(e||100)/100:1;return{height:t.height()*s,width:t.width()*i,outerHeight:t.outerHeight()*s,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();e>1&&i.splice.apply(i,[1,0].concat(i.splice(e,n)));t.dequeue()},saveStyle:function(t){t.data(c,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(c)||"";t.removeData(c)},mode:function(t,e){var n=t.is(":hidden");"toggle"===e&&(e=n?"show":"hide");(n?"hide"===e:"show"===e)&&(e="none");return e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(e){var n,i=e.css("position"),s=e.position();e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight());if(/^(static|relative)/.test(i)){i="absolute";n=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder");e.data(l+"placeholder",n)}e.css({position:i,left:s.left,top:s.top});return n},removePlaceholder:function(t){var e=l+"placeholder",n=t.data(e);if(n){n.remove();t.removeData(e)}},cleanUp:function(e){t.effects.restoreStyle(e);t.effects.removePlaceholder(e)},setTransition:function(e,n,i,s){s=s||{};t.each(n,function(t,n){var o=e.cssUnit(n);o[0]>0&&(s[n]=o[0]*i+o[1])});return s}});function e(e,n,i,s){if(t.isPlainObject(e)){n=e;e=e.effect}e={effect:e};null==n&&(n={});if(t.isFunction(n)){s=n;i=null;n={}}if("number"===typeof n||t.fx.speeds[n]){s=i;i=n;n={}}if(t.isFunction(i)){s=i;i=null}n&&t.extend(e,n);i=i||n.duration;e.duration=t.fx.off?0:"number"===typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default;e.complete=s||n.complete;return e}function n(e){if(!e||"number"===typeof e||t.fx.speeds[e])return true;if("string"===typeof e&&!t.effects.effect[e])return true;if(t.isFunction(e))return true;if("object"===typeof e&&!e.effect)return true;return false}t.fn.extend({effect:function(){var n=e.apply(this,arguments),i=t.effects.effect[n.effect],s=i.mode,o=n.queue,r=o||"fx",a=n.complete,l=n.mode,c=[],d=function(e){var n=t(this),i=t.effects.mode(n,l)||s;n.data(u,true);c.push(i);s&&("show"===i||i===s&&"hide"===i)&&n.show();s&&"none"===i||t.effects.saveStyle(n);t.isFunction(e)&&e()};if(t.fx.off||!i)return l?this[l](n.duration,a):this.each(function(){a&&a.call(this)});function p(e){var o=t(this);function r(){o.removeData(u);t.effects.cleanUp(o);"hide"===n.mode&&o.hide();d()}function d(){t.isFunction(a)&&a.call(o[0]);t.isFunction(e)&&e()}n.mode=c.shift();if(false===t.uiBackCompat||s)if("none"===n.mode){o[l]();d()}else i.call(o[0],n,r);else if(o.is(":hidden")?"hide"===l:"show"===l){o[l]();d()}else i.call(o[0],n,d)}return false===o?this.each(d).each(p):this.queue(r,d).queue(r,p)},show:function(t){return function(i){if(n(i))return t.apply(this,arguments);var s=e.apply(this,arguments);s.mode="show";return this.effect.call(this,s)}}(t.fn.show),hide:function(t){return function(i){if(n(i))return t.apply(this,arguments);var s=e.apply(this,arguments);s.mode="hide";return this.effect.call(this,s)}}(t.fn.hide),toggle:function(t){return function(i){if(n(i)||"boolean"===typeof i)return t.apply(this,arguments);var s=e.apply(this,arguments);s.mode="toggle";return this.effect.call(this,s)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),i=[];t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])});return i},cssClip:function(t){if(t)return this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)");return i(this.css("clip"),this)},transfer:function(e,n){var i=t(this),s=t(e.to),o="fixed"===s.css("position"),r=t("body"),a=o?r.scrollTop():0,l=o?r.scrollLeft():0,c=s.offset(),u={top:c.top-a,left:c.left-l,height:s.innerHeight(),width:s.innerWidth()},d=i.offset(),p=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:d.top-a,left:d.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){p.remove();t.isFunction(n)&&n()})}});function i(t,e){var n=e.outerWidth(),i=e.outerHeight(),s=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=s.exec(t)||["",0,n,i,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?n:parseFloat(o[2]),bottom:"auto"===o[3]?i:parseFloat(o[3]),left:parseFloat(o[4])||0}}t.fx.step.clip=function(e){if(!e.clipInit){e.start=t(e.elem).cssClip();"string"===typeof e.end&&(e.end=i(e.end,e.elem));e.clipInit=true}t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}})();(function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}});t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){var e,n=4;while(t<((e=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}});t.each(e,function(e,n){t.easing["easeIn"+e]=n;t.easing["easeOut"+e]=function(t){return 1-n(1-t)};t.easing["easeInOut"+e]=function(t){return t<.5?n(2*t)/2:1-n(-2*t+2)/2}})})();var p=t.effects;var h=t.effects.define("blind","hide",function(e,n){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},s=t(this),o=e.direction||"up",r=s.cssClip(),a={clip:t.extend({},r)},l=t.effects.createPlaceholder(s);a.clip[i[o][0]]=a.clip[i[o][1]];if("show"===e.mode){s.cssClip(a.clip);l&&l.css(t.effects.clipToBox(a));a.clip=r}l&&l.animate(t.effects.clipToBox(a),e.duration,e.easing);s.animate(a,{queue:false,duration:e.duration,easing:e.easing,complete:n})});var f=t.effects.define("bounce",function(e,n){var i,s,o,r=t(this),a=e.mode,l="hide"===a,c="show"===a,u=e.direction||"up",d=e.distance,p=e.times||5,h=2*p+(c||l?1:0),f=e.duration/h,g=e.easing,v="up"===u||"down"===u?"top":"left",m="up"===u||"left"===u,b=0,y=r.queue().length;t.effects.createPlaceholder(r);o=r.css(v);d||(d=r["top"===v?"outerHeight":"outerWidth"]()/3);if(c){s={opacity:1};s[v]=o;r.css("opacity",0).css(v,m?2*-d:2*d).animate(s,f,g)}l&&(d/=Math.pow(2,p-1));s={};s[v]=o;for(;b<p;b++){i={};i[v]=(m?"-=":"+=")+d;r.animate(i,f,g).animate(s,f,g);d=l?2*d:d/2}if(l){i={opacity:0};i[v]=(m?"-=":"+=")+d;r.animate(i,f,g)}r.queue(n);t.effects.unshift(r,y,h+1)});var g=t.effects.define("clip","hide",function(e,n){var i,s={},o=t(this),r=e.direction||"vertical",a="both"===r,l=a||"horizontal"===r,c=a||"vertical"===r;i=o.cssClip();s.clip={top:c?(i.bottom-i.top)/2:i.top,right:l?(i.right-i.left)/2:i.right,bottom:c?(i.bottom-i.top)/2:i.bottom,left:l?(i.right-i.left)/2:i.left};t.effects.createPlaceholder(o);if("show"===e.mode){o.cssClip(s.clip);s.clip=i}o.animate(s,{queue:false,duration:e.duration,easing:e.easing,complete:n})});var v=t.effects.define("drop","hide",function(e,n){var i,s=t(this),o=e.mode,r="show"===o,a=e.direction||"left",l="up"===a||"down"===a?"top":"left",c="up"===a||"left"===a?"-=":"+=",u="+="===c?"-=":"+=",d={opacity:0};t.effects.createPlaceholder(s);i=e.distance||s["top"===l?"outerHeight":"outerWidth"](true)/2;d[l]=c+i;if(r){s.css(d);d[l]=u+i;d.opacity=1}s.animate(d,{queue:false,duration:e.duration,easing:e.easing,complete:n})});var m=t.effects.define("explode","hide",function(e,n){var i,s,o,r,a,l,c=e.pieces?Math.round(Math.sqrt(e.pieces)):3,u=c,d=t(this),p=e.mode,h="show"===p,f=d.show().css("visibility","hidden").offset(),g=Math.ceil(d.outerWidth()/u),v=Math.ceil(d.outerHeight()/c),m=[];function b(){m.push(this);m.length===c*u&&y()}for(i=0;i<c;i++){r=f.top+i*v;l=i-(c-1)/2;for(s=0;s<u;s++){o=f.left+s*g;a=s-(u-1)/2;d.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*g,top:-i*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:v,left:o+(h?a*g:0),top:r+(h?l*v:0),opacity:h?0:1}).animate({left:o+(h?0:a*g),top:r+(h?0:l*v),opacity:h?1:0},e.duration||500,e.easing,b)}}function y(){d.css({visibility:"visible"});t(m).remove();n()}});var b=t.effects.define("fade","toggle",function(e,n){var i="show"===e.mode;t(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:false,duration:e.duration,easing:e.easing,complete:n})});var y=t.effects.define("fold","hide",function(e,n){var i=t(this),s=e.mode,o="show"===s,r="hide"===s,a=e.size||15,l=/([0-9]+)%/.exec(a),c=!!e.horizFirst,u=c?["right","bottom"]:["bottom","right"],d=e.duration/2,p=t.effects.createPlaceholder(i),h=i.cssClip(),f={clip:t.extend({},h)},g={clip:t.extend({},h)},v=[h[u[0]],h[u[1]]],m=i.queue().length;l&&(a=parseInt(l[1],10)/100*v[r?0:1]);f.clip[u[0]]=a;g.clip[u[0]]=a;g.clip[u[1]]=0;if(o){i.cssClip(g.clip);p&&p.css(t.effects.clipToBox(g));g.clip=h}i.queue(function(n){p&&p.animate(t.effects.clipToBox(f),d,e.easing).animate(t.effects.clipToBox(g),d,e.easing);n()}).animate(f,d,e.easing).animate(g,d,e.easing).queue(n);t.effects.unshift(i,m,4)});var x=t.effects.define("highlight","show",function(e,n){var i=t(this),s={backgroundColor:i.css("backgroundColor")};"hide"===e.mode&&(s.opacity=0);t.effects.saveStyle(i);i.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(s,{queue:false,duration:e.duration,easing:e.easing,complete:n})});var q=t.effects.define("size",function(e,n){var i,s,o,r=t(this),a=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=e.mode,d="effect"!==u,p=e.scale||"both",h=e.origin||["middle","center"],f=r.css("position"),g=r.position(),v=t.effects.scaledDimensions(r),m=e.from||v,b=e.to||t.effects.scaledDimensions(r,0);t.effects.createPlaceholder(r);if("show"===u){o=m;m=b;b=o}s={from:{y:m.height/v.height,x:m.width/v.width},to:{y:b.height/v.height,x:b.width/v.width}};if("box"===p||"both"===p){if(s.from.y!==s.to.y){m=t.effects.setTransition(r,l,s.from.y,m);b=t.effects.setTransition(r,l,s.to.y,b)}if(s.from.x!==s.to.x){m=t.effects.setTransition(r,c,s.from.x,m);b=t.effects.setTransition(r,c,s.to.x,b)}}if(("content"===p||"both"===p)&&s.from.y!==s.to.y){m=t.effects.setTransition(r,a,s.from.y,m);b=t.effects.setTransition(r,a,s.to.y,b)}if(h){i=t.effects.getBaseline(h,v);m.top=(v.outerHeight-m.outerHeight)*i.y+g.top;m.left=(v.outerWidth-m.outerWidth)*i.x+g.left;b.top=(v.outerHeight-b.outerHeight)*i.y+g.top;b.left=(v.outerWidth-b.outerWidth)*i.x+g.left}r.css(m);if("content"===p||"both"===p){l=l.concat(["marginTop","marginBottom"]).concat(a);c=c.concat(["marginLeft","marginRight"]);r.find("*[width]").each(function(){var n=t(this),i=t.effects.scaledDimensions(n),o={height:i.height*s.from.y,width:i.width*s.from.x,outerHeight:i.outerHeight*s.from.y,outerWidth:i.outerWidth*s.from.x},r={height:i.height*s.to.y,width:i.width*s.to.x,outerHeight:i.height*s.to.y,outerWidth:i.width*s.to.x};if(s.from.y!==s.to.y){o=t.effects.setTransition(n,l,s.from.y,o);r=t.effects.setTransition(n,l,s.to.y,r)}if(s.from.x!==s.to.x){o=t.effects.setTransition(n,c,s.from.x,o);r=t.effects.setTransition(n,c,s.to.x,r)}d&&t.effects.saveStyle(n);n.css(o);n.animate(r,e.duration,e.easing,function(){d&&t.effects.restoreStyle(n)})})}r.animate(b,{queue:false,duration:e.duration,easing:e.easing,complete:function(){var e=r.offset();0===b.opacity&&r.css("opacity",m.opacity);if(!d){r.css("position","static"===f?"relative":f).offset(e);t.effects.saveStyle(r)}n()}})});var S=t.effects.define("scale",function(e,n){var i=t(this),s=e.mode,o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==s?0:100),r=t.extend(true,{from:t.effects.scaledDimensions(i),to:t.effects.scaledDimensions(i,o,e.direction||"both"),origin:e.origin||["middle","center"]},e);if(e.fade){r.from.opacity=1;r.to.opacity=0}t.effects.effect.size.call(this,r,n)});var w=t.effects.define("puff","hide",function(e,n){var i=t.extend(true,{},e,{fade:true,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,i,n)});var C=t.effects.define("pulsate","show",function(e,n){var i=t(this),s=e.mode,o="show"===s,r="hide"===s,a=o||r,l=2*(e.times||5)+(a?1:0),c=e.duration/l,u=0,d=1,p=i.queue().length;if(o||!i.is(":visible")){i.css("opacity",0).show();u=1}for(;d<l;d++){i.animate({opacity:u},c,e.easing);u=1-u}i.animate({opacity:u},c,e.easing);i.queue(n);t.effects.unshift(i,p,l+1)});var I=t.effects.define("shake",function(e,n){var i=1,s=t(this),o=e.direction||"left",r=e.distance||20,a=e.times||3,l=2*a+1,c=Math.round(e.duration/l),u="up"===o||"down"===o?"top":"left",d="up"===o||"left"===o,p={},h={},f={},g=s.queue().length;t.effects.createPlaceholder(s);p[u]=(d?"-=":"+=")+r;h[u]=(d?"+=":"-=")+2*r;f[u]=(d?"-=":"+=")+2*r;s.animate(p,c,e.easing);for(;i<a;i++)s.animate(h,c,e.easing).animate(f,c,e.easing);s.animate(h,c,e.easing).animate(p,c/2,e.easing).queue(n);t.effects.unshift(s,g,l+1)});var _=t.effects.define("slide","show",function(e,n){var i,s,o=t(this),r={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d=e.distance||o["top"===c?"outerHeight":"outerWidth"](true),p={};t.effects.createPlaceholder(o);i=o.cssClip();s=o.position()[c];p[c]=(u?-1:1)*d+s;p.clip=o.cssClip();p.clip[r[l][1]]=p.clip[r[l][0]];if("show"===a){o.cssClip(p.clip);o.css(c,p[c]);p.clip=i;p[c]=s}o.animate(p,{queue:false,duration:e.duration,easing:e.easing,complete:n})});var p;false!==t.uiBackCompat&&(p=t.effects.define("transfer",function(e,n){t(this).transfer(e,n)}));var D=p;t.ui.focusable=function(e,n){var i,s,o,r,a,l=e.nodeName.toLowerCase();if("area"===l){i=e.parentNode;s=i.name;if(!e.href||!s||"map"!==i.nodeName.toLowerCase())return false;o=t("img[usemap='#"+s+"']");return o.length>0&&o.is(":visible")}if(/^(input|select|textarea|button|object)$/.test(l)){r=!e.disabled;if(r){a=t(e).closest("fieldset")[0];a&&(r=!a.disabled)}}else r="a"===l&&e.href||n;return r&&t(e).is(":visible")&&k(t(e))};function k(t){var e=t.css("visibility");while("inherit"===e){t=t.parent();e=t.css("visibility")}return"hidden"!==e}t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}});var T=t.ui.focusable;var E=t.fn.form=function(){return"string"===typeof this[0].form?this.closest("form"):t(this[0].form)};var A=t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var n=e.data("ui-form-reset-instances");t.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){this.form=this.element.form();if(!this.form.length)return;var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler);t.push(this);this.form.data("ui-form-reset-instances",t)},_unbindFormResetHandler:function(){if(!this.form.length)return;var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1);e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}};if("1.7"===t.fn.jquery.substring(0,3)){t.each(["Width","Height"],function(e,n){var i="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};function r(e,n,s,o){t.each(i,function(){n-=parseFloat(t.css(e,"padding"+this))||0;s&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0);o&&(n-=parseFloat(t.css(e,"margin"+this))||0)});return n}t.fn["inner"+n]=function(e){if(void 0===e)return o["inner"+n].call(this);return this.each(function(){t(this).css(s,r(this,e)+"px")})};t.fn["outer"+n]=function(e,i){if("number"!==typeof e)return o["outer"+n].call(this,e);return this.each(function(){t(this).css(s,r(this,e,true,i)+"px")})}});t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}var L=t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};var M=t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}();var P=t.fn.labels=function(){var e,n,i,s,o;if(this[0].labels&&this[0].labels.length)return this.pushStack(this[0].labels);s=this.eq(0).parents("label");i=this.attr("id");if(i){e=this.eq(0).parents().last();o=e.add(e.length?e.siblings():this.siblings());n="label[for='"+t.ui.escapeSelector(i)+"']";s=s.add(o.find(n).addBack(n))}return this.pushStack(s)};var O=t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);if(i&&"static"===e.css("position"))return false;return s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:t(this[0].ownerDocument||document)};var F=t.extend(t.expr[":"],{tabbable:function(e){var n=t.attr(e,"tabindex"),i=null!=n;return(!i||n>=0)&&t.ui.focusable(e,i)}});var $=t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}});var N=t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");e.collapsible||false!==e.active&&null!=e.active||(e.active=0);this._processPanels();e.active<0&&(e.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,n,i=this.options.icons;if(i){e=t("<span>");this._addClass(e,"ui-accordion-header-icon","ui-icon "+i.header);e.prependTo(this.headers);n=this.active.children(".ui-accordion-header-icon");this._removeClass(n,i.header)._addClass(n,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){if("active"===t){this._activate(e);return}if("event"===t){this.options.event&&this._off(this.headers,this.options.event);this._setupEvents(e)}this._super(t,e);"collapsible"!==t||e||false!==this.options.active||this._activate(0);if("icons"===t){this._destroyIcons();e&&this._createIcons()}},_setOptionDisabled:function(t){this._super(t);this.element.attr("aria-disabled",t);this._toggleClass(null,"ui-state-disabled",!!t);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(e.altKey||e.ctrlKey)return;var n=t.ui.keyCode,i=this.headers.length,s=this.headers.index(e.target),o=false;switch(e.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(s+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(s-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(e);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[i-1];break}if(o){t(e.target).attr("tabIndex",-1);t(o).attr("tabIndex",0);t(o).trigger("focus");e.preventDefault()}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels();if(false===e.active&&true===e.collapsible||!this.headers.length){e.active=false;this.active=t()}else if(false===e.active)this._activate(0);else if(this.active.length&&!t.contains(this.element[0],this.active[0]))if(this.headers.length===this.headers.find(".ui-state-disabled").length){e.active=false;this.active=t()}else this._activate(Math.max(0,e.active-1));else e.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(e){this._off(t.not(this.headers));this._off(e.not(this.panels))}},_refresh:function(){var e,n=this.options,i=n.heightStyle,s=this.element.parent();this.active=this._findActive(n.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var e=t(this),n=e.uniqueId().attr("id"),i=e.next(),s=i.uniqueId().attr("id");e.attr("aria-controls",s);i.attr("aria-labelledby",n)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(n.event);if("fill"===i){e=s.height();this.element.siblings(":visible").each(function(){var n=t(this),i=n.css("position");if("absolute"===i||"fixed"===i)return;e-=n.outerHeight(true)});this.headers.each(function(){e-=t(this).outerHeight(true)});this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")}else if("auto"===i){e=0;this.headers.next().each(function(){var n=t(this).is(":visible");n||t(this).show();e=Math.max(e,t(this).css("height","").height());n||t(this).hide()}).height(e)}},_activate:function(e){var n=this._findActive(e)[0];if(n===this.active[0])return;n=n||this.active[0];this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop})},_findActive:function(e){return"number"===typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var n={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,n);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(e){var n,i,s=this.options,o=this.active,r=t(e.currentTarget),a=r[0]===o[0],l=a&&s.collapsible,c=l?t():r.next(),u=o.next(),d={oldHeader:o,oldPanel:u,newHeader:l?t():r,newPanel:c};e.preventDefault();if(a&&!s.collapsible||false===this._trigger("beforeActivate",e,d))return;s.active=!l&&this.headers.index(r);this.active=a?t():r;this._toggle(d);this._removeClass(o,"ui-accordion-header-active","ui-state-active");if(s.icons){n=o.children(".ui-accordion-header-icon");this._removeClass(n,null,s.icons.activeHeader)._addClass(n,null,s.icons.header)}if(!a){this._removeClass(r,"ui-accordion-header-collapsed")._addClass(r,"ui-accordion-header-active","ui-state-active");if(s.icons){i=r.children(".ui-accordion-header-icon");this._removeClass(i,null,s.icons.header)._addClass(i,null,s.icons.activeHeader)}this._addClass(r.next(),"ui-accordion-content-active")}},_toggle:function(e){var n=e.newPanel,i=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=n;this.prevHide=i;if(this.options.animate)this._animate(n,i,e);else{i.hide();n.show();this._toggleComplete(e)}i.attr({"aria-hidden":"true"});i.prev().attr({"aria-selected":"false","aria-expanded":"false"});n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1);n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,n){var i,s,o,r=this,a=0,l=t.css("box-sizing"),c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){r._toggleComplete(n)};"number"===typeof d&&(o=d);"string"===typeof d&&(s=d);s=s||d.easing||u.easing;o=o||d.duration||u.duration;if(!e.length)return t.animate(this.showProps,o,s,p);if(!t.length)return e.animate(this.hideProps,o,s,p);i=t.show().outerHeight();e.animate(this.hideProps,{duration:o,easing:s,step:function(t,e){e.now=Math.round(t)}});t.hide().animate(this.showProps,{duration:o,easing:s,complete:p,step:function(t,n){n.now=Math.round(t);if("height"!==n.prop)"content-box"===l&&(a+=n.now);else if("content"!==r.options.heightStyle){n.now=Math.round(i-e.outerHeight()-a);a=0}}})},_toggleComplete:function(t){var e=t.oldPanel,n=e.prev();this._removeClass(e,"ui-accordion-content-active");this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed");e.length&&(e.parent()[0].className=e.parent()[0].className);this._trigger("activate",null,t)}});var R=t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}e||(e=t.body);e.nodeName||(e=t.body);return e};var H=t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var n=t(e.target);var i=t(t.ui.safeActiveElement(this.document[0]));if(!this.mouseHandled&&n.not(".ui-state-disabled").length){this.select(e);e.isPropagationStopped()||(this.mouseHandled=true);if(n.has(".ui-menu").length)this.expand(e);else if(!this.element.is(":focus")&&i.closest(".ui-menu").length){this.element.trigger("focus",[true]);this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)}}},"mouseenter .ui-menu-item":function(e){if(this.previousFilter)return;var n=t(e.target).closest(".ui-menu-item"),i=t(e.currentTarget);if(n[0]!==i[0])return;this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active");this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){var n=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));n&&this.collapseAll(e)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t);this.mouseHandled=false}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),n=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();n.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var n,i,s,o,r=true;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:r=false;i=this.previousFilter||"";o=false;s=e.keyCode>=96&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode);clearTimeout(this.filterTimer);s===i?o=true:s=i+s;n=this._filterMenuItems(s);n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n;if(!n.length){s=String.fromCharCode(e.keyCode);n=this._filterMenuItems(s)}if(n.length){this.focus(e,n);this.previousFilter=s;this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)}else delete this.previousFilter}r&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n,i,s,o,r=this,a=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);i=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev(),i=t("<span>").data("ui-menu-submenu-caret",true);r._addClass(i,"ui-menu-icon","ui-icon "+a);n.attr("aria-haspopup","true").prepend(i);e.attr("aria-labelledby",n.attr("id"))});this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front");e=l.add(this.element);n=e.find(this.options.items);n.not(".ui-menu-item").each(function(){var e=t(this);r._isDivider(e)&&r._addClass(e,"ui-menu-divider","ui-widget-content")});s=n.not(".ui-menu-item, .ui-menu-divider");o=s.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(s,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper");n.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t);this.element.attr("aria-disabled",String(t));this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var n,i,s;this.blur(t,t&&"focus"===t.type);this._scrollIntoView(e);this.active=e.first();i=this.active.children(".ui-menu-item-wrapper");this._addClass(i,null,"ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",i.attr("id"));s=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(s,null,"ui-state-active");t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);n=e.children(".ui-menu");n.length&&t&&/^mouse/.test(t.type)&&this._startOpening(n);this.activeMenu=e.parent();this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,s,o,r,a;if(this._hasScroll()){n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0;i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0;s=e.offset().top-this.activeMenu.offset().top-n-i;o=this.activeMenu.scrollTop();r=this.activeMenu.height();a=e.outerHeight();s<0?this.activeMenu.scrollTop(o+s):s+a>r&&this.activeMenu.scrollTop(o+s-r+a)}},blur:function(t,e){e||clearTimeout(this.timer);if(!this.active)return;this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active");this._trigger("blur",t,{item:this.active});this.active=null},_startOpening:function(t){clearTimeout(this.timer);if("true"!==t.attr("aria-hidden"))return;this.timer=this._delay(function(){this._close();this._open(t)},this.delay)},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true");e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer);this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element);this._close(i);this.blur(e);this._removeClass(i.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element);t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(e&&e.length){this._close();this.focus(t,e)}},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(e&&e.length){this._open(e.parent());this._delay(function(){this.focus(t,e)})}},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0));i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]());this.focus(n,i)},nextPage:function(e){var n,i,s;if(!this.active){this.next(e);return}if(this.isLastItem())return;if(this._hasScroll()){i=this.active.offset().top;s=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){n=t(this);return n.offset().top-i-s<0});this.focus(e,n)}else this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(e){var n,i,s;if(!this.active){this.next(e);return}if(this.isFirstItem())return;if(this._hasScroll()){i=this.active.offset().top;s=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){n=t(this);return n.offset().top-i+s>0});this.focus(e,n)}else this.focus(e,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,true);this._trigger("select",e,n)},_filterMenuItems:function(e){var n=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}});t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,n,i,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,r="input"===s;this.isMultiLine=o||!r&&this._isContentEditable(this.element);this.valueMethod=this.element[o||r?"val":"text"];this.isNewMenu=true;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly")){e=true;i=true;n=true;return}e=false;i=false;n=false;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=true;this._move("previousPage",s);break;case o.PAGE_DOWN:e=true;this._move("nextPage",s);break;case o.UP:e=true;this._keyEvent("previous",s);break;case o.DOWN:e=true;this._keyEvent("next",s);break;case o.ENTER:if(this.menu.active){e=true;s.preventDefault();this.menu.select(s)}break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:if(this.menu.element.is(":visible")){this.isMultiLine||this._value(this.term);this.close(s);s.preventDefault()}break;default:n=true;this._searchTimeout(s);break}},keypress:function(i){if(e){e=false;this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault();return}if(n)return;var s=t.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:this._move("previousPage",i);break;case s.PAGE_DOWN:this._move("nextPage",i);break;case s.UP:this._keyEvent("previous",i);break;case s.DOWN:this._keyEvent("next",i);break}},input:function(t){if(i){i=false;t.preventDefault();return}this._searchTimeout(t)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(t){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(t);this._change(t)}});this._initSource();this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(e){e.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,n){var i,s;if(this.isNewMenu){this.isNewMenu=false;if(e.originalEvent&&/^mouse/.test(e.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});return}}s=n.item.data("ui-autocomplete-item");false!==this._trigger("focus",e,{item:s})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value);i=n.item.attr("aria-label")||s.value;if(i&&t.trim(i).length){this.liveRegion.children().hide();t("<div>").text(i).appendTo(this.liveRegion)}},menuselect:function(e,n){var i=n.item.data("ui-autocomplete-item"),s=this.previous;if(this.element[0]!==t.ui.safeActiveElement(this.document[0])){this.element.trigger("focus");this.previous=s;this._delay(function(){this.previous=s;this.selectedItem=i})}false!==this._trigger("select",e,{item:i})&&this._value(i.value);this.term=this._value();this.close(e);this.selectedItem=i}});this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e);"source"===t&&this._initSource();"appendTo"===t&&this.menu.element.appendTo(this._appendTo());"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var n=this.menu.element[0];return e.target===this.element[0]||e.target===n||t.contains(n,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0));e&&e[0]||(e=this.element.closest(".ui-front, dialog"));e.length||(e=this.document[0].body);return e},_initSource:function(){var e,n,i=this;if(t.isArray(this.options.source)){e=this.options.source;this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}}else if("string"===typeof this.options.source){n=this.options.source;this.source=function(e,s){i.xhr&&i.xhr.abort();i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}}else this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching);this.searching=this._delay(function(){var e=this.term===this._value(),n=this.menu.element.is(":visible"),i=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;if(!e||e&&!n&&!i){this.selectedItem=null;this.search(null,t)}},this.options.delay)},search:function(t,e){t=null!=t?t:this._value();this.term=this._value();if(t.length<this.options.minLength)return this.close(e);if(false===this._trigger("search",e))return;return this._search(t)},_search:function(t){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t);this.pending--;this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t));this._trigger("response",null,{content:t});if(!this.options.disabled&&t&&t.length&&!this.cancelSearch){this._suggest(t);this._trigger("open")}else this._close()},close:function(t){this.cancelSearch=true;this._close(t)},_close:function(t){this._off(this.document,"mousedown");if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",t)}},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){if(e.length&&e[0].label&&e[0].value)return e;return t.map(e,function(e){if("string"===typeof e)return{label:e,value:e};return t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var n=this.menu.element.empty();this._renderMenu(n,e);this.isNewMenu=true;this.menu.refresh();n.show();this._resizeMenu();n.position(t.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next();this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,function(t,n){i._renderItemData(e,n)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").append(t("<div>").text(n.label)).appendTo(e)},_move:function(t,e){if(!this.menu.element.is(":visible")){this.search(null,e);return}if(this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)){this.isMultiLine||this._value(this.term);this.menu.blur();return}this.menu[t](e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(t,e);e.preventDefault()}},_isContentEditable:function(t){if(!t.length)return false;var e=t.prop("contentEditable");if("inherit"===e)return this._isContentEditable(t.parent());return"true"===e}});t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,function(t){return i.test(t.label||t.value||t)})}});t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var n;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;n=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults;this.liveRegion.children().hide();t("<div>").text(n).appendTo(this.liveRegion)}});var V=t.ui.autocomplete;var B=/ui-corner-([a-z]){2,6}/g;var j=t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:true,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,n=[];t.each(this.options.items,function(i,s){var o;var r={};if(!s)return;if("controlgroupLabel"===i){o=e.element.find(s);o.each(function(){var e=t(this);if(e.children(".ui-controlgroup-label-contents").length)return;e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")});e._addClass(o,null,"ui-widget ui-widget-content ui-state-default");n=n.concat(o.get());return}if(!t.fn[i])return;r=e["_"+i+"Options"]?e["_"+i+"Options"]("middle"):{classes:{}};e.element.find(s).each(function(){var s=t(this);var o=s[i]("instance");var a=t.widget.extend({},r);if("button"===i&&s.parent(".ui-spinner").length)return;o||(o=s[i]()[i]("instance"));o&&(a.classes=e._resolveClassesValues(a.classes,o));s[i](a);var l=s[i]("widget");t.data(l[0],"ui-controlgroup-data",o||s[i]("instance"));n.push(l[0])})});this.childWidgets=t(t.unique(n));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var n=t(this),i=n.data("ui-controlgroup-data");i&&i[e]&&i[e]()})},_updateCornerClass:function(t,e){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all";var i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,n);this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var n="vertical"===this.options.direction;var i={classes:{}};i.classes[e]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[t];return i},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");e.classes["ui-spinner-up"]="";e.classes["ui-spinner-down"]="";return e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,n){var i={};t.each(e,function(s){var o=n.options.classes[s]||"";o=t.trim(o.replace(B,""));i[s]=(o+" "+e[s]).replace(/\s+/g," ")});return i},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction);this._super(t,e);if("disabled"===t){this._callChildMethod(e?"disable":"enable");return}this.refresh()},refresh:function(){var e,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix");this._initWidgets();e=this.childWidgets;this.options.onlyVisible&&(e=e.filter(":visible"));if(e.length){t.each(["first","last"],function(t,i){var s=e[i]().data("ui-controlgroup-data");if(s&&n["_"+s.widgetName+"Options"]){var o=n["_"+s.widgetName+"Options"](1===e.length?"only":i);o.classes=n._resolveClassesValues(o.classes,s);s.element[s.widgetName](o)}else n._updateCornerClass(e[i](),i)});this._callChildMethod("refresh")}}});t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:true,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,n;var i=this;var s=this._super()||{};this._readType();n=this.element.labels();this.label=t(n[n.length-1]);this.label.length||t.error("No label found for checkboxradio widget");this.originalLabel="";this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML});this.originalLabel&&(s.label=this.originalLabel);e=this.element[0].disabled;null!=e&&(s.disabled=e);return s},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler();null==this.options.disabled&&(this.options.disabled=this.element[0].disabled);this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label");this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel);this._enhance();if(t){this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active");this.icon&&this._addClass(this.icon,null,"ui-state-hover")}this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e;var n=this.element[0].name;var i="input[name='"+t.ui.escapeSelector(n)+"']";if(!n)return t([]);e=this.form.length?t(this.form[0].elements).filter(i):t(i).filter(function(){return 0===t(this).form().length});return e.not(this.element)},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e);this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e);"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler();if(this.icon){this.icon.remove();this.iconSpace.remove()}},_setOption:function(t,e){if("label"===t&&!e)return;this._super(t,e);if("disabled"===t){this._toggleClass(this.label,null,"ui-state-disabled",e);this.element[0].disabled=e;return}this.refresh()},_updateIcon:function(e){var n="ui-icon ui-icon-background ";if(this.options.icon){if(!this.icon){this.icon=t("<span>");this.iconSpace=t("<span> </span>");this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")}if("checkbox"===this.type){n+=e?"ui-icon-check ui-state-checked":"ui-icon-blank";this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")}else n+="ui-icon-blank";this._addClass(this.icon,"ui-checkboxradio-icon",n);e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked");this.icon.prependTo(this.label).after(this.iconSpace)}else if(void 0!==this.icon){this.icon.remove();this.iconSpace.remove();delete this.icon}},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0]));this.iconSpace&&(t=t.not(this.iconSpace[0]));t.remove();this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t);null!==this.options.label&&this._updateLabel();e!==this.options.disabled&&this._setOptions({disabled:e})}}]);var z=t.ui.checkboxradio;t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:true},_getCreateOptions:function(){var t,e=this._super()||{};this.isInput=this.element.is("input");t=this.element[0].disabled;null!=t&&(e.disabled=t);this.originalLabel=this.isInput?this.element.val():this.element.html();this.originalLabel&&(e.label=this.originalLabel);return e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=true);null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||false);this.hasTitle=!!this.element.attr("title");this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label));this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();this.element.is("a")&&this._on({keyup:function(e){if(e.keyCode===t.ui.keyCode.SPACE){e.preventDefault();this.element[0].click?this.element[0].click():this.element.trigger("click")}}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button");if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip()}},_updateTooltip:function(){this.title=this.element.attr("title");this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,n){var i="iconPosition"!==e,s=i?this.options.iconPosition:n,o="top"===s||"bottom"===s;if(this.icon)i&&this._removeClass(this.icon,null,this.options.icon);else{this.icon=t("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");this.options.showLabel||this._addClass("ui-button-icon-only")}i&&this._addClass(this.icon,null,n);this._attachIcon(s);if(o){this._addClass(this.icon,null,"ui-widget-icon-block");this.iconSpace&&this.iconSpace.remove()}else{if(!this.iconSpace){this.iconSpace=t("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space")}this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(s)}},_destroy:function(){this.element.removeAttr("role");this.icon&&this.icon.remove();this.iconSpace&&this.iconSpace.remove();this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,n=void 0===t.icon?this.options.icon:t.icon;e||n||(t.showLabel=true);this._super(t)},_setOption:function(t,e){if("icon"===t)if(e)this._updateIcon(t,e);else if(this.icon){this.icon.remove();this.iconSpace&&this.iconSpace.remove()}"iconPosition"===t&&this._updateIcon(t,e);if("showLabel"===t){this._toggleClass("ui-button-icon-only",null,!e);this._updateTooltip()}if("label"===t)if(this.isInput)this.element.val(e);else{this.element.html(e);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition)}}this._super(t,e);if("disabled"===t){this._toggleClass(null,"ui-state-disabled",e);this.element[0].disabled=e;e&&this.element.blur()}},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t});this._updateTooltip()}});if(false!==t.uiBackCompat){t.widget("ui.button",t.ui.button,{options:{text:true,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text);!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel);if(this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary)this.options.icon&&(this.options.icons.primary=this.options.icon);else if(this.options.icons.primary)this.options.icon=this.options.icons.primary;else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end"}this._super()},_setOption:function(t,e){if("text"===t){this._super("showLabel",e);return}"showLabel"===t&&(this.options.text=e);"icon"===t&&(this.options.icons.primary=e);if("icons"===t)if(e.primary){this._super("icon",e.primary);this._super("iconPosition","beginning")}else if(e.secondary){this._super("icon",e.secondary);this._super("iconPosition","end")}this._superApply(arguments)}});t.fn.button=function(e){return function(){if(!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type"))return e.apply(this,arguments);t.ui.checkboxradio||t.error("Checkboxradio widget missing");if(0===arguments.length)return this.checkboxradio({icon:false});return this.checkboxradio.apply(this,arguments)}}(t.fn.button);t.fn.buttonset=function(){t.ui.controlgroup||t.error("Controlgroup widget missing");if("option"===arguments[0]&&"items"===arguments[1]&&arguments[2])return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]);if("option"===arguments[0]&&"items"===arguments[1])return this.controlgroup.apply(this,[arguments[0],"items.button"]);"object"===typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items});return this.controlgroup.apply(this,arguments)}}var G=t.ui.button;t.extend(t.ui,{datepicker:{version:"1.12.1"}});var U;function W(t){var e,n;while(t.length&&t[0]!==document){e=t.css("position");if("absolute"===e||"relative"===e||"fixed"===e){n=parseInt(t.css("zIndex"),10);if(!isNaN(n)&&0!==n)return n}t=t.parent()}return 0}function K(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};t.extend(this._defaults,this.regional[""]);this.regional.en=t.extend(true,{},this.regional[""]);this.regional["en-US"]=t.extend(true,{},this.regional.en);this.dpDiv=Y(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}t.extend(K.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){Q(this._defaults,t||{});return this},_attachDatepicker:function(e,n){var i,s,o;i=e.nodeName.toLowerCase();s="div"===i||"span"===i;if(!e.id){this.uuid+=1;e.id="dp"+this.uuid}o=this._newInst(t(e),s);o.settings=t.extend({},n||{});"input"===i?this._connectDatepicker(e,o):s&&this._inlineDatepicker(e,o)},_newInst:function(e,n){var i=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?Y(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]);n.trigger=t([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,n);i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(n);t.data(e,"datepicker",n);n.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,n){var i,s,o,r=this._get(n,"appendText"),a=this._get(n,"isRTL");n.append&&n.append.remove();if(r){n.append=t("<span class='"+this._appendClass+"'>"+r+"</span>");e[a?"before":"after"](n.append)}e.off("focus",this._showDatepicker);n.trigger&&n.trigger.remove();i=this._get(n,"showOn");"focus"!==i&&"both"!==i||e.on("focus",this._showDatepicker);if("button"===i||"both"===i){s=this._get(n,"buttonText");o=this._get(n,"buttonImage");n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:s,title:s}):s));e[a?"before":"after"](n.trigger);n.trigger.on("click",function(){if(t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0])t.datepicker._hideDatepicker();else if(t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]){t.datepicker._hideDatepicker();t.datepicker._showDatepicker(e[0])}else t.datepicker._showDatepicker(e[0]);return false})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,s,o=new Date(2009,11,20),r=this._get(t,"dateFormat");if(r.match(/[DM]/)){e=function(t){n=0;i=0;for(s=0;s<t.length;s++)if(t[s].length>n){n=t[s].length;i=s}return i};o.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort")));o.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())}t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,n){var i=t(e);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(n.dpDiv);t.data(e,"datepicker",n);this._setDate(n,this._getDefaultDate(n),true);this._updateDatepicker(n);this._updateAlternate(n);n.settings.disabled&&this._disableDatepicker(e);n.dpDiv.css("display","block")},_dialogDatepicker:function(e,n,i,s,o){var r,a,l,c,u,d=this._dialogInst;if(!d){this.uuid+=1;r="dp"+this.uuid;this._dialogInput=t("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);t("body").append(this._dialogInput);d=this._dialogInst=this._newInst(this._dialogInput,false);d.settings={};t.data(this._dialogInput[0],"datepicker",d)}Q(d.settings,s||{});n=n&&n.constructor===Date?this._formatDate(d,n):n;this._dialogInput.val(n);this._pos=o?o.length?o:[o.pageX,o.pageY]:null;if(!this._pos){a=document.documentElement.clientWidth;l=document.documentElement.clientHeight;c=document.documentElement.scrollLeft||document.body.scrollLeft;u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+c,l/2-150+u]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");d.settings.onSelect=i;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);t.blockUI&&t.blockUI(this.dpDiv);t.data(this._dialogInput[0],"datepicker",d);return this},_destroyDatepicker:function(e){var n,i=t(e),s=t.data(e,"datepicker");if(!i.hasClass(this.markerClassName))return;n=e.nodeName.toLowerCase();t.removeData(e,"datepicker");if("input"===n){s.append.remove();s.trigger.remove();i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else"div"!==n&&"span"!==n||i.removeClass(this.markerClassName).empty();U===s&&(U=null)},_enableDatepicker:function(e){var n,i,s=t(e),o=t.data(e,"datepicker");if(!s.hasClass(this.markerClassName))return;n=e.nodeName.toLowerCase();if("input"===n){e.disabled=false;o.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if("div"===n||"span"===n){i=s.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t})},_disableDatepicker:function(e){var n,i,s=t(e),o=t.data(e,"datepicker");if(!s.hasClass(this.markerClassName))return;n=e.nodeName.toLowerCase();if("input"===n){e.disabled=true;o.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if("div"===n||"span"===n){i=s.children("."+this._inlineClass);i.children().addClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t});this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(t){if(!t)return false;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return true;return false},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,n,i){var s,o,r,a,l=this._getInst(e);if(2===arguments.length&&"string"===typeof n)return"defaults"===n?t.extend({},t.datepicker._defaults):l?"all"===n?t.extend({},l.settings):this._get(l,n):null;s=n||{};if("string"===typeof n){s={};s[n]=i}if(l){this._curInst===l&&this._hideDatepicker();o=this._getDateDatepicker(e,true);r=this._getMinMaxDate(l,"min");a=this._getMinMaxDate(l,"max");Q(l.settings,s);null!==r&&void 0!==s.dateFormat&&void 0===s.minDate&&(l.settings.minDate=this._formatDate(l,r));null!==a&&void 0!==s.dateFormat&&void 0===s.maxDate&&(l.settings.maxDate=this._formatDate(l,a));"disabled"in s&&(s.disabled?this._disableDatepicker(e):this._enableDatepicker(e));this._attachments(t(e),l);this._autoSize(l);this._setDate(l,o);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);if(n){this._setDate(n,e);this._updateDatepicker(n);this._updateAlternate(n)}},_getDateDatepicker:function(t,e){var n=this._getInst(t);n&&!n.inline&&this._setDateFromField(n,e);return n?this._getDate(n):null},_doKeyDown:function(e){var n,i,s,o=t.datepicker._getInst(e.target),r=true,a=o.dpDiv.is(".ui-datepicker-rtl");o._keyEvent=true;if(t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker();r=false;break;case 13:s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv);s[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,s[0]);n=t.datepicker._get(o,"onSelect");if(n){i=t.datepicker._formatDate(o);n.apply(o.input?o.input[0]:null,[i,o])}else t.datepicker._hideDatepicker();return false;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target);r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target);r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D");r=e.ctrlKey||e.metaKey;e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D");r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D");r=e.ctrlKey||e.metaKey;e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D");r=e.ctrlKey||e.metaKey;break;default:r=false}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=false;if(r){e.preventDefault();e.stopPropagation()}},_doKeyPress:function(e){var n,i,s=t.datepicker._getInst(e.target);if(t.datepicker._get(s,"constrainInput")){n=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat"));i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||i<" "||!n||n.indexOf(i)>-1}},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i));if(n){t.datepicker._setDateFromField(i);t.datepicker._updateAlternate(i);t.datepicker._updateDatepicker(i)}}catch(t){}return true},_showDatepicker:function(e){e=e.target||e;"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]);if(t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e)return;var n,i,s,o,r,a,l;n=t.datepicker._getInst(e);if(t.datepicker._curInst&&t.datepicker._curInst!==n){t.datepicker._curInst.dpDiv.stop(true,true);n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])}i=t.datepicker._get(n,"beforeShow");s=i?i.apply(e,[e,n]):{};if(false===s)return;Q(n.settings,s);n.lastVal=null;t.datepicker._lastInput=e;t.datepicker._setDateFromField(n);t.datepicker._inDialog&&(e.value="");if(!t.datepicker._pos){t.datepicker._pos=t.datepicker._findPos(e);t.datepicker._pos[1]+=e.offsetHeight}o=false;t(e).parents().each(function(){o|="fixed"===t(this).css("position");return!o});r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]};t.datepicker._pos=null;n.dpDiv.empty();n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});t.datepicker._updateDatepicker(n);r=t.datepicker._checkOffset(n,r,o);n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"});if(!n.inline){a=t.datepicker._get(n,"showAnim");l=t.datepicker._get(n,"duration");n.dpDiv.css("z-index",W(t(e))+1);t.datepicker._datepickerShowing=true;t.effects&&t.effects.effect[a]?n.dpDiv.show(a,t.datepicker._get(n,"showOptions"),l):n.dpDiv[a||"show"](a?l:null);t.datepicker._shouldFocusInput(n)&&n.input.trigger("focus");t.datepicker._curInst=n}},_updateDatepicker:function(e){this.maxRows=4;U=e;e.dpDiv.empty().append(this._generateHTML(e));this._attachHandlers(e);var n,i=this._getNumberOfMonths(e),s=i[1],o=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&X.apply(r.get(0));e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em");e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi");e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus");if(e.yearshtml){n=e.yearshtml;setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml);n=e.yearshtml=null},0)}},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var s=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:t(document).scrollTop());n.left-=this._get(e,"isRTL")?s-r:0;n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0;n.top-=i&&n.top===e.input.offset().top+a?t(document).scrollTop():0;n.left-=Math.min(n.left,n.left+s>l&&l>s?Math.abs(n.left+s-l):0);n.top-=Math.min(n.top,n.top+o>c&&c>o?Math.abs(o+a):0);return n},_findPos:function(e){var n,i=this._getInst(e),s=this._get(i,"isRTL");while(e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e)))e=e[s?"previousSibling":"nextSibling"];n=t(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var n,i,s,o,r=this._curInst;if(!r||e&&r!==t.data(e,"datepicker"))return;if(this._datepickerShowing){n=this._get(r,"showAnim");i=this._get(r,"duration");s=function(){t.datepicker._tidyDialog(r)};t.effects&&(t.effects.effect[n]||t.effects[n])?r.dpDiv.hide(n,t.datepicker._get(r,"showOptions"),i,s):r.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,s);n||s();this._datepickerShowing=false;o=this._get(r,"onClose");o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]);this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(t.blockUI){t.unblockUI();t("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!t.datepicker._curInst)return;var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id!==t.datepicker._mainDivId&&0===n.parents("#"+t.datepicker._mainDivId).length&&!n.hasClass(t.datepicker.markerClassName)&&!n.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&!(t.datepicker._inDialog&&t.blockUI)||n.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==i)&&t.datepicker._hideDatepicker()},_adjustDate:function(e,n,i){var s=t(e),o=this._getInst(s[0]);if(this._isDisabledDatepicker(s[0]))return;this._adjustInstDate(o,n+("M"===i?this._get(o,"showCurrentAtPos"):0),i);this._updateDatepicker(o)},_gotoToday:function(e){var n,i=t(e),s=this._getInst(i[0]);if(this._get(s,"gotoCurrent")&&s.currentDay){s.selectedDay=s.currentDay;s.drawMonth=s.selectedMonth=s.currentMonth;s.drawYear=s.selectedYear=s.currentYear}else{n=new Date;s.selectedDay=n.getDate();s.drawMonth=s.selectedMonth=n.getMonth();s.drawYear=s.selectedYear=n.getFullYear()}this._notifyChange(s);this._adjustDate(i)},_selectMonthYear:function(e,n,i){var s=t(e),o=this._getInst(s[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10);this._notifyChange(o);this._adjustDate(s)},_selectDay:function(e,n,i,s){var o,r=t(e);if(t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0]))return;o=this._getInst(r[0]);o.selectedDay=o.currentDay=t("a",s).html();o.selectedMonth=o.currentMonth=n;o.selectedYear=o.currentYear=i;this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,s=t(e),o=this._getInst(s[0]);n=null!=n?n:this._formatDate(o);o.input&&o.input.val(n);this._updateAlternate(o);i=this._get(o,"onSelect");i?i.apply(o.input?o.input[0]:null,[n,o]):o.input&&o.input.trigger("change");if(o.inline)this._updateDatepicker(o);else{this._hideDatepicker();this._lastInput=o.input[0];"object"!==typeof o.input[0]&&o.input.trigger("focus");this._lastInput=null}},_updateAlternate:function(e){var n,i,s,o=this._get(e,"altField");if(o){n=this._get(e,"altFormat")||this._get(e,"dateFormat");i=this._getDate(e);s=this.formatDate(n,i,this._getFormatConfig(e));t(o).val(s)}},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));e=n.getTime();n.setMonth(0);n.setDate(1);return Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";n="object"===typeof n?n.toString():n+"";if(""===n)return null;var s,o,r,a=0,l=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!==typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),u=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,d=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,h=(i?i.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,v=-1,m=-1,b=false,y,x=function(t){var n=s+1<e.length&&e.charAt(s+1)===t;n&&s++;return n},q=function(t){var e=x(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,s="y"===t?i:1,o=new RegExp("^\\d{"+s+","+i+"}"),r=n.substring(a).match(o);if(!r)throw"Missing number at position "+a;a+=r[0].length;return parseInt(r[0],10)},S=function(e,i,s){var o=-1,r=t.map(x(e)?s:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});t.each(r,function(t,e){var i=e[1];if(n.substr(a,i.length).toLowerCase()===i.toLowerCase()){o=e[0];a+=i.length;return false}});if(-1!==o)return o+1;throw"Unknown name at position "+a},w=function(){if(n.charAt(a)!==e.charAt(s))throw"Unexpected literal at position "+a;a++};for(s=0;s<e.length;s++)if(b)"'"!==e.charAt(s)||x("'")?w():b=false;else switch(e.charAt(s)){case"d":v=q("d");break;case"D":S("D",u,d);break;case"o":m=q("o");break;case"m":g=q("m");break;case"M":g=S("M",p,h);break;case"y":f=q("y");break;case"@":y=new Date(q("@"));f=y.getFullYear();g=y.getMonth()+1;v=y.getDate();break;case"!":y=new Date((q("!")-this._ticksTo1970)/1e4);f=y.getFullYear();g=y.getMonth()+1;v=y.getDate();break;case"'":x("'")?w():b=true;break;default:w()}if(a<n.length){r=n.substr(a);if(!/^\s+/.test(r))throw"Extra/unparsed characters found in date: "+r}-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=c?0:-100));if(m>-1){g=1;v=m;do{o=this._getDaysInMonth(f,g-1);if(v<=o)break;g++;v-=o}while(true)}y=this._daylightSavingAdjust(new Date(f,g-1,v));if(y.getFullYear()!==f||y.getMonth()+1!==g||y.getDate()!==v)throw"Invalid date";return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,s=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,r=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,a=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;n&&i++;return n},c=function(t,e,n){var i=""+e;if(l(t))while(i.length<n)i="0"+i;return i},u=function(t,e,n,i){return l(t)?i[e]:n[e]},d="",p=false;if(e)for(i=0;i<t.length;i++)if(p)"'"!==t.charAt(i)||l("'")?d+=t.charAt(i):p=false;else switch(t.charAt(i)){case"d":d+=c("d",e.getDate(),2);break;case"D":d+=u("D",e.getDay(),s,o);break;case"o":d+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",e.getMonth()+1,2);break;case"M":d+=u("M",e.getMonth(),r,a);break;case"y":d+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":p=true;break;default:d+=t.charAt(i)}return d},_possibleChars:function(t){var e,n="",i=false,s=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;i&&e++;return i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||s("'")?n+=t.charAt(e):i=false;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":s("'")?n+="'":i=true;break;default:n+=t.charAt(e)}return n},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()===t.lastVal)return;var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),o=s,r=this._getFormatConfig(t);try{o=this.parseDate(n,i,r)||s}catch(t){i=e?"":i}t.selectedDay=o.getDate();t.drawMonth=t.selectedMonth=o.getMonth();t.drawYear=t.selectedYear=o.getFullYear();t.currentDay=i?o.getDate():0;t.currentMonth=i?o.getMonth():0;t.currentYear=i?o.getFullYear():0;this._adjustInstDate(t)},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var s=function(t){var e=new Date;e.setDate(e.getDate()+t);return e},o=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(t){}var i=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,s=i.getFullYear(),o=i.getMonth(),r=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(n);while(l){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10);r=Math.min(r,t.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(l[1],10);r=Math.min(r,t.datepicker._getDaysInMonth(s,o));break}l=a.exec(n)}return new Date(s,o,r)},r=null==n||""===n?i:"string"===typeof n?o(n):"number"===typeof n?isNaN(n)?i:s(n):new Date(n.getTime());r=r&&"Invalid Date"===r.toString()?i:r;if(r){r.setHours(0);r.setMinutes(0);r.setSeconds(0);r.setMilliseconds(0)}return this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){if(!t)return null;t.setHours(t.getHours()>12?t.getHours()+2:0);return t},_setDate:function(t,e,n){var i=!e,s=t.selectedMonth,o=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate();t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth();t.drawYear=t.selectedYear=t.currentYear=r.getFullYear();s===t.selectedMonth&&o===t.selectedYear||n||this._notifyChange(t);this._adjustInstDate(t);t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){t.datepicker._selectMonthYear(i,this,"M");return false},selectYear:function(){t.datepicker._selectMonthYear(i,this,"Y");return false}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m,b,y,x,q,S,w,C,I,_,D,k,T,E,A,L,M,P,O,F,$,N,R,H=new Date,V=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),B=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),z=this._get(t,"hideIfNoPrevNext"),G=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),W=this._get(t,"showCurrentAtPos"),K=this._get(t,"stepMonths"),Y=1!==U[0]||1!==U[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),Z=this._getMinMaxDate(t,"max"),J=t.drawMonth-W,tt=t.drawYear;if(J<0){J+=12;tt--}if(Z){e=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-U[0]*U[1]+1,Z.getDate()));e=Q&&e<Q?Q:e;while(this._daylightSavingAdjust(new Date(tt,J,1))>e){J--;if(J<0){J=11;tt--}}}t.drawMonth=J;t.drawYear=tt;n=this._get(t,"prevText");n=G?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,J-K,1)),this._getFormatConfig(t)):n;i=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>";s=this._get(t,"nextText");s=G?this.formatDate(s,this._daylightSavingAdjust(new Date(tt,J+K,1)),this._getFormatConfig(t)):s;o=this._canAdjustMonth(t,1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+s+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+s+"</span></a>";r=this._get(t,"currentText");a=this._get(t,"gotoCurrent")&&t.currentDay?X:V;r=G?this.formatDate(r,a,this._getFormatConfig(t)):r;l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>";c=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(B?"":l)+"</div>":"";u=parseInt(this._get(t,"firstDay"),10);u=isNaN(u)?0:u;d=this._get(t,"showWeek");p=this._get(t,"dayNames");h=this._get(t,"dayNamesMin");f=this._get(t,"monthNames");g=this._get(t,"monthNamesShort");v=this._get(t,"beforeShowDay");m=this._get(t,"showOtherMonths");b=this._get(t,"selectOtherMonths");y=this._getDefaultDate(t);x="";for(S=0;S<U[0];S++){w="";this.maxRows=4;for(C=0;C<U[1];C++){I=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay));_=" ui-corner-all";D="";if(Y){D+="<div class='ui-datepicker-group";if(U[1]>1)switch(C){case 0:D+=" ui-datepicker-group-first";_=" ui-corner-"+(B?"right":"left");break;case U[1]-1:D+=" ui-datepicker-group-last";_=" ui-corner-"+(B?"left":"right");break;default:D+=" ui-datepicker-group-middle";_="";break}D+="'>"}D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+_+"'>"+(/all|left/.test(_)&&0===S?B?o:i:"")+(/all|right/.test(_)&&0===S?B?i:o:"")+this._generateMonthYearHeader(t,J,tt,Q,Z,S>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>";k=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"";for(q=0;q<7;q++){T=(q+u)%7;k+="<th scope='col'"+((q+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[T]+"'>"+h[T]+"</span></th>"}D+=k+"</tr></thead><tbody>";E=this._getDaysInMonth(tt,J);tt===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,E));A=(this._getFirstDayOfMonth(tt,J)-u+7)%7;L=Math.ceil((A+E)/7);M=Y&&this.maxRows>L?this.maxRows:L;this.maxRows=M;P=this._daylightSavingAdjust(new Date(tt,J,1-A));for(O=0;O<M;O++){D+="<tr>";F=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(P)+"</td>":"";for(q=0;q<7;q++){$=v?v.apply(t.input?t.input[0]:null,[P]):[true,""];N=P.getMonth()!==J;R=N&&!b||!$[0]||Q&&P<Q||Z&&P>Z;F+="<td class='"+((q+u+6)%7>=5?" ui-datepicker-week-end":"")+(N?" ui-datepicker-other-month":"")+(P.getTime()===I.getTime()&&J===t.selectedMonth&&t._keyEvent||y.getTime()===P.getTime()&&y.getTime()===I.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(N&&!m?"":" "+$[1]+(P.getTime()===X.getTime()?" "+this._currentClass:"")+(P.getTime()===V.getTime()?" ui-datepicker-today":""))+"'"+(N&&!m||!$[2]?"":" title='"+$[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(N&&!m?"&#xa0;":R?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===V.getTime()?" ui-state-highlight":"")+(P.getTime()===X.getTime()?" ui-state-active":"")+(N?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>";P.setDate(P.getDate()+1);P=this._daylightSavingAdjust(P)}D+=F+"</tr>"}J++;if(J>11){J=0;tt++}D+="</tbody></table>"+(Y?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");w+=D}x+=w}x+=c;t._keyEvent=false;return x},_generateMonthYearHeader:function(t,e,n,i,s,o,r,a){var l,c,u,d,p,h,f,g,v=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),b=this._get(t,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",x="";if(o||!v)x+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{l=i&&i.getFullYear()===n;c=s&&s.getFullYear()===n;x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(u=0;u<12;u++)(!l||u>=i.getMonth())&&(!c||u<=s.getMonth())&&(x+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+a[u]+"</option>");x+="</select>"}b||(y+=x+(o||!(v&&m)?"&#xa0;":""));if(!t.yearshtml){t.yearshtml="";if(o||!m)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{d=this._get(t,"yearRange").split(":");p=(new Date).getFullYear();h=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?p+parseInt(t,10):parseInt(t,10);return isNaN(e)?p:e};f=h(d[0]);g=Math.max(f,h(d[1]||""));f=i?Math.max(f,i.getFullYear()):f;g=s?Math.min(g,s.getFullYear()):g;t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;f<=g;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>";y+=t.yearshtml;t.yearshtml=null}}y+=this._get(t,"yearSuffix");b&&(y+=(o||!(v&&m)?"&#xa0;":"")+x);y+="</div>";return y},_adjustInstDate:function(t,e,n){var i=t.selectedYear+("Y"===n?e:0),s=t.selectedMonth+("M"===n?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(i,s))+("D"===n?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,s,o)));t.selectedDay=r.getDate();t.drawMonth=t.selectedMonth=r.getMonth();t.drawYear=t.selectedYear=r.getFullYear();"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),s=n&&e<n?n:e;return i&&s>i?i:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"===typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var s=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(n,i+(e<0?e:s[0]*s[1]),1));e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth()));return this._isInRange(t,o)},_isInRange:function(t,e){var n,i,s=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),r=null,a=null,l=this._get(t,"yearRange");if(l){n=l.split(":");i=(new Date).getFullYear();r=parseInt(n[0],10);a=parseInt(n[1],10);n[0].match(/[+\-].*/)&&(r+=i);n[1].match(/[+\-].*/)&&(a+=i)}return(!s||e.getTime()>=s.getTime())&&(!o||e.getTime()<=o.getTime())&&(!r||e.getFullYear()>=r)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");e="string"!==typeof e?e:(new Date).getFullYear()%100+parseInt(e,10);return{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){if(!e){t.currentDay=t.selectedDay;t.currentMonth=t.selectedMonth;t.currentYear=t.selectedYear}var s=e?"object"===typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}});function Y(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",n,function(){t(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",n,X)}function X(){if(!t.datepicker._isDisabledDatepicker(U.inline?U.dpDiv.parent()[0]:U.input[0])){t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");t(this).addClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover")}}function Q(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}t.fn.datepicker=function(e){if(!this.length)return this;if(!t.datepicker.initialized){t(document).on("mousedown",t.datepicker._checkExternalClick);t.datepicker.initialized=true}0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);if("string"===typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e))return t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n));if("option"===e&&2===arguments.length&&"string"===typeof arguments[1])return t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n));return this.each(function(){"string"===typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)})};t.datepicker=new K;t.datepicker.initialized=false;t.datepicker.uuid=(new Date).getTime();t.datepicker.version="1.12.1";var Z=t.datepicker;var J=t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var tt=false;t(document).on("mouseup",function(){tt=false});var et=t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(n){if(true===t.data(n.target,e.widgetName+".preventClickEvent")){t.removeData(n.target,e.widgetName+".preventClickEvent");n.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(tt)return;this._mouseMoved=false;this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var n=this,i=1===e.which,s=!("string"!==typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;if(!i||s||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=true},this.options.delay));if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=false!==this._mouseStart(e);if(!this._mouseStarted){e.preventDefault();return true}}true===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(t){return n._mouseMove(t)};this._mouseUpDelegate=function(t){return n._mouseUp(t)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();tt=true;return true},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=true;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}(e.which||e.button)&&(this._mouseMoved=true);if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=false!==this._mouseStart(this._mouseDownEvent,e);this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)}return!this._mouseStarted},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",true);this._mouseStop(e)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;tt=false;e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});var nt=t.ui.plugin={add:function(e,n,i){var s,o=t.ui[e].prototype;for(s in i){o.plugins[s]=o.plugins[s]||[];o.plugins[s].push([n,i[s]])}},call:function(t,e,n,i){var s,o=t.plugins[e];if(!o)return;if(!i&&(!t.element[0].parentNode||11===t.element[0].parentNode.nodeType))return;for(s=0;s<o.length;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,n)}};var it=t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")};t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},_setOption:function(t,e){this._super(t,e);if("handle"===t){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;if(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0)return false;this.handle=this._getHandle(e);if(!this.handle)return false;this._blurActiveElement(e);this._blockFrames(true===n.iframeFix?"iframe":n.iframeFix);return true},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]),i=t(e.target);if(i.closest(n).length)return;t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;this.helper=this._createHelper(e);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();t.ui.ddmanager&&(t.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(e);this.originalPosition=this.position=this._generatePosition(e,false);this.originalPageX=e.pageX;this.originalPageY=e.pageY;n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt);this._setContainment();if(false===this._trigger("start",e)){this._clear();return false}this._cacheHelperProportions();t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e);this._mouseDrag(e,true);t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e);return true},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(e,true);this.positionAbs=this._convertPositionTo("absolute");if(!n){var i=this._uiHash();if(false===this._trigger("drag",e,i)){this._mouseUp(new t.Event("mouseup",e));return false}this.position=i.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";t.ui.ddmanager&&t.ui.ddmanager.drag(this,e);return false},_mouseStop:function(e){var n=this,i=false;t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e));if(this.dropped){i=this.dropped;this.dropped=false}"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||true===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){false!==n._trigger("stop",e)&&n._clear()}):false!==this._trigger("stop",e)&&this._clear();return false},_mouseUp:function(e){this._unblockFrames();t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e);this.handleElement.is(e.target)&&this.element.trigger("focus");return t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear();return this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),s=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;s.parents("body").length||s.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo);i&&s[0]===this.element[0]&&this._setPositionRelative();s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute");return s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"===typeof e&&(e=e.split(" "));t.isArray(e)&&(e={left:+e[0],top:+e[1]||0});"left"in e&&(this.offset.click.left=e.left+this.margins.left);"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left);"top"in e&&(this.offset.click.top=e.top+this.margins.top);"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];if("absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0});return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,s=this.options,o=this.document[0];this.relativeContainer=null;if(!s.containment){this.containment=null;return}if("window"===s.containment){this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if("document"===s.containment){this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment.constructor===Array){this.containment=s.containment;return}"parent"===s.containment&&(s.containment=this.helper[0].parentNode);n=t(s.containment);i=n[0];if(!i)return;e=/(scroll|auto)/.test(n.css("overflow"));this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=n},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,s,o,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});if(e){if(this.containment){if(this.relativeContainer){i=this.relativeContainer.offset();n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else n=this.containment;t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left);t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top);t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left);t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)}if(r.grid){s=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY;c=n?s-this.offset.click.top>=n[1]||s-this.offset.click.top>n[3]?s:s-this.offset.click.top>=n[1]?s-r.grid[1]:s+r.grid[1]:s;o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX;l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-r.grid[0]:o+r.grid[0]:o}"y"===r.axis&&(l=this.originalPageX);"x"===r.axis&&(c=this.originalPageY)}return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=false;this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){i=i||this._uiHash();t.ui.plugin.call(this,e,[n,i,this],true);if(/^(drag|start|stop)/.test(e)){this.positionAbs=this._convertPositionTo("absolute");i.offset=this.positionAbs}return t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var s=t.extend({},n,{item:i.element});i.sortables=[];t(i.options.connectToSortable).each(function(){var n=t(this).sortable("instance");if(n&&!n.options.disabled){i.sortables.push(n);n.refreshPositions();n._trigger("activate",e,s)}})},stop:function(e,n,i){var s=t.extend({},n,{item:i.element});i.cancelHelperRemoval=false;t.each(i.sortables,function(){var t=this;if(t.isOver){t.isOver=0;i.cancelHelperRemoval=true;t.cancelHelperRemoval=false;t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")};t._mouseStop(e);t.options.helper=t.options._helper}else{t.cancelHelperRemoval=true;t._trigger("deactivate",e,s)}})},drag:function(e,n,i){t.each(i.sortables,function(){var s=false,o=this;o.positionAbs=i.positionAbs;o.helperProportions=i.helperProportions;o.offset.click=i.offset.click;if(o._intersectsWith(o.containerCache)){s=true;t.each(i.sortables,function(){this.positionAbs=i.positionAbs;this.helperProportions=i.helperProportions;this.offset.click=i.offset.click;this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(s=false);return s})}if(s){if(!o.isOver){o.isOver=1;i._parent=n.helper.parent();o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",true);o.options._helper=o.options.helper;o.options.helper=function(){return n.helper[0]};e.target=o.currentItem[0];o._mouseCapture(e,true);o._mouseStart(e,true,true);o.offset.click.top=i.offset.click.top;o.offset.click.left=i.offset.click.left;o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left;o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top;i._trigger("toSortable",e);i.dropped=o.element;t.each(i.sortables,function(){this.refreshPositions()});i.currentItem=i.element;o.fromOutside=i}if(o.currentItem){o._mouseDrag(e);n.position=o.position}}else if(o.isOver){o.isOver=0;o.cancelHelperRemoval=true;o.options._revert=o.options.revert;o.options.revert=false;o._trigger("out",e,o._uiHash(o));o._mouseStop(e,true);o.options.revert=o.options._revert;o.options.helper=o.options._helper;o.placeholder&&o.placeholder.remove();n.helper.appendTo(i._parent);i._refreshOffsets(e);n.position=i._generatePosition(e,true);i._trigger("fromSortable",e);i.dropped=false;t.each(i.sortables,function(){this.refreshPositions()})}})}});t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var s=t("body"),o=i.options;s.css("cursor")&&(o._cursor=s.css("cursor"));s.css("cursor",o.cursor)},stop:function(e,n,i){var s=i.options;s._cursor&&t("body").css("cursor",s._cursor)}});t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var s=t(n.helper),o=i.options;s.css("opacity")&&(o._opacity=s.css("opacity"));s.css("opacity",o.opacity)},stop:function(e,n,i){var s=i.options;s._opacity&&t(n.helper).css("opacity",s._opacity)}});t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(false));n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var s=i.options,o=false,r=i.scrollParentNotHidden[0],a=i.document[0];if(r!==a&&"HTML"!==r.tagName){s.axis&&"x"===s.axis||(i.overflowOffset.top+r.offsetHeight-e.pageY<s.scrollSensitivity?r.scrollTop=o=r.scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-s.scrollSpeed));s.axis&&"y"===s.axis||(i.overflowOffset.left+r.offsetWidth-e.pageX<s.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-s.scrollSpeed))}else{s.axis&&"x"===s.axis||(e.pageY-t(a).scrollTop()<s.scrollSensitivity?o=t(a).scrollTop(t(a).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<s.scrollSensitivity&&(o=t(a).scrollTop(t(a).scrollTop()+s.scrollSpeed)));s.axis&&"y"===s.axis||(e.pageX-t(a).scrollLeft()<s.scrollSensitivity?o=t(a).scrollLeft(t(a).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<s.scrollSensitivity&&(o=t(a).scrollLeft(t(a).scrollLeft()+s.scrollSpeed)))}false!==o&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}});t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var s=i.options;i.snapElements=[];t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,i){var s,o,r,a,l,c,u,d,p,h,f=i.options,g=f.snapTolerance,v=n.offset.left,m=v+i.helperProportions.width,b=n.offset.top,y=b+i.helperProportions.height;for(p=i.snapElements.length-1;p>=0;p--){l=i.snapElements[p].left-i.margins.left;c=l+i.snapElements[p].width;u=i.snapElements[p].top-i.margins.top;d=u+i.snapElements[p].height;if(m<l-g||v>c+g||y<u-g||b>d+g||!t.contains(i.snapElements[p].item.ownerDocument,i.snapElements[p].item)){i.snapElements[p].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[p].item}));i.snapElements[p].snapping=false;continue}if("inner"!==f.snapMode){s=Math.abs(u-y)<=g;o=Math.abs(d-b)<=g;r=Math.abs(l-m)<=g;a=Math.abs(c-v)<=g;s&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top);o&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top);r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left);a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)}h=s||o||r||a;if("outer"!==f.snapMode){s=Math.abs(u-b)<=g;o=Math.abs(d-y)<=g;r=Math.abs(l-v)<=g;a=Math.abs(c-m)<=g;s&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top);o&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top);r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left);a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)}!i.snapElements[p].snapping&&(s||o||r||a||h)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[p].item}));i.snapElements[p].snapping=s||o||r||a||h}}});t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var s,o=i.options,r=t.makeArray(t(o.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});if(!r.length)return;s=parseInt(t(r[0]).css("zIndex"),10)||0;t(r).each(function(e){t(this).css("zIndex",s+e)});this.css("zIndex",s+r.length)}});t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var s=t(n.helper),o=i.options;s.css("zIndex")&&(o._zIndex=s.css("zIndex"));s.css("zIndex",o.zIndex)},stop:function(e,n,i){var s=i.options;s._zIndex&&t(n.helper).css("zIndex",s._zIndex)}});var st=t.ui.draggable;t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return false;var i=n&&"left"===n?"scrollLeft":"scrollTop",s=false;if(e[i]>0)return true;e[i]=1;s=e[i]>0;e[i]=0;return s},_create:function(){var e,n=this.options,i=this;this._addClass("ui-resizable");t.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(e);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(e);this._proportionallyResize()}this._setupHandles();n.autoHide&&t(this.element).on("mouseenter",function(){if(n.disabled)return;i._removeClass("ui-resizable-autohide");i._handles.show()}).on("mouseleave",function(){if(n.disabled)return;if(!i.resizing){i._addClass("ui-resizable-autohide");i._handles.hide()}});this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){n(this.element);e=this.element;this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e);e.remove()}this.originalElement.css("resize",this.originalResizeStyle);n(this.originalElement);return this},_setOption:function(t,e){this._super(t,e);switch(t){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function(){var e=this.options,n,i,s,o,r,a=this;this.handles=e.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");this._handles=t();if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");s=this.handles.split(",");this.handles={};for(i=0;i<s.length;i++){n=t.trim(s[i]);o="ui-resizable-"+n;r=t("<div>");this._addClass(r,"ui-resizable-handle "+o);r.css({zIndex:e.zIndex});this.handles[n]=".ui-resizable-"+n;this.element.append(r)}}this._renderAxis=function(e){var n,i,s,o;e=e||this.element;for(n in this.handles){if(this.handles[n].constructor===String)this.handles[n]=this.element.children(this.handles[n]).first().show();else if(this.handles[n].jquery||this.handles[n].nodeType){this.handles[n]=t(this.handles[n]);this._on(this.handles[n],{mousedown:a._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){i=t(this.handles[n],this.element);o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth();s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");e.css(s,o);this._proportionallyResize()}this._handles=this._handles.add(this.handles[n])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!a.resizing){this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i));a.axis=r&&r[1]?r[1]:"se"}});if(e.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var n,i,s=false;for(n in this.handles){i=t(this.handles[n])[0];(i===e.target||t.contains(i,e.target))&&(s=true)}return!this.options.disabled&&s},_mouseStart:function(e){var n,i,s,o=this.options,r=this.element;this.resizing=true;this._renderProxy();n=this._num(this.helper.css("left"));i=this._num(this.helper.css("top"));if(o.containment){n+=t(o.containment).scrollLeft()||0;i+=t(o.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:n,top:i};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()};this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()};this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()};this.originalPosition={left:n,top:i};this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio="number"===typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;s=t(".ui-resizable-"+this.axis).css("cursor");t("body").css("cursor","auto"===s?this.axis+"-resize":s);this._addClass("ui-resizable-resizing");this._propagate("start",e);return true},_mouseDrag:function(e){var n,i,s=this.originalMousePosition,o=this.axis,r=e.pageX-s.left||0,a=e.pageY-s.top||0,l=this._change[o];this._updatePrevProperties();if(!l)return false;n=l.apply(this,[e,r,a]);this._updateVirtualBoundaries(e.shiftKey);(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e));n=this._respectSize(n,e);this._updateCache(n);this._propagate("resize",e);i=this._applyChanges();!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();if(!t.isEmptyObject(i)){this._updatePrevProperties();this._trigger("resize",e,this.ui());this._applyChanges()}return false},_mouseStop:function(e){this.resizing=false;var n,i,s,o,r,a,l,c=this.options,u=this;if(this._helper){n=this._proportionallyResizeElements;i=n.length&&/textarea/i.test(n[0].nodeName);s=i&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height;o=i?0:u.sizeDiff.width;r={width:u.helper.width()-o,height:u.helper.height()-s};a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null;l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null;c.animate||this.element.css(t.extend(r,{top:l,left:a}));u.helper.height(u.size.height);u.helper.width(u.size.width);this._helper&&!c.animate&&this._proportionallyResize()}t("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",e);this._helper&&this.helper.remove();return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px");this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px");this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px");this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px");this.helper.css(t);return t},_updateVirtualBoundaries:function(t){var e,n,i,s,o,r=this.options;o={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:Infinity,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:Infinity};if(this._aspectRatio||t){e=o.minHeight*this.aspectRatio;i=o.minWidth/this.aspectRatio;n=o.maxHeight*this.aspectRatio;s=o.maxWidth/this.aspectRatio;e>o.minWidth&&(o.minWidth=e);i>o.minHeight&&(o.minHeight=i);n<o.maxWidth&&(o.maxWidth=n);s<o.maxHeight&&(o.maxHeight=s)}this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset();this._isNumber(t.left)&&(this.position.left=t.left);this._isNumber(t.top)&&(this.position.top=t.top);this._isNumber(t.height)&&(this.size.height=t.height);this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio);if("sw"===i){t.left=e.left+(n.width-t.width);t.top=null}if("nw"===i){t.top=e.top+(n.height-t.height);t.left=e.left+(n.width-t.width)}return t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);o&&(t.width=e.minWidth);r&&(t.height=e.minHeight);i&&(t.width=e.maxWidth);s&&(t.height=e.maxHeight);o&&c&&(t.left=a-e.minWidth);i&&c&&(t.left=a-e.maxWidth);r&&u&&(t.top=l-e.minHeight);s&&u&&(t.top=l-e.maxHeight);t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null;return t},_getPaddingPlusBorderDimensions:function(t){var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];for(;e<4;e++){n[e]=parseFloat(i[e])||0;n[e]+=parseFloat(s[e])||0}return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var t,e=0,n=this.helper||this.element;for(;e<this._proportionallyResizeElements.length;e++){t=this._proportionallyResizeElements[e];this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t));t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||t("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]);"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).resizable("instance"),i=n.options,s=n._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&n._hasScroll(s[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-r},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};s&&s.length&&t(s[0]).css({width:i.width,height:i.height});n._updateCache(i);n._propagate("resize",e)}})}});t.ui.plugin.add("resizable","containment",{start:function(){var e,n,i,s,o,r,a,l=t(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;if(!p)return;l.containerElement=t(p);if(/document/.test(d)||d===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}}else{e=t(p);n=[];t(["Top","Right","Left","Bottom"]).each(function(t,i){n[t]=l._num(e.css("padding"+i))});l.containerOffset=e.offset();l.containerPosition=e.position();l.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]};i=l.containerOffset;s=l.containerSize.height;o=l.containerSize.width;r=l._hasScroll(p,"left")?p.scrollWidth:o;a=l._hasScroll(p)?p.scrollHeight:s;l.parentData={element:p,left:i.left,top:i.top,width:r,height:a}}},resize:function(e){var n,i,s,o,r=t(this).resizable("instance"),a=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||e.shiftKey,d={top:0,left:0},p=r.containerElement,h=true;p[0]!==document&&/static/.test(p.css("position"))&&(d=l);if(c.left<(r._helper?l.left:0)){r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left);if(u){r.size.height=r.size.width/r.aspectRatio;h=false}r.position.left=a.helper?l.left:0}if(c.top<(r._helper?l.top:0)){r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top);if(u){r.size.width=r.size.height*r.aspectRatio;h=false}r.position.top=r._helper?l.top:0}s=r.containerElement.get(0)===r.element.parent().get(0);o=/relative|absolute/.test(r.containerElement.css("position"));if(s&&o){r.offset.left=r.parentData.left+r.position.left;r.offset.top=r.parentData.top+r.position.top}else{r.offset.left=r.element.offset().left;r.offset.top=r.element.offset().top}n=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-d.left:r.offset.left-l.left));i=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-d.top:r.offset.top-l.top));if(n+r.size.width>=r.parentData.width){r.size.width=r.parentData.width-n;if(u){r.size.height=r.size.width/r.aspectRatio;h=false}}if(i+r.size.height>=r.parentData.height){r.size.height=r.parentData.height-i;if(u){r.size.width=r.size.height*r.aspectRatio;h=false}}if(!h){r.position.left=r.prevPosition.left;r.position.top=r.prevPosition.top;r.size.width=r.prevSize.width;r.size.height=r.prevSize.height}},stop:function(){var e=t(this).resizable("instance"),n=e.options,i=e.containerOffset,s=e.containerPosition,o=e.containerElement,r=t(e.helper),a=r.offset(),l=r.outerWidth()-e.sizeDiff.width,c=r.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-s.left-i.left,width:l,height:c});e._helper&&!n.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-s.left-i.left,width:l,height:c})}});t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),n=e.options;t(n.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,n){var i=t(this).resizable("instance"),s=i.options,o=i.originalSize,r=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-r.top||0,left:i.position.left-r.left||0};t(s.alsoResize).each(function(){var e=t(this),i=t(this).data("ui-resizable-alsoresize"),s={},o=e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var n=(i[e]||0)+(a[e]||0);n&&n>=0&&(s[e]=n||null)});e.css(s)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}});t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),n=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0});e._addClass(e.ghost,"ui-resizable-ghost");false!==t.uiBackCompat&&"string"===typeof e.options.ghost&&e.ghost.addClass(this.options.ghost);e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}});t.ui.plugin.add("resizable","grid",{resize:function(){var e,n=t(this).resizable("instance"),i=n.options,s=n.size,o=n.originalSize,r=n.originalPosition,a=n.axis,l="number"===typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,d=Math.round((s.width-o.width)/c)*c,p=Math.round((s.height-o.height)/u)*u,h=o.width+d,f=o.height+p,g=i.maxWidth&&i.maxWidth<h,v=i.maxHeight&&i.maxHeight<f,m=i.minWidth&&i.minWidth>h,b=i.minHeight&&i.minHeight>f;i.grid=l;m&&(h+=c);b&&(f+=u);g&&(h-=c);v&&(f-=u);if(/^(se|s|e)$/.test(a)){n.size.width=h;n.size.height=f}else if(/^(ne)$/.test(a)){n.size.width=h;n.size.height=f;n.position.top=r.top-p}else if(/^(sw)$/.test(a)){n.size.width=h;n.size.height=f;n.position.left=r.left-d}else{(f-u<=0||h-c<=0)&&(e=n._getPaddingPlusBorderDimensions(this));if(f-u>0){n.size.height=f;n.position.top=r.top-p}else{f=u-e.height;n.size.height=f;n.position.top=r.top+o.height-f}if(h-c>0){n.size.width=h;n.position.left=r.left-d}else{h=c-e.width;n.size.width=h;n.position.left=r.left+o.width-h}}}});var ot=t.ui.resizable;t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,closeText:"Close",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;n<0&&t(this).css("top",e.top-n)}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle);this.options.disabled&&(this.options.disabled=false);this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();this.options.draggable&&t.fn.draggable&&this._makeDraggable();this.options.resizable&&t.fn.resizable&&this._makeResizable();this._isOpen=false;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;if(e&&(e.jquery||e.nodeType))return t(e);return this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);t=e.parent.children().eq(e.index);t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;if(!this._isOpen||false===this._trigger("beforeClose",e))return;this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0]));this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,n){var i=false,s=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),o=Math.max.apply(null,s);if(o>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",o+1);i=true}i&&!n&&this._trigger("focus",e);return i},open:function(){var e=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=true;this.opener=t(t.ui.safeActiveElement(this.document[0]));this._size();this._position();this._createOverlay();this._moveToTop(null,true);this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1);this._show(this.uiDialog,this.options.show,function(){e._focusTabbable();e._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]"));t.length||(t=this.element.find(":tabbable"));t.length||(t=this.uiDialogButtonPane.find(":tabbable"));t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable"));t.length||(t=this.uiDialog);t.eq(0).trigger("focus")},_keepFocus:function(e){function n(){var e=t.ui.safeActiveElement(this.document[0]),n=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);n||this._focusTabbable()}e.preventDefault();n.call(this);this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE){e.preventDefault();this.close(e);return}if(e.keyCode!==t.ui.keyCode.TAB||e.isDefaultPrevented())return;var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),s=n.filter(":last");if(e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey){if((e.target===i[0]||e.target===this.uiDialog[0])&&e.shiftKey){this._delay(function(){s.trigger("focus")});e.preventDefault()}}else{this._delay(function(){i.trigger("focus")});e.preventDefault()}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}});this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault();this.close(t)}});e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(e,"ui-dialog-title");this._title(e);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(t.isEmptyObject(n)||t.isArray(n)&&!n.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}t.each(n,function(n,i){var s,o;i=t.isFunction(i)?{click:i,text:n}:i;i=t.extend({type:"button"},i);s=i.click;o={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text};delete i.click;delete i.icon;delete i.iconPosition;delete i.showLabel;delete i.icons;"boolean"===typeof i.text&&delete i.text;t("<button></button>",i).button(o).appendTo(e.uiButtonSet).on("click",function(){s.apply(e.element[0],arguments)})});this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var e=this,n=this.options;function i(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e._addClass(t(this),"ui-dialog-dragging");e._blockFrames();e._trigger("dragStart",n,i(s))},drag:function(t,n){e._trigger("drag",t,i(n))},stop:function(s,o){var r=o.offset.left-e.document.scrollLeft(),a=o.offset.top-e.document.scrollTop();n.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(a>=0?"+":"")+a,of:e.window};e._removeClass(t(this),"ui-dialog-dragging");e._unblockFrames();e._trigger("dragStop",s,i(o))}})},_makeResizable:function(){var e=this,n=this.options,i=n.resizable,s=this.uiDialog.css("position"),o="string"===typeof i?i:"n,e,s,w,se,sw,ne,nw";function r(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,i){e._addClass(t(this),"ui-dialog-resizing");e._blockFrames();e._trigger("resizeStart",n,r(i))},resize:function(t,n){e._trigger("resize",t,r(n))},stop:function(i,s){var o=e.uiDialog.offset(),a=o.left-e.document.scrollLeft(),l=o.top-e.document.scrollTop();n.height=e.uiDialog.height();n.width=e.uiDialog.width();n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:e.window};e._removeClass(t(this),"ui-dialog-resizing");e._unblockFrames();e._trigger("resizeStop",i,r(s))}}).css("position",s)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget();this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),n=t.inArray(this,e);-1!==n&&e.splice(n,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");if(!t){t=[];this.document.data("ui-dialog-instances",t)}return t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show();this.uiDialog.position(this.options.position);t||this.uiDialog.hide()},_setOptions:function(e){var n=this,i=false,s={};t.each(e,function(t,e){n._setOption(t,e);t in n.sizeRelatedOptions&&(i=true);t in n.resizableRelatedOptions&&(s[t]=e)});if(i){this._size();this._position()}this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(e,n){var i,s,o=this.uiDialog;if("disabled"===e)return;this._super(e,n);"appendTo"===e&&this.uiDialog.appendTo(this._appendTo());"buttons"===e&&this._createButtons();"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()});if("draggable"===e){i=o.is(":data(ui-draggable)");i&&!n&&o.draggable("destroy");!i&&n&&this._makeDraggable()}"position"===e&&this._position();if("resizable"===e){s=o.is(":data(ui-resizable)");s&&!n&&o.resizable("destroy");s&&"string"===typeof n&&o.resizable("option","handles",n);s||false===n||this._makeResizable()}"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});i.minWidth>i.width&&(i.width=i.minWidth);t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight();e=Math.max(0,i.minHeight-t);n="number"===typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none";"auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(e){if(t(e.target).closest(".ui-dialog").length)return true;return!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal)return;var e=true;this._delay(function(){e=false});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){if(e)return;if(!this._allowInteraction(t)){t.preventDefault();this._trackingInstances()[0]._focusTabbable()}}});this.overlay=t("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal)return;if(this.overlay){var t=this.document.data("ui-dialog-overlays")-1;if(t)this.document.data("ui-dialog-overlays",t);else{this._off(this.document,"focusin");this.document.removeData("ui-dialog-overlays")}this.overlay.remove();this.overlay=null}}});false!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e);this._superApply(arguments)}});var rt=t.ui.dialog;t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,n=this.options,i=n.accept;this.isover=false;this.isout=true;this.accept=t.isFunction(i)?i:function(t){return t.is(i)};this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]};this._addToManager(n.scope);n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[];t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){var e=0;for(;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,n){if("accept"===e)this.accept=t.isFunction(n)?n:function(t){return t.is(n)};else if("scope"===e){var i=t.ui.ddmanager.droppables[this.options.scope];this._splice(i);this._addToManager(n)}this._super(e,n)},_activate:function(e){var n=t.ui.ddmanager.current;this._addActiveClass();n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this._removeActiveClass();n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;if(this.accept.call(this.element[0],n.currentItem||n.element)){this._addHoverClass();this._trigger("over",e,this.ui(n))}},_out:function(e){var n=t.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;if(this.accept.call(this.element[0],n.currentItem||n.element)){this._removeHoverClass();this._trigger("out",e,this.ui(n))}},_drop:function(e,n){var i=n||t.ui.ddmanager.current,s=false;if(!i||(i.currentItem||i.element)[0]===this.element[0])return false;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=t(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&at(i,t.extend(n,{offset:n.element.offset()}),n.options.tolerance,e)){s=true;return false}});if(s)return false;if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",e,this.ui(i));return this.element}return false},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var at=t.ui.intersect=function(){function t(t,e,n){return t>=e&&t<e+n}return function(e,n,i,s){if(!n.offset)return false;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,r=(e.positionAbs||e.position.absolute).top+e.margins.top,a=o+e.helperProportions.width,l=r+e.helperProportions.height,c=n.offset.left,u=n.offset.top,d=c+n.proportions().width,p=u+n.proportions().height;switch(i){case"fit":return c<=o&&a<=d&&u<=r&&l<=p;case"intersect":return c<o+e.helperProportions.width/2&&a-e.helperProportions.width/2<d&&u<r+e.helperProportions.height/2&&l-e.helperProportions.height/2<p;case"pointer":return t(s.pageY,u,n.proportions().height)&&t(s.pageX,c,n.proportions().width);case"touch":return(r>=u&&r<=p||l>=u&&l<=p||r<u&&l>p)&&(o>=c&&o<=d||a>=c&&a<=d||o<c&&a>d);default:return false}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,n){var i,s,o=t.ui.ddmanager.droppables[e.options.scope]||[],r=n?n.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<o.length;i++){if(o[i].options.disabled||e&&!o[i].accept.call(o[i].element[0],e.currentItem||e.element))continue;for(s=0;s<a.length;s++)if(a[s]===o[i].element[0]){o[i].proportions().height=0;continue t}o[i].visible="none"!==o[i].element.css("display");if(!o[i].visible)continue;"mousedown"===r&&o[i]._activate.call(o[i],n);o[i].offset=o[i].element.offset();o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight})}},drop:function(e,n){var i=false;t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&at(e,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)){this.isout=true;this.isover=false;this._deactivate.call(this,n)}});return i},dragStart:function(e,n){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n);t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var i,s,o,r=at(e,this,this.options.tolerance,n),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;if(!a)return;if(this.options.greedy){s=this.options.scope;o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===s});if(o.length){i=t(o[0]).droppable("instance");i.greedyChild="isover"===a}}if(i&&"isover"===a){i.isover=false;i.isout=true;i._out.call(i,n)}this[a]=true;this["isout"===a?"isover":"isout"]=false;this["isover"===a?"_over":"_out"].call(this,n);if(i&&"isout"===a){i.isout=false;i.isover=true;i._over.call(i,n)}})},dragStop:function(e,n){e.element.parentsUntil("body").off("scroll.droppable");e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}};false!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super();this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super();this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super();this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});var lt=t.ui.droppable;var ct=t.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=t("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t);this._refreshValue()},_constrainedValue:function(t){void 0===t&&(t=this.options.value);this.indeterminate=false===t;"number"!==typeof t&&(t=0);return!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value;this._super(t);this.options.value=this._constrainedValue(e);this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e));this._super(t,e)},_setOptionDisabled:function(t){this._super(t);this.element.attr("aria-disabled",t);this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(n.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=t("<div>").appendTo(this.valueDiv);this._addClass(this.overlayDiv,"ui-progressbar-overlay")}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==e){this.oldValue=e;this._trigger("change")}e===this.options.max&&this._trigger("complete")}});var ut=t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){e.elementPos=t(e.element[0]).offset();e.selectees=t(e.options.filter,e.element[0]);e._addClass(e.selectees,"ui-selectee");e.selectees.each(function(){var n=t(this),i=n.offset(),s={left:i.left-e.elementPos.left,top:i.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:n,left:s.left,top:s.top,right:s.left+n.outerWidth(),bottom:s.top+n.outerHeight(),startselected:false,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=t("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(e){var n=this,i=this.options;this.opos=[e.pageX,e.pageY];this.elementPos=t(this.element[0]).offset();if(this.options.disabled)return;this.selectees=t(i.filter,this.element[0]);this._trigger("start",e);t(i.appendTo).append(this.helper);this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0});i.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var i=t.data(this,"selectable-item");i.startselected=true;if(!e.metaKey&&!e.ctrlKey){n._removeClass(i.$element,"ui-selected");i.selected=false;n._addClass(i.$element,"ui-unselecting");i.unselecting=true;n._trigger("unselecting",e,{unselecting:i.element})}});t(e.target).parents().addBack().each(function(){var i,s=t.data(this,"selectable-item");if(s){i=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected");n._removeClass(s.$element,i?"ui-unselecting":"ui-selected")._addClass(s.$element,i?"ui-selecting":"ui-unselecting");s.unselecting=!i;s.selecting=i;s.selected=i;i?n._trigger("selecting",e,{selecting:s.element}):n._trigger("unselecting",e,{unselecting:s.element});return false}})},_mouseDrag:function(e){this.dragged=true;if(this.options.disabled)return;var n,i=this,s=this.options,o=this.opos[0],r=this.opos[1],a=e.pageX,l=e.pageY;if(o>a){n=a;a=o;o=n}if(r>l){n=l;l=r;r=n}this.helper.css({left:o,top:r,width:a-o,height:l-r});this.selectees.each(function(){var n=t.data(this,"selectable-item"),c=false,u={};if(!n||n.element===i.element[0])return;u.left=n.left+i.elementPos.left;u.right=n.right+i.elementPos.left;u.top=n.top+i.elementPos.top;u.bottom=n.bottom+i.elementPos.top;"touch"===s.tolerance?c=!(u.left>a||u.right<o||u.top>l||u.bottom<r):"fit"===s.tolerance&&(c=u.left>o&&u.right<a&&u.top>r&&u.bottom<l);if(c){if(n.selected){i._removeClass(n.$element,"ui-selected");n.selected=false}if(n.unselecting){i._removeClass(n.$element,"ui-unselecting");n.unselecting=false}if(!n.selecting){i._addClass(n.$element,"ui-selecting");n.selecting=true;i._trigger("selecting",e,{selecting:n.element})}}else{if(n.selecting)if((e.metaKey||e.ctrlKey)&&n.startselected){i._removeClass(n.$element,"ui-selecting");n.selecting=false;i._addClass(n.$element,"ui-selected");n.selected=true}else{i._removeClass(n.$element,"ui-selecting");n.selecting=false;if(n.startselected){i._addClass(n.$element,"ui-unselecting");n.unselecting=true}i._trigger("unselecting",e,{unselecting:n.element})}if(n.selected&&!e.metaKey&&!e.ctrlKey&&!n.startselected){i._removeClass(n.$element,"ui-selected");n.selected=false;i._addClass(n.$element,"ui-unselecting");n.unselecting=true;i._trigger("unselecting",e,{unselecting:n.element})}}});return false},_mouseStop:function(e){var n=this;this.dragged=false;t(".ui-unselecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");n._removeClass(i.$element,"ui-unselecting");i.unselecting=false;i.startselected=false;n._trigger("unselected",e,{unselected:i.element})});t(".ui-selecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");n._removeClass(i.$element,"ui-selecting")._addClass(i.$element,"ui-selected");i.selecting=false;i.selected=true;i.startselected=true;n._trigger("selected",e,{selected:i.element})});this._trigger("stop",e);this.helper.remove();return false}});var dt=t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:false,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=false;this.menuItems=t()},_drawButton:function(){var e,n=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(t){this.button.focus();t.preventDefault()}});this.element.hide();this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");e=t("<span>").appendTo(this.button);this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(i).appendTo(this.button);false!==this.options.width&&this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){n._rendered||n._refreshMenu()})},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=t("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,n){t.preventDefault();e._setSelection();e._select(n.item.data("ui-selectmenu-item"),t)},focus:function(t,n){var i=n.item.data("ui-selectmenu-item");if(null!=e.focusIndex&&i.index!==e.focusIndex){e._trigger("focus",t,{item:i});e.isOpen||e._select(i,t)}e.focusIndex=i.index;e.button.attr("aria-activedescendant",e.menuItems.eq(i.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty();this._parseOptions(e);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=true;if(!e.length)return;t=this._getSelectedItem();this.menuInstance.focus(null,t);this._setAria(t.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(t){if(this.options.disabled)return;if(this._rendered){this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active");this.menuInstance.focus(null,this._getSelectedItem())}else this._refreshMenu();if(!this.menuItems.length)return;this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",t)},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){if(!this.isOpen)return;this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",t)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var n=t("<span>");this._setText(n,e.label);this._addClass(n,"ui-selectmenu-text");return n},_renderMenu:function(e,n){var i=this,s="";t.each(n,function(n,o){var r;if(o.optgroup!==s){r=t("<li>",{text:o.optgroup});i._addClass(r,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""));r.appendTo(e);s=o.optgroup}i._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,n){var i=t("<li>"),s=t("<div>",{title:n.element.attr("title")});n.disabled&&this._addClass(i,null,"ui-state-disabled");this._setText(s,n.label);return i.append(s).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var n,i,s=".ui-menu-item";if(this.isOpen)n=this.menuItems.eq(this.focusIndex).parent("li");else{n=this.menuItems.eq(this.element[0].selectedIndex).parent("li");s+=":not(.ui-state-disabled)"}i="first"===t||"last"===t?n["first"===t?"prevAll":"nextAll"](s).eq(-1):n[t+"All"](s).eq(0);i.length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;if(!this.range)return;if(window.getSelection){t=window.getSelection();t.removeAllRanges();t.addRange(this.range)}else this.range.select();this.button.focus()},_documentClick:{mousedown:function(e){if(!this.isOpen)return;t(e.target).closest(".ui-selectmenu-menu, #"+t.ui.escapeSelector(this.ids.button)).length||this.close(e)}},_buttonEvents:{mousedown:function(){var t;if(window.getSelection){t=window.getSelection();t.rangeCount&&(this.range=t.getRangeAt(0))}else this.range=document.selection.createRange()},click:function(t){this._setSelection();this._toggle(t)},keydown:function(e){var n=true;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e);n=false;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e);n=false}n&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t));this._setAria(t);this._trigger("select",e,{item:t});t.index!==n&&this._trigger("change",e,{item:t});this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e});this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,e.button)}this._super(t,e);"appendTo"===t&&this.menuWrap.appendTo(this._appendTo());"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t);this.menuInstance.option("disabled",t);this.button.attr("aria-disabled",t);this._toggleClass(this.button,null,"ui-state-disabled",t);this.element.prop("disabled",t);if(t){this.button.attr("tabindex",-1);this.close()}else this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0));e&&e[0]||(e=this.element.closest(".ui-front, dialog"));e.length||(e=this.document[0].body);return e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;if(false===t){this.button.css("width","");return}if(null===t){t=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(t)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();t.disabled=this.element.prop("disabled");return t},_parseOptions:function(e){var n=this,i=[];e.each(function(e,s){i.push(n._parseOption(t(s),e))});this.items=i},_parseOption:function(t,e){var n=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}]);var pt=t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var e,n,i=this.options,s=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",r=[];n=i.values&&i.values.length||1;if(s.length>n){s.slice(n).remove();s=s.slice(0,n)}for(e=s.length;e<n;e++)r.push(o);this.handles=s.add(t(r.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;if(e.range){true===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]);if(this.range&&this.range.length){this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}else{this.range=t("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)}else{this.range&&this.range.remove();this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this._mouseDestroy()},_mouseCapture:function(e){var n,i,s,o,r,a,l,c,u=this,d=this.options;if(d.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();n={x:e.pageX,y:e.pageY};i=this._normValueFromMouse(n);s=this._valueMax()-this._valueMin()+1;this.handles.each(function(e){var n=Math.abs(i-u.values(e));if(s>n||s===n&&(e===u._lastChangedValue||u.values(e)===d.min)){s=n;o=t(this);r=e}});a=this._start(e,r);if(false===a)return false;this._mouseSliding=true;this._handleIndex=r;this._addClass(o,null,"ui-state-active");o.trigger("focus");l=o.offset();c=!t(e.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=c?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(e,r,i);this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);this._slide(t,this._handleIndex,n);return false},_mouseStop:function(t){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(t,this._handleIndex);this._change(t,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,s,o;if("horizontal"===this.orientation){e=this.elementSize.width;n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{e=this.elementSize.height;n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}i=n/e;i>1&&(i=1);i<0&&(i=0);"vertical"===this.orientation&&(i=1-i);s=this._valueMax()-this._valueMin();o=this._valueMin()+i*s;return this._trimAlignValue(o)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};if(this._hasMultipleValues()){i.value=void 0!==e?e:this.values(t);i.values=n||this.values()}return i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,s,o=this.value(),r=this.values();if(this._hasMultipleValues()){s=this.values(e?0:1);o=this.values(e);2===this.options.values.length&&true===this.options.range&&(n=0===e?Math.min(s,n):Math.max(s,n));r[e]=n}if(n===o)return;i=this._trigger("slide",t,this._uiHash(e,n,r));if(false===i)return;this._hasMultipleValues()?this.values(e,n):this.value(n)},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=e;this._trigger("change",t,this._uiHash(e))}},value:function(t){if(arguments.length){this.options.value=this._trimAlignValue(t);this._refreshValue();this._change(null,0);return}return this._value()},values:function(e,n){var i,s,o;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(n);this._refreshValue();this._change(null,e);return}if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();i=this.options.values;s=arguments[0];for(o=0;o<i.length;o+=1){i[o]=this._trimAlignValue(s[o]);this._change(null,o)}this._refreshValue()},_setOption:function(e,n){var i,s=0;if("range"===e&&true===this.options.range)if("min"===n){this.options.value=this._values(0);this.options.values=null}else if("max"===n){this.options.value=this._values(this.options.values.length-1);this.options.values=null}t.isArray(this.options.values)&&(s=this.options.values.length);this._super(e,n);switch(e){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();this.options.range&&this._refreshRange(n);this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=s-1;i>=0;i--)this._change(null,i);this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function(t){this._super(t);this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;t=this._trimAlignValue(t);return t},_values:function(t){var e,n,i;if(arguments.length){e=this.options.values[t];e=this._trimAlignValue(e);return e}if(this._hasMultipleValues()){n=this.options.values.slice();for(i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;2*Math.abs(n)>=e&&(i+=n>0?e:-e);return parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step,i=Math.round((t-e)/n)*n;t=i+e;t>this.options.max&&(t-=n);this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min)));return t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""});"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,i,s,o,r=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,u={};if(this._hasMultipleValues())this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100;u["horizontal"===l.orientation?"left":"bottom"]=n+"%";t(this).stop(1,1)[c?"animate":"css"](u,a.animate);if(true===l.options.range)if("horizontal"===l.orientation){0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},a.animate);1===i&&l.range[c?"animate":"css"]({width:n-e+"%"},{queue:false,duration:a.animate})}else{0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},a.animate);1===i&&l.range[c?"animate":"css"]({height:n-e+"%"},{queue:false,duration:a.animate})}e=n});else{i=this.value();s=this._valueMin();o=this._valueMax();n=o!==s?(i-s)/(o-s)*100:0;u["horizontal"===this.orientation?"left":"bottom"]=n+"%";this.handle.stop(1,1)[c?"animate":"css"](u,a.animate);"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},a.animate);"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},a.animate);"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},a.animate);"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},a.animate)}},_handleEvents:{keydown:function(e){var n,i,s,o,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:e.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(t(e.target),null,"ui-state-active");n=this._start(e,r);if(false===n)return}break}o=this.options.step;i=s=this._hasMultipleValues()?this.values(r):this.value();switch(e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o);break}this._slide(e,r,s)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(e,n);this._change(e,n);this._removeClass(t(e.target),null,"ui-state-active")}}}});var ht=t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(t,e){this._super(t,e);"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var i=null,s=false,o=this;if(this.reverting)return false;if(this.options.disabled||"static"===this.options.type)return false;this._refreshItems(e);t(e.target).parents().each(function(){if(t.data(this,o.widgetName+"-item")===o){i=t(this);return false}});t.data(e.target,o.widgetName+"-item")===o&&(i=t(e.target));if(!i)return false;if(this.options.handle&&!n){t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(s=true)});if(!s)return false}this.currentItem=i;this._removeCurrentsFromItems();return true},_mouseStart:function(e,n,i){var s,o,r=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();r.containment&&this._setContainment();if(r.cursor&&"auto"!==r.cursor){o=this.document.find("body");this.storedCursor=o.css("cursor");o.css("cursor",r.cursor);this.storedStylesheet=t("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)}if(r.opacity){this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity"));this.helper.css("opacity",r.opacity)}if(r.zIndex){this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex"));this.helper.css("zIndex",r.zIndex)}this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",e,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!i)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));t.ui.ddmanager&&(t.ui.ddmanager.current=this);t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e);this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(e);return true},_mouseDrag:function(e){var n,i,s,o,r=this.options,a=false;this.position=this._generatePosition(e);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName){this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed);this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)}else{e.pageY-this.document.scrollTop()<r.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<r.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed));e.pageX-this.document.scrollLeft()<r.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))}false!==a&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(n=this.items.length-1;n>=0;n--){i=this.items[n];s=i.item[0];o=this._intersectsWithPointer(i);if(!o)continue;if(i.instance!==this.currentContainer)continue;if(s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!t.contains(this.placeholder[0],s)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],s))){this.direction=1===o?"down":"up";if("pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i);this._trigger("change",e,this._uiHash());break}}this._contactContainers(e);t.ui.ddmanager&&t.ui.ddmanager.drag(this,e);this._trigger("sort",e,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,n){if(!e)return;t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e);if(this.options.revert){var i=this,s=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));o&&"y"!==o||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=true;t(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return false},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null}));if("original"===this.options.helper){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove();t.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];e=e||{};t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))});!i.length&&e.key&&i.push(e.key+"=");return i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];e=e||{};n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")});return i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,s=i+this.helperProportions.height,o=t.left,r=o+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||i+c>a&&i+c<l,p="y"===this.options.axis||e+u>o&&e+u<r,h=d&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?h:o<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<r&&a<i+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=i&&s;if(!o)return false;e=this._getDragVerticalDirection();n=this._getDragHorizontalDirection();return this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1)},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&n||"left"===s&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){this._refreshItems(t);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n,i,s,o,r=[],a=[],l=this._connectWith();if(l&&e)for(n=l.length-1;n>=0;n--){s=t(l[n],this.document[0]);for(i=s.length-1;i>=0;i--){o=t.data(s[i],this.widgetFullName);o&&o!==this&&!o.options.disabled&&a.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o])}}a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function c(){r.push(this)}for(n=a.length-1;n>=0;n--)a[n][0].each(c);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return false;return true})},_refreshItems:function(e){this.items=[];this.containers=[this];var n,i,s,o,r,a,l,c,u=this.items,d=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(n=p.length-1;n>=0;n--){s=t(p[n],this.document[0]);for(i=s.length-1;i>=0;i--){o=t.data(s[i],this.widgetFullName);if(o&&o!==this&&!o.options.disabled){d.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]);this.containers.push(o)}}}for(n=d.length-1;n>=0;n--){r=d[n][1];a=d[n][0];for(i=0,c=a.length;i<c;i++){l=t(a[i]);l.data(this.widgetName+"-item",r);u.push({item:l,instance:r,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item));this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,s,o;for(n=this.items.length-1;n>=0;n--){i=this.items[n];if(i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0])continue;s=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item;if(!e){i.width=s.outerWidth();i.height=s.outerHeight()}o=s.offset();i.left=o.left;i.top=o.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--){o=this.containers[n].element.offset();this.containers[n].containerCache.left=o.left;this.containers[n].containerCache.top=o.top;this.containers[n].containerCache.width=this.containers[n].element.outerWidth();this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;if(!i.placeholder||i.placeholder.constructor===String){n=i.placeholder;i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+i+">",e.document[0]);e._addClass(s,"ui-sortable-placeholder",n||e.currentItem[0].className)._removeClass(s,"ui-sortable-helper");"tbody"===i?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(s)):"tr"===i?e._createTrPlaceholder(e.currentItem,s):"img"===i&&s.attr("src",e.currentItem.attr("src"));n||s.css("visibility","hidden");return s},update:function(t,s){if(n&&!i.forcePlaceholderSize)return;s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10));s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each(function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(e){var n,i,s,o,r,a,l,c,u,d,p=null,h=null;for(n=this.containers.length-1;n>=0;n--){if(t.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(p&&t.contains(this.containers[n].element[0],p.element[0]))continue;p=this.containers[n];h=n}else if(this.containers[n].containerCache.over){this.containers[n]._trigger("out",e,this._uiHash(this));this.containers[n].containerCache.over=0}}if(!p)return;if(1===this.containers.length){if(!this.containers[h].containerCache.over){this.containers[h]._trigger("over",e,this._uiHash(this));this.containers[h].containerCache.over=1}}else{s=1e4;o=null;u=p.floating||this._isFloating(this.currentItem);r=u?"left":"top";a=u?"width":"height";d=u?"pageX":"pageY";for(i=this.items.length-1;i>=0;i--){if(!t.contains(this.containers[h].element[0],this.items[i].item[0]))continue;if(this.items[i].item[0]===this.currentItem[0])continue;l=this.items[i].item.offset()[r];c=false;e[d]-l>this.items[i][a]/2&&(c=true);if(Math.abs(e[d]-l)<s){s=Math.abs(e[d]-l);o=this.items[i];this.direction=c?"up":"down"}}if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h]){if(!this.currentContainer.containerCache.over){this.containers[h]._trigger("over",e,this._uiHash());this.currentContainer.containerCache.over=1}return}o?this._rearrange(e,o,null,true):this._rearrange(e,null,this.containers[h].element,true);this._trigger("change",e,this._uiHash());this.containers[h]._trigger("change",e,this._uiHash(this));this.currentContainer=this.containers[h];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[h]._trigger("over",e,this._uiHash(this));this.containers[h].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]);i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width());i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height());return i},_adjustOffsetFromHelper:function(e){"string"===typeof e&&(e=e.split(" "));t.isArray(e)&&(e={left:+e[0],top:+e[1]||0});"left"in e&&(this.offset.click.left=e.left+this.margins.left);"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left);"top"in e&&(this.offset.click.top=e.top+this.margins.top);"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if("absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0});return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode);"document"!==s.containment&&"window"!==s.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);if(!/^(document|window|parent)$/.test(s.containment)){e=t(s.containment)[0];n=t(s.containment).offset();i="hidden"!==t(e).css("overflow");this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*i}},_generatePosition:function(e){var n,i,s=this.options,o=e.pageX,r=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());if(this.originalPosition){if(this.containment){e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left);e.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top);e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left);e.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)}if(s.grid){n=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1];r=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-s.grid[1]:n+s.grid[1]:n;i=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0];o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){this.reverting=false;var n,i=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())});if(this!==this.currentContainer&&!e){i.push(function(t){this._trigger("remove",t,this._uiHash())});i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer));i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))}function s(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}for(n=this.containers.length-1;n>=0;n--){e||i.push(s("deactivate",this,this.containers[n]));if(this.containers[n].containerCache.over){i.push(s("out",this,this.containers[n]));this.containers[n].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=false;e||this._trigger("beforeStop",t,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null}if(!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){false===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}});function ft(t){return function(){var e=this.element.val();t.apply(this,arguments);this._refresh();e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),true);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super();var n=this.element;t.each(["min","max","step"],function(t,i){var s=n.attr(i);null!=s&&s.length&&(e[i]=s)});return e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();this.previous!==this.element.val()&&this._trigger("change",t)},mousewheel:function(t,e){if(!e)return;if(!this.spinning&&!this._start(t))return false;this._spin((e>0?1:-1)*this.options.step,t);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100);t.preventDefault()},"mousedown .ui-spinner-button":function(e){var n;n=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function i(){var e=this.element[0]===t.ui.safeActiveElement(this.document[0]);if(!e){this.element.trigger("focus");this.previous=n;this._delay(function(){this.previous=n})}}e.preventDefault();i.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;i.call(this)});if(false===this._start(e))return;this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(!t(e.currentTarget).hasClass("ui-state-active"))return;if(false===this._start(e))return false;this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",true).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:false});this.buttons.last().button({icon:this.options.icons.down,showLabel:false});this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var n=this.options,i=t.ui.keyCode;switch(e.keyCode){case i.UP:this._repeat(null,1,e);return true;case i.DOWN:this._repeat(null,-1,e);return true;case i.PAGE_UP:this._repeat(null,n.page,e);return true;case i.PAGE_DOWN:this._repeat(null,-n.page,e);return true}return false},_start:function(t){if(!this.spinning&&false===this._trigger("start",t))return false;this.counter||(this.counter=1);this.spinning=true;return true},_repeat:function(t,e,n){t=t||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,e,n)},t);this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1);n=this._adjustValue(n+t*this._increment(this.counter));if(!this.spinning||false!==this._trigger("spin",e,{value:n})){this._value(n);this.counter++}},_increment:function(e){var n=this.options.incremental;if(n)return t.isFunction(n)?n(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1);return 1},_precision:function(){var t=this._precisionOf(this.options.step);null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min)));return t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;e=null!==i.min?i.min:0;n=t-e;n=Math.round(n/i.step)*i.step;t=e+n;t=parseFloat(t.toFixed(this._precision()));if(null!==i.max&&t>i.max)return i.max;if(null!==i.min&&t<i.min)return i.min;return t},_stop:function(t){if(!this.spinning)return;clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",t)},_setOption:function(t,e){var n,i,s;if("culture"===t||"numberFormat"===t){n=this._parse(this.element.val());this.options[t]=e;this.element.val(this._format(n));return}"max"!==t&&"min"!==t&&"step"!==t||"string"===typeof e&&(e=this._parse(e));if("icons"===t){i=this.buttons.first().find(".ui-icon");this._removeClass(i,null,this.options.icons.up);this._addClass(i,null,e.up);s=this.buttons.last().find(".ui-icon");this._removeClass(s,null,this.options.icons.down);this._addClass(s,null,e.down)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t);this.element.prop("disabled",!!t);this.buttons.button(t?"disable":"enable")},_setOptions:ft(function(t){this._super(t)}),_parse:function(t){"string"===typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t);return""===t||isNaN(t)?null:t},_format:function(t){if(""===t)return"";return window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();if(null===t)return false;return t===this._adjustValue(t)},_value:function(t,e){var n;if(""!==t){n=this._parse(t);if(null!==n){e||(n=this._adjustValue(n));t=this._format(n)}}this.element.val(t);this._refresh()},_destroy:function(){this.element.prop("disabled",false).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:ft(function(t){this._stepUp(t)}),_stepUp:function(t){if(this._start()){this._spin((t||1)*this.options.step);this._stop()}},stepDown:ft(function(t){this._stepDown(t)}),_stepDown:function(t){if(this._start()){this._spin((t||1)*-this.options.step);this._stop()}},pageUp:ft(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:ft(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());ft(this._value).call(this,t)},widget:function(){return this.uiSpinner}});false!==t.uiBackCompat&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var gt=t.ui.spinner;t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var n,i;n=e.href.replace(t,"");i=location.href.replace(t,"");try{n=decodeURIComponent(n)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return e.hash.length>1&&n===i}}(),_create:function(){var e=this,n=this.options;this.running=false;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,n.collapsible);this._processTabs();n.active=this._initialActive();t.isArray(n.disabled)&&(n.disabled=t.unique(n.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort());false!==this.options.active&&this.anchors.length?this.active=this._findActive(n.active):this.active=t();this._refresh();this.active.length&&this.load(n.active)},_initialActive:function(){var e=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);if(null===e){i&&this.tabs.each(function(n,s){if(t(s).attr("aria-controls")===i){e=n;return false}});null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active")));null!==e&&-1!==e||(e=!!this.tabs.length&&0)}if(false!==e){e=this.tabs.index(this.tabs.eq(e));-1===e&&(e=!n&&0)}!n&&false===e&&this.anchors.length&&(e=0);return e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var n=t(t.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(n),s=true;if(this._handlePageNav(e))return;switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:i++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:s=false;i--;break;case t.ui.keyCode.END:i=this.anchors.length-1;break;case t.ui.keyCode.HOME:i=0;break;case t.ui.keyCode.SPACE:e.preventDefault();clearTimeout(this.activating);this._activate(i);return;case t.ui.keyCode.ENTER:e.preventDefault();clearTimeout(this.activating);this._activate(i!==this.options.active&&i);return;default:return}e.preventDefault();clearTimeout(this.activating);i=this._focusNextTab(i,s);if(!e.ctrlKey&&!e.metaKey){n.attr("aria-selected","false");this.tabs.eq(i).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",i)},this.delay)}},_panelKeydown:function(e){if(this._handlePageNav(e))return;if(e.ctrlKey&&e.keyCode===t.ui.keyCode.UP){e.preventDefault();this.active.trigger("focus")}},_handlePageNav:function(e){if(e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(e,n){var i=this.tabs.length-1;function s(){e>i&&(e=0);e<0&&(e=i);return e}while(-1!==t.inArray(s(),this.options.disabled))e=n?e+1:e-1;return e},_focusNextTab:function(t,e){t=this._findNextTab(t,e);this.tabs.eq(t).trigger("focus");return t},_setOption:function(t,e){if("active"===t){this._activate(e);return}this._super(t,e);if("collapsible"===t){this._toggleClass("ui-tabs-collapsible",null,e);e||false!==this.options.active||this._activate(0)}"event"===t&&this._setupEvents(e);"heightStyle"===t&&this._setupHeightStyle(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,n=this.tablist.children(":has(a[href])");e.disabled=t.map(n.filter(".ui-state-disabled"),function(t){return n.index(t)});this._processTabs();if(false!==e.active&&this.anchors.length)if(this.active.length&&!t.contains(this.tablist[0],this.active[0]))if(this.tabs.length===e.disabled.length){e.active=false;this.active=t()}else this._activate(this._findNextTab(Math.max(0,e.active-1),false));else e.active=this.tabs.index(this.active);else{e.active=false;this.active=t()}this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(this.active.length){this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}else this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,n=this.tabs,i=this.anchors,s=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return t("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=t();this.anchors.each(function(n,i){var s,o,r,a=t(i).uniqueId().attr("id"),l=t(i).closest("li"),c=l.attr("aria-controls");if(e._isLocal(i)){s=i.hash;r=s.substring(1);o=e.element.find(e._sanitizeSelector(s))}else{r=l.attr("aria-controls")||t({}).uniqueId()[0].id;s="#"+r;o=e.element.find(s);if(!o.length){o=e._createPanel(r);o.insertAfter(e.panels[n-1]||e.tablist)}o.attr("aria-live","polite")}o.length&&(e.panels=e.panels.add(o));c&&l.data("ui-tabs-aria-controls",c);l.attr({"aria-controls":r,"aria-labelledby":a});o.attr("aria-labelledby",a)});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(n){this._off(n.not(this.tabs));this._off(i.not(this.anchors));this._off(s.not(this.panels))}},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",true)},_setOptionDisabled:function(e){var n,i,s;t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=true):e=false);for(s=0;i=this.tabs[s];s++){n=t(i);if(true===e||-1!==t.inArray(s,e)){n.attr("aria-disabled","true");this._addClass(n,null,"ui-state-disabled")}else{n.removeAttr("aria-disabled");this._removeClass(n,null,"ui-state-disabled")}}this.options.disabled=e;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,true===e)},_setupEvents:function(e){var n={};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(t){t.preventDefault()}});this._on(this.anchors,n);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(e){var n,i=this.element.parent();if("fill"===e){n=i.height();n-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var e=t(this),i=e.css("position");if("absolute"===i||"fixed"===i)return;n-=e.outerHeight(true)});this.element.children().not(this.panels).each(function(){n-=t(this).outerHeight(true)});this.panels.each(function(){t(this).height(Math.max(0,n-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")}else if("auto"===e){n=0;this.panels.each(function(){n=Math.max(n,t(this).height("").height())}).height(n)}},_eventHandler:function(e){var n=this.options,i=this.active,s=t(e.currentTarget),o=s.closest("li"),r=o[0]===i[0],a=r&&n.collapsible,l=a?t():this._getPanelForTab(o),c=i.length?this._getPanelForTab(i):t(),u={oldTab:i,oldPanel:c,newTab:a?t():o,newPanel:l};e.preventDefault();if(o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||r&&!n.collapsible||false===this._trigger("beforeActivate",e,u))return;n.active=!a&&this.tabs.index(o);this.active=r?t():o;this.xhr&&this.xhr.abort();c.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier.");l.length&&this.load(this.tabs.index(o),e);this._toggle(e,u)},_toggle:function(e,n){var i=this,s=n.newPanel,o=n.oldPanel;this.running=true;function r(){i.running=false;i._trigger("activate",e,n)}function a(){i._addClass(n.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(s.length&&i.options.show)i._show(s,i.options.show,r);else{s.show();r()}}if(o.length&&this.options.hide)this._hide(o,this.options.hide,function(){i._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active");a()});else{this._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active");o.hide();a()}o.attr("aria-hidden","true");n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});s.length&&o.length?n.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1);s.attr("aria-hidden","false");n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var n,i=this._findActive(e);if(i[0]===this.active[0])return;i.length||(i=this.active);n=i.find(".ui-tabs-anchor")[0];this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop})},_findActive:function(e){return false===e?t():this.tabs.eq(e)},_getIndex:function(e){"string"===typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']")));return e},_destroy:function(){this.xhr&&this.xhr.abort();this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")});this.tabs.each(function(){var e=t(this),n=e.data("ui-tabs-aria-controls");n?e.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var n=this.options.disabled;if(false===n)return;if(void 0===e)n=false;else{e=this._getIndex(e);n=t.isArray(n)?t.map(n,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,n){return n!==e?n:null})}this._setOptionDisabled(n)},disable:function(e){var n=this.options.disabled;if(true===n)return;if(void 0===e)n=true;else{e=this._getIndex(e);if(-1!==t.inArray(e,n))return;n=t.isArray(n)?t.merge([e],n).sort():[e]}this._setOptionDisabled(n)},load:function(e,n){e=this._getIndex(e);var i=this,s=this.tabs.eq(e),o=s.find(".ui-tabs-anchor"),r=this._getPanelForTab(s),a={tab:s,panel:r},l=function(t,e){"abort"===e&&i.panels.stop(false,true);i._removeClass(s,"ui-tabs-loading");r.removeAttr("aria-busy");t===i.xhr&&delete i.xhr};if(this._isLocal(o[0]))return;this.xhr=t.ajax(this._ajaxSettings(o,n,a));if(this.xhr&&"canceled"!==this.xhr.statusText){this._addClass(s,"ui-tabs-loading");r.attr("aria-busy","true");this.xhr.done(function(t,e,s){setTimeout(function(){r.html(t);i._trigger("load",n,a);l(s,e)},1)}).fail(function(t,e){setTimeout(function(){l(t,e)},1)})}},_ajaxSettings:function(e,n,i){var s=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,o){return s._trigger("beforeLoad",n,t.extend({jqXHR:e,ajaxSettings:o},i))}}},_getPanelForTab:function(e){var n=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}});false!==t.uiBackCompat&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}});var vt=t.ui.tabs;t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(e,n){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(n);e.data("ui-tooltip-id",n).attr("aria-describedby",t.trim(i.join(" ")))},_removeDescribedBy:function(e){var n=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),s=t.inArray(n,i);-1!==s&&i.splice(s,1);e.removeData("ui-tooltip-id");i=t.trim(i.join(" "));i?e.attr("aria-describedby",i):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=t([])},_setOption:function(e,n){var i=this;this._super(e,n);"content"===e&&t.each(this.tooltips,function(t,e){i._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,function(n,i){var s=t.Event("blur");s.target=s.currentTarget=i.element[0];e.close(s,true)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))});this.disabledTitles=t([])},open:function(e){var n=this,i=t(e?e.target:this.element).closest(this.options.items);if(!i.length||i.data("ui-tooltip-id"))return;i.attr("title")&&i.data("ui-tooltip-title",i.attr("title"));i.data("ui-tooltip-open",true);e&&"mouseover"===e.type&&i.parents().each(function(){var e=t(this),i;if(e.data("ui-tooltip-open")){i=t.Event("blur");i.target=i.currentTarget=this;n.close(i,true)}if(e.attr("title")){e.uniqueId();n.parents[this.id]={element:this,title:e.attr("title")};e.attr("title","")}});this._registerCloseHandlers(e,i);this._updateContent(i,e)},_updateContent:function(t,e){var n,i=this.options.content,s=this,o=e?e.type:null;if("string"===typeof i||i.nodeType||i.jquery)return this._open(e,t,i);n=i.call(t[0],function(n){s._delay(function(){if(!t.data("ui-tooltip-open"))return;e&&(e.type=o);this._open(e,t,n)})});n&&this._open(e,t,n)},_open:function(e,n,i){var s,o,r,a,l=t.extend({},this.options.position);if(!i)return;s=this._find(n);if(s){s.tooltip.find(".ui-tooltip-content").html(i);return}n.is("[title]")&&(e&&"mouseover"===e.type?n.attr("title",""):n.removeAttr("title"));s=this._tooltip(n);o=s.tooltip;this._addDescribedBy(n,o.attr("id"));o.find(".ui-tooltip-content").html(i);this.liveRegion.children().hide();a=t("<div>").html(o.find(".ui-tooltip-content").html());a.removeAttr("name").find("[name]").removeAttr("name");a.removeAttr("id").find("[id]").removeAttr("id");a.appendTo(this.liveRegion);function c(t){l.of=t;if(o.is(":hidden"))return;o.position(l)}if(this.options.track&&e&&/^mouse/.test(e.type)){this._on(this.document,{mousemove:c});c(e)}else o.position(t.extend({of:n},this.options.position));o.hide();this._show(o,this.options.show);this.options.track&&this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){if(o.is(":visible")){c(l.of);clearInterval(r)}},t.fx.interval));this._trigger("open",e,{tooltip:o})},_registerCloseHandlers:function(e,n){var i={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=n[0];this.close(i,true)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)});e&&"mouseover"!==e.type||(i.mouseleave="close");e&&"focusin"!==e.type||(i.focusout="close");this._on(true,n,i)},close:function(e){var n,i=this,s=t(e?e.currentTarget:this.element),o=this._find(s);if(!o){s.removeData("ui-tooltip-open");return}n=o.tooltip;if(o.closing)return;clearInterval(this.delayedShow);s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title"));this._removeDescribedBy(s);o.hiding=true;n.stop(true);this._hide(n,this.options.hide,function(){i._removeTooltip(t(this))});s.removeData("ui-tooltip-open");this._off(s,"mouseleave focusout keyup");s[0]!==this.element[0]&&this._off(s,"remove");this._off(this.document,"mousemove");e&&"mouseleave"===e.type&&t.each(this.parents,function(e,n){t(n.element).attr("title",n.title);delete i.parents[e]});o.closing=true;this._trigger("close",e,{tooltip:n});o.hiding||(o.closing=false)},_tooltip:function(e){var n=t("<div>").attr("role","tooltip"),i=t("<div>").appendTo(n),s=n.uniqueId().attr("id");this._addClass(i,"ui-tooltip-content");this._addClass(n,"ui-tooltip","ui-widget ui-widget-content");n.appendTo(this._appendTo(e));return this.tooltips[s]={element:e,tooltip:n}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove();delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");e.length||(e=this.document[0].body);return e},_destroy:function(){var e=this;t.each(this.tooltips,function(n,i){var s=t.Event("blur"),o=i.element;s.target=s.currentTarget=o[0];e.close(s,true);t("#"+n).remove();if(o.data("ui-tooltip-title")){o.attr("title")||o.attr("title",o.data("ui-tooltip-title"));o.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});false!==t.uiBackCompat&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass);return t}});var mt=t.ui.tooltip})},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(92)],s=function(t,e){var n;n=e.extend({getRowCount:function t(){return 0},getFirstElementIndex:function t(){return-1},getLastElementIndex:function t(){return-1},getIndexOf:function t(e){return e.getIndex()},onVirtualScroll:function e(){return t.resolve()},onGotoNextBlock:function e(){return t.resolve()},onGotoPreviousBlock:function e(){return t.resolve()},onInitialNativeScroll:function e(){return t.resolve()}});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(11),n(48),n(355),n(776),n(777),n(96),n(99),n(356),n(778)],s=function(t,e,n,i,s,r,a){e.directive("qvScrollArea",["$document",function(e){return{restrict:"E",transclude:true,template:i,replace:true,scope:{scrollbarSize:"=?",nonMouseViewportScrolling:"=?",direction:"=?"},require:"qvScrollArea",controller:n,link:function n(i,s,l,c){function u(t,e){var n=i.viewportRect.left,s=i.viewportRect.top,o=i.viewportRect.left+i.viewportRect.width,r=i.viewportRect.top+i.viewportRect.height;return t>=n&&t<=o&&e>=s&&e<=r}"number"!==typeof i.scrollbarSize&&(i.scrollbarSize=8);i.direction||(i.direction="ltr");i.$watch("scrollbarX.enabled",function(t){true===t&&s.css("overflow-x","hidden")});i.$watch("scrollbarY.enabled",function(t){true===t&&s.css("overflow-y","hidden")});i.namespace=".scroll-area-"+i.$id;function d(){s.off(i.namespace);e.off(i.namespace);r(s[0]).off("*",i.namespace)}i.on=function(){s.on("wheel"+i.namespace,function(t){t.preventDefault();var e=t.originalEvent,n=e.shiftKey?e.deltaY:e.deltaX,i=e.shiftKey?e.deltaX:e.deltaY,s=c.getScrollAmount(n,i,e.deltaMode);c.scroll(s.deltaX,s.deltaY,false,false);if(!a.treatAsDesktop()){c.setMouseTrackSize();c.fadeInScrollbars();c.fadeOutScrollbarsDelayed()}c.digest()});e.on("keydown"+i.namespace,function(e){var n=0,s=0,o,r,a=t(e.target),l=a.is("input")||a.is("textarea");if(i.hover&&!l){switch(e.keyCode){case 33:s=1;o=c.DELTA_MODE.PAGE;break;case 34:s=-1;o=c.DELTA_MODE.PAGE;break;case 36:s=1;o=c.DELTA_MODE.AREA;break;case 35:s=-1;o=c.DELTA_MODE.AREA;break;case 38:s=1;o=c.DELTA_MODE.LINE;break;case 40:s=-1;o=c.DELTA_MODE.LINE;break;case 39:n=-1;o=c.DELTA_MODE.LINE;break;case 37:n=1;o=c.DELTA_MODE.LINE;break;default:return}r=c.getScrollAmount(n,s,o);c.scroll(-r.deltaX,-r.deltaY,false,false);c.digest()}});s.on("mouseenter"+i.namespace+"pointerenter"+i.namespace,function(t){i.isMouse=a.isMouse(t.originalEvent);if(i.isMouse){i.hover=true;if(a.treatAsDesktop()){c.setMouseTrackSize();c.fadeInScrollbars()}c.digest()}else t.preventDefault()});s.on("mouseleave"+i.namespace+"pointerleave"+i.namespace,function(t){i.isMouse=a.isMouse(t.originalEvent);if(i.isMouse){i.hover=false;a.treatAsDesktop()&&c.fadeOutScrollbars()}});if("object"===o(i.nonMouseViewportScrolling)){"number"!==typeof i.nonMouseViewportScrolling.scrollbarSize&&(i.nonMouseViewportScrolling.scrollbarSize=36);"string"!==typeof i.nonMouseViewportScrolling.className&&(i.nonMouseViewportScrolling.className="show-non-mouse-scrollbars");r(s[0]).swipe({id:i.namespace,options:{radiusThreshold:0,useMomentum:true,inertia:.7,preventDefault:true},start:function t(e,n){if(a.isMouse(e)){this.cancel();return}if(!u(n.pagePoints[0].x-this.rect.x,n.pagePoints[0].y-this.rect.y)){this.cancel();return}c.setMouse(false);c.setNonMouseTrackSize();c.scrollStart();c.fadeInScrollbars();c.digest()},update:function t(e,n){var s=i.scrollbarX.getScrollDelta(n)[0],o=i.scrollbarY.getScrollDelta(n)[1];c.scroll(-1*s,-1*o,false,true);c.digest()},end:function t(){c.scrollEnd();c.fadeOutScrollbars();c.digest()}})}return d};i.$on("$destroy",function(){d()})}}}]);e.directive("qvScrollbar",["qvScrollAreaService",function(t){return{restrict:"E",require:["^qvScrollArea","qvScrollbar"],scope:{data:"=",interactive:"=",viewportRect:"="},template:s,replace:true,controller:function t(){},link:function e(n,i,s,o){var r=o[0],l=o[1];if("vertical"===n.data.direction){n.data.classList.push("vertical");r.addScrollbarYCtrl(l)}else{n.data.classList.push("horizontal");r.addScrollbarXCtrl(l)}function c(t){i[t?"addClass":"removeClass"]("fade")}l.allowFade=function(){return!n.data.active};l.fadeIn=function(){return c(true)};l.fadeOut=function(){return c(false)};n.thumbStyle={};n.$watch("data.thumb",function(){t.setThumbStyle(n.thumbStyle,n.data)},true);n.$watch("data.vPage",function(){t.setThumbStyle(n.thumbStyle,n.data)});n.$watch("data.vLength",function(){t.setThumbStyle(n.thumbStyle,n.data)});n.$watch("data.enabled",function(t){r.isMouseOver()&&t&&l.fadeIn()});n.setThumbStyle=t.setThumbStyle.bind(null,n.thumbStyle,n.data);n.trackHitAreaStyle={};n.$watch("data.trackSize",function(e){if(void 0===e)return;t.setTrackHitAreaStyle(n.trackHitAreaStyle,n.data,e)});n.start=function(t){r.setMouse(t);if(!n.data.active&&!a.treatAsDesktop()){t?r.setMouseTrackSize():r.setNonMouseTrackSize();r.fadeInScrollbars()}n.data.active=true;r.scrollStart()};n.update=function(t,e){r.scroll(t,e,false,true)};n.end=function(t){var e=n.data,i=0,s=e.vLength-e.vViewportLength;e.vPos<i?e.vPos=i:e.vPos>s&&(e.vPos=s);n.data.active=false;r.scrollEnd();t?r.fadeOutScrollbarsDelayed():r.fadeOutScrollbars()};n.on=function(){n.hitAreaOff=n.hitAreaOn();n.thumbOff=n.thumbOn();return function(){n.hitAreaOff();n.thumbOff()}};n.$watch("interactive",function(t){t?n.off=n.on():n.off&&n.off()})}}}]);e.directive("qvScrollbarThumb",[function(){return{restrict:"E",template:"<div></div>",replace:true,require:"^qvScrollArea",link:function t(e,n,i,s){e.thumbOn=function(){r(n[0]).tap({start:function t(n){r.preventGestures(this.gestureHandler);e.start(a.isMouse(n));s.digest()}}).swipe({options:{radiusThreshold:0},update:function t(n,i){e.update.apply(e,e.data.getScrollDelta(i));s.digest()},end:function t(){e.end();s.digest()}});return function(){r(n[0]).off()}};e.$on("$destroy",function(){r(n[0]).off()})}}}]);e.directive("qvScrollbarTrackHitArea",[function(){return{restrict:"E",replace:true,template:"<div></div>",require:"^qvScrollArea",link:function t(e,n,i,s){function o(t,n){var i=e.data.thumb.size,o=e.data.thumb.pos,r=0,a=0,l,c,u,d,p;switch(e.data.direction){case"vertical":c=t.pagePoints[0].y-n.y<o;u=t.pagePoints[0].y-n.y>o+i;if(u){l=s.getScrollAmount(0,-1,s.DELTA_MODE.PAGE);r=0;a=-l.deltaY}else if(c){l=s.getScrollAmount(0,1,s.DELTA_MODE.PAGE);r=0;a=-l.deltaY}break;case"horizontal":d=t.pagePoints[0].x-n.x<o;p=t.pagePoints[0].x-n.x>o+i;if(d){l=s.getScrollAmount(1,0,s.DELTA_MODE.PAGE);r=-l.deltaX;a=0}else if(p){l=s.getScrollAmount(-1,0,s.DELTA_MODE.PAGE);r=-l.deltaX;a=0}break}s.scroll(r,a)}function l(t,n){switch(e.data.direction){case"vertical":e.update(0,(t.pagePoints[0].y-n.y-(e.data.thumb.pos+e.data.thumb.size/2))*(1/e.data.scaleFactor));break;case"horizontal":e.update((t.pagePoints[0].x-n.x-(e.data.thumb.pos+e.data.thumb.size/2))*(1/e.data.scaleFactor),0);break;default:throw new Error("not implemented")}}e.hitAreaOn=function(){r(n[0]).tap({start:function t(n,i){r.preventGestures(this.gestureHandler);e.start(a.isMouse(n));e.setThumbStyle();a.isMouse(n)?o(i,this.rect):l(i,this.rect);s.digest()},end:function t(){e.end(true);s.digest()}}).swipe({options:{radiusThreshold:0},start:function t(n,i){if(a.isMouse(n)){this.cancel();return}e.update.apply(e,e.data.getScrollDelta(i));s.digest()},update:function t(n,i){e.update.apply(e,e.data.getScrollDelta(i));s.digest()},end:function t(){e.end(true);s.digest()}});return function(){r(n[0]).off()}};e.$on("$destroy",function(){r(n[0]).off()})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(405)],s=function(t,e,n){var i,s={3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y","-3":"m","-6":"μ","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},o=/%$/,r=/^\(r(0[2-9]|[12]\d|3[0-6])\)/i,a=/^\(oct\)/i,l=/^\(dec\)/i,c=/^\(hex\)/i,u=/^\(bin\)/i,d=/^\(rom\)/i,p=/^(\(rom\)|\(bin\)|\(hex\)|\(dec\)|\(oct\)|\(r(0[2-9]|[12]\d|3[0-6])\))/i;function h(t,e,n,i){t=t.toString(e);n[1]===n[1].toUpperCase()&&(t=t.toUpperCase());t.length-t.indexOf(".")>10&&(t=t.slice(0,t.indexOf(".")+11));return t.replace(".",i||".")}function f(t,e,n){var i;if(r.test(e))t=h(t,Number(/\d{2}/.exec(e)[0]),e,n);else if(a.test(e))t=h(t,8,e,n);else if(l.test(e))t=h(t,10,e,n);else if(c.test(e))t=h(t,16,e,n);else if(u.test(e))t=h(t,2,e,n);else if(d.test(e)){i="";if(t<0){i="-";t=-t}t=Math.floor(t);if(0===t)t="0";else if(t<=5e5){t=g(t,e);t=i+t}else t=e+i+t.toExponential(0)}return t}function g(t,e){var n,i="",s=Number(String(t).slice(-3)),o=(t-s)/1e3,r=[0,1,4,5,9,10,40,50,90,100,400,500,900].reverse(),a=["0","I","IV","V","IX","X","XL","L","XC","C","CD","D","CM"].reverse();while(s>0)for(n=0;n<r.length;n++)if(r[n]<=s){i+=a[n];s-=r[n];break}for(n=0;n<o;n++)i="M"+i;e[1]!==e[1].toUpperCase()&&(i=i.toLowerCase());return i}function v(t){if(!t||!t.qNumericalAbbreviation)return s;var e={};var n=t.qNumericalAbbreviation.split(";");n.forEach(function(t){var n=t.split(":");2===n.length&&(e[n[0]]=n[1])});return e}i=t.extend("NumberFormatter",{init:function t(e,n,i,s,o){this.localeInfo=e;this.pattern=n;this.thousandDelimiter=i||",";this.decimalDelimiter=s||".";this.type=o||"numeric";this.abbreviations=v(e);this.prepare()},clone:function t(){var e=new i(this.localeInfo,this.pattern,this.thousandDelimiter,this.decimalDelimiter,this.type);e.subtype=this.subtype;return e},format:function t(e,n,i,s){this.prepare(n,i,s);return this.formatValue(e)},prepare:function t(e,n,i){var s,o;"undefined"===typeof e&&(e=this.pattern);"undefined"===typeof n&&(n=this.thousandDelimiter);"undefined"===typeof i&&(i=this.decimalDelimiter);if(!e){this._prepared={pattern:false};return}this._prepared={positive:{d:i,t:n,abbreviate:false,isFunctional:false,prefix:"",postfix:""},negative:{d:i,t:n,abbreviate:false,isFunctional:false,prefix:"",postfix:""}};s=this._prepared;e=e.split(";");s.positive.pattern=e[0];s.negative.pattern=e[1];p.test(e[0])&&(s.positive.isFunctional=true);e[1]?p.test(e[1])&&(s.negative.isFunctional=true):s.negative=false;o=s.positive.isFunctional&&(!s.negative||s.negative&&s.negative.isFunctional);if(!o){m(s.positive,n,i);s.negative&&m(s.negative,n,i)}},formatValue:function t(e){var i=this._prepared,s,o,r="",a,l,c="",u,d,p,h,g;if(Number.isNaN(+e))return e;if(false===i.pattern)return e.toString();if(e<0&&i.negative){i=i.negative;e=-e}else i=i.positive;u=i.d;d=i.t;if(i.isFunctional)e=f(e,i.pattern,u);else{i.percentage&&(e*=100);if(i.abbreviate){var v=this.abbreviations;var m=Object.keys(v).map(function(t){return parseInt(t)}).sort(function(t,e){return t>e?1:-1});var b;var y=m[0];p=0;o=Number(Number(e).toExponential().split("e")[1]);while(y<=o&&p<m.length){p++;y=m[p]}p>0&&(b=m[p-1]);var x;b&&o>0&&b>0?x=b:(o<0&&b<0||!b)&&(y<0&&y-o<=i.maxPrecision?x=y:b<=o&&!(y>0&&-o<=i.maxPrecision)&&(x=b));if(x){r=v[x];e/=Math.pow(10,x)}}a=Math.abs(e);s=i.temp;h=i.numericPattern;g=h.split(u)[1];"I"===this.type&&(e=Math.round(e));l=e;if(g||"#"!==h.slice(-1)[0])if(a>=1e15||a>0&&a<=1e-14)e=a?a.toExponential(15).replace(/\.?0+(?=e)/,""):"0";else{var q=Number(e.toFixed(Math.min(20,g?g.length:0)).split(".")[0]);var S=h.split(u)[0];S+=u;e=n(S,q)||"0";if(g){var w=Math.max(0,Math.min(14,g.length));var C=g.replace(/#+$/,"").length;var I=Number((a%1).toPrecision(w)).toFixed(w);I=I.slice(2).replace(/0+$/,"");for(p=I.length;p<C;p++)I+="0";I&&(e+=u+I)}else 0===q&&(l=0)}else if(a>=Math.pow(10,s)||a<1||a<1e-4)if(0===e)e="0";else if(a<1e-4||a>=1e20){e=l.toExponential(Math.max(1,Math.min(14,s))-1);e=e.replace(/\.?0+(?=e)/,"");c=""}else{e=e.toPrecision(Math.max(1,Math.min(14,s)));if(e.indexOf(".")>=0){e=e.replace(e.indexOf("e")<0?/0+$/:/\.?0+(?=e)/,"");e=e.replace(".",u)}}else{h+=u;s=Math.max(0,Math.min(20,s-Math.ceil(Math.log(a)/Math.log(10))));for(p=0;p<s;p++)h+="#";e=n(h,e)}e=e.replace(i.numericRegex,function(t){if(t===d)return i.groupTemp;if(t===u)return i.decTemp;return""});l<0&&!/^-/.test(e)&&(e="-"+e)}return i.prefix+e+c+r+i.postfix}});function m(t,e,n){var i,s,r=t.pattern,a,l,c,u,d,p,h;if(r.indexOf("A")>=0){r=r.replace("A","");t.abbreviate=true}h=y(e,n);a=r.match(h);a=a?a[0]:"";l=a?r.substr(0,r.indexOf(a)):r;c=a?r.substring(r.indexOf(a)+a.length):"";a||(a=r?"#":"##########");if(e&&e===n){i=a.split(n);s=i.pop();a=i.join("")+n+s;e=""}u=e;e=/,/.test(n)?"¤":",";u&&(a=a.replace(b(u,"g"),e));d=n;n=".";d&&(a=a.replace(b(d,"g"),n));p=a.match(/#/g);p=p?p.length:0;var f=r.split(d);var g;f[1]&&(g=f[1].match(/#|0/g));t.prefix=l||"";t.postfix=c||"";t.pattern=r;t.maxPrecision=g?g.length:2;t.percentage=o.test(r);t.numericPattern=a||"";t.numericRegex=new RegExp(b(e,null,true)+"|"+b(n,null,true),"g");t.groupTemp=u;t.decTemp=d;t.t=e;t.d=n;t.temp=p}function b(t,n,i){var s=e.escapeRegExp(t);if(i)return s;return new RegExp(s||"",n)}function y(t,n){n&&(n=e.escapeRegExp(n));t&&(t=e.escapeRegExp(t));return new RegExp("(?:[#0]+"+t+")?[#0]+(?:"+n+"[#0]+)?")}window.NumberFormatter=i;i.getStaticFormatter=function(){return{prepare:function t(){},formatValue:function t(e){return e+""}}};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(11),n(90),n(91),n(48),n(162),n(230),n(89),n(94),n(114),n(634)],s=function(t,e,n,i,s,r,a,l,c){var u=1e3,d=null;function p(t){var e=!d||d!==t;if(e){d=t;setTimeout(function(){d=null},u)}return e}function h(t,e,n){var i=new a,s=t.layout,o=s.qInfo.qId;if(p(o))return f(s,t,true,n).then(function(t){delete t.qInfo;return g(e,t)});i.reject();return i.promise}function f(n,i,o,r,c){var u=new a,d=new Date,p=o?e.extend(true,{},n):n;b(i,p,c).then(function(){s.getProperties().then(function(s){p.snapshotData={object:{size:i.objectSize},rtl:void 0!==s.rtl&&s.rtl};i.setSnapshotData(p,r||{}).then(function(){if(o){p.qInfo.qId=e.generateId();p.visualizationType=n.qInfo.qType;p.sourceObjectId=n.qInfo.qId;p.sheetId=l.model?l.model.id:"";p.timestamp=d.getTime();p.isClone=false;p.qMetaDef={title:n.title};p.supportExport=i.supportExport();delete p.qExtendsId;var s=t(".qv-panel-sheet");p.snapshotData.parent={h:s.length?s.height():t(window).height(),w:s.length?s.width():t(window).width()}}else{p.snapshotData.object.origDataPages=i.model.layout.snapshotData.object.origDataPages;p.snapshotData.content&&(p.snapshotData.content.chartData=e.extend(true,{},i.model.layout.snapshotData.content.chartData))}u.resolve(p)})})});return u.promise}function g(t,e){var s=new a;r.create(e).then(function(e){if(e.limit){v(t.find(".qv-object"));s.resolve(e.id)}else i.getService("qvAlertDialog").show({title:n.get("Storytelling.Snapshot.MaxLimitReached.Title"),message:n.get("Storytelling.Snapshot.MaxLimitReached.Text"),closeLabel:n.get("Common.OK")})});return s.promise}function v(e){e.prepend(t('<div class="qv-snapshot-tool-flash '+c.direction+'" />').bind("oanimationend animationend webkitAnimationEnd",function(){t(this).remove()}))}function m(t){return r.getSnapshotCount(t)}function b(t,n,i){var s=[],r=[],l=new a;"undefined"===typeof i&&(i=true);n.qExtendsId&&"text-image"===n.visualization?t.model.app.getObject(n.qExtendsId).then(function(t){t.getProperties().then(function(t){c(t)})}):t.model.getProperties().then(function(t){c(t)});function c(t){d(s,"qStaticContentUrl",n,i);d(r,"qStaticContentUrlDef",t);u();l.resolve(n)}function u(){s.forEach(function(t,n){e.extend(true,t,r[n])})}function d(t,e,n,i){for(var s in n)if(n.hasOwnProperty(s)&&"qHyperCube"!==s&&"qHyperCubeDef"!==s)if(s===e){if(i){delete n[s];n.qStaticContentUrlDef={}}t.push(n.qStaticContentUrlDef)}else"object"===o(n[s])&&d(t,e,n[s],i)}return l.promise}function y(t,e){var i=JSON.stringify({data:t,appLocaleInfo:e||{},language:n.language});return i}return{createSnapshot:h,getNumberOfSnapshots:m,prepSnapshotData:f,prepareStaticContent:b,formatSnapshotForRendering:y}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(197),n(285),n(251)],s=function(t,e,n){var i="DATAMODELVIEWER_GLOBAL_CONFIGRATION_INTERNAL_TABLE_VIEW";var s="dmv.islocked",o="dmv.internaltableview",r="dmv.tablesizedata",a="dmv.lastUsedResizeMode",l;function c(){return h(s)}function u(){return h(o)}function d(){return h(r)}function p(){return h(a)}function h(t){if(!l)throw new Error('Cannot create key for "'+t+'", as I have not yet gotten a hashed app id.');return t+"."+l}function f(e){var n=c();t.set(n,{value:e})}function g(){var e=c();return!!t.contains(e)&&t.get(e).value}function v(n){var s=u();t.set(s,{value:n});e.notifyAll(i,n)}function m(e){var n=d();t.set(n,{value:e})}function b(e){var n=p();t.set(n,{value:e})}function y(e){var n=p();return!!t.contains(n)&&e===t.get(n).value}function x(){var e=d();var n=t.get(e).value;return n}function q(){var e=d();return t.contains(e)}function S(){var e=u();return!t.contains(e)||t.get(e).value}function w(t){l=n.sha256(t);e.notifyAll(i,S())}function C(t){e.addObserver(i,t)}return{setIsLocked:f,isLocked:g,setIsInternalTableView:v,setTableSizeData:m,setLastUsedResizeMode:b,isLastUsedResizeMode:y,getTableSizeData:x,hasTableSizeData:q,isInternalTableView:S,setAppID:w,onInternalTableViewChange:C,STORAGE_KEY_IS_LOCKED:s,STORAGE_KEY_IS_INTERNAL_TABLE_VIEW:o,STORAGE_KEY_TABLE_SIZE_DATA:r}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(11),n(48),n(96),n(127),n(99),n(780)],s=function(t,e,n,i,s,o,r){var a=t.extend("DefaultSortableList",{init:function t(n,i){this.options=e.extend(true,{gesture:{name:"swipe",options:{radiusThreshold:2,preventDefault:false}},direction:"",scrollSelector:"",listSelector:"",containerSelector:"",listKey:"",itemSelector:"[ng-repeat]",itemDragSelector:"[ng-repeat]",itemGhostSelector:"",isOuterScroll:false,suppressDragStyle:[],suppressEnd:function t(){return false},itemKey:"$index",zIndex:1},n||{});this.ctrl=i},onBegin:function t(){},onEnter:function t(){},onEnterList:function t(){},onMove:function t(){},onMoveToList:function t(){},onCancel:function t(){},onEnd:function t(){},allowDrag:function t(e){if(r.isMouse(e))return!!n(e.target).closest(this.options.itemSelector).length;return!!n(e.target).closest(this.options.itemDragSelector).length},allowScroll:function t(e){return!this.allowDrag(e)},allowEnter:function t(){return true},allowEnterList:function t(){return true},allowAutoScroll:function t(){return true},onAutoScroll:function t(e){e()},getGesture:function t(){return this.options.gesture},getDirection:function t(){return this.options.direction},getScrollSensitivity:function t(e){return r.isMouse(e)?15:25},getScrollSpeed:function t(e){return r.isMouse(e)?15:25}});i.directive("qvSortableList",["qvSortableListDragService",function(t){return{restrict:"A",controller:function t(){},link:function e(i,r,l,c){var u=i.$watch(l.qvSortableList,function(e){u();if(e instanceof a)e.ctrl=c;else{var l=a.extend(e||{});e=new l(e&&e.options,c)}var d=r.closest(e.options.scrollSelector);d.length||(d=r);var p;var h=t.$new(e.options);var f;var g;var v;var m="sortable-list-"+i.$id;var b;var y={id:m,options:{preventDefault:false},start:function i(s,r){p=void 0;if(o.isInput(s.target)||!t.isChild(d[0],s.target))return;if(!e.allowDrag(s))return;p=n(s.target).closest(e.options.itemGhostSelector||e.options.itemSelector);if(0===p.length){p=void 0;return}var a;if(e.options.containerSelector){var l=p.closest(e.options.containerSelector);l.length&&(a=l)}h.direction=e.getDirection();f=e.getScrollSpeed(s);g=e.getScrollSensitivity(s);t.startOffset(d,h,p,r.pagePoints[0],e.options.isOuterScroll,a);t.startData(d,h,p,e.options.itemKey)},end:function t(){p=void 0}};var x={id:m,start:function n(o){if(!p){this.cancel();return}o.preventDefault();s.WebkitHack.prevent();e.onBegin(h.fromItem,h.clientRect);i.$digest();t.start(d,h,p)},update:function n(s,o){if(!p){this.cancel();return}function r(){if(e.allowEnter(h.enterItem,h.fromItem)){h.toItem=h.enterItem;h.toList=void 0;e.onEnter(h.enterItem,h.enterItemAction);i.$digest()}}function a(){if(e.allowEnterList(h.enterList,h.fromItem)){h.toItem=void 0;h.toList=h.enterList;e.onEnterList(h.enterList);i.$digest()}}function n(){t.update(d,h,p,o.swipe);t.updateDragCoordinates(h,void 0!==o.clientX?o.clientX:o.pagePoints[0].x,void 0!==o.clientY?o.clientY:o.pagePoints[0].y,e.options.boundingRect);t.updateData(d,h,p,e.options.listSelector,e.options.listKey,e.options.itemSelector,e.options.itemKey,r,a)}if(s.touches&&s.touches[0]){o.clientX=s.touches[0].clientX;o.clientY=s.touches[0].clientY}else{o.clientX=s.clientX;o.clientY=s.clientY}n();if(e.allowAutoScroll()){var l=t.autoScroll.bind(this,d[0],h.scroll.clientRect,h.scroll.width,h.scroll.height,h,n,f,g);e.onAutoScroll(l,h.enterList,h.enterItem,function(e,i,s,o){t.autoScroll(e,i,s,o,h,n,f,g)})}},end:function n(s,o){t.end(h,p);e.options.suppressEnd(o)||(void 0!==h.toItem?e.onMove(h.fromItem,h.toItem):void 0!==h.toList?e.onMoveToList(h.fromItem,h.toList):e.onCancel(h.fromItem));i.$digest();e.onEnd(h.fromItem);p=void 0},cancel:function n(){if(!p)return;t.end(h,p);e.onCancel(h.fromItem);p=void 0;"$digest"!==i.$root.$$phase&&i.$digest()}};v=e.options.gesture;x.options=v.options;function q(){p=void 0;s(r[0])[v.name](x).tap(y);s(d[0]).tap({id:"sortable-list-tap-"+i.$id,options:{preventDefault:false},start:function t(i){if(!e.allowScroll(i)&&!o.isInput(i.target)){var s=n(i.target).hasClass("slider")||n(i.target).parent().hasClass("slider");s||i.preventDefault()}}});return function(){s(d[0]).off("*","sortable-list-tap-"+i.$id);s(r[0]).off("*",m)}}i.$on("$destroy",function(){s(d[0]).off("*","sortable-list-tap-"+i.$id);s(r[0]).off("*",m)});c.on=function(){b||(b=q())};c.off=function(){if(b){b();b=void 0}};c.cancel=function(){x.cancel()};c.on()})}}}]);return a}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(378)],s=function(t){function e(e){if(void 0===e)throw new Error("String is undefined.");if(0===e.length)throw new Error("String is empty.");var n=t(e);return n}return{sha256:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(109)],s=function(t){var e={},n={},i=5e3,s=0,o=Math.floor;function r(t,e){return function(){var n=function t(){},i,s;n.prototype=t.prototype;i=new n;s=t.apply(i,e);return Object(s)===s?s:i}}function a(){s++}function l(){var o,l,c,u;if(arguments.length<3)"string"===typeof arguments[0]?o=arguments[0]:"number"===typeof arguments[0]&&arguments[0]>=0&&(o=arguments[0]+"");else if(arguments.length>=3){o=arguments[0];for(c=0;c>arguments.length;c++)o+=","+arguments[c]}if(o&&e[o])return e[o];u=r(t,arguments)();l=u.isInvalid()?"INVALID":u._r+","+u._g+","+u._b+","+u._a;if(n[l])u=n[l];else{if(s>=i)return u;n[l]=u;a()}o&&(e[o]=u);return u}function c(e,l,c){var u,d;var p=o(e._r+(l._r-e._r)*c),h=o(e._g+(l._g-e._g)*c),f=o(e._b+(l._b-e._b)*c),g=o(e._a+(l._a-e._a)*c);u=p+","+h+","+f+","+g;if(n[u])d=n[u];else{d=r(t,[p,h,f,g])();if(s>=i)return d;n[u]=d;a()}return d}function u(){e={};n={};s=0}return{retriveColor:l,retriveBlend:c,clear:u}}.apply(e,i),void 0!==s&&(t.exports=s))},,,,function(t,e,n){"use strict";var i,s;!(i=[n(92)],s=function(t){var e=t.extend({init:function t(){},tap:{},taptwo:{},tapthree:{},swipe:{},swipetwo:{},rotate:{},mousemove:{},mouseleave:{},mousewheel:{},wheelswipe:{},exclusive:function t(){return false},active:function t(){return true}});return{extend:function n(){return 2===arguments.length?e.extend.call(t,arguments[0],arguments[1]):new(e.extend(arguments[0]))}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(10),n(48),n(871),n(94),n(102),n(169),n(176)],s=function(t,e,n,i,s){e.service("qvGlobalSearchService",["$document","qvSelectionToolbarService",function(e,o){var r,a={};function l(t){return a[u(t)]}function c(t,e){a[u(t)]=e}function u(t){if(t.id)return t.id.toUpperCase();return t.id}function d(t){return{$container:void 0,$containerId:".qv-global-search-container",$app:t,$lastKnownIndexProgress:void 0,$haveQuery:false,getComponent:function t(){return n},setup:function e(){i.StateChanged.bind(p.bind(null,t));t.isInModalSelection()&&o.confirm()},destroy:function t(){i.StateChanged.unbind(p)}}}function p(t){(i.isInEditMode()||!i.isInAnalysisMode||i.inObjectView())&&g(l(t))}function h(n,i,s){n.$container=t.element("<div>");i=i||e;i.find(n.$containerId).append(n.$container);n.$container.showComponent(n.getComponent(),["$scope",function(t){t.app=n.$app;t.options={objectSearchIsOn:s}}]);n.setup()}function f(t){return!(!t||void 0===t.$container)}function g(t){if(t.$container){t.$container.remove();t.$container=void 0}t.destroy()}function v(t){var e=l(t);if(!e){e=new d(t);c(t,e)}return e}function m(t,e){try{var n=e.qTransientProgressMessage.qMessageParameters[0],i=new Number(n),s=v(t);!Number.isNaN(+i)&&n&&(s.$lastKnownIndexProgress=i);r.IndexProgressUpdate.emit(u(t),i)}catch(t){return}}r={toggleGlobalSearch:function t(e,n,i){var s=v(e);f(s)?g(s):h(s,n,i)},openGlobalSearch:function t(e,n){var i=v(e);if(!f(i)){g(i);h(i,n)}},closeGlobalSearchIfNoQuery:function t(e){var n=l(e);n&&n.$haveQuery||this.off()},off:function t(){Object.keys(a).forEach(function(t){g(a[t])})},isSearchOpen:function t(e){return f(l(e))},setLastKnownIndexProgress:function t(e,n){var i=l(e)||{};i.$lastKnownIndexProgress=n},getLastKnownIndexProgress:function t(e){var n=l(e)||{};return n.$lastKnownIndexProgress},couldEngineBeIndexing:function t(e){var n=l(e)||{},i=n.$lastKnownIndexProgress;return void 0!==i&&i<100},requestIndexProgressUpdate:function t(e){e.global.getProgress(0).then(m.bind(null,e))},setHaveQuery:function t(e,n){var i=v(e);i.$haveQuery=n}};s.mixin(r);r.notification("IndexProgressUpdate");return r}])}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(2)],s=function(t){var e={};e.getJson=function(e){return t.get(e,{responseType:"json"}).then(function(t){if(t.data)return t.data;console.warn("Theme parsing error for theme: "+e);return{}}).catch(function(t){console.warn("Couldn't get theme: "+e+". Error: "+t);return{}})};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(2)],s=function(t,e){var n=function t(){};var i=function t(n){return e.request(n).then(function(t){var e=t.data;return e.data}).catch(function(t){throw t.data})};n.getTenantId=function e(){var n=t("#appFrame");if(n.length)return n.attr("tenantId");try{var i=t("#appFrame",window.parent.document);if(i.length)return i.attr("tenantId")}catch(t){}return""};n.getTenantIdUrlParameter=function(){var t=n.getTenantId();return t?"?tenantId="+t:""};n.getConfig=function(t){var e=n.getTenantIdUrlParameter();return{method:"GET",url:"/api/v1/"+t+e}};n.getCloudExtensions=function(){var t=n.getConfig("extensions");return i(t)};n.getCloudThemes=function(){var t=n.getConfig("themes");return i(t)};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){function e(e){var n=t.getService("qvAlertDialog");return n.show({title:e.title,message:e.message,closeOnEscape:false})}return{show:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(608)],s=function(t,e){t.directive("qvSpinner",function(){return{replace:true,template:e,restrict:"E",scope:{show:"=",showDelay:"=?",showForAtLeast:"=?",spinnerWidth:"@?",spinnerHeight:"@?",centerInParent:"=?"},controller:["$scope","$timeout",function(t,e){var n;var i;t.internalShow=false;function s(){t.showDelay?n=e(function(){o(t.showForAtLeast)},t.showDelay):o(t.showForAtLeast)}function o(n){t.internalShow=true;i=e(function(){},n)}function r(){n&&e.cancel(n);i&&i.then(function(){t.internalShow=false})}t.$watch("show",function(t){t?s():r()})}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(612)],s=function(t){return{template:t,controller:[function(){}],scope:{item:"=",style:"="}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(104)],s=function(t,e){var n,i=new e(0,0,0,0),s=new e(0,0,0,0);n=t.extend("CubeSlicer",{init:function t(){this.pages=[]},get:function t(e){return e.map(function(t){return this.getPage(t)}.bind(this))},getPage:function t(n){var o,r,a=[],l;for(r=0;r<this.pages.length;r++){o=this.pages[r].qArea;i.set(n.qLeft,n.qTop,n.qWidth,n.qHeight);s.set(o.qLeft,o.qTop,o.qWidth,o.qHeight);l=s.intersection(i,true);a.push({coverage:l?l.clone():new e(0,0,0,0),idx:r});if(o.qLeft<=n.qLeft&&o.qLeft+o.qWidth>=n.qLeft+n.qWidth&&o.qTop<=n.qTop&&o.qTop+o.qHeight>=n.qTop+n.qHeight)return this._extract(n,this.pages[r])}a.sort(function(t,e){return e.coverage.width*e.coverage.height-t.coverage.width*t.coverage.height});if(a[0].coverage.height>0&&a[0].coverage.width>0)return this._extract(n,this.pages[a[0].idx]);return{qArea:{qTop:n.qTop,qLeft:n.qLeft,qWidth:0,qHeight:0},qMatrix:[]}},destroy:function t(){this.clear()},isEmpty:function t(){return!this.pages||!this.pages[0]||!this.pages[0].qArea.qHeight||!this.pages[0].qArea.qWidth},clear:function t(){this.pages=[]},store:function t(e){this.pages=e},containsArea:function t(e){var n;for(var i=0;i<this.pages.length;i++){n=this.pages[i].qArea;if(n.qLeft<=e.qLeft&&n.qLeft+n.qWidth>=e.qLeft+e.qWidth&&n.qTop<=e.qTop&&n.qTop+n.qHeight>=e.qTop+e.qHeight)return true}return false},contains:function t(e){if(!this.pages||!this.pages.length)return false;return 0===e.filter(function(t){return!this.containsArea(t)}.bind(this)).length},_extract:function t(e,n){i.set(e.qLeft,e.qTop,e.qWidth,e.qHeight);s.set(n.qArea.qLeft,n.qArea.qTop,n.qArea.qWidth,n.qArea.qHeight);var o=i.intersection(s,true),r,a,l;if(!o)return{qArea:{qTop:e.qTop,qLeft:e.qLeft,qWidth:0,qHeight:0},qMatrix:[]};l=Math.max(0,e.qTop-n.qArea.qTop);a=Math.max(0,e.qLeft-n.qArea.qLeft);r=n.qMatrix.slice(l,l+o.height).map(function(t){return t.slice(a,a+o.width)});return{qArea:{qTop:o.y,qLeft:o.x,qWidth:o.width,qHeight:o.height},qMatrix:r}}});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(343)],s=function(t){var e=t.extend({init:function t(e,n){this._super(e.cache,n);this._selectedShapes=[];this.handler=e;this.options=n;this.components=n.components||{}},release:function t(){this._super();this.components={};this._selectedShapes=[];this.handler=null},resetSelectedShapes:function t(){this._selectedShapes.length=0},getSelectedShapes:function t(){return this._selectedShapes},toggleSelectedShape:function t(e){var n=this._selectedShapes.indexOf(e);-1!==n?this._selectedShapes.splice(n,1):this._selectedShapes.push(e)},setActiveMode:function t(e){this._activeMode=e},getActiveMode:function t(){return this._activeMode},register:function t(e,n){this.handler.register(e,n)},deregister:function t(e,n){this.handler.deregister(e,n)},getActiveDimensions:function t(){return this.activeComponent.getSelectionIndices()},toggle:function t(){},toggleRect:function t(){},start:function t(){},update:function t(){},end:function t(){},cancel:function t(){},move:function t(){},leave:function t(){},getTransformedPoint:function t(e,n){return this._super(e,n,this.handler.containerRect)},getPagePoint:function t(e,n,i){return this._super(e,n,i,this.handler.containerRect)},shapeFromPoint:function t(e){return this.shapesFrom.shapeFromPoint(e)},shapesFromPoints:function t(e){return this.shapesFrom.shapesFromPoints(e)},shapesFromLines:function t(e){return this.shapesFrom.shapesFromLines(e)},shapesFromPolygon:function t(e){return this.shapesFrom.shapesFromPolygon(e)},shapesFromRect:function t(e,n){return this.shapesFrom.shapesFromRect(e,n)},shapesFromRectForDirection:function t(e,n,i){return this.shapesFrom.shapesFromRectForDirection(e,n,i)},shapesFromRange:function t(e,n,i,s){return this.shapesFrom.shapesFromRange(e,n,i,s)},shapesFromDimensionValue:function t(e){return this.shapesFrom.shapesFromDimensionValue(e)},groupedItemsFromShapes:function t(e){return this.shapesFrom.groupedItemsFromShapes(e)},shapesFromIndex:function t(e,n){return this.shapesFrom.shapesFromIndex(e,n)},ToggleFlag:{select:1,deselect:2,auto:4,replace:8},toggleSelection:function t(e,n){var i=this.handler._disableSelections,s=this.ToggleFlag,o=this.handler.ToggleShape,r=this.handler.ToggleShapes,a=this.toggleSelectedShape.bind(this),l;n=n||s.auto;function c(t){var s=e.filter(t);s.forEach(function(t){if(!i){t.selected=!t.selected;a(t);o.emit(t,n)}});s.length>0&&r.emit(e,n)}if(n&s.select)c(function(t){return!t.selected});else if(n&s.deselect)c(function(t){return t.selected});else if(n&s.auto)c(function(){return true});else if(n&s.replace){l=e;e=this.handler.cache.data;c(function(t){return t.selected});e=l;c(function(){return true})}},clearSelection:function t(){var e=this.handler.Clear,n=this.handler.cache.data,i=this.ToggleFlag.deselect;this.toggleSelection(n,i);e.emit()}});e.defaultOptions={};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(120),n(328),n(89),n(181),n(49)],s=function(t,e,n,i,s,o){var r={};function a(t,e,n){return t.bounds?t.bounds:s.getBounds(t,e,n)}function l(t,e,n){var i={};if(t.bounds){var o=t.bounds;i=s.getInfluenceOnGrid(o,e,n);i.bounds={x:o.x,y:o.y,width:o.width,height:o.height}}else{i.row=t.row;i.col=t.col;i.rowspan=t.rowspan;i.colspan=t.colspan;i.bounds=a(i,e,n)}return i}function c(t,e){var n=[];for(var i=0;i<e;i++){n[i]=[];for(var s=0;s<t;s++)n[i][s]=1}return n}function u(t,e){var n,i;var s,o;s=e.row+e.rowspan;o=e.col+e.colspan;for(n=e.row;n<s;n++)for(i=e.col;i<o;i++)t[n]&&(t[n][i]=0)}function d(t,e){var n;if(!e)return null;for(n=0;n<e.length;++n)if(e[n].id===t)return e[n];return null}function p(t){return t.getLayout().then(function(t){var e=r.updateGridCells(t.columns,t.rows,[],t.cells);return r.getOptimalGridCell(e)})}r.addToSheet=function(t,e){return p(t).then(function(n){var i={cell:n,init:e,template:e.qInfo.qType};return t.addObject(i).then(function(){return t})})};r.getOptimalGridCell=function(t){t.sort(function(t,e){if(t.isEmpty&&!e.isEmpty)return-1;if(e.isEmpty&&!t.isEmpty)return 1;var n=t.pos.colspan*t.pos.rowspan;var i=e.pos.colspan*e.pos.rowspan;if(n>i)return-1;if(n<i)return 1;return 0});var e=t[0]||null;if(e&&!e.isEmpty)if(e.pos.colspan>1||e.pos.rowspan>1){var n=e.pos.colspan>e.pos.rowspan?"right":"bottom";e={isEmpty:true,pos:{pos:e.pos,split:n}}}else e=null;return e};r.updateGridCells=function(t,e,n,i,s,r){var a=i;var p=o.getFlag("DROP_ZONES");var h=[];var f=c(t,e);s=s||e;var g;var v;if(p){g=r?Math.round(s/2):s;v=r?g:Math.round(g/2)}function m(n){var i=l(n,t,e);u(f,i,e,t);var s={};s.pos=i;s.isEmpty=true;s.navMenu={};h.push(s)}function b(i){var s=l(i,t,e);u(f,s,e,t);var o=d(i.name,n);if(!o){o={};o.id=i.name;o.navMenu={};o.options={id:i.name,isVisible:true,isZoomed:false,isActive:false}}o.pos=s;o.isEmpty=false;h.push(o)}function y(n,i,o,r){n=n||0;o=o||0;i=i||e;r=r||t;var a;var l;var c=r;var u=[];var d;var h;var g;while(c-- >o){l=0;a=i;u[c]=[];while(a-- >n)if(f[a][c])u[c][a]=++l;else{l=0;u[c][a]=null}}g=null;h=0;function v(t,e,n){var i=t;while(d.length>0){var o=d[d.length-1];if(o.rowSpan===n)return;if(o.rowSpan<n)break;d.pop();i=o.col;var r=t-o.col;var a=o.rowSpan*r;if(a>h){h=a;g={col:o.col,row:e,colspan:r,rowspan:o.rowSpan}}}n>0&&n&&d.push({col:i,rowSpan:p?n:Math.min(n,s)})}d=[];for(a=n;a<i;++a){for(c=o;c<r;++c){if(null===u[c][a]){v(c,a,0);continue}v(c,a,u[c][a])}v(c,a,0)}return g}function x(){var n=1,i;if(p){var s=Math.ceil(e/v);var o=Math.ceil(t/g);for(var r=0;r<s;++r)for(var l=0;l<o;++l)while(true){i=y(v*r,Math.min(v*(r+1),e),g*l,Math.min(g*(l+1),t));if(!i)break;i.priority=n++;a.push(i);m(i)}}else while(true){i=y();if(!i)break;i.priority=n++;a.push(i);m(i)}}function q(t){t.sort(function(t,e){t=t.pos;e=e.pos;return t.row-e.row}).sort(function(t,e){t=t.pos;e=e.pos;if(t.row===e.row)return t.col-e.col;return t.row-e.row})}a.forEach(b);q(h);x();return h};t.service("qvObjectPlacementService",[function(){var t={addObjectToSheet:function t(n,s,o){if(!n)return i.reject();if(!s&&o)return r.addToSheet(o,n);if(s)return e.get(s).then(function(t){return r.addToSheet(t,n)})},addToNewSheet:function t(s){return e.getList().then(function(t){if(!s)return i.reject();return t.getLayout().then(function(t){var e=0;t.forEach(function(t){!t.qMeta.published&&t.qData.rank>e&&(e=t.qData.rank)});return n.addSheet(e+1).then(function(t){return r.addToSheet(t,s)})})})},getOptimalCell:function t(e){return r.getOptimalGridCell(e)},updateGridCells:function t(e,n,i,s,o,a){return r.updateGridCells(e,n,i,s,o,a)},getCellAlignment:function t(e,n,i,s){return a(e,n,i,s)}};return t}]);return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(93),n(715),n(191),n(107),n(150)],s=function(t,e,n,i,s,o,r){e.directive("qvExpressionInput",function(){return{restrict:"E",scope:{expression:"=",isValidExpression:"=",labelTranslation:"@"},template:i,link:function e(i){n.getApp().then(function(e){var n;i.onExpressionChange=l;i.shouldForceEditInExpressionEditor=c;i.onExpressionActivate=u;i.openExpressionDialog=d;i.maxLength=o.name;i.labelTranslation=i.labelTranslation||"metadata.labelExpression";n=new s.ExpressionValidator(e);l();var a=function t(e){i.isValidExpression=e.valid};n.Update.bind(a);i.$on("$destroy",function(){n.Update.unbind(a)});function l(){i.isExpression=p(i.expression);n.validate(i.expression)}function c(){return i.expression&&i.expression.length>o.name}function u(e){if(!c())return;t(e.target).blur();d()}function d(){var t={expr:i.expression,title:i.expression?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"};r.show(t).then(function(t){i.expression=t;l()})}function p(t){return(t||"").length>0}})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(90),n(768),n(134),n(150),n(93),n(354),n(148),n(790),n(144)],s=function(t,e,n,i,s,o,r,a,l,c){var u=r.dimensionTypes,d=l.create(a);function p(t,e){return t.localeCompare(e)}function h(){return o.getApp().then(function(t){return t.getFieldList().then(function(t){var n,i,s;t=e.extend(true,[],t);t=a.removeMeasureAndDetailsFields(t);t.sort(function(t,e){return t.qName.localeCompare(e.qName)});t=c.expand(t);s=[];for(n=0;n<t.length;++n){var o=t[n];for(i=0;i<o.qSrcTables.length;++i)-1===s.indexOf(o.qSrcTables[i])&&s.push(o.qSrcTables[i]);d.addIconMetaData(o)}s.sort(p);return{fields:t,tables:s}})})}function f(t,e,n){s.show({expr:n,title:n?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"}).then(function(n){t(e,n)})}function g(t,i){h().then(function(s){var o=!t.qInfo.qId;function a(e){var n=r.dimensionTypes,s="drilldown",o="single";t.qMetaDef={title:e.name,description:e.description,tags:e.tags};t.qDim.title=e.name;t.qDim.qGrouping=e.type===s?n.drilldown:n.single;t.qDim.qFieldDefs=e.expr;t.qDim.qLabelExpression=e.labelExpression;t.qDim.descriptionExpression=e.descriptionExpression;t.qDim.coloring||(t.qDim.coloring={});t.qDim.baseColor&&delete t.qDim.baseColor;if(e.colorsChanged){t.qDim.coloring.colorMapRef=t.qInfo.qId;t.qDim.coloring.changeHash=Math.random()+""}e.baseColor&&"none"!==e.baseColor.color?t.qDim.coloring.baseColor=e.baseColor:delete t.qDim.coloring.baseColor;e.type===o?t.qDim.qFieldLabels=[e.name]:t.qDim.qFieldLabels=[];i()}var l=e.extend(true,{},t);l.name=t.qMetaDef.title;l.description=t.qMetaDef.description;l.tags=t.qMetaDef.tags;o?n.add({dimension:l,tableData:s,expressionInterface:f,callback:a}):n.edit({dimension:l,tableData:s,expressionInterface:f,callback:a})})}function v(){return{add:function e(n,s){function o(){return i.create(r).then(function(e){t.$rootScope.$emit("clearUndo");s&&s(e)})}var r={qInfo:{qType:"dimension"},qDim:{qGrouping:u.single,qFieldDefs:[]},qMetaDef:{title:"",description:"",tags:[]}};if(n){r.qMetaDef.title=n;r.qDim.qFieldDefs.push(n)}g(r,o)},edit:function e(n,s){i.get(n).then(function(e){e.getProperties().then(function(n){g(n,function(){var i=n.qDim.coloring;i.baseColor&&i.baseColor.color&&"none"===i.baseColor.color&&delete i.baseColor;return e.setProperties(n).then(function(e){t.$rootScope.$emit("clearUndo");s&&s(e)})})})})}}}return v}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(243)],s=function(t,e){var n;n=e.extend({init:function t(e){this.list=[];this.scrollApi=e},getRowCount:function t(){return this.scrollApi.items?this.scrollApi.items.length:0},getFirstElementIndex:function t(){return this.list.indexOf(this.scrollApi.items[0])},getLastElementIndex:function t(){return this.list.indexOf(this.scrollApi.items[this.scrollApi.items.length-1])},getItems:function t(e,n){return this.list.slice(Math.max(0,e),e+n)},setItems:function t(e,n){this.scrollApi.items=this.getItems(e,n)},setList:function t(e,n){this.list=e;this.scrollApi.setTotalRows(this.list.length);var i=this.getRowCount();var s=n&&i>0?this.getFirstElementIndex():0;if(this.scrollApi.virtualScrollEnabled){this.setItems(s,this.scrollApi.settings.viewportRowCount);this.scrollApi.setVirtualSize(n)}else if(n){i=Math.min(e.length-s,Math.max(this.getRowCount(),this.scrollApi.settings.blockSize));this.setItems(s,i);this.scrollApi.updateLoadingButtons()}else{this.setItems(s,this.scrollApi.settings.viewportRowCount+1);this.scrollApi.resetNativeScroll()()}},resize:function e(){this.scrollApi.updateViewport();var n=this.getRowCount();var i=n>0?this.getFirstElementIndex():0;0!==i&&i+this.scrollApi.settings.viewportRowCount>n&&(i=Math.max(0,n-this.scrollApi.settings.viewportRowCount));if(this.scrollApi.virtualScrollEnabled){this.setItems(i,this.scrollApi.settings.viewportRowCount);return this.scrollApi.setVirtualSize(true)}if(0===i&&n<this.scrollApi.settings.blockSize){this.setItems(i,this.scrollApi.settings.viewportRowCount+1);this.scrollApi.resetNativeScroll()();return t.resolve()}return t.resolve()},onVirtualScroll:function e(n,i){this.setItems(n,i);return t.resolve()},onInitialNativeScroll:function e(n,i){this.setItems(0,n+i);return t.resolve()},onGotoNextBlock:function e(n,i){var s=this.scrollApi.settings.keepItemsCount+this.scrollApi.settings.viewportRowCount;this.setItems(n-s,i+s);return t.resolve()},onGotoPreviousBlock:function e(n,i){var s=this.scrollApi.settings.keepItemsCount+this.scrollApi.settings.viewportRowCount;this.setItems(n,i+s);return t.resolve()}});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91)],s=function(t,e){t.service("qvCurrentSelectionsService",[function(){function t(t){return t.qStateCounts.qSelected+t.qStateCounts.qSelectedExcluded+t.qStateCounts.qLocked+t.qStateCounts.qLockedExcluded}function n(t){var n=t.states.length;return e.get("CurrentSelections.SelectionsInStates",n)}function i(n){var i=t(n),s=n.qTotal,o;o=s===i&&s>1?e.get("CurrentSelections.All"):i>1&&s>1?e.get("CurrentSelections.Of",[i,s]):n.qSelectedFieldSelectionInfo.map(function(t){return t.qName}).join(", ").toString();return o}return{translate:function t(e){return e.states?n(e):i(e)},translatedScreenReaderLabel:function i(s){var o;if(s.states)o=n(s);else{var r=t(s),a=s.qTotal,l=s.qField,c=s.qSelected;o=a===r&&a>1?e.get("CurrentSelections.AllSelections",[l]):r>1&&a>1?e.get("CurrentSelections.MultipleSelections",[l,r,a]):e.get("CurrentSelections.SingleSelection",[l,c])}return o}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[],s=function(){return{DEFAULT_STATE_TRANSLATION:"AlternateState.DefaultState",DEFAULT_STATE_NAME:"$"}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(97),n(99),n(854)],s=function(t,e,n){t.directive("qvPager",["$timeout",function(t){return{restrict:"A",priority:0,link:function i(s,o){n.treatAsDesktop()||o.css("overflow-x","auto");s.pagerData=o.find("ul").pager().data("qv-pager");o.addClass("qv-pager");s.nextPage=function(){t(function(){s.pagerData.goToNextPage();s.refreshPager(true)})};s.prevPage=function(){t(function(){s.pagerData.goToPreviousPage();s.refreshPager(true)})};s.goToPage=function(t){s.pagerData.goToPage(t);s.refreshPager(true)};s.refreshPager=function(t){var e="";t||s.pagerData.refresh();o.removeClass("qv-pager-back qv-pager-forward");if(1!==s.pagerData.currentPage){s.showShadow=true;e+="qv-pager-back "}else s.showShadow=false;s.pagerData.currentPage!==s.pagerData.maxPages&&(e+="qv-pager-forward ");o.addClass(e)};function r(){s.refreshPager()}s.$on("refreshPager",r);s.$on("$destroy",function(){e.off("end",r)})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(91),n(48),n(89),n(105),n(147),n(154),n(134),n(112),n(233),n(366)],s=function(t,e,n,i,s,o,r,a,l){n.service("qvCaoSearchService",["qvCaoSelectionService",function(n){var c;function u(){c=this;this.fieldList=[];this.queryString=[];this.queryTokens=[];this.caoSearchQueryHandlers=[]}u.prototype.createFieldList=function(){var t=[];return r.getList().then(function(t){return t.getLayout()}).then(function(e){t=t.concat(e);return c.getMasterItems()}).then(function(e){t=t.concat(e);c.fieldList=c.sortFields(t);return c.fieldList})};u.prototype.getFields=function(){return this.fieldList};u.prototype.getSelectedFields=function(t){return this.getFields().filter(function(t){return t.selected}).filter(function(e){var n=t.indexOf(e.qName);return n>-1})};u.prototype.syncFieldsInQueryWithFieldPicker=function(e){var n=this.getSelectedFields(e);this.fieldList=this.fieldList.map(function(e){var i=t.find(n,function(t){return t.caoFieldId===e.caoFieldId});e.selected=!!i;return e})};u.prototype.getMeasureMasterItems=function(){var t=this;return o.getList().then(function(e){return e.getLayout().then(function(e){t.measureMasterItems=e.map(function(t){return{qName:t.qData.title,classifications:["measure"],masterItem:true,libId:t.qInfo.qId,libIdLabel:t.qMeta.title}});return t.measureMasterItems})})};u.prototype.getDimensionMasterItems=function(){var t=this;return a.getList().then(function(e){return e.getLayout().then(function(e){t.dimensionMasterItems=e.map(function(t){return{qName:t.qData.title,classifications:["dimension"],masterItem:true,libId:t.qInfo.qId,libIdLabel:t.qMeta.title}});return t.dimensionMasterItems})})};u.prototype.getMasterItems=function(){var t=[];return i.all({measureItems:this.getMeasureMasterItems(),dimItems:this.getDimensionMasterItems()}).then(function(e){t=e.measureItems.concat(e.dimItems);return t})};u.prototype.sortFields=function(t){t=t.map(function(t){var n="cao_field_"+t.qName;n=n.split(" ").join("_");t.masterItem||(1===t.qSrcTables.length?t.tablesAssociated=t.qSrcTables[0]+" "+e.get("cao.search.field.table"):t.tablesAssociated=e.get("cao.search.field.table.title",t.qSrcTables.length));t.qSrcTables&&(t.tablesTooltip=t.qSrcTables.join(", "));t.name=t.qName;t.caoFieldId=t.masterItem?n+"masterItem_"+t.classifications[0]:n;t.highlight=false;t.classificationIcon=c.getFieldClassificationIcon(t);t.displayNameTokens=[{text:t.qName,matching:false}];if(t.classifications&&t.classifications.length>0){t.masterItemDimension="dimension"===t.classifications[0]&&t.masterItem;t.masterItemMeasures="measure"===t.classifications[0]&&t.masterItem}t.masterItem&&(t.masterItemTitle=t.masterItemDimension?e.get("cao.fieldPicker.masterItem.dimension"):e.get("cao.fieldPicker.masterItem.measure"));return t});return l.localeOrderBy(t,function(t){return t.qName})};u.prototype.getFieldClassificationIcon=function(e){var n;var i=t.find(e.qTags,function(t){return"$date"===t});var s=t.find(e.qTags,function(t){return"$geoname"===t});i?n="lui-icon--calendar":s&&(n="lui-icon--map");return n};u.prototype.indexesOfWordInString=function(t,e){t=t.toLowerCase();e=e.toLowerCase();var n=[];var i=t.indexOf(e);i>-1&&n.push(i);while(i>-1){i=t.indexOf(e,++i);i>-1&&n.push(i)}return n};u.prototype.getQueryTokensBasedOnQuotes=function(t){var e=[];if(t&&t.length>0){var n=t.split(" ");var i=0;var s=null;var o=null;var r=null;var a=false;n.forEach(function(l,u){s='"'===l.charAt(0);o='"'===l.charAt(l.length-1);u<n.length-1&&(r='"'===n[u+1].charAt(0));if(s){i=u;a=true;if(1===n.length&&s){l=l.substr(1);e.push(c.createToken(l,e,t,false));a=false}else if(u===n.length-1&&n.length>1){l=n.slice(i,u+1).join(" ").substr(1);e.push(c.createToken(l,e,t,false));a=false}if(a&&r&&!o){l=n.slice(i,u+1).join(" ").substr(1);e.push(c.createToken(l,e,t,false));a=false}}else if(a&&r&&!o){l=n.slice(i,u+1).join(" ").substr(1);e.push(c.createToken(l,e,t,false));a=false}else if(o){l=n.slice(i,u+1).join(" ");e.push(c.createToken(l,e,t,true));a=false}else if(a&&u===n.length-1){l=n.slice(i,u+1).join(" ").substr(1);e.push(c.createToken(l,e,t,false));a=false}else a||e.push(c.createToken(l,e,t,false))})}this.queryTokens=e;return this.queryTokens};u.prototype.createToken=function(t,e,n,i){var s;var o=t.length;if(e&&e.length>0){var r=e[e.length-1];s=n.indexOf(t,r.indexEnd)}else s=n.indexOf(t);""===t&&(o=1);return{word:i?t.substr(1).slice(0,-1):t,indexStart:""===t?s+1:s,indexEnd:s+o}};u.prototype.addStringToQueryAtIndex=function(t,e,n){var i="";if(e&&e.length>0){var s=e;var o=e.slice(0,n).trim();var r=s.slice(n).trim();i=o+t+r}return i};u.prototype.getCurrentToken=function(t,e){var n={index:null,token:null};var i=this.getQueryTokensBasedOnQuotes(t);i.some(function(t,i){if(e>=t.indexStart&&e<=t.indexEnd){n.index=i;n.token=t;return e>=t.indexStart&&e<=t.indexEnd}});return n};u.prototype.replaceTwoOrMoreSpacesWithOne=function(t){return t.replace(/\s\s+/g," ")};u.prototype.removeFieldFromQuery=function(t,e,n){var i=this.indexesOfWordInString(e,t.qName);if(i.length>1){n=n.filter(function(e){return e.caoFieldId!==t.caoFieldId}).map(function(t){t.indexStartOfFieldInQuery=e.indexOf(t.qName);t.indexEndOfFieldInQuery=e.indexOf(t.qName)+t.qName.length;return t});var s=-1;i.forEach(function(i){n.forEach(function(n){s=i!==n.indexStartOfFieldInQuery?i:e.indexOf(t.qName)})});if(-1===s)e=e.replace(t.qName,"");else{var o=e.split("");o.splice(s,t.qName.length);e=o.join("")}}else e=e.replace(t.qName,"");return e.replace(/^\s+/g,"")};u.prototype.addFieldToQuery=function(t,e,n,i,s){e=e||"";var o=t.qName.match(" ")||t.qName.match(String.fromCharCode(160));var r=o?'"'+t.qName+'"':t.qName;var a=this.getQueryTokensBasedOnQuotes(e);var l=0;var c=s-i>0;if(c){var u=e.split("");u.splice(i,s-i,r);e=u.join("");l=i+r.length+1}else if(""===e){e=r;l=n+r.length+1}else if(a.length>0&&t){var d=this.getCurrentToken(e,n);if(null!==d.index){a[d.index]={word:t.qName};e=a.map(function(t,e){if(e===d.index&&e<a.length-1&&a[e+1].word)return t.word.match(" ")?'"'+t.word+'" ':t.word+" ";return t.word.match(" ")?'"'+t.word+'"':t.word}).join(" ");l=d.token.indexStart+r.length+1}else{var p=" "+r;e=this.addStringToQueryAtIndex(p,e,n);l=n+r.length+1}}e=e.replace(/^\s+/g,"");return{query:e,cursorPosition:l}};u.prototype.searchResultPositionRelativeToQuery=function(t,e){var n=7.5;var i=.7;var s=0;if(t&&t.length>0){var o=t.slice(0,e).split("");var r=o.filter(function(t){return" "!==t});var a=o.filter(function(t){return" "===t});s+=r.length*n;s+=a.length*i}return s};u.prototype.registerForCaoSearchQuery=function(t){this.caoSearchQueryHandlers.push(t)};u.prototype.unRegisterFromCaoSearchQuery=function(){this.caoSearchQueryHandlers=[]};u.prototype.getMatchingFields=function(e,n){var i=[];var s=this.fieldList;var o;e?e=e?e.toLowerCase():"":e&&""!==e||(o=true);i=s.filter(function(t){var i=t.qName.toLowerCase();if(o||i.indexOf(e)>-1)return!n||n&&t.masterItem;return false});i=t.uniq(i).filter(function(t){return l.librarySearchFn(t,e)});return l.localeOrderBy(i,function(t){return t.qName})};u.prototype.clearSelectedFields=function(){this.fieldList.forEach(function(t){t.selected=false});n.clearSelection()};u.prototype.selectField=function(t,e){this.fieldList=this.fieldList.map(function(n){n.caoFieldId===t.caoFieldId&&(n.selected=e);return n})};u.prototype.updateInsights=function(t){this.caoSearchQueryHandlers.forEach(function(e){e&&e({query:t,fields:c.getFields().filter(function(t){return t.selected})})});n.clearSelection()};u.prototype.showIntro=function(t){this.caoSearchQueryHandlers.forEach(function(e){e&&e({showIntro:t})})};u.prototype.matchingField=function(t,e,n){var i=e>0&&e<=n.length-1;var o=e>=-1&&e<n.length-1;switch(t){case s.KeyCodes.Up:i&&e--;break;case s.KeyCodes.Down:o&&e++;break;case s.KeyCodes.Tab:break}return n[e]};return new u}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(907)],s=function(t,e){t.directive("qvProgressBar",["$interval",function(t){return{replace:true,template:e,restrict:"E",scope:{percentDone:"=",onCompleted:"&",options:"="},link:function e(n){var i,s=true;n.display="0%";n.showPercent=0;function o(){if(n.showPercent>=100){t.cancel(i);n.onCompleted();return}if(n.showPercent>=n.percentDone){t.cancel(i);return}r(n.showPercent+1)}n.$watch("percentDone",function(e){if(void 0!==e)if(s){r(e);s=false}else{t.cancel(i);i=t(o,10)}});function r(t){n.showPercent=t;n.display=t+"%"}n.$on("$destroy",function(){t.cancel(i)})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(968)],s=function(t,e){var n={bindings:{currentSelectionDisabled:"<"},template:e};t.directive("qvCurrentSelectionsItem",function(){return n});return n}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(117),n(170),n(89),n(110)],s=function(t,e,n,i,s){var o;var r;var a;var l=61;function c(n){if(o)return i.resolve(o);var a=new i;var l=200;var c=30;var u=t(".table-container").width()-l;var d=t(".table-container").height()-c+t("#datamodelviewer_footer").height();var p={qcx:u,qcy:d};var h={qcx:0,qcy:0};var f=30;var g=n;var v=false;e.currentApp.getTablesAndKeys(p,h,f,g,v).then(function(t){o=t;r=t;return a.resolve(t)},function(t){t.code===s.LOCERR_RELOAD_IN_PROGRESS&&(t.isHandled=true);return a.resolve(r)});return a.promise}function u(t){if(a){t(a);return}e.currentApp.getLooselyCoupledVector().then(function(e){a=e;t(e)})}function d(t,i){if(!i)throw new Error("Table name is empty.");var s=-1;var o=l;var r=t;var a=n.decodeTableName(i);return e.currentApp.getTableData(s,o,r,a)}function p(){return e.currentApp.getViewDlgSaveInfo()}function h(t){return e.currentApp.setViewDlgSaveInfo(t)}function f(){o=void 0;a=void 0}function g(t,n){return e.currentApp.assignDerivedFieldFor(t,n)}function v(){return e.currentApp.getAppLayout().then(function(t){return!!t.qLayout.qHasData})}return{getTablesAndKeys:c,getLooselyCoupledVector:u,getTableData:d,getTablePositions:p,setTablePositions:h,clearAllCaches:f,setDerivedField:g,hasAppGotData:v}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(89),n(48),n(397),n(10)],s=function(t,e,n,i){var s=window.angular,o={"max-height":"90%","max-width":"90%","min-height":"180px",width:"400px"},r,a=false,l=false;n.directive("qvDelayedDialogButton",function(){return{replace:true,restrict:"A",link:function t(e){e.button&&e.button.defaultEscButton&&(r=e);e.closeModal=function(t,n){if(t){t.preventDefault();t.stopPropagation()}e.button&&e.button.callback&&("undefined"===typeof e.button.expression||e.button.expression)&&e.button.callback();(n||e.autoClose||e.button&&!e.button.callback)&&e.destroyModal();return}}}});n.service("$delayedModal",["$compile","$rootScope","$document",function(n,c,u){var d={},p,h,f,g,v=i,m;var b={open:function t(i){var b=new e,y;if(p){h=p;g=f}p=c.$new();f=s.element('<div class="qv-modal-container qui-modalbackground-centered" qva-outside-ignore-for="allOutside" ng-style="containerStyle" ng-class="classes"></div>');p.containerStyle={content:" "};p.classes={};p.modalStyle={};var x;for(x in o)p.modalStyle[x]=o[x];p.wasDisabled=[];p.showDefaultButton=true;a=true;l=false;d=i;p.failed=false;p.autoClose=true;for(x in d)p[x]=d[x];f.html(v).appendTo(u.find("body"));p.html&&f.find("main").append(p.html);y=p.$watch("element",function(){b.resolve();y()});m=n(f)(p);p.destroyModal=this.close.bind(this);p.handleEscButton=function(t){if(t){t.preventDefault();t.stopPropagation()}p.buttons&&r?r&&r.closeModal():p.destroyModal()};p.$broadcast("delayed-modal-opened");p.$watchCollection("[width, height]",function(){p.width&&(p.modalStyle.width=p.width);p.height&&(p.modalStyle.height=p.height)});return b.promise},update:function t(e){if(!a)return;for(var i in e){p[i]=e[i];d[i]=e[i]}if(e.html||e.buttons){f.html(v);f.find("main").html(e.html);u.find("body").find(".qui-delayedModal").replaceWith(f.html());m=n(f)(p)}},close:function t(){if(p&&f){p.$broadcast("delayed-modal-closed");f.remove();p.$destroy();p=h||null;f=g||null;g=null;h=null}a=false;l=false},lock:function e(){l=true;p.wasDisabled.length=0;m.find("button, input, textarea, select").each(function(){var e=t(this);e.prop("disabled")?p.wasDisabled.push(this):e.prop("disabled",true)})},unlock:function e(){l=false;m.find("button, input, textarea, select").each(function(){-1===p.wasDisabled.indexOf(this)&&t(this).prop("disabled",false)});p.wasDisabled.length=0}};Object.defineProperty(b,"isOpened",{get:function t(){return a}});Object.defineProperty(b,"isLocked",{get:function t(){return l}});Object.defineProperty(b,"scope",{get:function t(){return p}});return b}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){function e(e,n){n=n?n+".":"";return t.getValue(e,n+"qHyperCube.qDimensionInfo.length")>1}function n(e,n){n=n?n+".":"";return t.getValue(e,n+"qHyperCube.qMeasureInfo.length")>1}function i(t,n){if(!e(t,n))return 1;return o(t,n)}function s(e,n){n=n?n+".":"";return t.getValue(e,n+"qHyperCube.qSize.qcy")}function o(e,n){n=n?n+".":"";if(t.getValue(e,n+"qHyperCube.qStackedDataPages.0.qData.length"))return t.getValue(e,n+"qHyperCube.qStackedDataPages.0.qData.0.qSubNodes.length",0)+t.getValue(e,n+"qHyperCube.qStackedDataPages.0.qData.0.qDown",0)+t.getValue(e,n+"qHyperCube.qStackedDataPages.0.qData.0.qUp",0);var i=t.getValue(e,n+"qHyperCube.qEffectiveInterColumnSortOrder.0");var s=t.getValue(e,n+"qHyperCube.qDimensionInfo."+i);return l(s)}function r(t,n){if(!e(t,n))return s(t,n);return o(t,n)}function a(e,n){if(!e)return null;e=n?t.getValue(e,n):e;return e&&e.qHyperCube?e.qHyperCube:null}function l(t){return t.qCardinalities.qHypercubeCardinal}return{getHyperCube:a,hasSecondDimension:e,hasSecondMeasure:n,getStackedCubeSizeOf2Dims:o,getStackedCubeSizeOfMax2Dims:r,getOuterDimensionSizeOfMax2Dims:i,getDimensionSize:l}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(115)],s=function(t){return{getChartType:e,getExtensionType:n,getInitialProperties:i};function e(e){return t.getType(e)}function n(t){return e(t).getExtensionType()}function i(t){return e(t).getInitialProperties()}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(94),n(158),n(334),n(239),n(848),n(849),n(341),n(335),n(427),n(320),n(360),n(361),n(245),n(306),n(508),n(428)],s=function(t,e,n,i,s,o,r,a){var l=e.inClient(),c,u;var d=new a;d.scope="root";if(!l){t.setState(t.States.analysis);t.setView(t.Views.sheet)}if(p()){document.body.classList.add("absolute-position-mashup");document.documentElement.classList.add("absolute-position-mashup")}c=new s(l);u=new r;o.init();function p(){var t=Array.prototype.slice.call(document.querySelectorAll("body > .qvobject, body > .qvplaceholder"));if(0===t.length)return false;return!t.some(function(t){return"absolute"!==t.style.position})}function h(t,e){i.setErrorCallback(t,e);n.setErrorCallback(t,e)}function f(t,e){d.register({scope:"root",name:t,callback:e})}function g(t){d.clear(t)}var v={openApp:i.openApp.bind({_qEvent:d}),currApp:i.currApp,getGlobal:n.get.bind({_qEvent:d}),setOnError:h,on:f,off:g,setLanguage:e.setLanguage,setDeviceType:e.setDeviceType,table:i.table,getAppList:n.getAppList,resize:e.resize,getExtensionList:e.getExtensionList,callRepository:e.callRepository,registerExtension:e.registerExtension,navigation:c,sessionApp:i.sessionApp,sessionAppFromApp:i.sessionAppFromApp,getThemeList:r.getThemeList,theme:u};Object.defineProperty(v,"Promise",{get:function t(){return e.Promise}});return v}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i;!(i=function(){var t={};function e(e){var n=t[e];if(!n){n=[];t[e]=n}return n}function n(t,n){if(!t)throw new Error("Key is not defined.");if("string"!==typeof t)throw new Error("Key has to a String.");if(!n)throw new Error("No observer was defined.");if("function"!==typeof n)throw new Error("Observer is not a function.");var i=e(t);i.push(n)}function i(t,n,i){if(!t)throw new Error("Key is not defined.");if("string"!==typeof t)throw new Error("Key has to a String.");var s=e(t);s.forEach(function(t){t(n,i)})}function s(t,n){if(!t)throw new Error("Key is not defined.");if(!n)throw new Error("Observer is not defined.");var i=e(t);var s=i.indexOf(n);if(-1===s)throw new Error('Unknown observer for the key "'+t+'".');i.splice(s,1)}return{addObserver:n,notifyAll:i,removeObserver:s}}.call(e,n,e,t),void 0!==i&&(t.exports=i))},,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(94),n(131),n(673)],s=function(t,e,n,i,s){t.service("qvSheetService",function(){var o;var r=t.getService("$cacheFactory"),a=r("pp-sheet");return{set:function t(e){o=e},get:function t(){return o},destroy:function t(){o=null},setSheetAsSelectedObj:function t(){var o=n.model;var r={id:o.id,type:"sheetCell",canCopy:function t(){return false},canCut:function t(){return false},canRemove:function t(){return false},remove:function t(){return},paste:function t(){e.publish("/activeSheet/pasteObject",null)},getAllPropertyPanelContent:function t(){return o.getProperties().then(function(t){return o.getLayout().then(function(e){var n={properties:t,layout:e,definition:s,type:"sheet",model:o,iconName:"sheet",titleRef:"qMeta.title",cache:a};return n})})}};return i.setSelectedObject(r)}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(198)],s=function(t){var e;e=t.extend("Listbox",{init:function t(e){this._super(e,"/qListObjectDef",{width:1});this.cacheCube.setMethodName("getListObjectData")},select:function t(e,n,i){return this.model.selectListObjectValues(this.path,n,i)},selectAll:function t(){return this.model.selectListObjectAll(this.path)},selectPossible:function t(){return this.model.selectListObjectPossible(this.path)},selectAlternative:function t(){return this.model.selectListObjectAlternative(this.path)},selectExcluded:function t(){return this.model.selectListObjectExcluded(this.path)},search:function t(e){return this.model.searchListObjectFor(this.path,e)},abortSearch:function t(){return this.model.abortListObjectSearch(this.path)},confirmSearch:function t(e){return this.model.acceptListObjectSearch(this.path,e)},updateCache:function t(e){this.cacheCube.set(e.qListObject.qDataPages);this.cacheCube.setCubeSize(e.qListObject.qSize)},setInitialData:function t(e){this.cacheCube.set(e.qListObject.qDataPages)},getData:function t(e){return this.cacheCube.getData(e)},getDataPage:function t(e){return this.getData([e]).then(function(t){return t[0]})},getSize:function t(){return this.model.layout.qListObject.qSize},lock:function t(){return this.model.lock(this.path)},unlock:function t(){return this.model.unlock(this.path)},isLocked:function t(){return!(!this.model.layout||!this.model.layout.qListObject)&&!!this.model.layout.qListObject.qDimensionInfo.qLocked},isDrillDown:function t(){return!(!this.model.layout||!this.model.layout.qListObject)&&"H"===this.model.layout.qListObject.qDimensionInfo.qGrouping},getDimensionInfos:function t(){if(this.model.layout&&this.model.layout.qListObject)return[this.model.layout.qListObject.qDimensionInfo];return[]}});return e}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(90),n(89),n(141),n(283),n(364),n(50),n(365),n(245)],s=function(t,e,n,i,s,o,r,a){t.service("qvListboxPopoverService",["luiPopover",function(t){var l;var c;var u={showDelayed:function i(u,d,p,h){var f=n();if(l){c.selectionsActivated=function(){};c.selectionsDeactivated=function(){};l.close()}c={getVisualization:function t(){return f.promise},onPopoverClose:this.onPopoverClose,options:{setController:f.resolve,isPopover:true,showLock:d.showLock,search:d.search||{},smallDevice:r.isSmallDevice,direction:d.direction},selectionToolbarComponent:s,onClose:o};l=t.show({template:a,controller:o.controller,alignTo:d.$alignToElement[0],input:c,closeOnResize:false,dock:"top"});u.then(function(t){c.model=t}).catch(function(t){false});c.selectionsActivated=function(){e.isFunction(h)&&h()};c.selectionsDeactivated=function(){e.isFunction(p)&&p();p=null;h=null};return l},show:function t(e,i,s,o){return this.showDelayed(n.when(e),i,s,o)},showField:function t(e,s,o,r,a,l){return i.createTransientField(s,e,r).then(function(t){return n.resolve(this.show(t,o,a,l))}.bind(this)).catch(function(t){false})},showDimension:function t(e,n,s,o,r,a){i.createTransientDimension(n,e,o).then(function(t){this.show(t,s,r,a)}.bind(this)).catch(function(t){false})},close:function t(){l&&l.close();l=null},onPopoverClose:function t(){},getPopover:function t(){return l},onClosing:function t(){}};return u}])}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,function(t,e){t.exports='<div class="qv-block-ui" ng-class="{\'qv-fade-out\': fadeOut}">\n\t<div class="qv-loader-container" ng-class="ngClasses">\n\t\t<div class="qv-loader"></div>\n\t</div>\n\t<div class="qv-loader-text" ng-if="messageObj" ng-class="ngClasses">\n\t\t<div ng-show="messageObj.task" q-translation="{{messageObj.task}}"></div>\n\t\t<div ng-show="messageObj.message" q-translation="{{messageObj.message}}"></div>\n\t</div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(97),n(719),n(348),n(297)],s=function(t,e,n,i,s){var o,r,a=s.popupComponent,l={name:"default",colors:["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"]};function c(t,e){if(void 0!==t){if(void 0!==t.index&&-1!==t.index&&e[t.index])return e[t.index];if(void 0!==t.color)return t.color?t.color:"none";return t||"none"}}function u(t,e){if("none"===e){t.addClass("transparent");t.css("background-color","transparent")}else{t.css("background-color",e);t.removeClass("transparent")}}function d(){return"inverse"}function p(n,i,s,d,p,h){if(r&&r.element===i){o&&o.close();o=null;r=null;return}r={model:p,element:i,previewBox:d,scope:n};var f=n.palettes;var g=n.palette||l;var v=false!==n.$eval(s.extended);var m=e.getService("luiPopover");var b=n.$eval(s.recentColorsFlag)||false;var y=n.$eval(s.dock)||"top";var x;function q(t,e){e.$setViewValue(t);n.onChange&&n.onChange();if(d){var i="undefined"!==typeof g.colors?c(e.$viewValue,g.colors):c(e.$viewValue,g);u(d,i)}}var S;var w;var C=e.getService("$timeout");var I=e.getService("qvGlyphService"),_=I.getDefaultGlyphs();_.forEach(function(t){t.cssClass=I.getIconClass(t.icon)});o=m.show({template:a.template,controller:a.controller,input:{$palettes:f,$palette:g,$glyphPalette:_,$useGlyph:n.$eval(s.useGlyph)||false,$disableNone:n.$eval(s.disableNone)||false,$defaultColor:"undefined"!==typeof g.colors?c(p.$viewValue,g.colors):c(p.$viewValue,g),$inputViewValue:p.$viewValue,$extended:v,$recentColorsFlag:b,onColorChange:function t(e,n,i,s,o){w=e?{color:i,index:n,icon:o,cssClass:I.getIconClass(o)}:{color:i,index:n,palette:s,icon:o,cssClass:I.getIconClass(o)};q(w,p)}},alignTo:i[0],variant:h,closeOnEscape:true,closeOnOutside:true,outsideIgnore:"colorpicker-tooltip",dock:y,autoFocus:false});o.closing.then(function(e){n.onClose&&n.onClose(e);var s;if(e){x=e;s=t(e.target).closest(i[0]).length>0}if(S){C.cancel(S);q(w,p);S=null}s||(r=null)});o.closed.then(function(){x&&x.target.classList.contains("color-scale-container")&&(r=null)});n.onOpen&&n.onOpen(o)}e.directive("qvColorPickerCustomNew",function(){return{require:"?ngModel",scope:{onClose:"=",onOpen:"=",onChange:"=",callback:"=",palette:"=",palettes:"="},link:function t(e,i,s,a){e.callback&&(e.callback.close=function(){o&&o.close()});e.$parent&&(e.$parent.onClick=function(){var t=d();p(e,i,s,null,a,t)});function l(){o&&o.close()}n.on("start",l);e.$on("$destroy",function(){o&&r&&r.element===i&&o.close();n.off("start",l)})}}});e.directive("qvColorPickerButtonNew",function(){return{require:"?ngModel",replace:true,scope:{onClose:"=",onOpen:"=",onChange:"=",callback:"=",palette:"=",palettes:"="},template:i,link:function t(e,i,s,a){var h=e.palette||l,f="undefined"!==typeof h.colors?c(a.$viewValue,h.colors):c(a.$viewValue,h),g=i.find(".qv-color-picker-preview");e.onClick=function(){var t=d();p(e,i,s,g,a,t)};e.callback&&(e.callback.close=function(){o&&o.close()});function v(){o&&o.close()}e.variantClass=s.variant?"lui-button--"+s.variant:"";n.on("start",v);e.$watch("palette",function(){h=e.palette||l;a.$render()});a.$render=function(){if(void 0===a.$viewValue)return;f="undefined"!==typeof h.colors?c(a.$viewValue,h.colors):c(a.$viewValue,h);u(g,f)};e.$on("$destroy",function(){o&&r&&r.element===i&&o.close();n.off("start",v)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.service("qvGlyphService",[function(){var t=["","m","ï","R","S","T","U","P","Q","è","¢","©"],e=[{key:"m",value:"lui-icon--tick"},{key:"ï",value:"lui-icon--star"},{key:"R",value:"lui-icon--triangle-top"},{key:"S",value:"lui-icon--triangle-bottom"},{key:"T",value:"lui-icon--triangle-left"},{key:"U",value:"lui-icon--triangle-right"},{key:"P",value:"lui-icon--plus"},{key:"Q",value:"lui-icon--minus"},{key:"è",value:"lui-icon--warning-triangle"},{key:"¢",value:"lui-icon--hand"},{key:"©",value:"lui-icon--flag"}],n=e.length;var i={getIconClass:function t(i){var s,o=null;if(void 0!==i&&null!==i)if(0===i.length)o="";else for(s=0;s<n;s++)if(e[s].key===i){o=e[s].value;break}return o},getDefaultGlyphs:function e(){return t.map(function(t){return{icon:t}})}};return i}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(97),n(725),n(726)],s=function(t,e,n,i,s){var o,r,a=s.popupComponent,l=["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"],c=[{icon:""},{icon:"m"},{icon:"ï"},{icon:"R"},{icon:"S"},{icon:"T"},{icon:"U"},{icon:"P"},{icon:"Q"},{icon:"è"},{icon:"¢"},{icon:"©"}];function u(t,e){if(e[t])return e[t];return t||"none"}function d(t,e){if("none"===e){t.addClass("transparent");t.css("background-color","transparent")}else{t.css("background-color",e);t.removeClass("transparent")}}function p(){return"inverse"}function h(n,i,s,p,h,f){if(r&&r.element===i){o&&o.close();o=null;r=null;return}r={model:h,element:i,previewBox:p,scope:n};var g=n.$eval(s.palette)||l;var v=n.$eval(s.extended)||false;var m=e.getService("luiPopover");var b=n.$eval(s.actualColor)||false;var y=n.$eval(s.dock)||"top";var x;function q(t,e,i){i.$setViewValue(t);n.onChange&&n.onChange();p&&d(p,e)}var S;var w;var C;var I=e.getService("$timeout");o=m.show({template:a.template,controller:a.controller,input:{$palette:g,$glyphPalette:c,$useGlyph:n.$eval(s.useGlyph)||false,$disableNone:n.$eval(s.disableNone)||false,$defaultColor:u(h.$viewValue,g),$inputViewValue:h.$viewValue,$extended:v,onColorChange:function t(e,n,i,s){S&&I.cancel(S);w=e?{color:b?i:n,icon:s}:b?i:n;C=i;S=I(function(){q(w,C,h);S=null},300)}},alignTo:i[0],variant:f,closeOnEscape:true,closeOnOutside:true,outsideIgnore:"colorpicker-tooltip",dock:y,autoFocus:false});o.closing.then(function(e){n.onClose&&n.onClose(e);var s;if(e){x=e;s=t(e.target).closest(i[0]).length>0}if(S){I.cancel(S);q(w,C,h);S=null}s||(r=null)});o.closed.then(function(){x&&x.target.classList.contains("color-scale-container")&&(r=null)});n.onOpen&&n.onOpen(o)}e.directive("qvColorPickerCustom",function(){return{require:"?ngModel",scope:{onClose:"=",onOpen:"=",onChange:"=",callback:"="},link:function t(e,i,s,a){e.callback&&(e.callback.close=function(){o&&o.close()});e.$parent&&(e.$parent.onClick=function(){var t=p();h(e,i,s,null,a,t)});function l(){o&&o.close()}n.on("start",l);e.$on("$destroy",function(){o&&r&&r.element===i&&o.close();n.off("start",l)})}}});e.directive("qvColorPickerButton",function(){return{require:"?ngModel",replace:true,scope:{onClose:"=",onOpen:"=",onChange:"=",callback:"="},template:i,link:function t(e,i,s,a){var c=e.$eval(s.palette)||l,f=u(a.$viewValue,c),g=i.find(".qv-color-picker-preview");e.onClick=function(){var t=p();h(e,i,s,g,a,t)};e.callback&&(e.callback.close=function(){o&&o.close()});function v(){o&&o.close()}e.variantClass=s.variant?"lui-button--"+s.variant:"";n.on("start",v);a.$render=function(){if(void 0===a.$viewValue)return;f=u(a.$viewValue,c);d(g,f)};e.$on("$destroy",function(){o&&r&&r.element===i&&o.close();n.off("start",v)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(91),n(49)],s=function(t,e){var n=function t(){return e.getFlag("AOSHARE")};var i={alphabetical:0,publishedDate:1};function s(t,e){return t.qData.rank-e.qData.rank}function o(t,e,n){e.aoItems.init(e.AppOverviewState);if(t.is.sheet){t.translations.navigatorHeader="Common.Sheets";n(t,"sheet")&&e.aoItems.initSheet(t,e.commonFunctions.sortArrayByRank)}else if(t.is.story){t.translations.navigatorHeader="Common.Stories";n(t,"story")&&e.aoItems.initStories(t,e.commonFunctions.sortArrayByRank)}else t.is.bookmark&&(t.translations.navigatorHeader="Common.Bookmarks")}function r(t,e){var n=false;"sheet"===e?n=!t.approvedSheets.length&&!t.privateSheets.length:"story"===e&&(n=!t.approvedStories.length&&!t.privateStories.length);return n}function a(e){var i=n();var s={sheets:i?"AppOverview.Content.PublicSheets":"AppOverview.Content.ApprovedSheets",stories:i?"AppOverview.Content.PublicStories":"AppOverview.Content.ApprovedStories"};e.translations.addNew=e.is.sheet?"AppOverview.Toolbar.CreateNewSheet":"AppOverview.Toolbar.CreateNewStory";e.translations.navigatorHeader=e.is.sheet?"Common.Sheets":"Common.Stories";e.translations.approvedHeader=t.get(e.is.sheet?s.sheets:s.stories);e.translations.myWorkHeader=t.get(e.is.sheet?"AppOverview.Content.MySheets":"AppOverview.Content.MyStories");e.translations.myPublishedHeader=t.get(e.is.sheet?"AppOverview.Content.MyPublishedSheets":"AppOverview.Content.MyPublishedStories");e.translations.communityHeader=t.get(e.is.sheet?"AppOverview.Content.CommunitySheets":"AppOverview.Content.CommunityStories");e.translations.sharingHelp=t.get(e.is.sheet?"AppOverview.SharingSheet.Help":"AppOverview.SharingStory.Help");e.translations.sharingHelpDesc=t.get(e.is.sheet?"AppOverview.SharingSheet.Help.Description":"AppOverview.SharingStory.Help.Description");e.translations.numberOfItems=function(n){return t.get(e.is.sheet?"Accessibility.SheetSection.NumberOfSheets":"Accessibility.StorySection.NumberOfStories",n)}}function l(t,e){t.shownav=true;t.navigationmode=e.navigationMode;t.hasData=true;t.addingItem=false;t.is={};t.exp={};t.features={sharing:function t(){return n()}};t.funcs={};t.translations={};t.is.smallAppView=false;t.is.appReadOnly=false;t.is.grid=e.viewMode===e.ViewMode.grid;t.is.navigator=false;t.is.smalldevice=false;t.is.sheet="sheet"===e.navigationMode;t.is.story="story"===e.navigationMode;t.is.bookmark="bookmark"===e.navigationMode;a(t);t.exp.readonly=false;t.exp.sections=[];t.exp.isAscending=true;t.exp.hasBookmarks=false;t.exp.canCreateBookmark=false;t.exp.isOpenedByClick=true;t.approvedSheets=[];t.privateSheets=[];t.myPublishedSheets=[];t.communitySheets=[];t.approvedStories=[];t.privateStories=[];t.myPublishedStories=[];t.communityStories=[]}function c(t,e,n){e.AppOverviewState.setAddingItem(false);e.AppOverviewState.setDuplicatingItem(false);t.is.sheet=n===e.AppOverviewState.NavigationMode.sheet;t.is.story=n===e.AppOverviewState.NavigationMode.story;t.is.bookmark=n===e.AppOverviewState.NavigationMode.bookmark;a(t)}function u(e,n){var i=e.sort(function e(n,i){n=n.qData.labelExpression||n.qData.title;i=i.qData.labelExpression||i.qData.title;return n.localeCompare(i,t.language)});if(n)return i.reverse();return i}function d(e,n,i){var s=e.sort(function e(i,s){if(n){i=i.qMeta[n];s=s.qMeta[n]}return i.localeCompare(s,t.language)});if(i)return s.reverse();return s}function p(t,e,n){var i=t.sort(function t(n,i){if(e){var s=new Date(n.qMeta[e]),o=new Date(i.qMeta[e]);return s<o?1:s>o?-1:0}});if(n)return i.reverse();return i}function h(t,e){var n=new Date(t.qMeta.publishTime);var i=new Date(e.qMeta.publishTime);return n<i?1:n>i?-1:0}function f(t,e){return t.qData.rank-e.qData.rank}function g(e){return function(n,i){if(0===e){n=n.qData.labelExpression||n.qData.title;i=i.qData.labelExpression||i.qData.title;return n.localeCompare(i,t.language)}return h(n,i)}}function v(t){var e=void 0===t?{}:t;var n=e.userId?e.userId:null;var i=e.userDirectory?e.userDirectory:null;return{userId:n,userDirectory:i}}function m(t,e){var n=e.hasOwnProperty("userId")&&e.hasOwnProperty("userDirectory");return n&&e.userId===t.userId&&e.userDirectory===t.userDirectory}function b(t){return!n()&&t.qMeta.published&&!t.qMeta.approved}function y(t){return!t.qMeta.published}function x(t){return t.qMeta.published&&(t.qMeta.approved||n())}function q(t){return function(e){var n=v(e.qMeta.owner);return b(e)&&m(t,n)}}function S(t){return function(e){var n=v(e.qMeta.owner);return b(e)&&!m(t,n)}}return{sortArrayByRank:s,setNewAppOverViewMode:o,hasToGet:r,setDefaultScopeVar:l,setNewScopeValOnNavigationChange:c,SortFilterOptions:i,sortAlphabetically:d,sortSheetsAlphabetically:u,sortByPublishedDate:p,sortPublishedTime:h,sortByRank:f,sortCommunity:g,filterPrivate:y,filterApproved:x,filterMyPublishedCommunity:q,filterCommunity:S}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48)],s=function(t,e){e.directive("qvaApplyStyle",function(){return{restrict:"A",link:function e(n,i,s){n.$watch(s.qvaApplyStyle,function e(n){"string"===t.type(n)&&i.attr("style",n)},false)}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};Object.defineProperties(t,{ENTER_BEFORE:{value:0},ENTER_AFTER:{value:1},ENTER_SWAP:{value:2},TYPEFLAG_PLACEHOLDER:{value:16},TYPEFLAG_LOCKED:{value:32}});return t}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(10),n(48),n(96),n(850),n(851),n(132),n(106),n(97),n(50),n(94),n(202),n(90),n(114),n(113),n(852),n(853),n(363),n(273),n(142),n(95),n(105),n(89),n(167),n(103),n(290),n(274),n(175),n(855),n(257),n(212),n(392),n(240),n(271),n(289),n(276),n(965),n(277)],s=function(t,e,n,i,s,r,a,l,c,u,d,p,h,f,g,v,m,b,y,x,q,S,w,C){var I=b.DEFAULT_STATE_TRANSLATION;var _=b.DEFAULT_STATE_NAME;e.directive("qvSelectionPager",["qvGlobalSelectionsService","$timeout",function(t,n){var i=e.getService("$templateCache");i.put("current-selections-tooltip-template.ng.html",s);return{restrict:"A",priority:1,link:function e(i){var s=i.$watch(function(){return t.isSelectActive(i.app)},function(t){i.$emit("globalSelectionActive",t);n(function(){i.refreshPager(false)})});function o(){i.refreshPager(false)}l.on("end",o);i.$on("$destroy",function(){s();l.off("end",o)})}}}]);var D={template:i,replace:true,restrict:"E",scope:{app:"=",options:"=",expandSmartSearchSuggestedChart:"=?"},link:function t(n,i){var s=e.getService("$timeout"),o=e.getService("qvGlobalSelectionsService"),l=e.getService("qvExploreSelectionsService"),p=e.getService("qvGlobalSearchService"),h=e.getService("qvCaoService"),b=i.parent(),y,S,w;var D=new v(n,c,o,l,p,h);w=new g(n);n.isCaoActive=d.isInInsightMode();n.isExploreSelectionsActive=false;n.nbrSelection=0;n.haveHiddenSelections=false;n.isSmallDevice=c.isSmallDevice;n.cachedPlaceHolders=[];n.isGlobalSearchIndexing=false;n.progressBarOptions={hideText:true};n.setSearchIndexingDone=function(){n.isGlobalSearchIndexing=false};function k(t,e){if(t!==(n.app.enigmaModel.id||"").toUpperCase())return;var i=new Number(e);if(!n.isGlobalSearchIndexing&&i<100){n.indexPercentDone=i;n.isGlobalSearchIndexing=true;E(500)}else if(n.isGlobalSearchIndexing){n.indexPercentDone=i;i<100&&E(500)}else T()}function T(){s.cancel(S);if(y){p.IndexProgressUpdate.unbind(k);y=false}}function E(t){if(!y){p.IndexProgressUpdate.bind(k);y=true}s.cancel(S);S=s(function(){p.requestIndexProgressUpdate(n.app.enigmaModel)},t||0)}function A(){s(function(){n.isSmallDevice=c.isSmallDevice;if(f["SMARTSEARCH_INDEX_CLOSE"])if(n.isSmallDevice){T();n.setSearchIndexingDone()}else!p.isSearchOpen(n.app.enigmaModel)&&p.couldEngineBeIndexing(n.app.enigmaModel)&&E(0);n.isSmallDevice&&n.isCaoActive&&(n.isCaoActive=false)})}function L(){if(!w)return;u.isInAnalysisMode()?w.on():w.off()}function M(){u.inSheetView()&&c.isSmallDevice&&p.openGlobalSearch(n.app.enigmaModel,b);L();var t=d.isInInsightMode();t?t&&!n.isCaoActive&&(n.isCaoActive=true):n.isCaoActive=false}L();c.ViewChanged.bind(A);n.$watch("isSmallDevice",function(t){true!==t||u.inObjectView()?p.closeGlobalSearchIfNoQuery(n.app.enigmaModel):p.openGlobalSearch(n.app.enigmaModel,b)});u.StateChanged.bind(M);n.mobileIndicatorTop=false;n.mobileIndicatorShow=false;o.setCsShowCallback(function(t){n.mobileIndicatorShow=t});o.onClose(function(){document.activeElement!==i.find('[tid="toggleCaoButton"]')[0]&&document.activeElement!==i.find('[tid="currentSelections.toggleExploreSelection"]')[0]&&i.find('[tid="currentSelections.toggleGlobalSelections"]').focus()});n.$on("globalSelectionActive",function(t,e){n.isGlobalSelectionsActive=e});n.$on("exploreSelectionActive",function(t,e){n.isExploreSelectionsActive=e});function P(t){r.get(t).then(function(t){n.model=t;a(n,"app",$)}).catch(function(t){false});n.$watch(t.isInModalSelection.bind(t),function(t){n.inSelection=t;if(n.inSelection&&n.activeFieldName&&n.activeFieldName.length>0)n.cachedPlaceHolders=n.items.map(function(t){return m.createPlaceHolder({},t.qField,t.qReadableName||t.qField)});else{n.cachedPlaceHolders=[];n.items=n.items.filter(function(t){return!t.isPlaceHolder})}});n.app=t;a(n,"app",$)}var O=[];var F;function $(t){var e=false;var i;if(O.length!==t.qStateNames.length||!O.every(function(e,n){return e===t.qStateNames[n]})){i=[I].concat(t.qStateNames);e=true;O=t.qStateNames.concat()}if(n.model&&(!F||e)){i=[_].concat(t.qStateNames);n.model.getProperties().then(function(t){t.selectionsInStates=i.map(function(t){return{stateName:t,qSelectionObjectDef:{qStateName:t}}});n.model.setProperties(t)})}F=n.model}var N=n.$watch("app",function(t){P(t.enigmaModel);N()});n.$watch(function(){return p.isSearchOpen(n.app.enigmaModel)},function(t){n.isGlobalSearchActive=t;if(f["SMARTSEARCH_INDEX_CLOSE"])if(n.isSmallDevice||t){T();n.isGlobalSearchIndexing=false}else if(p.couldEngineBeIndexing(n.app.enigmaModel)){var e=p.getLastKnownIndexProgress(n.app.enigmaModel);n.isGlobalSearchIndexing=true;n.indexPercentDone=e;E(500)}});n.toggleGlobalSelection=function(t){t.preventDefault();D.toggleGlobalSelection(n.app);n.currentSelectionDisabled=false;n.expandSmartSearchSuggestedChart=false;x.publish(q.Events.PubSub.ExpandSmartSearchSuggestedChart,null);C.trackEvent(C.customEvents.GLOBAL_SELECTIONS_CLICKED,{type:"clicked"})};n.toggleGlobalSearch=function(){D.toggleGlobalSearch(b)};n.toggleExploreSelection=function(){D.toggleExploreSelection(b);n.expandSmartSearchSuggestedChart=false;x.publish(q.Events.PubSub.ExpandSmartSearchSuggestedChart,null);n.currentSelectionDisabled=false};n.toggleCao=function(){n.currentSelectionDisabled=false;D.toggleCao(b)};n.$watch("isCaoActive",function(t){false===t&&h.off()});n.$on("$destroy",function(){c.ViewChanged.unbind(A);p.off();h.off();n.isCaoActive=false;o.off();l.off();n.isExploreSelectionsActive=false;u.StateChanged.unbind(M);o.setCsShowCallback(null);s.cancel(S);p.IndexProgressUpdate.unbind(k);w&&w.delete()})},controller:["$scope","$element","$timeout","qvChartTooltipService","qvGlobalSelectionsService","qvCurrentSelectionsService",function(i,s,r,l,d,f){var g,v=false,b,q,C=e.getService("qvListboxPopoverService"),I=e.getService("qvListboxPopoverServiceMobile"),_=e.getService("qvMultiStatePopoverService");i.items=[];i.disable={clear:true,back:true,forward:true};i.brightCurSel=i.options&&"bright"===i.options.variant;i.hideUndoRedo=i.options&&true===i.options.hideUndoRedo;i.hideSelectionsTool=i.options&&true===i.options.hideSelectionsTool;i.hideSearch=i.options&&true===i.options.hideSearch;i.hideClearSelections=i.options&&true===i.options.hideClearSelections;i.currentSelectionDisabled=false;function D(){d.setCsShow(c.isSmallDevice&&i.items.length>0&&u.view!==u.Views.object)}function k(e){i.currentSelectionDisabled=false;i.disable.clear=0===y.getClearableStates(e.selectionsInStates).length;i.disable.back=0===e.qSelectionObject.qBackCount;i.disable.forward=0===e.qSelectionObject.qForwardCount;var n=m.getAllSelectionsInStates(e);i.haveHiddenSelections=n.some(function(t){return t.qIsHidden});var s=n.filter(function(t){return!t.qIsHidden});s.forEach(function(t){t.translation=f.translate(t);t.screenReaderLabel=f.translatedScreenReaderLabel(t);t.name=t.qReadableName||t.qField;t.displayStateName=m.getDisplayStateName(t.stateName);t.currentSelectionDisabled=i.currentSelectionDisabled});i.nbrSelections=s.length;d.setSelectionCount(s.length,i.app);D();var o=m.groupSelectionsByField(s);var a=o.filter(function(t){return!t.isSingleState});a.forEach(function(t){t.translation=f.translate(t);t.screenReaderLabel=f.translatedScreenReaderLabel(t)});o=o.sort(y.sortSelections);if(i.cachedPlaceHolders.length>0&&i.activeFieldName&&i.activeFieldName.length>0){i.cachedPlaceHolders.forEach(function(t){m.createPlaceHolder(t)});s.forEach(function(t){i.cachedPlaceHolders.forEach(function(e,n){t.qField===e.qField&&(i.cachedPlaceHolders[n]=p.extend(true,{},t))})});s=i.cachedPlaceHolders}if(i.multiPopover){var l=m.getIndexByKey(o,"name",i.multiPopover.fieldName);var c=m.getIndexByKey(i.items,"name",i.multiPopover.fieldName);var u=l>-1;if(u){var h=o.splice(l,1)[0];o.splice(c,0,h);var g=m.getAllStatesFromSelections(o,i.multiPopover.fieldName);if(g.length<=1&&i.activeFieldName.length){t.element('.item[data-csid="'+i.activeFieldName+'"]').focus();i.multiPopover.close()}}else i.multiPopover.close()}i.items=o;D();r(function(){i.$broadcast("refreshPager")})}a(i,"model",function(){q&&q.dispose();q=i.model.layoutSubscribe(k)});i.$watch(u.inObjectView,D);i.$watch("isSmallDevice",D);i.clear=function(t,e,n){var s=e?[e]:m.getAllStatesFromSelections(i.items);i.$parent.itemSelected&&(i.$parent.itemSelected=false);n&&n.stopPropagation();var o=s.map(function(e){return i.model.clearField(t,e)});return S.all(o)};i.clearAllFields=function(){return i.model.clearAll()};i.back=function(){return i.model.back()};i.forward=function(){return i.model.forward()};function T(e){var n=t.element(e).next("li");if(t.element(e).parent().find("li").length<=1)return null;return t.element(e).parent().find("li").length>1&&n.length>0?n:null}function E(e){var n=t.element(e).prev("li");if(t.element(e).parent().find("li").length<=1)return null;return n.length>0?n:null}function A(e,n){var s;var o=e.which;o=e.shiftKey&&w.TAB===o?"SHIFT_TAB":o;var a=document.activeElement&&"qv-multi-state-popover-btn-clear"===t.element(document.activeElement).attr("tid");var l=".item-multi-state[data-csid="+i.multiPopover.fieldName+"]";switch(o){case w.ESCAPE:i.multiPopover.close();s=t.element(l);break;case w.DELETE:s=T(e.target)||E(e.target);i.clear(n.qField,n.stateName);break;case w.SPACE:case w.ENTER:r(function(){e.target.click()});break;case w.ARROW_RIGHT:case w.ARROW_DOWN:case w.TAB:if(a)s=t.element('[tid="qv-multi-state-popover"] li.item:first');else{s=T(e.target);if(null===s&&o===w.TAB){i.multiPopover.close();s=t.element(l)}}break;case w.ARROW_LEFT:case w.ARROW_UP:case"SHIFT_TAB":if(a){s=t.element(l);i.multiPopover.close()}else s=E(e.target);break}if(s){s.focus();e.preventDefault()}}i.showPopover=function(e){var n=t.element(e.target).closest(".item"),s=n.scope().item.qField,o=n.scope().item.isPlaceHolder,a={qvaOutsideIgnoreFor:"currentSelectionsItems",$alignToElement:n,showLock:true,direction:h.direction};if(i.isClearSelectionIcon(e.target)){if(i.activeFieldName){c.isSmallDevice?C.close():I.close();i.activeFieldName=""}return}if(!n.hasClass("item-multi-state")&&(s===i.activeFieldName||o)){c.isSmallDevice?C.close():I.close();i.activeFieldName="";return}r(function(){i.closeTooltip()},100);i.activeFieldName=s;var l={listboxPopoverService:C,listboxPopoverServiceMobile:I,$timeout:r};var u=m.getAllStatesFromSelections(i.items,s);if(u.length>1){if(i.multiPopover)return;var d=function t(){return m.getMultiPopoverItems(i.items,s)};i.multiPopover=m.openMultiStatePopover(_,d,n[0],i.brightCurSel,{onClose:function t(){i.multiPopover=null;i.activeFieldName=""},clear:i.clear,click:function e(n){var s=t.element(n.target).closest(".item");var o=s.scope().item.qField;var r=s.scope().item.displayStateName;i.multiPopover.close();i.closeTooltip();i.onCloseFocusSelector='.item[data-csid="'+o+'"]';m.openListboxPopover(m.activatePopover,i,c.isSmallDevice,r,o,a,l)},openTooltip:i.openTooltip,closeTooltip:i.closeTooltip,direction:h.direction,handleKeyDown:A});i.multiPopover.fieldName=s}else m.openListboxPopover(m.activatePopover,i,c.isSmallDevice,u[0],s,a,l)};i.openTooltip=function(t,e){if(i.isClearSelectionIcon(t.target)){i.closeTooltip();return}if(v||n.utils.touch)return;var s=i.multiPopover&&i.multiPopover.fieldName===e.qField;if(e.states&&s)return;i.cancelTooltip();g=r(function(){var n=e.qStateCounts,i="object"===o(n),r=i?" ("+(n.qSelected+n.qSelectedExcluded+n.qLocked+n.qLockedExcluded)+"/"+e.qTotal+")":"";var a=e.states||!s&&"$"===e.stateName?e.translation:[m.getDisplayStateName(e.stateName),": ",e.translation].join("");v=true;l.open({content:[{header:(e.qReadableName||e.qField)+r,rows:[{content:a}]}],position:{x:t.clientX,y:t.clientY},alwaysOnTop:true,direction:"bottom",template:"current-selections-tooltip-template.ng.html"})},500)};i.closeTooltip=function(){v=false;i.cancelTooltip();l.close()};i.cancelTooltip=function(){r.cancel(g)};i.isClearSelectionIcon=function(e){return t.element(e).closest(".remove").is(".remove")};i.handleKeyDown=function(e,n){var o;var r=e.which;r=e.shiftKey&&w.TAB===r?"SHIFT_TAB":r;switch(e.which){case w.DELETE:o=i.items&&i.items.length>1?T(e.target):s.find('[data-tid="current-selections-back"]');i.clear(n.qField);break;case w.ESCAPE:if(i.multiPopover){i.multiPopover.close();o=t.element('.item[data-csid="'+i.multiPopover.fieldName+'"]')}break}if(n.isSingleState)switch(e.which){case w.SPACE:case w.ENTER:case w.ARROW_DOWN:i.showPopover(e);break}else switch(r){case w.SPACE:case w.ENTER:i.multiPopover?i.multiPopover.close():i.showPopover(e);o=t.element('.item[data-csid="'+i.multiPopover.fieldName+'"]');break;case w.ARROW_DOWN:i.multiPopover||i.showPopover(e);o=t.element('.item[data-csid="'+i.multiPopover.fieldName+'"]');break;case w.TAB:if(i.multiPopover){o=t.element('[tid="qv-multi-state-popover-btn-clear"]');e.preventDefault()}break;case"SHIFT_TAB":i.multiPopover&&i.multiPopover.close();break}o&&o.focus()};function L(t,n){i.items.forEach(function(t){if(-1!==n[0].indexOf(t.qField)){n[1]?t.feedbackActive=false:t.feedbackActive=true;e.$apply(i)}})}b=e.$rootScope.$on("locked-feedback",L);var M=function t(){var n=e.getService("qvExploreSelectionsService");n.off();i.isExploreSelectionsActive=false;i.currentSelectionDisabled=false};x.subscribe("selection/insights/close",M);x.subscribe("cao/insights/close",function(){i.isCaoActive=false});x.subscribe("selections/insights/details/close",function(){i.currentSelectionDisabled=false});x.subscribe("selections/insights/details/open",function(){i.currentSelectionDisabled=true});i.$on("$destroy",function(){b();q&&q.dispose();x.unsubscribe("cao/insights/close");x.unsubscribe("selection/insights/close",M);x.unsubscribe("selections/insights/details/close");x.unsubscribe("selections/insights/details/open")})}]};e.directive("qvStageCurrentSelections",function(){return D});return D}.apply(e,i),void 0!==s&&(t.exports=s))},,,,function(t,e,n){"use strict";var i;!(i=function(){return{OFFSET_BETWEEN_TABLE_BOTTOM_AND_UL_BOTTOM:18,MIN_TABLE_RESIZE_WIDTH:150,TABLE_MINIMIZE_HEIGHT:28}}.call(e,n,e,t),void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t="small";var e="LIST";var n={12:"small",15:"medium",18:"large",small:12,medium:15,large:18};var i={width:1280,height:1024};var s={min:{width:300,height:300},max:{width:4e3,height:4e3}};function o(e){t=e}function r(){return t}function a(t){e=t}function l(){return e}function c(t){return n[t]}function u(t){t.pxHeight=t.pxHeight||i.height;var e=t.pxHeight/i.height;return Math.ceil(c(t.gridResolution)*e)}function d(t){t.pxWidth=t.pxWidth||i.width;var e=t.pxWidth/i.width;return Math.ceil(c(t.gridResolution)*e)}function p(t,e){var n=Math.min(s.max.height,t);var i=Math.min(s.max.width,e);n=Math.max(s.min.height,n);i=Math.max(s.min.width,i);return{pxHeight:n,pxWidth:i}}return{setPreferredGridSize:o,getPreferredGridSize:r,setPreferredMobileLayout:a,getPreferredMobileLayout:l,getResolutionFor:c,getCustomRows:u,getCustomCols:d,checkSheetPixelLimits:p}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(92),n(156),n(445),n(332),n(90),n(48),n(498),n(420),n(386),n(669)],s=function(t,e,n,i,s,r,a,l,c){var u;function d(t,e){var i=s.extend(true,{},n,e);i.libraryInfo=t.getLibraryInfo();return i}function p(t){return a.loadExtension(t).then(function(e){return d(t,e)})}r.componentDirective("qvaIncludeObject",{model:"=",ext:"=",options:"="});u=t.extend("ExtensionType",{init:function t(e){var n=e.type;this.type=n;this.path=e.path;this.libraryInfo=i.getLibraryInfo(n);this.components=e.components||[]},getLibraryInfo:function t(){return this.libraryInfo},getIconName:function t(){return this.libraryInfo.icon},getIconChar:function t(){return this.libraryInfo.iconChar||"g"},getIconPath:function t(){return this.libraryInfo.iconPath||"M14.5,9 L13,9 L13,3.3 C13,3.1 12.9,3 12.7,3 L8,3 L8,1.5 C8,0.7 7.3,0 6.5,0 C5.7,0 5,0.7 5,1.5 L5,3 L0.3,3 C0.1,3 0,3.1 0,3.3 L0,9 L1.5,9 C2.3,9 3,9.7 3,10.5 C3,11.3 2.3,12 1.5,12 L0,12 L0,15.7 C0,15.9 0.1,16 0.3,16 L5,16 L5,14.5 C5,13.7 5.7,13 6.5,13 C7.3,13 8,13.7 8,14.5 L8,16 L12.7,16 C12.9,16 13,15.9 13,15.7 L13,12 L14.5,12 C15.3,12 16,11.3 16,10.5 C16,9.7 15.3,9 14.5,9 Z"},getModelCtor:function t(){return p(this).then(function(t){return t.Model})},getInitialProperties:function t(n){var i=this;return p(i).then(function(t){var o=s.extend(true,{qInfo:{qType:i.type},visualization:i.type},t.initialProperties,n);if(t.libraryInfo.isThirdParty){t.libraryInfo.version&&!o.version&&(o.version=t.libraryInfo.version);o.extensionMeta=s.extend(true,{},t.libraryInfo)}return e.mapProperties(t.definition,o,i.type)}).catch(function(){return{qInfo:{qType:i.type},visualization:i.type}})},load:function t(){return p(this).then(function(t){t=s.extend(true,{},t);if(t.View)for(var e in l)if(l.hasOwnProperty(e)&&!o(t.View[e]===l[e]))throw new Error("extension.View property is missing DefaultView "+e);"undefined"===typeof t.View&&(t.View=l);"undefined"===typeof t.controller&&(t.controller=c);return t})},getExtensionType:function t(){return p(this)}});return u}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(10),n(89),n(95)],s=function(t,e,i){var s="webkitAnimationEnd oanimationend msAnimationEnd animationend";function o(t,e,n,i){this.app=t;this.model=e;this.toggled=false;this.element=n;this.options=i;this.sourceClass="qv-view-original";this.tableClass="qv-view-data-table"}o.prototype.getSourceElement=function(){var t;t="string"===typeof this.element?document.getElementById(this.element).querySelector(".qv-object-wrapper"):this.element[0]?this.element[0].querySelector(".qv-object-wrapper"):this.element.querySelector(".qv-object-wrapper");return t};o.prototype.show=function(){var i=this;if(this.showIsAnimating)return e.resolve(i.toggled);this.showIsAnimating=true;var o=n(239);return new o(i.app).visualization.create("table",i.model,{totals:{show:false}}).then(function(t){var n=new e;var s;i.options?i.options.onRendered=function(){n.resolve()}:i.options={onRendered:function t(){n.resolve()}};i.sourceElement=i.getSourceElement();var o=i.sourceElement.parentElement;i.qvis=t;i.originalObjectId=i.model.id;i.tableElement=document.createElement("div");i.tableElement.classList.add(i.tableClass);o.insertBefore(i.tableElement,i.sourceElement);s=t.show(i.tableElement,i.options);return e.all([s,n.promise]).then(function(t){i.scope=t[0]})}).then(function(){var n=new e;i.sourceElement.classList.remove("chart-fade-in");i.sourceElement.classList.add("chart-fade-out");t.element(i.sourceElement).on(s,function(){t.element(i.sourceElement).off();i.sourceElement.classList.add(i.sourceClass);i.tableElement.classList.add("table-fade-in");i.toggled=true;i.showIsAnimating=false;n.resolve(i.toggled)});return n.promise})};o.prototype.getObject=function(){if(this.scope)return this.scope.object};o.prototype.hide=function(){var n=this;var o=new e;if(this.hideIsAnimating)return e.resolve(n.toggled);this.hideIsAnimating=true;n.tableElement.classList.remove("table-fade-in");n.tableElement.classList.add("table-fade-out");t.element(n.tableElement).on(s,function(){t.element(n.tableElement).off();n.sourceElement.classList.remove(n.sourceClass);n.sourceElement.classList.remove("chart-fade-out");n.sourceElement.classList.add("chart-fade-in");n.qvis.close();n.tableElement.parentNode.removeChild(n.tableElement);n.toggled=false;n.hideIsAnimating=false;t.element(n.sourceElement).on(s,function(){i.publish("/ui/object/resize."+n.originalObjectId)});o.resolve(n.toggled)});return o.promise};o.prototype.toggle=function(){return this.toggled?this.hide():this.show()};return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89)],s=function(t,e){function n(n){return n?e.resolve(n.enigmaModel):t.getApp()}var i={};i.create=function(t,e){return n(e).then(function(e){return e.createMasterObject(t)})};i.remove=function(t,e){return n(e).then(function(e){return e.destroyObject(t)})};i.get=function(t,e){return n(e).then(function(e){return e.getObject(t)})};i.getList=function(t){return n(t).then(function(t){return t.getMasterObjectListObject()})};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(11),n(10),n(48),n(97),n(121),n(191),n(150),n(90),n(127),n(99),n(242)],s=function(t,e,n,i,s,r,a,l,c,u){n.directive("ppSortable",[function(){return{scope:"=",link:function e(n,i,s){n.$watch(s.ppSortable,function(e){if(!e)return;var s;e=l.extend({},{handle:"[pp-sortable-handle]",start:function t(e,n){n.item.data("startPos",n.item.index())},scrollSpeed:u.treatAsDesktop()?25:60,distance:u.treatAsDesktop()?10:0,items:"> :not(.locked)",cancel:".locked",update:function t(i,s){var o=s.item.index(),r=s.item.data("startPos");n.$apply(function(){e.onMove(r,o)})},stop:function t(){u.treatAsDesktop()||i.sortable("option","disabled",true)}},e);s=i.closest(".pp-section");s.length&&(e.containment=s);i.sortable(e);u.treatAsDesktop()||i.sortable("option","disabled",true);n.enableTouchDrag=function(){var e;i.sortable("option","disabled",false);e=t.Event(window.event,{type:"mousedown"});e.which=1;e.pageX=window.event.pageX;e.pageY=window.event.pageY;e.target=window.event.target;t.ui.mouse.prototype._touchStart.call(i.data("ui-sortable"),e)}})}}}]);n.directive("ppSlider",[function(){return{require:"?ngModel",link:function t(i,s,o,r){var a=false;i.$watch(o.ppSlider,function(t){if(!t)return;if(t.range){t=l.extend({},{min:0,max:10,step:1,values:r.$modelValue,stop:function t(e,s){n.$apply(i,function(){r.$setViewValue(s.values)})}},t);a||i.$watchCollection(function(){return r.$modelValue},function(t,n){e.equals(t,n)||s.slider("values",t)})}else{t=t.values?l.extend({},{min:0,max:10,step:1,values:r.$modelValue,stop:function t(e,s){n.$apply(i,function(){r.$setViewValue(s.values)})}},t):l.extend({},{min:0,max:10,step:1,value:r.$modelValue,stop:function t(e,s){n.$apply(i,function(){r.$setViewValue(s.value)})}},t);a||i.$watch(function(){return r.$modelValue},function(t,e){t!==e&&(Array.isArray(t)?s.slider("values",t):s.slider("value",t))})}a&&s.slider("destroy");s.slider(t);a=true})}}}]);n.directive("ppPlaceholder",function(){return{link:function t(e,n,i){function s(){var t=e.$eval(i.ppPlaceholder);var s=e.$eval(i.ppPlaceholderSuppressEqual);s&&"="===t[0]&&(t=t.substr(1));n.attr("placeholder",t)}n.on("focus",function(){n.attr("placeholder","")});n.on("blur",function(){s()});e.$watch(i.ppPlaceholder,function(){s()})}}});n.directive("ppHeaderWithSwitch",function(){return{scope:{definition:"=",data:"=",args:"="}}});n.directive("ppAccordion",function(){return{template:"<div ng-transclude></div>",transclude:true,scope:{ppAccordion:"=",definition:"=",args:"="},controller:["$scope","$element","$timeout",function(e,n,s){var o=e.args.cache;var r=null;var a="accordion_path";e.definition.cacheKey&&(a=a+"_"+e.definition.cacheKey);function l(){r=s(function(){n.accordion("refresh");r=null})}function c(t){var n=-1;t=t.split(".")[0];Object.keys(e.definition.items||{}).filter(function(t){var n=e.definition.items[t];return false!==n.show}).forEach(function(e,i){if(e===t){n=i;return false}});return n}this.loadit=function(s){var r=o.get(a),d=void 0!==e.definition.defaultActiveTabIndex?e.definition.defaultActiveTabIndex:-1;r&&(d=c(r));if(s===e.ppAccordion.length-1){n.accordion({header:".pp-section-header",active:d,heightStyle:"fill",animate:!!u.treatAsDesktop()&&"swing",activate:function n(i,s){var r=t(s.newPanel).attr("x-path");o.put(a,r);e.$broadcast("ppAccordionNewPath",r)}});i.on("end",l)}};e.$on("pp-open-path",function(t,e){var i=c(e);i>=0&&n.accordion("option","active",i)});e.$on("$destroy",function(){if(r){s.cancel(r);r=null}i.off("end",l)})}]}});n.directive("ppAccordionItem",function(){return{require:"^ppAccordion",link:function t(e,n,i,s){s.loadit(e.$index)}}});function d(t){if("ValueExpr"===t||"ValueExpression"===t)return r.Modes.NumberOrExpression;return r.Modes.Expression}n.directive("ppInputValidator",["$parse",function(t){return{require:"ngModel",link:function e(n,i,o,a){var c=null,u=n.definition,p=o.expressionType;function h(t,e){if(u&&"function"===typeof u.isExpression)return u.isExpression(t);if(void 0===t)return false;if("always"===u.expression)return true;switch(e){case"StringExpression":return 0===t.indexOf("=");case"ValueExpression":return"string"===typeof t&&0===t.indexOf("=");case"StringExpr":return 0===t.indexOf("=");case"ValueExpr":return true;case"dimension":return true;case"measure":return true;default:return false}}function f(e){o.ppValidationOnResult?t(o.ppValidationOnResult)(n,{isValid:e}):n.invalid=!e}function g(t){f(t.valid)}if(p){var v=n.args?n.args.app:n.app;c=new r.ExpressionValidator(v,d(p));c.Update.bind(g)}function m(t){if("measure"===p)if(""===t)f(true);else{var e=n.args?n.args.handler.getLabels():[];c.validate(t,e)}else if("dimension"===p)if(""===t)f(false);else{t&&"="!==t[0]&&(t="="+l.escapeField(t));c.validate(t)}else c.validate(t)}function b(t){h(t,p)?m(t):f(s.validateType(t,u,n.data,n.args))}n.$on("datachanged",function(){b(a.$modelValue)});n.$on("pp-revalidate",function(){b(a.$modelValue)});n.$watch(function(){return a.$modelValue},function(t){b(t)});n.$on("$destroy",function(){c&&c.Update.unbind(g)})}}}]);function p(t){t=t||"";return"="===t[0]?t:"="+t}n.directive("ppExpressionEditor",["$parse","$timeout",function(n,i){return{link:function s(r,u,h){function f(t,e){if(void 0===t)return false;switch(e){case"StringExpression":return"object"===o(t);case"ValueExpression":return"object"===o(t);case"StringExpr":return"object"===o(t)&&0===t.qv.indexOf("=");case"ValueExpr":return"object"===o(t);case"dimension":return true;case"measure":return true;default:return false}}function g(t){return"'"!==t[0]&&"'"!==t[t.length-1]&&-1===t.indexOf("(")&&-1===t.indexOf(")")&&!l.isNumeric(t)}function v(){var t=n(h.ppExpressionEditor)(r),i=h.expressionType,s=d(i),c=t,u=[];var v=f(t,i);"object"===o(t)&&("StringExpression"===i?t=p(t.qStringExpression.qExpr):"ValueExpression"===i?t=p(t.qValueExpression.qExpr):"StringExpr"===i?t=t.qv:"ValueExpr"===i&&(t=t.qv));if("dimension"===i&&t.length)"="!==t[0]&&(t="="+l.escapeField(t));else if("measure"===i)u=r.args?r.args.handler.getLabels():[];else if(!v&&("StringExpr"===i||"StringExpression"===i)){"StringExpr"===i&&t.qv&&(t=t.qv);t&&g(t)&&(t="='"+t.replace(/'/g,"''")+"'")}a.show({expr:t,title:t?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title",allowEmpty:true,mode:s,labels:u,app:r.args?r.args.app:r.app,stateName:r.args&&r.args.layout?r.args.layout.qStateName:void 0}).then(function(t){if("ValueExpression"===i&&t.length)t={qValueExpression:{qExpr:t}};else if("StringExpression"===i&&t.length)t={qStringExpression:{qExpr:t}};else if("ValueExpr"===i)t={qv:t};else if("StringExpr"===i){"="!==t[0]&&(t="="+t);t={qv:t}}else"dimension"===i&&t.length&&"="!==t[0]&&(t="="+t);if(h.ppExpressionEditorOnApply)n(h.ppExpressionEditorOnApply)(r,{value:t});else if(!e.equals(c,t)){r.value=t;r.change()}},function(){})}u.on("keypress.pp-expression",function(e){13!==e.which&&32!==e.which||t(e.target).trigger("qv-activate")});u.on("qv-activate.pp-expression",function(){var e=null,s;if(h.editorDisabled){e=n(h.editorDisabled)(r);if(e)return}if(c.isInput(document.activeElement)){s=t(document.activeElement);s.on("blur.pp-expression",function(){i(function(){v()});s.off("blur.pp-expression")});s.blur()}else v()});r.$on("$destroy",function(){u.off(".pp-expression")})}}}]);n.directive("ppScrollableAutoContent",function(){var e=".property-content";return{link:function n(i){i.$watch(function(){return i.isAutoChart},function(t){s(t)});function s(n){var i=t(e);i.length&&i.css({"overflow-y":n?"auto":"hidden"})}i.$on("$destroy",function(){s(false)})}}});n.directive("ppDiDraggableHover",function(){var t=".pp-nm-di__header",e="hovered";return{link:function n(i,s){var o=s.closest(t);if(!o.length)return;s.hover(function(){o.addClass(e)},function(){o.removeClass(e)})}}});n.componentDirective("includePpComponent",{definition:"=",data:"=",args:"="});return{}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){var e=/^[^\\/:*\t?"<>|]+$/,n=true;t.length&&(n=e.test(t));return n}function e(t){return 0===t.length||0===t.replace(/\n|\t|\s|\u200B|\uFEFF|\xA0/g,"").length}return{allowedChars:t,emptyTitle:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(91)],s=function(t,e,n){return{show:function i(s){var o=new e;t.getService("qvConfirmDialog").show({title:s.header?n.get(s.header):null,message:n.get(s.text),icon:void 0!==s.icon?s.icon:"cogwheel",okLabel:s.confirm?n.get(s.confirm):null}).closed.then(function(t){t?o.resolve():o.reject()});return o.promise}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(91),n(359),n(102)],s=function(t,e,n,i){var s=[],o={},r="";var a=[{id:"chart",name:"Widget.Type.chart",icon:"line-chart"},{id:"table",name:"Widget.Type.table",icon:"table"},{id:"kpi",name:"Widget.Type.kpi",icon:"kpi"},{id:"navigation",name:"Widget.Type.navigation",icon:"compass"},{id:"other",name:"Widget.Type.other"}];function l(t){var e=null;s.forEach(function(n,i){t.id===n.id&&(e=i)});null===e?s.push(t):s[e]=t;o[t.id]=t}var c=function t(e,n,i,s,o,r,a,l,c){this._version=0;r||(r={});Object.defineProperties(this,{libid:{value:e},id:{value:n},name:{value:i,writable:true},description:{value:s,writable:true},author:{value:o,writable:true},meta:{value:r,writable:true},dummy:{value:true===c?"true":null},html:{get:function t(){return this._html},set:function t(e){this._html=e;this._version++}},css:{get:function t(){return this._css},set:function t(e){this._css=e;this._version++}},properties:{value:a,writable:true},dependencies:{value:l,writable:true},version:{get:function t(){return this._version}},isLoaded:{get:function t(){return void 0!==this._html}}})};c.getIcon=function(t){var e;a.forEach(function(n){n.id===t&&n.icon&&(e=n.icon)});return e||"widget"};c.prototype.load=function(t){this.loadDfd&&!t||(this.loadDfd=n.loadWidget(this));return this.loadDfd};c.prototype.save=function(){var t=this;return n.saveTemplate(this).then(function(){c.Updated.emit(s);return t})};c.prototype.copy=function(t){return c.add({libid:t.libid||this.libid,id:t.id||this.id,name:t.name||this.name,description:t.description||""===t.description?t.description:this.description,author:t.author||this.author,meta:t.meta||this.meta,html:t.html||this.html,css:t.css||this.css,properties:t.properties||this.properties})};c.prototype.delete=function(){var t=n.deleteTemplate(this),e=this;s.forEach(function(t,n){t.id===e.id&&s.splice(n,1)});o&&o[e.id]&&delete o[e.id];t.then(function(){c.Updated.emit(s)});return t};c.prototype.move=function(t){var e=this;var i=this.copy({libid:t});return i.save().then(function(){return e.delete().then(function(){return n.reloadCachedLibraries().then(function(){return i})})})};c.getTemplateListFromLibrary=function(e){var i=[];var o=new t;s.length=0;n.getWidgetListFromLibrary(e).then(function(e){e.forEach(function(t){i.push(c.get(t.id,true,t.libid))});t.all(i).then(function(){o.resolve(s)})});return o.promise};c.getTemplateList=function(e){var i=[];if(!r||e){r=new t;n.getWidgetList(e).then(function(e){e.forEach(function(t){i.push(c.get(t.id,true,t.libid))});t.all(i).then(function(){r.resolve(s)})})}return r.promise};c.getLoaded=function(t){return o[t]};c.resetWidgetsProperties=function(t){o[t].propertiesObj&&o[t].propertiesObj.lastSavedProperties&&(o[t].properties=o[t].propertiesObj.lastSavedProperties)};c.get=function(i,s,r){if(i.indexOf("/")>-1){var a=i.split("/");r=a[0];i=a[1]}var u=new t;if(o[i]){var d=o[i];d.isLoaded||s?u.resolve(d):d.load().then(function(){u.resolve(d)},function(t){u.reject(t)})}else{if(!r){var p=n.getLibForId(i);r=p?p.id:void 0}r?n.getTemplate(r,i).then(function(t){t.properties||(t.properties={});var n=new c(r,i,t.name||e.get("Widget.NoName"),t.description||"",t.author||"",t.meta||{},t.properties,t.dependencies||{});n.lastModified=t.lastModified;l(n);n.isLoaded||s?u.resolve(n):n.load().then(function(){u.resolve(n)},function(t){n.err=t;u.resolve(n)})}).catch(function(){var t=new c(r,i);u.resolve(t)}):u.reject(e.get("Error.NoLibraryForWidget",i))}return u.promise};c.add=function(t){if(!t.id||!t.libid)return false;var e=new c(t.libid,t.id,t.name||"",t.description||"",t.author||"",t.meta,t.properties,t.dependencies||{},t.dummy);e.html=t.html||"";e.css=t.css||"";l(e);n.addTemplate(e);c.Updated.emit(s);return e};i.create(c,"Updated");c.types=a;return c}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(813),n(320),n(360),n(361)],s=function(){}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(96),n(816)],s=function(t,e){var n;function i(e,n,i){return t.Event(e,{pageX:i.pagePoints[0].x,pageY:i.pagePoints[0].y,ctrlKey:n.ctrlKey,metaKey:n.metaKey,shiftKey:n.shiftKey,originalEvent:n,gestureData:i})}e(document.body).tap({options:{preventDefault:false},start:function e(i){n=t(i.target)},end:function t(e,s){var o=i("qv-activate",e,s);0===n.closest(":disabled").length&&n.trigger(o);n=null}});var s=e.Gesture.augment(function(t){this.defaults={precedence:6};this.start=function(t,e){this.binder.start.call(this,t,e)};function e(){t.apply(this,arguments)}return e});e.gestures.add("press",s);e(document.body).press({start:function e(n,s){var o=i("qv-press",n,s);t(n.target).trigger(o)}});t.addOutsideEvent("qv-press","qv-outside","touchstart","touchend")}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(429),n(224),n(430),n(478),n(479),n(480),n(481),n(482)],s=function(t,e,n,i,s,o,r,a,l,c){function u(t,e){t=t.toLowerCase()||"image";e=e.toLowerCase();var u=e+"-"+t;function d(){var t;switch(u){case"sheet-pdf":case"object-pdf":t=a;break;case"sheet-image":case"object-image":t=r;break;case"story-ppt":t=l;break;case"story-pdf":t=c;break;default:t=r}return t}var p={template:d(),controller:["$scope","$timeout",function(e,r){e.exportType=t;e.states=i.getStates();e.state=e.states.IDLE;var a={CurrentSize:"0",BestFitPreserveAspectRatio:"1",BestFitNoPreserveAspectRatio:"2"};e.print={fitCriteria:a.CurrentSize};if(e.input.object){var l=e.input.object.model.id;var c={id:l,model:e.input.object.model,options:{id:l,isVisible:true,isOnGrid:false,isZoomed:false}};e.obj=c}switch(u){case"sheet-pdf":case"object-pdf":case"story-pdf":e.sizes=s.sizes;e.layouts=s.layouts;e.selectedSize=e.sizes[1];e.print.dpi=200;e.selectedLayout=e.layouts[1];e.minDpi=72;e.maxDpi=300;r(function(){e.onPrintLayout(e.selectedLayout)});break;case"sheet-image":case"object-image":e.availableFormats=["Jpeg","Png"];e.print.width=e.input.currentWidth;e.print.height=e.input.currentHeight;e.print.dpi=e.input.currentDpi;e.print.format="Png";e.imageCustomSize=false;break;case"story-ppt":e.availablePptDpi=[96,150,220];e.print.dpi=e.availablePptDpi[2];e.print.currentWidth=e.input.currentWidth;e.print.currentHeight=e.input.currentHeight;e.print.currentDpi=e.input.currentDpi;e.formats=o.formats;e.selectedFormat=e.formats[3];r(function(){e.onPptFormatChange(e.selectedFormat)});break}var d=n.create(e);e.confirm=d.confirm;e.onImageCustomSize=d.onImageCustomSize;e.onSizeChange=d.onSizeChange;e.onPrintLayout=d.onPrintLayout;e.onPptFormatChange=d.onPptFormatChange}]};return p}function d(){var t=document.createElement("div");t.style.width="1in";var e=document.getElementsByTagName("body")[0];e.appendChild(t);var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("width");e.removeChild(t);var i=n&&Math.round(parseFloat(n));i=i||96;return i>300?300:i}function p(t,n,s,o,r,a){var l="Print."+n+".Title";var c=d();var p=u(n,s);var h=e.getService("luiDialog").show({controller:p.controller,template:p.template,input:{title:l,object:t,sourceType:"object",exportType:n,currentWidth:o,currentHeight:r,currentDpi:c}});h.closed.then(function(){i.cancel();a&&a()});return h}function h(n,s,o){var r="Print."+s+".Title";var a;a="story"===o.toLowerCase()?n&&n.inStoryPlayState()?t("#qv-storytelling .qv-story-slide-active"):t("#qv-storytelling .qv-grid-story"):n.model&&n.model.isCustomSize()?t("#grid"):t(".qvt-sheet > .sheet-grid");var l=Math.round(a.width()||960);var c=Math.round(a.height()||720);var p=d();var h=u(s,o);var f=e.getService("luiDialog").show({controller:h.controller,template:h.template,input:{title:r,object:n,exportType:s,currentWidth:l,currentHeight:c,currentDpi:p}});f.closed.then(function(){i.cancel()})}return{showForObject:p,showForGlobalMenu:h,getScreenDpi:d}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(54),n(89),n(91),n(133),n(975),n(280)],s=function(t,e,i,s,o){t.service("odagNavpointService",["$timeout","$delayedModal","odagNavpointServiceUI",function(t,r,a){var l;var c={};var u={SUCCEEDED:"succeeded",FAILED:"failed",VALIDATING:"validating",QUEUED:"queued",LOADING:"loading",CANCELING:"canceling",CANCELED:"canceled"};var d=[u.SUCCEEDED,u.FAILED,u.CANCELED];function p(t,e){a.updateImageOnItemHeader(e);return t.getLoadedLinkInfo(t).then(function(t){if(t.templateApp){e.templateName=t.templateApp.name;e.templateDescription=t.templateApp.description;if(t.templateApp.thumbnail){"/"===t.templateApp.thumbnail.substr(0,1)&&(t.templateApp.thumbnail=t.templateApp.thumbnail.substr(1));e.templateThumbnail=n.p+t.templateApp.thumbnail}a.updateImageOnItemHeader(e)}else{e.invalid=true;e.templateName=s.get("odag.toolbar.navpoint.popup.noTemplate");e.templateDescription=""}})}function h(t){switch(t.state){case u.SUCCEEDED:var e=s.get("odag.toolbar.navpoint.popup.delete.confirmation",[t.name]);var n=new i;r.open({title:s.get("odag.toolbar.navpoint.popup.delete.confirmation.title"),content:e,buttons:[{name:"Common.Cancel",tid:"odag-applist-modal-cancelBtn",callback:function t(){n.resolve()}},{name:"Common.Delete",tid:"odag-applist-modal-deleteBtn",defaultButton:true,callback:function e(){return o.deleteGenApp(t.parentContext.app,t.requestId).then(function(){n.resolve()})}}]});return n.promise;case u.FAILED:return o.requestAction(t.parentContext.app,t.requestId,o.ODAGRequestActionConst.FAIL_ACK,true,true);case u.VALIDATING:case u.QUEUED:case u.LOADING:case u.CANCELING:var a=true;var l=true;if(t.lastLoadedTime){a=false;l=false}return o.requestAction(t.parentContext.app,t.requestId,o.ODAGRequestActionConst.CANCEL,a,l);case u.CANCELED:return o.requestAction(t.parentContext.app,t.requestId,o.ODAGRequestActionConst.CANCEL_ACK,true,true)}}function f(t,e,n){return t.getLoadedLinkInfo(t).then(function(i){return o.reloadApp(t.model.parent.app,i,e,n,t.actualRowEst)})}function g(t,e){return o.getSelections(t,e)}function v(t,e){return a.getSelectedValuesDisplayString(t,e)}function m(t){return t.getLoadedLinkInfo(t).then(function(e){return o.generateApp(t.model.parent.app,t.model.parent.id,e,t.id,t.actualRowEst)})}function b(t){delete c[t.id]}function y(n,s,r,l){if(!r){l=Date.now();c[n.id]=l}return c[n.id]&&l>=c[n.id]?o.getGeneratedAppsForLink(n.model.parent.app,n.model.parent.id,n.data.odagLinkRefID,n.id).then(function(i){i.forEach(function(t){var i=a.createGeneratedAppWrapper(t,n.model.parent);var o=s.map(function(t){return t.requestId}).indexOf(t.id);if(o>-1){var r=s[o];var l=e.chain(i).keys().every(function(t){return e.has(r,t)&&e.isEqual(i[t],r[t])}).value();l||s.splice(o,1,i)}else s.push(i)});for(var o=s.length-1;o>-1;o--){var r=s[o];i.some(function(t){return t.id===r.requestId})||s.splice(o,1)}s.sort(function(t,e){var n=new Date(t.createdDate);var i=new Date(e.createdDate);return i-n});if(s.some(function(t){return t.loading}))return t(function(){y(n,s,true,l)},3e3);delete c[n.id]}):i.resolve()}function x(t){var e=s.get("Common.None");t.range&&(t.range.lowerBound&&t.range.lowerBound===t.range.upperBound?e=t.range.lowerBound:void 0===t.range.lowerBound||t.range.upperBound?void 0===t.range.upperBound||t.range.lowerBound?void 0!==t.range.lowerBound&&void 0!==t.range.upperBound&&(e="["+t.range.lowerBound+" - "+t.range.upperBound+"]"):e="<="+t.range.upperBound:e=">="+t.range.lowerBound);return e}function q(t,e){var n=true;t.range&&(t.range.lowerBound&&t.range.lowerBound===t.range.upperBound?n=t.range.lowerBound===e.length:void 0===t.range.lowerBound||t.range.upperBound?void 0===t.range.upperBound||t.range.lowerBound?void 0!==t.range.lowerBound&&void 0!==t.range.upperBound&&(n=e.length>=t.range.lowerBound&&e.length<=t.range.upperBound):n=e.length<=t.range.upperBound:n=e.length>=t.range.lowerBound);return n}function S(t,e){e.length=0;t.getLoadedLinkInfo(t).then(function(n){o.getConstraintFieldBindingValues(t.model.parent.app,n.bindings).then(function(t){for(var i=0;i<n.bindings.length;i++){var s=t[i];var o={fieldName:n.bindings[i].selectAppParamName,values:s.fieldValues,hasConstraint:!s.noConstraint,constraint:x(n.bindings[i]),bindingPassesConstraint:q(n.bindings[i],s.fieldValues)};e.push(o)}})})}function w(t,e,n){return o.renameGenApp(t,e,n)}function C(t){var e=t.parentContext.app;return o.clearSelections(e).then(function(){var n=[];for(var s=0;s<t.selectionsState.length;s++){var r=t.selectionsState[s];var a=r.selectionAppParamName;var l=r.values;n.push(o.selectFieldValuesForField(e,a,l))}return i.all(n)})}l={ODAG_STATE:u,ODAG_TERMINAL_STATES:d,updateItemHeader:p,loadGeneratedApps:y,stopLoadGeneratedApps:b,deleteGeneratedApp:h,reloadApp:f,getSelections:g,getSelectedValuesDisplayString:v,generateApp:m,renameGenApp:w,applySelections:C,initializeBindings:S};return l}])}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(92)],s=function(t){var e,n=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],s=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function r(t,e){for(var n=t.length;n<e;n++)t="0"+t;return t}function a(t,e){var n=t.getHours(),i=t.getDay()-1;if(e){n%=12;n||(n=12)}i<0&&(i=6);return{year:t.getFullYear(),month:t.getMonth(),day:i,date:t.getDate(),h:n,m:t.getMinutes(),s:t.getSeconds(),f:t.getMilliseconds(),t:t.getHours()>=12?"pm":"am"}}function l(t){var e=t.toString().split(".");if(!e[1])return 0;e=Number("0."+e[1]);return e}function c(t){var e=t,n=24*l(e),i=60*l(n),s=60*l(i),o=1e3*l(s);return{d:Math.floor(e),h:Math.floor(n),m:Math.floor(i),s:Math.floor(s),f:Math.round(o)}}function u(t,e){var n=c(t),i=n.d,s=n.h,o=n.m,r=n.s,a=n.f,l=0,u;if(/w+|t+/gi.test(e)){u=new Date(1899,11,30+Math.floor(t),0,0,86400*(t-Math.floor(t)));Number.isNaN(+u.getTime())&&(u=null)}/D+/gi.test(e)||(s+=24*i);/h+/gi.test(e)||(o+=60*s);/m+/gi.test(e)||(r+=60*o);if(/w+/gi.test(e)){l=u?u.getDay()-1:0;l<0&&(l=6)}return{year:0,month:0,day:l,date:i,h:s,m:o,s:r,f:a,t:u?u.getHours()>=12?"pm":"am":""}}function d(t,e){return{"Y+|y+":{Y:Number((e.year+"").slice(-2))+"",YY:r((e.year+"").slice(-2),2),YYY:r((e.year+"").slice(-3),3),def:function t(n){return r(e.year+"",n.length)}},"M+":{M:e.month+1,MM:r(e.month+1+"",2),MMM:t.locale_months_abbr[e.month],def:t.locale_months[e.month]},"W+|w+":{W:e.day,WW:r(e.day+"",2),WWW:t.locale_days_abbr[e.day],def:t.locale_days[e.day]},"D+|d+":{D:e.date,def:function t(n){return r(e.date+"",n.length)}},"h+|H+":{h:e.h,def:function t(n){return r(e.h+"",n.length)}},"m+":{m:e.m,def:function t(n){return r(e.m+"",n.length)}},"s+|S+":{s:e.s,def:function t(n){return r(e.s+"",n.length)}},"f+|F+":{def:function t(n){var i=e.f+"",s=n.length-i.length;if(s>0)for(var o=0;o<s;o++)i+="0";else s<0&&(i=i.slice(0,n.length));return i}},"t{1,2}|T{1,2}":{def:function t(n){var i=e.t;n[0].toUpperCase()===n[0]&&(i=i.toUpperCase());i=i.slice(0,n.length);return i}}}}e=t.extend({init:function t(e,r){var a=e||{};a.qCalendarStrings||(a.qCalendarStrings={qLongDayNames:n,qDayNames:i,qLongMonthNames:s,qMonthNames:o});this.localeInfo=a;this.locale_days=a.qCalendarStrings.qLongDayNames.slice();this.locale_days_abbr=a.qCalendarStrings.qDayNames.slice();this.locale_months=a.qCalendarStrings.qLongMonthNames.slice();this.locale_months_abbr=a.qCalendarStrings.qMonthNames.slice();this.pattern=r},clone:function t(){var n=new e(this.localeInfo,this.pattern);n.subtype=this.subtype;return n},format:function t(e,n){n||(n=this.pattern?this.pattern:"YYYY-MM-DD hh:mm:ss");n=n.replace(/\[.+\]|\[|\]/g,"");var i=/t+/gi.test(n);var s;if(e instanceof Date)s=a(e,i);else{if(e<0){e=-e;n="-"+n}s=u(e,n)}var o=d(this,s);var r=[];for(var l in o)r.push(l);var c=new RegExp(r.join("|"),"g");var p=n.replace(c,function(t){var e;var n;for(n in o){e=new RegExp(n);if(e.test(t))break}if(!e)return"";var i;for(var s in o[n])if(s===t||s.toLowerCase()===t){i=o[n][s];"undefined"===typeof i&&(i=o[n][s.toLowerCase()]);break}"undefined"===typeof i&&(i=o[n].def);"function"===typeof i&&(i=i(t));return i});return p}});e.parseInterval=c;return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(109)],s=function(t,e){function n(t,e,i,s,o){var r=l(e,i,s);if("."===r.charAt(0)){e.shift();return t.apply(null,[n(t,e,i,s,o)].concat(o))}return r}function i(t,e,i,s,o,r){var l=a(""===e?null:e.split("."),o);return n(t,l,i,s,r)}var s={shift:function t(n,i){var s=new e(n);var o=s.isDark()?parseInt(i):-parseInt(i);return new e(s.shiftLuminance(o)).toHex()},fontSize:function t(e,n){var t=parseInt(e);t*=parseInt(n)/100;return Math.ceil(t)+"px"},inherit:function t(e){return e},alpha:function t(n,i){var s="transparent"===n.toLowerCase()?new e("rgba(0,0,0,0)"):new e(n);s.setAlpha(i/100);return s.toRGBA()}};function o(t,e){var n=t;for(var i=0;i<e.length;i++){if(!n[e[i]])return null;n=n[e[i]]}return n}function r(t,e,n){var o=t.substring(1).split("(")[0];var r=/\(\s*([^)]+?)\s*\)/.exec(t);r=r&&r[1]?r[1].split(/\s*,\s*/):[];try{return i(s[o],e,n,this._theme,this._basePathSteps,r)}catch(t){console.warn("Cound not execute function: "+o+", function might not be implemented or arguments are incorrect.")}}function a(t,e){var n=[];var i,s;if(t){var o=t.length;while(o>=0){i=e.slice();s=i.length;while(s>=0){n.push(i.concat(t));i.pop();s--}t.pop();o--}}else{i=e.slice();s=i.length;while(s>=0){n.push(i.concat());i.pop();s--}}return n}function l(t,e,n){for(var i=0;i<t.length;i++){var s=o(n,t[i]);if(null!==s&&s[e])return s[e]}}function c(t,e,n){var i;if(""===t)i=a(null,n);else{var s=t.split(".");i=a(s,n)}return l(i,e,this._theme)}var u=t.extend("ThemeStyleResolver",{init:function t(e,n,i){this._basePath=e;this._basePathSteps=e.split(".");this._theme=i;this._id=n;this.layoutMap={1:"spark",3:"xsmall",7:"small",15:"medium",31:"full",m:"mobile"}},setTheme:function t(e,n){this._theme=n;this._id=e},setBasePath:function t(e){this._basePath=e;this._basePathSteps=e.split(".")},getStyle:function t(e,n,i){var s=void 0===i||i;var o=h(d(this._id,this._basePath,e,n));if(s&&void 0!==o)return o;var a=this._basePathSteps.concat();var l=c.call(this,e,n,a);l&&l.charAt&&"."===l.charAt(0)&&(l=r.call(this,l,e,n));s&&l&&p(d(this._id,this._basePath,e,n),l);return l},scaleFontSize:function t(e,n,i){if("string"===typeof n)switch(n){case"large":n=31;break;case"medium":n=15;break;case"small":n=7;break;case"tiny":n=1;break;default:n=15}var s={spark:1,xsmall:.9,small:.95,full:".discrete"===i?1:1.2};return s[this.layoutMap[n]]?Math.floor(parseInt(e)*s[this.layoutMap[n]])+"px":parseInt(e)+"px"}});function d(){var t="";for(var e=0;e<arguments.length;e++)arguments[e]&&arguments[e].length&&(t+=(""!==t?".":"")+arguments[e]);return t}u._cache={};function p(t,e){u._cache[t]=e}function h(t){return u._cache[t]}u.clearCache=function(){u._cache={}};return u}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(215),n(93),n(120),n(91),n(107),n(90),n(194),n(89),n(228)],s=function(t,e,n,i,s,o,r,a,l){var c={};function u(t,e){return t.getList().then(function(n){return n.getLayout().then(function(n){var i=[],a=false;n.forEach(function(t){if(!t.qMeta.published){i.push(t.qData.title);t.qData.title===e.title&&(a=true)}});var l=r.nextIndex(i,e.title);(1!==l||a)&&(e.title=e.title+" ("+l+")");e.title=o.crop(e.title,s.name);return t.create(e)})})}c.addSheet=function(t){return u(n,{title:i.get("SheetItem.myNewSheet"),rank:t})};c.addStory=function(e){return u(t,{title:i.get("Storytelling.CreateNew"),rank:e})};function d(t,e){var n=a();if(l.duplicatingItem)return n.reject();l.setDuplicatingItem(true);t.clone().then(function(t){t.getProperties().then(function(i){var a={},c=0,u=i.qMetaDef.title;e.getList().then(function(e){e.getLayout().then(function(e){var d=[],p=[];e.forEach(function(t){if(!t.qMeta.published){d.push(t);p.push(t.qData.title)}});d.forEach(function(t){t.qData.rank>c&&(c=t.qData.rank)});var h=r.generateUniqueName(p,u);h=o.crop(h,s.name);l.newRank=c+1;a=o.extend(true,i,{qMetaDef:{title:h},rank:l.newRank});l.setDuplicatingItem(false);t.setProperties(a).then(function(){n.resolve(t)})})})})});return n.promise}function p(t,n){return e.getApp().then(function(e){return t.draft(e).then(function(t){return t.getProperties().then(function(e){var i={},s=0;return n.getList().then(function(n){return n.getLayout().then(function(n){var r=n.filter(function(t){return!t.qMeta.published});r.forEach(function(t){t.qData.rank>s&&(s=t.qData.rank)});i=o.extend(true,e,{rank:s+1});return t.setProperties(i).then(function(){return t.id})})})})})})}c.duplicateSheet=function(t){return d(t,n)};c.duplicateStory=function(e){return d(e,t)};c.draftSheet=function(t){return p(t,n)};return c}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(91),n(90),n(93),n(49)],s=function(t,e,n,i){var s={"":t.get("AlternateState.InheritedState"),$:t.get("AlternateState.DefaultState")};function o(t){return{value:t,translation:""===t||"$"?s[t]:t}}function r(t){var n=t.slice();for(var i=0;i<n.length;i++){var s=n[i];n[i]=e.ellipseText(s,80)}return n}var a=function e(n,i){return n.localeCompare(i,t.language)};function l(){return n.getApp().then(function(t){return t.getAppLayout().then(function(t){var e=r(t.qStateNames.sort(a));return["","$"].concat(e).map(o)})})}var c=false;function u(t){return"masterobject"===t.qInfo.qType}return{type:"items",translation:"Common.AlternateStates",items:{alternateState:{ref:"qStateName",type:"string",translation:"AlternateState.SelectState",component:"dropdown",defaultValue:"",options:function t(e){return l().then(function(t){c=t.length>1&&i.getFlag("ALT_STATE_ONE")&&!u(e);return t})},readOnly:function t(){return!c}},allowShowDisclaimner:{component:"text",translation:"AlternateState.MasterItem.Disclaimer",style:"hint",show:function t(e){var n=e.qInfo.qType;return!("masterobject"===n||"sheet"===n)}}}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(92),n(102),n(90)],s=function(t,e,n,i){var s,o={enabled:true,delay:50};s=e.extend("Throttle",{init:function t(){this.options={};this.ongoingRequests=[];this.queuedRequests=[];this.recentRequests=[];this.resolvedRequests=[];this._debounceTimer=null;this._latestResolvedRequestedAt=-1;n.mixin(this);this.notification("Send");this.notification("Cancel");this.setOptions({})},destroy:function t(){this.clear();this.recentRequests=[];this.resolvedRequests=[];n.release(this)},setOptions:function t(e){this.options=i.extend(true,{},o,this.options,e);this.enabled=this.options.enabled||false;this.delay=this.options.delay||-1},clear:function t(){clearTimeout(this._debounceTimer);var e;while(this.queuedRequests.length){e=this.queuedRequests.pop();e.dfd.reject()}while(this.ongoingRequests.length){e=this.ongoingRequests.pop();e.dfd.reject()}},queue:function e(n){var i=this.enabled?this.delay:-1,s=Date.now(),o={data:n,dfd:t(),wrapper:t(),requestedAt:s},a=Math.max(this._getAvgResolutionTime(),i),l=i<1,c=this.recentRequests.length<1,u=c||s-this.recentRequests.slice(-1)[0].requestedAt>a,d=s>this._latestResolvedRequestedAt+i;l||c||u||d?r.apply(this,[o,0]):r.apply(this,[o,Math.min(i,1e3)]);this.recentRequests.push(o);this.recentRequests.length>10&&(this.recentRequests=this.recentRequests.slice(-10));return o.dfd.promise},updateResolutionTime:function t(){this._latestResolvedRequestedAt=Date.now()},_getAvgResolutionTime:function t(){var e;if(this.resolvedRequests.length){e=0;this.resolvedRequests.forEach(function(t){e+=t.respondedAt-t.sentAt});e/=this.resolvedRequests.length}return e}});function r(t,e){var n=this;this.queuedRequests.push(t);clearTimeout(this._debounceTimer);e>=10?this._debounceTimer=setTimeout(function(){a.call(n)},e):a.call(n)}function a(){if(this.ongoingRequests.length){this.waitingForResponse=true;return}var t=this.queuedRequests.pop();t&&l.call(this,t);while(this.queuedRequests.length){t=this.queuedRequests.shift();t.dfd.reject()}}function l(t){this.waitingForResponse=false;this.ongoingRequests.push(t);var e=this,n=t.wrapper;t.sentAt=Date.now();n.promise.then(function(){e.ongoingRequests.splice(e.ongoingRequests.indexOf(t),1);t.respondedAt=Date.now();e.resolvedRequests.push({sentAt:t.sentAt,respondedAt:t.respondedAt,requestedAt:t.requestedAt});e.resolvedRequests.length>10&&(e.resolvedRequests=e.resolvedRequests.slice(-10));t.requestedAt>e._latestResolvedRequestedAt?t.dfd.resolve.apply(t.dfd,[].slice.call(arguments)):t.dfd.reject();e._latestResolvedRequestedAt=t.requestedAt},function(){e.ongoingRequests.splice(e.ongoingRequests.indexOf(t),1);t.respondedAt=Date.now();t.dfd.reject.apply(t.dfd,[].slice.call(arguments))}).finally(function(){e.waitingForResponse&&a.call(e)});this.Send.emit(t.data,n)}return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(265),n(104)],s=function(t,e){var n;function i(t,e){var n,i={};for(n in t)"qSubNodes"!==n&&t.hasOwnProperty(n)&&(i[n]=t[n]);e.push(i);return i}function s(t,e,o){var r,a,l,c=[],u=[],d=0,p=0;if(o.length){d=o[0].qUp||0;p=o[o.length-1].qDown||0}for(r=0;r<o.length;++r){a=o[r];a.qSubNodes.length>0&&(u=s(t,e,a.qSubNodes));l=null;if(0===a.qSubNodes.length&&n>=t&&n<=t+e||u.length>0){l=i(a,c);void 0!==l.qUp&&1===c.length&&(l.qUp=d+r);l.qSubNodes=u}0===a.qSubNodes.length&&n++;if(n===t+e){l&&void 0!==l.qDown&&(l.qDown=p+(o.length-1-r));break}}return c}function o(t,e,i){n=0;return s(t,e,i)}var r,a=new e(0,0,0,0),l=new e(0,0,0,0);r=t.extend("PivotCubeSlicer",{init:function t(){this._super();this.requestedAreas=[]},getPage:function t(n){var i,s,o=[],r;for(s=0;s<this.pages.length;s++){i=this.pages[s].qArea;a.set(n.qLeft,n.qTop,n.qWidth,n.qHeight);l.set(i.qLeft,i.qTop,i.qWidth,i.qHeight);r=l.intersection(a,true);o.push({coverage:r?r.clone():new e(0,0,0,0),idx:s});if(i.qLeft<=n.qLeft&&i.qLeft+i.qWidth>=n.qLeft+n.qWidth&&i.qTop<=n.qTop&&i.qTop+i.qHeight>=n.qTop+n.qHeight)return this._extract(n,this.pages[s])}o.sort(function(t,e){return e.coverage.width*e.coverage.height-t.coverage.width*t.coverage.height});if(o[0].coverage.height>0&&o[0].coverage.width>0)return this._extract(n,this.pages[o[0].idx]);return{qLeft:[],qTop:[],qData:[],qArea:{qTop:n.qTop,qLeft:n.qLeft,qWidth:0,qHeight:0}}},_extract:function t(e,n){var i,s;a.set(e.qLeft,e.qTop,e.qWidth,e.qHeight);l.set(n.qArea.qLeft,n.qArea.qTop,n.qArea.qWidth,n.qArea.qHeight);var r=a.intersection(l,true),c,u,d;if(!r)return{qLeft:[],qTop:[],qData:[],qArea:{qTop:e.qTop,qLeft:e.qLeft,qWidth:0,qHeight:0}};d=Math.max(0,e.qTop-n.qArea.qTop);u=Math.max(0,e.qLeft-n.qArea.qLeft);c=n.qData.slice(d,d+r.height).map(function(t){return t.slice(u,u+r.width)});i=o(d,r.height,n.qLeft);s=o(u,r.width,n.qTop);return{qLeft:i,qTop:s,qData:c,qArea:{qTop:r.y,qLeft:r.x,qWidth:r.width,qHeight:r.height}}}});return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(49)],s=function(t,e){var n={};function i(t){t&&delete n[t]}function s(e,i){if(!e)throw new Error("Missing type: "+e);var s={translationKey:"",icon:"",iconChar:"e",isLibraryItem:true,visible:true};n[e]=t.extend(s,i)}function o(e,n){if(!n.icon)throw new Error("Missing icon for type: "+e);if(!n.iconChar)throw new Error("Missing iconChar for type: "+e);if(!n.iconPath)throw new Error("Missing iconPath for type: "+e);if(false!==n.isLibraryItem&&!n.descriptionKey)throw new Error("Missing descriptionKey for type: "+e);var i={name:e,template:e,author:"Qlik",isThirdParty:false};s(e,t.extend(i,n))}function r(e,n){var i={name:e,description:n.description||"",template:e,icon:"puzzle",iconChar:"puzzle",iconPath:"M14.5,9 L13,9 L13,3.3 C13,3.1 12.9,3 12.7,3 L8,3 L8,1.5 C8,0.7 7.3,0 6.5,0 C5.7,0 5,0.7 5,1.5 L5,3 L0.3,3 C0.1,3 0,3.1 0,3.3 L0,9 L1.5,9 C2.3,9 3,9.7 3,10.5 C3,11.3 2.3,12 1.5,12 L0,12 L0,15.7 C0,15.9 0.1,16 0.3,16 L5,16 L5,14.5 C5,13.7 5.7,13 6.5,13 C7.3,13 8,13.7 8,14.5 L8,16 L12.7,16 C12.9,16 13,15.9 13,15.7 L13,12 L14.5,12 C15.3,12 16,11.3 16,10.5 C16,9.7 15.3,9 14.5,9 Z",isThirdParty:true};var o=t.extend(i,n);"bar-chart-vertical"===o.icon&&(o.icon="bar-chart");s(e,o)}e.getFlag("DISABLE_AUTO_CHART")||o("auto-chart",{descriptionKey:"Template.preview.description.auto-chart",translationKey:"Object.AutoChart",icon:"effects",iconChar:"effects",iconPath:"M-3.26849658e-13,12.4318748 L11.4318748,1 L14.0699997,3.63812494 L2.63812494,15.0699997 L-3.26849658e-13,12.4318748 Z M2.63812494,14.1026872 L4.3968749,12.4318748 L2.63812494,10.6731248 L0.967312479,12.4318748 L2.63812494,14.1026872 Z M11.4318748,5.3968749 L13.1906247,3.63812494 L11.4318748,1.87937498 L9.67312479,3.63812494 L11.4318748,5.3968749 Z M5.62799988,2.93462496 L4.7486249,2.67081246 L5.54006238,2.14318748 L5.54006238,1.175875 L6.24356236,1.70349998 L7.12293735,1.43968749 L6.85912485,2.31906247 L7.38674984,3.11049995 L6.41943736,3.11049995 L5.89181237,3.81399994 L5.62799988,2.93462496 Z M15.5649372,5.13306241 L16.0046247,5.7486249 L15.3011247,5.7486249 L14.8614372,6.36418738 L14.6855622,5.6606874 L13.9820622,5.3968749 L14.5976247,4.95718741 L14.5976247,4.25368743 L15.2131872,4.69337492 L15.9166872,4.42956243 L15.5649372,5.13306241 Z M12.5750622,9.26612482 L12.2233122,10.4093123 L12.9268122,11.3766248 L11.7836247,11.3766248 L11.0801248,12.3439373 L10.7283748,11.2007498 L9.58518729,10.8489998 L10.5524998,10.1454998 L10.5524998,8.91437483 L11.5198123,9.61787481 L12.5750622,9.26612482 Z",visible:false});o("barchart",{descriptionKey:"Template.preview.description.barchart",translationKey:"Object.BarChart",icon:"bar-chart",iconChar:"bar_chart",iconPath:"M1,4 L3,4 C3.55228475,4 4,4.44771525 4,5 L4,15 C4,15.5522847 3.55228475,16 3,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,5 C-6.76353751e-17,4.44771525 0.44771525,4 1,4 Z M7,8 L9,8 C9.55228475,8 10,8.44771525 10,9 L10,15 C10,15.5522847 9.55228475,16 9,16 L7,16 C6.44771525,16 6,15.5522847 6,15 L6,9 C6,8.44771525 6.44771525,8 7,8 Z M13,0 L15,0 C15.5522847,-1.01453063e-16 16,0.44771525 16,1 L16,15 C16,15.5522847 15.5522847,16 15,16 L13,16 C12.4477153,16 12,15.5522847 12,15 L12,1 C12,0.44771525 12.4477153,1.01453063e-16 13,0 Z"});o("combochart",{descriptionKey:"Template.preview.description.combochart",translationKey:"Object.ComboChart",icon:"combo-chart",iconChar:"combo_chart",iconPath:"M3,10 L4,9 L4,16 L1,16 L1,12 L3,10 Z M8,11 L9,10 L9,16 L6,16 L6,9 L8,11 Z M11,8 L14,5 L14,16 L11,16 L11,8 Z M7.85226383,7.10149824 L13.8077922,1.14512991 C14.0012715,0.951623362 14.3149633,0.951623362 14.5084426,1.14512991 L14.8587678,1.49550452 C15.0522471,1.68901107 15.0522471,2.00274718 14.8587678,2.19625374 L7.85226383,9.20374588 L5.04966223,6.40074902 L1.19608505,10.2548697 C1.00260578,10.4483763 0.688913912,10.4483763 0.495434648,10.2548697 L0.145109449,9.9044951 C-0.0483698162,9.71098854 -0.0483698162,9.39725243 0.145109449,9.20374588 L5.04966223,4.29850138 L7.85226383,7.10149824 Z"});e.getFlag("CONTAINER_OBJECT")&&o("container",{descriptionKey:"Template.preview.description.container",translationKey:"Object.Container",icon:"box",iconChar:"box",iconPath:"M16,6 L15,6 L15,5 L1,5 L1,6 L-1.77635684e-15,6 L-1.77635684e-15,2 C-1.84399221e-15,1.44771525 0.44771525,1 1,1 L15,1 C15.5522847,1 16,1.44771525 16,2 L16,6 Z M11,2 L11,4 L15,4 L15,2.4 C15,2.1790861 14.8209139,2 14.6,2 L11,2 Z M6,2 L6,4 L10,4 L10,2 L6,2 Z M1.4,2 C1.1790861,2 1,2.1790861 1,2.4 L1,4 L5,4 L5,2 L1.4,2 Z M16,8 L16,11 L15,11 L15,8 L16,8 Z M16,13 L16,14 C16,14.5522847 15.5522847,15 15,15 L14,15 L14,14 L14.6,14 C14.8209139,14 15,13.8209139 15,13.6 L15,13 L16,13 Z M12,15 L9,15 L9,14 L12,14 L12,15 Z M7,15 L4,15 L4,14 L7,14 L7,15 Z M2,15 L1,15 C0.44771525,15 -6.53651803e-16,14.5522847 -1.70234197e-15,14 L-1.77635684e-15,13 L1,13 L1,13.6 C1,13.8209139 1.1790861,14 1.4,14 L2,14 L2,15 Z M-1.77635684e-15,11 L-1.77635684e-15,8 L1,8 L1,11 L-1.77635684e-15,11 Z"});o("distributionplot",{descriptionKey:"Template.preview.description.distributionplot",translationKey:"Object.DistributionPlot",icon:"distributionplot",iconChar:"distributionplot",iconPath:"M5,5 C3.9,5 3,4.1 3,3 C3,1.9 3.9,1 5,1 L14,1 C15.1,1 16,1.9 16,3 C16,4.1 15.1,5 14,5 L5,5 Z M14,8 C14,9.1 13.1,10 12,10 L2,10 C0.9,10 0,9.1 0,8 C0,6.9 0.9,6 2,6 L12,6 C13.1,6 14,6.9 14,8 Z M14,11 C15.1,11 16,11.9 16,13 C16,14.1 15.1,15 14,15 L6,15 C4.9,15 4,14.1 4,13 C4,11.9 4.9,11 6,11 L14,11 Z M12,2 C11.5,2 11,2.4 11,3 C11,3.6 11.4,4 12,4 C12.6,4 13,3.6 13,3 C13,2.4 12.6,2 12,2 Z M8,2 C7.5,2 7,2.4 7,3 C7,3.6 7.4,4 8,4 C8.6,4 9,3.6 9,3 C9,2.4 8.6,2 8,2 Z M4,9 C4.6,9 5,8.6 5,8 C5,7.4 4.6,7 4,7 C3.4,7 3,7.4 3,8 C3,8.6 3.5,9 4,9 Z M10,9 C10.6,9 11,8.6 11,8 C11,7.4 10.6,7 10,7 C9.4,7 9,7.4 9,8 C9,8.6 9.5,9 10,9 Z M10,14 C10.6,14 11,13.6 11,13 C11,12.4 10.6,12 10,12 C9.4,12 9,12.4 9,13 C9,13.6 9.4,14 10,14 Z"});o("boxplot",{descriptionKey:"Template.preview.description.boxplot",translationKey:"Object.BoxPlot",icon:"boxplot",iconChar:"boxplot",iconPath:"M15,9 L13,9 L13,13 C13,13.5522847 12.5522847,14 12,14 L4,14 C3.44771525,14 3,13.5522847 3,13 L3,9 L1.0625,9 L1.0625,10.46875 C1.0625,10.7621513 0.824651273,11 0.53125,11 C0.237848727,11 9.24109713e-16,10.7621513 8.8817842e-16,10.46875 L8.8817842e-16,5.53125 C8.52247127e-16,5.23784873 0.237848727,5 0.53125,5 C0.824651273,5 1.0625,5.23784873 1.0625,5.53125 L1.0625,7 L3,7 L3,3 C3,2.44771525 3.44771525,2 4,2 L12,2 C12.5522847,2 13,2.44771525 13,3 L13,7 L15,7 L15,5.53125 C15,5.23784873 15.2378487,5 15.53125,5 C15.8246513,5 16.0625,5.23784873 16.0625,5.53125 L16.0625,10.46875 C16.0625,10.7621513 15.8246513,11 15.53125,11 C15.2378487,11 15,10.7621513 15,10.46875 L15,9 Z M12,13 L12,3 L8,3 L8,13 L12,13 Z M7,13 L7,3 L4,3 L4,13 L7,13 Z"});o("filterpane",{descriptionKey:"Template.preview.description.filterpane",translationKey:"Object.FilterPane",icon:"filterpane",iconChar:"filterpane",iconPath:"M11,12.4863156 L8.07008534,8.35945066 C8.01004078,8.27487625 7.97778427,8.17372182 7.97778427,8.07000017 C7.97778427,7.7938578 8.20164189,7.57000017 8.47778427,7.57000017 L15.5221738,7.57000017 C15.6258954,7.57000017 15.7270499,7.60225668 15.8116243,7.66230124 C16.0367902,7.82216033 16.0897318,8.13428476 15.9298727,8.35945066 L13,12.4862565 L13,14.2491542 C13,14.3319207 12.9683969,14.4105936 12.9134166,14.4646953 L11.4134166,15.9407239 C11.3089266,16.0435439 11.1510567,16.030395 11.0608043,15.911355 C11.0215816,15.8596216 11,15.7935423 11,15.7251827 L11,12.4863156 Z M13,6 L12,6 L12,1.5 C12,1.22385763 11.7761424,1 11.5,1 L1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L9,15 L9,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 L12,0 C12.5522847,-1.01453063e-16 13,0.44771525 13,1 L13,6 Z"});o("gauge",{descriptionKey:"Template.preview.description.gauge",translationKey:"Object.Gauge",icon:"gauge-chart",iconChar:"gauge_chart",iconPath:"M2.63604397,14.9354012 C1.01716423,13.4714713 0,11.3545214 0,9 C0,4.581722 3.581722,1 8,1 C12.418278,1 16,4.581722 16,9 C16,11.3545214 14.9828358,13.4714713 13.363956,14.9354012 C12.9974483,14.298577 12.6309407,13.7270222 12.264433,13.2207366 C13.3374059,12.1367251 14,10.6457411 14,9 C14,5.6862915 11.3137085,3 8,3 C4.6862915,3 2,5.6862915 2,9 C2,10.6457411 2.66259413,12.1367251 3.73556701,13.2207366 C3.36905933,13.7270222 3.00255165,14.298577 2.63604397,14.9354012 Z M8.6785878,7.14391341 L12.0475946,5 L9.90368118,8.36900679 C10.1480944,9.07321165 9.9868748,9.88914692 9.42129812,10.4547236 C8.63472595,11.2412958 7.36391823,11.2457735 6.58286965,10.4647249 C5.80182106,9.68367637 5.80629882,8.41286865 6.592871,7.62629647 C7.15844768,7.06071979 7.97438295,6.89950016 8.6785878,7.14391341 Z"});o("histogram",{descriptionKey:"Template.preview.description.histogram",translationKey:"Object.Histogram",icon:"histogram",iconChar:"histogram",iconPath:"M14,11 L14,8.5 C14,8.22385763 14.2238576,8 14.5,8 L15.5,8 C15.7761424,8 16,8.22385763 16,8.5 L16,15 L14,15 L12,15 L10,15 L8,15 L6,15 L4,15 L2,15 L0,15 L0,6.5 C-3.38176876e-17,6.22385763 0.223857625,6 0.5,6 L2,6 L2,3.5 C2,3.22385763 2.22385763,3 2.5,3 L3.5,3 C3.77614237,3 4,3.22385763 4,3.5 L4,10 L6,10 L6,7.5 C6,7.22385763 6.22385763,7 6.5,7 L8,7 L8,1.5 C8,1.22385763 8.22385763,1 8.5,1 L9.5,1 C9.77614237,1 10,1.22385763 10,1.5 L10,3 L11.5,3 C11.7761424,3 12,3.22385763 12,3.5 L12,11 L14,11 Z"});o("kpi",{descriptionKey:"Template.preview.description.kpi",translationKey:"Object.Kpi",icon:"kpi",iconChar:"kpi",iconPath:"M16,2 L16,14 L14,14 L14,6 L12,6 L12,4 C13.7,4 14,3.2 14,2 L16,2 Z M7.9,5 L10,5 L10,6.5 L7.7,6.5 L7.3,9.5 L9,9.5 L9,11 L7.1,11 L6.7,14 L5.2,14 L5.6,11 L3.4,11 L3,14 L1.5,14 L1.9,11 L0,11 L0,9.5 L2.1,9.5 L2.5,6.5 L1,6.5 L1,5 L2.6,5 L3,2 L4.5,2 L4.1,5 L6.4,5 L6.8,2 L8.3,2 L7.9,5 Z M6.2,6.5 L3.9,6.5 L3.5,9.5 L5.7,9.5 L6.2,6.5 Z"});o("linechart",{descriptionKey:"Template.preview.description.linechart",translationKey:"Object.LineChart",icon:"line-chart",iconChar:"line_chart",iconPath:"M16,15 L16,16 L1.3,16 L0,16 L0,14.7 L0,0 L1,0 L1,13 L5.4,5.7 L9.4,8 L13.2,1.4 C13.5,0.9 14.4,0.8 14.9,1 C15.4,1.3 15.7,2.1 15.4,2.6 L10.4,11.4 L6.4,9.1 L3,15 L16,15 Z"});o("listbox",{descriptionKey:"Template.preview.description.listbox",translationKey:"Object.Listbox",icon:"list",iconChar:"list",iconPath:"M0,1 L16,1 L16,3 L0,3 L0,1 Z M0,7 L0,5 L16,5 L16,7 L0,7 Z M0,11 L0,9 L16,9 L16,11 L0,11 Z M0,15 L0,13 L16,13 L16,15 L0,15 Z",isLibraryItem:false});o("piechart",{descriptionKey:"Template.preview.description.piechart",translationKey:"Object.PieChart",icon:"pie-chart",iconChar:"pie_chart",iconPath:"M7,1 L7,8 L14,8 C14,11.8659932 10.8659932,15 7,15 C3.13400675,15 0,11.8659932 0,8 C0,4.13400675 3.13400675,1 7,1 Z M8,1.15888847e-31 C11.8659932,6.95889291e-16 15,3.13400675 15,7 L8,7 L8,-8.8817842e-16 Z"});o("pivot-table",{descriptionKey:"Template.preview.description.pivot-table",translationKey:"Object.PivotTable",icon:"pivot-table",iconChar:"pivot_table",iconPath:"M1,1 L15,1 C15.5522847,1 16,1.44771525 16,2 L16,14 C16,14.5522847 15.5522847,15 15,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,2 C-6.76353751e-17,1.44771525 0.44771525,1 1,1 Z M3,4 L3,14 L15,14 L15,4 L3,4 Z M1,2 L1,4 L3,4 L3,2 L1,2 Z M4,5 L8,5 L8,7 L4,7 L4,5 Z M9,5 L14,5 L14,7 L9,7 L9,5 Z M4,8 L8,8 L8,10 L4,10 L4,8 Z M9,8 L14,8 L14,10 L9,10 L9,8 Z M4,11 L8,11 L8,13 L4,13 L4,11 Z M9,11 L14,11 L14,13 L9,13 L9,11 Z"});o("map",{descriptionKey:"Template.preview.description.map",translationKey:"Object.Map",icon:"map",iconChar:"map",iconPath:"M2.714544,3.424368 L4.799632,3.010608 L5.381168,2.691824 L6.035584,2.880368 L7.08112,2.822496 L7.439328,2.259456 L7.96168,2.345392 L9.23016,2.226432 L9.579776,1.84112 L10.072688,1.511888 L10.77008,1.616816 L10.837536,1.606624 L13.796464,4.080256 L12.5564,4.215376 L12.236688,4.726016 L12.00464,4.652272 L11.10384,3.840016 L10.798096,2.967216 L10.231872,2.459344 L9.563904,2.328672 L9.548576,2.634384 L10.202944,3.272944 L10.177808,3.630192 L9.870128,3.751888 L9.430976,3.56872 L9.44592,3.214592 L8.86976,2.977664 L8.67848,3.810176 L8.097792,3.941824 L8.155216,4.40624 L8.911808,4.551872 L9.042496,3.809744 L9.667056,3.902032 L9.957392,4.072016 L10.423216,4.072016 L10.742,4.710624 L11.58728,5.568048 L11.525264,5.90136 L10.84376,5.814512 L9.666144,6.409232 L8.818176,7.42632 L8.70784,7.876704 L8.403504,7.876704 L7.836368,7.61536 L7.28552,7.876704 L7.422608,8.457872 L7.662304,8.181504 L8.083744,8.168448 L8.054384,8.690304 L8.403504,8.792528 L8.752144,9.184128 L9.321536,9.024032 L11.30464,9.397632 L11.743728,10.099904 L12.978864,10.624992 L12.179696,12.350704 L11.337168,12.742368 L10.836592,13.734576 L9.798224,14.427856 L9.700144,14.782464 L8.883424,14.937984 L8.818176,14.18096 L9.144224,12.859488 L8.300368,10.752992 L8.679168,9.963632 L7.767216,9.086 L6.585936,8.820976 L6.193856,8.000672 L6.193856,8.487728 L6.02112,8.487728 L5.00312,7.107472 L5.00312,5.973696 L4.091824,4.92544 L2.273872,4.971552 L1.872256,4.708368 L2.38464,4.30224 L2.015568,4.387504 L2.714544,3.424368 Z M9.492,1.472096 L8.81776,1.985408 L8.173776,2.050096 L7.883856,1.861936 L9.026256,1.203056 L9.492,1.472096 Z M7.120064,2.056384 L6.152224,2.310608 L5.686896,2.03832 L6.152224,1.660704 L6.472416,1.794112 L6.891664,1.660704 L7.120064,2.056384 Z M8,0 C3.581728,0 0,3.581712 0,8 C0,12.418272 3.581728,16 8,16 C12.418288,16 16,12.418272 16,8 C16,3.581712 12.418288,0 8,0 Z"});o("scatterplot",{descriptionKey:"Template.preview.description.scatterplot",translationKey:"Object.ScatterPlot",icon:"scatter-chart",iconChar:"scatter_chart",iconPath:"M4,0 C6.2,0 8,1.8 8,4 C8,6.2 6.2,8 4,8 C1.8,8 0,6.2 0,4 C0,1.8 1.8,0 4,0 Z M12.5,5 C14.4,5 16,6.6 16,8.5 C16,10.4 14.4,12 12.5,12 C10.6,12 9,10.4 9,8.5 C9,6.6 10.6,5 12.5,5 Z M5.5,11 C6.9,11 8,12.1 8,13.5 C8,14.9 6.9,16 5.5,16 C4.1,16 3,14.9 3,13.5 C3,12.1 4.1,11 5.5,11 Z"});o("table",{descriptionKey:"Template.preview.description.table",translationKey:"Object.Table",icon:"table",iconChar:"table",iconPath:"M1,1 L15,1 C15.5522847,1 16,1.44771525 16,2 L16,14 C16,14.5522847 15.5522847,15 15,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,2 C-6.76353751e-17,1.44771525 0.44771525,1 1,1 Z M1,4 L1,14 L15,14 L15,4 L1,4 Z M7,5 L10,5 L10,7 L7,7 L7,5 Z M11,5 L14,5 L14,7 L11,7 L11,5 Z M2,5 L6,5 L6,7 L2,7 L2,5 Z M7,8 L10,8 L10,10 L7,10 L7,8 Z M11,8 L14,8 L14,10 L11,10 L11,8 Z M2,8 L6,8 L6,10 L2,10 L2,8 Z M7,11 L10,11 L10,13 L7,13 L7,11 Z M11,11 L14,11 L14,13 L11,13 L11,11 Z M2,11 L6,11 L6,13 L2,13 L2,11 Z"});o("text-image",{descriptionKey:"Template.preview.description.text-image",translationKey:"Object.TextImage",icon:"text",iconChar:"text",iconPath:"M5.52083333,11.9375 L4.5,15 L1,15 L6.425,1 L9.6625,1 L15,15 L11.5,15 L10.4791667,11.9375 L5.52083333,11.9375 Z M6.25,9.75 L9.75,9.75 L8,4.5 L6.25,9.75 Z"});o("treemap",{descriptionKey:"Template.preview.description.treemap",translationKey:"Object.Treemap",icon:"treemap",iconChar:"treemap",iconPath:"M9.3,5 C9.1,5 9,4.9 9,4.7 L9,0.3 C9,0.1 9.1,0 9.3,0 L15.7,0 C15.8,0 16,0.1 16,0.3 L16,4.7 C16,4.9 15.8,5 15.7,5 L9.3,5 Z M11.7,12 C11.9,12 12,12.1 12,12.3 L12,15.7 C12,15.9 11.9,16 11.7,16 L9.3,16 C9.1,16 9,15.9 9,15.7 L9,12.3 C9,12.2 9.1,12 9.3,12 L11.7,12 Z M6.7,0 C6.9,0 7,0.1 7,0.3 L7,7.7 C7,7.9 6.9,8 6.7,8 L0.3,8 C0.1,8 0,7.9 0,7.7 L0,0.3 C0,0.1 0.1,0 0.3,0 L6.7,0 Z M6.7,10 C6.9,10 7,10.1 7,10.3 L7,15.7 C7,15.9 6.9,16 6.7,16 L0.3,16 C0.1,16 0,15.9 0,15.7 L0,10.3 C0,10.1 0.1,10 0.3,10 L6.7,10 Z M15.7,12 C15.9,12 16,12.1 16,12.3 L16,15.7 C16,15.9 15.9,16 15.7,16 L14.3,16 C14.1,16 14,15.9 14,15.7 L14,12.3 C14,12.1 14.1,12 14.3,12 L15.7,12 Z M15.7,7 C15.9,7 16,7.2 16,7.3 L16,9.7 C16,9.9 15.9,10 15.7,10 L9.3,10 C9.1,10 9,9.9 9,9.7 L9,7.3 C9,7.2 9.1,7 9.3,7 L15.7,7 Z"});o("waterfallchart",{descriptionKey:"Template.preview.description.waterfallchart",translationKey:"Object.WaterfallChart",icon:"waterfallchart",iconChar:"waterfallchart",iconPath:"M0.5,1 L2.5,1 C2.77614237,1 3,1.22385763 3,1.5 L3,14.5 C3,14.7761424 2.77614237,15 2.5,15 L0.5,15 C0.223857625,15 3.38176876e-17,14.7761424 0,14.5 L0,1.5 C-3.38176876e-17,1.22385763 0.223857625,1 0.5,1 Z M5,1 L7,1 C7.27614237,1 7.5,1.22385763 7.5,1.5 L7.5,4.5 C7.5,4.77614237 7.27614237,5 7,5 L5,5 C4.72385763,5 4.5,4.77614237 4.5,4.5 L4.5,1.5 C4.5,1.22385763 4.72385763,1 5,1 Z M9,5 L11,5 C11.2761424,5 11.5,5.22385763 11.5,5.5 L11.5,8.5 C11.5,8.77614237 11.2761424,9 11,9 L9,9 C8.72385763,9 8.5,8.77614237 8.5,8.5 L8.5,5.5 C8.5,5.22385763 8.72385763,5 9,5 Z M13.5,9 L15.5,9 C15.7761424,9 16,9.22385763 16,9.5 L16,14.5 C16,14.7761424 15.7761424,15 15.5,15 L13.5,15 C13.2238576,15 13,14.7761424 13,14.5 L13,9.5 C13,9.22385763 13.2238576,9 13.5,9 Z"});o("widget",{translationKey:"Object.Widget",icon:"widget",iconChar:"widget",iconPath:"M1,12.1 L7,16 L7,11.2 L1,7.3 L1,12.1 Z M9,12.1 L9,16 L15,12.1 L15,7.3 L9,11.2 L9,12.1 Z M8,2.1 C9,2.1 9.8,1.6 9.8,1 C9.8,0.5 9,0 8,0 C7,0 6.2,0.5 6.2,1.1 C6.2,1.7 7,2.1 8,2.1 Z M13.5,3.9 L13.5,4.5 C13.5,5.1 12.7,5.6 11.7,5.6 C10.7,5.6 9.9,5.1 9.9,4.5 L9.9,3.4 C10,3.9 10.8,4.4 11.7,4.4 C12.7,4.4 13.5,3.9 13.5,3.3 C13.5,2.7 12.7,2.2 11.7,2.2 C11.4,2.2 11.2,2.2 10.9,2.3 L9.8,1.6 L9.8,2.3 C9.8,2.9 9,3.4 8,3.4 C7,3.4 6.2,2.9 6.2,2.3 L6.2,1.6 L5.1,2.3 C4.8,2.2 4.6,2.2 4.3,2.2 C3.3,2.2 2.5,2.7 2.5,3.3 C2.5,3.9 3.3,4.4 4.3,4.4 C5.3,4.4 6,4 6.1,3.4 L6.1,4.5 C6.1,5.1 5.3,5.6 4.3,5.6 C3.3,5.6 2.5,5.1 2.5,4.5 L2.5,3.9 L1,4.7 L8,9.2 L15,4.7 L13.5,3.9 Z M9.8,6.9 C9.8,7.5 9,7.9 8,7.9 C7,7.9 6.2,7.5 6.2,6.9 L6.2,5.8 L6.2,5.6 C6.2,6.2 7,6.7 8,6.7 C9,6.7 9.8,6.2 9.8,5.6 L9.8,5.8 L9.8,6.9 Z",name:"Widget",description:"Qlik Sense Widget",isLibraryItem:false});return{registerThirdPartyLibraryInfo:r,remove:i,getLibraryInfo:function e(i){return t.extend({},n[i])}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(100),n(327)],s=function(t,e){function n(t,e){this.id=t;Object.defineProperties(this,{id:{value:t},properties:{value:e}})}n.prototype.getStyle=function(t,n,i){var s=new e(t,this.id,this.properties);return s.getStyle(n,i,false)};n.prototype.apply=function(){return t.applyTheme(this.id).then(function(t){return t})};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(140),n(110),n(254),n(158)],s=function(t,e,n,i,s){var o=n.NxLocalizedErrorCode;var r,a;function l(t,e,n,i){return t.session.rpc({method:e,handle:-1,params:n||[]}).then(function(t){i&&i(t.result);return t.result})}function c(n,i,s){t.$apply(t.$rootScope,function(){e.getList(n).then(function(t){s&&n.close();i(t)},function(){r&&r({code:o.LOCERR_GENERIC_CONNECTION_LOST,message:"ErrorCode."+o.LOCERR_GENERIC_CONNECTION_LOST})})})}function u(t){s.initClient();if(t instanceof i){this.session=t;this.qEvent=t.options.qEvent}else if(t.app&&t.rpc){var e=i.getIfCached(t.app.id,t.sessionConfig);this.session=e||i.get(t.app.id,t.sessionConfig);this.session.open()}else{this.session=i.get("?transient=",t);this.session.open();this.qEvent=t.qEvent}}u.setErrorCallback=function(t,e){r=t;a=e};u.get=function(t){t=t||{};this._qEvent&&(t._qEvent=this._qEvent);var e=s.makeConfig(t);e.onError=r?function(t){t=t||{};t.code!==o.LOCERR_GENERIC_CONNECTION_LOST&&r(t||{code:o.LOCERR_GENERIC_CONNECTION_LOST,message:"Connection lost"})}:r;return new u(e)};u.getAppList=function(t,e){var n=s.makeConfig(e);n.onError=r?function(t){t=t||{};t.code!==o.LOCERR_GENERIC_CONNECTION_LOST&&r(t||{code:o.LOCERR_GENERIC_CONNECTION_LOST,message:"Connection lost"})}:r;a&&(n.onWarning=a);var l=i.get("?transient=",n);l.open();c(l,t,true)};u.prototype.getAppList=function(t){c(this.session,t,false)};u.prototype.getAuthenticatedUser=function(t){return l(this,"GetAuthenticatedUser",[],t)};u.prototype.isPersonalMode=function(t){return l(this,"IsPersonalMode",[],t)};u.prototype.getQTProduct=function(t){return l(this,"QTProduct",[],t)};u.prototype.getProductVersion=function(t){return l(this,"ProductVersion",[],t)};u.prototype.cancelReload=function(){return l(this,"CancelReload")};u.prototype.getProgress=function(t,e){return l(this,"GetProgress",[t],e)};u.prototype.GetProgress=function(t,e){return this.getProgress(t,e)};u.prototype.on=function(t,e){this.qEvent.register({scope:"QGlobal",name:t,callback:e})};u.prototype.off=function(t){this.qEvent.clear(t)};return u}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){this.handlers=t||[]}t.prototype.register=function(t){this.handlers[t.name]||(this.handlers[t.name]=[]);this.handlers[t.name].push({scope:t.scope,callback:t.callback})};t.prototype.emit=function(t,e){if(this.handlers[t]){var n=this.handlers[t].filter(function(t){return"root"!==t.scope}).length>0;for(var i in this.handlers[t])(n&&"root"!==this.handlers[t][i].scope||!n)&&this.handlers[t][i].callback(e)}};t.prototype.hasHandlers=function(t){return!!this.handlers[t]};t.prototype.clear=function(t){t?delete this.handlers[t]:this.handlers=[]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(102),n(231),n(158)],s=function(t,e,n){function i(t,n,i){Object.defineProperties(this,{qFallbackTitle:{value:t.qFallbackTitle},qSortIndicator:{value:t.qSortIndicator},qReverseSort:{value:t.qReverseSort||false},col:{value:n},isOrderedBy:{value:n===i.qHyperCube.qEffectiveInterColumnSortOrder[0]},isDimension:{value:n<i.qHyperCube.qDimensionInfo.length},selections:{value:[]},parent:{value:i}});this.isDimension?Object.defineProperties(this,{qCardinal:{value:t.qCardinal},qStateCounts:{value:t.qStateCounts},qDimensionInfo:{value:t}}):Object.defineProperties(this,{qMax:{value:t.qMax},qMin:{value:t.qMin},qMeasureInfo:{value:t}});t.qGroupFieldDefs&&t.qGroupFieldDefs.length>0&&Object.defineProperties(this,{field:{value:i.app.field(t.qGroupFieldDefs[t.qGroupPos])}});t.qError&&Object.defineProperties(this,{errorCode:{value:t.qError.qErrorCode},errorMessage:{value:this.isDimension?e.getDimensionError(t.qError.qErrorCode):e.getMeasureError(t.qError.qErrorCode)}})}i.prototype.orderBy=function(){var t=[this.col];this.parent.qHyperCube.qEffectiveInterColumnSortOrder.forEach(function(e){e!==t[0]&&t.push(e)});var e=[{qPath:"/"+this.parent.defPath+"/qInterColumnSortOrder",qOp:"replace",qValue:"["+t.join(",")+"]"}];return this.parent.model.applyPatches(e,true)};i.prototype.reverseOrder=function(){var t=this.col<this.parent.qHyperCube.qDimensionInfo.length;var e=[{qPath:"/"+this.parent.defPath+(t?"/qDimensions/"+this.col:"/qMeasures/"+(this.col-this.parent.qHyperCube.qDimensionInfo.length))+"/qDef/qReverseSort",qOp:"replace",qValue:(!this.qReverseSort).toString()}];return this.parent.model.applyPatches(e,true)};i.prototype.isSelected=function(t){return this.selections.indexOf(t)>-1};i.prototype.toggleSelect=function(t){var e=this.selections.indexOf(t);e<0?this.selections.push(t):this.selections.splice(e,1)};i.prototype.selectRange=function(t,e,n,i){var s={qMeasureIx:this.col-this.parent.qHyperCube.qDimensionInfo.length,qRange:{qMin:t,qMax:e,qMinInclEq:n,qMaxInclEq:i}};return this.parent.model.rangeSelectHyperCubeValues("/"+this.parent.defPath,[s],[],false)};function s(t,e,n,i){Object.defineProperties(this,{qDimensionInfo:{value:e},qText:{value:t.qIsOtherCell?e.othersLabel:t.qText},qElemNumber:{value:t.qElemNumber},qState:{value:t.qState},col:{value:n},selected:{get:function t(){return this.header.isSelected(this.qElemNumber)}},header:{get:function t(){return this.parent.headers[this.col]}},parent:{value:i}});Number.isNaN(+t.qNum)||Object.defineProperties(this,{qNum:{value:t.qNum}})}s.prototype.select=function(){this.header.toggleSelect(this.qElemNumber);return this.parent.view&&this.parent.view.selectValues?this.parent.view.selectValues(this.col,[this.qElemNumber],true):this.parent.model.selectHyperCubeValues("/"+this.parent.defPath,this.col,[this.qElemNumber],true)};function o(t,e,n){Object.defineProperties(this,{qMeasureInfo:{value:e},qGrandTotal:{value:n},qText:{value:t.qText}});Number.isNaN(+t.qNum)||Object.defineProperties(this,{qNum:{value:t.qNum}})}o.prototype.getPercentOfMax=function(){return Math.round(100*this.qNum/this.qMeasureInfo.qMax*100)/100};o.prototype.getPercent=function(){return Math.round(100*this.qNum/this.qGrandTotal.qNum*100)/100};function r(t,e,n){var i=[],r=[],a=[],l=e.qDimensionInfo.length,c=e.columnOrder;t.forEach(function(t,a){a<l?i.push(new s(t,e.qDimensionInfo[a],a,n)):r.push(new o(t,e.qMeasureInfo[a-l],e.qGrandTotalRow[a-l]))});c?c.forEach(function(t){a.push(t<l?i[t]:r[t-l])}):a=i.concat(r);Object.defineProperties(this,{dimensions:{value:i},measures:{value:r},cells:{value:a}})}function a(e,n,i){t.create(this,"OnData");Object.defineProperties(this,{app:{value:e},path:{value:i||"qHyperCube"},defPath:{get:function t(){return this.path+"Def"}},rows:{value:[]},headers:{value:[]},totals:{value:[]},rowCount:{get:function t(){if(this.qHyperCube&&this.qHyperCube.qSize)return this.qHyperCube.qSize.qcy}},colCount:{get:function t(){if(this.qHyperCube&&this.qHyperCube.qSize)return this.qHyperCube.qSize.qcx}}});if("function"===typeof n.then){var s=this;n.then(function(t){l(s,t)})}else{var o=n.backendApi?n.backendApi.model:n;l(this,o,n.backendApi?n:void 0)}}function l(t,e,n){Object.defineProperties(t,{model:{value:e},view:{value:n}});c(t);if(t.model&&t.model.Validated){t._OnModelValid=function(){c(t)};t.model.Validated.bind(t._OnModelValid)}}function c(t){!t.qHyperCube&&t.model.layout&&(t.qHyperCube=t.model.layout[t.path]);if(t.model&&t.model.layout&&t.model.layout.qSelectionInfo&&t.model.layout.qSelectionInfo.qInSelections)return;t.headers.length=0;t.totals.length=0;t.rows.length=0;if(t.qHyperCube){var e=t.qHyperCube.qDimensionInfo?t.qHyperCube.qDimensionInfo.length:0,n=t.qHyperCube.columnOrder;t.qHyperCube.qDimensionInfo&&t.qHyperCube.qDimensionInfo.forEach(function(e,s){if(n){var o=n.indexOf(s);t.headers[o]=new i(e,s,t)}else t.headers.push(new i(e,s,t))});t.qHyperCube.qMeasureInfo&&t.qHyperCube.qMeasureInfo.forEach(function(s,o){if(n){var r=n.indexOf(o+e);t.headers[r]=new i(s,o+e,t)}else t.headers.push(new i(s,o+e,t))});t.qHyperCube.qGrandTotalRow&&t.qHyperCube.qGrandTotalRow.forEach(function(e,n){t.totals.push(new o(e,t.qHyperCube.qMeasureInfo[n]))});u(t,t.qHyperCube.qDataPages)}t.OnData.emit()}function u(t,e){e&&e.forEach(function(e){e.qMatrix.forEach(function(e){t.rows.push(new r(e,t.qHyperCube,t))})})}a.prototype.getMoreData=function(){if(this.requestActive)return;if(this.rowCount<=this.rows.length)return;this.requestActive=true;var t=this,e={qTop:this.rows.length,qLeft:0,qWidth:this.colCount,qHeight:50};return t.view?t.view.backendApi.getData([e]).then(function(e){u(t,e);t.requestActive=false;t.OnData.emit()}):t.qHyperCube?t.model.getHyperCubeData("/qHyperCubeDef",[e]).then(function(e){u(t,e);t.requestActive=false;t.OnData.emit()}):null};a.prototype.getColByName=function(t){if(!t)return;var e=t.toUpperCase(),n;this.headers.forEach(function(t,i){t.qFallbackTitle.toUpperCase()===e&&(n=i)});return n};a.prototype.exportData=function(t,e){t=t||{};return this.model.exportData(t.format||"OOXML","/"+this.defPath,t.filename,t.state||"P").then(function(i){var s=this.app.global;var o=s&&s.session.options;o=n.makeConfig(o);var r=o.prefix+i.qUrl.substring(1);t.download&&window.open(r);e&&e(r);return r}.bind(this))};a.prototype.destroy=function(){if(this.model&&this.model.Validated&&this._OnModelValid){this.model.Validated.unbind(this._OnModelValid);delete this._OnModelValid}};return a}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(89),n(247),n(636),n(90)],s=function(t,e,n,i,s,o){var r={template:s,scope:{id:"@",app:"=",object:"=",onDone:"=",size:"=",area:"="},controller:["$scope","$element",function(t,e){var n=l(t.id,t.object,t.area,t.app),i={width:t.size.width,height:t.size.height},s=n.snap;t.data=n.data;t.style={width:i.width+"px",height:i.height+"px"};s.then(function(e){t.onDone(e)});t.$on("$destroy",function(){n.cancel()});e.on("$destroy",function(){t.$destroy()})}]};var a=[];function l(t,s,r,a){var l=e.getService("$timeout"),c=n();var u=false;function p(){u=true;c.reject()}var h={object:{}},f=n.all({model:s&&s.model||a.getObject(t),viewState:s&&s.getViewState?s.getViewState():void 0}).then(function(t){if(u)return{};h.model=t.model;h.options={viewState:t.viewState,components:{scrollArea:{show:true}},onRendered:function t(e){c.resolve({doSnap:!e})}};return l(function(){return h.object.loaded?h.object.loaded.then(function(){var t=h.object;if(!t.supportExport()&&"auto-chart"!==o.getValue(t,"ext.type"))return;return c.promise.then(function(e){if(false===e.doSnap||"auto-chart"===o.getValue(t,"ext.type")&&!t.supportExport())return;var n=d(r,h.object.layout,h.object);return i.prepSnapshotData(h.object.layout,h.object,true,{ignoreReducedData:false},false).then(function(t){return h.object.model.app.getLayout().then(function(e){n.snapshotData=i.formatSnapshotForRendering(t,e.qLocaleInfo);return n})})})}):{}},0,false)});return{data:h,snap:f,cancel:p}}function c(e){var n=a.indexOf(e);n>=0&&a.splice(n,1);var i=t(e).children("div");if(i.scope&&i.scope()){i.scope().$destroy();i.scope().destroyComponent()}t(e).remove()}function u(){var t;while(t=a.pop())c(t)}function d(t,e,n){var i=n.ext&&n.ext.libraryInfo&&n.ext.libraryInfo.isThirdParty;var s={id:e.qInfo.qId,type:e.qInfo.qType,snapshotData:null,area:t,children:[],isExtension:i,title:e.title||""};return s}return{snapshot:function e(s,o,l,u,p,h){var f=n();var g={type:"object",size:o,snapshotData:{}};if(l&&l.loaded&&(l.ext&&l.ext.libraryInfo.isThirdParty||o.width===u.width&&o.height===u.height))return l.loaded.then(function(){g=d(p,l.layout,l);if(!l.supportExport())return g;return i.prepSnapshotData(l.layout,l,true,{ignoreReducedData:false},false).then(function(t){return l.model.app.getLayout().then(function(e){g.snapshotData=i.formatSnapshotForRendering(t,e.qLocaleInfo);return g})})});var v=document.createElement("div");v.className="qv-snapshotter";a.push(v);document.body.appendChild(v);t(v).showComponent(r,{id:s,object:l,size:o,area:p,app:h,onDone:function t(e){f.resolve(e);c(v)}});return f.promise},loadObject:l,cancel:function t(){u()}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(89),n(120),n(128),n(337),n(637)],s=function(t,e,n,i,s,o){var r={template:o,scope:{sheetId:"@",sheet:"@",size:"@",onDone:"@",sheetLayout:"@"},controller:["$scope","$timeout","$element",function(t,o,r){var a={area:{left:0,top:0,width:1,height:1}};var l=1e5,c=e(),d,p={},h=t.sheet===i.getModel(),f={width:t.size.width,height:t.size.height},g=t.sheetLayout===u.FULL,v=function e(n){if(false===n)t.onDone(false);else{a.size=f;a.children=n?n.filter(function(t){return t}):[];t.onDone(a)}};t.cells=[];t.style={width:f.width+"px",height:f.height+"px"};t.$on("$destroy",function(){c.reject();o.cancel(d)});r.on("$destroy",function(){t.$destroy()});if(h){var m=i.getGrid()&&i.getGrid().cells||[];m.forEach(function(t){p[t.id]=t.object})}n.get(t.sheetId).then(function(n){n.getLayout().then(function(i){var r=i.columns,u=i.rows,h=[];a.id=i.qInfo.qId;a.type=i.qInfo.qType;a.title=i.labelExpression||i.qMeta.title||"";i.cells.forEach(function(e){var i,o,a,l={left:e.col/r,top:e.row/u,width:e.colspan/r,height:e.rowspan/u};if(p[e.name]&&!p[e.name].ext)return;if(p[e.name]&&p[e.name].ext.libraryInfo.isThirdParty)a=s.snapshot(e.name,{width:f.width*(g?1:l.width),height:f.height*(g?1:l.height)},p[e.name],{},l,n.enigmaModel.app).then(function(t){return t});else{i=s.loadObject(e.name,p[e.name],l,n.enigmaModel.app);o={style:g?{left:0,top:0,width:"100%",height:"100%"}:{left:100*e.col/r+"%",top:100*e.row/u+"%",width:100*e.colspan/r+"%",height:100*e.rowspan/u+"%"},data:i.data};o.data.area=l;a=i.snap.then(function(t){return t});t.cells.push(o)}h.push(a)});if(h.length){e.all(h).then(function(t){c.resolve();o.cancel(d);v(t);return c.promise});d=o(function(){c.reject();v(false)},l)}else v()})},function(){v()})}]};var a=[];function l(e){var n=a.indexOf(e);n>=0&&a.splice(n,1);var i=t(e).children("div");i.scope&&i.scope()&&i.scope().$destroy();t(e).remove()}function c(){var t;while(t=a.pop())l(t)}var u={FULL:"full",GRID:"grid"};return{snapshot:function n(i,s,o,c){var u=e(),d=document.createElement("div");d.className="qv-snapshotter";a.push(d);document.body.appendChild(d);t(d).showComponent(r,{sheetId:i,sheet:o,size:s||{},sheetLayout:c,onDone:function t(e){false===e?u.reject({timedOut:true}):u.resolve(e);l(d)}});return u.promise},cancel:function t(){c()}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(93),n(340),n(338),n(173),n(48),n(152),n(247),n(423),n(646),n(452)],s=function(t,e,n,i,s,o,r,a,l,c,u){function d(t,e){return t?s.get(t).then(function(t){return t.apply()},function(){}):n.get(e).then(function(t){return t.getSnapshotObject().then(function(t){t.apply()})})}var p=function t(e,n,s,l,p,h){var f=window.location.protocol+"//"+window.location.host;var g={properties:{origin:f},snapshotData:null};var v={image:function t(e){g.properties.qUrl=e.srcPath.qStaticContentUrl.qUrl;g.properties.resourceUrl=f+e.srcPath.qStaticContentUrl.qUrl},text:function t(e){var n=null;var i=e.style.text;var a=o.getService("$sce");"string"===typeof i&&(n=a.getTrustedHtml(r.toHTML(i)));if("title"===e.visualizationType){var d=u.calculatePrintTitleFontSize(n,s.height-10,1.32);n=c.enrichHtml(n,l,true,d+"px")}else{var h=u.calculatePrintParagraphFontSize(p.height);n=c.enrichHtml(n,l,false,h+"px")}g.properties.html=n;g.properties.color=e.style.color;g.properties.text=i},shape:function t(e){g.properties.dataPath=e.dataPath;g.properties.resourceUrl=f+"/"+e.dataPath;g.properties.color=e.style.color},snapshot:function t(e){false!==e.qEmbeddedSnapshot.supportExport?g.snapshotData=a.formatSnapshotForRendering(e.qEmbeddedSnapshot,h.qLocaleInfo):g.invalid=true},sheet:function t(e,n){var s=e.qInfo.qId;var o=e.selectionState?e.selectionState.init:null;g=d(o,s).then(function(){return i.snapshot(e.sheetId,n)})}};v[e]&&v[e](n,s);return g};function h(t,e,i,s,o){return n.get(t.qInfo.qId).then(function(n){return n.getLayout().then(function(n){return p(t.qData.visualization,n,e,i,s,o)})})}function f(t){var e={"z-index":t["z-index"]};["left","top","width","height"].forEach(function(n){e[n]=parseFloat(t[n])/100});return e}function g(t){return"auto"===t.left?l.getPosition("align-right"):"auto"===t.right?l.getPosition("align-left"):t}function v(n,i,s){var o=s.dpi;return e.getApp().then(function(t){return t.getObject(n)}).then(function(e){return t.all([e.app.getLayout(),e.getLayout()]).then(function(e){var n=e[0];var s=e[1];var r=s.qChildList.qItems;if(!r.length)return[];return t.all(r.map(function(t){var e=t.qData.position;"sheet"===t.qData.visualization&&(e=g(t.qData.position));var s=f(e);var r={width:i.width*s.width,height:i.height*s.height};return h(t,r,o,i,n).then(function(e){if(!e.invalid){var n={id:t.qInfo.qId,type:t.qInfo.qType,visualization:t.qData.visualization,visualizationType:t.qData.visualizationType,snapshotData:e.snapshotData,size:e.size,children:e.children,area:s,properties:e.properties,title:e.title||""};return n}})}))})})}return{snapshot:function t(e,n,i,s){return v(e,n||{},s).then(function(t){return{id:e,type:"slide",area:null,snapshotData:null,children:t.filter(function(t){return!!t})}})}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(89),n(93)],s=function(t,e,n){function i(t){return t?e.resolve(t.enigmaModel):n.getApp()}var s={};s.get=function(t,e){return i(e).then(function(e){return e.getObject(t)})};s.create=function(e,n){var i={qInfo:{qId:t.generateId(),qType:"slideitem"},qEmbeddedSnapshotDef:{},title:"",sheetId:"",ratio:e.ratio,position:e.position,dataPath:e.dataPath,srcPath:e.srcPath,visualization:e.visualization,visualizationType:e.visualizationType,style:e.style};return n.createChild(t.extend(true,i,e),null)};return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(333),n(100)],s=function(t,e){function n(){}n.getThemeList=function(){return e.getAvailableThemes().then(function(t){return t.custom?t.default.concat(t.custom):t.default})};n.prototype.apply=function(t){return e.applyTheme(t).then(function(t){return t})};n.prototype.get=function(n){return e.getThemeJSON(n).then(function(e){return new t(n,e)})};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t,e,n,i,s,o,r){if(t instanceof Array&&!t[0].pointInside&&!t.pointInside)throw new Error('The shape must implement a "pointInside" function');this.setShape(t);this.selected=!!e;this.value=n;this.parent=i;this.index=s;this.objectShapes={};if(o){this.parent=o.parent;this.node=o;this.rowIndex=o.data.rowIndex;this.label=o.data.qText;this.id=o.data.qElemNo}r&&t&&(this.objectShapes[r]=t instanceof Array?t:[t])}t.prototype={getShapes:function t(e){return(e||0===e)&&this.objectShapes&&this.objectShapes[e]?this.objectShapes[e]:this.shapes?this.shapes:[this.shape]},addShape:function t(e,n){this.objectShapes[e]instanceof Array||(this.objectShapes[e]=[]);this.objectShapes[e].push(n);this.shapes.push(n)},setShape:function t(e){this.shape=e instanceof Array?e[0]:e;this.shapes=e?e instanceof Array?e:[e]:[]},addValue:function t(e){void 0===this.value&&(this.value=[]);this.value instanceof Array||(this.value=[this.value]);this.value.push(e)}};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(92),n(146),n(651)],s=function(t,e,n,i){function s(t){var e=this.indexOf(t);if(e>=0)return this.splice(e,1);return null}function o(t,e){return Object.keys(e).filter(function(n){return e[n].filter(function(e){return e===t}).length})[0]}var r=e.extend({init:function e(n,s){this.options=t.extend(true,{},{components:{}},s);this._selectedShapes=[];this._cssTransform={scale:1};this.components=this.options.components;this.shapesFrom=new i(n,s)},setActiveComponent:function t(e){this.activeComponent=e;this.shapesFrom.activeComponent=e},initComponent:function t(){throw new Error("base.js: initComponent has to be implemented in subclass")},setComponent:function t(e,n){var i=Array.isArray(n)?n.concat():[n];i.forEach(function(t){var e=o(t,this.components);e&&this.removeComponent(e,t)},this);switch(e){case"x":case"y":case"dataArea":case"colorLegend":this.components[e]&&this.components[e].forEach(function(t){-1===i.indexOf(t)&&this.deregister(this,t)},this);i.forEach(function(t){this.components[e]&&-1!==this.components[e].indexOf(t)||this.register(this,t)},this);this.components[e]=i;break;default:throw new Error("Key "+e+" not implemented")}},addComponent:function t(e,n){switch(e){case"x":case"y":case"dataArea":case"colorLegend":this.components[e]||(this.components[e]=[]);var i=s.call(this.components[e],n);!i&&this.register(this,n);this.components[e].push(n);break;default:throw new Error('Key " + key + " not implemented')}},removeComponent:function t(e,n){switch(e){case"x":case"y":case"dataArea":case"colorLegend":this.components[e]&&n&&s.call(this.components[e],n);n&&this.components[e]&&this.components[e].length||delete this.components[e];this.deregister(this,n);break;default:throw new Error('Key " + key + " not implemented')}},register:function t(){},deregister:function t(){},getComponent:function t(e,i,s){var o=new n(e-s.x,i-s.y);return Object.keys(this.components).map(function(t){return this.components[t]},this).reduce(function(t,e){return t.concat(e)}).filter(function(t){var e=(t.chartScale||1)*this._cssTransform.scale;return this.getRect(t).pointInside(o.x/e,o.y/e)},this)[0]},getRect:function t(e){return e.rect},getComponentKey:function t(e){return Object.keys(this.components).filter(function(t){return this.components[t].indexOf(e)>=0},this)[0]},getTransformedPoint:function t(e,i,s){var o=this.getRect(this.activeComponent||this.components.dataArea[0]),r=(this.activeComponent||this.components.dataArea[0]).chartScale||1;return new n((e-o.x*r*this._cssTransform.scale-s.x)/this._cssTransform.scale,(i-o.y*r*this._cssTransform.scale-s.y)/this._cssTransform.scale)},getPagePoint:function t(e,i,s,o){var r=this.getRect(s||this.activeComponent||this.components.dataArea[0]),a=(this.activeComponent||this.components.dataArea[0]).chartScale||1;return new n(e+r.x*a+o.x,i+r.y*a+o.y)},release:function t(){this.activeComponent=null;this.shapesFrom&&this.shapesFrom.release();this.components=null;this.options.components=null;this.shapesFrom=null}});return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={getLevel:function t(){if(!this||this.parent===this)return;var e=this.parent,n=0;while(e){n+=1;e=e.parent}return n},each:function e(n){var i=this&&this.children,s;if(!i)return;for(s=0;s<i.length;s+=1){if(n&&false===n(i[s],s,i.length-1))return false;if(false===t.each.call(i[s],n))return false}},getLeaves:function e(){if(!this||!this.children)return[];var n=[],i;for(i=0;i<this.children.length;i+=1)this.children[i]&&this.children[i].children&&this.children[i].children.length?n=n.concat(t.getLeaves.call(this.children[i])):n.push(this.children[i]);return n}};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(261)],s=function(t,e){var n={list:[],extensionListAvailable:false},i=null;n.getList=function(n){function s(t){e.getCloudExtensions().then(function(e){o.extensionListAvailable=true;o.list=[];for(var n in e){var i=e[n];if(i.attributes){if(i.attributes.name&&i.attributes.loadpath&&i.id){i.attributes.cloud=true;i.attributes.id=i.id;o.list.push({id:i.attributes.qext_filename||i.attributes.name,data:i.attributes,path:"extensions/"+i.attributes.qext_filename+"/"+i.attributes.loadpath})}}else if(i.name&&i.loadpath&&i.id){i.cloud=true;o.list.push({id:i.qextFilename||i.name,data:i,path:"extensions/"+i.qextFilename+"/"+i.loadpath})}}t.resolve(o.list)},function(){o.extensionListAvailable=false;o.list=[];t.resolve(o.list)});return t.promise}var o=this;if(null===i){i=new t;return s(i)}if(n)return s(new t);return i.promise};n.areCloudExtensionsAvailable=function(){var t=this;return this.getList().then(function(){return t.extensionListAvailable})};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t=/[^\s()"',+$*-<>=&/!{};:@`´[\]]/;var e=/[\s()"',+$*\-<>=&/!{};:@`´[\]]/;return{REGEXP_WORD:t,REGEXP_WORD_SEPARATOR:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(695),n(441)],s=function(t,e){function n(){this.posFrom=null;this.posTo=null;this.query=null;this.marked=[]}function i(i){var s=new n;var o;function r(e,n,s){return t.getSearchCursor(i,e,n,s)}function a(t){b.validQuery=true;var e=false;try{return e?new RegExp(e[1],-1===e[2].indexOf("i")?"":"i"):t}catch(e){b.validQuery=false;return t}}function l(){i.operation(function(){var t;if(!s.query)return;s.query=null;for(t=0;t<s.marked.length;++t)s.marked[t].clear();s.marked.length=0});d()}function c(t,n,c,u){var d=2e3;var p=0;l();if(t){i.operation(function(){s.query=a(t);var l={line:0,ch:0};!n&&o&&o.from()&&(l=o.from());o=r(s.query,{line:0,ch:0},u);p=e.getMaxNumberOfHits(i.getValue(),t,u);if(i.lineCount()<d)while(o.findNext())s.marked.push(i.markText(o.from(),o.to(),{className:"cm-searching"}));s.posTo=i.getCursor();s.posFrom=s.posTo;o=r(s.query,l,u)});c&&h();b.hits=p;return p}b.hits=0;return 0}var u;function d(){u&&u.clear()}function p(){d();u=i.markText(o.from(),o.to(),{className:"cm-current"});i.setCursor(o.to());s.posFrom=o.from();s.posTo=o.to()}function h(t,e){var n=o.find(t);if(n){p();i.scrollIntoView(o.from(),i.getScrollInfo().clientHeight/2)}else e&&e();return n}function f(t){o=r(s.query,{line:0,ch:0},t);return h(false)}function g(t){var e=i.lastLine();var n=i.getLine(e).length;o=r(s.query,{line:e,ch:n},t);return h(true)}function v(t,e,n,i){var r="string"===typeof s.query?e:o.pos.match[0].replace(s.query,e);o.atOccurrence||f(n);o.replace(r);b.hits--;var a=o.find(t);a?p():i&&i()}function m(t,e,n){if(!t)return;var l=0;t=a(t);i.operation(function(){for(o=r(t,void 0,n);o.findNext();){l++;var i="string"===typeof s.query?e:o.pos.match[0].replace(s.query,e);o.replace(i)}});b.hits=0;return l}var b={doSearch:c,clearMarkedSearch:l,doFindNext:h,doFindFirst:f,doFindLast:g,doReplaceAll:m,doReplace:v,hits:0,validQuery:true};return b}return{createSingleCodeareaSearcher:i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(720),n(109),n(721),n(723),n(724)],s=function(t,e,n,i){function s(t,e,n){void 0!==t.colors&&(t=t.colors);this._palette=t;this._index=-1;this._shift=n||false;void 0!==e.index&&(this._index=e.index);"none"===e&&(this._index=0);if(""===e){this._index=0;e="none"}if(this._index>=0&&this._index<this._palette.length)this._hex=this._palette[this._index];else if(void 0!==e.color){this._hex=e.color;this._index=t.indexOf(this._hex)}else{if(t[e]){this._hex=t[e];this._index=e}else{this._hex=e;this._index=t.indexOf(this._hex)}"none"===e&&(this._index=0)}this._defaultHSV={h:0,s:100,v:100};this._updateHexToHsv();this._updateHexObj();this._updateWheelStatus()}s.prototype._updateHexObj=function(){this._colorUtil=new n(this._hex);if(this._colorUtil.isInvalid())this._hexObj={value:"-"};else{var t=this._hex.substring(1,7);this._hexObj={value:t}}};s.prototype._updateWheelStatus=function(){this._index>=0&&this._index<this._palette.length+this._shift||0==this._index?this._isWheelUsed=false:this._isWheelUsed=true};s.prototype._updateHexToHsv=function(){this._colorUtil=new n(this._hex);this._colorUtil.isInvalid()?this._hsv=this._defaultHSV:this._hsv=this._colorUtil.toHSVComponents()};s.prototype._updateHsvToHex=function(t){this._colorUtil=new n("hsv("+this._hsv.h+","+this._hsv.s+","+this._hsv.v+")");this._colorUtil.isInvalid()&&t.$disableNone&&(this._colorUtil=new n(t.$defaultColor));if(this._colorUtil.isInvalid())this._hexObj="-";else{this._hexObj={value:this._colorUtil.toHex().substring(1,7)};this._hex="#"+this._hexObj.value}this._index=this._palette.indexOf(this._hex)};s.prototype.updateColor=function(t,e){this._colorUtil=new n(t);if(this._colorUtil.isInvalid()){this._hex="none";this._index=0}else{this._hex=t;this._index=e}this._updateHexToHsv();this._updateHexObj();this._updateWheelStatus()};s.prototype.updatePalette=function(t){void 0!==t.colors&&(t=t.colors);this._palette=t;this._index>=t.length&&(this._index=-1);this._updateHexToHsv();this._updateHexObj();this._updateWheelStatus()};s.prototype.updateHex=function(t){this._hex=t;this._index=this._palette.indexOf(this._hex);this._updateHexToHsv();this._updateHexObj();this._updateWheelStatus()};s.prototype.updateHexUntrusted=function(t){var e="#"+t.replace(/[^0-9A-Fa-f]+/g,"").substring(0,6);this.updateHex(e)};s.prototype.getHsv=function(){return this._hsv};s.prototype.setHsv=function(t){this._hsv=t;this._updateHsvToHex()};s.prototype.syncHsv=function(){this._updateHsvToHex()};s.prototype.getHex=function(){return this._hex};s.prototype.getHexObj=function(){return this._hexObj};s.prototype.isWheelUsed=function(){return this._isWheelUsed};s.prototype.forceWheelUsed=function(t){this._isWheelUsed=t};s.prototype.isDark=function(){return this._colorUtil.isDark()};s.prototype.getIndex=function(){return this._index};s.prototype.clone=function(){return t.extend(true,{},this)};var o={template:e,controller:["$scope","$element","$timeout",function(t,e,o){var r=t.$inputViewValue;t.currentPalette=t.$palette;t.extended=t.$extended;var a=new s(t.currentPalette,r,t.$disableNone);t.$useGlyph&&(t.glyphIcon=t.$inputViewValue.icon);var l=null;var c;var u=false;Object.defineProperty(t,"hsv",{get:function t(){return a.getHsv()},set:function t(e){a.setHsv(e)}});Object.defineProperty(t,"foreColor",{get:function t(){return a.getHex()}});Object.defineProperty(t,"hex",{get:function t(){return a.getHexObj()},set:function t(){return a.setHexObj()}});Object.defineProperty(t,"isDark",{get:function t(){return a.isDark()}});Object.defineProperty(t,"customColor",{get:function e(){return a.isWheelUsed()&&t.extended},set:function t(e){a.forceWheelUsed(e)}});t.recentColors=i.getPersistentRecentColors();t.setGlyph=function(e,n,i){t.glyphIcon=i.icon;h()};t.onHexChange=f(p);t.colorClicked=f(function(e,n,i){t.$disableNone&&(n+=1);a.updateColor(i,n);h();u=true});t.recentColorClicked=f(function(e,n){if(!t.$disableNone||"none"!==n){a.updateHex(n);h();u=true}});t.onFoldoutClick=function(e){e.preventDefault();t.customColor=!t.customColor};t.onKeyPress=function(e){var n=e.which;13===n&&t.close()};t.getBackgroundStyle=function(t){if("none"!==t)return{"background-color":t}};function d(){return t.recentColors.length>0&&t.extended}t.showRecent=d();function p(t){if(6===t.length){var e="#"+t.replace(/[^0-9A-Fa-f]+/g,"").substring(0,6);this._colorUtil=new n(e);if(!this._colorUtil.isInvalid()){a.updateHexUntrusted(t);h();u=true}}}function h(){t.onColorChange(t.$useGlyph,a.getIndex(),t.foreColor,t.currentPalette,t.glyphIcon);t.extended&&i.stage(a.getHex())}function f(t){return function(){var e=this,n=arguments;l||(l=o(function(){t.apply(e,n);l=null},100))}}t.hueSatValueChanged=f(function(){a.syncHsv();u=true;c&&o.cancel(c);c=o(function(){h();c=null},300)});t.applyColor=function(){t.extended&&i.commit()};t.$on("$destroy",function(){u&&t.applyColor();e.find(".qv-cp-hex-input").off()})}]};return{popupComponent:o}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(736),n(737),n(109),n(100),n(302),n(96)],s=function(t,e,n,i,s,o){function r(t,e){var n=[];var i=[];for(var o=0;o<t.length;o++){i=[];0!==o&&e[o-1]?i.push(s.toHex(s.blend(t[o-1],t[o],.5))):i.push(t[o]);0!==o&&o!==t.length-1&&i.push(t[o]);o!==t.length-1&&e[o]?i.push(s.toHex(s.blend(t[o],t[o+1],.5))):i.push(t[o]);n.push(i)}return n}function a(t,e){return t.top>e/2?{x:t.left+t.width/2,y:t.top,dock:"top"}:{x:t.left+t.width/2,y:t.top+t.height,dock:"bottom"}}function l(t,e,n){n=n||100;if(t&&t.length===e-1)return t.map(function(t){return t*n});var i=[];for(var s=1;s<e;s++)i.push(s/e*n);return i}function c(t,e){if(!t||!t.length){t=[];for(var n=0;n<e-1;n++)t.push(0)}return t}function u(t,e,n){var i={};if(0===t){i.width=1===e.length?"100%":100*n[0]+"%";i.left="0%";i.background="linear-gradient(to right, "+e[t][0]+" 0%, "+e[t][1]+" 100%)"}else if(t===n.length){i.width=100*(1-n[t-1])+"%";i.left=100*n[t-1]+"%";i.background="linear-gradient(to right, "+e[t][0]+" 0%, "+e[t][1]+" 100%)"}else{i.width=100*(n[t]-n[t-1])+"%";i.left=100*n[t-1]+"%";i.background="linear-gradient(to right, "+e[t][0]+" 0%, "+e[t][1]+" 50%, "+e[t][2]+" 100%)"}return i}e.directive("qvColorSchemeDisplay",["$timeout",function(e){return{require:"?colors",template:n,replace:true,scope:{colors:"=",limits:"=",types:"=",allowChange:"=",animateChange:"=?"},link:function n(s){var d=-1;Object.defineProperty(s,"value",{get:function t(){return s.colors[d]},set:function t(e){s.colors[d]=e}});s.getLimitPos=function(t){return"calc("+100*t+"% - 1px)"};s.segmentStyles=[];var p;function h(){p||(p=e(function(){s.typs=c(s.types,s.colors.length);s.lims=l(s.limits,s.colors.length,1);s.cols=r(s.colors,s.typs);s.segmentStyles=s.colors.map(function(t,e){return u(e,s.cols,s.lims)});p=null}))}s.$watchCollection("limits",function(){h()});s.$watchCollection("colors",function(){h()});s.$watchCollection("types",function(){h()});s.getSegmentSize=function(t){return 0===t?100*s.lims[1]+"%":100*(s.lims[t]-s.lims[t-1])+"%"};s.onClick=function(e,n){var r=e.target.getBoundingClientRect();d=n;var l=a(r,t(window).outerHeight());0===n&&s.typs[0]?l.x=r.left:n===s.colors.length-1&&s.typs[n-1]&&(l.x=r.left+r.width);i.openColorPicker(l.x,l.y,{palette:o.currentPalette,dock:l.dock,disableNone:true},s)}}}}]);return{getBestPos:a,getLimits:l,getSegmentColors:r,getSegmentStyle:u}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.service("qvRecentGradientsService",[function(){var t=3,e=[];var n={pushTemplate:function n(i){if(!i.name||!i.colors||!i.limits||!i.types||void 0===!i.percentage)throw new Error("invalid template format");e.push(i);e.length>t&&e.splice(0,1)},getTemplates:function t(){return e.slice()},convertAbsLimits:function t(e){var n,i,s;if(0===e.length)return[];if(1===e.length&&0===e[0]){n=-10;i=10}else if(1===e.length||e.every(function(t){return t===e[0]})){n=.9*e[0];i=1.1*e[0]}else{n=null;i=null;e.forEach(function(t){i=null!==i?Math.max(i,t):t;n=null!==n?Math.min(n,t):t});s=i-n;n-=.3*s;i+=.3*s}s=i-n;return e.map(function(t){return(t-n)/s})}};return n}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(140),n(120),n(747),n(133)],s=function(t,e,n,i,s){function o(t){var e={retentionTimeValue:"",retentionTimeUnit:""};if("unlimited"===t){e.retentionTimeValue="";e.retentionTimeUnit="unlimited"}else{var n=i(t);if(n.hours()){e.retentionTimeValue=n.asHours()+"";e.retentionTimeUnit="h"}else{e.retentionTimeValue=n.asDays()+"";e.retentionTimeUnit="d"}}return e}function r(t){var e="P";var n=Math.floor(t/8760);if(n){e=e+n+"Y";t%=8760}if(t){var i=Math.floor(t/24);e=e+i+"D";t%=24}t&&(e=e+"T"+t+"H");return e}t.service("odagLinkDialogService",function(){var t;function i(){return s.getTemplateApps(e)}function a(t){return e.get(t,{},true,function(t){t.isHandled=true}).then(function(t){return n.getList(t,true).then(function(e){return e.getLayout().then(function(e){t.close();return e.map(function(t){return{id:t.qInfo.qId,name:t.qData.labelExpression||t.qData.title}})})})}).catch(function(t){t.isHandled=true;return[]})}function l(){return e.get().then(function(t){return t.getPublishableStreams()})}function c(t,e){var n="P";"unlimited"===e?n=e:"d"===e?n=r(24*Number(t)):"h"===e&&(n=r(Number(t)));return n}t={getTemplateApps:i,getSheetsForApp:a,getPublishableStreams:l,getRetentionTimeServerValue:c,getRetentionTimeDisplayValue:o};return t});return{getRetentionTimeDisplayValue:o,hoursToISO8601Format:r}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(102),n(48)],s=function(t,e,n){n.componentDirective("qvaAssetsTab",{tab:"=qvaAssetsTab"});return t.extend({init:function t(n){this.component=n.component;this.id=n.id;this.name=n.name;this.longname=n.longname;this.hasTableFilter=n.hasTableFilter;this.haveManageDataButtons=n.haveManageDataButtons;this.button=n.button;e.create(this,"Resize")},resize:function t(e){this.Resize.emit(e)},openSection:function t(){return false}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(764),n(170),n(248),n(279)],s=function(t,e,n,i){var s,o,r;function a(t){void 0===t&&(t=n.isInternalTableView());return i.getTablesAndKeys(t).then(function(t){s=t})}function l(t){if(void 0===t)return;var e=100*Number(t);return e%1===0?e:Number(String(e).substring(0,4))}function c(t){var n,i,s,o,r,a,c,u,d,p,h={};for(n in t.qtr){c=0;u=[];o=t.qtr[n];d=o.qName;o.qName=e.encodeTableName(o.qName);a=[];for(i=0;i<o.qFields.length;i++){r=o.qFields[i];p=[];-1!==r.qTags.indexOf("$key")&&c++;for(s=0;s<r.qTags.length;s++){-1===u.indexOf(r.qTags[s])&&u.push(r.qTags[s]);-1===p.indexOf(r.qTags[s])&&p.push(r.qTags[s])}var f=[];for(var g in r.qOriginalFields){var v=r.qOriginalFields[g];f.push({name:v})}a.push({name:r.qName,originalFields:f,meta:{isPerfectKey:"PERFECT_KEY"===r.qKeyType,density:l(r.qInformationDensity),subsetRatio:l(r.qSubsetRatio),tags:p,hasDuplicates:r.qHasDuplicates,nbrOfTotalDistinctValues:r.qnTotalDistinctValues,nbrOfPresentDistinctValues:r.qnPresentDistinctValues,nbrOfNonNulls:r.qnNonNulls,isKey:-1!==r.qTags.indexOf("$key"),isSynthetic:-1!==r.qTags.indexOf("$synthetic"),comment:r.qComment},derivedFields:r.qDerivedFields})}h[o.qName]={realName:d,top:o.qPos.qy,left:o.qPos.qx,height:0,width:0,autoLayoutX:o.qPos.qx,autoLayoutY:o.qPos.qy,meta:{nbrOfRows:o.qNoOfRows,nbrOfFields:Object.keys(a).length,nbrOfKeys:c,tags:u},fields:a,isDirectDiscovery:!!o.qIsDirectDiscovery,isSynthetic:!!o.qIsSynthetic}}return h}function u(){try{o=c(s);return Promise.resolve(o)}catch(t){return Promise.reject(t)}}function d(){var e=n.isInternalTableView();r=t.convertRawDataToIdealConnectionData(s,e,o)}function p(){if(!o)throw new Error("Cached ideal table data is undefined. Need to reload from engine first.");return o}function h(){if(!r)throw new Error("Cached ideal connection data is undefined. Need to reload from engine first.");return r}function f(t){i.clearAllCaches();s=void 0;o=void 0;r=void 0;return a(t).then(function(){return u()})}function g(t,e){for(var n in r){var i=r[n];if(i.fieldName===e&&-1!==i.tables.indexOf(t))return true}return false}return{getDataModel:p,getConnectionData:h,forceReload:f,doesTableFieldHaveConnection:g,recreateCachedIdealConnectionData:d,formatToPercentageNumber:l}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};Object.defineProperties(t,{single:{value:"N",writable:false},drilldown:{value:"H",writable:false}});return{dimensionTypes:t}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(99),n(356)],s=function(t){var e=["$scope","$element","qvScrollAreaService",function(e,n,i){var s,r,a=[],l=[],c=[],u,d,p={};e.interactiveX=false;e.interactiveY=false;e.virtualSize={width:0,height:0};e.virtualViewport={width:0,height:0};e.scrollbarX=i.createScrollbar();e.scrollbarY=i.createScrollbar();e.viewportRect={top:0,left:0,width:0,height:0};e.hover=false;e.isMouse=true;Object.defineProperties(p,{PIXEL:{value:0},LINE:{value:1},PAGE:{value:2},AREA:{value:10}});Object.defineProperty(this,"DELTA_MODE",{value:p});e.$on("$destroy",function(){clearTimeout(u);clearTimeout(d)});this.setMouse=function(t){e.isMouse=t};this.getScrollAreaRect=function(){var t=n[0].getBoundingClientRect();return{top:0,left:0,width:Math.ceil(t.width),height:Math.ceil(t.height)}};this.addScrollbarXCtrl=function(t){s=t};this.addScrollbarYCtrl=function(t){r=t};this.allowFade=function(){return(void 0===s||s.allowFade())&&(void 0===r||r.allowFade())};this.fadeScrollbarsWithoutDelay=function(){s&&s.fadeOut();r&&r.fadeOut()};this.toggleFadeScrollbars=function(t){clearTimeout(d);clearTimeout(u);if(!t&&!this.allowFade())return;u=setTimeout(function(){var e=t?"fadeIn":"fadeOut";s&&s[e]();r&&r[e]()},t?0:800)};this.fadeInScrollbars=function(){this.toggleFadeScrollbars(true)};this.fadeOutScrollbars=function(){if(t.treatAsDesktop()&&e.hover)return;this.toggleFadeScrollbars(false)};this.fadeOutScrollbarsDelayed=function(){clearTimeout(d);d=setTimeout(function(){this.toggleFadeScrollbars(false)}.bind(this),1e3)};this.setNonMouseTrackSize=function(){if("object"!==o(e.nonMouseViewportScrolling))return;n.addClass(e.nonMouseViewportScrolling.className);this.setTrackSize(e.nonMouseViewportScrolling.scrollbarSize)};this.setMouseTrackSize=function(){"object"===o(e.nonMouseViewportScrolling)&&n.removeClass(e.nonMouseViewportScrolling.className);this.setTrackSize(e.scrollbarSize)};this.setTrackSize=function(t){var n=this.getVirtualPosition();this.setVirtualSize(e.virtualSize,e.virtualViewport,e.viewportRect,t);this.setVirtualScrollPos(n.vPosX,n.vPosY)};this.setupScrollbars=function(t){t=t||8;i.setScrollbarData(e.scrollbarY,"vertical",t,e.virtualSize.height,e.virtualViewport.height,e.viewportRect,e.direction);i.setScrollbarData(e.scrollbarX,"horizontal",t,e.virtualSize.width,e.virtualViewport.width,e.viewportRect,e.direction);if(e.scrollbarX.enabled&&e.scrollbarY.enabled){e.scrollbarX.length-=t;e.scrollbarX.scaleFactor=e.scrollbarX.length/e.virtualSize.width;e.scrollbarX.style.width=e.viewportRect.width-t-2*e.scrollbarX.uiOffset+"px";"rtl"===e.direction&&(e.scrollbarX.style.left=e.viewportRect.left+e.scrollbarX.uiOffset+t+"px");e.scrollbarY.length-=t;e.scrollbarY.scaleFactor=e.scrollbarY.length/e.virtualSize.height;e.scrollbarY.style.height=e.viewportRect.height-t-2*e.scrollbarY.uiOffset+"px"}};this.setVirtualSize=function(t,n,i,s){e.viewportRect=i;e.virtualSize.width=t.width;e.virtualSize.height=t.height;e.virtualViewport.width=n.width;e.virtualViewport.height=n.height;this.setupScrollbars(s)};this.setViewport=function(t){e.viewportRect=t};this.setVirtualViewport=function(t){var n=this.getVirtualPosition();e.virtualViewport.width=t.width;e.virtualViewport.height=t.height;e.scrollbarX.vViewportLength=t.width;e.scrollbarY.vViewportLength=t.height;this.setupScrollbars(e.isMouse?e.scrollbarSize:e.nonMouseViewportScrolling.scrollbarSize);this.setVirtualScrollPos(n.vPosX,n.vPosY)};this.getVirtualSize=function(){return{width:e.virtualSize.width,height:e.virtualSize.height}};this.getVirtualPosition=function(){var t=0,n=this.getMaxPosition();return{vPosX:Math.max(t,Math.min(n.vPosX,e.scrollbarX.vPos)),vPosY:Math.max(t,Math.min(n.vPosY,e.scrollbarY.vPos))}};this.getMaxPosition=function(){var t=0,n=Math.max(t,e.scrollbarX.vLength-e.scrollbarX.vViewportLength),i=Math.max(t,e.scrollbarY.vLength-e.scrollbarY.vViewportLength);return{vPosX:n,vPosY:i}};this.isMouseOver=function(){return e.hover};this.resetScroll=function(){if(void 0===e.scrollbarX.vPos||void 0===e.scrollbarY.vPos)return;0===e.scrollbarX.vPos&&0===e.scrollbarY.vPos||this.scroll(-e.scrollbarX.vPos,-e.scrollbarY.vPos,true,false)};this.setVirtualScrollPos=function(t,n,s){i.setVirtualScrollPos(t,e.scrollbarX,s);i.setVirtualScrollPos(n,e.scrollbarY,s)};this.scroll=function(t,n,s,o){var r,l;r=i.setVirtualScrollPos(t,e.scrollbarX,o);l=i.setVirtualScrollPos(n,e.scrollbarY,o);(0!==r||0!==l||s)&&a.forEach(function(t){t(r,l)})};this.getScrollAmount=function(t,e,n){switch(n){default:return{deltaX:t,deltaY:e}}};this.scrollStart=function(){l.forEach(function(t){t()})};this.scrollEnd=function(){c.forEach(function(t){t()})};this.onScroll=function(t){a.push(t)};this.onScrollStart=function(t){l.push(t)};this.onScrollEnd=function(t){c.push(t)};this.on=function(){if(!(e.interactiveX||e.interactiveY)){e.off=e.on();e.interactiveX=true;e.interactiveY=true}};this.off=function(){if(e.off){e.off();e.interactiveX=false;e.interactiveY=false}};this.setHorizontalScrollInteractive=function(t){e.interactiveX=t};this.setVerticalScrollInteractive=function(t){e.interactiveY=t};this.isVerticalScrollEnabled=function(){return e.scrollbarY.enabled};this.digest=function(){e.$parent.$digest()}}];return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.service("qvScrollAreaService",function(){function t(t){if("rtl"===t.textDirection&&"horizontal"===t.direction){var e=t.showMinAffordance;t.showMinAffordance=t.showMaxAffordance;t.showMaxAffordance=e}}return{createScrollbar:function t(){return{vLength:0,vViewportLength:0,vPos:0,vPage:0,thumb:{},style:{},classList:[],enabled:false,getScrollDelta:function t(e){var n=0,i=0;if(!this.enabled)return[0,0];switch(this.direction){case"vertical":i=e.swipe.curDeltaY*(1/this.scaleFactor);break;case"horizontal":n=("rtl"===this.textDirection?-1:1)*e.swipe.curDeltaX*(1/this.scaleFactor);break;default:throw new Error("not implemented")}return[n,i]},active:false}},setScrollbarData:function e(n,i,s,o,r,a,l){var c=3,u;switch(i){case"vertical":u=a.height;break;case"horizontal":u=a.width;break;default:throw new Error("not implemented")}n.enabled=r<o&&u>0;if(!n.enabled)return;u-=2*c;n.uiOffset=c;n.direction=i;n.vLength=o;n.vViewportLength=r;n.vPos=0;n.vPage=u;n.length=u;n.trackSize=s;n.scaleFactor=u/o;n.thumb.pos=0;n.thumb.size=0;n.thumb.vPos=0;n.showMinAffordance=false;n.showMaxAffordance=true;n.textDirection=l;switch(n.direction){case"vertical":n.style.top=a.top+n.uiOffset+"px";n.style.width=s+"px";n.style.left="rtl"===l?n.uiOffset+"px":a.left+a.width-s-n.uiOffset+"px";n.style.height=a.height-2*n.uiOffset+"px";break;case"horizontal":n.style.height=s+"px";n.style.top=a.top+a.height-s-n.uiOffset+"px";n.style.left=a.left+n.uiOffset+"px";n.style.width=a.width-2*n.uiOffset+"px";break;default:throw new Error("not implemented")}t(n)},setVirtualScrollPos:function e(n,i,s){var o=0,r=i.vLength-i.vViewportLength,a=0,l=i.thumb.vPos;if(!i.enabled)return 0;i.vPos+=n;i.showMinAffordance=false;i.showMaxAffordance=false;if(i.vPos<o){l=o;i.vPos=s?i.vPos:o;i.showMaxAffordance=true}else if(i.vPos>r){l=r;i.vPos=s?i.vPos:r;i.showMinAffordance=true}else{i.vPos!==o&&(i.showMinAffordance=true);i.vPos!==r&&(i.showMaxAffordance=true);l=i.vPos}a=l-i.thumb.vPos;i.thumb.vPos=l;t(i);return a},setThumbStyle:function t(e,n){var i=n.thumb;var s=12;var o=n.scaleFactor;var r=Math.floor(i.vPos*o);var a=Math.floor(n.vViewportLength*o);if(a<s){r-=Math.floor((s-a)/2);a=s}r=Math.max(r,0);r+a>n.length&&(r=n.length-a);i.size=a;i.pos=r;switch(n.direction){case"vertical":e.top=r+"px";e.height=a+"px";break;case"horizontal":if("rtl"===n.textDirection){delete e.left;e.right=r+"px"}else{delete e.right;e.left=r+"px"}e.width=a+"px";break;default:throw new Error("not implemented")}},setTrackHitAreaStyle:function t(e,n,i){if("vertical"===n.direction){e.right=-n.uiOffset+"px";e.width=i+n.uiOffset+"px"}else{e.bottom=-n.uiOffset+"px";e.height=i+n.uiOffset+"px"}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(153),n(49),n(157),n(134)],s=function(t,e,n,i){function s(t){var e={};e.permissions=t.permissions;e.name=t.qData.title;e.secondaryName=t.qData.labelExpression||"";e.type=t.qInfo.qType;e.id=t.qInfo.qId;e.getDropOption=r.bind(null,e);e.tags=t.qData.tags;e.info=t.qData.info;"H"===t.qData.grouping&&(e.icon="drill-down");return e}function o(e){return i.get(e.id).then(function(n){return n.getProperties().then(function(n){var i=t.createLibraryDimension(e.id);t.autoSortDimension(i,e.info);var s=e.name;n.qDim.qLabelExpression&&(s={qStringExpression:{qExpr:n.qDim.qLabelExpression}});return{id:"newObject",args:{template:"filterpane",children:[t.createDefaultListBox(i,s)],init:{}}}})})}function r(t,i,s){if(e.getFlag("DISABLE_AUTO_CHART")||n.isVariableDefined("DISABLE_AUTO_CHART"))return o(t);if(s&&s.shiftKey)return o(t);return{id:"newObject",args:{template:"auto-chart",init:{qHyperCubeDef:{qDimensions:[{qLibraryId:t.id}],qInterColumnSortOrder:[0]},showTitles:false}}}}var a={create:function t(e){return e.map(function(t){return s(t)})}};return a}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(801),n(100),n(802),n(174)],s=function(t,e,n,i){function s(s){var o={template:e,controller:["$scope",function(e){e.input=s;e.valueColors=[];s.baseColor&&s.baseColor.color&&(e.color=n.resolveColor(s.baseColor));e.showLabelExpression=!!e.input.labelExpression;e.showLabelExpressionDef=!!e.input.labelExpressionDef;var o=t.getService("qvColorMapService");var r=o.getTemplate();o.getColorMap(e.input.qId).then(function(t){if(t){r=t;e.valueColors=i.getColors(r);e.previewColorViewWidth=i.getPreviewColorViewWidth(e.valueColors)}})}],dock:"right",alignTo:s.alignTo[0]};return t.getService("luiPopover").show(o)}return{show:s}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(48),n(210),n(193)],s=function(t,e,n){var i={},s,o=[];return{saveTemplate:y,getTemplate:q,deleteTemplate:S,addTemplate:C,getWidgetList:l,getWidgetListFromLibrary:c,loadWidget:w,getLibForId:a,loadFile:u,getLibrary:g,saveLibrary:h,deleteLibrary:f,reloadCachedLibraries:b};function r(t){return(t.libid?t.libid:t.id)+"/"+t.id}function a(t){var e=o.filter(function(e){return e.data.widgets&&e.data.widgets.indexOf(t)>-1});e.length>1&&console.log("Duplicate libraries for widget:"+t,e);return e[0]}function l(e){if(!s||e){s=new t;var i=[];n.getList(e).then(function(t){o.length=0;t.forEach(function(t){if("widget-library"===t.data.type){o.push(t);t.data.widgets&&t.data.widgets.forEach(function(e){i.push({libid:t.id,id:e})})}});s.resolve(i)})}return s.promise}function c(e){var i=[];var s=new t;n.getList(false).then(function(t){o.length=0;t.forEach(function(t){if("widget-library"===t.data.type&&t.id===e){o.push(t);t.data.widgets&&t.data.widgets.forEach(function(e){i.push({libid:t.id,id:e})})}});s.resolve(i)});return s.promise}function u(t,n){return e.getService("$contentApi").request({method:"GET",url:"/extensions/"+t+(n?"?"+(new Date).getTime():""),cache:false})}function d(n,i,s){var o=new t;if(s){u(n).then(function(t){var e=t.headers;e("last-modified")!==s?o.reject("File modified by another user"):d(n,i).then(function(){o.resolve()}).catch(function(t){o.reject(t)})});return o.promise}var r=n.split("/");e.getService("$contentApi").request({method:"POST",url:"/qrs/extension/"+r[0]+"/uploadfile?externalpath="+r[1]+"&overwrite=true",data:i}).then(function(){o.resolve()}).catch(function(t){o.reject(t)});return o.promise}function p(n){var i=new t;var s=n.split("/");e.getService("$contentApi").request({method:"DELETE",url:"/qrs/extension/"+s[0]+"/deletecontent?externalpath="+s[1]}).then(function(){i.resolve()}).catch(function(t){i.reject(t)});return i.promise}function h(e){var n=new t;d(r(e)+".qext",JSON.stringify(e.data,null,2)).then(function(){n.resolve()},function(t){n.reject(t)});return n.promise}function f(t){return p(r(t)+".qext")}function g(t){return u(t+"/"+t+".qext",true).then(function(t){return t.data})}function v(e,n){var i=new t;g(e).then(function(t){t.widgets||(t.widgets=[]);t.widgets.push(n);h({id:e,data:t}).then(function(){i.resolve()},function(t){i.reject(t)})});return i.promise}function m(e,n){var i=new t;g(e).then(function(t){if(t.widgets){t.widgets=t.widgets.filter(function(t){return t!==n});h({id:e,data:t}).then(function(){i.resolve()},function(t){i.reject(t)})}else i.reject()});return i.promise}function b(){var e=new t;n.getList(true).then(function(t){o.length=0;t.forEach(function(t){"widget-library"===t.data.type&&o.push(t)});e.resolve()}).catch(function(t){e.reject(t)});return e.promise}function y(e){var n=new t,i=r(e);d(i+".json",JSON.stringify({name:e.name,description:e.description,author:e.author,library:e.libid,meta:e.meta,properties:e.properties,dependencies:e.dependencies},null,2),e.lastModified).then(function(){var t="<style>"+e.css+"</style>\n<div>"+e.html+"</div>";d(i+".html",t).then(function(){e.lastModified?u(i+".json",true).then(function(t){var n=t.headers;e.lastModified=n("last-modified")}).then(function(){n.resolve()}):v(e.libid,e.id).then(function(){u(i+".json",true).then(function(t){var n=t.headers;e.lastModified=n("last-modified")}).then(function(){n.resolve()})})},function(t){n.reject(t)})},function(t){n.reject(t)});return n.promise}function x(e){var n=new t;u(e+".json",true).then(function(t){var e=t.data;var i=t.headers;e.lastModified=i("last-modified");n.resolve(e)}).catch(function(t){n.reject(t)});return n.promise}function q(t,e){var n=t+"/"+e;i[n]||(i[n]=x(n));return i[n]}function S(e){var n=new t,s=r(e);p(s+".json").then(function(){m(e.libid,e.id).then(function(){p(s+".html").then(function(){delete i[s];n.resolve()},function(t){n.reject(t)})},function(t){n.reject(t)})},function(){n.reject()});return n.promise}function w(e){var n=new t,i=r(e);u(i+".html",true).then(function(t){var i=t.data;var s=document.createElement("div");s.innerHTML=i;var o=s.getElementsByTagName("script");var r=o.length;while(r--)o[r].parentNode.removeChild(o[r]);var a=s.getElementsByTagName("style");if(1===a.length){e.css=a[0].innerHTML;var l=s.getElementsByTagName("div");e.html=l[0].innerHTML;n.resolve()}else n.reject("Widget.InvalidTemplate")}).catch(function(){n.reject()});return n.promise}function C(e){var n=r(e);if(!i[n]){var s=new t;i[n]=s.promise;s.resolve(e)}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(96)],s=function(t,e){function n(e,n,i){return t.Event(e,{pageX:i.pagePoints[0].x,pageY:i.pagePoints[0].y,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,originalEvent:n,gestureData:i})}var i;e(document.body).tap({options:{preventDefault:false},start:function e(n){i=t(n.target)}});e(document.body).swipe({options:{preventDefault:false,radiusThreshold:8},start:function t(e,s){var o=n("qv-swipestart",e,s);i.trigger(o)},update:function t(e,s){var o=n("qv-swipeupdate",e,s);i.trigger(o)},cancel:function e(){var n=t.Event("qv-swipecancel");i.trigger(n)},end:function t(o,r){e.utils.isMouse(o)||s();var a=n("qv-swipe",o,r);i.trigger(a)}});function s(){var t;function e(){document.removeEventListener("mousedown",n,true);document.removeEventListener("mousemove",i,true);document.removeEventListener("mouseup",s,true)}function n(t){t.preventDefault();t.stopPropagation()}function i(t){t.preventDefault();t.stopPropagation()}function s(n){n.preventDefault();n.stopPropagation();e();clearTimeout(t)}document.addEventListener("mousedown",n,true);document.addEventListener("mousemove",i,true);document.addEventListener("mouseup",s,true);t=setTimeout(e,350)}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(96)],s=function(t,e){var n=e.Gesture.augment(function(n){var i=false;this.defaults={radiusThreshold:10,timeThreshold:510,touches:1,precedence:4,preventDefault:false,which:1,interval:10};this.on=function(t){this.count=0;e(t).longtap({id:this.id,options:{precedence:this.options.precedence,preventDefault:this.options.preventDefault,touches:this.options.touches,which:this.options.which,areaThreshold:this.options.areaThreshold,timeThreshold:this.options.timeThreshold,interval:this.options.interval},start:this.longtapStart.bind(this),update:this.longtapUpdate.bind(this),cancel:this.longtapCancel.bind(this),end:this.longtapEnd.bind(this)}).swipe({id:this.id,options:{precedence:this.options.precedence+1,preventDefault:this.options.preventDefault,radiusThreshold:this.options.radiusThreshold,touches:this.options.touches},start:this.swipeStart.bind(this),update:this.swipeUpdate.bind(this),end:this.swipeEnd.bind(this),cancel:this.swipeCancel.bind(this)})};this.off=function(t){e(t).off("longtap",this.id);e(t).off("swipe",this.id)};this.longtapStart=function(){i=false};this.longtapUpdate=function(t,e){100===e.percentage&&(i=true)};this.longtapEnd=function(){this.binder.cancel()};this.longtapCancel=function(){i||this.binder.cancel()};this.swipeStart=function(e,n){var s=t(e.target).is("input, textarea");i&&!s?this.binder.start(e,n):i&&s&&(i=false)};this.swipeUpdate=function(t,e){i&&this.binder.update(t,e)};this.swipeEnd=function(t,e){if(i){o();this.binder.end(t,e);i=false}};this.swipeCancel=function(){i=false;this.binder.cancel()};function s(){n.apply(this,arguments)}function o(){var t;function e(){document.removeEventListener("mousedown",n,true);document.removeEventListener("mousemove",i,true);document.removeEventListener("mouseup",s,true)}function n(t){t.preventDefault();t.stopPropagation()}function i(t){t.preventDefault();t.stopPropagation()}function s(n){n.preventDefault();n.stopPropagation();e();clearTimeout(t)}document.addEventListener("mousedown",n,true);document.addEventListener("mousemove",i,true);document.addEventListener("mouseup",s,true);t=setTimeout(e,350)}return s});e.gestures.add("longtapswipe",n)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(95),n(93),n(122),n(94),n(120),n(215),n(301),n(143)],s=function(t,e,n,i,s,o,r,a,l,c){var u=false;var d=false;var p={userId:void 0,userDirectory:void 0};function h(t){var n=e.getService("qvAppViewService");n.blockScrollIntoView=true;n.activeId=t.qInfo.qId;n.lastActiveId=t.qInfo.qId;n=null}function f(t){u=t}var g={update:function t(){return a.getList().then(function(t){return t.getLayout().then(function(t){g.all.approvedStories=t.filter(l.filterApproved).sort(l.sortByRank);g.all.publishedStories=t.filter(l.filterMyPublishedCommunity(p)).sort(l.sortPublishedTime);g.all.privateStories=t.filter(l.filterPrivate).sort(l.sortByRank);g.all.communityStories=t.filter(l.filterCommunity(p)).sort(l.sortCommunity(1));g.all.mashed=[];if(g.current)for(var e=0;e<Object.keys(g.all).length;e++){var i=g.all[Object.keys(g.all)[e]];for(var s=0;s<i.length;s++)g.all.mashed.push(i[s])}n.publish("/data/story-list-layout-changed")})})},all:{mashed:[],approvedStories:[],publishedStories:[],privateStories:[],communityStories:[]},privateStories:[],current:{},currentIndex:function t(){for(var e=0;e<g.all.mashed.length;e++)if(g.current.id===g.all.mashed[e].qInfo.qId)return e;return 0},hasPrevious:function t(){return g.currentIndex()>0},hasNext:function t(){return g.currentIndex()<g.all.mashed.length-1},getPrevious:function t(){if(g.hasPrevious())return g.all.mashed[g.currentIndex()-1];return null},getNext:function t(){if(g.hasNext())return g.all.mashed[g.currentIndex()+1];return null},getFirst:function t(){return g.all.mashed[g.currentIndex()]},getLast:function t(){return g.all.mashed[g.all.mashed.length-1]},navigate:function e(){if(u)return;var n=g.all.mashed.length-g.all.communityStories.length-1;var i=g.current===g.getFirst()?g.getNext():g.currentIndex()<n?g.getNext():g.currentIndex()===n?g.getPrevious():null;var r=o.view===o.Views.story;if(i){if(r){h(i);a.get(i.qInfo.qId).then(function(t){s.goToStory(t.id,Object.keys(o.States)[o.state])})}}else{var l=t(".qv-pop-appview").scope();l&&l.closeView();l=null;r&&s.goToOverview()}},communitySort:function t(e,n){var i=g.all.communitySheets.sort(l.sortCommunity(e));n&&i.reverse();g.all.communitySheets=i}};var v={update:function t(){return r.getList().then(function(t){return t.getLayout().then(function(t){v.all.approvedSheets=t.filter(l.filterApproved).sort(l.sortByRank);v.all.publishedSheets=t.filter(l.filterMyPublishedCommunity(p)).sort(l.sortPublishedTime);v.all.privateSheets=t.filter(l.filterPrivate).sort(l.sortByRank);v.all.communitySheets=t.filter(l.filterCommunity(p)).sort(l.sortCommunity(1));v.all.mashed=[];if(v.current)for(var e=0;e<Object.keys(v.all).length;e++){var i=v.all[Object.keys(v.all)[e]];for(var s=0;s<i.length;s++)v.all.mashed.push(i[s])}n.publish("/data/sheet-list-layout-changed",v.all.mashed)})})},all:{mashed:[],approvedSheets:[],publishedSheets:[],privateSheets:[],communitySheets:[]},privateSheets:[],current:{},getNumberOfSheets:function t(){return v.all.mashed.length},currentIndex:function t(){for(var e=0;e<v.all.mashed.length;e++)if(v.current.id===v.all.mashed[e].qInfo.qId)return e;return 0},hasPrevious:function t(){return v.currentIndex()>0},hasNext:function t(){return v.currentIndex()<v.all.mashed.length-1},getPrevious:function t(){if(v.hasPrevious())return v.all.mashed[v.currentIndex()-1];return null},getNext:function t(){if(v.hasNext())return v.all.mashed[v.currentIndex()+1];return null},getFirst:function t(){return v.all.mashed[0]},getLast:function t(){return v.all.mashed[v.all.mashed.length-1]},getById:function t(e){for(var n=0;n<v.all.mashed.length;n++)if(v.all.mashed[n].qInfo.qId===e)return v.all.mashed[n];return null},navigate:function e(){if(u)return;var n=v.all.mashed.length-v.all.communitySheets.length-1;var i=v.current===v.getFirst()?v.getNext():v.currentIndex()<n?v.getNext():v.currentIndex()===n?v.getPrevious():null;var a=o.view===o.Views.sheet||o.view===o.Views.object||o.view===o.Views.masterObject;if(i){if(a){h(i);r.get(i.qInfo.qId).then(function(t){s.goToSheet(t.id,Object.keys(o.States)[o.state])})}}else{var l=t(".qv-pop-appview").scope();l&&l.closeView();l=null;a&&s.goToOverview()}},navigateToSheet:function t(e){if(e){h(e);r.get(e.qInfo.qId).then(function(t){s.goToSheet(t.id,Object.keys(o.States)[o.state])})}},communitySort:function t(e,n){var i=v.all.communitySheets.sort(l.sortCommunity(e));n&&(i=i.reverse());v.all.communitySheets=i}};function m(){if(d)return Promise.resolve();o.SheetChanged.bind(function(t){v.current=t});o.StoryChanged.bind(function(t){g.current=t});c.onDataReceived.then(function(t){if("NONE"!==t.userDirectory){p.userId=t.userId;p.userDirectory=t.userDirectory}});return i.getApp().then(function(){return Promise.all([v.update(),g.update()]).then(function(){return Promise.all([r.getList(),a.getList()]).then(function(t){var e=t[0];e.Invalidated.bind(v.update);var n=t[1];n.Invalidated.bind(g.update);d=true;return d})})})}var b={isInitialized:function t(){return d},init:m,Sheets:v,Stories:g,suspendNavigation:f};e.service("$navigationService",function(){return b});return b}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(91),n(273),n(90),n(11)],s=function(t,e,n,i){return{activatePopover:s,createPlaceHolder:r,getMultiPopoverItems:a,openMultiStatePopover:l,getAllStatesFromSelections:c,getAllSelectionsInStates:u,groupSelectionsByField:d,openListboxPopover:p,getIndexByKey:h,getDisplayStateName:o};function s(t,e,n,i,s,o){return t.showField(e,i.model.app.enigmaModel,n,{qStateName:o},function(){i.activeFieldName="";s(function(){i.closeTooltip()},100)})}function o(n){return n===e.DEFAULT_STATE_NAME?t.get(e.DEFAULT_STATE_TRANSLATION):n}function r(t,e,n){t.isPlaceHolder=true;t.active=false;t.qLocked=false;t.feedbackActive=false;t.translation="";t.qTotal=0;t.qStateCounts=0;e&&(t.qField=e);n&&(t.name=n);return t}function a(t,e){t=t||[];var n=t.filter(function(t){return t.qField===e})[0];var i=[];n&&n.states&&(i=n.states.map(function(t){t.isSingleState=true;t.displayStateName=o(t.stateName);return t}));return i}function l(t,e,n,i,s){var o=t.show({alignToElement:n,clear:s.clear,click:s.click,onClose:s.onClose,openTooltip:s.openTooltip,closeTooltip:s.closeTooltip,handleKeyDown:s.handleKeyDown,getItems:e,brightCurSel:i});return o}function c(t,e){e=e||null;var i=[];e&&(t=t.filter(function(t){return t.qField===e}));t.forEach(function(t){t.states?t.states.forEach(function(t){i.push(t.stateName)}):i.push(t.stateName)});i=n.getUnique(i);return i}function u(t){var e=[];(t.selectionsInStates||[]).forEach(function(t){t.qSelectionObject.qSelections.forEach(function(e){e.stateName=t.stateName});e=e.concat(t.qSelectionObject.qSelections)});return e}function d(t){var e={};t.forEach(function(t){var n=e[t.qField];n=n||{states:[],qField:t.qField};n.states.push(t);e[t.qField]=n});var n=Object.keys(e).map(function(t){var n=e[t];var i=n.states;if(1===i.length){n=n.states[0];n.isSingleState=true;n.isDefaultState="$"===i[0].stateName}else n.name=i[0].name;return n});return n}function p(t,e,n,s,o,r,a){if(n)return t(a.listboxPopoverServiceMobile,o,r,e,a.$timeout,s).catch(function(t){false});return t(a.listboxPopoverService,o,r,e,a.$timeout,s).then(function(t){var n;t.closing.then(function(t){t&&!i(t.target).closest(".current-selections-item").length>0&&(e.activeFieldName="");n=t}).catch(function(t){false});t.closed.then(function(){if(e.onCloseFocusSelector){i(e.onCloseFocusSelector).focus();e.onCloseFocusSelector=null}else e.activeFieldName&&i('.item[data-csid="'+e.activeFieldName+'"]').focus();t=null;n||(e.activeFieldName="")}).catch(function(t){false});t.opened.catch(function(t){false})}).catch(function(t){false})}function h(t,e,n){if([void 0,null].contains(e)||[void 0,null].contains(n))throw new Error("unaccepted key or val ( key: "+e+", val: "+n+")");var i=t.map(function(t){return t[e]});return i.indexOf(n)}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(97)],s=function(t,e){var n={template:null,controller:["$scope","$element","$timeout",function(n,i,s){var o=this;n.input.selectionsActivated=function(){};n.input.selectionsDeactivated=function(){};o.close=function(){r()};function r(){s(function(){n.destroyComponent();i.remove()});e.off("start.listbox-popover-error",r)}function a(){return s(function(){return i.find(".toolbar-wrapper").outerWidth()})}var l=n.input.onPopoverClose;var c=null;n.closingDeferred.promise.then(function(t){c&&c();l(t);r()});t.all({object:n.input.getVisualization(),width:a()}).then(function(t){var i=t.object,s=t.width;i.getSelectionToolbar().then(function(t){n.toolbar=t;n.toolbar.showLock=n.input.options.showLock;n.toolbar.position={width:s};i.activateSelections()});i.loaded.then(function(){i.ext.hasError(i)&&e.on("start.listbox-popover-error",r)});i.selectionsApi.watchActivated(function(){n.input.selectionsActivated()});i.selectionsApi.watchDeactivated(function(){n.input.selectionsDeactivated();r()});c=function t(){i.selectionsApi.confirm()}})}]};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover\n\t\tclass="qv-listbox-popover"\n\t\tstyle="min-width: 200px;width: 234px;height: 332px"\n\t\ton-close-view="closeView(event)"\n\t\tqva-outside-ignore-for="{{input.qvaOutsideIgnoreFor}}"\n\t\tqva-mouse-wheel-outside="close()">\n\t<lui-popover-body style="height: 332px" class="lui-nopad">\n\t\t<qv-spinner show="!input.model" spinner-height="100px" spinner-width="100px" show-Delay="300" center-in-parent="true"></qv-spinner>\n\t\t<div class="toolbar-wrapper"\n\t\t\t qva-include-selection-toolbar\n\t\t\t component="input.selectionToolbarComponent"\n\t\t\t toolbar="toolbar"\n\t\t\t options="input.options"></div>\n\t\t<div class="listbox-wrapper">\n\t\t\t<qv-object object="object" model="input.model" options="input.options"></qv-object>\n\t\t</div>\n\t</lui-popover-body>\n</lui-popover>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95)],s=function(t,e){t.service("qvCaoSelectionService",[function(){var t={sendSelectedChartChangeEvent:function t(){e.publish("cao/insight/selectedChartChanged",this.selectedChart)},getSelectedChart:function t(){return this.selectedChart},selectChart:function t(e){this.selectedChart=e;this.sendSelectedChartChangeEvent()},clearSelection:function t(){if(this.selectedChart){this.selectedChart=void 0;this.sendSelectedChartChangeEvent()}}};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(875)],s=function(t,e,n){function i(t,e,n){this.visualization=t;this.searchReport=e;this.options=t.options;this.type="generated";this.analysisPrecedentId=t.matchRecord.analysisPrecedentId;this.appearsOnSheets=[];this.properties=n}i.prototype.getTitle=function(){var t=this.visualization.analysis.titleTemplate;var i=this.visualization.matchRecord.matches;return e.resolve(n.findTitleForChart(t,i))};i.prototype.getMatchDetails=function(){var t=[];if(this.searchReport.search){var e=this.searchReport.search.fieldLibItemFinder.searchHits;this.visualization.matchRecord.matches.forEach(function(n){var i=n.field;n.libId&&(i=n.libId+"- "+n.libIdLabel);var s=e[i];s&&t.push({matchedOn:s.matchingTypes[0],matchedField:n.field||n.libIdLabel})})}return t};i.prototype.getChartType=function(){return e.resolve(this.properties.visualization)};i.prototype.loadChart=function(n){var i=new e;var s=t.getService("qvCaoChartService");var o=this;o.getTitle().then(function(t){s.buildInsightChart(t,n,o.properties).then(function(t){i.resolve(t)})});return i.promise};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(369)],s=function(t,e){t.service("qvCaoComplexityEstimatorService",[function(){var t;var n=[];var i=/aggr|rangeSum|FirstSortedValue/gi;function s(t){t.getFieldList().then(function(t){n=t})}function o(t){var e=n.filter(function(e){return e.qName===t});return e[0]&&e[0].qCardinal?e[0].qCardinal:0}function r(t){var n=e.classify(t);var s=0;var o=false;n.results.forEach(function(t){(-1!=t.content.search(i)||t.remainder&&-1!=t.remainder.content.search(i))&&(o=true);(t.function&&""!=t.function.content||t.isOperator)&&s++});return s*(o?3:1)}function a(t){var e=r(t.expr);var n=o(t.field,t)*e;return n*(e+1)}var l=function t(e){var n=0;e.analysis.dims&&e.analysis.dims.forEach(function(t){n+=a(t)});e.analysis.msrs&&e.analysis.msrs.forEach(function(t){n+=a(t)});return n};t={init:s,estimateComplexity:l};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(407),n(187),n(178),n(408)],s=function(t,e,n,i,s){var o={};var r={classify:a};return r;function a(n){if(!t.isString(n))throw new Error("Expression-classifier: Expression must be a string");var i=n;if(o[i])return o[i];var r={content:n,count:0,result:{},results:[]};if(""===n){o[i]=r;return r}"="===n.charAt(0)&&(n=n.substr(1));var a=s.stripComments(n);var c=e.tokenize(a);r.count=c.length;c.forEach(function(t,e){var n;if(t.isOperator)r.results.push(t);else{n=l(t.content);r.results.push(n)}0===e&&(r.result=n)});o[i]=r;return r}function l(t){var e={content:t,function:{content:"",isCommon:false},remainder:{content:"",isFunction:false,isCommonFunction:false,isCommaSeparated:false,isFieldlike:false,isString:false,isNumber:false,isQualifier:false,qualified:{qualifier:"",content:"",isFieldlike:false}}};var n=c(t);if(n.hasAggregation){e.function.content=u(t,n);e.function.isCommon=v(e.function.content);e.remainder.content=d(t,n);var i=c(e.remainder.content);e.remainder.isFunction=b(i);e.remainder.isCommonFunction=y(e.remainder.content,i);e.remainder.isQualifier=h(e.remainder.content);e.remainder.isCommaSeparated=m(e.remainder.content);if(e.remainder.isQualifier){var s=f(e.remainder.content),o=g(e.remainder.content,s),r=c(o);e.remainder.qualified={qualifier:s,content:o,isFieldlike:x(r)}}n=i}else e.remainder.content=e.content;e.remainder.isFieldlike=x(n);e.remainder.isString=q(e.remainder.content);e.remainder.isNumber=S(e.remainder.content);return e}function c(t){var e={};e.expression=t;e.hasPrefix="="===t.charAt(0);e.leftSymbolIndex=t.indexOf(n.SYMBOLS.FUNCTION.LEFT);e.hasAggregation=e.leftSymbolIndex>0;e.isRightSymbolLast=t.substring(t.length-1)===n.SYMBOLS.FUNCTION.RIGHT;e.isEncapsulated=e.hasAggregation&&e.isRightSymbolLast;e.hasOperator=p(t);return e}function u(t,e){var n=e.hasPrefix?1:0,i=e.hasPrefix?e.leftSymbolIndex+1:e.leftSymbolIndex;return t.substr(n,i).trim()}function d(t,e){var n=t.substr(e.leftSymbolIndex),i=n.substr(1,n.length-2);return i.trim()}function p(t){var e=n.OPERATORS,i=e.SINGLES,s=e.MULTIPLES,o=e.WORDS;var r=i.some(function(e){return t.indexOf(e)>-1});if(r)return true;var a=s.some(function(e){return t.indexOf(e)>-1});if(a)return true;var l=o.some(function(e){return t.indexOf(" "+e+" ")>-1});return l}function h(t){return n.QUALIFIERS.some(function(e){return 0===t.toLowerCase().indexOf(e)})}function f(t){var e=n.QUALIFIERS.filter(function(e){return 0===t.toLowerCase().indexOf(e)}).shift();return e}function g(t,e){return t.slice(e.length).trim()}function v(t){return n.COMMON_FUNCTIONS.some(function(e){return t.toLowerCase()===e})}function m(t){var e=i.getCharacterIndexes(t,",");return e.some(function(e){return!_(t,e)})}function b(t){return t.isEncapsulated&&!t.isBleedingOperator}function y(t,e){if(!e.isEncapsulated)return false;var n=t.substr(0,e.leftSymbolIndex);return v(n)}function x(t){var e=t.expression;if(q(t.expression))return false;var s=w(e,n.SYMBOLS.FIELD.LEFT),o=C(e,n.SYMBOLS.FIELD.RIGHT),r=i.getCharacterCount(e,n.SYMBOLS.FIELD.LEFT),a=i.getCharacterCount(e,n.SYMBOLS.FIELD.RIGHT);if(s&&o&&1===r&&1===a)return true;return I(t)}function q(t){var e=w(t,n.SYMBOLS.STRING.LEFT),s=C(t,n.SYMBOLS.STRING.RIGHT),o=n.SYMBOLS.STRING.LEFT===n.SYMBOLS.STRING.RIGHT,r=i.getCharacterCount(t,n.SYMBOLS.STRING.LEFT),a;if(o)a=2===r;else{var l=i.getCharacterCount(t,n.SYMBOLS.STRING.RIGHT);a=1===r&&1===l}return e&&s&&a}function S(t){return!Number.isNaN(+t)}function w(t,e){return t.charAt(0)===e}function C(t,e){return t.charAt(t.length-1)===e}function I(t){if(t.hasAggregation)return false;var e=t.expression,i=e.indexOf(" ")>-1;if(i)return false;var s=n.OPERATORS.SINGLES.concat(n.OPERATORS.MULTIPLES).some(function(t){return e.indexOf(t)>-1});return!s}function _(t,e){return Object.keys(n.SYMBOLS).some(function(s){var o=n.SYMBOLS[s];return i.getIsCharacterEncapsulated(t,e,o.LEFT,o.RIGHT)})}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(894),n(169)],s=function(t,e){t.directive("qvGlobalSearchHighlights",function(){return{restrict:"E",template:e,replace:true,scope:{qText:"=",qRanges:"="},link:function e(n){var i=t.getService("qvGlobalSearchDataService").getMaxColorsNum();n.slices=null;n.$watch("qRanges",function(t){if(t){var e=0,o=[],r=t.sort(function(t,e){return t.qCharPos-e.qCharPos});for(var a=0;a<r.length;a++){var l=r[a];l.qCharPos>e&&o.push({qTerm:-1,qSliceText:n.qText.slice(e,l.qCharPos),highlight:false,iStart:e,iEnd:l.qCharPos});e=l.qCharPos+l.qCharCount;var c={qTerm:l.qTerm%i,highlight:true,qSliceText:n.qText.slice(l.qCharPos,e),iStart:l.qCharPos,iEnd:e};s(o,c);a===t.length-1&&e<n.qText.length&&o.push({qTerm:-1,qSliceText:n.qText.slice(e,n.qText.length),highlight:false,iStart:e,iEnd:n.qText.length})}n.slices=o}});function s(t,e){var n=null;for(var i=0;i<t.length;i++)if(t[i].iStart===e.iStart){n=t.splice(i,1,e);break}n||t.push(e)}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(99),n(96)],s=function(t,e,n){t.directive("qvaSmartSearchSwipeHorizontal",["$parse",function(t){var i={up:false,down:false,right:true,left:true};return{restrict:"A",link:function s(o,r,a){var l=t(a.qvaSmartSearchSwipeHorizontal);function c(t,e){if(i[e.swipe.direction]){var s=e.swipe.curDeltaX>0?-1:0===e.swipe.curDeltaX?0:1;l(o,{delta:s});n.preventGestures(this.gestureHandler)}}e.treatAsDesktop()||n(r[0]).swipe({options:{radiusThreshold:50,preventDefault:false,useMomentum:true},start:c});o.$on("$destroy",function(){n(r[0]).off()})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(2)],s=function(t){var e=function t(){};e.parseQuery=function(e,n){var i={text:e,appId:n};var s={method:"POST",url:"/api/v1/sentences",data:i};return t.request(s).then(function(t){var e=t.data;return e}).catch(function(t){throw t})};e.getQueries=function(e,n){var i="?limit="+e+"&appId="+n;var s={method:"GET",url:"/api/v1/sentences"+i};return t.request(s).then(function(t){var e=t.data.data;return e}).catch(function(t){throw t})};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91)],s=function(t,e){t.service("qvCaoLearningConfidenceService",[function(){var t;var n={HIGH:{value:10,text:"high"},MEDIUM:{value:5,text:"medium"},LOW:{value:2,text:"low"},EMPTY:{value:0,text:"empty"}};function i(t){var e=t.getRelevance();var i=t.getMatchRecord();var s=n.EMPTY;if(t.isModified()){s=n.EMPTY;return s.text}1===e?s=n.HIGH:e>=.5?s=n.HIGH:e>0&&(s=n.HIGH);i.precedentStats&&(i.precedentStats.matchedFields===i.matches.length?s=n.HIGH:i.precedentStats.matchedFields>0&&s.value<n.MEDIUM.value&&(s=n.HIGH));return s.text}function s(t,n,i,s){var o={search:[],learned:[]};var r=t.field||t.libIdLabel;var a="";var l=i.filter(function(t){return t.matchedField===r})[0];var c=!!t.libIdLabel;var u=c?t.libId:null;if(l){switch(l.matchedOn){case"absoluteExactMatchCaseSensitive":a=e.get("cao.search.generated.absoluteExactMatchCaseSensitive");break;case"absoluteExactMatch":a=e.get("cao.search.generated.absoluteExactMatch");break;case"exactMatch":a=e.get("cao.search.generated.exactMatch");break;case"literalMatch":a=e.get("cao.search.generated.literalMatch");break;case"headMatch":a=e.get("cao.search.generated.headMatch");break;case"headSynonymMatch":a=e.get("cao.search.generated.headSynonymMatch");break;case"headStemMatch":a=e.get("cao.search.generated.headStemMatch");break;case"headStemSynonymMatch":a=e.get("cao.search.generated.headStemSynonymMatch");break;case"partialTokenMatch":a=e.get("cao.search.generated.partialTokenMatch");break;case"substrPartialMatch":a=e.get("cao.search.generated.substrPartialMatch");break;case"semanticMatch":a=e.get("cao.search.generated.semanticMatch");break;case"valueMatch":a=e.get("cao.search.generated.valueMatch");break;default:break}if(a){a=a.replace(/\{1\}/g,function(t){return"<b>"+t+"</b>"});var d=e.get(a,[n.search.searchPhrase.text,l.matchedField]);o.search.push({text:d,field:l.matchedField,priority:1,type:t.slotRole,isLibItem:c,libItemId:u,searchMatch:true})}}if(t.appPrecedent&&t.appPrecedent.appPrecedent){var p=false;if(t.appPrecedent.userDefined&&t.appPrecedent.userDefined.isUserDefined&&t.appPrecedent.userDefined.relations.indexOf("define")>-1){p=true;a=t.aggr||"measure"===t.slotRole?e.get("cao.confidence.reason.defined_measure"):e.get("cao.confidence.reason.defined_dimension")}else a=t.aggr||"measure"===t.slotRole?e.get("cao.confidence.reason.learned_measure"):e.get("cao.confidence.reason.learned_dimension");a=a.replace(/\{0\}/g,function(t){return"<b>"+t+"</b>"});o.learned.push({text:e.get(a,r),field:r,priority:1,type:t.slotRole,isLibItem:c,libItemId:u,userMatch:p})}if(0===o.learned.length&&s){a=t.aggr||"measure"===t.slotRole?e.get("cao.confidence.reason.assumed_measure"):e.get("cao.confidence.reason.assumed_dimension");a=a.replace(/\{0\}/g,function(t){return"<b>"+t+"</b>"});o.learned.push({text:e.get(a,r),field:r,priority:0,type:t.slotRole,isLibItem:c,libItemId:u})}return o}t={getReasonForSelectingField:s,determineConfidence:i,confidenceLevels:n};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(936),n(103)],s=function(t,e,n,i){t.nativeComponent("qvCaoRefreshIndicator",{bindings:{},controller:[function(){this.refresh=function(){i.trackEvent(i.customEvents.INSIGHTS_REFRESH_CLICKED);e.publish("cao/insight/refresh")}}],template:n})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(971)],s=function(t,e,n){var i=null;var s=null;function o(o){var r={id:o.id,type:o.type,canCopy:function t(){return false},canCut:function t(){return false},canRemove:function t(){return true},remove:function t(){o.model.removeObject()},getAllPropertyPanelContent:function r(){if(!i){i=t.getService("$cacheFactory");s=i("pp-navPoint")}return e.all({properties:o.model.getProperties(),layout:o.model.getLayout()}).then(function(t){var e={definition:n,iconClass:"lui-icon lui-icon--sign-post",titleRef:"qMeta.title",properties:t.properties,layout:t.layout,model:o.model,cache:s,type:o.invalid?"invalid":"odagNavPoint"};return e})}};return r}return{createSelectedObjFromNavPoint:o}}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,function(t,e,n){"use strict";var i,s;!(i=[n(91)],s=function(t){function e(t){return"MessageCode."+(t||0)}function n(n){var i=t.get(e(n.qMessageCode),n.qMessageParameters);return i}function i(t){var e="";if(t)for(var i in t){e+=n(t[i]);i<t.length-1&&(e+="\n")}return e}function s(t){t=Math.floor(t);return t>9?""+t:"0"+t}function o(t){var e,n;var i=[];var s=[];for(e in t){n=t[e];!n.qErrorString||!n.qLine||(s[n.qLine]=true)}for(e in t){n=t[e];!n.qErrorString&&s[n.qLine]||i.push(n)}return i}return{translateMessage:n,translateMessageArray:i,formatNum:s,filterOutDuplicates:o}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(236),n(96)],s=function(t,e,n){function i(i,s,o){var r=false;var a=null;var l=o.cond||function(){return true};var c=o.onStart||function t(){};var u=o.onStop||function t(){};var d=o.isEnabled||function(){return true};function p(e){return"string"===typeof o.elem?t(o.elem)[0]:"function"===typeof o.elem?o.elem(e):o.elem}function h(e){return"function"===typeof o.info?o.info(t(e.target).scope(),e):o.info}function f(e){t(e.target).off("remove",f);r.cancel();u(e,true)}i.on("qv-press",s,function(t){r=null;var e=h(t);if(!d(e,t)){r=false;return}o.allowScroll||n.utils.touch||t.preventDefault()});i.on("qv-swipe",s,function(e){if(false===r)return;if(true===r){clearTimeout(a);a=null}else if(r){t(e.target).off("remove",f);r.update(e);r.end(e);u(e,false)}r=false});i.on("qv-swipecancel",s,function(e){if(false===r)return;if(true===r){clearTimeout(a);a=null}else if(r){t(e.target).off("remove",f);r.cancel();u(e,true)}r=false});i.on("qv-swipestart qv-swipeupdate",s,function(i){if(false===r)return;if(!r){var s=l(i.gestureData.swipe);if(s){r=true;n.WebkitHack.prevent();a=setTimeout(function(){a=null;t(i.target).on("remove",f);c(i,t(i.target).scope());var n=p(i);var s=h(i);r=e.startDrag(n,s);r&&r.update(i)},0)}else false===s&&(r=false)}if(r){i.preventDefault();true!==r&&r.update(i)}})}return{addDrag:i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(101),n(108),n(618),n(619),n(620),n(329),n(444),n(91),n(100),n(107),n(90),n(185),n(49)],s=function(t,e,n,i,s,r,a,l,c,u,d,p,h){var f={sorting:n,axis:i,styling:s};var g=p.getLogicFor("hard","default");function v(e,n){return t.getValue(e,"qDef.qNumFormat.qFmt")===a.getDefaultNumericFormat(e.qDef.qNumFormat,n?n.localeInfo:"")}function m(e){void 0===t.getValue(e,"color.useMeasureGradient")&&t.setValue(e,"color.useMeasureGradient",false);var n=t.getValue(e,"color.auto"),i=t.getValue(e,"color.mode");return!n&&"byMeasure"===i&&"libraryItem"===t.getValue(e,"color.byMeasureDef.type")}f.general={type:"items",translation:"properties.general",grouped:true,items:{showTitles:{translation:"properties.showTitles",type:"boolean",ref:"showTitles",component:"switch",defaultValue:true,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],snapshot:{tid:"property-showTitles"}},titles:{type:"items",show:function t(e){return false!==e.showTitles},items:{title:{translation:"Common.Title",component:"string",expression:"optional",ref:"title",defaultValue:""},subtitle:{translation:"properties.subtitle",type:"string",expression:"optional",ref:"subtitle",defaultValue:""},footnote:{translation:"properties.footnote",type:"string",expression:"optional",ref:"footnote",defaultValue:""}}},details:{type:"items",show:true,items:{showDetails:{translation:"properties.showDetails",type:"boolean",ref:"showDetails",component:"switch",defaultValue:false,options:[{value:true,translation:"Common.Show"},{value:false,translation:"properties.hide"}]},allowShowDetailsMessage:{component:"text",translation:"properties.allowShowDetails",style:"hint"}}}}};f.metadata={type:"items",translation:"properties.metadata",schemaIgnore:true,show:function t(e){return"masterobject"===e.qInfo.qType},grouped:true,items:{name:{translation:"Common.Name",type:"string",ref:"qMetaDef.title",minlength:1,rollbackInvalid:true,show:function t(e){return e.qMetaDef}},labelExpression:{translation:"metadata.labelExpression",type:"string",component:"expression",expressionType:"StringExpression",expression:"always",change:function t(e){var n=d.getValue(e,"labelExpression.qStringExpression.qExpr");n||(e.labelExpression=void 0)},ref:"labelExpression",show:function t(e){return!!e.qMetaDef}},description:{translation:"Common.Description",type:"string",component:"textarea",expression:"optional",change:function t(e,n,i){if("object"===o(i.qMetaDef.description)){i.descriptionExpression=i.qMetaDef.description;i.qMetaDef.description=""}else if("string"===typeof i.descriptionExpression&&i.descriptionExpression){i.qMetaDef.description=i.descriptionExpression;i.descriptionExpression=void 0}},refFn:function t(e){var n="object"===o(e.descriptionExpression);return n?"descriptionExpression":"qMetaDef.description"},maxlength:u.description,show:function t(e){return e.qMetaDef}},tags:{translation:"Common.Tags",component:"tags",type:"array",ref:"qMetaDef.tags",show:function t(e){return e.qMetaDef}}}};f.settings={type:"items",component:"expandable-items",translation:"Common.Appearance",items:{metadata:f.metadata,general:f.general}};h.getFlag("ALT_STATE_ONE")&&e.inClient()&&(f.settings.items.selections=r);f.addons={type:"items",component:"expandable-items",translation:"properties.addons",items:{}};f.dimensions={type:"array",component:"dimensions",translation:"Common.Dimensions",alternativeTranslation:"properties.alternative.dimensions",ref:"qHyperCubeDef.qDimensions",disabledRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions",min:1,allowAdd:true,allowRemove:true,allowMove:true,addTranslation:"properties.dimensions.add",grouped:true,items:{libraryId:{type:"string",component:"library-item",libraryItemType:"dimension",ref:"qLibraryId",translation:"Common.Dimension",show:function t(e){return e.qLibraryId}},inlineDimension:{component:"inline-dimension",show:function t(e){return!e.qLibraryId}},autoSort:{ref:"qDef.autoSort",type:"boolean",defaultValue:true,show:false},cId:{ref:"qDef.cId",type:"string",show:false},nullSuppression:{type:"boolean",ref:"qNullSuppression",defaultValue:false,translation:"properties.dimensions.showNull",inverted:true},dimensionLimits:{type:"items",items:{otherMode:{type:"string",component:"dropdown",ref:"qOtherTotalSpec.qOtherMode",translation:"properties.dimensionLimits.limitation",options:[{value:"OTHER_OFF",translation:"properties.dimensionLimits.none"},{value:"OTHER_COUNTED",translation:"properties.dimensionLimits.fixedNumber"},{value:"OTHER_ABS_LIMITED",translation:"properties.dimensionLimits.exactValue"},{value:"OTHER_REL_LIMITED",translation:"properties.dimensionLimits.relativeValue"}],defaultValue:"OTHER_OFF",readOnly:function t(e,n){return 0===n.getMeasures().length},change:function e(n){var i=t.getValue(n,"qOtherTotalSpec.qOtherMode"),s;if("OTHER_REL_LIMITED"===i){s=t.getValue(n,"qOtherTotalSpec.qOtherLimit.qv","0");if(s.length&&"%"!==s[s.length-1]&&d.isNumeric(s)){n.qOtherTotalSpec.qOtherLimit||t.setValue(n,"qOtherTotalSpec.qOtherLimit",{qv:"0"});n.qOtherTotalSpec.qOtherLimit.qv=s+"%"}}else if("OTHER_ABS_LIMITED"===i){s=t.getValue(n,"qOtherTotalSpec.qOtherLimit.qv","0");if(s.length&&"%"===s[s.length-1]){n.qOtherTotalSpec.qOtherLimit||t.setValue(n,"qOtherTotalSpec.qOtherLimit",{qv:"0"});n.qOtherTotalSpec.qOtherLimit.qv=s.substr(0,s.length-1)}}}},otherSortMode:{type:"string",component:"buttongroup",ref:"qOtherTotalSpec.qOtherSortMode",options:[{value:"OTHER_SORT_DESCENDING",translation:"properties.dimensionLimits.fixedNumber.sortDescendingLabel"},{value:"OTHER_SORT_ASCENDING",translation:"properties.dimensionLimits.fixedNumber.sortAscendingLabel"}],defaultValue:"OTHER_SORT_DESCENDING",show:function e(n,i){return"OTHER_COUNTED"===t.getValue(n,"qOtherTotalSpec.qOtherMode")&&i.getMeasures().length>0}},otherCounted:{component:"expression",expressionType:"ValueExpr",ref:"qOtherTotalSpec.qOtherCounted",defaultValue:{qv:"10"},show:function e(n,i){return"OTHER_COUNTED"===t.getValue(n,"qOtherTotalSpec.qOtherMode")&&i.getMeasures().length>0}},otherLimitMode:{type:"string",component:"buttongroup",ref:"qOtherTotalSpec.qOtherLimitMode",options:[{value:"OTHER_GE_LIMIT",label:">=",tooltipTranslation:"properties.greaterOrEqualTo"},{value:"OTHER_GT_LIMIT",label:">",tooltipTranslation:"properties.greaterThan"},{value:"OTHER_LT_LIMIT",label:"<",tooltipTranslation:"properties.lessThan"},{value:"OTHER_LE_LIMIT",label:"<=",tooltipTranslation:"properties.lessOrEqualTo"}],defaultValue:"OTHER_GE_LIMIT",icon:true,smallIconFont:true,show:function e(n,i){var s=t.getValue(n,"qOtherTotalSpec.qOtherMode");return("OTHER_ABS_LIMITED"===s||"OTHER_REL_LIMITED"===s)&&i.getMeasures().length>0}},otherLimit:{component:"expression",expressionType:"ValueExpr",ref:"qOtherTotalSpec.qOtherLimit",defaultValue:{qv:"0"},show:function e(n,i){var s=t.getValue(n,"qOtherTotalSpec.qOtherMode");return("OTHER_ABS_LIMITED"===s||"OTHER_REL_LIMITED"===s)&&i.getMeasures().length>0}},calculatedAgainstMessage:{component:"text",label:function t(e,n){var i=n.getMeasureLayouts()[0];return i?l.get("Properties.DimensionLimits.CalculatedAgainst",i.qFallbackTitle):l.get("Properties.DimensionLimits.NoMeasure")},show:function e(n){var i=t.getValue(n,"qOtherTotalSpec.qOtherMode");return"OTHER_OFF"!==i}}}},others:{type:"items",items:{suppressOther:{type:"boolean",ref:"qOtherTotalSpec.qSuppressOther",translation:"properties.dimensionLimits.showOthers",inverted:true,defaultValue:false,show:function e(n,i){return"OTHER_OFF"!==t.getValue(n,"qOtherTotalSpec.qOtherMode")&&i.getMeasures().length>0}},othersLabel:{type:"string",expression:"optional",ref:"qDef.othersLabel",translation:"properties.dimensionLimits.othersLabel",defaultValue:function t(){return l.get("properties.dimensionLimits.others")},change:function t(e){if(e.qDef){var n=e.qDef.othersLabel||"";if("object"===o(n)){n=n.qStringExpression&&n.qStringExpression.qExpr||"";e.qOtherLabel={qv:0===n.indexOf("=")?n:"="+n}}else e.qOtherLabel={qv:n}}},show:function e(n,i){return!t.getValue(n,"qOtherTotalSpec.qSuppressOther")&&"OTHER_OFF"!==t.getValue(n,"qOtherTotalSpec.qOtherMode")&&i.getMeasures().length>0}},othersLabel2:{type:"string",component:"expression",expressionType:"StringExpr",ref:"qOtherLabel",translation:"properties.dimensionLimits.othersLabel",defaultValue:function t(){return l.get("properties.dimensionLimits.others")},show:false}}}}};f.measures={type:"array",component:"measures",translation:"Common.Measures",ref:"qHyperCubeDef.qMeasures",disabledRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",min:1,allowAdd:true,allowRemove:true,allowMove:true,addTranslation:"properties.measures.add",grouped:true,items:{libraryId:{type:"string",component:"library-item",libraryItemType:"measure",ref:"qLibraryId",translation:"Common.Measure",show:function t(e){return e.qLibraryId}},inlineMeasure:{component:"inline-measure",show:function t(e){return!e.qLibraryId}},autoSort:{ref:"qDef.autoSort",type:"boolean",defaultValue:true,show:false},cId:{ref:"qDef.cId",type:"string",show:false},numberFormatting:{type:"items",items:{numberFormattingType:{type:"string",component:"custom-formatter-dropdown",ref:"qDef.qNumFormat.qType",translation:"properties.numberFormatting",defaultValue:"U",schemaIgnore:true,options:[{value:"U",translation:"Common.Auto"},{value:"F",translation:"properties.numberFormatting.types.number"},{value:"M",translation:"properties.numberFormatting.types.money"},{value:"D",translation:"properties.numberFormatting.types.date"},{value:"IV",translation:"properties.numberFormatting.types.duration"},{value:"R",translation:"Common.Custom"},{value:"OFF",translation:"properties.numberFormatting.types.customFormatting"}],change:function t(e,n,i,s){a.setNumFmtPattern("qType",e.qDef.qNumFormat,s.localeInfo)}},numberFormattingMode:{type:"boolean",component:"switch",ref:"qDef.numFormatFromTemplate",translation:"properties.numberFormatting.formatting",defaultValue:true,options:[{value:true,translation:"properties.numberFormatting.simple"},{value:false,translation:"Common.Custom"}],show:function e(n){return["F","D","TS","T"].contains(t.getValue(n,"qDef.qNumFormat.qType"))}},numberFormattingTemplates:{type:"string",component:"number-formatter-dropdown",ref:"qDef.qNumFormat.qFmt",defaultValue:"#,##0",schemaIgnore:true,show:function e(n){var i=t.getValue(n,"qDef.qNumFormat.qType");return["F","D","TS","T"].contains(i)&&true===t.getValue(n,"qDef.numFormatFromTemplate",true)}},numDecimals:{type:"integer",ref:"qDef.qNumFormat.qnDec",translation:"properties.numberFormatting.nDec",defaultValue:2,schemaIgnore:true,min:0,max:14,show:false},numPrecisionDigits:{type:"integer",ref:"qDef.qNumFormat.qnDec",translation:"properties.numberFormatting.significantFigures",defaultValue:10,schemaIgnore:true,min:1,max:14,show:false},decimalSep:{type:"string",ref:"qDef.qNumFormat.qDec",translation:"properties.numberFormatting.dec",defaultValue:".",schemaIgnore:true,show:function e(n){var i=t.getValue(n,"qDef.qNumFormat.qType");return"R"===i},change:function t(e,n,i,s){a.setNumFmtPattern("qDec",e.qDef.qNumFormat,s.localeInfo)},invalid:function e(n){return t.getValue(n,"qDef.qNumFormat.qDec")===t.getValue(n,"qDef.qNumFormat.qThou")},readOnly:function t(e,n,i,s){return!v(e,s)}},thousandSep:{type:"string",ref:"qDef.qNumFormat.qThou",translation:"properties.numberFormatting.thousandSeparator",defaultValue:"",schemaIgnore:true,show:function e(n){var i=t.getValue(n,"qDef.qNumFormat.qType");return"R"===i},change:function t(e,n,i,s){a.setNumFmtPattern("qThou",e.qDef.qNumFormat,s.localeInfo)},invalid:function e(n){var i=t.getValue(n,"qDef.qNumFormat.qType");if("I"===i)return false;return t.getValue(n,"qDef.qNumFormat.qDec")===t.getValue(n,"qDef.qNumFormat.qThou")},readOnly:function t(e,n,i,s){return!v(e,s)}},format:{type:"string",component:"number-formatter",ref:"qDef.qNumFormat.qFmt",resetTranslation:"properties.numberFormatting.resetPattern",translation:"properties.numberFormatting.formatPattern",defaultValue:"",schemaIgnore:true,show:function t(e){return b(e)},change:function t(e){e.qDef.qNumFormat.qFmt=a.getNormalizedFormat(e.qDef.qNumFormat,e.qDef.qNumFormat.qFmt)},invalid:function t(e,n,i){if(["D","T","TS","IV"].contains(e.qDef.qNumFormat.qType))return false;var s="R"===e.qDef.qNumFormat.qType?e.qDef.qNumFormat.qDec:i.localeInfo["q"+("M"===e.qDef.qNumFormat.qType?"Money":"")+"DecimalSep"],o=new RegExp("(0|#)"+d.escapeRegExp(s)+"0*#*"),r=(e.qDef.qNumFormat.qFmt||"").split(";"),a=r[0].match(o),l=a&&a[0]?a[0].length-2:0,c=r[1]?r[1].match(o):null,u=c&&c[0]?c[0].length-2:0;return l>15||u>15}}}}}};function b(e){var n=t.getValue(e,"qDef.qNumFormat.qType");return["R","M","IV"].contains(n)||"U"!==n&&false===t.getValue(e,"qDef.numFormatFromTemplate",true)}f.reflines={type:"array",ref:"refLine.refLines",translation:"properties.referenceLines",itemTitleRef:"label",allowAdd:true,allowRemove:true,allowMove:true,add:function t(e,n){var i=c.initializeService("object."+c.getMatch(n.visualization||n.qInfo.qType));var s=i.getStyle("referenceLine.label.name","color");var o=c.currentPalette.indexOf(s);e.paletteColor={index:o,color:s}},addTranslation:"properties.referenceLines.add",items:{show:{ref:"show",translation:"Common.Show",type:"boolean",defaultValue:true},label:{ref:"label",translation:"Common.Label",type:"string"},paletteColor:{ref:"paletteColor",translation:"properties.color",type:"object",component:"color-picker",dualOutput:true,show:function e(n){if(!t.getValue(n,"paletteColor")){var i=c.resolveColor(t.getValue(n,"color"));var s={index:-1,color:i};t.setValue(n,"paletteColor",s)}return true}},expressionValue:{ref:"refLineExpr.value",translation:"properties.referenceLines.expression",type:"number",expression:"optional",expressionType:"ValueExpression",defaultValue:0,change:function t(e){var n=e.refLineExpr;"object"===o(n.value)?n.label={qStringExpression:{qExpr:n.value.qValueExpression.qExpr}}:n.label=""+n.value}},expressionLabel:{ref:"refLineExpr.label",translation:"properties.referenceLines.expression",type:"string",expression:"optional",expressionType:"StringExpression",defaultValue:"0",show:false}}};f.staticCalcCond={type:"items",items:{expr:{ref:"qHyperCubeDef.qCalcCond",type:"string",component:"expression",expressionType:"ValueExpr",translation:"properties.hyperCube.calcCond"},customErrorMessage:{ref:"qHyperCubeDef.customErrorMessage.calcCond",component:"textarea",defaultValue:"",type:"string",placeholderTranslation:"Object.ErrorMessage.CalculationCondition",translation:"properties.hyperCube.calcCondMessage",show:function e(n){var i=t.getValue(n,"qHyperCubeDef.qCalcCond");return i.qv&&""!==i.qv}}}};f.dataHandling={type:"items",translation:"properties.dataHandling",grouped:true,items:{suppressZero:{ref:"qHyperCubeDef.qSuppressZero",defaultValue:false,translation:"properties.hyperCube.showZero",type:"boolean",inverted:true},calcCond:{uses:"staticCalcCond"}}};f.calcCond={component:"calc-cond",ref:"qHyperCubeDef",schemaIgnore:true};f.colorsAndLegend={type:"items",translation:"properties.colorsAndLegend",grouped:true,items:{colors:{type:"items",items:{autoColor:{ref:"color.auto",type:"boolean",translation:"properties.colors",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},colorMode:{ref:"color.mode",type:"string",component:"dropdown",options:g.color.colorMode.options,defaultValue:"primary",show:g.color.colorMode.show,globalChange:function t(e,n){g.color.colorBy.globalChange(e,n,"qHyperCubeDef.")}},colorByDimension:{ref:"color.byDimDef",schemaIgnore:true,translation:"properties.colorBy.selectDimension",type:"object",defaultValue:{},component:"color-by-dropdown",libraryItemType:"dimension",show:g.color.colorBy.dimension.show,change:g.color.colorBy.dimension.change},colorByMeasure:{ref:"color.byMeasureDef",schemaIgnore:true,translation:"properties.colorBy.selectMeasure",type:"object",defaultValue:{},component:"color-by-dropdown",libraryItemType:"measure",show:g.color.colorBy.measure.show,change:g.color.colorBy.measure.change},colorByLabel:{type:"string",ref:"color.altLabel",schemaIgnore:true,translation:"Common.Label",expression:"optional",show:g.color.colorBy.label.show,change:g.color.colorBy.label.change},baseColors:{type:"items",items:{useBaseColor:{ref:"color.useBaseColors",type:"string",translation:"properties.useLibraryColors",component:"dropdown",show:g.color.baseColor.show,globalChange:function e(n){"byMultiple"===t.getValue(n,"color.mode","")&&"dimension"===t.getValue(n,"color.useBaseColors","")&&t.setValue(n,"color.useBaseColors","measure")},defaultValue:"off",options:function t(e,n){var i=[{value:"off",translation:"Common.None"}];g.color.baseColor.hasMeasureColor(n)&&g.color.baseColor.isSupported(e.visualization)&&i.push({value:"measure",translation:"Common.Measure"});g.color.baseColor.hasDimensionColor(n)&&"byMultiple"!==e.color.mode&&i.push({value:"dimension",translation:"Common.Dimension"});return i}},measureColor:{translation:"properties.libraryColors",component:"measure-color",show:g.color.baseColor.showColors}}},paletteColor:{ref:"color.paletteColor",translation:"properties.color",type:"object",component:"color-picker",readOnly:g.color.paletteColor.readOnly,dualOutput:true,show:g.color.paletteColor.show,defaultValue:g.color.paletteColor.defaultValue},useDimColVal:{ref:"color.useDimColVal",translation:"properties.libraryColors",type:"boolean",component:"switch",defaultValue:true,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],show:g.color.useDimColVal.show},useMeasureGradient:{ref:"color.useMeasureGradient",translation:"properties.libraryColors",type:"boolean",component:"switch",defaultValue:true,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],show:function t(e){return m(e)}},persistentColors:{ref:"color.persistent",translation:"properties.colorPersistence",type:"boolean",defaultValue:false,show:g.color.persistentColors.show,readOnly:g.color.persistentColors.readOnly},attributeExpression:{type:"string",component:"expression",expressionType:"measure",schemaIgnore:true,ref:"qHyperCubeDef.qMeasures.0.qAttributeExpressions.0.qExpression",change:g.color.attributeExpression.change,globalChange:g.color.attributeExpression.globalChange,translation:"Common.Expression",show:g.color.attributeExpression.show},expressionIsColor:{ref:"color.expressionIsColor",translation:"properties.expressionIsColor",type:"boolean",defaultValue:true,show:g.color.expressionIsColor.show},expressionLabel:{type:"string",ref:"color.expressionLabel",translation:"Common.Label",change:g.color.expressionLabel.change,show:g.color.expressionLabel.show},colorSchemeMeasure:{ref:"color.measureScheme",type:"string",translation:"properties.colorScheme",component:"item-selection-list",defaultValue:t.getValue(c,"scales.0.propertyValue","sg"),items:g.helpers.getMeasureSchemeOptions,show:function e(n){return g.color.colorSchemeMeasure.show(n)&&(!m(n)||!t.getValue(n,"color.useMeasureGradient"))}},reverseScheme:{ref:"color.reverseScheme",translation:"properties.reverseColorScheme",type:"boolean",defaultValue:false,show:g.color.reverseScheme.show},colorSchemeDimension:{ref:"color.dimensionScheme",type:"string",translation:"properties.colorScheme",component:"item-selection-list",defaultValue:t.getValue(c,"dataPalettes.0.propertyValue","12"),items:g.helpers.getDimensionSchemeOptions,show:g.color.colorSchemeDimension.show},customRange:{type:"items",items:{autoMinMax:{ref:"color.autoMinMax",type:"boolean",translation:"properties.axis.range",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],show:g.color.customRange.autoMinMax.show},min:{ref:"color.measureMin",translation:"properties.axis.min",expression:"optional",type:"number",show:g.color.customRange.min.show,invalid:g.color.customRange.min.invalid},max:{ref:"color.measureMax",translation:"Common.Max",expression:"optional",type:"number",defaultValue:10,show:g.color.customRange.max.show,invalid:g.color.customRange.max.invalid}},show:g.color.customRange.show}}},legend:{show:g.legend.show,type:"items",items:{show:{ref:"legend.show",type:"boolean",translation:"properties.legend.show",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}]},dock:{type:"string",component:"dropdown",ref:"legend.dock",translation:"properties.legend.position",options:[{value:"auto",translation:"Common.Auto"},{value:"right",translation:"properties.dock.right"},{value:"bottom",translation:"Common.Bottom"},{value:"left",translation:"properties.dock.left"},{value:"top",translation:"Common.Top"}],defaultValue:"auto",show:g.legend.dock.show},showTitle:{ref:"legend.showTitle",translation:"properties.legend.showTitle",type:"boolean",defaultValue:true,show:g.legend.showTitle.show}}}}};f.data={type:"items",component:"hypercube-data",translation:"Common.Data",addTranslation:"Properties.AddData",allowAdd:true,items:{dimensions:f.dimensions,measures:f.measures}};f.layers={component:"layers"};return f}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={hasTimeTag:function t(e){return e&&e.qTags&&e.qTags.some(function(t){return["$date","$timestamp","$time"].indexOf(t)>=0})},isTimeDimension:function t(e,n){if(!n||!e)return false;var i=this.hasTimeTag(n);return!!i||n.qNumFormat&&["D","TS","T"].contains(n.qNumFormat.qType)},maxNumberOfLines:12,maxNumberOfDataPoints:2e3};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t,e,n){var i={},s,o,r;switch(t){case"dimension":if(n.qLibraryId){i.type="dimension";i.name=n.qLibraryId;i.id=n.qLibraryId}else{i.type="field";if(e){i.name=n.label||n.qDef;i.id=n.qDef}else{s=n.qDef,o=!!s.qLabelExpression,r=s.qFieldLabels&&s.qFieldLabels[0];i.name=s.qFieldDefs[0];i.label=o?s.qLabelExpression:r?s.qFieldLabels[0]:s.qFieldDefs[0]}}break;case"measure":if(n.qLibraryId){i.type="measure";i.name=n.qLibraryId;i.id=n.qLibraryId}else{i.type="expression";if(e){i.name=n.label||n.qExpression;i.id=n.qExpression}else{s=n.qDef,o=!!s.qLabelExpression,r=!!s.qLabel;i.name=s.qDef;i.label=o?s.qLabelExpression:r?s.qLabel:s.qDef}}break;default:throw new Error("Default-property-logic.js: getColorByDefinition: Illegal input")}return i}return{getColorByDefinition:t}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(205),n(90),n(89),n(650),n(657),n(142),n(424),n(225),n(103),n(658)],s=function(t,e,n,i,s,o,r,a,l){var c;function u(t,e,i,s){r.begin();return t.updateData(i.layout).then(function(){if(!e.isDestroyed&&s.visible){var o=t.$element;i.ext.hasDefaultTemplate()&&(o=o.children().first());return t.paint(o,i.layout)}return n.resolve()}).finally(r.end).catch(function(t){l.trackEvent(l.customEvents.EXTENSION_PAINT_ERROR,{message:"string"===typeof t?t:t.message,stack:t.stack,extension:i.object&&i.object.type?i.object.type.type:"undefined",isThirdParty:i.object&&i.object.type&&i.object.type.libraryInfo.isThirdParty})})}c=t.extend({$scope:null,$element:null,api:null,view:null,_create:function t(n,i,o,r,a,l,c,u){r.navigation=false!==r.navigation;var d=this._createView(n,i,o,r,l,c,u);var p=new s;if(a.selections){var h=e.extend(true,{},a.selections,r.selections||{});false!==r.selections&&true!==r._disableSelections&&this._createSelections(d,n,i,h,p)}a.tooltips&&false!==r.tooltips&&this._createTooltip(d,n,i,e.extend(true,{},a.tooltips,r.tooltips||{}),p,r.cssTransform,u);return d},_createView:function t(e,n,i,s,o,r,a){return new i(e,n,s,o,r,a)},_createSelections:function t(e,n,i,s,o){var r=this.selectionService.createSelections(n,i,s,o);e.setSelections(r);return r},_createTooltip:function t(e,n,s,o,r,a,l){var c=new i(s,o,r);c.setCssTransform(a);l.cancel=function(){c.cancel()};e.setTooltips(c)},init:function t(e,n,i){this.$scope=e;this.$element=n;this.selectionService=i;var s=this;var o=this._create(e,n,e.ext.View,e.options,e.ext.options,e.backendApi,e.selectionsApi,e.tooltipApi);this.view=o;o.initialize();this._handleSpecialCaseForSyntaxSugarInExtension(o);o.mounted(n);e.$on("$destroy",function(){if(o){o.beforeDestroy();o.destroy(o);e.options=null;s.view=null;s.isDestroyed=true;o=null}})},_handleSpecialCaseForSyntaxSugarInExtension:function t(e){var n=this.$scope.object.ext,i=["View","constructor","options","init"],s;for(s in n){if(-1!==i.indexOf(s))continue;e[s]&&(e[s]=n[s])}},onPaint:function t(e,i){var s=this.view;var r=this.$scope;var a=this;var l=r.object&&r.object.model;if(!s||s.suppressOnPaint(r.layout)||!l)return n.resolve();o.isModalSelectionModel(l)&&s.selectionsApi&&s.selectionsApi.confirm();s.refreshSelections();s.prePaint(r.layout);return r.ext.options&&r.ext.options.usingDerivedProperties&&!r.backendApi.isSnapshot?l.getEffectiveProperties().then(function(t){return s.updateDerivedProperties(t,r.layout).then(function(t){return t?n.resolve(false):u.call(this,s,a,r,i)})}).catch(function(t){false}):u.call(this,s,a,r,i)},onResize:function t(e,i){var s=this.view;var o=this.$scope;s.refreshSelections();return n.resolve().then(function(){var t=s.$element;o.ext.hasDefaultTemplate()&&(t=t.children().first());return s.resize(t,e,i)}).catch(function(t){false})},setInteractionState:function t(e){this.view&&this.view.setInteractionState(e)},setFreeResize:function t(e){this.view&&this.view.setFreeResize(e)},setDirection:function t(e){this.view&&this.view.setDirection(e)},setBackendApi:function t(e){this.view.setBackendApi(e)},setSnapshotData:function t(e,n){return this.view.setSnapshotData(e,n)},getContextMenu:function t(e,n,i){return this.view.getContextMenu(e,n,i)},getSelectionToolbar:function t(){var e=this.view.getSelectionToolbar();if(Array.isArray(e))return new a(this.$scope.backendApi,this.$scope.selectionsApi,false,false,e,[]);return e},getViewState:function t(){return this.view.getViewState()},getPreferredSize:function t(){return this.view.getPreferredSize()}});c.$inject=["$scope","$element","qvDefaultViewSelectionService"];return c}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(48),n(91),n(89),n(314),n(217),n(751),n(388),n(126),n(262),n(90)],s=function(t,e,n,i,s,r,a,l,c,u){function d(t,e){return t.getProperties().then(function(n){return t.destroyAllChildren({qInfo:n.qInfo,qExtendsId:e})})}function p(){a.load().then(function(t){t.openSection(l.sectionIDs.visualization)})}function h(t,e){return t.getProperties().then(function(n){n.qMetaDef={title:e.name,description:e.description,tags:e.tags};"object"===o(e.descriptionExpression)&&(n.descriptionExpression=e.descriptionExpression);e.labelExpression&&(n.labelExpression=e.labelExpression);n.masterVersion=.96;return t.setProperties(n)})}function f(t,e){var n={qInfo:{qType:"masterobject"}};return i.create(n).then(function(n){return n.copyFrom(t.qInfo.qId).then(function(){return h(n,e)}).then(function(){return n})})}function g(e){e.getVisualization().then(function(e){var i=e.model;return n.all({props:i.getProperties(),layout:i.getLayout()}).then(function(e){var n=e.props;var o=e.layout;s.addMetadata({qMetaDef:{title:o.title,description:"",tags:[]},onSave:function e(s){f(n,s).then(function(e){d(i,e.id).then(function(){t.$rootScope.$emit("clearUndo")})});p()}})})})}function v(){c.show({title:e.get("Object.Linked.NoEditDialog.Title"),message:e.get("Object.Linked.NoEditDialog.Message")})}function m(n){var i=e.get("Object.Linked.BreakLinkDialog.Text");var s="<div class='link-object-dialog-content'><div class='link'><span class='link-icon  lui-icon  lui-icon--link'></span></div><div class='text'>"+i+"</div></div>";var o=t.getService("qvConfirmDialog").show({message:s});o.closed.then(function(t){t&&r.breakLink(n)})}function b(t){return"auto-chart"!==t}function y(t){var e=u.getValue(t,"model.properties.qStateName");return null===e||void 0===e||""===e}function x(t,e){var i=!t.object.isInvalid&&"auto-chart"!==t.object.ext.type&&e.permissionToCreate("visualization")&&!t.object.isLink&&b(t.object.type.type);if(!i)return n.resolve(i);if(Object.keys(t.model.properties).length)return n.resolve(y(t));return t.model.getProperties().then(function(){return y(t)})}return{typeSupportsMasterVisualizations:b,canAddToMasterItems:x,addObjectInCellToLibrary:g,showNotEditableDialog:v,showBreakLinkDialog:m}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(108),n(89),n(752),n(753),n(133),n(192),n(93),n(112),n(157),n(124),n(824),n(318),n(826)],s=function(t,e,n,i,s,o,r,a,l,c,u,d){var p=false;function h(t,e,n){var s=i.createTemplateTab(t);var o=i.createFieldTab(t);var r=i.createMasterItemsTab(t);var a=i.createWidgetTab(t,e,c.load());var l=[o,r,s,a];if(p){var u=i.createODAGTab(t,n);l.push(u)}return l}function f(t,e,n){var s=i.createTemplateTab(t);var o=i.createMasterItemsTab(t);var r=i.createWidgetTab(t,e,c.load());if(p){var a=i.createODAGTab(t,n);return[o,s,r,a]}return[o,s,r]}function g(){var t=[];var n=new e;u.getList().then(function(i){i.forEach(function(e){e.widgetPromises=[];e.data.widgets&&(e.widgetPromises=e.data.widgets.map(function(t){return d.get(t,false,e.id)}));t.push(e)});e.all(i.map(function(t){return b(t,t.widgetPromises)})).then(function(){n.resolve(t)})});return n.promise}function v(t){return s.isODAGAvailable().then(function(e){return e?s.canCreateLink(t):{canCreateLinks:false}})}function m(t){return s.isODAGAvailable().then(function(e){return!!e&&s.canCreateLink(t).then(function(t){return!!t.canCreateLinks||o.getList().then(function(t){return t.getLayout().then(function(t){return t.length>0})})})})}function b(t,n){return e.all(n).then(function(e){t.resolvedWidgets=e})}function y(t){return l.load(t).then(function(){l.isVariableDefined("DISABLE_AUTO_CHART")&&c.removeExtension("auto-chart")})}var x;function q(){return r.getApp().then(function(i){return e.all({loadAppVariables:y(i),appLayout:i.getLayout(),odagLinkPermissions:v(i),canShowODAGAssetsTab:m(i),types:c.load(true)}).then(function(e){var s=e.appLayout;var o=(t.isPersonalModeSync()||!s.published)&&s.permissions.update;p=e.canShowODAGAssetsTab;var r={createOdagLink:e.odagLinkPermissions.canCreateLinks&&s.permissions.update};a.init(s.permissions,r);var l=new n;l.fullMode=o;l.permissionToCreate=a.permissionToCreate;l.widgetLibraries=e.widgetLibraries;var c;c=o?h(l,g(),i):f(l,g(),i);l.setTabs(c);return l})})}function S(){x||(x=q());return x}return{load:S,loadAppVariables:y}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(285)],s=function(t){var e="dmv-zoom-level";var n=.1;var i=2;var s=.2;var o=1;var r=o;function a(t){if("number"!==typeof t)throw new Error('"'+t+'" is not a number.');return Math.floor(10*t)/10}function l(){return a(r)}function c(){r+=n;r>i&&(r=i);g()}function u(){r-=n;r<s&&(r=s);g()}function d(){return r<i}function p(){return r>s}function h(t){r=t;r<s&&(r=s);r>i&&(r=i);g()}function f(n){t.addObserver(e,n)}function g(){t.notifyAll(e,l())}function v(){return l()!==o}return{getCurrentZoomLevel:l,zoomIn:c,zoomOut:u,canZoomOutMore:p,canZoomInMore:d,onZoomLevelChanged:f,setZoomLevel:h,roundToOneDecimal:a,canBeRestored:v,MAX_ZOOM_LEVEL:i,MIN_ZOOM_LEVEL:s,RESTORED_ZOOM_LEVEL:o,INCREMENTAL_STEP:n}}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(409)],s=function(t,e){t.directive("qvStateCountBar",function(){return{restrict:"E",template:e,replace:true,scope:{stateCounts:"=",options:"="},link:function t(e){e.percents=[];e.$watchCollection("stateCounts",function(){n()});function n(){var t=e.stateCounts,n;if(!t)return;n=s(t);e.percents=o(n)}function i(t){return Object.keys(t).reduce(function(e,n){return e+t[n]},0)}function s(t){var e=i(t),n={};["qSelected","qLocked","qOption","qAlternative"].forEach(function(i){var s=t[i]||0,o=Math.round(s/e*100);s>0&&0===o&&(o=1);n[i]=o});return n}function o(t){var e={},n,i,s=0;for(n in t){e[n]=t[n];(!i||t[n]>t[i])&&(i=n);s+=t[n]}s>100&&(e[i]=t[i]-(s-100));return e}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(92),n(252)],s=function(t,e){var n,i=Math.max,s=Math.min,o=e.retriveColor(13816530);function r(t,e,n){var o;t=s(i(t,1e-12),.999999999999);if(n){var r=0;while(r<n.length&&n[r]<=t)r++;o=n.length-(r+(t-n[r-1])/(n[r]-n[r-1]))}else o=e-t*e;return o}function a(t){t=t||this._startLevel;return s(t,this._colorParts.length-1)}function l(t){t.forEach(function(t){t.forEach(function(t){t.reverse()});t.reverse()})}n=t.extend({init:function t(){this._colorParts=[];this._startLevel=0;this._reverse=false;this._max=1;this._min=0;this._span=1;this._invalidSpan=false},addColorPart:function t(n,s,o){o=o||0;this._startLevel=i(o,this._startLevel);this._colorParts[o]||(this._colorParts[o]=[]);this._colorParts[o].push([e.retriveColor(n),e.retriveColor(s)])},setLimits:function t(e){if(!e){this._limits=null;this._expandedLimits=null;return}this._limits=e;this._expandedLimits=[0].concat(e,[1])},setMaxMinValues:function t(e,n){if(!(e>=n)||Number.isNaN(+e)||Number.isNaN(+n))throw new Error("Incorrect arguments to color-scale->setMaxMinValues");this._max=e;this._min=n;this._span=e-n},setReverse:function t(e){if(this._reverse!==e){this._reverse=e;l(this._colorParts)}},getColor:function t(n,i){var s,l,c,u,d,p,h;var f=0===this._span?.5:(n-this._min)/this._span;if(Number.isNaN(+n)||Number.isNaN(+f))return o;i=a.apply(this,[i]);s=r(f,this._colorParts[i].length,this._expandedLimits);l=Math.floor(s);l=l===s?l-1:l;u=this._colorParts[i][l];d=u[0];p=u[1];if(n===this._min)return p;if(n===this._max)return d;c=s-l;h=e.retriveBlend(d,p,c);return h},getColors:function t(e){var n=[],i;for(i=0;i<e.length;i++)n.push(this.getColor(e[i]));return n},getSegmentIndex:function t(e){var n=a.call(this);var i=r(e,this._colorParts[n].length,this._expandedLimits);var s=Math.floor(i);s=s===i?s-1:s;return s},getLegendParts:function t(e){var n=[],i,s,o;e=a.apply(this,[e]);s=this._colorParts[e].length;for(i=0;i<s;++i){o=this._colorParts[e][i];var r={grad:o,color:o[0],solid:o[0]===o[1],index:i};this._expandedLimits&&(r.limits=[this._expandedLimits[s-i-1],this._expandedLimits[s-i]]);n.push(r)}return n}});n._limitFunction=r;return n}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e){t.exports='<div class="lui-dialog error-dialog" on-close-view="closeView( $event )" qv-escape="handleEscButton( $event )" ng-style="modalStyle" tid="errorDialog">\n\t<div class="lui-dialog__header">\n\t\t<div class="lui-dialog__title" ng-if="title" q-translation="{{title}}"></div>\n\t</div>\n\t<div class="lui-dialog__body dm-main">\n\n\t\t<main ng-if="!html">{{content | translate}}</main>\n\t\t<main ng-if="html" class="qv-appname"></main>\n\n\t</div>\n\n\t<div class="lui-dialog__footer">\n\t\t<lui-button qv-delayed-dialog-button ng-if="!buttons.length && showDefaultButton" ng-click="closeModal( $event, true );" qva-focus="true"\n\t\t\t\t\tq-translation="Common.OK" tid="confirm"></lui-button>\n\t\t<lui-button qv-delayed-dialog-button ng-repeat="button in buttons" qva-focus="button.defaultButton" ng-click="closeModal( $event );" ng-disabled="button.expression === false"\n\t\t\t\t\tq-translation="{{button.name}}" tid="{{button.tid}}"></lui-button>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t=function t(e){return window.setTimeout(e,1e3/60)},e=function t(e){return window.clearTimeout(e)},n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||t,i=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.msCancelAnimationFrame||e;return{request:n===t?t:n.bind(window),cancel:i===e?e:i.bind(window)}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(89),n(446),n(178),n(187)],s=function(t,e,n,i,s){var o={getAggregationForExpression:r,getAggregationForFieldItem:a};return o;function r(e,s,o){if(!e||!t.isString(e))throw new Error("Aggregation-retriever: Expression must be a string");if(!s)throw new Error("Aggregation-retriever: App is required");if(!o||!t.isFunction(o))throw new Error("Aggregation-retriever: FindFieldFn is required");var r=i.getNormalizedExpression(e);if(n.has(r))return l(r);var a=s.getFieldList().then(function(t){var e=o(r,t),n=e?c(e):u();return d(n)});return a}function a(t){if(!t)throw new Error("Aggregation-retriever: FieldItem is required");if(!t.value&&!t.name&&!t.qName)throw new Error("Aggregation-retriever: Either FieldItem.value, FieldItem.name or FieldItem.qName is required");var s=t.value||t.name||t.qName,o=i.getNormalizedExpression(s);if(n.has(o))return l(o);var r=c(t);return e.when(d(r))}function l(t){var i=n.get(t);return e.when(d(i))}function c(t){if(t.defaultAggregation)return t.defaultAggregation;var e=t.qTags||[];return e.indexOf("$numeric")>-1?"Sum":"Count"}function u(){return s.FALLBACK_FUNCTION}function d(t){return i.getFormattedAggregation(t)}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(101),n(185),n(216)],s=function(t,e,n){var i=e.getLogicFor("explore","default");var s,o,r,a,l;l={translation:"properties.data",type:"items",component:"hypercube-data",icon:"database",items:{dimensions:{ref:"qHyperCubeDef.qDimensions",alternativeRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions",translation:"Common.Dimensions",type:"items"},measures:{ref:"qHyperCubeDef.qMeasures",alternativeRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",translation:"Common.Measures",type:"items"}}};s={translation:"properties.sorting",type:"items",component:"sort",sortIndexRef:"qHyperCubeDef.qInterColumnSortOrder",icon:"ascending",items:{dimensions:{ref:"qHyperCubeDef.qDimensions",type:"items",items:{sortOptions:{component:"radio-list",type:"number",diffs:["qDef.qSortCriterias.0.qSortByExpression","qDef.qSortCriterias.0.qSortByNumeric","qDef.qSortCriterias.0.qSortByAscii"],options:function t(){return[{value:1,translation:"properties.sorting.ascending"},{value:-1,translation:"properties.sorting.descending"}]},setPropertyValue:function e(n,i){t.setValue(n,"qDef.autoSort",false);t.setValue(n,"qDef.qSortCriterias.0.qSortByExpression",0);t.setValue(n,"qDef.qSortCriterias.0.qSortByNumeric",0);t.setValue(n,"qDef.qSortCriterias.0.qSortByAscii",i)},getValue:function e(n){return 0===t.getValue(n,"qDef.qSortCriterias.0.qSortByExpression",0)&&0===t.getValue(n,"qDef.qSortCriterias.0.qSortByNumeric",0)?t.getValue(n,"qDef.qSortCriterias.0.qSortByAscii",0):0}}}},measures:{ref:"qHyperCubeDef.qMeasures",type:"items",items:{sortOptions:{component:"radio-list",type:"number",ref:"qSortBy.qSortByNumeric",options:function t(){return[{value:1,translation:"properties.sorting.ascending"},{value:-1,translation:"properties.sorting.descending"}]}}}}}};o={component:"items",translation:"properties.colorsAndLegend",icon:"palette",grouped:true,items:{mode:{component:"radio-list",type:"string",options:i.color.colorMode.options,diffs:["color.mode","color.auto"],setPropertyValue:function t(e,n){if("auto"===n)e.color.auto=true;else{e.color.auto=false;e.color.mode=n}i.color.colorBy.globalChange(e,null,"qHyperCubeDef.")},getValue:function t(e){return e.color.auto?"auto":e.color.mode}},dimension:{type:"items",show:function t(e){return!e.color.auto&&"byDimension"===e.color.mode},items:{colorScheme:{translation:"properties.colorScheme",type:"string",component:"item-selection-list",horizontal:true,showLabels:false,ref:"color.dimensionScheme",items:i.helpers.getDimensionSchemeOptions,show:function t(e,s){if(e.color&&"byDimension"===e.color.mode&&e.color.useDimColVal&&i.color.useDimColVal.show(e))return false;if(1===n.getNumDimensions(e)&&n.getNumMeasures(e)<=1){var o=n.getDimensionLayouts(s)[0];return!(o&&o.qCardinal<=12)}return n.getNumMeasures(e)<=1||n.getNumMeasures(e)>12}},persistentColors:{ref:"color.persistent",translation:"properties.colorPersistence",type:"boolean",show:function t(e){return n.getNumMeasures(e)<=1&&n.getNumDimensions(e)<=1&&!(e.color&&"byDimension"===e.color.mode&&e.color.useDimColVal&&i.color.useDimColVal.show(e))},readOnly:i.color.persistentColors.readOnly}}},measure:{type:"items",show:function t(e){return!e.color.auto&&"byMeasure"===e.color.mode},items:{sequential:{component:"item-selection-list",translation:"properties.colorScheme",horizontal:true,showLabels:false,show:function t(e){return true!==e.color.useMeasureGradient},type:"string",ref:"color.measureScheme",items:i.helpers.getMeasureSchemeOptions}}},legend:{ref:"legend.show",type:"boolean",translation:"properties.legend.show",component:"switch",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(e,n){return!e.color.auto&&i.legend.show(e,n)}}}};a={translation:"properties.presentation",type:"items",icon:"view",grouped:true,items:{}};return{data:l,sort:s,color:o,colorsAndLegend:r,presentation:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(104),n(226)],s=function(t,e){function n(e){var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,s=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=e?e.length:0,a,l;if(!r)return null;for(l=0;l<r;l++){a=e[l];i=a.x>i?a.x:i;n=a.x<n?a.x:n;o=a.y>o?a.y:o;s=a.y<s?a.y:s}return new t(n,s,i-n,o-s)}function i(){this._numPoints=this.points?this.points.length:0;this._closedPolygon=this._numPoints>1&&this.points[0].x===this.points[this._numPoints-1].x&&this.points[0].y===this.points[this._numPoints-1].y;this._closedPolygon?this._numLines=this._numPoints-1:this._numLines=this._numPoints;this._pointsChanged=true}function s(t){0===arguments.length?this.set([]):this.set(t);this._pointsChanged=true}s.prototype={clone:function t(){var e=this.points.map(function(t){return t.clone()});return new s(e)},set:function t(e){this.points=e;i.call(this)},getPoints:function t(){return this.points},getNumPoints:function t(){return this.points?this.points.length:0},addPoint:function t(e){this.points.push(e);i.call(this)},pointInside:function t(e,n){this.calculateBounds();if(!this._bounds)return false;if(e<this._bounds.x||e>this._bounds.x+this._bounds.width||n<this._bounds.y||n>this._bounds.y+this._bounds.height)return false;var i,s,o,r,a;for(i=false,r=-1,s=this.points.length,o=s-1;++r<s;o=r){if(this.points[r].x===e&&this.points[r].y===n)return true;if(this.points[r].y===this.points[o].y&&this.points[r].y===n&&(e-this.points[r].x)*(e-this.points[o].x)<=0)return true;if(this.points[r].y<n&&n<=this.points[o].y||this.points[o].y<n&&n<=this.points[r].y){a=(this.points[o].x-this.points[r].x)*(n-this.points[r].y)/(this.points[o].y-this.points[r].y)+this.points[r].x;if(e===a)return true;e<a&&(i=!i)}}return i},intersectsLine:function t(n){if(!n)return false;if(this.pointInside(n.x1,n.y1)||this.pointInside(n.x2,n.y2))return true;var i,s;if(0===this._numPoints)return false;if(1===this._numPoints){if(n.intersectsLine(new e(this.points[0].x,this.points[0].y,this.points[0].x,this.points[0].y)))return true;return false}s=this._numPoints-1;for(i=0;i<s;i++)if(n.intersectsLine(new e(this.points[i].x,this.points[i].y,this.points[i+1].x,this.points[i+1].y)))return true;if(!this._closedPolygon&&n.intersectsLine(new e(this.points[s].x,this.points[s].y,this.points[0].x,this.points[0].y)))return true;return false},intersectsLines:function t(e){var n,i=e?e.length:0;for(n=0;n<i;n++)if(this.intersectsLine(e[n]))return true;return false},intersectsRect:function t(n){if(!n)return false;this.calculateBounds();if(!this._bounds)return false;if(n.rectInside(this._bounds))return true;if(!this._bounds.intersectsWith(n))return false;var i,s,o,r,a;i=n.x;s=n.getRight();o=n.y;r=n.getBottom();if(this.pointInside(i,o)||this.pointInside(s,o)||this.pointInside(s,r)||this.pointInside(i,r))return true;a=[new e(i,o,s,o),new e(i,r,s,r),new e(i,o,i,r),new e(s,o,s,r)];return this.intersectsLines(a)},calculateBounds:function t(){if(this._pointsChanged){this._bounds=n(this.points);this._pointsChanged=false}return this._bounds},getBoundingRect:function t(){return this.calculateBounds()},translate:function t(e,n){if(!e&&!n)return;for(var i=0;i<this._numPoints;i++){this.points[i].x+=e;this.points[i].y+=n}this._pointsChanged=true},toString:function t(){var e,n="",i=this._numPoints-1;for(e=0;e<i;e++)n+=this.points[e].toString()+",";n+=this.points[i].toString();return n}};return s}.apply(e,i),void 0!==s&&(t.exports=s))},,,,function(t,e,n){var i;!(i=function(){return function(t,e){if(!t||isNaN(+e))return e;var e="-"==t.charAt(0)?-e:+e;var n=e<0?e=-e:0;var i=t.match(/[^\d\-\+#]/g);var s=i&&i[i.length-1]||".";var o=i&&i[1]&&i[0]||",";var t=t.split(s);e=e.toFixed(t[1]&&t[1].length);e=+e+"";var r=t[1]&&t[1].lastIndexOf("0");var a=e.split(".");(!a[1]||a[1]&&a[1].length<=r)&&(e=(+e).toFixed(r+1));var l=t[0].split(o);t[0]=l.join("");var c=t[0]&&t[0].indexOf("0");if(c>-1)while(a[0].length<t[0].length-c)a[0]="0"+a[0];else 0==+a[0]&&(a[0]="");e=e.split(".");e[0]=a[0];var u=l[1]&&l[l.length-1].length;if(u){var d=e[0];var p="";var h=d.length%u;for(var f=0,g=d.length;f<g;f++){p+=d.charAt(f);!((f-h+1)%u)&&f<g-u&&(p+=o)}e[0]=p}e[1]=t[1]&&e[1]?s+e[1]:"";return(n?"-":"")+e[0]+e[1]}}.call(e,n,e,t),void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i,s;!(i=[n(282),n(89)],s=function(t,e){return{createInitialChart:s,createChart:i,convertChart:o,getPropertyTreeForConvertedChart:r,createConvertedChart:a};function n(t){var e=t.qHyperCubeDef;if(e&&e.qMeasures&&e.qDimensions){var n=e.qDimensions.concat(e.qMeasures);n.forEach(function(t){t.qAttributeExpressions&&t.qAttributeExpressions.forEach(function(t){t.qAttribute=true})})}}function i(t,e,i){var s=l(e,i).bind(e);n(t);return s(t)}function s(e,n,s){c(e,n,s);return t.getInitialProperties(e).then(function(t){return i(t,n,s)})}function o(t,e,n){if(!t)throw new Error("No extension provided");var i=n||t.model;return r(t,e,n).then(function(t){return n.setFullPropertyTree(t).then(function(){return i})})}function r(n,i,s){if(!n)throw new Error("No extension provided");var o=s||n.model;return e.all([t.getExtensionType(i),t.getInitialProperties(i),o.getFullPropertyTree()]).then(function(t){var e=t[0];var i=t[1];var s=t[2];var o;delete s.qProperty.qInfo.qId;if(n.exportProperties&&e.importProperties){var r;"boxplot"===n.type&&(r="boxplotDef");o=e.importProperties(n.exportProperties(s,r),i,e)}else o={qProperty:i,qChildren:[]};return o})}function a(t,e,n,i){c(e,n,i);return(t.model.properties,n,i).then(function(n){return o(t,e,n)})}function l(t,e){return e?t.createObject:t.createSessionObject}function c(t,e,n){if(!e||!t)throw new Error("Invalid inparameters: type or app missing");if(n)throw new Error("Persisted objects not implemented yet")}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(187)],s=function(t,e){var n=o();var i={tokenize:s};return i;function s(e){if(!t.isString(e))throw new Error("Expression-tokenizer: Expression must be a string");e=e.trim();"="===e.charAt(0)&&(e=e.substr(1));var n=[],i=0,s=r(e);s.forEach(function(t){var s=e.substr(i,t.start-i).trim();s&&n.push({content:s,isOperator:false});n.push({content:t.content,isOperator:true});i=t.end});var o=e.substr(i,e.length);n.push({content:o.trim(),isOperator:false});return n}function o(){var t={};for(var n in e.SYMBOLS)if(e.SYMBOLS.hasOwnProperty(n)){var i=e.SYMBOLS[n];t[i.LEFT]=i.RIGHT}return t}function r(t){var e=[];for(var n=0;n<t.length;n++){var i=t.charAt(n);if(a(i)){n=l(t,i,n);continue}var s=[],o=false,r=c(i);s=u(i);if(s.length){var p=t.substr(n).toLowerCase();for(var h=0;h<s.length;h++){var f=s[h],g=d(p,f);if(g){e.push({content:f,start:n,end:n+f.length});o=true;n+=f.length-1;break}}}!o&&r&&e.push({content:i,start:n,end:n+1})}return e}function a(t){return n.hasOwnProperty(t)}function l(t,i,s){var o=i,r=n[o],a=t.substring(s).split(""),l=0,c=false;for(var u=0;u<a.length;u++){var d=a[u];d===e.SYMBOLS.STRING.LEFT&&(c=!c);if(c)continue;d===o&&l++;d===r&&l--;if(!l)return u+s}return s}function c(t){return e.OPERATORS.SINGLES.indexOf(t.toLowerCase())>-1}function u(t){var n=[];var i=e.OPERATORS.MULTIPLES.concat(e.OPERATORS.WORDS).filter(function(t){return t.length>1}).map(function(t){return t.toLowerCase()});i.forEach(function(e){0===e.indexOf(t.toLowerCase())&&n.push(e)});return n}function d(t,n){var i=0===t.indexOf(n+" "),s=e.OPERATORS.SINGLES.some(function(e){return 0===t.indexOf(n+e)});return i||s}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={stripComments:e};return t;function e(t){if(!t)return"";t=n(t);t=i(t);return t.trim()}function n(t){return t.replace(/\/\/(.*)$/gm,"")}function i(t){return t.replace(/\/\*[^]*?\*\//g,"")}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-state-count-bar" tid="stateCount" qva-direction x-dir-setting="{{options.direction}}">\n\t<div class="state selected" ng-style="{\'width\': percents.qSelected + \'%\'}"></div>\n\t<div class="state locked" ng-style="{\'width\': percents.qLocked + \'%\'}"></div>\n\t<div class="state optional" ng-style="{\'width\':  percents.qOption + \'%\'}"></div>\n\t<div class="state alternative" ng-style="{\'width\':  percents.qAlternative + \'%\'}"></div>\n</div>'},,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(93),n(89),n(108),n(50)],s=function(t,e,n,i,s){t.service("qvAppDetailsService",["$q",function(t){var s;return{get:function r(){if(!s){s=t.defer();e.getApp().then(function(t){t.global.allowCreateApp().then(function(e){var r;t.getScriptEx().then(function(t){r=t.qMeta.privileges}).catch(function(t){r=false;t.isHandled=true}).then(function(){n.all([t.getLayout()]).then(function(n){var a=n[0];var l={app:{id:t.id,appTitle:a.qTitle,readOnly:a.qReadOnly,hasData:!!a.qHasData,hasScript:!!a.qHasScript,published:a.published},permissions:{createSheet:!a.qReadOnly&&a.permissions.createSheet,createApp:e,update:a.permissions.update,createBookmark:a.permissions.createBookmark,updateScript:i.isPersonalModeSync()&&!r||r&&-1!==r.indexOf("update")}};s.resolve(new o(l))})})})})}return s.promise}}}]);function o(t){this.model=t;this.events={onModelChanged:[]};var n=this;e.getApp().then(function(t){t.Invalidated.bind(function(){t.getLayout().then(function(t){n.model.app.appTitle=t.qTitle;n.model.app.readOnly=t.qReadOnly;n.model.app.hasData=t.qHasData;n.model.app.published=t.published;n.model.permissions.createSheet=!t.qReadOnly&&t.permissions.createSheet;n.model.permissions.update=t.permissions.update;n.events.onModelChanged.forEach(function(e){e&&e(n.model,t)})}).catch(function(t){var e=11e3;t.code===e&&(t.isHandled=true)})})})}o.prototype.appHasData=function(){return this.model.app.hasData};o.prototype.isDataManagerHidden=function(){return s.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update||!this.model.permissions.createApp||!this.model.permissions.updateScript};o.prototype.isScriptEditorHidden=function(){return s.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update||!this.model.permissions.updateScript};o.prototype.isDataModelViewerHidden=function(){return s.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update};o.prototype.isQDLEnabled=function(){return this.model.permissions.update&&this.model.permissions.updateScript&&!s.isSmallDevice&&this.model.permissions.createApp};o.prototype.bindOnModelChanged=function(t){this.events.onModelChanged.push(t)};o.prototype.unbindOnModelChanged=function(t){var e=this.events.onModelChanged.indexOf(t);e>=0&&this.events.onModelChanged.splice(e,1)}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(91),n(237),n(101)],s=function(t,e,n){var i="qHyperCubeDef";function s(t){if(!t||!t.orientation||e.isContinuousChart(t))return true;return"vertical"===t.orientation}function o(t,e){return e?e.getDimensionLayouts():t&&t.qHyperCubeDef?t.qHyperCubeDef.qDimensions.map(function(t){return t.qDef}):[]}function r(t,e){return e?e.getMeasureLayouts():t.qHyperCubeDef.qMeasures.map(function(t){return t.qDef})}function a(e,n){var i,r="y",a=o(e,n).map(function(t){return t&&t.qFallbackTitle?t.qFallbackTitle:""}).join(", ");s(n&&n.layout)&&(r="x");i=a?t.get("properties."+r+"AxisWithInfo",[a]):t.get("properties."+r+"Axis");return i}var l={left:"properties.dock.left",right:"properties.dock.right",bottom:"Common.Bottom",top:"Common.Top"};function c(t,e){return{ref:t+".dock",translation:"Common.Position",type:"string",component:"dropdown",defaultValue:"near",options:function t(n,i,o){var r,a;var c;if(e&&e.direction)c=e.direction;else{var u=s(o.layout);c=u&&e&&!e.major||!u&&e&&e.major?"y":"x"}if("x"===c){r=l.bottom;a=l.top}else{r=o.yMirrorMode?l.right:l.left;a=o.yMirrorMode?l.left:l.right}return[{value:"near",translation:r},{value:"far",translation:a}]},show:function e(n){return n[t]&&"none"!==n[t].show}}}function u(t,e,s){s=s||i;return n.getValue(e.properties,s+".qDimensions",[])[0]===t}return{isVertical:s,getDimensions:o,getMeasures:r,dimensionAxisLabelFn:a,getAxisDockProperties:c,dockStringMap:l,isFirstDimension:u}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(104)],s=function(t,e){var n,i=new e(0,0,0,0),s=new e(0,0,0,0);n=t.extend("StackedCubeSlicer",{init:function t(){this.pages=[]},get:function t(e){return e.map(function(t){return this.getPage(t)}.bind(this))},getPage:function t(n){var o,r,a=[],l;for(r=0;r<this.pages.length;r++){o=this.pages[r].qArea;i.set(n.qLeft,n.qTop,n.qWidth,n.qHeight);s.set(o.qLeft,o.qTop,o.qWidth,o.qHeight);l=s.intersection(i,true);a.push({coverage:l?l.clone():new e(0,0,0,0),idx:r});if(o.qLeft<=n.qLeft&&o.qLeft+o.qWidth>=n.qLeft+n.qWidth&&o.qTop<=n.qTop&&o.qTop+o.qHeight>=n.qTop+n.qHeight)return this._extract(n,this.pages[r])}a.sort(function(t,e){return e.coverage.width*e.coverage.height-t.coverage.width*t.coverage.height});if(a[0].coverage.height>0&&a[0].coverage.width>0)return this._extract(n,this.pages[a[0].idx]);return{qArea:{qTop:n.qTop,qLeft:n.qLeft,qWidth:0,qHeight:0},qData:[]}},destroy:function t(){this.clear()},isEmpty:function t(){return!this.pages||!this.pages[0]||!this.pages[0].qArea.qHeight||!this.pages[0].qArea.qWidth},clear:function t(){this.pages=[]},store:function t(e){this.pages=e},containsArea:function t(e){var n;for(var i=0;i<this.pages.length;i++){n=this.pages[i].qArea;if(n.qLeft<=e.qLeft&&n.qLeft+n.qWidth>=e.qLeft+e.qWidth&&n.qTop<=e.qTop&&n.qTop+n.qHeight>=e.qTop+e.qHeight)return true}return false},contains:function t(e){if(!this.pages||!this.pages.length)return false;return 0===e.filter(function(t){return!this.containsArea(t)}.bind(this)).length},_extract:function t(e,n){i.set(e.qLeft,e.qTop,e.qWidth,e.qHeight);s.set(n.qArea.qLeft,n.qArea.qTop,n.qArea.qWidth,n.qArea.qHeight);var o=i.intersection(s,true),r,a;if(!o)return{qArea:{qTop:e.qTop,qLeft:e.qLeft,qWidth:0,qHeight:0},qData:[]};a=Math.max(0,e.qTop-n.qArea.qTop);var l=n.qData[0];var c=l.qSubNodes;r={};for(var u in l)l.hasOwnProperty(u)&&(r[u]="qSubNodes"===u?c.slice(a,a+o.height):l[u]);r.qUp+=a;r.qDown+=n.qArea.qHeight-o.height-a;return{qArea:{qTop:o.y,qLeft:o.x,qWidth:o.width,qHeight:o.height},qData:[r]}}});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(238),n(153),n(130),n(90)],s=function(t,e,n,i,s){var o=e.extend({init:function t(e){this._super(e)},minDimensions:function t(){return 1},maxDimensions:function t(){return 1},minMeasures:function t(){return 0},maxMeasures:function t(){return 0},autoSortDimension:function t(e){return n.autoSortDimension(e)},getDimensions:function t(){var e=this.properties.qListObjectDef.qDef;if((!e||!e.qFieldDefs||!e.qFieldDefs.length)&&!this.properties.qListObjectDef.qLibraryId)return[];return[this.properties.qListObjectDef]},addDimension:function t(e){var o=this;function r(){o.properties.qListObjectDef=s.extend(true,o.properties.qListObjectDef,e);"function"===typeof o.dimensionDefinition.add&&o.dimensionDefinition.add.call(null,e,o.properties,o)}return e.qLibraryId?this.app.getDimensionList().then(function(t){var s=i.findLibraryDimension(e.qLibraryId,t);s&&n.autoSortDimension(e,s.qData.info);r();return e}):this.app.getFieldList().then(function(t){var s=i.findField(e.qDef.qFieldDefs[0],t);s&&n.autoSortDimension(e,[s]);r();return e})},replaceDimension:function e(i,o){var r=this,a=s.extend(true,this.properties.qListObjectDef,o);n.autoSortDimension(o);if(o.qLibraryId){delete a.qDef.qFieldDefs;delete a.qDef.qFieldLabels}else delete a.qLibraryId;r.properties.qListObjectDef=a;return t.resolve(o)},removeDimension:void 0,getDimensionLayouts:function t(){return[this.getDimensionLayout()]},getDimensionLayout:function t(){return this.layout&&this.layout.qListObject&&this.layout.qListObject.qDimensionInfo?this.layout.qListObject.qDimensionInfo:""},getMeasures:function t(){return this.properties.qListObjectDef.qExpressions},getMeasureLayout:function t(){return this.layout&&this.layout.qListObject&&this.layout.qListObject.qExpressions&&this.layout.qListObject.qExpressions[0]?this.layout.qListObject.qExpressions[0].qExpr:""}});return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(421),n(89),n(48),n(104),n(342),n(225),n(123),n(101)],s=function(t,e,n,i,s,o,r,a){var l;function c(t){var e=a.getValue(t,"layout.qHyperCube.qDimensionInfo",[]);var n=e.length-1;var i=e[n]||{};var s=i.qIsOneAndOnlyOne||false;n>0&&s&&a.getValue(i,"qCardinalities.qHypercubeCardinal")>1&&(s=false);return s}l=t.extend("DefaultView",{$scope:null,$element:null,containerRect:null,options:null,selections:null,backendApi:null,activeDimensions:[0],selectedShapes:[],init:function t(e,n,i,s){this._super(e,n,i,s);e.selectValues=this.selectValues.bind(this)},on:function t(){this.selections&&this.selections.on();this.tooltips&&this.tooltips.on();this.options&&false===this.options.selections?this.selectionsEnabled=false:this.selectionsEnabled=true;this._on=true},off:function t(){this.selections&&this.selections.off();this.tooltips&&this.tooltips.off();this.selectionsEnabled=false;this._on=false},isOn:function t(){return this._on},suppressOnPaint:function t(e){if(this.$scope.object._forcePaint){this.$scope.object._forcePaint=false;return false}return e.qSelectionInfo&&e.qSelectionInfo.qInSelections},paint:function t(){return e.resolve()},destroy:function t(){this.$scope.selectValues=null;this._super()},initialize:function t(){this.selections&&this.initSelections();if(this.options){Number.isNaN(+this.options.interactionState)||null===this.options.interactionState||this.setInteractionState(this.options.interactionState);this.options.direction&&this.setDirection(this.options.direction)}this.tooltips&&this.initTooltips()},setSelections:function t(e){this.selections=e},initSelections:function t(){if(this.selections){this.selections._disableSelections=this.options._disableSelections;this.selections.types.dataArea.setComponent("dataArea",{rect:new i(0,0,this.$element.width(),this.$element.height())});if(!this.options._disableSelections){this.selections.Select.bind(function(t,e){this.onSelect(t,e)}.bind(this));this.selections.ToggleShape.bind(function(t){var e=this.selectedShapes.indexOf(t);-1!==e?this.selectedShapes.splice(e,1):this.selectedShapes.push(t);this.onToggleShape(t)}.bind(this));this.selections.Deactivated.bind(function(){this.selectedShapes=[]}.bind(this));this.selections.Clear.bind(function(){this.selectedShapes=[]}.bind(this))}}},setTooltips:function t(e){this.tooltips=e},initTooltips:function t(){},refreshSelections:function t(){if(!this.selections)return;this.containerRect=this.$element[0].getBoundingClientRect();this.selections.cache.clear()},onToggleShape:function t(e){e.$element[this.isSelected(e.value)?"addClass":"removeClass"]("selected")},onSelect:function t(e,n){if(!e.length)return;var i=this.selectedShapes.map(function(t){return t.value});i.length>0&&this.activeDimensions.length>0?this.backendApi.select(i,this.activeDimensions,n):1!==e.length||e[0].selected||this.backendApi.clearSelections()},onRangeSelect:function t(){},addToSelectionCache:function t(e,n){if(!this.selections)return;var o=this.containerRect,r=e[0].getBoundingClientRect(),a=new s(new i(r.left-o.left,r.top-o.top,r.right-r.left,r.bottom-r.top),false,n);a.$element=e;this.selections.cache.add(a)},isSelected:function t(e){return this.selectedShapes.filter(function(t){return t.value===e}).length},setSnapshotData:function t(){},getSelectionToolbar:function t(){var e=this;var n=[];if(!c(this.$scope)){n.push({name:"Tooltip.ToggleOnLassoSelection",tid:"selection-toolbar.toggleLasso",isIcon:true,buttonClass:"sel-toolbar-icon-toggle",iconClass:"lui-icon lui-icon--lasso",action:function t(){e.toggleLasso=!e.toggleLasso},isActive:function t(){this.name=e.toggleLasso?"Tooltip.ToggleOffLassoSelection":"Tooltip.ToggleOnLassoSelection";return e.toggleLasso},isDisabled:function t(){if(e.isLassoDisabled&&e.isLassoDisabled())return true;return false}});n.push({name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:true,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function t(){this.selectionsApi.clear()},isDisabled:function t(){return!this.selectionsApi.selectionsMade}})}return new o(this.$scope.backendApi,this.$scope.selectionsApi,false,false,n,[])},selectValues:function t(e,n,i){if(!this.selectionsEnabled)return;var s=this.$scope;if(!s.selectionsApi.active){var r=this;s.selectionsApi.confirm=function(){s.backendApi.endSelections(true);s.selectionsApi.deactivated()};s.selectionsApi.cancel=function(){s.backendApi.endSelections(false);s.selectionsApi.deactivated()};s.selectionsApi.deactivate=function(){this.deactivated()};s.selectionsApi.clear=function(){r.clearSelectedValues(r.$element);s.backendApi.clearSelections();s.selectionsApi.selectionsMade=false;r.selectedArrays={}};this.getSelectionToolbar=function(){var t=[];c(s)||t.push({name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:true,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function t(){this.selectionsApi.clear()},isDisabled:function t(){return!this.selectionsApi.selectionsMade}});return new o(this.$scope.backendApi,this.$scope.selectionsApi,false,false,t,[])};s.selectionsApi.activated();this.selectedArrays={}}this.$scope.selectionsApi.selectionsMade=true;this.selectedArrays[e]||(this.selectedArrays[e]=[]);if(i)for(var a=0;a<n.length;a++){var l=this.selectedArrays[e].indexOf(n[a]);-1===l?this.selectedArrays[e].push(n[a]):this.selectedArrays[e].splice(l,1)}else this.selectedArrays[e]=this.selectedArrays[e].concat(n);this.backendApi.selectValues(e,this.selectedArrays[e],false)},clearSelectedValues:function t(e){e.find(".selected").removeClass("selected")},setInteractionState:function t(e){this._interactionState=e;this._inEditState=e===r.EDIT;this._inAnalysisState=e===r.ANALYSIS;this._inAnalysisState&&!this._on?this.on():!this._inAnalysisState&&this._on&&this.off()},setDirection:function t(e){this.$scope.options.direction=e;this.options.direction=e;if(this.selections&&this.selections.options&&this.selections.options.range){this.selections.options.range.rtl="rtl"===e;this.selections.types.range.setDirection(e)}},inAnalysisState:function t(){return this._inAnalysisState},inEditState:function t(){return this._inEditState},getPreferredSize:function t(){}});Object.defineProperties(l.prototype,{toggleLasso:{set:function t(e){if(this.selections){this.selections.lassoEnabled=e;n.$apply(n.$rootScope,function(){this.options.lassoEnabled=e}.bind(this))}},get:function t(){return this.selections&&this.selections.lassoEnabled}}});return l}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(627),n(313),n(89)],s=function(t,e,n){var i=t.extend({init:function t(e,n,i,s){this.$scope=e;this.$element=n;this.options=i;this.backendApi=s},prePaint:function t(){},setFreeResize:function t(e){this.options.freeResize=e},setBackendApi:function t(e){this._dataView=void 0;this.backendApi=e},updateDerivedProperties:function t(){return n.resolve(false)},setInteractionState:function t(e){this.options.interactionState=e},setDirection:function t(e){this.options.direction=e},getContextMenu:function t(e,n,i){if(this._dataView&&this._dataView.toggled){var s=this._dataView.getObject();if(s)return s.getContextMenu(n,i)}},getViewState:function t(){return{}},getPreferredSize:function t(){},getDataViewObject:function t(){if(this._dataView)return this._dataView.getObject()},initDataView:function t(n){var i=this.backendApi.model;this._dataView||(this._dataView=new e(i.app,i,n))},toggleDataView:function t(){return this._dataView.toggle()},destroy:function t(){this._destroyed=true},cancel:function t(){},retry:function t(){}});return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(198),n(89),n(265),n(331),n(101)],s=function(t,e,n,i,s){var o;function r(t,e,n,i){if(!t)return;e.snapshotData.object.origDataPages||(e.snapshotData.object.origDataPages=e.qHyperCube[i]);for(var s=0;s<n.length;s++){n[s].qHeight=Math.min(e.qHyperCube.qSize.qcy,n[s].qHeight);n[s].qTop=e.snapshotData.object.origDataPages[s].qArea.qTop}e.qHyperCube[i]=t.get(n)}function a(t){if("pivot-table"===t.visualization){this.responseProperty="qPivotDataPages";this.slicer=new i}else{if("table"!==t.visualization)return;this.slicer=new n}var e=t.snapshotData.object.origDataPages;e||(e=t.qHyperCube[this.responseProperty]);this.slicer.store(e.filter(function(t){return t}))}o=t.extend("SnapshotAPI",{init:function t(e){this.responseProperty="qDataPages";a.call(this,e.layout);this._super(e,e.layout.qListObject?"/qListObjectDef":"/qHyperCubeDef")},getData:function t(n){var i=e();if("map"===this.model.layout.visualization){var o=this.dataPath.split("/")[1],a=this.dataPath.split("/"),l=a[a.length-1];"polygon"===this.model.layout.layers[o].type&&"3"===this.model.layout.layers[o].version?i.resolve(this.model.layout.layers[o].geodata.qHyperCube[this.responseProperty]):i.resolve(this.model.layout.layers[o][l][this.responseProperty])}else{r(this.slicer,this.model.layout,n,this.responseProperty);var c=s.getValue(this.model.layout,(this.dataPath+"/"+this.responseProperty).replace(new RegExp("/","g"),"."));i.resolve(c)}return i.promise},getHyperCubeBinnedData:function t(){return e.resolve(this.model.layout.dataPages)},getHyperCubeContinousData:function t(){return e.resolve({qDataPages:this.model.layout.qHyperCube.qDataPages,qAxisData:this.model.layout.qHyperCube.qAxisData})},getSize:function t(){return s.getValue(this.model.layout,this.dataPath.replace(new RegExp("/","g"),".")).qSize},beginSelections:function t(){},endSelections:function t(){},clearSelections:function t(){},isSnapshot:true});return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(120),n(143),n(301),n(638)],s=function(t,e,n,i){function s(e,i){t.getList().then(function(t){t.getLayout().then(function(t){var s={approvedSheets:[],myPublishedSheets:[],privateSheets:[],communitySheets:[]};s=o(s,t);s.approvedSheets.sort(n.sortByRank);s.privateSheets.sort(n.sortByRank);n.sortByPublishedDate(s.myPublishedSheets,"publishTime");r(e,s,i)})})}function o(t,i){var s={userId:e.userId,userDirectory:e.userDirectory};i.forEach(function(e){n.filterApproved(e)?t.approvedSheets.push(e):n.filterMyPublishedCommunity(s)(e)?t.myPublishedSheets.push(e):n.filterPrivate(e)?t.privateSheets.push(e):n.filterCommunity(s)(e)&&t.communitySheets.push(e)});return t}function r(t,e,n){Object.keys(e).forEach(function(n){e[n].forEach(function(e){t.sheetId===e.qInfo.qId?e.isActive=true:e.isActive=false})});i.show({title:"SheetDialog.Sheet.SelectSheet",sheets:e,selectSheet:function e(n){t.$emit("sheetSelected",n)},sheetInformation:n?n.sheetInformation:""})}function a(t){var e={width:"94%",height:"98%",left:"1.5%",right:"1.5%",top:"0%","z-index":4};switch(t){case"align-left":e.width="75.5%";e.right="23%";break;case"align-center":e.width="94%";e.right="4,5%";break;case"align-right":e.width="75.5%";e.left="23%";break;default:break}return e}return{onSelectSheet:s,getPosition:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){var e=7500,n,i={pending:0,resetTime:void 0};var s={begin:o,end:r,hasPending:a};return s;function o(){n=n||t.getService("$timeout");i.pending++;i.resetTime&&n.cancel(i.resetTime);i.resetTime=n(l,e)}function r(){if(!i.pending)return;i.pending--}function a(){return i.pending>0}function l(){i.pending=0}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(190),n(1092),n(690),n(691),n(692),n(347),n(696),n(697),n(698),n(699),n(700),n(701),n(702),n(703),n(705),n(706),n(707),n(708),n(709)],s=function(){}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(462),n(464),n(467),n(472),n(475)],s=function(){}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";"undefined"===typeof Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{enumerable:false,get:function t(){var e=this.toString().match(/^function( (.*?))?\(/);return e&&e.length>=3?e[2]:"anonymous function"}});Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function t(){},s=function s(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};i.prototype=this.prototype;s.prototype=new i;return s});Array.prototype.contains||Object.defineProperty(Array.prototype,"contains",{enumerable:false,value:function t(e){return-1!==this.indexOf(e)}});"scrollX"in window.constructor.prototype||Object.defineProperties(window.constructor.prototype,{scrollX:{get:function t(){return this.pageXOffset}},scrollY:{get:function t(){return this.pageYOffset}}})},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(224)],s=function(t,e){function n(n){function i(t){n.imageCustomSize=t}function s(t){n.selectedSize=t}function o(t){if(!t||!t.orientation)return;n.selectedLayout=t;n.sizes.forEach(function(e){e.setLabel(t.orientation)})}function r(t){n.export=t;n.print.format=t.format}function a(t){var e=l();if(t.isCustom){n.print.width=Math.round(e.width);n.print.height=Math.round(e.height);return}var i=t.toPixels(e.width);n.print.width=i.w;n.print.height=i.h}function l(){return{width:t("#qv-story-play").is(":visible")?t("#qv-story-play").find(".qv-story-play-slide").first().width():n.input.currentWidth,height:t("#qv-story-play").is(":visible")?t("#qv-story-play").find(".qv-story-play-slide").first().height():n.input.currentHeight,dpi:n.input.currentDpi}}function c(t){if(n.obj&&n.input.object){var i,s,o,r,a;n.print.width<8&&(n.print.width=8);n.print.height<8&&(n.print.height=8);n.print.dpi<n.minDpi&&(n.print.dpi=n.minDpi);n.print.dpi>n.maxDpi&&(n.print.dpi=n.maxDpi);var c=Math.round(n.print.width),p=Math.round(n.print.height);var h=l();a={width:Math.round(h.width),height:Math.round(h.height),dpi:h.dpi};var f=n.imageCustomSize?{width:n.print.width,height:n.print.height,dpi:n.print.dpi}:{width:n.input.currentWidth,height:n.input.currentHeight,dpi:n.input.currentDpi};s={width:Math.round(f.width*(n.input.currentDpi/f.dpi)),height:Math.round(f.height*(n.input.currentDpi/f.dpi))};"image"===t&&(i={imageType:n.print.format,captureSize:f});if("pdf"===t){o=n.selectedSize.toMillimeters();r={right:10,left:10,top:10,bottom:10};i={width:o["portrait"===n.selectedLayout.orientation?"w":"h"],height:o["portrait"===n.selectedLayout.orientation?"h":"w"],dpi:n.print.dpi,fitCriteria:n.print.fitCriteria,margin:r,sourceSize:a}}"ppt"===t&&(i={width:c,height:p,dpi:n.print.dpi,sourceSize:a});n.state=n.states.PENDING;return e.printTree(n.input.object,a,s,i,t).then(function(e){u(e,t)},d)}n.destroyComponent()}function u(t,e){n.printUrl=t.qUrl;n.printFileName=t.fileName;var i=e.charAt(0).toUpperCase()+e.slice(1);n.printUrlTranslationKey="Print."+i+".CompletedLink";n.state=n.states.COMPLETED}function d(t){n.statusCode=t.httpStatusCode;var e=t&&t.status;switch(e){case n.states.CANCELED:case n.states.TIMEOUT:n.state=e;break;default:n.state=n.states.FAILED;break}}return{onImageCustomSize:i,onSizeChange:s,onPrintLayout:o,onFormatChange:r,confirm:c,onPptFormatChange:a}}return{create:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(91)],s=function(t){var e="landscape";var n={w:33.1,h:46.8};var i=function t(e,n,i){this.name=e;this.unit=i||"in";this.dimensions=n};i.prototype={toPixels:function t(e){var n,i,s=0;switch(this.unit){case"in":s=e;break;case"pi":s=1;break;case"cm":s=.393701*e;break}n=this.dimensions.w*s;i=this.dimensions.h*s;return{w:Math.round(n),h:Math.round(i)}},toMillimeters:function t(){var e,n,i=0;switch(this.unit){case"in":i=1/.0393701;break;case"cm":i=10;break}e=this.dimensions.w*i;n=this.dimensions.h*i;return{w:Math.floor(e),h:Math.floor(n)}},setLabel:function e(n){var i=this;var s;var o=t.localeDetected&&"en"===t.localeDetected.substring(0,2);var r=o?i.dimensions:i.toMillimeters();var a=r["portrait"===n?"w":"h"],l=r["portrait"===n?"h":"w"];"Print.PaperSize.Letter"===i.name&&(i.name=t.get(i.name));s=o?" ("+a+'" x '+l+'")':" ("+a+" mm x "+l+" mm)";i.label=i.name+s}};function s(t,e){var n,i;if(t<e){n=t;i=e/2}else{n=t/2;i=e}return{w:n>i?i:n,h:i>n?i:n}}var o=[new i("A0",{w:n.w,h:n.h})];for(var r=1;r<8;r++)o.push(new i("A"+r,s(o[r-1].dimensions.w,o[r-1].dimensions.h)));o.push(new i("Print.PaperSize.Letter",{w:8.5,h:11}));for(var a=0;a<3;a++)o.shift();o.forEach(function(t){t.setLabel(e)});var l=[{orientation:"portrait",translationKey:"Print.Portrait"},{orientation:"landscape",translationKey:"Print.Landscape"}];l.forEach(function(e){t.ready.then(function(){e.label=t.get(e.translationKey)})});var c=[{type:"pdf",format:"pdf",label:"PDF"},{type:"image",format:"png",label:"PNG"},{type:"image",format:"jpeg",label:"JPEG"}];return{sizes:o,layouts:l,outputs:c}}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,,,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(118)],s=function(t){var e=2e3;function n(n,i,s){var o=t.occurrencesRE(n,i,s);var r=o>=e?e:o;return r}return{MAX_NBR_OF_HITS:e,getMaxNumberOfHits:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(614),n(50)],s=function(t,e,n){var i=null;function s(){i=null;n.ViewChanged.unbind(o)}function o(){t.getService("cardService").close()}var r={show:function r(a){n.ViewChanged.bind(o);var l={component:e,input:{object:a}},c=[l],u={cardSteps:c,onClose:s};i=a.id;t.getService("cardService").show(u)},isShowing:function t(){return i}};t.service("objectInfoCard",[function(){return r}]);return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(152),n(114),n(616),n(617)],s=function(t,e,n,i,s){function o(t){var e=/(https?:\/\/[^\s<]+)/g;if(t.indexOf("javascript:")>-1)return t;return t.replace(e,'<a href="$1" target="_blank">$1</a>')}return{template:i,scope:{close:"&"},controller:["$scope",function(i){var r=t.getService("$sce");i.direction=n.direction;i.getTrustedHtml=function(t){return t?r.getTrustedHtml(o(e.toHTML(t))):null};s.createObjectInfo(i.input.object).then(function(t){i.object=t})}]}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){var e;function n(t,e,n,i,s){void 0===n&&(n=s.qDecimalSep);void 0===i&&(i=s.qThousandSep);var o="",r,a,l,c;if("F"===t)if(0===e)o="#"+i+"##0";else{o="#"+i+"##0"+n;for(l=0;l<e;++l)o+="0"}else{for(l=0;l<e;++l)o+="#";if(e>3){c=o.length;r=o.substring(0,c-3);a=o.substr(c-3);o=r+i+a}}return o}return{setNumFmtPattern:function t(n,i,s){var o={type:i.qType||"U",nDec:"qType"===n?("F"===i.qType,2):"R"===i.qType?i.qnDec||10:"number"===typeof i.qnDec?Math.max(0,i.qnDec):2,thousandSep:i.qThou,decimalSep:i.qDec},r;r=this._getSeparators(n,"M"===i.qType,o.decimalSep,o.thousandSep,s);r.decimal!==e&&(o.decimalSep=r.decimal);r.thousand!==e&&(o.thousandSep=r.thousand);i.qType=o.type;i.qnDec=o.nDec;i.qDec=o.decimalSep;i.qThou=o.thousandSep;i.qFmt=this._getPattern(o.type,o.nDec,o.decimalSep,o.thousandSep,s);if(["D","T","TS","IV"].indexOf(o.type)>=0){i.qDec="";i.qThou=""}},_getSeparators:function t(e,n,i,s,o){var r=i,a=s,l="q"+(n?"Money":"");if("qType"===e){a=o[l+"ThousandSep"]||"";r=o[l+"DecimalSep"]||"."}else if("qThou"===e&&void 0===s){a=o[l+"ThousandSep"]||"";r=i||"."}else if("qDec"===e&&(void 0===i||""===i)){r=o[l+"DecimalSep"]||".";a=s||""}return{decimal:r||".",thousand:a||""}},_getPattern:function e(n,i,s,o,r){var a;switch(n){case"U":return"";case"I":return"#"+o+"##0";case"R":case"F":return this.getNDecPattern("F",i,s,o,r);case"M":a=r.qMoneyFmt;r.qMoneyDecimalSep&&(a=a.replace(new RegExp(t.escapeRegExp(r.qMoneyDecimalSep),"g"),s));r.qMoneyThousandSep&&(a=a.replace(new RegExp(t.escapeRegExp(r.qMoneyThousandSep),"g"),o));return a;case"D":return r.qDateFmt;case"T":return r.qTimeFmt;case"TS":return r.qTimestampFmt;case"IV":return"h:mm:ss";default:return""}},getDefaultNumericFormat:function t(e,i){return n("F",2,e.qDec,e.qThou||"",i)},getNDecPattern:n,getNormalizedFormat:function t(e,n){var i=e.qDec+e.qThou;if(/\u00a0/.test(i)&&!/\u0020/.test(i))return n.replace(/\u0020/g," ");return n}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(90),n(89),n(281),n(621),n(156),n(204),n(419),n(623),n(115),n(130),n(189),n(400),n(110)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h){function f(t,e){var n=i.getHyperCube(t,e);if(n)return n.qDimensionInfo||[];if(t.qChildList){var s=t.qChildList.qItems||[];return s.map(function(){return{}})}var o=!t.qListObject||!t.qListObject.qDimensionInfo||t.qListObject.qDimensionInfo.qError;return o?[]:[t.qListObject.qDimensionInfo]}function g(t,e){var n=i.getHyperCube(t,e);return n&&n.qMeasureInfo||[]}function v(t,e,n){var i,s,o,r,a,l;for(i=0;i<t.data.length;++i){for(s=0;s<t.data[i].dimensions.length;++s){o=t.data[i].dimensions[s];if(o.qLibraryId){a=u.findLibraryDimension(o.qLibraryId,e);a&&(o.title=a.qData.title)}}for(s=0;s<t.data[i].measures.length;++s){r=t.data[i].measures[s];if(r.qLibraryId){l=u.findLibraryMeasure(r.qLibraryId,n);l&&(r.title=l.qData.title)}}for(s=0;s<t.data[i].excludedDimensions.length;++s){o=t.data[i].excludedDimensions[s];if(o.qLibraryId){a=u.findLibraryDimension(o.qLibraryId,e);a&&(o.title=a.qData.title)}}for(s=0;s<t.data[i].excludedMeasures.length;++s){r=t.data[i].excludedMeasures[s];if(r.qLibraryId){l=u.findLibraryMeasure(r.qLibraryId,n);l&&(r.title=l.qData.title)}}}}return{BackendApi:s,template:l,hasDefaultTemplate:function t(){return this.template===l},mapProperties:function t(){this.mappedDefinition=o.mapDefinition(this.definition,this.type);this.globalChangeListeners=o.findGlobalListeners(this.mappedDefinition);var e=this.data&&this.data.dimensions;if(e){e.min="undefined"!==typeof e.min?e.min:1;e.max="undefined"!==typeof e.max?e.max:1e3}else if(!this.data){e=o.findDefinition(this.mappedDefinition,"qHyperCubeDef.qDimensions",true);e||(e=o.findDefinition(this.mappedDefinition,"qListObjectDef",true));e&&(e.obsolete=true)}this.dimensionDefinition=e;var n=this.data&&this.data.measures;if(n){n.min="undefined"!==typeof n.min?n.min:1;n.max="undefined"!==typeof n.max?n.max:1}else if(!this.data){n=o.findDefinition(this.mappedDefinition,"qHyperCubeDef.qMeasures",true);n&&(n.obsolete=true)}this.measureDefinition=n},getDefaultDimensionProperties:function t(){if(this.dimensionDefinition&&this.dimensionDefinition.obsolete)return o.mapProperties(this.dimensionDefinition);if(this.dimensionDefinition)return o.mapProperties(this.mappedDefinition.items.data.items.dimensions)},getDefaultMeasureProperties:function t(){if(this.measureDefinition&&this.measureDefinition.obsolete)return o.mapProperties(this.measureDefinition);if(this.measureDefinition)return o.mapProperties(this.mappedDefinition.items.data.items.measures)},getCreatePropertyHandler:function t(e){var n=this.globalChangeListeners,i,s;if(this.model&&this.model.layout&&this.model.layout.qListObject){i=o.mapProperties(this.dimensionDefinition);return new a({app:e,dimensionDefinition:this.dimensionDefinition,dimensionProperties:i})}i=this.getDefaultDimensionProperties();s=this.getDefaultMeasureProperties();return new r({app:e,dimensionDefinition:this.dimensionDefinition,measureDefinition:this.measureDefinition,dimensionProperties:i,measureProperties:s,globalChangeListeners:n})},mapSoftProperties:function t(){if(!this.softDefinition)return;var e=o.mapDefinition(this.softDefinition,null,p);function n(t){var e=[{diffs:t.ref||t.sortIndexRef?[t.ref||t.sortIndexRef]:t.diffs||[]}];t.items&&Object.keys(t.items).forEach(function(i){e.push({diffs:n(t.items[i])})});t._diffs=e;return e}n(e);this.mappedSoftDefinition=e},hasError:function t(e){var n=e.layout,i=e.ext&&e.ext.options.hyperCubePath?n[e.ext.options.hyperCubePath].qHyperCube:n.qHyperCube;if(i)return!!i.qError;if(n.qListObject)return!!n.qListObject.qError;return false},showRequirements:function t(e){var n=e.ext.dimensionDefinition?e.ext.dimensionDefinition.min:0,i=e.ext.measureDefinition?e.ext.measureDefinition.min:0,s=f(e.layout,e.ext.options.hyperCubePath),o=g(e.layout,e.ext.options.hyperCubePath),r;function a(t){return t.qError&&t.qError.qErrorCode===h.NxLocalizedErrorCode.LOCERR_CALC_EVAL_CONDITION_FAILED}function l(t){return t&&t.qErrorCode!==h.NxLocalizedErrorCode.LOCERR_CALC_EVAL_CONDITION_FAILED}function c(t){return t.filter(function(t){return!a(t)}).length}var u=c(s),d=c(o);"function"===typeof n&&(n=n.call(null,d));"function"===typeof i&&(i=i.call(null,u));if(n>0&&u<n)return true;for(r=0;r<s.length;++r)if(l(s[r].qError))return true;if(i>0&&d<i)return true;for(r=0;r<o.length;++r)if(l(o[r].qError))return true;return false},addFieldDimension:function e(n,i){return i.model.getProperties().then(function(e){var s=i.getCreatePropertyHandler();s.setProperties(e);return s.addFieldDimension(n.value,n.trimmedValue).then(function(n){s.updateGlobalChangeListeners();t.$rootScope.$broadcast("pp-open-path","data."+n.qDef.cId);return i.model.setProperties(e)})})},addLibraryDimension:function e(n,i){return i.model.getProperties().then(function(e){var s=i.getCreatePropertyHandler();s.setProperties(e);return s.addLibraryDimension(n.libraryId).then(function(n){s.updateGlobalChangeListeners();t.$rootScope.$broadcast("pp-open-path","data."+n.qDef.cId);return i.model.setProperties(e)})})},addLibraryMeasure:function e(n,i){return i.model.getProperties().then(function(e){var s=i.getCreatePropertyHandler();s.setProperties(e);return s.addLibraryMeasure(n.libraryId).then(function(n){s.updateGlobalChangeListeners();t.$rootScope.$broadcast("pp-open-path","data."+n.qDef.cId);i.model.setProperties(e)})})},addExpressionMeasure:function e(n,i){return i.model.getProperties().then(function(e){var s=i.getCreatePropertyHandler();s.setProperties(e);return s.addExpressionMeasure(n.value,n.trimmedValue).then(function(n){s.updateGlobalChangeListeners();t.$rootScope.$broadcast("pp-open-path","data."+n.qDef.cId);return i.model.setProperties(e)})})},getDropFieldOptions:function t(e,n,i,s,o){e.Add(i,n,o);e.ReplaceDimensions(i,n,o);e.AddFieldAsMeasure(i,n,o);e.ColorBy(i,n,o);s()},getDropDimensionOptions:function e(n,i,s,o,r){if(i.getDimensions().length<i.minDimensions())i.addLibraryDimension(n.item.id).then(function(e){s.setProperties(i.properties);t.$rootScope.$broadcast("pp-open-path","data."+e.qDef.cId)});else{n.Add(s,i,r);n.ReplaceDimensions(s,i,r);n.ColorBy(s,i,r);o()}},getDropMeasureOptions:function e(n,i,s,o,r){var a=i.getMeasures().length;if(a<i.minMeasures()||0===a&&a<i.maxMeasures())"expression"===n.item.type?i.addExpressionMeasure(n.item.name,"").then(function(e){s.setProperties(i.properties);t.$rootScope.$broadcast("pp-open-path","data."+e.qDef.cId)}):i.addLibraryMeasure(n.item.id).then(function(e){s.setProperties(i.properties);t.$rootScope.$broadcast("pp-open-path","data."+e.qDef.cId)});else{n.Add(s,i,r);n.ReplaceMeasures(s,i,r);n.ColorBy(s,i,r);o()}},getDropStateOptions:function t(e,n,i,s){e.ApplyAlternateState(i,n,e.item.id,"contextMenu.applyState");s()},getDropTemplateOptions:function t(e,n,i,s,o){var r=this,a=c.getType(e.item.template),l=["contextMenu.convertTo",e.item.name];r.type!==a.type?a.getExtensionType().then(function(t){!o.isReadonly&&!i.layout.qHasSoftPatches&&r.exportProperties&&t.importProperties&&e.menu.addItem({translation:l,tid:"convert",select:function n(){r._convert(a,t,e.item)}});s()},function(){s()}):s()},getDropOptions:function t(n,i,s){var o=n.model,r=this,a,l,c;l={field:"getDropFieldOptions",dimension:"getDropDimensionOptions",measure:"getDropMeasureOptions",template:"getDropTemplateOptions",expression:"getDropMeasureOptions",state:"getDropStateOptions"};a=i.item.type;c=l[a];if(c)return o.getProperties().then(function(t){var a=n.getCreatePropertyHandler();var l=e.extend(true,{},t);a.setProperties(l);a.setLayout(n.model&&n.model.layout);return r[c](i,a,o,s,n)});s()},_convert:function t(e,i,s){var o,r,a=this;n.all({initialProperties:e.getInitialProperties(s.init),propertyTree:a.model.getFullPropertyTree()}).then(function(t){try{o=a.exportProperties(t.propertyTree,a.options?a.options.hyperCubePath:void 0);n.all({dimensionList:a.model.app.getDimensionList(),measureList:a.model.app.getMeasureList()}).then(function(e){v(o,e.dimensionList,e.measureList);r=i.importProperties(o,t.initialProperties,i,i.options?i.options.hyperCubePath:void 0);a.model.getLayout().then(function(t){if(t.qHasSoftPatches){a.model.markAsCancelled();a.model.clearSoftPatches().then(function(){a.model.setFullPropertyTree(r).then(function(){a.model.markAsInvalid()})})}else a.model.setFullPropertyTree(r)})})}catch(t){}})},exportProperties:function t(e){if(e.qProperty.qHyperCubeDef)return d.hypercube.exportProperties(e);if(e.qProperty.qListObjectDef)return d.listbox.exportProperties(e);return d.other.exportProperties(e)},importProperties:function t(e,n,i){if(n.qHyperCubeDef)return d.hypercube.importProperties(e,n,i);if(n.qListObjectDef)return d.listbox.importProperties(e,n,i);return d.other.importProperties(e,n,i)},support:{cssScaling:false,sharing:false,colorBy:false,snapshot:false,export:false,exportData:true,viewData:false},options:{},hasNewType:function t(e,n){return e.type!==n}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(178)],s=function(t,e){var n={},i="";var s={put:o,has:r,get:a};return s;function o(i,s){if(!i||!s||!t.isString(i)||!t.isString(s))return;var o=e.getNormalizedExpression(i),r=s;n[o]=r}function r(i){if(!i||!t.isString(i))return false;var s=e.getNormalizedExpression(i),o=n[s];return!!o}function a(s){if(!s||!t.isString(s))return i;var o=e.getNormalizedExpression(s),r=n[o];return r||i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){t=void 0!==t?t:1;this.data=[];for(var e=0;e<t;++e)this.data.push({dimensions:[],measures:[],excludedDimensions:[],excludedMeasures:[],interColumnSortOrder:[]});this.properties={}}return t}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(159),n(114)],s=function(t,e,n){t.directive("qvaDirection",function(){return{restrict:"A",link:function t(i,s,o){function r(){var t,i=o["dirSetting"]?o["dirSetting"]:n.direction,r=o["dirText"];t=r?e.detectTextDirection(r):i;s.attr("dir",t);"rtl"===t?s.addClass("qv-rtl-text"):s.removeClass("qv-rtl-text");"rtl"===i?s.addClass("qv-rtl-layout"):s.removeClass("qv-rtl-layout")}r();o.$observe("dirText",r);o.$observe("dirSetting",r)}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(336),n(158),n(89),n(313),n(224),n(10)],s=function(t,e,n,i,s,r){function a(e,i,s){if(i instanceof a)return i;Object.defineProperties(this,{id:{value:i.id},qapp:{value:e},model:{value:i},rendered:{value:new n},support:{value:s,writable:true},_isToggled:{value:false,writable:true}});i.layout.qHyperCube&&Object.defineProperties(this,{table:{value:new t(this.qapp,i),configurable:true}})}a.prototype.setOptions=function(t){var n=[];e.addPatches("/",t,n);return this.model.applyPatches(n,true)};a.prototype.show=function(t,n){n=n||{};var i=this;var s=n.onRendered;n.onRendered=function(t){s&&s(t);i.rendered.resolve(t)};return e.showVisualization(t,this.model.enigmaModel,n,this.model.enigmaModel.app).then(function(e){i._scopes=i._scopes||[];i._scopes.push(e);i._elements=i._elements||[];i._elements.push(t);return e})};a.prototype.close=function(){if(this._scopes){this._scopes.forEach(function(t){t.$destroy()});delete this._scopes}if(this._elements){this._elements.forEach(function(t){e.clearElement(t)});delete this._elements}if(this.table){this.table.destroy();delete this.table}this.model&&this.model._expendable&&this.model.close();return e.Promise.resolve()};a.prototype.resize=function(){e.resize(this.id)};a.prototype.toggleDataView=function(){var t=this;return t.rendered.promise.then(function(){return e.getExtensionSupport(t.model).then(function(n){if(n.viewData){t.dataView||(t.dataView=t._elements.map(function(e){return new i(t.qapp.model,t.model,e,t._scopes[0].options)}));return e.Promise.all(t.dataView.map(function(t){return t.toggle()})).then(function(e){return t._isToggled=e.every(function(t){return t})}).catch(function(){return e.Promise.reject("toggleDataView was not successful")})}return e.Promise.reject("toggleDataView is not supported for this visualization type")})})};function l(t){var e,n,i,s,o,r;if(t&&t.session&&t.session.options||t&&t.enigmaModel&&t.enigmaModel.session&&t.enigmaModel.session.sessionConfig){e=t.session.options||t.enigmaModel.session.sessionConfig;r=void 0!==e.secure?e.secure:e.isSecure;n=r?"https://":"http://";i=e.host||"localhost";s=e.port?":"+e.port:"";o=e.prefix?e.prefix:"/";"/"!==o[o.length-1]&&(o+="/");return{baseUrl:n+i+s,prefix:o}}return{baseUrl:"",prefix:""}}function c(t,e){return-1!==t.indexOf("/printing/export/")?t:e.baseUrl+e.prefix+t.replace("../","")}a.prototype.exportImg=function(t){if(!t||!t.height||!t.width)throw new Error("Image dimensions missing in settings argument.");var e=this;var n="image";var i=l(e.qapp.model);var o="png";t&&t.format&&("jpeg"===t.format.toLowerCase()||"jpg"===t.format.toLowerCase())&&(o="jpeg");var r={imageType:o,captureSize:{dpi:96,height:t.height,width:t.width}};return s.printObject(e.qapp.model,{model:e.model},i.baseUrl,void 0,r.captureSize,r,n).then(function(t){return c(t.qUrl,i)})};function u(t,e){var n=void 0!==e&&e;var i={a3:{height:420,width:297},a4:{height:297,width:210},a5:{height:210,width:148},a6:{height:148,width:105},a7:{height:105,width:74},letter:{height:279.4,width:215.9}};if("object"===o(t)&&t.width&&t.height)return t;if(!i.hasOwnProperty(t.toLowerCase()))return{};return n?{height:i[t.toLowerCase()].width,width:i[t.toLowerCase()].height}:i[t.toLowerCase()]}a.prototype.exportPdf=function(t){var e=this;var n="pdf";var i=l(e.qapp.model);var o=!(!t||!t.orientation||"landscape"!==t.orientation.toLowerCase());var r=t&&t.documentSize?t.documentSize:"a4";var a=u(r,o);var d=t&&-1!==[0,2].indexOf(t.aspectRatio)?t.aspectRatio:2;var p=0!==d?{height:1,width:1}:t.objectSize;var h={dpi:200,fitCriteria:d,height:a.height,width:a.width,sourceSize:{dpi:96,width:p.width,height:p.height}};return s.printObject(e.qapp.model,{model:e.model},i.baseUrl,void 0,void 0,h,n).then(function(t){return c(t.qUrl,i)})};a.prototype.exportData=function(t){var e=this;var n=l(e.qapp.model);var i=t?r.copy(t):{};i.download=false;i.filename&&delete i.filename;return this.table.exportData(i).then(function(t){return n.baseUrl+t})};return a}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(337),n(338),n(339),n(647)],s=function(t,e,n,i,s){var o={OBJECT:"object",SHEET:"sheet",SLIDE:"slide",STORY:"story"};function r(t,n){var i={left:0,top:0,width:1,height:1};return e.snapshot(t,n.size||{width:600,height:400},n.source,n.sourceSize||{},i)}function a(t,e){return n.snapshot(t,e.size||{width:600,height:400},e.source,e.sheetLayout)}function l(t,e){return i.snapshot(t,e.size||{width:600,height:400},e.source,e.sourceSize)}function c(t,e){return s.snapshot(t,e.size||{width:600,height:400},e.source,e.sourceSize)}return{snapshot:function t(e,n,i){switch(n){case o.SHEET:return a(e,i||{});case o.STORY:return c(e,i||{});case o.SLIDE:return l(e,i||{});case o.OBJECT:return r(e,i||{})}},cancel:function e(){var n=Array.prototype.slice.call(document.querySelectorAll(".qv-snapshotter")),i;while(i=n.pop()){i=t(i).children("div");i.slice().each(function(e,n){n=t(n);n.scope&&n.scope()&&n.scope().$destroy();n.remove()})}},type:o}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11)],s=function(t){function e(t,e,i,s,r){"title"===t?n(e,i,1.32,false):"paragraph"===t&&o(e,i,s,r)}function n(t,e,n,i){var o,r,a,l,c=0,u=e.parents(".qv-story-grid-object"),d=e.find(".story-text-static"),p;p=t.split("<div").length>=t.split("<br").length?s(t,"<div"):s(t,"<br");o=e.height()/n/p;r=e.height()/p;a=e.height()/8/p;e.css({"line-height":Math.floor(r)+"px","font-size":Math.floor(o)});while(Math.ceil(u.outerWidth())<d.outerWidth()&&!i&&"!?}^"!==t&&c<250){l=o--;e.css({"line-height":Math.floor(r)+"px","font-size":Math.floor(l)});c++}e.css({"line-height":Math.floor(r)+"px","font-size":Math.floor(o)});e.find(".qv-media-tool-html").css({"padding-right":a});e.find(".qv-media-tool-editor").css({"padding-right":a})}function i(t,e,n){var i;i=t.split("<div").length>=t.split("<br").length?s(t,"<div"):s(t,"<br");return e/n/i}function s(t,e){var n=0,i=t.split(e),s=t.match(/<br/g),o=t.match(/<div/g);if(s&&"<br"===e){n+=s.length;i&&i[i.length-1].match(/.*?>(?:<\/\w+>)*([^<]+)/g)&&n++}o&&"<div"===e&&(n+=o.length);t.split("<div").length>n&&(n=t.split("<div").length);i.forEach(function(t,e){""===t&&0===e&&(n-=1)});n<1&&(n=1);return n}function o(e,n,i,s){var o,a,l;i.length<1&&(i=t(s?".qv-story-play-slide.qv-story-slide-active":"#selectable"));o=i.height();a=o<200?8e3/o:40;l=o/a;l=parseFloat(l.toFixed(2));l=l<2?2:l;r(n,l)}function r(t,e){t.css({"font-size":e})}function a(t){var e,n;e=t<200?8e3/t:40;n=t/e;n=parseFloat(n.toFixed(2));n=n<2?2:n;return n}return{getRows:s,calculateFontsize:e,calculateFontsizeOnTitle:n,calculateFontsizeOnParagraph:o,calculatePrintTitleFontSize:i,calculatePrintParagraphFontSize:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){return{getDuration:t};function t(t){var e=3e3,n=7e3,i=3e4,s=t*e;return Math.max(n,Math.min(s,i))}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92)],s=function(t){function e(t){var e=t.getBoundingRect();return Number.isNaN(+e.x+e.y+e.width+e.height)}var n=t.extend({init:function t(e,n,i,s,o,r,a){if(!(!e||e instanceof Array)||!(!n||n instanceof Array)||!(!i||n instanceof Array)||!(!s||i instanceof Array))throw new Error("The dimensions, measures and values input must be undefined or arrays");this.selected=false;this.highlighted=false;this.values=i||[];this.labels=s||[];this.row=o;this.col=r;this.id=a;this.parent=void 0;this.children=[];this._dimensions=e||[];this._measures=n||[];this._attrDims=[];this._attrDimTypes=[];this._objectShapes={};this._shapes=[];this._tooltipShape=void 0;this._tooltipShapeComponent=void 0},get siblings(){return this._parent?this._parent.children:[]},clearShapes:function t(e){e&&this._objectShapes[e]&&(this._objectShapes[e]=[]);this._shapes=[];for(var n in this._objectShapes)this._shapes=this._shapes.concat(this._objectShapes[n])},getShapes:function t(e){return e?this._objectShapes[e]||(this._objectShapes[e]=[]):this._shapes},getShapeBounds:function t(n,i){if(this._calculateTooltipPosition&&n){var s=this.getShapes(n);var o=s.map(function(t){var e=t.getBoundingRect();if(!t.clearModelView){e=e.clone();e.set(e.x*i,e.y*i,e.width*i,e.height*i)}return e});o=o.filter(function(t){return!e(t)});if(o.length){var r=o.reduce(function(t,e){return t.combineWith(e)},o[0]);return r}return null}return null},addShape:function t(e,n,i){if(n instanceof Array&&(!n[0].pointInside||!n[0].getBoundingRect)||!n.pointInside||!n.getBoundingRect)throw new Error("The shape must implement a `pointInside` function");this._objectShapes[e]instanceof Array||(this._objectShapes[e]=[]);this._objectShapes[e].push(n);this._shapes.push(n);if(i){this._tooltipShape=n;this._tooltipShapeComponent=e}},addMeasure:function t(e,n,i){this.values.push(n);this.labels.push(i);this._measures.push(e)},getMeasures:function t(){return this._measures},getMeasuresIndecies:function t(){return this._measures.map(function(t,e){return e})},addDimension:function t(e){this._dimensions.push(e)},getDimensions:function t(){return this._dimensions},addAttributeDimension:function t(e,n,i){this._attrDims.push({value:e,label:n,name:i})},getAttributeDimensions:function t(e){if(this._attrDims.length)return Number.isNaN(+e)?this._attrDims.map(function(t){return t.value}):[this._attrDims[e].value];return null},getValue:function t(e){e=e||0;return this.values[e]},getPreformattedLabel:function t(e){e=e||0;return this.labels[e]},getCombinedElementID:function t(){var e=this,n=[e.id];while(e.parent){e=e.parent;n.push(e.id)}n.reverse();return n.join(",")}});n.prototype.isCacheItem=true;Object.defineProperties(n.prototype,{tooltipShape:{get:function t(){return this._tooltipShape}},calculateTooltipPosition:{set:function t(e){this._calculateTooltipPosition=e},get:function t(){return this._calculateTooltipPosition}},interactPosition:{set:function t(e){this._interactPosition=e},get:function t(){return this._interactPosition}},tooltipShapeComponent:{get:function t(){return this._tooltipShapeComponent}},label:{get:function t(){throw new Error("CacheItem: label: Removed functionality")}},shape:{get:function t(){throw new Error("CacheItem: shape: Removed functionality")}},value:{get:function t(){throw new Error("CacheItem: value: Removed functionality")}}});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(684)],s=function(t){return{scope:{offset:"=",content:"="},template:t,controller:[function(){}]}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(97),n(750),n(91)],s=function(t,e,n,i,s){var o={template:i,controller:["$scope","$timeout",function(e,i){e.popupClosing=false;e.input.buttonText=e.input.buttonText?e.input.buttonText:s.get("Common.OK");e.input.title=e.input.title?e.input.title:"";e.input.message=e.input.message?e.input.message:"";function o(t){if(t){e.popupClosing=true;i(function(){e.destroyComponent()},500)}else e.destroyComponent()}e.input.closeAfter&&i(function(){o(true)},e.input.closeAfter);e.onOutsidePopover=function(e){event.stopPropagation();event.preventDefault();t(e.target).closest(".qui-popover-ok-button").length||o()};e.onCloseClicked=function(){o(true)};e.$on("$destroy",function(){n.off("start",r)});function r(){e.destroyComponent()}n.on("start",r)}]};e.service("qvGuidancePopover",["luiPopover",function(t){return{show:function e(n){return t.show({controller:o.controller,template:o.template,alignTo:n.alignTo,input:{input:n,class:n.class?n.class:""}})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(458),n(214)],s=function(t,e,n){var i=false;var s=false;var o;function r(){return n.saveApp().then(function(){if(s){s=false;return r()}})}function a(){var a=t.getService("$timeout");if(!n.isAutoSaveOn()){n.notifyThatNewChangeIsDoneAndSaveIsRequired();return}if(i){s=true;return}a.cancel(o);n.setSaveOngoing(true);o=a(function(){i=true;e.save();r().finally(function(){i=false})},1e3)}return{save:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(248),n(251),n(353),n(170)],s=function(t,e,n,i){var s={};var o;function r(e){o=e;t.hasTableSizeData()&&u()}function a(t){return e.sha256(o+t)}function l(t,e,n){if(!o)throw new Error("Application ID is undefined.");var i=a(t);s[i]={height:e,width:n}}function c(){var e=n.getDataModel();for(var o in e){var r=i.getTableElement(o);var a=r.height();var c=r.width();l(o,a,c)}t.setTableSizeData(s)}function u(){s=t.getTableSizeData()}function d(t){var e=a(t);var n=s[e];return n}function p(){return t.hasTableSizeData()}return{setAppID:r,save:c,getWidthAndHeightForTable:d,hasLocalStorageData:p}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i;!(i=function(){function t(t,e){return t*(1/e)}function e(t,e){return t/e}return{getDimensionBasedOnZoom:t,getZoomLevelBasedOnDimension:e}}.call(e,n,e,t),void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i,s;!(i=[n(115),n(89)],s=function(t,e){var i={width:144,height:96},s=2;function o(t){var e={};e.width=t.width-t.numCols*t.spacing;e.height=t.height-t.numRows*t.spacing;e.columnWidth=e.width/t.numCols;e.rowHeight=e.height/t.numRows;e.cols=t.numCols;e.rows=t.numRows;e.spacing=t.spacing;return e}function r(e,n,i,s){var o=i.colspan/n.cols*n.width+(i.colspan-2)*n.spacing,r=i.rowspan/n.rows*n.height+(i.rowspan-2)*n.spacing,a=n.spacing+n.columnWidth*i.col+n.spacing*i.col,l=n.spacing+n.rowHeight*i.row+n.spacing*i.row,c=t.getIconPath(i.type),u=o>=r?r:o;e.fillStyle="rgb(242, 242, 242)";e.fillRect(a,l,o,r);u=Math.max(8,Math.min(u,24))/16;e.fillStyle=s?"rgba(0, 152, 69,.6)":"rgba(89, 89, 89,0.6)";e.text="center";e.textAlign="center";e.textBaseline="middle";e.save();e.translate(Math.round(a+o/2-8*u),Math.round(l+r/2-8*u));e.scale(u,u);e.fill(new Path2D(c));e.restore()}var a={staticSrc:function t(){return{staticPublishedSheet:function t(){return n.p+"img/core/static/Default-sheet-published.png"},staticUnPublishedSheet:function t(){return n.p+"img/core/static/Default-sheet-unpublished.png"},staticPublishedStory:function t(){return n.p+"img/core/static/Default-story-published.png"},staticUnPublishedStory:function t(){return n.p+"img/core/static/Default-story-unpublished.png"},staticApp:function t(){return n.p+"img/core/static/Default_thumbnail_app.png"},brokenImage:function t(){return n.p+"img/core/static/Ic_BrokenBig@2x.png"}}},dimensions:{original:i,width:i.width-2,height:i.height-2,spacing:2},getSrc:function t(e,n){var i=n?"Sheet":"Story",s=e?"staticPublished":"staticUnPublished";return a.staticSrc()[s+i]()},generateImageForStory:function t(n,i){var s=new e;i.get(n.item.qInfo.qId).then(function(t){t.getLayout().then(function(e){if(e.qChildList&&e.qChildList.qItems.length){n.slide=e.qChildList.qItems.slice().sort(function(t,e){if(t.qData.rank===e.qData.rank)return 0;return t.qData.rank<e.qData.rank?-1:1})[0];n.slide?t.app.getObject(n.slide.qInfo.qId).then(function(t){t.getLayout().then(function(t){t.qChildList.qItems.length>0?s.resolve():s.reject()},s.reject)}):s.reject()}else s.reject()})});return s.promise},paintCanvas:function t(e){var n=document.createElement("canvas"),i,l,c;i=o({width:a.dimensions.width*s,height:a.dimensions.height*s,spacing:a.dimensions.spacing,numRows:e.qData.rows,numCols:e.qData.columns});n.width=a.dimensions.width*s;n.height=a.dimensions.height*s;l=n.getContext("2d");function u(t){t.forEach(function(t){var n=e.qMeta.published;r(l,i,t,n)})}l.clearRect(0,0,n.width,n.height);u(e.qData.cells);c=n.toDataURL();l=null;i=null;n.remove&&n.remove();n=null;return c}};return a}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(463)],s=function(t,e){t.component("quiFloat",{transclude:true,template:e,scope:{quiOffset:"=",quiResizeOnChange:"="},controller:["$scope","$element","$timeout",function(t,e,n){function i(){if(!t.quiOffset||!t.reportedSize||!t.reportedWindowSize)t.visible=false;else{t.quiOffset.left+t.reportedSize.width<t.reportedWindowSize.width?t.left=t.quiOffset.left:t.left=t.reportedWindowSize.width-t.reportedSize.width;t.quiOffset.top+t.reportedSize.height<t.reportedWindowSize.height?t.top=t.quiOffset.top:t.top=t.reportedWindowSize.height-t.reportedSize.height;t.visible=true}}function s(){n(function(){t.reportedSize={width:e.outerWidth(),height:e.outerHeight()}})}t.$watch("quiResizeOnChange",s,true);t.$watch("[quiOffset, reportedSize, reportedWindowSize]",i,true)}]})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qui-float" ng-style="{top:top, left:left}" ng-show="visible" qva-reported-window-size="reportedWindowSize">\n\t<div ng-transclude></div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(465),n(466)],s=function(t,e,n){t.component("quiInputNumber",{template:n,scope:{quiModel:"=",quiDisabled:"=",quiTitle:"@",quiMin:"@",quiMax:"@",quiClass:"@",quiSelectTextOnFocus:"@",quiWithButtons:"@",quiTid:"@"},controller:["$scope","$element",function(t,n){if(t.quiSelectTextOnFocus){t.selected=false;n.click(function(){if(false===t.selected){n.select();t.selected=true}});n.blur(function(){t.selected=false})}t.onChange=function(i){var s=parseInt(i)||0;t.quiModel=e.getNumerical(parseInt(n.find(".lui-input").val())+s,t.quiMin,t.quiMax)}}]})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){return Number(String(t).replace(/[^-\d]/g,""))}return{getNumerical:function e(n,i,s){n=t(n);i=Number(i);s=Number(s);if(n<i)return i;if(0!==s&&n>s)return s;return n}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<span class="qui-input-number lui-input-group">\n\t<button class="lui-input-group__item  lui-input-group__button  lui-button" qva-activate="onChange(-1)" ng-disabled="quiDisabled" ng-if="quiWithButtons">\n\t\t<span class="lui-button__icon">-</span>\n\t</button>\n\t<input type="tel" class="lui-input-group__item  lui-input-group__input  lui-input {{quiClass}}" tid="{{quiTid}}" title="{{quiTitle}}" ng-model="quiModel" ng-model-options="{ updateOn: \'blur\' }" ng-change="onChange()" ng-disabled="quiDisabled"/>\n\t<button class="lui-input-group__item  lui-input-group__button  lui-button" qva-activate="onChange(1)" ng-disabled="quiDisabled" ng-if="quiWithButtons">\n\t\t<span class="lui-button__icon">+</span>\n\t</button>\n</span>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(119),n(468),n(469),n(470)],s=function(t,e,n,i){var s={TAB:9};function o(t){return t.parents(".popover-container").length?t.parents(".popover-container")[0]:null}function r(e,n,i){return e.which===s.TAB&&e.target!==n.alignTo&&t(e.target).closest(".lui-popover-container")[0]!==i[0]}var a={template:i,scope:{quiModel:"=",shared:"=",close:"="},controller:["$scope","$element","$document",function(t,e,n){t.menuClasses=t.quiModel.menuOptions.content.menuClasses?t.quiModel.menuOptions.content.menuClasses:"qui-textlist";t.quiModel.menuOptions.content.createMenuItems().then(function(e){t.menuItems=e});t.selectMenuItem=function(e,n,i){n&&n.preventDefault&&n.preventDefault();if(!e.disable){t.close&&t.close();e.selected(n,i)}};n.on("keyup.qv-popover",function(n){o(e)&&r(n,t,e)&&t.close&&t.close()});t.$on("$destroy",function(){n.off("keyup.qv-popover")})}]};e.directive("qvPopoverButton",function(){return{template:n,transclude:true,replace:true,restrict:"E",scope:{quiModel:"=",quiPopoverContainer:"=?"},controller:["$scope","$element","luiPopover","qvMobileMenu",function(t,e,n,i){var s;t.shared={pressed:false};t.onClick=function(){if(t.shared.pressed&&s){s.close();return}t.shared.pressed=!t.shared.pressed;var r=t.quiModel.menuOptions||{};s=r.smallview?i.show({controller:a.controller,template:a.template,autoFocus:false,closeOnResize:true,outsideIgnore:t.quiModel.tid,input:{quiModel:t.quiModel,shared:t.shared,close:function t(){s.close()}}}):n.show({controller:a.controller,template:a.template,dock:"bottom",alignTo:e[0],autoFocus:false,closeOnResize:true,outsideIgnore:t.quiModel.tid,container:o(e),input:{quiModel:t.quiModel,shared:t.shared,close:function t(){s.close()}}});s.closed.then(function(){t.shared.pressed=false})};t.$watch("shared.pressed",function(e){t.currentTitle=e&&t.quiModel.tooltipActive?t.quiModel.tooltipActive:t.quiModel.tooltipInactive})}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant, {\'lui-active\': shared.pressed }]"\n\t\tq-title-translation="{{currentTitle}}"\n\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\tng-click="onClick()">\n\t<span class="{{quiModel.buttonClass}}__icon lui-icon  lui-icon--{{quiModel.icon}}  {{quiModel.menuOptions.smallview ? \'lui-icon--large\' : \'\'}}"></span>\n\t<span class="{{quiModel.buttonClass}}__text" ng-if="quiModel.buttonText">\n\t\t{{quiModel.buttonText}}\n\t</span>\n\t<span ng-if="!quiModel.hideCaret" class="{{quiModel.buttonClass}}__caret  lui-caret"></span>\n</button>\n'},function(t,e){t.exports='<lui-popover ng-style="{ width: quiModel.menuOptions.width }">\n\t<ul ng-class="menuClasses" tid="{{quiModel.menuOptions.content.tid}}">\n\t\t<li class="lui-list__item"\n\t\t\tng-repeat="menuItem in menuItems"\n\t\t\tng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\', \'lui-disabled\': menuItem.disable, \'header-item\': menuItem.headerItem, \'last-menu-item\' : menuItem.last}"\n\t\t\tng-hide="menuItem.hide">\n\n\t\t\t<qv-menu-switch tid="{{menuItem.tid}}" x-model="menuItem" callback="selectMenuItem(menuItem, $event)" ng-if="menuItem.showSwitch"/>\n\n\t\t\t<button tid="{{menuItem.tid}}"\n\t\t\t\t class="action-item"\n\t\t\t\t ng-class="[quiModel.buttonClass, quiModel.buttonVariant]"\n\t\t\t\t ng-click="selectMenuItem(menuItem, $event)"\n\t\t\t\t q-title-translation="{{ menuItem.title || menuItem.text}}"\n\t\t\t\t ng-disabled="menuItem.disable"\n\t\t\t\t ng-if="!menuItem.showSwitch">\n\t\t\t\t<span ng-if="menuItem.icon"\tclass="lui-list__aside">\n\t\t\t\t\t<span class="lui-icon  lui-icon--{{menuItem.icon}}" ng-disabled="menuItem.disable"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="lui-list__text menu-item-text"\n\t\t\t\t\t  q-translation="{{menuItem.text}}"\n\t\t\t\t\t  ng-class="{\'open-in-new-tab-text-optional\': menuItem.openInNewTab == \'optional\', \'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" aria-hidden="true">\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t\t<div class="list-divider" ng-if="menuItem.openInNewTab === \'optional\'"></div>\n\t\t\t<button ng-if="menuItem.openInNewTab" class="lui-fade-button"\n\t\t\t\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant]"\n\t\t\t\t\tq-title-translation="{{ menuItem.title || \'Tooltip.OpenInNewTab\'}}"\n\t\t\t\t\tng-click="selectMenuItem(menuItem, $event, \'true\')"\n\t\t\t\t\tng-disabled="menuItem.disable" tabindex="-1">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--new-tab"></span>\n\t\t\t</button>\n\t\t</li>\n\t</ul>\n</lui-popover>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(471)],s=function(t,e){t.directive("qvMenuSwitch",function(){return{template:e,scope:{model:"=",callback:"&"},link:function t(e){e.switchValue=e.model.value;e.$watch("switchValue",function(t,n){void 0!==t&&t!==n&&e.callback()})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="menu-switch-component" tcl="switch" q-title-translation="{{ model.text }}">\n    <span ng-if="model.icon" class="lui-list__aside switch_icon">\n        <span class="lui-icon  lui-icon--{{model.icon}}" ng-disabled="model.disable"></span>\n    </span>\n    <span class="label" ng-disabled="readOnly">\n        <div class="title" q-translation="{{ model.text }}"></div>\n        <div class="value" q-translation="{{ model.label() }}"></div>\n    </span>\n    <lui-switch x-model="switchValue"/>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(119),n(11),n(473),n(474),n(51),n(97)],s=function(t,e,n,i,s,o){var r={template:i,scope:{quiModel:"=",alignTo:"=",shared:"="},controller:["$scope",function(t){t.shared.destroyComponent=t.destroyComponent;t.menuClasses=t.quiModel.menuOptions.content.menuClasses?t.quiModel.menuOptions.content.menuClasses:"qui-textlist";t.quiModel.menuOptions.content.createMenuItems().then(function(e){t.menuItems=e});t.selectMenuItem=function(e,n,i){n&&n.preventDefault&&n.preventDefault();if(!e.disable){t.onClose&&t.onClose(n);e.selected(n,i)}};t.onClose=function(n){if(!e(n.target).hasClass("qui-popover-button")||t.quiModel.tid!==e(n.target).attr("tid")){t.destroyComponent();t.shared.pressed=false}};t.closeFromContent=function(){t.destroyComponent();t.shared.pressed=false};t.$on("$destroy",function(){o.off("start",t.onClose)});o.on("start",t.onClose)}]};t.directive("quiPopoverButton",function(){return{template:n,transclude:true,replace:true,restrict:"E",scope:{quiModel:"=",quiPopoverContainer:"=?"},controller:["$scope","$element",function(t,e){var n={ENTER:13,SPACE:32};t.shared={};t.shared.pressed=false;t.$watch("shared.pressed",function(e){t.currentTitle=e&&t.quiModel.tooltipActive?t.quiModel.tooltipActive:t.quiModel.tooltipInactive});e.on("keypress",function(e){e.keyCode!==n.ENTER&&e.keyCode!==n.SPACE||t.onClick()});t.onClick=function(){if(t.shared.pressed){if(t.shared.destroyComponent){t.shared.destroyComponent();t.shared.pressed=false}}else{t.shared.pressed=true;s.show(t.quiPopoverContainer||r,{quiModel:t.quiModel,alignTo:e,shared:t.shared})}};t.quiModel&&(t.quiModel.forceClick=t.onClick)}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant, {\'lui-active\': shared.pressed }]"\n\t\tq-title-translation="{{currentTitle}}"\n\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\tng-click="onClick()">\n\t<span ng-if="!quiModel.hideIcon" class="{{quiModel.buttonClass}}__icon lui-icon  lui-icon--{{quiModel.icon}}  {{quiModel.menuOptions.smallview ? \'lui-icon--large\' : \'\'}}"></span>\n\t<span class="{{quiModel.buttonClass}}__text" ng-if="quiModel.buttonText">\n\t\t{{quiModel.buttonText}}\n\t</span>\n\t<span ng-if="!quiModel.hideCaret" class="{{quiModel.buttonClass}}__caret  lui-caret"></span>\n</button>\n'},function(t,e){t.exports='<immidiate-contextual align-to="alignTo"\n\t\t\t\t\t  smallview="quiModel.menuOptions.smallview"\n\t\t\t\t\t  position="quiModel.menuOptions.position"\n\t\t\t\t\t  width="quiModel.menuOptions.width"\n\t\t\t\t\t  top="quiModel.menuOptions.top"\n\t\t\t\t\t  lui-style="true"\n\t\t\t\t\t  no-padding="true"\n\t\t\t\t\t  hidepointer="quiModel.menuOptions.hidepointer"\n\t\t\t\t\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\t\t\t\t  on-close-view="onClose(event)">\n\t<ul ng-class="menuClasses" tid="{{quiModel.menuOptions.content.tid}}">\n\t\t<li class="lui-list__item" ng-repeat="menuItem in menuItems" ng-disabled="menuItem.disable" qui-click=\'menuItem.fn()\'\n\t\t\tng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" ng-hide="menuItem.hide">\n\t\t\t<span ng-if="menuItem.icon" class="lui-list__aside">\n\t\t\t\t<span class="lui-icon  lui-icon--{{menuItem.icon}}"></span>\n\t\t\t</span>\n\t\t\t<span class="lui-list__text menu-item-text"\n\t\t\t\t  tid="{{menuItem.tid}}"\n\t\t\t\t  q-title-translation="{{ menuItem.title || menuItem.text}}"\n\t\t\t\t  ng-class="{\'open-in-new-tab-text-optional\': menuItem.openInNewTab == \'optional\', \'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}"\n\t\t\t\t  qva-activate="selectMenuItem(menuItem, $event)" q-translation="{{menuItem.text}}" ng-disabled="menuItem.disable">\n\t\t\t</span>\n\t\t\t<div class="list-divider" ng-if="menuItem.openInNewTab === \'optional\'"></div>\n\t\t\t<button ng-if="menuItem.openInNewTab" class="lui-fade-button  open-in-new-tab" ng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" q-title-translation="{{ menuItem.title || \'Tooltip.OpenInNewTab\'}}" qva-activate="selectMenuItem(menuItem, $event, \'true\')" ng-disabled="menuItem.disable">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--new-tab"></span>\n\t\t\t</button>\n\t\t</li>\n\t</ul>\n</immidiate-contextual>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(49),n(476),n(477)],s=function(t,e,n,i,s){e.component("quiToolbar",{template:"<div class='qui-toolbar' ng-transclude />"});e.component("quiToolbarLeft",{template:"<div class='qui-buttonset-left' ng-transclude />"});e.component("quiToolbarRight",{template:"<div class='qui-buttonset-right' ng-transclude />"});e.component("quiToolbarButtonGroup",{template:"<div class='lui-buttongroup' ng-transclude />"});e.component("quiToolbarButton",{template:i,scope:{quiModel:"="},controller:["$scope",function(e){e.isMouseDown=false;e.onMouseDown=function(){e.isMouseDown=true};e.clientTabNavigation=n.getFlag("CLIENT_TAB_NAVIGATION");e.onButton=function(n){t.support.touch&&n.target.focus();e.quiModel.isToggleButton&&(e.quiModel.pressed=!e.quiModel.pressed);e.quiModel.isOpenedByClick=e.isMouseDown;e.isMouseDown=false;e.quiModel.onButtonClicked(e.quiModel,n)};function i(){var t=[];var n=e.quiModel;n.pressed?n.activeVariant?t.push(n.activeVariant):t.push("lui-active"):n.variant?t.push(n.variant):e.clientTabNavigation||t.push("lui-button--toolbar");e.classList=t}e.$watch("quiModel.pressed",i);e.$watch("quiModel.variant",i);e.$watch("quiModel.activeVariant",i);i()}]});e.component("quiToolbarMobileButton",{template:s,scope:{quiModel:"="},controller:["$scope",function(e){e.onButton=function(n){t.support.touch&&n.target.focus();e.quiModel.isToggleButton&&(e.quiModel.pressed=!e.quiModel.pressed);e.quiModel.onButtonClicked(e.quiModel,n)}}]})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-click="onButton($event)"\n\t\tng-mousedown="onMouseDown()"\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tq-title-translation="{{(quiModel.pressed && quiModel.tooltipActive ? quiModel.tooltipActive : quiModel.tooltipInactive)}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-hide="quiModel.isHidden()"\n\t\tclass="lui-button"\n\t\ttext-inactive="{{quiModel.textInactive ? quiModel.textInactive : \'\'}}"\n\t\tng-class="classList">\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="quiModel.icon && quiModel.iconToTheLeft"\n\t\tclass="lui-button__icon  lui-icon  lui-icon--{{quiModel.icon}} center"\n\t></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && quiModel.showText()"\n\t\tclass="lui-button__text  item-title"\n\t\tqva-direction\n\t\tx-dir-text="{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}"\n\t>\n\t\t{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}\n\t</span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="quiModel.icon && !quiModel.iconToTheLeft"\n\t\tclass="lui-button__icon  lui-icon  lui-icon--{{quiModel.icon}} center"\n\t></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && !quiModel.textOnly && quiModel.isDropdownButton"\n\t\tclass="lui-button__caret  lui-caret"\n\t></span>\n\t<span class="lui-button__text" qva-outside-ignore-for="{{quiModel.name}}" ng-if="quiModel.dynamicText">\n\t\t{{ quiModel.dynamicText() }}\n\t</span>\n</button>\n'},function(t,e){t.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-click="onButton($event)"\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tq-title-translation="{{(quiModel.pressed && quiModel.tooltipActive ? quiModel.tooltipActive : quiModel.tooltipInactive)}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-hide="quiModel.isHidden()"\n\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse"\n\t\tng-class="{ \'lui-active\': quiModel.pressed }">\n\t<span qva-outside-ignore-for="{{quiModel.name}}" ng-if="!quiModel.dynamicText && quiModel.showText()"\n\t\tclass="lui-fade-button__text  item-title"\n\t\tqva-direction\n\t\tx-dir-text="{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}">\n\t\t{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}\n\t</span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && !quiModel.textOnly"\n\t\tclass="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--{{quiModel.icon}}"></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tclass="lui-fade-button__text"\n\t\tng-if="quiModel.dynamicText">{{ quiModel.dynamicText() }}</span>\n</button>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(91)],s=function(t){var e=[],n=[{tid:"Print.Ppt.Format.Standard",w:4,h:3},{tid:"Print.Ppt.Format.Widescreen",w:16,h:9},{tid:"Print.Ppt.Format.Widescreen",w:16,h:10},{tid:"Print.Ppt.Format.Custom"}];var i=function t(e,n){this.ratio=e||{};this.isCustom=n||false};i.prototype={toPixels:function t(e){var n=parseInt(e)||960;var i=n/this.ratio.w*this.ratio.h;return{w:Math.round(n),h:Math.round(i)}},setLabel:function e(){var n=this;t.ready.then(function(){var e=t.get(n.ratio.tid);n.label=e;n.ratio.w&&n.ratio.h&&(n.label+=" "+n.ratio.w+":"+n.ratio.h)})}};var s=n.length;for(var o=0;o<s;o++){var r=new i(n[o]);3===o&&(r.isCustom=true);e.push(r)}e.forEach(function(t){t.setLabel("portrait")});return{formats:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-image-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button" tid="print-current-size" ng-class="{ \'lui-active\': ! imageCustomSize }" q-translation="Print.Image.CurrentSize" ng-click="onImageCustomSize(false)" ng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button" tid="print-custom-size"  ng-class="{ \'lui-active\': imageCustomSize }" q-translation="Common.Custom" ng-click="onImageCustomSize(true)" ng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="! imageCustomSize">\n\t\t\t{{input.currentWidth}} x {{input.currentHeight}} px @ 96 dpi</span>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-width"\n\t\t\t\t\t\tqui-model="print.width" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-height"\n\t\t\t\t\t\tqui-model="print.height" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-dpi"\n\t\t\t\t\t\tqui-model="print.dpi" qui-disabled="state === states.PENDING" qui-min="0" qui-max="300" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Format"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\t\tx-model="print.format"\n\t\t\t\t\t\t\tx-options="f as f for f in availableFormats"\n\t\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\t\ttid="print-image-selected-format"></lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-if="!usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink"></a>\n\t\t\t\t<a ng-if="usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink" download="{{printFileName}}"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="{{minDpi}}"\n\t\t\t\t\t\tqui-max="{{maxDpi}}"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-ppt-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.Format"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\ttid="print-ppt-selected-size"\n\t\t\t\t\tx-model="selectedFormat"\n\t\t\t\t\tx-options="f.label for f in formats"\n\t\t\t\t\tx-change="onPptFormatChange(selectedFormat)">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-width"\n\t\t\t\tqui-model="print.width" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-height"\n\t\t\t\tqui-model="print.height" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-ppt-dpi">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-ppt-dpi"\n\t\t\t\t\t\tx-model="print.dpi"\n\t\t\t\t\t\tx-options="d as d for d in availablePptDpi">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t{{print.width}} x {{print.height}} px @ {{print.dpi}} dpi\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.CurrentSlideSize"></div>\n\t\t\t<p>\n\t\t\t{{print.currentWidth}} x {{print.currentHeight}} px @ {{print.currentDpi}} dpi\n\t\t\t</p>\n\t\t</div>\n\t\t--\x3e\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Ppt.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="0"\n\t\t\t\t\t\tqui-max="300"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(160),n(101),n(385)],s=function(t,e,n){var i=["scatterplot","map"],s=["map"];return{baseColor:{isSupported:function t(e){return e&&e.length&&-1===i.indexOf(e)},isDimSupported:function t(e){return e&&e.length&&-1!==s.indexOf(e)}},colorBy:{},colorByUpdater:function t(e,n,i,s){this.updateColorDef(e,s,i);this.updateHypercubeAttributes(e,n,i)},updateColorDef:function i(s,o,r){var a=e.getValue(r,"mode");var c=e.getValue(r,"auto");var d=e.getValue(s,o+"qDimensions",[]);var p=e.getValue(s,o+"qMeasures",[]);var h,f,g,v;if(!c&&"byDimension"===a&&d.length){h=e.getValue(r,"byDimDef");h&&u(r,h.label);if(h&&h.activeDimensionIndex>-1){h.activeDimensionIndex=Math.min(h.activeDimensionIndex,d.length-1);f=d[h.activeDimensionIndex];v=n.getColorByDefinition("dimension",false,f);v.activeDimensionIndex=h.activeDimensionIndex;l(r,v)}else if(!h||!h.key){f=d[d.length-1];g=t.getById(f.qAttributeDimensions,t.IDMAP.COLOR_BY_ALTERNATIVE);l(r,n.getColorByDefinition("dimension",!!g,g||f))}}else if(!c&&"byMeasure"===a&&d.length){h=e.getValue(r,"byMeasureDef");h&&u(r,h.label);if((!h||!h.key)&&p.length){var m=p[0];f=d[d.length-1];g=t.getById(f.qAttributeExpressions,t.IDMAP.COLOR_BY_ALTERNATIVE);l(r,n.getColorByDefinition("measure",!!g,g||m))}}else"byMultiple"===a&&p.length<2&&e.setValue(r,"mode","primary")},updateHypercubeAttributes:function t(n,i,s){var r=e.getValue(s,"mode");var a=e.getValue(s,"auto");var l=e.getValue(n,i+"qDimensions",[]);var u=e.getValue(n,i+"qMeasures",[]);var d=e.getValue(n,i+"qLayoutExclude.qHyperCubeDef.qDimensions",[]);!a&&"byDimension"===r&&l.length?c(s,true,l,d,u,e.getValue(s,"byDimDef.label")):!a&&"byMeasure"===r&&l.length?c(s,false,l,d,u,e.getValue(s,"byMeasureDef.label")):o(l,d)},setColorByPropertyDef:l,resolveColorByPropertyDef:c,clearColorByItem:o};function o(e,n){e.forEach(function(e){r(e,t.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");r(e,t.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")});n.forEach(function(e){r(e,t.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");r(e,t.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")})}function r(e,n,i){if(e[i]){var s=t.getIndexById(e[i],n);s>=0&&e[i].splice(s,1)}else e[i]=[]}function a(t){return t.split(" ").length>1&&"="!==t[0]&&"["!==t[0]?"["+t+"]":t}function l(t,e,n,i){var s=n?"expression":e.type,o=t.mode,r=e.label||e.name||"";u(t,r);switch(s){case"field":o="byDimension";t.byDimDef={label:e.label||a(e.name),key:a(e.name),type:"expression",activeDimensionIndex:e.activeDimensionIndex};break;case"expression":o="byMeasure";t.byMeasureDef={label:n||e.label||e.name,key:n||e.name,type:"expression"};break;case"dimension":o="byDimension";t.byDimDef={label:e.name,key:e.id,type:"libraryItem",activeDimensionIndex:e.activeDimensionIndex};break;case"measure":o="byMeasure";t.byMeasureDef={label:e.name,key:e.id,type:"libraryItem"};break}if(!i){t.auto=false;t.mode=o}}function c(n,i,s,r,a,l){o(s,r);var c=s[s.length-1];if(c){var u=i?e.getValue(n,"byDimDef"):e.getValue(n,"byMeasureDef");if(u){var d=t.create(t.IDMAP.COLOR_BY_ALTERNATIVE);switch(u.type){case"expression":d.label=l||u.label;i?d.qDef=u.key:d.qExpression=u.key;break;case"libraryItem":if(!i){var p=-1;a.forEach(function(t,e){u.key===t.qLibraryId&&(p=e)});d.matchMeasure=p}d.qLibraryId=u.key;d.colorMapRef=u.key;break}if(i){d.qSortBy={qSortByAscii:1};c.qAttributeDimensions.push(d)}else c.qAttributeExpressions.push(d)}}}function u(t,e){if(!e)return;var n="="===e.charAt(0);t.altLabel=n?{qStringExpression:{qExpr:e.substr(1)}}:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(138),n(485),n(105),n(91)],s=function(t,e,n,i,s){t.directive("circleChart",function(){return{scope:{model:"="},restrict:"E",replace:true,template:n,controller:["$scope","$element","$timeout",function(t,n,o){var r=n.find(".circular-bar");t.radius=50;t.arcValue="M50 0 A 50 50, 0, 0, 1, 0 0, L 50 50 z";function a(){if(p()){var e=r.height();var n=r.width();if(e<n){t.radius=e/2;t.svgPos={height:e,width:e,top:0,left:n/2-e/2}}else{t.radius=n/2;t.svgPos={height:n,width:n,top:e/2-n/2,left:0}}}d()}function l(t,e,n,i){var s=(i-90)*Math.PI/180;return{x:t+n*Math.cos(s),y:e+n*Math.sin(s)}}function c(t,e,n,i,s){var o=l(t,e,n,s);var r=l(t,e,n,i);var a=s-i<=180?"0":"1";var c=["M",o.x,o.y,"A",n,n,0,a,0,r.x,r.y].join(" ");return c}function u(t){return 3.6*t}function d(){var n=0;if(t.model.chartValue)n=t.model.chartValue;else if(t.model.numerator&&t.model.denominator){n=0===t.model.denominator?0:t.model.numerator/t.model.denominator;n*=100}if(n>0&&n<1){var i=e.format.number(0,{style:"percent"});t.chartPercentageValue=s.get("CircleChart.ChartPercentageValue.LessThanOne",i)}else t.chartPercentageValue=e.format.number(Math.round(n)/100,{style:"percent"});var o=t.radius;var r=8;var a=0;if(t.model.chartValueSubText){r=-3;a=17}t.percentagePos={x:o,y:o+r};t.subtextPos={x:o,y:o+a};var l=100===n?99.99:n,d=l;d||(d=0);t.arcValue=c(o,o,o-5,0,u(d))}function p(){return r.height()>0||r.width()>0}t.$on(i.Events.EditorDetailsPane.ResizeChart,function(){a()});t.$watch("model",function(){d()});p()?a():o(function(){a()})}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="ds-visualization-circle-chart">\n\t<div class="chart-heading">{{ model.header }}</div>\n\n\t<div class="circular-bar">\n\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" ng-style="svgPos">\n\t\t\t<g class="arcs">\n\t\t\t\t<circle ng-attr-cx="{{radius}}" ng-attr-cy="{{radius}}" ng-attr-r="{{radius}}" class="outer-circle" />\n\t\t\t\t <path ng-attr-d="{{arcValue}}" class="outer-arc" tid="circle-chart-arc1" /> \n\t\t\t\t<circle ng-attr-cx="{{radius}}" ng-attr-cy="{{radius}}" ng-attr-r="{{radius - 10}}" class="inner-circle"  />\n\t\t\t</g>\n\t\t\t<text ng-attr-x="{{percentagePos.x}}" ng-attr-y="{{percentagePos.y}}" class="percentage-label">{{ chartPercentageValue }}</text>\n\t\t\t<text ng-attr-x="{{subtextPos.x}}" ng-attr-y="{{subtextPos.y}}" class="percentage-subtext-label">{{ model.chartValueSubText }}</text>\n\t\t</svg>\n\t</div>\n\n\t<div class="chart-footer">{{ model.footer }}</div>\n</div>\n\n'},,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(99)],s=function(t,e){return{configureTouchSupport:function n(){t(document.body.parentElement).addClass("touch-"+(e.treatAsDesktop()?"off":"on"))}}}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(89),n(330),n(265),n(418),n(331)],s=function(t,e,n,i,s,o,r){var a,l={mode:"S",enabled:true,debouncing:{enabled:true,delay:50},height:250,width:250,maxTotalArea:1e4};a=t.extend("CacheCube",{init:function t(e,n,a,l){this.model=e;this.responseProperty=n;this.options={};this.cubeHeight=0;this.cubeWidth=0;this.setOptions(l||{});this.setPath(a);"K"===this.options.mode?this.cube=new o:"P"===this.options.mode?this.cube=new r:this.cube=new s;this.throttle=new i;var c=this;this.throttle.Send.bind(function(t,e){var n=c._getDirections(c.throttle.recentRequests.map(function(t){return{top:t.data[0].qTop,left:t.data[0].qLeft}}));var i=c._getAreasToCache(t,n.vertical,n.horizontal);c.cacheData(i,t).then(function(t){c.cube?e.resolve(t):e.reject()},function(){e.reject()})});this._modelBinding=function(){c.clear()};this.model.Invalidated.bind(this._modelBinding)},destroy:function t(){this.cube.destroy();this.throttle.destroy();this.model&&this.model.Invalidated&&this.model.Invalidated.unbind(this._modelBinding);this._modelBinding=null;delete this.model;delete this.throttle;delete this.cube},setMethodName:function t(e){this.method=e},setPath:function t(e){this.path=e},setCubeSize:function t(e){this.cubeHeight=e.qcy;this.cubeWidth=e.qcx},setOptions:function t(n){if(!n)return;this.options=e.extend(true,{},l,this.options,n);this.cacheHeight=this.options.height;this.cacheWidth=this.options.width;this.enabled=this.options.enabled||false;this.debouncing={enabled:this.options.debouncing.enabled||false,delay:this.options.debouncing.delay||-1}},clear:function t(){this.cube&&this.cube.clear();this.throttle&&this.throttle.clear()},set:function t(e){this.clear();if(!e||!e.length)return;this.cube.store(e)},cacheData:function t(e,n){var i=function t(e){if(this.cube){this.cube.store(e);return this.cube.get(n)}return e};return"getHyperCubeStackData"===this.method&&this.options.maxStackedValues?this.model[this.method](this.path,e,this.options.maxStackedValues).then(i.bind(this)):this.model[this.method](this.path,e).then(i.bind(this))},getData:function t(e){if(!this.model)return n.reject();if(!this.enabled||!this.cubeHeight||!this.cubeWidth)return this.model[this.method](this.path,e);var i,s,o=[];for(i=0;i<e.length;++i){s=e[i];o.push({qTop:Math.max(Math.floor(s.qTop),0),qLeft:Math.max(s.qLeft,0),qHeight:Math.min(s.qHeight,this.cubeHeight-Math.floor(s.qTop)),qWidth:Math.min(s.qWidth,this.cubeWidth-s.qLeft)})}if(this.cube.contains(o)){this.throttle.updateResolutionTime();return n.resolve(this.cube.get(o))}if(0===o[0].qTop&&this.cube.isEmpty()&&this.throttle.ongoingRequests.length+this.throttle.queuedRequests.length===0){this.throttle.updateResolutionTime();return this.cacheData(o,o)}return this.throttle.queue(o)},_getDirections:function t(e){if(!e||e.length<2)return{vertical:0,horizontal:0};var n=e.slice(-2),i=n[1].top-n[0].top,s=n[1].left-n[0].left;return{vertical:i<0?-1:i>0?1:0,horizontal:s<0?-1:s>0?1:0}},_getAreasToCache:function t(e,n,i){var s,o,r,a,l,c,u,d,p,h=[],f=this.cacheHeight;"undefined"===typeof n&&(n=0);"undefined"===typeof i&&(i=0);this.cacheHeight*this.cacheWidth*e.length>this.options.maxTotalArea&&(f=Math.floor(this.options.maxTotalArea/(e.length*this.cacheWidth)));for(s=0;s<e.length;++s){o=0!==n?Math.floor(.5*Math.max(0,f-e[s].qHeight)):0;r=0!==i?Math.floor(.5*Math.max(0,this.cacheWidth-e[s].qWidth)):0;a=o*n-o;l=r*i-r;c=0!==n?Math.max(0,Math.min(Math.max(e[s].qHeight,f),this.cubeHeight)):e[s].qHeight;u=0!==i?Math.max(0,Math.min(Math.max(e[s].qWidth,this.cacheWidth),this.cubeWidth)):e[s].qWidth;d=Math.max(0,Math.min(e[s].qTop+a,this.cubeHeight-c));p=Math.max(0,Math.min(e[s].qLeft+l,this.cubeWidth-u));h.push({qTop:d,qHeight:c,qLeft:p,qWidth:u})}return h}});return a}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.loadExtension=m;var i=u(n(49));var s=u(n(58));var o=u(n(625));var r=u(n(626));var a=n(59);var l=u(n(103));var c=u(n(13));function u(t){return t&&t.__esModule?t:{default:t}}var d={};function p(t){switch(t){case"auto-chart":return Promise.all([n.e(5),n.e(13),n.e(38)]).then(n.t.bind(null,1163,7));case"barchart":if(i.default.getFlag("BARCHART"))return(0,o.default)(Promise.all([n.e(4),n.e(19),n.e(72)]).then(n.t.bind(null,1164,7)));return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(39)]).then(n.t.bind(null,1165,7));case"boxplot":return Promise.all([n.e(4),n.e(0),n.e(14),n.e(17),n.e(40)]).then(n.t.bind(null,1173,7));case"combochart":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(41)]).then(n.t.bind(null,1175,7));case"container":return Promise.all([n.e(6),n.e(5),n.e(8),n.e(13),n.e(36)]).then(n.t.bind(null,1178,7));case"distributionplot":return Promise.all([n.e(4),n.e(0),n.e(14),n.e(17),n.e(42)]).then(n.t.bind(null,1181,7));case"filterpane":return Promise.all([n.e(8),n.e(43)]).then(n.t.bind(null,1053,7));case"gauge":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(44)]).then(n.t.bind(null,1054,7));case"histogram":return Promise.all([n.e(4),n.e(0),n.e(14),n.e(45)]).then(n.t.bind(null,1182,7));case"kpi":return n.e(47).then(n.t.bind(null,1055,7));case"linechart":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(48)]).then(n.t.bind(null,1183,7));case"listbox":return n.e(49).then(n.t.bind(null,1184,7));case"map":case"map-chart":return b().then(function(){return Promise.all([n.e(4),n.e(6),n.e(5),n.e(74),n.e(50)]).then(n.t.bind(null,1185,7))});case"piechart":return(0,o.default)(Promise.all([n.e(4),n.e(19),n.e(75)]).then(n.t.bind(null,1188,7)));case"pivot-table":return Promise.all([n.e(8),n.e(15),n.e(18),n.e(51)]).then(n.t.bind(null,1057,7));case"scatterplot":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(52)]).then(n.t.bind(null,1189,7));case"table":return Promise.all([n.e(8),n.e(15),n.e(18),n.e(53)]).then(n.t.bind(null,1059,7));case"text-image":return Promise.all([n.e(76),n.e(54)]).then(n.t.bind(null,1060,7));case"treemap":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(55)]).then(n.t.bind(null,1190,7));case"waterfallchart":return Promise.all([n.e(4),n.e(0),n.e(14),n.e(56)]).then(n.t.bind(null,1191,7));case"widget":return Promise.all([n.e(6),n.e(5),n.e(8),n.e(13),n.e(57)]).then(n.t.bind(null,1192,7));default:return n.e(46).then(n.t.bind(null,391,7))}}function h(t,e){e.forEach(function(e){"js/qlik-require-plugin!"===e?console.error("Error in extension '".concat(t,"': Can not use 'js/qlik' in extensions - use 'qlik' instead.")):(0,r.default)(e)&&console.error("Error in extension '".concat(t,"': Can not use internal module '").concat(e,"'."))})}var f=null;function g(t){f||(f=(0,s.default)().then(function(){return(0,a.loadExtensionAMD)()}).then(function(){window.requirejs.config.call(null,{paths:{extensions:"".concat(c.default.rootPath,"extensions"),mapchart:"".concat(n.p,"extensions/qliktech/mapchart"),"_dashboard-bundle":"".concat(n.p,"_dashboard-bundle"),"_visualization-bundle":"".concat(n.p,"_visualization-bundle")}})},function(t){l.default.trackEvent(l.default.customEvents.EXTENSION_LOAD_ERROR,{type:"amd-code-split",message:t&&t.message});throw t}));return f.then(function(){return new Promise(function(e,n){if(d[t]){n(d[t]);return}window.requirejs([t],function(t){t=t.__esModule&&t.default?t.default:t;e(t)},function(e){h(t,e.requireModules);console.error(e);d[t]=e;l.default.trackEvent(l.default.customEvents.EXTENSION_LOAD_ERROR,{type:"3rd-party-requirejs",message:e&&e.message||e});n(e)})})})}function v(t){return g(t).then(function(t){return(0,o.default)(Promise.resolve(t))})}function m(t){return new Promise(function(e,n){var i=t.path;if(t.libraryInfo.isThirdParty&&t.libraryInfo.__next)return v(i).then(e,function(t){l.default.trackEvent(l.default.customEvents.EXTENSION_LOAD_ERROR,{type:"la-vie-code-split",message:t&&t.message||t});n(t)});if(t.libraryInfo.isThirdParty)return g(i).then(e,n);var s=t.typePath||t.type;return p(s).then(function(t){t=t.__esModule&&t.default?t.default:t;e(t)},function(t){l.default.trackEvent(l.default.customEvents.EXTENSION_LOAD_ERROR,{type:"qlik-extension-code-split",message:t&&t.message});n(t)})})}var b=function t(){return g("mapchart/WebMap5")}},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(90),n(282),n(89)],s=function(t,e,n,i){return{createProperties:a,convertProperties:l};function s(t){if("string"===typeof t)t={qDef:{qDef:t}};else if(t.qType){t.qDef=t.qDef||{};t.qDef.cId=e.generateId()}return t}function o(t){if("string"===typeof t)t={qDef:{qFieldDefs:[t]}};else if(t.qType){t.qDef=t.qDef||{};t.qDef.cId=e.generateId()}return t}function r(t){if("string"===typeof t)return 0===t.indexOf("=");if(t.qType)return"measure"===t.qType;return!!(t.qDef&&t.qDef.qDef||t.qSortBy||t.qAttributeExpressions)}function a(a,l,c,u){return i.all([n.getExtensionType(l),n.getInitialProperties(l)]).then(function(n){var l=new i;var d=n[0];var p=n[1];d.mapProperties();var h=d.getCreatePropertyHandler.call(d,a);h.setProperties(p);if(c){var f=c.slice(0);if(p.qListObjectDef){f.forEach(function(t,e){if(0===e){p.qListObjectDef.qDef||(p.qListObjectDef.qDef={});p.qListObjectDef.qDef.qFieldDefs=[t]}else{p.qListObjectDef.qExpressions||(p.qListObjectDef.qExpressions=[]);p.qListObjectDef.qExpressions.push({qDef:{qDef:t}})}});l.resolve(p)}else if(p.qHyperCubeDef||p.boxplotDef){var g=function e(n){var i;var a;var c;var u=true;if(n.length<=0)return l.resolve(p);i=n.shift();if(r(i)){a=s(i);c=t.extend(u,{},a);h.addMeasure(c,void 0,void 0,true).then(function(i){t.extend(u,i,a);e(n)})}else{a=o(i);c=t.extend(u,{},a);h.addDimension(c).then(function(i){t.extend(u,i,a);e(n)})}};g(f)}else l.resolve(p)}else l.resolve(p);return l.promise.then(function(t){u&&e.extend(true,t,u);var n=d.exportProperties&&d.importProperties;if(n){var i=d.importProperties(d.exportProperties({qProperty:t},d.options.hyperCubePath),t,d,d.options.hyperCubePath).qProperty;return i}return t})})}function l(t,s,o,r){var a=t.getEffectiveProperties();var l=n.getExtensionType(s);var c=n.getExtensionType(o);var u=n.getInitialProperties(s);return i.all([a,c,l,u]).then(function(t){var n={qProperty:t[0]};r&&e.extend(true,n.qProperty,r);var i=t[1];var o=t[2];var a=t[3];var l="table"===s&&"function"===typeof i.exportTableProperties?i.exportTableProperties:i.exportProperties;var c=o.importProperties(l(n),a,o).qProperty;c.qInfo&&c.qInfo.qId&&delete c.qInfo.qId;return c})}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89)],s=function(t,e){function n(n){return n?e.resolve(n.enigmaModel):t.getApp()}var i={};i.getCurrentSelections=function(t,e){return n(t).then(function(t){return t.engineApp.getSetAnalysis(e).catch(function(t){t.isHandled=true})})};i.getSelectionsFromBookmarkId=function(t,e,i){return n(t).then(function(t){return t.engineApp.getSetAnalysis(i,e).catch(function(t){t.isHandled=true})})};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(738),n(100),n(739),n(48),n(11),n(349),n(315)],s=function(t,e,n,i,s){var o=e.resolveColor(3),r=e.resolveColor(4),a=["$scope",function(t){t.activeIndex=-1;t.colorSchemeLimits=[];t.animate=false;t.inputFocus=false}];i.directive("qvPaletteCreator",["$timeout",function(l){return{template:n,controller:a,replace:true,scope:{colors:"=",percentage:"=",limits:"=",types:"=",maxColors:"=?"},link:function n(a,c){var u=false,d=c.find(".paletteSlider"),p={min:null,max:null},h={colors:null,types:null,limits:null};if("[object Array]"!==Object.prototype.toString.call(a.colors)||"[object Array]"!==Object.prototype.toString.call(a.limits)||"[object Array]"!==Object.prototype.toString.call(a.types)||0===a.colors.length)throw new Error("Invalid array parameters set for Palette Creator component");a.maxColors=a.maxColors||100;function f(){if(a.limits.some(function(t){return t>=1||t<=0})){var t=1/a.colors.length,e=a.colors.length<10?.1:0;a.limits.forEach(function(n,i){a.limits[i]=e+i*t})}}a.onGradient=function(){l(function(){u=true;t.updateSegments(a,c,p,d);l(function(){u=false})})};a.onEnter=function(e,n){var i=parseFloat(a.segments[e].limit);if(Number.isNaN(+i)){a.segments[e].limit=a.limits[e];return}u=true;a.inputFocus=false;a.animate=true;a.percentage&&(i=Math.max(0,Math.min(i,1)));a.segments[e].limit=i;p=t.updateRange(a,l,c,p,d);t.updateSegments(a,c,p,d);l(function(){u=false});l(function(){a.animate=false},200);n.target.blur()};a.onInputFocus=function(){a.inputFocus=true};a.addLimit=function(n){var i,s;if(a.segments.length+1>=a.maxColors)return;u=true;s=a.colors[a.colors.length-1]===o?r:o;if(0===a.segments.length)i=(p.max-p.min)/2;else if(1===a.segments.length)i=a.segments[0].limit-(a.segments[0].limit-p.min)/2;else{var h=a.segments[a.segments.length-1].limit;var f=a.segments[a.segments.length-2].limit;i=h-(h-f)/2}a.segments.push(new t.SegmentLimit(a,parseFloat(i.toFixed(2)),false));a.colors.push(e.resolveColor(s));p=t.updateRange(a,l,c,p,d);t.updateActiveIndex(a,c,d);t.updateSegments(a,c,p,d);n.preventDefault();l(function(){u=false;v()})};a.removeLimit=function(e){u=true;a.segments.splice(e,1);a.colors.splice(e+1,1);t.updateActiveIndex(a,c,d);p=t.updateRange(a,l,c,p,d);t.updateSegments(a,c,p,d);l(function(){u=false;v()})};a.addDisabled=function(){return!a.segments||a.segments.length+1>=a.maxColors};a.$watch("percentage",function(t,e){if(t!==e){t&&f();v(true)}});a.$watch("colors",function(){v()},true);a.$watch("types",function(){v()},true);a.$watch("limits",function(){v()},true);function g(){var e,n,o;u=true;a.segments=a.limits.map(function(e,n){return new t.SegmentLimit(a,e,a.types[n])});p=t.getRange(a);var r={min:p.min,max:p.max,step:t.getSliderStep(p.max,p.min),values:a.segments.map(function(t){return t.limit}),create:function e(){t.updateSelectedHandle(-1,a.activeIndex,d)},stop:function n(){i.$apply(a,function(){var n,i=a.segments.length;for(n=0;n<i;n++)if(a.activeIndex===n&&a.slide){a.segments[n].limit=a.sliderOptions.values[n];a.slide=false;p=t.updateRange(a,l,c,p,d);break}t.updateOutDataArrays(a,p);e=false;l(function(){u=false})})},slide:function s(r,l){o+=l.values[a.activeIndex]-n;if(e&&Math.abs(n-o)<.05*(p.max-p.min))return false;a.slide=true;i.$apply(a,function(){a.segments[a.activeIndex].limit=a.sliderValues[a.activeIndex];t.updateOutDataArrays(a,p);t.updateArrow(a,c,p.max,p.min)})},change:function t(){return false},start:function r(l,h){u=true;i.$apply(a,function(){var i=0,r=h.handle;if(!r||!s(r).hasClass("ui-slider-handle"))return;while(null!=(r=r.previousSibling))i++;if(i!==a.activeIndex){t.updateActiveIndex(a,c,d,i);e=true;n=a.sliderOptions.values[i];o=n}t.updateArrow(a,c,p.max,p.min)})}};t.updateSliderOptions(a,r);t.updateActiveIndex(a,c,d);t.updateSegments(a,c,p,d);h.colors=a.colors.slice();h.types=a.types.slice();h.limits=a.limits.slice();u=false}function v(t){var e=false;if(u)return;if(!t){e||a.segments.length==a.limits.length||(e=true);e||h.colors.length===a.colors.length&&!h.colors.some(function(t,e){return t!==a.colors[e]})||(e=true);e||h.types.length===a.types.length&&!h.types.some(function(t,e){return t!==a.types[e]})||(e=true);e||h.limits.length===a.limits.length&&!h.limits.some(function(t,e){return t!==a.limits[e]})||(e=true)}(e||t)&&g(false)}g(true)}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(457),n(269),n(217)],s=function(t,e,n,i){function s(i,s){s=s||function(){};t.getApp().then(function(){var t=new n;t.add(i,function(){e.save();s()})})}function o(n,s){s=s||function(){};t.getApp().then(function(t){i.addMeasure(n,t,function(){e.save();s()})})}return{showAddDimensionDialog:s,showAddMeasureDialog:o}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(781)],s=function(t,e,n){e.directive("qvAssetsSearchPanel",function(){return{restrict:"E",replace:true,scope:{query:"=",clearWhen:"=",look:"@"},template:n,link:function e(n,i){n.$watch("rawQuery",function(e){0===t.trim(e).length?""!==n.query&&(n.query=""):n.query=e});n.$watch("clearWhen",function(t){t&&n.onClear()});n.onClear=function(){n.rawQuery=""};var s=i.find("input");s.on("keydown",function(t){if(27===t.which){n.onClear();n.$apply();t.stopPropagation()}else if(13===t.which){t.stopPropagation();s.blur()}})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){var e=["showtitles","title","subtitle","footnote"],n="header",i="data",s="sorting",o="settings",r="settings.";var a={};function l(t){if(t&&0===t.indexOf(r))return t.substring(9);return t}function c(t){if(t&&0!==t.indexOf(r))return r+t;return t}function u(t,e){var n=e.length;var i=0;var s=false;if(t){t.forEach(function(t){if(t.ref&&0===t.ref.indexOf(e)){var o=parseInt(t.ref.substring(n));o>i&&(i=o);a[e]&&o===a[e]+1&&(s=true)}});a[e]&&!s||(a[e]=i)}else a[e]=0;a[e]+=1;return e+a[e]}function d(t,e){t&&t.forEach(function(n,i){n["ref"]===e&&t.splice(i,1)})}function p(t,e){var n=-1;t&&t.some(function(t,i){if(t["ref"]===e){n=i;return true}});return n}function h(t){if(t.settings)return t.settings.sort(function(t,e){if(t.order===e.order)return 0;if(!t.order||t.order<e.order)return-1;return 1});return[]}function f(t,e){if(t.settings)return t.settings.filter(function(t){return(t.parent||o)===e}).sort(function(t,e){if(t.order===e.order)return 0;if(!t.order||t.order<e.order)return-1;return 1});return[]}function g(e){var n=t.extend(true,{},e);n.type=n.type||"string";n.label=n.label||n.ref;n.defaultValue=n.defaultValue||"boolean"!==n.type&&"";"string"!==n.type||n.component||(n.expression=n.expression||"optional");"text"===e.component?delete n.ref:n.ref=c(n.ref);return n}function v(t,e){var n={},i=f(t,e);i.forEach(function(t){n[t.ref]=g(t)});return n}function m(t){q(t,n,{ref:o})}function b(t,e){if(e===n)return true;if(e===i)return!y(t)&&!x(t);if(e===s)return(y(t)||x(t))&&true!==t.sorting;return false}function y(t){return void 0!==t.measures&&(t.measures.max>0||void 0===t.measures.max)}function x(t){return void 0!==t.dimensions&&(t.dimensions.max>0||void 0===t.dimensions.max)}function q(t,e,o){switch(e){case i:t.measures={min:1,max:1};break;case n:t.sections=t.sections||[];var r=o||{};r.type=e;r.ref=r.ref||u(t.sections,e);r.label=r.label||"Settings";t.sections.push(r);break;case s:t.sorting=true;break}}function S(t,e,n){if(e===i){delete t.measures;delete t.dimensions;delete t.sorting;return}if(e===s){delete t.sorting;return}"section-header"===e&&f(t,n).forEach(function(e){_(t,e)});d(t.sections,n)}function w(t,n){if(!n||"q"===n.substr(0,1).toLowerCase())return false;if(e.indexOf(n.toLowerCase())>-1)return false;var i=true;t.settings&&t.settings.forEach(function(t){t.ref===n&&(i=false)});return i}function C(t,e,n){e=e.item||e;t.settings||(t.settings=[]);t.sections||m(t);e.parent&&"general"!==e.parent||(e.parent=o);e.ref=e.ref||u(t.settings,"property");e.label=e.label||e.ref.substr(0,1).toUpperCase()+e.ref.substring(1);n||D(t,e);t.settings.push(e)}function I(t,e,n,i,s){e=e.item||e;e.ref=l(e.ref);var o=e.parent===n;"undefined"===typeof e.order&&(e.order=p(t.settings,e.ref));var r=e.order;e.parent=n;_(t,e,o,s);e.order=i-(e.order<i&&o?1:0);o&&D(t,e,false,r);C(t,e,o)}function _(t,e,n,i){e=e.item||e;d(t.settings,l(e.ref));n||D(t,e,true,null,i)}function D(t,e,n,i,s){var o=f(t,s||e.parent);Number.isNaN(+e.order)||e.order>o.length||e.order<0?e.order=o.length:n||"undefined"===typeof i?n?o.forEach(function(t){t.order>e.order&&t.order--}):o.forEach(function(t){t.order>=e.order&&t.order++}):i<e.order?o.forEach(function(t){t.order>i&&t.order<=e.order&&t.order--}):o.forEach(function(t){t.order>=e.order&&t.order<i&&t.order++})}function k(t){var e={};if(t&&t.properties){x(t.properties)&&(e.dimensions=t.properties.dimensions);y(t.properties)&&(e.measures=t.properties.measures)}return e}function T(t){var e={type:"items",component:"accordion",items:{}};if(t&&t.properties){var n=t.properties;if(y(n)||x(n)){e.items.data={uses:i,items:{measures:{disabledRef:""},dimensions:{disabledRef:""}}};n.sorting&&(e.items.sorting={uses:s})}e.items.settings={uses:"settings",items:{}};(!n.sections||n.sections.length<1)&&n.settings&&n.settings.length>0&&m(n);n.sections&&n.sections.length>0&&n.sections.forEach(function(t){e.items.settings.items[t.ref]={ref:t.ref,type:"items",label:t.label,items:v(n,t.ref)}})}return e}return{addScope:c,stripScope:l,canAddSection:b,addSection:q,removeSection:S,addItem:C,removeItem:_,moveItem:I,getData:k,getDefinition:T,isValidRef:w,getSectionItemsArr:f,getSectionsItemsArr:h}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(10),n(11),n(825),n(48)],s=function(t,e,n,i){var s=["js","css","html","json"];var o=["break","do","instanceof","typeof","case","else","new","var","catch","finally","return","void","continue","for","switch","while","debugger","function","this","with","default","if","throw","delete","in","try","class","enum","extends","super","const","export","import","implements","let","private","public","yield","interface","package","protected","static","null","true","false"];function r(t,e){return(new RegExp(e+"=(.+?)(&|$)").exec(t)||[null,null])[1]}function a(t,e){var n=new RegExp(e+"=(.+?)(&|$)","g"),i=[],s;while(s=n.exec(t))i.push(decodeURIComponent(s[1]));return i}function l(t){document.title=t+" | Dev Hub"}function c(t){var n=[];e.forEach(t,function(t,i){e.isObject(t)&&(t.key=i);n.push(t)});return n}function u(t){if(location.hash){var e=new RegExp(t+"{(.*)}","");var n=location.hash.match(e);return!!(n&&n.length>1)&&decodeURIComponent(n[1])}return false}function d(){return window.location.pathname.substr(0,window.location.pathname.toLowerCase().lastIndexOf("/dev-hub")+1)}function p(t){if(t){var e=window.location.href,n=e.indexOf("#");n>0&&(window.location.hash="")}window.location.reload()}function h(t){return v(t)&&t.indexOf(".")<0}function f(t,e,n){var i=g(e,t);i||(i=n.some(function(e){return g(e.items,t)}));return i}function g(t,e){return t.filter(function(t){return t.id.toLowerCase()===e.toLowerCase()}).length>0}function v(t){return!!(t&&t.length&&t.length>0)&&(/^[.0-9a-zA-Z_-]+$/.test(t)&&!/^\./.test(t))}function m(t){var e=/^[$A-Z_][0-9A-Z_$]*$/i;return e.test(t)&&-1===o.indexOf(t)}function b(t){var e=/^[$A-Z_][0-9A-Z_$]*$/i;return e.test(t)}function y(t){return-1!==o.indexOf(t)}function x(e,n,i){return i?t.isInteger(e)&&t.isInteger(n)&&e>=0&&n>=0&&n>=e:t.isInteger(e)&&t.isInteger(n)&&n>=e}function q(t){if(!t)return false;var e=t.lastIndexOf(".");if(e<0)return false;return s.indexOf(t.substr(t.lastIndexOf(".")+1).toLowerCase())>-1}function S(t){var e=/^[a-z]+[a-zA-Z0-9]*\b/g;return e.test(t)}function w(t){var e=/[^A-Z0-9]/i;return e.test(t)}function C(t){return t.substr(t.lastIndexOf(".")+1).toLowerCase()}function I(t){return t.substr(0,t.lastIndexOf("."))}function _(t){return t.replace(/[^a-z0-9]/gi,"-").toLowerCase()}function D(t){var e="";for(var n=0;n<t.length-1;n++)e+="."+t[n]+", ";e+="."+t[t.length-1];return e}var k,T;function E(){if(!T){T=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;n.fn.mutation=function(t,e,n){if(T){e=e||{subtree:false,attributes:true};k=new T(function(e){e.forEach(function(e){n?n(e,t):t(e.target,e.attributeName,e)})});return this.each(function(){k.observe(this,e)})}}}}function A(){var t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return("x"===e?n:3&n|8).toString(16)})}function L(t,e,n){function i(t){t.debounceTimer&&clearTimeout(t.debounceTimer);t.debounceTimer=null}return function(){var s=this,o=arguments,r;i(n);r=setTimeout(function(){t.apply(s,o)},e);n.debounceTimer=r}}return{getURLParameter:r,getURLParameters:a,setBrowserTitle:l,getHashParameter:u,getPrefix:d,reload:p,isInteger:function e(n){return t.isInteger(n)},extend:function t(){return e.extend.apply(null,arguments)},deepCopy:function t(){return e.copy.apply(null,arguments)},isValidExtensionName:h,isExistingExtensionName:f,isValidName:v,isValidFunctionName:m,isJsReservedWord:y,isValidSyntax:b,isValidInterval:x,isValidCamelCase:S,hasInvalidCharacters:w,sanitizeFileName:_,hasValidFileExtension:q,getFileExtension:C,getFileName:I,fileExtensionArrayToString:D,objectToArray:c,addMutationObserver:E,generateId:A,debounce:L,conversions:i,__onlytest__:{_isIdInList:g}}}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(91),n(94),n(969),n(207),n(99),n(97),n(133),n(236),n(509),n(192),n(287),n(510),n(274)],s=function(t,e,n,i,s,o,r,a,l,c,u,d){function p(t){return{odagLinkItem:function e(n){var s=n.item.getDropOption();var o={insertBeforeItem:t,title:s.args.init.linkRef.name,odagLinkRefID:s.args.init.linkRef.id};var r=i.model;l.addODAGNavPoint(r,o)}}}function h(e,n){function i(t,e,n){var i=p(e);var s={targetRect:n,drawRect:n,drop:i,dropShadePercentage:10};t.registerDropRect(s)}var s;var o={accept:{odagLinkItem:function t(){return true}},end:function t(){n.removeClass(s);e.dragging=false},start:function o(r){e.dragging=true;var a;try{a=n[0].getBoundingClientRect()}catch(t){return}var l={left:a.left+2,right:a.right-2,top:a.top+2,bottom:a.bottom-2};s="odagLinkItem"===r.info.type?"dragging library-dragging":"dragging";n.addClass(s);var c=n.find(".dropArea");for(var u=0;u<c.length;u++){var d=t(c[u]);var p=d[0].getBoundingClientRect();var h={left:p.left+2,right:p.right-2,top:p.top+2,bottom:p.bottom-2};var f=null;var g=e.odagNavPoints;u<g.items.length&&(f=g.items[u]);i(r,f,h)}var v=n.find(".odag-nav-point-cell:last");var m={left:0,right:0,top:0,bottom:0};var b=l.left;if(v.length){m=v[0].getBoundingClientRect();b=m.right}var y={left:b,top:l.top,right:l.right,bottom:l.bottom};i(r,null,y)}};c.registerDropTarget(o);e.$on("$destroy",function(){c.unregisterDropTarget(o)})}var f={template:s,restrict:"E",scope:{model:"=",inEditMode:"=",standAlone:"="},link:function t(e,n){h(e,n)},controller:["$scope","$timeout","$element","qvSheetService",function(t,e,s,c){t.sortableNavPoints=null;var p=t.standAlone?null:c;t.odagToolbarService=new u(p);t.dragging=false;t.waterMarkText="";var h=null;l.isODAGAvailable(t.model.app).then(function(e){e&&d.getList().then(function(e){e.layout&&e.layout.qAppObjectList&&e.layout.qAppObjectList.qItems.length>0&&l.getODAGLinks(t.model.app)})});t.sortableNavPoints=o.create({options:{direction:"horizontal",listKey:"list",listSelector:".list",itemKey:"item",itemSelector:".drag-odag-navpoint",itemDragSelector:".drag-odag-navpoint",gesture:{name:"swipe",options:{radiusThreshold:r.treatAsDesktop()?4:0,preventDefault:false}}},allowDrag:function e(){var e=this._super.apply(this,arguments);return e&&t.inEditMode},addPlaceholder:function t(){this._super.apply(this,arguments)},onBegin:function t(e){this._super.apply(this,arguments);h=e;h.classList=["reordering"];var n=s.find(".list");n.css("height",n.innerHeight())},removePlaceholder:function t(){this._super.apply(this,arguments);var e=s.find(".list");e.css("height","");h.classList=""},onMove:function e(){this._super.apply(this,arguments);var n=t.odagNavPoints.get().map(function(t){return t.data});var s=i.model;l.reorderNavPoints(s,n)}});t.odagNavPoints=t.sortableNavPoints.createList(1,{tid:"odagNavPoints"});t.$watchCollection("odagToolbarService.getOdagNavPoints()",function(n){t.odagNavPoints.reset();for(var i=0;i<n.length;i++)t.odagNavPoints.addSortableItem(n[i]);e(function(){t.$broadcast("refreshPager")})});t.$watch("model.sheetId",function(e){t.odagToolbarService.sheetChanged(e)});t.$watch("dragging",function(e){t.waterMarkText=e?n.get("odag.toolbar.help.dragging"):n.get("odag.toolbar.help.watermark")});t.odagToolbarService.init(t.model.app,t.model.openAppCallback).then(function(){t.waterMarkText=n.get("odag.toolbar.help.watermark")});a.on("end",function(){t.refreshPager(false)});t.$on("$destroy",function(){t.odagToolbarService.destroy()})}]};e.directive("qvOdagToolbar",function(){return f});return f}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(49),n(970),n(131),n(120),n(375),n(133),n(192),n(219)],s=function(t,e,n,i,s,o,r,a,l){function c(t){this.qvSheetService=t;this.currentApp=null;this.currentSheet=null;this.odagNavPoints=null;this.appLinkModelList=null;this.openAppCallback=null}c.prototype.init=function(t,e){var n=this;this.odagNavPoints=[];this.currentApp=t;this.openAppCallback=e;return a.getList(t).then(function(t){n.appLinkModelList=t;return t.getLayout().then(function(){n.updateNavPoints();t.Invalidated.bind(n.updateNavPoints.bind(n))})})};c.prototype.sheetChanged=function(t){var e=this;this.currentSheet&&this.currentSheet.Invalidated.unbind(this.updateNavPoints);t&&s.get(t,this.currentApp).then(function(t){e.currentSheet=t;if(e.currentSheet){e.updateNavPoints();e.currentSheet.Invalidated.bind(e.updateNavPoints.bind(e))}})};c.prototype.getODAGLinkInfo=function(n){var i=new t;if(n._cachedLinkProps)i.resolve(n._cachedLinkProps);else if(n.data.odagLinkRefID)l.getList(n.model.parent.app).then(function(t){if(t.filter(function(t){return t.properties.data.id===n.data.odagLinkRefID}).length>0)r.loadODAGLink(n.model.parent.app,n.data.odagLinkRefID).then(function(t){var s=e.getFlag("ODAG_SAAS_ENABLED")?t:t.objectDef;if(!t||"decommissioned"!==s){n.invalid=false;n.maxNumberOfApps=s.properties.genAppLimit[0].limit;n.maxRowExpressionCount=s.properties.rowEstRange[0].highBound;n._cachedLinkProps=s;return i.resolve(s)}n.invalid=true;i.resolve(null)},function t(){n.invalid=true;i.resolve(null)});else{n.invalid=true;i.resolve(null)}});else{n.invalid=true;i.resolve(null)}return i.promise};c.prototype.createODAGNavPointsList=function(e){var s=i.selectedObject?i.selectedObject:null;var a=null;var l=this;if(void 0!==e){this.odagNavPoints.splice(0,this.odagNavPoints.length);e.forEach(function(e){var c={id:e.info.id,type:"ODAGNavPoint",object:{isInvalid:true},data:e,openAppCallback:l.openAppCallback,model:null,maxRowExpressionCount:null,maxNumberOfApps:null,_cachedLinkProps:null,invalid:false,initialized:null};var u={parent:l.currentSheet,properties:e};c.model=new n(u);c.getLoadedLinkInfo=l.getODAGLinkInfo;c.getCurrentCountSessionObjectForLink=function(){return this.getLoadedLinkInfo(c).then(function(e){return e?r.getOrCreateSessionObjectsForLink(l.currentApp,e).then(function(t){return t}):t.resolve(null)})};l.odagNavPoints.push(c);if(s&&s.id===e.info.id&&!r.addingNewNavPointID[l.currentSheet.id]){a=c;i.setSelectedObject(o.createSelectedObjFromNavPoint(c))}});if(r.addingNewNavPointID[this.currentSheet.id]){var c=this.odagNavPoints.filter(function(t){return t.data.info.id===r.addingNewNavPointID[l.currentSheet.id]});if(c.length){i.setSelectedObject(o.createSelectedObjFromNavPoint(c[0]));a=c[0]}r.addingNewNavPointID[this.currentSheet.id]=null}this.qvSheetService&&s&&"ODAGNavPoint"===s.type&&!a&&this.qvSheetService.setSheetAsSelectedObj()}};c.prototype.updateNavPoints=function(){var t=this;if(this.currentApp&&this.currentSheet)return r.clearCachedSessionObjects(this.currentApp).then(function(){t.currentSheet.getNavPoints().then(function(e){t.createODAGNavPointsList(e)})})};c.prototype.hasODAGNavPoints=function(){return this.odagNavPoints.length>0};c.prototype.destroy=function(){this.odagNavPoints=[];this.appLinkModelList.Invalidated.unbind(this.updateNavPoints);this.currentSheet.Invalidated.unbind(this.updateNavPoints)};c.prototype.getOdagNavPoints=function(){return this.odagNavPoints};return c}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(131),n(135),n(972),n(97),n(973),n(90),n(375),n(274),n(980)],s=function(t,e,n,i,s,o,r,a,l){var c={template:s,restrict:"E",replace:true,scope:{inEditMode:"=",inMobileMode:"=",item:"="},controller:["$scope","$timeout","$element","luiPopover",function(t,s,c,u){t.popover=null;t.stageState=n;t.$watch("stageState.selectedObject",function(e){t.selObject=e});var d=null;t.rowCountPercentage=0;function p(){if(t.popover){t.popover.close();return}var e={item:t.item};if(e.item.openAppCallback){var n=e.item.openAppCallback;e.item.openAppCallback=function(e,i){t.popover.close();n(e,i)}}var i=r;var s={input:e,dock:"top",alignTo:c[0],closeOnResize:true};i=a.extend(true,s,i);t.popover=u.show(i);t.popover.closed.then(function(){t.popover=null})}function h(){t.popover&&t.popover.close();return}function f(){var n=new e;if(d){var o=t.item;d.getLayout().then(function(e){o.actualRowEst=e.MaxRowCountExpression;i.isSuffixInUse("noData")&&(o.actualRowEst="NaN");var n=o.maxRowExpressionCount;var r=100*Math.min(n/o.actualRowEst,1);if(r>=100)if(100!==t.rowCountPercentage){t.rowCountPercentage=99;s(function(){t.rowCountPercentage=100;o.rowCountPercentage=100;o.rowCountPercentageNumber=100},300)}else o.rowCountPercentage=100;else{o.rowCountPercentage=r;t.rowCountPercentage=r}"number"===typeof o.rowCountPercentage&&Number.isNaN(+o.rowCountPercentage)?o.rowCountPercentageNumber=-1:o.rowCountPercentageNumber=o.rowCountPercentage}).finally(function(){n.resolve()})}else n.reject();return n.promise}function g(){t.item.getCurrentCountSessionObjectForLink().then(function(e){d=e;d&&d.Invalidated.bind(f);f().finally(function(){t.item.initialized.resolve()})})}t.$watchCollection("item",function(t,n){if(null!==n&&null===t.initialized){t.initialized=new e;g()}});o.on("end",h);t.onODAGNavPointClicked=function(e){if(t.inMobileMode)return;t.inEditMode?n.setSelectedObject(l.createSelectedObjFromNavPoint(e)):t.item.invalid||p(e)};t.deleteInvalidNavPoint=function(t,e){e.model.removeObject()};s(function(){t.$broadcast("refreshPager")});t.$on("$destroy",function(){d&&d.Invalidated.unbind(f)})}]};t.directive("qvOdagToolbarNavpoint",function(){return c});return c}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(90),n(89),n(93),n(49)],s=function(t,e,n,i){var s={};var o={};var r={qInfo:{qType:"appprops"},sheetTitleBgColor:"",sheetTitleGradientColor:"",sheetTitleColor:"",sheetLogoThumbnail:{qStaticContentUrlDef:null},sheetLogoPosition:"",rtl:false,theme:"sense"};var a={qInfo:{qId:"AppPropsList",qType:"AppPropsList"},qAppObjectListDef:{qType:"appprops",qData:{sheetTitleBgColor:"/sheetTitleBgColor",sheetTitleGradientColor:"/sheetTitleGradientColor",sheetTitleColor:"/sheetTitleColor",sheetLogoThumbnail:"/sheetLogoThumbnail",sheetLogoPosition:"/sheetLogoPosition",rtl:"/rtl",theme:"/theme"}}};function l(t){return t.getProperties().then(function(e){return t.global.engineVersion().then(function(t){return e.qSavedInProductVersion===t.qComponentVersion&&!e.qLastReloadTime})})}function c(t){return t?e.resolve(t):n.getApp()}o.create=function(e,n){return c(n).then(function(n){if(i.getFlag("THEME_CARDS"))return l(n).then(function(i){var s=i?{theme:"card"}:{};var o=t.extend(true,{},r,s,e);return n.createObject(o)});var s=t.extend(true,{},r,e);return n.createObject(s)})};o.get=function(t,e){return c(e).then(function(e){return e.getObject(t)})};o.getList=function(t){return c(t).then(function(t){return s[t.id]=s[t.id]||t.getListObject(a)})};return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(89),n(91),n(600),n(601),n(602)],s=function(t,e,n,i,s,o){var r;var a=20;var l="Invalid theme id";var c={DEFAULT:"default",QRS:"qrs",RLS:"rls"};var u=t.extend("ThemeLoader",{init:function t(e){this._cachedThemes=null;this.config=e;this.providers={default:i,qrs:s,rls:o};this.THEME_TYPE=c;this.ERROR_THEME_ID=l},getAvailableThemes:function t(){var n=this,i=new e,s=[],o=Object.keys(this.providers),r={default:[],custom:[]};if(this._cachedThemes)return e.resolve(this._cachedThemes);if(!this.config||!this.config.providers)return e.resolve(r);o.forEach(function(t){n.config.providers[t]&&s.push(n.providers[t].getThemeLists())});e.all(s).then(function(t){t.forEach(function(t){r.default=r.default.concat(t.default);r.custom=r.custom.concat(t.custom)});n._sortAlphabetically(r.custom);n._cachedThemes=r;i.resolve(r)});return i.promise},getCustomThemesPage:function t(n){var i,s=this,o;if(r&&r<n)return e.resolve([]);i=new e;this.getAvailableThemes().then(function(t){o=s._getPageFromList(n,t.custom,a);i.resolve(o)});return i.promise},getType:function t(n){var i=this,s=new e;this.getAvailableThemes().then(function(t){var e=Object.keys(t),o,r,a,c=null;while(!c){for(r=0;r<e.length;r++){o=e[r];a=i._getThemeTypeInList(t[o],n);if(a){c=a;break}}break}c?s.resolve(c):s.reject(l)});return s.promise},getRawJson:function t(n){var i=this;if(!n)return e.reject(l);return this.getType(n).then(function(t){return i.providers[t].loadJson(n)}).catch(function(t){return e.reject(t)})},getThemePath:function t(n){var i=this;if(!n)return e.reject(l);return this.getType(n).then(function(t){return i.providers[t].getResourcePath(n)})},getResourceUrlParams:function t(n){var i=this;if(!n)return e.reject(l);return this.getType(n).then(function(t){return i.providers[t].getResourceUrlParams()})},getPagesTotal:function t(){var n=this,i=new e;if(r)return e.resolve(r);this.getAvailableThemes().then(function(t){r=n._calculateNbrOfPages(t.custom,a);i.resolve(r)});return i.promise},_sortAlphabetically:function t(e){return e.sort(function t(e,i){var s="pseudo"===n.language?"en-US":n.language;return e.name.localeCompare(i.name,s)})},_getThemeTypeInList:function t(e,n){var i=null;if(e)for(var s=0;s<e.length;s++)if(e[s].id===n){i=e[s].type;break}return i},_getPageFromList:function t(e,n,i){var s=e||e>0?e:0;var o=s*i;var r=(s+1)*i;n.length<r&&(r=n.length);return n.slice(o,r)},_calculateNbrOfPages:function t(e,n){return Math.ceil(e.length/n)}});return u}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(91),n(89),n(260)],s=function(t,e,i){var s={};var o=n.p+"assets/external/sense-themes-default/default-themes.json";var r=n.p+"assets/external/sense-themes-default/";function a(){return i.getJson(o).then(function(t){return s._resolveDefaultConfiguration(t)})}function l(t){return c(t).then(function(t){var e=s._getJsonPath(t);return i.getJson(e)})}function c(t){return e.resolve(r+encodeURIComponent(t))}function u(){return""}s._resolveDefaultConfiguration=function(t){var n=new e;s._waitForTranslator().then(function(){var e={default:t.default,custom:[]};s._translateNames(e.default);s._setType(e.default);n.resolve(e)});return n.promise};s._waitForTranslator=function(){return t.ready};s._getJsonPath=function(t){return t+"/theme.json"};s._translateNames=function(e){e.forEach(function(e){e.name=t.get(e.name)})};s._setType=function(t){t.forEach(function(t){t.type="default"})};s.getThemeLists=a;s.loadJson=l;s.getResourcePath=c;s.getResourceUrlParams=u;return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(13),n(89),n(260)],s=function(t,e,n,i){var s={};function o(){var t=new n;var e={default:[],custom:[]};s._getExtensionsFromQrs().then(function(n){for(var i in n)s._isThemeExtension(n,i)&&e.custom.push({id:i,name:n[i]["name"],type:"qrs"});t.resolve(e)},function(){t.resolve(e)});return t.promise}function r(t){return a(t).then(function(t){var e=s._getJsonPath(t);return i.getJson(e)})}function a(t){var i=e.rootPath+"extensions/"+encodeURIComponent(t);return n.resolve(i)}function l(){return""}s._getExtensionsFromQrs=function(){return t.getService("$contentApi").getExtensions()};s._isThemeExtension=function(t,e){return t.hasOwnProperty(e)&&t[e]["type"]&&"theme"===t[e]["type"]};s._getJsonPath=function(t){return t+"/theme.json"};s.getThemeLists=o;s.loadJson=r;s.getResourcePath=a;s.getResourceUrlParams=l;return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(261),n(89),n(260)],s=function(t,e,n){var i={};function s(){var t=this,n=new e,s,o={default:[],custom:[]};i._getThemesFromRls().then(function(e){for(var i in e){var r=e[i];if(r.attributes){if(r.attributes.qext_filename&&r.attributes.name&&r.id){s=o[t._getListForSupplier(r.attributes.supplier)];s.push({id:r.attributes.qext_filename,name:r.attributes.name,rlsId:r.id,type:"rls"})}}else if(r.qextFilename&&r.name&&r.id){s=o[t._getListForSupplier(r.supplier)];s.push({id:r.qextFilename,name:r.name,rlsId:r.id,type:"rls"})}}n.resolve(o)},function(){n.resolve(o)});return n.promise}function o(t){return r(t).then(function(t){var e=i._getJsonPath(t);return n.getJson(e)})}function r(t){var n=new e;i.getThemeLists().then(function(e){var s=i._getResourcePathForList(e.default,t);if(s){n.resolve(s);return}s=i._getResourcePathForList(e.custom,t);if(s){n.resolve(s);return}n.resolve(null)});return n.promise}function a(){return t.getTenantIdUrlParameter()}i._getResourcePathForList=function(t,e){var n;t.forEach(function(t){t.id===e&&(n="/api/v1/themes/"+t.rlsId+"/file")});return n};i._getJsonPath=function(t){return t+"/theme.json"+a()};i._getThemesFromRls=function(){return t.getCloudThemes()};i._getListForSupplier=function(t){return t&&"qlik"===t.toLowerCase()?"default":"custom"};i.getThemeLists=s;i.loadJson=o;i.getResourcePath=r;i.getResourceUrlParams=a;return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(11),n(90),n(604)],s=function(t,e,n){var i=["palette","colorSchemes.qualitativeScales","colorSchemes.ordinalScales","scales","palettes.data","palettes.ui"];function s(t,e){for(var n in t)"object"===o(t[n])&&null!==t[n]?s(t[n],e):"string"===typeof t[n]&&"@"===t[n].charAt(0)&&(t[n]=e[t[n]])}function r(t){n.generateScales(t)}function a(t,e){var i;if(t){i=n.validatePalettesOrScales(t);i&&i.length&&i.forEach(function(t){console.warn("Theme parsing error, scale declaration: "+t)})}if(e){i=n.validatePalettesOrScales(e,true);i&&i.length&&i.forEach(function(t){console.warn("Theme parsing error, scale declaration: "+t)})}}function l(t){t.forEach(function(t){if(t.colors)for(var e=0;e<t.colors.length;e++)t.colors[e]&&(t.colors[e]=t.colors[e].toLowerCase())})}var c={};c.injectStyleNode=function(t,e,n){var i=document.createElement("link");var s=n||"";i.setAttribute("rel","stylesheet");i.setAttribute("href",t+"/"+e+s);document.head.appendChild(i);return i};c.injectExtraStyleNodes=function(t,e,n){var i=[];t.customStyles&&t.customStyles.length&&t.customStyles.forEach(function(t){if(t.cssRef&&t.cssRef.length&&"css"===t.cssRef.split(".").pop()){i.push({node:c.injectStyleNode(e,t.cssRef,n),cssClass:t.classRef});t.classRef&&t.classRef.length&&c.toggleCssClass(t.classRef,true)}});return i};c.toggleCssClass=function(e,n){e&&e.length&&t("body").toggleClass(e,n)};c.parseTheme=function(t,n,o){var u={};s(t,t._variables);s(n,n._variables);false===t._inherit?e.extend(true,u,t):e.extend(true,u,n,t);o&&i.forEach(function(n){var i=e.getValue(t,n);void 0!==i&&e.setValue(u,n,i)});u.scales&&r(u.scales);u.palettes&&u.palettes.ui&&l(u.palettes.ui);a(u.scales,u.palettes?u.palettes.data:null);c.toggleCssClass("qv-card",true===t._cards);return u};return c}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(395),n(109)],s=function(t,e){function n(t,e,n){var i=.25+(e+1)/n*.25;var s=.5-i;var o=.5+i;var r=o-s;return s+t/1*r}function i(e,n){var i=[],s=new t;i.push(e[0]);n||i.push(e[0]);var o=1;for(;o<e.length-1;o++){i.push(e[o]);i.push(e[o])}i.push(e[o]);n||i.push(e[o]);for(var r=0;r<i.length;r+=2)s.addColorPart(i[r],i[r+1]);return s}function s(t,i,s){var o=[];for(var r=0;r<i+1;r++){var a;switch(i){case 0:a=t.getColor(.5);break;default:var l=n(1/i*r,i,s);a=t.getColor(l);break}o.push(new e(a).toHex())}return o}function o(t,e,n){var o=i(t,true);var r=s(o,e-1,e);var a=i(r,n);var l=[null];for(var c=0;c<e;c++)l.push(s(a,c,e));return l}function r(t){t.forEach(function(t){if("class"===t.type){var e=o(t.scale,Math.max(t.scale.length,7),false);t.scale=e;t.type="class-pyramid"}})}function a(t,e){var n={};var i=[];t.forEach(function(t,s){e?-1===["pyramid","row"].indexOf(t.type)&&i.push("Improper type for data palette: "+t.name):-1===["class","class-pyramid","gradient"].indexOf(t.type)&&i.push("Improper type for data scale: "+t.name);-1!==["pyramid","class-pyramid"].indexOf(t.type)?Array.isArray(t.scale)&&Array.isArray(t.scale[t.scale.length-1])&&"string"===typeof t.scale[t.scale.length-1][0]||i.push("Improper scale structure for: "+t.name):Array.isArray(t.scale)&&"string"===typeof t.scale[0]||i.push("Improper scale structure for: "+t.name);t.propertyValue||(t.propertyValue="scale"+s);n[t.propertyValue]?i.push("Duplicate property values for: "+t.name):n[t.propertyValue]=true});return i}return{createPyramidFromColors:o,generateScales:r,validatePalettesOrScales:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkgrey:{r:169,g:169,b:169},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},grey:{r:128,g:128,b:128},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightgrey:{r:211,g:211,b:211},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},transparent:{r:255,g:255,b:255,a:0},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};return t}.apply(e,i),void 0!==s&&(t.exports=s))},,,function(t,e){t.exports='<div ng-show="internalShow" class="qv-animate spinner ng-hide" ng-class="{\'center-in-parent\': centerInParent}" ng-style="{\'width\': spinnerWidth, \'height\': spinnerHeight }">\n\t<div class="qv-loader"></div>\n</div>\n'},,,,function(t,e){t.exports='<lui-tooltip ng-style="style">\n\t{{item}}\n</lui-tooltip>'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(10),n(48),n(89),n(94),n(181),n(50),n(99),n(131),n(95),n(123),n(114),n(311),n(382),n(49),n(309),n(442),n(267),n(287)],s=function(t,e,i,s,o,r,a,l,c,u,d,p,h,f,g,v){var m=e.injector(["ng"]);var b=m.get("$cacheFactory");var y=b("pp-object");var x=2;function q(t,e){var n={id:e.id,type:"gridCell",customObject:e,canCopy:function t(){return!e.object.isInvalid},copy:function t(){u.publish("/activeSheet/copyObject",e)},canCut:function t(){return!e.object.isInvalid},cut:function t(){u.publish("/activeSheet/cutObject",e)},paste:function t(){u.publish("/activeSheet/pasteObject",e)},canRemove:function t(){return true},remove:function n(){t.gridService.removeCell(e)},getAllPropertyPanelContent:function t(){var n=null;return e.getVisualization().then(function(t){n=t.model.id;return t.getPropertyPanelContent().then(function(e){var i=e.type;var o=e.app;return s.all({appLayout:o.getLayout(),properties:t.model.getProperties(),layout:t.model.getLayout()}).then(function(r){if(n!==r.properties.qInfo.qId)return s.resolve(null);return{definition:e.definition,globalChangeListeners:e.globalChangeListeners,type:i.type,ext:e.ext,handler:e.handler,iconName:e.iconName,titleRef:e.titleRef,properties:r.properties,layout:r.layout,localeInfo:r.appLayout.qLocaleInfo,app:o,model:t.model,cache:y}})})})}};return n}function S(t,e){var n=e?1:x;return{width:"calc( "+t.width+"% - "+2*n+"px )",height:"calc( "+t.height+"% - "+2*n+"px )",left:"calc( "+t.x+"% + "+n+"px )",top:"calc( "+t.y+"% + "+n+"px )"}}function w(t){t.getVisualization().then(function(e){e.getPreferredSize().then(function(e){e&&a.isSmallDevice&&(t.style={width:e.w+"px",height:e.h+"px"})})})}function C(t,e,n){var i=100;var s=100;var o=i/e;var r=s/n;t.rectFor=function t(e){if(e.bounds)return{left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height,margin:x};var n=e.colspan*o;var i=e.rowspan*r;var s=e.col*o;var a=e.row*r;return{left:s,top:a,width:n,height:i,margin:x}};var a=[];var l=[];var c;for(c=0;c<e-1;++c){var u=(c+1)*o;l.push({left:u+"%"})}for(c=0;c<n-1;++c){var d=(c+1)*r;a.push({top:d+"%"})}t.cols=e;t.rows=n;t.horizontalLines=a;t.verticalLines=l}function I(e,n){var i=n.layoutOptions||{};e.sheetSize={};v.updatePermissionStyle(e);e.zoomCell||a.isSmallDevice&&!e.mobileGrid||(i.sheetMode&&"RESPONSIVE"!==i.sheetMode||!n.height?"CUSTOM"===i.sheetMode&&(e.sheetSize=v.getCustomSheetSize(n,t("#grid-wrap").height())):e.sheetSize=v.getExtendedSheetSize(n,o.isInEditMode()))}function _(t,e){var n=e.qInfo.qId!==t.lastSheetId;var i=!n&&o.isInEditMode()&&!t.zoomCell&&e.permissions.update;t.lastSheetId=e.qInfo.qId;t.hasUpdatePermission=e.permissions.update;t.isSheet=true;t.isMaster=false;t.sheetTitle=e.labelExpression||e.qMeta&&e.qMeta.title||"";t.sheetId=e.qInfo&&e.qInfo.qId||"";t.isDraft=e.qMeta&&e.qMeta.sourceObject&&e.qMeta.sourceObject.length;t.isDraftOwner=e.qMeta&&e.qMeta.draftObject&&e.qMeta.draftObject.length;var s=t.layout.layoutOptions;t.extend=t.hasUpdatePermission&&s&&s.extendable&&"CUSTOM"!==s.sheetMode;var r=s&&s.mobileLayout;t.mobileGrid=g.getFlag("MOBILE_GRID")&&"GRID"===r&&!(s&&"CUSTOM"===s.sheetMode);var a,l;a=t.cols;l=t.rows;I(t,e);!n&&t.hasUpdatePermission||t.clearActiveCell();n&&(t.cells=[]);C(t,a,l);k(t,e.cells.slice(),i)}function D(e,s,r){return{active:false,visible:false,items:[{translation:"contextMenu.showDetails",tid:"nav-menu-info",cssClasses:"lui-icon lui-icon--info",dynamicCssClasses:function t(){var e=[];s.zoomCell?e.push("big"):e.push("border","white");return e.join(" ")},isVisible:function t(){return r.object&&(l.treatAsDesktop()||s.zoomCell)&&!o.isInEditMode()&&!r.object.isInvalid&&r.object.supportObjectInfo()},action:function t(){i.getService("objectInfoCard").show(r.object)}},{translation:"Visualization.Unlink",tid:"nav-menu-link",cssClasses:"lui-icon lui-icon--link",dynamicCssClasses:function t(){var e=[];s.zoomCell?e.push("big"):e.push("border","white");return e.join(" ")},isVisible:function t(){return r.object&&(l.treatAsDesktop()||s.zoomCell)&&r.object.isLink&&o.isInEditMode()},action:function t(){r.getVisualization().then(function(t){var e=n(387);e.showBreakLinkDialog(t.model)})}},{translation:"Tooltip.EditObject",tid:"nav-menu-edit",cssClasses:"lui-icon lui-icon--edit",dynamicCssClasses:function t(){var e=[];s.zoomCell?e.push("big"):e.push("border","white");return e.join(" ")},isVisible:function t(){if(!g.getFlag("SSA_IN_EDIT"))return false;var e=s.activeCell&&s.activeCell.id===r.id;return r.object&&(l.treatAsDesktop()||s.zoomCell)&&o.isInEditMode()&&!e},action:function t(e){s.toggleActive(r);e&&e.stopPropagation()}},{translation:"Tooltip.StopEdit",tid:"nav-menu-stop-edit",cssClasses:"lui-icon lui-icon--tick green",dynamicCssClasses:function t(){var e=[];s.zoomCell?e.push("big"):e.push("border","white");return e.join(" ")},isVisible:function t(){if(!g.getFlag("SSA_IN_EDIT"))return false;var e=s.activeCell&&s.activeCell.id===r.id;return e&&o.isInEditMode()},action:function t(e){s.toggleActive(null);c.resetPropertyPanelToggle();e&&e.stopPropagation()}},{translation:"contextMenu.takeSnapshot",tid:"nav-menu-snapshot",cssClasses:"lui-icon lui-icon--camera",dynamicCssClasses:function t(){var e=[];s.zoomCell?e.push("big"):e.push("border","white");r.snapshot.dialogOpen&&e.push("blue");return e.join(" ")},isVisible:function t(){return r.object&&(l.treatAsDesktop()||s.zoomCell)&&!r.object.isInvalid&&!s.zooming&&!o.isInEditMode()&&r.object.supportSnapshot()&&e.permissions.createSnapshot||r.snapshot.isAnnotating},action:function t(){if(r.snapshot.snapshotTimer)return;r.snapshot.snapshotTimer=setTimeout(function(){r.snapshot.snapshotTimer=null},1e3);var e=true;if(r.snapshot.isAnnotating)return;if(s.zoomCell&&r.showExploreMenu){r.toggleExploreMenu();r.object.resize();r.snapshot.take(e)}else s.zoomCell?r.snapshot.take(e,true):r.snapshot.take(e)}},{translation:"Tooltip.ExplorationMenu",tid:"nav-menu-explore",cssClasses:"lui-icon lui-icon--control",dynamicCssClasses:function t(){var e=[];r.object&&r.showExploreMenu&&e.push("active");s.zoomCell?e.push("big"):e.push("border","white");return e.join(" ")},isVisible:function t(){return r.object&&(l.treatAsDesktop()||s.zoomCell)&&r.object.canShowExploreMenu()&&!o.isInEditMode()&&!s.zooming},action:function t(){if(s.zoomCell){r.toggleExploreMenu();r.object.resize()}else{s.zoom(r);r.toggleExploreMenu(true)}}},{translation:"Tooltip.ZoomOut",tid:"nav-menu-zoom-out",cssClasses:"lui-icon lui-icon--remove big",isVisible:function t(){return s.isSheet&&s.zoomCell===r&&!s.zooming},action:function e(){r.navMenu.visible=false;r.showExploreMenu&&r.toggleExploreMenu(false);t(".embedded-sheet-toolbar").length>0&&t(".embedded-sheet-toolbar").css("display","block");s.zoom(null);s.gridService.restoreSheetScrollState()}},{translation:"Tooltip.ZoomIn",tid:"nav-menu-zoom-in",cssClasses:"lui-icon lui-icon--expand white border",isVisible:function t(){return r.object&&l.treatAsDesktop()&&!s.zoomCell&&!r.object.isInvalid&&!s.zooming},action:function t(e){s.zoom(r);if(o.isInEditMode()&&!r.options.isActive){s.toggleActive(null);c.resetPropertyPanelToggle()}e&&e.stopPropagation()}},{translation:"Common.Move",tid:"nav-menu-move",cssClasses:"lui-icon lui-icon--draggable",dynamicCssClasses:function t(){var e=[];s.zoomCell?e.push("big"):e.push("border","white");return e.join(" ")},isVisible:function t(){if(!g.getFlag("SSA_IN_EDIT"))return false;return o.isInEditMode()&&!s.zoomCell&&(l.treatAsDesktop()||s.activeCell===r)},mounted:function t(e){f.addDrag(e,"",{isEnabled:function t(){var e=s.gridService.isBlocked();var n=r.object&&r.object.preventDrag;return!n&&!e},info:function t(){return{type:"gridcell",cell:r}},onStart:function t(){},elem:"<div class='qv-gridmove-icon'></div>"})}}]}}function k(t,e,n){var i=t.layout||{};var r=i.layoutOptions&&"CUSTOM"===i.layoutOptions.sheetMode;var a=t.placementService.updateGridCells(t.cols,t.rows,t.cells,e,h.getResolutionFor(i.gridResolution),r);t.cells=a;var l;l=g.getFlag("SSA_IN_EDIT")?d.ANALYSIS:o.state===o.States.edit?d.EDIT:d.ANALYSIS;a.forEach(function(e){if(!e.isEmpty){g.getFlag("SSA_IN_EDIT")&&o.isInEditMode()&&(e.resize=L(e,t));if(!e.model){var i=s();e.options.setController=i.resolve;e.options.interactionState=l;e.options.direction=p.direction;e.options._softCancelOnRemove=true;e.options.removeIt=function(){t.gridService.removeCell(e)};if(t.app){t.app.getLayout().then(function(n){e.navMenu=D(n,t,e)});t.app.getObject(e.id).then(function(i){e.model=i;n&&t.toggleActive(e)})}e.getVisualization=function(){return i.promise}}e.options.canSaveSoftProperties=T(t)}});!t.hasUpdatePermission&&t.zoomCell&&o.state===o.States.edit&&t.zoom(null);t.cells=a;t.updateCellsSize()}function T(t){return t.hasUpdatePermission&&!a.isSmallDevice}function E(t,e){this.gridService=t;this.placementService=i.getService("qvObjectPlacementService");this.blocked=false;this.app=e}function A(t,e){return e>=0&&t>e?e:t}function L(t,e){var n=[];var i=["top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"];var s=t.pos.bounds?r.getAligmentToGrid(t.pos.bounds,e.cols,e.rows):t.pos;var o=s.col;var a=o+s.colspan;var l=s.row;var c=l+s.rowspan;var u={left:o,right:e.cols-a,top:l,bottom:e.rows-c};for(var d=0;d<e.cells.length;++d){if(e.cells[d]===t||e.cells[d].isEmpty)continue;var p=e.cells[d].pos.col;var h=p+e.cells[d].pos.colspan;var f=e.cells[d].pos.row;var g=f+e.cells[d].pos.rowspan;if(f<c&&g>l){u.left=A(u.left,o-h);u.right=A(u.right,p-a)}if(p<a&&h>o){u.top=A(u.top,l-g);u.bottom=A(u.bottom,f-c)}}i.forEach(function(t){var e={top:true,bottom:true}[t]||false;var i={left:true,right:true}[t]||false;var o={X:0,Y:0};var r=false;if(i){o.X=u[t];r=s.colspan<=1}else if(e){o.Y=u[t];r=s.rowspan<=1}else{var a=t.split("-");o.Y=u[a[0]];o.X=u[a[1]];r=s.rowspan<=1&&s.colspan<=1}if(0===o.Y&&0===o.X&&r)return;var l={X:s.colspan-1,Y:s.rowspan-1};if(l.X<0&&o.X<=0||l.Y<0&&o.Y<=0)return;l.Y=Math.max(l.Y,0);l.X=Math.max(l.X,0);n.push({dir:t,expand:o,contract:l})});return n}E.prototype.autoCollapse=function(){var t=this;var e=o.getModel();if(e&&e.layout&&e.layout.permissions.update&&e.layout.height&&e.layout.height>100&&e.layout.cells){var n=r.calculateCollapseHeight(e.layout,e.layout.cells);if(n>0)return e.extendSheet(-n).then(function(){t.updateCellsSize()})}return s.resolve()};E.prototype.updateCellsSize=function(){var t=this;I(t,t.layout);for(var e=0;e<t.cells.length;e++)t.setCellSize(t.cells[e],t.cells[e].pos)};E.prototype.setCellSize=function(t,e){if(!this.mobileGrid&&a.isSmallDevice&&t.getVisualization)t.style=w(t);else{e.bounds=this.placementService.getCellAlignment(e,this.cols,this.rows);t.style=S(e.bounds,this.mobileGrid&&a.isSmallDevice)}t.options&&(t.options.canSaveSoftProperties=T(this));t.pos=e};E.prototype.block=function(){this.blocked=true;this.removeResizeHandles()};E.prototype.unblock=function(){this.blocked=false;this.updateActiveCell()};E.prototype.isBlocked=function(){return this.blocked};E.prototype.updateResize=function(t){t.resize=L(t,this)};E.prototype.updateActiveCell=function(){var t=this;if(!t.activeCell)return;if(!o.isInEditMode())return;if(this.blocked)return;var e=t.activeCell.pos.bounds?r.getAligmentToGrid(t.activeCell.pos.bounds,t.cols,t.rows):t.activeCell.pos;var n=e.col;var i=n+e.colspan;var s=e.row;var a=s+e.rowspan;var l={left:n,right:t.cols-i,top:s,bottom:t.rows-a};function c(t,e){e>=0&&l[t]>e&&(l[t]=e)}for(var u=0;u<t.cells.length;++u){if(t.cells[u]===t.activeCell||t.cells[u].isEmpty)continue;var d=t.cells[u].pos.col;var p=d+t.cells[u].pos.colspan;var h=t.cells[u].pos.row;var f=h+t.cells[u].pos.rowspan;if(h<a&&f>s){c("left",n-p);c("right",d-i)}if(d<i&&p>n){c("top",s-f);c("bottom",h-a)}}t.activeCell.updating=false;g.getFlag("SSA_IN_EDIT")||(t.activeCell.resize=L(t.activeCell,t))};E.prototype.removeResizeHandles=function(){this.cells.forEach(function(t){t.resize=null})};E.prototype.clearActiveCell=function(){var t=this;!g.getFlag("SSA_IN_EDIT")&&this.cells&&t.removeResizeHandles();t.activeCell=null};E.prototype.setCellSelected=function(t){if(g.getFlag("SSA_IN_EDIT")&&c.selectedObject&&!(t&&t.id===c.selectedObject.id)&&c.selectedObject.customObject&&c.selectedObject.customObject.object){c.selectedObject.customObject.object.setInteractionState(d.ANALYSIS);c.selectedObject.customObject.object.update()}if(t&&!t.isEmpty){if(!c.selectedObject||"gridCell"!==c.selectedObject.type||c.selectedObject.id!==t.id){c.setSelectedObject(q(this,t));if(g.getFlag("SSA_IN_EDIT")&&c.selectedObject.customObject.object){c.selectedObject.customObject.object.setInteractionState(d.EDIT);c.selectedObject.customObject.object.update()}}}else{var e=i.getService("qvSheetService");e.setSheetAsSelectedObj()}};E.prototype.gridToggleActive=function(){g.getFlag("SSA_IN_EDIT")||this.toggleActive(null)};E.prototype.toggleActive=function(t){var e=this;if(!o.isInEditMode())return;if(!t||t.isEmpty)e.clearActiveCell();else{e.clearActiveCell();e.hasUpdatePermission&&(e.activeCell=t);e.updateActiveCell();c.propertiesOpen=true}e.setCellSelected(t)};E.prototype.setEditMaster=function(t,e){var n=this;var i=[{name:t,type:e,col:0,row:0,colspan:1,rowspan:1}];n.lastSheetId=null;n.isSheet=false;n.isMaster=true;C(n,1,1);n.clearActiveCell();k(n,i,false);n.cells[0].options.interactionState=d.EDIT;n.setCellSelected(n.cells[0]);n.zoom(n.cells[0])};E.prototype.update=function(t){if(!t)return;var e=this;e.layout=t;C(e,t.columns||12,t.rows||7);_(e,t);e.activeCell&&-1===e.cells.indexOf(e.activeCell)&&e.setCellSelected(null);if(e.zoomCell&&-1===e.cells.indexOf(e.zoomCell)){e.zoomCell=null;e.setCellSelected(null);I(e,e.layout)}e.updateActiveCell()};function M(t,e){var n=t.activeCell===e;g.getFlag("SSA_IN_EDIT")&&null!==e&&!n&&t.clearActiveCell()}E.prototype.zoom=function(t){var e=this;if(!e.cells)return;e.cells.forEach(function(e){if(e.options){e.options.isVisible=e===t||!t;e.options.isZoomed=e===t&&!!t}});!g.getFlag("SSA_IN_EDIT")&&o.isInEditMode()&&e.clearActiveCell();M(e,t);if(t){e.zoomCell=t;e.gridService.saveScrollState();t.object&&(t.object.expanded=!!t)}else if(e.zoomCell){e.zoomCell.object&&(e.zoomCell.object.expanded=false);!g.getFlag("SSA_IN_EDIT")&&e.hasUpdatePermission&&o.isInEditMode()&&(e.activeCell=e.zoomCell);e.zoomCell=null;e.updateActiveCell();e.gridService.restoreScrollState()}I(e,e.layout)};E.prototype.highlight=function(t){var e=this;if(!e.cells)return;e.cells.forEach(function(e){e.isHighlighted=e===t||!t})};E.prototype.exploreMenu=function(t,e){t&&t.object&&t.object.hasSoftProperties&&t.toggleExploreMenu(e)};E.prototype.getOptimalCell=function(){return i.getService("qvObjectPlacementService").getOptimalCell(this.cells.slice())};return E}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(114),n(443),n(672)],s=function(t,e,n){return{template:n,scope:{close:"&"},controller:["$scope","$element",function(n,i){n.direction=t.direction;i.find(".content").showComponent(e,{input:n.input})}]}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){(function(n){var i,s;(function(){var o=[];var r=o.slice;var a={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);i.push({callback:e,context:n,ctx:n||this});return this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var s=this;var o=n.once(function(){s.off(t,o);e.apply(this,arguments)});o._callback=e;return this.on(t,o,i)},off:function(t,e,i){var s,o,r,a,l,u,d,p;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i){this._events={};return this}a=t?[t]:n.keys(this._events);for(l=0,u=a.length;l<u;l++){t=a[l];if(r=this._events[t]){this._events[t]=s=[];if(e||i)for(d=0,p=r.length;d<p;d++){o=r[d];(e&&e!==o.callback&&e!==o.callback._callback||i&&i!==o.context)&&s.push(o)}s.length||delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t];var i=this._events.all;n&&u(n,e);i&&u(i,arguments);return this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var s=!e&&!n;"object"===typeof e&&(n=this);t&&((i={})[t._listenerId]=t);for(var o in i){i[o].off(e,n,this);s&&delete this._listeners[o]}return this}};var l=/\s+/;var c=function(t,e,n,i){if(!n)return true;if("object"===typeof n){for(var s in n)t[e].apply(t,[s,n[s]].concat(i));return false}if(l.test(n)){var o=n.split(l);for(var r=0,a=o.length;r<a;r++)t[e].apply(t,[o[r]].concat(i));return false}return true};var u=function(t,e){var n,i=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:while(++i<s)(n=t[i]).callback.call(n.ctx);return;case 1:while(++i<s)(n=t[i]).callback.call(n.ctx,o);return;case 2:while(++i<s)(n=t[i]).callback.call(n.ctx,o,r);return;case 3:while(++i<s)(n=t[i]).callback.call(n.ctx,o,r,a);return;default:while(++i<s)(n=t[i]).callback.apply(n.ctx,e)}};var d={listenTo:"on",listenToOnce:"once"};n.each(d,function(t,e){a[e]=function(e,i,s){var o=this._listeners||(this._listeners={});var r=e._listenerId||(e._listenerId=n.uniqueId("l"));o[r]=e;"object"===typeof i&&(s=this);e[t](i,s,this);return this}});a.bind=a.on;a.unbind=a.off;true;!(i=[],s=function(){return a}.apply(e,i),void 0!==s&&(t.exports=s));this.Eventable=a})();t.exports=Eventable}).call(this,n(54))},function(t,e){t.exports='<div class="q-card-content" qva-direction x-dir-setting="{{direction}}">\n\n\t<header ng-if="object.title || object.description">\n\t\t<div class="object-title" ng-if="object.title" qva-direction x-dir-text="{{object.title}}">{{object.title}}</div>\n\t\t<div ng-if="object.description" qva-direction x-dir-text="{{object.description}}" ng-bind-html="getTrustedHtml(object.description)"></div>\n\t</header>\n\n\t<section ng-if="object.dimensions.length">\n\t\t<div class="item-header" qva-direction x-dir-setting="{{direction}}">\n\t\t\t<span q-translation="Common.Dimensions"></span>\n\t\t\t<span class="item-count" dir="ltr">({{ object.dimensions.length }})</span>\n\t\t</div>\n\t\t<div class="item" ng-repeat="dimension in object.dimensions">\n\t\t\t<div class="item-title" qva-direction x-dir-text="{{dimension.title || \'-\'}}"><span class="lui-icon lui-icon--small lui-icon--drill-down" q-title-translation="Tooltip.dimensions.drilldown" ng-if="dimension.isDrilldown"></span>{{ dimension.title || \'-\'}}</div>\n\t\t\t<div class="item-description" ng-if="dimension.description" qva-direction x-dir-text="{{dimension.description}}" ng-bind-html="getTrustedHtml(dimension.description)"></div>\n\t\t</div>\n\t</section>\n\n\t<section ng-if="object.measures.length">\n\t\t<div class="item-header" qva-direction x-dir-setting="{{direction}}">\n\t\t\t<span q-translation="Common.Measures"></span>\n\t\t\t<span class="item-count" dir="ltr">({{ object.measures.length }})</span>\n\t\t</div>\n\t\t<div class="item" ng-repeat="measure in object.measures">\n\t\t\t<div class="item-title" qva-direction x-dir-text="{{measure.title || \'-\'}}">{{ measure.title || \'-\'}}</div>\n\t\t\t<div class="item-description" ng-if="measure.description" qva-direction x-dir-text="{{measure.description}}" ng-bind-html="getTrustedHtml(measure.description)"></div>\n\t\t</div>\n\t</section>\n\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(141),n(90)],s=function(t,e,n){function i(e,n,i){var s="dimension"===n?"getDimension":"getMeasure";var o="dimension"===n?"qDim":"qMeasure";if(!e||!i)return t.resolve();return e.app[s](i).then(function(t){return t.getLayout().then(function(t){return t[o].descriptionExpression||t.qMeta.description})})}function s(t,e,n){return i(t,"dimension",e).then(function(t){var e="H"===n.qGrouping,i=e?n.title:n.qFallbackTitle||n.title;return{title:i,description:t,isDrilldown:e}})}function o(t,e,i){var s=e.layout;var o=n.getValue(s,e.ext.options.hyperCubePath||"",s);var d=n.getValue(i,e.ext.options.hyperCubePath||"",i);return"map"===s.visualization?a(t,s,i):"filterpane"===s.visualization?l(t,s):"table"===s.visualization?c(t,s,i):"pivot-table"===s.visualization?u(t,s,i):o.qHyperCube?r(t,o,d):null}function r(e,n,i){var o,r=[];for(o=0;o<n.qHyperCube.qDimensionInfo.length;o++)r.push(s(e,i.qHyperCubeDef.qDimensions[o].qLibraryId,n.qHyperCube.qDimensionInfo[o]));return t.all(r)}function a(e,n,i){var o,r=[];for(o=0;o<n.layers.length;o++)r.push(s(e,i.layers[o].qHyperCubeDef.qDimensions[0].qLibraryId,n.layers[o].qHyperCube.qDimensionInfo[0]));return t.all(r)}function l(n,i){var o=[];i.qChildList.qItems.forEach(function(i){o.push(e.get(i.qInfo.qId).then(function(e){return t.all({layout:e.getLayout(),properties:e.getProperties()}).then(function(t){return s(n,t.properties.qListObjectDef.qLibraryId,t.layout)})}))});return t.all(o)}function c(e,n,i){var o,r=[],a;for(o=0;o<n.qHyperCube.columnOrder.length;o++){a=n.qHyperCube.columnOrder[o];a<n.qHyperCube.qDimensionInfo.length&&r.push(s(e,i.qHyperCubeDef.qDimensions[a].qLibraryId,n.qHyperCube.qDimensionInfo[a]))}return t.all(r)}function u(e,n,i){var o,r=[],a;for(o=0;o<n.qHyperCube.qEffectiveInterColumnSortOrder.length;o++){a=n.qHyperCube.qEffectiveInterColumnSortOrder[o];a>-1&&r.push(s(e,i.qHyperCubeDef.qDimensions[a].qLibraryId,n.qHyperCube.qDimensionInfo[a]))}return t.all(r)}function d(t,e,n){return i(t,"measure",e).then(function(t){return{title:n,description:t}})}function p(e,i,s){var o=i.layout;var r=n.getValue(o,i.ext.options.hyperCubePath||"",o);var a=n.getValue(s,i.ext.options.hyperCubePath||"",s);return"map"===o.visualization?f(e,o,s):"filterpane"===o.visualization?t.resolve():"table"===o.visualization?g(e,o,s):r.qHyperCube?h(e,r,a):null}function h(e,n,i){var s,o=[];for(s=0;s<n.qHyperCube.qMeasureInfo.length;s++)o.push(d(e,i.qHyperCubeDef.qMeasures[s].qLibraryId,n.qHyperCube.qMeasureInfo[s].qFallbackTitle));return t.all(o)}function f(e,n,i){var s,o,r=[];for(o=0;o<n.layers.length;o++)for(s=0;s<n.layers[o].qHyperCube.qMeasureInfo.length;s++)r.push(d(e,i.layers[s].qHyperCubeDef.qMeasures[0].qLibraryId,n.layers[s].qHyperCube.qMeasureInfo[s].qFallbackTitle));return t.all(r)}function g(e,n,i){var s,o=[],r;for(s=0;s<n.qHyperCube.columnOrder.length;s++){r=n.qHyperCube.columnOrder[s];if(r>=n.qHyperCube.qDimensionInfo.length){r-=n.qHyperCube.qDimensionInfo.length;o.push(d(e,i.qHyperCubeDef.qMeasures[r].qLibraryId,n.qHyperCube.qMeasureInfo[r].qFallbackTitle))}}return t.all(o)}function v(e,n,i){return t.all({title:e.layout.showTitles?e.layout.title:null,description:e.layout.descriptionExpression||i.qMetaDef.description,dimensions:o(n,e,i),measures:p(n,e,i)})}function m(t){return t.layout.qExtendsId?t.model.app.getObject(t.layout.qExtendsId).then(function(e){return e.getProperties().then(function(n){return v(t,e,n)})}):t.model.getEffectiveProperties().then(function(e){return v(t,t.model,e)})}return{createObjectInfo:m}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){return{type:"array",component:"sorting",translation:"properties.sorting",sortIndexRef:"qHyperCubeDef.qInterColumnSortOrder",allowMove:true,schemaIgnore:true,items:{dimensions:{type:"items",component:"expandable-items",ref:"qHyperCubeDef.qDimensions",items:{autoSort:{ref:"qDef.autoSort",type:"boolean",translation:"properties.sorting",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],change:function t(e,n){if(e.qDef.autoSort)return n.autoSortDimension(e).then(function(){})}},dimension:{component:"sorting-dimension",type:"items",ref:"",sortingItems:{expression:true,frequency:false,numeric:true,ascii:true}}}},measures:{type:"items",component:"expandable-items",grouped:true,ref:"qHyperCubeDef.qMeasures",items:{autoSort:{ref:"qDef.autoSort",type:"boolean",translation:"properties.sorting",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],change:function t(e,n){if(e.qDef.autoSort)return n.autoSortMeasure(e).then(function(){})}},measure:{component:"sorting-measure",ref:"",sortingItems:{numeric:true,ascii:true}}}}}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(91),n(237),n(417)],s=function(t,e,n){var i={type:"items",items:{autoMinMax:{ref:"measureAxis.autoMinMax",type:"boolean",translation:"properties.axis.range",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},minMax:{type:"string",component:"dropdown",ref:"measureAxis.minMax",options:[{translation:"properties.axis.min",value:"min"},{translation:"Common.Max",value:"max"},{translation:"properties.axis.minMax",value:"minMax"}],defaultValue:"min",show:function t(e){return e.measureAxis&&!e.measureAxis.autoMinMax}},min:{ref:"measureAxis.min",translation:"properties.axis.min",expression:"optional",type:"number",show:function t(e){return e.measureAxis&&["min","minMax"].contains(e.measureAxis.minMax)&&!e.measureAxis.autoMinMax},invalid:function t(e){if(e.measureAxis&&"minMax"===e.measureAxis.minMax)return e.measureAxis.min>=e.measureAxis.max;return false}},max:{ref:"measureAxis.max",translation:"Common.Max",expression:"optional",type:"number",defaultValue:10,show:function t(e){return e.measureAxis&&["max","minMax"].contains(e.measureAxis.minMax)&&!e.measureAxis.autoMinMax},invalid:function t(e){if(e.measureAxis&&"minMax"===e.measureAxis.minMax)return e.measureAxis.min>=e.measureAxis.max;return false}}}};var s=[{value:"all",translation:"properties.axis.show.all"},{value:"labels",translation:"properties.axis.show.labels"},{value:"title",translation:"properties.axis.show.title"},{value:"none",translation:"Common.None"}];var o=[{value:2,translation:"properties.gridLine.wide"},{value:1,translation:"properties.gridLine.medium"},{value:.5,translation:"properties.gridLine.narrow"}];var r={type:"items",items:{show:{type:"string",component:"dropdown",ref:"dimensionAxis.show",translation:"properties.axis.labelsAndTitle",options:s,defaultValue:"all",snapshot:{title:function e(n){return t.get("properties."+this.getXYAxis(n)+"Axis")},getXYAxis:function t(e){return n.isVertical(e)?"x":"y"},group:false,tid:function t(e){return"property-"+this.getXYAxis(e)+"Axis"}}},label:{type:"string",component:"dropdown",ref:"dimensionAxis.label",translation:"properties.axis.labelOrientation",options:[{value:"auto",translation:"Common.Auto"},{value:"horizontal",translation:"Common.Horizontal"},{value:"tilted",translation:"properties.labels.tilted"}],defaultValue:"auto",show:function t(i,s,o){return n.isVertical(o.layout)&&i.dimensionAxis&&["all","labels"].contains(i.dimensionAxis.show)&&!e.isContinuousChart(o.layout)}},dock:n.getAxisDockProperties("dimensionAxis",{major:true})}};return{measureAxis:{type:"items",label:t.get("properties.yAxis"),grouped:true,items:{axis:{type:"items",items:{show:{type:"string",component:"dropdown",ref:"measureAxis.show",translation:"properties.axis.labelsAndTitle",options:s,defaultValue:"all"},dock:n.getAxisDockProperties("measureAxis"),spacing:{ref:"measureAxis.spacing",translation:"properties.axis.scale",type:"number",component:"dropdown",defaultValue:1,options:o,show:function t(e){return e.measureAxis&&"none"!==e.measureAxis.show}}}},minMax:i}},flippableMeasureAxis:{uses:"axis.measureAxis",label:function e(i,s){var e,o="x",r=n.getMeasures(i,s).map(function(t){return t.qFallbackTitle}).join(", ");n.isVertical(s.layout)&&(o="y");e=r?t.get("properties."+o+"AxisWithInfo",[r]):t.get("properties."+o+"Axis");return e},items:{axis:{type:"items",items:{show:{snapshot:{title:function e(n){return t.get("properties."+this.getXYAxis(n)+"Axis")},getXYAxis:function t(e){return n.isVertical(e)?"y":"x"},group:false,tid:function t(e){return"property-"+this.getXYAxis(e)+"Axis"}}},dock:{options:function t(e,i,s){var o,r;if(n.isVertical(i.layout)){o=s.yMirrorMode?"properties.dock.right":"properties.dock.left";r=s.yMirrorMode?"properties.dock.left":"properties.dock.right"}else{o="Common.Bottom";r="Common.Top"}return[{value:"near",translation:o},{value:"far",translation:r}]}}}}}},dimensionAxis:{type:"items",label:n.dimensionAxisLabelFn,grouped:true,items:{continuousGroup:{type:"items",items:{auto:{ref:"dimensionAxis.continuousAuto",translation:"properties.axis.continuous",type:"boolean",component:"switch",defaultValue:true,undefinedValue:false,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},preferContinuous:{type:"boolean",ref:"preferContinuousAxis",translation:"properties.axis.preferContinuous",defaultValue:true,undefinedValue:false,show:function t(e){return!e.dimensionAxis.continuousAuto},readOnly:function t(n,i,s){return!e.canBeContinuousChart(s.layout)}},miniChart:{type:"boolean",ref:"showMiniChartForContinuousAxis",translation:"properties.showMiniChart",defaultValue:true,undefinedValue:true,show:function t(n,i,s){return e.isContinuousChart(s.layout)}}}},othersGroup:r}},picasso:{dimensionAxis:{type:"items",label:n.dimensionAxisLabelFn,items:{othersGroup:r}},measureAxis:{type:"items",uses:"axis.flippableMeasureAxis"}}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={strokeWidth:{show:false,ref:"style.strokeWidth",type:"number",expression:"optional",defaultValue:0,translation:"LayerStyleEditor.style.strokeWidth"},strokeColor:{show:false,ref:"style.strokeColor",translation:"LayerStyleEditor.style.strokeColor",type:"object",component:"color-picker",dualOutput:true,defaultValue:function t(){return{index:-1,color:"#205891"}}},width:{show:false,ref:"style.width",type:"number",expression:"optional",defaultValue:.7,translation:"LayerStyleEditor.style.barWidth"}};return{box:{type:"items",components:"items",items:t}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(198)],s=function(t){var e;function n(t,e){if(e){if(t[e]){if(t[e].qHyperCube)return e+".qHyperCube";if(t[e].qListObject)return e+".qListObject"}if(-1!==e.indexOf("Def",e.length-3))return e.slice(0,e.length-3);return e}return t.qHyperCube?"qHyperCube":"qListObject"}e=t.extend("GenericApi",{init:function t(e,i){var s=n(e.layout,i);this._super(e,"/"+s+"Def");this.isHyperCube=-1!==this.dataPath.indexOf("qHyperCube");this.cacheCube.setMethodName(this.isHyperCube?"getHyperCubeData":"getListObjectData")},getBackendApi:function t(n){return new e(this.model,n)},getProperties:function t(){return this.model.getProperties()},setProperties:function t(e){return this.model.setProperties(e)},applyPatches:function t(e,n){return this.model.applyPatches(e,n)},clearSoftPatches:function t(){return this.model.clearSoftPatches()},save:function t(){return this.model.setProperties(this.model.properties)},clearSelections:function t(){return this.model.resetMadeSelections()},updateCache:function t(e){if(e&&e[this.dataPath]){this.cacheCube.set(e[this.dataPath].qDataPages);this.cacheCube.setCubeSize(e[this.dataPath].qSize)}else this.cacheCube.clear()},getData:function t(e){var n=this.cacheCube.getData(e),i=this;n.then(function(t){i.model.layout[i.dataPath].qDataPages.push(t[0])});return n},getDataRow:function t(e){var n=this.model.layout[this.dataPath];if(n){var i=n.qDataPages.length;for(var s=0;s<i;s++){var o=n.qDataPages[s];if(e>=o.qArea.qTop&&e<o.qArea.qTop+o.qArea.qHeight)return o.qMatrix[e-o.qArea.qTop]}}return null},selectValues:function t(e,n,i){if(this.isHyperCube)return this.model.selectHyperCubeValues(this.path,e,n,i);return this.model.selectListObjectValues(this.path,n,i)},select:function t(e,n,i){return this.selectValues(n,e,i)},getReducedData:function t(e,n,i){if(this.isHyperCube)return this.model.getHyperCubeReducedData(this.path,e,n,i||"D1");return null},selectRange:function t(e,n,i){n=!!n;i=i||[];return this.model.rangeSelectHyperCubeValues(this.path,e,i,n)},search:function t(e){if(this.isHyperCube)return null;return this.model.searchListObjectFor(this.path,e)},abortSearch:function t(){if(this.isHyperCube)return null;return this.model.abortListObjectSearch(this.path)},acceptSearch:function t(e){if(this.isHyperCube)return null;return this.model.acceptListObjectSearch(this.path,e)},getPivotData:function t(e){if(this.isHyperCube)return this.model.getHyperCubePivotData(this.path,e);return null},getStackData:function t(e,n){if(this.isHyperCube)return this.model.getHyperCubeStackData(this.path,e,n||1e3);return null},expandTop:function t(e,n,i){return this.model.expandTop(this.path,e,n,i||false)},expandLeft:function t(e,n,i){return this.model.expandLeft(this.path,e,n,i||false)},collapseTop:function t(e,n,i){return this.model.collapseTop(this.path,e,n,i)},collapseLeft:function t(e,n,i){return this.model.collapseLeft(this.path,e,n,i)}});return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(330)],s=function(t,e,n){var i,s={enabled:true,debouncing:{enabled:true,delay:50}};i=t.extend({init:function t(e,i,s){this.model=e;this.responseProperty=i;this.options={};this.setOptions({});this.setPath(s);this.throttle=new n;this.throttle.Send.bind(function(t,e){o.model[o.method](o.path,t).then(function(t){e.resolve(t)},function(){e.reject()})});var o=this;this._modelBinding=function(){o.clear()};this.model.Invalidated.bind(this._modelBinding)},setMethodName:function t(e){this.method=e},setPath:function t(e){this.path=e},setOptions:function t(n){this.options=e.extend(true,{},s,this.options,n);this.enabled=this.options.enabled||false;this.debouncing={enabled:this.options.debouncing.enabled||false,delay:this.options.debouncing.delay||-1}},clear:function t(){this.throttle&&this.throttle.clear()},destroy:function t(){this.throttle.destroy();this.model&&this.model.Invalidated&&this.model.Invalidated.unbind(this._modelBinding);this._modelBinding=null;delete this.model;delete this.throttle},set:function t(){this.clear()},getData:function t(e){if(!this.enabled)return this.model[this.method](this.path,e);return this.throttle.queue(e)}});return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div style="height: 100%; position: relative;"></div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){return{quarantine:e,unquarantine:n};function e(e){var n=t.getValue(e,"properties.qHyperCubeDef.qMeasures",[]);var i=t.getValue(e,"properties.qHyperCubeDef.qDimensions",[]);n.forEach(s.bind(null,e,"measures"));i.forEach(s.bind(null,e,"dimensions"))}function n(e){var n=t.getValue(e,"qProperty.qHyperCubeDef.qMeasures",[]);var i=t.getValue(e,"qProperty.qHyperCubeDef.qDimensions",[]);n.forEach(o.bind(null,e,"measures"));i.forEach(o.bind(null,e,"dimensions"))}function i(t){return t&&t.qCond&&t.qCond.qv}function s(e,n,s){var o=t.getValue(s,"qDef.cId");var r="qLayoutExclude.quarantine.conditionalShowHide."+n;if(!i(s.qCalcCondition))return;if(!o){o=t.generateId();t.setValue(s,"qDef.cId",o)}t.setValue(e.properties,r+"."+o,s.qCalcCondition);delete s.qCalcCondition}function o(e,n,s){var o=t.getValue(s,"qDef.cId");var r="qProperty.qLayoutExclude.quarantine.conditionalShowHide."+n;if(!o)return;var a=t.getValue(e,r+"."+o);if(i(a)){s.qCalcCondition=a;t.setValue(e,r+"."+o,void 0)}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;n(448);var i=r(n(49));var s=r(n(100));var o=r(n(333));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t;var e;var n=function t(){};return{getCurrentId:function t(){return s.default.getCurrentTheme()},getApplied:function i(){var r=s.default.getCurrentTheme();if(e&&t===r)return e;n();t=r;e=new Promise(function(t,e){n=e;s.default.getThemeJSON(r).then(function(e){t(new o.default(r,e))})});return e}}}();var l=function t(e){return e.then(function(t){var e=t.default||t;if("function"===typeof e)return e({flags:i.default,theme:a});return e})};e.default=l;t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=i;function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var e=["jqueryoutside","jqueryui","jqueryuitouch","eventable","sirtrevor","angular-aria","crossroads","signals","d3","element-queries","resize-sensor","jszip","filesaver","sha256","dropzone","handlebars","angular-vs-repeat","bodymovin","hammerjs","angular-leonardo-ui","enigma-sense-utilities","dragoman","sensei-codearea","qlikmetrics","engine-definition","sense-themes-default","guid","pubsub","xsrfplugin","widget.","general.","core.","client.","objects.","storytelling.","scripteditor.","dev-hub.","cm.","@qlik/codemirror","extensions.qliktech","apis/","assets/","chart/","js/","translate/","md-components/"];return e.some(function(e){return 0===t.indexOf(e)})}t.exports=e.default},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(89)],s=function(t,e){var n=t.extend({mounted:function t(){},paint:function t(){return e.resolve()},resize:function t(e,n){return this.paint(e,n)},updateData:function t(){return e.resolve()},beforeDestroy:function t(){}});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(102),n(629)],s=function(t,e,n){function i(e,n,i,s,o,r,a){if(!e.waitFor)return t.resolve();return e.waitFor.then(function(){return e.field[n].apply(e.field,[i,s,o,r,a].filter(function(t){return"undefined"!==typeof t}))})}function s(n,i,s){var o=this;o.qapp=n;o.fldname=i;o.statename=s;o.rows=[];if(o.qapp.model.session){e.create(o,"OnData");var r=new t;o.waitFor=r.promise;o.qapp.model.waitForOpen.promise.then(function(){var t=n.model.enigmaModel||n.model;t.getField(i,s||"$").then(function(t){o.field=t;r.resolve()}).catch(function(){})})}}s.prototype.clear=function(){return i(this,"clear")};s.prototype.lock=function(){return i(this,"lock")};s.prototype.unlock=function(){return i(this,"unlock")};s.prototype.clearOther=function(t){return i(this,"clearAllButThis",t||false)};s.prototype.selectAll=function(t){return i(this,"selectAll",t||false)};s.prototype.selectExcluded=function(t){return i(this,"selectExcluded",t||false)};s.prototype.selectAlternative=function(t){return i(this,"selectAlternative",t||false)};s.prototype.selectPossible=function(t){return i(this,"selectPossible",t||false)};s.prototype.toggleSelect=function(t,e){return i(this,"toggleSelect",t,e||false)};s.prototype.selectMatch=function(t,e){return i(this,"select",t,e||false)};s.prototype.select=function(t,e,n){return i(this,"lowLevelSelect",t,e||false,n||false)};s.prototype.selectValues=function(t,e,n){var s=[];t.forEach(function(t){"number"===typeof t?s.push({qIsNumeric:true,qNumber:t}):"string"===typeof t?"undefined"===t?s.push({qText:""}):s.push({qText:t}):s.push(t)});return i(this,"selectValues",s,e||false,n||false)};s.prototype.getData=function(t){if(this.requestActive)return this;this.requestActive=true;var e=this;var i=function i(){e.qapp.createGenericObject({qListObjectDef:{qStateName:e.statename?e.statename:"$",qDef:{qFieldDefs:[e.fldname]},qFrequencyMode:t&&t.freq||"V",qInitialDataFetch:[{qTop:0,qLeft:0,qHeight:t&&t.rows||200,qWidth:1}]}},function(t){e.rows.length=0;t.qListObject.qDataPages.forEach(function(t){t.qMatrix.forEach(function(t){e.rows.push(new n(t[0],e))})});e.rowCount=t.qListObject.qDimensionInfo.qCardinal;e.stateCounts=t.qListObject.qDimensionInfo.qStateCounts;e.requestActive=false;e.genericObject&&e.OnData.emit()}).then(function(t){e.genericObject=t;e.OnData.emit()})};this.genericObject?this.genericObject.close().then(function(){delete e.genericObject;i()}):i();return this};s.prototype.getMoreData=function(){if(this.requestActive)return this;if(this.rowCount<=this.rows.length)return this;this.requestActive=true;var t=this,e={qTop:this.rows.length,qLeft:0,qWidth:1,qHeight:50};t.genericObject?t.genericObject.getListObjectData("/qListObjectDef",[e]).then(function(e){e[0].qMatrix.forEach(function(e){t.rows.push(new n(e[0],t))});t.requestActive=false;t.OnData.emit()}):t.requestActive=false;return this};return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t,e){Object.defineProperties(this,{qText:{value:t.qText},qElemNumber:{value:t.qElemNumber},qState:{value:t.qState},field:{value:e}});Number.isNaN(+t.qNum)||Object.defineProperties(this,{qNum:{value:t.qNum}});t.qFrequency&&Object.defineProperties(this,{qFrequency:{value:t.qFrequency}})}t.prototype.select=function(t,e){return this.field.select([this.qElemNumber],t||false,e||false)};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(173),n(132)],s=function(t,e){function n(t){this.app=t}n.prototype.create=function(n,i,s){var o=this;return o.app.waitForOpen.promise.then(function(){return e.get(o.app).then(function(e){return e.getLayout().then(function(){var r=e.layout.qSelectionObject?e.layout.qSelectionObject.qSelections:null;var a,l={currentSelectFields:[],currentSelectCount:0};if(r&&r.length>0){l.currentSelectCount=r.length;for(a=0;a<r.length;a++)l.currentSelectFields.push(r[a].qField)}var c="";for(a=0;a<l.currentSelectCount;a++){a>0&&(c+=", ");c+=l.currentSelectFields[a]}var u={qMetaDef:{title:n,description:i},selectionFields:c};s&&(u.sheetId=s);return t.create(u,o.app)})})})};n.prototype.apply=function(e){var n=this;return n.app.waitForOpen.promise.then(function(){return t.apply(e,n.app)})};n.prototype.remove=function(e){var n=this;return n.app.waitForOpen.promise.then(function(){return t.remove(e,n.app)})};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){return t.waitForOpen.promise.then(function(){return t.enigmaModel})}function e(t,e){this.app=t;this.qapp=e}function n(t){var e="string"===typeof t?{qName:t}:t;e.qInfo=e.qInfo||{};e.qInfo.qType=e.qInfo.qType||"variable";return e}e.prototype.create=function(e){var i=n(e);return t(this.app).then(function(t){return t.createVariableEx(i)})};e.prototype.createSessionVariable=function(e){var i=n(e);return t(this.app).then(function(t){return t.createSessionVariable(i)})};e.prototype.get=function(e){return t(this.app).then(function(t){return t.getVariableById(e)})};e.prototype.getByName=function(e){return t(this.app).then(function(t){return t.getVariableByName(e)})};e.prototype.setStringValue=function(e,n){return t(this.app).then(function(t){return t.getVariableByName(e)}).then(function(t){return t.setStringValue(n).then(function(){return t.getLayout()})})};e.prototype.setNumValue=function(e,n){return t(this.app).then(function(t){return t.getVariableByName(e)}).then(function(t){return t.setNumValue(n).then(function(){return t.getLayout()})})};e.prototype.setContent=function(t,e){console.warn("qlik.app.variable.setContent() is deprecated since 2.1, use setNumValue method or setStringValue method instead.");return this.setStringValue(t,e+"")};e.prototype.getContent=function(t,e){var n=this.qapp;var i=e?function(t){e(t,n)}:function(){};return this.getByName(t).then(function(t){if(!t)return t;return t.getLayout().then(function(t){var e={qContent:{qString:t.qText,qIsNum:!Number.isNaN(+t.qNum)}};i(e,n);return e})})};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(124),n(450),n(158)],s=function(t,e,n){function i(t){this.qapp=t}i.prototype.get=function(i){var s=this;return t.load().then(function(){return s.qapp.getObject(i).then(function(t){return n.getExtensionSupport(t).then(function(n){return new e(s.qapp,t,n)})})})};i.prototype.create=function(i,s,r){var a=this;return t.load().then(function(){var t=s&&s.layout&&(s.layout.visualization||s.layout.qInfo&&s.layout.qInfo.qType);var l="object"===o(s)&&t?n.convertDefinition(s,i,t,r):n.createDefinition(a.qapp,i,s,r);return l.then(function(t){return a.qapp.createGenericObject(t).then(function(t){return n.getExtensionSupport(t).then(function(n){t._expendable=true;return new e(a.qapp,t,n)})})})})};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i;!(i=function(){var t={};Object.defineProperty(t,"empty",{value:"00000000-0000-0000-0000-000000000000",writable:false});t.generateId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})};return t}.call(e,n,e,t),void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(635),n(230),n(97)],s=function(t,e,n,i,s){var o=[],r={endAnnotation:null},a=".qv-object-nav .lui-icon--camera";function l(i,o,a,l){g();r.endAnnotation=o;var u=e.getService("luiPopover"),d;var m=u.show({template:n,controller:["$scope","$element",function(e,n){d=e;e.annotation={text:""};e.active=true;e.focused=false;e.isSaveDisabled=l;e.save=function(){p(m.currentAnnotationId,e.annotation.text);e.close()};e.closeDialog=function(){e.annotation.text="";e.focused=false;c();e.close()};i.on("mouseenter.annotations",function(){h(e)});i.on("mouseleave.annotations",function(){f(e)});n.on("mouseenter.dialog",function(){h(e)});n.on("mouseleave.dialog",function(){f(e)});n.on("click.dialog",function(n){var i=t(n.target);i.is(".lui-textarea")&&(e.focused=true)});s.on("start.storytellingAnnotate",e.closeDialog);e.$on("$destroy",function(){s.off("start.storytellingAnnotate",e.closeDialog);t(document).off("keydown.annotations");n.off("mouseenter.dialog");n.off("mouseleave.dialog");n.off("click.dialog")});function o(){t(document).on("keydown.annotations",function(t){r(t)&&f(e,1)})}function r(t){var e=(t.ctrlKey||t.metaKey)&&!t.altKey;return e&&(37===t.which||39===t.which)}o();a&&f(e)}],alignTo:i[0]});m.closed.then(function(){v();p(m.currentAnnotationId,d.annotation.text,d);d.focused=false;d.close()});return m}function c(e){e||(e=t(a));if(e.length&&r){r.endAnnotation();for(var n=o.length;n>=0;n--)clearTimeout(o.pop());e.off("mouseenter.annotations");e.off("mouseleave.annotations");v()}}function u(t){return i.get(t)}function d(t,e){return t.getProperties().then(function(n){n.qMetaDef.annotation=e;t.setProperties(n)})}function p(e,n){var i=t(a);u(e).then(function(t){d(t,n).then(function(){c(i)})});e||c(i)}function h(t){t.active=true;for(var e=o.length;e>=0;e--)clearTimeout(o.pop())}function f(e,n){var i=t.isNumeric(n)?n:4e3;if(false===e.focused){e.active=false;e.focused=false;o.push(setTimeout(function(){e.$apply(function(){e.closeDialog()})},i))}}function g(){t(a).parents("#grid").append("<div class='annotations-blocker'></div>")}function v(){setTimeout(function(){t("#grid").children(".annotations-blocker").remove()})}e.service("annotationsDialog",function(){return{openDialog:l,closeDialog:c}});return{getSnapshotModel:u,saveAnnotationInModel:d}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover tid="snapshot-annotation">\n\t<lui-popover-header >\n\t\t<lui-popover-title q-translation="Storytelling.Snapshot.AnnotationTitle"></lui-popover-title>\n\t</lui-popover-header>\n\t<lui-popover-body>\n\t\t<div class="form">\n\t\t<textarea class="lui-textarea" maxlength="255" rows="3" ng-model="annotation.text"\n\t\t\t\t  q-placeholder="Storytelling.Snapshot.AnnotationHint"></textarea>\n\t\t</div>\n\t</lui-popover-body>\n\t<lui-popover-footer>\n\t\t<button class="lui-button  lui-button"  ng-click="closeDialog();" q-translation="Common.Cancel" tid="cancel-annotation-btn"></button>\n\t\t<button class="lui-button  lui-button" ng-click="save();"  q-translation="Common.Save" ng-disabled="isSaveDisabled()" tid="save-annotation-btn"></button>\n\t</lui-popover-footer>\n</lui-popover>'},function(t,e){t.exports='<div style="position: absolute;top:-99999px;left:-99999px;z-index:500;background: rgba(255, 255, 255, 0.6); visibility:hidden;" ng-style="style">\n <qv-object ng-if="data" object="data.object" model="data.model" options="data.options"></qv-object>\n</div>'},function(t,e){t.exports='<div style="position: absolute;top:-99999px;left:-99999px;z-index:500;background: rgba(255, 255, 255, 0.6);visibility:hidden;" ng-style="style">\n  <div ng-repeat="cell in cells" style="position:absolute;" ng-style="cell.style">\n     <qv-object object="cell.data.object" model="cell.data.model" options="cell.data.options"></qv-object>\n  </div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(639),n(640),n(50),n(127),n(49),n(145)],s=function(t,e,n,i,s,o,r){var a={scope:{title:"=",sheets:"=",isSheet:"=",isGrid:"=",confirmDisabled:"=",sheetInformation:"=",selectSheet:"="},controller:["$scope",function(e){e.sections={approved:{show:!!e.sheets.approvedSheets.length,showHeaderLine:true,expand:true},myPublished:{show:!!e.sheets.myPublishedSheets.length,showHeaderLine:true,expand:true},myPrivate:{show:!!e.sheets.privateSheets.length,showHeaderLine:true,expand:true},community:{show:!!e.sheets.communitySheets.length,showHeaderLine:true,expand:true}};e.getBaseTitle=function(){return r.getFlag("AOSHARE")?"AppOverview.Content.PublicSheets":"AppOverview.Content.ApprovedSheets"};e.cancel=function(){e.destroyComponent()};e.sheetClicked=function(t){e.selectSheet(t);e.destroyComponent()};e.isSmallDeviceListner=function(){e.destroyComponent()};e.noSheets=!(e.sheets.approvedSheets.length||e.sheets.myPublishedSheets.length||e.sheets.privateSheets.length||e.sheets.communitySheets.length);e.toggleCollapse=function(n,i){n&&n.preventDefault&&n.preventDefault();e.sections[i].expand=!e.sections[i].expand;n&&e.sections[i].expand&&setTimeout(function(){o.scrollElmentIntoView(t(n.currentTarget).closest("div:not(.qs-tb)").find("ul li").first(),".av-content-container")})};e.$on("$destroy",function(){s.ViewChanged.unbind(e.isSmallDeviceListner)});s.ViewChanged.bind(e.isSmallDeviceListner)}]};e.directive("embeddedSheetItem",function(){return{restrict:"E",replace:true,template:i}});function l(t){var i={title:t.title,sheets:t.sheets,selectSheet:t.selectSheet,isSheet:true,isGrid:true,confirmDisabled:true,sheetInformation:t.sheetInformation};var s=e.getService("luiDialog");return s.show({template:n,controller:a.controller,input:i})}return{show:l}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-dialog class="qv-appview" id="select-sheet-dialog">\n\t<lui-dialog-header>\n\t\t<lui-popover-title q-translation="SheetDialog.SelectSheet"></lui-popover-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body>\n\t\t<div class="av-container">\n\t\t\t<div class="av-t-c">\n\t\t\t\t<div class="av-content-container">\n\t\t\t\t\t\x3c!-- Show information about sheets if there are any present --\x3e\n\t\t\t\t\t<div ng-if="!noSheets && sheetInformation" class="embedded-info">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--info"></span>\n\t\t\t\t\t\t<span q-translation="{{sheetInformation}}"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\x3c!-- Show message if no sheets are available --\x3e\n\t\t\t\t\t\t<h2 ng-if="noSheets" class="qv-ao-h2">\n\t\t\t\t\t\t\t<div class="err-text" q-translation="AppOverview.Error.NoSheets"></div>\n\t\t\t\t\t\t</h2>\n\n\t\t\t\t\t\t<div ng-if="sections.approved.show">\n\t\t\t\t\t\t\t\x3c!-- Approved Header --\x3e\n\t\t\t\t\t\t\t<div class="qs-tb">\n\t\t\t\t\t\t\t\t<h1 class="header approved" tid="ApprovedTitle" ng-click="toggleCollapse($event, \'approved\')">\n\t\t\t\t\t\t\t\t\t<span class="{{ sections.approved.expand ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }} lui-icon"\n\t\t\t\t\t\t\t\t\t\t  q-title-translation="{{ sections.approved.expand ? \'AppOverview.Collapse\' : \'AppOverview.Expand\' }}"></span>\n\t\t\t\t\t\t\t\t\t<span class="section-title" q-translation="{{getBaseTitle()}}"></span><span tid="nmbInSection" class="qs-font-n"> ({{sheets.approvedSheets.length}})</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- Approved Sheets --\x3e\n\t\t\t\t\t\t\t<ul class="qv-approved qv-grid" ng-if="sections.approved.expand">\n\t\t\t\t\t\t\t\t<embedded-sheet-item ng-repeat="item in sheets.approvedSheets track by item.qInfo.qId"></embedded-sheet-item>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div ng-if="sections.myPublished.show">\n\t\t\t\t\t\t\t\x3c!-- My Published Header --\x3e\n\t\t\t\t\t\t\t<div class="section-line my-published" ng-if="sections.myPublished.showHeaderLine"></div>\n\t\t\t\t\t\t\t<div class="qs-tb">\n\t\t\t\t\t\t\t\t<h1 class="header my-published" tid="MyPublishedTitle" ng-click="toggleCollapse($event, \'myPublished\')">\n\t\t\t\t\t\t\t\t\t<span class="{{ sections.myPublished.expand ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }} lui-icon"\n\t\t\t\t\t\t\t\t\t\t  q-title-translation="{{ sections.myPublished.expand ? \'AppOverview.Collapse\' : \'AppOverview.Expand\' }}"></span>\n\t\t\t\t\t\t\t\t\t<span class="section-title" q-translation="AppOverview.Content.MyPublishedSheets"></span><span tid="nmbInSection" class="qs-font-n"> ({{sheets.myPublishedSheets.length}})</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- My Published Sheets --\x3e\n\t\t\t\t\t\t\t<ul class="qv-my-published qv-grid"\n\t\t\t\t\t\t\t\tng-if="sections.myPublished.expand">\n\t\t\t\t\t\t\t\t<embedded-sheet-item ng-repeat="item in sheets.myPublishedSheets track by item.qInfo.qId"></embedded-sheet-item>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div ng-if="sections.myPrivate.show">\n\t\t\t\t\t\t\t\x3c!-- Private Header --\x3e\n\t\t\t\t\t\t\t<div class="section-line private" ng-if="sections.myPrivate.showHeaderLine "></div>\n\t\t\t\t\t\t\t<div class="qs-tb">\n\t\t\t\t\t\t\t\t<h1 class="header private" tid="PrivateTitle" ng-click="toggleCollapse($event, \'myPrivate\')">\n\t\t\t\t\t\t\t\t\t<span class="{{ sections.myPrivate.expand ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }} lui-icon"\n\t\t\t\t\t\t\t\t\tq-title-translation="{{ sections.myPrivate.expand ? \'AppOverview.Collapse\' : \'AppOverview.Expand\' }}"></span>\n\t\t\t\t\t\t\t\t\t<span class="section-title" q-translation="AppOverview.Content.MySheets"></span><span tid="nmbInSection" class="qs-font-n"> ({{sheets.privateSheets.length}})</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- Private Sheets --\x3e\n\t\t\t\t\t\t\t<ul class="qv-private qv-grid"\n\t\t\t\t\t\t\t\tng-if="sections.myPrivate.expand">\n\t\t\t\t\t\t\t\t<embedded-sheet-item ng-repeat="item in sheets.privateSheets track by item.qInfo.qId"></embedded-sheet-item>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div ng-if="sections.community.show">\n\t\t\t\t\t\t\t\x3c!-- Community Header --\x3e\n\t\t\t\t\t\t\t<div class="section-line community" ng-if="sections.community.showHeaderLine"></div>\n\t\t\t\t\t\t\t<div class="qs-tb">\n\t\t\t\t\t\t\t\t<h1 class="header community" tid="CommunityTitle" ng-click="toggleCollapse($event, \'community\')">\n\t\t\t\t\t\t\t\t\t<span class="{{ sections.community.expand ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }} lui-icon"\n\t\t\t\t\t\t\t\t\t\t  q-title-translation="{{ sections.community.expand ? \'AppOverview.Collapse\' : \'AppOverview.Expand\' }}"></span>\n\t\t\t\t\t\t\t\t\t<span class="section-title" q-translation="AppOverview.Content.CommunitySheets"></span><span tid="nmbInSection" class="qs-font-n"> ({{sheets.communitySheets.length}})</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- Community Sheets --\x3e\n\t\t\t\t\t\t\t<ul class="qv-community qv-grid"\n\t\t\t\t\t\t\t\tng-if="sections.community.expand">\n\t\t\t\t\t\t\t\t<embedded-sheet-item ng-repeat="item in sheets.communitySheets track by item.qInfo.qId"></embedded-sheet-item>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Cancel" tid="2f2a4f"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(t,e){t.exports='<li class="qv-content-li" ng-class="{\'qv-active-item\': item.isActive}">\n\t<div class="qv-content-item"\n\t\t ng-click="sheetClicked(item)" tid="sheet.private">\n\t\t<div qv-ao-thumb\n\t\t\t item="item"\n\t\t\t class="qv-thumb-wrap"\n\t\t\t issheet="isSheet"\n\t\t\t thumblayout="item.qData.thumbnail"\n\t\t\t editmode="false"></div>\n\n\t\t<div class="qv-details-wrap">\n\t\t\t<div class="qv-details-name">\n\t\t\t\t<div class="q-ellipsis" title="{{item.qData.labelExpression || item.qData.title}}">{{item.qData.labelExpression || item.qData.title}}</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</li>\n'},,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(11)],s=function(t){var e=function e(n,i,s,o){var r,a,l,c,u,d,p,h;if(o){u=o.replace(/[^-\d.]/g,"");c=o.replace(/[-\d.]/g,"")}c=c||"pt";u=u||12;s&&-1==n.indexOf("font")&&(n="<font>"+n+"</font>");var f=t(t.parseHTML(n));var g=f.filter("font").add(f.find("font"));var v=f.filter("div").add(f.find("div"));var m="BR";f.each(function(t,e){e.tagName&&e.tagName.toUpperCase()===m.toUpperCase()&&(f[t]=document.createElement("div"))});h=c;d=1;switch(c){case"px":d=.75;h="pt";break}p=u*d;function b(t,e){var n=t.toFixed(2);return n+e}g.each(function(e,n){r=t(n);l=n.getAttribute("size")||"3";a=1;switch(l){case"1":a=.5;break;case"2":a=.8;break;case"3":a=1;break;case"4":a=1.5;break;case"5":a=2;break;case"6":a=3;break}r.css({"font-size":b(p*a,h)});r.removeAttr("size")});v.each(function(e,n){r=t(n);var i=n.getAttribute("align");if(i){r.css({"text-align":"inherit"===i?"left":i});r.removeAttr("align")}else"inherit"===r.css("text-align")&&r.css({"text-align":"left"})});var y="#545352";var x=b(p,h);n=f.wrapAll('<div style="color:'+y+"; font-size:"+x+';">').parent().wrapAll("<div>").parent().html();return n};return{enrichHtml:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(93),n(339),n(173),n(132),n(172)],s=function(t,e,n,i,s,o){function r(i,s,r,a){return e.getApp().then(function(t){return t.getObject(i)}).then(function(e){return e.getLayout().then(function(e){var i=o.sortSlidesByRank(e.qChildList.qItems.slice());if(!i.length)return{layout:e};var l=[];return i.map(function(t){return n.snapshot.bind(this,t.qInfo.qId,s,r,a)}).reduce(function(t,e){return t.then(function(t){t&&l.push(t);return e()})},t.resolve()).then(function(t){l.push(t);return{layout:e,slides:l}})})})}return{snapshot:function t(e,n,o,a){return s.get().then(function(t){return t.getLayout().then(function(t){return i.create({title:"",selectionFields:t.qSelectionObject.qSelections}).then(function(t){return r(e,n||{},o,a).then(function(n){i.apply(t.id).then(function(){i.remove(t.id)});return{id:e,type:"story",snapshot:null,area:null,children:n.slides,title:n.layout.qMeta.title||""}})})})})}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(102)],s=function(t){function e(t,e){Object.defineProperties(this,{fieldName:{value:t.qField},field:{get:function t(){return i(this.parent,this.fieldName)}},qSortIndex:{value:t.qSortIndex},locked:{value:t.qLocked||false},isNumeric:{value:t.qIsNum||false},totalCount:{value:t.qTotal},selectedCount:{value:t.qSelectedCount},qStateCounts:{value:t.qStateCounts},qSelected:{value:t.qSelected},selectedValues:{value:t.qSelectedFieldSelectionInfo},notSelectedValues:{value:t.qNotSelectedFieldSelectionInfo},qSelectionThreshold:{value:t.qSelectionThreshold},qTextSearch:{value:t.qTextSearch},qRangeInfo:{value:t.qRangeInfo},parent:{value:e}})}function n(e,n,i){t.create(this,"OnData");Object.defineProperties(this,{qapp:{value:e},selections:{value:[]},stateName:{value:i||"$"}});var o=this;n.then(function(t){s(o,t);t.Validated.bind(function(){s(o,t)})})}n.prototype.clearAll=function(t){return this.qapp.clearAll(t,this.stateName)};n.prototype.lockAll=function(){return this.qapp.lockAll(this.stateName)};n.prototype.unlockAll=function(){return this.qapp.unlockAll(this.stateName)};function i(t,e){return t.qapp.field(e,t.stateName)}function s(t,n){t.selections.length=0;if(n.layout.qSelectionObject){void 0===t.backCount&&Object.defineProperties(t,{backCount:{get:function t(){return n.layout.qSelectionObject.qBackCount||0}},forwardCount:{get:function t(){return n.layout.qSelectionObject.qForwardCount||0}}});n.layout.qSelectionObject.qSelections.forEach(function(n){t.selections.push(new e(n,t))});t.OnData.emit()}}return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(100),n(341),n(162)],s=function(t,e,n){var i=new e;function s(t){this.app=t}s.prototype.save=function(e){var n=this.app;t.isValidTheme(e).then(function(i){if(!i)throw new Error("Invalid theme id");n.waitForOpen.promise.then(function(){n.getLayout().then(function(n){if(!n.permissions.update)throw new Error("permission denied");t.saveTheme(e)})})})};s.prototype.get=function(t){if(!t)return this.app.waitForOpen.promise.then(function(){return n.getProperties().then(function(t){return i.get(t.theme)})});return i.get(t)};s.prototype.getApplied=function(){return i.get(t.getCurrentTheme())};return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(99),n(104),n(146),n(343),n(256),n(232),n(453),n(240)],s=function(t,e,n,i,s,o,r,a,l){var c,u,d,p=7,h=250;function f(t,e){return t.components&&t.components.dataArea&&t.components.dataArea.length&&t.components.dataArea[0].chartFormatter&&(null===t.components.dataArea[0].chartFormatter.measureFormatters||null===t.components.dataArea[0].chartFormatter.measureFormatters[e])}function g(t){var e=t.getBoundingRect();return Number.isNaN(+e.x+e.y+e.width+e.height)}function v(t){return t.getDimensions().join(", ")}function m(t){return t.id+(t.parent?"-"+t.parent.id:"")}function b(){if(u){u=null;d=null}c=null}function y(t,e,n,s){if(n){var o=new i(0,0,n.rect.width,n.rect.height);t=t.intersection(o)}return{positions:[e(t.x+t.width/2,t.y,n,s),e(t.x+t.width,t.y+t.height/2,n,s),e(t.x,t.y+t.height/2,n,s),e(t.x+t.width/2,t.y+t.height,n,s)],directions:["top","right","left","bottom"]}}function x(t,e){var n,i,s,o,r=[],a,l,c;var u={positions:null,directions:null,target:null,component:null};if(this._positionAtMouse||1!==this._cssTransform.scale){n=e||t[0].interactPosition;if(n){i=this.getTransformedPoint(n.x,n.y,this.containerRect);o=t[0].getShapes();r=o.filter(function(t){return t.pointInside(i.x,i.y)});u.target=r.length?r[0]:o[0];u.directions=["top","right","left","bottom"];u.positions=[n]}}else{t.forEach(function(t){var n=null;var l=null;o=t.getShapes();if(t.calculateTooltipPosition&&t.tooltipShape){l=this.components[t.tooltipShapeComponent]?this.components[t.tooltipShapeComponent][0]:void 0;s=t.getShapeBounds(t.tooltipShapeComponent,l&&l.chartScale||1);if(s){u.target=r.length?r[0]:o[0];u.component=l}}else{if(t.tooltipShape&&!g(t.tooltipShape)){r=[t.tooltipShape];u.component=this.components[t.tooltipShapeComponent]?this.components[t.tooltipShapeComponent][0]:void 0}else if(e){i=this.getTransformedPoint(e.x,e.y,this.containerRect);r=o.filter(function(t){return t.pointInside(i.x,i.y)})}u.target=r.length?r[0]:o[0];if(u.target)if(u.target.getRelevantPosition)n=u.target.getRelevantPosition();else{s=u.target.getBoundingRect();if(!u.target.clearModelView&&u.component){c=u.component.chartScale||1;s=s.clone();s.set(s.x*c,s.y*c,s.width*c,s.height*c)}}}if(n){u.positions=[this.getPagePoint(n.pos.x,n.pos.y,u.component,this.containerRect)];u.directions=n.direction}else a=a?s.combineWith(a):s},this);if(a){l=y(a,this.getPagePoint.bind(this),u.component,this.containerRect);u.positions=l.positions;u.directions=l.directions}}return u}function q(t,e){var n=[],i,s=0,o,r,a,l,c,u,d=this.measureFormatters||[];if(t.isCacheItem){c=t.getMeasures();u=t.getMeasuresIndecies(e);o=u.length;for(s;s<o;++s){var p=u[s];r=t.getValue(p);a=r;l=t.getPreformattedLabel(p);d[u[s]]?r="U"!==d[p].type&&l?l:d[p].format(r):r&&l&&f(this,p)?r=l:"NaN"===r&&(r="-");c[p]&&void 0!==r&&n.push({label:c[p],value:r+"",num:a})}}else{o=t.node.children.length;for(s;s<o;++s){r=t.node.children[s].children[0].data.qNum||t.node.children[s].children[0].data.qValue;a=r;l=t.node.children[s].children[0].data.qText;d[s]&&(r="U"!==d[s].type&&l?l:d[s].format(r));n.push({label:t.node.children[s].data.qText,value:r+"",num:a})}}if(this.colorMap){i=this.colorMap.getTooltipContent(t,e.rowIndex);i&&n.splice(0,0,i)}var h=[];n.forEach(function(t){h.some(function(e){return e.label===t.label&&(e.value===t.value||e.num===t.num)})||h.push(t)});return h}function S(t,e){var n=[],i=0,s=0;while(i<p&&s<t.length){n.push({header:v(t[s]),rows:q.call(this,t[s],e)});i+=n[s].rows.length+1;s++}t.length>s&&(n.numberInExcess=t.length-s);n.msrCount=n[0]?n.length*n[0].rows.length:0;return n}function w(t,n,i,s){var o=x.call(this,t,n);if(o.positions&&o.directions){var r=this.getPagePoint(0,0,o.component,this.containerRect);var a=S.call(this,t,o.target);var c=s?null:l.getDuration(a.msrCount);e.getService("qvChartTooltipService").open({target:{shape:o.target,targetToPageTranslation:r},position:o.positions,content:a,direction:o.directions,numberInExcess:a.numberInExcess,hideCallback:b.bind(this),dir:this.yMirrorMode?"rtl":"ltr"},c,i);u=t[0];d=t.map(m).join("")}}function C(t){var e=this.getTransformedPoint(t.x,t.y,this.containerRect);return this.shapesFrom.shapesFromPoints([e])}function I(t){var e=C.call(this,t);return e.map(m).join("")}function _(t){var n=this;this.setActiveComponent(this.getComponent(t.x,t.y,this.containerRect));var i=C.call(n,t);if(i&&i.length&&this.activeComponent){n._positionAtMouse="MapArea"===n.activeComponent.className||1!==n._cssTransform.scale;c=e.getService("$timeout")(function(){w.call(n,i,t,null,n._noDuration);c=null},h)}}function D(t,e){var n=this;if(t&&t.length&&this.activeComponent){n._positionAtMouse="MapArea"===n.activeComponent.className||1!==n._cssTransform.scale;w.call(n,t,null,e)}}function k(){e.getService("$timeout").cancel(c);c=null;this.prevPoint=null}function T(){if(u){u=null;d=null;e.getService("qvChartTooltipService").close()}c=null}function E(t,e){var n=e?e.length:0,i,s;for(i=0;i<n;i++){s=e[i];if(s&&s.pointInside&&s.pointInside(t.x,t.y))return true}return false}function A(t){var e=t?t.length:0,n=[],i,s,o;for(i=0;i<e;i++){s=t[i]._shapes;if(!o){o=t[i]._interactPosition;o&&(o=this.getTransformedPoint(o.x,o.y,this.containerRect))}o&&E(o,s)&&(n[n.length]=t[i])}n.length||(n=t);return n}var L=o.extend("ChartTooltip",{init:function t(e,n,s){this._super(s,n);this.cache=s;u=null;c=null;this.container=e;this.containerRect=new i(0,0,0,0);this._positionAtMouse=true;this._enabled=true;this._allowNullSelect=true;this.touchTimeout=Number.isNaN(+n.touchTimeout)?10:n.touchTimeout},refreshContainerRect:function t(){this.offset=this.container.offset();var e=this.offset;var n=this.container.width();var i=this.container.height();this.containerRect.set(e.left,e.top,n,i)},on:function t(){if(this._isListening)return;this._isListening=true;var e=this;this._interactionEvents=r.extend({preventDefault:false,mousemove:function t(n){var i=new s(n.pageX,n.pageY);e.refreshContainerRect();e.move(n,i)},mouseleave:function t(n){e.leave(n)},mousewheel:function t(){e.cancel()},swipe:{start:function t(){e.cancel()},cancel:function t(){e.cancel()}},swipetwo:{start:function t(){e.cancel()},cancel:function t(){e.cancel()}},rotate:{start:function t(){e.cancel()},cancel:function t(){e.cancel()}},active:function t(){return e._enabled&&(u||n.treatAsDesktop())}});this._tapEvents=r.extend({preventDefault:false,tap:{end:function t(n,i){var s=i.pagePoints[0];e.refreshContainerRect();e.setActiveComponent(e.getComponent(s.x,s.y,e.containerRect));var o=C.call(e,s);o.forEach(function(t){t.interactPosition=s});e.updateHighlightedShape(o)}},active:function t(){return e._enabled}});n.treatAsDesktop()&&a.MouseLeave.bind(e._interactionEvents.mouseleave);function i(t){if(n.treatAsDesktop())a.addInteraction(e._interactionEvents,t.container,0,["mousemove","mouseleave","swipe","mousewheel"]);else{a.addInteraction(e._interactionEvents,t.container,0,["swipe","swipetwo","rotate"]);a.addInteraction(e._tapEvents,t.container,0,["tap"])}}this.registerAddedComponent=function(t){i(t)};this.deregisterAddedComponent=function(t){a.removeInteraction(e._interactionEvents,t.container);a.removeInteraction(e._tapEvents,t.container)};Object.keys(this.components).map(function(t){return e.components[t]}).forEach(function(t){t.forEach(function(t){e.registerAddedComponent(t)})})},register:function t(e,n){this.registerAddedComponent&&this.registerAddedComponent(n)},deregister:function t(e,n){this.deregisterAddedComponent&&this.deregisterAddedComponent(n)},off:function t(){this._isListening=false;a.MouseLeave.unbind(this._onMouseLeave);a.removeInteraction(this._interactionEvents);a.removeInteraction(this._tapEvents);this.registerAddedComponent=null;this.deregisterAddedComponent=null},initComponent:function t(e){this.setActiveComponent(this.getComponent(e.x,e.y,this.containerRect))},updateHighlightedShape:function t(e,i){if(e.length>=1){var s,o=true,r=false;s=A.call(this,e);if(!s||!s.length)return;if(!n.treatAsDesktop()){s=s.filter(function(t){return!t.selected});if(s.length)if(u||c){if(s.length>1||s[0]!==u){o=false;r=true}}else{o=false;r=true}if(o){k.call(this);T.call(this)}r&&D.call(this,s,this.touchTimeout)}}else if(!n.treatAsDesktop()&&i){k.call(this);T.call(this)}},getRect:function t(e){if(!e)return new i(0,0,0,0);return e.hasOwnProperty("innerRect")?e.innerRect:e.rect},move:function t(e,i){if(!n.treatAsDesktop()||!this._enabled)return;if(null!==c){if(!this.prevPoint||i.distanceTo(this.prevPoint)>5){k.call(this);_.call(this,i)}}else{this.prevPoint=i;if(u){if(I.call(this,i)!==d){T.call(this);_.call(this,i)}}else _.call(this,i)}},setCssTransform:function t(e){this._cssTransform=e||{scale:1}},leave:function e(n){var i=n.toElement||n.relatedTarget;if(!t(i).hasClass("qvt-chart-tooltip")&&!t(i).parents(".qvt-chart-tooltip").length){k.call(this);T.call(this)}},cancel:function t(){k.call(this);T.call(this)},clearSelection:function t(){k.call(this);T.call(this)},release:function t(){this._super();this.off()}});Object.defineProperties(L.prototype,{enabled:{set:function t(e){this._enabled=e},get:function t(){return this._enabled}}});return L}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(92),n(652),n(344)],s=function(t,e,n,i){function s(t){return t?t.selectionIdentifier:null}function o(t,e){if(e){var n=false;e.contains(0)&&(n=t.parent?-2===t.parent.id:-2===t.id);t.parent&&e.contains(1)&&(n=n||-2===t.id);return n}return-2===t.id||t.parent&&-2===t.parent.id}function r(t,e){return t&&t.length?e.filter(function(e){return t.some(function(t){return e.col===t.col&&e.id===t.id})}):[]}var a=e.extend({init:function e(n,i){this.options=t.extend(true,{},{allowNullSelect:false,activeComponent:null},i);this.cache=n;this.allowNullSelect=this.options.allowNullSelect;this.activeComponent=this.options.activeComponent},shapeFromPoint:function t(e){return this.shapesFromPoints([e])[0]},shapesFromPoints:function t(e){var n,i,r,a=this.cache.data,l=this.cache.data.length,c=e.length,u,d,p,h=(this.activeComponent||this.components&&this.components.dataArea)&&(this.activeComponent||this.components.dataArea[0]).chartScale||1,f,g=s(this.activeComponent),v,m,b,y=[];for(v=0;v<l;++v){f=a[v];if(!o(f)||this.allowNullSelect)for(m=0;m<c;++m){n=e[m];i={x:n.x/h,y:n.y/h};d=f.getShapes(s(this.activeComponent));"dataArea"===g&&f.toggleShapes&&(d=d.concat(f.toggleShapes));u=d.length;for(b=0;b<u;++b){p=d[b];r=p.clearModelView?n:i;if(p.pointInside(r.x,r.y)){y.push(f);break}}}}return y},shapesFromLines:function t(e){var n,i=this.cache.data,r=this.cache.data.length,a=e.length,l,c,u,d,p,h,f,g=[];for(p=0;p<r;++p){d=i[p];if(!o(d)||this.allowNullSelect)for(h=0;h<a;++h){n=e[h];c=d.getShapes(s(this.activeComponent));l=c.length;for(f=0;f<l;++f){u=c[f];if(u.intersectsLine(n)){g.push(d);break}}}}return g},shapesFromPolygon:function t(e){var n,i,r=this.cache.data,a=this.cache.data.length,l,c,u,d,p,h,f,g,v=[];for(p=0;p<a;++p){d=r[p];if(!o(d)||this.allowNullSelect){g=false;u=d.getShapes(s(this.activeComponent));c=u.length;for(f=0;f<c;++f){if(g)break;n=u[f].getPoints();l=n.length;for(h=0;h<l;++h){i=n[h];if(e.pointInside(i.x,i.y)){v.push(d);g=true;break}}}}}return v},shapesFromRect:function t(e,n){if(!e)return[];var i=this.cache.data,r=this.cache.data.length,a,l,c,u,d,p,h=[];for(d=0;d<r;++d){u=i[d];if(!o(u)||this.allowNullSelect){l=u.getShapes(n||s(this.activeComponent));a=l.length;for(p=0;p<a;p++){c=l[p];if(c.intersectsRect){if(c.intersectsRect(e)){h.push(u);break}}else if(e.intersectsWith(c)){h.push(u);break}}}}return h},shapesFromRectForDirection:function t(e,n,i){var r=this.cache.data,a=this.cache.data.length,l,c,u,d,p,h,f,g=[],v=0,m=0,b="";switch(n){case"x":v=e.x;m=e.getRight();b="getRight";break;case"y":v=e.y;m=e.getBottom();b="getBottom";break}for(h=0;h<a;++h){l=r[h];if(!o(l)||this.allowNullSelect){u=l.getShapes(i||s(this.activeComponent));c=u.length;for(f=0;f<c;++f){d=u[f];if("cx"in d){if(d["c"+n]>=v&&d["c"+n]<=m){g.push(l);break}}else{p=d.getBoundingRect();if(p[n]>=v&&p[n]<=m){g.push(l);break}if(p[b]()>=v&&p[b]()<=m){g.push(l);break}if(v>=p[n]&&m<=p[b]()){g.push(l);break}}}}}return g},shapesFromRange:function t(e,n,i,s){var r=Math.min(e,n),a=Math.max(e,n),l=this.cache.data,c=this.cache.data.length,u=this.activeComponent&&"function"===typeof this.activeComponent.getType?this.activeComponent.getType().indices:null,d,p,h,f,g,v=[],m;i=false!==i;s=false!==s;m=i&&s?function t(e){return e>=r&&e<=a}:i?function t(e){return e>=r&&e<a}:s?function t(e){return e>r&&e<=a}:function t(e){return e>r&&e<a};for(f=0;f<c;++f){d=l[f];if(!o(d)||this.allowNullSelect){p=d.values instanceof Array?d.values:d.value instanceof Array?d.value:[d.value];u&&u.length&&(p=p.filter(function(t,e){return u.indexOf(e)>=0}));for(g=0;g<p.length;g++){h=p[g];if(m(h)){v.push(d);break}}}}return v},shapesFromDimensionValue:function t(e){var n=this.cache.data,i=this.cache.data.length,s,r,a,l=[];for(r=0;r<i;++r){s=n[r];if(!o(s)||this.allowNullSelect)for(a=0;a<e.length;a++)if(s.id===e[a]){l.push(s);break}}return l},groupedItemsFromShapes:function t(e){var s,o,a,l,c=[];s=void 0!==this.activeComponent.getSelectionIndices?this.activeComponent.getSelectionIndices():[0];o=s[s.length-1];if(e&&e[0]&&e[0].col===o)return r(e,this.cache.data);e.forEach(function(t){l=t.parent;if(void 0!==l){a=i.getLevel.call(l)-(t.isCacheItem?0:1);a===o&&-1===c.indexOf(l)&&e&&c.push(l)}});if(c.length>0){e=[];c.forEach(function(t){e=e.concat(n.getCacheItems.call(t))})}return e},shapesFromIndex:function t(e,n){var i=Math.min(e,n),s=Math.max(e,n),o,r=this.cache.data,a=this.cache.data.length,l,c=[];for(l=0;l<a;++l){o=r[l];void 0!==o.index&&o.index>=i&&o.index<=s&&c.push(o)}return c},_isNull:o,release:function t(){this.cache=null;this.allowNullSelect=null;this.activeComponent=null}});return a}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(e,n){e.forEach(function(e){if(e.isCacheItem)n.push(e);else if(e.data.cacheItem)n.push(e.data.cacheItem);else if(e.cacheItem){n.push(e.cacheItem);if(e.cacheItem.isCacheItem)throw new Error("Using new cache item before its time")}e.children&&e.children.length>0&&t.apply(this,[e.children,n])});return n}var e={getCacheItems:function e(){if(!this.children||!this.children)return[];return t.apply(this,[this.children,[]])}};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(654)],s=function(){var t;t={transclude:true,template:'<div qva-chart-tooltip position="position" content="content" direction="direction" visible="visible" template="template" number-in-excess="numberInExcess" target="target" hide-callback="hideCallback" always-on-top="alwaysOnTop" options="options"></div>',controller:["$scope",function(t){t.visible=false;this.hide=function(){t.visible=false};this.show=function(e){t.content=e.content;t.position=e.position;t.direction=e.direction;t.template=e.template;t.numberInExcess=e.numberInExcess;t.alwaysOnTop=e.alwaysOnTop;t.visible=true;t.hideCallback=e.hideCallback;t.target=e.target;t.options={direction:e.dir}}}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(96),n(48),n(655),n(300),n(97),n(656)],s=function(t,e,n,i,s,o,r){var a=5;var l=5;var c=25;n.directive("qvaChartTooltip",function(){return{template:r,replace:true,scope:{content:"=",position:"=",visible:"=",direction:"=",template:"=",numberInExcess:"=",target:"=",hideCallback:"=",alwaysOnTop:"=",options:"="},link:function r(u,d){var p,h,f=false;p=function t(e){var n=e?"block":"none";d.css("display",n)};u.synchronAlign=function(){var e=d.find(".qv-tooltip"),n=d.find(".chart-tooltip-arrow"),o;p(u.visible);var r=u.direction instanceof Array?u.direction:[u.direction];o=s.alignToBestCoordinate(e,u.position,r,u.target,false,a,l);var h=e.offset(),g=s.getScrolledRect(t(window));switch(o.position){case"right":h.left+=9;o.y=g.y+Math.min(g.height-c,Math.max(c,o.y-g.y));break;case"left":h.left-=9;o.y=g.y+Math.min(g.height-c,Math.max(c,o.y-g.y));break;case"bottom":h.top+=9;o.x=g.x+Math.min(g.width-c,Math.max(c,o.x-g.x));break;default:h.top-=9;o.x=g.x+Math.min(g.width+g.x-c,Math.max(c,o.x-g.x));break}e.offset(h);if(n.length){n.removeClass().addClass("chart-tooltip-arrow").addClass(o.position);i.alignToCoordinate(e,o.x,o.y,o.position,n)}f=false};u.align=function(){h=n.getService("$timeout")(u.synchronAlign)};u.$watch("position",function(t){if(t&&(t instanceof Array||t.x&&t.y)){f=true;u.align()}});u.$watch("visible",function(t){f||p(t)});u.$watch("content",function(t){t||(u.visible=false)});u.hideTooltip=function(t){u.visible=false;u.hideCallback&&u.hideCallback();if(t&&t.stopPropagation){t.stopPropagation();t.preventDefault();e.preventGestures()}};u.$on("$destroy",function(){n.getService("$timeout").cancel(h);o.off("end",u.hideTooltip)});o.on("end",u.hideTooltip)}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t=Math.floor;function e(t){var e={left:"right",right:"left",top:"bottom",bottom:"top"};return e[t]}function n(t,n,i,s){var o=e(i),r={left:{width:0,height:.5},right:{width:1,height:.5},top:{width:.5,height:0},bottom:{width:.5,height:1}},a=r[o],l=0,c=0,u=0,d=0,p=n[0].getBoundingClientRect(),h=s.outerWidth();if("left"===o||"right"===o){u=parseInt(n.offset().top+p.height*(1-a.height)-t.offset().top-h*(1-a.height),10);"left"===o?c="auto":l="auto";d="auto"}else{l=parseInt(n.offset().left+p.width*(1-a.width)-t.offset().left-h*(1-a.width),10);"bottom"===o?u="auto":d="auto";c="auto"}s.css({left:l,right:c,top:u,bottom:d})}function i(n,i,s,o,r){var a=e(o),l={left:{width:0,height:.5,size:-1},right:{width:1,height:.5,size:1},top:{width:.5,height:0,size:-1},bottom:{width:.5,height:1,size:1}},c=l[a],u,d,p=n[0].getBoundingClientRect(),h=r[0].getBoundingClientRect();if("left"===a||"right"===a){u=c.width*(p.width-h.width)+h.width*c.size-parseInt(n.css("padding-left"));d=s-n.offset().top-h.width*(1-c.height)}else{u=i-n.offset().left-h.width*(1-c.width);d=c.height*(p.height-h.height)+h.height*c.size}r.css({left:t(u),top:t(d)})}function s(t,n,i){var s=e(n),o={left:{width:0,height:.5},right:{width:1,height:.5},top:{width:.5,height:0},bottom:{width:.5,height:1}},r=o[s],a,l,c=t.outerWidth(),u=t.outerHeight(),d=i.outerWidth(),p=i.outerHeight();if("left"===s||"right"===s){a=r.width*(c-d);l=i.offset().top-p*(1-r.height)}else{a=c*(1-r.width)-d*(1-r.width);l=r.height*(u-p)+p}i.css({left:a,top:l})}return{align:n,alignToParent:s,alignToCoordinate:i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div>\n\t<div ng-if="template" ng-include src="template"></div>\n\n\t<div ng-if="!template" qva-direction x-dir-setting="{{options.direction}}" class="qv-tooltip qvt-chart-tooltip" qva-press="hideTooltip($event)" tid="qv-chart-tooltip" ng-class="{\'above\':alwaysOnTop}">\n\t\t<div class="chart-tooltip-arrow"></div>\n\t\t<div class="qv-chart-tooltip-inner">\n\t\t\t<div ng-repeat="item in content" class="qv-chart-tooltip-item">\n\t\t\t\t<div class="qv-chart-tooltip-content">\n\t\t\t\t\t<div qva-direction x-dir-text="{{item.header}}" x-dir-setting="{{options.direction}}" class=\'qv-tp-header\' ng-if="item.header !== undefined">\n\t\t\t\t\t\t<strong>{{item.header}}</strong>\n\t\t\t\t\t</div>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr ng-repeat="row in item.rows" class="qv-tp-row">\n\t\t\t\t\t\t\t<td class=\'qv-tp-item\' ng-if="row.hasOwnProperty(\'label\')">\n\t\t\t\t\t\t\t\t<span qva-direction x-dir-text="{{row.label}}" class="qv-tp-rowPart" ng-class="{\'qv-tp-single\' : (content.length + item.rows.length) <= 3}">{{row.label}}</span>\n\t\t\t\t\t\t\t\t<span>:&nbsp;</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td ng-if="!row.template" class=\'qv-tp-value\'>\n\t\t\t\t\t\t\t\t<div class="qv-tp-rowPart" dir="ltr">{{row.value}}</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td ng-if="row.template" class=\'qv-tp-template qv-tp-value\' ng-bind-html="row.template" ng-attr-colspan="{{row.hasOwnProperty(\'label\') && 1 || 2 }}">\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-chart-tooltip-excess" ng-if="numberInExcess > 0" q-translation="Object.ChartTooltip.NMore,{{numberInExcess}}">More</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(342),n(454)],s=function(t,e){function n(){this.data=[]}Object.defineProperties(n.prototype,{has:{value:function t(e){return-1!==this.data.indexOf(e)}},add:{value:function n(i){if(!(i instanceof t)&&!(i instanceof e))throw new Error("Invalid cache item!");this.has(i)||this.data.push(i)}},remove:{value:function t(e){var n=this.data.indexOf(e);-1!==n&&this.data.splice(n,1)}},clear:{value:function t(){this.data.length=0}}});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(659)],s=function(t,e){t.service("qvDefaultViewSelectionService",[function(){return{createSelections:function t(n,i,s,o){var r,a;if(!s||!s.dataArea)return;s.range&&(s.range.rtl="rtl"===n.options.direction);s.isPopover=n.options.isPopover;s.selectionsDisabled=n.options.selectionsDisabled||false;r=new e(i,s,o);r.Activated.bind(function(){n.selectionsApi.activated()});r.Deactivated.bind(function(){n.selectionsApi.deactivateSearch&&n.selectionsApi.deactivateSearch()});r.Cancel.bind(function(){n.selectionsApi.cancel()});r.Select.bind(function(){n.selectionsApi.selectionsMade=true});r.SelectRange.bind(function(){n.selectionsApi.selectionsMade=true});r.SelectAttributeDim.bind(function(){n.selectionsApi.selectionsMade=true});r.Confirm.bind(function(){n.backendApi.endSelections(true);n.selectionsApi.deactivated()});r.ResetSelections.bind(function(){n.backendApi.clearSelections()});n.selectionsApi.confirm=function(){r&&r.confirm()};a=n.selectionsApi.deactivated.bind(n.selectionsApi);n.selectionsApi.deactivated=function(){r&&r.deactivate();a()};n.selectionsApi.deactivate=function(){if(r){r.deactivate();this.deactivated()}};n.selectionsApi.clear=function(){r.clearSelection();n.backendApi.clearSelections();n.tooltipApi.cancel();n.selectionsApi.selectionsMade=false};n.selectionsApi.toggleKeyboardAccelerators=function(t){r.toggleKeyboardAccelerators(t)};n.selectionsApi.getKeyAsToggleSelected=function(t){return r.getKeyAsToggleSelected(t)};n.selectionsApi.toggleSearch=function(){n.options.search.toggle()};n.selectionsApi.activate=function(){r.autoActivate()};n.selectionsApi.on=function(){r.on()};n.selectionsApi.off=function(){r.off()};n.$on("$destroy",function(){if(r){r.release();r=null}});return r}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(92),n(102),n(660),n(662),n(667),n(104),n(256),n(232),n(101)],s=function(t,e,n,i,s,o,r,a,l,c){var u,d,p={dataArea:i,range:s,colorLegend:o};function h(e){Object.keys(e).forEach(function(n){n in p&&(this.types[n]=new p[n](this,t.extend(true,{},p[n].defaultOptions,e[n])))},this)}function f(t,e){var n;for(n=0;n<e.length;n++)if(t.contains(e[n]))return true;for(n=0;n<t.length;n++)if(e.contains(t[n]))return true;return false}function g(t){var e=c.getValue(t,"activeComponent.backendApi",{});var n=e.getDimensionInfos&&e.getDimensionInfos()||[];var i=n.length-1;var s=c.getValue(n,i+".qIsOneAndOnlyOne",false);i>0&&s&&c.getValue(n,i+".qCardinalities.qHypercubeCardinal")>1&&(s=false);return s}u=e.extend({init:function e(i,s,o){n.mixin(this);this.notification("Activated");this.notification("Deactivated");this.notification("ToggleShape");this.notification("ToggleShapes");this.notification("SelectWhileLocked");this.notification("SelectWhileSingleSelect");this.notification("Lasso");this.notification("Confirm");this.notification("Cancel");this.notification("Select");this.notification("SelectRange");this.notification("SelectAttributeDim");this.notification("Clear");this.notification("ResetSelections");this.notification("UpdateRanges");this._active=false;this._autoActivated=false;this._isListening=false;this._isScrolling=false;this._isLocked=false;this._shiftPressed=false;this._lassoEnabled=false;this._allowLasso=true;this._enabled=true;this.container=i;this.options=t.extend(true,{},{toggle:true,toggleRect:true,swipe:true,ctrlKeyAsToggleSelected:false},s);this.cache=o;this.containerRect=new r(0,0,0,0);this.types={};this._keyboard=true;h.call(this,this.options)},setContainer:function t(e){this.off();this.container=e;this.on()},refreshContainerRect:function t(){this.offset=this.container.offset();var e=this.offset;var n=this.container.width();var i=this.container.height();this.containerRect.set(e.left,e.top,n,i)},canTypeBeActivated:function t(e){return!(e&&e.activeComponent&&"function"===typeof e.activeComponent.isSelectionLocked?e.activeComponent.isSelectionLocked():this._isLocked)},on:function t(){if(this._isListening)return;this._isListening=true;var e=this,n=this.options,o;this._reset=function(){o=null};this.getActiveType=function(){return e._activeType};this.getActiveMode=function(){return e._activeType?e._activeType.getActiveMode():null};function r(){if(e._activeType&&e._activeType!==o){var t=e._activeType.getActiveDimensions();if(e._activeType.getActiveMode()!==o.getActiveMode()||!f(t,o.getActiveDimensions())){e._activeType.clearSelection();e.ResetSelections.emit()}e._activeType.cancel()}e._activeType=o}function c(){r();n._disableSelectionActivation||e.activate()}function u(){return e._active}function p(){return o&&n.swipe}this._setTypeOnAutoActivate=function(){o=e.types.dataArea};this._activateType=function(t){o=t;r()};this._mouseUp=function(t){1===t.which&&(!e._shiftPressed&&e._drawingWithShift||e._shiftPressed&&e._drawingWithoutShift)&&e.Lasso.emit(!e.lassoEnabled)};this._shiftToggle=function(t){e._shiftPressed=t;if(!e._allowLasso||!e._keyboard||e._drawingWithShift||e._drawingWithoutShift)return;e._active&&e.Lasso.emit(!e.lassoEnabled)};this._keyPressed=function(t){if(!e._keyboard)return;if(!u())return;27===t?e.cancel():13===t&&(o&&o.getIsEditing&&o.getIsEditing()?o.confirmEdit():e.confirm())};l.ShiftToggle.bind(this._shiftToggle);l.KeyPressed.bind(this._keyPressed);l.MouseUp.bind(this._mouseUp);this.types.range&&this.types.range.on&&this.types.range.on();var h=false,v;function m(t,n){d=n;o=t;e.refreshContainerRect();o&&o.initComponent(n)}this._eventHandlers=a.extend({preventDefault:false,tap:{start:function t(e,n,i){m(i,n.pagePoints[0]);document.activeElement&&document.activeElement.blur()},end:function t(i,s){if(!o||o.internal||!n.toggle)return;if(!e.canTypeBeActivated(o)){e.SelectWhileLocked.emit();return}c();l.preventGestures(this);o.toggle.call(o,i,s.pagePoints[0]);o.getSelectedShapes().length>0&&e.Select.emit(o.getSelectedShapes(),e.getKeyAsToggleSelected(i))}},taptwo:{start:function t(){},end:function t(i,s,r){if(!n.toggleRect)return;m(r,s.pagePoints[0]);if(!o||!n.toggle)return;if(!e.canTypeBeActivated(o)){e.SelectWhileLocked.emit();return}c();o.toggleRect.call(o,i,s.pagePoints[0],s.pagePoints[1])}},exclusive:function t(){return e.lassoEnabled},active:function t(){return e._enabled||e._drawingWithShift||e._drawingWithoutShift}});this._swipeHandlers=a.extend({preventDefault:true,swipe:{start:function t(s){if(!p()&&!n._enablePanning)return;e._shiftPressed&&!e._active&&e.allowLasso&&e.Lasso.emit(!e.lassoEnabled);if(!o||o.internal)return;e._drawingWithShift=e._shiftPressed;e._drawingWithoutShift=!e._shiftPressed;if(!e.lassoEnabled&&o.activeComponent&&o instanceof i){this._isPanning=true;return}if(o.activeComponent){this._isPanning=false;h=true;v=this.options.useMomentum;this.options.useMomentum=false;if(!e.canTypeBeActivated(o)){e.SelectWhileLocked.emit();return}if(g(o)){e.SelectWhileSingleSelect.emit();return}c();o.start.call(o,s,d)}},update:function t(i,s){if(!p()&&!n._enablePanning)return;if(!this._isPanning&&h&&o){if(!e.canTypeBeActivated(o)){e.SelectWhileLocked.emit();return}if(g(o)){e.SelectWhileSingleSelect.emit();return}o.update.call(o,i,s.pagePoints[0])}},end:function t(i,s){if(!p()&&!n._enablePanning)return;e._drawingWithShift=false;e._drawingWithoutShift=false;if(this._isPanning)this._isPanning=false;else if(h&&o){h=false;this.options.useMomentum=v;if(!e.canTypeBeActivated(o)){e.SelectWhileLocked.emit();return}if(g(o)){e.SelectWhileSingleSelect.emit();return}o.end.call(o,i,s)}},cancel:function t(){e._drawingWithShift=false;e._drawingWithoutShift=false;if(!o||!h)return;this.options.useMomentum=v;o.cancel.call(o,true)}},exclusive:function t(){return e.lassoEnabled},active:function t(n){return e._enabled&&(e.lassoEnabled||e._drawingWithShift||e._drawingWithoutShift||n instanceof s)}});function b(t,n){l.addInteraction(e._eventHandlers,t.container,1,["tap","taptwo"],n)}function y(t,n){l.addInteraction(e._swipeHandlers,t.container,1,["swipe"],n)}function x(t){l.removeInteraction(e._swipeHandlers,t.container)}this.registerAddedComponent=function(t,e){if(!t.internal&&!(t instanceof s&&"dataArea"===e.selectionIdentifier)){b(e,t);t instanceof s&&y(e,t)}};this.deregisterAddedComponent=function(t,n){if(!t.internal&&!(t instanceof s&&"dataArea"===n.selectionIdentifier)){l.removeInteraction(e._eventHandlers,n.container);l.removeInteraction(e._swipeHandlers,n.container)}};this.registerLasso=function(){var t=this.types["dataArea"];Object.keys(t.components).map(function(e){return t.components[e]}).forEach(function(e){e.forEach(function(e){y(e,t)})})};this.deregisterLasso=function(){var t=this.types["dataArea"];Object.keys(t.components).map(function(e){return t.components[e]}).forEach(function(t){t.forEach(function(t){x(t)})})};Object.keys(this.types).map(function(t){return this.types[t]},this).forEach(function(t){return Object.keys(t.components).map(function(e){return t.components[e]}).forEach(function(n){n.forEach(function(n){e.registerAddedComponent(t,n)})})})},register:function t(e,n){this.registerAddedComponent&&this.registerAddedComponent(e,n)},deregister:function t(e,n){this.deregisterAddedComponent&&this.deregisterAddedComponent(e,n)},off:function t(){l.ShiftToggle.unbind(this._shiftToggle);l.KeyPressed.unbind(this._keyPressed);l.MouseUp.unbind(this._mouseUp);l.removeInteraction(this._eventHandlers);l.removeInteraction(this._swipeHandlers);this.types.range&&this.types.range.off&&this.types.range.off();this._isListening=false;this.registerAddedComponent=null;this.deregisterAddedComponent=null;this.registerLasso=null;this.deregisterLasso=null},autoActivate:function t(){if(this._autoActivated||!this._isListening)return;this._autoActivated=true;this._setTypeOnAutoActivate();this._activeType=this.types.dataArea;this._activeType.initComponent();this.activate()},activate:function t(e){if(!this._active){this.Activated.emit();this._active=true;this._shiftPressed&&!this.lassoEnabled&&this.Lasso.emit(true)}e&&this._activateType(e)},deactivate:function t(e){if(this._active){this._active=false;this._autoActivated=false;e||this.clearSelection();if(this._activeType){this._activeType.cancel();this._activeType=void 0}this.Deactivated.emit();this._reset()}},confirm:function t(){this._activeType&&this.deactivate(true);this.Confirm.emit()},cancel:function t(){this.deactivate();this.Cancel.emit()},clearSelection:function t(){this._activeType&&this._activeType.clearSelection()},toggleKeyboardAccelerators:function t(e){this._keyboard=e},getKeyAsToggleSelected:function t(e){return!(e.metaKey||e.ctrlKey)},release:function t(){this.off();n.release(this);Object.keys(this.types).forEach(function(t){this.types[t].release()},this)},setLocked:function t(e){this._isLocked=e}});Object.defineProperties(u.prototype,{allowLasso:{set:function t(e){this._allowLasso=e},get:function t(){return this._allowLasso}},lassoEnabled:{set:function t(e){this._lassoEnabled=e&&this.allowLasso;this._lassoEnabled&&this.registerLasso&&this.registerLasso();!this._lassoEnabled&&this.deregisterLasso&&this.deregisterLasso()},get:function t(){return this._lassoEnabled}},enabled:{set:function t(e){this._enabled=e},get:function t(){return this._enabled}}});return u}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(146),n(401),n(104),n(226),n(266),n(661),n(101)],s=function(t,e,n,i,s,o,r,a){var l,c=t("<div />"),u=c[0],d=t("<canvas />"),p=d[0],h=t("<canvas />"),f=h[0],g=t("<canvas />"),v=g[0],m=p.getContext("2d"),b=f.getContext("2d"),y=v.getContext("2d"),x,q=[],S=false,w=false;u.appendChild(p);u.appendChild(f);u.appendChild(v);u.className="selections-data-area-ui";c.hide();function C(){m.beginPath();m.moveTo(x.x,x.y);m.fillStyle="rgba(0, 152, 69, 1)";m.arc(x.x,x.y,10,0,2*Math.PI,true);m.fill()}function I(t,e,n){var i,s;!n||"x"!==n&&"y"!==n||(e[n]=x[n]);i=(t.x+e.x)/2;s=(t.y+e.y)/2;m.beginPath();m.moveTo(t.x,t.y);m.quadraticCurveTo(i,s,e.x,e.y);m.stroke()}function _(t,e,n,i){i=i||[2,4];var s=i.length,o=n.x-e.x,r=n.y-e.y,a=Math.sqrt(o*o+r*r),l=a,c=0,u=true,d,p=e.x,h=e.y;o/=a;r/=a;t.moveTo(p,h);for(c=0;l>=.1&&c<5e3;++c){d=i[c%s];0===d&&(d=.001);d>l&&(d=l);p+=d*o;h+=d*r;t[u?"lineTo":"moveTo"](p,h);l-=d;u=!u}}function D(t,e){b.clearRect(0,0,f.width,f.height);b.beginPath();_(b,t,e);b.stroke()}function k(){c.hide();d.hide();h.hide();c.detach()}function T(t){var e=a.getValue(this,"components.dataArea.0._data.qHyperCube.qDimensionInfo",[]);return a.getValue(e,t+".qIsOneAndOnlyOne",false)}function E(t){if(!t.length)return 0;var e=a.getValue(this,"components.dataArea.0._data.qHyperCube.qDimensionInfo",[]);if(1===e.length)return 0;var n;if(1===t.length){var i=t[0].parent&&t[0].parent.children.length;n=1===i||false}else 2===e.length&&(n=e[1].qIsOneAndOnlyOne&&e[1].qCardinalities.qHypercubeCardinal>1||false);var s=n?0:1;return s}l=o.extend("DataAreaSelection",{init:function t(e,n){this._super(e,n);this.setActiveMode("item");this._startIndex=-1;this._endIndex=-1},initComponent:function t(){this.setActiveComponent(this.components.dataArea[0])},refreshCanvas:function t(){this.rect=this.components.dataArea[0].rect;var e={position:"absolute",left:this.rect.x+"px",top:this.rect.y+"px",width:this.rect.width+"px",height:this.rect.height+"px","z-index":20};m.canvas.width=this.rect.width;m.canvas.height=this.rect.height;m.lineWidth=2;m.lineCap="round";m.lineJoin="round";m.strokeStyle="rgba(102,102,102,1)";m.fillStyle="rgba(102,102,102,1)";d.css(e);b.canvas.width=this.rect.width;b.canvas.height=this.rect.height;b.lineWidth=2;b.lineCap="round";b.lineJoin="round";b.strokeStyle="rgba(102,102,102,1)";h.css(e);y.canvas.width=this.rect.width;y.canvas.height=this.rect.height;g.css(e)},toggle:function t(e,n,s){s=void 0!==s?s:this.handler.getKeyAsToggleSelected(e);var o=this.getTransformedPoint(n.x,n.y),r,a=this.options.toggle.callback||this.toggleSelection,l=this.options.indexSelection,c=this.ToggleFlag.auto|this.ToggleFlag.tooltip;r=l?this.shapesFromRectForDirection(new i(o.x,o.y,0,0),"y"):this.shapesFromPoints([o]);r=this.groupedItemsFromShapes(r);var u=T.call(this,E.call(this,r));u?this.cancel(true):s||this.clearSelection();this.resetSelectedShapes();this.setActiveComponent(this.components.dataArea[0]);r.forEach(function(t){t.selectionMode="dataArea";t.interactPosition=n});a.call(this,r,c);return r&&r.length>0},toggleRect:function e(n,s,o){if(!s||!o)return;var a,l,c,u,d,p,h,f,g,v=t(this.components.dataArea[0].container),m=v.offset(),b=function t(e){return{x:Math.min(Math.max(e.x,m.left),m.left+v.width()),y:Math.min(Math.max(e.y,m.top),m.top+v.height())}},y,x;s=b(s);o=b(o);y=s;x=o;this.resetSelectedShapes();s=this.getTransformedPoint(s.x,s.y);o=this.getTransformedPoint(o.x,o.y);a=Math.min(s.x,o.x);l=Math.min(s.y,o.y);c=Math.max(1,Math.abs(o.x-s.x));u=Math.max(1,Math.abs(o.y-s.y));d=new i(a,l,c,u);h=this.ToggleFlag.select;f=this.options.indexSelection;g=this.toggleSelection;this.setActiveComponent(this.components.dataArea[0]);p=f?this.shapesFromRectForDirection(d,"y"):this.shapesFromRect(d);p=this.groupedItemsFromShapes(p);p.forEach(function(t){t.selectionMode="dataArea"});g.call(this,p,h);this.getSelectedShapes().length>0&&this.handler.Select.emit(this.getSelectedShapes(),true);r.flash(y,x)},start:function t(n,s){this.handler.getKeyAsToggleSelected(n)||this.clearSelection();this.resetSelectedShapes();this.setActiveComponent(this.components.dataArea[0]);var o=this.getTransformedPoint(s.x,s.y),r=this.options.captureInput,a=this.options.indexSelection;if(r){d.show();h.show();c.appendTo(this.handler.container);c.show();this.refreshCanvas()}q.length=0;q.push(o);x=new e(q[0].x,q[0].y);S=false;w=false;if(a){var l=this.shapesFromRectForDirection(new i(x.x,x.y,1,1),"y"),u=l.length&&l[0].index;void 0!==u&&u>=0&&(this._startIndex=u)}r&&C()},update:function t(e,n){var o=this.getTransformedPoint(n.x,n.y),r=this.options,a=r.captureInput,l=r.lassoAutoCloseDistance,c=r.indexSelection,u=e.shiftKey&&r.shiftLockCapture?r.shiftLockAxis:"",d,p=this.ToggleFlag.select,h,g,v,m=-1,y=this.toggleSelection;d=q[q.length-1];q.push(o);a&&I(d,o,u);if(a){S||(S=q.length>2&&x.distanceTo(o)>=l);b.clearRect(0,0,f.width,f.height);if(S)if(x.distanceTo(o)<=l){D(o,x);w=true}else w=false}if(c){v=this.shapesFromRectForDirection(new i(o.x,o.y,1,1),"y");m=v.length?v[0].index:-1;void 0!==m&&m>=0&&(this._endIndex=m);h=this.shapesFromIndex(this._startIndex,this._endIndex);g=this.getSelectedShapes().filter(function(t){return-1===h.indexOf(t)});y.call(this,g,this.ToggleFlag.deselect);y.call(this,h,p)}else{h=this.shapesFromLines([new s(d.x,d.y,o.x,o.y)]);h=this.groupedItemsFromShapes(h);h.forEach(function(t){t.selectionMode="dataArea"});y.call(this,h,p)}},end:function t(e){var i=this.options.captureInput,s=this.options.indexSelection,o,r,a=this.ToggleFlag.select,l=this.toggleSelection;if(s){this._startIndex=-1;this._endIndex=-1}i&&k();if(i&&w){r=new n(q);o=this.shapesFromPolygon(r);o=this.groupedItemsFromShapes(o);o.forEach(function(t){t.selectionMode="dataArea"});l.call(this,o,a)}q.length=0;var c=this.getSelectedShapes();if(c.length>0){var u=T.call(this,E.call(this,c));u&&c.length>1?this.cancel():this.handler.Select.emit(c,this.handler.getKeyAsToggleSelected(e))}},cancel:function t(e){q.length&&k();e&&this.clearSelection();this.setActiveComponent(null)}});l.defaultOptions={captureInput:true,indexSelection:false,shiftLockCapture:false,shiftLockAxis:"x",lassoAutoCloseDistance:50,autoConfirm:false,toggle:{callback:null},interpolation:{pixelPrecision:2}};return l}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(51)],s=function(t,e){var n={template:'<div class ="qv-framer" ng-style="style"></div>',controller:["$scope",function(t){t.style={};t.style.top=t.top;t.style.left=t.left;t.style.height=t.height;t.style.width=t.width;t.closeComponent()}],scope:{top:"=",left:"=",height:"=",width:"=",closeComponent:"="}},i={flash:function i(s,o){var r=t.getService("$timeout"),a=e.show(n,{top:Math.min(s.y,o.y)+"px",left:Math.min(s.x,o.x)+"px",height:Math.max(s.y,o.y)-Math.min(s.y,o.y)+"px",width:Math.max(s.x,o.x)-Math.min(s.x,o.x)+"px",closeComponent:function t(){r(function(){a.destroy();a=null},300)}})}};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(266),n(146),n(104),n(101),n(663)],s=function(t,e,n,i,s,o){var r,a=false,l=Math.min,c=Math.max,u=t("<div />"),d=u[0],p=t('<div qva-range-selection visible="rangeSelectIsVisible" active-component="activeComponent" v-component="vComponent" h-component="hComponent" v-ranges="vRanges" h-ranges="hRanges" h-options="hOptions" v-options="vOptions"/>'),h={x:[],y:[]},f,g,v=15;function m(t){if(t.isCacheItem){var e=t.getDimensions();return e[e.length-1]}return t.parent&&t.parent.data&&t.parent.data.qText?t.parent.data.qText:t.label}function b(t,e){var n=t.indicators||t.getLevels()[0];var i=t.getPlotMax();var s=t.getPlotMin();var o=Number.MAX_VALUE;var r=-1;var a;for(a=0;a<n.values.length;a++){var l=n.values[a];var c=Math.abs(e-l);if(l<s||l>i)continue;if(!(c<o))break;o=c;r=a}if(-1!==a){var u=r;return{value:n.values[r],label:(n.qualifiedLabels||n.labels)[u]}}return null}function y(t,e,n){var i=t.getLevels();var s;for(s=i.length-1;s>=0;--s){var o=i[s];var r=null;var a=null;for(var l=0;l<o.values.length;++l){o.values[l]===e&&(r=(o.qualifiedLabels||o.labels)[l]);o.values[l]===n&&(a=(o.qualifiedLabels||o.labels)[l])}if(r&&a)return{l1:r,l2:a}}return{l1:null,l2:null}}function x(t,e){var n=t.isDiscrete&&t.isDiscrete();var i=t.isDimension&&!n;if(!i)return null;var s=t.getValueOfPosition(e);var o=b(t,s);if(!o)return null;o.newPoint=t.getPositionOfValue(o.value);var r=Math.abs(o.newPoint-e);if(r>v)return null;return o}function q(t,e){var n=this.getComponentKey(this.activeComponent);var i="x"===n?"width":"height";var s=t.rect[n];var o=t.rect[n]+t.rect[i];var r=this.activeComponent.rect;var a=this.getRect(this.activeComponent);var l=a[n]-r[n];var c=l+a[i];if(s===o&&0===s){o=e[n];s=e[n]}var u=null;var d=null;if(h[n].length>1)for(var p=0;p<h[n].length;++p){var f=h[n][p];if(t===f)continue;var g=f.rect[n];var v=f.rect[n]+f.rect[i];v<=s&&(null===u||v>u)&&(u=v);g>=o&&(null===d||g<d)&&(d=g)}l<=s&&(null===u||l>u)&&(u=l);c>=o&&(null===d||c<d)&&(d=c);return{min:u,max:d}}function S(t,e,n,i,s){var o=this.activeComponent,r=this.components.dataArea[0].rect,a=function t(e,i,r){if(s){if(s.switch){var a=n.startVal;n.startVal=n.updateVal;n.updateVal=a}var l=Math.max(Math.min(s.value,o.getPlotMax()),o.getPlotMin());0===s.index&&"horizontal"===r||1===s.index&&"vertical"===r?n.startVal=l:n.updateVal=l}else{n.startVal=o.getValueOfPosition(e);n.updateVal=o.getValueOfPosition(i);n.maxIncluded=!o.isDimension||o.getDataMax()<=n.updateVal}},u=0,d=0,p=0,h=0,f,g,v,b,y,S=o.isDiscrete&&o.isDiscrete(),w=q.call(this,n,t);switch(o.dock){case"top":case"bottom":u=l(t.x,e.x);p=c(t.x,e.x);d=0;h=r.height;if(null!==w.min&&w.min>u){i&&(p+=w.min-u);u=w.min}else{f=x(o,u);if(f){n.startLabel=f.label;u=null===w.min?f.newPoint:Math.max(w.min,f.newPoint)}else n.startLabel=L(o.getValueOfPosition(u),o)}if(null!==w.max&&w.max<p){i&&(u+=w.max-p);p=w.max}else{g=x(o,p);if(g){n.updateLabel=g.label;p=null===w.max?g.newPoint:Math.min(w.max,g.newPoint)}else n.updateLabel=L(o.getValueOfPosition(p),o)}n.rect.set(u,d,p-u,h-d);if(S){v=this.shapesFromRectForDirection(n.rect,"x","dataArea");if(v.length){b=this.options&&this.options.rtl?v[v.length-1]:v[0];y=this.options&&this.options.rtl?v[0]:v[v.length-1];n.startVal=m(b);n.updateVal=m(y)}else{n.startVal="-";n.updateVal="-"}n.maxIncluded=true}else a.call(this,u,p,"horizontal");break;case"left":case"right":d=l(t.y,e.y);h=c(t.y,e.y);u=0;p=r.width;if(null!==w.min&&w.min>d){i&&(h+=w.min-d);d=w.min}if(null!==w.max&&w.max<h){i&&(d+=w.max-h);h=w.max}f=x(o,d);if(f){n.startLabel=f.label;d=f.newPoint}else n.startLabel=L(o.getValueOfPosition(d),o);g=x(o,h);if(g){n.updateLabel=g.label;h=g.newPoint}else n.updateLabel=L(o.getValueOfPosition(h),o);n.rect.set(u,d,p-u,h-d);if(S){v=this.shapesFromRectForDirection(n.rect,"y","dataArea");if(v.length){b=v[0];y=v[v.length-1];n.startVal=m(b);n.updateVal=m(y)}else{n.startVal="-";n.updateVal="-"}n.maxIncluded=true}else a.call(this,d,h,"vertical");break}}function w(){return this.components.x&&this.components.y&&1===this.components.x.length&&1===this.components.y.length&&!this.components.x[0].isDiscrete()&&!this.components.y[0].isDiscrete()}function C(){f.y=false;f.x=false;if(this._rangeEventWatchers){this._rangeEventWatchers.forEach(function(t){t()});this._rangeEventWatchers=null}u.hide();u.detach();f.rangeSelectIsVisible=false;h={x:[],y:[]}}function I(t,e,n){var i={rect:new s(0,0,0,0),startVal:0,updateVal:0,component:e};n?h[t].push(i):h[t][0]=i;return i}function _(t,e,n){var i=h[t],o="x"===t&&n.yMirrorMode;var r=o?e.end:e.start;var a=o?e.start:e.end;var l=y(n,r,a);var c=l.l1||(o?null:e.label);var u=l.l2||(o?e.label:null);var d=-1;for(var p=0;p<i.length;p++){var f=o?i[p].updateVal<=a&&r<=i[p].startVal:i[p].startVal<=r&&a<=i[p].updateVal;if(f){d=p;break}}if(-1===d)i.push({startVal:r,startLabel:c,updateVal:a,updateLabel:u,component:n,rect:new s(0,0,0,0),maxIncluded:false});else{var g=i[d];i[d]={startVal:g.startVal,startLabel:g.startLabel,updateVal:r,updateLabel:c,component:n,rect:new s(0,0,0,0),maxIncluded:false};i.push({startVal:a,startLabel:u,updateVal:g.updateVal,updateLabel:g.updateLabel,component:n,rect:new s(0,0,0,0),maxIncluded:false})}D(t,n.yMirrorMode)}function D(t,e){var n="x"===t&&e;var i=n?"updateVal":"startVal";var s=n?"startVal":"updateVal";var o=h[t];o.sort(function(t,e){return t[i]<e[i]?-1:t[i]>e[i]?1:0});for(var r=o.length-1;r>=0;--r){if(o[r].startVal===o[r].updateVal){o.splice(r,1);continue}if(r<o.length-1){var a=o[r][s];var l=o[r+1][i];if(a>=l){if(o[r+1][s]>o[r][s]){o[r][s]=o[r+1][s];n?o[r].startLabel=o[r+1].startLabel:o[r].updateLabel=o[r+1].updateLabel}o.splice(r+1,1);r<o.length-1&&++r}}}}function k(t,e,n){t||(t="x");e||(e=0);var i=h[t][e];if(!i){i={rect:new s(0,0,0,0),startVal:0,endVal:0};h[t][e]=i}i.component=n;return i}function T(t,e,n,i){var s=[],o=this._previousShapes?this._previousShapes.slice():[],r,a=this.getActiveMode(),l=h["y"===e?"x":"y"];if("range.discrete"===a){s=this.shapesFromRectForDirection(t.rect,e,"dataArea");s=this.groupedItemsFromShapes(s);s.forEach(function(t){var e=o.indexOf(t);e>=0&&o.splice(e,1);t.selectionMode=a});n.call(this,s,i);this._clearPrev&&n.call(this,o,this.ToggleFlag.deselect);this._shapes=s}else if("range.dimension"===a){if(this.components.dataArea&&this.components.dataArea[0].updateRangeSelection){var c=h[e].map(function(t){return A(t.startVal,t.updateVal,t.maxIncluded)});this.handler.UpdateRanges.emit(c)}}else{if(w.call(this)){r=l.length?t.rect.intersection(l[0].rect):t.rect;this.components.dataArea&&this.components.dataArea[0].updateRangeSelection&&this.components.dataArea[0].getIsReduced()||(s=this.shapesFromRect(r,"dataArea"));this.components.dataArea&&this.components.dataArea[0].updateRangeSelection&&this.components.dataArea[0].updateRangeSelection(r)}else s=this.shapesFromRange(t.startVal,t.updateVal);s.forEach(function(t){t.selectionMode=a});n.call(this,s,i);this._shapes=s}}function E(t,e,n,i){var s=this.getComponentKey(this.activeComponent),o=e,r=this.ToggleFlag.select,a=this.toggleSelection;S.call(this,g,o,t,n,i);var l=this.getActiveMode();"range.measure"===l?this.clearSelection(true):this._shapes&&a.call(this,this._shapes,this.ToggleFlag.deselect);T.call(this,t,s,a,r);this.updateRangeDisplay()}function A(t,e,n){return{min:Math.min(t,e),max:Math.max(t,e),maxIncluded:!!n}}function L(t,e){var n=e.isDiscrete&&e.isDiscrete();return n||!e.isDimension?e.getFormatter().format(t):e.formatValue(t)}function M(t){return o.getValue(t,"qHyperCube.qDimensionInfo.0.qIsOneAndOnlyOne",false)}r=n.extend("RangeSelection",{init:function t(e,n){this._super(e,n);this._shapes=null;this._nrEditing=0;this.setActiveMode("item")},initComponent:function t(e){this.previousComponent=this.activeComponent;this.setActiveComponent(this.getComponent(e.x,e.y));f.activeComponent=this.activeComponent;-1!==this.components.x.indexOf(f.activeComponent)?f.hComponent=f.activeComponent:-1!==this.components.y.indexOf(f.activeComponent)&&(f.vComponent=f.activeComponent)},setDirection:function t(e){this.options.rtl="rtl"===e},refreshContainer:function e(){var n=this.components.dataArea[0].rect,i=t(this.components.dataArea[0].container).position(),o=new s(i.left,i.top,n.width,n.height),r,a=[];["x","y"].forEach(function(t){this.components[t]&&!this.components[t].contains(this.activeComponent)&&(a=a.concat(this.components[t]))}.bind(this));this.activeComponent&&a.push(this.activeComponent);a.forEach(function(e){if(e.isVisible()){r=t(e.container).position();o=o.combineWith(new s(r.left,r.top,e.rect.width,e.rect.height))}},this);this._offset={left:i.left-o.x,top:i.top-o.y};u.css({left:o.x,top:o.y,width:o.width,height:o.height})},resetSelectedShapes:function t(){this._previousSelectedShapes=this._selectedShapes.concat();this._super()},getIsEditing:function t(){return this._editing},confirmEdit:function t(){f.$broadcast("confirmEdit")},getRect:function t(e,n){if(!e)return new s(0,0,0,0);n=n||false;return e.hasOwnProperty("innerRect")&&!n?e.innerRect:e.rect},getExtendedRect:function t(e){if(!e)return new s(0,0,0,0);if(e.hasOwnProperty("extendedRect"))return e.extendedRect;return this.getRect(e)},getTransformedPoint:function t(e,n){var s=this.getRect(this.activeComponent||this.components.dataArea[0],true);return new i(e-s.x-this.handler.containerRect.x,n-s.y-this.handler.containerRect.y)},getComponent:function t(e,n){var s=new i(e-this.handler.containerRect.x,n-this.handler.containerRect.y);return Object.keys(this.components).map(function(t){return this.components[t]},this).reduce(function(t,e){return t.concat(e)}).filter(function(t){return this.getRect(t).pointInside(s.x,s.y)},this)[0]},checkActiveMode:function t(e,n){e.contains(this.handler.getActiveMode())||this.clearSelection(n);this.setActiveMode(e[0])},toggleRect:function t(e,n,i){this.start(e,n);this.update(e,i);this.end(e)},toggle:function t(e,n,i){i=void 0!==i?i:this.handler.getKeyAsToggleSelected(e);var s;i||this.clearSelection();this.resetSelectedShapes();this._editing&&this.confirmEdit();if(this.activeComponent&&"function"===typeof this.activeComponent.isDiscrete&&this.activeComponent.isDiscrete()){this.cancel();s=this.getTransformedPoint(n.x,n.y);var o=this.shapesFromPoints([s]),r=this.options.toggle.callback||this.toggleSelection,a=this.ToggleFlag.auto|this.ToggleFlag.tooltip;a=M(this.activeComponent.backendApi.model.layout)?this.ToggleFlag.replace:a;o=this.groupedItemsFromShapes(o);o.forEach(function(t){t.selectionMode="dataArea"});this.checkActiveMode(["item"]);r.call(this,o,a)}else if(this.activeComponent&&this.activeComponent.isDimension){s=this.getTransformedPoint(n.x,n.y);var l=this.activeComponent.getLabelFromPoint(s);if(l){this.checkActiveMode(["range.dimension"]);this.resetSelectedShapes();var c=this.getComponentKey(this.activeComponent);_(c,l,this.activeComponent);T.call(this,null,c,null,null);this.selectRange();this.refreshContainer();this.initWatchers();this.updateRangeProjection();this.updateRangeDisplay()}}},updateRangeDisplay:function t(){f.hRanges=[];f.vRanges=[];f.vRanges=h.y.map(function(t){var e=new i(t.rect.x,t.rect.y);var n=new i(t.rect.x+t.rect.width,t.rect.y+t.rect.height);var s=t.startLabel||(Number.isNaN(+t.startVal)?t.startVal:L(t.startVal,t.component));var o=t.updateLabel||(Number.isNaN(+t.updateVal)?t.updateVal:L(t.updateVal,t.component));t.maxIncluded||(o="<"+o);return{points:[n,e],values:{start:{text:o,value:t.updateVal},end:{text:s,value:t.startVal}}}});f.hRanges=h.x.map(function(t){var e=new i(t.rect.x,t.rect.y);var n=new i(t.rect.x+t.rect.width,t.rect.y+t.rect.height);var s=t.startLabel||(Number.isNaN(+t.startVal)?t.startVal:L(t.startVal,t.component));var o=t.updateLabel||(Number.isNaN(+t.updateVal)?t.updateVal:L(t.updateVal,t.component));t.maxIncluded||(t.component.yMirrorMode?s="<"+s:o="<"+o);return{points:[e,n],values:{start:{text:s,value:t.startVal},end:{text:o,value:t.updateVal}}}});h.y.length>0&&(f.vOptions={rect:this.getRect(h.y[0].component,true).clone(),offset:this._offset.top,padding:h.y[0].component.getPadding(),dock:h.y[0].component.dock,shouldClip:"range.dimension"===this.getActiveMode()});h.x.length>0&&(f.hOptions={rect:this.getRect(h.x[0].component,true).clone(),offset:this._offset.left,padding:h.x[0].component.getPadding(),dock:h.x[0].component.dock,shouldClip:"range.dimension"===this.getActiveMode()});if(!f.rangeSelectIsVisible){this.handler.container.append(u);u.show();f.rangeSelectIsVisible=true}f.$digest()},initWatchers:function t(){if(!this._rangeEventWatchers){var e=this;this._rangeEventWatchers=[];this._rangeEventWatchers.push(f.$on("rangeStart",function(){e.resetSelectedShapes();e._shapes=e._previousShapes;e._clearPrev=true}));this._rangeEventWatchers.push(f.$on("rangeUpdate",function(t,n,i,s,o,r){g=n[0];e.components[i].indexOf(e.activeComponent)<0&&e.setActiveComponent(e.components[i][0]);var a=h[i][s];E.call(e,a,n[1],o,r);e._clearPrev=false}));this._rangeEventWatchers.push(f.$on("rangeEditChanged",function(t,n){e._nrEditing=n?e._nrEditing+1:e._nrEditing-1;if(e._nrEditing>1){e.confirmEdit();e._nrEditing=1;t.targetScope.onEditBubble()}e._editing=e._nrEditing>0}));this._rangeEventWatchers.push(f.$on("rangeEnd",function(){e.end();e._clearPrev=false}));this._rangeEventWatchers.push(f.$on("rangeToggle",function(t,n,i){e.toggle(n,i)}))}},start:function t(e,n){if(this.handler._disableSelections)return true;this.resetSelectedShapes();this.refreshContainer();this.activeComponent.isDiscrete&&this.activeComponent.isDiscrete()?this.checkActiveMode(["range.discrete","item"]):this.activeComponent.isDimension?this.checkActiveMode(["range.dimension"]):this.checkActiveMode(["range.measure"]);var i=this.getComponentKey(this.activeComponent);if("x"!==i&&"y"!==i)return;this.currentRange=I(i,this.activeComponent,"range.dimension"===this.getActiveMode());this.initWatchers();g=this.getTransformedPoint(n.x,n.y)},update:function t(e,n){if(this.handler._disableSelections)return true;E.call(this,this.currentRange,this.getTransformedPoint(n.x,n.y),false)},updateShapesState:function t(){var e=this.getComponentKey(this.activeComponent),n=k(e,0,this.activeComponent),i=this.getActiveMode(),s=this.ToggleFlag.select,o=[],r=this.toggleSelection;this.clearSelection(true);if(this.activeComponent.isDiscrete&&!this.activeComponent.isDiscrete()){o=this.shapesFromRange(n.startVal,n.updateVal);o.forEach(function(t){t.selectionMode=i});r.call(this,o,s)}this._shapes=o},updateRangeProjection:function t(){var e=this.components.dataArea[0].rect;h.x.forEach(function(t){var n=t.component.getPositionOfValue(t.startVal);var i=t.component.getPositionOfValue(t.updateVal);var s=Math.min(n,i);var o=Math.max(n,i);var r=0;var a=e.height;t.rect.set(s,r,o-s,a-r)});h.y.forEach(function(t){var n=t.component.getPositionOfValue(t.startVal);var i=t.component.getPositionOfValue(t.updateVal);var s=0;var o=e.width;var r=Math.max(n,i);var a=Math.min(n,i);t.rect.set(s,a,o-s,r-a)})},end:function t(){if(this.handler._disableSelections)return true;this.currentRange=null;if("range.dimension"===this.getActiveMode()){var e=this.getComponentKey(this.activeComponent);D(e,this.activeComponent.yMirrorMode);this.updateRangeProjection()}this.updateRangeDisplay();this.selectRange();this._previousShapes=this._shapes;this._shapes=null},cancel:function t(){if(this.handler._disableSelections)return true;this._nrEditing=0;this._editing=false;var e=this.getActiveMode();"range.discrete"===e&&this.setActiveMode("item");this._shapes=null;C.call(this)},clearSelection:function t(e){e=e||false;this._shapes=null;if(e)this._super();else{this._super();C.call(this)}},selectRange:function t(){var e=this.handler.SelectRange,n=[],i=false;if(!this.activeComponent)return;if("range.discrete"===this.getActiveMode()){var s=this._previousSelectedShapes,o=this.getSelectedShapes().concat();s.forEach(function(t){var e=o.indexOf(t);-1===e&&o.push(t)});o.length>0&&this.handler.Select.emit(o);return}h.x.concat(h.y).forEach(function(t){t.component.getType().current.forEach(function(e){n.push({idx:e,type:t.component.getType().type,range:A(t.startVal,t.updateVal,t.maxIncluded)})})});i=!w.call(this);this._editing||e.emit(n,i)},on:function t(){if(!a){var n=e.getService("$compile");var i=e.getService("$rootScope");f=i.$new();d.className="selections-range-ui";u.append(p);u.hide();n(d)(f);a=true;f.rangeSelectIsVisible=false}f.$broadcast("on")},off:function t(){if(!this.activeComponent)return;f.$broadcast("off");this.setActiveComponent(null);C.call(this)}});r.defaultOptions={toggle:{callback:null}};return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(96),n(48),n(146),n(664),n(665)],s=function(t,e,n,i){var s=".rangeselection";function o(t,e,i,s){var o=[];o[e]="y"===i?new n(t[e].x,t[e].y+s):new n(t[e].x+s,t[e].y);o[1^e]=t[1^e];return o}function r(t){t.$emit("rangeStart")}function a(t,e,n,i,s){t.$emit("rangeUpdate",e,n,i,s)}function l(t,e){t.$emit("rangeEnd",e)}function c(t,e,n){return e?t[0][n]>t[1][n]?0:1:t[0][n]<t[1][n]?0:1}function u(e,n,i,u){var d,p,h=i?"x":"y",f;t(n).tap({id:s,options:{preventDefault:true},start:function e(){t.preventGestures(this.gestureHandler)}}).swipe({id:s,options:{radiusThreshold:0},start:function n(){p=c(e.range.points,u,h);d=e.range.points;t.preventGestures(this.gestureHandler);r(e)},update:function t(n,s){e.range.points=o(d,p,h,i?s.swipe.deltaX:s.swipe.deltaY);e.$digest();e.range.far=false;e.range.near=false;f=c(e.range.points,u,h)^!i?"far":"near";e.range[f]=true;a(e,e.range.points,h,e.$index,false)},end:function t(){l(e,e.range.points);e.range.near=false;e.range.far=false}})}function d(e,n){if(e.isOn)return;e.isOn=true;var i="hey";t(e.axisCover).tap({id:s,options:{preventDefault:true},start:function e(){t.preventGestures(this.gestureHandler)},end:function t(e,i){n.$emit("rangeToggle",e,i.pagePoints[0])}}).swipe({id:s,options:{preventDefault:true},start:function e(){i=n.range.points;t.preventGestures(this.gestureHandler);r(n);n.range.cover=true},update:function t(s,o){"y"===e.dir?n.range.points=[{x:i[0].x,y:i[0].y+o.swipe.deltaY},{x:i[1].x,y:i[1].y+o.swipe.deltaY}]:n.range.points=[{x:i[0].x+o.swipe.deltaX,y:i[0].y},{x:i[1].x+o.swipe.deltaX,y:i[1].y}];n.$digest();a(n,n.range.points,e.dir,n.$index,true)},end:function t(){l(n,n.range.points);n.range.cover=false}});if(!t.utils.touch){var o="x"===e.dir;u(n,e.farEdge,o,o);u(n,e.nearEdge,o,!o)}}function p(e){t(e.axisCover).off("*",s);t(e.farEdge).off("*",s);t(e.nearEdge).off("*",s);e.isOn=false}e.directive("qvaRangeSelectionRange",function(){return{scope:false,link:function t(e,n,i){var s={isOn:false,dir:i.qvaRangeSelectionRange,axisCover:n.find(".axis-cover")[0],farEdge:n.find(".far-edge")[0],nearEdge:n.find(".near-edge")[0]};d(s,e);e.$on("on",function(){d(s,e)});e.$on("off",function(){p(s)});e.$on("$destroy",function(){p(s)})}}});e.directive("qvaRangeSelection",function(){return{template:i,replace:true,scope:{vOptions:"=",hOptions:"=",vRanges:"=",hRanges:"=",activeComponent:"=",hComponent:"=",vComponent:"=",visible:"="},link:function t(e){e.vRelevantSize=0;e.hRelevantSize=0;e.activeOptions={y:{far:false,near:false,cover:false},x:{far:false,near:false,cover:false}};e.setRangeStyle=function(t,e,n){if(!e||!n)return;e.forEach(function(e){var n=e.points[0],i=e.points[1];e.style="y"===t?{height:Math.abs(n[t]-i[t]),top:Math.min(n[t],i[t])}:{width:Math.abs(n[t]-i[t]),left:Math.min(n[t],i[t])}})};e.$watchCollection("[vRanges, vOptions]",function(t){e.setRangeStyle("y",t[0],t[1])});e.$watchCollection("[hRanges, hOptions]",function(t){e.setRangeStyle("x",t[0],t[1])});e.$watch("hOptions",function(t){t&&e.setRelevantSize("x",t.rect.height)});e.$watch("vOptions",function(t){t&&e.setRelevantSize("y",t.rect.width)});e.setRelevantSize=function(t,n){if("x"===t){e.hRelevantSize={height:n+"px"};e.hWrappperSize={height:"calc(100% - "+n+"px)"}}else{e.vRelevantSize={width:n+"px"};e.vWrappperSize={width:"calc(100% - "+n+"px)"}}}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qvt-range-selection">\n\t<div class="range-vertical-clip" ng-style="{ top: vOptions.offset, height: vOptions.rect.height }" ng-class="{ clip: vOptions.shouldClip }">\n\t\t<div class="range-vertical"\n\t\t\t ng-repeat="range in vRanges track by $index"\n\t\t\t qva-range-selection-range="y"\n\t\t\t ng-class="{\'near\': vOptions.dock == \'left\', \'far\' : vOptions.dock == \'right\'}"\n\t\t\t ng-style="range.style">\n\t\t\t<div class="range">\n\t\t\t\t<div class="axis-cover" ng-style="vRelevantSize" tid="range-vertical-cover" ng-class="{\'active\' : range.cover}"></div>\n\t\t\t</div>\n\t\t\t<div class="far-edge" tid="range-vertical-far" ng-class="{\'active\' : range.near}">\n\t\t\t</div>\n\t\t\t<div class="near-edge" tid="range-vertical-near" ng-class="{\'active\' : range.far}">\n\t\t\t</div>\n\t\t\t<div class="outer-bubble-wrapper" ng-style="vWrappperSize">\n\t\t\t\t<qva-range-selection-bubble tid="range-vertical-near-bubble" visible="visible" active-component="vComponent" handle-points="range.points" range-index="$index" horizontal="false" far="false" data="range.values.start" active="range.far"> </qva-range-selection-bubble>\n\t\t\t\t<qva-range-selection-bubble tid="range-vertical-far-bubble" visible="visible" active-component="vComponent" handle-points="range.points" range-index="$index" horizontal="false" far="true" data="range.values.end" active="range.near"> </qva-range-selection-bubble>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="range-horizontal-clip" ng-style="{ left: hOptions.offset, width: hOptions.rect.width }" ng-class="{ clip: hOptions.shouldClip }">\n\t\t<div class="range-horizontal"\n\t\t\t ng-repeat="range in hRanges track by $index"\n\t\t\t qva-range-selection-range="x"\n\t\t\t ng-class="{\'near\': hOptions.dock == \'bottom\', \'far\' : hOptions.dock == \'top\'}"\n\t\t\t ng-style="range.style">\n\t\t\t<div class="range">\n\t\t\t\t<div class="axis-cover" ng-style="hRelevantSize" tid="range-horizontal-cover" ng-class="{\'active\' : range.cover}"></div>\n\t\t\t</div>\n\n\t\t\t<div class="far-edge" tid="range-horizontal-far" ng-class="{\'active\' : range.far}">\n\t\t\t</div>\n\t\t\t<div class="near-edge" tid="range-horizontal-near" ng-class="{\'active\' : range.near}">\n\t\t\t</div>\n\t\t\t<div class="outer-bubble-wrapper" ng-style="hWrappperSize">\n\t\t\t\t<qva-range-selection-bubble tid="range-horizontal-near-bubble" visible="visible" active-component="hComponent" handle-points="range.points" range-index="$index" horizontal="true" far="false" data="range.values.start" active="range.near"> </qva-range-selection-bubble>\n\t\t\t\t<qva-range-selection-bubble tid="range-horizontal-far-bubble" visible="visible" active-component="hComponent" handle-points="range.points" range-index="$index" horizontal="true" far="true" data="range.values.end" active="range.far"> </qva-range-selection-bubble>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(96),n(48),n(666)],s=function(t,e,n,i){var s=".rangeselection";function o(t){t.$emit("rangeStart")}function r(t,e){t.editing=e;t.$emit("rangeEditChanged",e)}function a(t,e,n,i,s){t.$emit("rangeUpdate",e,n,i,false,s)}function l(t,e){t.$emit("rangeEnd",e)}function c(){t(this).css("width",6*t(this).val().length+50+"px")}n.directive("qvaRangeSelectionBubble",["$timeout",function(t){return{template:i,replace:true,restrict:"E",scope:{data:"=",active:"=",far:"=",horizontal:"=",activeComponent:"=",handlePoints:"=",visible:"=",rangeIndex:"="},link:function n(i,u){var d=u.find(".range-input"),p=u.find(".range-bubble"),h={},f=false;i.$watch("activeComponent",function(){i.editable=i.activeComponent&&!i.activeComponent.isDimension&&!i.activeComponent.isDiscrete()&&"function"===typeof i.activeComponent.getPositionOfValue;if(i.editable){d.removeClass("non-editable");p.removeClass("non-editable")}else{d.addClass("non-editable");p.addClass("non-editable")}});i.endEditing=function(){i.invalid=false;if(i.editing){r(i,false);d.blur()}};i.$watch("data.value",function(t){if(Number.isNaN(+t)){i.invalid=true;return}i.editing&&i.endEditing();d.val(t)});i.$watch("visible",function(){i.visible||i.endEditing()});i.$on("off",function(){i.endEditing();e(d[0]).off("*",s);e(p[0]).off("*",s);u.off("keyup"+s,"*");f=false});i.onEditBubble=function(){i.editing=true;d.css("width",p.width());i.$digest();d.focus();d[0].setSelectionRange(0,9999);i.$digest();t(function(){c.call(d)})};function g(){if(f)return;f=true;e(d[0]).tap({id:s,options:{preventDefault:false},start:function t(){e.preventGestures(this.gestureHandler)}});e(p[0]).tap({id:s,start:function t(){e.preventGestures(this.gestureHandler)},end:function t(){if(!i.editable||i.editing)return;r(i,true);i.onEditBubble()}}).swipe({id:s,start:function t(){h=[{x:i.handlePoints[0].x,y:i.handlePoints[0].y},{x:i.handlePoints[1].x,y:i.handlePoints[1].y}];e.preventGestures(this.gestureHandler);o(i)},update:function t(e,n){var s=i.far?1:0,o,r,l,c;if(i.horizontal){o=n.swipe.deltaX;r="x"}else{o=n.swipe.deltaY;r="y"}l=h[1^s][r];c=h[s][r]+o;if(0===s&&(i.horizontal&&c>l||!i.horizontal&&c<l)){s=1;l=h[1][r]}else if(1===s&&(i.horizontal&&c<l||!i.horizontal&&c>l)){s=0;l=h[0][r]}i.handlePoints[s][r]=c;i.handlePoints[1^s][r]=l;i.$digest();a(i,i.handlePoints,r,i.rangeIndex)},end:function t(){l(i,i.handlePoints)}});d.keyup(c);i.onEditConfirmed=function(){if(!i.editing)return;var t=d.val(),e={value:parseFloat(t),index:i.far?1:0,switch:false},n=i.activeComponent.getPositionOfValue(e.value),s,o,r=i.handlePoints;if(Number.isNaN(+e.value))i.invalid=true;else{o=i.horizontal?"x":"y";r[e.index][o]=n;if(i.horizontal&&r[1][o]<r[0][o]||!i.horizontal&&r[1][o]>r[0][o]){s=r[1][o];r[1][o]=r[0][o];r[0][o]=s;e.index=e.index?0:1;e.switch=true}i.endEditing();a(i,i.handlePoints,o,i.rangeIndex,e);l(i,i.handlePoints)}i.$digest()};i.$on("confirmEdit",i.onEditConfirmed)}i.$on("on",g);g()}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="bubble-wrapper" ng-class="{\'far\' : far, \'near\' : !far}">\n\t<div ng-show="!editing" qva-direction x-dir-text="{{data.text}}" class="bubble range-bubble" ng-class="{\'active\' : active}">{{data.text}}</div>\n\t<input ng-show="editing" type="text" ng-class="{\'active\' : active, \'invalid\': invalid}" class="bubble range-input"/>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(668)],s=function(t){var e;e=t.extend({setIsEditing:function t(e,n){this._editing=e;this._scope=n},getIsEditing:function t(){return this._editing},confirmEdit:function t(){this._scope.$broadcast("confirmEdit")},selectWhileLocked:function t(e){this.handler.SelectWhileLocked.emit(e)}});e.defaultOptions={captureInput:true,toggle:{callback:null}};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(266),n(104)],s=function(t,e){var n;function i(t,e){var n,i,s=e[0],o=false;for(n=0;n<t.length;n++){i=t[n];if(i.startVal===s.startVal&&i.updateVal===s.updateVal){t.splice(n,1);n--;o=true}}o||(t=t.concat(e));return t}n=t.extend({init:function t(e,n){this._super(e,n);this.internal=true},release:function t(){},initComponent:function t(e,n){document.activeElement&&document.activeElement.blur();if(n)this.setActiveComponent(n);else{this.handler.refreshContainerRect();this.setActiveComponent(this.getComponent(e.x,e.y,this.handler.containerRect))}},getRect:function t(n){if(!n)return new e(0,0,0,0);return n.hasOwnProperty("innerRect")?n.innerRect:n.rect},setComponent:function t(e,n){this._super(e,n);var i=Array.isArray(n)?n.concat():[n];i.forEach(function(t){t.selections=this;this.handler._isListening&&n.on()},this)},addComponent:function t(e,n){this._super(e,n);n.selections=this;this.handler._isListening&&n.on()},removeComponent:function t(e,n){this._super(e,n);n.selections=null;n.off()},updateFromItems:function t(e,n,i,s){var o=this.handler,r=this;if(!o.canTypeBeActivated(this)){o.SelectWhileLocked.emit(i?this.activeComponent.getAttributeDimensionInfo():void 0);return}this.resetSelectedShapes();this.setActiveMode(i?"item"+this.activeComponent.getColorMap().getColorDataInfo().legendPath.replace(/\//g,"."):"item");o.activate(this);i&&o.SelectAttributeDim.emit(s,o.getKeyAsToggleSelected(e));n=n.filter(function(t){return r._allowNullSelect||!r.shapesFrom._isNull(t,r.activeComponent.getSelectionIndices())});if(n.length){var a=this.options.toggle.callback||this.toggleSelection;a.call(this,n);i||o.Select.emit(this.getSelectedShapes(),o.getKeyAsToggleSelected(e))}},rangeStart:function t(e){var n=this.handler;if(!n.canTypeBeActivated(this)){n.SelectWhileLocked.emit();return}this.setActiveMode("range.measure");n.activate(this);e&&this.resetSelectedShapes()},rangeUpdate:function t(e,n){var s=this.handler;if(!s.canTypeBeActivated(this)){s.SelectWhileLocked.emit();return}var o=this.options.toggle.callback||this.toggleSelection,r=[],a,l=this.ToggleFlag.select;this.clearSelection(true);this._rangeObjects&&n&&(e=i(this._rangeObjects,e));for(a=0;a<e.length;a++){var c=e[a];r=r.concat(this.shapesFromRange(c.startVal,c.updateVal,true,c.isMax))}r.forEach(function(t){t.selectionMode="range.measure"});o.call(this,r,l);this._rangeObjects=e;this._shapes=r},rangeEnd:function t(){this.selectRange();this._shapes=null},toggle:function t(){},cancel:function t(){this._rangeObjects=null;this.activeComponent.cancelSelection()},clearSelection:function t(e){this._super();if(!e){this._rangeObjects=null;this.activeComponent.clearSelection()}},selectRange:function t(){var e=this.handler.SelectRange,n,i,s=[];if(!this._rangeObjects)return;for(n=0;n<this._rangeObjects.length;n++){i=this._rangeObjects[n];s.push({idx:i.idx||0,range:{min:Math.min(i.startVal,i.updateVal),max:Math.max(i.startVal,i.updateVal),maxInclEq:!!i.isMax}})}e.emit(s,true)}});n.defaultOptions={};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(48),n(10),n(91),n(106),n(101),n(670)],s=function(t,e,n,i,s,r){function a(t){if("object"===o(t)){t=t.qStringExpression.qExpr;"="!==t[0]&&(t="="+t)}return t}function l(t){if(t&&0===t.indexOf("="))return{qStringExpression:{qExpr:t}};return t}t.directive("qvInlineTitleInput",[function(){return{priority:1,require:"ngModel",link:function e(n,i,s,o){i.unbind("input keydown change compositionend");i.bind("blur",function(){t.$apply(n,function(){o.$setViewValue(i.val());n.doEdit()})});n.$on("$destroy",function(){i.trigger("blur")});i.bind("keydown",function(t){t.stopPropagation();if(27===t.which){i.val(o.$viewValue);i.trigger("blur")}else 13===t.which&&"textarea"!==i[0].nodeName.toLowerCase()&&i.trigger("blur")})}}}]);t.directive("qvInlineTitleEdit",["$timeout",function(t){return{template:r,restrict:"A",scope:{model:"=",propertyPath:"@",layoutPath:"@",emptyTranslation:"@",dirSetting:"@"},priority:1,link:function o(r,c){var u=c.children().first(),d=c.children().eq(1),p=c.children().eq(2);r.editing=false;r.titleProperty="";r.titleValue="";r.addTranslation=n.get(r.emptyTranslation);i(r,"model",function(t){r.displayValue=s.getValue(t,r.layoutPath);r.editing=false});r.doEdit=function(){var t=l(r.titleValue);r.editing&&(e.equals(h,t)?r.editing=false:r.model.getProperties().then(function(e){s.setValue(e,r.propertyPath,t);r.model.setProperties(e);h=t}))};var h;u.add(d).on("qv-activate",function(){r.editing||r.model.getProperties().then(function(e){var n=p.get(0);var i=s.getValue(e,r.propertyPath);var o=a(i);var l=o.length;if(o.indexOf("\n")>-1)return;r.editing=true;r.titleProperty=i;r.titleValue=o;h=r.titleProperty;n.scrollLeft=n.scrollWidth;n.selectionStart=l;n.selectionEnd=l;t(function(){n.focus();n.setSelectionRange(l,l)})})})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div ng-show="!editing && displayValue == \'\'" class="qv-inline-edit-button">\n\t<div qva-direction x-dir-setting="{{dirSetting}}" class="add-content" q-title-translation="{{emptyTranslation}}">\n\t\t<span class="lui-icon lui-icon--plus"></span>\n\t\t<span class="add-text" qva-direction x-dir-text="{{addTranslation}}" title="{{addTranslation}}">{{addTranslation}}</span>\n\t</div>\n</div>\n<div qva-direction x-dir-setting="{{dirSetting}}" x-dir-text="{{displayValue}}" ng-show="!editing && displayValue != \'\'" class="qv-inline-edit-value">{{displayValue}}</div>\n<input qva-direction x-dir-setting="{{dirSetting}}" x-dir-text="{{displayValue}}" ng-show="editing" class="qv-inline-edit-input" type="text" ng-model="titleValue" qv-inline-title-input maxlength="255"/>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(1090),n(1091),n(49),n(2)],s=function(t,e,i,s){function o(t){var e=n.p+t;return s.get(e,{responseType:"json"}).then(function(t){if(t.data)return t.data;console.warn("Parsing error for extension: "+e);return{}}).catch(function(t){console.warn("Couldn't get bundled extensions qext: "+e+". Error: "+t);return{}})}var r={};r.getDashBundleList=function(){var e=t.content.map(function(t){if("qlik-share-button"===t.id&&!i.getFlag("SHARE_BUTTON_EXTENSION"))return;return o("_dashboard-bundle/"+t.id+"/"+t.id+".qext").then(function(e){e.folder="_dashboard-bundle";return{id:t.id,data:e,path:"_dashboard-bundle/"+t.id+"/"+t.id}})});return e.filter(function(t){return t})};r.getVisBundleList=function(){var t=e.content.map(function(t){if(!i.getFlag("VIZBUN_QCS_SMARTPIVOT")&&"qlik-smart-pivot"===t.id)return;if(!i.getFlag("VIZBUN_QCS_TRELLIS")&&"qlik-trellis-container"===t.id)return;if(!i.getFlag("VIZBUN_QCS_31")&&("qlik-barplus-chart"===t.id||"qlik-bullet-chart"===t.id))return;return o("_visualization-bundle/"+t.id+"/"+t.id+".qext").then(function(e){e.folder="_visualization-bundle";return{id:t.id,data:e,path:"_visualization-bundle/"+t.id+"/"+t.id}})});return t.filter(function(t){return t})};return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="q-card-header-container" qva-direction x-dir-setting="{{direction}}">\n\t<div class="q-card-header">\n\t\t<span q-translation="ObjectInfo.Dialog.Header"></span>\n\t</div>\n\t<div>\n\t\t<button class="lui-fade-button close-button" q-title-translation="Common.Close" qva-activate="close()">\n\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--close"></span>\n\t\t</button>\n\t</div>\n</div>\n<div class="content"></div>'},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(113),n(311),n(181),n(49),n(329),n(11),n(674)],s=function(t,e,n,i,s,r){function a(t){var e=t.cells;var i=t.rows;var s=t.columns;e.forEach(function(e){if(!e.bounds){var o={};e.bounds=o;o.y=e.row/i*100;o.x=e.col/s*100;o.width=e.colspan/s*100;o.height=e.rowspan/i*100}n.alignToGrid(t,e)})}function l(t){return t.layoutOptions&&t.layoutOptions.sheetMode?t.layoutOptions.sheetMode:"RESPONSIVE"}function c(t){var n=l(t);if(n&&"RESPONSIVE"!==n){if("CUSTOM"===n){t.rows=e.getCustomRows(t);t.columns=e.getCustomCols(t)}}else{t.height?t.rows=Math.ceil(e.getResolutionFor(t.gridResolution)*t.height/100):t.rows=e.getResolutionFor(t.gridResolution);t.columns=2*e.getResolutionFor(t.gridResolution)}a(t)}var u={type:"items",component:"accordion",defaultActiveTabIndex:0,items:{sheetProps:{type:"items",translation:"properties.sheetProperties",items:{title:{type:"string",ref:"qMetaDef.title",translation:"Common.Title",minlength:1,readOnly:function t(e,n,i){var s=i.layout;return s&&(s.permissions&&!s.permissions.update||s.qMeta&&s.qMeta.sourceObject&&s.qMeta.sourceObject.length>0)},rollbackInvalid:true},labelExpression:{type:"string",ref:"labelExpression",translation:"properties.titleExpression",readOnly:function t(e,n,i){var s=i.layout;return s&&(s.permissions&&!s.permissions.update||s.qMeta&&s.qMeta.sourceObject&&s.qMeta.sourceObject.length>0)},rollbackInvalid:true,expression:"optional",show:t.SHEET_NAME_EXPR},description:{type:"string",component:"textarea",expression:"optional",readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},change:function t(e,n,i){if("object"===o(i.qMetaDef.description)){i.descriptionExpression=i.qMetaDef.description;i.qMetaDef.description=""}else if("string"===typeof i.descriptionExpression&&i.descriptionExpression){i.qMetaDef.description=i.descriptionExpression;i.descriptionExpression=void 0}},refFn:function t(e){var n="object"===o(e.descriptionExpression);return n?"descriptionExpression":"qMetaDef.description"},translation:"Common.Description"},items:{type:"items",grouped:true,items:{thumbnail:{translation:"properties.sheetProperties.thumbnail",type:"string",readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},component:"sheet-thumbnail",defaultValue:""},gridSize:{translation:"properties.gridSize",readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},type:"string",component:"dropdown",ref:"gridResolution",defaultValue:e.getPreferredGridSize,options:[{value:"small",translation:"properties.gridSmall"},{value:"medium",translation:"properties.gridMedium"},{value:"large",translation:"properties.gridLarge"}],show:function t(n){n.gridResolution||(n.gridResolution=e.getResolutionFor(n.rows));a(n);return true},change:function t(n){e.setPreferredGridSize(n.gridResolution);c(n);a(n);if(i.getFlag("SSA_IN_EDIT")){var s=r("#grid");s.addClass("reveal-gridguides");s.on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){r(this).removeClass("reveal-gridguides")})}}},sheetSizeOptions:{type:"items",ref:"grid",items:{layout:{type:"items",items:{LayoutMode:{translation:"properties.layoutMode",readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},type:"string",component:"dropdown",ref:"layoutOptions.sheetMode",defaultValue:"RESPONSIVE",options:[{value:"RESPONSIVE",translation:"properties.responsive"},{value:"CUSTOM",translation:"properties.custom"}],change:function t(e){c(e)}},sheetSize:{type:"items",show:function t(e){return"CUSTOM"===l(e)},readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},items:{width:{readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},defaultValue:1280,ref:"pxWidth",type:"integer",translation:"properties.customWidth",change:function t(n){n.pxWidth=e.checkSheetPixelLimits(n.pxHeight,n.pxWidth).pxWidth;c(n)}},height:{readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},defaultValue:1024,ref:"pxHeight",type:"integer",translation:"properties.customHeight",change:function t(n){n.pxHeight=e.checkSheetPixelLimits(n.pxHeight,n.pxWidth).pxHeight;c(n)}}}}}},mobileLayout:{translation:"properties.mobileLayout",readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},component:"dropdown",type:"string",ref:"layoutOptions.mobileLayout",defaultValue:"LIST",show:function t(e){return i.getFlag("MOBILE_GRID")&&"CUSTOM"!==l(e)},options:[{value:"LIST",translation:"properties.listView"},{value:"GRID",translation:"properties.gridView"}],change:function t(n){e.setPreferredMobileLayout(n.layoutOptions.mobileLayout)}},ExtendSheet:{translation:"properties.extendSheet",readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update},show:function t(e){return!("CUSTOM"===l(e))},type:"boolean",component:"switch",ref:"layoutOptions.extendable",defaultValue:"false",options:[{value:false,translation:"properties.off"},{value:true,translation:"properties.on"}],change:function t(e){e.height||(e.height=100);e.layoutOptions.sheetMode||(e.layoutOptions.sheetMode="RESPONSIVE");c(e)}}}}}},expandButton:{translation:"Expand sheet",component:"button",action:function t(n,i,s,o){if(n.height){n.height+=50;n.rows=Math.ceil(e.getResolutionFor(n.gridResolution)*n.height/100)}else{n.height=150;n.rows=1.5*e.getResolutionFor(n.gridResolution)}o.$emit("saveProperties",n)},show:function e(){return t.SCROLL_BUTTON},readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update}},CollapseButton:{translation:"Collapse sheet",component:"button",action:function t(n,i,s,o){if(n.height){n.height-=50;n.rows=Math.ceil(e.getResolutionFor(n.gridResolution)*n.height/100)}else{n.height=100;n.rows=e.getResolutionFor(n.gridResolution)}o.$emit("saveProperties",n)},show:function e(){return t.SCROLL_BUTTON},readOnly:function t(e,n,i){var s=i.layout;return s&&s.permissions&&!s.permissions.update}}}}}};i.getFlag("ALT_STATE_ONE")&&(u.items.alternateState=s);return u}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(165),n(121),n(675)],s=function(t,e,n){var i={template:n,controller:["$scope",function(t){var n=function e(){return t.data};e.defineLabel(t,t.definition,n,t.args.handler);e.defineReadOnly(t,t.args.handler);t.item={qData:t.data,qMeta:{published:t.args.model.layout.qMeta.published}};t.save=function(){t.$emit("saveProperties")};t.$on("thumbnailchanged",function(){t.save()});t.$on("layoutchanged",function(e,n){t.thumbLayout={thumbnail:n.thumbnail}});t.thumbLayout={thumbnail:t.args.model.layout.thumbnail}}]};t.addComponent("sheet-thumbnail",i);return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="pp-component pp-media-component pp-sheet-thumbnail-component" tcl="media">\n\t<div class="label" ng-if="label">{{label}}</div>\n\t<div class="value">\n\t\t<div class="placeholder">\n\t\t\t<div qv-ao-thumb item="item" issheet="true" thumbprop="data.thumbnail" thumblayout="thumbLayout.thumbnail" editmode="!readOnly" thumb-width="221" thumb-height="128" emitchanges="true"></div>\n\t\t</div>\n\t</div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(677),n(94),n(107),n(150),n(166),n(11),n(161),n(100),n(91),n(145),n(268),n(211),n(241),n(209),n(296),n(298),n(730),n(740),n(350)],s=function(t,e,n,i,s,o,r,a,l,c){var u;function d(t){var e=o.validateExpr(t.measure,i),n;n=o.validateMetadataName(t.measure,i);var s=t.measure.validity;return n&&e&&s.labelExpression&&s.description}function p(t){return{name:t.measure.name,description:t.measure.description,tags:t.measure.tags,expr:t.measure.expression,baseColor:t.measure.coloring.baseColor,gradient:t.measure.coloring.gradient,labelExpression:t.measure.labelExpression,descriptionExpression:t.measure.descriptionExpression}}var h={scope:{title:"=",confirmLabel:"=",measure:"="},template:e,controller:["$scope","$timeout",function(e,h){e.theme=l;Object.defineProperty(e,"color",{get:function t(){return e.theme.resolveColor(e.measure.coloring.baseColor)},set:function t(n){var i="undefined"!==typeof n.color?n.color:n;var s="undefined"!==typeof n.index?n.index:e.theme.currentPalette.indexOf(n);e.measure.coloring.baseColor={color:i,index:s}}});e.measure.validity={};e.measure.validity.expression=true;e.measure.validity.description=true;e.measure.validity.name=true;e.measure.validity.labelExpression=true;e.measure.name=a.trimAutoCalendarName(e.measure.name);e.stringLimits=i;e.cancel=function(){e.destroyComponent()};e.confirm=function(){e.measure.updateTags();if(d(e)){u.close();var n=p(e);e.callback(n);if(n.gradient){var i=t.getService("qvRecentGradientsService"),s="absolute"!==n.gradient.limitType,o=n.gradient,r,a=i.getTemplates(),l=a.some(function(t){var e=true;o.limits.length!==t.limits.length&&(e=false);e&&o.colors.forEach(function(n,i){n!==t.colors[i]&&(e=false)});e&&o.limits.forEach(function(n,i){n!==t.limits[i]&&(e=false)});e&&o.breakType.forEach(function(n,i){n!==t.types[i]&&(e=false)});s!==t.percentage&&(e=false);return e});if(!l){r=c.get("library.colors.recent",1);a.map(function(t){return parseInt(t.name.replace(/\D/g,""))||0}).sort(function(t,e){return e-t}).every(function(t){r=c.get("library.colors.recent",t+1);return false});i.pushTemplate({name:r,colors:n.gradient.colors.slice(),limits:s?n.gradient.limits.slice():i.convertAbsLimits(n.gradient.limits),types:n.gradient.breakType.slice(),percentage:s})}}}};n.StateChanged.bind(e.cancel);e.openInExpressionDialog=function(t){t.preventDefault();s.show({expr:e.measure.expression,title:e.measure.expression?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"}).then(function(t){e.measure.expression=t})};e.$watch("measure.expression",function(){e.measure.validity.expression||o.validateExpr(e.measure,i)});e.$watch("measure.name",function(){e.measure.validity.name||o.validateMetadata(e.measure,i)});e.$on("$destroy",function(){n.StateChanged.unbind(e.cancel)});e.simFocus=false;h(function(){r("#measure-dialog-expression-area").on("focus",function(){e.simFocus=true;t.$apply(e)}).on("blur",function(){e.simFocus=false;t.$apply(e)})})}]};function f(e){var n=e.coloring?e.coloring.baseColor:e.baseColor;var i=e.gradient;var s={title:e.title,confirmLabel:e.confirm,measure:{expression:e.expr,name:e.name,labelExpression:e.labelExpression,description:e.description,descriptionExpression:e.descriptionExpression,tags:e.tags,coloring:{baseColor:{color:n&&n.color?n.color:"none",index:n&&n.index?n.index:-1}}},add:e.add,callback:e.callback};i&&(s.measure.coloring.gradient={colors:i.colors.map(function(t){return l.resolveColor(t)}),breakType:i.breakTypes,limitType:i.limitType,limits:i.limits});u=t.getService("luiDialog").show({template:h.template,controller:h.controller,input:s,closeOnOutside:false,showArrow:false});return u}return{show:f}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="lui-modal-background"></div>\n<div class="lui-dialog measure-dialog-wrapper" name="measureDialog">\n\t<lui-tab-view class="measure-tab-view">\n\t\t<div class="lui-dialog__header">\n\t\t\t<lui-tabset fill="true">\n\t\t\t\t<lui-tab q-title-translation="{{title}}" q-translation="{{title}}" ref="tab1" tid="create-tab"></lui-tab>\n\t\t\t\t<lui-tab ng-if="!input.add" q-title-translation="library.colors.segmentColors" q-translation="library.colors.segmentColors" ref="tab2" tid="segment-tab"></lui-tab>\n\t\t\t</lui-tabset>\n\t\t</div>\n\t\t<div class="lui-dialog__body">\n\t\t\t<lui-tab-content ref="tab1">\n\t\t\t\t<qv-edit-measure></qv-edit-measure>\n\t\t\t</lui-tab-content>\n\t\t\t<lui-tab-content ref="tab2">\n\t\t\t\t<qv-segment-colors ng-model="measure.coloring.gradient"></qv-segment-colors>\n\t\t\t</lui-tab-content>\n\t\t</div>\n\t</lui-tab-view>\n\t<div class="lui-dialog__footer">\n\t\t<button class="lui-button close-button" ng-click="cancel()" name="cancelButton" q-translation="Common.Cancel" data-tid="close-btn"></button>\n\t\t<button class="lui-button close-button" ng-click="$event.preventDefault(); confirm()" name="confirmButton" q-translation="{{confirmLabel}}" data-tid="create-btn"></button>\n\t</div>\n</div>'},function(t,e){t.exports='<lui-dialog id="expression-editor-wrapper">\t\n\t<lui-dialog-header class="expression-editor-toolbar">\n\t\t<span class="expression-editor-toolbar-title" q-translation="{{input.title}}"></span>\n\t\t<div class="expression-editor-toolbar-buttons">\t\t\n\t\t\t<button ng-if="isAdvancedPart3" class="lui-fade-button expression-editor-undo-button" \n\t\t\t\t\tdata-name="undo" ng-disabled="undoDisabled || !codearea.contextApi.canUndo" \n\t\t\t\t\tng-click="onUndo()" q-title-translation="Common.Undo" disabled="disabled" title="Undo">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--back"></span>\n\t\t\t</button>\n\t\t\t<button ng-if="isAdvancedPart3" class="lui-fade-button expression-editor-redo-button" \n\t\t\t\t\tdata-name="redo" ng-disabled="redoDisabled || !codearea.contextApi.canRedo" \n\t\t\t\t\tng-click="onRedo()" q-title-translation="Common.Redo" disabled="disabled" title="Redo">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--forward"></span>\n\t\t\t</button>\t\t\t\t\t\n\t\t\t<button\n\t\t\t\tclass="lui-fade-button expression-editor-help-button"\n\t\t\t\tdata-name="help-mode"\n\t\t\t\tng-class="{\'lui-active\': controller.helpmodeActive}"\n\t\t\t\tng-click="onHelpmode()"\n\t\t\t\tq-title-translation="Tooltip.HelpMode.Enter">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--help"></span>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass="lui-fade-button"\n\t\t\t\tqva-activate="$event.preventDefault(); close()"\n\t\t\t\tdata-name="close">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--close" q-title-translation="Common.Close"></span>\n\t\t\t</button>\t\t\t\t\n\t\t</div>\t\n\t</lui-dialog-header>\t\n\t<lui-dialog-body class="expression-editor-body" qv-cancel="cancel()" qv-confirm="confirm()">\n\t\t<section id="expression-editor-panel" class="qribby-accordion-pp">\n\t\t\t<div class="qv-expandable-list-wrapper" qv-expandable-list></div>\t\t\t\n\t\t</section>\n\t\t<section id="expression-editor-content">\n\t\t\t<main class="dm-main">\n\t\t\t\t<div id="expression-editor-container">\n\t\t\t\t\t<div id="expression-editor-stage" data-help="Panel.Stage" ng-class="{ invalid: !validity.expression }">\n\t\t\t\t\t\t<qv-codearea\n\t\t\t\t\t\t\t\tdata-show-breakpoint-gutter="true"\n\t\t\t\t\t\t\t\tdata-disabled="controller.helpmodeActive"\n\t\t\t\t\t\t\t\tdata-resize-trigger="resizeCounter"\n\t\t\t\t\t\t\t\tdata-mode="qlikviewReloadScriptMode"\n\t\t\t\t\t\t\t\tclass="expression-dialog-code-mirror"\n\t\t\t\t\t\t\t\tqva-outside-ignore-for="allOutside"\n\t\t\t\t\t\t\t\tqv-codearea-code-container="codearea"\n\t\t\t\t\t\t\t\tqv-codearea-exposed-context-api="codearea.contextApi"\n\t\t\t\t\t\t\t\tqv-codearea-function-tip="functionTipOptions"\n\t\t\t\t\t\t\t\tqv-codearea-limit="stringLimits.expression"\n\t\t\t\t\t\t\t\tqv-codearea-autocomplete="autocompleteOptions"\n\t\t\t\t\t\t\t\tqv-codearea-help-mode="controller.helpmodeActive"\n\t\t\t\t\t\t\t\tqv-codearea-help-mode-options="helpModeOptions"\n\t\t\t\t\t\t\t\tqva-activate="closePopoverIfOpen($event)"\n\t\t\t\t\t\t></qv-codearea>\n\t\t\t\t\t\t<div class="ee-information-wrapper">\n\t\t\t\t\t\t\t<div class="row-number-fill"></div>\n\t\t\t\t\t\t\t<div class="ee-information">\n\t\t\t\t\t\t\t\t<qv-information-area x-info="info" x-app="input.app" x-mode="input.mode" x-labels="input.labels"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\t\n\t\t\t</main>\n\t\t</section>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button class="lui-button close button" ng-click="cancel()" name="cancelButton" q-translation="Common.Cancel">Cancel</button>\n\t\t<button class="lui-button confirm button" ng-click="confirm()"  qv-confirm="confirm()" name="confirmButton" q-translation="Common.Apply">Confirm</button>\n\t</lui-dialog-footer>\n</lui-dialog>'},function(t,e){t.exports='<div class="expression-editor-section">\n    \x3c!-- TABLE DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-table">\n        <label q-translation="Assets.FieldsTab.Table"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="tables"\n            tid="table-dropdown"\n            title="{{controller.selectedTable.label}}">\n            <div class="label">\n                {{controller.selectedTable.label}}\n            </div>\n        </button>\n    </div>\n   \x3c!-- FIELD DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-field">\n        <label q-translation="Common.Field"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)" \n            data-context="fields"\n            tid="field-dropdown"\n            title="{{controller.selectedField.label}}">\n            <div class="label">\n                {{controller.selectedField.label}}\n            </div>\n        </button>\n    </div>\n    \x3c!-- AGGREGATION DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-functions" >\n        <label q-translation="ExpressionEditor.AggregationFunctions"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="commonFunctions"\n            tid="aggregation-dropdown"\n            title="{{controller.selectedCommonFunction.label}}">\n            <div class="label">\n                {{controller.selectedCommonFunction.label}}\n            </div>\n        </button>\n    </div>\n   \x3c!-- SET EXPRESSION CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-current" ng-if="exposeSetExpression">        \n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input"\n                type="checkbox"\n                ng-disabled="controller.readOnly() || controller.noSelectionsInObjectState"\n                ng-model="controller.currentOption" \n            />            \n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-set"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly() || controller.noSelectionsInObjectState"\n                    q-translation="ExpressionEditor.SetExpression"\n                    q-title-translation="ExpressionEditor.SetExpression">\n                </span>              \n            </div>           \n        </label>  \n        <span ng-if="( !controller.readOnly() && controller.noSelectionsInObjectState )" \n            q-translation="ExpressionEditor.EmptySelections" text="inline style" style="color:grey">\n        </span>      \n    </div>\n    \x3c!-- DISTINCT CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-distinct">\n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input" \n                type="checkbox" \n                ng-disabled="controller.readOnly()" \n                ng-model="controller.distinctOption"\n                ng-true-value="\'distinct\'"\n                ng-false-value="\'\'"\n            />\n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-distinct"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly()"\n                    q-translation="ExpressionEditor.Distinct"\n                    q-title-translation="ExpressionEditor.Distinct">\n                </span>\n            </div>\n        </label>\n    </div>\n    \x3c!-- TOTAL CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-total">\n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input"\n                type="checkbox"\n                ng-disabled="controller.readOnly()"\n                ng-model="controller.totalOption"\n                ng-true-value="\'total\'"\n                ng-false-value="\'\'" \n            />\n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-total"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly()"\n                    q-translation="ExpressionEditor.Total"\n                    q-title-translation="ExpressionEditor.Total">\n                </span>\n            </div>\n        </label>\n    </div>\n    \x3c!-- INSERT BUTTON --\x3e\n    <div id="expression-editor-toolbar-insert">\n        <lui-button\n                ng-disabled="!controller.previewText()"\n                type="button"\n                tid="insert-field"\n                ng-click="insertTextHandler($event)"\n                q-title-translation="Tooltip.ExpressionEditor.InsertExpression">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div>\n</div>'},function(t,e){t.exports='<div class="expression-editor-section">\n    \n    <label q-translation="ExpressionEditor.FunctionCategory"></label>\n    <button\n        class="lui-button expression-editor-dropdown" \n        ng-click="openPopover($event)"\n        data-context="functionCategories"\n        title="{{controller.selectedFunctionCategory.label}}">\n        <div class="label">\n            {{controller.selectedFunctionCategory.label}}\n        </div>\n    </button>\n    \n    <div class="expression-editor-function-name">\n        <label q-translation="ExpressionEditor.FunctionName"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="functions"\n            tid="functions-dropdown"\n            title="{{controller.selectedFunction.label}}">\n            <div class="label">\n                {{controller.selectedFunction.label}}\n            </div>\n        </button>\n        <textarea disabled class="expression-editor-function-definition lui-textarea lui-disabled">{{controller.selectedFunctionTip}}</textarea>\n    </div>\n    \n    <div id="expression-editor-toolbar-insert">\n        <lui-button\n            type="button"\n            tid="insert-function"\n            ng-disabled="!controller.previewText()"  \n            ng-click="insertFunctionHandler($event)" \n            q-title-translation="Tooltip.ExpressionEditor.InsertFunction">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div> \n</div>'},function(t,e){t.exports='<div class="expression-editor-section">\n    <div id="expression-editor-toolbar-variables">\n        <label q-translation="ExpressionEditor.VariableList"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="variables"\n            tid="variables-dropdown"\n            title="{{controller.selectedVariable.label}}">\n            <div class="label">\n                {{controller.selectedVariable.label}}\n            </div>\n        </button>\n\n        <div class="expression-editor-system-variables">\n            <label class="lui-checkbox">\n                <input class="lui-checkbox__input" type="checkbox" ng-model="controller.showSystemVars"></input>\n                <div class="lui-checkbox__check-wrap">\n                    <span class="lui-checkbox__check"></span>\n                    <span class="lui-checkbox__check-text label" ng-disabled="readOnly" q-translation="ExpressionEditor.SystemVariables" q-title-translation="ExpressionEditor.SystemVariables"></span>\n                </div>\n            </label>\n        </div>\n        \n        <div class="expression-editor-variable-definition">\n            <label q-translation="ExpressionEditor.Definition"></label>\n            <textarea disabled class="lui-textarea lui-disabled">{{controller.variableDef}}</textarea>\n        </div>\n        \n        <div class="expression-editor-variable-value">\n            <label q-translation="ExpressionEditor.Value"></label>\n            <textarea disabled class="lui-textarea lui-disabled">{{controller.variableVal}}</textarea>\n        </div>\n        \n        <div id="expression-editor-toolbar-insert">\n            <lui-button \n                type="button" \n                ng-click="insertVariableHandler($event)" \n                q-title-translation="Tooltip.ExpressionEditor.InsertVariable" \n                tid="insert-variable">\n                <span q-translation="ExpressionEditor.Insert"></span>\n            </lui-button>\n        </div>\n    </div>\n</div>'},function(t,e){t.exports='<div class="expression-editor-section">\n\n    <div class="expression-editor-toolbar-set-expressions">        \n        <div class="form-element">\n            <lui-radiobutton \n                x-disabled="controller.noSelections" \n                x-model="controller.setExpressionOption" \n                x-change="changeCurrentSetExpressionOption(\'0\')" \n                x-value="0"\n                >\n                {{ \'ExpressionEditor.SetExpressions.ContentOfCurrentSelection\' | translate }}\n            </lui-radiobutton>\n            <lui-radiobutton \n                x-disabled="!controller.bookmarks.length > 0" \n                x-model="controller.setExpressionOption" \n                x-change="changeCurrentSetExpressionOption(\'1\')" \n                x-value="1"\n                >\n                {{ \'ExpressionEditor.SetExpressions.ContentOfBookmark\' | translate }}\n            </lui-radiobutton>\n        </div>\n    </div>\n    <div id="expression-editor-toolbar-set-expression-bookmark" \n        ng-if="controller.setExpressionOption==1">\n        <label q-translation="ExpressionEditor.SetExpresions.Bookmark"></label>\n        <button \n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)" \n            data-context="bookmarks" \n            tid="bookmark-dropdown" \n            title="{{controller.selectedBookmark.label}}">\n            <div class="label">\n                {{controller.selectedBookmark.label}}\n            </div>\n        </button>\n\n    </div>\n    <div id="expression-editor-toolbar-set-expression-states" x-disabled="controller.noSelections && !controller.bookmarks.length > 0" ng-if="controller.showAlternateStates">\n        <label q-translation="ExpressionEditor.SetExpresions.AlternateState"></label>\n        <lui-select x-model="controller.selectedAlternateState">\n            <option value="{{state.value}}" ng-if="controller.setExpressionOption==0" ng-repeat="state in controller.currentSelectionsAlternateStates ">{{state.label}}</option>\n            <option value="{{state.value}}" ng-if="controller.setExpressionOption==1" ng-repeat="state in controller.selectedBookmark.alternateStates ">{{state.label}}</option>\n        </lui-select>\n    </div>\n    <div id="expression-editor-toolbar-insert">\n        <lui-button \n            type="button" \n            tid="insert-set-expression" \n            ng-disabled="controller.disableSetExpressionInsertButton()" \n            ng-click="insertSetExpressionHandler($event)" \n            q-title-translation="Tooltip.ExpressionEditor.InsertSetExpression">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(132)],s=function(t,e){var n=false;var i=false;var s=false;function o(t){var e=[{label:t,value:""},{label:"Sum",value:"Sum"},{label:"Count",value:"Count"},{label:"Avg",value:"Avg"},{label:"Min",value:"Min"},{label:"Max",value:"Max"},{label:"Median",value:"Median"},{label:"Fractile",value:"Fractile"},{label:"Only",value:"Only"},{label:"Concat",value:"Concat"},{label:"Mode",value:"Mode"},{label:"MinString",value:"MinString"},{label:"MaxString",value:"MaxString"},{label:"FirstSortedValue",value:"FirstSortedValue"}];return e}function r(){var e;e=this.selectedField?this.selectedField.value:"";e=t.escapeField(e);if(this.selectedCommonFunction){if(this.selectedCommonFunction&&""===this.selectedCommonFunction.value)return e;var n=this.distinctOption.length?this.distinctOption+" ":"",i=this.totalOption.length?this.totalOption+" ":"",s=this.currentOption&&""!==this.selections?"{"+this.selections+"} ":"",o=this.selectedCommonFunction.value;return o+"("+s+n+i+e+")"}return e}function a(t){var e=[];t.forEach(function(t){e.push({label:t.qName,value:t.qName})});return e}function l(t,e){var n=e;return t.filter(function(t){e&&(n=e.value);return-1!==t.qSrcTables.indexOf(n)})}function c(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}function u(t,e){return t.qName.toLowerCase().localeCompare(e.qName.toLowerCase())}function d(t,e){return t.label.toLowerCase().localeCompare(e.label.toLowerCase())}function p(t){var e=[];t.forEach(function(t){e.push({label:t,value:t})});return e}function h(t){var e,n;var i=[];for(e=0;e<t.length;++e)for(n=0;n<t[e].qSrcTables.length;++n)-1===i.indexOf(t[e].qSrcTables[n])&&i.push(t[e].qSrcTables[n]);i.sort(c);i=p(i);return i}function f(t,e,n){var i=n.value;var s=t.allTablesText.value;i!=s&&(e=l(e,n));t.fieldNames=a(e);q(t)}function g(t,e,n){e=e.value;t.functions=[];if(n.hasOwnProperty(e))e&&(t.functions=n[e]);else for(var i in n)n[i].forEach(function(e){-1===t.functions.indexOf(e)&&(t.functions=t.functions.concat(e))});if(t.functions&&t.functions.length>0){t.functions.sort(c);t.functions=p(t.functions);S(t)}}function v(t,e){var n=t.filter(function(t){return e||!t.qIsReserved&&!t.qIsConfig}).sort(u);n.forEach(function(t){t.label=t.qName;t.value=t.qName});return n}function m(t,e){var n=[];t.forEach(function(t){if(t.qFieldItems.length>0){var i=t.qStateName;n.push({label:"$"===i?e.get("AlternateState.DefaultState"):i,value:i})}});return n}function b(t,e){var n=[],i=true;t=t||[];t.forEach(function(t){if(t.qSelectionObject.qSelections.length>0){var s=t.stateName;i=false;n.push({label:"$"===s?e.get("AlternateState.DefaultState"):s,value:s})}});return{states:n,noSelections:i}}function y(t,e){var n=[];t.forEach(function(t){n.push({label:t.qData.title,value:t.qInfo.qId,alternateStates:s?m(t.qData.qBookmark.qStateData,e):[]})});return n.sort(d)}function x(t,e,n){var i=[];e.forEach(function(t){"EXT"!==t&&i.push({value:t,label:n.get("ExpressionEditor.Functions."+t)})});i.sort(function(t,e){return t.label.toLowerCase().localeCompare(e.label.toLowerCase())});i.unshift({value:t,label:n.get("ExpressionEditor.Functions."+t)});return i}function q(t){var e=false;t.fieldNames.forEach(function(n){var i=t.selectedField.label;var s=n.label;if(i==s){var o=t.selectedField;e=true;t.selectedField=o}});e||(t.selectedField=t.fieldNames[0])}function S(t){var e=false;t.functions.forEach(function(n){var i=t.selectedFunction.label;var s=n.label;if(i==s){var o=t.selectedFunction;e=true;t.selectedFunction=o}});e||(t.selectedFunction=t.functions[0])}function w(t){var e=["$Field","$FieldNo","$Fields","$Info","$Rows","$Table"],n=[],i=t.get("ExpressionEditor.FieldsTab.SystemFields");e.forEach(function(t){var e={qName:t,qSrcTables:[i]};n.push(e)});return n}function C(t,e){0!=e.length||t.showSystemVars||(t.selectedVariable="");t.variables.length>0&&-1===t.variables.indexOf(t.selectedVariable)&&(t.selectedVariable=t.variables[0])}function I(t,e){var n=[];switch(t){case"tables":n=e.tableNames;break;case"fields":n=e.fieldNames;break;case"commonFunctions":n=e.commonFunctions;break;case"functionCategories":n=e.functionCategories;break;case"functions":n=e.functions;break;case"variables":n=e.variables;break;case"bookmarks":n=e.bookmarks;break}return n}function _(t,e,n,i){switch(e){case"tables":n.setTableFilter(t);n.selectedTable=t;break;case"fields":n.selectedField=t;break;case"commonFunctions":n.selectedCommonFunction=t;break;case"functionCategories":n.selectedFunctionCategory=t;break;case"functions":n.selectedFunction=t;break;case"variables":n.selectedVariable=t;break;case"bookmarks":n.selectedBookmark=t;break;default:break}i(e)}function D(t){return e.get(t).then(function(t){return t.getLayout().then(function(){return{selectionsInStates:t.layout.selectionsInStates||[]}})})}function k(t){i=t.isAdvancedPart3;n=t.exposeSetExpression;s=t.isAlternateState;var e=t.translator,l=[];var c=t.fields.slice();c.sort(u);t.published||(c=c.concat(w(e)));var d=e.get("Common.All.Tables"),p=e.get("ExpressionEditor.Functions.ALL"),m=e.get("ExpressionEditor.FieldsTab.SelectAggregationHint");var S=t.sections.fields.state,k=t.sections.functions.state,T=t.sections.variables.state;d={label:d,value:d};""==S.table.label&&(S.table=d);if(""==S.aggregfunc.label){S.aggregfunc.label=m;S.aggregfunc.value=""}""==k.functionCategory.label&&(k.functionCategory.label=p);for(var E in t.functions)l.push(E);var A={getData:function t(e){return I(e,A)},setSelectedItem:_,allTablesText:d,commonFunctions:o(m),selectedCommonFunction:S.aggregfunc,readOnly:function t(){return""===A.selectedCommonFunction.value},setTableFilter:function t(e){f(A,c,e)},selectedTable:S.table,tableNames:[d].concat(h(c)),fieldNames:a(c),previewText:r,selectedField:S.field,distinctOption:S.distinctCheckBox,totalOption:S.totalCheckBox,currentOption:!!n&&S.setExpressionCheckBox,selections:"",noSelections:false,noSelectionsInObjectState:false,functions:[],functionCategories:x("ALL",l,e),selectedFunction:k.funct,selectedFunctionTip:"",selectedFunctionCategory:k.functionCategory,setFunctionCategoryFilter:function e(n){g(A,n,t.functions)},variables:v(t.variables,false),selectedVariable:T.variable,variableDef:"",variableVal:"",showSystemVars:T.sysVarsCheckBox,showVariablesFirstTime:T.showVariablesFirstTime,showVariableInfo:function t(e,n){A.variableDef=e;A.variableVal=n},setSysVarsFilter:function e(){var n=t.variables.filter(function(t){return!t.qIsReserved});if(0==n.length&&A.showVariablesFirstTime){T.sysVarsCheckBox=true;A.showSystemVars=true;T.showVariablesFirstTime=false;A.showVariablesFirstTime=false}A.variables=v(t.variables,A.showSystemVars);C(A,n)},setCurrentSelections:function t(e){A.selections=e},isStateInArray:function t(e,n){var i=false;e.forEach(function(t){t.value===n&&(i=true)});return i},setInitialOptionsForSetExpressionSection:function e(n){A.noSelections=n;if(n&&"0"===A.setExpressionOption)if(A.bookmarks.length>0){A.setExpressionOption="1";if(""===A.selectedBookmark){A.selectedBookmark=A.bookmarks[0];s&&""===A.selectedAlternateState&&A.bookmarks[0].alternateStates.length>0&&(A.selectedAlternateState=A.bookmarks[0].alternateStates[0].value)}}else{A.setExpressionOption="";A.setExpressionInsertDisabled=true}else s&&"0"===A.setExpressionOption&&A.currentSelectionsAlternateStates.length>0&&(A.selectedAlternateState=A.isStateInArray(A.currentSelectionsAlternateStates,t.sections.setExpressions.state.selectedAlternateState)?t.sections.setExpressions.state.selectedAlternateState:A.currentSelectionsAlternateStates[0].value)},disableSetExpressionInsertButton:function t(){return s?!A.selectedAlternateState:A.setExpressionInsertDisabled},isAlternateState:s,showAlternateStates:t.showAlternateStates,setExpressionOption:i?t.sections.setExpressions.state.setExpressionOption:"",bookmarks:y(t.bookmarks,e),currentSelectionsAlternateStates:[],selectedBookmark:i?t.sections.setExpressions.state.selectedBookmark:"",selectedAlternateState:s?t.sections.setExpressions.state.selectedAlternateState:"",setExpressionInsertDisabled:false,stateName:t.stateName};D(t.app).then(function(n){var i=t.stateName||"$";A.noSelectionsInObjectState=true;n.selectionsInStates.forEach(function(t){t.stateName===i&&t.qSelectionObject.qSelections.length>0&&(A.noSelectionsInObjectState=false)});if(s){var o=b(n.selectionsInStates,e);A.currentSelectionsAlternateStates=o.states;A.setInitialOptionsForSetExpressionSection(o.noSelections)}else A.setInitialOptionsForSetExpressionSection(A.noSelectionsInObjectState)});q(A);return A}return{create:k}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<qui-float qui-offset="offset" qui-resize-on-change="content" class="qv-function-tip-container">\n\t<div class=\'qv-function-tip-view\' ng-show=\'content\'>{{content}}</div>\n</qui-float>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(144),n(286),n(90)],s=function(t,e,n,i){var s=["like","not","and","or","xor","follows","precedes","bitnot","bitand","bitor","bitxor","$","$1","$2","$3","$4","$5","$_1","$_2","$_3","$_4","$_5","total","distinct","nodistinct","all","include","must_include"];function o(t,e){if("field"===t)return{text:e,type:t,value:i.escapeField(e)};return{text:e,type:t}}function r(t){var e=t.bnf;var n=a();var i=t.fields;var r=t.variables;var l=s.map(o.bind(null,"keyword"));var c=Object.keys(r).map(o.bind(null,"variable"));var u=Object.keys(i).map(o.bind(null,"field"));var d=e.getAllFunctions().map(o.bind(null,"function"));var p=l.concat(c,u,d);function h(t){return e.isFunction(t)}function f(t){return e.getFunctionTip(t)}function g(t){return!!n[t.toLowerCase()]||h(t)}function v(t){return!!i[t]}function m(t){return!!r[t]}function b(){return p}var y={getAutocompleteList:b,getFunctionTip:f,getFunctionsAndCategories:e.getAllFunctionsAndCategories,isFunction:h,isField:v,isKeyword:g,isVariable:m};return y}function a(){var t={};for(var e=0;e<s.length;++e){var n=s[e];t[n]=true}return t}function l(t){return t.enigmaModel.getFieldList().then(function(t){t=e.expand(t);var n={};for(var i=0;i<t.length;++i){var s=t[i].qName;n[s]=true}return n})}function c(t){return t.enigmaModel.getVariableList().then(function(t){var e={};for(var n=0;n<t.length;++n){var i=t[n].qName;e[i]=true}return e})}function u(e){return t.all({bnf:n.getExpressionBnfModel(e),fields:l(e),variables:c(e)}).then(r)}return{get:u}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(687),n(97),n(99),n(139),n(218)],s=function(t,e,n,i,s){function o(t,e){if(""===e)return t;return t.filter(function(t){if("undefined"===typeof t)return false;return s.string(t.label.toLowerCase()).indexOf(s.string(e.toLowerCase()))>-1})}var r={template:e,scope:{alignTo:"=",close:"=",qvaOutsideIgnoreFor:"=",position:"="},controller:["$scope",function(e){var s=t.extend([],e.items);e.autoFocus=i.treatAsDesktop();e.search={term:""};e.onEscape=function(){e.search.term="";e.closePopover(e.context)};e.clearSearchTerm=function(){e.search.term=""};e.$watch("search.term",function(t){e.items=o(s,t);e.showClearIcon=""!==t});n.on("start",e.closePopover);e.$on("$destroy",function(){n.off("start",e.closePopover)})}]};return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover \n    class="popover-wrapper" \n    style="min-width: 200px;width: 230px;" \n    align-to="alignTo" \n    position="position" \n    collision="\'flipfit\'" \n    on-close-view="closePopover(event)">\n    <object-add-typeahead>\n        <lui-popover-header>\n            <div class="lui-search">\n                <span class="lui-icon  lui-icon--search  lui-search__search-icon"></span>\n                <input class="lui-search__input" maxlength="255" spellcheck="false" type="text" name="new-test" placeholder="{{ \'ExpressionEditor.SearchPopupPlaceholder\' | translate}}" autocomplete="off"\n                    ng-model="search.term" on-escape="onEscape($event)" qva-focus="autoFocus" object-add-typeahead-input/>\n                <button class="lui-search__clear-button" ng-click="clearSearchTerm()">\n                    <span ng-if="showClearIcon" class="lui-icon  lui-icon--small  lui-icon--close"></span>\n                </button>\n            </div>        \n        </lui-popover-header>\n        <div class="content" object-add-typeahead-menu>\n            <ul class="lui-list">\n                <li class="lui-list__item lui-list__action"                    \n                    ng-repeat="item in items" tid="item"\n                    object-add-typeahead-item="item"\n                    on-select="setSelectedItem(item, context, ctrl, closePopover)">\n                    <span qve-highlight text="{{item.label}}" title="{{item.label}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n                </li>\n            </ul>\n        </div>\n    </object-add-typeahead>\n</lui-popover>'},function(t,e){t.exports="<div ng-transclude></div>"},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){this.container=t.container;this.body=t.body;this.alignAgainst=t.alignAgainst}t.prototype.showTranscluded=function(t){t(function(t){this.container.appendTo(this.body).append(t)}.bind(this))};t.prototype.showContent=function(t){this.container.appendTo(this.body).append(t)};t.prototype.update=function(){var t=this.alignAgainst.offset();this.container.css({top:t.top,left:t.left,width:this.alignAgainst.width(),height:this.alignAgainst.height(),zIndex:1021})};t.prototype.hide=function(){this.container.remove()};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(346),n(190)],s=function(t,e){var n=t.REGEXP_WORD;e.defineMode("qlikviewscript",function(t,e){var i=/[+\-*&=<>]/,s=/[\u0022\u0027\u0060\u00b4[]/;function o(t,e,n){e.tokenize=n;return n(t,e)}function r(t,e){var n;while(null!=(n=t.next()))if(n==e)return false;return false}var a,l;function c(t,e,n){a=t;l=n;return e}function u(t,r){if(t.eatSpace()){a="whitespace";return null}a="any";var l=t.next();if(s.test(l))return o(t,r,p("["===l?"]":l));if(/[[\]{}(),;:]/.test(l))return c(l);if("0"==l&&t.eat(/x/i)){t.eatWhile(/[\da-f]/i);return c("number","number")}if(/[.\d]/.test(l)){t.match(/^\d*(?:\.\d*)?(?:[eE][+-]?\d+)?/);if(!t.eol()){l=t.peek();if(/[A-z]/.test(l))return"normaltext"}return"number"}if("/"===l){if(t.eat("*"))return o(t,r,h);if(t.eat("/")){t.skipToEnd();return"comment"}t.eatWhile(i);return"operator"}if(i.test(l)){t.eatWhile(i);return c(l,"operator")}if("$"===l&&t.match(/^\(=/,false,true))return c("$");if("$"===l&&t.match(/^\((MUST_INCLUDE|INCLUDE)=/i,false,true))return c("$");if("$"===l&&t.match(/^\(/,false,true)){r.tokenize=g;return c("$(")}t.eatWhile(n);var u=t.current();var d=u.toLowerCase();if("rem"===d)return o(t,r,f);if(e.service.isFunction(d)&&t.match(/(^\s*\()/,false,true))return c("function","keyword",d);if(e.service.isField(u))return c("field","field");if(e.service.isVariable(u))return c("variable","variable");if(e.service.isKeyword(d))return c("keyword","keyword");return"normaltext"}function d(t){return t.substr(1,t.length-2)}function p(t){return function(n,i){if(!r(n,t)){i.tokenize=u;if("'"!==t){var s=d(n.current(),t);if(e.service.isField(s))return c("field","field");if(e.service.isVariable(s))return c("variable","variable")}}return c("string","string")}}function h(t,e){var n=false,i;while(i=t.next()){if("/"==i&&n){e.tokenize=u;break}n="*"==i}return c("comment","comment")}function f(t,e){var n;while(n=t.next())if(";"==n){e.tokenize=u;break}return c("comment","comment")}function g(t,n){a="any";var i=t.next();")"==i&&(n.tokenize=u);if(/[(),]/.test(i))return c(i);t.eatWhile(/[^(),]/);var s=t.current();if(!/^\d/.test(s)&&e.service.isVariable(s))return c("variable","variable");return"normaltext"}function v(t,e,n,i){this.type=t;this.prev=e;this.info=n;this.pos=i}function m(t,e,n,i,s){var o=t.cc;b.state=t;b.stream=s;b.marked=null;b.cc=o;while(true){var r=o.length?o.pop():I;if(r(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();if(b.marked)return b.marked;return e}}}var b={state:null,column:null,marked:null,cc:null};function y(){for(var t=arguments.length-1;t>=0;t--)b.cc.push(arguments[t])}function x(){y.apply(null,arguments);return true}function q(t,e){var n=function n(){var i=b.state;i.lexical=new v(t,i.lexical,e,b.stream.pos)};n.lex=true;return n}function S(){var t=b.state;t.lexical.prev&&(t.lexical=t.lexical.prev)}S.lex=true;function w(t){return function e(n){return n==t?x():";"==t?y():x(e)}}function C(t,e){return function n(i){return i==e?x():y(t,n)}}function I(t){if("function"==t)return x(q("qvfunction",l),w("("),C(I,")"),S);if("("===t)return x(C(I,")"));if("$("===t)return x(w("("),C(I,")"));return x()}return{startState:function t(){return{tokenize:u,lastType:null,cc:[],lexical:new v("block")}},token:function t(e,n){var i=n.tokenize(e,n);if("comment"==a)return i;n.lastType=a;return m(n,i,a,l,e)},lineComment:"//"}});return{REGEXP_WORD:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(51)],s=function(t,e){t.directive("qvCodeareaFunctionTip",function(){return{restrict:"A",require:"qvCodearea",link:function n(i,s,o,r){var a;var l;var c=22;var u=i.$watch(o.qvCodeareaFunctionTip,function(n){function s(){var t=r.codemirror.getCursor();var e=r.codemirror.getTokenAt(t,true);if("comment"!==e.type){var n=0,i=e.state.lexical;while(i&&"qvfunction"!==i.type||0===n&&i.info&&e.string.toLowerCase()===i.info.toLowerCase()){i=i.prev;n++}return i}return}function o(t,e){var n=r.codemirror.getCursor();var i={line:n.line,ch:n.ch};var s,o;while(i.line>=0){s=r.codemirror.getLine(i.line).toLowerCase();o=s.substring(t.pos-e.length,t.pos);if(o===e){i.ch=t.pos-e.length;break}i.line-=1}var a=r.codemirror.charCoords(i);a.top-=r.codemirror.defaultTextHeight()+c;return a}function d(){var i=s();var r=i?i.info:void 0;var l=r?n.service.getFunctionTip(r):void 0;t.$apply(t.$rootScope,function(){p();if(l){var t=o(i,r);v();a=e.show(n.view,{content:l,offset:t})}})}function p(){m();if(a){a.destroy();a=void 0}}function h(){clearTimeout(l);l=setTimeout(d,250)}function f(){p()}var g={Esc:function t(){i.$apply(function(){p()})}};function v(){r.codemirror.addKeyMap(g)}function m(){r.codemirror.removeKeyMap(g)}if(n){r.codemirror.on("blur",f);r.codemirror.on("cursorActivity",h);i.$on("$destroy",function(){r.codemirror.off("blur",f);r.codemirror.off("cursorActivity",h);p()});u()}},true)}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(51),n(693),n(97),n(346)],s=function(t,e,n,i,s,o){var r=100;var a=o.REGEXP_WORD_SEPARATOR;function l(t){var e=t.getTokenAt(t.getCursor()).type;return"keyword"===e||"field"===e||"variable"===e}function c(t,e,n){if(t.somethingSelected()||l(t)&&!n||e.disabled)return null;var i=e.getHints(t);var s=i.list;if(0===s.length)return null;s.length>r&&(s=s.slice(0,r));var o=t.cursorCoords(false!==e.alignWithWord?i.from:null);return{from:i.from,to:i.to,hints:s,selectedHint:n?n.selectedHint:0,cursorPos:o}}function u(t,n){this.dialogHandle=null;this.dialogOptions={};this.state=null;this.options=n;this.cm=t;this.currentOptions=null;this.once=null;this.closingOnBlur=null;this.bound={cursorActivity:this.cursorActivity.bind(this),pick:this.pick.bind(this),close:this.close.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),choose:this.choose.bind(this),showHint:this.showHint.bind(this)};function i(){return 8}var s=this;this.ourMap={Up:function t(){s.changeActive(s.state.selectedHint-1);e.$rootScope.$apply()},Down:function t(){s.changeActive(s.state.selectedHint+1);e.$rootScope.$apply()},PageUp:function t(){s.changeActive(s.state.selectedHint-i());e.$rootScope.$apply()},PageDown:function t(){s.changeActive(s.state.selectedHint+i());e.$rootScope.$apply()},Home:function t(){s.changeActive(0);e.$rootScope.$apply()},End:function t(){s.changeActive(s.state.hints.length-1);e.$rootScope.$apply()},Enter:this.bound.pick,Tab:this.bound.pick,Esc:this.bound.close}}u.prototype.cursorActivity=function(){var t=e.getService("$timeout");t.cancel(this.once);this.once=null;var n=this.cm.getCursor();n.line!==this.startLine||this.cm.somethingSelected()?this.close():this.once=t(this.bound.showHint,70)};u.prototype.choose=function(t){this.changeActive(t);this.pick()};u.prototype.pick=function(){this.cm.replaceRange(this.state.hints[this.state.selectedHint].value,this.state.from,this.state.to);this.cm.focus();this.close();e.$apply(e.$rootScope)};u.prototype.onBlur=function(){var t=e.getService("$timeout");this.closingOnBlur=t(this.bound.close,300)};u.prototype.onFocus=function(){var t=e.getService("$timeout");t.cancel(this.closingOnBlur);this.closingOnBlur=null};u.prototype.changeActive=function(t){if(!this.state)return;t=Math.max(0,Math.min(t,this.state.hints.length-1));if(this.state.selectedHint===t)return;this.state.selectedHint=t};u.prototype.close=function(){var t=e.getService("$timeout");t.cancel(this.once);t.cancel(this.startTimeout);if(!this.dialogHandle)return;this.dialogHandle.destroy();this.dialogHandle=null;this.cm.removeKeyMap(this.ourMap);this.cm.off("cursorActivity",this.bound.cursorActivity);this.cm.off("blur",this.bound.onBlur);this.cm.off("focus",this.bound.onFocus);this.cm.off("scroll",this.bound.close);this.state=null;e.$apply(e.$rootScope)};u.prototype.open=function(){this.dialogHandle=n.show(this.options.view,this.dialogOptions);this.startLine=this.cm.getCursor().line;this.cm.addKeyMap(this.ourMap);this.cm.on("cursorActivity",this.bound.cursorActivity);this.cm.on("blur",this.bound.onBlur);this.cm.on("focus",this.bound.onFocus);this.cm.on("scroll",this.bound.close)};u.prototype.showHint=function(){var t=this.state;this.state=c(this.cm,this.options,t);if(!this.state){t&&this.close();return}this.state.choose=this.bound.choose;this.dialogOptions.state=this.state;t||this.open()};u.prototype.start=function(){var t=e.getService("$timeout");if(this.state)return;this.startTimeout&&t.cancel(this.startTimeout);this.startTimeout=t(this.bound.showHint,500)};var d={keyword:{translation:"Common.Keyword",allowQuote:false},variable:{translation:"Common.Variable",allowQuote:true},field:{translation:"Common.Field",allowQuote:true},function:{translation:"Common.Function",allowQuote:false}};function p(t){return"["+t.replace(/\]/g,"]]")+"]"}function h(t,e){var n={};var i=[];var s=t.toLowerCase();var o="["===t[0];function r(t){"string"===typeof t&&(t={text:t});var e=t.text;if(o){if(!d[t.type]||!d[t.type].allowQuote)return;e=p(e)}if(!e||0!==e.toLowerCase().indexOf(s))return;if(!n[e]){n[e]={text:t.text,types:[],value:t.value||e};i.push(n[e])}d[t.type]&&n[e].types.push({id:t.type,key:d[t.type].translation})}function l(t,e){var n=t.text.toLowerCase();var i=e.text.toLowerCase();return n===i?0:n>i?1:-1}if(!o&&a.test(t)||/^\d+$/.test(t))return[];if(""!==t){e.forEach(r);i.sort(l)}1===i.length&&t===i[0].value&&(i=[]);return i}function f(t,e){var n=t.getCursor();var i=t.getTokenAt(n);var s=h(i.string,e);return{list:s,from:{line:n.line,ch:i.start},to:{line:n.line,ch:i.end}}}e.directive("qvCodeareaAutocomplete",function(){return{restrict:"A",require:"qvCodearea",link:function e(n,o,r,a){var l=[37,38,39,40,33,34,27];var c=n.$watch(r.qvCodeareaAutocomplete,function(e){function o(t){return f(t,e.service.getAutocompleteList())}function r(){p.start()}function d(e,n){-1===t.inArray(n.which,l)&&r()}var p;if(e){e.view||(e.view=i);e.getHints||(e.getHints=o);p=new u(a.codemirror,e);var h=p.close.bind(p);a.codemirror.on("focus",r);a.codemirror.on("keyup",d);s.on("end",h);n.$on("$destroy",function(){a.codemirror.off("focus",r);a.codemirror.off("keyup",d);s.off("end",h);p.close()});c()}},true)}}});return{getCompletions:h}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(694),n(11)],s=function(t,e){function n(t,e,n){var i=n.bottom+t.height<=e.height;var s=i?n.bottom:n.top-t.height;var o=Math.max(0,n.left+t.width-e.width);var r=n.left-o;return{top:s,left:r}}function i(t,e){t.$$postDigest(function(){t.$$postDigest(e)})}return{scope:{state:"="},template:t,controller:["$scope","$element",function(t,s){var o=s.find(".qv-autocomplete-container");var r=e(window);function a(){var e={width:r.width(),height:r.height()};var i=o[0].getBoundingClientRect();var s=t.state.cursorPos;var a=n(i,e,s);o.css({left:a.left,top:a.top})}t.$watch("state.hints.length",function(){i(t,a)})}]}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-autocomplete-container">\n\t<ul class="codearea-autocomplete-hints">\n\t\t<li ng-repeat="item in state.hints track by item.text"\n\t\t\tqva-scroll-into-view="{ scroll: state.selectedHint == $index, scrollSelector: \'.codearea-autocomplete-hints\' }"\n\t\t\tclass="codearea-autocomplete-hint"\n\t\t\tng-class="{ \'codearea-autocomplete-hint-active\': state.selectedHint == $index }"\n\t\t\tng-mouseover="state.selectedHint = $index;"\n\t\t\tqva-activate="state.choose( $index )">\n\n\t\t\t<div class="codearea-autocomplete-hint-text">{{item.text}}</div>\n\t\t\t<div ng-repeat="type in item.types track by $index"\n\t\t\t\t class="codearea-autocomplete-hint-type {{type.id}}"\n\t\t\t\t q-translation="{{type.key}}"></div>\n\t\t</li>\n\t</ul>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(190)],s=function(t){var e=t.Pos;function n(t,n,i,s){this.atOccurrence=false;this.cm=t;s||"string"!=typeof n||(s=false);i=i?t.clipPos(i):e(0,0);this.pos={from:i,to:i};n||(n="");if("string"!=typeof n){n.global||(n=new RegExp(n.source,n.ignoreCase?"ig":"g"));this.matches=function(i,s){var o,r,a;if(i){n.lastIndex=0;o=t.getLine(s.line).slice(0,s.ch);r=n.exec(o);a=0;while(r){a+=r.index+1;o=o.slice(a);n.lastIndex=0;var l=n.exec(o);if(!l)break;r=l}a--}else{n.lastIndex=s.ch;o=t.getLine(s.line);r=n.exec(o);a=r&&r.index}if(r&&r[0])return{from:e(s.line,a),to:e(s.line,a+r[0].length),match:r}}}else{s||(n=n.toLowerCase());var o=s?function(t){return t}:function(t){return t.toLowerCase()};var r=n.split("\n");1==r.length?n.length?this.matches=function(i,s){var r=o(t.getLine(s.line)),a=n.length,l;if(i?s.ch>=a&&-1!=(l=r.lastIndexOf(n,s.ch-a)):-1!=(l=r.indexOf(n,s.ch)))return{from:e(s.line,l),to:e(s.line,l+a)}}:this.matches=function(){}:this.matches=function(n,i){var s=i.line,a=n?r.length-1:0,l=r[a],c=o(t.getLine(s));var u=n?c.indexOf(l)+l.length:c.lastIndexOf(l);if(n?u>=i.ch||u!=l.length:u<=i.ch||u!=c.length-l.length)return;for(;;){if(n?!s:s==t.lineCount()-1)return;c=o(t.getLine(s+=n?-1:1));l=r[n?--a:++a];if(a>0&&a<r.length-1){if(c!=l)return;continue}var d=n?c.lastIndexOf(l):c.indexOf(l)+l.length;if(n?d!=c.length-l.length:d!=l.length)return;var p=e(i.line,u),h=e(s,d);return{from:n?h:p,to:n?p:h}}}}}n.prototype={findNext:function t(){return this.find(false)},findPrevious:function t(){return this.find(true)},find:function t(n){var i=this,s=this.cm.clipPos(n?this.pos.from:this.pos.to);function o(t){var n=e(t,0);i.pos={from:n,to:n};i.atOccurrence=false;return false}for(;;){if(this.pos=this.matches(n,s)){this.pos.from&&this.pos.to||window.console.log(this.matches,this.pos);this.atOccurrence=true;return this.pos.match||true}if(n){if(!s.line)return o(0);s=e(s.line-1,this.cm.getLine(s.line-1).length)}else{var r=this.cm.lineCount();if(s.line==r-1)return o(r);s=e(s.line+1,0)}}},from:function t(){if(this.atOccurrence)return this.pos.from},to:function t(){if(this.atOccurrence)return this.pos.to},replace:function n(i){if(!this.atOccurrence)return;var s=t.splitLines(i);this.cm.replaceRange(s,this.pos.from,this.pos.to);this.pos.to=e(this.pos.from.line+s.length-1,s[s.length-1].length+(1==s.length?this.pos.from.ch:0))}};function i(t,e,i,s){return new n(t,e,i,s)}return{getSearchCursor:i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(190),n(1093)],s=function(t,e){var n="\r\n";t.directive("qvCodeareaExposedContextApi",["$parse","$timeout",function(t,i){return{require:["qvCodearea","qvCodeareaExposedContextApi"],link:function e(n,i,s,o){var r=o[0];var a=o[1];a._connectCodeArea(r);var l=t(s.qvCodeareaExposedContextApi);l.assign(n,a);n.$on("$destroy",function(){l.assign(n,void 0);a._connectCodeArea(void 0)})},controller:function t(){var s;function o(t){s=t}function r(){var t=s.codemirror.getTokenAt(s.codemirror.getCursor());var e=0,n=t.state.lexical;while(n&&"qvfunction"!==n.type||0===e&&n.info&&t.string.toLowerCase()===n.info.toLowerCase()){n=n.prev;e++}return!!n&&n.info}function a(){s.focus()}function l(){s.codemirror.undo()}function c(){s.codemirror.redo()}function u(){e.commands.toggleComment(s.codemirror);a()}function d(){s.codemirror.indentSelection("add");a()}function p(){s.codemirror.indentSelection("subtract");a()}function h(){return s.codemirror.options.readOnly}function f(t){var e=s.codemirror.getDoc().getSelection();var n=t(e);s.codemirror.replaceSelection(n)}function g(t){s.codemirror.setCursor(s.codemirror.getCursor("end"));var e=s.codemirror.getCursor().line,i=s.codemirror.getCursor().ch,o=s.codemirror.getLine(e).length;if(o>0)if(i===o){s.codemirror.setCursor(e,o);s.codemirror.replaceSelection(n)}else{s.codemirror.setCursor(s.codemirror.lineCount(),0);t=n+n+t}s.codemirror.setCursor(s.codemirror.getCursor("end"));s.codemirror.replaceSelection(t);s.focus()}function v(t){s.codemirror.replaceSelection(t,"end");s.focus()}function m(t){i(function(){var e=s.codemirror.lineCount();t<e?s.codemirror.setCursor(t-1,0):s.codemirror.setCursor(e-2,0);s.focus()})}function b(t){return s.codemirror.getCursor(t)}function y(t,e,n){s.codemirror.setCursor(t,e,n)}function x(){return s.codemirror.lineCount()}var q={applyToSelection:f,focus:a,undo:l,redo:c,comment:u,indent:d,outdent:p,insertCode:g,replaceSelection:v,getFunctionNameUnderCursor:r,gotoLine:m,isReadOnly:h,getCursor:b,setCursor:y,lineCount:x,_connectCodeArea:o,codemirror:void 0};Object.defineProperty(q,"canUndo",{get:function t(){return s&&s.codemirror&&s.codemirror.historySize().undo>0},enumerable:true});Object.defineProperty(q,"canRedo",{get:function t(){return s&&s.codemirror&&s.codemirror.historySize().redo>0},enumerable:true});return q}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48)],s=function(t,e){function n(t,e){var n=t.length;var i=e.length;var s;var o=Math.min(t.length,e.length);for(s=0;s<o;s++)if(t.charAt(s)!==e.charAt(s))break;if(s===t.length&&s===e.length)return;var r=s;var a;var l;for(s=0;s<o;s++){a=n-s-1;l=i-s-1;if(a<r||l<r)break;if(t.charAt(n-s-1)!==e.charAt(i-s-1))break}var c=n-s-1;var u=i-s-1;return{start:r,targetRange:{from:r,to:c+1},sourceRange:{from:r,to:u+1}}}e.directive("qvCodeareaExposedTouchApi",["$parse","$timeout",function(e,i){return{require:["qvCodearea","qvCodeareaExposedTouchApi"],link:function t(n,s,o,r){var a=r[0];var l=r[1];l._connectCodeArea(a);var c=e(o.qvCodeareaExposedTouchApi);c.assign(n,l);n.$on("$destroy",function(){c.assign(n,void 0);i(function(){l._connectCodeArea(void 0)})})},controller:["$scope",function(e){var s,o;function r(t){s=t}function a(t,e){s.codemirror.scrollTo(e,t)}function l(t){s.setCustomFocusFn(t)}function c(n){function i(){var e=t(s.codemirror.getScrollerElement());n(e.scrollTop(),e.scrollLeft())}s.codemirror.on("scroll",i);e.$on("$destroy",function(){s.codemirror.off("scroll",i);n=void 0})}function u(t){function n(){var e={anchor:s.codemirror.indexFromPos(s.codemirror.getCursor("anchor")),head:s.codemirror.indexFromPos(s.codemirror.getCursor("head"))};t(s.codemirror.getValue(),e)}function i(){o||n()}n();s.codemirror.on("change",i);e.$on("$destroy",function(){s.codemirror.off("change",i);t=void 0})}function d(n){e.$watch(function(){return String(s.codemirror.lineCount()).length},function(){i(function(){var e=t(s.codemirror.getGutterElement()).outerWidth();var i={top:0,left:e,bottom:0,right:0};n(i)})});e.$on("$destroy",function(){n=void 0})}function p(t,e,n){s&&s.codemirror.setSelection(t,e,n)}function h(t,e){var i=s.codemirror.getValue("\n");var r=n(i,e);if(r){var a=e.substring(r.sourceRange.from,r.sourceRange.to);var l=s.codemirror.posFromIndex(r.targetRange.from);var c=s.codemirror.posFromIndex(r.targetRange.to);o=true;s.codemirror.replaceRange(a,l,c);o=false}}function f(){s.cssClasses["qv-codearea-disable-selection"]=true}function g(){s.cssClasses["qv-codearea-disable-selection"]=false}var v={_connectCodeArea:r,scrollTo:a,onScroll:c,setOverlayFocuser:l,replicateSelection:p,replicateContent:h,onNewContent:u,onResize:d,disableSelections:f,restoreSelections:g};return v}]}}]);return{diff:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(347)],s=function(t,e){t.directive("qvCodeareaExposedSearchApi",["$parse",function(t){return{require:"qvCodearea",link:function n(i,s,o,r){var a=t(o.qvCodeareaExposedSearchApi);a.assign(i,e.createSingleCodeareaSearcher(r.codemirror));i.$on("$destroy",function(){a.assign(i,void 0)})},controller:function t(){}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvCodeareaAccelerators",function(){return{require:["qvCodearea","qvCodeareaExposedContextApi"],link:function e(n,i,s,o){var r=o[0];var a=o[1];var l={keyCode:void 0,ctrlKey:void 0,shiftKey:void 0};function c(t,e){return t.keyCode===e.keyCode&&t.ctrlKey===(e.ctrlKey||false)&&t.shiftKey===(e.shiftKey||false)}function u(e,i){var o=n.$eval(s.qvCodeareaAccelerators);for(var r in o){var u=o[r];if(c(i,u)&&(!u.previous||c(l,u.previous))){t.$apply(t.$rootScope,function(){u.fn(a)});l={keyCode:void 0,ctrlKey:void 0,shiftKey:void 0};i.preventDefault();return}}l={keyCode:i.keyCode,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey}}r.codemirror.on("keydown",u);n.$on("$destroy",function(){r.codemirror.off("keydown",u)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48)],s=function(t,e){function n(e){var n=t("<div class='qv-codearea-breakpoint-marker'><span class='lui-icon lui-icon--minus'></span></div>");n.data("breakpoint",e);return n[0]}function i(e,n){if(n.enabled){t(e).addClass("qv-codearea-breakpoint-marker-enabled");t(e).removeClass("qv-codearea-breakpoint-marker-disabled")}else{t(e).addClass("qv-codearea-breakpoint-marker-disabled");t(e).removeClass("qv-codearea-breakpoint-marker-enabled")}}e.directive("qvCodeareaBreakpoints",function(){return{require:"qvCodearea",link:function s(o,r,a,l){var c;function u(t){if(t){c=t;var e=l.codemirror.getDoc().lineCount();for(var s=0;s<e;s++){var o=s+1;var r=t[o];var a=l.codemirror.lineInfo(s).gutterMarkers;var u=a&&a["qv-codearea-breakpoint"];if(r){if(!u){u=n(r);l.codemirror.setGutterMarker(s,"qv-codearea-breakpoint",u)}i(u,r)}else u&&l.codemirror.setGutterMarker(s,"qv-codearea-breakpoint",null)}}}o.$watch(a.qvCodeareaBreakpoints,u);o.$watch(a.qvCodeareaBreakpoints,u,true);function d(t){var e=l.codemirror.getDoc().lineCount();for(var n=t.from.line;n<e;n++){var i=l.codemirror.lineInfo(n).gutterMarkers;if(i&&i["qv-codearea-breakpoint"])return true}return false}function p(t){return t.text.length!==t.removed.length}function h(n,i){!l.supressChangeEvent&&p(i)&&d(i)&&e.$apply(e.$rootScope,function(){var e=c;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var i=l.codemirror.getDoc().lineCount();for(var s=0;s<i;s++){var o=s+1;var r=l.codemirror.lineInfo(s).gutterMarkers;var a=r&&r["qv-codearea-breakpoint"];if(a){var u=t(a);var d=u.data("breakpoint");d.lineNbr=o;e[o]=d}}})}function f(t,e){l.disabled||o.$apply(function(){var t=e+1;var n=c[t];n?delete c[t]:c[t]={enabled:true,lineNbr:t}})}l.codemirror.on("change",h);l.codemirror.on("gutterClick",f);var g={F9:function t(){f(l.codemirror,l.codemirror.getCursor().line)}};l.codemirror.addKeyMap(g);o.$on("$destroy",function(){l.codemirror.off("change",h);l.codemirror.off("gutterClick",f);l.codemirror.removeKeyMap(g)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvCodeareaDebugLocation",function(){return{require:"qvCodearea",link:function t(e,n,i,s){var o;e.$watch(i.qvCodeareaDebugLocation,function(t){if(t){var e=s.codemirror.lastLine()+1;var n=t.lineNbr;n>e&&(n=e);if(o){s.codemirror.removeLineClass(o,"background","qv-codearea-current-debug-line");s.codemirror.removeLineClass(o,"background","qv-codearea-current-debug-line-error")}if(n>0&&n<=e){s.codemirror.addLineClass(n-1,"background","qv-codearea-current-debug-line");t.errorMessage&&s.codemirror.addLineClass(n-1,"background","qv-codearea-current-debug-line-error");s.codemirror.scrollIntoView({line:n-1,ch:0},200);o=s.codemirror.getLineHandle(n-1)}}},true)}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvCodeareaErrors",function(){return{require:"qvCodearea",link:function t(e,n,i,s){var o=[];e.$watch(i.qvCodeareaErrors+".content",function(t){if(t){var e;for(e=0;e<o.length;e++)o[e].clear();for(e=0;e<t.length;e++){var n=t[e];var i={line:n.qLineInTab,ch:n.qColInLine},r={line:n.qLineInTab,ch:n.qColInLine+n.qErrLen},a=s.codemirror.markText(i,r,{className:"cm-servererror"});o.push(a)}}},true);e.$on("$destroy",function(){o=[]})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(704)],s=function(t,e){t.directive("qvCodeareaLimit",function(){return{require:"qvCodearea",link:function t(n,i,s,o){function r(t,i){var o=n.$eval(s.qvCodeareaLimit);o&&o>0&&e(t,i,o)}o.codemirror.on("beforeChange",r);n.$on("$destroy",function(){o.codemirror.off("beforeChange",r)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t,e,n){var i=e.text.join("\n");var s=t.getRange(e.from,e.to).length;var o=i.length;var r=o-s;var a=t.getValue().length;if(a>=n&&0===s)e.cancel();else if(a+r>n){o=Math.max(0,n-a+s);i=i.substr(0,o);e.update(null,null,i.split("\n"))}}return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(11),n(163),n(54)],s=function(t,e,n,i){var s,o,r;function a(t,e){var n=[],i,r,a;for(r=0;r<t.length;r++){i=t[r].split(" ");for(a=0;a<i.length;a++)if(i[a].toLowerCase()===e.toLowerCase()){if(!s){s=i.length>1;o=a>0}n.push(t[r])}}return n}function l(t,e,n){if(" "===n.string){var i=t.getTokenAt({ch:n.end+1,line:e.line});if(i.string.length>1)return i}return n}function c(t,e,n,i){var s=i?e.end-(e.string.length+1):e.end+2,o=t.getTokenAt({ch:s,line:n.line});return o}function u(t,e,n,i){var s={left:e.pageX,top:e.pageY};var o=t.coordsChar(s,"window");var r=t.getTokenAt(o);return p(t,r,n,i)}function d(t,e,n,i){var s=t.getTokenAt(t.getCursor());return p(t,s,n,i)}function p(t,e,u,d){s=false;o=false;u=u||"scriptsyntax";var p=n.path+u+".",h=[],f,g,v;if("keyword"!==e.type&&"function"!==e.type)return false;e=l(t,t.getCursor(),e);h=a(i.pluck(d.getAutocompleteList(),"text"),e.string);if(s){g=c(t,e,t.getCursor(),o);v=a(h,g.string);f=v.length>0&&g.string!==e.string?o?g.string+"_"+e.string:e.string+"_"+g.string:e.string}else f=e.string;p+=f;/firefox/.test(window.navigator.userAgent.toLocaleLowerCase())&&r&&r.close();r=window.open(p,"__qlikviewhelp");return true}t.directive("qvCodeareaHelpMode",["$parse",function(t){return{require:"qvCodearea",link:function n(i,s,o,r){var a;var l=i.$watch(o.qvCodeareaHelpModeOptions,function(n){l();function c(e){if(a){e.preventDefault();var s=u(r.codemirror,e,n.syntax,n.service);s&&i.$apply(function(){t(o.qvCodeareaHelpMode).assign(i,false)})}}function p(t,e){if((72===e.keyCode||104===e.keyCode)&&e.ctrlKey){e.preventDefault();d(r.codemirror,e,n.syntax,n.service)}}i.$watch(o.qvCodeareaHelpMode,function(t){a=t;r.cssClasses["qv-codearea-help-mode"]=t});e(s).on("click",c);r.codemirror.on("keydown",p);i.$on("$destroy",function(){e(s).off("click",c);r.codemirror.off("keydown",p)})})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvCodeareaTouchOverlay",function(){return{restrict:"E",replace:true,scope:{codeareaTouchApi:"=",enabled:"=",helpMode:"="},template:'<div class="qv-codearea-touch-overlay-container" ng-style="containerStyle"><textarea class="qv-codearea-touch-overlay" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" wrap="off"></textarea></div>',link:function t(e,n){var i=n.find("textarea");var s=false;e.containerStyle={};function o(t){var n=/iPad|iPhone|iPod/.test(navigator.userAgent);n&&i.css("padding-left","1px");t.disableSelections();e.$on("$destroy",function(){t.restoreSelections()});t.onNewContent(function(t,e){i.val(t);if(i[0]!==document.activeElement)return;if(i[0].selectionStart!==e.anchor||i[0].selectionEnd!==e.head){i[0].selectionStart=e.anchor;i[0].selectionEnd=e.head}});t.setOverlayFocuser(function(){});t.onResize(function(t){e.containerStyle.left=t.left});t.onScroll(function(t,e){i.scrollTop(t);i.scrollLeft(e);document.activeElement===i[0]&&(""===i[0].style.textShadow?i[0].style.textShadow="rgba(0,0,0,0) 0 0 0":i[0].style.textShadow="")});i.on("scroll",function(){t.scrollTo(i.scrollTop(),i.scrollLeft())});i.on("input",function(e){var n=i.val();t.replicateContent(e,n)});function o(t,e){var n=t.substring(0,e).split("\n");var i=n.length-1;var s=n[n.length-1].length;return{line:i,ch:s}}function r(){var e=i.val();var n=i[0].selectionStart;var s=i[0].selectionEnd;var r=o(e,n);var a=o(e,s);t.replicateSelection(r,a,{scroll:false})}var a;var l;function c(){if(!s){if(i[0].selectionStart!==a||i[0].selectionEnd!==l){a=i[0].selectionStart;l=i[0].selectionEnd;r()}setTimeout(c,200)}}setTimeout(c,200)}e.$watch("helpMode",function(t){t?n.hide():n.show()});var r=e.$watch("codeareaTouchApi",function(t){if(t){o(t);r()}});e.$on("$destroy",function(){s=true;i=void 0})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvCodeareaBlockLargePastes",function(){var t=function t(e){if(""===e||Number.isNaN(+e))return 1e6;return e};var e=function t(e){return e.originalEvent.clipboardData?e.originalEvent.clipboardData.getData("text/plain").length:window.clipboardData.getData("Text").length};return{restrict:"A",controller:["$scope","$element","$attrs",function(n,i,s){i.find("textarea").on("paste",function(n){e(n)>t(s.qvCodeareaBlockLargePastes)&&n.preventDefault()});n.$on("$destroy",function(){i.find("textarea").off("paste")})}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48)],s=function(t,e){e.directive("qvCodeareaExposedGutterWidth",["$parse","$timeout",function(e,n){return{require:"qvCodearea",link:function i(s,o,r,a){var l=e(r.qvCodeareaExposedGutterWidth);s.$watch(function(){return String(a.codemirror.lineCount()).length},function(){var e=t(a.codemirror.getGutterElement()).outerWidth();l.assign(s,e);n(function(){var e=t(a.codemirror.getGutterElement()).outerWidth();l.assign(s,e)})});s.$on("$destroy",function(){l.assign(s,void 0)})},controller:function t(){}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(11),n(190)],s=function(t,e,n){var i="CodeMirror-text-in-composition";var s={inclusiveLeft:true,inclusiveRight:true,className:i};function o(t){var e,n,s,o;n=t.getAllMarks();for(s=0,o=n.length;s<o;s++){e=n[s];null!=e&&e.className===i&&e.clear()}return true}var r,a,l,c,u,d,p,h,f,g,v;function m(t,i){var m=i;t.options.enableCompositionMod=true;u=function e(){d&&d();t.display.input.blur();t.display.input.focus()};c=function e(n){p=n.char;d&&d();if(t.display.inCompositionMode){var i=t.getCursor();var s=t.display.compositionHead;var o=t.charCoords(i).left-t.charCoords(s).left;o+=void 0!==p?30:1;t.display.input.style.width=o+"px"}};r=function e(){if(t.options.enableCompositionMod){v.disabled=true;t.display.inCompositionMode=true;f=m.offset();t.display.inputDiv.classList.add("CodeMirror-input-wrapper");t.display.inputDiv.classList.add("in-composition");t.setOption("readOnly",true);t.somethingSelected()&&t.replaceSelection("");t.display.compositionHead=t.getCursor();void 0===p?t.display.input.value="":" "===p&&a({data:" "})}};a=function e(n){var i,o;if(!t.options.enableCompositionMod||!t.display.inCompositionMode)return;var r=t.display.compositionHead;if(t.display.textMarkerInComposition){i=t.display.textMarkerInComposition.find();if(i){t.replaceRange(n.data,r,i.to);t.display.textMarkerInComposition.clear();t.display.textMarkerInComposition=void 0}}else t.replaceRange(n.data,r,r);var a=t.getCursor();o=t.charCoords(a).left-t.charCoords(r).left;void 0===p&&(o+=1);t.display.input.style.width=o+"px";t.display.textMarkerInComposition=t.markText(r,a,s);h()};function b(){var t=window.navigator.userAgent;var e=t.indexOf("MSIE ");return e>0||!!navigator.userAgent.match(/Trident.*rv:11\./)}l=function e(i){var s;if(!t.options.enableCompositionMod||!t.display.inCompositionMode)return;b()?"\b"===p&&a(i):a(i);t.display.inCompositionMode=false;t.display.compositionHead=void 0;null!=(s=t.display.textMarkerInComposition)&&s.clear();t.display.textMarkerInComposition=void 0;t.setOption("readOnly",false);t.display.inputDiv.classList.remove("in-composition");t.display.inputDiv.classList.remove("CodeMirror-input-wrapper");o(t);d=function e(){v.disabled=false;n.off(t.display.input,"input",d);if(!t.display.inCompositionMode){t.display.input.value="";t.display.input.style.width="0px";d=void 0}};n.on(t.display.input,"input",d)};h=function e(){if(t.display.inCompositionMode){var n=t.charCoords(t.display.compositionHead).top-f.top;void 0!==p&&(n-=1);t.display.inputDiv.style.top=n+"px";var i=t.charCoords(t.display.compositionHead).left-f.left;t.display.inputDiv.style.left=i+"px"}};g=function n(i){var s=e(t.display.scroller);s.scrollTop(s.scrollTop()-i.wheelDelta)}}t.directive("qvCodeareaCompositionEvent",function(){return{restrict:"A",require:"qvCodearea",link:function t(i,s,o,p){m(p.codemirror,s);var f=p.codemirror.display.input;var b=i.$watch(o.qvCodeareaAutocomplete,function(t){v=t;b()});b=i.$watch("codeareaTouchApi",function(t){if(t){t.onResize(function(){h()});t.onScroll(function(){h()});b()}});e(window).on("resize",h);n.on(p.codemirror,"mousedown",u);n.on(f,"keydown",c);n.on(f,"compositionstart",r);n.on(f,"compositionupdate",a);n.on(f,"compositionend",l);n.on(f,"mousedown",u);n.on(f,"mousewheel",g);i.$on("$destroy",function(){e(window).off("resize",h);n.off(p.codemirror,"mousedown",u);n.off(f,"compositionstart",r);n.off(f,"keydown",c);n.off(f,"compositionupdate",a);n.off(f,"compositionend",l);n.off(f,"input",d);n.off(f,"mousedown",u);n.off(f,"mousewheel",g)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(711)],s=function(t,e){t.directive("qvExpandableList",function(){return{restrict:"A",template:e,controller:["$scope",function(t){t.expandClicked=function(t){t.expanded=!t.expanded;"undefined"!=typeof t.state&&(t.expanded?t.state["sectionExpanded"]=true:t.state["sectionExpanded"]=false)}}]}});t.directive("includeSection",function(){return{restrict:"A",controller:["$scope","$element","$compile",function(t,e,n){e.append(n(t.item.template)(t))}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-expandable-list-component" tcl="expandable-list">\n\t<ul class="qv-expandable-list">\n\t\t<li ng-repeat="item in items track by item.key" tid="section {{item.key}}">\n\t\t\t<div class="qv-expandable-list-header" qva-activate="expandClicked(item)" ng-class="{ \'expanded\': item.state.stateExpanded }" tid="{{item.key}}">\n                <i class="toggle-expand  lui-icon  {{ item.expanded ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }}"></i>\n\t\t\t\t<span class="text" q-translation="{{item.translation}}"></span>\n\t\t\t</div>\n\t\t\t<div class="qv-expandable-list-content" ng-if="item.expanded">\n\t\t\t\t<div include-section></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(91),n(713),n(97),n(714),n(191)],s=function(t,e,n,i,s,o,r){e.directive("qvInformationArea",function(){return{scope:{info:"=",app:"=",mode:"="},restrict:"E",replace:true,template:i,link:function e(i,a){i.nbrOfStatements=0;i.exprValidator=null;i.state={expanded:false,autoExpanded:false};var l="validating";var c="valid";var u="invalid";var d=a.find(".text-column"),p=t("#expression-editor-content");function h(){setTimeout(function(){d.css({"max-height":p.height()/2})})}function f(){var t=0;""!==i.info.translatedErrorMgs&&t++;""!==i.info.extraErrorMsg&&t++;""!==i.info.expandedExpr&&t++;t>1&&(i.state.autoExpanded=true);i.nbrOfStatements=t}function g(t){i.info.status=t.valid?c:u;i.info.errorMsg=t.valid?"Common.OK":"Expression.Validation.InvalidExpression";i.info.translatedErrorMgs=n.get(i.info.errorMsg);i.info.extraErrorMsg="";if(t.data)if(t.data.bad.length>0){var e=t.data.bad.map(function(t){return t.name});i.info.errorMsg={id:"Expression.Validation.BadFieldName",value:[e.join(", ")]}}else t.data.error&&(i.info.extraErrorMsg=t.data.error);f()}i.$watch("info.codeArea.content",function(t){i.info.status=l;o.getExpandedExpression(i.app,t).then(function(e){if(null==i.exprValidator){i.exprValidator=new r.ExpressionValidator(i.app,i.mode);i.exprValidator.Update.bind(function(t){g(t)})}i.info.expr=t;i.info.expandedExpr=e.qExpandedExpression;i.info.translatedErrorMgs=n.get(i.info.errorMsg);i.exprValidator.validate(i.info.expandedExpr,i.labels)})});i.expandCollapse=function(){i.state.expanded=!i.state.expanded};h();s.on("end.ee-update-size",h);i.$on("$destroy",function(){s.off("end.ee-update-size",h);i.exprValidator=null})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="ia-wrapper" ng-class="{ \'collapsed\' : state.expanded, \'ia-light\' : nbrOfStatements <= 1 }">\r\n    <div class="icon-column">\r\n        <span class="lui-icon  lui-icon--info" aria-hidden="true"></span>\r\n    </div>\r\n    <div class="text-column">\r\n        <div class="ia-text">\r\n           \r\n            <div class="hint" ng-if="info.translatedErrorMgs !== \'\'">\r\n                <span>{{info.translatedErrorMgs}}</span>\r\n            </div>\r\n            <div class="hint" ng-if="info.extraErrorMsg !== \'\'">\r\n                <span>{{info.extraErrorMsg}}</span>\r\n            </div>\r\n            <div class="evaluated" ng-if="info.expandedExpr !== \'\'">\r\n                {{info.expandedExpr}}\r\n            </div>\r\n               \r\n        </div>\r\n    </div>\r\n    <div class="action-column">\r\n        <span class="lui-icon  lui-icon--arrow-down" \r\n              ng-class="{ \'lui-icon--arrow-down\' : !state.expanded, \'lui-icon--arrow-up\' : state.expanded }" \r\n              aria-hidden="true"\r\n              ng-if="nbrOfStatements > 1"\r\n              ng-click="expandCollapse($event)">\r\n        </span>\r\n    </div>    \r\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(93),n(89)],s=function(t,e){function n(n){return n?e.resolve(n.enigmaModel):t.getApp()}var i={};i.getExpandedExpression=function(t,e){return n(t).then(function(t){return t.engineApp.expandExpression(e)}).catch(function(t){console.log("error"+t)})};return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="expression-input" tcl="expression-input">\n\t\n\t<label q-translation="{{labelTranslation}}"></label>\n\n\t<div class="lui-input-group">\n\n\t\t<input class="lui-input lui-input-group__item lui-input-group__input"\n\t\t\ttype="text"\n\t\t\tspellcheck="false"\n\t\t\tmaxlength="{{maxLength}}"\n\t\t\tng-class="{ \'lui-invalid\': !isValidExpression, \'force-editor\': shouldForceEditInExpressionEditor() }"\n\t\t\tng-model="expression"\n\t\t\tng-model-options="{ updateOn: \'blur\', allowInvalid: true }"\n\t\t\tng-change="onExpressionChange()"\n\t\t\tqva-activate="onExpressionActivate($event)" \n\t\t\tdata-tid="label-exp-input" />\n\n\t\t<button class="lui-button lui-input-group__item lui-input-group__button" \n\t\t\tq-title-translation="Tooltip.OpenExpressionEditor"\n\t\t\tqva-activate="openExpressionDialog( $event )">\n\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--expression edit-expression" ng-class="{\'active\': isExpression}"></span>\n\t\t</button>\n\t\t\n\t</div>\n\n\t<div ng-if="shouldForceEditInExpressionEditor()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n\n</div>'},function(t,e){t.exports='<div class="description-textarea" tcl="description-textarea">\n\n\t<tiny-editor ng-show="enableDescriptionExpression" value="editorValue" on-open="openExpressionDialog( $event )" invalid="!isValid" max-length="maxLength" on-blur="onBlur( $event )" always-expression="{{false}}"></tiny-editor>\n\n\t<textarea ng-show="!enableDescriptionExpression" class="lui-textarea" ng-model="description" maxlength="{{maxLength}}" name="desc" ng-class="{ \'lui-invalid\': !isValid }" tid="description-textarea"></textarea>\n\n</div>'},function(t,e){t.exports='\ufeff<div class="tiny-editor lui-textarea" ng-class="{\'lui-invalid\': invalid, \'lui-focused\': active}">\n\t<div class="textarea-wrapper">\n\t\t<textarea tid="tiny-editor-text" type="text" maxlength="{{maxLength || 8192}}" rows="3" class="wrapped-textarea"\n\t\t\t\t\t\t\tng-trim="false" ng-model="editorValue" ng-change="change()" ng-focus="focused()" ng-blur="blurred()" spellcheck="false">\n\t\t</textarea>\n\t</div>\n\t<button tid="tiny-editor-fx-button"\n\t\t\t\t\tqva-activate="open( $event )"\n\t\t\t\t\tclass="lui-fade-button edit-expression"\n\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor">\n\t\t<span class="lui-icon lui-icon--expression" ng-class="{\'active\': isExpression}"></span>\n\t</button>\n\n</div>'},function(t,e){t.exports='<div class="qv-cloud">\n\t<div class="qv-tageditor">\n\t\t<div class="lui-input-group">\n\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input qv-tagText" tid="tag-cloud-input" ng-model="tagInput" type="text" maxlength="31">\n\t\t\t<button class="lui-button  lui-input-group__item  lui-input-group__button" data-tid="tag-button">\n\t\t\t \t<span class="lui-button__icon  lui-icon  lui-icon--plus" q-title-translation="Tooltip.AddTag" ng-click="addTagsAndFocus( $event )"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t<div tid="tag-cloud-cloud" class="qv-tagCloud" data-value="tags">\n\t\t<span ng-repeat="tag in tags" class="qv-tagItem lui-tag">\n\t\t\t<div class="qv-tagContent">{{tag}}</div>\n\t\t\t <div class="lui-icon lui-icon--remove qv-clearTag" ng-click="removeTagAt( $index )" q-title-translation="Common.Delete"></div>\n\t\t</span>\n\t</div>\n</div>\n'},function(t,e){t.exports='<button ng-click="onClick($event, \'inverse\')" qv-enter="onClick($event)" class="colorpicker-button lui-button {{variantClass}}" ng-class="{\'lui-active\': opened === true}" q-title-translation="ColorPicker.Choose">\n\t<span class="lui-button__icon  qv-color-picker-preview" tid="color-picker-preview"></span><span class="lui-button__caret lui-caret"></span>\n</button>'},function(t,e){t.exports='<lui-popover class="qv-cp-popup qv-color-picker-new"\n\t\t\t style="z-index: 1200;"\n\t\t\t ng-style="{\'width\': \'auto\'}"\n\t\t\t collision="\'flipfit\'"\n\t\t\t align-to="$alignToElement"\n\t\t\t on-close-view="closeView(event)"\n\t\t\t tid="color-picker-popup"\n\t\t\t qva-outside-ignore-for="media-toolbar">\n\n\t<div class="qv-cp-flex-new">\n\t\t<div class="qv-cp-main-stage-new" >\n\t\t\t<div ng-show="!customColor" class="color-palette">\n\t\t\t\t<ul class="qv-colorpicker-new palette"\n\t\t\t\t\ttid="color-picker-palette">\n\t\t\t\t\t<li ng-repeat="color in currentPalette | filter: ( $disableNone || \'\' ) && \'!none\' "\n\t\t\t\t\t\tng-click="colorClicked($event, $index, color)"\n\t\t\t\t\t\tng-style="{\'background-color\': color}"\n\t\t\t\t\t\tq-title-translation="{{color === \'none\' ? \'ColorPicker.None\' : color}}"\n\t\t\t\t\t\tclass="lui-icon"\n\t\t\t\t\t\tng-class="{\'lui-icon--tick\': foreColor === color, \'selected-w\' : !isDark, \'transparent\': color === \'none\', \'disabled\' : color === \'none\' && $disableNone}">\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div class="custom-color" ng-show="customColor">\n\t\t\t\t<div hue-sat-wheel-new callback="hueSatValueChanged" visible="customColor" hsv="hsv"></div>\n\t\t\t\t<div value-slider-new callback="hueSatValueChanged" visible="customColor" hsv="hsv"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="$useGlyph" style="height: 156px">\n\t\t\t<div class="qv-cp-glyphs-title-new" q-translation="properties.glyph"></div>\n\t\t\t<div class="qv-cp-glyphs-new">\n\t\t\t\t<button ng-repeat="glyph in $glyphPalette"\n\t\t\t\t\t\tclass="lui-fade-button  lui-fade-button--inverse"\n\t\t\t\t\t\tng-click="setGlyph($event, $index, glyph)"\n\t\t\t\t\t\tng-class="{\'lui-active\': glyphIcon === glyph.icon, \'border\': glyph.cssClass === \'\'}" >\n\t\t\t\t\t<span class="lui-fade-button__icon lui-icon" ng-class="glyph.cssClass"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\n\t<div class="qv-cp-divider-new"></div>\n\n\t<div class="qv-cp-hex-result-new" ng-if="extended || customColor">\n\t\t<div class="qv-cp-preview"\n\t\t\t tid="color-picker-preview"\n\t\t\t ng-class="{\'transparent\' : foreColor === \'none\'}"\n\t\t\t ng-style="getBackgroundStyle(foreColor)"></div>\n\t\t<div class="qv-cp-hex-text">#</div>\n\t\t<input class="qv-cp-hex-input"\n\t\t\t   ng-model="hex.value"\n\t\t\t   ng-change="onHexChange(hex.value)"\n\t\t\t   maxlength="6"\n\t\t\t   tid="{{hex.value}}"\n\t\t\t   ng-keypress="onKeyPress($event)"/>\n\n\t\t<button class="qv-cp-switch lui-button lui-button--inverse"\n\t\t\t\ttid="color-picker-result"\n\t\t\t\tng-class="{\'lui-active\' : customColor }"\n\t\t\t\tng-click="onFoldoutClick($event)"\n\t\t\t\tq-title-translation="{{customColor ? \'ColorPicker.HideOptions\' : \'ColorPicker.ShowOptions\'}}">\n\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--palette"></span>\n\t\t</button>\n\t</div>\n\n\t<div class="qv-colorpicker-recent-wrapper" ng-show="showRecent">\n\t\t<span class="recently-used-text" q-translation="colorpicker.RecentlyUsed"></span>\n\t\t<div>\n\t\t\t<ul class="qv-colorpicker-new recent">\n\t\t\t\t<li ng-repeat="color in recentColors | filter: \'!none\'"\n\t\t\t\t\tng-click="recentColorClicked($event, color)"\n\t\t\t\t\tng-style="{\'background-color\': color}"\n\t\t\t\t\tq-title-translation="{{color === \'none\' ? \'ColorPicker.None\' : color}}"\n\t\t\t\t\tclass="lui-icon"\n\t\t\t\t\tng-class="{\'selected\': foreColor === color, \'selected-w\' : !isDark, \'transparent\': color === \'none\', \'disabled\' : color === \'none\' && $disableNone}"\n\t\t\t\t\tclass="no-margin">\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(722)],s=function(t){function e(e){var n=t.FixedQueue(5,[]);var s;if(i){a(i,n);for(s=e.length-1;s>=1;s--)a(e[s],n)}else for(s=e.length-1;s>=0;s--)n.push(e[s]);return n}var n=s();var i;function s(){return t.FixedQueue(5,[])}function o(){return e(n)}function r(t){a(t,n)}function a(t,e){if("none"!==t){var n=e.indexOf(t);n>-1&&e.splice(n,1);e.push(t)}}function l(t){i=t}function c(){r(i);i=null}return{getPersistentRecentColors:o,initRecentColors:s,persistColor:r,stage:l,commit:c}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(e,n){n=n||[];var i=Array.apply(null,n);i.fixedSize=e;i.push=t.push;i.splice=t.splice;i.unshift=t.unshift;t.trimTail.call(i);return i}t.trimHead=function(){if(this.length<=this.fixedSize)return;Array.prototype.splice.call(this,0,this.length-this.fixedSize)};t.trimTail=function(){if(this.length<=this.fixedSize)return;Array.prototype.splice.call(this,this.fixedSize,this.length-this.fixedSize)};t.wrapMethod=function(t,e){var n=function n(){var i=Array.prototype[t];var s=i.apply(this,arguments);e.call(this);return s};return n};t.push=t.wrapMethod("push",t.trimHead);t.splice=t.wrapMethod("splice",t.trimTail);t.unshift=t.wrapMethod("unshift",t.trimTail);return{FixedQueue:t}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(96)],s=function(t,e){t.directive("hueSatWheelNew",function(){return{require:"?hsv",replace:true,template:'<div class="cp-hue-sat-new"><div class="cp-hue-sat-wheel" tid="color-picker-wheel"><div class="cp-hsw-overlay"></div><div class="cp-hsw-pointer"><div class="cp-hsw-inside"/></div></div></div>',scope:{callback:"=",hsv:"=hsv",visible:"="},link:function t(n,i){var s=i.find(".cp-hsw-pointer");var o=i.find(".cp-hsw-overlay");var r=i.find(".cp-hue-sat-wheel");var a=r.width()/2;var l=r.height()/2;var c=0;var u=0;function d(t,e){c=(180*Math.atan2(e,t)/Math.PI+360)%360;u=Math.min(Math.max(0,Math.sqrt(e*e+t*t)/a*100),100);n.hsv.h=c;n.hsv.s=u;n.callback&&n.callback({hue:c,sat:u})}function p(t,e){s.css({left:t,top:e})}function h(){var t=Math.cos(c/180*Math.PI)*(u/100*a);var e=Math.sin(c/180*Math.PI)*(u/100*a);p(t+a,l-e)}function f(t,e){var n=Math.sqrt(t*t+e*e);if(n>a){t=t/n*a;e=e/n*a}return{x:t,y:e}}function g(t){var e=r.offset();var n=f(t.x-a-e.left,2*l-t.y-a+e.top);p(n.x+a,l-n.y);d(n.x,n.y)}var v="cp-hsw";e(r[0]).tap({id:v,end:function t(e,n){g(n.pagePoints[0])}}).swipe({id:v,options:{useMomentum:true,inertia:.5,radiusThreshold:6},update:function t(e,n){g(n.pagePoints[0])}});n.$watch("hsv.v",function(){o.css("background","rgba(0,0,0, "+(100-n.hsv.v)/100+")")});n.$watch("hsv.h",function(){if(c!==n.hsv.h){c=n.hsv.h%360;h()}});n.$watch("hsv.s",function(){if(u!==n.hsv.s){u=n.hsv.s>100?100:n.hsv.s<0?0:n.hsv.s;h()}});n.$watch("visible",function(){h()});n.$on("$destroy",function(){e(r[0]).off("*",v)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(109),n(96)],s=function(t,e,n){function i(t,n,i){return new e("hsv("+t+","+n+","+i+")").toRGB()}t.directive("valueSliderNew",function(){return{require:"?hsv",replace:true,template:'<div class="cp-value" tid="color-picker-slider"><div class="cp-val-slider"><span class="cp-val-pointer"/></div></div>',scope:{callback:"=",hsv:"=hsv",visible:"="},link:function t(e,s){var o=s.find(".cp-val-pointer");var r=s.find(".cp-val-slider");var a=100;function l(t){return(t-o.outerWidth()/2)/(r.outerWidth()-o.outerWidth())*100}function c(t){return t/100*(r.outerWidth()-o.outerWidth())+o.outerWidth()/2}function u(t){a=Math.max(Math.min(100,l(t)),0);e.hsv.v=a;e.callback&&e.callback({value:l(t)})}function d(t){o.css({left:t})}function p(t){var e=c(t);d(e)}function h(t){return Math.min(Math.max(t,o.outerWidth()/2),r.outerWidth()-o.outerWidth()/2)}function f(t){var e=r.offset();var n=h(t.x-e.left);d(n);u(n)}var g="cp-hsw";n(s[0]).tap({id:g,end:function t(e,n){f(n.pagePoints[0])}}).swipe({id:g,options:{useMomentum:true,inertia:.5,radiusThreshold:6},update:function t(e,n){f(n.pagePoints[0])}});e.$watchCollection("[hsv.s, hsv.h]",function(){r.css("background-color",i(e.hsv.h,e.hsv.s,100))});e.$watch("hsv.v",function(){if(a!==e.hsv.v){a=e.hsv.v;p(e.hsv.v)}});e.$watch("visible",function(){p(a)});e.$on("$destroy",function(){n(s[0]).off("*",g)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<button ng-click="onClick($event, \'inverse\')" qv-enter="onClick($event)" class="colorpicker-button lui-button {{variantClass}}" ng-class="{\'lui-active\': opened === true}" q-title-translation="ColorPicker.Choose">\n\t<span class="lui-button__icon  qv-color-picker-preview" tid="color-picker-preview"></span><span class="lui-button__caret lui-caret"></span>\n</button>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(727),n(109),n(728),n(729)],s=function(t,e,n){function i(t,e){if(e[t])return e[t];return t||"none"}function s(t,e,n){if(!t||-1!==n.indexOf(e))return false;return"none"!==e&&!!e}var o={template:e,controller:["$scope","$element","$timeout",function(e,o,r){e.hsv={h:0,s:100,v:100};var a=new n;if(e.$useGlyph){e.foreColor=i(e.$inputViewValue.color,e.$palette);e.glyphIcon=e.$inputViewValue.icon;e.customColor=s(e.$extended,e.$inputViewValue.color,e.$palette)}else{e.foreColor=i(e.$inputViewValue,e.$palette);e.customColor=s(e.$extended,e.$inputViewValue,e.$palette)}e.hex={value:""};e.getBackgroundStyle=function(t){if("none"!==t)return{"background-color":t}};function l(){e.onColorChange(e.$useGlyph,e.index,e.foreColor,e.glyphIcon)}e.setGlyph=function(t,n,i){e.glyphIcon=i.icon;l()};function c(t){a=new n(t);a.isInvalid()&&e.$disableNone&&(a=new n(e.$defaultColor))}function u(t){var n=a.toHex();e.foreColor=a.isInvalid()?"none":n;e.index=t;l();e.isDark=a.isDark()}function d(){a.isInvalid()?e.hex.value="-":e.hex.value=a.toHex().substring(1,7)}function p(){if(!a.isInvalid()){var t=a.toHSVComponents();e.hsv.h=t.h;e.hsv.s=t.s;e.hsv.v=t.v}}var h=null;function f(t){return function(){var e=this,n=arguments;h||(h=r(function(){t.apply(e,n);h=null},100))}}e.hueSatValueChanged=f(function(){c("hsv("+e.hsv.h+","+e.hsv.s+","+e.hsv.v+")");d();u(-1)});function g(t){t="#"+t.replace(/[^0-9A-Fa-f]+/g,"").substring(0,6);c(t);p();u(-1)}e.onHexChange=f(g);e.colorClicked=f(function(t,n){if(!e.$disableNone||"none"!==n){c(n);p();d();u(t)}});e.onFoldoutClick=function(t){t.preventDefault();e.customColor=!e.customColor};e.onKeyPress=function(t){var n=t.which;13===n&&e.close()};c(e.foreColor);p();e.isDark=a.isDark();var v=r(function(){t.$apply(e,function(){d()})});e.$on("$destroy",function(){r.cancel(v);o.find(".qv-cp-hex-input").off()})}]};return{popupComponent:o,isCustom:s}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover class="qv-cp-popup qv-color-picker"\n\t\t\t\t\t  style="min-width: 100px;z-index: 1200;"\n\t\t\t          ng-style="{\'width\': \'auto\'}"\n\t\t\t\t\t  collision="\'flipfit\'"\n\t\t\t\t\t  align-to="$alignToElement"\n\t\t\t\t\t  on-close-view="closeView(event)"\n\t\t\t\t\t  tid="color-picker-popup"\n\t\t\t\t\t  qva-outside-ignore-for="media-toolbar">\n\n\t<div class="qv-cp-flex">\n\t\t<div class="qv-cp-main-stage" >\n\t\t\t<ul class="qv-colorpicker"\n\t\t\t\tng-show="!customColor"\n\t\t\t\tng-class="{\'extended\' : $extended}"\n\t\t\t\ttid="color-picker-palette">\n\t\t\t\t<li ng-repeat="color in $palette"\n\t\t\t\t\tqva-activate="colorClicked($index, color)"\n\t\t\t\t\tng-style="{\'background-color\': color}"\n\t\t\t\t\tq-title-translation="{{color === \'none\' ? \'ColorPicker.None\' : color}}"\n\t\t\t\t\tclass="lui-icon"\n\t\t\t\t\tng-class="{\'selected\': foreColor === color, \'selected-w\' : !isDark, \'transparent\': color === \'none\', \'disabled\' : color === \'none\' && $disableNone}">\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div ng-show="customColor">\n\t\t\t\t<div hue-sat-wheel callback="hueSatValueChanged" visible="customColor" hsv="hsv"></div>\n\t\t\t\t<div value-slider callback="hueSatValueChanged" visible="customColor" hsv="hsv"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="$useGlyph">\n\t\t\t<div class="qv-cp-glyphs-title" q-translation="properties.glyph"></div>\n\t\t\t<div class="qv-cp-glyphs">\n\t\t\t\t<button ng-repeat="glyph in $glyphPalette" \n\t\t\t\t\t\tclass="lui-fade-button  lui-fade-button--inverse"\n\t\t\t\t\t\tqva-activate="setGlyph($event, $index, glyph)"\n\t\t\t\t\t\tng-class="{\'lui-active\': glyphIcon === glyph.icon, \'border\': glyph.icon === \'\'}" >\n\t\t\t\t\t<span class="lui-fade-button__icon  lui-icon">{{glyph.icon}}</span>\n\t\t\t\t</button>\n\t\t\t\t\x3c!--<li ng-repeat="glyph in $glyphPalette" \n\t\t\t\tqva-activate="setGlyph($event, $index, glyph)" \n\t\t\t\tng-class="{\'selected\': glyphIcon === glyph.icon, \'border\': glyph.icon === \'\'}">{{glyph.icon}}</li>--\x3e\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\t\t<div ng-if="$extended">\n\t\t\t<div class="qv-cp-divider"></div>\n\t\t\t<div class="qv-cp-hex-result">\n\t\t\t\t<div class="qv-cp-preview"\n\t\t\t\t\t\ttid="color-picker-preview"\n\t\t\t\t\t\tng-class="{\'transparent\' : foreColor === \'none\'}"\n\t\t\t\t\t\tng-style="getBackgroundStyle(foreColor)"></div>\n\t\t\t\t<div class="qv-cp-hex-text">#</div>\n\t\t\t\t<input class="qv-cp-hex-input"\n\t\t\t\t\tng-model="hex.value"\n\t\t\t\t\tng-change="onHexChange(hex.value)"\n\t\t\t\t\tmaxlength="7"\n\t\t\t\t\ttid="{{hex.value}}"\n\t\t\t\t\tng-keypress="onKeyPress($event)"/>\n\n\t\t\t\t\t<button class="qv-cp-switch lui-button  lui-button--inverse"\n\t\t\t\t\t\t\ttid="color-picker-result"\n\t\t\t\t\t\t\tng-class="{\'lui-active\' : customColor }"\n\t\t\t\t\t\t\tqva-activate="onFoldoutClick($event)"\n\t\t\t\t\t\t\tq-title-translation="{{customColor ? \'ColorPicker.HideOptions\' : \'ColorPicker.ShowOptions\'}}">\n\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--palette"></span>\n\t\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n</lui-popover>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(96)],s=function(t,e){t.directive("hueSatWheel",function(){return{require:"?hsv",replace:true,template:'<div class="cp-hue-sat"><div class="cp-hue-sat-wheel" tid="color-picker-wheel"><div class="cp-hsw-overlay"></div><div class="cp-hsw-pointer"><div class="cp-hsw-inside"/></div></div></div>',scope:{callback:"=",hsv:"=hsv",visible:"="},link:function t(n,i){var s=i.find(".cp-hsw-pointer");var o=i.find(".cp-hsw-overlay");var r=i.find(".cp-hue-sat-wheel");var a=r.width()/2;var l=r.height()/2;var c=0;var u=0;function d(t,e){c=(180*Math.atan2(e,t)/Math.PI+360)%360;u=Math.min(Math.max(0,Math.sqrt(e*e+t*t)/a*100),100);n.hsv.h=c;n.hsv.s=u;n.callback&&n.callback({hue:c,sat:u})}function p(t,e){s.css({left:t,top:e})}function h(){var t=Math.cos(c/180*Math.PI)*(u/100*a);var e=Math.sin(c/180*Math.PI)*(u/100*a);p(t+a,l-e)}function f(t,e){var n=Math.sqrt(t*t+e*e);if(n>a){t=t/n*a;e=e/n*a}return{x:t,y:e}}function g(t){var e=r.offset();var n=f(t.x-a-e.left,2*l-t.y-a+e.top);p(n.x+a,l-n.y);d(n.x,n.y)}var v="cp-hsw";e(r[0]).tap({id:v,end:function t(e,n){g(n.pagePoints[0])}}).swipe({id:v,options:{useMomentum:true,inertia:.5,radiusThreshold:6},update:function t(e,n){g(n.pagePoints[0])}});n.$watch("hsv.v",function(){o.css("background","rgba(0,0,0, "+(100-n.hsv.v)/100+")")});n.$watch("hsv.h",function(){if(c!==n.hsv.h){c=n.hsv.h%360;h()}});n.$watch("hsv.s",function(){if(u!==n.hsv.s){u=n.hsv.s>100?100:n.hsv.s<0?0:n.hsv.s;h()}});n.$watch("visible",function(){h()});n.$on("$destroy",function(){e(r[0]).off("*",v)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(109),n(96)],s=function(t,e,n){function i(t,n,i){return new e("hsv("+t+","+n+","+i+")").toRGB()}t.directive("valueSlider",function(){return{require:"?hsv",replace:true,template:'<div class="cp-value" tid="color-picker-slider"><div class="cp-val-slider"><span class="cp-val-pointer"/></div></div>',scope:{callback:"=",hsv:"=hsv",visible:"="},link:function t(e,s){var o=s.find(".cp-val-pointer");var r=s.find(".cp-val-slider");var a=100;function l(t){return(t-o.outerWidth()/2)/(r.outerWidth()-o.outerWidth())*100}function c(t){return t/100*(r.outerWidth()-o.outerWidth())+o.outerWidth()/2}function u(t){a=Math.max(Math.min(100,l(t)),0);e.hsv.v=a;e.callback&&e.callback({value:l(t)})}function d(t){o.css({left:t})}function p(t){var e=c(t);d(e)}function h(t){return Math.min(Math.max(t,o.outerWidth()/2),r.outerWidth()-o.outerWidth()/2)}function f(t){var e=r.offset();var n=h(t.x-e.left);d(n);u(n)}var g="cp-hsw";n(s[0]).tap({id:g,end:function t(e,n){f(n.pagePoints[0])}}).swipe({id:g,options:{useMomentum:true,inertia:.5,radiusThreshold:6},update:function t(e,n){f(n.pagePoints[0])}});e.$watchCollection("[hsv.s, hsv.h]",function(){r.css("background-color",i(e.hsv.h,e.hsv.s,100))});e.$watch("hsv.v",function(){if(a!==e.hsv.v){a=e.hsv.v;p(e.hsv.v)}});e.$watch("visible",function(){p(a)});e.$on("$destroy",function(){n(s[0]).off("*",g)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(731),n(91),n(100),n(732),n(501),n(350)],s=function(t,e,n,i){t.directive("qvSegmentColors",["qvRecentGradientsService",function(t){return{restrict:"E",template:e,replace:true,measure:"=",link:function e(s){function o(){var t=false,e=s.measure.coloring;e.gradient||(t=true);!t&&e.gradient.limits&&e.gradient.limits.length!==s.limits.length&&(t=true);t||e.gradient.colors&&e.gradient.limits&&e.gradient.breakType||(t=true);if(!t){e.gradient.colors.forEach(function(e,n){e!==s.colors[n]&&(t=true)});e.gradient.limits.forEach(function(e,n){e!==s.limits[n]&&(t=true)});e.gradient.breakType.forEach(function(e,n){e!==s.types[n]&&(t=true)})}t||e.gradient.limitType===(s.format?"percent":"absolute")||(t=true);t&&s.enable&&(e.gradient={limits:s.limits.slice(),breakType:s.types.slice(),limitType:s.format?"percent":"absolute",colors:s.colors.slice()})}s.measure.coloring.gradient?s.enable=true:s.enable=false;function r(){var t=s.measure.coloring,e;t.gradient||(t.gradient={limits:s.templates[0].limits,breakType:s.templates[0].types.slice(),limitType:s.templates[0].percentage,colors:s.templates[0].colors.slice()});e="absolute"!==t.gradient.limitType;s.format=e;t.gradient.colors.forEach(function(t,e){s.colors[e]=t});t.gradient.limits.forEach(function(t,e){s.limits[e]=t});t.gradient.breakType.forEach(function(t,e){s.types[e]=t});s.enable||delete s.measure.coloring.gradient}s.$watch("enable",function(){s.enable?o():delete s.measure.coloring.gradient});s.templates=[{colors:[i.resolveColor({index:6}),i.resolveColor({index:10})],name:n.get("library.colors.basicTemplate"),limits:[.5],types:[false],percentage:true}];i.scales.forEach(function(t){var e="gradient"===t.type,i=e?t.scale:t.scale[t.scale.length-1],o=i.length-1,r=1/(o+1),a=[],l;for(l=0;l<o;l++)a.push((l+1)*r);s.templates.push({colors:i.slice(),name:n.get(t.translation),limits:a,types:a.map(function(){return e}),percentage:true})});t.getTemplates().forEach(function(t){s.templates.push(t)});s.colors=[];s.limits=[];s.types=[];s.format=true;r();Object.defineProperty(s,"currentTemplate",{set:function t(e){var n=s.templates[e];s.format=!!n.percentage;s.colors.length=0;s.types.length=0;s.limits.length=0;n.colors.forEach(function(t,e){s.colors[e]=t});n.types.forEach(function(t,e){s.types[e]=t});n.limits.forEach(function(t,e){s.limits[e]=t});o()}});s.$watch("colors",function(){o()},true);s.$watch("limits",function(){o()},true);s.$watch("types",function(){o()},true);s.$watch("format",function(){o()})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="segment-colors-wrapper ">\n\n\n\t<div class="segment-colors-row segment-colors-limit-format segment-colors-auto" tid="segment-colors">\n\t\t<p ng-if="false" q-translation="library.colors.applyCustom"></p>\n\t\t<p>\n\t\t\t<span q-translation="library.colors.autoFillSwitch"></span></br>\n\t\t\t<b ng-show="enable" class="qv-dim-dlg-colors-label" q-translation="library.colors.on"></b>\n\t\t\t<b ng-show="!enable" class="qv-dim-dlg-colors-label" q-translation="library.colors.off"></b>\n\t\t</p>\n\t\t<lui-switch x-model="enable"></lui-switch>\n\t</div>\n\t<div class="borderline">\n\t</div>\n\t<div ng-class="{\'overlay\': !enable}">\n\t\t<p q-translation="library.colors.selectTemplate" class="segment-colors-row-text">\n\t\t<div color-drop-down class="segment-color-drop-down segment-colors-row" schemas="templates" ng-model="currentTemplate"></div>\n\t\t<div class="segment-colors-row segment-colors-limit-format" tid="segment-format">\n\t\t\t<p>\n\t\t\t\t<span q-translation="library.colors.limitFormat"></span></br>\n\t\t\t\t<b ng-show="format" class="qv-dim-dlg-colors-label" q-translation="library.colors.PercentageBased" tid="percentage-label"></b>\n\t\t\t\t<b ng-show="!format" class="qv-dim-dlg-colors-label" q-translation="library.colors.FixedValueBased" tid="fixed-value-label"></b>\n\t\t\t</p>\n\t\t\t<lui-switch x-model="format"></lui-switch>\n\t\t</div>\n\t\t<div class="segment-colors-bottom">\n\t\t\t<qv-palette-creator ng-if="colors && colors.length" colors="colors" percentage="format" limits="limits" types="types"></qv-palette-creator>\n\t\t</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(733),n(97),n(734),n(349)],s=function(t,e){t.directive("colorDropDown",function(){var n={borderColor:"#B3B3B3"};var i={borderColor:"#595959"};return{template:e,require:"?ngModel",scope:{schemas:"="},link:function e(s,o,r,a){s.show=false;s.expanded=false;s.selected=0;s.getCurrent=function(t){return s.schemas[t]};s.getCurrentName=function(){return s.schemas[s.currentScheme].name};s.currentShowComponent=null;s.currentScheme=a.$viewValue||0;s.close=function(){s.expanded=false;s.expandedBorder=n};function l(t){s.expanded=t}s.checkExpanded=function(){return true===s.expanded};s.onOpenDropDown=function(){if(s.expanded){s.expanded=false;a.$setViewValue(s.currentScheme);s.close()}else{var e=t.getService("luiPopover");s.expanded=true;s.currentShowComponent=e.show({template:"<color-scheme-popup>",input:{schemas:s.schemas,currentScheme:s.currentScheme,onChange:function t(e){a.$setViewValue(e);s.currentScheme=e},expanded:l,width:o.width()-18+"px"},alignTo:o[0],closeOnEscape:true,closeOnOutside:true,closeOnResize:true,outsideIgnore:"color-drop-down-wrapper",dock:"bottom",autoFocus:true})}};s.$watch("schemas",function(){s.show=true});s.activateHover=function(){s.expandedBorder=i};s.disableHover=function(){s.expanded||(s.expandedBorder=n)}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div ng-class="{\'color-drop-down-wrapper-expanded\': checkExpanded()}" class="lui-popover color-drop-down-wrapper" ng-show="show" ng-style=" {\'border-color\' : expandedBorder.borderColor} " ng-mouseenter="activateHover()" ng-mouseleave="disableHover()">\n\t<div qva-activate="onOpenDropDown($event)" class="color-drop-down-popup-item" qva-outside="close()">\n\t\t<span class="color-drop-down-current-name">{{getCurrentName()}}</span>\n\t\t<div qv-color-scheme-display class="color-scheme-drop-down-list-item-colors" colors="getCurrent(currentScheme).colors"  types="getCurrent(currentScheme).types" limits="getCurrent(currentScheme).limits"></div>\n\t\t<span ng-if="!expanded" class="lui-icon lui-icon--small lui-icon--triangle-bottom" class="color-drop-down-triangle" style="float: right;margin-top: -20px; margin-right: 8px"></span>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(735)],s=function(t,e){t.directive("colorSchemePopup",function(){return{schemas:"=",currentScheme:"=",expanded:"=",width:"=",template:e,link:function t(e){e.pickScheme=function(t){for(var n=0;n<e.schemas.length;n++)if(t===e.schemas[n].name){e.onChange&&e.onChange(n);e.close();e.expanded(false)}};e.getSchemas=function(){var t=[];t.push(e.schemas[e.currentScheme]);for(var n=0;n<e.schemas.length;n++)n!==e.currentScheme&&t.push(e.schemas[n]);return t}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="lui-popover color-scheme-drop-down-list-wrapper" ng-style="{\'max-width\' : width}">\n\t<ul class="lui-list color-drop-down-popup-list">\n\t\t<li class="lui-list__item lui-list__action color-drop-down-popup-item" ng-repeat="scheme in getSchemas() track by $index" qva-activate="pickScheme(scheme.name)">\n\t\t\t<div class="color-scheme-drop-down-list-name" >\n\t\t\t\t{{scheme.name}}\n\t\t\t\t<div class="color-scheme-drop-down-list-item-colors" qv-color-scheme-display colors="scheme.colors" types="scheme.types" limits="scheme.limits"></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>'},function(t,e){t.exports='<div class="qv-color-scheme-display">\n\t<div class="gradient" >\n\t\t<div class="segment" \n\t\t\t ng-class="{\'animate\': animateChange, \'interactive\': allowChange}"\n\t\t\t ng-repeat="color in colors track by $index" \n\t\t\t qva-activate="allowChange && onClick($event, $index)" \n\t\t\t ng-style="segmentStyles[$index]">\n\t\t</div>\n\t\t<div class="marker" ng-class="{\'animate\': animate}" ng-if="allowChange" ng-repeat="limit in lims track by $index" ng-style="{left: getLimitPos(limit)}"></div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(48),n(97),n(348),n(297)],s=function(t,e,n,i){var s,o=i.popupComponent,r=["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"],a=e.getService("qvGlyphService").getDefaultGlyphs();function l(i,l,c,u,d){var p=t.extend({palette:null,glyphPalette:null,useGlyph:false,disableNone:false,defaultColor:"#4477aa",extended:true,dock:"top",actualColor:true},c);p.palette||(p.palette=r);p.glyphPalette||(p.glyphPalette=a);function h(t,e,n){n.value=t;d&&d()}function f(){s&&s.close()}n.on("start",f);var g;var v;var m;var b=e.getService("luiPopover");var y=e.getService("$timeout");s=b.showToPosition({template:o.template,controller:o.controller,input:{$palette:p.palette,$glyphPalette:p.glyphPalette,$useGlyph:p.useGlyph,$disableNone:p.disableNone,$defaultColor:p.defaultColor,$inputViewValue:u.value,$extended:p.extended,onColorChange:function t(e,n,i,s){g&&y.cancel(g);v=e?{color:p.actualColor?i:n,icon:s}:p.actualColor?i:n;m=i;g=y(function(){h(v,m,u);g=null},300)}},x:i,y:l,variant:"inverse",closeOnEscape:true,closeOnOutside:true,outsideIgnore:"colorpicker-tooltip",dock:p.dock,autoFocus:false});s.closed.then(function(){n.off("start",f)})}return{openColorPicker:l}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){function e(t){t.invalidExpressionIndex=-1;t.segments.forEach(function(e,n){Number.isNaN(+e.limit)&&(t.invalidExpressionIndex=n)});t.hasInvalidExpression=-1!==t.invalidExpressionIndex}function n(t,e,n){if(t===e)return;-1!==t&&n.children().eq(t).removeClass("active-handle");-1!==e&&n.children().eq(e).addClass("active-handle")}function i(t,e,i,s){t.hasInvalidExpression&&(s=t.invalidExpressionIndex);"number"!==typeof s&&(s=t.segments.length-1);n(t.activeIndex,s,i);if(-1!==s&&-1===t.activeIndex){e.find(".limit-options-arrow").removeClass("hidden");e.find(".qv-palette-creator-limit-options").removeClass("hidden")}else if(-1===s){e.find(".limit-options-arrow").addClass("hidden");e.find(".qv-palette-creator-limit-options").addClass("hidden")}t.activeIndex=s}function s(t,n,i,s){e(t);(t.segments.length>0&&s.hasClass("notVisible")||t.segments.length<1&&!s.hasClass("notVisible"))&&s.toggleClass("notVisible");l(t,{min:i.min,max:i.max,step:c(i.max,i.min),values:t.segments.map(function(t){return"NaN"!==t.limit?t.limit:(i.max+i.min)/2})});r(t,n,i.max,i.min);a(t,i)}function o(t,e,n){this.limit=e;this.type=n;Object.defineProperties(this,{percent:{get:function e(){if(t.percentage&&""!==this.limit){if(this.currentInput&&this.currentInput.endsWith("."))return t.inputFocus?this.currentInput:parseFloat(Math.floor(100*this.limit*100)/100)+"%";return t.inputFocus?parseFloat(Math.floor(100*this.limit*100)/100):parseFloat(Math.floor(100*this.limit*100)/100)+"%"}return this.limit},set:function e(n){this.currentInput=n;t.percentage&&!n.endsWith(".")?t.inputFocus?this.limit=""!==n?parseFloat(n/100):"":this.limit=parseFloat(n.replace(/%/g,"")):n.endsWith(".")?this.limit=parseFloat(n/100):this.limit=n}}})}function r(t,e,n,i){if(Number.isNaN(+t.activeIndex)||t.activeIndex<0)return;var s=(t.segments[t.activeIndex].limit-i)/(n-i)*100;s=s<0?0:s;s=s>100?100:s;s+="%";e.find(".limit-options-arrow-fg").css("left",s);e.find(".limit-options-arrow-bg").css("left",s)}function a(t,e){var n=e.max-e.min;t.colorSchemeLimits=[];t.types.length=0;t.limits.length=0;t.segments.map(function(t){return{limit:t.limit,type:t.type}}).sort(function(t,e){if(t.limit!==e.limit)return t.limit<e.limit?-1:1;return 0}).forEach(function(i){t.limits.push(i.limit);t.colorSchemeLimits.push((i.limit-e.min)/n);t.types.push(i.type)})}function l(e,n){e.sliderOptions=t.extend({},e.sliderOptions,n);e.sliderValues=e.sliderOptions.values}function c(t,e){return Number(((t-e)/1e3).toFixed(20))}function u(t){var e,n,i,s=t.segments.length;if(t.percentage){e=0;n=1}else if(0===s){e=0;n=1}else if(1===s&&0===t.segments[0].limit){e=-10;n=10}else if(1===s||t.segments.every(function(e){return e.limit===t.segments[0].limit})){var o=.9*t.segments[0].limit;var r=1.1*t.segments[0].limit;e=Math.min(o,r);n=Math.max(o,r)}else{e=null;n=null;t.segments.forEach(function(t){n=null!==n?Math.max(n,t.limit):t.limit;e=null!==e?Math.min(e,t.limit):t.limit});i=n-e;e-=.3*i;n+=.3*i}return{max:n,min:e}}function d(t,e,n,i,o){var r=u(t);if(r.min!==i.min||r.max!==i.max){t.animate=true;s(t,n,r,o);e(function(){t.animate=false},200)}return r}return{updateOutDataArrays:a,SegmentLimit:o,getSliderStep:c,getRange:u,updateRange:d,updateSliderOptions:l,updateSelectedHandle:n,updateSegments:s,checkInvalidExpressionInLimits:e,updateActiveIndex:i,updateArrow:r}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-palette-creator">\n\t<button ng-if="!hasInvalidExpression && colors.length" class="lui-button  lui-button--block qv-palette-creator-btn" ng-disabled="addDisabled()" ng-click="addLimit($event)" tid="add-limit-button">\n\t\t<span class="lui-button__text" q-translation="properties.colorScaleCreator.addLimit"></span>\n\t</button>\n\t<div class="qv-palette-creator-container">\n\t\t<div>\n\t\t\t<div class="qv-palette-creator-color-scheme">\n\t\t\t\t<qv-color-scheme-display\n\t\t\t\t\tcolors="colors"\n\t\t\t\t\tlimits="colorSchemeLimits"\n\t\t\t\t\ttypes="types"\n\t\t\t\t\tallow-change="!!colorSchemeLimits"\n\t\t\t\t\tanimate-change="animate">\n\t\t\t\t</qv-color-scheme-display>\n\t\t\t</div>\n\n\t\t\t<div class="pp-component pp-slider-component" class="segment-slider" ng-class="{\'notVisible\': segments.length < 1}">\n\t\t\t\t<div class="value">\n\t\t\t\t\t<div class="slider paletteSlider" ng-class="{\'qv-palette-creator-animate\' : animate}" pp-slider="sliderOptions" ng-model="sliderValues"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-show="hasInvalidExpression" class="invalid-limit-warning invalid-expression-text" q-translation="properties.colorScaleCreator.cantShowSettings">\n\t\t</div>\n\t\t<div class="hidden limit-options-arrow" ng-class="{\'notVisible\': segments.length < 1}">\n\t\t\t<div class="limit-options-arrow-fg" ng-class="{\'no-transition\' : slide}"></div>\n\t\t\t<div class="limit-options-arrow-bg" ng-class="{\'no-transition\' : slide}"></div>\n\t\t</div>\n\n\t\t<div class="qv-palette-creator-limit-options hidden">\n\t\t\t<div ng-repeat="segment in segments track by $index">\n\n\t\t\t\t<div class="lui-input-group" ng-show="$index == activeIndex">\n\t\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" qv-enter="onEnter($index, $event)" ng-focus="onInputFocus()"\n\t\t\t\t\t qva-blur="onEnter($index, $event)" ng-model="segment.percent" type="text" maxlength="31">\n\t\t\t\t</div>\n\t\t\t\t<lui-checkbox id="qv-palette-creator-gradient" ng-show="$index == activeIndex" x-change="onGradient()" x-model="segment.type" title="{{\'properties.gradient\'|translate}}">{{\'properties.gradient\'|translate}}</lui-checkbox>\n\t\t\t\t<button ng-show="$index == activeIndex" class="lui-button  lui-button--block qv-palette-creator-btn" ng-click="removeLimit($index)" tid="remove-limit-button">\n\t\t\t\t\t<span class="lui-button__text" q-translation="properties.colorScaleCreator.removeLimit"></span>\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--bin  remove-icon" q-title-translation="Common.Delete"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(741)],s=function(t,e){t.directive("qvEditMeasure",[function(){return{restrict:"E",template:e,replace:true}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div>\n\t\x3c!-- Expression --\x3e\n\t<div class="measure-component">\n\t\t<label class="qv-metadatalabel" q-translation="metadata.expression">Expression:</label>\n\t\t<tiny-editor class="measureExpArea" value="measure.expression" on-open="openInExpressionDialog( $event )" invalid="!measure.validity.expression"></tiny-editor>\n\t</div>\n\n\t\x3c!-- Name --\x3e\n\t<div class="measure-component">\n\t\t<label q-translation="metadata.name" class="qv-metadatalabel">Name:</label>\n\t\t<input class="lui-input" ng-model="measure.name" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !measure.validity.name }" data-tid="name-input"/>\n\t</div>\n\n\t\x3c!-- Label expression --\x3e\n\t<div class="measure-component">\n\t\t<qv-expression-input expression="measure.labelExpression" is-valid-expression="measure.validity.labelExpression"></qv-expression-input>\n\t</div>\n\n\t\x3c!-- Description --\x3e\n\t<div class="measure-component">\n\t\t<label q-translation="metadata.description" class="qv-metadatalabel">Description:</label>\n\t\t<qv-description-textarea\n\t\t\tdescription="measure.description"\n\t\t\tdescription-expression="measure.descriptionExpression"\n\t\t\tis-valid="measure.validity.description">\n\t\t</qv-description-textarea>\n\t</div>\n\n\t\x3c!-- Measure color --\x3e\n\t<div class="measure-component">\n\t\t<label class="qv-metadatalabel" q-translation="library.colors.measurecolor"></label>\n\t\t<qv-color-picker-button-new ng-model="color" palette="theme.currentPalette" extended="true" toggle-open="true"></qv-color-picker-button-new>\n\t</div>\n\n\t\x3c!-- Tags --\x3e\n\t<div class="measure-component">\n\t\t<label q-translation="metadata.tags" class="qv-taglabel"></label>\n\t\t<qv-tagcloud tags="measure.tags" update="measure.updateTags"></qv-tagcloud>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(743),n(48),n(744),n(94),n(107),n(166),n(113),n(145),n(209),n(268),n(211)],s=function(t,e,n,i,s,o){var r={template:n,controller:["$scope",function(e){function n(){var t=o.validateMetadataName(e.visualization,s);return t&&e.visualization.validity.description&&e.visualization.validity.labelExpression}var r=t.create(e,n);e.stringLimits=s;e.cancel=r.cancel;e.confirm=function(){e.visualization.updateTags();r.save()};i.StateChanged.bind(e.cancel);e.$on("$destroy",function(){i.StateChanged.unbind(e.cancel)});e.$watch("visualization.name",function(){e.visualization.validity.name||o.validateMetadataName(e.visualization,s)})}]};function a(t){var n={title:t.title,confirm:t.confirm,visualization:{name:t.visualization.name,description:t.visualization.description,descriptionExpression:t.visualization.descriptionExpression,labelExpression:t.visualization.labelExpression,tags:t.visualization.tags},onSaveCallback:t.onSaveCallback};return e.getService("luiDialog").show({template:r.template,controller:r.controller,input:n,closeOnOutside:false,showArrow:false,component:r})}return{show:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t,e){if(!t)throw new TypeError("You must pass a scope to this function");if(!e||"function"!==typeof e)throw new TypeError("You must pass a validateForm function to this function");function n(){t.destroyComponent()}function i(){if(e()){var n=o();t.destroyComponent();t.onSaveCallback(n)}}function s(){t.visualization=t.visualization||{};t.visualization.validity={};t.visualization.validity.name=true;t.visualization.validity.description=true;t.visualization.validity.labelExpression=true}function o(){return{name:t.visualization.name,labelExpression:r(t.visualization.labelExpression),description:t.visualization.description,descriptionExpression:t.visualization.descriptionExpression,tags:t.visualization.tags}}function r(t){var e="string"!==typeof t||0===t.length;if(e)return;return{qStringExpression:{qExpr:"="===t[0]?t.substr(1):t}}}t.visualization=t.input.visualization;s();return{cancel:n,save:i,getFormData:o}}return{create:t}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="lui-modal-background"></div>\n<lui-dialog id="visualization-dialog">\n\t<lui-dialog-header class="dm-header" q-translation="{{input.title}}"></lui-dialog-header>\n\t<lui-dialog-body class="dm-main">\n\t\t<div class="visualization-dialog-item">\n\t\t\t<label q-translation="metadata.name">Name:</label>\n\t\t\t<input class="lui-input" ng-model="visualization.name" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !visualization.validity.name }" data-tid="name-input"/>\n\t\t</div>\n\t\t<div class="visualization-dialog-item">\n\t\t\t<qv-expression-input expression="visualization.labelExpression" is-valid-expression="visualization.validity.labelExpression"></qv-expression-input>\n\t\t</div>\n\n\t\t<div class="visualization-dialog-item">\n\t\t\t<label q-translation="metadata.description">Description:</label>\n\t\t\t<qv-description-textarea\n\t\t\t\tdescription="visualization.description"\n\t\t\t\tdescription-expression="visualization.descriptionExpression"\n\t\t\t\tis-valid="visualization.validity.description">\n\t\t\t</qv-description-textarea>\n\t\t</div>\n\t\t<div class="visualization-dialog-item">\n\t\t\t<label q-translation="metadata.tags" class="qv-taglabel"></label>\n\t\t\t<qv-tagcloud tags="visualization.tags" update="visualization.updateTags"></qv-tagcloud>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-footer qv-confirm-label="{{input.confirm}}">\n\t\t<lui-button ng-click="cancel()" tid="2f2a4f" q-translation="Common.Cancel" ></lui-button>\n\t\t<lui-button ng-click="confirm()" tid="2f2a56" q-translation="{{input.confirm}}" ></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>'},function(t,e,n){"use strict";var i,s;!(i=[n(51),n(48),n(91),n(746),n(94),n(107),n(191),n(150),n(295),n(166),n(89),n(316),n(90),n(49),n(145),n(241),n(209),n(351)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h){var f=null;function g(t,e,n){t.validity[e]=!!t[e]&&!!t[e].trim()&&t[e].length<=n.name;return t.validity[e]}function v(t,e){t.validity[e]=!!t[e]&&p.isInteger(t[e])&&!Number.isNaN(+t[e])&&parseInt(t[e],10)>0;return t.validity[e]}function m(t,e){var n=v(t,e);if(n){var i=t[e];t.validity[e]=Math.log10(i)<9}return t.validity[e]}function b(t,e,n,i){var s=new u;var o=c.validateExpr(t,e);if(o){n.validate(t.expression);s.resolve(true)}else{i();s.resolve(false)}return s.promise}function y(t){var e=false;if(c.validateMetadata(t.odagLink,o))if(d.allowedChars(t.odagLink.name))e=true;else{t.odagLink.validity.name=false;e=false}return e}function x(t){var e="unlimited"===t.odagLink.retentionTimeUnit||v(t.odagLink,"retentionLimit");if(e&&t.odagLink.retentionLimit>99999){t.odagLink.validity.retentionLimit=false;e=false}return e}function q(t){var e=false;var n=y(t);var i=g(t.odagLink,"templateApp",o);var s=m(t.odagLink,"rowEstCount");var r=v(t.odagLink,"genAppLimit");var a=x(t);a&&n&&s&&r&&i&&(e=true);return e}function S(t,e){var n=t.getRetentionTimeServerValue(e.odagLink.retentionLimit,e.odagLink.retentionTimeUnit);return{name:e.odagLink.name,templateApp:e.odagLink.templateApp,tags:e.odagLink.tags,rowEstExpr:e.odagLink.expression,rowEstCount:parseInt(e.odagLink.rowEstCount,10),genAppLimit:parseInt(e.odagLink.genAppLimit,10),retentionLimit:n,defaultViewId:e.odagLink.defaultViewId,publishToStreamId:e.odagLink.publishToStreamId}}var w={scope:{title:"=",app:"=",confirmLabel:"=",odagLink:"=",inEditMode:"=",onConfirmCallback:"="},template:i,controller:["$scope","$element","$timeout","odagLinkDialogService",function(t,i,u,d){t.startSpinnerTimeout=null;var p=e.getService("qvLoader");t.isOdagSaas=h.getFlag("ODAG_SAAS_ENABLED");t.odagLink.validity={};t.odagLink.validity.expression=true;t.odagLink.validity.rowEstCount=true;t.odagLink.validity.genAppLimit=true;t.odagLink.validity.retentionLimit=true;t.odagLink.validity.templateApp=true;t.odagLink.validity.name=true;t.templateApps=[];t.exprValidator=null;t.stringLimits=o;t.retentionTimeUnits=[{id:"unlimited",name:n.get("ODAGLink.Dialog.RetentionTimeUnit.NeverExpires")},{id:"d",name:n.get("ODAGLink.Dialog.RetentionTimeUnit.Days")},{id:"h",name:n.get("ODAGLink.Dialog.RetentionTimeUnit.Hours")}];t.defaultViews=[{id:"",name:n.get("ODAGLink.Dialog.DefaultView.AppOverview")}];t.publishToStreams=[{qId:"",qName:n.get("ODAGLink.Dialog.DefaultPublishTo.MyWork")}];function g(){t.startSpinnerTimeout=u(function(){p.show({template:l,hugeLoader:false,mediumLoader:true,appendTo:i.find("#odag-link-dialog .dm-main")[0]})},0,false);return t.startSpinnerTimeout}function m(){u.cancel(t.startSpinnerTimeout);t.startSpinnerTimeout=null;p.close()}function x(){t.odagLink.validity.expression=false}t.cancel=function(){t.destroyComponent()};t.confirm=function(){g().then(function(){f=q(t);b(t.odagLink,o,t.exprValidator,x).then(function(t){t||m()}).catch(function(){m()})})};d.getTemplateApps().then(function(e){t.templateApps=e;t.templateApps.length&&t.odagLink.validity.templateApp&&(t.odagLink.templateApp||(t.odagLink.templateApp=t.templateApps[0].qDocId))});d.getPublishableStreams().then(function(e){if(e)for(var n=0;n<e.length;n++)t.publishToStreams.push(e[n])});s.StateChanged.bind(t.cancel);function w(e){if(f&&e.valid){var n=S(d,t);if(t.onConfirmCallback)t.onConfirmCallback(n).then(function(){m();t.deferredResult.resolve(n)}).catch(function(){m()});else{m();t.deferredResult.resolve(n)}}else m();e.valid||x()}function C(){t.odagLink.templateApp&&d.getSheetsForApp(t.odagLink.templateApp).then(function(e){if(e)for(var n=0;n<e.length;n++)t.defaultViews.push(e[n])})}t.exprValidator=new r.ExpressionValidator(t.app,r.Modes.Expression);t.exprValidator.Update.bind(w);t.openInExpressionDialog=function(e){e.preventDefault();a.show({expr:t.odagLink.expression,title:t.odagLink.expression?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"}).then(function(e){t.odagLink.expression=e})};t.$watch("odagLink.expression",function(){t.odagLink.validity.expression||c.validateExpr(t.odagLink,o)});t.$watch("odagLink.name",function(){t.odagLink.validity.name||y(t)});t.$watch("odagLink.rowEstCount",function(){t.odagLink.validity.rowEstCount||v(t.odagLink,"rowEstCount")});t.$watch("odagLink.genAppLimit",function(){t.odagLink.validity.genAppLimit||v(t.odagLink,"genAppLimit")});t.$watch("odagLink.retentionLimit",function(){t.odagLink.validity.retentionLimit||v(t.odagLink,"retentionLimit")});t.$watch("odagLink.retentionTimeUnit",function(){"unlimited"===t.odagLink.retentionTimeUnit&&(t.odagLink.retentionLimit="")});t.$watch("odagLink.templateApp",function(e,n){if(e!==n){t.odagLink.defaultViewId="";t.defaultViews.splice(1)}C()});t.$on("$destroy",function(){s.StateChanged.unbind(t.cancel);t.exprValidator.Update.unbind(w)})}]};function C(n){var i={retLimit:"",retentionTimeUnit:""};if(n.retentionLimit){var s=e.getService("odagLinkDialogService");i=s.getRetentionTimeDisplayValue(n.retentionLimit)}else{i.retentionTimeValue="0";i.retentionTimeUnit="unlimited"}var o={title:n.title,app:n.app,confirmLabel:n.confirm,inEditMode:n.inEditMode,onConfirmCallback:n.confirmCallback,odagLink:{expression:n.rowEstExpr,rowEstCount:n.rowEstCount,genAppLimit:n.genAppLimit,retentionLimit:i.retentionTimeValue,retentionTimeUnit:i.retentionTimeUnit,defaultViewId:n.defaultViewId,publishToStreamId:n.publishToStreamId,name:n.name,templateApp:n.templateApp?n.templateApp.id:null,tags:n.tags}};return t.show(w,o)}return{show:C}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<qv-modal-dialog qv-id="odag-link-dialog" qv-cancel="cancel()" qv-confirm="confirm()">\n\t<header class="dm-header" q-translation="{{title}}"></header>\n\t<main class="dm-main">\n\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="metadata.name" class="qv-metadatalabel">Name:</label>\n\t\t\t<input class="lui-input" ng-model="odagLink.name" autofocus qva-focus="true" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !odagLink.validity.name }"/>\n\t\t</div>\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.TemplateApp" class="qv-metadatalabel">Template App:</label>\n\t\t\t<lui-select ng-class="{ \'lui-invalid\': !odagLink.validity.templateApp }" ng-disabled="inEditMode" x-model="odagLink.templateApp" tid="odag-link-templateApp-selector" x-options="templateApp.qDocId as templateApp.qDocName for templateApp in templateApps"></lui-select>\n\t\t</div>\n \t\t<div class="odag-link-component">\n\t\t\t<label q-translation="metadata.expression" class="qv-metadatalabel">Expression:</label>\n\t\t\t<tiny-editor class="rowCountExpArea" value="odagLink.expression" on-open="openInExpressionDialog( $event )"\n\t\t\t\tinvalid="!odagLink.validity.expression"></tiny-editor>\n\t\t</div>\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.MaxRowCount" class="qv-metadatalabel">Max row count:</label>\n\t\t\t<input class="lui-input" ng-model="odagLink.rowEstCount" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !odagLink.validity.rowEstCount }"/>\t\t\n\t\t</div>\n\t\t<div class="odag-link-divider">\n            <div class="odag-link-divider-label" q-translation="ODAGLink.Dialog.Generated.Apps"></div>\n            <div class="odag-link-divider-line"></div>\n        </div>\t\t\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.MaxGenAppsCount2" class="qv-metadatalabel">Maximum number:</label>\n\t\t\t<input class="lui-input" ng-model="odagLink.genAppLimit" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !odagLink.validity.genAppLimit }"/>\t\n\t\t</div>\t\t\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.RetentionTime" class="qv-metadatalabel">Retention time:</label>\n\t\t\t<div class="odag-retention-time">\n\t\t\t\t<input class="lui-input" ng-disabled="odagLink.retentionTimeUnit === \'unlimited\'"" ng-model="odagLink.retentionLimit" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !odagLink.validity.retentionLimit }"/>\t\n\t\t\t\t<lui-select x-model="odagLink.retentionTimeUnit" tid="odag-link-retentionTimeUnit-selector" x-options="retentionTimeUnit.id as retentionTimeUnit.name for retentionTimeUnit in retentionTimeUnits"></lui-select>\n\t\t\t</div>\t\n\t\t</div>\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.DefaultViewWhenOpened" class="qv-metadatalabel">Default view when opened:</label>\t\n\t\t\t<lui-select x-model="odagLink.defaultViewId" tid="odag-link-defaultView-selector" x-options="defaultView.id as defaultView.name for defaultView in defaultViews"></lui-select>\n\t\t</div>\n\t\t<div class="odag-link-component" ng-if="!isOdagSaas">\n\t\t\t<label q-translation="ODAGLink.Dialog.PublishTo" class="qv-metadatalabel">Publish To:</label>\t\n\t\t\t<lui-select x-model="odagLink.publishToStreamId" tid="odag-link-publishTo-selector" x-options="publishToStream.qId as publishToStream.qName for publishToStream in publishToStreams"></lui-select>\n\t\t</div>\n\x3c!--\n\t\t<div class="measure-component">\n\t\t\t<label q-translation="metadata.tags" class="qv-taglabel"></label>\n\t\t\t<qv-tagcloud tags="odagLink.tags" update="odagLink.updateTags"></qv-tagcloud>\n\t\t</div>\n --\x3e\n\t</main>\n\t<footer class="dm-footer">\n\t    <lui-button x-variant="inverse" qva-activate="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Cancel" tid="2f2a4f"></lui-button>\n\t    <lui-button x-variant="inverse" qva-activate="$event.preventDefault(); confirm()" name="confirm" q-translation="{{confirmLabel}}" tid="2f2a56" ng-disabled="startSpinnerTimeout !== null" ></lui-button>\n\t</footer>\n\n</qv-modal-dialog>\n'},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;var e={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"};function n(t){return t<0?Math.ceil(t):Math.floor(t)}function i(t){if(t){var n=t.toLowerCase().replace(/(.)s$/,"$1");t=e[t]||n}return t}function s(t){var e={},n,s;for(s in t)if(t.hasOwnProperty(s)){n=i(s);n&&(e[n]=t[s])}return e}function o(t){var e=s(t),n=e.year||0,i=e.month||0,o=e.week||0,r=e.day||0,l=e.hour||0,c=e.minute||0,u=e.second||0,d=e.millisecond||0;this._input=t;this._milliseconds=+d+1e3*u+6e4*c+36e5*l;this._days=+r+7*o;this._months=+i+12*n;this._data={};a.call(this)}function r(e){var n="number"===typeof e,i={},s=null,r,a;if(n)i.milliseconds=e;else if(!!(s=t.exec(e))){r="-"===s[1]?-1:1;a=function t(e){var n=e&&parseFloat(e.replace(",","."));return(Number.isNaN(+n)?0:n)*r};i={y:a(s[2]),M:a(s[3]),d:a(s[4]),h:a(s[5]),m:a(s[6]),s:a(s[7]),w:a(s[8])}}return new o(i)}function a(){var t=this._milliseconds,e=this._days,i=this._months,s=this._data,o,r,a,l;s.milliseconds=t%1e3;o=n(t/1e3);s.seconds=o%60;r=n(o/60);s.minutes=r%60;a=n(r/60);s.hours=a%24;this.hours=function(){return s.hours};e+=n(a/24);s.days=e%30;this.days=function(){return s.days};i+=n(e/30);s.months=i%12;l=n(i/12);s.years=l;function c(t){return 365*Math.floor(t/12)}this.asHours=function(){var e=this._days+c(this._months);return 24*e+t/36e5};this.asDays=function(){var e=this._days+c(this._months);return e+t/864e5}}return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92),n(49),n(91),n(262),n(183),n(325)],s=function(t,e,n,i,s){var o;var r=t.extend("ODAGRestService",{init:function t(e,n,i,s){this._host=e;this._port=n;this._isSecured=s;this._proxy=i},_errorHandler:function t(e){if(!e.isHandled){e.isHandled=true;var s=e.response&&e.response.obj&&e.response.obj.message?e.response.obj.message:"";s||e&&(500===e.status?s=n.get("odag.Error.Unreachable"):e.message&&(s=n.get(e.errObj.message)));i.show({title:n.get("odag.Error.Title"),message:s})}throw e},_isODAGAvailableErrorHandler:function t(e){var n=e.statusCode%500;if(n>=0&&n<100)return false;this._errorHandler(e)},_getAPI:function t(){if(!o){var n=e.getFlag("ODAG_SAAS_ENABLED")?"api":"api/odag/v1";var i=e.getFlag("ODAG_SAAS_ENABLED")?"odag/openapi":"openapi";var r=e.getFlag("ODAG_SAAS_ENABLED");o=s.getApi(n,i,this._isSecured,this._host,this._port,this._proxy,r)}return o},_getLinksWithIds:function t(n,i){var s=null;s={linkList:i};return this._getAPI().then(function(t){if(e.getFlag("ODAG_SAAS_ENABLED"))return t.apis.Link.SyncAppLinkUsages({id:1,selAppId:n},{requestBody:s}).then(function(t){return t.body});return t.apis.Link.SyncAppLinkUsages({selAppId:n,linkUsagePayload:s}).then(function(t){return t.body})}).catch(this._errorHandler)},_getLinks:function t(){return this._getAPI().then(function(t){return t.apis.Link.LinksGet().then(function(t){return t.body})}).catch(this._errorHandler)},_getLink:function t(e){return this._getAPI().then(function(t){return t.apis.Link.LinkGet({linkId:e}).then(function(t){return t.body})}).catch(this._errorHandler)},_isODAGAvailable:function t(){return this._getAPI().then(function(t){if(t.apis.Settings)return!!e.getFlag("ODAG_SAAS_ENABLED")&&t.apis.Settings.IsOdagAvailable().then(function(t){return t.body.available});return t.apis.Global.IsOdagAvailable().then(function(t){return t.body})}).catch(this._isODAGAvailableErrorHandler.bind(this))},_canCreateLink:function t(e){return this._getAPI().then(function(t){var n={};e&&(n.optSelectAppId=e);return t.apis.Link.LinkCanCreate(n).then(function(t){return t.body})},function t(){return{canCreateLinks:false}}).catch(this._errorHandler)},_createLink:function t(n){var i=this;return this._getAPI().then(function(t){if(e.getFlag("ODAG_SAAS_ENABLED"))return t.apis.Link.LinkCreate({id:n.id},{requestBody:n}).then(function(t){return t.body}).catch(i._errorHandler);return t.apis.Link.LinkCreate({linkPayload:n}).then(function(t){return t.body})}).catch(this._errorHandler)},_deleteLink:function t(n,i){var s={statusSetting:"decommission",modifiedDate:i.data.modifiedDate};return this._getAPI().then(function(t){if(e.getFlag("ODAG_SAAS_ENABLED")){s.name=i.data.name;s.selectionApp=i.data.selectionApp;return t.apis.Link.LinkUpdate({linkId:n},{linkId:n,requestBody:s}).then(function(t){return t.body})}return t.apis.Link.LinkUpdate({linkId:n,linkPayload:s}).then(function(t){return t.body})}).catch(this._errorHandler)},_updateLink:function t(n,i){var s=this;return this._getAPI().then(function(t){if(e.getFlag("ODAG_SAAS_ENABLED"))return t.apis.Link.LinkUpdate({linkId:n},{linkId:n,requestBody:i}).then(function(t){return t.body}).catch(s._errorHandler);return t.apis.Link.LinkUpdate({linkId:n,linkPayload:i}).then(function(t){return t.body})}).catch(this._errorHandler)},_renameApp:function t(n,i){return this._getAPI().then(function(t){var s={appName:i};if(e.getFlag("ODAG_SAAS_ENABLED"))return t.apis.Request.RenameApp({requestId:n},{requestId:n,requestBody:s});return t.apis.Request.RenameApp({requestId:n,renameAppPayload:s})}).catch(this._errorHandler)},_deleteApp:function t(e){return this._getAPI().then(function(t){return t.apis.Request.DeleteApp({requestId:e})}).catch(this._errorHandler)},_reloadApp:function t(n,i,s,o,r){var a={};if(i){r&&(a.copyRequest=r);a.actualRowEst=i;a.bindSelectionState=s;a.selectionState=o}return this._getAPI().then(function(t){if(e.getFlag("ODAG_SAAS_ENABLED"))return t.apis.Request.ReloadApp({requestId:n},{requestId:n,requestBody:a});return t.apis.Request.ReloadApp({requestId:n,reloadAppPayload:a})}).catch(this._errorHandler)},_getSelections:function t(e){return this._getAPI().then(function(t){return t.apis.Request.GetSelections({requestId:e}).then(function(t){return t.body})}).catch(this._errorHandler)},_requestAction:function t(e,n,i,s){var o={requestId:e,action:n,ignoreSucceeded:true};void 0!==i&&(o.delGenApp=i);void 0!==s&&(o.autoAck=s);return this._getAPI().then(function(t){return t.apis.Request.RequestAction(o).then(function(t){return t.body})}).catch(this._errorHandler)},_getGeneratedAppsForLink:function t(e,n,i,s,o,r,a){var l={linkId:e};o&&(l.user=o);r&&(l.state=r);a&&(l.pending=a);return this._getAPI().then(function(t){return t.apis.Request.LinkRequestsGet(l).then(function(t){return t.body})}).catch(this._errorHandler)},_generateApp:function t(n,i,s,o,r,a,l){var c={linkId:n,requestPostPayload:{clientContextHandle:s,actualRowEst:r,selectionApp:i,bindSelectionState:a,selectionState:l,sheetname:o}};return this._getAPI().then(function(t){var i;i=e.getFlag("ODAG_SAAS_ENABLED")?t.apis.Request.LinkRequestCreate({linkId:n},{linkId:n,requestBody:c.requestPostPayload}):t.apis.Request.LinkRequestCreate(c);return i.then(function(t){return t.body})}).catch(this._errorHandler)},_getTemplateApps:function t(){var e={appType:"template"};return this._getAPI().then(function(t){return t.apis.Apps.GetApps(e).then(function(t){return t.body})}).catch(this._errorHandler)},getTemplateApps:function t(){return this._getTemplateApps()},getODAGLinksWithIds:function t(e,n){return this._getLinksWithIds(e,n)},getODAGLink:function t(e){return this._getLink(e)},canCreateLink:function t(e){return this._canCreateLink(e)},createODAGLink:function t(e){return this._createLink(e)},deleteODAGLink:function t(e,n){return this._deleteLink(e,n)},updateODAGLink:function t(e,n){return this._updateLink(e,n)},renameApp:function t(e,n){return this._renameApp(e,n)},deleteApp:function t(e){return this._deleteApp(e)},isODAGAvailable:function t(){return this._isODAGAvailable()},reloadApp:function t(e,n,i,s,o){return this._reloadApp(e,n,i,s,o)},getSelections:function t(e){return this._getSelections(e)},generateApp:function t(e,n,i,s,o,r,a){return this._generateApp(e,n,i,s,o,r,a)},getGeneratedAppsForLink:function t(e,n,i,s,o,r,a){return this._getGeneratedAppsForLink(e,n,i,s,o,r,a)},requestAction:function t(e,n,i,s){return this._requestAction(e,n,i,s)}});return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={qInfo:{qType:"odag-toolbar-navpoint"},qMetaDef:{},qHyperCubeDef:{qDimensions:[],qInitialDataFetch:[{qLeft:0,qTop:0,qWidth:1,qHeight:0}]}};var e={qInfo:{qType:"odag-toolbar-navpoint"},MaxRowCountExpression:{qValueExpression:{qExpr:""}}};return{fieldHyperCubeProperties:t,maxRowExpression:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover position="input.menuOptions.position"\n\t\t\t\t\t  on-close-view="onOutsidePopover(event)"\n\t\t\t\t\t  class= "qv-guidance-popover"\n\t\t\t\t\t  ng-style="{\'opacity\': popupClosing? 0 : 1, \'width\': input.menuOptions.width, \'top\': input.menuOptions.bottom}" \n>\n\t<div tid="dm-gridview-guidance-popover-content" class="qv-guidance-popover-content">\n\t\t<div class="qv-guidance-popover-title">{{input.title}}</div>\n\t\t<div class="qv-guidance-popover-message">{{input.message}}</div>\n\t\t<div class="qv-guidance-popover-button">\n\t\t\t<button \n\t\t\t\ttid="dm-gridview-guidance-popover-ok-button"\n\t\t\t\tclass="lui-button  lui-button--success qui-popover-ok-button" qva-activate="onCloseClicked()">{{input.buttonText}}</button>\n\t\t</div>\n\t</div>\n</lui-popover>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(89)],s=function(t){function e(t){return t.getProperties().then(function(t){return t.qExtendsId})}function n(n){var i=new t;e(n).then(function(t){n.copyFrom(t).then(function(){n.getProperties().then(function(t){delete t.qMetaDef;delete t.descriptionExpression;delete t.labelExpression;n.setProperties(t).then(function(){i.resolve(t)})})})});return i.promise}return{breakLink:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(){this.tabs=null;this.activeTab=null;this.fullMode=true;this.query="";this.table="All";this.tabExpanded=false;this.expandTab=function(t){this.activeTab=t;this.tabExpanded=true}}t.prototype.setTabs=function(t){this.tabs=t};t.prototype.activateTab=function(t){if(t.loading)return;if(this.activeTab&&t.id===this.activeTab.id&&this.tabExpanded){this.tabExpanded=false;this.query=""}else this.expandTab(t)};t.prototype.getActiveTabId=function(){return this.activeTab&&this.tabExpanded?this.activeTab.id:null};t.prototype.openSection=function(t){for(var e=0;e<this.tabs.length;++e){var n=this.tabs[e];var i=n.openSection(t);if(i){this.expandTab(n);return true}}return false};t.prototype.resize=function(t){null!=this.activeTab&&this.activeTab.resize(t)};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(754),n(755),n(757),n(762),n(800),n(803),n(807),n(810),n(817),n(821),n(115),n(91),n(49),n(113)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h){function f(e){var i=new n(e,"charts");var s={id:"assets-tab-template",section:i,name:"Common.Charts",button:{icon:"object",text:"Common.Charts"}};return new t(s)}function g(e){var n=new i(e);var s={id:"assets-tab-field",section:n,name:"Common.Fields",hasTableFilter:true,haveManageDataButtons:h.LIBRARY_DATA_BUTTONS,button:{icon:"database",text:"Common.Fields"}};var o=new t(s);return o}function v(t){var n=[new s(t),new o(t),new r(t)];p.getFlag("ALT_STATE_ONE")&&n.push(new c(t));var i={id:"library",sections:n,name:"Toolbox.Tab.Title.MasterItems",button:{icon:"link",text:"Tooltip.Toolbox.MasterItems"}};return new e(i)}function m(t,i,s){var o="Common.CustomObjects";var r=[];var l=s.then(function(){(p.getFlag("CLOUD_EXTENSIONS")||!p.getFlag("CLOUD_EXTENSIONS")&&!p.getFlag("DISABLE_ONPREM_EXTENSIONS"))&&r.push(new n(t,"extensions"));var e=u.getRegisteredNames();var s={};e.forEach(function(t){var e=u.getType(t).getLibraryInfo();e&&e.bundle&&e.bundle.id&&!s[e.bundle.id]&&(s[e.bundle.id]=e.bundle)});Object.keys(s).forEach(function(e){r.push(new n(t,"extensions",e,s[e]))});return i.then(function(e){e.forEach(function(e){var n=new a(t);n.title=e.data.name;n.name=e.data.name;n.id=e.data.name;n.infoTitle=d.get("AssetsPanel.Widgets.libraryInfoHeading",n.title);n.description=e.data.description;n.onLoadData(e.resolvedWidgets);r.push(n)});return r})});var c={id:"widgets",sectionsPromise:l,name:o,longname:"Common.CustomObjects",button:{icon:"puzzle",text:"Common.Extensions"}};return new e(c)}function b(e,n){var i=new l(e,n);var s={id:"assets-tab-odag",section:i,name:"ODAG.Toolbox.PanelTitle.NavLinks",hasTableFilter:false,button:{icon:"sign-post",text:"ODAG.Toolbox.Title.ODAGToolbar"}};var o=new t(s);return o}return{createWidgetTab:m,createMasterItemsTab:v,createFieldTab:g,createTemplateTab:f,createODAGTab:b}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(352)],s=function(t){var e;e=t.extend({init:function t(e){e.component={template:'<div id="{{tab.id}}" class="assets-tab"><qv-assets-section section="tab.section" /></div>',controller:function t(){}};this._super(e);this.section=e.section},resize:function t(e){this._super(e);this.section.resize(e)},openSection:function t(e){return this.section.id===e}});Object.defineProperty(e.prototype,"hitCount",{get:function t(){return this.section.matchCount?this.section.matchCount:""}});return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(352),n(756),n(102)],s=function(t,e,n,i){function s(e,n){var i=e.tab;e.$evalAsync(function(){var s=n.find("#libAccordion");var o=s.find("header");var r=i.activeIndex;var a,l;s.accordion({fillSpace:true,heightStyle:"fill",animate:!("ontouchstart"in window)&&"swing",active:r,beforeActivate:function n(c,u){r=o.index(u.newHeader);a=u.oldPanel.height();l=u.oldPanel.width();i.sections[r].resize({height:a,width:l});t.$apply(e);s.addClass("animating")},activate:function t(){i.sections[r].resize({height:a,width:l});s.removeClass("animating");var e=s.accordion("option","active");i.activeIndex=e}});function c(){s.accordion("option","active",i.activeIndex)}function u(){s.accordion("refresh");i.activeIndex>-1&&i.sections[i.activeIndex].resize()}i.Activate.bind(c);i.Resize.bind(u);e.$on("$destroy",function(){i.Activate.unbind(c);i.Resize.unbind(u)})})}var o;o=e.extend({init:function t(e){var o=this;e.component={template:n,controller:["$scope","$element",s]};o._super(e);o.activeIndex=-1;if(e.sections){o.sections=e.sections;o.activeIndex=this.sections.length-1}else{o.sections=[];o.loading=true;e.sectionsPromise.then(function(t){o.loading=false;o.sections=t;o.activeIndex=o.sections.length-1})}i.create(o,"Activate")},openSection:function t(e){for(var n=0;n<this.sections.length;++n){var i=this.sections[n].id===e;if(i){this.activeIndex=n;this.Activate.emit(n);return true}}return false}});Object.defineProperty(o.prototype,"hitCount",{get:function t(){var e=0;for(var n=0;n<this.sections.length;++n)e+=this.sections[n].matchCount;return e}});return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div id="{{tab.id}}" class="assets-tab">\n    <section class="qui-toolssectionframe" class="accordion" id="libAccordion">\n        <header ng-repeat-start="section in tab.sections" ng-if="!section.hidden" data-accordion-name="{{section.name}}" tid="accordion-header-{{section.id}}" ng-hide="tab.hiddenHeaders" >\n            <div class="active-marker"></div>\n            <div class="header-content">\n                <div ng-if="section.icon" class="icon {{section.icon}}"></div>\n                <h2 class="section-name" q-translation="{{section.title}}"></h2>\n                <qv-outlined-search-hit-indicator count="section.matchCount"></qv-outlined-search-hit-indicator>\n            </div>\n\t\t</header>\n\t\t\n        <div class="assets-section-items" ng-if="!section.hidden" ng-repeat-end>\n            <qv-assets-section section="section" />\n\t\t</div>\n\n    </section>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(91),n(2),n(94),n(49),n(126),n(136),n(112),n(149),n(137),n(758),n(759),n(761),n(345),n(89),n(111)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g){return a.extend({init:function t(){this.id=r.sectionIDs.template;this.list=[];this.name="template";this.templateType=arguments.length>1?arguments[1]:"charts";this.bundle=arguments.length>2?arguments[2]:void 0;this.bundleInfo=arguments.length>3?arguments[3]:void 0;"charts"===this.templateType&&(this.title="Common.Charts");if("extensions"===this.templateType){this.id=r.sectionIDs.extensions;this.title="Common.Extensions";this.infoTitle=n.get("Common.ExtensionsInfoTitle");this.description=n.get("Common.ExtensionsDescription");this.hasMetaInfo=true;this.shouldShowCloudExtensionsWarning=false;var e=this;if(!o.getFlag("HIDE_ABOUT_BUTTON")){var s={url:"about/v1/systemInfo",headers:{"x-qlik-capabilities":"about"},method:"GET"};this.bundle||i(s).then(function(t){var n=t.data;n.deploymentType&&"QlikSenseServer"===n.deploymentType&&h.showCloudExtensionWarning().then(function(t){e.shouldShowCloudExtensionsWarning=t})})}this.cloudExtensionWarning=n.get("Object.WarningMessage.Cloud.Extensions.NotAvailable")}if("cloudExtensions"===this.templateType){this.id=r.sectionIDs.cloudExtensions;this.title="Common.CloudExtensions";var a=this;f.areCloudExtensionsAvailable().then(function(t){if(t){a.infoTitle=n.get("Common.AvailCloudExtensionsInfoTitle");o.getFlag("DISABLE_ONPREM_EXTENSIONS")?a.description=n.get("Common.AvailCloudExtensionsDescription"):a.description=n.get("Common.AvailCloudExtensionsDescriptionDesktop")}else{a.infoTitle=n.get("Common.UnavailCloudExtensionsInfoTitle");a.description=n.get("Common.UnavailCloudExtensionsDescription")}});this.hasMetaInfo=true}if(this.bundle&&this.bundleInfo){this.id=this.bundle;this.title=this.bundleInfo.name;this.infoTitle=n.get("AssetsPanel.Widgets.libraryInfoHeading",this.bundleInfo.name);this.description=this.bundleInfo.description}this.tooltip="charts"===this.templateType?"":"Common.Extensions";this._super.apply(this,arguments);this.initPreviewManager()},initLoadData:function t(){d.create(this.templateType).then(this.onLoadData.bind(this))},initPreviewManager:function t(){function i(t){e.publish("/ui/library/addToSheet",{item:t})}function o(t){var e=t.item;var s={query:t.query,name:e.name,description:e.descriptionKey?n.get(e.descriptionKey):e.description,imageUrl:e.previewIconURL,hasImage:!!e.previewIconURL,icon:e.icon,tags:e.tags||[]};s.buttons=[c.buttonAddToSheet(i,t.closePreview,e,l.isAddToSheetMode())];s.close=t.closePreview;c.alignPreview(s,t.$element);return p.show(s)}this.previewManager=c.previewManagerFactory({getSlowInfo:function t(e){var n=new g;var i=document.createElement("IMG");var s=new Image;s.onload=function(){i.src=this.src;i.parentNode&&i.parentNode.removeChild(i);n.resolve()};s.onerror=function(){i.parentNode&&i.parentNode.removeChild(i);n.resolve()};s.src=e.previewIconURL;return n.promise},createPreview:o,itemDialogHandler:u,State:s})},onLoadData:function t(e){this.loading=false;for(var n=0;n<e.length;++n)e[n].id=e[n].template;function i(t){var e=new Date(t);return Number.isNaN(+e)||Date.now()<e}var s=this.bundle;var o=e.filter(function(t){return s?!!t.bundle&&t.bundle.id===s&&i(t.deprecated):!t.bundle});0===o.length&&this.bundle&&(this.hidden=true);this.list=l.localeOrderBy(o,function(t){return t.name});this.onFilter()},doFilter:function t(e){var n=this.assets.query;return e.filter(function(t){return t.isLibraryItem&&l.librarySearchFn(t,n)})},openContextMenu:function n(i,s){if(!l.isAddToSheetMode())return;var o=t.getService("qvContextMenu").menu();i.selected||l.toggleSelection(i,s);o.addItem({translation:"contextMenu.addToSheet",tid:"add-to-sheet",select:function t(){e.publish("/ui/library/addToSheet",{item:i})}});u.openContextMenu(o,i,s)}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(115),n(124),n(89),n(91),n(90)],s=function(t,e,n,i,s){function o(t){return{id:"newObject",args:{template:t.template,init:{}}}}var r={create:function a(l){var c=new n;e.load().then(function(){var e=t.getRegisteredNames();var n=e.map(function(e){var n=s.extend(true,{},t.getType(e).getLibraryInfo());n.getDropOption=o.bind(null,n);r.translateName(n,i.get);r.translateDescription(n,i.get);return n}).filter(function(t){return t.visible&&"visualization"!==t.type&&"charts"===l||"visualization"===t.type&&"extensions"===l&&!t.certified||"visualization"===t.type&&"cloudExtensions"===l&&t.certified});n.forEach(function(t){t.type="template"});c.resolve(n)});return c.promise},translateName:function t(e,n){if(!e)throw new TypeError("No item passed");if("function"!==typeof n)throw new TypeError("No translation function passed");e.translationKey&&(e.name=n(e.translationKey))},translateDescription:function t(e,n){if(!e)throw new TypeError("No item passed");if("function"!==typeof n)throw new TypeError("No translation function passed");e.descriptionKey&&(e.description=n(e.descriptionKey))}};return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(760)],s=function(t,e){function n(n){var i={template:e,controller:["$scope",function(t){t.input=n}],dock:"right",alignTo:n.alignTo[0]};return t.getService("luiPopover").show(i)}return{show:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover id="library-preview" class="template-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<div ng-show="input.hasImage" class="template-image-container">\n\t\t\t<img ng-src="{{input.imageUrl}}">\n\t\t</div>\n\t\t<i ng-show="!input.hasImage" class="template-icon  lui-icon  lui-icon--{{input.icon}}"></i>\n\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p class="description">{{input.description}}</p>\n\n\t\t<div ng-if="input.tags.length">\n\t\t\t<h2><span q-translation="Common.Tags"></span></h2>\n\t\t\t<ul class="tags">\n\t\t\t\t<li ng-repeat="tag in input.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }" title="{{tag}}">{{tag}}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(2)],s=function(t){var e=function t(){};var n=function t(e){var n=e.data;if(Array.isArray(n)){var i={};n.forEach(function(t){Object.keys(t.attributes||{}).forEach(function(e){i[e]=t.attributes[e]})});return i}return e};e.getWarnings=function(){var e={method:"GET",url:"api/dbws/deployment-warnings"};return t(e).then(function(t){return n(t.data)}).catch(function(){return{}})};e.showCloudExtensionWarning=function(){return e.getWarnings().then(function(t){return Boolean(t.showCloudExtensionWarning)}).catch(function(){return false})};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(54),n(94),n(126),n(136),n(112),n(149),n(137),n(763),n(154),n(106),n(144),n(791),n(148),n(793),n(796),n(229),n(49),n(157),n(142),n(89),n(111),n(233)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m,b,y,x){return s.extend({init:function e(){this.list=[];this.expanded={};this.id=i.sectionIDs.field;this.title="Assets.Section.Fields.Name";this.tid="fields.All";this._super.apply(this,arguments);this.initPreviewManager();this.classificationService=t.getService("classificationService")},bindWatches:function t(){this._super();this.$scope.$watch("assets.table",this.onFilter.bind(this))},initLoadData:function t(){c.getList().then(function(t){this.$scope.listModel=t}.bind(this));u(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function t(){var e=this;function i(t){o.addItemToSheetOrVisualization(t)}function s(t){l.addFieldAsDimension(e.assets,t.name)}function c(t){l.addFieldAsMeasure(e.assets,t.name)}function u(t){var e=[];for(var n=0;n<t.length;n++)e.contains(t[n].derivedDefinitionName)||e.push(t[n].derivedDefinitionName);return e}function d(t){return!t.isDerived}function f(t){var e=t.item;var n=this.$scope;e.app=n.listModel.app;var a=e.derivedFields?u(e.derivedFields):void 0;var l=d(e);var f={query:t.query,name:e.name,displayName:e.displayName,sourceField:e.sourceField,calendarTemplateName:e.calendarTemplateName?e.calendarTemplateName:e.derivedDefinitionName,derivedCalendars:a?o.localeOrderBy(a.slice()):[],isDerivedFromDate:e.isDerivedFromDate,isDateField:e.isDateField,tables:e.srcTables?o.localeOrderBy(e.srcTables.slice()):[],typeTranslationKey:h.getTypeTranslationKey(e.tags),alwaysOneSelected:false,isSingleSelectSupported:l};l&&(f.alwaysOneSelected=t.modelInfo.isSingleSelect);f.buttons=[r.buttonAddTo(i,t.closePreview,e,o.getAddToText(),o.isAddToMode())];o.permissionToCreate("dimension")&&f.buttons.push(r.buttonAddDimension(s,t.closePreview,e,true));o.permissionToCreate("measure")&&f.buttons.push(r.buttonAddMeasure(c,t.closePreview,e,true));l&&f.buttons.push(r.buttonFieldSettings(g.show,t.closePreview,e,true));f.close=t.closePreview;r.alignPreview(f,t.$element);return p.show(f)}this.previewManager=r.previewManagerFactory({getSlowInfo:function t(n){var i=new x;var s=e.$scope;var o;o=d(n)?y.isSingleSelect(s.listModel.app,n.name):x.resolve(false);o.then(function(t){i.resolve({isSingleSelect:t})});return i.promise},createPreview:f.bind(this),itemDialogHandler:a,State:n})},onLoadData:function t(e){if(m.getFlag("DISABLE_AUTO_CHART")||b.isVariableDefined("DISABLE_AUTO_CHART")){this.loading=false;e=d.create(e);this.list=o.localeOrderBy(e,function(t){return t.name});this.onFilter()}else this.classificationService.getClassification().then(function(t){var n=t?new v(t):void 0;this.loading=false;e=d.create(e,n);this.list=o.localeOrderBy(e,function(t){return t.name});this.onFilter()}.bind(this),function(){this.loading=false;e=d.create(e);this.list=o.localeOrderBy(e,function(t){return t.name});this.onFilter()}.bind(this))},doFilter:function t(n){var i=this.assets.query;var s=this.assets.table;var r=[];if(i&&""!==i)for(var a=0;a<n.length;a++){var l=e.extend({},n[a]);var c=l.derivedFields;c&&c.length>0&&(l.derivedFields=[]);r.push(l);if(c&&c.length>0)for(var u=0;u<c.length;u++)r.push(c[u])}else r=n;return r.filter(function(t){var e=o.librarySearchFn(t,i);var n="All"===s||-1!==t.srcTables.indexOf(s);return e&&n})},openContextMenu:function e(n,i){n.selected||o.toggleSelection(n,i);var s=t.getService("qvContextMenu").menu({docking:"BottomLeft"}),r=this,c=this.$scope.listModel.app;o.isAddToMode()&&s.addItem({translation:o.getContextMenuAddToText(),tid:"add-to-sheet",select:function t(){o.addItemToSheetOrVisualization(n)}});o.permissionToCreate("dimension")&&s.addItem({translation:"contextMenu.addToMasterItems.AsDimension",tid:"add-field-as-dimension",select:function t(){l.addFieldAsDimension(r.assets,n.name)}});o.permissionToCreate("measure")&&s.addItem({translation:"contextMenu.addToMasterItems.AsMeasure",tid:"add-field-as-measure",select:function t(){l.addFieldAsMeasure(r.assets,n.name)}});o.permissionToCreate("measure")&&!n.isDerivedFromDate&&s.addItem({translation:"AssetsPanel.CalendarFlags.GenerateCalendarMeasures",tid:"generate-calenar-measures",select:function e(){var i=t.getService("luiDialog");i.show({controller:f.component.controller,template:f.component.template,input:{selectedField:n,assets:r.assets}})}});n.isDerived||s.addItem({translation:"contextMenu.fieldSettings",tid:"open-field-settings",select:function t(){n.app=c;g.show(n)}});a.openContextMenu(s,n,i)},addItemToSheetOrActiveObject:function t(e,n){n?o.addItemToSheetOrVisualization(e,n):o.addItemToSheetOrVisualization(e)}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(502),n(126)],s=function(t,e){function n(t){if("object"!==o(t))throw new Error("assets")}function i(t){if("string"!==typeof t)throw new Error("fieldName")}function s(e,s,o,r){n(o);i(r);t[e](r,function(){o.openSection(s)})}return{addFieldAsDimension:s.bind(null,"showAddDimensionDialog",e.sectionIDs.dimension),addFieldAsMeasure:s.bind(null,"showAddMeasureDialog",e.sectionIDs.measure)}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(170),n(765),n(767),n(310),n(389),n(459)],s=function(t,e,n,i,s,o,r){function a(t,e,s){if(!t)throw new Error("Raw data is undefined.");if(!s)throw new Error("Cached ideal data is undefined.");var o,r,a=[];for(o in t.qk){r=t.qk[o];var u=r.qTables.length<3?l(s,r):c(s,r);a.push(u)}n.markConnectionAsCircularReferences(e,a);i.appendArms(a);return a}function l(t,n){var i=n.qKeyFields[0];var s=e.encodeTableName(n.qTables[0]);var o=e.encodeTableName(n.qTables[1]);var r=p(t,s);var a=p(t,o);var l={fieldName:i,tables:[s,o],lines:[]};var c=u(t,s,i,a.left);var d=u(t,o,i,r.left);l.lines.push({start:{targetIsToLeft:c.targetIsToLeft,top:c.top,left:c.left},end:{targetIsToLeft:d.targetIsToLeft,top:d.top,left:d.left},startTable:s,endTable:o});return l}function c(t,n){var i=Number.MAX_VALUE,s=Number.MAX_VALUE,o=0,r=0,a=n.qKeyFields[0];var l={fieldName:a,tables:[],lines:[]};var c;for(c in n.qTables){var d=e.encodeTableName(n.qTables[c]);var h=p(t,d);var f=1===e.getTableElement(d).length?e.getFieldElement(d,a).position().top:h.height;l.tables.push(d);i=Math.min(i,h.top);s=Math.min(s,h.left);o=Math.max(o,h.top+f);r=Math.max(r,h.left+h.width)}l.interception={top:i+(o-i)/2,left:s+(r-s)/2};for(c in n.qTables){var g=e.encodeTableName(n.qTables[c]);l.lines.push({start:{targetIsToLeft:u(t,g,a,l.interception.left).targetIsToLeft,top:u(t,g,a,l.interception.left).top,left:u(t,g,a,l.interception.left).left},end:{top:l.interception.top,left:l.interception.left},startTable:g})}return l}function u(n,i,a,l){if("number"!==typeof l)throw new Error("targetLeftPosition is not a number");var c=45;var u=5;var h=e.getTableElement(i);var f=h.find("li[data-name='"+a.replace(/'/g,"\\'")+"']");var g=o.getCurrentZoomLevel();var v=e.getTableHeader(i).outerHeight();var m=p(n,i);var b=e.getTableElementTop(i);var y=e.getTableHeightByTableName(i);var x=d(n,i,l);var q=x?m.left+m.width-u:m.left+u;var S;if(f.offset()){S=f.offset().top-c+t(".table-container").scrollTop();S=r.getDimensionBasedOnZoom(S,g);S+=f.height()/2}else S=0;var w=y<=v;var C=b+v;(S<C||w)&&(S=b+v/2);var I=b+y-s.OFFSET_BETWEEN_TABLE_BOTTOM_AND_UL_BOTTOM;S>I&&(S=I);return{targetIsToLeft:x,top:S,left:q}}function d(t,e,n){if("number"!==typeof n)throw new Error("targetLeftPosition is not a number");var i=p(t,e);return i.left<n}function p(t,n){var i=t[n];if(!i)throw new Error('Cannot find table "'+n+'" for position.');var s=e.getTableElementTop(n);var o=e.getTableElementLeft(n);var r=e.getTableHeightByTableName(n);var a=e.getTableWidthByTableName(n);return{top:s,left:o,height:r,width:a}}return{convertRawDataToIdealConnectionData:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(766)],s=function(t){function e(e,n){t.getTablesWithCircularReferences(e,function(t){for(var e in n){var i=n[e];for(e in i.lines){var s=i.lines[e];-1===t.indexOf(s.startTable)&&-1===t.indexOf(s.endTable)||(s.isCircular=true)}}})}return{markConnectionAsCircularReferences:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(279)],s=function(t){function e(e,n){t.getTablesAndKeys(e).then(function(e){t.getLooselyCoupledVector(function(t){var i=[];for(var s=0;s<e.qtr.length;s++){var o=t.qv[s];if(0!==o){var r=e.qtr[s].qName;i.push(r)}}n(i)})})}return{getTablesWithCircularReferences:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i;!(i=function(){function t(t){var n,i,s,o,r;for(n in t){var a=[];i=t[n];for(s in i.lines){o=i.lines[s];r=e(i,o);a=a.concat(r)}i.lines=i.lines.concat(a)}}function e(t,e){var n=15,i=7,s=5,o,r,a,l,c,u=[];r=e.start.left+(e.start.targetIsToLeft?n:-n);a=r+(e.start.targetIsToLeft?-s:i);l=e.end.left+(e.end.targetIsToLeft?n:-n);c=l+(e.start.targetIsToLeft?s:-i);o={left:e.end.targetIsToLeft?c:a,top:e.end.targetIsToLeft?e.end.top:e.start.top};u.push({isCircular:e.isCircular,isArm:true,start:{top:e.start.top,left:e.start.left},end:{top:e.start.top,left:r},startTable:e.startTable,endTable:e.endTable,connectionPoint:o});e.start.left=r;if(!t.interception){o={left:e.end.targetIsToLeft?a:c,top:e.end.targetIsToLeft?e.start.top:e.end.top};u.push({isCircular:e.isCircular,isArm:true,start:{top:e.end.top,left:e.end.left},end:{top:e.end.top,left:l},startTable:e.startTable,endTable:e.endTable,connectionPoint:o});e.end.left=l}return u}return{appendArms:t}}.call(e,n,e,t),void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(90),n(127),n(769),n(770),n(94),n(771),n(91),n(354),n(107),n(166),n(317),n(125),n(11),n(206),n(179),n(270),n(161),n(100),n(779),n(99),n(249),n(145),n(268),n(211),n(209),n(263),n(503),n(296),n(298),n(782)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m,b,y,x){var q=l.dimensionTypes,S,w="drilldown",C="single",I,_=false;function D(t,e,n){function i(){var t=n.input.dimension.selectedFields[0];!t||""!==t&&t!==n.input.dimension.name||(n.input.dimension.name="")}t===w&&e===C&&(n.add?i():!_&&n.colorModelWrapper.hasColors()?d.show({text:"library.colors.drilldownwarning"}).then(function(){i()}).catch(function(){n.input.dimension.type=C;T(n)}):i());t===C&&1===n.input.dimension.selectedFields.length&&I.validateFieldsInDimension();if(t===C&&n.input.dimension.selectedFields.length>1){_=true;d.show({text:"Dimensions.Dialog.FieldDeleteWarning"}).then(function(){n.input.dimension.type=C;n.input.dimension.selectedFields.length=1;T(n);_=false;n.colorModelWrapper=new y(n.input.dimension);n.colorModelWrapper.initModel()}).catch(function(){_=false});n.input.dimension.type=e}}function k(t,e,n){if(n.input.dimension.type===C&&1===t.length&&I.isFieldInList(t[0],n.input.dimension.allFields)){var i=m.trimAutoCalendarName(t[0]);var s=m.trimAutoCalendarName(e[0]);(1!==e.length||s!==n.input.dimension.name&&n.input.dimension.name)&&(0!==e.length||n.input.dimension.name)||(n.input.dimension.name=i)}else n.input.dimension.type===C&&n.input.dimension.name===e[0]&&I.isFieldInList(n.input.dimension.name,n.input.dimension.allFields)&&(n.input.dimension.name="")}function T(t){t.input.dimension.allFields.forEach(function(e){e.selected=t.input.dimension.selectedFields.contains(e.qName)})}function E(t){t.input.dimension.allFields.forEach(function(e){e.used=e.used||t.input.dimension.selectedFields.contains(e.qName)})}function A(t){t.input.dimension.allFields.forEach(function(t){t.used=false})}function L(t){return{name:t.input.dimension.name,description:t.input.dimension.description,descriptionExpression:t.input.dimension.descriptionExpression,tags:t.input.dimension.tags,expr:t.input.dimension.selectedFields,type:t.input.dimension.type,baseColor:t.input.dimension.qDim.coloring.baseColor,colorsChanged:true,labelExpression:t.input.dimension.labelExpression}}function M(t,e){t.$watch("input.dimension.type",D);t.$watch("input.dimension.selectedFields",k,true);t.$watch("input.dimension.selectedTable",e.filterFields);t.$watch("input.dimension.name",function(){t.input.dimension.validity.name||e.validateNameField()});t.$watch("input.dimension.selectedFields",function(){t.input.dimension.validity.selectedFields||e.validateFieldsInDimension();t.input.dimension.selectedFields.length?t.input.dimension.fieldName=t.input.dimension.selectedFields[0]:t.input.dimension.fieldName=null},true);t.$watch("search.query",function(){e.filterFields()})}var P={template:i,controller:["$scope","qvConfirmDialog",function(t,i){var s=t.input.tableData,l=t.input.dimension;t.scrollDown=0;t.initColorMap=function(e){t.visible=e};t.theme=b;t.input.dimension.qDim.coloring||(t.input.dimension.qDim.coloring={});Object.defineProperty(t,"color",{get:function e(){return t.theme.resolveColor(t.input.dimension.qDim.coloring.baseColor)},set:function e(n){var i="undefined"!==typeof n.color?n.color:n;var s="undefined"!==typeof n.index?n.index:t.theme.currentPalette.indexOf(n);t.input.dimension.qDim.coloring.baseColor={color:i,index:s}}});l.name=m.trimAutoCalendarName(l.name);l.validity={};l.validity.description=true;l.validity.name=true;l.validity.selectedFields=true;l.validity.labelExpression=true;l.selectedFields=l.qDim.qFieldDefs;l.labelExpression=l.qDim.qLabelExpression;l.descriptionExpression=l.qDim.descriptionExpression;l.type=l.qDim.qGrouping===q.drilldown?w:C;l.stringLimits=c;l.allFields=[];S=a.get("Common.All.Tables");t.allTablesStr=S;l.selectedTable=S;if(!t.add&&l.type===C){t.colorModelWrapper=new y(l);t.colorModelWrapper.initModel()}t.showLabelExpression=function(){return l.type===C};t.search={query:""};t.sortableLists={options:{direction:"vertical",itemSelector:"li:not(.empty-expression-placeholder)"},onBegin:function t(e){d(e)},onEnter:function e(n){p.move(l.selectedFields,t.placeholderIndex,n);t.placeholderIndex=n},onMove:function e(n,i){f();if(null===i||t.placeholderIndex===n)return;n<i&&i--;p.move(l.selectedFields,n,i)},onCancel:function t(){f()},allowDrag:function t(e){if(x.isMouse(e))return!!h(e.target).closest(".field-token").length;return!!h(e.target).closest(".icon-handle").length}};t.placeholderIndex=-1;function d(e){t.placeholderIndex=e;l.selectedFields.splice(e,0,"")}function f(){if(-1!==t.placeholderIndex){l.selectedFields.splice(t.placeholderIndex,1);t.placeholderIndex=-1}}t.$root.$evalAsync(function(){I=r.create(t,u,c);M(t,I)});if(s){l.allFields=s.fields;l.filteredFields=s.fields.slice();l.tables=s.tables;l.tables.unshift(S)}t.cancel=function(){l.updateTags();!t.input.add||I.isEmpty()?t.destroyComponent():i.show({message:a.get("Dimensions.Dialog.CloseWarning"),icon:"cogwheel"}).closed.then(function(e){e&&t.destroyComponent()})};o.StateChanged.bind(t.cancel);t.showAddingFeedback=function(){t.adding=true;setTimeout(function(){t.adding=false;t.added=true;t.$apply()},500)};t.hideAddedFeedback=function(){t.added=false};t.getFieldDisplayName=function(e){var n=e.isDerived&&""===t.search.query?e.qName.substring(e.qName.lastIndexOf(".")+1,e.qName.length):m.trimAutoCalendarName(e.qName);return n};t.getTrimmedName=function(t){return m.trimAutoCalendarName(t)};t.confirm=function(){l.updateTags();l.expr=l.selectedFields;if(I.validate())if(t.input.add){t.input.callback(L(t));E(t);I.clearDialog();T(t);t.showAddingFeedback();t.color="none"}else if(t.colorModelWrapper){t.input.dimension.selectedFields.length>1&&t.colorModelWrapper.clearColors();t.colorModelWrapper.save().then(function(){t.input.callback(L(t));t.destroyComponent()})}else{t.input.callback(L(t));t.destroyComponent()}};t.selectFieldHandler=function(e,i){i.preventDefault();setTimeout(function(){var s=n.elementFromEventPosition(i);var o=s!==i.target;if(o)return;I.selectFieldHandler(e);T(t);t.$apply()},100)};t.removeItemHandler=function(e){l.selectedFields.splice(e,1);t.expressionColor=false;T(t)};function g(e,n){I.updateFieldExpression(e,n);t.expressionColor=true;T(t)}t.editExpressionHandler=function(n,i){n.preventDefault();var s=t,o=s.input.dimension.selectedFields[i]||"";"="!==o.substr(0,1)&&o.length&&(o="="+e.escapeField(o));s.input.expressionInterface(g,i,o)};T(t);A(t)}]};function O(e){var n={title:e.title,tableData:e.tableData,dimension:e.dimension,expressionInterface:e.expressionInterface,add:e.add,callback:e.callback};var i=t.getService("luiDialog").show({template:P.template,controller:P.controller,input:n,dock:"top",closeOnOutside:false,showArrow:false});return i}function F(t){t.title="Dimensions.Dialog.Add.Title";t.add=true;O(t)}function $(t){t.title="Dimensions.Dialog.Edit.Title";O(t)}t.directive("qvFieldList",["$timeout",function(t){return{template:s,link:function e(n,i){var s={minRowHeight:38,maxRowHeight:38,blockSize:60,keepItemsCount:10};var r=new f(t,s);n.scroll=r;var a=new v(r);n.$evalAsync(function(){var t=i.find(".scroll-area");var e=t.controller("qvScrollArea");var s=new g(t,t,".lui-list__item",".lui-list__item:first",".lui-list__item:last");var l=i.find(".qv-scroll-loader").controller("qvScrollLoader");r.initialize(s,a,e,l).then(function(){r.activate();r.updateViewport();n.$watch("input.dimension.filteredFields",function(t){if(!t)return;a.setList(t)})});n.$on("$destroy",function(){r.destroy();o.StateChanged.unbind(n.cancel)})})}}}]);t.directive("qvScroll",[function(){return{link:function t(e,n){e.$watch("scrollDown",function(t){t&&(n[0].scrollTop=n.find(".empty-expression")[0].parentNode.offsetTop)})}}}]);return{add:F,edit:$}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="lui-modal-background"></div>\n<div class="lui-dialog" id="dimensions-dialog" data-tid="dim-dialog">\n\t<div class="dimension-dialog-dimvalcol-wrapper dimension-dialog-container">\n\t\t<lui-tab-view>\n\t\t\t<div ng-show="!input.add" class="lui-dialog__header">\n\t\t\t\t<lui-tabset fill="true">\n\t\t\t\t\t<lui-tab q-title-translation="{{input.title}}" q-translation="{{input.title}}" on-tab-selected="initColorMap(false)" ref="tab1"></lui-tab>\n\t\t\t\t\t<lui-tab q-title-translation="library.colors.valuecolors" q-translation="library.colors.valuecolors" on-tab-selected="initColorMap(true)" ng-class="{\'lui-disabled\' : ((input.dimension.type === \'drilldown\' ) || !!input.add)}" ref="tab2" tid="value-col-tab"></lui-tab>\n\t\t\t\t</lui-tabset>\n\t\t\t</div>\n\t\t\t<div ng-if="input.add" class="lui-dialog__header">\n\t\t\t\t<div class="lui-dialog__title dimension-dialog-add-title" q-translation="{{input.title}}"></div>\n\t\t\t</div>\n\t\t\t<div class="lui-dialog__body">\n\t\t\t\t<lui-tab-content ref="tab1">\n\t\t\t\t\t<div data-dimension-type="{{input.dimension.type}}" class="dimension-type-{{input.dimension.type}}" ng-class="{ \'label-expression\': showLabelExpression() }">\n\t\t\t\t\t\t<div class="dimension-dialog-radio">\n\t\t\t\t\t\t\t<lui-radiobutton class="dimension-dialog-radio-single"\n\t\t\t\t\t\t\t\t\t\t\t x-name="dimension-type"\n\t\t\t\t\t\t\t\t\t\t\t x-model="input.dimension.type"\n\t\t\t\t\t\t\t\t\t\t\t x-value="single">\n\t\t\t\t\t\t\t\t{{ \'Common.Single\' | translate }}\n\t\t\t\t\t\t\t</lui-radiobutton>\n\t\t\t\t\t\t\t<lui-radiobutton class="dimension-dialog-radio-drilldown"\n\t\t\t\t\t\t\t\t\t\t\t x-name="dimension-type"\n\t\t\t\t\t\t\t\t\t\t\t x-model="input.dimension.type"\n\t\t\t\t\t\t\t\t\t\t\t x-value="drilldown">\n\t\t\t\t\t\t\t\t{{ \'Dimensions.Dialog.Type.DrillDown\' | translate }}\n\t\t\t\t\t\t\t</lui-radiobutton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id="dimensions-dialog-content">\n\t\t\t\t\t\t\t\x3c!-- Available fields --\x3e\n\t\t\t\t\t\t\t<section id="dimension-dialog-fields" class="field-box">\n\t\t\t\t\t\t\t\t<h1 q-translation="Assets.FieldsTab.Table"></h1>\n\t\t\t\t\t\t\t\t<lui-select x-model="input.dimension.selectedTable" x-options="table for table in input.dimension.tables"></lui-select>\n\t\t\t\t\t\t\t\t<div class="dimension-dialog-search">\n\t\t\t\t\t\t\t\t\t<qv-assets-search-panel query="search.query" look="light" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div qv-field-list class="dimension-dialog-field-list">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\x3c!-- Selected fields --\x3e\n\t\t\t\t\t\t\t<section class="dimension-editor-form">\n\t\t\t\t\t\t\t\t<section id="dimensions-dialog-field-reference" class="field-box">\n\t\t\t\t\t\t\t\t\t<h1 q-translation="Dimensions.Dialog.FieldReference"></h1>\n\t\t\t\t\t\t\t\t\t<ul qv-scroll id="dimensions-dialog-field-tokens"\n\t\t\t\t\t\t\t\t\t\tng-class="{ invalid: !input.dimension.validity.selectedFields }"\n\t\t\t\t\t\t\t\t\t\tqv-sortable-list="sortableLists">\n\t\t\t\t\t\t\t\t\t\t<li ng-repeat="field in input.dimension.selectedFields" data-id="{{field}}" title="{{field}}" ng-class="{ placeholder: $index === placeholderIndex }">\n\t\t\t\t\t\t\t\t\t\t\t<div class="field-wrapper field-token">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="lui-icon lui-icon--handle" q-title-translation="Common.Move"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="field-text">{{field}}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="lui-icon lui-icon--remove remove" ng-click="removeItemHandler($index)" q-title-translation="Common.Delete"></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="expression-input">\n\t\t\t\t\t\t\t\t\t\t\t\t<button class="lui-fade-button" ng-click="editExpressionHandler($event, $index)" q-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--expression" ng-class="{ \'active\': expressionColor }"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<button class="lui-fade-button empty-expression" ng-click="editExpressionHandler($event)" q-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--expression"></span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\x3c!-- Meta data--\x3e\n\t\t\t\t\t\t\t\t<section class="metadata-form">\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Name --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item">\n\t\t\t\t\t\t\t\t\t\t<label q-translation="metadata.name"></label>\n\t\t\t\t\t\t\t\t\t\t<input class="lui-input" type="text" name="metadata-name" maxlength="255" ng-model="input.dimension.name" id="dimensions-dialog-name" ng-class="{ \'lui-invalid\': !input.dimension.validity.name }" data-tid="dim-dialog-name" >\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Label expression --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item" ng-if="showLabelExpression()">\n\t\t\t\t\t\t\t\t\t\t<qv-expression-input class="metadata-item" expression="input.dimension.labelExpression" is-valid-expression="input.dimension.validity.labelExpression" data-tid="dim-dialog-labelexp"></qv-expression-input>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Description --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item">\n\t\t\t\t\t\t\t\t\t\t<label q-translation="metadata.description"></label>\n\t\t\t\t\t\t\t\t\t\t<qv-description-textarea\n\t\t\t\t\t\t\t\t\t\t\t\tdescription="input.dimension.description"\n\t\t\t\t\t\t\t\t\t\t\t\tdescription-expression="input.dimension.descriptionExpression"\n\t\t\t\t\t\t\t\t\t\t\t\tis-valid="input.dimension.validity.description"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tid="dim-dialog-description">\n\t\t\t\t\t\t\t\t\t\t</qv-description-textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Dimension color --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item">\n\t\t\t\t\t\t\t\t\t\t<label class="qv-metadatalabel" q-translation="library.colors.dimensioncolor"></label>\n\t\t\t\t\t\t\t\t\t\t<qv-color-picker-button-new ng-model="color" palette="theme.currentPalette" extended="true" toggle-open="true"></qv-color-picker-button-new>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Tags --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item tags">\n\t\t\t\t\t\t\t\t\t\t<label q-translation="metadata.tags" class="qv-taglabel"></label>\n\t\t\t\t\t\t\t\t\t\t<qv-tagcloud tags="input.dimension.tags" update="input.dimension.updateTags"></qv-tagcloud>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<lui-button ng-if="input.add" ng-click="confirm()" class="add-dimension-button" autofocus q-translation="Dimensions.Dialog.Add.Button" data-tid="add-dim-button"></lui-button>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</lui-tab-content>\n\t\t\t\t<lui-tab-content ref="tab2">\n\t\t\t\t\t<section class="metadata-form">\n\t\t\t\t\t\t<div class="metadata-item">\n\t\t\t\t\t\t\t<qv-dimension-colors visible="visible" color-model-wrapper="colorModelWrapper"></qv-dimension-colors>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</lui-tab-content>\n\t\t\t</div>\n\t\t</lui-tab-view>\n\t</div>\n\t<div class="lui-dialog__footer">\n\t\t<qv-spinner show="adding"></qv-spinner>\n\t\t<div ng-if="added" qva-outside="hideAddedFeedback()" class="qv-animate dimension-added">\n\t\t\t<i class="lui-icon lui-icon--tick" aria-hidden="false"> </i> <span q-translation="Dimensions.Dialog.DimensionAdded"></span>\n\t\t</div>\n\t\t<lui-button ng-if="input.add" ng-click="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Done" tid="done"></lui-button>\n\t\t<lui-button ng-if="!input.add" ng-click="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Cancel" tid="cancel"></lui-button>\n\t\t<lui-button ng-if="!input.add" ng-click="$event.preventDefault(); confirm()" name="confirm" autofocus q-translation="Common.Save" tid="dim-dlg-save-btn"></lui-button>\n\t</div>\n</div>\n'},function(t,e){t.exports='<qv-scroll-area class="scroll-area" ng-class="{ \'native-scroll-enabled\': !scroll.virtualScrollEnabled }">\n\t<qv-scroll-load-button\n\t\t\tng-show="scroll.loadPrevious"\n\t\t\ton-load="scroll.gotoPreviousBlock()"\n\t\t\ttext="Object.Listbox.LoadPrevious" previous="true"></qv-scroll-load-button>\n\n\t<ul class="lui-list" ng-class="{ \'align-bottom\': scroll.alignBottomAbsolute }">\n\t\t<li ng-repeat="field in scroll.items"\n\t\t\tng-click="selectFieldHandler(field, $event)"\n\t\t\tclass="lui-list__item lui-list__action"\n\t\t\tng-class="{ \'lui-selected\': field.selected, \'derived-field\': (field.isDerived) }">\n\t\t\t<i ng-if="field.isDateField" class="lui-icon lui-icon--calendar lui-list__aside"></i>\n\t\t\t<i ng-if="field.isGeoField" class="lui-icon lui-icon--map lui-list__aside"></i>\n\n\t\t\t<div ng-if="field.dimensionDialogMetaData.icon" class="lui-icon  lui-icon--{{field.dimensionDialogMetaData.icon}} lui-list__aside" q-title-translation="{{::field.dimensionDialogMetaData.iconTooltip}}"></div>\n\t\t\t<div class="lui-list__text lui-list__text--ellipsis" qve-highlight text="{{::getFieldDisplayName(field)}}" query="search.query" title="{{::getFieldDisplayName(field)}}"></div>\n\t\t\t<div ng-if="field.used" class="lui-icon lui-icon--tick lui-list__aside"></div>\n\t\t</li>\n\t</ul>\n\n\t<div ng-if="!scroll.items.length" class="no-hits">\n\t\t<span ng-if="search.query.length" q-translation="Toolbox.Search.Nohits"></span>\n\t\t<span ng-if="!search.query.length" q-translation="library.noitems"></span>\n\t</div>\n\n\t<qv-scroll-load-button\n\t\t\tng-show="scroll.loadNext"\n\t\t\ton-load="scroll.gotoNextBlock()"\n\t\t\ttext="Object.Listbox.LoadMore"></qv-scroll-load-button>\n</qv-scroll-area>\n<qv-scroll-loader></qv-scroll-loader>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(139)],s=function(t,e){var n="single";function i(i,s,o){var r=i.input.dimension;function a(){return s.validateMetadataName(r,o)}function l(){return s.validateFieldsInDimension(r)}function c(){var t=a();var e=l();return t&&e&&r.validity.labelExpression&&r.validity.description}function u(){var t=i.search.query;var n=r.selectedTable;function s(n){return-1!==e.string(n.qName.toLowerCase()).indexOf(e.string(t.toLowerCase()))}n===i.allTablesStr?r.filteredFields=r.allFields.filter(function(t){return s(t)}):r.filteredFields=r.allFields.filter(function(t){return-1!==t.qSrcTables.indexOf(n)&&s(t)})}function d(t,e){var n=0,i=e.length;for(n=0;n<i;n++)if(e[n].qName===t)return true;return false}function p(e,s){s=s.replace(/^=+/,"=");"="!==s.charAt(0)&&(s="="+s);if(void 0!==e)r.selectedFields[e]=s;else{r.selectedFields.push(s);r.type!==n&&t.getService("$timeout")(function(){i.scrollDown+=1})}}function h(e){if(!e||e.selected)return;if(r.type===n)r.selectedFields=[e.qName];else{r.selectedFields.push(e.qName);t.getService("$timeout")(function(){i.scrollDown+=1})}}function f(){r.name="";r.description="";r.tags=[];r.selectedFields=[];delete r.labelExpression}function g(){return""===r.name&&""===r.description&&0===r.tags.length&&0===r.selectedFields.length}return{selectFieldHandler:h,updateFieldExpression:p,isFieldInList:d,clearDialog:f,isEmpty:g,validateNameField:a,validateFieldsInDimension:l,validate:c,filterFields:u}}return{create:function t(e,n,s,o){return new i(e,n,s,o)}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";(function(t){var n,i;!(n=[],i=function(){var t={};Object.defineProperties(t,{ZERO:{value:"zero"},POSITIVE:{value:"positive"}});var e;function n(){var e=document.createElement("div");e.style.width="100px";e.style.overflow="hidden";e.style.opacity="0";e.dir="rtl";var n=document.createElement("div");n.style.width="200px";n.innerHTML="t";e.appendChild(n);var i=document.getElementsByTagName("body")[0];i.appendChild(e);var s=e.scrollLeft;i.removeChild(e);return 0===s?t.ZERO:t.POSITIVE}function i(){e||(e=n());return e}var s={getStartType:i};Object.defineProperty(s,"RTL_SCROLL_START",{value:t});return s}.apply(e,n),void 0!==i&&(t.exports=i))}).call(this,n(55)(t))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89)],s=function(t,e){t.directive("qvScrollLoader",["$animateCss","$timeout",function(t,n){return{restrict:"E",replace:true,template:function t(e,n){var i=n.tag||"div";return"<"+i+' ng-style="loaderStyle" class="qv-scroll-loader qv-animate"><qv-rain ng-if="showRain" show="showRain"></qv-rain></'+i+">"},scope:{},controller:function t(){},link:function i(s,o,r,a){var l,c,u,d=!!r.noRain;s.loaderStyle={width:0,height:0};s.showRain=false;a.fadeIn=function(i,r,a){var u=e();p(i,r,a);d||(l=n(function(){s.showRain=true}));c=t(o,{addClass:"fade"});c.start().done(function(){u.resolve()});return u.promise};a.fadeOut=function(){var n=e();s.showRain=false;u=t(o,{removeClass:"fade"});u.start().done(function(){s.loaderStyle.width=0;s.loaderStyle.height=0;s.$apply();n.resolve()});return n.promise};function p(t,e,n){s.loaderStyle.top=t;s.loaderStyle.left=e;s.loaderStyle.width=n.width;s.loaderStyle.height=n.height}s.$on("$destroy",function(){n.cancel(l)})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(775),n(54)],s=function(t,e,n){t.directive("qvScrollLoadButton",[function(){return{restrict:"E",transclude:true,replace:true,template:function t(n,i){var s=i.tag||"div";return e.replace(/^\s*<div/,"<"+s).replace(/<\/div>\s*$/,"</"+s+">")},scope:{onLoad:"&",text:"@",previous:"=",disabled:"=",scrollApi:"=",watchResize:"=",showButton:"="},link:function t(e,i){e.load=function(){e.onLoad()};var s=i.find(".lui-button");function o(){if(!e.scrollApi)return;var t=e.scrollApi.domApi.$scrollContent[0].clientWidth,n=e.scrollApi.settings.width,i=e.scrollApi.domApi.$element[0].scrollLeft,o=t-n;s[0].style.left=i-o/2+"px"}var r=e.$watch("watchResize",function(t){if("function"===typeof t){t(o);r()}});var a=e.$watch("showButton",function(t){if(t){o();e.scrollApi.domApi.$element.scroll(n.debounce(o,40));a()}})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-scroll-data-load-buttons" ng-class="{ previous: previous }">\n\t<div ng-transclude></div>\n\t<button class="lui-button" qva-activate="load()" ng-disabled="disabled">\n\t\t<p q-translation="{{text}}"></p>\n\t</button>\n</div>\n'},function(t,e){t.exports='<div dir={{direction}}>\n\t<div class="scroll-content" ng-transclude></div>\n\t<qv-scroll-area-affordance x-show="scrollbarY.showMinAffordance" x-direction="\'vertical\'" x-dock="\'min\'" ng-if="scrollbarY.enabled" x-viewport-rect="viewportRect"></qv-scroll-area-affordance>\n\t<qv-scroll-area-affordance x-show="scrollbarX.showMinAffordance" x-direction="\'horizontal\'" x-dock="\'min\'" ng-if="scrollbarX.enabled" x-viewport-rect="viewportRect"></qv-scroll-area-affordance>\n\t<qv-scrollbar x-data="scrollbarY" x-interactive="interactiveY" x-viewport-rect="viewportRect" ng-if="scrollbarY.enabled"></qv-scrollbar>\n\t<qv-scrollbar x-data="scrollbarX" x-interactive="interactiveX" x-viewport-rect="viewportRect" ng-if="scrollbarX.enabled"></qv-scrollbar>\n\t<qv-scroll-area-affordance x-show="scrollbarY.showMaxAffordance" x-direction="\'vertical\'" x-dock="\'max\'" ng-if="scrollbarY.enabled" x-viewport-rect="viewportRect"></qv-scroll-area-affordance>\n\t<qv-scroll-area-affordance x-show="scrollbarX.showMaxAffordance" x-direction="\'horizontal\'" x-dock="\'max\'" ng-if="scrollbarX.enabled" x-viewport-rect="viewportRect"></qv-scroll-area-affordance>\n</div>\n'},function(t,e){t.exports='<div class="scrollbar-animation scrollbar-track"\n\tng-class="data.classList"\n\tng-style="data.style">\n\t<qv-scrollbar-track-hit-area ng-style="trackHitAreaStyle" class="scrollbar-hitarea"></qv-scrollbar-track-hit-area>\n\t<qv-scrollbar-thumb ng-class="{ active: data.active }" class="scrollbar-thumb" ng-style="thumbStyle"></qv-scrollbar-thumb>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvScrollAreaAffordance",function(){return{restrict:"E",template:'<div ng-show="show" class="scroll-affordance" ng-class="[dock,direction]" ng-style="style"></div>',replace:true,require:"^qvScrollArea",scope:{viewportRect:"=",direction:"=",dock:"=",size:"=?",show:"="},link:function t(e){e.size=e.size||18;e.style={};e.updateAffordance=function(){switch(e.direction){case"vertical":e.style.width=e.viewportRect.width+"px";e.style.height=e.size+"px";switch(e.dock){case"min":e.style.left=e.viewportRect.left+"px";e.style.top=e.viewportRect.top+"px";break;case"max":e.style.left=e.viewportRect.left+"px";e.style.top=e.viewportRect.top+e.viewportRect.height-e.size+"px";break;default:throw new Error("Dock "+e.dock+" not supported")}break;case"horizontal":e.style.width=e.size+"px";e.style.height=e.viewportRect.height+"px";switch(e.dock){case"min":e.style.left=e.viewportRect.left+"px";e.style.top=e.viewportRect.top+"px";break;case"max":e.style.left=e.viewportRect.left+e.viewportRect.width-e.size+"px";e.style.top=e.viewportRect.top+"px";break;default:throw new Error("Dock "+e.dock+" not supported")}break;default:throw new Error("Direction "+e.direction+" not supported")}};e.$watch("viewportRect",e.updateAffordance,true)}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(100),n(92),n(174)],s=function(t,e,n){var i=null,s=null,o=null,r=n.extend({init:function e(n){var r=t.getService("qvColorMapService");i=n.qInfo.qId;s=n;o=r.getTemplate()},initModel:function e(){var n=t.getService("qvColorMapService");return n.getColorMap(i).then(function(t){if(t){o=t;void 0===o.autoFill&&(o.autoFill=!(o.single&&false===o.usePal||o.pal))}})},hasColors:function t(){return o&&!!(o.pal&&o.pal.length&&o.pal!==e.dataPalettes[0].propertyValue)||o&&false===o.autoFill||["nul","oth","single"].some(function(t){return o[t]&&"none"!==o[t].color})||o.colors.some(function(t){return"none"!==t.baseColor.color})},save:function e(){var n=t.getService("qvColorMapService");return this.hasColors()?n.setColorMap(i,o):n.deleteColorMap(i).then(function(){o=n.getTemplate();delete s.qDim.coloring.colorMapRef})},clearColors:function e(){var n=t.getService("qvColorMapService");o=n.getTemplate()}});Object.defineProperties(r.prototype,{dimensionName:{get:function t(){return s.qDim.title}},fieldName:{get:function t(){return s.fieldName}},colors:{get:function t(){return o.colors}},nullColor:{get:function t(){return e.resolveColor(o.nul)},set:function t(n){if(n&&(null===o.nul||o.nul.color!==n.color||o.nul.index!==n.index)){n.color||(o.nul={color:n,index:e.currentPalette.indexOf(n)});n.color&&(o.nul={color:n.color,index:n.index})}}},othersColor:{get:function t(){return e.resolveColor(o.oth)},set:function t(n){if(n&&(null===o.oth||o.oth.color!==n.color||o.oth.index!==n.index)){n.color||(o.oth={color:n,index:e.currentPalette.indexOf(n)});n.color&&(o.oth={color:n.color,index:n.index})}}},singleColor:{get:function t(){return e.resolveColor(o.single)},set:function t(n){if(n&&(null===o.single||o.single.color!==n.color||o.single.index!==n.index)){n.color||(o.single={color:n,index:e.currentPalette.indexOf(n)});n.color&&(o.single={color:n.color,index:n.index})}}},palette:{get:function t(){return o.pal?o.pal:e.dataPalettes[0].propertyValue},set:function t(n){o.pal!==n&&(o.pal=n!==e.dataPalettes[0].propertyValue?n:null);this.usePalette=true}},usePalette:{get:function t(){return null===o.usePal||o.usePal},set:function t(e){o.usePal!==e&&null!==e&&(o.usePal=e)}},autoFill:{get:function t(){return o.autoFill},set:function t(e){o.autoFill=e;if(e){o.pal=null;o.usePal=null;this.singleColor="none"}else{this.usePalette=true;"none"===this.singleColor&&(this.singleColor="#4477aa")}}}});return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(303)],s=function(t,e,n){e.service("qvSortableListDragService",[function(){var e;e={$new:function t(e){return{fromItem:void 0,enterItem:void 0,enterList:void 0,toItem:void 0,toList:void 0,offsetX:0,offsetY:0,left:0,top:0,direction:void 0,clientRect:void 0,scroll:{},pageX:0,pageY:0,suppressDragStyle:e.suppressDragStyle||[],zIndex:e.zIndex,enterItemAction:void 0}},startOffset:function t(e,n,i,s,o,r){if(r){var a=i.offset();var l=r.offset();n.left=a.left-l.left;n.top=a.top-l.top}else{var c=i.position();n.left=c.left;n.top=c.top}n.offsetX=n.left-s.x;n.offsetY=n.top-s.y;if(o){n.offsetX=n.offsetX-e[0].scrollLeft;n.offsetY=n.offsetY-e[0].scrollTop}},startData:function t(e,n,i,s){n.scroll.clientRect=e[0].getBoundingClientRect();n.scroll.width=e[0].scrollWidth;n.scroll.height=e[0].scrollHeight;n.clientRect=i[0].getBoundingClientRect();n.minLeft=-n.clientRect.width;n.maxLeft=n.scroll.width;n.minTop=-n.clientRect.height;n.maxTop=n.scroll.height-n.clientRect.height;n.fromItem=i.scope()[s];n.toItem=void 0;n.toList=void 0;n.enterItem=void 0;n.enterList=void 0;n.enterItemAction=void 0},updateDragCoordinates:function t(e,n,i,s){s=s||e.scroll.clientRect;e.pageX=n;e.pageY=i;e.pageX<=s.left?e.pageX=s.left+1:e.pageX>=s.left+s.width&&(e.pageX=s.left+s.width-1);e.pageY<=s.top?e.pageY=s.top+1:e.pageY>=s.top+s.height&&(e.pageY=s.top+s.height-1)},updateEnterItemAction:function t(e,i){var s=i[0].getBoundingClientRect(),o,r,a;switch(e.direction){case"horizontal":o=e.pageX;r=s.left;a=s.width;break;case"vertical":o=e.pageY;r=s.top;a=s.height;break;default:return}o<=r+.5*a?e.enterItemAction=n.ENTER_BEFORE:o>r+.5*a&&(e.enterItemAction=n.ENTER_AFTER)},updateData:function n(i,s,o,r,a,l,c,u,d){var p,h,f,g,v=s.enterItemAction,m=function t(){};function b(t){return t.length&&e.isChild(i[0],t[0])}function y(t){if("function"===typeof a)return a(t);return t.scope()[a]}var x=o[0].style.display;o[0].style.display="none";h=document.elementFromPoint(s.pageX,s.pageY);p=t(h).closest(l);if(b(p))m=function t(n){f=n.scope()[c];e.updateEnterItemAction(s,n);if(s.enterItem!==f||s.enterItem===f&&v!==s.enterItemAction){s.enterList=void 0;s.enterItem=f;u()}};else{p=t(h).closest(r);if(b(p))m=function t(e){g=y(e);if(s.enterList!==g){s.enterList=g;s.enterItem=void 0;d()}};else{s.enterItem=void 0;s.enterList=void 0}}o[0].style.display=x;m(p)},start:function t(e,n,i){i[0].style||(i[0].style="");i[0].style.position="absolute";-1===n.suppressDragStyle.indexOf("width")&&(i[0].style.width=n.clientRect.width+"px");i[0].style.height=n.clientRect.height+"px";i[0].style.pointerEvents="none";i[0].style.left=n.left+"px";i[0].style.top=n.top+"px";i[0].style.zIndex=n.zIndex;i[0].style.boxSizing="border-box"},update:function t(e,n,i,s){var o,r;switch(n.direction){case"horizontal":n.left=s.currentPoint.x+n.offsetX+e[0].scrollLeft;break;case"vertical":n.top=s.currentPoint.y+n.offsetY+e[0].scrollTop;break;default:n.left=s.currentPoint.x+n.offsetX+e[0].scrollLeft;n.top=s.currentPoint.y+n.offsetY+e[0].scrollTop}o=n.left;r=n.top;n.left<n.minLeft?o=n.minLeft:n.left>n.maxLeft&&(o=n.maxLeft);n.top<n.minTop?r=n.minTop:n.top>n.maxTop&&(r=n.maxTop);i[0].style.left=o+"px";i[0].style.top=r+"px"},end:function t(e,n){if(e.stopAutoScrolling){e.stopAutoScrolling();e.stopAutoScrolling=null}n&&n.length&&n[0].removeAttribute("style")},isParent:function t(e,n){return e===n},isChild:function t(n,i){var s=i;if(e.isParent(n,i))return false;while(s){if(s===n)return true;s=s.parentNode}return false},autoScroll:function t(e,n,i,s,o,r,a,l){var c=true,u=0,d=0,p=0,h=0;function f(t,o){u=e.scrollLeft;d=e.scrollTop;if(c){if(t<0&&0===u){c=false;return}if(t>0&&u+parseInt(n.height+.5,10)>=i){c=false;return}if(o<0&&0===d){c=false;return}if(o>0&&d+parseInt(n.height+.5,10)>=s){c=false;return}0!==t&&(e.scrollLeft+=t);0!==o&&(e.scrollTop+=o);r();setTimeout(function(){f(t,o)})}}switch(o.direction){case"horizontal":o.pageX<=n.left+l?p=-a:o.pageX>=n.left+n.width-l&&(p=a);break;case"vertical":o.pageY<=n.top+l?h=-a:o.pageY>=n.top+n.height-l&&(h=a);break;default:o.pageY<=n.top+l?h=-a:o.pageY>=n.top+n.height-l&&(h=a)}0===p&&0===h||f(p,h);if(o.stopAutoScrolling){o.stopAutoScrolling();delete o.stopAutoScrolling}o.stopAutoScrolling=function(){c=false};return o.stopAutoScrolling}};return e}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="assets-search-panel" data-help="Library.Search">\n\n\t<div class="frame">\n\t\t<div class="lui-search" ng-class="{\'lui-search--inverse\': look == \'inverse\', \'assets-search-bright\': look == \'default\'}">\n\t\t\t<span class="lui-search__search-icon"></span>\n\t\t\t<input class="lui-search__input" maxlength="255" ng-model="rawQuery" spellcheck="false" type="text" q-placeholder="Common.Search" ng-trim="true" data-tid="search-input" />\n\t\t\t<button class="asset-search-panel-clear-search  lui-search__clear-button" ng-click="onClear();" ng-hide="!rawQuery" q-title-translation="Common.Clear">\n\t\t\t\t<span class="lui-icon  lui-icon--small  lui-icon--close"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(783),n(100),n(317),n(784),n(787)],s=function(t,e,n,i){t.directive("qvDimensionColors",[function(){return{restrict:"E",template:e,replace:true,scope:{visible:"=",colorModelWrapper:"="},link:function t(e){e.currentPalette=n.currentPalette;e.$watchCollection("[visible, colorModelWrapper.autoFill]",function(){e.colorModelWrapper&&(e.colorSelector=e.colorModelWrapper.usePalette?"schemeSelect":"oneSelect")});e.$watch("colorSelector",function(){e.colorModelWrapper&&(e.colorModelWrapper.usePalette="schemeSelect"===e.colorSelector)},false);e.$on("clearAll",function(){i.show({text:"library.colors.clearcolorsconfirmation"}).then(function(){e.colorModelWrapper.clearColors();e.colorSelector=e.colorModelWrapper.usePalette?"schemeSelect":"oneSelect"})})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-dim-dlg-colors">\n\t<div class="qv-dim-dlg-colors-column qv-dim-dlg-colors-column-left">\n\t\t\t<h2 class="qv-dim-dlg-colors-header">{{colorModelWrapper.dimensionName}}</h2>\n\t\t<div class="qv-dim-dlg-colors-colormap">\n\t\t\t<qv-color-mapper\n\t\t\t\tvisible="visible"\n\t\t\t\tfield-name="colorModelWrapper.fieldName"\n\t\t\t\tdimension-name="colorModelWrapper.dimensionName"\n\t\t\t\tuse-palette="colorModelWrapper.usePalette"\n\t\t\t\tcolor-array="colorModelWrapper.colors"\n\t\t\t\tpalette="colorModelWrapper.palette"\n\t\t\t\tsingle-color="colorModelWrapper.singleColor"\n\t\t\t\thas-colors="colorModelWrapper.hasColors"></qv-color-mapper>\n\t\t</div>\n\t\t<div class="qv-dim-dlg-colors-row qv-dim-dlg-colors-others-row">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.others"></label>\n\t\t\t<div class="qv-dim-dlg-colors-select">\n\t\t\t\t<qv-color-picker-button-new\n\t\t\t\t\t\tng-model="colorModelWrapper.othersColor"\n\t\t\t\t\t\tpalette="currentPalette"\n\t\t\t\t\t\textended="true"\n\t\t\t\t\t\ttoggle-open="true">\n\t\t\t\t</qv-color-picker-button-new>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-dim-dlg-colors-row">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.nullvalues"></label>\n\t\t\t<div class="qv-dim-dlg-colors-select">\n\t\t\t\t<qv-color-picker-button-new\n\t\t\t\t\t\tng-model="colorModelWrapper.nullColor"\n\t\t\t\t\t\tpalette="currentPalette"\n\t\t\t\t\t\textended="true"\n\t\t\t\t\t\ttoggle-open="true">\n\t\t\t\t</qv-color-picker-button-new>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="qv-dim-dlg-colors-column qv-dim-dlg-colors-column-right">\n\t\t<div class="qv-dim-dlg-colors-row"></div>\n\t\t<div class="qv-dim-dlg-colors-row qv-dim-dlg-colors-row-text">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.autofilloption"></label>\n\t\t</div>\n\t\t<div class="qv-dim-dlg-colors-row qv-dim-dlg-colors-auto-fill">\n\t\t\t<h2 ng-show="colorModelWrapper.autoFill" class="qv-dim-dlg-colors-label" q-translation="Common.Auto"></h2>\n\t\t\t<h2 ng-show="!colorModelWrapper.autoFill" class="qv-dim-dlg-colors-label" q-translation="Common.Custom"></h2> \n\t\t\t<lui-switch x-model="colorModelWrapper.autoFill"></lui-switch>\n\t\t</div>\n\t\t<div ng-show="!colorModelWrapper.autoFill" class="qv-dim-dlg-colors-row qv-dim-dlg-colors-row-text">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.autofill"></label>\n\t\t</div>\n\t\t<div ng-show="!colorModelWrapper.autoFill" class="qv-dim-dlg-colors-row">\n\t\t\t<select class="lui-select" ng-model="colorSelector">\n\t\t\t\t<option value="oneSelect" q-translation="library.colors.onecolor"></option>\n\t\t\t\t<option value="schemeSelect" q-translation="library.colors.colorscheme"></option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div ng-show="!colorModelWrapper.autoFill" class="qv-dim-dlg-colors-row" ng-if="colorSelector === \'oneSelect\'">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.color"></label>\n\t\t\t<div class="qv-dim-dlg-colors-select">\n\t\t\t\t<qv-color-picker-button-new\n\t\t\t\t\t\tng-model="colorModelWrapper.singleColor"\n\t\t\t\t\t\tpalette="currentPalette"\n\t\t\t\t\t\textended="true"\n\t\t\t\t\t\tdisable-none="true"\n\t\t\t\t\t\ttoggle-open="true">\n\t\t\t\t</qv-color-picker-button-new>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-show="!colorModelWrapper.autoFill" ng-if="colorSelector === \'schemeSelect\'">\n\t\t\t<div class="qv-dim-dlg-colors-row qv-dim-dlg-colors-row-text">\n\t\t\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.schemeselect"></label>\n\t\t\t</div>\n\t\t\t<div class="qv-dim-dlg-colors-row">\n\t\t\t\t<scheme-input palette="colorModelWrapper.palette"></scheme-input>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(785),n(206),n(179),n(243),n(93),n(141),n(153),n(89),n(100),n(91),n(92),n(288),n(109),n(786),n(97),n(244)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g){var v,m,b,y=1024,x=100,q=37;v=d.extend({init:function t(e,n,i){this.palette=null;this.singleColor=null;this.length=0;if(e||"none"!==i){if(e){var s,o=c.dataPalettes.length;for(s=0;s<o;s++)if(c.dataPalettes[s].propertyValue===n){"pyramid"===c.dataPalettes[s].type?this.palette=c.dataPalettes[s].scale[c.dataPalettes[s].scale.length-1]:this.palette=c.dataPalettes[s].scale;break}this.palette||("pyramid"===c.dataPalettes[0].type?this.palette=c.dataPalettes[0].scale[c.dataPalettes[0].scale.length-1]:this.palette=c.dataPalettes[0].scale)}}else{var r=c.dataPalettes[0];"pyramid"===r.type?this.palette=r.scale[r.scale.length-1]:this.palette=r.scale}if(this.palette){"none"===this.palette[0]&&(this.palette=this.palette.slice(1,this.palette.length));this.length=this.palette.length}else this.singleColor=c.resolveColor(i)},getColor:function t(e){return this.singleColor?this.singleColor:this.palette[e%this.length]}});b=i.extend({getBoundingBox:function t(){return this.$scrollArea[0].getBoundingClientRect()}});function S(t,e,n,i){var s,o=i.length,r=o>0,a={color:null,custom:false};if(r)for(s=0;s<o;s++)if(i[s].value===e){a.color=c.resolveColor(i[s].baseColor);a.custom=true;break}!a.color&&t.colorLookup&&(a.color=t.colorLookup.getColor(n));return a}function w(t){return h.isDark(t)?"#e6e6e6":"#595959"}function C(t){t.nbrCustom=u.get("library.colors.numberofcustomcolors",t.colorArray.length)}m=s.extend({init:function t(e,n){this.$scope=e;this.$timeout=n;this.model=null;this.qWidth=0;this.qHeight=0},initialize:function t(e,n){this.updateSearch=function(){this.model.getLayout().then(function(t){this.showSearch(t.qListObject.qSize.qcy)}.bind(this))}.bind(this);return o.getApp().then(function(t){return r.createTransientField(t,e,I(n)).then(function(t){this.model=t;this.$scope.backendApi=new p(t);t.on("changed",this.updateSearch);this.$scope.$watch("query",function(t,e){if(void 0===t||t===e)return;t.length>0?this.$scope.backendApi.search(t):this.$scope.backendApi.abortSearch()}.bind(this));return t.getLayout().then(function(t){this.qWidth=t.qListObject.qSize.qcx;this.qHeight=t.qListObject.qSize.qcy}.bind(this))}.bind(this))}.bind(this))},show:function t(){var e=this.$scope.items.length,n=0,i=this.$scope.scrollApi.settings.viewportRowCount;i<e&&(i=e);return this.getData(n,i,false,false).then(function(){this.$scope.scrollApi.setTotalRows(this.qHeight);return this.$scope.scrollApi.setVirtualSize(true)}.bind(this))},showSearch:function t(e){var n=0,i=this.$scope.scrollApi.settings.viewportRowCount,s=this.$scope.scrollApi.resetNativeScroll();return this.getData(n,i,false,false).then(function(){s();this.$scope.scrollApi.setTotalRows(e);return this.$scope.scrollApi.setVirtualSize(false)}.bind(this))},getRows:function t(){return this.$scope.items},getRowCount:function t(){return this.$scope.items.length},getFirstElementIndex:function t(){return this.$scope.items[0].dataRowIx},getLastElementIndex:function t(){return this.$scope.items[this.$scope.items.length-1].dataRowIx},onVirtualScroll:function t(e,n){this.$scope.colorPickerCallback&&this.$scope.colorPickerCallback.close&&this.$scope.colorPickerCallback.close();var i=this.getData(e,n,false,false);this.$scope.$digest();return i},onInitialNativeScroll:function t(e,n){this.$scope.colorPickerCallback&&this.$scope.colorPickerCallback.close&&this.$scope.colorPickerCallback.close();return this.$scope.rowLoaderCtrl.fadeIn(0,0,{width:"100%",height:q+"px"}).then(function(){return this.getData(e,n,true,false).then(function(){return this.$scope.rowLoaderCtrl.fadeOut()}.bind(this))}.bind(this))},gotoBlock:function t(e,n,i){var s=this.$scope.scrollApi.getSpliceArgs(),o=this.$scope.items;i&&o.reverse();o.splice.apply(o,s);return this.getData(e,n,true,i)},onGotoNextBlock:function t(e,n){return this.gotoBlock(e,n,false)},onGotoPreviousBlock:function t(e,n){return this.gotoBlock(e,n,true)},onUpdateData:function t(e,n,i){this.updateItems(e,n,i);return this.$timeout(function(){},0,false)},updateItems:function t(e,n,i){var s,o=0,r,a=this.$scope.items,l=e[0].qMatrix,c,u,d,p=this.$scope.colorArray,h=e[0].qArea.qTop,f=e[0].qArea.qHeight;i&&l.reverse();n&&(o=a.length);for(s=0,r=l.length;s<r;++s){a[o+s]||(a[o+s]={});u=a[o+s];c=l[s][0];d=S(this.$scope,c.qText||"",c.qElemNumber,p);u.paletteIcon=d.custom;u.dataRowIx=i?h+f-s-1:h+s;u.enabled=(c.qText||"").length<=y;u.tipText=(c.qText||"").substring(0,y);u.colorStyle={"background-color":d.color,color:w(d.color)};u.color=d.color;u.inEdit=false;this.updateTextItem(u,c)}n||a.splice(s);i&&a.reverse()},updateTextItem:function t(e,n){var i,s=n.qHighlightRanges&&n.qHighlightRanges.qRanges.length||0,o,r,a=n.qText&&n.qText.split("")||[],l=0,c;e.textItems=[];a.length||e.textItems.push({isHighlighted:false,text:""});if(!s){e.textItems.push({isHighlighted:false,text:(n.qText||"").substring(0,y)});return}r=n.qHighlightRanges.qRanges.sort(function(t,e){return t.qCharPos-e.qCharPos});for(i=0;i<s;++i){o=r[i];c=o.qCharPos;c!==l&&e.textItems.push({isHighlighted:false,text:a.splice(0,c-l).join("")});e.textItems.push({isHighlighted:true,text:a.splice(0,o.qCharCount).join("")});l=o.qCharPos+o.qCharCount}a.length&&y-l>0&&e.textItems.push({isHighlighted:false,text:a.splice(0,y-l).join("")})},getData:function t(e,n,i,s){var o={qTop:e,qLeft:0,qWidth:1,qHeight:n};return this.model?this.model.getListObjectData("/qListObjectDef",[o]).then(function(t){return this.onUpdateData(t,i,s)}.bind(this)):l.reject()},release:function t(){if(this.model){this.model.removeListener("changed",this.updateSearch);this.model=null}}});function I(t){var e={title:t,qListObjectDef:{qDef:{}}};a.autoSortDimension(e.qListObjectDef);return e}function _(t){var e;t.mapItem=function(t){e=t;return true};t.openColorPicker=function(){e.inEdit=true};t.closeColorpicker=function(n){var i,s,o;if(n&&n.target.classList.contains("lui-icon--bin")&&"none"!==e.color){s=t.colorArray.length;for(i=0;i<s;i++)if(t.colorArray[i].value===e.tipText){o=S(t,null,e.dataRowIx,t.colorArray).color;t.colorArray.splice(i,1);e.colorStyle={"background-color":o};e.color=o;e.paletteIcon=false;break}}e.inEdit=false;C(t)};t.onColorChange=function(){var n,i=e.tipText,s=null,o=-1,r,a=t.colorArray,l=a.length;for(r=0;r<l;r++)if(a[r].value===i){s=a[r];o=r;break}a.length!==x||"none"===e.color||s||t.blinkWarning();if("none"!==e.color){n={color:e.color.color,index:e.color.index};if(s){s.baseColor=n;e.colorStyle={"background-color":n.color,color:w(n.color)};e.paletteIcon=true}else if(a.length<x){a.push({value:i,baseColor:n});e.colorStyle={"background-color":n.color,color:w(n.color)};e.paletteIcon=true}}else if(o>-1){e.color=S(t,null,e.dataRowIx,a).color;a.splice(o,1);e.colorStyle={"background-color":e.color};e.paletteIcon=false}C(t)}}var D=["$scope",function(t){t.backendApi=null}];t.directive("qvColorMapper",["$timeout","luiPopover",function(t,i){return{restrict:"E",template:e,controller:D,replace:true,require:["qvColorMapper"],scope:{visible:"=",fieldName:"=",dimensionName:"=",usePalette:"=",colorArray:"=",palette:"=",singleColor:"=",hasColors:"="},link:function e(s,o){var r=o.find(".qv-cm-scroll-area"),a=r.controller("qvScrollArea"),l=o.find(".qv-scroll-loader:not(.qv-scroll-row-loader)").controller("qvScrollLoader"),u={blockSize:200,minRowHeight:q,maxRowHeight:q},d,p,h=new b(o,r,"li:not(.qv-cm-load-buttons)","li:not(.qv-cm-load-buttons):first","li:not(.qv-cm-load-buttons):not(.qv-scroll-row-loader):last"),y=true;s.items=[];s.colorPickerCallback={};s.rowLoaderCtrl=r.find(".qv-scroll-row-loader").controller("qvScrollLoader");s.currentPalette=c.currentPalette;s.showOptionsMenu=function(){var t=s,e={template:f,controller:["$scope",function(e){e.enabled=t.hasColors();e.clear=function(){e.enabled&&t.$emit("clearAll")}}],alignTo:o.find(".qv-cm-search")[0],showArrow:false,dock:"bottom"};s.popover=i.show(e);s.popover.closed.then(function(){s.popover=null})};s.warning=false;s.blinkWarning=function(){s.warning=true;t(function(){s.warning=false})};_(s);function x(){if(p&&p.model){s.colorLookup=new v(s.usePalette,s.palette,s.singleColor);p.show()}}function S(){if(s.popover){s.popover.close();s.popover=null}}g.on("start",S);s.$on("$destroy",function(){d&&d.destroy&&d.destroy();s.backendApi&&s.backendApi.abortSearch();p&&p.release();g.off("start",S)});s.$watch("visible",function(e){if(e){if(!y){d.destroy();s.items=[];s.backendApi.abortSearch();p.release()}if(s.fieldName){d=new n(t,u);s.scrollApi=d;p=new m(s,t);d.initialize(h,p,a,l).then(function(){d.activate();d.updateViewport();p.initialize(s.fieldName,s.dimensionName).then(function(){x();y=false})});C(s)}}},false);s.$watchCollection("[palette, singleColor, usePalette, colorArray]",function(){x()})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-color-mapper">\n\t<div qva-direction x-dir-setting="\'ltr\'" class="qv-cm-search">\n\t\t<lui-search class="lui-search__input" query="query" placeholder="Common.Search" />\n\t\t<button ng-class="{\'lui-active\' : popover}" class="lui-fade-button lui-fade-button--large" qva-activate="showOptionsMenu()" tid="clear-all-btn">\n\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--large lui-icon--more"></span>\n\t\t</button>\n\t</div>\n\t<div class="qv-cm-wrapper">\n\t\t<qv-scroll-area class="qv-cm-scroll-area qv-animate" ng-class="{ \'qv-color-mapper-interactive\': !scrollApi.virtualScrollEnabled }" x-direction="\'ltr\'">\n\t\t\t<ul class="qv-cm-color-mapper lui-list" ng-class="{ \'align-bottom\': scrollApi.alignBottomAbsolute }" qva-direction x-dir-setting="\'ltr\'">\n\t\t\t\t<qv-scroll-load-button tag="li" class="qv-cm-load-buttons" ng-show="scrollApi.loadPrevious" on-load="scrollApi.gotoPreviousBlock()" text="Object.Listbox.LoadPrevious" previous="true">\n\t\t\t\t</qv-scroll-load-button>\n\n\t\t\t\t<li ng-repeat="item in items" class="lui-list__item" class="lui-list__item"\n\t\t\t\t\tqv-color-picker-custom-new\n\t\t\t\t\tng-class="{\'lui-active\' : item.inEdit, \'lui-disabled\': !item.enabled}"\n\t\t\t\t\tng-model="item.color"\n\t\t\t\t\tkeep-open="true"\n\t\t\t\t\tdisable-none="false"\n\t\t\t\t\ton-change="onColorChange"\n\t\t\t\t\tpalette="currentPalette"\n\t\t\t\t\textended="true"\n\t\t\t\t\tdock="\'right\'",\n\t\t\t\t\tcallback="colorPickerCallback"\n\t\t\t\t\tqva-activate="item.enabled && mapItem(item) && onClick($event)"\n\t\t\t\t\ton-open="openColorPicker"\n\t\t\t\t\ton-close="closeColorpicker">\n\n\t\t\t\t\t<span class="lui-list__text qv-cm-list-text" ng-attr-title="{{item.tipText}}">\n\t\t\t\t\t\t<span ng-repeat="textItem in item.textItems" ng-class="{ highlighted: textItem.isHighlighted }" ng-bind="textItem.text"></span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="lui-list__aside">\n\t\t\t\t\t\t<div class="qv-cm-color-wrap">\n\t\t\t\t\t\t\t<span ng-if="!item.paletteIcon" class="qv-cm-color" ng-class="{\'qv-cm-narrow\' : !item.inEdit, \'qv-cm-wide\': item.inEdit}" ng-style="item.colorStyle"></span>\n\t\t\t\t\t\t\t<span ng-if="item.paletteIcon" class="qv-cm-color qv-cm-wide lui-icon" ng-class="{\'lui-icon--palette\' : !item.inEdit, \'lui-icon--bin\': item.inEdit}" ng-style="item.colorStyle"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\n\t\t\t\t<qv-scroll-loader tag="li" class="qv-scroll-row-loader"></qv-scroll-loader>\n\t\t\t\t<qv-scroll-load-button tag="li" class="qv-cm-load-buttons" ng-show="scrollApi.loadNext" on-load="scrollApi.gotoNextBlock()"\n\t\t\t\t\t\t\t\t\t\ttext="Object.Listbox.LoadMore"></qv-scroll-load-button>\n\t\t\t</ul>\n\t\t</qv-scroll-area>\n\t\t<qv-scroll-loader></qv-scroll-loader>\n\t</div>\n\t<div class="qv-cm-nbr-custom">\n\t\t<div class="qv-cm-custom-wrapper" ng-class="{\'qv-cm-animate-in qv-cm-color-limit-feedback\' : warning, \'qv-cm-animate-out\' : !warning }">\n\t\t\t<span ng-show="colorArray.length === 100" class="lui-icon lui-icon--warning lui-text-warning"></span>\n\t\t\t<span class="lui-text-default" ng-show="colorArray.length > 0" ng-class="{\'lui-text-warning\': colorArray.length === 100}">{{nbrCustom}}</span>\n\t\t\t<span class="lui-text-default" ng-show="colorArray.length === 0" q-translation="library.colors.clickonvalue"></span>\n\t\t</div>\n\t</div>\n</div>\n\n'},function(t,e){t.exports='<lui-popover style="margin-top: -10px">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action" ng-class="{\'lui-disabled\': !enabled}" qva-activate="clear()">\n\t\t\t\t<div class="lui-list__text lui-list__text--ellipsis">\n\t\t\t\t\t<span q-translation="library.colors.clear"></span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(788),n(789),n(91)],s=function(t,e,n,i){t.directive("schemeInput",function(){var t={borderColor:"#B3B3B3"};var s={borderColor:"#595959"};return{restrict:"E",replace:true,template:e,scope:{palette:"="},link:function e(o,r){o.schemeInputLogic=n.create(o.palette);o.colorBarHeight="7px";o.expanded=false;o.buttonHeight="36px";o.expandedBorder=t;o.pickScheme=function(t,e){o.schemeInputLogic.pickScheme(e);o.palette=e.propertyValue};o.getPaletteViewWidth=function(t){var e=o.schemeInputLogic.getNumberOfPaletteColors(t);return.85*r.width()/e+"px"};o.onClickSchemePicker=function(){o.expanded=!o.expanded;if(o.expanded&&o.schemeInputLogic.getPalettes().length>5){o.buttonHeight="209px";o.expandedBorder=s}else if(o.expanded){o.buttonHeight=38*o.schemeInputLogic.getPalettes().length+"px";o.expandedBorder=s}else{o.buttonHeight="36px";o.expandedBorder=t}};o.close=function(){o.expanded=false;o.buttonHeight="36px";o.expandedBorder=t};o.activateHover=function(){o.expandedBorder=s};o.disableHover=function(){o.expanded||(o.expandedBorder=t)};o.getPaletteName=function(t,e){var n=i.get(t);n||(n=e);return n};o.$watch("palette",function(){if(o.palette&&o.schemeInputLogic.getCurrentPalette().propertyValue!==o.palette){var t=o.schemeInputLogic.getThemePalettes().filter(function(t){return t.propertyValue==o.palette})[0];t||(t=o.schemeInputLogic.getThemePalettes()[0]);o.schemeInputLogic.pickScheme(t)}},true)}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div qv-enter="onClick($event)" class="lui-popover custom-dimensions-input-button" ng-class="{\'active\':active}" ng-style=" {\'height\' : buttonHeight, \'border-color\' : expandedBorder.borderColor} " ng-mouseenter="activateHover()" ng-mouseleave="disableHover()" qva-outside="close()">\n\t<div ng-if="!expanded" qva-activate="onClickSchemePicker($event)" class="custom-dimensions-selector-wrapper">\n\t\t<span class="lui-list__text palette-text">{{getPaletteName(schemeInputLogic.getCurrentPalette().translation, schemeInputLogic.getCurrentPalette().name)}}</span>\n\t\t<span class="lui-icon lui-icon--small lui-icon--triangle-bottom" style="float: right; margin-top: 7px; margin-right: 8px">\n\t\t</span>\n\t\t<div class="palette-color-wrapper">\n\t\t\t<div class="palette-color" ng-repeat="paletteColor in schemeInputLogic.getPaletteScale(schemeInputLogic.getCurrentPalette()) track by $index">\n\t\t\t\t<div ng-style="{\'background-color\' : schemeInputLogic.getPaletteColor(schemeInputLogic.getCurrentPalette(), $index), \'width\' : getPaletteViewWidth(schemeInputLogic.getCurrentPalette()), \'height\' : colorBarHeight}"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div ng-if="expanded" qva-activate="onClickSchemePicker($event)" class="custom-dimensions-selector-wrapper">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action custom-dimensions-palette-select" q-title-translation="{{schemeInputLogic.getCurrentPalette().translation}}" qva-activate="pickScheme($event, schemeInputLogic.getCurrentPalette())">\n\t\t\t\t<span class="lui-list__text palette-text">{{getPaletteName(schemeInputLogic.getCurrentPalette().translation, schemeInputLogic.getCurrentPalette().name)}}</span>\n\t\t\t\t<div class="palette-color-wrapper">\n\t\t\t\t\t<div class="palette-color" ng-repeat="paletteColor in schemeInputLogic.getPaletteScale(schemeInputLogic.getCurrentPalette()) track by $index">\n\t\t\t\t\t\t<div ng-style="{\'background-color\' : schemeInputLogic.getPaletteColor(schemeInputLogic.getCurrentPalette(), $index), \'width\' : getPaletteViewWidth(schemeInputLogic.getCurrentPalette()), \'height\' : colorBarHeight}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action custom-dimensions-palette-select" ng-repeat=" schemePalette in schemeInputLogic.getPalettes()" ng-if="schemePalette != schemeInputLogic.getCurrentPalette()" q-title-translation="{{schemePalette.translation}}" qva-activate="pickScheme($event, schemePalette)">\n\t\t\t\t<span class="lui-list__text palette-text">{{getPaletteName(schemePalette.translation, schemePalette.name)}}</span>\n\t\t\t\t<div class="palette-color-wrapper">\n\t\t\t\t\t<div class="palette-color" ng-repeat="paletteColor in schemeInputLogic.getPaletteScale(schemePalette) track by $index">\n\t\t\t\t\t\t<div ng-style="{\'background-color\' : schemeInputLogic.getPaletteColor(schemePalette, $index), \'width\' : getPaletteViewWidth(schemePalette), \'height\' : colorBarHeight}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(100)],s=function(t){function e(e){var n=s();var i=n.filter(function(t){return t.propertyValue==e})[0];i||(i=n[0]);function s(){var e=[];t.dataPalettes.forEach(function(t){"true"!==t.disabled&&e.push(t)});return e}function o(t,e){if("pyramid"===t.type)return t.scale[t.scale.length-1][e];return t.scale[e]}function r(t,e){var n;n="pyramid"===t.type?t.scale[t.scale.length-1].length:t.scale.length;return.85*e.width()/n+"px"}function a(t){if("pyramid"===t.type)return t.scale[t.scale.length-1];return t.scale}function l(t){return"pyramid"===t.type?t.scale[t.scale.length-1].length:t.scale.length}function c(t){var e=0;for(;e<t.length;e++)if(t[e].propertyValue===i.pal){i=t[e];break}}function u(t){i=t;t.pal=i.propertyValue}function d(){return i}function p(){return n}return{getThemePalettes:s,getPaletteColor:o,getPaletteViewWidth:r,getPaletteScale:a,getNumberOfPaletteColors:l,updatePalette:c,pickScheme:u,getCurrentPalette:d,getPalettes:p}}return{create:function t(n){return new e(n)}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){function e(e){t.isDirectDiscoveryField(e)&&(e.dimensionDialogMetaData={icon:"direct-discovery",iconTooltip:t.getTypeTranslationKey(e.qTags)})}return{addIconMetaData:e}}return{create:function e(n){return new t(n)}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(792)],s=function(t,e){function n(n){var i={template:e,controller:["$scope",function(t){t.input=n}],dock:"right",alignTo:n.alignTo[0]};return t.getService("luiPopover").show(i)}return{show:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover id="library-preview" class="field-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.displayName ? input.displayName : input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<div ng-if="input.sourceField">\n\t\t\t<h2><span q-translation="library.preview.header.source-field">&nbsp;</span></h2>\n\n\t\t\t<p class="sourcefield">{{input.sourceField}}</p>\n\t\t</div>\n\n\t\t<h2><span q-translation="library.preview.header.table">&nbsp;</span></h2>\n\t\t<ul class="tables">\n\t\t\t<li ng-repeat="table in input.tables">{{table}}</li>\n\t\t</ul>\n\t\t<h2 ng-if="input.typeTranslationKey"><span q-translation="assets.preview.header.fieldtype">&nbsp;</span></h2>\n\n\t\t<p ng-if="input.typeTranslationKey" class="field-type" q-translation="{{input.typeTranslationKey}}">&nbsp;</p>\n\n\t\t<div ng-if="input.calendarTemplateName">\n\t\t\t<h2><span q-translation="{{input.isDerivedFromDate ? \'library.preview.header.calendar-template\' : \'library.preview.header.field-template\'}}">&nbsp;</span></h2>\n\n\t\t\t<p class="calendar-template">{{input.calendarTemplateName}}</p>\n\t\t</div>\n\n\t\t<div ng-if="input.derivedCalendars && input.derivedCalendars.length > 0">\n\t\t\t<h2><span q-translation="{{input.isDateField ? \'library.preview.header.applied-calendars\' : \'library.preview.header.applied-field-templates\'}}">&nbsp;</span></h2>\n\t\t\t<ul class="tables">\n\t\t\t\t<li ng-repeat="cal in input.derivedCalendars">{{cal}}</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div ng-if="input.isSingleSelectSupported && input.alwaysOneSelected">\n\t\t\t<h2 q-translation="library.preview.singleSelect.header">&nbsp;</h2>\n\t\t\t<ul class="tables">\n\t\t\t\t<li ng-if="input.alwaysOneSelected" q-translation="Common.Enabled">&nbsp;</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(10),n(91),n(126),n(794),n(795)],s=function(t,e,n,i){var s={template:i,controller:["$scope","$q","CalendarMeasuresDialogService",function(i,s,o){i.previewsLoading=false;i.measuresCreating=false;i.aggregations=["Sum","Count","Avg","Min","Max"];i.measureTypes=[];i.viewModel={previewsExpanded:false};i.previewSelectionModel={};i.selectionModel={selectedAggregation:"Sum",selectedDate:void 0,selectedMeasure:void 0,selectedMeasureType:void 0};function r(){var t=o.getDateFields().then(function(t){i.dateFields=t;i.selectedField.isDateField?i.selectionModel.selectedDate=i.dateFields.filter(function(t){return t.qName===i.selectedField.name})[0]:i.dateFields.length?i.selectionModel.selectedDate=i.dateFields[0]:i.missingStateErrorMessage=e.get("Dialog.CalendarFlags.ErrorMessage.NoDateField")});var n=o.getMeasureFields().then(function(t){i.measures=t;i.selectedField.isDateField?i.measures.length?i.selectionModel.selectedMeasure=i.measures[0]:i.missingStateErrorMessage=e.get("Dialog.CalendarFlags.ErrorMessage.NoFields"):i.selectionModel.selectedMeasure=i.measures.filter(function(t){return t.qName===i.selectedField.name})[0]});s.all([t,n]).then(function(){i.initialized=true})}function a(){return o.getAvailableMeasureTypes(i.selectionModel.selectedDate.qName,i.selectionModel.selectedMeasure.qName,i.selectionModel.selectedAggregation).then(function(t){i.measureTypes=[];Object.keys(t).forEach(function(n){t[n]&&i.measureTypes.push({name:e.get("Dialog.CalendarFlags."+n),value:n})});if(i.measureTypes.length>0)if(i.selectionModel.selectedMeasureType){var n=i.measureTypes.filter(function(t){return t.value===i.selectionModel.selectedMeasureType.value});n.length>0&&(i.selectionModel.selectedMeasureType=n[0])}else i.selectionModel.selectedMeasureType=i.measureTypes[0];else i.selectionModel.selectedMeasureType=void 0})}i.createMasterMeasures=function(){var t=i.previewMeasures.filter(function(t){return i.previewSelectionModel[t.name].selected&&!t.alreadyExists});i.measuresCreating=true;o.createMasterItems(i.selectionModel.selectedDate.qName,i.selectionModel.selectedMeasure.qName,i.selectionModel.selectedAggregation,i.selectionModel.selectedMeasureType.value,t).finally(function(){i.measuresCreating=false;l();i.assets&&i.assets.openSection(n.sectionIDs.measure)})};i.isAddToMasterLibraryEnabled=function(){return!i.measuresCreating&&i.previewMeasures&&i.previewMeasures.some(function(t){return i.previewSelectionModel[t.name].selected&&!t.alreadyExists})};i.$watch("selectionModel",function(n,s){if(i.missingStateErrorMessage||!i.initialized)return;if(t.equals(n,s))return;var o=n.selectedMeasureType;a().then(function(){if(0===i.measureTypes.length){i.previewMeasures=[];i.inlineErrorMessage=e.get("Dialog.CalendarFlags.ErrorMessage.NoTimeCycleFlags")}else o&&l()})},true);var l=function t(){i.previewsLoading=true;o.getMasterMeasures(i.selectionModel.selectedDate.qName,i.selectionModel.selectedMeasure.qName,i.selectionModel.selectedAggregation,i.selectionModel.selectedMeasureType.value).then(function(t){i.previewMeasures=t.measures;i.previewMeasures.forEach(function(t){i.previewSelectionModel[t.name]||(i.previewSelectionModel[t.name]={selected:true})})}).finally(function(){i.previewsLoading=false})};var c=function t(){i.destroyComponent()};i.cancel=function(){c()};i.addToMaster=function(){c()};r()}]};return{component:s}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-dialog id="calendar-measures-dialog">\n\t<lui-dialog-header q-translation="Dialog.CalendarFlags.Title"></lui-dialog-header>\n\t<lui-dialog-body>\n\n\t\t<qv-spinner class="spinner" show="!initialized" show-delay="100" show-for-at-least="300" spinner-height="250px" spinner-width=250px" center-in-parent="true"></qv-spinner>\n\n\t\t<div class="body error-message" ng-if="initialized && missingStateErrorMessage">\n\t\t\t{{missingStateErrorMessage}}\n\t\t</div>\n\n\t\t<div class="body" ng-if="initialized && !missingStateErrorMessage">\n\n\t\t\t<div class="left-side">\n\t\t\t\t<div class="section">\n\t\t\t\t\t<label class="lui-label" q-translation="Dialog.CalendarFlags.DateField"></label>\n\t\t\t\t\t<lui-select x-model="selectionModel.selectedDate" x-options="field as field.qName for field in dateFields"></lui-select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="section">\n\t\t\t\t\t<label class="lui-label" q-translation="Dialog.CalendarFlags.AggregatedField"></label>\n\t\t\t\t\t<lui-select x-model="selectionModel.selectedMeasure" x-options="field as field.qName for field in measures">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="section">\n\t\t\t\t\t<label class="lui-label" q-translation="Dialog.CalendarFlags.AggregationField"></label>\n\t\t\t\t\t<lui-select x-model="selectionModel.selectedAggregation" x-options="aggregation as aggregation for aggregation in aggregations">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="section">\n\t\t\t\t\t<label class="lui-label" q-translation="Dialog.CalendarFlags.TimeCycleField"></label>\n\t\t\t\t\t<lui-select x-model="selectionModel.selectedMeasureType" x-disabled="measureTypes.length === 0" x-options="measureType as measureType.name for measureType in measureTypes">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="right-side">\n\n\t\t\t\t<div class="details-toggle-container">\n\t\t\t\t\t<div class="details-toggle-container-left-side">\n\t\t\t\t\t\t<div class="preview-title" q-translation="Dialog.CalendarFlags.PreviewMeasuresTitle"></div>\n\t\t\t\t\t\t<div class="details-text" ng-if="!viewModel.previewsExpanded" q-translation="Dialog.CalendarFlags.PreviewDetailsOff"></div>\n\t\t\t\t\t\t<div class="details-text" ng-if="viewModel.previewsExpanded" q-translation="Dialog.CalendarFlags.PreviewDetailsOn"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<lui-switch x-model="viewModel.previewsExpanded"></lui-switch>\n\t\t\t\t</div>\n\n\t\t\t\t<div style="position: relative; flex: 1">\n\t\t\t\t\t<qv-spinner class="spinner" show="previewsLoading || measuresCreating" show-delay="200" show-for-at-least="1000" spinner-height="150px" spinner-width="150px" center-in-parent="true"></qv-spinner>\n\n\t\t\t\t\t<div class="measure-container qv-animate" ng-hide="previewsLoading">\n\t\t\t\t\t\t<div ng-repeat="measure in previewMeasures" class="measure">\n\t\t\t\t\t\t\t<lui-checkbox x-model="previewSelectionModel[measure.name].selected" ng-if="!measure.alreadyExists" title="{{measure.name}}">{{measure.name}}</lui-checkbox>\n\t\t\t\t\t\t\t<div class="label" ng-if="measure.alreadyExists" title="{{measure.name}}">\n\t\t\t\t\t\t\t\t<span class="lui-icon  lui-icon--tick checkmark"></span>\n\t\t\t\t\t\t\t\t<lui-label>{{measure.name}}</lui-label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input class="lui-input measure-preview" ng-model="measure.expr" readonly="true" title="{{measure.expr}}" ng-if="viewModel.previewsExpanded"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div ng-if="inlineErrorMessage && previewMeasures.length === 0" class="inline-error">\n\t\t\t\t\t\t{{inlineErrorMessage}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\n\n\n\t\t\t\t<lui-button class="create-measure-button" ng-click="createMasterMeasures()" q-translation="Dialog.CalendarFlags.SaveToMasterItems" tid="add_to_master" ng-disabled="!isAddToMasterLibraryEnabled()"></lui-button>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="cancel()" q-translation="Common.Close" tid="close"></lui-button>\n\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(93),n(144),n(183),n(90),n(182)],s=function(t,e,n,i,s,o){t.service("CalendarMeasuresDialogService",[function(){var t={};var r;function a(){r||(r=i.getApi("api/dataprepservice/v1","openapi",void 0,void 0,void 0,void 0,o.getServerNodeId()));return r}function l(t,e,n,i,o,r){return a().then(function(a){if(a&&a.apis.assets)return a.apis.assets.generateAssets({appId:s.getParameterByName("app"),body:{topic:"timeCycleAnalysis",calendarField:t,measure:{field:e,aggr:n},addOnly:r,addToLibrary:o,assetTypes:i}}).then(function(t){return t.body.response})})}t.getAvailableMeasureTypes=function(t,e,n){return l(t,e,n,["measuresYearly","measuresMonthly","measuresQuarterly","measuresWeekly"],false).then(function(t){return t.hasPrerequisites})};t.getMasterMeasures=function(t,e,n,i){return l(t,e,n,[i],false)};t.createMasterItems=function(t,e,n,i,s){return l(t,e,n,[i],true,s)};function c(){return e.getApp().then(function(t){return t.getFieldList().then(function(t){return n.expand(t)})})}t.getDateFields=function(){return c().then(function(t){return t.filter(function(t){return t.qDerivedFieldData})})};t.getMeasureFields=function(){return c().then(function(t){return t.filter(function(t){return!t.qDerivedFieldData&&!t.isDerivedFromDate})})};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(797),n(798),n(799),n(94),n(91),n(145),n(211),n(241)],s=function(t,e,n,i,s,o){var r;var a=function t(e){function a(){e.singleSelectNotEditable=false;e.singleSelectTitle=o.get("field.settings.dialog.singleSelect.label");e.confirmLabel=e.confirmLabel||"Common.Save";e.fieldSettingsTitle=o.get("field.settings.dialog.title");i.fetchAndExtendSettings(e.app,e.fieldName,e.fieldSettings);e.singleSelectErrorTranslation=null}function l(t,i){e.fieldSettings.alwaysOneSelected=!i;e.singleSelectNotEditable=true;var s=(i?"A":"D")+"-"+t;var r=n.getErrorCodeTranslation(s);e.singleSelectErrorTranslation=r;e.singleSelectTitle=o.get(r)}a();e.cancel=function(){r.closed.then(function(){e.destroyComponent()});r.close()};e.confirm=function(){if(n.validate(e)){var t=n.getFormData(e);var s=t.alwaysOneSelected;i.applySingleSelect(e.app,e.fieldName,s).then(function(t){t.success?e.app.global.getConfiguration().then(function(t){t.qFeatures.qAutoSave&&e.app.doSave();r.close()}):l(t.code,s)})}};s.StateChanged.bind(e.cancel);e.$on("$destroy",function(){s.StateChanged.unbind(e.cancel)})};var l={scope:{},template:e,controller:["$scope",a]};function c(e){var n={title:e.name,fieldName:e.name,app:e.app,fieldSettings:{description:e.description,descriptionExpression:e.descriptionExpression,alwaysOneSelected:e.alwaysOneSelected,preSelectExpression:e.preSelectExpression}};r=t.getService("luiDialog").show({template:l.template,controller:l.controller,input:n,closeOnOutside:false,showArrow:false});return r}return{show:c,controller:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="lui-modal-background"></div>\n\n<div class="lui-dialog field-settings-dialog-wrapper" name="fieldSettingsDialog" style="width: 440px;" data-tid="field-settings-dialog">\n\t<div class="lui-dialog__header">\n\t\t<div class="lui-dialog__title">{{fieldSettingsTitle}}</div>\n\t</div>\n\t<div class="lui-dialog__body">\n\n\t\t\x3c!-- Description - TODO: To be added later --\x3e\n\t\t\x3c!-- <div class="field-settings-component">\n\t\t\t<label q-translation="metadata.description" class="qv-metadatalabel">Description:</label>\n\t\t\t<qv-description-textarea\n\t\t\t\tdescription="fieldSettings.description"\n\t\t\t\tdescription-expression="fieldSettings.descriptionExpression"\n\t\t\t\tng-disabled="true"\n\t\t\t\tis-valid="validity.descriptionExpression">\n\t\t\t</qv-description-textarea>\n\t\t</div> --\x3e\n\n\t\t\x3c!-- TODO: Checkbox with Always-one-selected --\x3e\n\t\t\n\t\t<div class="field-settings-component">\n\t\t\t<h1>{{fieldName}}</h1>\n\t\t\t<label class="lui-checkbox" title="{{singleSelectTitle}}">\n\t\t\t\t<input class="lui-checkbox__input" type="checkbox" ng-model="fieldSettings.alwaysOneSelected" tid="always-one-selected" ng-change="change()" ng-disabled="readOnly || fieldSettings.isFetching || singleSelectNotEditable">\n\t\t\t\t<div class="lui-checkbox__check-wrap">\n\t\t\t\t\t<span class="lui-checkbox__check"></span>\n\t\t\t\t\t<span class="lui-checkbox__check-text label" \n\t\t\t\t\t\tng-disabled="readOnly" \n\t\t\t\t\t\tq-translation="field.settings.dialog.singleSelect.label">\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t\t<div ng-if="singleSelectErrorTranslation" class="error">\n\t\t\t\t<span q-translation="{{singleSelectErrorTranslation}}"></span>\n\t\t\t</div>\n\t\t\t<div class="hint" q-translation="field.settings.dialog.singleSelect.disclaimer"></div>\n\n\t\t</div>\n\n\t\t\x3c!-- Pre-selection expression - TODO: To be added later --\x3e\n\t\t\x3c!-- <div class="field-settings-component">\n\t\t\t<qv-expression-input ng-disabled="true" label-translation="Pre-Selection" expression="fieldSettings.preSelectExpression" is-valid-expression="validity.preSelectExpression"></qv-expression-input>\n\t\t</div> --\x3e\n\n\t</div>\n\t<div class="lui-dialog__footer">\n\t\t<button class="lui-button close-button" qva-activate="cancel()" name="cancelButton" q-translation="Common.Cancel" data-tid="close-btn"></button>\n\t\t<button class="lui-button close-button" qva-activate="$event.preventDefault(); confirm()" name="confirmButton" q-translation="{{confirmLabel}}" data-tid="create-btn" ng-disabled="singleSelectNotEditable"></button>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){return{validate:t,getFormData:e,getErrorCodeTranslation:n};function t(){return true}function e(t){return{alwaysOneSelected:t.fieldSettings.alwaysOneSelected}}function n(t){var e={1:"field.settings.dialog.singleSelect.error.unknown","A-2":"field.settings.dialog.singleSelect.error.activateNoSelectableValue","A-3":"field.settings.dialog.singleSelect.error.activateSelectableValueFailed","A-4":"field.settings.dialog.singleSelect.error.activateSetFieldProps","D-4":"field.settings.dialog.singleSelect.error.deactivateSetFieldProps"};var n=e["1"];return e[t]||n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(142),n(141),n(90),n(89),n(49)],s=function(t,e,n,i,s){var o={ERROR_NO_SELECTABLE_VALUE:2,ERROR_COULD_NOT_SELECT_VALUE:3,ERROR_COULD_NOT_SET_FIELD_PROPS:4};return{applySingleSelect:f,fetchAndExtendSettings:a};function r(e,n){var i={};return t.isSingleSelect(e,n).then(function(t){i.alwaysOneSelected=t;return i})}function a(t,e,i){i.isFetching=true;return r(t,e).then(function(t){return n.extend(true,i,t)}).finally(function(){delete i.isFetching})}function l(t,n,i){var s=1;return e.createTransientField(t.app,n,{qStateName:i}).then(function(t){var e="/qListObjectDef";var n={qTop:0,qLeft:0,qWidth:1,qHeight:s};return t.getListObjectData(e,[n]).then(function(t){var e=t[0].qMatrix;var n=e[0][0];return n.qElemNumber})})}function c(t,e,n){var i=true;return l(t,e,n).then(function(e){if("number"===typeof e)return t.clear().then(function(){return t.lowLevelSelect([e],false,i).then(function(t){if(!t)return{success:false,code:o.ERROR_COULD_NOT_SELECT_VALUE};return{success:true}}).catch(function(){return{success:false,code:o.ERROR_COULD_NOT_SELECT_VALUE}})});return{success:false,code:o.ERROR_NO_SELECTABLE_VALUE}}).catch(function(){return{success:false,code:o.ERROR_NO_SELECTABLE_VALUE}})}function u(t,e){return t.setNxProperties(e).then(function(){return{success:true}}).catch(function(){return{success:false,code:o.ERROR_COULD_NOT_SET_FIELD_PROPS}})}function d(t){return t.getAppLayout().then(function(t){return["$"].concat(t.qStateNames)})}function p(t){t=t||[];var e=t.reduce(function(t,e){var n=i.resolve(t);return n.then(function(){return e()})},i.resolve());return e}function h(t,e,n,i){return t.getField(e,n).then(function(t){return t.getNxProperties().then(function(s){var o=s.qOneAndOnlyOne;if(!o&&true===i)return c(t,e,n).then(function(e){if(true===e||e.success){s.qOneAndOnlyOne=i;return u(t,s)}return e});s.qOneAndOnlyOne=i;return u(t,s)})})}function f(t,e,n,o){o=o||false;if("boolean"!==typeof n)return i.resolve({success:false});function r(i){if(!i.success&&!o)return f(t,e,!n,i.code);return{success:!o&&i.success,code:o||i.code,reverted:!!o&&i.success}}if(s.getFlag("ALT_STATE_ONE"))return d(t).then(function(i){var s=i.map(function(i){return function(){return h(t,e,i,n)}});return p(s).then(r)});return h(t,e,void 0,n).then(r)}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(94),n(126),n(136),n(112),n(149),n(137),n(194),n(107),n(90),n(269),n(134),n(106),n(357),n(358),n(111),n(174)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f){function g(t){var e="";"N"===t?e="Common.Single":"H"===t&&(e="library.preview.dimensiontype.drilldown");return e}function v(t){var e=t.qFieldDefs[0];return"N"===t.qGrouping&&!!e&&"="===e.charAt(0)}function m(e){d.remove(e.id).then(function(){t.getService("qvColorMapService").deleteColorMap(e.id).then(function(){t.$rootScope.$emit("clearUndo")})})}function b(t){var e=new u;e.edit(t.id)}function y(t){s.addItemToSheetOrVisualization(t)}function x(t){s.hasLinks(t.id,d).then(function(e){var n="Dimension.EditWarning.Text";e?s.editDialog(n,function(){b(t)}):b(t)})}function q(t){s.hasLinks(t.id,d).then(function(e){var n=e?"Dimension.Master.DeleteWarning.Text":"Dimension.Master.DeleteWarning.Unused.Text";s.removeDialog(n,function(){m(t)})})}function S(e){d.getListLayout().then(function(n){var i=n.map(function(t){return t.qData.title});d.get(e.id).then(function(n){n.app.cloneDimension(e.id).then(function(s){n.app.getDimension(s).then(function(n){n.getProperties().then(function(s){var o=a.generateUniqueName(i,e.name);o=c.crop(o,l.name);s.qMetaDef.title=o;s.qDim.title=o;if(s.qDim.coloring&&s.qDim.coloring.colorMapRef){var r=t.getService("qvColorMapService");s.qDim.coloring.colorMapRef=s.qInfo.qId;r.getColorMap(e.id).then(function(t){t&&r.setColorMap(s.qInfo.qId,t)})}n.setProperties(s).then(function(){t.$rootScope.$emit("clearUndo")})})})})})})}return i.extend({init:function t(){this.list=[];this.id=n.sectionIDs.dimension;this.name="dimension";this.title="Common.Dimensions";this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=s.permissionToCreate("dimension")},addId:"addDimension",addText:"Dimension.Toolbox.CreateButton",addAction:function t(){var e=new u;e.add(null)},initLoadData:function t(){d.getList().then(function(t){this.$scope.listModel=t}.bind(this));p(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function t(){var n=this;function i(t){var e=t.item;var i=t.modelInfo;var r=o.getBasePreviewInfo(t);r.description=i.layout.qDim.descriptionExpression||i.properties.qMetaDef.description;r.typeTranslationKey=g(i.properties.qDim.qGrouping);r.isSingleExpression=v(i.properties.qDim);r.fields=i.properties.qDim.qFieldDefs;r.labelExpression=i.layout.qDim.qLabelExpression;r.labelExpressionDef=i.properties.qDim.qLabelExpression;r.qId=i.properties.qInfo.qId;i.properties.qDim.coloring&&(r.baseColor=i.properties.qDim.coloring.baseColor);r.buttons=[o.buttonAddTo(y,t.closePreview,e,s.getAddToText(),s.isAddToMode())];n.allowAdd&&r.buttons.push(o.buttonDuplicate(S,t.closePreview,e));e.permissions.update&&r.buttons.push(o.buttonEdit(x,t.closePreview,e));e.permissions.remove&&r.buttons.push(o.buttonDelete(q,t.closePreview,e));r.close=t.closePreview;o.alignPreview(r,t.$element);return f.show(r)}this.previewManager=o.previewManagerFactory({getSlowInfo:function t(e){return o.getItemInformation(d,e.id)},createPreview:i,itemDialogHandler:r,State:e})},onLoadData:function t(e){this.loading=false;e=h.create(e);this.list=s.localeOrderBy(e,function(t){return t.name});this.onFilter()},doFilter:function t(e){var n=this.assets.query;s.removeSelection(e);this.previewManager.close();return e.filter(function(t){return s.libraryMultiSearch(t,n,["name","secondaryName","tags"])})},openContextMenu:function e(n,i){var o=t.getService("qvContextMenu").menu();s.isAddToMode()&&o.addItem({translation:s.getContextMenuAddToText(),tid:"add-to-sheet",select:function t(){y(n)}});n.permissions&&n.permissions.update&&o.addItem({translation:"Common.Edit",tid:"edit-master",select:function t(){x(n)}});this.allowAdd&&o.addItem({translation:"Common.Duplicate",tid:"duplicate-master",select:function t(){S(n)}});n.permissions&&n.permissions.remove&&o.addItem({translation:"Common.Delete",tid:"remove-master",select:function t(){q(n)}});r.openContextMenu(o,n,i)},addItemToSheetOrActiveObject:function t(e){y(e)}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover id="library-preview" class="dimension-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title" title="{{input.name}}">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p ng-if="showLabelExpression" class="label-expression" qve-highlight text="{{input.labelExpression}}" query="input.query"></p>\n\n\t\t<p class="description">{{input.description}}</p>\n\n\t\t<h2><span q-translation="library.preview.header.type"></span></h2>\n\t\t<p class="no-scroll" q-translation="{{input.typeTranslationKey}}" tid="preview-dimension-type"></p>\n\n\t\t<h2><span q-translation="library.preview.header.fields"></span></h2>\n\t\t<ul class="fields" ng-class="{ \'single-expression\': input.isSingleExpression }">\n\t\t\t<li ng-repeat="field in input.fields" title="{{field}}">{{field}}</li>\n\t\t</ul>\n\n\t\t<div ng-if="showLabelExpressionDef">\n\t\t\t<h2><span q-translation="library.preview.header.labelExpression"></span></h2>\n\t\t\t<p class="label-expression-def">{{input.labelExpressionDef}}</p>\n\t\t</div>\n\n\t\t<div ng-if="color">\n\t\t\t<h2><span q-translation="library.colors.dimensioncolor"></span></h2>\n\t\t\t<div class="color-row">\n\t\t\t\t<div class="color" ng-style="{\'background-color\': color}"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="valueColors.length">\n\t\t\t<h2><span q-translation="library.colors.valuecolors"></span></h2>\n\t\t\t<div class="color-row" tid="val-cols">\n\t\t\t\t<div ng-repeat="valcolors in valueColors track by $index" class="color" ng-style="{\'background-color\': valcolors, \'width\': previewColorViewWidth}">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="input.tags.length">\n\t\t\t<h2><span q-translation="Common.Tags"></span></h2>\n\t\t\t<ul class="tags">\n\t\t\t\t<li ng-repeat="tag in input.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }" title="{{tag.name}}">{{tag.name}}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(100),n(174)],s=function(t){var e=[];function n(n){e=[];if(n.usePal)n.colors.length?e=n.colors.map(function(e){return t.resolveColor(e.baseColor)}):t.dataPalettes.forEach(function(t){t.propertyValue===n.pal&&(e="pyramid"===t.type?e.concat(t.scale[t.scale.length-1]):e.concat(t.scale))});else if(n.single&&"none"!==n.single.color){e.push(t.resolveColor(n.single));if(n.colors){var i=n.colors.map(function(e){return t.resolveColor(e.baseColor)});e=e.concat(i)}}else n.colors&&(e=n.colors.map(function(e){return t.resolveColor(e.baseColor)}));return e}function i(t){return 0!==t.length?100/t.length+"%":0}return{getColors:n,getPreviewColorViewWidth:i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(94),n(126),n(136),n(112),n(149),n(137),n(194),n(107),n(90),n(217),n(147),n(106),n(804),n(805),n(111)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f){function g(t){u.editMeasure(t.id)}function v(t){d.remove(t.id)}function m(t){s.addItemToSheetOrVisualization(t)}function b(t){s.hasLinks(t.id,d).then(function(e){var n="Measure.Master.EditWarning.Text";e?s.editDialog(n,function(){g(t)}):g(t)})}function y(t){s.hasLinks(t.id,d).then(function(e){var n=e?"Measure.Master.DeleteWarning.Text":"Measure.Master.DeleteWarning.Unused.Text";s.removeDialog(n,function(){v(t)})})}function x(t){d.getListLayout().then(function(e){var n=e.map(function(t){return t.qData.title});d.get(t.id).then(function(e){e.app.cloneMeasure(t.id).then(function(t){return e.app.getMeasure(t)}).then(function(e){e.getProperties().then(function(i){var s=a.generateUniqueName(n,t.name);s=c.crop(s,l.name);i.qMetaDef.title=s;i.qMeasure.qLabel=s;e.setProperties(i)})})})})}return i.extend({init:function t(){this.list=[];this.id=n.sectionIDs.measure;this.name="measure";this.title="Common.Measures";this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=s.permissionToCreate("measure")},addId:"addMeasure",addText:"Measure.Toolbox.CreateButton",addAction:function t(){u.addMeasure(null)},initLoadData:function t(){d.getList().then(function(t){this.$scope.listModel=t}.bind(this));p(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function t(){var n=this;function i(t){var e=t.item;var i=t.modelInfo;var r=o.getBasePreviewInfo(t);r.description=i.layout.qMeasure.descriptionExpression||i.properties.qMetaDef.description;r.expression=i.properties.qMeasure.qDef;r.labelExpression=i.properties.qMeasure.qLabelExpression;r.labelExpression=i.layout.qMeasure.qLabelExpression;r.labelExpressionDef=i.properties.qMeasure.qLabelExpression;r.baseColor=i.properties.qMeasure.coloring?i.properties.qMeasure.coloring.baseColor:i.properties.qMeasure.baseColor;r.qId=i.properties.qInfo.qId;r.buttons=[o.buttonAddTo(m,t.closePreview,e,s.getAddToText(),s.isAddToMode())];n.allowAdd&&r.buttons.push(o.buttonDuplicate(x,t.closePreview,e));e.permissions.update&&r.buttons.push(o.buttonEdit(b,t.closePreview,e));e.permissions.remove&&r.buttons.push(o.buttonDelete(y,t.closePreview,e));r.close=t.closePreview;o.alignPreview(r,t.$element);return f.show(r)}this.previewManager=o.previewManagerFactory({getSlowInfo:function t(e){return o.getItemInformation(d,e.id)},createPreview:i,itemDialogHandler:r,State:e})},onLoadData:function e(n){this.loading=false;t.$rootScope.$emit("clearUndo");n=h.create(n);this.list=s.localeOrderBy(n,function(t){return t.name});this.onFilter()},doFilter:function t(e){var n=this.assets.query;s.removeSelection(e);this.previewManager.close();return e.filter(function(t){return s.libraryMultiSearch(t,n,["name","secondaryName","tags"])})},openContextMenu:function e(n,i){var o=t.getService("qvContextMenu").menu();s.isAddToMode()&&o.addItem({translation:s.getContextMenuAddToText(),tid:"add-to-sheet",select:function t(){m(n)}});n.permissions&&n.permissions.update&&o.addItem({translation:"Common.Edit",tid:"edit-master",select:function t(){b(n)}});this.allowAdd&&o.addItem({translation:"Common.Duplicate",tid:"duplicate-master",select:function t(){x(n)}});n.permissions&&n.permissions.remove&&o.addItem({translation:"Common.Delete",tid:"remove-master",select:function t(){y(n)}});r.openContextMenu(o,n,i)},addItemToSheetOrActiveObject:function t(e){m(e)}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(49),n(157)],s=function(t,e){function n(t){var e={};e.permissions=t.permissions;e.name=t.qData.title;e.secondaryName=t.qData.labelExpression||"";e.type=t.qInfo.qType;e.id=t.qInfo.qId;e.getDropOption=s.bind(null,e);e.tags=t.qData.tags;return e}function i(t){return{id:"newObject",args:{template:"kpi",init:{qHyperCubeDef:{qDimensions:[],qMeasures:[{qLibraryId:t.id,qDef:{autoSort:true,numFormatFromTemplate:true,conditionalColoring:{useConditionalColoring:false,singleColor:3,segments:{limits:[],colors:[{color:2}]}},measureAxis:{min:0,max:100},qNumFormat:{}},qSortBy:{qSortByLoadOrder:1,qSortByNumeric:-1}}],qInterColumnSortOrder:[0]}}}}}function s(n,s,o){if(t.getFlag("DISABLE_AUTO_CHART")||e.isVariableDefined("DISABLE_AUTO_CHART"))return i(n);if(o&&o.shiftKey)return i(n);return{id:"newObject",args:{template:"auto-chart",init:{qHyperCubeDef:{qMeasures:[{qLibraryId:n.id}],qInterColumnSortOrder:[0]},showTitles:false}}}}var o={create:function t(e){return e.map(function(t){return n(t)})}};return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(806),n(100),n(174)],s=function(t,e,n){function i(i){var s={template:e,controller:["$scope",function(e){e.input=i;i.baseColor&&i.baseColor.color&&(e.color=n.resolveColor(i.baseColor));e.showLabelExpression=!!e.input.labelExpression;e.showLabelExpressionDef=!!e.input.labelExpressionDef;var s=t.getService("qvColorMapService"),o=t.getService("qvRecentGradientsService");s.getMeasureGradient(e.input.qId).then(function(t){if(t){e.gradient=t;e.gradientColors=t.colors.map(function(t){return n.resolveColor(t)});e.gradientLimits="absolute"===t.limitType?o.convertAbsLimits(t.limits):t.limits.slice()}})}],dock:"right",alignTo:i.alignTo[0]};return t.getService("luiPopover").show(s)}return{show:i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover id="library-preview" class="measure-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title" title="{{input.name}}">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p ng-if="showLabelExpression" class="label-expression" qve-highlight text="{{input.labelExpression}}" query="input.query"></p>\n\n\t\t<p class="description">{{input.description}}</p>\n\n\t\t<h2><span q-translation="library.preview.header.expression">&nbsp;</span></h2>\n\t\t<p class="expression">{{input.expression}}</p>\n\n\t\t<div ng-if="showLabelExpressionDef">\n\t\t\t<h2><span q-translation="library.preview.header.labelExpression">&nbsp;</span></h2>\n\t\t\t<p class="label-expression-def">{{input.labelExpressionDef}}</p>\n\t\t</div>\n\n\t\t<div ng-if="color">\n\t\t\t<h2><span q-translation="library.colors.measurecolor">&nbsp;</span></h2>\n\t\t\t<div class="color" ng-style="{\'background-color\': color}"></div>\n\t\t</div>\n\n\t\t<div ng-if="gradient">\n\t\t\t<h2><span q-translation="library.colors.segmentColors">&nbsp;</span></h2>\n\t\t\t<div class="color" qv-color-scheme-display colors="gradientColors" types="gradient.breakTypes" limits="gradientLimits"></div>\n\t\t</div>\n\n\t\t<div ng-if="input.tags.length">\n\t\t\t<h2><span q-translation="Common.Tags">&nbsp;</span></h2>\n\t\t\t<ul class="tags">\n\t\t\t\t<li ng-repeat="tag in input.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }" title="{{tag.name}}">{{tag.name}}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(94),n(126),n(136),n(112),n(149),n(137),n(194),n(107),n(90),n(128),n(131),n(115),n(314),n(106),n(808),n(49),n(111)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m){function b(){var t=this;return{id:"newObject",args:{template:t.visualization,init:{qExtendsId:t.id}}}}function y(t){var e=h.getType(t);return e?e.getLibraryInfo().icon:"toolbar-help"}function x(t){var e=t.qData.visualization;return{id:t.qInfo.qId,name:t.qData.name,secondaryName:t.qData.labelExpression||"",tags:t.qData.tags,visualization:e,getDropOption:b,icon:y(e),type:"visualization",permissions:{update:t.permissions.update,remove:t.permissions.remove,publish:t.permissions.publish}}}function q(t){d.editMaster(t.id,t.visualization)}function S(t){f.remove(t.id)}function w(t,e){return o.hasLinks(t,e)}function C(t){e.publish("/ui/library/addToSheet",{item:t})}function I(t){w(t.id,f).then(function(e){var n="Object.Master.EditWarning.Text";e?o.editDialog(n,function(){q(t)}):q(t)})}function _(t){w(t.id,f).then(function(e){var n=e?"Object.Master.DeleteWarning.Text":"Object.Master.DeleteWarning.Unused.Text";o.removeDialog(n,function(){S(t)})})}function D(t){f.getList().then(function(e){e.getLayout().then(function(e){var n=e.map(function(t){return t.qData.name});f.get(t.id).then(function(e){var i=e.app;i.cloneObject(e.id).then(function(e){i.getObject(e).then(function(e){e.getProperties().then(function(i){var s=l.generateUniqueName(n,t.name);s=u.crop(s,c.name);i.qMetaDef.title=s;e.setProperties(i)})})})})})})}function k(t,e){for(var n=0;n<t.length;++n)t[n].disabled=t[n].id===e}return s.extend({init:function t(){this.list=[];this.id=i.sectionIDs.visualization;this.name="visualization";this.title="library.Visualizations";this._super.apply(this,arguments);this.initPreviewManager();this.allowDuplicate=o.permissionToCreate("visualization");this.$scope.stageState=p;this.$scope.$watch("stageState.selectedObject",function(t){t&&"gridCell"===t.type?k(this.list,t&&t.id):k(this.list,null)}.bind(this))},initLoadData:function t(){f.getList().then(function(t){this.$scope.listModel=t}.bind(this));g(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function t(){var i=this;function s(t){var n=t.item;var s=t.modelInfo;var a=r.getBasePreviewInfo(t);a.description=s.layout.descriptionExpression||s.properties.qMetaDef.description;a.labelExpression=s.layout.labelExpression;if(s.properties.labelExpression){var l=u.getValue(s.properties,"labelExpression.qStringExpression.qExpr","");l.length&&"="!==l[0]&&(l="="+l);a.labelExpressionDef=l}a.model=s.model;a.options={isReadonly:true,isPopover:true,navigation:false,selections:false};a.buttons=[r.buttonAddToSheet(C,t.closePreview,n,o.isAddToSheetMode())];i.allowDuplicate&&a.buttons.push(r.buttonDuplicate(D,t.closePreview,n));n.permissions.update&&a.buttons.push(r.buttonEdit(I,t.closePreview,n));n.permissions.remove&&a.buttons.push(r.buttonDelete(_,t.closePreview,n));m.getFlag("SINGLE_CONFIG")&&a.buttons.push(r.buttonEmbed(function(){e.publish("/embed-dialog/open",{type:"object",objectId:n.id})},t.closePreview,n));a.close=t.closePreview;r.alignPreview(a,t.$element);return v.show(a)}this.previewManager=r.previewManagerFactory({getSlowInfo:function t(e){return r.getItemInformation(f,e.id)},createPreview:s,itemDialogHandler:a,State:n})},onLoadData:function e(i){this.loading=false;n.view!==n.Views.masterObject&&t.$rootScope.$emit("clearUndo");i=i.filter(function(t){return!!t.qData.name});i=i.map(x);var s=p.selectedObject;s&&"gridCell"===s.type&&k(i,s&&s.id);this.list=o.localeOrderBy(i,function(t){return t.name});this.onFilter()},doFilter:function t(e){var n=this.assets.query;o.removeSelection(e);this.previewManager.close();return e.filter(function(t){return o.libraryMultiSearch(t,n,["name","secondaryName","tags"])})},openContextMenu:function n(i,s){var r=t.getService("qvContextMenu").menu();o.isAddToMode()&&r.addItem({translation:"contextMenu.addToSheet",tid:"add-to-sheet",select:function t(){C(i)}});i.permissions&&i.permissions.update&&r.addItem({translation:"Common.Edit",tid:"edit-master",select:function t(){I(i)}});this.allowDuplicate&&r.addItem({translation:"Common.Duplicate",tid:"duplicate-master",select:function t(){D(i)}});i.permissions&&i.permissions.remove&&r.addItem({translation:"Common.Delete",tid:"remove-master",select:function t(){_(i)}});m.getFlag("SINGLE_CONFIG")&&r.addItem({translation:"contextMenu.embed",tid:"120694",select:function t(){e.publish("/embed-dialog/open",{type:"object",objectId:i.id})}});a.openContextMenu(r,i,s)}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(809)],s=function(t,e){function n(n){var i={template:e,controller:["$scope",function(t){t.input=n;t.showLabelExpression=!!t.input.labelExpression;t.showLabelExpressionDef=!!t.input.labelExpressionDef}],dock:"right",alignTo:n.alignTo[0]};return t.getService("luiPopover").show(i)}return{show:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover id="library-preview" class="object-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p ng-if="showLabelExpression" class="label-expression" qve-highlight text="{{input.labelExpression}}" query="input.query"></p>\n\n\t\t<div class="object">\n\t\t\t<qv-object model="input.model" options="input.options"></qv-object>\n\t\t\t<qv-transparent-overlay></qv-transparent-overlay>\n\t\t</div>\n\n\t\t<p class="description">{{input.description}}</p>\n\n\t\t<div ng-if="input.tags.length">\n\t\t\t<h2 class="tags-title"><span q-translation="Common.Tags"></span></h2>\n\t\t\t<ul class="tags">\n\t\t\t\t<li ng-repeat="tag in input.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }">{{tag.name}}</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div ng-if="showLabelExpressionDef">\n\t\t\t<h2><span q-translation="library.preview.header.labelExpression"></span></h2>\n\t\t\t<p class="label-expression-def">{{input.labelExpressionDef}}</p>\n\t\t</div>\n\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>\n\n\n'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(95),n(94),n(136),n(149),n(137),n(504),n(156),n(112),n(811),n(318),n(319),n(111)],s=function(t,e,n,i,s,o,r,a,l,c,u,d){function p(t){n.publish("/ui/library/addToSheet",{item:t});return t}function h(t){this.item=t;this.id=t.id;this.name=t.name;this.type="template";this.template="widget";this.init={templateId:this.id};this.icon=d.getIcon(t.meta.type)}h.prototype.getDropOption=function(){var t=this.init.templateId;var e=a.getDefinition(this.item);var n=l.mapProperties(e,{templateId:t},t);n.widgetMeta={libid:this.item.libid,name:this.item.name};var i={id:"newObject",args:{template:"widget",init:n}};return i};return s.extend({init:function e(){this.list=[];this.id="some_id";this.name="qwidget";this.title="Widgets";this.stageScope=t("div.qv-panel-stage").scope();this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=false;this.infoExpanded=false;this.hasMetaInfo=true},addId:"addWidget",addText:"Create Widget",addAction:function t(){this.stageScope.enableWidget=true;this.stageScope.enableSheet=false},initPreviewManager:function t(){function e(t){var e=t.item;var n={query:t.query,name:e.name,description:e.item.description||e.item.meta.description,imageUrl:e.previewIconURL,hasImage:!!e.previewIconURL,icon:d.getIcon(e.item.meta.type)};n.buttons=[o.buttonAddToSheet(p,t.closePreview,e,c.isAddToSheetMode())];n.close=t.closePreview;o.alignPreview(n,t.$element);return u.show(n)}this.previewManager=o.previewManagerFactory({createPreview:e,itemDialogHandler:r,State:i})},onLoadData:function t(e){this.loading=false;var n=[];e.forEach(function(t){n.push(new h(t))});this.list=c.localeOrderBy(n,function(t){return t.name});this.onFilter()},doFilter:function t(e){var n=this.assets.query;return e.filter(function(t){return c.librarySearchFn(t,n)})},openContextMenu:function t(n,i){if(c.isAddToMode()){var s=e.getService("qvContextMenu").menu();s.addItem({translation:"contextMenu.addToSheet",tid:"add-to-sheet",select:function t(){p(n)}});r.openContextMenu(s,n,i)}},addItemToSheetOrActiveObject:function t(e){c.itemDblClickHandler(e)}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(812)],s=function(t,e){function n(n){var i={template:e,controller:["$scope",function(t){t.input=n}],dock:"right",alignTo:n.alignTo[0]};return t.getService("luiPopover").show(i)}return{show:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover id="library-preview" class="widget-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<div ng-show="input.hasImage" class="template-image-container">\n\t\t\t<img ng-src="{{input.imageUrl}}">\n\t\t</div>\n\t\t<i ng-show="!input.hasImage" class="template-icon  lui-icon  lui-icon--{{input.icon}}"></i>\n\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p class="description">{{input.description}}</p>\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="{{button.disabled}}" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>\n\n'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(814),n(96)],s=function(t,e,n){var i,s=500;function o(t){return t.is("input:not([type=radio]):not([type=checkbox]), textarea:not([readonly])")&&!t.closest(".CodeMirror").length||t.closest("[contenteditable=true]").length||t.closest(".CodeMirror").length}function r(t){return t.is(".ignore-context-menu")}function a(e,n,i,s,r){var a;i=t(i);if(n.ctrlKey&&n.shiftKey)return;if(o(i))return;if(i.is(".progress")||i.is("select")){n.preventDefault();return}n.originalType=n.type;delete n.type;a=t.Event(n,{type:e,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey});a.pageX=s;a.pageY=r;i.trigger(a);return false}function l(e){if(e.ctrlKey&&e.shiftKey)return;o(t(e.target))||e.preventDefault()}t(document.body).on("contextmenu",l);n(document.body).tap({options:{preventDefault:false,which:3},start:function t(e){n.utils.isMouse(e)&&(this._openContextMenu=true)},end:function t(e){if(this._openContextMenu){a("qv-contextmenu",e,e.target,e.pageX,e.pageY);this._openContextMenu=false}}});(n.utils.msPointer||n.utils.touch)&&n(document.body).longtap({options:{preventDefault:false,timeThreshold:s,interval:20},start:function e(s){if(n.utils.isMouse(s)||o(t(s.target))||r(t(s.target))){this.cancel();return}i=s.target},update:function t(n,s){if(100===s.percentage){e.show(s.pagePoints[0].x,s.pagePoints[0].y);a("qv-radial-contextmenu",n,i,s.pagePoints[0].x,s.pagePoints[0].y)}},cancel:function t(){e.hide()},end:function t(n,s){e.hide();a("qv-contextmenu",n,i,s.pagePoints[0].x,s.pagePoints[0].y);i=null}});t(document.body).on("MSHoldVisual",function(t){t.preventDefault()});t(document.body).on("MSGestureHold",function(t){t.preventDefault()})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(51),n(815)],s=function(t,e,n){var i=null;var s={scope:{position:"="},template:n,controller:["$scope","$element",function(t,e){var n=e.children();var i=n.outerWidth();n.css("top",t.position.y-i/2);n.css("left",t.position.x-i/2);n.addClass("transition")}]};var o={show:function n(r,a){o.hide();t.$apply(t.$rootScope,function(){i=e.show(s,{position:{x:r,y:a}})})},hide:function e(){t.$apply(t.$rootScope,function(){if(i){i.destroy();i=null}})}};return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div id="actionIndicator"></div>'},function(t,e,n){(function(t){(function(t,e,n){"$:nomunge";t.addOutsideEvent=i;function i(i,s){s=s||i+n;var o=[],r=i+"."+s+"-special-event";t.event.special[s]={setup:function(){-1===o.indexOf(this)&&o.push(this);1===o.length&&t(e).bind(r,a)},teardown:function(){var n=o.indexOf(this);-1!==n&&o.splice(n,1);0===o.length&&t(e).unbind(r)},add:function(t){var e=t.handler;t.handler=function(t,n){t.target=n;e.apply(this,arguments)}}};function a(e){var n=o.slice();n.forEach(function(n){var i=t(n);n===e.target||i.has(e.target).length||i.triggerHandler(s,[e.target])})}}})(t,document,"outside")}).call(this,n(11))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(54),n(91),n(94),n(49),n(126),n(136),n(112),n(149),n(137),n(217),n(219),n(192),n(818),n(133),n(819),n(106),n(111),n(351)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v){function m(t){var e=i.model;var n={insertBeforeItem:null,title:t.name,odagLinkRefID:t.id};f.addODAGNavPoint(e,n)}function b(e){var i="";if("unlimited"===e||""===e)i=n.get("ODAGLink.Dialog.RetentionTimeUnit.NeverExpires");else{var s={retentionTimeValue:"",retentionTimeUnit:""};var o=t.getService("odagLinkDialogService");s=o.getRetentionTimeDisplayValue(e);i="d"===s.retentionTimeUnit?"1"===s.retentionTimeValue?n.get("library.preview.odag.retentionTime.day",s.retentionTimeValue):n.get("library.preview.odag.retentionTime.days",s.retentionTimeValue):"h"===s.retentionTimeUnit?"1"===s.retentionTimeValue?n.get("library.preview.odag.retentionTime.hour",s.retentionTimeValue):n.get("library.preview.odag.retentionTime.hours",s.retentionTimeValue):e}return i}return r.extend({init:function t(e,n){this.app=n;this.list=[];this.id=o.sectionIDs.odag;this.name="odaglinks";this.title="ODAG.Toolbox.Title.ODAGToolbar";this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=a.permissionToCreate("odagLink");this.initLoadComplete=false},addId:"addODAGLink",addText:"ODAGLink.Toolbox.CreateButton",addAction:function t(){u.addODAGLink(this.app)},initLoadData:function t(){var e=this;p.getList(this.app).then(function(t){e.$scope.listModel=t});v(this.$scope,"listModel",this.loadODAGLinks.bind(this))},loadODAGLinks:function t(){var e=this;var n=function t(n){e.onLoadData(n);e.initLoadComplete=true};this.initLoadComplete?d.getList(this.app,true).then(function(t){e.onLoadData(t)}).catch(function(){this.loading=false}):this.$scope.listModel&&this.$scope.listModel.layout&&this.$scope.listModel.layout.qAppObjectList.qItems.length>0?d.getList(this.app,true).then(function(t){n(t)}).catch(function(){e.loading=false}):n([])},editCallback:function t(e){u.editODAGLink(this.app,e.id)},deleteCallback:function t(e){var n=this;var i="ODAGLink.Master.DeleteWarning.Text";a.removeDialog(i,function(){d.get(e.id).then(function(t){f.deleteODAGLink(n.app,e.id,t.properties)})})},initPreviewManager:function t(){var o=this;function r(t){var i=t.item;var r=t.modelInfo;var c="";c=""===r.properties.data.properties.targetSheet[0].sheetId||null===r.properties.data.properties.targetSheet[0].sheetId?n.get("ODAGLink.Dialog.DefaultView.AppOverview"):r.properties.data.properties.targetSheet[0].sheetName?r.properties.data.properties.targetSheet[0].sheetName:n.get("library.preview.odag.defaultView.UnableToAccess",r.properties.data.properties.targetSheet[0].sheetId);var u="";u=0===r.properties.data.properties.publishTo.length||""===r.properties.data.properties.publishTo[0].streamId||null===r.properties.data.properties.publishTo[0].streamId?n.get("ODAGLink.Dialog.DefaultPublishTo.MyWork"):r.properties.data.properties.publishTo[0].streamName?r.properties.data.properties.publishTo[0].streamName:n.get("library.preview.odag.publishTo.UnableToAccess",r.properties.data.properties.publishTo[0].streamId);var d=l.getBasePreviewInfo(t);d.templateApp=r.properties.data.templateApp;d.rowEstExpr=r.properties.data.rowEstExpr;d.rowEstCount=r.properties.data.properties.rowEstRange[0].highBound;d.genAppLimit=r.properties.data.properties.genAppLimit[0].limit;d.retentionTime=b(r.properties.data.properties.appRetentionTime[0].retentionTime);d.defaultView=c;d.publishTo=u;d.buttons=[l.buttonAddTo(m,t.closePreview,i,a.getAddToText(o.name),a.isAddToMode())];(s.getFlag("ODAG_SAAS_ENABLED")||e.contains(r.properties.data.privileges,"update")&&a.hasAppUpdatePermssion())&&d.buttons.push(l.buttonEdit(o.editCallback.bind(o),t.closePreview,i));(s.getFlag("ODAG_SAAS_ENABLED")||e.contains(r.properties.data.privileges,"delete")&&a.hasAppUpdatePermssion())&&d.buttons.push(l.buttonDelete(o.deleteCallback.bind(o),t.closePreview,i));d.close=t.closePreview;l.alignPreview(d,t.$element);return g.show(d)}this.previewManager=l.previewManagerFactory({getSlowInfo:function t(e){return l.getItemInformation(d,e.id)},createPreview:r,itemDialogHandler:c,State:i})},onLoadData:function e(n){this.loading=false;t.$rootScope.$emit("clearUndo");n=h.create(n);this.list=a.localeOrderBy(n,function(t){return t.name});this.onFilter()},doFilter:function t(e){var n=this.assets.query;a.removeSelection(e);this.previewManager&&this.previewManager.close();return e.filter(function(t){return a.libraryMultiSearch(t,n,["name","tags"])})},openContextMenu:function n(i,o){var r=this;var u=t.getService("qvContextMenu").menu();l.getItemInformation(d,i.id).then(function(t){var n=t.properties;a.isAddToMode()&&u.addItem({translation:a.getContextMenuAddToText(r.name),tid:"add-to-sheet",select:function t(){m(i)}});(s.getFlag("ODAG_SAAS_ENABLED")||e.contains(n.data.privileges,"update")&&a.hasAppUpdatePermssion())&&u.addItem({translation:"Common.Edit",tid:"edit-master",select:function t(){r.editCallback(i)}});(s.getFlag("ODAG_SAAS_ENABLED")||e.contains(n.data.privileges,"delete")&&a.hasAppUpdatePermssion())&&u.addItem({translation:"Common.Delete",tid:"remove-master",select:function t(){r.deleteCallback(i)}});c.openContextMenu(u,i,o)})},addItemToSheetOrActiveObject:function t(e){m(e)}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){var n={};n.dragDropType="odagLinkItem";n.name=t.data.name;n.type=t.type;n.id=t.data.id;n.getDropOption=e.bind(null,n);n.tags=t.data.tags;return n}function e(t){return{id:"newODAGNavPoint",args:{template:"odagLink",init:{linkRef:t}}}}var n={create:function e(n){return n.map(function(e){return t(e.properties)})}};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(820),n(49)],s=function(t,e,n){function i(i){var s={template:e,controller:["$scope",function(t){t.input=i;t.isOdagSaas=n.getFlag("ODAG_SAAS_ENABLED")}],dock:"right",alignTo:i.alignTo[0]};return t.getService("luiPopover").show(s)}return{show:i}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover id="library-preview" class="odag-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\t\t<h2><span q-translation="library.preview.odag.row.templateapp"></span></h2>\n\t\t<p class="description">{{input.templateApp.name}}</p>\n\t\t<h2><span q-translation="library.preview.odag.row.expression"></span></h2>\n\t\t<p class="description">{{input.rowEstExpr}}</p>\n\t\t<h2><span q-translation="library.preview.odag.row.count"></span></h2>\n\t\t<p class="description">{{input.rowEstCount}}</p>\n\t\t<h2><span q-translation="library.preview.odag.maxGenAppsCount"></span></h2>\n\t\t<p class="description">{{input.genAppLimit}}</p>\n\t\t<h2><span q-translation="library.preview.odag.retentionTime"></span></h2>\n\t\t<p class="description">{{input.retentionTime}}</p>\n\t\t<h2 ng-if="!isOdagSaas"><span q-translation="library.preview.odag.defaultView"></span></h2>\n\t\t<p ng-if="!isOdagSaas" class="description">{{input.defaultView}}</p>\n\t\t<h2 ng-if="!isOdagSaas"><span q-translation="library.preview.odag.publishTo"></span></h2>\n\t\t<p ng-if="!isOdagSaas" class="description">{{input.publishTo}}</p>\t\t\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(91),n(48),n(136),n(93),n(112),n(137),n(106),n(822),n(269),n(134),n(357),n(358),n(111)],s=function(t,e,n,i,s,o,r,a){function l(e){var n={};n.permissions="$"===e?{update:false,remove:false}:{update:true,remove:true};n.name="$"===e?t.get("AlternateState.DefaultState"):e;n.type="state";n.id=e;n.allowDrag=false;n.getDropOption=function(){};return n}function c(t){return t.global.getConfiguration().then(function(e){if(e.qFeatures.qAutoSave)return t.doSave()})}function u(t){s.addItemToSheetOrVisualization(t)}return n.extend({init:function t(){this.list=[];this.prevList=[];this.id="AlternateStates";this.name="alternate states";this.title="Common.AlternateStates";this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=s.permissionToCreate("dimension");this.allowRemove=this.allowAdd},addId:"addState",addText:"AlternateState.Toolbox.CreateButton",addAction:function t(){var e=this;var n=function t(e){null!==e&&""!==e&&i.getApp().then(function(t){t.addAlternateState(e).then(function(){c(t)})})};var s=function t(n){if(!n||""===n)return false;if(!e.items)return true;return!e.items.some(function(t){return t.name===n})};var o={title:"AlternateState.Dialog.Add.Title",confirm:"Common.Create",name:"",checkNameCallback:s,callback:n};var r=a.show(o);r.closed.then(function(){r=null})},initLoadData:function t(){var e=this;i.getApp().then(function(t){e.$scope.listModel=t});r(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function t(){},openPreview:function t(){},onLoadData:function t(e){if(!this.prevList.length||this.prevList.length!==e.qStateNames.length||!this.prevList.every(function(t,n){return t===e.qStateNames[n]})){this.loading=false;var n=s.localeOrderBy(e.qStateNames||[],function(t){return t});this.list=["$"].concat(n).map(l);this.onFilter();this.prevList=e.qStateNames.concat()}},doFilter:function t(e){var n=this.assets.query;s.removeSelection(e);return e.filter(function(t){return s.libraryMultiSearch(t,n,["name"])})},openContextMenu:function t(n,r){var a=e.getService("qvContextMenu").menu();s.isAddToMode()&&a.addItem({translation:s.getContextMenuAddToText(),tid:"add-to-sheet",select:function t(){u(n)}});n.permissions&&n.permissions.remove&&this.allowRemove&&a.addItem({translation:"Common.Delete",tid:"remove-master",select:function t(){i.getApp().then(function(t){t.removeAlternateState(n.id).then(function(){c(t)})})}});o.openContextMenu(a,n,r)},addItemToSheetOrActiveObject:function t(e){u(e)},closePreview:function t(){}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(99),n(823),n(94),n(107),n(166)],s=function(t,e,n,i,s){var o;function r(t){return{name:t.alternateState.name}}var a={scope:{title:"=",confirmLabel:"=",alternateState:"="},template:n,controller:["$scope",function(t){t.stringLimits=s;t.isValid=true;t.cancel=function(){t.destroyComponent()};t.confirm=function(){var e=r(t);t.isValid=t.checkNameCallback(e.name);if(t.isValid){o.close();t.callback(e.name)}};i.StateChanged.bind(t.cancel);t.onKeyPress=function(e){t.isValid=true;var n=e.which;13===n&&t.confirm()};t.$watch("alternateState.name",function(){});t.$on("$destroy",function(){i.StateChanged.unbind(t.cancel)});t.autoFocus=e.treatAsDesktop()}]};function l(e){var n={title:e.title,confirmLabel:e.confirm,alternateState:{name:e.name},add:e.add,checkNameCallback:e.checkNameCallback,callback:e.callback};o=t.getService("luiDialog").show({template:a.template,controller:a.controller,input:n,closeOnOutside:false,showArrow:false});return o}return{show:l}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="lui-modal-background"></div>\n<div class="lui-dialog" name="alternateStatesDialog" id="alternate-states-dialog">\n\t<lui-tab-view>\n\t\t<div class="lui-dialog__header">\n\t\t\t<div class="lui-dialog__title" q-translation="{{input.title}}"></div>\n\t\t</div>\n\t\t<div class="lui-dialog__body">\n\t\t\t\x3c!-- Name --\x3e\n\t\t\t<div class="alternate-state-component">\n\t\t\t\t<label q-translation="AlternateState.NewStateName" class="qv-metadatalabel">State:</label>\n\t\t\t\t<input class="lui-input" qva-focus="autoFocus" ng-keypress="onKeyPress($event)" ng-model="alternateState.name" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !isValid }" data-tid="name-input"/>\n\t\t\t</div>\n\t\t</div>\n\t</lui-tab-view>\n\t<div class="lui-dialog__footer">\n\t\t<button class="lui-button close-button" ng-click="cancel()" name="cancelButton" q-translation="Common.Cancel" data-tid="close-btn"></button>\n\t\t<button class="lui-button close-button" ng-click="$event.preventDefault(); confirm()" name="confirmButton" q-translation="{{confirmLabel}}" data-tid="create-btn"></button>\n\t</div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(210),n(359),n(505)],s=function(t,e){function n(t,e){e.widgets=e.widgets||[];Object.defineProperties(this,{id:{value:t},data:{value:e,writable:true}});e.type="widget-library"}function i(t){t=t||this;return e.saveLibrary(t)}n.prototype.save=i;n.save=i;n.getList=function(){return t.getList().then(function(t){var e=[];t.forEach(function(t){"widget-library"===t.data.type&&e.push(new n(t.id,t.data))});return e})};n.get=function(t){return e.getLibrary(t).then(function(e){return new n(t,e)})};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){var e=false;if(t&&t.length>3){e="";t=t.replace("qw","");t=t[0].toLowerCase()+t.substr(1);for(var n in t){var i=t[n];if("string"===typeof i){i===i.toUpperCase()&&(i="-"+i.toLocaleLowerCase());e+=i}}}return e}function e(t,e){var n=false;if(t){n=t;e&&(n=t.toLowerCase());n=n[0].toUpperCase()+n.substr(1)}return n}return{directiveToFile:t,capitalizeString:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(827),n(828)],s=function(t,e){var n={restrict:"E",replace:true,scope:{section:"="},template:e};t.directive("qvAssetsSection",function(){return n});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="assets-section" tid={{section.id}}>\n\t<div ng-if="section.allowAdd" class="library-section-add-button-wrapper">\n\t\t<lui-button\n\t\t\tqva-activate="section.addAction()"\n\t\t\tid="{{section.addId}}"\n\t\t\tq-translation="{{section.addText}}">\n\t\t</lui-button>\n\t</div>\n\t<qv-assets-list\n\t\tquery="section.assets.query"\n\t\tsection="section">\n\t</qv-assets-list>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(829),n(112),n(127),n(54),n(11),n(206),n(179),n(270),n(96),n(161),n(111),n(263),n(830)],s=function(t,e,n,i,s,o,r,a,l,c,u){var d={restrict:"E",replace:true,scope:{query:"=",section:"="},template:e,link:function e(d,p){var h;var f=false;var g=p.find(".expanded-info-header");g&&g.on("transitionend",function(t){"max-height"===t.originalEvent.propertyName&&I(L,0)});function v(){if(h){clearTimeout(h);h=null}}function m(t){for(var e=0;e<d.section.items.length;e++)if(d.section.items[e].id===t.id)return e}d.getDisplayText=function(t){var e=t.isDerived&&""===d.query?t.qName:u.trimAutoCalendarName(t.name);return e};d.itemDblClick=function t(e,i){d.section.closePreview();e.selected&&n.toggleSelection(e,i);if(e.disabled)return;d.section.addItemToSheetOrActiveObject(e);v()};d.itemContextMenu=function t(e,n){if(e.disabled)return;d.section.openContextMenu(e,n)};d.isExpanded=function(t){return d.section.expanded&&d.section.expanded[t.id]};d.inMomentumScroll=function(t,e){var n=i.elementFromEventPosition(e);return t!==o(n).scope().item};function b(t,e){var n=m(t);f=false;if(t.derivedFields&&t.derivedFields.length>0){d.section.items.splice(n+1,t.derivedFields.length);e||D.setList(d.section.items,true)}d.section.expanded[t.id]=false}function y(t,e){var n=m(t);f=true;d.section.expanded[t.id]=true;if(t.derivedFields&&t.derivedFields.length>0){var i=[n+1,0].concat(t.derivedFields);Array.prototype.splice.apply(d.section.items,i);e||D.setList(d.section.items,true)}}d.itemClicked=function t(e,i){v();h=setTimeout(function(){if(c.utils.touch&&d.inMomentumScroll(e,i))return;if(e.disabled)return;e.derivedFields&&e.derivedFields.length>0&&(d.section.expanded[e.id]?b(e):y(e));if(!n.toggleSelection(e,i)){d.$apply();return}x(e,i)},200)};function x(t,e){var n=o(e.currentTarget);var i;i=_.virtualScrollEnabled&&_.alignBottomAbsolute?0===_.items.indexOf(t)?-1:0:d.itemOffLimitPx(n,p);function s(){d.section.openPreview(t,e);d.$apply()}function r(t){return t>0?1:t<0?-1:0}if(0===i)s();else if(_.virtualScrollEnabled){var a=_.getVirtualScrollAmount(0,r(i),1);T.scroll(0,a.deltaY);I(s)}else{k.one("scroll",function(){s()});k[0].scrollTop+=i}}d.itemOffLimitPx=function(t,e){var n=t.position();var i=n.top;if(i<0)return i;i=n.top+t.outerHeight()-e.height();if(i>0)return i;return 0};function q(){t.$apply(d,function(){f||d.section.closePreview();f=false;t.getService("qvContextMenu").close()})}var S=s.throttle(q,500);var w=45;var C={minRowHeight:w,maxRowHeight:w,blockSize:60,keepItemsCount:10};var I=t.getService("$timeout");var _=new r(I,C);d.scroll=_;var D=new l(_);var k=p.find(".scroll-area");var T=k.controller("qvScrollArea");var E=new a(k,k,".lui-list__item",".lui-list__item:first",".lui-list__item:last");var A=p.find(".qv-scroll-loader").controller("qvScrollLoader");_.initialize(E,D,T,A).then(function(){_.activate();_.updateViewport();d.$watch("section.items",function(t){if(!t)return;_.updateViewport();var e=false;if(d.section.expanded)for(var n=0;n<t.length;n++)if(d.section.expanded[t[n].id]&&(n===t.length-1||!t[n+1].isDerived)){y(t[n],true);e=true}D.setList(t,e)})});_.Scroll.bind(S);function L(t){if(t){d.section.allowAdd&&(t.height-=37);E.getBoundingBox=function(){return t};E.getScrollAreaBoundingBox=function(){return t};D.resize().then(function(){delete E.getBoundingBox;delete E.getScrollAreaBoundingBox})}else D.resize()}d.section.Resize.bind(L);d.$on("$destroy",function(){_.destroy();g&&g.off("transitionend");d.section.Resize.unbind(L);_.Scroll.unbind(S)})}};t.directive("qvAssetsList",function(){return d});return d}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="assets-list" ng-class="{ empty: !section.items.length }">\n\t\n\t<div class="expanded-info-header " ng-show="!section.loading && section.hasMetaInfo" ng-class="{\'expanded\': section.infoExpanded || section.shouldShowCloudExtensionsWarning}">\n\t\t<div class="expanded-info-collapsed-header">\n\t\t\t<div class="expanded-info-collapsed-title" ng-bind="section.infoTitle" title="{{section.infoTitle}}"></div>\n\t\t\t<span class="lui-icon lui-icon--more" ng-click="section.infoExpanded = !section.infoExpanded;" q-title-translation="Tooltip.AssetPanel.ExpandWidgetInformation"></span>\n\t\t</div>\n\t\t<div class="expanded-info">\n\t\t\t<div class="info-image"></div>\n\t\t\t<div class="expanded-info-content" ng-bind="section.description"></div>\n\t\t\t<div class="expanded-info-content" ng-if="section.shouldShowCloudExtensionsWarning">\n\t\t\t\t<div>\n\t\t\t\t\t<span class="extension-warning-icon lui-icon lui-icon--warning-triangle"></span>\n\t\t\t\t\t<div class="expanded-info-content extension-warning-text" ng-bind="section.cloudExtensionWarning"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<span class="assets-nohits" ng-show="!section.loading && !query && !section.items.length" q-translation="library.noitems"></span>\n\t<qv-assets-search-no-hits query="query" show="!section.loading && query && !section.items.length"></qv-assets-search-no-hits>\n\t\n\t<qv-scroll-area class="scroll-area" ng-show="!section.loading" ng-class="{ \'native-scroll-enabled\': !scroll.virtualScrollEnabled }" >\n\t\t<qv-scroll-load-button\n\t\t\t\tng-show="scroll.loadPrevious"\n\t\t\t\ton-load="scroll.gotoPreviousBlock()"\n\t\t\t\ttext="Object.Listbox.LoadPrevious" previous="true"></qv-scroll-load-button>\n\n\t\t<ul class="lui-list assets-n-minutes__list" ng-class="{ \'align-bottom\': scroll.alignBottomAbsolute }" >\n\n\t\t\t<li ng-repeat="item in scroll.items track by item.id"\n\t\t\t\tng-hide="item.hidden"\n\t\t\t\tclass="lui-list__item lui-list__action library-item qv-draggable"\n\t\t\t\tdata-id="{{item.id}}"\n\t\t\t\tng-click="itemClicked(item, $event)"\n\t\t\t\tqva-context-menu="itemContextMenu(item, $event)"\n\t\t\t\tng-dblclick="itemDblClick(item, $event)"\n\t\t\t\tng-class="{ \'lui-active\': item.selected, \'lui-disabled\': item.disabled, \'derived-field-item\' : item.isDerived && query === \'\' }"\n\t\t\t\ttitle="{{item.name}}">\n\t\t\t\t<div ng-if="item.icon" class="lui-icon lui-icon--{{item.icon}} lui-list__aside" q-title-translation="{{item.iconTooltip}}"></div>\n\t\t\t\t<div class="lui-list__text library-item-text">\n\t\t\t\t\t<div ng-if="item.isDateField" class="lui-icon lui-icon--calendar icon-align"></div>\n\t\t\t\t\t<div ng-if="item.isGeoField" class="lui-icon lui-icon--map icon-align"></div>\n\t\t\t\t\t<div class="titles">\n\t\t\t\t\t\t<span qve-highlight text="{{ getDisplayText(item) }}" query="query" class="title"></span>\n\t\t\t\t\t\t<span ng-if="item.secondaryName" qve-highlight text="{{item.secondaryName}}" query="query" class="title secondary-title">{{item.secondaryName}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div ng-if="item.match.tags" class="lui-icon lui-icon--tag lui-list__aside"></div>\n\t\t\t\t<div ng-if="item.derivedFields.length > 0" class="toggle-expand lui-icon lui-list__aside" ng-class="isExpanded(item) ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\'"></div>\n\t\t\t\t<i class="lui-icon lui-list__aside lui-icon--draggable" q-title-translation="Common.Move"></i>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<qv-scroll-load-button\n\t\t\t\tng-show="scroll.loadNext"\n\t\t\t\ton-load="scroll.gotoNextBlock()"\n\t\t\t\ttext="Object.Listbox.LoadMore"></qv-scroll-load-button>\n\t</qv-scroll-area>\n\t<qv-scroll-loader no-rain="true"></qv-scroll-loader>\n\n\t<div class="assets-loading" ng-show="section.loading"><span q-translation="Common.Loading"></span>\n\t\t<qv-spinner show="section.loading"></qv-spinner>\n\t</div>\n\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(831)],s=function(t,e){var n={restrict:"E",replace:true,scope:{query:"=",show:"="},template:e};t.directive("qvAssetsSearchNoHits",function(){return n});return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div ng-show="show" class="assets-nohits">\n\t<div class="query">“<div>{{query}}</div>”</div>\n\t<span class="message" q-translation="Toolbox.Search.Nohits"></span>\n</div>\n'},,function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(834),n(99),n(112),n(92),n(144),n(89),n(97),n(148),n(124),n(96),n(142),n(49),n(157),n(95),n(93),n(108),n(155),n(176),n(835),n(837),n(175)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m,b){var y=".globalSelections",x=o.extend({init:function e(n,s){var o=this;var r=m.inClient();this.$scope=n;this.callbacks=[];this.ignoreUpdates=false;this.hasLoaded=false;n.dimensions=[];n.dimensionsFields=[];n.selectedFields=[];n.fields=[];n.dimAvailable=false;n.showFields=s.getShowFields(n.app);n.showFieldsCheckbox=true;n.filter="";n.autoFocus=i.treatAsDesktop();n.selectionToolbarOpen=false;n.showNoMatches=false;n.disableSelectionInsights=false;n.selInsightsEnabled=h.getFlag("SELECTION_INSIGHTS")&&r;function l(){var t=new a;c.isRunning().then(function(){t.resolve(true)},function(){t.resolve(false)});return t.promise}var c;if(r){c=new b;var u=localStorage.getItem("qv-global-selections-settings");v.getApp().then(function(t){l().then(function(e){f.load(t).then(function(){!f.isVariableDefined("DISABLE_SELECTION_INSIGHTS")&&e||(n.disableSelectionInsights=true);u&&!JSON.parse(u).open?n.showInsights=false:n.showInsights=true})})})}n.handleEscape=function(t){if(n.filter&&n.filter.length>0){n.filter="";t.stopImmediatePropagation();t.preventDefault()}else s.off()};function d(){localStorage.setItem("qv-global-selections-settings",JSON.stringify({open:n.showInsights}))}n.showInsightsPanel=function(){n.showInsights=true;d();g.publish("selection/insights/show")};var p=function t(){n.showInsights=false;d();localStorage.setItem("qv-global-selections-settings",JSON.stringify({open:n.showInsights}))};g.subscribe("selection/insights/close",p);n.$on("$destroy",function(){g.unsubscribe("selection/insights/close",p)});a.all({fields:this.getFields(),select:this.bindCurrentSelections(),dim:this.getLibraryDimensions(),reg:this.registerExtensions()}).then(function(){o.hasLoaded=true;n.showFieldsCheckbox=n.fields.length>0;n.dimAvailable=n.dimensions.length>0;if(!n.dimAvailable&&n.showFieldsCheckbox){n.showFields=true;s.setShowFields(n.showFields,n.app)}n.$watch("filter",function(){o.filterShown(o,o.$scope)});n.$watch("showFields",function(){s.setShowFields(n.showFields,n.app);o.filterShown(o,o.$scope)});t(".qv-gs-section .qv-gs-header")[1].style.display="none";t(".qv-gs-section .qv-gs-header")[1].offsetHeight;t(".qv-gs-section .qv-gs-header")[1].style.display="block"})},registerExtensions:function t(){var e=new a;u.load().then(function(){e.resolve()});return e.promise},getFields:function t(){var e=this.$scope;return e.app.getFieldList().then(function(t){e.fields=r.expand(t).map(function(t){return{title:t.qName,qField:t.qName,qTags:t.qTags}})})},_updateCurrentSelectionFields:function t(e){var n=this,i=this.$scope;i.selectedFields=e.qSelectionObject.qSelections.filter(function(t){return!t.qIsHidden}).sort(p.sortSelections).map(function(t){return{title:t.qReadableName||t.qField,qField:t.qField,enableBadge:true}});n.hasLoaded&&n.filterShown(n,i)},handleCurrentSelectionFields:function t(){var e=this;this.$scope.currentSelectionsModel.getLayout().then(function(t){e._updateCurrentSelectionFields(t)})},bindCurrentSelections:function t(){var e=this.$scope,n=this;return n.$scope.app.getCurrentSelectionObject().then(function(t){e.currentSelectionsModel=t;n.subscription=t.layoutSubscribe(function(t){if(e.app.isInModalSelection())return;n._updateCurrentSelectionFields(t)})})},getLibraryDimensions:function t(){var e=this.isCalculatedField,n=this.$scope;return n.app.getDimensionList().then(function(t){n.dimensions=t.filter(function(t){return t.qData.info.length>0&&!t.qData.info.some(e)&&"H"!==t.qData.grouping}).map(function(t){return{title:t.qData.labelExpression||t.qData.title,fieldName:t.qData.info[0].qName,qId:t.qInfo.qId}})})},isCalculatedField:function t(e){return"="===e.qName[0]},filterShown:function t(n,i){var o="",r=[];i.dimensionsFields=i.dimensions.filter(function(t){return!i.selectedFields.some(function(e){return t.fieldName===e.qField})});if(i.showFields){r=i.fields.filter(function(t){return!i.selectedFields.some(function(e){return e.qField===t.qField})});r=c.removeMeasureAndDetailsFields(r);i.dimensionsFields=i.dimensionsFields.concat(r.filter(function(t){return!i.dimensions.some(function(e){return t.qField===e.fieldName})}))}if(i.filter.length>0){o=i.filter.toLowerCase();r=i.dimensionsFields.filter(function(t){return-1!==t.title.toLowerCase().indexOf(o)});i.dimensionsFields=r}s.localeOrderBy(i.dimensionsFields,function(t){return t.title});i.showNoMatches=0===i.dimensionsFields.length&&!this.ignoreUpdates&&i.filter.length>0;e.$apply(i,function(){n.notifyCallbacks(n)})},addCallback:function t(e,n){this.callbacks.push({type:e,fn:n})},notifyCallbacks:function t(e){if(!e.hasLoaded)return;if(e.ignoreUpdates)return;e.callbacks.forEach(function(t){"fields"!==t.type&&"dimensions"!==t.type||t.fn()})},setIgnoreUpdates:function t(e){this.ignoreUpdates=e}});x.$inject=["$scope","qvGlobalSelectionsService"];e.directive("qvGlobalSelections",["$document","qvSelectionToolbarService","$timeout",function(e,i,s){return{restrict:"E",template:n,controller:x,require:["qvGlobalSelections"],scope:{app:"="},replace:true,link:function n(o,r,a,c){o.toolbar=!!e.find(".qui-toolbar,.qs-toolbar")[0];var u=c[0],f=function t(){u.ignoreUpdates=false},g=function t(){o.selectionToolbarOpen=false;s(function(){u.handleCurrentSelectionFields()})},v=function t(){o.selectionToolbarOpen=true};i.Closed.bind(g);i.Opened.bind(v);e.on("keyup"+y,function(t){27===t.which?u.ignoreUpdates=false:13===t.which&&(u.ignoreUpdates=false)});h.getFlag("ALT_STATE_ONE")&&p.getSelectionStates(o.app).then(function(t){t.splice("$",1);o.hasStatesOtherThanDefault=t.length>0});d(e[0].body).tap({id:y,options:{preventDefault:false},start:function e(n){var i=t(n.target).closest(".qv-gs-badge").length>0,s=t(n.target).closest(".qv-gs-listbox").length>0,o=t(n.target).closest(".qv-selection-toolbar").length>0;u.ignoreUpdates=s&&!i&&!o}});l.on("start",f);o.$on("$destroy",function(){u.callbacks=[];i.Closed.unbind(g);i.Opened.unbind(v);d(e[0].body).off("*",y);e.off(y);l.off("start",f);u.subscription&&u.subscription.dispose()});o.onEnter=function(t){t.stopPropagation();t.target.blur()}}}}]);return'<qv-global-selections app="app"></qv-global-selections>'}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-global-selections" ng-class="{\'toolbar\': toolbar, \'selection-toolbar-open\': selectionToolbarOpen, \'insights-active\': showInsights && selInsightsEnabled }">\n\t<div class="qv-gs-sections">\n\t<section class="qv-gs-section qv-gs-top" tid="globalSelections.topSection" ng-class="{\'qv-gs-section-margin\' : showInsights && !disableSelectionInsights}">\n\t\t<header class="qv-gs-header">\n\t\t\t<h2 ng-if="!hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections"></h2>\n\t\t\t<h2 ng-if="hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections.Default"></h2>\n\t\t\t<div class="show-insights-btn" ng-show="selInsightsEnabled && !showInsights && !disableSelectionInsights">\n\t\t\t\t<button tid="explore-selections-button" class="lui-button show-insights--button" ng-click="showInsightsPanel()">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--lightbulb"></span><span class="lui-button__text"  q-translation="ExploreSelections.ExploreSelectionsBtn"></span>\n\t\t\t\t</button></div>\n\t\t</header>\n\t\t<div class="qv-gs-no-selections" ng-if="selectedFields.length == 0">\n\t\t\t<div class="qv-gs-no-selections-content">\n\t\t\t\t<div class="qv-qs-no-selections-image"></div>\n\t\t\t\t<div class="qv-qs-no-selections-title" q-translation="GlobalSelections.NoSelections"></div>\n\t\t\t\t<div class="qv-qs-no-selections-body" q-translation="GlobalSelections.NoSelectionsBody"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div qv-global-select-section="{ itemSize: 220, itemSpacing: 20, type: \'fields\' }" all-items="selectedFields" app="app"></div>\n\t</section>\n\n\t<section class="qv-gs-section" tid="globalSelections.bottomSection" ng-class="{\'qv-gs-section-margin\' : showInsights && !disableSelectionInsights}">\n\t\t<header class="qv-gs-header">\n\t\t\t<h2 q-translation="GlobalSelections.AppDimensions"></h2>\n\t\t\t<lui-checkbox class="global-show-fields-checkbox" x-model="showFields" title="{{\'GlobalSelections.ShowFields\'|translate}}" tid="globalSelections.showFields">{{\'GlobalSelections.ShowFields\'|translate}}</lui-checkbox>\n\t\t\t<lui-search  class="qv-gs-searchfield" placeholder="{{showFields ? \'GlobalSelections.FilterDimensionsAndFields\' : \'GlobalSelections.FilterDimensions\'}}" query="filter" maxlength="255"\n\t\t\t\t\t\t\t tid="globalSelections.searchField" on-escape="handleEscape($event)" auto-focus="autoFocus" on-enter="onEnter($event)"></lui-search>\n\t\t</header>\n\n\t\t<div class="qv-gs-info" ng-if="!dimAvailable && !showFields">\n\t\t\t<h2 q-translation="GlobalSelections.DimensionsWarning"></h2>\n\t\t</div>\n\t\t<div class="qv-gs-info" ng-if="showNoMatches">\n\t\t\t<h2 q-translation="GlobalSelections.NoMatchesForSearch"></h2>\n\t\t</div>\n\t\t<div qv-global-select-section="{ itemSize: 220, itemSpacing: 20, type: \'dimensions\'}" all-items="dimensionsFields" filter="filter" app="app"></div>\n\n\t</section>\n\t</div>\n\n\t<div tid="selection-insights-container" class="qv-insights-container" ng-if="selInsightsEnabled && showInsights && !disableSelectionInsights">\n\t\t<qv-selection-insights show-fields="showFields"></qv-selection-insights>\n\t</div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(836),n(92),n(141),n(153),n(97),n(89),n(206),n(179),n(270),n(11),n(90),n(104),n(251),n(114),n(99),n(176),n(244)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g){function v(t,e){while(t.length>e)t.pop()}var m=c.extend({init:function t(){this.resetColumnIndex();this._super.apply(this,arguments)},resetColumnIndex:function t(){this.columnIndex=0},setList:function t(e){this.list=e;this.scrollApi.setTotalRows(this.list.length);this.setItems(this.columnIndex,this.scrollApi.settings.blockSize);this.scrollApi.updateLoadingButtons()},onInitialNativeScroll:function t(){return r.resolve()},onGotoNextBlock:function t(){var e=this._super.apply(this,arguments).then(function(){this.columnIndex=this.getFirstElementIndex()}.bind(this));return e},onGotoPreviousBlock:function t(){var e=this._super.apply(this,arguments).then(function(){this.columnIndex=this.getFirstElementIndex()}.bind(this));return e}}),b=l.extend({resetNativeScroll:function t(){this.$scrollArea.scrollLeft(0)},alignToFirstRow:function t(){var e=this.getFirstRow(),n=e.children(".qv-object-wrapper").attr("id"),i=260;return function(){var t=u(this.$scrollArea.find("#"+n)),e;if(t.length>0){e=t.offset().left-i;this.$scrollArea.scrollLeft(e)}}.bind(this)},alignToLastRow:function t(){var e=this.getLastRow(),n=e.children(".qv-object-wrapper").attr("id"),i=250;return function(){var t=u(this.$scrollArea.find("#"+n)),e;if(t.length>0){this.$scrollArea.scrollLeft(0);e=t.parent().position().left-this.getScrollAreaBoundingBox().width+t[0].getBoundingClientRect().width+i;this.$scrollArea.scrollLeft(e)}}.bind(this)},getBoundingBox:function t(){var e=this._super.apply(this,arguments);return new p(e.top,e.left,e.height,e.width)}}),y=n.extend({size:{width:0,height:0},itemSize:0,itemSpacing:0,$element:void 0,init:function t(e,n,i){this.$scope=e;this.$timeout=n;this.selectionToolbarService=i;this.$scope.items=[];this.$scope.options={direction:f.direction}},initialize:function t(e,n,i){this.setSize(n);this.setItemSize(i.itemSize);this.setItemSpacing(i.itemSpacing);this.setElement(e.find(".qv-gs-scroll-area"));this.setItems();this.initialized=true},updateVisible:function t(){var e=this.offsetX-(this.$scope.scrollApi.loadPrevious?1:0),n=this.visibleItemsCount;this.$scope.items.forEach(function(t,i){var s=i>=e&&i<e+n;!t.visible&&s&&(t.options={isPopOver:false,highlightTitle:true,direction:f.direction});s&&!t.model&&this.getModel(t).then(function(t,e){t.model=e}.bind(null,t));t.visible=s},this)},getModel:function t(e){var n=this.getInitProps(e.title),s;e.qField?s=i.createTransientField(this.$scope.app,e.qField,n):e.qId&&(s=i.createTransientDimension(this.$scope.app,e.qId,n));return s},onScroll:function t(){this.qvGlobalSelectionsCtrl.setIgnoreUpdates(false);this.selectionToolbarService.confirm();this.updateHighlights();this.$timeout.cancel(this.scrollTimeout);this.scrollTimeout=this.$timeout(function(){this.updateVisible();this.updateHighlights()}.bind(this),100)},onResize:function t(e){this.setSize(e);this.updateVisible()},updateHighlights:function t(){this.$scope.items.forEach(function(t){t.options.highlightQuery=this.$scope.filter},this)},setItems:function t(){var e,n,i,s=this.$scope,o=this.totalItemsCount;s.items.length!==o&&v(s.items,o);for(e=0;e<o;e++){n=s.items[e]||{};i=s.scrollApi.items[e];i.enableBadge&&(n.enableBadge=i.enableBadge);n.model||(n.options={isPopOver:false,highlightTitle:true,direction:f.direction});if(i.qField){delete n.qId;if(!n.model||n.qField!==i.qField){if(n.visible){s.items[e]=d.extend(true,{},n);n=s.items[e];delete n.$$hashKey;delete n.options.search}n.title=i.title;n.qField=i.qField;n.id=h.sha256(n.qField);delete n.model}}else if(i.qId){delete n.qField;if(!n.model||n.qId!==i.qId){if(n.visible){s.items[e]=d.extend(true,{},n);n=s.items[e];delete n.$$hashKey;delete n.options.search}n.title=i.title;n.qId=i.qId;n.id=h.sha256(n.qId);delete n.model}}s.items[e]||(s.items[e]=n)}this.updateVisible()},getInitProps:function t(e){var n={title:e,qListObjectDef:{qDef:{}}};s.autoSortDimension(n.qListObjectDef);return n},getWidthOf:function t(e){return this.totalItemSize*e-this.itemSpacing},setItemSize:function t(e){this.itemSize=e||220},setItemSpacing:function t(e){this.itemSpacing=e||20},setSize:function t(e){this.size=e},setElement:function t(e){this.$element=e;this.$element.on("scroll",this.onScroll.bind(this))}});Object.defineProperties(y.prototype,{vPosX:{get:function t(){return this.$element.scrollLeft()}},totalItemSize:{get:function t(){return this.itemSize+this.itemSpacing}},visibleItemsCount:{get:function t(){var e=Math.ceil(((this.vPosX+(this.previousBtnVisible?240:0))%this.totalItemSize+this.size.width)/this.totalItemSize);return Math.min(e,this.totalItemsCount+(this.previousBtnVisible?1:0))}},totalItemsCount:{get:function t(){return(this.$scope.scrollApi.items||[]).length}},offsetX:{get:function t(){return Math.floor(this.vPosX/this.totalItemSize)}},previousBtnVisible:{get:function t(){return!!this.$scope.scrollApi.loadPrevious}}});y.$inject=["$scope","$timeout","qvSelectionToolbarService"];t.directive("qvGlobalSelectSection",["$parse","$timeout",function(t,n){return{controller:y,require:["qvGlobalSelectSection","^qvGlobalSelections"],template:e,replace:true,scope:{allItems:"=",filter:"=",app:"="},link:function e(i,s,r,l){var c=l[0],u=l[1],d=t(r.qvGlobalSelectSection)(),p={},h=s.find(".qv-gs-scroll-area"),f=h.controller("qvScrollArea"),v=s.find(".qv-scroll-loader").controller("qvScrollLoader"),y={blockSize:24,minRowHeight:240,maxRowHeight:240,keepItemsCount:4,virtualScrollEnabled:false},x=new a(n,y),q=new m(x),S=new b(s,h,".qv-gs-listbox",".qv-gs-listbox:first",".qv-gs-listbox:last"),w=null,C=function t(){p.width=s.innerWidth();p.height=s.innerHeight();c.onResize(p)};i.scrollApi=x;c.qvGlobalSelectionsCtrl=u;x.initialize(S,q,f,v).then(function(){x.activate();x.updateViewport();i.$watch("filter",function(){q.resetColumnIndex();x.resetNativeScroll()});i.$watch("allItems",function(t){if(!t)return;q.setList(t);w&&w();w=i.$watch("scrollApi.items",function(){var e=!g.treatAsDesktop();if(u.ignoreUpdates&&!e)return;if(0===x.items.length&&i.allItems.length>0){x.resetNativeScroll();q.resetColumnIndex();q.setList(t)}c.initialized&&c.setItems()})})}).catch(function(t){false});n(function(){p.width=s.innerWidth();p.height=s.innerHeight();c.initialize(s,p,d)});o.on("end",C);i.$on("$destroy",function(){o.off("end",C);x.destroy()});u.addCallback(d.type,function(){c.$timeout(function(){c.setItems();c.$timeout(function(){c.updateHighlights()})})})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-gs-scroll-container">\n\t<qv-scroll-area class="qv-gs-scroll-area">\n\t\t<div ng-if="scrollApi.loadPrevious" class="qv-gs-scroll-btn qv-gs-scroll-btn-previous" tid="globalSelections.loadPrevious">\n\t\t\t<qv-scroll-load-button tag="div" class="qv-listbox-load-buttons" on-load="scrollApi.gotoPreviousBlock()" text="Object.Listbox.LoadPrevious" previous="true"></qv-scroll-load-button>\n\t\t</div>\n\t\t<div ng-repeat="item in items" class="qv-gs-listbox">\n\t\t\t<qv-object ng-if="item.visible" model="item.model" options="item.options" object="item.object" class="qv-object-listbox" id="{{item.id}}"></qv-object>\n\t\t\t<div ng-if="!item.visible" class="qv-object qv-object-listbox qv-gs-placeholder" id="{{item.id}}">\n\t\t\t\t<h1 class="qv-object-title" qva-direction x-dir-text="{{item.title}}">\n\t\t\t\t\t<span class="qv-object-title-text" qva-direction x-dir-text="{{item.title}}">{{item.title}}</span>\n\t\t\t\t</h1>\n\t\t\t\t<div class="progress">\n\t\t\t\t\t<qv-rain></qv-rain>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<p ng-if="item.qField" q-title-translation="Common.Field" tid="globalSelections.fieldIndicator" class="qv-gs-field-indicator" qva-direction>\n\t\t\t\t<span class="lui-icon  lui-icon--field"></span>\n\t\t\t</p>\n\t\t\t<qv-gs-badge></qv-gs-badge>\n\t\t</div>\n\t\t<div ng-if="scrollApi.loadNext" class="qv-gs-scroll-btn" tid="globalSelections.loadNext">\n\t\t\t<qv-scroll-load-button tag="div" class="qv-listbox-load-buttons" on-load="scrollApi.gotoNextBlock()" text="Object.Listbox.LoadMore"></qv-scroll-load-button>\n\t\t</div>\n\t</qv-scroll-area>\n\t<qv-scroll-loader tag="li" class="qv-scroll-row-loader"></qv-scroll-loader>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(838),n(288)],s=function(t,e,n){function i(e,n){var i=n[2];t.$apply(t.$rootScope,function(){e.item.showBadge=(void 0===n[0]||false===n[0])&&false===n[1]&&!i})}t.directive("qvGsBadge",function(){return{restrict:"E",template:e,replace:true,link:function t(e){if(e.item.enableBadge){e.item.object||(e.item.object={});e.$watchCollection("[item.model.layout.qListObject.qDimensionInfo.qLocked, item.object.selectionsApi.active, item.object.model.layout.qListObject.qDimensionInfo.qIsOneAndOnlyOne]",function(t){i(e,t)});e.badgeClick=function(t){var e=new n(t.model);return e.beginSelections().then(function(){return e.clearSelections().then(function(){return e.endSelections(true)})})}}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-gs-badge" ng-if="item.showBadge" q-title-translation="Tooltip.clearSelection" tid="globalSelections.badge" ng-click="badgeClick(item)">\n\t<span class="lui-icon lui-icon--remove"></span>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(840),n(132),n(134),n(154),n(112),n(89),n(93),n(106),n(141),n(148),n(184),n(142),n(95),n(105),n(49),n(175),n(841),n(843),n(271),n(240),n(289)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g){function v(e,n){var i="",s=[];e.selectables=n.dimensions.filter(function(t){return!e.selectedFields.some(function(e){return t.qField===e.qField})});if(true===e.filter.showFields){s=n.fields.filter(function(t){return!e.selectedFields.some(function(e){return e.qField===t.qField})});s=u.removeMeasureAndDetailsFields(s);e.selectables=e.selectables.concat(s.filter(function(t){return!n.dimensions.some(function(e){return t.qField===e.qField})}))}if(e.filter.filter.length>0){i=e.filter.filter.toLowerCase();s=e.selectables.filter(function(t){return-1!==t.title.toLowerCase().indexOf(i)});e.selectables=s}o.localeOrderBy(e.selectables,function(t){return t.title});t.$apply(e)}function m(t){return t.every(function(t){return t.qLocked})}function b(e,i){var s=new r,o=t.getService("qvCurrentSelectionsService");n.get().then(function(t){e.currentSelectionsModel=t;l(e,"currentSelectionsModel",function(t){e.disable={clear:0===t.qSelectionObject.qSelections.length||m(t.qSelectionObject.qSelections),back:0===t.qSelectionObject.qBackCount,forward:0===t.qSelectionObject.qForwardCount};e.selectedFields=t.qSelectionObject.qSelections.filter(function(t){return!t.qIsHidden}).sort(p.sortSelections);e.selectedFields.forEach(function(t){t.translation=o.translate(t)});i.hasLoaded&&v(e,i)});s.resolve()});return s.promise}function y(t){var e=function t(e){return"="===e.qName[0]},n=new r;i.getList().then(function(i){i.getLayout().then(function(i){t.dimensions=i.filter(function(t){return t.qData.info.length>0&&!t.qData.info.some(e)&&"H"!==t.qData.grouping}).map(function(t){return{title:t.qData.title,qField:t.qData.info[0].qName,qId:t.qInfo.qId}});n.resolve()})});return n.promise}function x(t){var e=new r;s.getList().then(function(t){return t.getLayout()}).then(function(n){t.fields=n.map(function(t){return{title:t.qName,qField:t.qName,qTags:t.qTags,isField:true}});e.resolve()});return e.promise}var q=["$scope","qvGlobalSelectionsService",function(e,n){var i={hasLoaded:false,dimensions:[],fields:[]};e.filter={};a.getApp().then(function(s){e.app=s;e.selectedFields=[];e.filter.filter="";e.filter.showFields=n.getShowFields(s);e.filter.onEnter=function(t){t.stopPropagation();t.target.blur()};e.selectables=[];e.enableMenu=true;e.disable={clear:false,back:false,forward:false};t.getService("qvChartTooltipService").close();r.all({selectionsDfd:b(e,i),dimensionsDfd:y(i),fieldsDfd:x(i)}).then(function(){i.hasLoaded=true;e.enableMenu=i.fields.length>0;if(i.dimensions.length<=0&&e.enableMenu){e.filter.showFields=true;n.setShowFields(e.filter.showFields,s)}e.$watch("filter",function(){v(e,i)},true)})})}];t.directive("qvMobileSelections",["qvGlobalSelectionsService","qvListboxPopoverServiceMobile",function(t,n){return{restrict:"E",template:e,controller:q,replace:true,require:["qvMobileSelections"],scope:{},link:function e(i,s){var o,l=function t(){s.find(".qv-ms-scroll-area").animate({scrollTop:0})},u=d.createGroup("mobile-selections",0);u.registerKeys("enter",function(){});u.on();document.activeElement&&document.activeElement.blur();g.getFlag("ALT_STATE_ONE")&&a.getApp().then(function(t){p.getSelectionStates(t).then(function(t){t.splice("$",1);i.hasStatesOtherThanDefault=t.length>0})});i.close=function(e){e.preventDefault();t.toggleGlobalSelection(i.app);h.publish(f.Events.PubSub.RestoreSearchState)};i.selectionsBack=function(){i.disable.back||i.currentSelectionsModel.back()};i.selectionsForward=function(){i.disable.forward||i.currentSelectionsModel.forward()};i.selectionsClear=function(){i.disable.clear||i.currentSelectionsModel.clearAll()};i.toggleTooltip=i.filter.showFields?"GlobalSelections.HideFields":"GlobalSelections.ShowFields";i.toggleMenu=function(){i.filter.showFields=!i.filter.showFields;i.toggleTooltip=i.filter.showFields?"GlobalSelections.HideFields":"GlobalSelections.ShowFields";a.getApp().then(function(e){t.setShowFields(i.filter.showFields,e)})};i.$on("showListbox",function(t,e){var u={title:e.qReadableName||e.title,qListObjectDef:{qDef:{}}},d=-1!==i.selectedFields.indexOf(e),p=function t(){i.currentSelectionsModel.getLayout().then(function(t){var n;if(!d){n=t.qSelectionObject.qSelections.some(function(t){return e.qField===t.qField});if(n){o.resolve();return}}o.reject()})},h=function t(e){o&&o.reject();o=new r;o.promise.then(l);s.children(".qv-ms-searchbox").find("input").blur();n.show(e,{showLock:true},p)};a.getApp().then(function(t){e.qField?c.createTransientField(t,e.qField,u).then(h):c.createTransientDimension(t,e.qId,u).then(h)})});i.$on("$destroy",function(){o&&o.reject();u.delete()})}}}]);return"<qv-mobile-selections></qv-mobile-selections>"}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-mobile-selections" tid="{{\'mobileSelections.showFields.\' + filter.showFields}}">\n\t<div class="qv-ms-toolbar">\n\t\t<p ng-click="selectionsBack()" ng-class="{\'qv-ms-button-disabled\' : disable.back, \'qv-ms-button-enabled\': !disable.back}" class="lui-icon lui-icon--selections-back qv-ms-toolbar-buttons" tid="mobileSelections.back" q-title-translation="Tooltip.NavigateBack"></p>\n\t\t<p ng-click="selectionsForward()" ng-class="{\'qv-ms-button-disabled\' : disable.forward, \'qv-ms-button-enabled\': !disable.forward}" class="qv-ms-toolbar-buttons lui-icon lui-icon--selections-forward" tid="mobileSelections.forward" q-title-translation="Tooltip.NavigateForward"></p>\n\t\t<p ng-click="selectionsClear()" ng-class="{\'qv-ms-button-disabled\' : disable.clear, \'qv-ms-button-enabled\': !disable.clear}" class="qv-ms-toolbar-buttons lui-icon lui-icon--clear-selections" tid="mobileSelections.clear" q-title-translation="Tooltip.ClearSelections"></p>\n\t\t<p ng-click="toggleMenu()" ng-class="{\'qv-ms-button-disabled\' : !enableMenu, \'qv-ms-button-enabled\': enableMenu, \'qv-ms-button-menu-active\': filter.showFields }" class="qv-ms-toolbar-buttons lui-icon\tlui-icon--settings" id="mobileSelectionsToggle" tid="mobileSelections.toggleFields" q-title-translation="{{toggleTooltip}}"></p>\n\n\t\t<qui-toolbarbutton ng-click="close($event)" name="close" class="qv-ms-toolbar-close" tid="mobileSelections.close">\n\t\t\t<span q-translation="Common.Close" class="qv-ms-toolbar-close-text"></span>\n\t\t</qui-toolbarbutton>\n\t</div>\n\t<header class="qv-ms-header">\n\t\t<h2 ng-if="!hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections"></h2>\n\t\t<h2 ng-if="hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections.Default"></h2>\n\t</header>\n\t<lui-search x-variant="inverse" class="qv-ms-searchbox" placeholder="{{filter.showFields ? \'GlobalSelections.FilterDimensionsAndFields\' : \'GlobalSelections.FilterDimensions\'}}" query="filter.filter" maxlength="255"\n\t\ton-enter="filter.onEnter($event)" tid="mobileSelections.searchfield">\n\t</lui-search>\n\t<div class="qv-ms-scroll-area">\n\t\t<qv-ms-selected ng-repeat="item in selectedFields"></qv-ms-selected>\n\t\t<div class="qv-ms-selectable" ng-if="filter.filter.length && (!selectables || selectables.length === 0)">\n\t\t\t<span q-translation="GlobalSelections.NoMatchesForSearch"></span>\n\t\t</div>\n\t\t<qv-ms-selectable ng-repeat="item in selectables"></qv-ms-selectable>\n\t</div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(842)],s=function(t,e){t.directive("qvMsSelectable",["$timeout",function(t){return{restrict:"E",replace:true,template:e,link:function e(n){n.showSelectable=function(){n.item.flash=true;t(function(){n.$emit("showListbox",n.item);n.item.flash=false},20)}}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div ng-click="showSelectable()" ng-class="{\'qv-ms-touch-flash\' : item.flash}" class="qv-ms-selectable" tid="mobileSelections.selectable">\n\t<span ng-if="item.isField" class="lui-icon  lui-icon--field"></span>\n\t<div class="qv-ms-highlight">\n\t\t<span qve-highlight text="{{item.title}}" query="filter.filter"></span>\n\t</div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(844)],s=function(t,e){t.directive("qvMsSelected",function(){return{restrict:"E",replace:true,template:e,link:function t(e){e.showSelected=function(){e.$emit("showListbox",e.item)};e.clear=function(t){e.currentSelectionsModel.clearField(t)}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-ms-selected" tid="mobileSelections.selected">\n\t<div class="qv-ms-selected-icon">\n\t\t<a ng-show="!item.qLocked && !item.qOneAndOnlyOne" ng-click="clear(item.qField)">\n\t\t\t<i class="lui-icon  lui-icon--remove"></i>\n\t\t</a>\n\t\t<a ng-show="item.qLocked" ng-click="showSelected(item.qField)">\n\t\t\t<i class="lui-icon lui-icon--lock"></i>\n\t\t</a>\n\t</div>\n\t<div ng-click="showSelected(item.qField)" class="qv-ms-selected-info" ng-class="{ \'no-icon\': item.qOneAndOnlyOne }">\n\t\t<h1 class="qv-object-title">{{item.qReadableName || item.qField}}</h1>\n\t\t<span>{{item.translation}}</span>\n\t\t<qv-state-count-bar state-counts="item.qStateCounts"></qv-state-count-bar>\n\t</div>\n</div>\n'},,,,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(94),n(122),n(362)],s=function(t,e,n){var i;function s(){i||(i=t.getService("$navigationService"));return i}function o(){return s().Sheets.all.mashed}function r(){return s().Stories.all.mashed}function a(t){var n=e.model.id;var i=-1;t.forEach(function(t,e){t.qInfo.qId===n&&(i=e)});return i}function l(t,e){var n;e.forEach(function(e){e.qInfo.qId===t&&(n=e)});return n}function c(t,e){var n;e.forEach(function(e){e.qInfo.qId===t&&(n=e)});return n}function u(t){n.goToSheet(t,Object.keys(e.States)[e.state]);return{success:true,sheetId:t}}function d(t){n.goToStory(t,Object.keys(e.States)[e.States.play]);return{success:true,storyId:t}}function p(t,e,n){this.inClient=t;Object.defineProperties(this,{ANALYSIS:{get:function t(){return"analysis"}},EDIT:{get:function t(){return"edit"}},SNAPSHOT:{get:function t(){return"snapshot"}},sheets:{get:function n(){return t?o(this):e||[]}},stories:{get:function e(){return t?r(this):n||[]}}})}p.prototype.gotoSheet=function(t){var e=l(t,this.sheets);if(e)return u(t);return{success:false,error:"NOSUCHSHEET",errorMsg:"No such sheet"}};p.prototype.nextSheet=function(){if((e.view===e.Views.sheet||e.view===e.Views.object)&&e.model){var t=a(this.sheets)+1;var n=this.sheets[t===this.sheets.length?0:t].qInfo.qId;return u(n)}return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};p.prototype.prevSheet=function(){if((e.view===e.Views.sheet||e.view===e.Views.object)&&e.model){var t=a(this.sheets)-1;var n=this.sheets[t<0?this.sheets.length-1:t].qInfo.qId;return u(n)}return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};p.prototype.getCurrentSheetId=function(){if(e.view===e.Views.sheet&&e.model)return{success:true,sheetId:e.model.id};return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};p.prototype.getMode=function(){return Object.keys(e.States)[e.state]};p.prototype.setMode=function(t){if(!this.isModeAllowed(t))return{success:false,error:"MODENOTALLOWED",errorMsg:"Mode not allowed"};e.setState(e.States[t]);return{success:true,mode:t}};p.prototype.isModeAllowed=function(t){switch(t){case this.ANALYSIS:return true;case this.EDIT:return this.inClient&&e.model.layout&&e.model.layout.permissions&&e.model.layout.permissions.update;case this.SNAPSHOT:return this.inClient}return false};p.prototype.gotoStory=function(t){var e=c(t,this.stories);if(e)return d(t);return{success:false,error:"NOSUCHSTORY",errorMsg:"No such story"}};return p}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(239)],s=function(t){function e(){this._options=null;this._appid=null;this._type=null;this._cols=null;return window.Reflect?window.Reflect.construct(HTMLElement,[],this.constructor):null}e.prototype=Object.create(HTMLElement.prototype);e.prototype.constructor=e;Object.setPrototypeOf(e,HTMLElement);e.prototype.connectedCallback=function(){i(this)};Object.defineProperty(e.prototype,"options",{get:function t(){return this._options},set:function t(e){this.setAttribute("options",e)}});e.observedAttributes=["options","appid","config"];e.prototype.attributeChangedCallback=function(t,e,o){if("options"===t&&this.vis){var r=JSON.parse(o);this.vis.setOptions(r)}else{s(this);"appid"!==t&&"config"!==t||n(this);i(this)}};e.prototype.disconnectedCallback=function(){s(this)};e.init=function(){window.customElements&&window.customElements.define&&customElements.define("qlik-visual",e)};return e;function n(e){var n=e.getAttribute("appid");if(n){var i=JSON.parse(e.getAttribute("config"));e.app=t.openApp(n,i)}else e.app=t.currApp()}function i(t){var e=t.getAttribute("visid"),i=JSON.parse(t.getAttribute("options"));t.app||n(t);if(t.app&&e)t.app.visualization.get(e).then(function(e){t.vis=e;i&&e.setOptions(i);e.show(t)});else if(t.app){var s=JSON.parse(t.getAttribute("cols")),o=t.getAttribute("type")||"barchart";t.app.visualization.create(o,s,i).then(function(e){t.vis=e;e.show(t)})}}function s(t){if(t.vis){t.vis.close();delete t.vis}}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-panel-subtoolbar qv-panel-current-selections" ng-class="{smallDevice: isSmallDevice, bright: brightCurSel, \'expand-smart-search-suggested-chart\': expandSmartSearchSuggestedChart}">\n\t<div ng-if="!isSmallDevice">\n\t\t<div class="qv-selections-pager" ng-class="{\'client-tab-navigation--bright\' : clientTabNavigation }">\n\t\t\t<div class="buttons borderbox border-bottom border-right" aria-hidden="true">\n\n\t\t\t\t<div tid="toggleGlobalSearchButton" tabindex="0" class="qv-subtoolbar-button toggle-button borderbox" ng-hide="hideSearch" ng-class="{active: isGlobalSearchActive, indexing: isGlobalSearchIndexing}" ng-click="toggleGlobalSearch()" q-title-translation="{{isGlobalSearchActive ? \'Tooltip.CloseGlobalSearch\' : \'Tooltip.GlobalSearch\'}}">\n\t\t\t\t\t<i class="lui-icon lui-icon--selection-search icon"></i>\n\t\t\t\t\t<div class="label" q-translation="GlobalSearch.Preparing" q-title-translation="GlobalSearch.Preparing.Tooltip"></div>\n\t\t\t\t\t<qv-progress-bar ng-if="isGlobalSearchIndexing" percent-done="indexPercentDone" on-completed="setSearchIndexingDone()" options="progressBarOptions"></qv-progress-bar>\n\t\t\t\t</div>\n\n\t\t\t\t<button class="qv-subtoolbar-button borderbox" ng-hide="hideUndoRedo" ng-click="back()" ng-disabled="disable.back" q-title-translation="Tooltip.NavigateBack" data-tid="current-selections-back">\n\t\t\t\t\t<i class="lui-icon lui-icon--selections-back"></i>\n\t\t\t\t</button>\n\n\t\t\t\t<button class="qv-subtoolbar-button borderbox" ng-hide="hideUndoRedo" ng-click="forward()" ng-disabled="disable.forward" q-title-translation="Tooltip.NavigateForward" data-tid="current-selections-forward">\n\t\t\t\t\t<i class="lui-icon lui-icon--selections-forward"></i>\n\t\t\t\t</button>\n\n\t\t\t\t<button id="clearselections" class="qv-subtoolbar-button borderbox" ng-disabled="disable.clear" ng-hide="hideClearSelections" ng-click="clearAllFields()" q-title-translation="Tooltip.ClearSelections" data-tid="current-selections-clear">\n\t\t\t\t\t<i class="lui-icon lui-icon--clear-selections"></i>\n\t\t\t\t</button>\n\n\t\t\t</div>\n\t\t\t<div class="selections-shadow" ng-if="showShadow"></div>\n\t\t\t<div class="wrap borderbox" style="height: 100%;" qv-pager qv-selection-pager>\n\t\t\t\t<ul class="list" ng-show="!isGlobalSelectionsActive || (items.length > 0 && currentSelectionDisabled) || (items.length > 0 && !isGlobalSelectionsActive)" qva-delegated-activate=".item#showPopover($event)" qva-outside-ignore-for="currentSelectionsItems">\n\t\t\t\t\t<li class="item" ng-class="{\'item-multi-state\': !item.isSingleState, \'multi-active\': multiPopoverFieldName && multiPopoverFieldName === item.qField, \'selection-insights-disabled\': currentSelectionDisabled}" ng-repeat="item in items track by item.qField" data-csid="{{item.qField}}" tabindex="0"\n\t\t\t\t\t ng-keydown="handleKeyDown($event, item)" aria-label="{{item.screenReaderLabel}}">\n\t\t\t\t\t\t<qv-current-selections-item ng-if="item.isSingleState" item="item" current-selection-disabled="currentSelectionDisabled"></qv-current-selections-item>\n\t\t\t\t\t\t<div ng-if="!item.isSingleState" class="current-selections-item" ng-mousemove="openTooltip($event, item)" ng-mouseleave="closeTooltip()">\n\t\t\t\t\t\t\t<div class="item-component label">\n\t\t\t\t\t\t\t\t<span ng-class="{ \'lui-icon lui-icon--lock\': item.qLocked }"></span><span class="name">{{item.name}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-component count" title="">\n\t\t\t\t\t\t\t\t<span class="field-states-indicator">{{ item.states.length }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-component caret">\n\t\t\t\t\t\t\t\t<span class="lui-icon lui-icon--arrow-down"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="currentSelectionDisabled" class="current-selections-disabled"></div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\n\t\t\t\t<div ng-if="!items.length && !haveHiddenSelections" class="empty-text no-selection borderbox" q-translation="CurrentSelections.NoSelections"></div>\n\t\t\t\t<div ng-if="!items.length && haveHiddenSelections" class="empty-text no-selection borderbox" q-translation="CurrentSelections.OnlyHiddenSelections"></div>\n\t\t\t\t<a class="qv-pager-nav qv-pager-previous" ng-class="{inverted: brightCurSel}" ng-click="prevPage()" q-title-translation="Tooltip.Previous"><i class="lui-icon lui-icon--arrow-left"></i></a>\n\t\t\t\t<a class="qv-pager-nav qv-pager-next" ng-class="{inverted: brightCurSel}" ng-click="nextPage()" q-title-translation="Tooltip.Next"><i class="lui-icon lui-icon--arrow-right"></i></a>\n\t\t\t</div>\n\t\t\t<div class="buttons-end borderbox border-left">\n\t\t\t\t<div aria-hidden="true" class="qv-subtoolbar-button qv-explore-selections-btn toggle-button borderbox" tabindex="0" ng-class="{active: isGlobalSelectionsActive}" ng-hide="hideSelectionsTool" ng-click="toggleGlobalSelection($event)" q-title-translation="{{isGlobalSelectionsActive ? \'Tooltip.CloseGlobalSelector\' : \'Tooltip.GlobalSelector\'}}"\n\t\t\t\t tid="currentSelections.toggleGlobalSelections">\n\t\t\t\t\t<i class="lui-icon lui-icon--global-selector icon"></i>\n\t\t\t\t\t<span id="explore-selections-label" q-translation="CurrentSelections.ExploreSelectionsBtn"></span>\n\t\t\t\t</div>\n\n\t\t\t\t<div aria-labelledby="insights-label" tid="toggleCaoButton" id="toggle-insights" tabindex="0" class="qv-subtoolbar-button toggle-button borderbox qv-insight-toggle-button" ng-if="options && options.enableCao" ng-class="{active: isCaoActive, bright: brightCurSel}" ng-click="toggleCao()"\n\t\t\t\t q-title-translation="{{isCaoActive ? \'cao.CloseCognitiveAssociativeOverlay\' : \'cao.CognitiveAssociativeOverlay\'}}">\n\t\t\t\t\t<i class="lui-icon lui-icon--analyze icon" aria-hidden="true"></i>\n\t\t\t\t\t<span id="insights-label" q-translation="cao.CognitiveAssociativeOverlayToggleButton"></span>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n\t<div ng-if="isSmallDevice && mobileIndicatorShow && !inSelection " ng-click="toggleGlobalSelection($event)" ng-class="{\'expand-smart-search-suggested-chart\': expandSmartSearchSuggestedChart}" class="qv-current-selections-mobile-wrapper" tid="currentSelections.toggleMobileSelections"\n\t q-title-translation="GlobalSelections.CurrentSelections">\n\t\t<div class="qv-current-selections-mobile-background">\n\t\t\t<p class="qv-current-selections-mobile-nbr" ng-class="{selections: nbrSelections > 0}">{{nbrSelections}}</p>\n\t\t</div>\n\t</div>\n</div>'},function(t,e){t.exports='<div qva-direction x-dir-setting={{options.direction}}" class="qv-tooltip qvt-generic-tooltip" ng-class="{\'above\':alwaysOnTop}">\n\t<div ng-repeat="item in content">\n\t\t<div qva-direction x-dir-text="{{item.header}}" x-dir-setting="{{options.direction}}" class="qv-tp-header">\n\t\t\t<strong>{{item.header}}</strong>\n\t\t</div>\n\t\t<table>\n\t\t\t<tr ng-repeat="row in item.rows" class="qv-tp-row">\n\t\t\t\t<td class=\'qv-tp-item\'>\n\t\t\t\t\t<div qva-direction x-dir-text="{{row.content}}" class="qv-tp-rowContent fade-out">{{row.content}}</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(184)],s=function(t,e,n){function i(i){var s={preventDefault:false,allowInInput:false};function o(){n.preventDefault();e.$rootScope.$apply()}function r(){i.inSelection&&t(document).trigger("qv-press");i.forward();o()}function a(){i.inSelection&&t(document).trigger("qv-press");i.back();o()}this.keyboardShortcutsGroup=n.createGroup("current-selection-"+i.app.id,1);this.keyboardShortcutsGroup.registerKeys("ctrl+shift+y",r,s);this.keyboardShortcutsGroup.registerKeys("ctrl+shift+z",a,s);this.keyboardShortcutsGroup.on();this.on=function(){if(!this._isOn){this.keyboardShortcutsGroup.on();this._isOn=true}};this.off=function(){if(this._isOn){this.keyboardShortcutsGroup.off();this._isOn=false}};this.delete=function(){this.keyboardShortcutsGroup.delete()}}return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(92)],s=function(t){var e=t.extend("CurrentSelectionsViewHelper",{init:function t(e,n,i,s,o,r){this.scope=e;this.responsiveState=n;this.globalSelectionService=i;this.exploreSelectionsService=s;this.globalSearchService=o;this.caoService=r},toggleGlobalSelection:function t(e){this.globalSelectionService.toggleGlobalSelection(e);this.responsiveState.isSmallDevice||this.globalSearchService.off();this.scope.isCaoActive=false;this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false},toggleExploreSelection:function t(e){this.globalSelectionService.off();this.scope.isExploreSelectionsActive=this.exploreSelectionsService.toggleExploreSelection(e);this.globalSearchService.off();this.scope.isCaoActive=false},toggleGlobalSearch:function t(e){this.globalSearchService.toggleGlobalSearch(this.scope.app.enigmaModel,e,this.scope.options.objectSearch);this.scope.isCaoActive=false;this.globalSelectionService.off();this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false},toggleCao:function t(e){this.scope.isCaoActive=this.caoService.toggleCao(e);this.globalSearchService.off();this.globalSelectionService.off();this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false}});return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(242)],s=function(t){t.widget("qv.pager",{options:{itemSelector:">li",orientation:"horizontal",pageSize:"auto",startPage:1,animationDuration:300},_create:function e(){var n=this.options;t.extend(this,{positionProperty:"horizontal"===n.orientation?"left":"top",sizeProperty:"horizontal"===n.orientation?"outerWidth":"outerHeight"});this.refresh();this.goToPage(n.startPage)},isItemInsidePage:function e(n){var i=t(n),s=i.position()[this.positionProperty]+i[this.sizeProperty](),o=Math.abs(parseFloat(i.parent().css("margin-"+this.positionProperty))),r=o+this.containerSize;return s>o&&s<r},calculatePageSize:function t(){return Math.floor(this.containerSize/this.calculateItemSize())},calculateItemSize:function t(){return this.element.find(this.options.itemSelector).eq(0)[this.sizeProperty]()},refresh:function t(){var e=this.currentPage||1;this.containerSize=this.element.parent()[this.sizeProperty]();this.pageSize="auto"===this.options.pageSize?this.calculatePageSize():this.options.pageSize;this.itemSize=this.calculateItemSize();this.maxPages=Math.ceil(this.element.find(this.options.itemSelector).length/this.pageSize||1);this.currentPage=Math.min(e,this.maxPages);this.goToPage(this.currentPage)},goToPage:function t(e){this.currentPage=Math.min(Math.max(1,e),this.maxPages);var n=(this.currentPage-1)*this.itemSize*this.pageSize,i={};i[this.positionProperty]=-n+"px";this.element.stop(true).animate(i,this.options.animationDuration)},goToPreviousPage:function t(){this.goToPage(this.currentPage-1)},goToNextPage:function t(){this.goToPage(this.currentPage+1)},goToPageContaining:function t(e){var n=Math.ceil(this.element.find(e).index()+1/this.pageSize);this.goToPage(n)},_destroy:function t(){this.element.off(this.eventNamespace)}});return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(10),n(48),n(856),n(94),n(140),n(103),n(168),n(155),n(49),n(89),n(176)],s=function(t,e,n,i,s,o){n.service("qvExploreSelectionsService",["$document","qvSelectionToolbarService",function(n,r){var a,l;var c=300;function u(){return{$container:void 0,$containerId:".qv-explore-selections-container",getComponent:function t(){return i},setup:function t(){o.get().then(function(t){s.StateChanged.bind(d.bind(null,d));t.enigmaModel.isInModalSelection()&&r.confirm()})},destroy:function t(){s.StateChanged.unbind(d)}}}function d(){(s.isInEditMode()||!s.isInAnalysisMode||s.inObjectView())&&f()}function p(i){s.setState(s.States.analysis);l.$container=e.element("<div>");i=i||n;i.find(l.$containerId).append(l.$container);l.$container.showComponent(l.getComponent());l.setup();t(".qv-explore-selections").slideDown(c)}function h(){return!(!l||void 0===l.$container)}function f(){if(!l)return;t(".qv-explore-selections").slideUp(c,function(){if(l.$container){l.$container.remove();l.$container=void 0}l.destroy()})}a={toggleExploreSelection:function t(e){l||(l=new u);if(h()){f();return false}p(e);return true},off:function t(){f()}};return a}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(857),n(858)],s=function(t,e){var n=["$scope",function(t){t.showFullModel=false;t.$on("$destroy",function(){})}];t.directive("qvExploreSelectionsComponent",function(){return{restrict:"E",template:e,controller:n,scope:true,replace:true,link:function t(e){e.target=null}}});return"<qv-explore-selections-component></qv-explore-selections-component>"}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-explore-selections overlay" id="qv-explore-selections-overlay" style="display:none;">\n\t<qv-selection-insights full="showFullModel"></qv-selection-insights>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(284),n(859),n(860),n(93),n(234),n(95),n(91),n(106),n(103),n(220),n(861),n(863),n(867)],s=function(t,e,n,i,s,o,r,a,l,c){var u={NO_SELECTIONS:0,GENERATE_INSIGHTS:1,INSIGHTS_FOUND:2,NO_INSIGHTS:3,UNSUPPORTED:4};var d={restrict:"E",bindings:{showFields:"<"},template:n,controller:["$scope","$timeout","qvSelectionInsightsService",function(n,d,p){var h=this;var f=null;this.showLoading=true;this.insights=[];this.activeCard=1e3;this.showInsightDetails=false;this.selectedInsight=null;this.hasSelection=false;this.measure="";this.newMeasureChosen=false;this.newSelection=false;this.isRefreshing=false;this.app=null;this.layout=null;this.selectionInsightsState=u.NO_SELECTIONS;this.states=u;this.measureError=false;this.loadingCards=false;this.cardIsInsight=true;this.selectionContribution="";this.isOneAndOnlyOneField=null;this.showing={table:false,excluded:false};this.$onInit=function(){g().then(function(t){if(t)s.getApp().then(function(t){h.app=t;t.enigmaModel.getCurrentSelectionObject().then(function(t){n.currentSelModel=t;l(n,"currentSelModel",function(){v()})});b(t);c.trackEvent(c.customEvents.EXPLORE_SELECTIONS_OPENED,{type:"clicked"})});else{m();h.showLoading=false}})};function g(){return p.getInsightDimensions(h.showFields).then(function(){return true}).catch(function(){return false})}this.generateInsights=function(){h.showLoading=true;h.newMeasureChosen=false;h.newSelection=false;y();c.trackEvent(c.customEvents.ASSOCIATIVE_INSIGHTS_GENERATED,{type:"clicked"})};function v(){if(h.selectionInsightsState!=u.UNSUPPORTED){h.hasSelection=n.currentSelModel.layout.qSelectionObject.qSelections.length>0;h.showLoading=false;h.isOneAndOnlyOneField=p.isOneAndOnlyOne(n.currentSelModel.layout);if(h.isOneAndOnlyOneField.isOneAndOnlyOne){h.selectionInsightsState=u.UNSUPPORTED;h.errorMsg=a.get("ExploreSelections.SingleSelectField",[h.isOneAndOnlyOneField.items])}else h.hasSelection||(h.selectionInsightsState=u.NO_SELECTIONS);h.hasSelection&&h.selectionInsightsState===u.NO_SELECTIONS&&(h.selectionInsightsState=u.GENERATE_INSIGHTS);h.layout=n.currentSelModel.layout;r.publish("selection/insights/current-selection",n.currentSelModel.layout)}}this.$onChanges=function(t){void 0===t.showFields||t.showFields.isFirstChange()||h.selectionInsightsState===u.NO_INSIGHTS&&(h.selectionInsightsState=u.GENERATE_INSIGHTS)};function m(){h.selectionInsightsState=u.UNSUPPORTED;h.errorMsg=a.get("ExploreSelections.NoSelectionInsights")}function b(t){return t.getCurrentSelectionObject().then(function(t){t.layoutSubscribe(function(){if(h.selectionInsightsState!=u.UNSUPPORTED){h.showInsightDetails=false;if(!h.newMeasureChosen){h.isRefreshing=true;r.publish("selection/insights/selection/changed")}if(h.selectionInsightsState!==u.NO_SELECTIONS&&h.selectionInsightsState!==u.NO_INSIGHTS){h.newSelection=true;h.newMeasureChosen=false}else h.selectionInsightsState===u.NO_INSIGHTS&&(h.selectionInsightsState=u.GENERATE_INSIGHTS)}c.trackEvent(c.customEvents.NEW_SELECTION_MADE,{type:"clicked"})})})}function y(){h.insights=[];return p.getInsightDimensions(h.showFields).then(function(t){r.publish("selection/insights/refreshed");h.showLoading=false;h.selectionInsightsState=u.INSIGHTS_FOUND;if(0!==t.insights.length){h.measure=t.insights[0].measure;h.loadingCards=true;x(t.insights)}else{r.publish("selection/insights/updated");t.measure?h.measure=t.measure:h.selectionInsightsState=u.NO_INSIGHTS}h.isRefreshing=false}).catch(function(){h.showLoading=false;m()})}function x(e){var n=t.getService("$q");function i(t){var s=e[t];if(!s)return n.resolve(true);return p.getInsightSummary(s.dimension,h.app).then(function(t){h.measureError="NaN"==t.summary;s.summaryNaN=h.measureError;s.summaryString=t.summary;if(t.show){h.insights.push(s);r.publish("selection/insight/draw",{insight:s,index:h.insights.length-1})}}).catch(function(){s.summaryError=true;h.insights.push(s)}).then(function(){t+=1;if(t<e.length)return i(t);h.loadingCards=false;r.publish("selection/insights/updated");return true})}return i(0)}this.openCardSummaryDialog=function(){f=t.getService("luiDialog").show({template:i,input:{title:"SelectionInsights.SummarySelection.HelpTitle",html:i,closeDialog:function t(){f.close();f=null}}})};this.backToSelections=function(){h.showInsightDetails=false;h.newMeasureChosen=false;r.publish("selections/insights/details/close")};this.closeInsights=function(){h.showInsightDetails=false;h.newMeasureChosen=false;p.clearInsights();r.publish("selection/insights/close")};this.openCard=function(t){r.publish("selections/insights/details/close");if(t>=0)h.newMeasureChosen||h.isRefreshing||h.insights[t].summaryNaN||!h.insights[t].show||d(function(){if(h.activeCard==t)h.closeCard();else{r.publish("selections/insights/details/open");h.activeCard=t;t=t>0?t:0;var n=p.getInsightDetails(h.insights[t].dimension,h.app);n.isMeasureNegative=n.includedMeasure.qNumber<0||n.excludedMeasure.qNumber<0;h.showInsightDetails=true;h.cardIsInsight=true;h.insights[t]=n;h.selectedInsight=h.insights[t];p.getTableVis(h.selectedInsight,h.showing.excluded).then(function(t){h.selectedInsight.table=t});n.isMeasureNegative?r.publish("selection/insights/details/negative",h.selectedInsight):r.publish("selection/insights/details/updated",{measure:h.selectedInsight.measure,aggr:h.selectedInsight.measureAggregation,dimension:h.selectedInsight.dimension,contribution:h.selectedInsight.selectedMeasure.selected.percentage.toFixed(1)});var i=e.openApp(h.app.qDocId);i.visualization.create("listbox",[h.selectedInsight.dimension],{showTitles:true,title:h.selectedInsight.dimension}).then(function(t){h.listbox=t.model.enigmaModel;q()})}});else if(!h.newMeasureChosen&&!h.isRefreshing)if(h.activeCard==t&&h.showInsightDetails)h.closeCard();else{h.activeCard=t;var n=p.getInsightDetails(h.insights[0].dimension,h.app);h.showInsightDetails=true;h.cardIsInsight=false;n.isSelectionNegative=n.selectedMeasure.selected.percentage<0||n.selectedMeasure.excluded.percentage<0;h.insights[0]=n;h.selectedInsight=h.insights[0];r.publish("selection/insights/current/open",{insight:h.selectedInsight});r.publish("selections/insights/details/open")}c.trackEvent(c.customEvents.ASSOCIATIVE_INSIGHTS_CARD_CLICKED,{type:"clicked"})};this.closeCard=function(){h.showInsightDetails=!h.showInsightDetails;h.cardIsInsight=true;h.activeCard=null};r.subscribe("selection/insights/details/close",function(){h.showInsightDetails=false});r.subscribe("selection/insights/new",function(t){h.isRefreshing=false;h.insights=[];h.activeCard=1e3;if(0===t.insights.length){h.measureError=false;r.publish("selection/insights/updated")}else{h.loadingCards=true;x(t.insights)}t.measure&&(h.measure=t.measure);h.showInsightDetails=false});r.subscribe("selection/insights/error",m);function q(){o.selectAll(".gwBar g").remove();var t=o.select(".gwBar svg");var e=t.append("g");var n=h.selectedInsight.counts.excluded/(h.selectedInsight.counts.excluded+h.selectedInsight.counts.included)*100/100*427;var i=h.selectedInsight.counts.included/(h.selectedInsight.counts.excluded+h.selectedInsight.counts.included)*100/100*427;e.append("rect").style("fill","#A9A9A9").attr("width",35).attr("height",Math.ceil(n)).attr("y",Math.ceil(i)).attr("x",0);e.append("rect").style("fill","white").attr("width",35).attr("height",Math.ceil(i)).attr("y",0).attr("x",0);var s=[];s.push([{x:35,y:Math.ceil(i)+Math.ceil(n)/2},{x:65,y:322}]);s.push([{x:65,y:322},{x:95,y:322}]);s.push([{x:35,y:Math.ceil(i)/2},{x:65,y:107}]);s.push([{x:65,y:107},{x:95,y:107}]);var r=o.svg.line().x(function(t){return t.x}).y(function(t){return t.y});var a=t.append("g").attr("class","lines");a.selectAll("path").data(s).enter().append("path").attr({d:r,"stroke-dasharray":"790 790","stroke-dashoffset":0}).style("stroke",function(t,e){return e>1?"white":"#A9A9A9"}).style("stroke-width","2").attr("opacity",1)}this.$onDestroy=function(){r.unsubscribe("selection/insights/show");r.unsubscribe("selection/insights/new");r.unsubscribe("selection/insights/error")}}]};t.nativeComponent("qvSelectionInsights",d)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-selections-insights-container">\n\t\x3c!-- Insights found --\x3e\n\t<div class="qv-selections-insights-header">\n\t\t<h2\n\t\t\tq-translation="SelectionInsights.AssociativeInsights"\n\t\t\tclass="qv-selections-insights-title"\n\t\t></h2>\n\t\t<span\n\t\t\tclass="lui-icon lui-icon--help lui-icon--small"\n\t\t\tng-click="$ctrl.openCardSummaryDialog()"\n\t\t></span>\n\t\t<div class="qv-insight-summary-close">\n\t\t\t<span\n\t\t\t\tclass="lui-icon lui-icon--close"\n\t\t\t\tng-click="$ctrl.closeInsights()"\n\t\t\t></span>\n\t\t</div>\n\t\t<qv-selection-insights-summary\n\t\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\t\tstates="$ctrl.states"\n\t\t\tselection-insights-state="$ctrl.selectionInsightsState"\n\t\t\tnew-measure-chosen="$ctrl.newMeasureChosen"\n\t\t\tnew-selection="$ctrl.newSelection"\n\t\t\tmeasure="$ctrl.measure"\n\t\t\tshow-loading="$ctrl.showLoading"\n\t\t\thas-selection="$ctrl.hasSelection"\n\t\t\tshow-fields="$ctrl.showFields"\n\t\t\tmeasure-error="$ctrl.measureError"\n\t\t\tselected-insight="$ctrl.selectedInsight"\n\t\t></qv-selection-insights-summary>\n\t</div>\n\t<qv-selection-insights-card-container\n\t\tng-show="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\tnew-measure-chosen="$ctrl.newMeasureChosen"\n\t\tnew-selection="$ctrl.newSelection"\n\t\tmeasure="$ctrl.measure"\n\t\tshow-loading="$ctrl.showLoading"\n\t\tinsights="$ctrl.insights"\n\t\topen-card="$ctrl.openCard"\n\t\tactive-card="$ctrl.activeCard"\n\t\tclass="qv-selection-insights-card-container"\n\t\tshow-fields="$ctrl.showFields"\n\t\tloading-cards="$ctrl.loadingCards"\n\t\tcard-is-insight="$ctrl.cardIsInsight"\n\t></qv-selection-insights-card-container>\n\t\x3c!-- LOADING --\x3e\n\t<div class="qv-selections-insights-loading" ng-if="$ctrl.showLoading">\n\t\t<div class="spinner-container">\n\t\t\t<qv-spinner\n\t\t\t\tshow="$ctrl.showLoading"\n\t\t\t\tcenter-in-parent="true"\n\t\t\t></qv-spinner>\n\t\t</div>\n\t\t<div\n\t\t\tclass="loading-message"\n\t\t\tq-translation="SelectionInsights.Loading"\n\t\t></div>\n\t</div>\n\n\t\x3c!-- No selection has been made --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.NO_SELECTIONS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tclass="qv-selections-insights--p"\n\t\t\tq-translation="ExploreSelections.NoInsights"\n\t\t></p>\n\t</div>\n\n\t\x3c!-- AI is not supported for this app --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.UNSUPPORTED"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p class="qv-selections-insights--p" ng-bind-html="$ctrl.errorMsg"></p>\n\t</div>\n\n\t\x3c!--\n\t\tUser opened the selection insights panel for the first time after making selections\n\t--\x3e\n\t<div\n\t\tclass="qv-selections-generate-insights qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.GENERATE_INSIGHTS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tq-translation="ExploreSelections.GenerateInsights"\n\t\t\tclass="qv-selections-insights--p"\n\t\t></p>\n\t\t<button\n\t\t\ttid="explore-selections-generate-insight-button"\n\t\t\tclass="lui-button lui-button--success"\n\t\t\tq-translation="ExploreSelections.GenerateInsights.Button"\n\t\t\tng-click="$ctrl.generateInsights()"\n\t\t></button>\n\t</div>\n\n\t\x3c!-- User has made a selection but no insights were found --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.NO_INSIGHTS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tclass="qv-selections-insights--p"\n\t\t\tq-translation="ExploreSelections.NoInsightsWithSelection.Paragraph1"\n\t\t></p>\n\t\t\x3c!--\n\t\t\tIf show fields checkbox is unchecked, we tell them to check it since they got no master item insights\n\t\t--\x3e\n\t\t<div\n\t\t\tng-if="!$ctrl.showFields"\n\t\t\tclass="select-fields"\n\t\t\tq-translation="ExploreSelections.NoInsightsWithSelection.Paragraph3"\n\t\t></div>\n\t</div>\n\n\t\x3c!-- Insights details --\x3e\n\t<qv-selection-insights-details\n\t\tng-show="$ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\tshow-insight-details="$ctrl.showInsightDetails"\n\t\tselected-insight="$ctrl.selectedInsight"\n\t\tlistbox="$ctrl.listbox"\n\t\tcard-is-insight="$ctrl.cardIsInsight"\n\t\tback-to-selections="$ctrl.backToSelections()"\n\t\tlayout="$ctrl.layout"\n\t\tshowing="$ctrl.showing"\n\t></qv-selection-insights-details>\n</div>\n'},function(t,e){t.exports='<lui-dialog class="selection-insights-dialog" x-variant="{{::variant}}">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title\n\t\t\tq-translation="SelectionInsights.SummarySelection.HelpTitle"\n\t\t></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="q-modal-loading">\n\t\t<p q-translation="SelectionInsights.SummarySelection.HelpText"></p>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button\n\t\t\tclass="lui-button close-button"\n\t\t\tng-click="closeDialog();"\n\t\t\tq-translation="Common.Close"\n\t\t\ttid="selection-insights-dialog-help-button"\n\t\t></button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(862),n(234),n(95),n(220)],s=function(t,e,n,i){t.nativeComponent("qvSelectionInsightsCardContainer",{bindings:{showLoading:"<",insights:"=",openCard:"<",activeCard:"<",newMeasureChosen:"=",newSelection:"=",showFields:"<",loadingCards:"<",measure:"<",selectedInsight:"=",cardIsInsight:"<"},controller:["$timeout","qvSelectionInsightsService",function(t,e){var s=this;this.showLoading=true;this.insights=[];this.refreshActive=false;this.isRefreshing=false;this.hasInsights=true;this.itemString="";this.selectionContribution="";this.$onInit=function(){n.selectAll(".insight-bar-container svg").remove()};function o(){if(s.insights.length>0){var t=e.getInsightDetails(s.insights[0].dimension,s.app).selectedMeasure.selected.percentage/100;s.selectionContribution=s.getLocalizedPercentage(t)}}i.subscribe("selection/insights/updated",function(){t(function(){s.hasInsights=s.insights.length>0;o()})});i.subscribe("selection/insight/draw",function(e){t(function(){n.select("#insightCard"+e.index+" .insight-bar-container svg").remove();a(e.insight,e.index)})});i.subscribe("selection/insights/refresh",function(){s.isRefreshing=true});i.subscribe("selection/insights/refreshed",function(){s.isRefreshing=false;s.refreshActive=false});i.subscribe("selection/insights/new",function(){s.isRefreshing=false;s.refreshActive=false});i.subscribe("selection/insights/measure/cancel",function(){s.refreshActive=false});i.subscribe("selection/insights/fields/change",function(){s.refreshActive=true});i.subscribe("selection/insights/selection/changed",function(){s.refreshActive=true});i.subscribe("selection/insights/current-selection",function(t){r(e.getSelectionItems(t))});function r(t){if(t){s.itemString="";t.forEach(function(e,n){t.length-1===n?s.itemString+=e.name:s.itemString+=e.name+", "})}}this.getLocalizedPercentage=function(t){return e.getLocalizedPercentage(t)};this.getMeasurePercentage=function(t){var e=t.counts.excluded+t.counts.included;var n=t.counts.excluded<t.counts.included?t.counts.excluded:t.counts.included;var i=n/e*100;var o=Math.round(10*i)/100;o=s.getLocalizedPercentage(o/10);return o};function a(t,e){var i=n.select("#insightCard"+e+" .insight-bar-container").append("svg").attr("width",44).attr("height",125);var s=i.append("g");var o=t.counts.excluded/(t.counts.excluded+t.counts.included)*100/100*124;var r=t.counts.included/(t.counts.excluded+t.counts.included)*100/100*124;s.append("rect").style("fill","#A9A9A9").attr("width",12).attr("height",Math.ceil(o)).attr("y",Math.ceil(r)).attr("x",0);s.append("rect").style("fill","white").style("stroke-width",1).style("stroke","#E6E6E6").attr("width",12).attr("height",Math.ceil(r)).attr("y",0).attr("x",0);var a=[];var l=Math.ceil(r)+Math.ceil(o)/2;a.push([{x:12,y:l},{x:28,y:38}]);var c=n.svg.line().x(function(t){return t.x}).y(function(t){return t.y});var u=i.append("g").attr("class","lines");u.selectAll("path").data(a).enter().append("path").attr({d:c,"stroke-dasharray":"790 790","stroke-dashoffset":0}).style("stroke",function(t,e){return e>1?"white":"#A9A9A9"}).style("stroke-width","1").attr("opacity",1)}this.$onDestroy=function(){i.unsubscribe("selection/insights/updated");i.unsubscribe("selection/insights/fields/change");i.unsubscribe("selection/insights/measure/cancel");i.unsubscribe("selection/insights/selection/changed");i.unsubscribe("selection/insights/refresh");i.unsubscribe("selection/insights/new");i.unsubscribe("selection/insights/refreshed");i.unsubscribe("selection/insight/draw");i.unsubscribe("selection/insights/current-selection")}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div tid="selection-insights-card-container" class="qv-selections-insights-cards-container" ng-show="!$ctrl.isRefreshing && $ctrl.hasInsights">\n\t<div ng-show="!$ctrl.showLoading" class="qv-selections-empty-cards">\n\t\t<div tid="current-selections-card" class="card selection-insights-card selection-insights-card--current-selection" ng-class="{\'active\': $ctrl.activeCard === -1 && !$ctrl.cardIsInsight}" ng-click="$ctrl.openCard(-1)" tabindex="0"> \n\t\t\t<div tid="no-longer-valid-overlay" class="no-longer-valid-overlay" ng-if="$ctrl.refreshActive">\n\t\t\t\t<div class="gray-overlay"></div>\n\t\t\t\t<span class="no-longer-valid-text" q-translation="SelectionInsights.Refresh.NoLongerValid"></span>\n\t\t\t</div>\n\t\t\t<div class="insight-card-content selection-insights-card--current-selection-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="insight-dimension-title">\n\t\t\t\t\t\t<div class="insight-dimension-name" title="{{$ctrl.itemString}}">{{$ctrl.itemString}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-card-body-your-selections" q-translation="SelectionInsights.CardSummaryYourSelections" q-title-translation="SelectionInsights.CardSummaryYourSelections"></div>\n\t\t\t\t\t<div class="insight-card-body-account" q-translation="SelectionInsights.CardSummaryAccountFor"></div>\n\t\t\t\t\t<div class="insight-measure-title">\n\t\t\t\t\t\t<div class="insight-current-selection-value" ng-show="$ctrl.selectionContribution">\n\t\t\t\t\t\t\t{{ $ctrl.selectionContribution }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="insight-measure-name" title="">\n\t\t\t\t\t\t\t{{ $ctrl.measure }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="selection-insights--other-fields" q-translation="SelectionInsights.FoundOtherFields"></div>\n\t\t<div tid="selection-insights-card" ng-repeat="insight in $ctrl.insights track by $index" id="insightCard{{ $index }}" class="card selection-insights-card insight-card" ng-class="{\'active\': $ctrl.activeCard === $index && $ctrl.cardIsInsight, \'disabled\': $ctrl.refreshActive || !insight.show, \'inactive\': insight.summaryNaN }"\n\t\t ng-click="$ctrl.openCard($index)" tabindex="0">\n\t\t\t<div tid="no-longer-valid-overlay" class="no-longer-valid-overlay" ng-if="$ctrl.refreshActive">\n\t\t\t\t<div class="gray-overlay"></div>\n\t\t\t\t<span class="no-longer-valid-text" q-translation="SelectionInsights.Refresh.NoLongerValid"></span>\n\t\t\t</div>\n\t\t\t<div class="insight-bar-container"></div>\n\t\t\t<div class="insight-card-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="insight-dimension-title">\n\t\t\t\t\t\t<div class="insight-dimension-name" title="{{ insight.dimension }}">\n\t\t\t\t\t\t\t{{ insight.dimension }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div tid="insight-counts-summary" class="insight-card-body-your-selections" title="{{insight.counts.summary}}">{{insight.counts.summary}}</div>\n\t\t\t\t\t<div class="insight-card-body-account" q-translation="SelectionInsights.CardSummaryAccountFor"></div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="!insight.summaryError && !insight.summaryNaN && insight.show">\n\t\t\t\t\t\t<div class="insight-measure-value">\n\t\t\t\t\t\t\t{{ insight.summaryString }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="insight-measure-name" title="{{ insight.measure }}">\n\t\t\t\t\t\t\t{{ insight.measure }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="insight.summaryError">\n\t\t\t\t\t\t<span class="timeout-error" q-translation="SelectionInsights.ErrorTimeout"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="!insight.show && !insight.summaryNaN && !insight.summaryError">\n\t\t\t\t\t\t<span tid="selection-insight-error-calculation" class="timeout-error" q-translation="SelectionInsights.ErrorCalculations"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="insight.summaryNaN">\n\t\t\t\t\t\t<span class="invalid-error" q-translation="SelectionInsights.InvalidMeasure"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.showLoading" class="qv-selections-empty-cards">\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id="cardLoading" class="card loading-card selection-insights-card inactive" ng-if="$ctrl.loadingCards">\n\t\t\t<div class="insight-bar-container">\n\t\t\t\t<div class="loading-line bar"></div>\n\t\t\t</div>\n\t\t\t<div class="insight-card-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="loading-line title"></div>\n\t\t\t\t\t<div class="loading-line count"></div>\n\t\t\t\t\t<div class="loading-line contribution"></div>\n\t\t\t\t\t<div class="measure-container">\n\t\t\t\t\t\t<div class="loading-line percent"></div>\n\t\t\t\t\t\t<div class="loading-line measure"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\x3c!-- LOADING --\x3e\n<div class="qv-selections-insights-loading" ng-if="$ctrl.isRefreshing">\n\t<div class="spinner-container">\n\t\t<qv-spinner show="$ctrl.isRefreshing" center-in-parent="true"></qv-spinner>\n\t</div>\n\t<div class="loading-message" q-translation="SelectionInsights.Loading"></div>\n</div>\n\n\x3c!-- NO INSIGHTS FOUND --\x3e\n<div class="qv-selections-no-insights" ng-show="!$ctrl.isRefreshing && !$ctrl.hasInsights">\n\t<div class="no-insights-icon"></div>\n\t<p class="qv-selections-insights--p" q-translation="ExploreSelections.NoInsightsWithSelection.Paragraph1"></p>\n\t<div ng-if="!$ctrl.showFields" class="select-fields" q-translation="ExploreSelections.NoInsightsWithSelection.Paragraph3"></div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(864),n(284),n(95),n(91),n(234),n(103),n(93),n(865),n(220)],s=function(t,e,n,i,s,o,r,a){t.nativeComponent("qvSelectionInsightsDetails",{bindings:{showInsightDetails:"<",selectedInsight:"<",listbox:"<",layout:"<",cardIsInsight:"<",backToSelections:"&",showing:"="},controller:["$timeout","qvSelectionInsightsService",function(t,e){var l=this;this.detailsTitle="";this.measure="";this.selectionHelp="";this.refreshActive=false;this.selectionInsightsMeasureBarTitle="";this.hasLockedSelections=false;this.selectionsBarTotal="";this.options={isReadonly:true,isPopover:false,selections:false,showSearch:true};this.showExcludedValues=false;this.celloptions={selections:false};l.selectionInsightsMeasureBarTitle=function(){if(l.selectedInsight&&l.selectedInsight.measureAggregation)return s.get("SelectionInsights.MeasureBarTitle",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure])};l.selectionsBarTotal=function(){if(l.selectedInsight&&l.selectedInsight.selectedMeasure.total)return s.get("SelectionInsights.SelectionsBarTotal",[l.selectedInsight.selectedMeasure.total])};l.countBarTotal=function(){if(l.selectedInsight&&l.selectedInsight.counts.excluded&&l.selectedInsight.counts.included)return s.get("SelectionInsights.CountBarTotal",[l.selectedInsight.counts.excluded+l.selectedInsight.counts.included])};i.subscribe("selection/insights/details/negative",function(t){l.showExcludedValues=false;l.measure=t.measure;l.detailsTitle=s.get("SelectionInsights.DimensionContributionsTitle",["<strong>"+t.dimension+"</strong>","<strong>"+t.measure+"</strong>"]);l.selectionHelp=s.get("SelectionInsights.SelectionHelp","<strong>"+t.dimension+"</strong>");c(t)});i.subscribe("selection/insights/details/updated",function(t){l.showExcludedValues=false;l.measure=t.measure;l.hasLockedSelections=e.isHasLockedSelections(l.layout);l.detailsTitle=s.get("SelectionInsights.DimensionContributionsTitle",["<strong>"+t.dimension+"</strong>","<strong>"+t.measure+"</strong>"]);l.selectionHelp=s.get(l.hasLockedSelections?"SelectionInsights.SelectionHelpWithLockedSelections":"SelectionInsights.SelectionHelp","<strong>"+t.dimension+"</strong>");d()});i.subscribe("selection/insights/measure/cancel",function(){l.refreshActive=false});i.subscribe("selection/insights/fields/change",function(){l.refreshActive=true});i.subscribe("selection/insights/updated",function(){l.refreshActive=false});function c(t){o.selectAll(".bars-container svg").remove();var e=[{name:"excluded",value:t.counts.excluded,label:t.counts.excluded},{name:"included",value:t.counts.included,label:t.counts.included}];u(e,"value");var n=[{name:"excluded",value:t.excludedMeasure.qNumber,label:t.measureBreakdown.excluded.num},{name:"included",value:t.includedMeasure.qNumber,label:t.measureBreakdown.included.num}];u(n,"measure")}function u(t,e){var n=431;var i=120;var s=10;var r="";var a=45;var l=30;r="value"==e?" .val-dist":" .measure-dist";var c=o.select(".negative-chart"+r).append("svg").attr("width",i+a).attr("height",n+a);var u=c.append("g").attr("transform","translate("+s/2+",1)");var d=o.scale.ordinal().rangeRoundBands([0,i]);var p=o.scale.linear().range([n,0]);d.domain(t.map(function(t){return t.name}));"value"==e?p.domain([0,o.max(t,function(t){return t.value})]):p.domain(o.extent(t,function(t){return t.value}));var h=u.append("defs");h.append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",5);if("value"==e){u.selectAll("bar").data(t).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return p(t.value)}).attr("height",function(t){return n-p(t.value)}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);u.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"value"==e?"excluded"==t.name?"#A7A7A7":"#FFFFFF":"excluded"==t.name?"blue":"#FFFFFF"}).style("stroke",function(t){return"excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)"}).attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return t.value>0?p(t.value):p(0)}).attr("height",function(t){return"value"==e?n-p(t.value):Math.abs(p(t.value)-p(0))}).attr("rx",3).attr("ry",3);u.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"excluded"==t.name?"#A7A7A7":"#FFFFFF"}).attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",n-3).attr("height",3);var f=c.append("g").attr("class","barLabels").attr("transform","translate("+s/2+",0)");t.forEach(function(t,e){u.append("line").style("stroke","excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(t.name)).attr("y1",n).attr("x2",d(t.name)).attr("y2",n-3);e>0&&u.append("line").style("stroke","excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(t.name)+60).attr("y1",n).attr("x2",d(t.name)+60).attr("y2",n-3);var i=f.append("g");i.append("rect").attr("x",function(){return d(t.name)}).attr("width",d.rangeBand()).attr("height",2).attr("y",function(){return p(t.value)}).attr("opacity",0);i.append("text").attr("x",d(t.name)+l).attr("y",function(){return n-p(t.value)>n-l?p(t.value)+30:p(t.value)-10}).attr("text-anchor","middle").attr("class","grouped-bar-value-label").text(t.label).attr("fill",function(){var e="#404040";"excluded"==t.name&&n-p(t.value)>n-l&&(e="white");return e})})}else{h.append("pattern").attr("id","diagonalStripes").attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).attr("patternTransform","rotate(45)").append("rect").attr("width","2").attr("height","8").attr("fill","#4842b5");u.selectAll("bar").data(t).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return t.value>0?p(t.value):p(0)}).attr("height",function(t){return Math.abs(p(t.value)-p(0))}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);u.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"excluded"==t.name?"#655DC6":"#FFFFFF"}).style("stroke",function(t){return"excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)"}).attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return t.value>0?p(t.value):p(0)+1}).attr("height",function(t){return Math.abs(p(t.value)-p(0))}).attr("rx",3).attr("ry",3);u.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"excluded"==t.name?"#655DC6":"#FFFFFF"}).attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return t.value>0?p(t.value)-3:p(0)+1}).attr("height",2);var g=c.append("g").attr("class","barLabels").attr("transform","translate("+s/2+",0)");t.forEach(function(t,e){u.append("line").style("stroke","excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(t.name)).attr("y1",function(){return t.value>0?p(t.value):p(0)}).attr("x2",d(t.name)).attr("y2",function(){return t.value>0?p(t.value)-3:p(0)+3});e>0&&u.append("line").style("stroke","excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(t.name)+60).attr("y1",function(){return t.value>0?p(t.value):p(0)}).attr("x2",d(t.name)+60).attr("y2",function(){return t.value>0?p(t.value)-3:p(0)+3});"excluded"==t.name&&u.append("rect").attr("x",function(){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(){return t.value>0?p(t.value):p(0)}).attr("height",function(){return Math.abs(p(t.value)-p(0))}).attr("stroke","#504A9E").attr("rx",3).attr("ry",3).attr("fill","url(#diagonalStripes)");var n=g.append("g");n.append("rect").attr("x",function(){return d(t.name)}).attr("width",d.rangeBand()).attr("height",2).attr("y",function(){return t.value>0?p(t.value):p(0)}).attr("opacity",0);n.append("text").attr("x",d(t.name)+l).attr("y",function(){return t.value>0?p(t.value)+20:Math.abs(p(t.value)-p(0))<l?Math.abs(p(t.value)-p(0))+p(0)+20:Math.abs(p(t.value)-p(0))+p(0)-10}).attr("text-anchor","middle").attr("class","grouped-bar-label").text(t.label).attr("fill",function(){var e="#404040";"excluded"==t.name&&(e=Math.abs(p(t.value)-p(0))<l?"#655DC6":"#FFFFFF");return e})})}c.append("g").attr("class","x axis").append("line").attr("y1",p(0)).attr("y2",p(0)).attr("x2",i+s).attr("stroke","#404040").attr("stroke-width","3");var v=c.append("text").attr("x",i+2*s).attr("y",p(0)-28).attr("text-anchor","left").style("font-size","22px").attr("fill","#B3B3B3");v.append("tspan").attr("dx",0).attr("dy",4).text("+");v.append("tspan").attr("dx",-13).attr("dy",30).attr("fill","#404040").text("0");v.append("tspan").attr("dx",-10).attr("dy",30).text("-")}function d(){t(function(){var t=431;var e=213;o.selectAll(".connectors svg").remove();var n=o.select(".connectors .svg-container").append("svg").attr("width",e).attr("height",t);n.append("linearGradient").attr("id","area-gradient").attr("x1",0).attr("y1",0).attr("x2",5).attr("y2",0).selectAll("stop").data([{offset:"0%",color:"#A7A7A7"},{offset:"20%",color:"white"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color});var i=l.getPercentage("excluded")/100*t;var s=l.selectedInsight.measureBreakdown.excluded.percentage/100*t;var r=[{x:0,y:t-i},{x:e,y:t-s}];var a=[{x:0,y:i},{x:e,y:s}];var c=o.scale.linear().domain([0,o.max(a,function(t){return t.x})]).range([0,e]);var u=o.scale.linear().domain([0,t]).range([t,0]);var d=o.svg.area().x(function(t){return c(t.x)}).y0(t).y1(function(t){return u(t.y)});var p=o.svg.line().x(function(t){return t.x}).y(function(t){return t.y});var h=[];h.push(r);var f=n.append("g").attr("class","lines");f.selectAll("path").data(h).enter().append("path").attr({d:p,"stroke-dasharray":"3, 3","stroke-dashoffset":0}).style("stroke","#BEBEBE").style("stroke-width","1").attr("opacity",1);n.append("path").datum(a).attr("class","area").attr("d",d)})}this.getLocalizedPercentage=function(t){return e.getLocalizedPercentage(t)};this.getPercentageLocalized=function(t){if(l.selectedInsight){var e=l.selectedInsight.counts.excluded+l.selectedInsight.counts.included;return l.getLocalizedPercentage(l.selectedInsight.counts[t]/e)}return 0};this.getPercentage=function(t){if(l.selectedInsight){var e=l.selectedInsight.counts.excluded+l.selectedInsight.counts.included;return l.selectedInsight.counts[t]/e*100}return 0};this.showTable=function(t){l.showing={table:t,excluded:true};e.getTableVis(l.selectedInsight,true).then(function(t){l.selectedInsight.table=t})};this.toggleShowTableExcluded=function(t){l.showing={table:true,excluded:t};e.getTableVis(l.selectedInsight,t).then(function(t){l.selectedInsight.table=t})};this.selectExcluded=function(){var t=l.selectedInsight.dimension;var e=this.selectedInsight.dimensionId;l.showing={table:false,excluded:false};var s=l.layout.qSelectionObject.qSelections;if(void 0!==e)return a.getApp().then(function(t){t.getDimension(e).then(function(e){e.getDimension().then(function(e){var i=e.qFieldDefs[0].replace("=","");t.getField(i).then(function(t){return t.selectExcluded().then(function(){s.length>0&&s.forEach(function(t){n.currApp().field(t.qField).clear()})})})})})});n.currApp().field(t).selectExcluded().then(function(){s.length>0&&s.forEach(function(t){n.currApp().field(t.qField).clear()})});i.publish("selection/insights/close");r.trackEvent(r.customEvents.SELECT_POSSIBLE_CLICKED,{type:"clicked"})};this.selectPossible=function(){var t=l.selectedInsight.dimension;var e=this.selectedInsight.dimensionId;l.showing={table:false,excluded:false};var s=l.layout.qSelectionObject.qSelections;if(void 0!==e)return a.getApp().then(function(t){t.getDimension(e).then(function(e){e.getDimension().then(function(e){var i=e.qFieldDefs[0].replace("=","");t.getField(i).then(function(t){return t.selectPossible().then(function(){s.length>0&&s.forEach(function(t){n.currApp().field(t.qField).clear()})})})})})});n.currApp().field(t).selectPossible().then(function(){s.length>0&&s.forEach(function(t){n.currApp().field(t.qField).clear()})});i.publish("selection/insights/close");r.trackEvent(r.customEvents.SELECT_POSSIBLE_CLICKED,{type:"clicked"})};this.isLabelContained=function(t){var e=427;var n=55;var i=t/100*e;return n<i};this.isLabelSmall=function(t){var e=427;var n=65;var i=t/100*e;return n<i};this.getNegativeMeasureText=function(){return s.get("SelectionInsights.MeasureNegative",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension])};this.getNegativeMeasurePossible=function(){return s.get("SelectionInsights.MeasureNegativePossible",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension,"<span>"+l.selectedInsight.measureBreakdown.included.num+"</span>"])};this.getNegativeMeasureExcluded=function(){return s.get("SelectionInsights.MeasureNegativeExcluded",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension,"<span>"+l.selectedInsight.measureBreakdown.excluded.num+"</span>"])};this.$onDestroy=function(){i.unsubscribe("selection/insights/details/updated");i.unsubscribe("selection/insights/measure/cancel");i.unsubscribe("selection/insights/updated");i.unsubscribe("selection/insights/fields/change");i.unsubscribe("selection/insights/details/negative")}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-selections-insights-details" ng-show="$ctrl.showInsightDetails">\n\t<div class="main-details-wrapper" ng-class="{\'disabled\': $ctrl.refreshActive}">\n\t\t<div ng-if="$ctrl.refreshActive" class="gray-overlay"></div>\n\t\t<div class="current-selections-container" ng-show="!$ctrl.cardIsInsight">\n\t\t\t<div class="current-selections-container-inner">\n\t\t\t\t<qv-selection-insights-current selected-insight="$ctrl.selectedInsight" back-to-selections="$ctrl.backToSelections()"></qv-selection-insights-current>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="details-container" ng-show="$ctrl.cardIsInsight">\n\t\t\t<div class="details-container-inner">\n\t\t\t\t<div class="closeBtn">\n\t\t\t\t\t<button tid="back-to-selection-button" class="lui-button" ng-click="$ctrl.backToSelections()" q-translation="SelectionInsights.BackToSelections">\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="details-body">\n\t\t\t\t\t<div class="title details-title">\n\t\t\t\t\t\t<span tid="insight-details-title" ng-bind-html="$ctrl.detailsTitle"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div tid="insight-details-summary" class="detail-summary" ng-bind-html="$ctrl.selectedInsight.summaryStringLong"></div>\n\t\t\t\t\t<div class="qv-titles-and-bars">\n\t\t\t\t\t\t<div class="bars-titles">\n\t\t\t\t\t\t\t<div class="title-container longer" q-title-translation="{{ $ctrl.selectedInsight.dimension }}">\n\t\t\t\t\t\t\t\t<div tid="insights-with-selection-title" class="title-longer">\n\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.dimension }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-bar-total" class="bar-total" q-translation="SelectionInsights.CountBarTotal, {{$ctrl.selectedInsight.counts.excluded + $ctrl.selectedInsight.counts.included}}" title="{{$ctrl.countBarTotal()}}"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="title-container">\n\t\t\t\t\t\t\t\t<div tid="insights-without-selection-title" class="title-longer" q-translation="SelectionInsights.MeasureBarTitle, {{$ctrl.selectedInsight.measureAggregation[0].toUpperCase() + $ctrl.selectedInsight.measureAggregation.slice(1)}}, {{$ctrl.selectedInsight.measure}}"\n\t\t\t\t\t\t\t\t\ttitle="{{$ctrl.selectionInsightsMeasureBarTitle()}}"></div>\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-bar-total" class="bar-total" q-translation="SelectionInsights.SelectionsBarTotal, {{$ctrl.selectedInsight.selectedMeasure.total}}" title="{{$ctrl.selectionsBarTotal()}}"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container negative-chart" ng-show="$ctrl.selectedInsight.isMeasureNegative && !$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="val-dist">\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="legend-dist">\n\t\t\t\t\t\t\t\t<div class="possible-legend">\n\t\t\t\t\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t\t\t\t\t<div class="white-square"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="legend-label" tid="possible-chart-legend" q-translation="SelectionInsights.Possible" q-title-translation="{{SelectionInsights.Possible}}"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="excluded-legend">\n\t\t\t\t\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t\t\t\t\t<div class="gray-square"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="purple-square"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="legend-label" tid="excluded-chart-legend" q-translation="SelectionInsights.Excluded" q-title-translation="{{SelectionInsights.Excluded}}"></div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="measure-dist">\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container" ng-show="!$ctrl.selectedInsight.isMeasureNegative && !$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="value-bar" ng-class="{\'negative\': $ctrl.selectedInsight.isMeasureNegative}">\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-bar" class="bar included" ng-style="{height: ($ctrl.getPercentage(\'included\') /100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-measure-value" class="label" ng-style="{top: ($ctrl.getPercentage(\'included\')/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.getPercentage(\'included\')), \'small\': !$ctrl.isLabelSmall($ctrl.getPercentage(\'included\'))}">\n\t\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.counts.included }}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getPercentageLocalized(\n\t\t\t\t\t\t\t\t\t\t\t"included"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-bar" class="bar excluded" ng-style="{height: ($ctrl.getPercentage(\'excluded\') / 100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-measure-value" class="label" ng-style="{bottom: ($ctrl.getPercentage(\'excluded\')/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.getPercentage(\'excluded\')), \'small\': !$ctrl.isLabelSmall($ctrl.getPercentage(\'excluded\'))}">\n\t\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.counts.excluded }}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getPercentageLocalized(\n\t\t\t\t\t\t\t\t\t\t\t"excluded"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="connectors" ng-if="!$ctrl.selectedInsight.isMeasureNegative">\n\t\t\t\t\t\t\t\t<div class="svg-container">\n\t\t\t\t\t\t\t\t\t<svg width="215" height="429"></svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="possible-label" q-translation="SelectionInsights.PossibleValues"></div>\n\t\t\t\t\t\t\t\t<div class="excluded-label" q-translation="SelectionInsights.ExcludedValues"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="measure-bar excluded-insight" ng-if="!$ctrl.selectedInsight.isMeasureNegative">\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-bar" class="bar included" ng-style="{height: ($ctrl.selectedInsight.measureBreakdown.included.percentage/100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-measure-value" class="label" ng-style="{top: ($ctrl.selectedInsight.measureBreakdown.included.percentage/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.selectedInsight.measureBreakdown.included.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.measureBreakdown.included.percentage)}">\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight.measureBreakdown\n\t\t\t\t\t\t\t\t\t\t.included.num\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight\n\t\t\t\t\t\t\t\t\t\t\t.measureBreakdown.included\n\t\t\t\t\t\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-bar" class="bar excluded" ng-style="{height: ($ctrl.selectedInsight.measureBreakdown.excluded.percentage/100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-measure-value" class="label" ng-style="{bottom: ($ctrl.selectedInsight.measureBreakdown.excluded.percentage/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.selectedInsight.measureBreakdown.excluded.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.measureBreakdown.excluded.percentage)}">\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight.measureBreakdown\n\t\t\t\t\t\t\t\t\t\t.excluded.num\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight\n\t\t\t\t\t\t\t\t\t\t\t.measureBreakdown.excluded\n\t\t\t\t\t\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container" style="display: block" ng-show="$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="table-container" ng-class="{\'possible\': !$ctrl.showing.excluded}">\n\t\t\t\t\t\t\t\t<qv-object tabindex="-1" class="cell-content" model="$ctrl.selectedInsight.table" options="$ctrl.celloptions"></qv-object>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="toggle-values" ng-class="{\'show-table\': !$ctrl.showing.table}">\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="!$ctrl.showing.table" class="lui-button show-table--button" ng-click="$ctrl.showTable(true)">\n\t\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--table"></span><span class="lui-button__text" q-translation="SelectionInsights.ShowValues"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="!$ctrl.showing.excluded && $ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.toggleShowTableExcluded(true)">\n\t\t\t\t\t\t\t\t<span class="lui-button__text" q-translation="SelectionInsights.ViewExcluded"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="$ctrl.showing.excluded && $ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.toggleShowTableExcluded(false)">\n\t\t\t\t\t\t\t\t<span class="lui-button__text" q-translation="SelectionInsights.ViewPossible"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="$ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.showTable(false)">\n\t\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--back"></span><span class="lui-button__text" q-translation="SelectionInsights.ShowVisualization"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="insight-summary-footer">\n\t\t\t\t<div class="help-text" ng-bind-html="$ctrl.selectionHelp"></div>\n\t\t\t\t<div class="btns" ng-if="!$ctrl.hasLockedSelections">\n\t\t\t\t\t<button tid="select-possible-button" class="lui-button selection-btn" ng-click="$ctrl.selectPossible()" q-translation="Selections.Possible"></button>\n\t\t\t\t\t<button tid="select-excluded-button" class="lui-button selection-btn" ng-click="$ctrl.selectExcluded()" q-translation="Selections.Excluded"></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(48),n(96),n(866),n(91),n(95),n(234),n(220)],s=function(t,e,n,i,s,r){t.nativeComponent("qvSelectionInsightsCurrent",{bindings:{selectedInsight:"<",backToSelections:"&"},controller:["$scope","qvSelectionInsightsService","qvChartTooltipService","$timeout",function(t,n,a,l){var c=this,u,d=false;this.items=[];this.app=null;this.model=null;this.selectionsTitle="";this.measure="";this.selectionsCaption="";this.selectionsBarTotal="";s.subscribe("selection/insights/current-selection",function(t){c.items=n.getSelectionItems(t)});s.subscribe("selection/insights/current/open",function(t){var e={measure:t.insight.measure,aggr:t.insight.measureAggregation,dimension:t.insight.dimension,contribution:t.insight.selectedMeasure.selected.percentage.toFixed(1)};var n=t.insight.isSelectionNegative?t.insight.selectedMeasure.selected.num:t.insight.selectedMeasure.selected.percentage.toFixed(1)+"%";c.measure=e.measure;c.selectionsTitle=i.get("SelectionInsights.SelectionsContributionsTitle","<strong>"+e.measure.substring(0,40)+"</strong>");c.selectionsCaption=i.get("SelectionInsights.SelectionContributionCaption",["<span>"+e.measure.substring(0,40)+"</span>","<span>"+n+"</span>","<span>"+(e.aggr[0].toUpperCase()+e.aggr.slice(1))+"</span>"]);r.selectAll(".negative-chart.select-measure-dist svg").remove();if(t.insight.isSelectionNegative){var s=[{name:"selected",value:t.insight.selectedMeasure.selected.qNum,label:t.insight.selectedMeasure.selected.num},{name:"excluded",value:t.insight.selectedMeasure.excluded.qNum,label:t.insight.selectedMeasure.excluded.num}];p(s)}});function p(t){var e=431;var n=120;var i=10;var s=".negative-chart.select-measure-dist";var o=45;var a=30;var l=r.select(".negative-chart"+s).append("svg").attr("width",n+o).attr("height",e+o);var c=l.append("g").attr("transform","translate("+i/2+",1)");var u=r.scale.ordinal().rangeRoundBands([0,n]);var d=r.scale.linear().range([e,0]);u.domain(t.map(function(t){return t.name}));d.domain(r.extent(t,function(t){return t.value}));var p=c.append("defs");p.append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",5);p.append("pattern").attr("id","diagonalStripes").attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).attr("patternTransform","rotate(45)").append("rect").attr("width","2").attr("height","8").attr("fill","#4dc753");c.selectAll("bar").data(t).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(t){return u(t.name)}).attr("width",u.rangeBand()).attr("y",function(t){return t.value>0?d(t.value):d(0)}).attr("height",function(t){return Math.abs(d(t.value)-d(0))}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);c.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"selected"==t.name?"#6cd475":"#D8D8D8"}).style("stroke",function(t){return"selected"==t.name?"#37B342":"#959595"}).attr("x",function(t){return u(t.name)}).attr("width",u.rangeBand()).attr("y",function(t){return t.value>0?d(t.value):d(0)+1}).attr("height",function(t){return Math.abs(d(t.value)-d(0))}).attr("rx",3).attr("ry",3);c.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"selected"==t.name?"#6cd475":"#D8D8D8"}).attr("x",function(t){return u(t.name)}).attr("width",u.rangeBand()).attr("y",function(t){return t.value>0?d(t.value)-3:d(0)+1}).attr("height",2);var h=l.append("g").attr("class","barLabels").attr("transform","translate("+i/2+",0)");t.forEach(function(t,e){c.append("line").style("stroke","selected"==t.name?"#37B342":"#959595").attr("x1",u(t.name)).attr("y1",function(){return t.value>0?d(t.value):d(0)}).attr("x2",u(t.name)).attr("y2",function(){return t.value>0?d(t.value)-3:d(0)+3});e>0&&c.append("line").style("stroke","selected"==t.name?"#37B342":"#959595").attr("x1",u(t.name)+60).attr("y1",function(){return t.value>0?d(t.value):d(0)}).attr("x2",u(t.name)+60).attr("y2",function(){return t.value>0?d(t.value)-3:d(0)+3});"selected"==t.name&&c.append("rect").attr("x",function(){return u(t.name)}).attr("width",u.rangeBand()).attr("y",function(){return t.value>0?d(t.value):d(0)}).attr("height",function(){return Math.abs(d(t.value)-d(0))}).attr("stroke","#504A9E").attr("stroke-width","0").attr("rx",3).attr("ry",3).attr("fill","url(#diagonalStripes)");var n=h.append("g");n.append("rect").attr("x",function(){return u(t.name)}).attr("width",u.rangeBand()).attr("height",2).attr("y",function(){return t.value>0?d(t.value):d(0)}).attr("opacity",0);n.append("text").attr("x",u(t.name)+a).attr("y",function(){return t.value>0?d(t.value)+20:Math.abs(d(t.value)-d(0))<a?Math.abs(d(t.value)-d(0))+d(0)+20:Math.abs(d(t.value)-d(0))+d(0)-10}).attr("text-anchor","middle").attr("class","grouped-bar-label").text(t.label).attr("fill",function(){var e="#414141";"selected"==t.name&&(e=Math.abs(d(t.value)-d(0))<a?"#2F9938":"#FFFFFF");return e})});l.append("g").attr("class","x axis").append("line").attr("y1",d(0)).attr("y2",d(0)).attr("x2",n+i).attr("stroke","#404040").attr("stroke-width","3");var f=l.append("text").attr("x",n+2*i).attr("y",d(0)-28).attr("text-anchor","left").style("font-size","22px").attr("fill","#B3B3B3");f.append("tspan").attr("dx",0).attr("dy",4).text("+");f.append("tspan").attr("dx",-13).attr("dy",30).attr("fill","#404040").text("0");f.append("tspan").attr("dx",-10).attr("dy",30).text("-")}c.selectionsBarTotal=function(){if(c.selectedInsight&&c.selectedInsight.selectedMeasure.total)return i.get("SelectionInsights.SelectionsBarTotal",[c.selectedInsight.selectedMeasure.total])};this.getLocalizedPercentage=function(t){return n.getLocalizedPercentage(t)};this.getSeparatorPos=function(){if(void 0!==c.items&&null!==c.selectedInsight&&void 0!==c.selectedInsight){var t=56;var e=427;if(c.selectedInsight.isSelectionNegative){var n=c.selectedInsight.selectedMeasure.selected.qNum;var i=c.selectedInsight.selectedMeasure.excluded.qNum;var s=0;e=431;var o=55;s=n<0?e-Math.abs(n)/2/((Math.abs(n)+i)/e):n/2/((Math.abs(i)+n)/e);return s+o}var r=38;var a=10;var l=(c.items.length*r+(c.items.length-1)*a)/2;var u=c.selectedInsight.selectedMeasure.selected.percentage/100*e/2;return t+Math.min(l,u)}};this.isLabelContained=function(t){var e=427;var n=55;var i=t/100*e;return n<i};this.getLabelFontSize=function(t){var e=427;var n=65;var i=t/100*e;return n<i?"24px":"36px"};this.getNegativeMeasureText=function(){return i.get("SelectionInsights.SelectionNegative",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure])};function h(t){var e=t.qStateCounts;var n="";"object"===o(e)&&(n=" ("+(e.qSelected+e.qSelectedExcluded+e.qLocked+e.qLockedExcluded)+"/"+t.qTotal+")");return n}t.openTooltip=function(n,i){if(d||e.utils.touch)return;t.cancelTooltip();u=l(function(){d=true;var t=i.translation;var e=h(i);a.open({content:[{header:(i.qReadableName||i.qField)+e,rows:[{content:t}]}],position:{x:n.clientX,y:n.clientY},alwaysOnTop:true,direction:"bottom",template:"current-selections-tooltip-template.ng.html"})},500)};t.closeTooltip=function(){d=false;t.cancelTooltip();a.close()};t.cancelTooltip=function(){l.cancel(u)};this.getNegativeMeasurePossible=function(){return i.get("SelectionInsights.SelectionNegativePossible",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure,"<span>"+c.selectedInsight.measureBreakdown.included.num+"</span>"])};this.getNegativeMeasureExcluded=function(){return i.get("SelectionInsights.SelectionNegativeExcluded",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure,"<span>"+c.selectedInsight.measureBreakdown.excluded.num+"</span>"])};this.isLabelSmall=function(t){var e=427;var n=65;var i=t/100*e;return n<i};this.getVerticalHeight=function(){if(void 0!==c.items&&null!==c.selectedInsight&&void 0!==c.selectedInsight)return c.selectedInsight.isSelectionNegative?431:40*c.items.length+11*(c.items.length-1)};this.$onDestroy=function(){s.unsubscribe("selection/insights/current-selection");s.unsubscribe("selection/insights/current/open")}}],template:n})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="closeBtn">\n\t<button tid="back-to-selection-button" class="lui-button" ng-click="$ctrl.backToSelections()" q-translation="SelectionInsights.BackToSelections"></button>\n</div>\n<div class="details-body">\n\t<div class="title current-selection-title">\n\t\t<span tid="selection-details-title" ng-bind-html="$ctrl.selectionsTitle"></span>\n\t</div>\n\t<div class="current-selection-caption">\n\t\t<div tid="selections-caption" ng-bind-html="$ctrl.selectionsCaption"></div>\n\t</div>\n\t<div class="current-selection-details">\n\t\t<div class="field-list">\n\t\t\t<div tid="selections-fields-title" class="fields-title" q-translation="SelectionInsights.YourSelections" q-title-translation="{{ SelectionInsights.YourSelections }}"></div>\n\t\t\t<div class="fields-items">\n\t\t\t\t<ul class="list" ng-show="$ctrl.items.length > 0">\n\t\t\t\t\t<li class="item" tid="selection-insight-details-user-selections" ng-class="{\'item-multi-state\': !item.isSingleState, \'multi-active\': multiPopoverFieldName && multiPopoverFieldName === item.qField}" ng-repeat="item in $ctrl.items track by item.qField" data-csid="{{ item.qField }}" tabindex="0"\n\t\t\t\t\t ng-keydown="handleKeyDown($event, item)" aria-label="{{ item.screenReaderLabel }}">\n\t\t\t\t\t\t<qv-current-selections-item ng-if="item.isSingleState" item="item"></qv-current-selections-item>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="separator" ng-class="{\'negative\': $ctrl.selectedInsight.isSelectionNegative}">\n\t\t\t<div class="legend-dist" ng-if="$ctrl.selectedInsight.isSelectionNegative">\n\t\t\t\t<div class="selected-legend">\n\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t<div class="green-square"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="legend-label" tid="selected-chart-legend" q-translation="SelectionInsights.Selected" q-title-translation="{{ SelectionInsights.Selected }}"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="excluded-legend">\n\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t<div class="gray-square"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="legend-label" tid="excluded-chart-legend" q-translation="SelectionInsights.Excluded" q-title-translation="{{ SelectionInsights.Excluded }}"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="vertical" ng-style="{height: $ctrl.getVerticalHeight() + \'px\'}"></div>\n\t\t\t<div class="horizontal" ng-style="{\'margin-top\': $ctrl.getSeparatorPos() + \'px\'}"></div>\n\t\t</div>\n\t\t<div class="chart">\n\t\t\t<div tid="selections-bar-title" class="bar-title" q-translation="SelectionInsights.SelectionsBarTitle, {{\n\t\t\t\t\t$ctrl.measure\n\t\t\t\t}}" q-translation-title="SelectionInsights.SelectionsBarTitle, {{\n\t\t\t\t\t$ctrl.measure\n\t\t\t\t}}"></div>\n\t\t\t<div tid="selections-bar-total" class="bar-total" title="{{ $ctrl.selectionsBarTotal() }}">\n\t\t\t\t{{ $ctrl.selectionsBarTotal() }}\n\t\t\t</div>\n\t\t\t<div class="bar selected" ng-if="!$ctrl.selectedInsight.isSelectionNegative" ng-style="{height: ($ctrl.selectedInsight.selectedMeasure.selected.percentage/100) * 427 + \'px\'}">\n\t\t\t\t<div tid="selected-measure-number" class="label" ng-style="{top: ($ctrl.selectedInsight.selectedMeasure.selected.percentage/100) * 427 + 5 + \'px\'}" ng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.selectedInsight.selectedMeasure.selected.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.selectedMeasure.selected.percentage)}">\n\t\t\t\t\t{{ $ctrl.selectedInsight.selectedMeasure.selected.num }}\n\t\t\t\t\t<div tid="selected-measure-percentage" class="percentage">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t$ctrl.selectedInsight.selectedMeasure.selected\n\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="bar excluded" ng-if="!$ctrl.selectedInsight.isSelectionNegative" ng-style="{height: ($ctrl.selectedInsight.selectedMeasure.excluded.percentage/100) * 427 + \'px\'}">\n\t\t\t\t<div tid="excluded-measure-number" class="label" ng-style="{bottom: ($ctrl.selectedInsight.selectedMeasure.excluded.percentage/100) * 427 + 5 + \'px\'}" ng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.selectedInsight.selectedMeasure.excluded.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.selectedMeasure.excluded.percentage)}">\n\t\t\t\t\t{{ $ctrl.selectedInsight.selectedMeasure.excluded.num }}\n\t\t\t\t\t<div tid="excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t$ctrl.selectedInsight.selectedMeasure.excluded\n\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="negative-chart select-measure-dist" ng-show="$ctrl.selectedInsight.isSelectionNegative"></div>\n\t\t</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(868),n(95),n(869),n(147),n(106),n(103),n(870)],s=function(t,e,n,i,s,o,r){t.nativeComponent("qvSelectionInsightsSummary",{bindings:{showLoading:"<",hasSelection:"<",measure:"=",newMeasureChosen:"=",newSelection:"=",showFields:"<",selectionInsightsState:"=",states:"=",measureError:"="},controller:["$scope","$timeout","luiPopover","qvSelectionInsightsService","qvSelectionInsightsSearchService",function(t,e,a,l,c){var u=this;this.showLoading=true;var d=[];this.fieldList=[];this.showFieldsChanged=false;this.currentMeasure=u.measure;function p(){e(function(){var t=document.getElementsByClassName("ai-change-field-input");t[0].focus()},100)}this.showChangeField=function(t){var e=["$scope",function(t){function e(e){var n=t.highlight;var i=c.getMatchingFields(e,n);t.measures=i.filter(function(t){return!t.masterItemMeasures});t.masterMeasures=i.filter(function(t){return t.masterItemMeasures})}function n(n){t.highlight=n;e(u.fieldList)}t.filterFields=n;t.onSelectMeasure=b;t.navigate=y;e(u.fieldList)}];h(i,e,t.currentTarget,"bottom",f)};function h(t,e,n,i,s){var o={template:t,controller:e,dock:i,alignTo:n,showArrow:true,autoFocus:false};var r=a.show(o);d.push(r);r.closed.then(function(){"function"===typeof s&&s()});p()}function f(){d.forEach(function(t,e){t.close();d.splice(e,1)})}function g(){l.getMeasures(u.showFields).then(function(t){u.fieldList=t})}function v(){s.getList().then(function(e){t.masterMeasuresListModel=e});o(t,"masterMeasuresListModel",function(){g()})}v();this.refreshInsights=function(){n.publish("selection/insights/refresh");u.newMeasureChosen=false;u.newSelection=false;u.showFieldsChanged&&m();return l.getInsightDimensions(u.showFields,u.selectedMeasure).then(function(t){n.publish("selection/insights/new",t);u.currentMeasure=u.measure}).catch(function(t){n.publish("selection/insights/error",t.error)})};this.$onChanges=function(t){if(void 0!==t.showFields&&!t.showFields.isFirstChange()){u.showFieldsChanged=true;u.newMeasureChosen=false;n.publish("selection/insights/fields/change")}};function m(){l.getMeasures(u.showFields).then(function(t){u.showFieldsChanged=false;u.fieldList=t})}n.subscribe("selection/insights/show",function(){u.showFieldsChanged&&m()});function b(t){u.newMeasureChosen=true;u.newSelection=false;u.measureError=false;u.selectedMeasure=t;u.measure=t.qName;f();r.trackEvent(r.customEvents.NEW_MEASURE_CHOSEN,{type:"clicked"});u.refreshInsights()}function y(t){b(t)}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-selections-insights-cards-summary" ng-class="{\'empty\': $ctrl.showLoading}">\n\t<div ng-if="!$ctrl.showLoading">\n\t\t<div class="summary-text" ng-if="!$ctrl.newMeasureChosen && !$ctrl.newSelection && !$ctrl.showFieldsChanged">\n\t\t\t<span q-translation="SelectionInsights.SummarySelection"> </span>\n\t\t</div>\n\t\t<div class="measure-select">\n\t\t\t<div class="refresh-insights-new-selection" ng-if="!$ctrl.newMeasureChosen && ($ctrl.newSelection || $ctrl.showFieldsChanged) ">\n\t\t\t\t<p class="refresh-insights-paragraph" q-translation="SelectionInsights.Refresh.NewSelection"></p>\n\t\t\t\t<div class="refresh-insights--button-group">\n\t\t\t\t\t<button class="lui-button  lui-button--success refresh-insights--button onlyOne" q-translation="SelectionInsights.Refresh" ng-click="$ctrl.refreshInsights()"></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<h2 q-translation="Common.Measure"></h2>\n\t\t\t<p q-translation="SelectionInsights.CalculatedOn"></p>\n\t\t\t<button tid="ai-measure-picker" class="ai-measure-picker lui-button" id="ai-measure-picker" ng-click="$ctrl.showChangeField($event)" tabindex="0" ng-disabled="$ctrl.showFieldsChanged || $ctrl.newSelection">\n\t\t\t\t<span class="ai-measure-picker-text">{{ $ctrl.measure }}</span><span class="lui-icon lui-button__icon small lui-icon--small" ng-class="{\'lui-icon--arrow-down\' : !match.expanded, \'lui-icon--arrow-up\': match.expanded}"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="measure-error" ng-if="$ctrl.measureError" q-translation="SelectionInsights.ErrorNaN"></div>\n\t</div>\n</div>\n<div class="hr-div">\n\t<hr class="qv-selection-insights-hr" ng-if="$ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND" />\n</div>'},function(t,e){t.exports='<lui-popover class="ai-change-field-popover ai-popover">\n\t<object-add-typeahead>\n\t\t<lui-popover-header>\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input lui-input-group__input ai-change-field-input" type="text" autocomplete="off" ng-model="search.term" qva-focus="autoFocus" ng-change="filterFields(search.term)" maxlength="255" object-add-typeahead-input />\n\t\t\t</div>\n\t\t</lui-popover-header>\n\t\t<div class="lui-popover__body lui-nopad popover-body" object-add-typeahead-menu>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<div ng-if="masterMeasures.length > 0" class="object-add-popover-list-header" q-translation="Common.MasterMeasures"></div>\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in masterMeasures" ng-click="onSelectMeasure(field)" on-select="navigate(field)" object-add-typeahead-item="field">\n\t\t\t\t\t<span class="lui-list__text" qve-highlight text="{{ field.qName }}" query="highlight"></span>\n\t\t\t\t</li>\n\n\t\t\t\t<div ng-if="measures.length > 0" class="object-add-popover-list-header" q-translation="Common.Measures"></div>\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in measures" ng-click="onSelectMeasure(field)" on-select="navigate(field)" object-add-typeahead-item="field">\n\t\t\t\t\t<span class="lui-list__text" qve-highlight text="{{ field.qName }}" query="highlight"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\n\t\t\t<div class="no-hits" ng-if="fieldList.length === 0">\n\t\t\t\t<span><i q-translation="Toolbox.Search.Nohits" /></span>\n\t\t\t</div>\n\t\t</div>\n\t</object-add-typeahead>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(48),n(112)],s=function(t,e,n){e.service("qvSelectionInsightsSearchService",[function(){var e;function i(e,i){var s=[];var o;i?i=i?i.toLowerCase():"":i&&""!==i||(o=true);if(o)return e;s=t.uniq(e).filter(function(t){return n.librarySearchFn(t,i)});return n.localeOrderBy(s,function(t){return t.qName})}e={getMatchingFields:function t(e,n){return i(e,n)}};return e}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(872),n(873),n(306)],s=function(t,e,n){t.directive("qvGlobalSearch",function(){return{restrict:"E",template:e,controller:["$scope","$document","$element","$window",n],require:["qvGlobalSearch"],scope:true,replace:true,link:function t(){}}});return"<qv-global-search></qv-global-search>"}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div>\n\t<div class="qv-global-search" ng-class="{ \'overlay\': displaySuggestions || displayResult.data || displayResult.visuals }" ng-style="{paddingTop: toolbarHeight}" qva-outside="onOutsideSearch($event)" tid="globalSearch">\n\t\t<div class="zoomed-chart" ng-class="{\'animate-expand \': animateZoomedChart, \'animate-shrink\': !animateZoomedChart}">\n\t\t\t<div class="close-btn" ng-if="zoomedChart" tid="smartsearch-zoomed-chart">\n\t\t\t\t<button class="lui-fade-button" ng-click="minimizeExpandedChart()" tid="smartSearchExitZoomedChart">\n\t\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--close lui-icon--large"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="chart" ng-if="zoomedChart">\n\t\t\t\t<qv-object tid="smartsearch-zoomed-chart-object" model="zoomedChart.model" options="zoomedChart.options"></qv-object>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<qv-global-search-input class="qv-global-search-input"></qv-global-search-input>\n\t\t<div class="qv-global-search-line" ng-if="!showMobileIndexProgressBar"></div>\n\t\t<qv-mobile-index-progress ng-if="isSmallDevice && query.length === 0 && isIndexClosedFeature"></qv-mobile-index-progress>\n\t\t<qv-global-search-history ng-if="isSearchHistoryFeature && searchInputFocused && query.length === 0"></qv-global-search-history>\n\t\t<div class="qv-global-search-dimmer" ng-if="query.length > 0 || forceShowDimmer" ng-style="dimmerStyles">\n\t\t\t<qv-global-search-result tid="globalSearch.ResultList"></qv-global-search-result>\n\t\t\t<div ng-show="scrollShow && !activity.show" class="scroll-affordance scroll-vertical"></div>\n\t\t</div>\n\t</div>\n\t<div class="qv-global-search-glass" ng-if="query.length > 0" qva-activate="close();"></div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(113),n(108),n(97),n(106),n(143),n(874),n(110),n(227),n(50),n(128),n(99),n(881),n(882),n(883),n(884),n(885),n(49),n(89),n(91),n(95),n(105),n(222),n(887),n(890),n(901),n(903),n(905),n(908),n(169),n(175)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m,b,y,x,q,S,w){function C(t,e,n,i){var s={qOffset:e,qCount:n,qGroupOptions:[],qGroupItemOptions:[]};if(t===f.data){s.qGroupOptions.push({qGroupType:"DatasetType",qOffset:0,qCount:-1});s.qGroupItemOptions.push({qGroupItemType:"Field",qOffset:0,qCount:i})}else if(t===f.visuals){s.qGroupOptions.push({qGroupType:"GenericObjectsType",qOffset:0,qCount:30});s.qGroupItemOptions.push({qGroupItemType:"GenericObject",qOffset:0,qCount:i})}return s}function I(t){var e={qContext:"CurrentSelections"};t&&(e.qCharEncoding="Utf16");return e}function _(t,e){t.dimmerStyles["max-height"]=e;t.dimmerStyles["height"]=e}function D(t){t.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice}function k(k,T,E,A){var L=e.getService("qvGlobalSearchDataService"),M=e.getService("$timeout"),P=e.getService("qvGlobalSelectionsService"),O=e.getService("qvGlobalSearchService"),F,$={search:{idCounter:0,requestState:h.idle,searchTerms:""},searchVisuals:{idCounter:0,requestState:h.idle,searchTerms:""},result:{requestState:h.idle},suggest:{idCounter:0,requestState:h.idle,suggestTerms:""}},N=function t(){M(function(){k.isSmallDevice=u.isSmallDevice;k.isSmallDevice&&(k.forceShowDimmer=false);D(k);B=V();H()})},R=function t(){k.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice;D(k);B=V();H()},H=function t(){_(k,T.find("body").height()-B)},V=function t(){return E.offset().top+E[0].offsetTop+E.find(".qv-global-search-input").outerHeight()},B=V(),j=E.parent().parent(),z=this;k.inClient=i.inClient();k.zoomedChart=false;k.focusState=new g(new v(g,this,k),g.Input);F=new a(E,k,this);k.forceShowDimmer=false;k.isSmallDevice=u.isSmallDevice;k.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice;k.showMobileIndexProgressBar=false;k.isObjectsFeature=n["SMARTSEARCH_OBJECTS"]&&k.inClient&&(k.isSmallDevice||k.options&&k.options.objectSearchIsOn);k.isSearchHistoryFeature=n["SEARCH_HISTORY"];k.isIndexClosedFeature=n["SMARTSEARCH_INDEX_CLOSE"];k.suggestedChartExpanded=null;q.subscribe(S.Events.PubSub.ExpandSmartSearchSuggestedChart,function(t){k.zoomedChart=t;k.animateZoomedChart=Boolean(t);k.suggestedChartExpanded=Boolean(t);t&&k.isSmallDevice&&w.resizeCharts(A)});q.subscribe(S.Events.PubSub.RestoreSearchState,function(){if(k.suggestedChartExpanded){k.query=k.suggestedChartExpanded;z.setQueryFromHistory()}});k.minimizeExpandedChart=function(){k.suggestedChartExpanded=null;q.publish(S.Events.PubSub.ExpandSmartSearchSuggestedChart,null)};if(k.isSearchHistoryFeature){r.userId?k.userID=r.userId:k.userID="DESKTOP";k.searchInputFocused=false;k.activeHistoryIx=-1;k.historyPermission=false;k.searchHistory=m.initHistory(k)}u.ViewChanged.bind(N);u.OrientationChanged.bind(R);s.on("end",H);k.input="input goes here";k.result="result goes here";k.isSelectActiveInSmallDevice=false;k.$on("$destroy",function(){E.off("qv-outside");F.delete();u.ViewChanged.unbind(N);u.OrientationChanged.unbind(R);s.off("end",H);q.unsubscribe(S.Events.PubSub.ExpandSmartSearchSuggestedChart);q.unsubscribe(S.Events.PubSub.RestoreSearchState)});k.$on("updateForceShowDimmer",function(t,e){k.forceShowDimmer=e});k.$watch("throbber.show",function(t){t&&k.focusState.reset()});k.app.getCurrentSelectionObject().then(function(t){k.modelSelections=t});o(k,"modelSelections",function(t){var e=t.qSelectionObject.qSelections,n;n=e.reduce(function(t,e){return t+(true===e.qLocked)?1:0},0);k.currentSelections=e.length>0;k.allSelectionsLocked=e.length===n;k.isObjectsFeature&&z.searchVisuals(k.searchTerms);z.search(k.searchTerms)});k.$watch("app.isModal()",function(t){t&&M(function(){O.toggleGlobalSearch(k.app)})});k.$watch(P.isSelectActive.bind(null,k.app),function(t){k.isSelectActiveInSmallDevice=t&&k.isSmallDevice});k.$watch("query",function(t){O.setHaveQuery(k.app,!!t)});if(k.isIndexClosedFeature&&!k.isSmallDevice&&O.couldEngineBeIndexing(k.app)){k.forceShowDimmer=true;M(function(){k.$broadcast("toggleActivityIndicator",true)})}k.underlines=[];k.query="";k.searchTerms=[];k.searchTermGroups=[];k.matches=[];k.displayResult={data:false,visuals:false};k.activity={show:false};k.throbber={show:false};k.indexProgress={enabled:false,show:false,visible:false};k.indexDone={show:false,visible:false};k.activeSelectIx=-1;k.showMeMoreFocus=false;k.forcePartials=false;k.allSelectionsLocked=false;k.dimmerStyles={};k.error={show:false,message:"",description:""};k.paging={lastRowIx:0,totalRows:0};k.searchOutsideSelections=function(){z.searchOutsideSelections()};k.onShowMoreHits=function(t,e,n){t.stopPropagation();if(e.disableShowMore)return;_(k,E.find(".qv-global-search-dimmer").height());e.disableShowMore=true;e.mobileExpand=true;var i=C(f.data,n,1,e.qItemMatches.length+15);z.callSearch(k.searchTerms,i).then(function(t){L.showMore(t,e)}).finally(function(){e.disableShowMore=false})};k.getSearchTermGroup=function(t){return k.searchTermGroups.filter(function(e){return e.qSearchTermsMatched.length===t})};k.close=function(){z.closeSearch()};E.on("qv-outside",G);function G(e){var n=t(e.target);if(1===n.closest(".qv-selections-pager").length||1===n.closest(".transparent-overlay-scroll").length)return;z.closeSearch()}k.suggestions=[];k.displaySuggestions=false;k.activeSuggestionIx=-1;k.ignoreQueryChange=false;k.onOutsideSearch=function(){k.isSearchHistoryFeature&&z.showHistory(false)};k.onSuggestSelect=function(t,e){var n,i,s=[];if(!e){t=void 0!==t?t:k.activeSuggestionIx;e=k.suggestions[t]}L.getUnderlinersAndSearchTerms(k.query,s,[]);n=L.getResultingQueryFromSuggestion(s,e);if(n.length>255){F.off();c.showDialog({message:"ErrorDialog.SearchStringTooLong"});i=k.$on("errorHandlerClosed",function(){F.on();i()})}else{k.query=n+" ";k.ignoreQueryChange=false}z.hideSuggestions();k.$broadcast("focusInput");k.getInsightsCharts(e.value)};k.haveUnlockedSelections=function(){return k.currentSelections&&!k.allSelectionsLocked};k.getInsightsCharts=function(t){if(b.getFlag("CAO_MOBILE")){var n=e.getService("qvCaoChartService");if(k.query){k.unableTofetchInsightCharts=false;k.fetchingInsightChartsPending=true;n.getInsights(k.app,t).then(function(t){var e=[].concat(t.recommendations).concat(t.chartMatches);var n=e.map(function(t){return t.visualization.loadChart(k.app)});y.all(n).then(function(t){e=e.map(function(e,n){e=Object.assign({},e,{itemIndex:n,load:true,qItemType:"GenericObject",qTotalNumberOfMatches:0,qIdentifier:t[n].model.id,qItemMatches:[],qTermsMatched:[],qSearchTermsMatched:[]});return e});if(e.length>0){k.suggestedChartGroupTitle=x.get("GlobalSearch.Insight.ChartsTitle",[e.length]);k.insightVisualsGroups=[{qGroupType:"GenericObjectsType",qid:0,qItems:e,insightCharts:true,qSearchTermsMatched:[0],qTotalNumberOfItems:e.length}]}k.fetchingInsightChartsPending=false})},function(){k.unableTofetchInsightCharts=true;k.insightVisualsGroups=[];k.fetchingInsightChartsPending=false})}else k.insightCharts=[]}};this.hideSuggestions=function(){if(k.displaySuggestions){k.displaySuggestions=false;this.resetSuggestions()}};this.hideSoftKeyboard=function(){k.$broadcast("blurInput")};this.showNoResultsMessage=function(){return false};this.searchOutsideSelections=function(){k.outsideSelection=true;k.modelSelections.clearAll();k.$broadcast("focusInput")};this.setShowPartialMatches=function(){k.forcePartials=!k.forcePartials;p.treatAsDesktop()&&k.$broadcast("focusInput")};k.isPartials=function(){return k.searchTermGroups.length&&k.searchTerms.length>k.searchTermGroups[0].qSearchTermsMatched.length};this.resetSuggestions=function(){k.activeSuggestionIx=-1;k.activeSelectIx=-1};this.showSuggestions=function(){k.displaySuggestions=true;k.activeSuggestionIx=-1;k.activeSelectIx=-1};this.showError=function(t){k.displayResult={data:false,visuals:false};k.error.show=true;k.error.translation="ErrorCode."+t.code;t.isHandled=true};this.toogleSuggestions=function(t){t?this.showSuggestions():this.hideSuggestions()};this.emptyResult=function(){k.insightVisualsGroups=[];k.displayResult={data:false,visuals:false};k.activeSelectIx=-1;k.error.show=false;$.search.requestState=h.idle;$.searchVisuals.requestState=h.idle;$.suggest.requestState=h.idle;k.searchTerms=[];k.searchTermGroups=[];k.searchVisualsGroups=[];k.matches=[];k.outsideSelection=false;k.$broadcast("toggleActivityIndicator",false);k.forcePartials=false;k.focusState.reset();this.hideSuggestions();j.removeClass("queryon")};this.moveActiveResult=function(t){k.showMeMoreFocus=false;if(0===t)return;if(t>0){k.activeSelectIx=Math.min(k.activeSelectIx+1,k.searchTermGroups.length);k.activeSelectIx=Math.min(k.activeSelectIx,k.paging.totalRows-1);k.activeSelectIx===k.searchTermGroups.length&&(k.showMeMoreFocus=true)}else t<0&&(k.activeSelectIx=Math.max(k.activeSelectIx-1,0))};this.searchVisuals=function(t){if(!k.isObjectsFeature)return;_(k,T.find("body").height()-B);if(0===t.length)return;$.searchVisuals.idCounter=$.searchVisuals.idCounter+1;var e=$.searchVisuals.idCounter,n=this,i={qAttributes:["qProperty"],qCharEncoding:"Utf16"},s=C(f.visuals,0,-1,20);$.searchVisuals.requestState=h.pending;$.searchVisuals.searchTerms=t;function o(t){k.searchVisualsGroups=[];if(e===$.searchVisuals.idCounter&&$.searchVisuals.requestState===h.pending){$.searchVisuals.requestState=h.idle;$.searchVisuals.searchTerms="";L.transformResult(k,t)}}function r(t){if(t.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){n.emptyResult();n.showError(t)}if(t.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;$.searchVisuals.requestState=h.idle;$.searchVisuals.searchTerms="";k.displayResult.visuals=false}k.app[f.visuals](i,t,s).then(o,r)};this.search=function(t){_(k,T.find("body").height()-B);k.focusState.reset();if(0===t.length)return;j.addClass("queryon");$.search.idCounter=$.search.idCounter+1;var e=$.search.idCounter,n=this,i=C(f.data,0,5,5);$.search.requestState=h.pending;$.search.searchTerms=t;k.$broadcast("toggleActivityIndicator",true);k.$broadcast("resultScrollToTop");function s(n){k.searchTermGroups=[];k.matches=[];if(e===$.search.idCounter&&$.search.requestState===h.pending){$.search.requestState=h.idle;$.search.searchTerms="";k.searchTerms=t;k.$broadcast("toggleActivityIndicator",false,true);k.$broadcast("resultScrollToTop");L.transformResult(k,n);k.activeSelectIx=-1;k.paging.lastRowIx=k.searchTermGroups.length;k.paging.totalRows=n.qTotalNumberOfGroups}}function o(t){if(t.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){n.emptyResult();n.showError(t)}if(t.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;$.search.requestState=h.idle;$.search.searchTerms="";k.displayResult.data=false}k.error.show=false;this.callSearch(t,i).then(s,o)};this.loadNextPage=function(){_(k,E.find(".qv-global-search-dimmer").height());var t=C(f.data,k.paging.lastRowIx,5,5),e=this;if($.result.requestState!==h.idle)return;$.result.requestState=h.pending;k.showMeMoreFocus=false;k.$broadcast("toggleActivityIndicator",true);function n(t){$.result.requestState=h.idle;k.$broadcast("toggleActivityIndicator",false,true);L.transformResult(k,t);k.paging.lastRowIx=k.searchTermGroups.length}function i(){if(i.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){e.emptyResult();e.showError(i)}if(i.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;$.search.requestState=h.idle;$.search.searchTerms="";k.displayResult.data=false}this.callSearch(k.searchTerms,t).then(n,i)};this.callSearch=function(t,e){return k.app[f.data](I(true),t,e)};this.closeSearch=function(){if(k.isSmallDevice){z.emptyResult();k.query="";k.$broadcast("blurInput")}else O.toggleGlobalSearch(k.app)};this.suggest=function(t){if(0===t.length)return;var e=this;$.suggest.idCounter=$.suggest.idCounter+1;var n=$.suggest.idCounter;$.suggest.requestState=h.pending;$.suggest.suggestTerms=t;function i(t){if(b.getFlag("CAO_MOBILE")){var i=t.qFieldNames.map(function(t){return{qValue:t,qTerm:0}});t.qSuggestions=t.qSuggestions.concat(i)}$.suggest.suggestTerms="";if(L.isWhiteSpaceAt(k.query,k.query.length-1)||'"'===k.query.charAt(k.query.length-1))return;if(n===$.suggest.idCounter&&$.suggest.requestState===h.pending){L.transformSuggest(k,t,10);e.toogleSuggestions(k.suggestions.length>0);k.$broadcast("suggestShow",true,true)}$.suggest.requestState=h.idle}function s(t){t.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT&&(t.isHandled=true);if(t.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;$.suggest.requestState=h.idle;$.suggest.suggestTerms=""}k.app.searchSuggest({},t).then(i,s)};this.select=function(t,e){k.$broadcast("blurInput");if(0===t.length||0===k.searchTermGroups.length)return;if(e<0){e=0;k.activeSelectIx=0}var n=[],i=[];L.getUnderlinersAndSearchTerms(k.query,n,i);var s=i;k.app.selectAssociations(I(),t,e).then(function(){k.isSearchHistoryFeature&&k.historyPermission&&m.createEntryInHistory(k,s)});this.emptyResult();k.query="";p.treatAsDesktop()&&!k.isSearchHistoryFeature&&k.$broadcast("focusInput")};this.setTestSearchTermGroups=function(t){k.searchTermGroups=t};this.onNavigateToSheet=function(t){var e=[],n=[];L.getUnderlinersAndSearchTerms(k.query,e,n);k.isSearchHistoryFeature&&k.historyPermission&&""!=k.query&&m.createEntryInHistory(k,n);if(p.treatAsDesktop()){z.emptyResult();k.query="";k.isSearchHistoryFeature?k.$broadcast("blurInput"):k.$broadcast("focusInput")}else M(function(){z.emptyResult();k.query=""},200);d.highlightedCell(t)};this.showMoreHitsForVisual=function(t){var e={qOffset:0,qCount:1,qGroupOptions:[{qGroupType:"GenericObjectsType",qOffset:t.itemIndex,qCount:1}],qGroupItemOptions:[{qGroupItemType:"GenericObject",qOffset:0,qCount:t.qItemMatches.length+15}]};return k.app[f.visuals]({qAttributes:["qProperty"]},k.searchTerms,e).then(function(e){L.showMore(e,t);return t})};this.showHistory=function(t){k.searchInputFocused=t};this.setQueryFromHistory=function(t){k.ignoreQueryChange=false;t>=0&&(k.query=k.searchHistory[t]);this.showHistory(false);k.$broadcast("focusInput");b.getFlag("CAO_MOBILE")&&k.query&&k.getInsightsCharts(k.query)};this.clearHistory=function(){m.clearSearchHistory(k);this.showHistory(false)};this.removeHistory=function(t){m.removeSingleHistory(k,t)}}return k}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(184),n(49),n(221)],s=function(t,e,n){function i(i,s,o){var r,a,l=i.find("input")[0],c=t.getService("$document");r={preventDefault:false,allowInInput:true,delay:0};a={preventDefault:false,allowInInput:true,delay:75};s.focusState.ActiveStateChanged.bind(u);function u(){s.activeSelectIx=s.focusState.activeStateName===s.focusState.Results?0:-1;s.activeHistoryIx=s.focusState.activeStateName===s.focusState.History?0:-1;s.activeSuggestionIx=s.focusState.activeStateName===s.focusState.Suggestions?0:-1;s.activeVisualIx=s.focusState.activeStateName===s.focusState.Visuals?0:-1;s.$broadcast(s.focusState.activeStateName===s.focusState.Visuals?"visualsGroupFocus":"visualsGroupBlur")}function d(){return"INPUT"===c[0].activeElement.tagName}function p(){e.preventDefault();t.$rootScope.$apply()}function h(t){var e,n,i;if(document.selection&&document.selection.createRange){e=document.selection.createRange();n=e.getBookmark();i=n.charCodeAt(2)-2}else t.setSelectionRange&&(i=t.selectionStart);return i===t.value.length}function f(){d()?s.focusState.activeStateName===s.focusState.Suggestions?o.hideSuggestions():s.query?s.query="":s.close():s.close();p()}function g(){if(s.focusState.activeStateName===s.focusState.Suggestions){s.activeSuggestionIx=s.activeSuggestionIx>0?s.activeSuggestionIx-1:s.suggestions.length-1;p()}else if(s.focusState.activeStateName===s.focusState.Visuals){s.$broadcast("visualsGroupMoveActiveVisual",-1);p()}}function v(){if(s.focusState.activeStateName===s.focusState.Suggestions){s.activeSuggestionIx=(s.activeSuggestionIx+1)%s.suggestions.length;p()}else if(s.focusState.activeStateName===s.focusState.Visuals){s.$broadcast("visualsGroupMoveActiveVisual",1);p()}}function m(){var t=s.focusState.activeStateName;s.focusState.previous();if(t===s.focusState.activeStateName)switch(s.focusState.activeStateName){case s.focusState.History:s.activeHistoryIx=Math.max(-1,s.activeHistoryIx-1);break;case s.focusState.Results:o.moveActiveResult(-1);break}p()}function b(){var t=s.focusState.activeStateName;s.focusState.next();if(t===s.focusState.activeStateName)switch(s.focusState.activeStateName){case s.focusState.History:s.activeHistoryIx=Math.min(s.activeHistoryIx+1,s.searchHistory.length-1);break;case s.focusState.Results:o.moveActiveResult(1);break}p()}function y(t){switch(s.focusState.activeStateName){case s.focusState.History:o.setQueryFromHistory(s.activeHistoryIx);break;case s.focusState.Input:s.isPartials()?o.setShowPartialMatches():s.displaySuggestions?x(t,true):s.displayResult.data?n.getFlag("CAO_MOBILE")||o.select(s.searchTerms,0):o.showNoResultsMessage()&&s.haveUnlockedSelections()&&o.searchOutsideSelections();break;case s.focusState.Suggestions:x(t,true);break;case s.focusState.Visuals:s.$broadcast("selectActiveVisualItem");break;case s.focusState.Partials:o.setShowPartialMatches();break;case s.focusState.Results:s.showMeMoreFocus?o.loadNextPage():o.select(s.searchTerms,s.activeSelectIx);break;case s.focusState.StartNewSearch:o.searchOutsideSelections();break}n.getFlag("CAO_MOBILE")&&s.query&&s.getInsightsCharts(s.query);p()}function x(t,e){if(s.displaySuggestions&&(e||h(l))){s.activeSuggestionIx=-1===s.activeSuggestionIx?0:s.activeSuggestionIx;s.onSuggestSelect()}p()}function q(){o.closeSearch();p()}this.keyboardShortcutsGroup=e.createGroup("global-search-"+s.app.id,1);this.keyboardShortcutsGroup.registerKeys("esc",f,r);this.keyboardShortcutsGroup.registerKeys("left",g,a);this.keyboardShortcutsGroup.registerKeys("right",v,a);this.keyboardShortcutsGroup.registerKeys("up",m,a);this.keyboardShortcutsGroup.registerKeys("down",b,a);this.keyboardShortcutsGroup.registerKeys("enter",y,r);this.keyboardShortcutsGroup.registerKeys("tab",x,r);this.keyboardShortcutsGroup.registerKeys("ctrl+f",q,r);this.keyboardShortcutsGroup.on();this.on=function(){this.keyboardShortcutsGroup.on()};this.off=function(){this.keyboardShortcutsGroup.off()};this.delete=function(){this.keyboardShortcutsGroup.delete();s.focusState.ActiveStateChanged.unbind(u)}}return i}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(91)],s=function(t){function e(t){return t.libId?t.libIdLabel?t.libIdLabel:"Unknown master item":t.aggr?t.aggr+"("+t.field+")":t.field}function n(n,i){var s=i.filter(function(t){return void 0!==t}).length;var o=n&&n.filter(function(t){return Object.keys(t.msgParams).length===s});var r=null;o&&o.forEach(function(t){if(t.msgParams){var e=t.msgParams;var n=Object.keys(e);var s=true;n.forEach(function(t){var e=i.some(function(e){return e.slot&&e.slot===t});e||(s=false)});s&&(r=t)}});if(!r)return"";var a=[void 0,void 0,void 0,void 0,void 0];Object.keys(r.msgParams).forEach(function(t){var n=i.filter(function(e){return e.slot===t})[0];var s=e(n);a[r.msgParams[t]]=s});return t.get(r.msgId,a)}return{findTitleForChart:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(89)],s=function(t){function e(t,e,n,i){this.chartId=t;this.searchReport=n;this.app=i;this.type="found";this.analysisPrecedentId="found";this.appearsOnSheets=e}e.prototype.getTitle=function(){var e=new t;this.app.getObject(this.chartId).then(function(t){t.getLayout().then(function(t){e.resolve(t.title)})});return e.promise};e.prototype.getMatchDetails=function(){var t=[];var e=this.chartId;if(this.searchReport.search){var n=this.searchReport.search["chartFinder-Title"].searchHits;Object.keys(n).forEach(function(i){if(i.includes(e)){var s=n[i].matchingTypes;s.forEach(function(e){t.push({matchedOn:n[i].title,matchedField:e})})}})}return t};e.prototype.getChartType=function(){var e=new t;this.app.getObject(this.chartId).then(function(t){t.getLayout().then(function(t){e.resolve(t.visualization)})});return e.promise};e.prototype.loadChart=function(e){var n=new t;e.getObject(this.chartId).then(function(t){t.getProperties().then(function(e){n.resolve({model:t,options:{interactionState:0,showTitles:false},properties:e})})});return n.promise};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(1097),n(1098),n(1114),n(1116),n(1119),n(878),n(199)],s=function(t,e,n,i,s,o,r,a){return{generateAlternativeChartProperties:c,generateDefaultChartProperties:u,generateChartPropertiesForRecommendation:d};function l(i,a,l,c){return s.createDataCollection(l,i).then(function(l){var u=s.adaptDataCollectionForRecommendations(l,a.qHyperCube);return e.getChartRecommendations(u).then(function(s){var u=[];var d=!t.isArray(s);d&&(s=[]);var p=s.some(function(t){return"list"===t.analysis.analysis});if(!p){var h=e.getFallbackRecommendation(l);s.push(h)}s.forEach(function(e){var s=o.merge(a.qHyperCube,i.qHyperCubeDef,l,e);var r=n.findChartsByAnalysis(e,s);n.createChartDataProperties(e,r).forEach(function(e){var n=t.findWhere(u,{type:e.type});if(n){if(e.score&&(!n.score||e.score>n.score)){var i=u.indexOf(n);u[i]=e}}else u.push(e)})});if(c){var f=r.getSupportedChartTypes().slice().filter(function(t){var e=true;for(var n=0;n<u.length;n++)if(u[n].type===t){e=false;break}return e});var g=o.merge(a.qHyperCube,i.qHyperCubeDef,l,s[0]);var v=n.findPossibleCharts(f,g);n.createChartDataProperties(s[0],v).forEach(function(t){u.push(t)})}return{recommendations:s,allChartDataProperties:u}})})}function c(t,e,n,s){return l(t,e,n,s).then(function(e){if(a.CRE_CHARTS){var s={recommendations:e.recommendations,allChartDataProperties:e.allChartDataProperties};console.log(s)}e.allChartDataProperties.length>1&&e.allChartDataProperties.sort(function(t,e){return e.score-t.score});return e.allChartDataProperties.map(function(e){return i.generateProperties(e,t,n)})})}function u(t,e,n,s){return l(t,e,n,s).then(function(e){var s=e.allChartDataProperties;s.length>1&&s.sort(function(t,e){return e.score-t.score});var o=s[0];t&&t.preferredChart&&s.forEach(function(e,n){e.type===t.preferredChart&&(o=s[n])});return i.generateProperties(o,t,n).then(function(t){if(a.CRE_CHARTS){var n={recommendations:e.recommendations,allChartDataProperties:s,bestChartDataProperties:o,chartProperties:t};console.log(n)}return t})})}function d(e,s){var r=[];var l=[e];var c=l.some(function(t){return"list"===t.analysis.analysis});if(!c){var u={analysis:{analysis:"list",dims:e.analysis.dims,msrs:e.analysis.msrs}};l.push(u)}l.forEach(function(e){var i=o.collectFromRecommendation(e);var s=n.findChartsByAnalysis(e,i);n.createChartDataProperties(e,s).forEach(function(e){var n=t.findWhere(r,{type:e.type});if(n){if(e.score&&(!n.score||e.score>n.score)){var i=r.indexOf(n);r[i]=e}}else r.push(e)})});r.length>1&&r.sort(function(t,e){return e.score-t.score});var d=r[0];return i.generateProperties(d,void 0,s).then(function(t){if(a.CRE_CHARTS){var e={recommendations:l,allChartDataProperties:r,bestChartDataProperties:d,chartProperties:t};console.log(e)}return t})}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(1099),n(1100),n(1101),n(1102),n(1103),n(1104),n(1105),n(1106),n(1107),n(1108),n(1109),n(1110),n(1111),n(1112)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f){function g(t){v[t.type]=t}var v={};g(n);g(i);g(o);g(r);g(a);g(l);g(c);g(u);g(d);g(p);g(h);g(s);g(e);g(f);function m(){var e=t.keys(v);if(y)return t.filter(e,function(t){return y.indexOf(t)>=0});return e}function b(t){return v[t]}var y=void 0;function x(t){y=t}return{getSupportedChartTypes:m,getChartDataDefinition:b,restrictSupportedChartTypes:x}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(92),n(404),n(128),n(89),n(367),n(49),n(114),n(123),n(196)],s=function(t,e,n,i,s,o,r,a,l,c){var u=e.extend("CaoChartUiModel",{init:function e(n,i){this.app=i;this.zoomed=false;this.ObjectPlacementService=t.getService("qvObjectPlacementService");this.CaoChartService=t.getService("qvCaoChartService");this.$timeout=t.getService("$timeout");this.chart=n;this.object={};this.zoomedObject={};this.options={};this.zoomedOptions={};this.state="READY";this.modified=false;this.chartTypeImageUrl=void 0;this.chartType=void 0;this.rendered=false;this.renderedCount=0;this.insightFeedback=r.getFlag("CE_PRECEDENTS");this.interaction=true},updateState:function t(e){this.state=e},isHidden:function t(){if(this.isFound())return false;return this.insightFeedback&&this.chart.visualization.visualization.analysis.precedents&&this.chart.visualization.visualization.analysis.precedents.disliked||this.chart.invalidFromLearning},isRendered:function t(){return this.rendered},isFound:function t(){return"found"===this.chart.visualization.type},isGenerated:function t(){return"generated"===this.chart.visualization.type},isModified:function t(){return this.modified},setState:function t(e){this.state=e},setModified:function t(e){this.modified=e},setType:function t(e){this.chart.visualization.type=e},refreshChartType:function t(){var e=this;e.chart.visualization.getChartType().then(function(t){e.chartType=t;e.chartTypeImageUrl=n.getImageNameFromChartType(t)})},getTitle:function t(){return this.chart.visualization.getTitle().then(function(t){return t})},getComplexity:function t(){return this.chart.complexity},getRelevance:function t(){return this.chart.relevance},getMatchRecord:function t(){return this.chart.visualization.visualization.matchRecord},getState:function t(){return this.state},getModel:function t(){return this.chart.model},getObject:function t(){return this.zoomed?this.zoomedObject:this.object},getAnalysisPrecedentId:function t(){return this.chart.visualization.analysisPrecedentId},getMatchDetails:function t(){return this.chart.visualization.getMatchDetails()},getSheetsThisChartAppearsOn:function t(){return this.chart.visualization.appearsOnSheets},getMatches:function t(){return this.chart.visualization.visualization.matchRecord.matches},getFields:function t(){return this.getMatches().filter(function(t){return!t.slotRole})},getMeasures:function t(){return this.getMatches().filter(function(t){return t.slotRole===c.MEASURE})},getDimensions:function t(){return this.getMatches().filter(function(t){return t.slotRole===c.DIMENSION})},getChartType:function t(){return this.chart.visualization.visualization.analysis.analysis},getSearchReport:function t(){return this.chart.visualization.searchReport},getAnalysis:function t(){return this.chart.visualization.visualization.analysis},isObjectInvalid:function t(){return this.zoomed?this.zoomedObject.invalid:this.object.invalid},isViewDataToggled:function t(){return this.zoomed?this.zoomedObject.viewDataToggled:this.object.viewDataToggled},isDataViewSupported:function t(){return this.zoomed?this.zoomedObject.supportViewData&&this.zoomedObject.supportViewData():this.object.supportViewData&&this.object.supportViewData()},toggleDataView:function t(){if(this.zoomed)return this.zoomedObject.toggleDataView();return this.object.toggleDataView()},activateSelectionWatch:function t(e){this.object.selectionsApi.watchActivated(e)},deactivateSelectionWatch:function t(e){this.object.selectionsApi.watchDeactivated(e)},adaptChart:function t(e){var n=this;return this.CaoChartService.adaptRecommendation(n.chart.visualization.visualization,n.app).then(function(t){n.chart.visualization=new o({analysis:t.analysis,matchRecord:t.matchRecord},n.chart.visualization.searchReport,t.properties);delete n.rendered;n.isViewDataToggled()?n.toggleDataView().then(function(){n.shouldRedraw=true}):n.shouldRedraw=true;n.recalculateConfidence=e})},addToNewSheet:function t(){var e=this;return e.chart.model.getProperties().then(function(t){return e.ObjectPlacementService.addToNewSheet(t).then(function(t){e.setType("found");e.chart.visualization.appearsOnSheets.push(t.id);return t})})},addToSheet:function t(e){var n=this;return n.chart.model.getProperties().then(function(t){return n.ObjectPlacementService.addObjectToSheet(t,e,i.getModel()).then(function(t){n.setType("found");n.chart.visualization.appearsOnSheets.push(t.id);return t})})},setChartInteraction:function t(e){if(this.zoomed&&this.zoomedObject&&this.interaction!==e){this.interaction=e;e?this.zoomedObject.on():this.zoomedObject.off()}},setChartInteractionState:function t(e){this.options.interactionState=e},destroyChart:function t(){var e=this;if(e.zoomed){e.zoomed=false;return}if("LOADING"===e.state||"LOADED"===e.state){if(!e.rendered&&e.object&&e.object.subscription){e.rendered=false;e.object.cancel()}e.isGenerated()&&e.chart.model&&e.chart.model.id&&!e.zoomed?e.app.destroySessionObject(e.chart.model.id).then(function(){e.rendered=false;e.state="READY"}):e.state="READY"}},initializeOptions:function t(){this.options={};this.zoomedOptions={};this.options.isReadonly=false;this.options.isPopover=false;this.options.selectionsDisabled=true;this.options.interactionState=l.STATIC;this.options.direction=a.direction;this.zoomedOptions.isReadonly=false;this.zoomedOptions.isPopover=false;this.zoomedOptions.selectionsDisabled=false;this.zoomedOptions.interactionState=l.ANALYSIS;this.zoomedOptions.direction=a.direction},loadChart:function t(e){var n=this;var i=new s;var o;if(n.rendered){n.setState("LOADED");e();i.resolve()}else{n.initializeOptions();var r=n.chart.model?n.app.destroySessionObject(n.chart.model.id):s.when({});r.then(function(){n.chart.visualization.loadChart(n.app).then(function(t){n.object&&n.object.type&&(n.object.type=null);n.zoomedObject&&n.zoomedObject.type&&(n.zoomedObject.type=null);n.chart.model=t.model;n.state="LOADED";function s(){o&&n.$timeout.cancel(o)}var r=function t(){if(n.zoomed){n.renderedCount++;if(n.renderedCount<2)return}n.renderedCount=0;n.rendered=true;e&&e();n.state="LOADED";s();i.resolve()};n.options.onRendered=r;n.zoomedOptions.onRendered=r;var a=function t(){s();i.resolve()};n.options.onCanceled=a;n.zoomedOptions.onCanceled=a;o=n.$timeout(function(){if(!n.allowLongLoad&&!n.rendered&&n.object&&n.object.subscription){n.object.subscription.cancel();n.zoomedObject&&n.zoomedObject.subscription&&n.zoomedObject.subscription.cancel();n.state="MANUAL_LOAD";i.resolve()}},n.chart.suggestedTimeout)},function(){i.resolve()})})}return i.promise}});return u}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};Object.defineProperties(t,{idle:{value:0},pending:{value:1}});return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};Object.defineProperties(t,{data:{value:"searchResults"},visuals:{value:"searchObjects"},indexProgress:{value:"GetProgress"}});return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(102)],s=function(t){function e(n,i){var s=n[i];if(!(this instanceof e))throw new Error("FocusState needs to be called with the new keyword");if(!s)throw new Error("Invalid initialStateName provided");t.mixin(this);this.notification("ActiveStateChanged");Object.defineProperties(this,{initialState:{value:s},activeState:{configurable:true,value:s},activeStateName:{configurable:true,value:s.name}})}e.prototype.next=function(){var t=this.activeState;if(t.onBeforeNext&&!t.onBeforeNext())return;var e=t.next();while(e){if(!e.onBeforeEnter||e.onBeforeEnter()){n(this,e);return}e=e.next()}};e.prototype.previous=function(){var t=this.activeState;if(t.onBeforePrevious&&!t.onBeforePrevious())return;var e=t.previous();while(e){if(!e.onBeforeEnter||e.onBeforeEnter()){n(this,e);return}e=e.previous()}};e.prototype.reset=function(){n(this,this.initialState)};i(e,"Input");i(e,"Suggestions");i(e,"History");i(e,"Partials");i(e,"Visuals");i(e,"SuggestedCharts");i(e,"Results");i(e,"StartNewSearch");function n(t,e){Object.defineProperties(t,{activeState:{value:e},activeStateName:{value:e.name}});t.ActiveStateChanged.emit()}function i(t,e){var n={value:e};Object.defineProperty(t,e,n);Object.defineProperty(t.prototype,e,n)}return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t,i,s){var o={};n(o,t.Input,{previous:function t(){return false},onBeforeNext:function t(){return!s.throbber.show},next:e.bind(o,t.Suggestions)});n(o,t.Suggestions,{onBeforeEnter:function t(){return!!s.displaySuggestions},previous:e.bind(o,t.Input),next:e.bind(o,t.History)});n(o,t.History,{onBeforeEnter:function t(){return s.isSearchHistoryFeature&&s.searchInputFocused&&0===s.query.length},onBeforeNext:function t(){return false},onBeforePrevious:function t(){return 0===s.activeHistoryIx},previous:e.bind(o,t.Suggestions),next:e.bind(o,t.Visuals)});n(o,t.Visuals,{onBeforeEnter:function t(){return s.isObjectsFeature&&s.displayResult.visuals&&!s.isSmallDeviceLandscape},previous:e.bind(o,t.History),next:e.bind(o,t.Partials)});n(o,t.Partials,{onBeforeEnter:function t(){return!!s.displayResult.data&&s.isPartials()},previous:e.bind(o,t.Visuals),next:e.bind(o,t.Results)});n(o,t.Results,{onBeforeEnter:function t(){return!!s.displayResult.data&&(!s.isPartials()||s.forcePartials)},onBeforeNext:function t(){return false},onBeforePrevious:function t(){return 0===s.activeSelectIx},previous:e.bind(o,t.Partials),next:e.bind(o,t.StartNewSearch)});n(o,t.StartNewSearch,{onBeforeEnter:function t(){return i.showNoResultsMessage()&&s.haveUnlockedSelections()},previous:e.bind(o,t.Results),next:function t(){return false}});return o}function e(t){var e=this[t];if(!e)throw new Error("Invalid stateName provided");return e}function n(t,e,n){if(t[e])throw new Error("State with name '"+e+"' already exists");n.name=e;t[e]=n}return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(886)],s=function(t,e){function n(t){return t.app.id+"."+t.userID+".smartSearch.history"}function i(t){t.storage=a(t);if("NONE"==t.storage)return;var e=n(t);if(t.storage.contains(e)){var i=f(t.storage.get(e));return i}}function s(t,e){var i=n(t),s=[],o=[];if(t.storage.contains(i)){s=t.storage.get(i);o=l(e);var r=c(o,s);var a=f(r);t.storage.set(i,r);t.searchHistory=a}else{o=l(e);s.unshift(o);t.storage.set(i,s);var u=f(s);t.searchHistory=u}}function o(t){var e=n(t);if(t.storage.contains(e)){t.searchHistory=[];t.storage.remove(e)}}function r(t,e){var i=n(t);if(t.storage.contains(i)){var s=t.storage.get(i);s.splice(e,1);t.storage.set(i,s);var o=f(s);t.searchHistory=o}}function a(t){if("DESKTOP"==t.userID){t.historyPermission=true;return e}if(t.userID&&"anonymous"!=t.userID.substring(0,9)){t.historyPermission=true;return e}t.historyPermission=false;return"NONE"}function l(t){return t.map(function(t){return t.startQuote&&t.endQuote?t.string='"'+t.string+'"':t.string})}function c(t,e){var n=d(e);var i=p(t);var s=h(n,i);var o=[];if(s>=0){e.splice(s,1);e.unshift(t);o=u(e)}else{e.unshift(t);o=u(e)}return o}function u(t){t.length>4&&(t.length=4);return t}function d(t){function e(t){return t.toLowerCase()}return t.map(function(t){return t.map(e)})}function p(t){return t.map(function(t){return t.toLowerCase()})}function h(e,n){for(var i=0;i<e.length;i++)if(t.isEqual(e[i],n))return i}function f(t){return t.map(function(t){return t.join(" ")})}return{initHistory:i,createEntryInHistory:s,clearSearchHistory:o,removeSingleHistory:r,getStoragePath:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(118)],s=function(t,e){var n="sessionstorageservice";function i(e){if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');return n+"."+e}function s(e,n,s){var o=(new Date).getTime(),r,a;if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');if(!t.isObject(n))throw new Error('The value "'+n+'" for the key "'+e+'" is not valid object.');if(s){if(!t.isNumber(s))throw new Error('The time to live value "'+s+'" is not numeric.');s+=o}a={timeToLive:s,value:n};r=JSON.stringify(a);sessionStorage[i(e)]=r}function o(e){if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');var n=t.isEmpty(sessionStorage[i(e)]);return!n}function r(e,n){if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');if(!o(e)){if(void 0!==n)return n;throw new Error('There is no data set for the key "'+e+'". Please use contains() first to verify you should actually do a get().')}var i=a(e);return i.value}function a(t){var e=JSON.parse(sessionStorage[i(t)]);return e}function l(e){if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');if(!o(e))throw new Error('There is no data set for the key "'+e+'". Please use contains() first to verify you should actually do a get().');delete sessionStorage[i(e)]}function c(){var i,s,o;for(i in sessionStorage)if(e.startsWith(i,n)){i=i.substring(n.length+1);s=a(i);o=(new Date).getTime();t.isNumber(s.timeToLive&&o>s.timeToLive)&&l(i)}}return{set:s,get:r,contains:o,clean:c,remove:l}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(91),n(90),n(888),n(889),n(139),n(96),n(99),n(169)],s=function(t,e,n,i,s,o,r,a,l){var c=null;function u(t,e){var n;if(t.length!==e.length)return false;for(n=0;n<t.length;++n)if(t[n]!==e[n])return false;return true}e.directive("qvGlobalSearchInput",["$timeout","qvGlobalSearchDataService",function(o,r){return{restrict:"E",replace:true,template:s,require:"^qvGlobalSearch",link:function s(d,p,h,f){var g=p.find("input"),v=[],m=e.getService("$document");g.on("keydown",function(){d.ignoreQueryChange=false});d.$watch("isSelectActiveInSmallDevice",function(t){d.autoFocus=!i.isIos()&&!i.isAndroid()&&!t});d.placeholder=n.get("GlobalSearch.SearchData");function b(e){if(d.isInputFocused){if(1===t(e.target).closest(".qv-global-search-suggest").length||1===t(e.target).closest(".qv-search-last-history").length)return;e.preventDefault();e.stopPropagation();a.preventGestures(this.gestureHandler);d.$apply(function(){f.hideSuggestions();f.hideSoftKeyboard()})}}d.isObjectsFeature&&!l.treatAsDesktop()&&p.on("qv-outside",b);d.$watch("query",function(t){var e=[],n,i;o.cancel(c);f.showHistory(d.isSearchHistoryFeature&&d.isInputFocused&&0===d.query.length);d.ignoreQueryChange||f.resetSuggestions();if(!t||0===t.length){f.emptyResult();d.underlines.length=0;v=[];return}r.getUnderlinersAndSearchTerms(t,d.underlines,e);if(d.ignoreQueryChange){d.ignoreQueryChange=false;return}c=o(function(){if(r.isWhiteSpaceAt(t,t.length-1)||'"'===t.charAt(t.length-1))f.hideSuggestions();else{i=r.getSuggestTerms(t,e);f.suggest(i)}n=e.map(function(t){return t.string});if(e.length>0&&!u(n,v)){f.searchVisuals(n);f.search(n)}else t.length<r.getMinQueryLength()&&f.emptyResult();v=n;c=null},200)});d.$watch("isInputFocused",function(t){d.isSmallDevice&&(t?m.find("body").animate({scrollTop:p.offset().top},100):d.isObjectsFeature&&a.utils.touch&&f.hideSuggestions());d.isSearchHistoryFeature&&t&&0===d.query.length&&f.showHistory(true)});d.$on("focusInput",function(){g.focus()});d.$on("blurInput",function(){g.blur()});d.$on("$destroy",function(){g.off()})}}}]);e.directive("qvGlobalSearchInputHint",["qvGlobalSearchDataService",function(t){return{restrict:"E",replace:true,template:o,require:"^qvGlobalSearch",link:function e(n){function i(){var e=n.suggestions[-1===n.activeSuggestionIx?0:n.activeSuggestionIx],i=[],s=[],o,a,l,c,u;t.getUnderlinersAndSearchTerms(n.query,i,s);o=t.getSuggestTerms(n.query,s);if(!n.displaySuggestions||n.suggestions.length<=0||0===o.length)return;a=t.getUnderlineLengthFromTermIx(i,e.term);c=i.slice(a).reduce(function(t,e){return t+(e.isWhitespace?" ":e.string)},"");l=r.string(c).length;c=r.string(e.value).slice(0,l);u=r.string(e.value).slice(l);n.ignoreQueryChange=true;n.hintString=u}n.$watch("activeSuggestionIx",function(){i()});n.$watchCollection("suggestions",function(){i()});n.$watch("displaySuggestions",function(){i()})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-search-input" ng-class="{\'focus\': isInputFocused}">\n\t<div class="search-field-area">\n\t\t<lui-search class="search-field" query="query" auto-focus="autoFocus" autocomplete="\'off\'" is-focused="isInputFocused" tid="globalSearch.searchField" placeholder="{{placeholder}}" />\n\t</div>\n\t<div class="search-underlines">\n\t\t<span ng-repeat="underline in underlines" class="underline" ng-class="underline.isWhitespace ? \'term-space\' : \'term\' + underline.colorIx">{{underline.string}}</span><qv-global-search-input-hint></qv-global-search-input-hint>\n\t</div>\n</div>\n'},function(t,e){t.exports='<span ng-show="displaySuggestions" class="search-suggest" tid="globalSearch.suggestionString">{{hintString}}</span>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(891),n(892),n(893),n(96),n(99),n(49),n(370),n(895)],s=function(t,e,n,i,s,o,r){var a={INITIAL:0,VISUALS_DOCKED:1,DATA_DOCKED:2};t.directive("qvGlobalSearchResult",["$timeout",function(t){return{restrict:"E",template:e,replace:true,require:["^qvGlobalSearch","qvGlobalSearchResult"],controller:function t(){this.getElement=function(){};this.setDockState=function(){}},link:function e(n,i,l,c){var u=c[0],d=c[1],p,h,f=function e(){var s=this,r=0;o.treatAsDesktop()&&!h&&(h=i.find(".qv-smartsearch-visuals-group"));t(function(){if(h&&h.length){r=h[0].offsetTop+h[0].offsetHeight-33;n.fixedbar=s.scrollTop>r}n.scrollShow=s.scrollHeight-s.scrollTop>s.clientHeight})},g=!o.treatAsDesktop()&&n.isObjectsFeature?i.find(".data-container"):i;n.dockState=a.INITIAL;n.caoMobile=r.getFlag("CAO_MOBILE");n.emptyMessageEnabled=false;n.fixedbar=false;n.classes={"qv-global-search-result-throbber-open":n.activity.show,"with-objects":n.isObjectsFeature&&!n.isSmallDeviceLandscape};n.$watch("isObjectsFeature && !isSmallDeviceLandscape",function(t){n.classes["with-objects"]=t});n.$watch("activity.show",function(t){n.classes["qv-global-search-result-throbber-open"]=t});n.$watch(function(){return n.showNoResultsMessage()},function(t){n.classes["noresults"]=t});n.select=function e(i,o){if(s.utils.touch){n.activeResultIx=o;t(function(){u.select(n.searchTerms,i.qId)},100)}else u.select(n.searchTerms,i.qId)};n.loadNextPage=function t(){u.loadNextPage()};d.getElement=function(){return i};d.setDockState=function(e){t(function(){n.dockState=e;n.classes["visuals-docked"]=e===a.VISUALS_DOCKED;n.classes["data-docked"]=e===a.DATA_DOCKED})};n.setShowPartialMatches=function(){u.setShowPartialMatches()};n.showNoResultsMessage=function(){var t;t=n.caoMobile?n.emptyMessageEnabled&&n.searchTerms.length>0&&!n.displayResult.data&&!n.error.show&&!n.activity.show&&0===n.insightVisualsGroups.length&&!n.fetchingInsightChartsPending||n.error.show:n.emptyMessageEnabled&&n.searchTerms.length>0&&!n.displayResult.data&&!n.error.show&&!n.activity.show||n.error.show;return t};u.showNoResultsMessage=function(){return n.showNoResultsMessage()};n.resetDockState=function(){n.dockState=a.INITIAL;o.treatAsDesktop()&&g.animate({scrollTop:0},300,"swing")};p=n.$watch(function(){return g[0]&&g[0].scrollHeight?g[0].scrollHeight:0},function(t){t&&(n.scrollShow=t>g[0].clientHeight)});g.on("scroll",f);n.$on("resultScrollToTop",function(){i[0].scrollTop=0});n.$on("$destroy",function(){p();g.off("scroll",f)})}}}]);t.directive("qvScrollToActive",function(){return{restrict:"A",require:"^qvGlobalSearchResult",link:function t(e,n,i,s){i.$observe("qvScrollToActive",function(t){t=t+""==="true";n.toggleClass("active",t);if(t){var e=s.getElement(),i=n.position();i.top<0?e[0].scrollTop=n[0].offsetTop:i.top+n.height()>e.height()&&n[0].scrollIntoView(false)}})}}});t.directive("qvGlobalSearchResultMsg",function(){return{restrict:"E",template:n,replace:true,require:["^qvGlobalSearch","^qvGlobalSearchResult"],link:function t(e){e.capUnderlineMaxNumber=6}}});t.directive("qvGlobalSearchNoResults",function(){return{restrict:"E",template:i,replace:true,require:["^qvGlobalSearch","^qvGlobalSearchResult"],link:function t(){}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-global-search-result" ng-class="classes" >\n\n\t<qv-global-search-suggest ng-if="displaySuggestions" class="qv-global-search-suggest" qv-scroll-to-active="{{activeSelectIx === -1 && focusState.activeStateName === focusState.Suggestions}}"></qv-global-search-suggest>\n\n\t<h3 ng-if="isObjectsFeature && ( displayResult.data || showNoResultsMessage() ) && matches.length > 0" class="title-section title-selections" >\n\t\t<span q-translation="GlobalSearch.Selections"></span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-up"></i>\n\t</h3>\n\n\t<qv-global-search-no-results class="search-no-results-message" ng-show="showNoResultsMessage()" ></qv-global-search-no-results>\n\n\t<div ng-if="(outsideSelection || currentSelections) && (!isPartials() || forcePartials)" class="qv-global-search-result-title strong" >\n\t\t<span ng-if="outsideSelection && !currentSelections" tid="globalSearch.matchesWholeDataset" q-translation="GlobalSearch.MatchesWholeDataset"></span>\n\t\t<span ng-if="currentSelections" tid="globalSearch.addToYourSelections" q-translation="GlobalSearch.AddToYourSelections"></span>\n\t</div>\n\n\t<div ng-repeat="m in matches" class="data-matches-group" ng-if="(!isPartials() || forcePartials)">\n\n\t\t<div ng-if="m !== searchTerms.length" class="caption-flex" q-translation="GlobalSearch.MatchedSearchTerms,{{m}}"></div>\n\n\t\t<div class="content-flex" ng-init="parentIndex = $index" ng-class="{ \'touch-off\':!isSmallDevice }" ng-repeat="row in getSearchTermGroup(m)" qv-scroll-to-active="{{( row.qId === activeSelectIx) && focusState.activeStateName === focusState.Results }}" tid="globalSearch.resultGroup" >\n\n\t\t\t<div class="cell" ng-repeat="item in row.qItems" tid="globalSearch.resultField" ng-class="{ \'maxcell\': !$last && !$first, \'maxcellfirst\': ($first && row.qTotalNumberOfItems > 1) }" >\n\t\t\t\t<div class="group-hits" ng-click="select( row, $parentIndex )" ng-class="{ \'shown\': (item.qTotalNumberOfMatches-item.qItemMatches.length) > 0  }">\n\t\t\t\t\t<span class="field-name" tid="globalSearch.resultField.Name">{{item.qIdentifier}}</span>\n\t\t\t\t\t<span ng-repeat="hit in item.qItemMatches" tid="globalSearch.resultField.Hit">\n\t\t\t\t\t\t<qv-global-search-highlights q-text="hit.qText" q-ranges="hit.qRanges"></qv-global-search-highlights >\n\t\t\t\t\t\t<span>{{$last ? \'\' : \', \'}}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div tid="globalSearch.resultField.MoreHits" ng-if="item.qTotalNumberOfMatches-item.qItemMatches.length > 0" ng-click="onShowMoreHits($event, item, row.qId)" class="more-hits"><span class="more-text" q-translation="GlobalSearch.MoreResults,{{(item.qTotalNumberOfMatches-item.qItemMatches.length)}}"></span></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="more-hits-area-mobile" ng-if="item.qTotalNumberOfMatches-item.qItemMatches.length > 0" tid="globalSearch.resultField.MoreHitsMobile" ng-click="onShowMoreHits($event, item, row.qId)">\n\t\t\t\t\t<button class="lui-button lui-button--rounded">\n\t\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--more"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div ng-hide="matches.length === 0" qv-scroll-to-active="{{showMeMoreFocus}}" class="show-me-more"><button ng-if="paging.totalRows > paging.lastRowIx && (!isPartials() || forcePartials)" tid="globalSearch.showmemore" ng-click="loadNextPage($event)" class="lui-button" q-translation="GlobalSearch.ShowMeMore" ng-class="{\'lui-active\': showMeMoreFocus }"></button></div>\n\n\t<h3 class="title-section title-navigation" ng-if="displayResult.visuals && !isSmallDeviceLandscape" qv-scroll-to-active="{{focusState.activeStateName === focusState.Visuals}}">\n\t\t<span ng-if="!caoMobile" q-translation="GlobalSearch.Navigations"></span>\n\t\t<span ng-if="caoMobile">{{existingChartGroupTitle}}</span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-down"></i>\n\t</h3>\n\n\t<h3 class="title-section title-landscape" ng-if="displayResult.visuals && isSmallDeviceLandscape">\n\t\t<span class="lui-icon lui-icon--object"></span>\n\t\t<span q-translation="GlobalSearch.RotateForVisuals"></span>\n  </h3>\n  \n\t<qv-smartsearch-visuals-group tid="smartsearch-visuals-group" items="searchVisualsGroups" app="app" search-terms="searchTerms" options="{\'preload\': false}" ng-if="displayResult.visuals " ng-hide="isSmallDeviceLandscape"></qv-smartsearch-visuals-group>\n\n\t<h3 class="title-section title-navigation"\n\t\tng-if="insightVisualsGroups.length > 0 && caoMobile && !isSmallDeviceLandscape"\n\t\tqv-scroll-to-active="{{focusState.activeStateName === focusState.SuggestedCharts}}">\n\t\t<span tid="global.search.suggested.charts.title">{{suggestedChartGroupTitle}}</span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-down"></i>\n  </h3>\n  \n  <div class="insight-charts-unavailable" ng-if="unableTofetchInsightCharts === true" q-translation="GlobalSearch.SuggestedChartsUnavailable"></div>\n\t\n\t<div ng-if="isPartials()" qv-scroll-to-active="{{ focusState.activeStateName === focusState.Partials }}" class="qv-global-search-result-message search-partials-message">\n\t\t<qv-global-search-result-msg></qv-global-search-result-msg>\n\t\t<div>\n\t\t\t<button class="lui-button" ng-click="setShowPartialMatches($event)" tid="globalSearch.showPartialMatches" q-translation="{{ !forcePartials?\'GlobalSearch.ShowPartialMatches\' : \'GlobalSearch.HidePartialMatches\' }}"\n\t\t\t ng-class="{ \'lui-active\': focusState.activeStateName === focusState.Partials }"></button>\n\t\t</div>\n\t</div>\n\n\t<qv-smartsearch-visuals-group tid="smartsearch-visuals-group" items="insightVisualsGroups" app="app" search-terms="searchTerms" options="{\'preload\': false}" ng-if="insightVisualsGroups.length > 0 && caoMobile" ng-hide="isSmallDeviceLandscape"></qv-smartsearch-visuals-group>\n\n\t<div class="fixed-bar" ng-show="fixedbar">\n\t\t<span ng-click="resetDockState();" class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--arrow-down"></span>\n\t\t</span>\n\t</div>\n\n\t<qv-global-search-throbber></qv-global-search-throbber>\n</div>\n'},function(t,e){t.exports='<div class="qv-global-search-result-message-inline">\n    <span ng-if="currentSelections" q-translation="GlobalSearch.NoMatchesWithinCurrentSelection"></span>\n    <span ng-if="!currentSelections" q-translation="GlobalSearch.NoMatchesForYourTerms"></span>\n</div>'},function(t,e){t.exports='<div>\n    <div class="qv-global-search-result-groups" ng-if="!error.show">\n\n        <div class="qv-global-search-result-message" >            \n            <qv-global-search-result-msg></qv-global-search-result-msg>\n\n            <div ng-if="haveUnlockedSelections()">\n                <button class="lui-button qv-gs-new-search-button" qva-activate="searchOutsideSelections($event)" tid="globalSearch.newSearchJustFor"\n\t\t\t\t\t\tq-translation="GlobalSearch.ClearSelectionAndSearchAgain" q-title-translation="GlobalSearch.ClearSelectionAndSearchAgain"\n\t\t\t\t\t\tng-class="{ \'lui-active\': focusState.activeStateName === focusState.StartNewSearch }"></button>\n            </div>\n        </div>\n    </div>      \n\n    <div class="qv-global-search-result-error" ng-if="error.show">\n        <span q-translation="{{error.translation}}"></span>\n    </div>\n</div>'},function(t,e){t.exports="<span ng-repeat=\"slice in slices track by $index\" ng-class=\"slice.highlight ? 'highlighted' + slice.qTerm : ''\">{{slice.qSliceText}}</span>"},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(896),n(50),n(97),n(897),n(899),n(371)],s=function(t,e,n,i){var s={MAX_MOBILE_VISUALS:10,PAGE_VISUALS:3,PAGE_VISUALS_PORTRAIT:2,PADDING_PAGES:15};t.directive("qvSmartsearchVisualsGroup",["$timeout",function(t){return{restrict:"E",template:e,replace:true,scope:{items:"=",searchTerms:"=",options:"=",app:"="},controller:function t(){this.loadPage=function(){};this.preparePages=function(){}},link:function e(o,r,a,l){var c=0;o.pageIndex=0;o.activeVisualIx=-1;o.pages=[];o.objects=null;var u=r.find(".visuals-wrapper"),d=false,p=n.isSmallDevice?400:600,h=function t(){p=n.isSmallDevice?400:600;u[0].scrollLeft=o.pageIndex*(u[0].offsetWidth+s.PADDING_PAGES)},f=function t(){l.preparePages(o.items[0].qItems)};n.OrientationChanged.bind(f);n.ViewChanged.bind(f);o.setPageIndex=function(t){o.pageIndex=t;for(var e=0;e<o.pages.length;e++)o.pages[e].forEach(function(n){o.options.preload?n.load=e===t||e===t+1||e===t-1:n.load=e===t})};i.on("update",h);o.goToPage=function(t){l.loadPage(t)};o.onSwipePage=function(t){l.loadPage(o.pageIndex+t)};o.$watch("items",function(t){t&&t.length&&l.preparePages(t[0].qItems)});o.$on("visualsGroupMoveActiveVisual",function(t,e){if(d)return;var n=o.pages.reduce(function(t,e){return t+e.length},0),i,s;i=o.activeVisualIx>0||e>0?(o.activeVisualIx+e)%n:n-1;s=Math.floor(i/c);s!==o.pageIndex&&l.loadPage(s);o.activeVisualIx=i});o.$on("visualsGroupBlur",function(){o.activeVisualIx=-1});o.$on("visualsGroupFocus",function(){o.activeVisualIx=0;0!==o.pageIndex&&l.loadPage(0)});o.$on("$destroy",function(){i.off("update",h);n.OrientationChanged.unbind(f);n.ViewChanged.unbind(f)});l.loadPage=function(e){if(!d&&e>=0&&e<o.pages.length){d=true;u.animate({scrollLeft:e*(u[0].offsetWidth+s.PADDING_PAGES)},p,"swing",function(){d=false;t(function(){o.setPageIndex(e)})})}};l.preparePages=function(t){if(t){g();var e,i=0,r=[];n.orientation===n.Orientation.landscape?e=n.isSmallDevice?1:s.PAGE_VISUALS:n.orientation===n.Orientation.portrait&&(e=n.isSmallDevice?1:s.PAGE_VISUALS_PORTRAIT);c=e;for(var a=0;a<t.length;a++){if(n.isSmallDevice&&r.length>=s.MAX_MOBILE_VISUALS&&r[i].length>=e)break;if(r[i]){if(r[i].length>=e){i++;r.push([])}}else r.push([]);t[a].itemIndex=a;t[a].load=o.options.preload?0===i||1===i:0===i;r[i].push(t[a])}o.pages=r}};function g(){o.pages=[];u.scrollLeft(0);o.pageIndex=0}}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-smartsearch-visuals-group" qva-smart-search-swipe-horizontal="onSwipePage(delta)" >\n\t<div class="nav-visual-arrow left" qva-activate="goToPage( pageIndex - 1 );" ng-show="pageIndex > 0">\n\t\t<span class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--arrow-left"></span>\n\t\t</span>\n\t</div>\n\t<div class="visuals-wrapper" >\n\t\t<div class="page" tid="swipeable-chart-page-container" ng-repeat="p in pages" ng-class="{ \'first\': $first, \'last\': $last }">\n\t\t\t<div class="content" >\n\t\t\t\t<qv-smartsearch-visual-preview\n\t\t\t\t\tng-repeat="visualItem in p"\n\t\t\t\t\tapp="app"\n\t\t\t\t\tactive-visual-ix="activeVisualIx"\n\t\t\t\t\tvisual-object="visualItem"\n\t\t\t\t\tsearch-terms="searchTerms"\n\t\t\t\t\tng-class="{ \'first\': $first && !$last, \'last\': $last, \'active\': focusState.activeStateName === focusState.Suggestions && activeVisualIx === visualItem.itemIndex }">\n\t\t\t\t</qv-smartsearch-visual-preview>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="nav-visual-arrow right" qva-activate="goToPage( pageIndex + 1 );" ng-show="pageIndex < (pages.length - 1)">\n\t\t<span class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--arrow-right"></span>\n\t\t</span>\n\t</div>\n\n\t<qv-global-search-more-indicator pages="pages" active-page-ix="pageIndex" on-page-change="goToPage(index);"></qv-global-search-more-indicator>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(54),n(95),n(105),n(898),n(89),n(114),n(123),n(370),n(169),n(267)],s=function(t,e,n,i,s,o,r,a){t.directive("qvSmartsearchVisualPreview",["$timeout",function(l){var c={TITLE:0,SUBTITLE:1,FOOTNOTE:2,DIMENSION:3,MEASURE:4,ALTERNATIVE_DIMENSION:5,ALTERNATIVE_MEASURE:6,TYPE:7,VALUE:8};function u(t,e){return e.getObject(t.qIdentifier).then(function(t){return{model:t,options:{isReadonly:true,isPopover:false,selectionsDisabled:true,interactionState:a.STATIC,components:{miniChart:{show:false},scrollArea:{showFlag:0}},direction:r.direction}}})}function d(t){var e=t.split("/");e=e.map(function(t){return parseInt(t)}).filter(function(t){return!Number.isNaN(+t)});return e.length?e[0]:-1}function p(t,e){t.id=-1;if(-1!==e.indexOf("qDimensions")||-1!==e.indexOf("qListObjectDef/qDef")){t.id=d(e);t.type=-1===e.indexOf("qLayoutExclude")?c.DIMENSION:c.ALTERNATIVE_DIMENSION;t.isLabel=-1!==e.indexOf("qFieldLabels")}else if(-1!==e.indexOf("qMeasures")){t.id=d(e);t.type=-1===e.indexOf("qLayoutExclude")?c.MEASURE:c.ALTERNATIVE_MEASURE;t.isLabel=-1!==e.indexOf("qLabel")}else{-1!==e.indexOf("subtitle")?t.type=c.SUBTITLE:-1!==e.indexOf("title")?t.type=c.TITLE:-1!==e.indexOf("footnote")?t.type=c.FOOTNOTE:-1!==e.indexOf("type")?t.type=c.TYPE:t.type=c.VALUE;t.isLabel=-1===e.indexOf("qExpr")}t.trans=h(t.type)}function h(t){var e="---";switch(t){case c.TITLE:e="Common.Title";break;case c.DIMENSION:e="Common.Dimensions";break;case c.MEASURE:e="Common.Measures";break;case c.ALTERNATIVE_DIMENSION:e="properties.alternative.dimensions";break;case c.ALTERNATIVE_MEASURE:e="properties.alternative.measures";break;case c.SUBTITLE:e="properties.subtitle";break;case c.FOOTNOTE:e="properties.footnote";break;case c.TYPE:e="properties.type";break;case c.VALUE:e="properties.dataPoints.labelmode.value";break}return e}return{restrict:"E",template:s,replace:true,require:["^qvGlobalSearch"],scope:{visualObject:"=",searchTerms:"=",activeVisualIx:"=",app:"="},link:function s(c,d,h,f){var g=t.getService("$navigationService").Sheets,v=t.getService("qvGlobalSearchDataService").getMaxColorsNum(),m=f[0],b;c.viz=null;c.termsMatched=null;c.extra=false;c.matches=null;c.loadManually=function(t){t.stopPropagation();c.viz.object.retry();c.isManualLoad=false};function y(){c.loadTimer=l(function(){if(c.viz.object){c.viz.object.cancel();c.isManualLoad=true}},c.visualObject.suggestedTimeout);c.viz.options.onRendered=function(){c.loadTimer&&l.cancel(c.loadTimer)}}c.$watch("visualObject.load",function(t){if(true===t){q();if(b)c.viz=b;else{u(c.visualObject,c.app).then(function(t){b=t;c.viz=t;c.viz.object={};c.visualObject.suggestedTimeout&&y()});S(c.visualObject.qItemMatches)}}else c.viz=null});c.$watch("searchTerms",function(t){t&&c.visualObject&&q()});c.$on("selectActiveVisualItem",function(){c.activeVisualIx===c.visualObject.itemIndex&&x()});c.$on("$destroy",function(){b=null});c.showMoreHits=function(t){t.stopPropagation();m.showMoreHitsForVisual(c.visualObject).then(function(t){S(t.qItemMatches)})};function x(t){var e=function t(e){e=e.filter(function(t){return t});return e.length?e[0]:null};C().then(function(s){var o=e(s);if(o){g.navigateToSheet(o.sheet);m.onNavigateToSheet(o.cell.name)}else if(t){var l={isReadonly:true,isPopover:false,selectionsDisabled:true,interactionState:a.ANALYSIS,components:{miniChart:{show:true},scrollArea:{showFlag:1}},direction:r.direction};n.publish(i.Events.PubSub.ExpandSmartSearchSuggestedChart,Object.assign({},t,{options:l}))}})}function q(){c.termsMatched=c.visualObject.qSearchTermsMatched.map(function(t){return{string:c.searchTerms[t],pos:t%v}})}function S(t){c.hitsDisplayed=t.length;var n,i,s;t.forEach(function(t){t.qAttributes&&t.qAttributes.length&&p(t,t.qAttributes[0][1])});n=c.visualObject.qItemMatches.filter(function(e){if(e.isLabel)return true;var n=t.filter(function(t){return t.isLabel&&e.type===t.type&&e.id===t.id&&e!==t});var i=e.qRanges.every(function(t){return n.some(function(e){return e.qRanges.some(function(e){return t.qTerm===e.qTerm})})});return!i});i=e.groupBy(n,function(t){return t.type});s=Object.keys(i).map(function(t){return i[t]});c.matches?s.forEach(function(t,e){if(t.length>c.matches[e].length){var n=c.matches[e].length;for(var i=n;i<t.length;i++)c.matches[e].push(t[i])}}):c.matches=s}function w(t,e,n){var i={sheet:t,cell:e};return e.name===c.visualObject.qIdentifier?o.resolve(i):"filterpane"===e.type?n.getObject(e.name).then(function(t){return t.getLayout().then(function(t){if(t.qChildList&&t.qChildList.qItems.length){var e=t.qChildList.qItems.filter(function(t){return t.qInfo.qId===c.visualObject.qIdentifier});return e.length?i:null}return null})}):o.resolve(null)}function C(){var t,e=[];for(var n=0;n<g.all.mashed.length;n++){t=g.all.mashed[n];for(var i=0;i<t.qData.cells.length;i++)e.push(w(t,t.qData.cells[i],c.app))}return o.all(e)}c.showExtraInfo=function(t){c.extra=!c.extra&&c.matches.length;t.stopPropagation()};c.navigateToSheet=function(t,e){if(!c.isManualLoad){t.stopPropagation();x(e)}}}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="visual-item">\n\t<div class="object" qva-activate="navigateToSheet($event, viz)" >\n\t\t<qv-object ng-if="viz && visualObject.load" model="viz.model" options="viz.options" object="viz.object"></qv-object>\n\t\t<div class="transparent-overlay"></div>\n\t\t<div ng-hide="visualObject.load" class="qv-animate progress">\n\t\t\t<div class="progress-loader"></div>\n\t\t</div>\n\t\t<div class="cao-mobile-manual-loader" ng-click="$event.stopPropagation()" ng-if="isManualLoad">\n\t\t\t<ul>\n\t\t\t\t<li class="cao-mobile-loader-text" q-translation="cao.card.complex">\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<lui-button ng-click="loadManually($event)" q-translation="cao.card.complex.load"></lui-button>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="visual-data" qva-activate="showExtraInfo($event);">\n\t\t<div ng-if="visualObject.load" class="keywords">\n\t\t\t<div class="terms">\n\t\t\t\t<span ng-repeat="t in termsMatched"><span ng-if="!$first">&nbsp;</span><span class="highlighted{{t.pos}}">{{t.string}}</span></span>\n\t\t\t</div>\n\t\t\t<div class="lui-fade-button" ng-if="matches.length" tid="swipeableChartPageInfoButton">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--info"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="extra-info" ng-if="visualObject.load" ng-class="{ \'show\': extra }">\n\t\t\t<div ng-if="matches.length" ng-repeat="hits in matches" class="hits">\n\t\t\t\t<div ng-repeat="hit in hits" class="match-hit">\n\t\t\t\t\t<span ng-if="$first"><b q-translation="{{hit.trans}}"></b>: </span><qv-global-search-highlights q-text="hit.qText" q-ranges="hit.qRanges" class="highlights"></qv-global-search-highlights><span ng-if="!$last">,&nbsp;</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="more-hits" qva-activate="showMoreHits($event)" ng-if="$last && (visualObject.qTotalNumberOfMatches-hitsDisplayed) > 0" q-translation="GlobalSearch.MoreResults,{{(visualObject.qTotalNumberOfMatches-hitsDisplayed)}}"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(99),n(900)],s=function(t,e,n){t.directive("qvGlobalSearchMoreIndicator",function(){return{replace:true,template:n,restrict:"E",scope:{pages:"=",activePageIx:"=",onPageChange:"&"},link:function t(n){n.touchOn=!e.treatAsDesktop();n.pressedPageIx=void 0;n.onPageClick=function(t){n.pressedPageIx=t;n.onPageChange({index:t})};n.$watch("activePageIx",function(){n.pressedPageIx=void 0})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-gs-more-indicator" ng-class="{ \'touch-on\': touchOn }">\n\t<div class="hit-area"  qva-activate="onPageClick($index);" ng-repeat="p in pages">\n\t\t<span tid="swipeableChartPageClickDot" class="dot" ng-class="{ \'active\': $index === activePageIx, \'pressed\': $index === pressedPageIx }"></span>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(902)],s=function(t,e){t.directive("qvGlobalSearchSuggest",[function(){return{restrict:"E",template:e,replace:true,require:["^qvGlobalSearch"],link:function t(){}}}]);t.directive("qvScrollToActiveSuggestion",function(){return{restrict:"A",link:function t(e,n,i){i.$observe("qvScrollToActiveSuggestion",function(t){t=t+""==="true";if(t){var e=n.position(),i=n.parent(),s=n[0].clientWidth>i[0].clientWidth,o=e.left+n[0].clientWidth-i[0].clientWidth;n[0].scrollIntoView(s);e.left<=i[0].offsetLeft?i.scrollLeft(n[0].offsetLeft-i[0].offsetLeft):o>0&&!s&&(i[0].scrollLeft=i[0].scrollLeft+o)}})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-search-suggest-wrapper" tid="globalSearch.suggestions">\n\t<span class="hidden">{{query}}</span>\n    <div ng-show="isSmallDevice" ng-if="!isObjectsFeature" class="dym" q-translation="GlobalSearch.DidYouMean"></div>\n\t<ul class="suggest-popup">\n\t\t<li ng-repeat="suggest in suggestions track by $index" qv-scroll-to-active-suggestion="{{$index === activeSuggestionIx && focusState.activeStateName === focusState.Suggestions}}" ng-class="{active: $index === activeSuggestionIx && focusState.activeStateName === focusState.Suggestions }" qva-activate="onSuggestSelect(null, suggest)" tid="globalSearch.suggestion" bold-suggest=\'{{suggest.value}}\'>\n\t\t\t{{suggest.value}}\n\t\t</li>\n\t</ul>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(904),n(169)],s=function(t,e){t.directive("qvGlobalSearchHistory",["$timeout",function(n){return{restrict:"E",template:e,replace:true,require:["^qvGlobalSearch"],link:function e(i,s,o,r){var a=r[0],l=s.find(".history-popup")[0];i.colorsLimit=t.getService("qvGlobalSearchDataService").getMaxColorsNum();i.$watch("searchInputFocused",function(t){t&&n(function(){l.scrollTop=0})});i.onSearchHistorySelect=function(t){a.setQueryFromHistory(t)};i.clearSearchHistory=function(){a.clearHistory()};i.removeSelectedHistory=function(t){a.removeHistory(t)}}}}]);t.directive("qvScrollToActiveHistory",function(){return{restrict:"A",link:function t(e,n,i){i.$observe("qvScrollToActiveHistory",function(t){t=t+""==="true";n.toggleClass("active",t);t&&n[0].scrollIntoView(false)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-search-last-history" tid="globalSearch.searchHistory">\n\t<div class="history-header" ng-show="searchHistory.length">\n\t\t<div class="title"  q-translation="GlobalSearch.RecentSearches"></div>\n\t\t<div class="clear-all-button" q-translation="GlobalSearch.ClearAll" qva-activate="clearSearchHistory($index)"></div>\n\t</div>\n\t<ul class="history-popup" ng-show="searchHistory.length">\n\t\t<li ng-repeat="items in searchHistory track by $index" qva-delegated-activate=".history-query#onSearchHistorySelect($index); .lui-icon--close#removeSelectedHistory($index);" tid="globalSearch.searchHistoryItem" ng-class="{active: $index === activeHistoryIx && focusState.activeStateName === focusState.History}" qv-scroll-to-active-history="{{$index === activeHistoryIx && focusState.activeStateName === focusState.History}}">\n\t\t\t<div class="history-query">{{searchHistory[$index]}}</div>\n\t\t\t<div class="lui-icon lui-icon--close" q-title-translation="Common.Delete" title="Delete"></div>\n\t\t</li>\n\t</ul>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(906),n(163),n(89),n(50),n(97),n(276),n(257),n(371)],s=function(t,e,i,s,o,r){var a={};Object.defineProperties(a,{THROBBER:{value:1e3},INDEX_PROGRESS:{value:5e3},NEXT_INDEX_PROGRESS:{value:500},HIDE_INDEX_DONE:{value:1e3}});t.directive("qvGlobalSearchThrobber",["$timeout","$window","$animate",function(l,c,u){return{replace:true,template:e,restrict:"E",link:function e(d,p){var h=t.getService("qvGlobalSearchService"),f,g,v,m,b=p.find(".qv-gs-index-progress .qv-gs-index-group"),y,x;d.asyncHideActivity=false;d.percentDone=void 0;d.imgSrc=n.p+"img/core/static/smart-search.png";d.pages=[{},{}];d.activePageIx=0;y=function t(){l(function(){b[0].scrollLeft=d.activePageIx*b[0].offsetWidth})};o.OrientationChanged.bind(y);r.on("update",y);d.goToPage=function(t){b.animate({scrollLeft:t*b[0].offsetWidth},400,"swing",function(){l(function(){d.activePageIx=t})})};d.onSwipePage=function(t){if(d.isSmallDevice){var e=t>0?1:0;e!==d.activePageIx&&d.goToPage(e)}};d.openHelp=function(){c.open(i.path+"SmartSearch_Intro")};d.$on("$destroy",function(){l.cancel(f);l.cancel(g);l.cancel(v);l.cancel(m);r.off("update",y);o.OrientationChanged.unbind(y);h.IndexProgressUpdate.unbind(L);u.off("removeClass",p[0])});function q(t){var e=s(),n=p.find(t)[0];u.on("removeClass",n,function(t,i){if("close"===i){u.off(n);e.resolve()}});return e.promise}function S(){d.throbber.show=false;d.indexProgress.enabled=false;d.indexProgress.show=false;d.indexProgress.visible=false;d.indexDone.show=false;d.indexDone.visible=false}function w(){if(void 0!==d.percentDone&&d.percentDone<100)return true;return h.couldEngineBeIndexing(d.app)}function C(t){if(!x){h.IndexProgressUpdate.bind(L);x=true}l.cancel(m);m=l(function(){h.requestIndexProgressUpdate(d.app)},t||0)}d.showIndexDone=function(){q(".qv-gs-index-done").then(function(){d.indexProgress.show=false;d.indexProgress.visible=false;d.indexDone.visible=true;d.percentDone=void 0;l.cancel(v);v=l(I,a.HIDE_INDEX_DONE)});d.indexDone.show=true};function I(){d.indexDone.visible=false;d.indexDone.show=false;l.cancel(f);d.$emit("updateForceShowDimmer",false);d.asyncHideActivity?E():f=l(T,a.THROBBER)}function _(t){q(".qv-gs-index-progress").then(function(){d.indexProgress.visible=true;d.isSmallDevice||d.$emit("updateForceShowDimmer",true)});d.percentDone=t;d.indexProgress.show=true;d.activity.show=true;d.throbber.show=false;t<100?C(a.NEXT_INDEX_PROGRESS):k()}function D(t){d.percentDone=t;t<100?C(a.NEXT_INDEX_PROGRESS):k()}function k(){l.cancel(m);if(x){h.IndexProgressUpdate.unbind(L);x=false}}function T(){d.activity.show=true;d.throbber.show=true;d.emptyMessageEnabled=false}function E(){l.cancel(f);l.cancel(g);l.cancel(v);l.cancel(m);k();d.activity.show=false;d.throbber.show=false;d.indexProgress.enabled=false;d.indexProgress.show=false;d.indexProgress.visible=false;d.emptyMessageEnabled=d.searchTerms.length>0}function A(){d.indexProgress.enabled=true;C()}function L(t,e){if(t!==(d.app.id||"").toUpperCase())return;var n=new Number(e);if(Number.isNaN(+n)||!e){d.indexProgress.enabled=true;C(a.INDEX_PROGRESS);return}if(!d.indexProgress.show&&n<100)_(n);else if(d.indexProgress.show)D(n);else{l.cancel(f);f=l(T,a.THROBBER)}}function M(t,e,n){if(e){d.asyncHideActivity=false;if(d.activity.show)return;S();l.cancel(f);l.cancel(g);if(w())A();else{f=l(T,a.THROBBER);g=l(A,a.INDEX_PROGRESS)}}else{var i=d.percentDone&&d.percentDone<100;if(i&&n){h.setLastKnownIndexProgress(d.app,100);k();d.percentDone=100;d.asyncHideActivity=true}else if(i&&!n){if(!d.isSmallDevice)return;E()}else if(100==d.percentDone){h.setLastKnownIndexProgress(d.app,100);k();d.asyncHideActivity=true}else E()}}d.$on("toggleActivityIndicator",M)}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div ng-show="activity.show" class="qv-qs-throbber-container qv-animate ng-hide">\n\n\t<div class="qv-gs-throbber-dimmer"></div>\n\n\t<div ng-show="throbber.show" class="qv-gs-throbber ng-hide"></div>\n\n\t<div ng-show="indexProgress.show" class="qv-gs-index qv-gs-index-progress qv-animate ng-hide">\n\n\t\t<div class="qv-gs-index-group" qva-smart-search-swipe-horizontal="onSwipePage(delta)">\n\t\t\t<div class="qv-gs-index-section">\n\t\t\t\t<div class="qv-gs-index-content qv-gs-index-content-shrink">\n\t\t\t\t\t<span class="qv-gs-index-header" q-translation="GlobalSearch.PreparingSmartSearch"></span>\n\n\t\t\t\t\t<qv-progress-bar percent-done="percentDone" on-completed="showIndexDone()"></qv-progress-bar>\n\n\t\t\t\t\t<span class="qv-gs-index-text" q-translation="GlobalSearch.NextTimeFaster"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="qv-gs-index-section">\n\t\t\t\t<div class="qv-gs-index-content qv-gs-index-content-shrink">\n\t\t\t\t\t<div class="qv-gs-index-help" qva-activate="openHelp()">\n\t\t\t\t\t\t<span class="qv-gs-index-header" q-translation="GlobalSearch.LearnHowToUse"></span>\n\t\t\t\t\t\t<img ng-src="{{imgSrc}}" class="qv-gs-index-image" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<qv-global-search-more-indicator pages="pages" active-page-ix="activePageIx" on-page-change="goToPage(index);"></qv-global-search-more-indicator>\n\n\t</div>\n\n\t<div ng-show="indexDone.show" class="qv-gs-index qv-gs-index-done qv-animate ng-hide">\n\t\t<div class="qv-gs-index-section qv-gs-index-section-single">\n\t\t\t<div class="qv-gs-index-content qv-gs-index-shrink">\n\t\t\t\t<span class="qv-gs-index-icon lui-icon lui-icon--tick" aria-hidden="true"></span>\n\t\t\t\t<span class="qv-gs-index-text-big" q-translation="GlobalSearch.Done"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>'},function(t,e){t.exports='<div class="qv-progress-bar">\n\t<div class="progress-bar-bg">\n\t\t<div class="progress-bar-fg" ng-style="{ width: display }"></div>\n\t</div>\n\n\t<div class="progress-text" ng-bind="display" ng-hide="options.hideText"></div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(276),n(257)],s=function(t){t.directive("qvMobileIndexProgress",["$timeout",function(e){return{replace:true,template:'<div class="qv-mobile-index-progress"><qv-progress-bar ng-if="showMobileIndexProgressBar" percent-done="indexPercentDone" on-completed="hideMobileIndexProgressWhenDone()" options="progressBarOptions"></qv-progress-bar></div>',restrict:"E",link:function n(i){var s=t.getService("qvGlobalSearchService"),o,r;i.progressBarOptions={hideText:true};s.couldEngineBeIndexing(i.app)&&c(0);i.$on("$destroy",function(){e.cancel(r);s.IndexProgressUpdate.unbind(a)});i.hideMobileIndexProgressWhenDone=function(){i.showMobileIndexProgressBar=false};function a(t,e){if(t!==(i.app.id||"").toUpperCase())return;if(!i.showMobileIndexProgressBar&&e<100){i.indexPercentDone=e;i.showMobileIndexProgressBar=true;c(500)}else if(i.showMobileIndexProgressBar){i.indexPercentDone=e;e<100&&c(500)}else l()}function l(){e.cancel(r);if(o){s.IndexProgressUpdate.unbind(a);o=false}}function c(t){if(!o){s.IndexProgressUpdate.bind(a);o=true}e.cancel(r);r=e(function(){s.requestIndexProgressUpdate(i.app)},t||0)}}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(54),n(95),n(186),n(93),n(910),n(124),n(120),n(113),n(49),n(91),n(89),n(103),n(229),n(222),n(99),n(134),n(147),n(154),n(106),n(168),n(114),n(105),n(223),n(372),n(911),n(912),n(937),n(939),n(941),n(374),n(212),n(221),n(275),n(945),n(366),n(946),n(267),n(415),n(233),n(368),n(947),n(963)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m,b,y,x,q,S,w,C,I,_){var D=["$scope","$element","$window","$timeout","$q","qvCaoService","qvCaoSearchService","qvCaoChartService","qvAppDetailsService","qvCaoRenderService","qvCaoComplexityEstimatorService","qvCaoSelectionService",function(r,l,D,k,T,E,A,L,M,P,O,F){var $=this;var N=new q;var R=T.defer();var H=T.defer();var V=false;var B=0;$.zoomDeferred=null;$.lightEdits=[];r.loadedCount=0;r.query="";r.charts=[];r.chartMatches=[];r.renderableCharts=[];r.fieldList=[];r.debug=c.CAO_DEBUG;r.syncFieldPicker=u.getFlag("CAO_FIELD_PICKER_SYNC");r.insightFeedback=u.getFlag("CE_PRECEDENTS");r.caoTweakEnabled=u.getFlag("CAO_TWEAK");r.nluEnabled=u.getFlag("NLU_INSIGHTS");r.nluQueryInfoVisible=false;r.nluRawResponse=null;r.learningPerformed=false;r.contextPanelVisible=false;r.assetsPanelVisible=true;r.showHidden=false;r.showFieldPicker=true;r.limitedAccess=null;r.scrollContainer=l.find(".qv-cao-scroll-content")[0];r.mouseUp=function(){r.focusBorder=true};r.resultLabel=d.get("cao.search.title",[0,0,0,0]);r.introHeader=r.nluEnabled?d.get("cao.search.intro.nlu.header"):d.get("cao.search.intro.header");r.introDescriptionSearch=d.get("cao.search.intro.description.search");r.introDescriptionNoFields=d.get("cao.search.intro.description.nofields");r.introDescriptionGenerateInsights=d.get("cao.search.intro.description.generateInsights");r.introButton=d.get("cao.search.intro.button");r.goToSheetButton=d.get("cao.search.gotosheet.button");r.cellStatusElem=l.find("#sr-cell-status-label");r.direction=S.direction;r.appPrecedents={enabled:true};r.state="INIT";r.gridScreenReader=d.get("Cao.Accessibility.Object.Description");r.onGridFocus=function(){r.gridScreenReader=V?"":d.get("Cao.Accessibility.Object.Description")};r.onGridBlur=function(){k(function(){V=!!document.activeElement&&document.activeElement.classList.contains("cao-insight-container");r.gridScreenReader=""},1)};a.load();m.getList().then(function(t){r.masterDimensionsListModel=t});x(r,"masterDimensionsListModel",function(){j()});b.getList().then(function(t){r.masterMeasuresListModel=t});x(r,"masterMeasuresListModel",function(){j()});y.getList().then(function(t){r.fieldsListModel=t});x(r,"fieldsListModel",function(){j()});r.updateDirection=function(t){r.direction!==t&&(r.direction=t)};r.closeAndGoToSheet=function(){E.toggleCao();i.publish("cao/insights/close")};S.DirectionChanged.bind(r.updateDirection);o.getApp().then(function(i){H.resolve();r.app=i;r.contextPanelVisible=C.storageObj(i.id).contextPanel;r.assetsPanelVisible=C.storageObj(i.id).assetsPanel;M.get().then(function(t){r.limitedAccess=Boolean(t.model.app.published||!t.model.permissions.update)}).then(function(){p.all({appFieldList:i.getFieldList(),classificationsResult:e.getService("classificationService").getClassification(),appScrape:E.scrapeApp()}).then(function(e){var o=e.classificationsResult?new f(e.classificationsResult):void 0;s.addClassificationDataToFields(e.appFieldList,o);R.resolve();O.init(i);r.state="INTRO";v.treatAsDesktop()&&k(function(){t("#cao-search-input").focus()});A.getMasterItems().then(function(t){r.limitedAccess&&0===t.length&&(r.state="NO_FIELDS")});r.fieldList=e.fieldList;A.clearSelectedFields();A.registerForCaoSearchQuery(n.debounce(z,300));j()},function(){R.reject();G()})});r.app.getLayout().then(function(t){r.permissions=t.permissions})},function(){H.reject();G()});function j(){A.createFieldList().then(function(t){r.fieldList=t})}function z(t){E.setRefreshIndicatorVisibility(false);if("NO_FIELDS"===r.state)return;if(t.showIntro){r.state="INTRO";r.$apply(function(){r.query="";r.charts=[];r.chartMatches=[];r.selectedFieldNames=[]});return}r.query=t.query?t.query:"";r.loadGraphs(t.query);r.selectedFieldNames=t.selectedFields?t.selectedFields:[]}r.refreshCharts=function(){if("INTRO"===r.state){E.setRefreshIndicatorVisibility(false);return}i.publish("cao/insight/refreshPerformed");r.state="LOADING";E.setRefreshIndicatorVisibility(false);r.clearChartSelection();k(function(){P.clearRenderQueue();r.charts=[];r.chartMatches=[]}).then(function(){L.refreshInsights(r.appPrecedents.enabled).then(function(t){r.state="LOADED";r.loadedCount++;r.charts=t.recommendations;r.chartMatches=t.chartMatches;r.learningPerformed=false}).catch(G)})};r.$watch("appPrecedents.enabled",function(t,e){t!=e&&r.refreshCharts()});r.clearInsightResults=function(){i.publish("cao/insights/clear")};r.isClearResultsVisible=function(){return r.caoTweakEnabled&&(r.charts&&r.charts.length>0||r.chartMatches&&r.chartMatches.length>0)};r.setItemAccFocusVisibility=function(){this.itemAccFocus=true};r.removeItemAccFocusVisibility=function(){this.itemAccFocus=false};r.toggleFieldPicker=function(){r.showFieldPicker=!r.showFieldPicker;h.trackEvent(h.customEvents.INSIGHTS_FIELD_PICKER,{type:r.showFieldPicker?"open":"close"});k(r.resizeCharts)};r.resizeCharts=function(){g.resizeCharts(D)};function G(t){B--;t&&(t.norefresh||t.notFound)?t.notFound&&(r.state="NOT_FOUND"):r.state="ERROR";r.learningPerformed=false}r.loadGraphs=function(t){P.clearRenderQueue();E.setRefreshIndicatorVisibility(false);"LOADED"===r.state&&r.$apply(function(){r.charts=[];r.chartMatches=[]});r.state="LOADING";r.showHidden=false;var e=new Date;H.promise.then(function(){R.promise.then(function(){B++;var n;n=r.nluEnabled&&t&&t.length?I.parseQuery(t,r.app.id).then(function(t){r.nluRawResponse=t;i.publish("cao/nlu/new_queries",t);var e=_.buildDataCollection(t);return L.getVisualRecommendations(r.app,e,r.limitedAccess)}):L.getInsights(r.app,t,r.limitedAccess,r.appPrecedents.enabled);n.then(function(t){B--;if(B>0)return;r.state="LOADED";r.loadedCount++;r.charts=t.recommendations;r.chartMatches=t.chartMatches;var n=new Date;var i=(n-e)/1e3;h.trackEvent(h.customEvents.INSIGHTS_SEARCH,{query:r.query,queryTime:i})},G)},G)},G)};r.selectField=function(t){if(r.syncFieldPicker){r.fieldToAdd=t.selected?null:t;r.fieldToRemove=t.selected?t:null}else{r.fieldToAdd=null;k(function(){r.fieldToAdd=t})}i.publish("cao/insight/contextPanelToggled",!!r.insightFeedback&&C.storageObj(r.app.id).contextPanel);r.clearChartSelection()};r.updateFieldPicker=function(){k(function(){r.fieldList=[];r.fieldList=A.getFields()})};r.zoomChart=function(t){$.zoomDeferred=T.defer();r.zoomOpen=true;t.zoomed=true;k(function(){l.find(".qv-cao-zoomed-anmiation-container").addClass("animate-expand");k(function(){r.zoomedChart=t},400)});return $.zoomDeferred.promise};r.exitZoom=function(){k(function(){l.find(".qv-cao-zoomed-anmiation-container").addClass("animate-shrink");r.zoomedChart=void 0;k(function(){r.zoomOpen=false;$.zoomDeferred.resolve()},400)});return $.zoomDeferred.promise};r.sendFeedback=function(t,e){var n=t.getAnalysis();if(e===w.Precedents.PrecedentTypes.Dislike)return n.precedents&&n.precedents.disliked?N.undislikeAnalysis(n).then(function(){delete n.precedents;return false}):N.dislikeAnalysis(n).then(function(t){n.precedents={id:t.nodes[0].id,disliked:true};return true});if(e===w.Precedents.PrecedentTypes.Like)return N.likeAnalysis(n).then(function(t){n.precedents={id:t.nodes[0].id,liked:true};return true})};function U(e){t(e.currentTarget).blur()}r.showHiddenCharts=function(){r.showHidden=!r.showHidden;r.showHidden&&k(function(){var e=t(".qv-cao-section-hidden")[0];e&&e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"start"})})};r.showFoundInsights=function(t){13===t.which?r.chartsToShow={charts:r.chartMatches,activeTab:"found"}:"click"===t.type&&(r.chartsToShow={charts:r.chartMatches,activeTab:"found"});U(t)};r.showGeneratedInsights=function(t){13===t.which?r.chartsToShow={charts:r.renderableCharts,activeTab:"generated"}:"click"===t.type&&(r.chartsToShow={charts:r.renderableCharts,activeTab:"generated"});U(t)};r.isRefreshIndicatorVisible=function(){return E.getRefreshIndicatorVisibility()};r.isCaoInsightContextPanelVisible=function(){return r.caoTweakEnabled&&r.contextPanelVisible&&"ERROR"!==r.state};r.clearChartSelection=function(){F.clearSelection()};r.isChartSelected=function(){var t=F.getSelectedChart();return t&&r.zoomedChart&&r.zoomedChart===t};r.toggleNluQueryInfo=function(){r.nluQueryInfoVisible=!r.nluQueryInfoVisible};function W(t){r.contextPanelVisible=t}function K(t){r.assetsPanelVisible=t}function Y(t){r.learningPerformed=t}i.subscribe("cao/insight/refresh",r.refreshCharts);i.subscribe("cao/insight/contextPanelToggled",W);i.subscribe("cao/insight/assetsPanelToggled",K);i.subscribe("cao/insight/learningPerformed",Y);r.$watchGroup(["charts","chartMatches"],function(){0===r.charts.length&&"LOADED"===r.state&&G({notFound:true});r.renderableCharts=r.charts.filter(function(t){return!r.insightFeedback||!t.isHidden()});r.chartsToShow={charts:r.renderableCharts,activeTab:"generated"};r.hiddenCharts=r.charts.filter(function(t){return t.isHidden()});r.numberOfGeneratedInsights=d.get("cao.search.info.title.generated.plural",r.renderableCharts.length.toString());r.numberOfFoundInsights=d.get("cao.search.info.title.found.plural",r.chartMatches.length.toString());function t(){var t=[];if(r.charts.length+r.chartMatches.length===0)return null;r.charts.length+r.chartMatches.length>0&&t.push(d.get("cao.search.titleResults",[r.charts.length+r.chartMatches.length]));r.renderableCharts.length>0&&t.push(d.get("cao.search.titleGenerated",[r.renderableCharts.length]));r.hiddenCharts.length>0&&t.push(d.get("cao.search.titleHidden",[r.hiddenCharts.length]));switch(t.length){case 3:return d.get("cao.search.titleLength3",t);case 2:return d.get("cao.search.titleLength2",t);default:break}}r.resultLabel=t()});r.$on("$destroy",function(){A.unRegisterFromCaoSearchQuery(z);P.clearRenderQueue();i.unsubscribe("cao/insight/refresh");i.unsubscribe("cao/insight/contextPanelToggled");i.unsubscribe("cao/insight/assetsPanelToggled");i.unsubscribe("cao/insight/learningPerformed");S.DirectionChanged.unbind(r.updateDirection)})}];e.directive("qvCaoComponent",function(){return{restrict:"E",template:r,controller:D,scope:true,replace:true,link:function t(e){l.getList().then(function(t){t.getLayout().then(function(t){e.sheets=t})});e.target=null}}});return"<qv-cao-component></qv-cao-component>"}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="qv-cao overlay" id="qv-cao-overlay" style="display:none;" ng-keyup="setItemAccFocusVisibility()" ng-mouseup="removeItemAccFocusVisibility()">\n\t<div class="qv-cao-zoomed-chart" ng-if="zoomOpen" ng-class="{\'cao-tweak-width\' : caoTweakEnabled && isChartSelected() && contextPanelVisible}">\n\t\t<div class="qv-cao-zoomed-anmiation-container" ng-if="zoomOpen">\n\t\t\t<qv-cao-insight class="qv-cao-section-result-item qv-cao-section-result-item-zoomed" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\tng-if="zoomedChart"\n\t\t\t\tchart="zoomedChart"\n\t\t\t\tapp="::app"\n\t\t\t\tdebug="::debug"\n\t\t\t\tsheets="::sheets"\n\t\t\t\tinteractive="::true"\n\t\t\t\talways-show-header="true"\n\t\t\t\theader-icon="lui-icon--arrow-left"\n\t\t\t\theader-action="exitZoom"\n\t\t\t\tpermissions="permissions"\n\t\t\t\tng-keyup="mouseUp"\n\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\tdirection="direction"\n\t\t\t\tis-cao-context-panel-visible="contextPanelVisible"\n\t\t\t>\n\t\t\t</qv-cao-insight>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="assetsPanelVisible" class="qv-cao-field-picker" ng-class="{ \'hide-field-picker\' : !showFieldPicker, \'field-picker-panel-container\': caoTweakEnabled }" tid="cao-assets-panel">\n\t\t<qv-cao-field-picker\n\t\t\tinsights-loaded="state !== \'INIT\'"\n\t\t\tis-limited ="limitedAccess"\n\t\t\tclass ="field-picker"\n\t\t\ttoggle-field-picker="toggleFieldPicker"\n\t\t\tshow-field-picker="showFieldPicker"\n\t\t\titems="fieldList"\n\t\t\tselect-field="selectField">\n\t\t</qv-cao-field-picker>\n\t</div>\n\n\t<div class="qv-cao-search" ng-class="{ \'hide-field-picker\' : !showFieldPicker, \'search-container-with-context-panel\': caoTweakEnabled, \'search-container-nlu\': nluEnabled }">\n\t\t<div class="qv-cao-insights-header" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<h1 q-translation="cao.CognitiveAssociativeOverlay"></h1>\n\t\t\t<button class=\'lui-button\' tid="go-to-sheet-intro-btn" ng-click="closeAndGoToSheet()">\n\t\t\t\t{{ goToSheetButton }}\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="qv-cao-nlu-intro" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t<h1>{{ introHeader }}</h1>\n\t\t</div>\n\t\t<qv-cao-search field-to-remove="fieldToRemove"\n\t\t\t\t\tfield-to-add="fieldToAdd"\n\t\t\t\t\tupdate-field-picker="updateFieldPicker"\n\t\t\t\t\tclear-field-picker="clearFieldPicker"\n\t\t\t\t\tis-limited ="limitedAccess"\n\t\t\t\t\tdirection="direction"\n\t\t\t\t\tdata-disabled="state === \'INIT\'"\n\t\t\t\t\tnlu-query-info-button-visible="state === \'LOADED\'"\n\t\t\t\t\tnlu-query-info-visible="nluQueryInfoVisible"\n\t\t\t\t\ttoggle-nlu-query-info="toggleNluQueryInfo">\n\t\t</qv-cao-search>\n\t\t<div class="qv-cao-search-info" ng-if="nluEnabled && nluQueryInfoVisible">\n\t\t\t<div class="qv-cao-search-info-debug" ng-if="debug">\n\t\t\t\t<h2>Debug Information</h2>\n\t\t\t\t<p class="qv-cao-search-info-response-text">{{ nluRawResponse | json : spacing }}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<p ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')" class="qv-cao-nlu-intro-suggestion-text" q-translation="cao.search.nlu.suggestedQuestionsText"></p>\n\n\t\t<div class="qv-cao-search-line" ng-if="!nluEnabled || (state !== \'INTRO\' && state !== \'INIT\')"></div>\n\n\t\t<div class="qv-cao-scroll-content">\n\t\t\t<div class="qv-cao-scroll-area">\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'INTRO\' || state === \'INIT\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t\t\t\t<h1>{{ introHeader }}</h1>\n\t\t\t\t\t\t<p>{{ introDescriptionSearch }}</p>\n\t\t\t\t\t\t<p ng-if="state === \'INTRO\'">{{ introDescriptionGenerateInsights }}</p>\n\t\t\t\t\t\t<div class="btns">\n\t\t\t\t\t\t\t<button class=\'lui-button lui-button--large\' tid="go-to-sheet-intro-btn" ng-click="closeAndGoToSheet()" ng-if="state === \'INTRO\' ">\n\t\t\t\t\t\t\t\t{{ goToSheetButton }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class=\'lui-button lui-button--success lui-button--large\' tid="generate-insights-intro-btn" ng-click="loadGraphs()" ng-if="state === \'INTRO\' ">\n\t\t\t\t\t\t\t\t{{ introButton }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="state === \'INIT\'">\n\t\t\t\t\t\t\t<div class="loader">\n\t\t\t\t\t\t\t\t<qv-spinner show="state === \'INIT\'" show-delay="300" center-in-parent="true"></qv-spinner>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p q-translation="cao.loading"></p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'NO_FIELDS\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t\t\t\t<h1>{{ introHeader }}</h1>\n\t\t\t\t\t\t<p>{{ introDescriptionNoFields }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'ERROR\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<h1 q-translation="cao.error.header"></h1>\n\t\t\t\t\t\t<p q-translation="cao.error.description"></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'NOT_FOUND\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<h1 q-translation="cao.error.header"></h1>\n\t\t\t\t\t\t<p q-translation="cao.error.description.notfound"></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-section qv-cao-section-insights">\n\t\t\t\t\t<div class="qv-cao-loading" ng-if="state === \'LOADING\'">\n\t\t\t\t\t\t<div class="spinner-container">\n\t\t\t\t\t\t\t<qv-spinner show="state === \'LOADING\'" show-delay="300" center-in-parent="true"></qv-spinner>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-header"\n\t\t\t\t\t\tng-if="state === \'LOADED\'">\n\t\t\t\t\t\t<p class="qv-cao-section-header-text" ng-if="chartMatches.length === 0">{{resultLabel}}</p>\n\t\t\t\t\t\t<span style="display:none;" ng-show="state === \'LOADED\'" tid="cao-last-loaded-query" test-attribute="{{query}}" test-loaded-count="{{loadedCount}}">\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ul class="lui-tabset qv-cao-section-header-text" ng-if="chartMatches.length > 0">\n\t\t\t\t\t\t\t<li class="lui-tab cao-tab qv-cao-section-header-tab1" ng-class="{\'lui-active\' : chartsToShow.activeTab === \'generated\'}" tabindex="0" ng-click="showGeneratedInsights($event)" ng-keypress="showGeneratedInsights($event)">\n\t\t\t\t\t\t\t  <span class="lui-tab__text qv-cao-section-header-tab1-text">{{numberOfGeneratedInsights}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="lui-tab cao-tab qv-cao-section-header-tab2" ng-class="{\'lui-active\' : chartsToShow.activeTab === \'found\'}" tabindex="0" ng-click="showFoundInsights($event)" ng-keypress="showFoundInsights($event)">\n\t\t\t\t\t\t\t  <span class="lui-tab__text qv-cao-section-header-tab2-text">{{numberOfFoundInsights}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="results-action-container" ng-class="{\'results-action-container--tabset\': chartMatches.length > 0}">\n\t\t\t\t\t\t\t<button class="lui-button clear-insights-btn" ng-if="isClearResultsVisible()" tid="clear-insights-btn" ng-click="clearInsightResults()" q-translation="cao.insights.clear"></button>\n\t\t\t\t\t\t\t<button class="lui-button lui-button--success refresh-insights-btn" ng-if="caoTweakEnabled && learningPerformed" tid="refresh-insights-btn" ng-click="refreshCharts()" q-translation="cao.insight.results.refreshButton"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-results" ng-if="state === \'LOADED\'">\n\t\t\t\t\t\t<qv-cao-insight class="qv-cao-section-result-item" ng-class-odd="\'qv-cao-section-result-item-odd\'" ng-focus="onGridFocus()" ng-blur="onGridBlur()" ng-repeat="chart in chartsToShow.charts | orderBy : \'-chart.relevance\'" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\t\t\t\tgrid-screen-reader="gridScreenReader"\n\t\t\t\t\t\t\tindex="$index"\n\t\t\t\t\t\t\tchart="chart"\n\t\t\t\t\t\t\tapp="::app"\n\t\t\t\t\t\t\tsheets="::sheets"\n\t\t\t\t\t\t\tdebug="::debug"\n\t\t\t\t\t\t\tinteractive="::false"\n\t\t\t\t\t\t\tdirection="direction"\n\t\t\t\t\t\t\tscroll-container="scrollContainer"\n\t\t\t\t\t\t\theader-action="zoomChart"\n\t\t\t\t\t\t\theader-icon="lui-icon--expand"\n\t\t\t\t\t\t\tpermissions="permissions"\n\t\t\t\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\t\t\t\ton-insight-focus="onGridFocus()"\n\t\t\t\t\t\t\ton-insight-blur="onGridBlur()">\n\t\t\t\t\t\t</qv-cao-insight>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-footer" ng-if="state === \'LOADED\' && insightFeedback && hiddenCharts.length > 0 && chartsToShow.activeTab !== \'found\' && !caoTweakEnabled">\n\t\t\t\t\t\t<span q-translation="cao.card.section.hidden,{{hiddenCharts.length}}"></span>\n\t\t\t\t\t\t<a class="lui-fade-button show-more-button" ng-click="showHiddenCharts()">\n\t\t\t\t\t\t\t(<span q-translation="{{ showHidden ? \'cao.card.section.hidden.hide\' : \'cao.card.section.hidden.show\' }}"></span>)\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-results qv-cao-section-hidden" ng-if="state === \'LOADED\' && showHidden && chartsToShow.activeTab !== \'found\' && !caoTweakEnabled">\n\t\t\t\t\t\t<qv-cao-insight class="qv-cao-section-result-item" ng-class-odd="\'qv-cao-section-result-item-odd\'" ng-focus="onGridFocus()" ng-blur="onGridBlur()" ng-repeat="chart in hiddenCharts | orderBy : \'-chart.relevance\'" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\t\t\t\tgrid-screen-reader="gridScreenReader"\n\t\t\t\t\t\t\tindex="$index + renderableCharts.length"\n\t\t\t\t\t\t\tchart="chart"\n\t\t\t\t\t\t\tapp="::app"\n\t\t\t\t\t\t\tsheets="::sheets"\n\t\t\t\t\t\t\tdebug="::debug"\n\t\t\t\t\t\t\tinteractive="::false"\n\t\t\t\t\t\t\tdirection="direction"\n\t\t\t\t\t\t\tscroll-container="scrollContainer"\n\t\t\t\t\t\t\theader-action="zoomChart"\n\t\t\t\t\t\t\theader-icon="lui-icon--expand"\n\t\t\t\t\t\t\tpermissions="permissions"\n\t\t\t\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\t\t\t\ton-insight-focus="onGridFocus()"\n\t\t\t\t\t\t\ton-insight-blur="onGridBlur()">\n\t\t\t\t\t\t</qv-cao-insight>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-cao-footer" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<p>{{ introDescriptionGenerateInsights }}</p>\n\t\t\t<button class=\'lui-button lui-button--success\' tid="generate-insights-intro-btn" ng-click="loadGraphs()">\n\t\t\t\t{{ introButton }}\n\t\t\t</button>\n\t\t</div>\n\t\t<qv-cao-refresh-indicator ng-if="isRefreshIndicatorVisible()" />\n\t</div>\n\n\t<qv-cao-insights-context-panel ng-if="isCaoInsightContextPanelVisible()" app="app" hidden-charts="hiddenCharts" class="context-panel cao-height" tid="cao-context-panel" state="state" insight-feedback="insightFeedback" precedents-enabled="appPrecedents.enabled"></qv-cao-insights-context-panel>\n\t<qv-cao-insights-bottom-panel ng-if="caoTweakEnabled" app="app" insight-feedback="insightFeedback"></qv-cao-insights-bottom-panel>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t=function t(){};function e(t){if(t){var e=t.filter(function(t){return t.type.startsWith("master_")});var n=t.filter(function(t){return t.type.startsWith("field")});if(e.length)return e[0];if(n.length)return n[0]}}function n(t,e,n){var i=null;if(e.type.startsWith("master_")){i={libId:e.libId};t.libItems.push(i)}else if("field"===e.type){i={name:e.name};t.fields.push(i)}i&&n&&(i.cond=n)}t.buildDataCollection=function(t){var i={fields:[],libItems:[]};if(t.entities){t.entities.filter(function(t){return"model_element"==t.type}).forEach(function(t){var s=e(t.model_elements);null!=s&&n(i,s)});t.entities.filter(function(t){return"data_value"==t.type&&"filter-category"==t.role}).forEach(function(t){if(t.data_values&&t.data_values.length){var e=t.data_values[0];n(i,e.owner,["==",e.value])}})}if(t.intent){var s=t.intent.name.split("-")[1];s&&(i.analysisTypes=[s])}return i};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(54),n(122),n(94),n(322),n(91),n(90),n(128),n(49),n(103),n(97),n(222),n(105),n(95),n(123),n(223),n(913),n(914),n(915),n(916),n(917),n(918),n(919),n(920),n(934),n(374)],s=function(t,e,n,i,s,o,r,a,l,c,u,d,p,h,f,g,v,m,b,y,x,q,S){var w=["$scope","qvCaoService","qvAccessibilityGridService","$element","$timeout","qvContextMenu","$exportDialog","luiPopover","$window","qvCaoSelectionService",function(e,m,w,C,I,_,D,k,T,E){var A=this;var L=null;var M=[];var P;this.id=a.generateId();this.activeSheet=l.getModel();this.viewDataToggled=false;this.chartLoaded=false;this.contextMenuStatus={open:false};this.lightEditing=c.getFlag("INSIGHT_LIGHT_EDITING");this.generatedChartScreenReaderLabel=r.get("generated.insight.card.screen.reader");this.insightFeedback=c.getFlag("CE_PRECEDENTS");this.insightLearning=c.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=c.getFlag("CAO_TWEAK");this.popupOpen=false;this.shouldFadeToast=false;this.onResize=function(){if(A.row>=0&&A.col>=0){var t=A.row;var e=A.col;A.setRowAndColumn();var n=t!==A.row;n=n||e!==A.col;n&&w.updateItem(A.id,"CaoInsight",A.row,A.col)}};this.resetFocusOnMouseup=function(){A.isFocused=false};this.setFocusOnInsight=function(t){I(function(){A.isFocused=t})};this.setRowAndColumn=function(){var t=3;T.innerWidth<=1024?t=1:T.innerWidth<=1920&&(t=2);A.row=Math.floor(A.index/t);A.col=A.index%t;A.hideConfidenceText=C[0].clientWidth<390};var O=C.find("#sr-cell-status-label");e.accCallback=function(t,e){var n=t===this.col&&e===this.row;A.tabIndex=n?0:-1;n||A.onInsightBlur();I(function(){A.isFocused=!!n})};this.getChartAddMenuItems=function(t){var e=A.chart.isFound();if(e&&!A.isHidden()){var n=A.chart.getSheetsThisChartAppearsOn()[0];t.addItem({translation:A.getSheetName(n),icon:"goto",tid:"cao-external-link",select:function t(){A.gotoSheet(n)}})}var i=[];A.sheets.forEach(function(t){t.permissions&&t.permissions.update&&i.push({translation:t.qMeta.title,tid:"cao-add-to-sheet",icon:"sheet",select:function n(){e&&(A.isCopyMenuItemSelected=true);A.addChartToSheet(t.qInfo.qId)}})});if(A.permissions&&A.permissions.createSheet&&!A.isHidden()){i.push({translation:"cao.search.add.createNewSheet",tid:"cao-add-to-new-sheet",icon:"plus",select:function t(){A.addToNewSheet()}});if(i.length>0){var s=t.addItem({translation:e?"cao.resultitem.contextMenu.copyItem":"cao.resultitem.contextMenu.addItem",icon:e?"copy":"plus",tid:"cao-add"});i.forEach(function(t){s.addItem(t)})}}};this.getChartMenuItems=function(t){var e={translation:"contextMenu.export",tid:"export",icon:"export",select:function t(){A.exportData()}};A.chart.isDataViewSupported()&&A.interactive&&!A.isHidden()&&t.addItem({translation:A.chart.isViewDataToggled()?"contextMenu.viewSource":"contextMenu.viewData",tid:"toggle-flip-to-table",icon:A.chart.isViewDataToggled()?"back":"table",select:function t(){A.flipToTable()}});if(A.chart.isViewDataToggled())A.enableShare&&A.chart.getObject().supportExportData()&&t.addItem(e);else if(!A.isHidden()){A.insightLearning?A.insightLearning&&A.chart.isModified()&&!A.interactive&&!A.caoTweakEnabled&&t.addItem({translation:"cao.insight.inlinerefresh.indicator.action",tid:"cao-learn",icon:"lightbulb",select:function t(){A.refreshAndLearn()}}):t.addItem({translation:"cao.resultitem.info",tid:"cao-open-info",icon:"info",select:function t(){A.openInfo()}});this.getChartAddMenuItems(t);if(A.enableShare&&(A.chart.getObject().supportExport()||A.chart.getObject().supportExportData())){var n=t.addItem({translation:"contextMenu.exportGroup",tid:"cao-share",icon:"export"});if(A.chart.getObject().supportExport()){n.addItem({translation:"contextMenu.export.chart.image",tid:"cao-print-object-image",select:function t(){A.exportToImage()}});n.addItem({translation:"contextMenu.export.chart.pdf",tid:"cao-print-object-pdf",select:function t(){A.exportToPdf()}})}A.enableShare&&A.chart.getObject().supportExportData()&&n.addItem({translation:"contextMenu.export",tid:"export",select:function t(){A.exportData()}})}A.caoTweakEnabled&&A.chart.isGenerated()&&t.addItem({translation:A.isSelected()?"cao.resultitem.finishEditInsightProperties":"cao.resultitem.editInsightProperties",tid:"cao-editInsightProperties",icon:A.isSelected()?"tick":"edit",select:function t(){A.editInsightProperties()}})}A.isHidden()||t.addItem({translation:A.interactive?"cao.resultitem.collapse":"cao.resultitem.expand",tid:"cao-expandCollapseChart",icon:A.interactive?"collapse":"expand",select:function t(){A.headerAction(A.chart)}});this.insightFeedback&&A.chart.isGenerated()&&t.addItem({translation:this.getFeedbackText(),tid:"cao-hideSuggestedChart",icon:"view",select:function t(){A.sendUserFeedback()}})};this.setChartBlurHandler=function(){this.chart.getObject().setOnBlurHandler(function(){w.setFocus("CaoInsight",A);A.isFocused=true})};this.editorKeyDownHandler=function(t){switch(t.which){case 27:A.headerAction(A.chart).then(function(){A.tabIndex=0;A.isFocused=true});O.text(r.get("Accessibility.Object.CloseFullScreenMode"))}};this.keyDownHandler=function(t){switch(t.which){case w.RIGHT_KEY:case w.LEFT_KEY:case w.UP_KEY:case w.DOWN_KEY:this.contextMenuStatus.open&&_.close();if(0===A.tabIndex){t.stopPropagation();t.preventDefault();this.interactive||w.key(t,"CaoInsight")}break;case 9:if(!A.caoTweakEnabled){t.shiftKey&&_.close();A.onInsightBlur();A.isFocused=!A.isFocused}break;case 13:case 32:_.close();t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(!A.chart.isObjectInvalid()&&!A.isHidden()){if(t.shiftKey){A.isFocused=false;A.headerAction(A.chart).then(function(){A.tabIndex=0;A.isFocused=true});O.text(r.get("Accessibility.Object.FullScreenMode"))}else if(A.viewDataSupported()&&A.interactive)A.chart.toggleDataView().then(function(){A.chart.isViewDataToggled()&&O.text(r.get("Accessibility.Object.ViewDataMode"))});else if(A.chart.isViewDataToggled()&&"function"===typeof this.chart.getObject().dataViewObject.focus){A.isFocused=false;this.chart.getObject().dataViewObject.focus()}else if("function"===typeof this.chart.getObject().focus){A.isFocused=false;this.chart.getObject().focus()}else O.text(r.get("Accessibility.Object.CannotViewData"));O.text("")}break;case 27:if(this.contextMenuStatus.open)_.close();else if(this.chart.isViewDataToggled())this.chart.toggleDataView().then(function(){A.chart.isViewDataToggled()||O.text(r.get("Accessibility.Object.ViewChartMode"))});else if(this.interactive){A.headerAction(A.chart).then(function(){A.tabIndex=0;A.isFocused=true});O.text(r.get("Accessibility.Object.CloseFullScreenMode"))}A.isFocused=true;break;case 121:if(t.shiftKey&&!this.contextMenuStatus.open){var n=C.offset();t.pageY=n.top+C.height()/2;t.pageX=n.left+C.width()/2;e.$broadcast("cao.openContextMenu",{event:t,closeFn:function t(){A.isFocused=true},element:C.find(".result-item-graph-container")})}break}};this.onBlur=function(){this.isFocused=false;this.onInsightBlur()};this.$onInit=function(){if(this.interactive){this.tabIndex=0;this.isFocused=true}this.initializeState();this.setRowAndColumn();if(this.interactive)this.tabIndex=0;else{L=w.addItem(this.id,e.accCallback,"CaoInsight",this.col,this.row);this.tabIndex=L?0:-1}d.on("end",this.onResize)};this.$onChanges=function(){this.permissions&&(this.enableShare=this.permissions.exportData)};this.$doCheck=function(){A.caoTweakEnabled&&(A.isSelected()?A.chart.setChartInteractionState(g.STATIC):A.chart.setChartInteractionState(g.ANALYSIS))};this.$onDestroy=function(){A.interactive||w.removeItem("CaoInsight",A.id);t(".qv-cao-scroll-content").unbind("scroll",A.closePopups);d.off("end",this.onResize);f.unsubscribe("cao/insights/adapt_chart");A.shouldFadeToastTimer&&I.cancel(A.shouldFadeToastTimer)};this.isSelected=function(){var t=E.getSelectedChart();return t&&A.chart&&A.chart===t};this.onChartLoaded=function(){this.chartLoaded=true;if(A.caoTweakEnabled){A.chart.activateSelectionWatch(function(){A.chart.isInSelectionState=true});A.chart.deactivateSelectionWatch(function(){A.chart.isInSelectionState=false})}};this.initializeState=function(){t(".qv-cao-scroll-content").bind("scroll",A.closePopups);this.chartLoaded="LOADED"===this.chart.getState();this.chart.refreshChartType();this.matchDetails=this.chart.getMatchDetails()};this.chartClick=function(){!A.chartLoaded||A.headerActionInProgress||A.interactive||A.contextMenuStatus.open||A.isHidden()||A.caoTweakEnabled?A.closePopups():A.headerAction(A.chart)};this.editInsightProperties=function(e){if(e){e.preventDefault();e.stopPropagation();A.caoTweakEnabled&&I(function(){t("button.cao-edit-field-header-title.lui-button").first().focus()})}if(this.caoTweakEnabled&&this.chartLoaded&&!this.headerActionInProgress){A.closePopups();if(this.isSelected()){E.clearSelection();v.storageObj(A.app.id).contextPanel||f.publish("cao/insight/contextPanelToggled",false);f.publish("cao/insight/editInsightProperties",false)}else{A.isCaoContextPanelVisible||f.publish("cao/insight/contextPanelToggled",true);f.publish("cao/insight/editInsightProperties",true);E.selectChart(A.chart)}}};this.sendUserFeedback=function(){A.chart.setModified(false);A.feedbackInProgress=true;A.isHidden()||u.trackEvent(u.customEvents.INSIGHTS_HIDE_CHART_CLICKED,{chart:A.chart.getAnalysisPrecedentId()});A.sendFeedback({chart:A.chart,type:h.Precedents.PrecedentTypes.Dislike}).then(function(){A.interactive&&A.headerAction(A.chart)}).finally(function(){A.feedbackInProgress=false})};this.adaptChart=function(t){if(A.chart===t){A.chart.getTitle().then(function(t){A.dataMode&&(A.dataMode=false);A.title=t});A.shouldFadeToast=false;A.shouldFadeToastTimer=I(function(){A.shouldFadeToast=true},5e3)}};f.subscribe("cao/insights/adapt_chart",A.adaptChart);this.refreshAndLearn=function(){A.feedbackInProgress=true;A.sendFeedback({chart:A.chart,type:h.Precedents.PrecedentTypes.Like}).then(function(){A.interactive&&A.headerAction(A.chart)}).finally(function(){u.trackEvent(u.customEvents.INSIGHTS_LEARN_CLICKED);A.feedbackInProgress=false;A.chart.setModified(false)})};this.isHidden=function(){return A.chart.isHidden()};this.getFeedbackText=function(){return A.chart.isHidden()?"cao.card.unhide":"cao.card.hide"};this.addChartToSheet=function(t){A.isChartAdded=true;A.chart.addToSheet(t).then(function(t){$(t)})};this.addToNewSheet=function(){A.chart.addToNewSheet().then(function(t){$(t)})};this.exportToPdf=function(){A.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"PDF",chart:A.chart.getAnalysisPrecedentId()});var t=o.showForObject(A.chart.getObject(),"Pdf","object",640,480);t.closed.then(function(){A.setFocusOnInsight(true)});A.closePopups()};this.exportToImage=function(){A.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"IMAGE",chart:A.chart.getAnalysisPrecedentId()});var t=o.showForObject(A.chart.getObject(),"Image","object",640,480);t.closed.then(function(){A.setFocusOnInsight(true)});A.closePopups()};this.exportData=function(){A.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"DATA",chart:A.chart.getAnalysisPrecedentId()});var t=D.show(A.chart.getModel());t.closed.then(function(){A.setFocusOnInsight(true)});A.closePopups()};this.navigateToSheet=function(t){A.closePopups();m.toggleCao();i.goToSheet(t,Object.keys(s.States)[s.state])};this.gotoSheet=function(){if(1===A.chart.getSheetsThisChartAppearsOn().length)A.navigateToSheet(A.chart.getSheetsThisChartAppearsOn()[0]);else{var t=["$scope",function(t){t.appearsOnSheets=A.chart.getSheetsThisChartAppearsOn();t.getSheetName=A.getSheetName;t.gotoSheet=A.navigateToSheet}];F(S,t,C.find(".gotoSheet")[0],"top")}};this.confidenceClosed=function(){A.headerActionInProgress=false};this.confidenceOpened=function(){A.headerActionInProgress=true};this.closeConfidenceRegistration=function(t){P=t};this.closePopups=n.throttle(function(){P&&P();M.forEach(function(t,e){I(function(){t.close();M.splice(e,1)})});A.headerActionInProgress=false},200,{trailing:false});this.openAddPopover=function(){var t=["$scope",function(t){t.sheets=A.sheets;t.addChartToSheet=A.addChartToSheet;t.addToNewSheet=A.addToNewSheet;t.permissions=A.permissions}];F(b,t,C.find(".add-to-button")[0],"bottom")};this.openDebugInformation=function(){var t=["$scope",function(t){t.debugInformation=A.chart.getSearchReport();t.visualization=A.chart.chart.visualization;t.complexity=A.chart.chart.complexity}];F(y,t,C.find(".debug-information")[0],"bottom")};this.openShare=function(){if(A.popupOpen)A.popupOpen=false;else{A.popupOpen=true;var t=["$scope",function(t){if(!A.chart.isViewDataToggled()&&A.chart.getObject().supportExport()){t.exportToPdf=A.exportToPdf;t.exportToImage=A.exportToImage}A.chart.getObject().supportExportData()&&(t.exportData=A.exportData)}];F(x,t,C.find(".share")[0],"bottom")}};this.openInfo=function(){var t=function t(){I(function(){A.isFocused=true})};I(function(){A.isFocused=false});var e=["$scope",function(t){t.type=A.chart.chart.visualization.type;t.title=A.chart.isGenerated()?"cao.search.info.title.generated":"cao.search.info.title.found";t.matches=[];A.matchDetails&&A.matchDetails.forEach(function(e){var n="";var i="";if(A.chart.isGenerated()){switch(e.matchedOn){case"exactMatch":n=r.get("cao.search.generated.exactMatch");break;case"literalMatch":n=r.get("cao.search.generated.literalMatch");break;case"headMatch":n=r.get("cao.search.generated.headMatch");break;case"headSynonymMatch":n=r.get("cao.search.generated.headSynonymMatch");break;case"headStemMatch":n=r.get("cao.search.generated.headStemMatch");break;case"headStemSynonymMatch":n=r.get("cao.search.generated.headStemSynonymMatch");break;case"partialTokenMatch":n=r.get("cao.search.generated.partialTokenMatch");break;case"substrPartialMatch":n=r.get("cao.search.generated.substrPartialMatch");break;case"semanticMatch":n=r.get("cao.search.generated.semanticMatch");break;case"valueMatch":n=r.get("cao.search.generated.valueMatch");break;default:break}n=n.replace(/\{1\}/g,function(t){return"<b>"+t+"</b>"});i=r.get(n,[A.chart.getSearchReport().search.searchPhrase.text,e.matchedField]);t.matches.push(i)}else if(A.chart.isFound()){switch(e.matchedField){case"titleMatch":n=r.get("cao.search.titleMatch");break;case"subTitleMatch":n=r.get("cao.search.subTitleMatch");break;case"footnoteMatch":n=r.get("cao.search.footnoteMatch");break;case"basedOnMatch":n=r.get("cao.search.basedOnMatch");break;default:break}n=n.replace(/\{1\}/g,function(t){return"<b>"+t+"</b>"});i=r.get(n,[A.chart.getSearchReport().search.searchPhrase.text,e.matchedOn]);t.matches.push(i)}});t.formattedSheetLinks=[];var e=r.get("cao.search.info.found.match");e=e.replace(/\{0\}/g,function(t){return"<b>"+t+"</b>"});A.chart.getSheetsThisChartAppearsOn().forEach(function(n){var i=A.getSheetName(n);var s=r.get(e,[i]);t.formattedSheetLinks.push({label:s,sheetId:n})});t.gotoSheet=A.navigateToSheet}];F(q,e,C.find(".info")[0],"bottom",t)};this.getSheetName=function(t){var e=A.sheets.filter(function(e){return e.qInfo.qId===t})[0];if(e)return e.qMeta.title};function F(t,e,n,i,s){var o={template:t,controller:e,dock:i,closeOnResize:true,alignTo:n};var r=k.show(o);M.push(r);r.closed.then(function(){A.headerActionInProgress=false;A.popupOpen=false;"function"===typeof s&&s()});A.headerActionInProgress=true}function $(t){m.scrapeApp();u.trackEvent(u.customEvents.INSIGHTS_ADD_CHART,{chart:A.chart.getAnalysisPrecedentId()});A.closePopups();I(function(){C.find(".result-item-buttons").addClass("animate")});I(function(){A.addedToSheet=true;A.chart.getSheetsThisChartAppearsOn().indexOf(t.id)>-1&&(A.isCopyMenuItemSelected?A.addOrCopySuccessText="cao.insight.copiedToSheet":A.addOrCopySuccessText="cao.search.addedToSheet");p.resizeCharts(T);I(function(){C.find(".result-item-added").addClass("animate")})},500);I(function(){C.find(".goto-sheet").addClass("animate")},2500);I(function(){A.addedToSheet=false;C.find(".goto-sheet").removeClass("animate");C.find(".result-item-added").removeClass("animate");C.find(".result-item-buttons").removeClass("animate")},4e3)}this.flipToTable=function(){var t=A.chart.isDataViewSupported()&&A.interactive;if(t){u.trackEvent(u.customEvents.INSIGHTS_FLIP_TO_TABLE);A.chart.toggleDataView();A.dataMode=!A.dataMode}};this.viewDataSupported=function(){return A.chart.isDataViewSupported()};e.$watch(function(){return t(".qv-contextmenu").length},function(){if(0===t(".qv-contextmenu").length)I(function(){A.chart.setChartInteraction(true);A.contextMenuStatus={open:0!==t(".qv-contextmenu").length}},300);else{A.chart.setChartInteraction(false);A.contextMenuStatus={open:true}}});e.$watch(function(){return A.chart.shouldRedraw},function(){A.chart.getTitle().then(function(t){A.dataMode&&(A.dataMode=false);A.title=t})})}];var C={transclude:true,template:m,bindings:{chart:"<",app:"<",headerAction:"<",headerIcon:"@",interactive:"<",direction:"<",sheets:"<",alwaysShowHeader:"<",scrollContainer:"<",debug:"<",permissions:"<",index:"<",gridScreenReader:"=",onInsightBlur:"&",onInsightFocus:"&",sendFeedback:"&",isCaoContextPanelVisible:"<"},controller:w};return e.nativeComponent("qvCaoInsight",C)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="cao-insight">\n\t<div class="cao-insight-in-selection-overlay" ng-if="$ctrl.chart.isInSelectionState && $ctrl.caoTweakEnabled"></div>\n\t<div class="cao-insight-container" ng-class="{\'zoom\': $ctrl.interactive, \'hidden\': $ctrl.isHidden(), \'generated\': $ctrl.chart.isGenerated(), \'lightedit\': $ctrl.lightEditing && !$ctrl.caoTweakEnabled, \'selected\': $ctrl.isSelected()}" tabindex="{{$ctrl.tabIndex}}"\n\t\tng-keydown="$ctrl.keyDownHandler($event)" focus-when="$ctrl.isFocused" ng-focus="$ctrl.onInsightFocus()" dir="{{$ctrl.direction}}" test-chart-loaded="{{$ctrl.chartLoaded}}">\n\t\t<div class="hidden-screen-reader-label" aria-label="{{$ctrl.gridScreenReader}}"></div>\n\t\t<label class="hidden-screen-reader-label" id="sr-cell-status-label" aria-live="assertive"></label>\n\t\t<div class="result-item-title-bar" dir="{{$ctrl.direction}}" ng-class="{ \'interactive\': $ctrl.interactive}">\n\t\t\t<div class="result-item-title" title="{{ $ctrl.title }}" qva-direction x-dir-setting="{{$ctrl.direction}}" x-dir-text="{{$ctrl.title}}" ng-click="$ctrl.editInsightProperties($event)" tid="insight-chart-edit-button">\n\t\t\t\t<span>{{ $ctrl.title }}</span>\n\t\t\t</div>\n\t\t\t<div class="result-item-title-icons" ng-class="{ \'active\': $ctrl.headerActionInProgress || $ctrl.interactive || $ctrl.isSelected() }" q-title-translation="cao.resultitem.info">\n\t\t\t\t<button ng-click="$ctrl.openInfo()" ng-keyup="$event.keyCode == 13 ? $ctrl.openInfo() : null" class="insight-chart-info-button result-item-title-icon" ng-show="!$ctrl.insightLearning && $ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="info lui-icon lui-icon--info"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.caoTweakEnabled && !$ctrl.isSelected() && $ctrl.chart.isGenerated()" class="result-item-title-icon" ng-click="$ctrl.editInsightProperties($event)" ng-keyup="$event.keyCode == 13 ? $ctrl.editInsightProperties($event) : null"\n\t\t\t\t\tq-title-translation="cao.resultitem.editInsightProperties" tid="insight-chart-edit-properties-button" ng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="lui-icon--edit lui-icon"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.caoTweakEnabled && $ctrl.isSelected()" class="result-item-title-icon" ng-click="$ctrl.editInsightProperties($event)" ng-keyup="$event.keyCode == 13 ? $ctrl.editInsightProperties($event) : null" q-title-translation="cao.resultitem.finishEditInsightProperties"\n\t\t\t\t\ttid="insight-chart-finish-edit-properties-button" ng-show="$ctrl.chartLoaded">\n\t\t\t\t\t<span class="lui-icon--tick lui-icon result-item-title-icon-checkmark"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-click="$ctrl.openShare()" ng-keyup="$event.keyCode == 13 ? $ctrl.openShare() : null" class="result-item-title-icon" ng-if="$ctrl.enableShare" q-title-translation="contextMenu.exportGroup" tid="insight-chart-export-button" ng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="share lui-icon lui-icon--export"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-click="$ctrl.openDebugInformation()" ng-keyup="$event.keyCode == 13 ? $ctrl.openDebugInformation() : null" class="result-item-title-icon" ng-if="$ctrl.debug">\n\t\t\t\t\t<span class="debug-information lui-icon lui-icon--cogwheel"></span>\n\t\t\t\t</button>\n\t\t\t\t<button tabindex="0" ng-if="!$ctrl.interactive" class="result-item-title-icon" ng-click="$ctrl.headerAction($ctrl.chart)" ng-keyup="$event.keyCode == 13 ? $ctrl.headerAction($ctrl.chart) : null" q-title-translation="cao.resultitem.expand" tid="insight-chart-expand-button"\n\t\t\t\t\tng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="qv-cao-item-expand-icon lui-icon" ng-class="$ctrl.headerIcon"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.interactive" class="result-item-title-icon" ng-click="$ctrl.headerAction($ctrl.chart)" ng-keyup="$event.keyCode == 13 ? $ctrl.headerAction($ctrl.chart) : null" q-title-translation="cao.resultitem.collapse" tid="zoomed-chart-shrink-button">\n\t\t\t\t\t<span class="lui-icon--remove lui-icon"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="chart-container">\n\t\t\t<div class="insight">\n\t\t\t\t<qv-cao-insight-chart set-blur-handler="$ctrl.setChartBlurHandler()" get-chart-menu-items="$ctrl.getChartMenuItems(menu)" ng-click="$ctrl.chartClick(id)" class="result-item-graph" chart="$ctrl.chart" app="::$ctrl.app" on-chart-loaded="$ctrl.onChartLoaded()"\n\t\t\t\t\tinteractive="$ctrl.interactive" scroll-container="$ctrl.scrollContainer" object="$ctrl.object" ng-class="{\'clickable\': !$ctrl.contextMenuStatus.open}" context-menu-status="$ctrl.contextMenuStatus" index="$ctrl.index" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="result-item-footer" dir="{{$ctrl.direction}}">\n\t\t\t<div ng-if="$ctrl.chart.isGenerated()" aria-hidden="true" class="result-item-buttons" ng-show="!$ctrl.addedToSheet">\n\t\t\t\t<div class="footer-left" ng-if="!$ctrl.interactive">\n\t\t\t\t\t<cao-confidence ng-if="!$ctrl.caoTweakEnabled" class="result-item-title-icon" data-chart="$ctrl.chart" button-id="confidence_{{$parent.$parent.$parent.$parent.$index}}" ng-show="$ctrl.insightLearning" close-notification="$ctrl.closeConfidenceRegistration(handler)"\n\t\t\t\t\t\topened="$ctrl.confidenceOpened()" closed="$ctrl.confidenceClosed()" hide-text="$ctrl.hideConfidenceText"></cao-confidence>\n\t\t\t\t\t<span class="title generated-insight-title" ng-show="!$ctrl.insightLearning" q-translation="cao.search.card.generated" aria-label="{{$ctrl.generatedChartScreenReaderLabel}}"></span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="footer-right">\n\t\t\t\t\t<div class="feedback-button-container" ng-if="$ctrl.insightFeedback && !$ctrl.caoTweakEnabled" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t<lui-button tid="insight-feedback-button" ng-click="$ctrl.sendUserFeedback()" ng-disabled="!$ctrl.chartLoaded || $ctrl.feedbackInProgress" tabindex="-1" q-translation="{{$ctrl.getFeedbackText()}}"\n\t\t\t\t\t\t\tng-class="{\'btn-state-unhide\': $ctrl.chart.isHidden(), \'btn-state-hide\': !$ctrl.chart.isHidden()}">\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="lui-buttongroup" tid="cao-add-to-sheet-button" ng-if="$ctrl.activeSheet.layout.permissions.update && $ctrl.permissions.createSheet">\n\t\t\t\t\t\t<lui-button ng-click="$ctrl.addChartToSheet()" tabindex="-1" ng-disabled="!$ctrl.chartLoaded || $ctrl.isChartAdded" q-translation="cao.search.addToSheet">\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t\t<lui-button class="add-to-button" tabindex="-1" q-title-translation="cao.search.addToSheetOptions" ng-disabled="!$ctrl.chartLoaded" ng-click="$ctrl.openAddPopover()">\n\t\t\t\t\t\t\t<span class="lui-overlay-button__caret lui-caret"></span>\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="lui-buttongroup" ng-if="!$ctrl.activeSheet.layout.permissions.update && $ctrl.permissions.createSheet">\n\t\t\t\t\t\t<lui-button class="add-to-button" tabindex="-1" q-title-translation="cao.search.addToSheetOptions" ng-disabled="!$ctrl.chartLoaded" ng-click="$ctrl.openAddPopover()">\n\t\t\t\t\t\t\t<span q-translation="cao.search.addToSheet"></span>\n\t\t\t\t\t\t\t<span class="lui-overlay-button__caret lui-caret"></span>\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.chart.isFound()" ng-class="{ \'itemAdded\': $ctrl.addedToSheet }" class="result-item-added result-item-buttons">\n\t\t\t\t<span>\n\t\t\t\t\t<div class="goto-sheet" ng-show="$ctrl.addedToSheet">\n\t\t\t\t\t\t<span class="tick-highlight" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t\t<span class="lui-icon lui-icon--tick"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span q-translation="{{$ctrl.addOrCopySuccessText}}"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t\t<a ng-click="$ctrl.gotoSheet($ctrl.chart.getSheetsThisChartAppearsOn()[0])" q-title-translation="Storytelling.Sheet.GoToSheet">\n\t\t\t\t\t<span ng-if="$ctrl.chart.getSheetsThisChartAppearsOn().length === 1" x-dir-text="{{ $ctrl.getSheetName($ctrl.chart.getSheetsThisChartAppearsOn()[0]) }}" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t{{ $ctrl.getSheetName($ctrl.chart.getSheetsThisChartAppearsOn()[0]) }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span ng-if="$ctrl.chart.getSheetsThisChartAppearsOn().length > 1" q-translation="cao.search.multipleSources">\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="gotoSheet lui-icon lui-icon--goto" qva-direction x-dir-setting="{{$ctrl.direction}}"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="editor cao-chart-light-editing" ng-if="$ctrl.lightEditing && $ctrl.interactive && $ctrl.chart.isGenerated() && !$ctrl.caoTweakEnabled" ng-keydown="$ctrl.editorKeyDownHandler($event)">\n\t\t\x3c!-- TODO: move to directive --\x3e\n\t\t<div class=\'qv-panel-properties\' style="overflow: auto;">\n\t\t\t<qv-cao-insight-editor chart="$ctrl.chart" app="$ctrl.app" />\n\t\t</div>\n\t</div>\n\t<div class="cao-chart-refresh-indicator-container" ng-class="{\'visible\': $ctrl.insightLearning && $ctrl.chart.isModified() && !$ctrl.interactive && !$ctrl.shouldFadeToast, \'fade\': $ctrl.shouldFadeToast}" ng-if="$ctrl.insightLearning && $ctrl.chart.isModified() && !$ctrl.interactive" ng-click="$ctrl.adaptChart($ctrl.chart)">\n\t\t<div class="cao-chart-refresh-indicator-content">\n\t\t\t<div class="cao-chart-refresh-top">\n\t\t\t\t<span class="lui-icon lui-icon--close" ng-click="$ctrl.chart.setModified(false)"></span>\n\t\t\t</div>\n\t\t\t<div class="cao-chart-text" ng-class="{\'cao-chart-text-no-refresh\': $ctrl.caoTweakEnabled}">\n\t\t\t\t<div q-translation="cao.insight.inlinerefresh.indicator.body.lineone" />\n\t\t\t\t<div q-translation="cao.insight.inlinerefresh.indicator.body.linetwo" />\n\t\t\t</div>\n\t\t\t<div class="cao-chart-refresh-indicator-action-container">\n\t\t\t\t<div class="cao-chart-refresh-action">\n\t\t\t\t\t<a class="cao-chart-refresh" ng-click="$ctrl.refreshAndLearn()" q-translation="cao.insight.inlinerefresh.indicator.action" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(t,e){t.exports='<lui-popover class="cao-add-popover">\n\t<div class="lui-popover__body lui-nopad popover-body">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action" ng-click="addChartToSheet(sheet.qInfo.qId)" ng-repeat="sheet in sheets"\n\t\t\t ng-if="sheet.permissions.update">\n\t\t\t\t<span class="lui-list__aside lui-icon lui-icon--sheet"></span>\n\t\t\t\t<span class="lui-list__text">{{ sheet.qMeta.title }}</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-click="addToNewSheet()">\n\t\t\t\t<span class="lui-list__aside lui-icon lui-icon--plus"></span>\n\t\t\t\t<span class="lui-list__text" q-translation="cao.search.add.createNewSheet"></span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},function(t,e){t.exports='<lui-popover class="cao-debug-popover">\n\t<lui-popover-body>\n\t\t<div>\n\t\t\t<b>Debug Information</b>\n\t\t\t<pre>{{ debugInformation | json : spacing }}</pre>\n\t\t\t<b ng-if="visualization.type === \'generated\'">Visualization</b>\n\t\t\t<pre ng-if="visualization.type === \'generated\'">{{ visualization | json : spacing }}</pre>\n\t\t\t<b ng-if="visualization.type === \'generated\'">Complexity</b>\n\t\t\t<pre ng-if="visualization.type === \'generated\'">Estimate: {{ complexity }}</pre>\n\n\t\t\t<b ng-if="visualization.type === \'found\'">Chart</b>\n\t\t\t<pre ng-if="visualization.type === \'found\'">\n{\n  chartId: {{ visualization.chartId }},\n  appearsOnSheets: {{ visualization.appearsOnSheets | json : spacing }}}\n\t\t\t</pre>\n\t\t</div>\n\t</lui-popover-body>\n</lui-popover>\n'},function(t,e){t.exports='<lui-popover class="cao-share-popover">\n\t<div class="lui-popover__body lui-nopad popover-body">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportToImage" ng-click="exportToImage()" tid="share-popover-export-image">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export.chart.image"></a>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportToPdf" ng-click="exportToPdf()" tid="share-popover-export-pdf">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export.chart.pdf"></a>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportData" ng-click="exportData()" tid="share-popover-export-data">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export"></a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},function(t,e){t.exports='<lui-popover class="cao-info-popover">\n    <lui-popover-body>\n        <div>\n            <ul>\n                <li class="cao-popover-title" q-translation="{{ title }}"></li>\n                <li ng-repeat="match in matches" ng-bind-html="match"></li>\n                <li ng-if="matches.length === 0 && type === \'generated\'" q-translation="cao.search.info.body.generated"></li>\n                <li ng-repeat="sheet in formattedSheetLinks">\n                    <a class="gotoSheet" ng-click="gotoSheet(sheet.sheetId)">\n                        <span ng-bind-html="sheet.label"></span>\n                        &nbsp; <span class="lui-icon lui-icon--goto"></span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </lui-popover-body>\n</lui-popover>\n'},function(t,e){t.exports='<lui-popover class="cao-goto-sheet-popover">\n    <div class="lui-popover__body lui-nopad popover-body">\n        <ul class="lui-list">\n            <li class="lui-list__item lui-list__action" ng-repeat="sheet in appearsOnSheets track by $index" ng-click="gotoSheet(sheet)">\n                <span class="lui-list__aside lui-icon lui-icon--goto"></span>\n                <span class="lui-list__text">{{ getSheetName(sheet) }}</span>\n            </li>\n        </ul>\n    </div>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){var e={restrict:"A",scope:{focusWhen:"="},controller:["$scope","$element",function(t,e){t.$watch("focusWhen",function(t){t?e.focus():false===t&&e.blur()})}]};t.directive("focusWhen",function(){return e})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(91),n(103),n(49),n(196),n(187),n(178),n(921),n(922),n(923),n(924),n(925),n(926),n(927),n(930),n(218),n(932),n(221)],s=function(t,e,n,i,s,o,r,a,l,c,u,d){var p=["qvCaoSearchService","qvCaoService","qvCaoChartService","qvAppDetailsService","luiPopover",function(t,l,p,h,f){var g=this;var v=[];var m;this.insightLearning=s.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=s.getFlag("CAO_TWEAK");this.$onInit=function(){h.get().then(function(t){m=t.model.app.published||!t.model.permissions.update});e.subscribe(o.PUBSUB_TOPIC,q)};this.$onDestroy=function(){e.unsubscribe(o.PUBSUB_TOPIC)};function b(t){g.chart.setModified(g.chart.isModified()||!t&&g.chart.getMatches().filter(function(t){return t.isDirty}).length>0);g.chart.adaptChart(g.chart.isModified()).then(function(){y()});e.publish("cao/insights/adapt_chart",g.chart)}function y(){v.forEach(function(t,e){t.popup.close();v.splice(e,1)})}function x(t){v.forEach(function(e,n){t===e.id&&v.splice(n,1)})}function q(t){var e=g.chart.getMatches();var n=t.slotA;var s=t.slotB;var o,r;e.forEach(function(t,e){t.slot===n?o=e:t.slot===s&&(r=e)});var a=e[r];e[r]=e[o];e[o]=a;e[r].slot=s;e[o].slot=n;i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_DRAG_AND_DROP,{chart:g.chart.getAnalysisPrecedentId()});b(true)}this.toggleMatchDetails=function(t){t.expanded=!t.expanded};this.getFields=function(){return g.chart.getMatches().filter(function(t){return!t.slotRole})};this.getMeasures=function(){return g.chart.getMatches().filter(function(t){return t.slotRole===o.MEASURE})};this.getDimensions=function(){return g.chart.getMatches().filter(function(t){return t.slotRole===o.DIMENSION})};this.getDimensionCount=function(){return g.getDimensions().length};this.getMeasureCount=function(){return g.getMeasures().length};this.getFieldCount=function(){return g.getFields().length};this.hasMeasures=function(){return g.chart.getMatches().filter(function(t){return t.slotRole===o.MEASURE}).length>0};this.hasDimensions=function(){return g.chart.getMatches().filter(function(t){return t.slotRole===o.DIMENSION}).length>0};this.applyLearning=function(){p.refreshInsights().then(function(t){var n=t.recommendations.filter(function(t){return t.chart.visualization.visualization.analysis.analysis===g.chart.chart.visualization.visualization.analysis.analysis})[0];if(n){g.chart.chart.visualization=n.chart.visualization;delete g.chart.rendered;g.chart.shouldRedraw=true;g.chart.recalculateConfidence=true}else g.chart.invalidFromLearning=true;l.setRefreshIndicatorVisibility(true);e.publish("cao/insight/learning_applied")})};this.changeAggr=function(t,e){g.chart.getMatches().forEach(function(n){if(n.slot===t.slot){n.isDirty=true;n.aggr=e}});i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_AGGREGATION_CHANGE,{chart:g.chart.getAnalysisPrecedentId()});b()};this.changeField=function(t,e){g.lastAggr=t.aggr||g.lastAggr;g.chart.getMatches().forEach(function(n){if(n.slot===t.slot){n.isDirty=true;g.caoTweakEnabled&&g.toggleMatchDetails(n);if(e.libId){n.libId=e.libId;n.libIdLabel=e.libIdLabel;delete n.field;delete n.aggr}else{n.field=e.name;n.slotRole!==o.MEASURE||n.aggr||(n.aggr=g.lastAggr);delete n.libId;delete n.libIdLabel}}});i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_FIELD_CHANGE,{chart:g.chart.getAnalysisPrecedentId()});b()};this.showChangeAggr=function(t,e){var n=["$scope",function(t){t.field=e;t.change=g.changeAggr;t.wrappedAggregations=r.COMMON_FUNCTIONS.map(function(t){return{text:a.getFormattedAggregation(t),action:function n(){g.changeAggr(e,a.getFormattedAggregation(t))}}})}];S(c,n,t.currentTarget,"bottom","cao-changeAggregation_"+e.slot)};this.canChangeAggregation=function(t){if(!t.restrictions)return true;var e=t.restrictions.filter(function(t){return"aggregation"===t.name})[0];return!e};this.showChangeField=function(e,n,i){var s=["$scope",function(e){var s=[];var r=[];var a=[];var l=n.restrictions?n.restrictions.filter(function(t){return"candidates"==t.name})[0]:void 0;function c(t){if(!l)return true;return l.types.indexOf(t)>-1}function u(t){s=c("eField")?t.filter(function(t){return!t.masterItem}):[];r=c("eDimLib")?t.filter(function(t){return t.masterItem&&t.classifications.filter(function(t){return t===o.DIMENSION}).length>0}):[];a=c("eMsrLib")?t.filter(function(t){return t.masterItem&&t.classifications.filter(function(t){return t===o.MEASURE}).length>0}):[];e.field=n;e.fields=s;if(i===o.DIMENSION){e.dimensions=r;e.measures=[]}else if(i===o.MEASURE){e.measures=a;e.dimensions=[]}else{e.dimensions=r;e.measures=a}}function d(n){var i=t.getMatchingFields(n,m);e.highlight=n;u(i)}var p=t.getMatchingFields(void 0,m);u(p);e.change=g.changeField;e.filterFields=d}];S(u,s,e.currentTarget,"bottom","cao-changeField_"+n.slot);g.caoTweakEnabled&&g.toggleMatchDetails(n)};this.showAnalysisInfo=function(t){var e=["$scope",function(t){var e=g.chart.chart.visualization.visualization.analysis.analysis;var i=n.get("cao.insight.analysis."+e);t.analysisTitle=n.get("cao.insight.analysis.popover.title",[i]);t.analysisDescription=n.get("cao.insight.analysis."+e+".description")}];S(d,e,t.currentTarget,"left","cao_analysisPopover")};function S(t,e,n,i,s){if(v.filter(function(t){return t.id===s})[0]){y();return}y();var o={template:t,controller:e,dock:i,alignTo:n,closeOnResize:true,outsideIgnore:s};var r=f.show(o);r.closing.then(function(){x(s)});r.closed.then(function(){n.focus()});v.push({id:s,popup:r})}}];var h={transclude:true,template:l,bindings:{chart:"=",app:"="},controller:p};return t.nativeComponent("qvCaoInsightEditor",h)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="title" q-translation="cao.card.title.editor.title" ng-if="!$ctrl.caoTweakEnabled" />\n<div class="cao-editor-field-list">\n    <div class="header">\n        <span q-translation="cao.editor.title" />\n        <a ng-click="$ctrl.showAnalysisInfo($event)" id="cao_analysisPopover" qva-outside-ignore-for="cao_analysisPopover">\n            <span class="lui-icon lui-icon--help" />\n        </a>\n    </div>\n    <div class="analysis-type">\n        <span tid="analyis-type-string" q-translation="{{\'cao.insight.analysis.\' + $ctrl.chart.getChartType()}}" />\n    </div>\n\n    \x3c!--- GENERIC FIELDS --\x3e\n    <div class="header" ng-if="!$ctrl.hasDimensions() && !$ctrl.hasMeasures()">\n        <span q-translation="cao.fieldPicker.tab.fields">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.getFields()">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.fieldCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match)" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getFieldCount() > 1"\n                q-title-translation="Common.Move"></i>\n        </div>\n\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_field_{{$index}}" chart="$ctrl.chart" ng-show="match.expanded" />\n    </div>\n\n\n    \x3c!--- DIMENSIONS--\x3e\n    <div class="header" ng-if="$ctrl.hasDimensions()">\n        <span q-translation="cao.fieldPicker.tab.dimensions">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.getDimensions()">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.dimensionCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match, \'dimension\')" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getDimensionCount() > 1"\n                q-title-translation="Common.Move"></i>\n        </div>\n\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_dimension_{{$index}}" chart="$ctrl.chart"\n            ng-show="match.expanded" />\n    </div>\n\n    \x3c!--- MEASURES --\x3e\n    <div class="header cao-msrs-header" ng-if="$ctrl.hasMeasures()">\n        <span q-translation="cao.fieldPicker.tab.measures">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.chart.getMatches()" ng-if="match.slotRole === \'measure\'">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.measureCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Change aggregation dropdown --\x3e\n            <button ng-if="match.aggr" class="lui-button cao-edit-field-header-aggregation" ng-click="$ctrl.showChangeAggr($event, match)"\n                ng-disabled="!$ctrl.canChangeAggregation( match )" qva-outside-ignore-for="{{\'cao-changeAggregation_\' + match.slot}}" >\n                {{ match.aggr.charAt(0).toUpperCase() + match.aggr.substring(1) }}\n            </button>\n            \x3c!-- Header content --\x3e\n\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match, \'measure\')" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getMeasureCount() > 1"\n                q-title-translation="Common.Move"></i>\n\n        </div>\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_measure_{{$index}}" chart="$ctrl.chart" ng-show="match.expanded" />\n    </div>\n</div>'},function(t,e){t.exports='<lui-popover class="cao-change-aggr-popover cao-popover">\n    <div class="lui-popover__body lui-nopad popover-body">\n            <qv-action-list items="wrappedAggregations"></qv-action-list>\n    </div>\n</lui-popover>\n\n'},function(t,e){t.exports='<lui-popover class="cao-change-field-popover cao-popover">\n    <object-add-typeahead>\n        <lui-popover-header>\n            <div class="lui-input-group">\n                <input class="lui-input lui-input-group__input" type="text" autocomplete="off"\n                    ng-model="search.term" qva-focus="autoFocus" ng-change="filterFields(search.term)" maxlength="255"\n                    object-add-typeahead-input />\n            </div>\n        </lui-popover-header>\n        <div class="lui-popover__body lui-nopad popover-body" object-add-typeahead-menu>\n\n            <ul class="lui-list">\n                <div ng-if="dimensions.length > 0" class="object-add-popover-list-header" q-translation="Common.Dimensions"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="d in dimensions" on-select="change(field, d)"\n                    object-add-typeahead-item="d">\n                    <span class="lui-list__text" qve-highlight text="{{ d.libIdLabel }}" query="highlight"></span>\n                </li>\n\n                <div ng-if="measures.length > 0" class="object-add-popover-list-header" q-translation="Common.Measures"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="m in measures" on-select="change(field, m)"\n                    object-add-typeahead-item="m">\n                    <span class="lui-list__text" qve-highlight text="{{ m.libIdLabel }}" query="highlight"></span>\n                </li>\n\n                <div ng-if="fields.length > 0" class="object-add-popover-list-header" q-translation="Common.Fields"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="f in fields" on-select="change(field, f)"\n                    object-add-typeahead-item="f">\n                    <span class="lui-list__text" qve-highlight text="{{ f.displayNameTokens[0].text }}" query="highlight"></span>\n                </li>\n            </ul>\n            <div class="no-hits" ng-if="(fields.length === 0) && (measures.length === 0) && (dimensions.length == 0)">\n                <span><i q-translation="Toolbox.Search.Nohits" /></span>\n            </div>\n        </div>\n\n    </object-add-typeahead>\n</lui-popover>'},function(t,e){t.exports='<lui-popover class="cao-popover cao-analysis-info-popover">\n    <lui-popover-body>\n        <div class="popover-body cao-analysis-info-popover-body">\n            <div class="analysis-header">\n                {{analysisTitle}}\n            </div>\n            {{analysisDescription}}\n        </div>\n    </lui-popover-body>\n</lui-popover>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(196)],s=function(t,e,n){t.directive("qvCaoFieldDropZone",function(){return{restrict:"A",replace:true,scope:{},link:function t(i,s){function o(t,e){return e===t}s.droppable({accept:function t(e){var n=e[0].getAttribute("data-slot");var i=e[0].getAttribute("data-slot-role");var r=s[0].getAttribute("data-slot");var a=s[0].getAttribute("data-slot-role");if(n===r)return false;if(o(a,i)&&o(i,a))return true;return false},drop:function t(i,o){var r=o.draggable[0].getAttribute("data-slot");var a=s[0].getAttribute("data-slot");e.publish(n.PUBSUB_TOPIC,{slotA:r,slotB:a})}})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvCaoFieldDraggable",function(){return{restrict:"A",replace:true,link:function t(e,n){n.draggable({revert:"invalid",axis:"y",handle:".cao-edit-sortable-handle",helper:"clone",revertDuration:250,zIndex:1e3})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(928),n(929),n(373)],s=function(t,e,n){t.nativeComponent("qvCaoFieldDetails",{bindings:{match:"<",chart:"<",applyCallback:"<",fieldId:"@"},controller:["qvCaoLearningConfidenceService","luiPopover",function(t,e){var i;var s;this.$onInit=function(){this.showExpression=!this.match.libId;this.searchReport=this.chart.getSearchReport();this.matchDetails=this.chart.getMatchDetails()};this.getDisplayExpressionForMatch=function(t){return t.libId?t.libIdLabel:t.aggr?t.aggr+"("+t.field+")":t.field};this.showFieldInfo=function(o){if(i&&s){s.close();return}var r={reasons:t.getReasonForSelectingField(this.match,this.searchReport,this.matchDetails,true)};var a={template:n,input:r,controller:[function(){}],dock:"bottom",alignTo:o.currentTarget,closeOnResize:true,outsideIgnore:this.fieldId+"_why"};i=true;s=e.show(a);s.closed.then(function(){i=false})}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="cao-field-details-recommended" ng-hide="$ctrl.match.isDirty">\n    <span q-translation="cao.insight.editor.details.recommendation.why"/>\n    <a tid="{{$ctrl.fieldId}}_why" id="{{$ctrl.fieldId}}_why" ng-click="$ctrl.showFieldInfo($event)" qva-outside-ignore-for="{{$ctrl.fieldId}}_why">\n        <span class="lui-icon lui-icon--help"/>\n    </a>\n</div>\n<div class="cao-field-details-learn">\n    <cao-help-learn data-match="$ctrl.match" data-apply-callback="$ctrl.applyCallback" button-id="{{$ctrl.fieldId}}" chart="$ctrl.chart"></cao-help-learn>\n</div>\n'},function(t,e){t.exports='<lui-popover x-arrow="arrow">\n        <div class="cao-confidence-body">\n            <div class="cao-confidence-body-heading" q-translation="cao.confidence.heading"></div>\n            <ul class="cao-confidence-reason-list">\n                <li class="cao-confidence-reason-item" ng-repeat="reason in input.reasons.learned">\n                    <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true" ng-hide="reason.priority === 0"></span>\n                    <div class="cao-confidence-reason-item__text" ng-bind-html="reason.text"></div>\n                </li>\n                <li class="cao-confidence-reason-item" ng-repeat="reason in input.reasons.search">\n                        <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true" ng-hide="reason.priority === 0"></span>\n                        <div class="cao-confidence-reason-item__text" ng-bind-html="reason.text"></div>\n                    </li>\n            </ul>\n        </div>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(103),n(196),n(931),n(168)],s=function(t,e,n,i,s,o){t.nativeComponent("caoHelpLearn",{bindings:{applyCallback:"<",match:"<",chart:"<",buttonId:"@"},controller:["$element","luiPopover",function(t,r){var a=this;var l;var c=false;var u=false;a.learningOptions=[];var d=new o;var p=void 0;var h=void 0;var f=void 0;a.$onChange=function(){p=void 0;h=void 0;f=void 0};a.$doCheck=function(){if(a.match.field!==p||a.match.libId!==h||a.match.aggr!==f){p=a.match.field;h=a.match.libId;f=a.match.aggr;if(!u){this.searchReport=this.chart.getSearchReport();this.chartType=this.chart.getChartType();u=true}d.getDislikedItems().then(function(t){t&&t.length>0&&(a.dislikedFields=t[0].nodes);a.updateLearningOptions()})}};var g=function t(e){if(a.dislikedFields&&a.dislikedFields.length>0)return a.dislikedFields.filter(function(t){return t.field?t.field.name===e:t.libItem.libId===e})[0]};a.updateLearningOptions=function(){a.learningOptions=[];if(!a.match)return;var t=g(a.match.field||a.match.libId);if(t){a.learningOptions.push({text:e.get("cao.helpuslearn.useagain"),icon:"plus",action:function e(){d.undislikeItem(t.id).then(function(){l.close();a.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED)}});return}a.match.libId||a.match.isDirty||(a.match.slotRole===i.MEASURE?a.learningOptions.push({text:e.get("cao.helpuslearn.not_a_measure"),icon:"unapprove",action:function t(){d.defineDimension({expr:"["+a.match.field+"]"}).then(function(){l.close();a.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_NOT_A_MEASURE_CLICKED)}}):a.match.slotRole===i.DIMENSION&&a.learningOptions.push({text:e.get("cao.helpuslearn.not_a_dimension"),icon:"unapprove",action:function t(){d.defineMeasure({expr:"unknown(["+a.match.field+"])"}).then(function(){l.close();a.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_NOT_A_DIMENSION_CLICKED)}}));a.learningOptions.push({text:e.get("cao.helpuslearn.neveruse"),icon:"minus",action:function t(){if(a.match.field){n.trackEvent(n.customEvents.INSIGHTS_NEVER_PROPOSE_FIELD_CLICKED);d.dislikeField({name:a.match.field}).then(function(){l.close();a.applyCallback()})}else if(a.match.libId){n.trackEvent(n.customEvents.INSIGHTS_NEVER_PROPOSE_LIB_CLICKED);d.dislikeLibItem({name:a.match.libId}).then(function(){l.close();a.applyCallback()})}}});a.isDisabled=0===a.learningOptions.length||a.chart.invalidFromLearning};this.displayHelpUsLearn=function(){if(c&&l){l.close();return}var e={template:s,input:a,controller:[function(){}],dock:"bottom",alignTo:t[0],closeOnResize:true,outsideIgnore:a.buttonId};c=true;l=r.show(e);n.trackEvent(n.customEvents.INSIGHTS_HELP_US_LEARN_CLICKED,{chart:a.chart.getAnalysisPrecedentId()});l.closed.then(function(){document.getElementById(a.buttonId).focus();c=false})}}],template:['<button class="lui-button" ng-click="$ctrl.displayHelpUsLearn()" ng-disabled="$ctrl.isDisabled"  tid="{{$ctrl.buttonId}}" id="{{$ctrl.buttonId}}" qva-outside-ignore-for="{{$ctrl.buttonId}}">','<span class="lui-button__icon  lui-icon  lui-icon--lightbulb" ></span><span class="lui-button__text" q-translation="cao.fieldPicker.helpuslearn.button"></span>',"</button>"].join("")})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover x-arrow="arrow">\n    <div class="cao-help-learn-body">\n        <qv-action-list items="input.learningOptions"></qv-action-list>\n    </div>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(933),n(167)],s=function(t,e,n){t.nativeComponent("qvActionList",{bindings:{items:"<"},controller:["$element","$timeout",function(t,e){var i=this;i.selectedIndex=-1;var s;this.$postLink=function(){s=t.find(".lui-list");s.on("keydown",r)};this.$onDestroy=function(){s.off("keydown",r)};this.selectItem=function(t){t.action()};function o(t){e(function(){i.selectedIndex=t})}function r(t){if(t.keyCode===n.ARROW_DOWN){t.preventDefault();i.selectedIndex<i.items.length-1?o(i.selectedIndex+1):o(0)}else if(t.keyCode===n.ARROW_UP){t.preventDefault();0===i.selectedIndex?o(i.items.length-1):o(i.selectedIndex-1)}else if(t.keyCode===n.ENTER||t.keyCode===n.TAB){t.preventDefault();e(function(){i.selectItem(i.items[i.selectedIndex])},0)}}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='\n    <ul class="lui-list" qva-focus="true" tabindex="0">\n        <li ng-repeat="item in $ctrl.items" class="lui-list__item lui-list__action" ng-class="{ \'lui-disabled\': item.disabled, \'lui-active\': $index === $ctrl.selectedIndex }"\n            ng-click="item.disabled || $ctrl.selectItem(item)">\n            <span class="lui-list__aside  lui-icon lui-icon--{{item.icon}}" ng-if="item.icon"></span>\n            <span class="lui-list__text" tid="{{item.tid}}" q-translation="{{item.text}}"></span>\n        </li>\n    </ul>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(103),n(935),n(373)],s=function(t,e,n,i){t.nativeComponent("caoConfidence",{bindings:{buttonId:"@",chart:"<",hideText:"<",closeNotification:"&",opened:"&",closed:"&"},controller:["luiPopover","qvCaoLearningConfidenceService",function(t,s){var o=this;var r;var a=false;o.$onInit=function(){l();o.closeNotification({handler:function t(){if(r){r.close();a=false}}})};o.$doCheck=function(){if(o.chart.recalculateConfidence){o.chart.recalculateConfidence=false;l()}};function l(){o.confidenceReasons={learned:[],search:[]};o.confidence=s.determineConfidence(o.chart);o.confidenceTitle=e.get("cao.confidence.title_"+o.confidence);if("empty"===o.confidence)o.emptyConfidence=true;else{var t=o.chart.getMatchDetails();o.chart.getMatches().forEach(function(e){var n=s.getReasonForSelectingField(e,o.chart.getSearchReport(),t,false);o.confidenceReasons.learned=o.confidenceReasons.learned.concat(n.learned);o.confidenceReasons.search=o.confidenceReasons.search.concat(n.search)})}}o.displayConfidenceInfo=function(){var e=this;if(e.emptyConfidence)return;if(a&&r){r.close();return}var s={template:i,input:this,controller:[function(){}],dock:"bottom",alignTo:document.getElementById(e.buttonId),closeOnResize:true,outsideIgnore:this.buttonId};a=true;r=t.show(s);r.opened.then(function(){if(e.opened){n.trackEvent(n.customEvents.INSIGHTS_CONFIDENCE_INDICATOR_CLICKED,{chart:e.chart.getAnalysisPrecedentId()});e.opened()}});r.closed.then(function(){e.closed&&e.closed();a=false})}}],template:['<span class="cao-confidence-container" q-title-translation="cao.confidence.title" aria-label="{{$ctrl.confidenceTitle}}"  >','<span class="cao-confidence-{{$ctrl.confidence}}-icon" ng-class="{\'no-reasons\': $ctrl.emptyConfidence}" ng-click="$ctrl.displayConfidenceInfo()" tid="{{$ctrl.buttonId}}" id="{{$ctrl.buttonId}}" qva-outside-ignore-for="{{$ctrl.buttonId}}"></span>',"</span>"].join("")})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover x-arrow="arrow">\n    <div class="cao-confidence-body">\n        \x3c!-- <div class="cao-confidence-body-heading" q-translation="cao.confidence.heading"></div> --\x3e\n        <div class="cao-confidence-empty" ng-show="input.emptyConfidence" q-translation="cao.confidence.emptyconfidence"></div>\n\n        <div class="cao-confidence-body-heading-small" q-translation="cao.confidence.learnedbycognitive.title" ng-show="input.confidenceReasons.learned.length > 0"></div>\n        <ul class="cao-confidence-reason-list" ng-hide="input.emptyConfidence">\n            <li class="cao-confidence-reason-item" ng-repeat="reason in input.confidenceReasons.learned">\n                <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true"></span>\n                <div class="cao-confidence-reason-item__text" ng-bind-html="reason.field"></div>\n            </li>\n        </ul>\n\n        <div class="cao-confidence-body-heading-small" q-translation="cao.confidence.relevanttoserach.title" ng-show="input.confidenceReasons.search.length > 0"></div>\n        <ul class="cao-confidence-reason-list" ng-hide="input.emptyConfidence">\n            <li class="cao-confidence-reason-item" ng-repeat="reason in input.confidenceReasons.search">\n                <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true"></span>\n                <div class="cao-confidence-reason-item__text" ng-bind-html="reason.field"></div>\n            </li>\n        </ul>\n\n    </div>\n</lui-popover>'},function(t,e){t.exports='<div class="cao-refresh-indicator-container">\n    <div class="cao-refresh-indicator-content">\n        <div q-translation="cao.insight.refresh.indicator.body" />\n        <div class="cao-refresh-action">\n            <a class="cao-refresh" ng-click="$ctrl.refresh()" q-translation="cao.insight.refresh.indicator.action" />\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(10),n(11),n(48),n(54),n(938),n(49),n(111)],s=function(t,e,n,i,s,o){var r={transclude:true,template:s,bindings:{chart:"=",app:"<",interactive:"<",scrollContainer:"<",getChartMenuItems:"&",setBlurHandler:"&",onChartLoaded:"&",contextMenuStatus:"=",index:"<"},controller:["$element","$document","$window","$timeout","$scope","qvCaoRenderService",function(s,r,a,l,c,u){var d=this;d.isLoadingCardImageFlag=o.getFlag("LOADING_CARD_IMAGES");d.caoTweakEnabled=o.getFlag("CAO_TWEAK");function p(){return d.interactive?-99:d.chart.getComplexity()?d.chart.getComplexity():d.index}this.$onInit=function(){this.hasBlurHandler=false;this.isDestroyed=false;this.scrollHander=i.debounce(this.renderChartIfInView,300);this.initializeState()};this.$doCheck=function(){if((this.interactive||this.caoTweakEnabled)&&this.chart.shouldRedraw){delete this.chart.shouldRedraw;d.chart.refreshChartType();d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,p(d.chart.chart.visualization))}if(!this.hasBlurHandler&&this.chart.getObject().setOnBlurHandler){this.setBlurHandler();this.hasBlurHandler=true}};this.$postLink=function(){l(function(){if("READY"===d.chart.getState()&&d.isInView()&&!d.isDestroyed){d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,p(d.chart.chart.visualization))}})};this.$onDestroy=function(){this.isDestroyed=true;u.dequeueRender(d.loadChart);t.element(this.scrollContainer).unbind("scroll",d.scrollHander);t.element(a).unbind("resize",d.renderChartIfInView);this.chart.destroyChart()};this.renderChartIfInView=function(){if(!d.isDestroyed&&d.isInView()&&"READY"===d.chart.getState()){d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,p(d.chart.chart.visualization))}};this.isInView=function(){var t=s[0].getBoundingClientRect();var e=!a.innerHeight||r[0].documentElement.clientHeight;var n=t.top<=e;return n};this.loadManually=function(t){t.stopPropagation();d.chart.setState("LOADING");d.chart.allowLongLoad=true;u.enqueueForRender(d.loadChart,p(d.chart.chart.visualization))};this.loadChart=function(){return d.chart.loadChart(d.onChartLoaded)};this.openContextMenu=function(t,i,s,o){if(!this.contextMenuStatus.open&&this.chart.rendered){var r=n.getService("qvContextMenu").menu();r.onOpen=function(){e(".qv-contextmenu lui-popover").css("max-height",400)};d.getChartMenuItems({menu:r});var a=n.getService("qvContextMenu");a.showInline(r,{position:{x:i.pageX,y:i.pageY},onCloseFn:s},o||i.currentTarget)}};c.$on("cao.openContextMenu",function(t,e){d.openContextMenu(null,e.event,e.closeFn,e.element)});this.initializeState=function(){if(this.scrollContainer){t.element(this.scrollContainer).bind("scroll",this.scrollHander);t.element(a).bind("resize",d.renderChartIfInView)}}}]};n.nativeComponent("qvCaoInsightChart",r)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="result-item-graph-container" ng-if="!$ctrl.interactive" qva-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)"\n    qva-radial-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)">\n    <qv-object ng-if="$ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.options"\n        object="$ctrl.chart.object" />\n</div>\n\n<div class="result-item-graph-container" ng-if="$ctrl.interactive" qva-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)"\n    qva-radial-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)">\n    <qv-object ng-if="$ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.zoomedOptions"\n        object="$ctrl.chart.zoomedObject" />\n</div>\n\n<div class="spinner-container" ng-if="($ctrl.chart.getState() === \'LOADING\' && !$ctrl.isLoadingCardImageFlag)">\n    <qv-spinner show="!$ctrl.chartLoaded && !$ctrl.isLoadingCardImageFlag" show-delay="100" center-in-parent="true"></qv-spinner>\n</div>\n<div class="image-container" ng-if="$ctrl.chart.getState() === \'LOADING\' && $ctrl.isLoadingCardImageFlag">\n    <img ng-src="{{$ctrl.chart.chartTypeImageUrl}}" class="loader-image" />\n</div>\n\n<div class="cao-manual-loader" ng-click="$event.stopPropagation()" ng-if="$ctrl.chart.getState() === \'MANUAL_LOAD\'">\n    <ul>\n        <li class="cao-loader-text" q-translation="cao.card.complex">\n        </li>\n        <li>\n            <lui-button ng-click="$ctrl.loadManually($event)" q-translation="cao.card.complex.load"></lui-button>\n        </li>\n    </ul>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(95),n(940),n(105),n(49),n(159),n(91),n(372),n(93),n(103),n(275),n(212)],s=function(t,e,n,i,s,o,r,a,l,c,u){var d={template:i,bindings:{query:"<",disabled:"<",matchingFields:"<",matchingFieldIndex:"<",fieldToRemove:"<",fieldToAdd:"<",updateFieldPicker:"<",isLimited:"<",direction:"<",nluQueryInfoButtonVisible:"<",nluQueryInfoVisible:"<",toggleNluQueryInfo:"<"},controller:["$timeout","qvCaoSearchService","qvCaoService",function(e,i,d){var p=this;this.selectedSuggestion=null;this.nluEnabled=o.getFlag("NLU_INSIGHTS");this.nluQueries=[];this.NLU_QUERIES_LIMIT=10;this.waitingForAppId=false;this.$onInit=function(){this.initializeState()};this.searchInputPlaceHolder=this.nluEnabled?a.get("cao.search.input.nlu.placeHolder")+r.lrm:a.get("cao.search.input.placeHolder")+r.lrm;this.clearSerchButtonIconScreenReader=a.get("clear.serch.button.icon.screen.reader");this.caoSearchInputSearchScreenReader=a.get("cao.search.input.search.reader");this.caoSearchInputScreenReader=a.get("cao.search.input.screen.reader");this.$onChanges=function(t){this.syncFieldPicker=o.getFlag("CAO_FIELD_PICKER_SYNC");this.syncFieldPicker?t.fieldToAdd&&t.fieldToAdd.currentValue?this.toggleFieldPickerField(this.fieldToAdd):t.fieldToRemove&&t.fieldToRemove.currentValue&&this.toggleFieldPickerField(this.fieldToRemove):t.fieldToAdd&&t.fieldToAdd.currentValue&&this.fieldToAdd&&this.addFieldToQuery(this.fieldToAdd,true)};this.$onDestroy=function(){t("#qv-cao-search-container").off("click",p.caoSearchContainerOnclickHandler);t("#cao-search-input").off("click",p.caoSearchInputOnClickHandler);t(window).off("resize",p.searchSuggestionBoxOnResizeHandler);n.unsubscribe("cao/insights/clear");p.nluEnabled&&n.unsubscribe("cao/nlu/new_queries")};this.caoSearchContainerOnclickHandler=function(t){t.stopPropagation()};this.caoSearchInputOnClickHandler=function(t){t.stopPropagation();p.updateCursorPositionState(t)};this.searchSuggestionBoxOnResizeHandler=function(){p.isMatchingFieldPopupVisible&&e(function(){p.updateMatchingFields();p.showMatchingFieldPopup()},300)};this.toggleCao=function(){d.toggleCao()};this.initializeState=function(){this.queryTokens=[];this.cursorPosition=0;t("#qv-cao-search-container").click(p.caoSearchContainerOnclickHandler);t("#cao-search-input").click(p.caoSearchInputOnClickHandler);t(window).on("resize",p.searchSuggestionBoxOnResizeHandler);if(this.nluEnabled){n.subscribe("cao/nlu/new_queries",p.newNluQuery);c.getApp().then(function(t){p.appId=t.id;p.getNluQueries().then(function(){p.waitingForAppId&&e(function(){p.showSearchHistoryPopup()})})})}};this.handleSearchInputBlur=function(){p.matchingField=null;p.hideMatchingFields();p.hideSearchHistoryPopup()};this.updateCursorPositionState=function(t){p.updateCurrentCursorPositionState(t);if(p.query){var n=i.getCurrentToken(p.query,p.cursorPosition).token;p.cursorPosition<p.query.length+1&&n&&n.word?p.showFields(t):p.hideMatchingFields()}else p.nluEnabled&&(p.nluQueries.length||p.appId?p.nluQueries.length&&e(function(){p.positionSearchResultPopup();p.showSearchHistoryPopup()}):p.waitingForAppId=true)};this.showMatchingFieldPopup=function(){this.isMatchingFieldPopupVisible||(this.isMatchingFieldPopupVisible=true)};this.showSearchHistoryPopup=function(){this.isSearchHistoryPopupVisible||(this.isSearchHistoryPopupVisible=true)};this.hideSearchHistoryPopup=function(){this.isSearchHistoryPopupVisible=false};this.setMatchingFieldIndex=function(t){this.matchingFieldIndex=t};this.toggleFieldPickerField=function(t){if(t&&t.selected){this.removeFieldFromQuery(t);this.syncFieldPicker&&i.selectField(t,false)}else if(t&&!t.selected){this.addFieldToQuery(t);this.fieldToAdd=this.syncFieldPicker?this.fieldToAdd:"";this.syncFieldPicker&&i.selectField(t,true)}this.query&&0!==this.query.trim().length?this.updateInsights(this.query):this.clearQuery()};this.updateInsights=function(t){if(t){i.updateInsights(t.trim());this.trimSpacesOnQuery();this.hideMatchingFields();u.trackEvent(u.customEvents.INSIGHTS_TYPED_QUERY,{query:t})}};this.defaultCursorPosition=function(){return this.query?this.query.length+1:0};this.trimSpacesOnQuery=function(){this.query=this.query.trim();this.query+=" "};this.addFieldToQuery=function(e,n,s){s&&s.preventDefault();var o=t("#cao-search-input")[0];var r=this.cursorPosition?this.cursorPosition:this.defaultCursorPosition();var a=i.addFieldToQuery(e,this.query,r,o.selectionStart,o.selectionEnd);this.cursorPosition=a.cursorPosition;this.query=a.query;this.updateMatchingFields();this.positionCursorAtIndex(this.cursorPosition);this.syncFieldsInQueryWithFieldPicker();this.trimSpacesOnQuery();n&&this.updateInsights(this.query)};this.usePreviousQuery=function(t){p.query=t};this.keydown=function(t,e){switch(t.which){case 38:case 40:e&&(this.selectedSuggestion=e.caoFieldId);break;default:this.selectedSuggestion=null}};this.removeFieldFromQuery=function(t){var e=i.getSelectedFields(this.query);var n=this.cursorPosition?this.cursorPosition:this.defaultCursorPosition();this.query=i.removeFieldFromQuery(t,this.query,e);this.positionCursorAtIndex(n);this.syncFieldsInQueryWithFieldPicker()};this.hideMatchingFields=function(){e(function(){p.isMatchingFieldPopupVisible=false;p.navigatingThroughMatchingFields=false;p.matchingFields=[]})};this.clearQuery=function(){p.query="";p.hideMatchingFields();i.clearSelectedFields();p.syncFieldsInQueryWithFieldPicker();i.showIntro(true)};this.showFields=function(t){t&&this.updateCurrentCursorPositionState(t);this.matchingFields=i.getFields();this.clearHighlightedFields();this.updateMatchingFields();this.showMatchingFieldPopup()};this.positionCursorAtIndex=function(n){this.query&&this.query.length>0&&e(function(){var e=document.getElementById("cao-search-input");var i=n;t("#cao-search-input").focus();e.setSelectionRange(i,i)})};this.updateCurrentCursorPositionState=function(t){this.cursorPosition=t.target.selectionStart};this.scrollFieldIntoView=function(t){if(t&&t.caoFieldId){var e=document.getElementById(t.caoFieldId);e&&e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}};this.updateMatchingFields=function(){e(function(){var t=p.cursorPosition?p.cursorPosition:0;var e=i.getCurrentToken(p.query,t);p.currentToken=e;p.setMatchingFieldIndex(-1);if(null!==e.index&&e.token.word){if(e.token){p.matchingFields=i.getMatchingFields(e.token.word,p.isLimited);p.highlightField(p.matchingFieldIndex)}}else p.hideMatchingFields();p.positionSearchResultPopup()})};this.getNluQueries=function(){return l.getQueries(p.NLU_QUERIES_LIMIT,p.appId).then(function(t){p.nluQueries=t})};this.newNluQuery=function(t){p.nluQueries.push(t)};this.positionSearchResultPopup=function(){var e;if(this.query&&this.query.length>0){var n=this.cursorPosition?this.cursorPosition:0;var s=t("#cao-search-input");var o=t("#qv-cao-search-input-container");if(s.position()&&s.position().left){e=s.position().left;p.nluEnabled&&o&&o.position()&&(e+=o.position().left);var r=i.getCurrentToken(this.query,n);r.token&&(n=r.token.indexStart);e+=i.searchResultPositionRelativeToQuery(this.query,n)}}this.searchResultContainerLeft=e+"px"};this.highlightField=function(t){this.clearHighlightedFields();this.matchingFields.length>0&&t>=0&&(this.matchingFields[t].highlight=true)};this.clearHighlightedFields=function(){this.matchingFields=this.matchingFields.map(function(t){t.highlight=false;return t})};this.syncFieldsInQueryWithFieldPicker=function(){if(this.syncFieldPicker){i.syncFieldsInQueryWithFieldPicker(this.query);this.updateFieldPicker()}};this.getMatchingFields=function(t){this.triggerKeyboardBehaviours(t);if(this.query&&this.query.length>0){p.hideSearchHistoryPopup();var e=this.query.replace(/\s{2,}/g," ");var n="keyup"===t.type&&t.which===s.KeyCodes.Enter&&!this.navigatingThroughMatchingFields;if(!this.navigatingThroughMatchingFields){this.updateMatchingFields();t.which!==s.KeyCodes.Enter&&this.showMatchingFieldPopup()}t.which!==s.KeyCodes.Enter&&t.which!==s.KeyCodes.Tab||(this.isMatchingFieldPopupVisible=false);n&&this.updateInsights(e)}};this.navigateMatchingFields=function(t){this.triggerKeyboardBehaviours(t);this.navigatingThroughMatchingFields=t&&t.which===s.KeyCodes.Down||t.which===s.KeyCodes.Up;var e=t&&"keydown"===t.type&&t.keyCode;var n=e&&this.matchingFields&&this.matchingFields.length>0;if(n){this.matchingField=i.matchingField(t.keyCode,this.matchingFieldIndex,this.matchingFields);this.setMatchingFieldIndex(this.matchingFields.indexOf(this.matchingField));this.scrollFieldIntoView(this.matchingField);if(this.matchingFieldIndex>=0){var o=e&&t.keyCode===s.KeyCodes.Tab&&this.matchingField;var r=e&&t.keyCode===s.KeyCodes.Enter&&this.matchingField;if(o){this.addFieldToQuery(this.matchingField);this.hideMatchingFields()}if(r){this.addFieldToQuery(this.matchingField);this.updateInsights(this.query)}this.navigatingThroughMatchingFields&&this.highlightField(this.matchingFieldIndex)}switch(t.which){case 38:case 40:this.matchingField&&(this.selectedSuggestion=this.matchingField.caoFieldId);break}}t&&t.which===s.KeyCodes.Enter&&!this.query&&this.clearQuery()};n.subscribe("cao/insights/clear",p.clearQuery);this.triggerKeyboardBehaviours=function(t){this.updateCurrentCursorPositionState(t);this.syncFieldsInQueryWithFieldPicker();t.which!==s.KeyCodes.Down&&t.which!==s.KeyCodes.Up&&t.which!==s.KeyCodes.Enter||t.preventDefault();e(function(){t.which===s.KeyCodes.Delete&&p.updateMatchingFields();if(t.which===s.KeyCodes.Esc){p.matchingField=null;p.hideMatchingFields()}})}}]};e.nativeComponent("qvCaoSearch",d)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div id="qv-cao-search-container" class="qv-cao-search-container">\n\t<div class="qv-cao-search-input" ng-class="{\'focus\': $ctrl.isInputFocused, \'qv-cao-search-input--nlu\': $ctrl.nluEnabled}" id="qv-cao-search-input-container">\n\t\t<div class="search-cao-field-area">\n\t\t\t<div class="lui-search search-field" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t<span class="lui-search__search-icon"></span>\n\t\t\t\t<input class="lui-search__input"\n\t\t\t\t\t   ng-model="$ctrl.query"\n\t\t\t\t\t   auto-focus="autoFocus"\n\t\t\t\t\t   aria-autocomplete="list"\n\t\t\t\t\t   autocomplete="off"\n\t\t\t\t\t   ng-disabled="$ctrl.disabled"\n\t\t\t\t\t   type="text"\n\t\t\t\t\t   is-focused="isInputFocused"\n\t\t\t\t\t   placeholder="{{$ctrl.searchInputPlaceHolder}}"\n\t\t\t\t\t   ng-keydown="$ctrl.navigateMatchingFields($event)"\n\t\t\t\t\t   ng-keyup="$ctrl.getMatchingFields($event)"\n\t\t\t\t\t   tid="caoSearch.searchField"\n\t\t\t\t\t   tabindex="0"\n             role="combobox"\n\t\t\t\t\t   aria-label="{{$ctrl.caoSearchInputSearchScreenReader}}"\n\t\t\t\t\t   aria-activedescendant="{{$ctrl.selectedSuggestion}}"\n\t\t\t\t\t   aria-owns="cao_search_suggestions cao_search_history"\n\t\t\t\t\t   id="cao-search-input"\n\t\t\t\t\t   ng-blur="$ctrl.handleSearchInputBlur()"\n        />\n\t\t\t\t<button aria-label="{{$ctrl.clearSerchButtonIconScreenReader}}" class="lui-icon  lui-icon--remove" tid="cao-search-clear-btn" ng-if="$ctrl.query" q-title-translation="cao.search.clear.tooltip" ng-click="$ctrl.clearQuery()"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<button class="qv-cao-search-info-button" ng-class="{ \'qv-cao-search-info-button--active\': $ctrl.nluQueryInfoVisible }" ng-if="$ctrl.nluEnabled && $ctrl.nluQueryInfoButtonVisible" ng-click="$ctrl.toggleNluQueryInfo()">\n\t\t\t<i class="lui-icon lui-icon--info"></i>\n\t\t</button>\n\t</div>\n\t<div id="cao_search_suggestions" class="qv-cao-search-suggestions" ng-if="$ctrl.isMatchingFieldPopupVisible"\n\t\t ng-style="{ \'left\': $ctrl.searchResultContainerLeft }">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item fields"\n\t\t\t\ttid="caoSearchSuggestionField"\n\t\t\t\tng-class="{\'highlight\': field.highlight}"\n\t\t\t\tng-repeat="field in $ctrl.matchingFields"\n\t\t\t\tng-mousedown="$ctrl.addFieldToQuery(field, true, $event)"\n\t\t\t\tid="{{field.caoFieldId}}"\n\t\t\t\taria-labelledby="{{field.caoFieldId+\'Name\' + \' \' + field.caoFieldId+\'Origin\'}}"\n\t\t\t\t>\n\t\t\t\t<span aria-hidden="true" class="lui-list__text" q-title-translation={{field.qName}} tid="caoSearchSuggestionFieldName" >\n\t\t\t\t\t<span aria-hidden="true" qve-highlight text="{{ field.qName }}" query="$ctrl.currentToken.token.word" ></span>\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden="true" ng-if="!field.masterItem" class="lui-list__aside field-name" q-title-translation={{field.tablesTooltip}}>{{field.tablesAssociated}}</span></span>\n\t\t\t\t<span aria-hidden="true" ng-if="field.masterItem" class="lui-list__aside field-name">{{field.masterItemTitle}}</span></span>\n\t\t\t\t<p id="{{field.caoFieldId+\'Name\'}}" class="sr-only" >{{ field.qName }}</p>\n\t\t\t\t<p id="{{field.caoFieldId+\'Origin\'}}" class="sr-only" ng-if="!field.masterItem" class="lui-list__aside field-name" q-title-translation={{field.tablesTooltip}}>{{field.tablesAssociated}}</p>\n\t\t\t\t<p id="{{field.caoFieldId+\'Origin\'}}" class="sr-only" ng-if="field.masterItem" class="lui-list__aside field-name">{{field.masterItemTitle}}</p>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<div id="cao_search_history" class="qv-cao-search-history qv-cao-search-suggestions" ng-if="$ctrl.isSearchHistoryPopupVisible"\n\t\tng-style="{ \'left\': $ctrl.searchResultContainerLeft }">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item fields"\n\t\t\t\ttid="caoSearchHistoryField"\n\t\t\t\tng-repeat="query in $ctrl.nluQueries"\n\t\t\t\tng-mousedown="$ctrl.usePreviousQuery(query.text)"\n\t\t\t\tid="{{query.id}}"\n\t\t\t\taria-labelledby="{{query.id}}"\n\t\t\t\t>\n\t\t\t\t<span aria-hidden="true" class="lui-list__text" q-title-translation={{query.text}} tid="caoSearchHistoryFieldName">\n\t\t\t\t\t<span aria-hidden="true" qve-highlight text="{{ query.text }}"></span>\n\t\t\t\t</span>\n\t\t\t\t<p id="{{query.id}}" class="sr-only" >{{ query.text }}</p>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(103),n(95),n(942),n(168),n(49),n(943),n(944)],s=function(t,e,n,i,s,o,r){var a={template:s,bindings:{isLimited:"<",insightsLoaded:"<",items:"<",activeTab:"<",selectField:"<",showFieldPicker:"<",toggleFieldPicker:"&"},controller:["qvCaoService",function(t){var s=this;var a=new o;this.activeTab=null;this.fieldPickerTabDimensions=e.get("cao.fieldPicker.tab.dimensions");this.fieldPickerTabMeasures=e.get("cao.fieldPicker.tab.measures");this.fieldPickerTabFields=e.get("cao.fieldPicker.fields.title");this.fieldPickerTabFieldsScreenReader=e.get("cao.fieldPicker.fields.title");this.fieldPickerTabMasterItemsScreenReader=e.get("cao.fieldPicker.masterItems.title");this.insightLearning=r.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=r.getFlag("CAO_TWEAK");this.useAgainString=e.get("cao.helpuslearn.useagain");this.dislikedFields=[];this.$onInit=function(){this.init()};this.$onDestroy=function(){i.unsubscribe("cao/insight/learning_applied")};this.$onChanges=function(t){if(t.items&&t.items.currentValue){this.items=t.items.currentValue;this.masterItemDimensions=[];this.masterItemMeasures=[];this.fields=[];this.items.forEach(function(t){t.masterItemDimension?s.masterItemDimensions.push(t):t.masterItemMeasures?s.masterItemMeasures.push(t):s.fields.push(t)})}t.isLimited&&t.isLimited.currentValue&&t.isLimited!==t.isLimited.currentValue?this.init():t.isLimited&&false===t.isLimited.currentValue&&this.init();l()};var l=function t(){if(s.insightLearning){if(s.items&&0!==s.items.length)return a.getDislikedItems().then(function(t){t&&t.length>0&&(s.dislikedFields=t[0].nodes)});s.dislikedFields=[]}else s.dislikedFields=[]};this.isDislikedField=function(t){return s.dislikedFields.filter(function(e){return e.field&&e.field.name===t.qName})[0]};this.isDislikedMasterItem=function(t){return s.dislikedFields.filter(function(e){return e.libItem&&e.libItem.libId===t.libId})[0]};this.useFieldAgain=function(e){n.trackEvent(n.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED);a.undislikeItem(e.id).then(function(){t.setRefreshIndicatorVisibility(true);i.publish("cao/insight/learning_applied")})};this.init=function(){true===this.isLimited?this.setActiveTab("masterItems"):false===this.isLimited&&this.setActiveTab("fields");i.subscribe("cao/insight/learning_applied",l)};this.setActiveTab=function(t){if("fields"===t)if("fields"!==this.activeTab){this.activeTab="fields";this.title=e.get("cao.fieldPicker.fields.title");this.showFieldPicker||this.toggleFieldPicker()}else this.toggleFieldPicker();else if("masterItems"===t)if("masterItems"!==this.activeTab){this.activeTab="masterItems";this.title=e.get("cao.fieldPicker.masterItems.title");this.setMasterItemsSection("measures");this.showFieldPicker||this.toggleFieldPicker()}else this.toggleFieldPicker()};this.setMasterItemsSection=function(t){"measures"===t?this.activeMasterItemSection="measures":"dimensions"===t&&"dimensions"===this.activeMasterItemSection?this.activeMasterItemSection="measures":"dimensions"===t&&"dimensions"!==this.activeMasterItemSection&&(this.activeMasterItemSection="dimensions")}}]};t.nativeComponent("qvCaoFieldPicker",a)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="field-picker">\n\t<div class="tabs">\n\t\t<div qva-cao-acc-field-items x-items-type="fieldPickerCategories">\n\t\t\t<div tid="caoFieldPickerFieldTabButton" class="tab" cao-acc-field-item="{\'type\': \'fieldPickerCategories\', \'index\': 0}"\n\t\t\t ng-class="{\'hide-tab\': $ctrl.activeTab === null, \'selected\': $ctrl.activeTab === \'fields\', \'cao-acc-focus\': $ctrl.itemAccFocus}"\n\t\t\t ng-show="!$ctrl.isLimited" aria-label="{{$ctrl.fieldPickerTabFieldsScreenReader}}" ng-click="$ctrl.setActiveTab(\'fields\')"\n\t\t\t q-title-translation="cao.fieldPicker.fields.title">\n\t\t\t\t<span class="lui-icon  lui-icon--database"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div qva-cao-acc-field-items x-items-type="fieldPickerCategories">\n\t\t\t<div tid="caoFieldPickerMasterItemsTabButton" class="tab" cao-acc-field-item="{\'type\': \'fieldPickerCategories\', \'index\': 1}"\n\t\t\t ng-class="{\'hide-tab\': $ctrl.activeTab === null, \'selected\': $ctrl.activeTab === \'masterItems\', \'cao-acc-focus\': $ctrl.itemAccFocus}"\n\t\t\t ng-click="$ctrl.setActiveTab(\'masterItems\')" aria-label="{{$ctrl.fieldPickerTabMasterItemsScreenReader}}"\n\t\t\t q-title-translation="cao.fieldPicker.masterItems.title">\n\t\t\t\t<span class="lui-icon  lui-icon--link"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="tab-content" tid="caoFieldPickerContentContainer">\n\t\t<qv-spinner class="spinner" show="!$ctrl.items" show-delay="500" center-in-parent="true"></qv-spinner>\n\n\t\t<div ng-if="$ctrl.activeTab === \'fields\' && !$ctrl.isLimited && $ctrl.insightsLoaded" class="fields">\n\t\t\t<button class="field-item-header" ng-class="{\'selected\': true}" tabindex="0" tid="caoFieldPickerFieldSectionButton"\n\t\t\t\taria-labelledby="{{caoFieldPickerFieldText}}">\n\t\t\t\t   <span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerFieldText" class="group-name">\n\t\t\t\t\t   {{$ctrl.fieldPickerTabFields}}</span>\n\t\t\t  </button>\n\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && !$ctrl.fields.length" q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t<ul class="lui-list" ng-if="$ctrl.fields.length" qva-cao-acc-field-items x-items-type="fieldItem">\n\t\t\t\t<div ng-repeat="field in $ctrl.fields" class="field-container">\n\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerField" cao-acc-field-item="{\'type\': \'fieldItem\', \'index\': $index}"\n\t\t\t\t\t ng-click="$ctrl.selectField(field)" aria-label="{{field.qName}}" q-title-translation={{field.qName}} ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedField(field)}">\n\t\t\t\t\t\t<span class="lui-list__aside  lui-icon {{field.classificationIcon}}" ng-if="field.classificationIcon"></span>\n\t\t\t\t\t\t<span class="lui-list__text">{{field.qName}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedField(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedField(field))"\n\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div ng-if="$ctrl.activeTab === \'masterItems\' && $ctrl.insightsLoaded" class="master-items" tid="caoFieldPickerMasterItemsContainer">\n\t\t\t<div class="dimensions" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'dimensions\'}">\n\t\t\t\t<button class="master-item-header" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'dimensions\'}" ng-keyup="$ctrl.itemAccFocus=true"\n\t\t\t\t ng-mouseup="$ctrl.itemAccFocus=false" tabindex="0" aria-controls="cao-field-picker-dimensions-fields" tid="caoFieldPickerMasterItemsDimensionSectionButton"\n\t\t\t\t ng-click="$ctrl.setMasterItemsSection(\'dimensions\')" aria-labelledby="{{caoFieldPickerMasterItemDimensionText}}">\n\t\t\t\t\t<span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerMasterItemDimensionText" class="group-name">\n\t\t\t\t\t\t{{$ctrl.fieldPickerTabDimensions}}</span>\n\t\t\t\t</button>\n\t\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && !$ctrl.masterItemDimensions.length && $ctrl.activeMasterItemSection === \'dimensions\'"\n\t\t\t\t q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t\t<ul id="cao-field-picker-dimensions-fields" class="lui-list master-item-fields" qva-cao-acc-field-items\n\t\t\t\t x-items-type="masterItemDimension" aria-expanded="$ctrl.activeMasterItemSection === \'dimensions\'">\n\t\t\t\t\t<div ng-repeat="field in $ctrl.masterItemDimensions" class="field-container">\n\t\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerMasterItemDimension" cao-acc-field-item="{\'type\': \'masterItemDimension\', \'index\': $index}"\n\t\t\t\t\t\t aria-label="{{field.qName}}" ng-click="$ctrl.selectField(field)"\n\t\t\t\t\t\t q-title-translation={{field.qName}} ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedMasterItem(field) }">\n\t\t\t\t\t\t\t<span class="lui-list__text caoFieldPickerMasterItemDimensionText">{{field.qName}}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedMasterItem(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedMasterItem(field))"\n\t\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div class="measures">\n\t\t\t\t<button class="master-item-header measures" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'measures\'}"\n\t\t\t\t ng-keyup="$ctrl.itemAccFocus=true" ng-mouseup="$ctrl.itemAccFocus=false" tabindex="0" aria-controls="cao-field-picker-measures-fields"\n\t\t\t\t tid="caoFieldPickerMasterItemsMeasureSectionButton" ng-click="$ctrl.setMasterItemsSection(\'measures\')"\n\t\t\t\t aria-labelledby="{{caoFieldPickerMasterItemMeasuresText}}">\n\t\t\t\t\t<span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerMasterItemMeasuresText" class="group-name">{{$ctrl.fieldPickerTabMeasures}}</span>\n\t\t\t\t</button>\n\t\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && $ctrl.showFieldPicker && !$ctrl.masterItemMeasures.length && $ctrl.activeMasterItemSection === \'measures\'"\n\t\t\t\t q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t\t<ul id="cao-field-picker-measures-fields" class="lui-list master-item-fields" qva-cao-acc-field-items x-items-type="masterItemMeasure"\n\t\t\t\t aria-expanded="$ctrl.activeMasterItemSection === \'measures\'">\n\t\t\t\t\t<div ng-repeat="field in $ctrl.masterItemMeasures" class="field-container">\n\t\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerMasterItemMeasure" cao-acc-field-item="{\'type\': \'masterItemMeasure\', \'index\': $index}"\n\t\t\t\t\t\t ng-click="$ctrl.selectField(field)" q-title-translation={{field.qName}}\n\t\t\t\t\t\t aria-label="{{field.qName}}" ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedMasterItem(field) }">\n\t\t\t\t\t\t\t<span class="lui-list__text">{{field.qName}}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedMasterItem(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedMasterItem(field))"\n\t\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvaCaoAccFieldItems",["qvAccessibilityGridService",function(t){return{restrict:"A",link:function e(n,i,s){n.$on("$destroy",function(){var e=s["itemsType"];t.removeAllItems(e)})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("caoAccFieldItem",["$timeout","qvAccessibilityGridService",function(t,e){return{restrict:"A",scope:{caoAccFieldItem:"="},link:function n(i,s){var o=function e(n,i){var o=n===this.col&&i===this.row;t(function(){s.attr("tabindex",o?0:-1);if(o){s.focus();s.addClass("cao-acc-focus")}else s.removeClass("cao-acc-focus")})};var r=e.addItem(i.caoAccFieldItem.index,o,i.caoAccFieldItem.type,0,i.caoAccFieldItem.index);r&&s.attr("tabindex",0);var a=function t(e){switch(e.which){case 9:case 16:"0"===s.attr("tabindex")&&s.addClass("cao-acc-focus");break}};var l=function n(o){switch(o.which){case e.RIGHT_KEY:case e.LEFT_KEY:case e.UP_KEY:case e.DOWN_KEY:o.stopPropagation();o.preventDefault();t(function(){"0"===s.attr("tabindex")&&e.key(o,i.caoAccFieldItem.type)});break}};s.on("mouseup",function(){s.removeClass("cao-acc-focus")});s.on("keyup",a);s.on("keydown",l)}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.service("qvCaoRenderService",[function(){var t;var e=[];var n=false;function i(){e.sort(function(t,e){return t.priority>e.priority});var t=e[0];t.renderFunction().finally(function(){n=false;e.shift();e.length>0&&i()})}var s=function t(s,o){e.push({renderFunction:s,priority:o});if(!n){n=true;i()}};var o=function t(n){e=e.filter(function(t){return t.renderFunction!==n})};var r=function t(){e=[];n=false};t={enqueueForRender:s,dequeueRender:o,clearRenderQueue:r};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(103),n(168),n(221),n(212)],s=function(t,e,n){t.service("qvCaoLearningService",[function(){var t;var i=new n;function s(t){e.trackEvent(e.customEvents.INSIGHTS_NOT_A_MEASURE_CLICKED);return i.defineDimension({expr:"["+t+"]"})}function o(t){e.trackEvent(e.customEvents.INSIGHTS_NOT_A_DIMENSION_CLICKED);return i.defineMeasure({expr:"["+t+"]"})}function r(t){return i.dislikeLibItem({name:t})}function a(t){return i.dislikeField({name:t})}function l(t){var n=t.getAnalysis();return i.dislikeAnalysis(n).then(function(i){n.precedents={id:i.nodes[0].id,disliked:true};e.trackEvent(e.customEvents.INSIGHTS_HIDE_CHART_CLICKED,{chart:t.getAnalysisPrecedentId()})})}function c(t){var e=t.getAnalysis();return i.undislikeAnalysis(e).then(function(){delete e.precedents})}function u(t,e){return t.filter(function(t){return t.field?t.field.name===e:t.libItem.name===e})[0]}function d(t){return i.getDislikedItems().then(function(n){var s=n[0].nodes;e.trackEvent(e.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED);var o=u(s,t);return i.undislikeItem(o.id)})}function p(t){return i.dislikeAnalysis(t).then(function(e){t.precedents={id:e.nodes[0].id,disliked:true};return true})}function h(t){return i.undislikeAnalysis(t).then(function(){delete t.precedents;return false})}function f(){return i.getLearnedItems()}function g(){return i.getDislikedItems()}function v(t){return i.removeDefinedItem(t)}function m(t){return i.undislikeItem(t)}t={applyDimensionLearning:s,applyMeasureLearning:o,dislikeLibItem:r,dislikeField:a,hideChart:l,unHideChart:c,unDislikeItem:d,dislikeAnalysis:p,unDislikeAnalysis:h,getDislikedItems:g,getLearnedItems:f,removeDefinedItem:v,unDislikeField:m};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(91),n(113),n(948),n(949),n(950),n(952),n(954),n(956),n(961)],s=function(t,e,n,i,s,o){var r=["$scope","$timeout","qvCaoSelectionService","qvCaoLearningConfidenceService","qvCaoLearningService",function(s,r,a,l,c){var u=this;var d=null;u.hiddenCharts=[];u.fieldRules=[];u.initState=true;u.isCustomPreferences=true;s.customPreferencesToggleOn=i.CAO_DEBUG;s.customPreferencesToggle={value:true};s.$watch("customPreferencesToggle.value",function(t){u.isCustomPreferences=t;u.precedentsEnabled=t});function p(t){var e=[];var n=u.chart.getSearchReport();var i=u.chart.getMatchDetails();t&&t.forEach(function(t){var s=l.getReasonForSelectingField(t,n,i,true);e=e.concat(s.learned);e=e.concat(s.search)});return e}this.handleHiddenCharts=function(t){if(t){var e=t.getAnalysis();return e.precedents&&e.precedents.disliked?c.unDislikeAnalysis(e):c.dislikeAnalysis(e)}};this.noLearningFound=function(){return!u.isFieldRulesSet()};this.isFieldRulesSet=function(){return u.fieldRules&&u.fieldRules.length>0};this.isFieldRulesEnabled=function(){return u.isFieldRulesSet()&&u.isCustomPreferences};this.viewHiddenCharts=function(){e.publish("cao/insight/open_hidden_charts_panel",u.hiddenCharts)};this.refreshPerformed=function(){u.populateFieldRules()};function h(t){return t.replace(/\{0\}/g,function(t){return"<b>"+t+"</b>"})}function f(t){var e=t.nodes;var i=[];e&&e.length>0&&e.forEach(function(t){var e;e=t&&t.libItem&&t.libItem.name?t.libItem.name:t.field.name;var s=h(n.get("cao.insight.contextPanel.customPreferences.dislikedField"));i.push({label:n.get(s,[e]),field:t,valid:true})});return i}function g(t){var e=t.nodes;var i=[];e&&e.length>0&&e.forEach(function(t){var e=h(n.get("cao.insight.contextPanel.customPreferences.definedItems"));i.push({label:n.get(e,[t[t.type].field,t.type]),field:t,valid:true})});return i}var v=5e3;this.updateListTimer=function(){r.cancel(u.cancelStartTimer);this.cancelStartTimer=r(function(){u.populateFieldRules()},v)};this.populateFieldRules=function(){c.getLearnedItems().then(function(t){var e=[];function n(t){return"define"===t.relation}function i(t){return"dislike"===t.relation}var s=t.filter(i)[0];var o=t.filter(n)[0];s&&(e=e.concat(f(s)));o&&(e=e.concat(g(o)));u.fieldRules=e})};this.removeFieldPreference=function(t){if(t.type)return c.removeDefinedItem(t.id);return c.unDislikeField(t.id)};this.reApplyDefinedField=function(t){if("dimension"===t.type)return c.applyDimensionLearning(t.dimension.field);return c.applyMeasureLearning(t.measure.field)};this.reApplyFieldPreference=function(t){if(t.type)return u.reApplyDefinedField(t);if(t.field)return c.dislikeField(t.field.name);if(t.libId)return c.dislikeLibItem(t.libId.name)};this.openGlobalModeSummaryDialog=function(){d=t.getService("luiDialog").show({template:o,input:{title:"cao.insight.contextPanel.HelpTitle",html:o,closeDialog:function t(){d.close();d=null}}})};this.isHiddenCharts=function(){return u.hiddenCharts&&"INTRO"!==u.state&&"INIT"!==u.state};function m(){return{type:"hide",isHiddenChartLearningOption:true,text:n.get("cao.insight.contextPanel.details.hideChart"),subText:n.get("cao.insight.contextPanel.details.hideChart.subtext"),chart:u.chart}}this.getDetailsForSelectedChart=function(){if(this.chart){var t=[];t=t.concat(p(this.chart.getFields()));t=t.concat(p(this.chart.getMeasures()));t=t.concat(p(this.chart.getDimensions()));t.push(m());u.detailsForChart=t}};this.hiddenChartsTitle=function(){return n.get("cao.insight.contextPanel.hiddenCharts",[u.hiddenCharts.length])};this.updateChart=function(t){u.chart=t;u.initState=true;u.hiddenCharts=[];u.chart?u.getDetailsForSelectedChart():u.populateFieldRules()};u.updateChart(a.getSelectedChart());function b(){u.getDetailsForSelectedChart()}this.openDetailsOption=function(t){u.currentDetailsOption&&u.currentDetailsOption===t?u.currentDetailsOption=null:u.currentDetailsOption=t};e.subscribe("cao/insight/selectedChartChanged",this.updateChart);e.subscribe("cao/insight/light_editing",b);e.subscribe("cao/insight/refreshPerformed",u.refreshPerformed);this.$onDestroy=function(){e.unsubscribe("cao/insight/selectedChartChanged");e.unsubscribe("cao/insight/light_editing");e.unsubscribe("cao/insight/refreshPerformed",u.refreshPerformed);u.cancelStartTimer&&r.cancel(u.cancelStartTimer)}}];var a={transclude:true,template:s,bindings:{app:"<",hiddenCharts:"<",state:"<",insightFeedback:"<",precedentsEnabled:"="},controller:r};return t.nativeComponent("qvCaoInsightsContextPanel",a)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="cao-insights-context-panel editor">\n\t<div class="cao-insight-context-panel-header">\n\t\t<div class="title" q-translation="{{ $ctrl.chart ? \'cao.insight.contextPanel.header\' : \'cao.insight.contextPanel.global.header\' }}"></div>\n\t\t<span ng-if="!$ctrl.chart" class="lui-icon lui-icon--help lui-icon--small help-icon" ng-click="$ctrl.openGlobalModeSummaryDialog()"></span>\n\t</div>\n\t\n\t<div class="context-panel-content">\n\t\n\t\t<div ng-if="!$ctrl.chart" class="global-mode">\n\t\t\t<div ng-if="$ctrl.isHiddenCharts()" class="hidden-charts">\n\t\t\t\t<button class="hidden-charts-button" ng-click="$ctrl.viewHiddenCharts()">\n\t\t\t\t\t<span class="lui-list__aside">\n\t\t\t\t\t\t<span class="lui-icon hidden-chart-icon"></span>\t\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="lui-list__aside text-wrapper">\n\t\t\t\t\t\t<span class="lui-list__text title" tid="cao-hidden-charts-title">{{$ctrl.hiddenChartsTitle()}}</span>\t\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="lui-list__aside ng-scope">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--small lui-icon--arrow-right icon-arrow"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t\t<qv-cao-hidden-charts-panel on-panel-hide-action="$ctrl.handleHiddenCharts(chart)" hidden-charts="$ctrl.hiddenCharts" hidden-charts-title="$ctrl.hiddenChartsTitle()" />\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.noLearningFound()" class="global-mode-no-learning-applied">\n\t\t\t\t<div class="no-learning-icon" />\n\t\t\t\t<p q-translation="cao.insight.contextPanel.noLearningApplied" class="no-learning-text"></p>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.isFieldRulesSet()" class="custom-preferences">\n\t\t\t\t<span class="lui-list__aside">\n\t\t\t\t\t<span class="lui-icon lui-icon--approve"></span>\n\t\t\t\t</span>\n\n\t\t\t\t<div class="spacing">\n\t\t\t\t\t<div class="preferences-header-title">\n\t\t\t\t\t\t<div class="title" q-translation="cao.insight.contextPanel.customPreferences.title"></div>\n\t\t\t\t\t\t<div class="sub-title" ng-if="customPreferencesToggleOn" q-translation="{{ $ctrl.isCustomPreferences ? \'properties.on\' : \'properties.off\' }}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="switch-toggle" ng-if="customPreferencesToggleOn">\n\t\t\t\t\t\t<lui-switch x-model="customPreferencesToggle.value" tid="cao-custom-preferences-switch" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.isFieldRulesEnabled()">\n\t\t\t\t<qv-cao-field-preferences ng-repeat="fieldRule in $ctrl.fieldRules" delete-rule="$ctrl.removeFieldPreference(fieldPref)" re-apply-rule="$ctrl.reApplyFieldPreference(fieldPref)" field-rule="fieldRule" update-list="$ctrl.updateListTimer()" />\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div ng-if="$ctrl.chart" class="chart-mode">\n\t\t\t<div class=\'qv-panel-properties\' style="overflow: auto;">\n\t\t\t\t<qv-cao-insight-editor ng-if="$ctrl.chart" chart="$ctrl.chart" app="$ctrl.app" />\n\t\t\t</div>\n\n\t\t\t<div class="cao-accordion-panel">\n\t\t\t\t<cao-accordion-control label="cao.insight.contextPanel.details">\n\t\t\t\t\t<qv-cao-details-option ng-repeat="detail in $ctrl.detailsForChart" detail="detail" open-learning-options="$ctrl.openDetailsOption" is-learning-option-open="detail === $ctrl.currentDetailsOption" insight-feedback="$ctrl.insightFeedback"></qv-cao-details-option>\n\t\t\t\t</cao-accordion-control>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(t,e){t.exports='<lui-dialog class="selection-insights-dialog" x-variant="{{::variant}}">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title\n\t\t\tq-translation="cao.insight.contextPanel.HelpTitle"\n\t\t></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="q-modal-loading">\n\t\t<p q-translation="cao.insight.contextPanel.HelpText"></p>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button\n\t\t\tclass="lui-button close-button"\n\t\t\tng-click="closeDialog();"\n\t\t\tq-translation="Common.Close"\n\t\t\ttid="selection-insights-dialog-help-button"\n\t\t></button>\n\t</lui-dialog-footer>\n</lui-dialog>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(951)],s=function(t,e){var n=[function(){var t=this;t.expanded=true;this.toggleExpanded=function(){t.expanded=!t.expanded}}];var i={transclude:true,template:e,bindings:{label:"@"},controller:n};return t.nativeComponent("caoAccordionControl",i)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div ng-click="$ctrl.toggleExpanded()"  class="cao-accordion-control" ng-class="{ \'expanded\': $ctrl.expanded }">\n\t<span class="cao-accordion-control-label" q-title-translation="{{$ctrl.label}}" q-translation="{{$ctrl.label}}" />\n\t<span class="cao-accordion-expander lui-icon lui-icon--small lui-icon--arrow-right" ng-class="{ \'expanded\': $ctrl.expanded }"></span>\n</div>\n<div ng-show="$ctrl.expanded">\n\t<ng-transclude></ng-transclude>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(953)],s=function(t,e,n){var i=["$element","$timeout",function(e,n){this.$onChanges=function(i){i.isLearningOptionOpen&&i.isLearningOptionOpen.currentValue&&n(function(){var n=t(".context-panel-content");if(n.length){var i=e.offset().top-n.offset().top;var s=e.find(".cao-details-option").height();n.scrollTop(i+s)}})}}];var s={transclude:true,template:n,bindings:{detail:"<",openLearningOptions:"<",isLearningOptionOpen:"<",insightFeedback:"<"},controller:i};return e.nativeComponent("qvCaoDetailsOption",s)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="cao-details-option" ng-if="(!$ctrl.detail.searchMatch && $ctrl.insightFeedback) || $ctrl.detail.searchMatch">\n\t<button class="details-option-button" ng-class="{\'cao-learning-option-open\': $ctrl.isLearningOptionOpen}" ng-click="$ctrl.openLearningOptions($ctrl.detail)" ng-if="!$ctrl.detail.searchMatch && $ctrl.insightFeedback">\n\t\t<div class="detail-icon">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon {{ !$ctrl.detail.userMatch ? \'lui-icon--analyze\' : \'lui-icon--approve\' }}"></span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="label-title" ng-bind-html="$ctrl.detail.text"></div>\n\t\t<div class="learning-options-toggle">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon lui-icon--small lui-icon--more more-option" ng-class="{\'panelNotOpened\' : !$ctrl.isLearningOptionOpen}"></span>\n\t\t\t</span>\n\t\t</div>\n\t</button>\n\t<div class="details-option-item no-hover" ng-if="$ctrl.detail.searchMatch">\n\t\t<div class="detail-icon">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon {{ !$ctrl.detail.userMatch ? \'lui-icon--analyze\' : \'lui-icon--approve\' }}"></span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="label-title" ng-bind-html="$ctrl.detail.text"></div>\n\t</div>\n\t<div ng-show="$ctrl.isLearningOptionOpen">\n\t\t<qv-cao-learning-option detail="$ctrl.detail" />\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(196),n(955)],s=function(t,e,n,i){var s=["qvCaoLearningService",function(t){var i=this;i.learningPerformed=false;var s="field";var o="propose";var r="hide";this.getOppositeLearningOptionActionText=function(){if(i.detail&&i.detail.type)return i.detail.type===n.MEASURE?"cao.insight.contextPanel.details.learningOption.dimension":"cao.insight.contextPanel.details.learningOption.measure";return null};function a(){return i.detail.type===n.MEASURE&&!i.learningPerformed||i.detail.type===n.DIMENSION&&i.learningPerformed?t.applyDimensionLearning(i.detail.field):t.applyMeasureLearning(i.detail.field)}function l(){return i.detail.isLibItem?t.dislikeLibItem(i.detail.libItemId):t.dislikeField(i.detail.field)}function c(t){i.learningPerformed=t;e.publish("cao/insight/learningPerformed",!!t)}this.applyLearning=function(){a().then(function(t){t&&t.nodes[0]&&(i.learningQuad=t.nodes[0].id);c(s)})};this.hideChart=function(){t.hideChart(i.detail.chart).then(function(){c(r)})};this.handleNeverPropose=function(){l().then(function(){c(o)})};this.removeFieldPreference=function(e){if(e.type)return t.removeDefinedItem(e.id);return t.unDislikeField(e.id)};this.revertLearningAction=function(){if(i.detail.type&&i.detail.field&&i.learningQuad&&i.learningPerformed==s){t.removeDefinedItem(i.learningQuad);c()}else i.learningPerformed==o?t.unDislikeItem(i.detail.field).then(function(){c()}):t.unHideChart(i.detail.chart).then(function(){c()})}}];var o={template:i,bindings:{detail:"<"},controller:s};return t.nativeComponent("qvCaoLearningOption",o)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="cao-learning-option">\n\t<p q-translation="cao.insight.contextPanel.details.learning" />\n\n\t<div ng-if="!$ctrl.detail.isHiddenChartLearningOption && !$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.applyLearning()" \n\t\t\tq-translation="{{$ctrl.getOppositeLearningOptionActionText()}}" ng-if="$ctrl.getOppositeLearningOptionActionText() && !$ctrl.detail.isLibItem"/>\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.handleNeverPropose()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.neverPropose" />\n\t</div>\n\n\t<div ng-if="$ctrl.detail.isHiddenChartLearningOption && !$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.hideChart()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.hidechart" tid="hide-chart-button" />\n\t\t<p class="hide-subtext" q-translation="{{$ctrl.detail.subText}}" />\n\t</div>\n\n\t<div ng-if="$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button undo" ng-click="$ctrl.revertLearningAction()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.undo" />\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(957),n(958)],s=function(t,e,n){var i=[function(){var t=this;this.openPanel=function(){t.isPanelOpened=true};this.closePanel=function(){t.isPanelOpened=false};this.handleHiddenChart=function(n){e.publish("cao/insight/learningPerformed",!!n);return t.onPanelHideAction({chart:n})};e.subscribe("cao/insight/open_hidden_charts_panel",this.openPanel);this.$onDestroy=function(){e.unsubscribe("cao/insight/open_hidden_charts_panel")}}];var s={template:n,controller:i,bindings:{onPanelHideAction:"&",hiddenCharts:"<",hiddenChartsTitle:"<"}};return t.nativeComponent("qvCaoHiddenChartsPanel",s)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="hidden-charts-panel" ng-class="{ \'open-panel\': $ctrl.isPanelOpened }">\n\t\t<div class="header" ng-click="$ctrl.closePanel()">\n\t\t\t<div class="header-wrapper">\n\t\t\t\t<div class="back-navigation">\n\t\t\t\t\t<span class="lui-icon back-icon  lui-icon--previous  lui-icon--small" />\n\t\t\t\t</div>\n\t\t\t\t<div class="text-wrapper">\n\t\t\t\t\t<div class="navigation-title" q-translation="cao.insight.hiddenCharts.panel.goBackTitle"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t<div class="hidden-charts-content">\n\t\t\t<div class="spacing title">{{$ctrl.hiddenChartsTitle}}</div>\n\t\t\t<div class="spacing sub-title" q-translation="cao.insight.hiddenCharts.panel.subTitle" ng-if="$ctrl.hiddenCharts.length > 0"></div>\n\t\t\t<div class="spacing sub-title" q-translation="cao.insight.hiddenCharts.panel.subTitleNoHiddenCharts" ng-if="$ctrl.hiddenCharts.length === 0"></div>\n\t\t\t<qv-cao-hidden-charts-view chart="chart" index="$index" ng-repeat="chart in $ctrl.hiddenCharts | orderBy : \'-chart.relevance\'"\n\t\t\t\ton-hide-action="$ctrl.handleHiddenChart(chart)"></cao-hidden-charts-view>\n\t\t</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(959),n(264),n(960)],s=function(t,e,n,i,s){var o=["$element","qvCaoRenderService","luiTooltip","luiPopover",function(t,n,o,r){var a=this;var l=[];a.popupOpen=false;a.actionIcon="view";var c=null;var u={template:i.template,controller:i.controller,input:{item:"",style:{width:"150px"}},alignTo:t.find(".hide-action-button")[0],dock:"left"};var d=500;function p(t){var e=[];t&&t.length>0&&(e=t.map(function(t){return t.field||t.libIdLabel}));return e}this.toTitleCase=function(t){if(t)return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})};this.setFields=function(){if(a.chart){var t=[];var e=[];var n=[];t=t.concat(p(a.chart.getDimensions()));e=e.concat(p(a.chart.getMeasures()));n=n.concat(p(a.chart.getFields()));a.dimensions=t.toString();a.measures=e.toString();a.fields=n.toString()}};function h(){return a.chart.getComplexity()?a.chart.getComplexity():a.index}this.loadChart=function(){return a.chart.loadChart()};function f(t,e,n,i,s){var o={template:t,controller:e,dock:i,closeOnResize:true,alignTo:n};var c=r.show(o);l.push(c);c.closed.then(function(){a.popupOpen=false;"function"===typeof s&&s()})}this.openChartInfoPopover=function(){if(a.popupOpen){a.popupOpen=false;l=[]}else{a.popupOpen=true;var e=["$scope",function(t){t.dimensions=a.dimensions;t.measures=a.measures;t.fields=a.fields}];f(s,e,t.find(".open-chart-info-popover")[0],"bottom")}};this.$onChanges=function(){if(a.chart){n.enqueueForRender(a.loadChart,h());a.chart.refreshChartType();a.setFields()}};this.$onDestroy=function(){a.chart&&this.chart.destroyChart()};this.openTooltip=function(){setTimeout(function(){var t=a.chart.isHidden()?"cao.insight.hiddenCharts.view.unhide":"cao.insight.hiddenCharts.view.hide";u.input.item=e.get(t);c=o.show(u)},d)};this.closeTooltip=function(){setTimeout(function(){c&&c.close()},d)};this.handleHideChartAction=function(){a.closeTooltip();a.onHideAction({chart:a.chart})}}];var r={template:n,bindings:{chart:"<",index:"<",onHideAction:"&"},controller:o};return t.nativeComponent("qvCaoHiddenChartsView",r)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="hidden-charts-view" ng-class="{ \'hidden\': !$ctrl.chart.isHidden() }">\n\t\t<div class="title-container spacing">\n\t\t\t<div class="header-title">\n\t\t\t\t<div class="title">\n\t\t\t\t\t{{ $ctrl.toTitleCase($ctrl.chart.chartType) }}\n\t\t\t\t</div>\n\t\t\t\t<div class="open-chart-info-popover" ng-click="$ctrl.openChartInfoPopover()"><span class="lui-icon lui-icon--info" /></div>\n\t\t\t</div>\n\t\t\t<div class="cao-hide-action" >\n\t\t\t\t<span class="lui-list__aside action-button-container">\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass="hide-action-button" \n\t\t\t\t\t\tng-class="$ctrl.chart.isHidden() ? \'icon--view\': \'lui-icon lui-icon--back\'"\n\t\t\t\t\t\tng-click="$ctrl.handleHideChartAction()" \n\t\t\t\t\t\tng-mouseover="$ctrl.openTooltip()" \n\t\t\t\t\t\tng-mouseleave="$ctrl.closeTooltip()"\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t<div class="spacing content-view">\n\t\t\t<div class="wrapper">\n\t\t\t\t<div class="image-container" ng-if="$ctrl.chart && $ctrl.chart.getState() === \'LOADING\'">\n\t\t\t\t\t<img ng-src="{{$ctrl.chart.chartTypeImageUrl}}" class="loader-image" />\n\t\t\t\t</div>\n\t\t\t\t<qv-object ng-if="$ctrl.chart && $ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.options" object="$ctrl.chart.object" />\n\t\t\t</div>\n\t\t</div>\n</div>'},function(t,e){t.exports='<lui-popover class="cao-hidden-charts-popover">\n\t<div class="cao-hidden-charts-popover-body">\n\t\t<ul class="lui-list cao-hidden-charts-popover-list">\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="dimensions">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Dimensions"></strong>:<span>&nbsp;{{ dimensions }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="measures">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Measures"></strong>:<span>&nbsp;{{ measures }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="fields">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Fields"></strong>:<span>&nbsp;{{ fields }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(91),n(962),n(264)],s=function(t,e,n,i,s){var o=["luiTooltip","$element",function(t,i){var o=this;var r=null;var a={template:s.template,controller:s.controller,input:{item:"",style:{width:"150px"}},alignTo:i.find(".field-rule-action-button")[0],dock:"left"};this.toggleFieldRule=function(){o.fieldRule.valid=!o.fieldRule.valid;e.publish("cao/insight/learningPerformed",true)};this.handleFieldRuleAction=function(){o.closeTooltip();o.fieldRule.valid?o.deleteRule({fieldPref:o.fieldRule.field}).then(function(){o.toggleFieldRule();o.updateList()}):o.reApplyRule({fieldPref:o.fieldRule.field}).then(function(){o.toggleFieldRule()})};this.openTooltip=function(){var e=o.fieldRule.valid?"cao.insight.contextPanel.customPreferences.remove":"cao.insight.contextPanel.customPreferences.restore";a.input.item=n.get(e);r=t.show(a)};this.closeTooltip=function(){r&&r.close()}}];var r={template:i,bindings:{fieldRule:"<",deleteRule:"&",reApplyRule:"&",updateList:"&"},controller:o};return t.nativeComponent("qvCaoFieldPreferences",r)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="cao-field-preferences" ng-class="{ \'hidden\': !$ctrl.fieldRule.valid }">\t\n\t<div class="label-title" ng-bind-html="$ctrl.fieldRule.label" />\n\t<div class="field-rule-action-container" >\n\t\t<span class="lui-list__aside action-button-container">\n\t\t\t<span \n\t\t\t\tclass="lui-icon field-rule-action-button" \n\t\t\t\tng-class="$ctrl.fieldRule.valid ? \'lui-icon--bin\': \'lui-icon--back\'"\n\t\t\t\tng-click="$ctrl.handleFieldRuleAction()" \n\t\t\t\tng-mouseover="$ctrl.openTooltip()" \n\t\t\t\tng-mouseleave="$ctrl.closeTooltip()"\n\t\t\t/>\n\t\t</span>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(10),n(95),n(964),n(223),n(222)],s=function(t,e,n,i,s,o){var r=["$window",function(t){var i=this;i.app=null;i.isToggleContextDisabled=false;this.$onInit=function(){e.element(t).bind("resize",i.autoHidePanels);i.autoHidePanels()};this.$onChanges=function(t){i.app=t.app.currentValue;i.isContextPanelVisible=s.storageObj(i.app.id).contextPanel;i.isAssetsPanelVisible=s.storageObj(i.app.id).assetsPanel};this.autoHidePanels=function(n){var s="string"!==typeof n;var o=e.element(t).innerWidth();o<1200&&(i.isContextPanelVisible&&i.isAssetsPanelVisible&&s?i.toggleContextPanel():i.isAssetsPanelVisible&&i.isContextPanelVisible&&"assets"===n?i.toggleContextPanel():i.isAssetsPanelVisible&&i.isContextPanelVisible&&"context"===n&&i.toggleAssetsPanel())};this.getContextPanelToggleButtonTitle=function(){return i.isContextPanelVisible?"cao.insight.hideContextPanel":"cao.insight.showContextPanel"};this.getHideAssetsButtonTitle=function(){return i.isAssetsPanelVisible?"cao.insight.hideAssetsPanel":"cao.insight.showAssetsPanel"};this.contextPanelToggled=function(){i.autoHidePanels("context");o.resizeCharts(t)};this.toggleContextPanel=function(){if(!i.isToggleContextDisabled){i.isContextPanelVisible=!i.isContextPanelVisible;s.toggleContextPanel(i.app.id);n.publish("cao/insight/contextPanelToggled",i.isContextPanelVisible)}};this.disableToggleContext=function(t){i.isToggleContextDisabled=t};this.assetsPanelToggled=function(e){i.isAssetsPanelVisible=e;i.autoHidePanels("assets");o.resizeCharts(t)};this.toggleAssetsPanel=function(){i.isAssetsPanelVisible=!i.isAssetsPanelVisible;s.toggleAssetsPanel(i.app.id);n.publish("cao/insight/assetsPanelToggled",i.isAssetsPanelVisible)};n.subscribe("cao/insight/contextPanelToggled",this.contextPanelToggled);n.subscribe("cao/insight/assetsPanelToggled",this.assetsPanelToggled);n.subscribe("cao/insight/editInsightProperties",i.disableToggleContext);this.$onDestroy=function(){n.unsubscribe("cao/insight/contextPanelToggled");n.unsubscribe("cao/insight/assetsPanelToggled");n.unsubscribe("cao/insight/editInsightProperties")}}];var a={transclude:true,template:i,bindings:{app:"<",insightFeedback:"<"},controller:r};return t.nativeComponent("qvCaoInsightsBottomPanel",a)}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='\n<div class="cao-insights-bottom-panel">\n\t<div class="hide-assets-panel-container">\n\t\t<button class="bottom-panel-button" ng-class="{ \'lui-active\': $ctrl.isAssetsPanelVisible }" q-title-translation="{{$ctrl.getHideAssetsButtonTitle()}}" tid="bottom-panel-button-left"\n\t\t\tng-click="$ctrl.toggleAssetsPanel()" tabindex="0">\n\t\t\t<span class="lui-icon lui-icon--toggle-left" />\n\t\t\t<span class="label" q-translation="{{$ctrl.getHideAssetsButtonTitle()}}" />\n\t\t</button>\n\t</div>\n\t<div class="hide-insight-properties-container" ng-if="$ctrl.insightFeedback">\n\t\t<button class="bottom-panel-button" ng-class="{ \'lui-active\': $ctrl.isContextPanelVisible, \'disabled\': $ctrl.isToggleContextDisabled }" q-title-translation="{{$ctrl.getContextPanelToggleButtonTitle()}}" tid="bottom-panel-button-right" \n\t\t\tng-click="$ctrl.toggleContextPanel()" tabindex="0" ng-attr-tabindex="{{$ctrl.isToggleContextDisabled ? \'-1\' : \'0\'}}">\n\t\t\t<span class="label" q-translation="{{$ctrl.getContextPanelToggleButtonTitle()}}" />\n\t\t\t<span class="lui-icon lui-icon--toggle-right" />\n\t\t</button>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(966),n(48),n(90),n(967),n(11),n(167),n(277)],s=function(t,e,n,i,s,o){e.service("qvMultiStatePopoverService",["luiPopover",function(e){var r;function a(t,e){var n=t.which;n=t.shiftKey&&o.TAB===n?"SHIFT_TAB":n;switch(n){case o.ARROW_LEFT:case o.ARROW_UP:case"SHIFT_TAB":case o.ESCAPE:s(e).focus();t.preventDefault();break}}return{show:function s(o){var l={handleBtnKeyDown:a,getItems:function t(){return[]},autoFocus:false};o=n.extend(true,{},l,o);r=e.show({template:t,controller:i.controller,alignTo:o.alignToElement,autoFocus:o.autoFocus,input:{title:o.title,getItems:o.getItems,clear:o.clear,click:o.click,onClose:o.onClose,brightCurSel:o.brightCurSel,openTooltip:o.openTooltip,closeTooltip:o.closeTooltip,handleKeyDown:o.handleKeyDown,handleBtnKeyDown:o.handleBtnKeyDown,handlePopoverKeyDown:o.handlePopoverKeyDown,alignToElement:o.alignToElement},closeOnResize:true,dock:"top"});return r},close:function t(){r&&r.close();r=null}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover class="lui-popover qv-multi-state-popover" ng-class="{ bright: input.brightCurSel }" tid="qv-multi-state-popover">\n\t<lui-popover-header class="lui-popover__header">\n\t\t<div class="lui-popover__title">\n\t\t\t<span ng-if="input.title && input.title.length">{{ input.title }}</span>\n\t\t\t<div class="btn-clearall">\n\t\t\t\t<lui-button \n\t\t\t\t\ttid="qv-multi-state-popover-btn-clear"\n\t\t\t\t\tclass="clear-all-btn lui-button--block"\n\t\t\t\t\tng-keydown="handleBtnKeyDown($event, input.alignToElement)" \n\t\t\t\t\tng-click="input.clear(input.getItems()[0].qField, null, $event)" \n\t\t\t\t\tng-disabled="allItemsNonClearable( input.getItems() )" \n\t\t\t\t\tq-title-translation="AlternateState.Popover.ClearAllStates">\n\t\t\t\t\t<span class="lui-button__text" q-translation="AlternateState.Popover.ClearAllStates"></span>\n\t\t\t\t</lui-button>\n\t\t\t</div>\n\t\t</div>\n\t</lui-popover-header>\t\n\t<lui-popover-body class="lui-popover__body">\n\t\t<ul class="lui-list" qva-direction x-dir-setting="{{input.direction}}">\n\t\t\t<li class="item" ng-repeat="item in input.getItems()" ng-click="input.click($event)" ng-mousemove="input.openTooltip($event, item)" ng-mouseleave="input.closeTooltip()"\n\t\t\t\ttabindex="0" ng-keydown="handleKeyDown($event, item)" aria-label="{{item.screenReaderLabel}}" ng-class="{ \'item-locked\' : item.qLocked }">\n\t\t\t\t<div class="item-container">\n\t\t\t\t\t<div ng-if="item.qLocked" class="icon-lock">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--lock">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="item-component text-container" qva-direction x-dir-text="{{item.displayStateName}}">\n\t\t\t\t\t\t<div class="text">{{ item.displayStateName }}</div>\n\t\t\t\t\t\t<div class="values">{{ item.translation }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="!( item.qLocked || item.qOneAndOnlyOne )" class="item-component remove" ng-click="input.clear(item.qField, item.stateName, $event)" q-title-translation="CurrentSelections.Remove">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<qv-state-count-bar ng-if="!item.isPlaceHolder && item.isSingleState" state-counts="item.qStateCounts"></qv-state-count-bar>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(277)],s=function(){var t={template:null,controller:["$scope","$element","$timeout",function(t,e,n){this.close=function(){i()};function i(){n(function(){t.destroyComponent();e.remove()})}t.closingDeferred.promise.then(function(e){t.input.onClose(e);i()});t.allItemsNonClearable=function(t){return!t.some(function(t){var e=!(t.qLocked||t.qOneAndOnlyOne);return e})}}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="current-selections-item" data-tid="current-selections-item"\n\tng-mousemove="openTooltip($event, item)" ng-mouseleave="closeTooltip()" \n\tng-class="{\n\t\t\'active\' : item.qField === activeFieldName,\n\t\t\'dim\' : $parent.itemSelected && !item.active,\n\t\t\'item-locked\' : item.qLocked,\n\t\t\'locked-feedback item-animate-in\' : item.feedbackActive && item.qLocked,\n\t\t\'item-animate-out\' : (!item.feedbackActive && item.qLocked) || (!item.feedbackActive && item.qOneAndOnlyOne),\n\t\t\'single-select-feedback item-animate-in\' : item.feedbackActive && item.qOneAndOnlyOne,\n\t\t\'single-icon\': item.qOneAndOnlyOne || item.qLocked\n\t}">\n\t<div ng-class="{locked:item.qLocked}" class="text">\n\t\t<div class="text-wrap">\n\t\t\t<span ng-class="{ \'lui-icon lui-icon--lock\': item.qLocked }"></span>\n\t\t\t<span class="name" tid="selection-name">{{item.name}}</span>\n\t\t</div>\n\t\t<span class="values">\n\t\t\t<span ng-if="!item.isDefaultState">{{item.displayStateName}}:</span>\n\t\t\t<span tid="current-selection-item-text">{{item.translation}}</span>\n\t\t</span>\n\t</div>\n\t<div class="options" title=" "> \x3c!-- The empty title attribute is neeeded for screen reader not to read anchor title: \'clear selections\' --\x3e\n\t\t<div ng-if="!item.isDefaultState" class="item-component count" title="">\n\t\t\t<span class="field-states-indicator"></span>\n\t\t</div>\n\t\t<a ng-if="!currentSelectionDisabled && (!item.qLocked && !item.isPlaceHolder && !item.qOneAndOnlyOne)" ng-click="clear(item.qField, item.stateName)" class="remove" q-title-translation="CurrentSelections.Remove">\n\t\t\t<span class="lui-clear-all lui-icon lui-icon--remove"></span>\n\t\t</a>\n\t</div>\n\n\t<qv-state-count-bar ng-if="!item.isPlaceHolder && item.isSingleState" state-counts="item.qStateCounts"></qv-state-count-bar>\n</div>'},function(t,e){t.exports='<div class="qv-odag-bar" ng-class="{\'inEditMode\': inEditMode, \'inAnalysisMode\': !inEditMode, \'standAlone\': standAlone }">\n\t<div class="leftOdag" qv-pager qv-sortable-list="sortableNavPoints"> \n\t\t<div ng-if="odagNavPoints.items.length === 0" class="drag-help" ng-class="{\'inEditMode\': inEditMode}">{{waterMarkText}}</div>\n\t\t<ul class="list">\n\t\t\t<li ng-repeat="item in odagNavPoints.items track by item.id" class="odag-nav-point" ng-class="item.classList">\n\t\t\t\t<div class="nav-point-container" ng-class="{\'invalid\': item.invalid }">\n\t\t\t\t\t<div ng-if="inEditMode" class="dropArea"></div>\n\t\t\t\t\t<qv-odag-toolbar-navpoint item="item" in-edit-mode="inEditMode"></qv-odag-toolbar-navpoint>\n\t\t\t\t</div>\n\t\t\t</li> \n\t\t</ul>\n\t\t<a class="qv-pager-nav qv-pager-previous" ng-click="prevPage()" q-title-translation="Tooltip.Previous"><i class="lui-icon lui-icon--arrow-left"></i></a>\n\t\t<a class="qv-pager-nav qv-pager-next" ng-click="nextPage()" q-title-translation="Tooltip.Next"><i class="lui-icon lui-icon--arrow-right"></i></a>\t\t\n\t</div>\n </div>\t\n'},function(t,e,n){"use strict";var i,s;!(i=[n(89),n(92),n(54),n(102),n(219),n(90)],s=function(t,e,n,i,s,o){var r=e.extend("ODAGNavPoint",{properties:null,parent:null,init:function t(e){i.mixin(this);this.notification("Invalidated");this.parent=e.parent;this.properties={qInfo:{qType:"odagNavPoint"}};this.properties=o.extend(this.properties,e.properties);var s=this;this._sheetInvalidated=function(){s.parent.getProperties().then(function(t){for(var e=0;e<t.navPoints.length;e++){var i=t.navPoints[e];if(i.info.id===s.properties.info.id){if(!n.isEqual(i,n.omit(s.properties,["qInfo"]))){s.properties=o.extend(s.properties,i);s.Invalidated.emit()}break}}})};this.parent.Invalidated.bind(this._sheetInvalidated)},getLayout:function t(){var e=this;this.properties.odagLinkName=null;return s.getList(this.parent.app).then(function(t){if(t.filter(function(t){return t.properties.data.id===e.properties.odagLinkRefID}).length>0)return s.get(e.properties.odagLinkRefID,e.parent.app).then(function(t){e.properties.odagLinkName=t.properties.data.name;return e.properties});e.properties.odagLinkName="";return e.properties})},getProperties:function e(){return t.resolve(this.properties)},getEffectiveProperties:function e(){return t.resolve(this.properties)},clearSoftPatches:function t(){return},removeObject:function t(){this.parent.removeNavPoint(this.properties.info.id)},setProperties:function t(e){var n=this;this.properties=o.extend(this.properties,e);return this.parent.getProperties().then(function(t){for(var e=0;e<t.navPoints.length;e++){var i=t.navPoints[e];if(i.info.id===n.properties.info.id){var s=o.extend({},n.properties);delete s["qInfo"];t.navPoints[e]=s;break}}return n.parent.setProperties(t)})},destroy:function t(){this.parent.Invalidated.unbind(this._sheetInvalidated)}});return r}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"items",component:"accordion",items:{navPointProps:{type:"items",translation:"properties.odagNavProperties",items:{general:{type:"items",grouped:true,items:{title:{type:"string",ref:"title",translation:"Common.Name",minlength:1,readOnly:function t(e,n,i){var s=i.layout;return s&&(s.permissions&&!s.permissions.update||s.qMeta&&s.qMeta.sourceObject&&s.qMeta.sourceObject.length>0)},rollbackInvalid:true}}},odagLinkInfo:{type:"items",items:{odagLinkName:{type:"string",ref:"odagLinkName",translation:"properties.odag.link.name",minlength:1,readOnly:function t(){return true},rollbackInvalid:true}}}}}}};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="drag-odag-navpoint">\n\t<div class="odag-nav-point-cell" ng-class="{\'active\': item.id === selObject.id, \'popoverOpen\': popover, \'invalid\': item.invalid }" ng-style="item.style" ng-click="onODAGNavPointClicked(item)">\n\t\t<qv-progress-circle ng-if="!inEditMode && !item.invalid" class=" odag-progress-circle" percentage="rowCountPercentage"></qv-progress-circle>\n\t\t<div class="cell-name" ng-if="inEditMode || !item.invalid" title="{{item.data.title}}">{{item.data.title}}</div>\n\t\t<div class="cell-name" ng-if="!inEditMode && item.invalid " q-title-translation="odag.toolbar.navpoint.invalid" q-translation="odag.toolbar.navpoint.invalid"></div>\n\t\t<div ng-if="!inEditMode && !item.invalid" class="arrow lui-icon lui-icon--triangle-bottom"></div>\n\t\t<button ng-if="inEditMode && item.invalid" class="lui-fade-button delete-invalid-navpoint" ng-click="deleteInvalidNavPoint($event, item)">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--bin"></span>\n\t\t</button>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(49),n(135),n(295),n(138),n(974),n(323),n(976),n(484)],s=function(t,e,i,s,o,r,a){var l={template:a,controller:["$scope","$element","$timeout","odagNavpointService",function(a,l,c,u){var d;var p=t.getService("qvLoader");a.odagNavpointService=u;a.loadingContent={value:true};a.showInfoPopup=false;a.generatedApps=[];a.bindings=[];a.expandedItem={item:null};a.generateAppInProgress=false;a.bindingsPass=true;a.maxGeneratedAppLimitReached=false;a.dismissedMaxGenAppMsg=false;a.dismissMaxGenAppMsgClicked=function(){a.dismissedMaxGenAppMsg=true};a.isGenerateBtnDisabled=function(){a.bindingsPass=a.bindings.filter(function(t){return false===t.bindingPassesConstraint}).length>0;return a.header.invalid||a.maxGeneratedAppLimitReached||a.bindingsPass||!a.item.rowCountPercentage||100!==a.item.rowCountPercentage||s.isSuffixInUse("noData")||a.generateAppInProgress};a.canApplySelectionsForReload=function(){a.bindingsFailed=a.bindings.filter(function(t){return false===t.bindingPassesConstraint}).length>0;return!(a.header.invalid||a.bindingsFailed||!a.item.rowCountPercentage||100!==a.item.rowCountPercentage||s.isSuffixInUse("noData")||a.generateAppInProgress)};a.infoHeader=e.get("odag.toolbar.navpoint.popup.info.header");a.circleModel={chartValue:a.item.rowCountPercentage?a.item.rowCountPercentage:0};a.$watchCollection("item.rowCountPercentageNumber",function(t){a.item.rowCountPercentage=-1===t?NaN:t;a.circleModel.chartValue=a.item.rowCountPercentage?a.item.rowCountPercentage:0});a.header={invalid:false,templateThumbnail:n.p+"img/core/static/Default_thumbnail_app.png",templateName:e.get("Common.Loading"),templateDescription:e.get("Common.Loading")};function h(){return u.updateItemHeader(a.item,a.header)}a.setSelectionState=function(){var t=a.expandedItem.item;i.getFlag("ODAG_SAAS_ENABLED")&&t&&u.getSelections(t.parentContext.app,t.requestId).then(function(t){a.expandedItemSelectionState=u.getSelectedValuesDisplayString(t,{value:false})})};a.loadGeneratedApps=function(){u.loadGeneratedApps(a.item,a.generatedApps).then(function(){a.loadingContent.value=false;a.expandedItem.item&&(a.generatedApps.some(function(t){return a.expandedItem.item.requestId===t.requestId})?a.setSelectionState():a.expandedItem.item=null);a.maxGeneratedAppLimitReached=a.generatedApps.length>=a.item.maxNumberOfApps;g()})};u.initializeBindings(a.item,a.bindings);f().then(function(){a.item.initialized.promise.then(function(){a.actualRowEstFormatted="NaN"===a.item.actualRowEst?e.get("odag.toolbar.navpoint.popup.invalid"):r.format.number(a.item.actualRowEst,{});a.maxRowExpressionCountFormatted=r.format.number(a.item.maxRowExpressionCount,{});h().finally(function(){a.loadGeneratedApps()})})});function f(){d=c(function(){p.close(true).then(function(){p.show({template:o,hugeLoader:false,mediumLoader:true,appendTo:l.find(".odag-popup-body")[0]})})},0,false);return d}function g(){c.cancel(d);d=null;p.close()}a.onApplySelections=function(){u.initializeBindings(a.item,a.bindings)};a.onNavPointInfoClicked=function(t){t.preventDefault();t.stopPropagation();a.showInfoPopup=!a.showInfoPopup};a.deleteGenAppClicked=function(t,e){t.preventDefault();t.stopPropagation();a.showInfoPopup&&(a.showInfoPopup=!a.showInfoPopup);if(e.deleteIcon&&!e.actionInProgress){e.actionInProgress=true;u.deleteGeneratedApp(e).then(function(){a.loadGeneratedApps();a.expandedItem.item&&e.requestId===a.expandedItem.item.requestId&&(a.expandedItem.item=null);e.actionInProgress=false}).catch(function(t){e.actionInProgress=false;throw t})}};a.reloadApp=function(t,e){a.generateAppInProgress=true;u.reloadApp(a.item,t.requestId,e).then(function(){2===e&&(a.expandedItem.item=null);a.loadGeneratedApps();a.generateAppInProgress=false}).catch(function(t){a.generateAppInProgress=false;throw t})};a.onGenerateAppClicked=function(){a.generateAppInProgress=true;a.showInfoPopup=false;u.generateApp(a.item).then(function(){a.generateAppInProgress=false;a.loadGeneratedApps()}).catch(function(t){a.generateAppInProgress=false;throw t})};a.$on("$destroy",function(){u.stopLoadGeneratedApps(a.item);g()})}]};return l}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover id="odag-toolbar-navpoint-popover" ng-class="expandedItem.item? \' request-expanded\' : \'\'" class="odag-toolbar-navpoint-popover"\n x-arrow="arrow">\n\t<lui-popover-header ng-class="{\'invalid\': header.invalid}">\n\t\t<img qva-prevent-drag ng-src="{{ header.imgSrc }}" class="app-thumbnail-img" />\n\t\t<div class="title-description-container">\n\t\t\t<lui-popover-title title="{{header.templateName}}">{{header.templateName}}</lui-popover-title>\n\t\t\t<lui-popover-title ng-if="!header.invalid" class="desciption" title="{{header.templateDescription}}">{{header.templateDescription}}</lui-popover-title>\n\t\t</div>\n\t</lui-popover-header>\n\n\t<lui-popover-body class="odag-popup-body" qva-outside-ignore-for="odag-request-menu">\n\t\t<odag-app-list2 class="odag-app-list-container" applist="generatedApps" reload-app="reloadApp" load-generated-apps="loadGeneratedApps" set-selection-state="setSelectionState"\n\t\t generate-app-in-progress="generateAppInProgress" expanded-item="expandedItem" is-header-invalid="header.invalid" is-generate-btn-disabled="isGenerateBtnDisabled"\n\t\t can-apply-selections-for-reload="canApplySelectionsForReload" expanded-item-selection-state="expandedItemSelectionState"\n\t\t loading="loadingContent.value" delete-clicked="deleteGenAppClicked" on-apply-selections-callback="onApplySelections" open-app-callback="item.openAppCallback"></odag-app-list2>\n\t\t<div ng-if="maxGeneratedAppLimitReached && !dismissedMaxGenAppMsg && !expandedItem.item" class="odag-max-app-limit-reached">\n\t\t\t<div class="max-app-text" q-translation="odag.toolbar.napvoint.popup.maxAppLimitReached"></div>\n\t\t\t<button class="lui-fade-button close-button" q-title-translation="Common.Close" ng-click="dismissMaxGenAppMsgClicked()">\n\t\t\t\t<span class="lui-button__icon  lui-icon lui-icon--small  lui-icon--close"></span>\n\t\t\t</button>\n\t\t</div>\n\t</lui-popover-body>\n\t<div ng-if="showInfoPopup" class="infoPopup">\n\t\t<div class="info-constraints-header">{{infoHeader}}</div>\n\t\t<div class="info-row-count-container">\n\t\t\t<div class="info-section" q-translation="odag.toolbar.navpoint.popup.info.row.count.header"></div>\n\t\t\t<div class="info-row-count-content">\n\t\t\t\t<div class="info-row-count-progress-circle">\n\t\t\t\t\t<circle-chart model=\'circleModel\'></circle-chart>\n\t\t\t\t</div>\n\t\t\t\t<div class="info-row-count-current">\n\t\t\t\t\t<div class="info-row-count-header" q-translation="odag.toolbar.navpoint.popup.info.row.count.current.header"></div>\n\t\t\t\t\t<div class="">{{actualRowEstFormatted}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="info-row-count-constraint">\n\t\t\t\t\t<div class="info-row-count-header" q-translation="odag.toolbar.navpoint.popup.info.row.count.constraint.header"></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t< {{maxRowExpressionCountFormatted}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="info-section" q-translation="odag.toolbar.navpoint.popup.info.field.header"></div>\n\t\t\t<div class="info-field-header">\n\t\t\t\t<div class="info-field" q-translation="odag.toolbar.navpoint.popup.info.field.table.header"></div>\n\t\t\t\t<div class="info-value" q-translation="odag.toolbar.navpoint.popup.info.current.table.header"></div>\n\t\t\t\t<div class="info-constraint" q-translation="odag.toolbar.navpoint.popup.info.constraint.table.header"></div>\n\t\t\t</div>\n\t\t\t<div class="info-field-values">\n\t\t\t\t<div ng-repeat="binding in bindings | orderBy: \'-hasConstraint\' " class="info-field-row" ng-if="bindings.length">\n\t\t\t\t\t<div class="info-field-data">{{binding.fieldName}}</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="info-value-data">\n\t\t\t\t\t\t<div class="info-field-checkmark" ng-if="binding.bindingPassesConstraint">\n\t\t\t\t\t\t\t<span class="lui-icon  lui-icon--tick" aria-hidden="true"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-field-warning" ng-if="!binding.bindingPassesConstraint">\n\t\t\t\t\t\t\t<span class="lui-icon  lui-icon--warning-triangle" aria-hidden="true"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="binding.hasConstraint">{{binding.values.length}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="info-constraint-data">{{binding.constraint}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<lui-popover-footer>\n\t\t<lui-button ng-if="!expandedItem.item" class="info-button" ng-class="{\'lui-button--danger\': bindingsPass, \'lui-active\': showInfoPopup}"\n\t\t x-variant="fade" ng-click="onNavPointInfoClicked($event)">\n\t\t\t<span class="lui-icon  lui-button__icon lui-icon--info"></span>\n\t\t</lui-button>\n\t\t<lui-button ng-if="!expandedItem.item" tid="odag-toolbar-navpoint-popover_generate_app_button" ng-disabled="isGenerateBtnDisabled()"\n\t\t ng-click="onGenerateAppClicked()" q-translation="odag.toolbar.navpoint.popup.generate.app"></lui-button>\n\t</lui-popover-footer>\n</lui-popover>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(380),n(138),n(460),n(91),n(49)],s=function(t,e,n,i,s,o){t.service("odagNavpointServiceUI",["$timeout",function(t){var r;function a(t,e){e.value=true;for(var n=0;n<t.length;n++){var i="";var o=t[n];if(o.selectedSize>1e4){e.value=false;i=s.get("odag.toolbar.navpoint.popup.request.tab.xNumSelectedValues",o.selectedSize);o.valuesDisplayString=i}else{var r=0;for(;r<o.values.length&&r<5;r++){r>0&&(i+=", ");i+=o.values[r].strValue}5===r&&o.values.length>5&&(i+=s.get("odag.toolbar.navpoint.popup.request.tab.moreSelectedValues",[o.values.length-5+""]));o.valuesDisplayString=i}}return t}function l(t,i){var r=new Date(t.modifiedDate);var l=o.getFlag("ODAG_SAAS_ENABLED");function c(t){var e="";if(Intl&&Intl.DateTimeFormat){var i={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};e=Intl.DateTimeFormat(n.locale.get(),i).format(t)}else e=n.format.date(t,{datetime:"medium"});return e}var u=c(r);var d=null;if(t.loadState&&t.loadState.finishedAt&&"pending"!==t.loadState.status){var p=new Date(t.loadState.finishedAt);d=c(p)}var h="";var f=false;var g="";var v="lui-icon--bin";var m=s.get("odag.toolbar.navpoint.popup.tooltip.delete");var b=[];var y=[];var x=[];g=t.generatedAppOrigName?t.generatedAppOrigName:"";t.generatedApp&&t.generatedApp.name&&(g=t.generatedApp.name);t.validation&&t.validation.contents&&t.validation.contents.forEach(function(t){b.push({id:b.length,message:t});y.push({id:y.length,message:t})});if(!l&&t.loadState&&t.loadState.messages&&t.loadState.messages.progressData){t.loadState.messages.progressData.persistentProgressMessages&&t.loadState.messages.progressData.persistentProgressMessages.forEach(function(t){y.push({id:y.length,message:e.translateMessage(t)})});t.loadState.messages.progressData.transientProgressMessage&&y.push({id:y.length,message:e.translateMessage(t.loadState.messages.progressData.transientProgressMessage)});t.loadState.messages.progressData.errorData&&t.loadState.messages.progressData.errorData.forEach(function(t){x.push({id:x.length,message:t.qErrorString})})}l&&x.push({id:y.length,message:t.errorMessage});switch(t.state){case"validating":case"queued":case"loading":case"canceling":f=true;h="";g=g||s.get("odag.toolbar.navpoint.popup.status.generating");v="lui-icon--remove";m=s.get("odag.toolbar.navpoint.popup.tooltip.cancel");if("canceling"==t.state){v="";u=s.get("odag.toolbar.navpoint.popup.status.canceling");d=u;m=""}break;case"failed":h="warning";g=g||s.get("odag.toolbar.navpoint.popup.status.failed");v="lui-icon--remove";m=s.get("odag.toolbar.navpoint.popup.tooltip.remove");break;case"canceled":h="";v="lui-icon--remove";m=s.get("odag.toolbar.navpoint.popup.tooltip.remove");break;case"succeeded":h="";g=t.generatedApp?t.generatedApp.name:"";v="lui-icon--bin";m=s.get("odag.toolbar.navpoint.popup.tooltip.delete");break}var q={value:false};t.selectionState&&a(t.selectionState,q);var S={name:g,createdDate:t.createdDate,requestId:t.id,owner:t.owner,lastLoadedTime:d,generatedAppId:t.generatedApp?t.generatedApp.id:null,published:!!t.generatedApp&&t.generatedApp.published,publishToStreamName:t.publishToStreamName?t.publishToStreamName:s.get("odag.toolbar.navpoint.popup.request.tab.info.notPublished"),targetSheet:t.targetSheet,timestamp:u,status:h,state:t.state,loading:f,parentContext:i,deleteIcon:v,deleteIconTooltip:m,actionInProgress:false,statusMessageArray:y,selectionsState:t.selectionState,canApplySelections:q.value,progressErrors:x};return S}function c(e){var n=new Image;var s=e.templateThumbnail;if(s){n.src=s;n.onerror=function(){e.imgSrc=i.staticSrc().staticApp()};n.onload=function(){t(function(){e.imgSrc=s})}}}r={createGeneratedAppWrapper:l,updateImageOnItemHeader:c,getSelectedValuesDisplayString:a};return r}])}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(11),n(91),n(49),n(13),n(316),n(977),n(978),n(979),n(323)],s=function(t,e,n,i,s,o,r,a,l){t.nativeComponent("odagAppList2",{bindings:{applist:"<",loading:"<",deleteClicked:"<",isGenerateBtnDisabled:"<",canApplySelectionsForReload:"<",isHeaderInvalid:"<",loadGeneratedApps:"<",setSelectionState:"<",expandedItemSelectionState:"<",onApplySelectionsCallback:"<",openAppCallback:"<",reloadApp:"<",generateAppInProgress:"=",expandedItem:"=",variant:"@"},controller:["$element","$timeout","luiPopover","odagNavpointService",function(t,l,c,u){var d=this;d.helpTextNoGeneratedApps=n.get("odag.toolbar.navpoint.popup.noApps");d.selectedTab="info";d.moreMenuPopup=null;d.moreMenuPopupItem=null;d.reloadMenuPopup=null;d.inputName="";d.appNameValid=true;d.applyInProgress=false;d.isOdagSaas=i.getFlag("ODAG_SAAS_ENABLED");d.openAppClicked=function(t,n,i){n.preventDefault();n.stopPropagation();if(t.openAppCallback&&e.isFunction(t.openAppCallback))t.openAppCallback(i.generatedAppId,i.targetSheet?i.targetSheet:null);else if(i.generatedAppId&&u.ODAG_TERMINAL_STATES.indexOf(i.state)>-1){var o;o=i.targetSheet?s.rootPath+"sense/app/"+i.generatedAppId+"/sheet/"+i.targetSheet:s.rootPath+"sense/app/"+i.generatedAppId;window.open(o)}};d.renameGenApp=function(t,e){u.renameGenApp(d.expandedItem.item.parentContext.app,t,e).then(function(){d.loadGeneratedApps()})};d.applySelectionsClicked=function(t){d.applyInProgress=true;u.applySelections(t).then(function(){d.onApplySelectionsCallback&&d.onApplySelectionsCallback();d.applyInProgress=false})};d.$doCheck=function(){var t=this;if(this.applist&&this.expandedItem.item){var e=this.applist.filter(function(e){return e.requestId===t.expandedItem.item.requestId})[0];if(e){this.expandedItem.item=e;if(this.expandedItemSelectionState&&this.isOdagSaas){this.expandedItem.item.selectionsState=this.expandedItemSelectionState;this.expandedItem.item.canApplySelections=true}}else this.expandedItem.item=null}d.expandedItem&&d.expandedItem.item&&d.requestInProgress(this.expandedItem.item)&&d.applist.some(function(t){if(t.requestId===d.expandedItem.item.requestId&&t.name===d.expandedItem.item.name&&d.inputName!==t.name){d.inputName=t.name;return true}return false})};d.moreMenuClicked=function(t,e){t.preventDefault();t.stopPropagation();if(d.moreMenuPopup)d.moreMenuPopup.close();else{d.moreMenuPopupItem=e;d.moreMenuPopup=c.show({template:r,alignTo:t.target,variant:null,controller:["$scope",function(t){t.canOpenApp=function(){return e.generatedAppId&&u.ODAG_TERMINAL_STATES.indexOf(e.state)>-1};t.openApp=function(n){if(t.canOpenApp()){d.moreMenuPopup.close();d.openAppClicked(d,n,e)}};t.canReloadApp=function(){return d.canReloadApp(e)};t.reloadApp=function(n){n.preventDefault();n.stopPropagation();if(t.canReloadApp()){d.moreMenuPopup.close();return d.reloadApp(e)}};t.deleteApp=function(t){t.preventDefault();t.stopPropagation();d.moreMenuPopup.close();d.deleteClicked(t,e)}}],closeOnResize:true,closeOnEscape:true});d.moreMenuPopup.closed.then(function(){d.moreMenuPopup=null;d.moreMenuPopupItem=null})}};d.onOutsideClick=function(){d.expandedItem.item=null};d.rowClicked=function(t){d.moreMenuPopup&&d.moreMenuPopup.close();d.reloadMenuPopup&&d.reloadMenuPopup.close();d.expandedItem.item=t;if(d.expandedItem.item){d.inputName=d.expandedItem.item.name;d.setSelectionState()}};d.reloadClicked=function(t,e){t.preventDefault();t.stopPropagation();d.reloadApp(e)};d.requestInProgress=function(t){var e=false;switch(t.state){case u.ODAG_STATE.VALIDATING:case u.ODAG_STATE.QUEUED:case u.ODAG_STATE.LOADING:case u.ODAG_STATE.CANCELING:e=true;break}return e};d.canReloadApp=function(t){var e=true;e=t&&!d.isHeaderInvalid&&!d.generateAppInProgress&&!d.requestInProgress(t);return e};d.validateAppName=function(){var t=true;d.inputName&&o.allowedChars(d.inputName)||(t=false);d.appNameValid=t};d.statusClicked=function(t,e){t.preventDefault();t.stopPropagation();d.moreMenuPopup&&d.moreMenuPopup.close();d.reloadMenuPopup&&d.reloadMenuPopup.close();if(d.expandedItem.item===e)d.expandedItem.item=null;else{d.selectedTab="status";d.expandedItem.item=e;d.scrollIfNecessary()}};d.selectTab=function(t){d.selectedTab=t;d.scrollIfNecessary()};d.inputKeyEnter=function(t){var e=t.target;e.blur()};d.onBlurGenAppName=function(){if(d.appNameValid)d.renameGenApp(d.expandedItem.item.requestId,d.inputName);else{d.inputName=d.expandedItem.item.name;d.validateAppName()}};d.scrollIfNecessary=function(){"status"===d.selectedTab&&l(function(){var n=e(t.find(".tab-contents"));n.scrollTop(n[0].scrollHeight)})};d.onReloadMenuClicked=function(t,e){t.preventDefault();t.stopPropagation();if(d.reloadMenuPopup)d.reloadMenuPopup.close();else{d.reloadMenuPopup=c.show({template:a,alignTo:t.target,variant:null,controller:["$scope",function(t){t.canReloadApp=function(){return d.canReloadApp(e)};t.reloadApp=function(n){n.preventDefault();n.stopPropagation();if(t.canReloadApp()){d.reloadMenuPopup.close();return d.reloadApp(e)}};t.canApplySelectionsReloadApp=function(){return d.canApplySelectionsForReload()};t.canCopyApplySelectionsReloadApp=function(){return!d.isGenerateBtnDisabled()};t.applySelectionsReloadApp=function(n){n.preventDefault();n.stopPropagation();if(t.canApplySelectionsReloadApp()){d.reloadMenuPopup.close();d.reloadApp(e,1)}};t.copyApplySelectionsReloadApp=function(n){n.preventDefault();n.stopPropagation();if(t.canApplySelectionsReloadApp()){d.reloadMenuPopup.close();d.reloadApp(e,2)}}}],closeOnResize:true,closeOnEscape:true});d.reloadMenuPopup.closed.then(function(){d.reloadMenuPopup=null})}}}],template:l})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-popover x-variant="{{::variant}}" x-arrow="arrow" qva-outside-ignore-for="allOutside">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list odag-request-menu" tid="odag-request-menu">\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canOpenApp()" ng-click="openApp( $event )" tid="openAppFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.menu.openApp">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canReloadApp()" ng-click="reloadApp( $event )" tid="reloadFromRequestMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.reload">\n\t\t\t\t</span>\n\t\t\t</li>\t\t\t\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-click="deleteApp( $event )" tid="deleteAppFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.menu.deleteApp">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},function(t,e){t.exports='<lui-popover x-variant="{{::variant}}" x-arrow="arrow" qva-outside-ignore-for="allOutside">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list odag-request-menu" tid="odag-request-reload-menu">\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canReloadApp()" ng-click="reloadApp( $event )" tid="reloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canApplySelectionsReloadApp()" ng-click="applySelectionsReloadApp( $event )" tid="applySelectionsReloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.applySelections.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canCopyApplySelectionsReloadApp()" ng-click="copyApplySelectionsReloadApp( $event )" tid="copyApplySelectionsReloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.copyAndApplySelections.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},function(t,e){t.exports='<div class="odag-app-list2" ng-class="$ctrl.variant">\n\t<div ng-if="$ctrl.applist.length === 0 && !$ctrl.loading" class="description">{{$ctrl.helpTextNoGeneratedApps}}</div>\n\t<ul ng-if="$ctrl.applist.length && !$ctrl.loading && !$ctrl.expandedItem.item" class="generated-apps-list">\n\t\t<li ng-repeat="genAppitem in $ctrl.applist" class="list-item" ng-click="$ctrl.rowClicked(genAppitem)">\n\t\t\t<div class="generated-app-item request-header">\n\t\t\t\t<div class="request-first">\n\t\t\t\t\t<div class="expander lui-icon lui-icon--triangle-right"></div>\n\t\t\t\t\t<div class="request-name-timestamp-area">\n\t\t\t\t\t\t<div class="request-first-top-line">\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="name" title="{{genAppitem.name}}" ng-class="{\'generating\': genAppitem.state === \'validating\' || genAppitem.state === \'queued\' || genAppitem.state === \'loading\' || genAppitem.state === \'canceling\'}">{{genAppitem.name}}</div>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t<div class="request-first-bottom-line timestamp">{{genAppitem.lastLoadedTime ? genAppitem.lastLoadedTime : genAppitem.timestamp }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="request-second">\n\t\t\t\t\t<button class="status-button lui-fade-button" qva-outside-ignore-for="allOutside" ng-click="$ctrl.statusClicked($event, genAppitem)">\n\t\t\t\t\t\t<span ng-hide="genAppitem.loading" class="lui-fade-button__icon lui-icon lui-icon--{{genAppitem.status}}"></span>\n\t\t\t\t\t\t<div ng-if="genAppitem.loading" class="genAppLoading qv-loader"></div>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="genAppitem.state === \'validating\' || genAppitem.state === \'queued\' || genAppitem.state === \'loading\'" class="lui-fade-button" title={{genAppitem.deleteIconTooltip}} ng-click="$ctrl.deleteClicked($event, genAppitem)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="!$ctrl.requestInProgress( genAppitem )" class="lui-fade-button" q-title-translation="odag.toolbar.navpoint.popup.request.moreMenu.tooltip" ng-click="$ctrl.moreMenuClicked($event, genAppitem)" ng-class="{\'lui-active\': $ctrl.moreMenuPopupItem === genAppitem}">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--more"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="!$ctrl.requestInProgress( genAppitem )" ng-disabled="!(genAppitem.state === \'succeeded\' || genAppitem.state === \'failed\' || genAppitem.state === \'canceled\') || !genAppitem.generatedAppId" class="lui-fade-button" q-title-translation="{{ $ctrl.openAppCallback ? \'odag.toolbar.navpoint.popup.request.openApp.generic.tooltip\' : \'odag.toolbar.navpoint.popup.request.openApp.tooltip\'}}" ng-click="$ctrl.openAppClicked($ctrl, $event, genAppitem)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--new-tab"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t</li>\n\t</ul>\n\t<div ng-if="$ctrl.expandedItem.item" class="gen-item-expand" qva-outside="$ctrl.onOutsideClick( $event )">\n\t\t<div class="details-container">\n\t\t\t<div class="request-header" ng-click="$ctrl.rowClicked(null)">\n\t\t\t\t<div class="request-first">\n\t\t\t\t\t<div class="expander lui-icon lui-icon--triangle-bottom" tid="odag-applist-expand"></div>\n\t\t\t\t\t<div class="request-name-timestamp-area">\n\t\t\t\t\t\t<div class="request-first-top-line">\n\t\t\t\t\t\t\t<div class="name" title="{{$ctrl.expandedItem.item.name}}" ng-class="{\'generating\': $ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\' || $ctrl.expandedItem.item.state === \'canceling\'}">{{$ctrl.expandedItem.item.name}}</div>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="request-first-bottom-line timestamp" >{{$ctrl.expandedItem.item.lastLoadedTime ? $ctrl.expandedItem.item.lastLoadedTime : $ctrl.expandedItem.item.timestamp }}</div>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="request-second">\n\t\t\t\t\t<button class="status-button lui-fade-button" qva-outside-ignore-for="allOutside" ng-click="$ctrl.statusClicked($event, $ctrl.expandedItem.item)">\n\t\t\t\t\t\t<span ng-if="!$ctrl.expandedItem.item.loading" class="lui-fade-button__icon lui-icon lui-icon--{{$ctrl.expandedItem.item.status}}"></span>\n\t\t\t\t\t\t<div ng-if="$ctrl.expandedItem.item.loading" class="genAppLoading qv-loader"></div>\n\t\t\t\t\t</button>\t\t\t\t\t\t\t\t\n\t\t\t\t\t<button ng-if="$ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\'" class="lui-fade-button" title={{$ctrl.expandedItem.item.deleteIconTooltip}} ng-click="$ctrl.deleteClicked($event, $ctrl.expandedItem.item)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="$ctrl.expandedItem.item.state === \'succeeded\' || $ctrl.expandedItem.item.state === \'failed\' || $ctrl.expandedItem.item.state === \'canceled\'" class="lui-fade-button" q-title-translation="{{ $ctrl.openAppCallback ? \'odag.toolbar.navpoint.popup.request.openApp.generic.tooltip\' : \'odag.toolbar.navpoint.popup.request.openApp.tooltip\'}}" ng-disabled="!($ctrl.expandedItem.item.state === \'succeeded\' || $ctrl.expandedItem.item.state === \'failed\' || $ctrl.expandedItem.item.state === \'canceled\') || !$ctrl.expandedItem.item.generatedAppId" ng-click="$ctrl.openAppClicked($ctrl, $event, $ctrl.expandedItem.item)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--new-tab"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t\t<div class="generateAppInput">\n\t\t\t\t<input class="lui-input" ng-disabled="$ctrl.generateAppInProgress || !$ctrl.expandedItem.item.generatedAppId || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\' || $ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'canceling\'" ng-model="$ctrl.inputName" type="text" name="name" maxlength="255" ng-blur="$ctrl.onBlurGenAppName()" ng-change="$ctrl.validateAppName()" qv-enter="$ctrl.inputKeyEnter($event)" ng-class="{ \'lui-invalid\': !$ctrl.appNameValid }"/>\n\t\t\t</div>\n\t\t\t<div class="action-button-section">\n\t\t\t\t<div class="lui-buttongroup reload-button">\n\t\t\t\t\t<lui-button ng-disabled="!$ctrl.canReloadApp( $ctrl.expandedItem.item )" ng-click="$ctrl.reloadClicked($event, $ctrl.expandedItem.item)" q-translation="odag.toolbar.navpoint.popup.request.reload"></lui-button>\n\t\t\t\t\t<lui-button ng-disabled="!$ctrl.canReloadApp( $ctrl.expandedItem.item ) " class= "reload-drop" tid="odag-reload-dropdown"\n ng-click="$ctrl.onReloadMenuClicked( $event, $ctrl.expandedItem.item )">\n\t\t\t\t\t\t<span class="lui-icon lui-caret"></span>\t\t\t\t\t\t\n\t\t\t\t\t</lui-button>\n\t\t\t\t</div>\n\t\t\t\t<lui-button ng-disabled="$ctrl.expandedItem.item.state !== \'succeeded\' && $ctrl.expandedItem.item.state !== \'failed\' && $ctrl.expandedItem.item.state !== \'canceled\' " tid="odag-applist-delete-app" class="delete-button" ng-click="$ctrl.deleteClicked($event, $ctrl.expandedItem.item)" ><span class="lui-icon  lui-button__icon lui-icon--bin"></span></lui-button>\n\t\t\t</div>\n\n\t\t\t<div class="tab-section">\n\t\t\t\t<div class="tab-header">\n\t\t\t\t\t<ul class="lui-tabset lui-tabset--fill">\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'info\' }" ng-click="$ctrl.selectTab(\'info\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'selections\' }" ng-click="$ctrl.selectTab(\'selections\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.selections"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'status\' }" ng-click="$ctrl.selectTab(\'status\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.status"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class="tab-contents">\n\t\t\t\t\t<div class="tab-content selection-tab" ng-if="$ctrl.selectedTab === \'selections\'">\n\t\t\t\t\t\t<div class="info-section selection-tab-top">\n\t\t\t\t\t\t\t<div class="info-text" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.helpText"></div>\n\t\t\t\t\t\t\t<div class="apply-selections-button">\n\t\t\t\t\t\t\t\t<lui-button ng-disabled="($ctrl.expandedItem.item.state !== \'succeeded\' && $ctrl.expandedItem.item.state !== \'failed\' && $ctrl.expandedItem.item.state !== \'canceled\') || $ctrl.applyInProgress" ng-if="$ctrl.expandedItem.item.canApplySelections" ng-click="$ctrl.applySelectionsClicked($ctrl.expandedItem.item)" q-translation="Common.Apply"></lui-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-field-header">\n\t\t\t\t\t\t\t<div class="selections-field" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.field"></div>\n\t\t\t\t\t\t\t<div class="selections-value" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.values"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-field-values">\n\t\t\t\t\t\t\t<div ng-if="$ctrl.expandedItem.item.selectionsState && $ctrl.expandedItem.item.selectionsState.length" ng-repeat="selection in $ctrl.expandedItem.item.selectionsState" class="selections-field-row">\n\t\t\t\t\t\t\t\t<div class="selections-field-data">{{selection.selectionAppParamName}}</div>\n\t\t\t\t\t\t\t\t<div class="selections-value-data">{{selection.valuesDisplayString}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div ng-if="!$ctrl.expandedItem.item.selectionsState" q-translation="odag.toolbar.navpoint.popup.request.tab.noSelectedValues"> </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-no-selections" ng-if="$ctrl.expandedItem.item.selectionsState && $ctrl.expandedItem.item.selectionsState.length === 0" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.noselections" >\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tab-content" ng-if="$ctrl.selectedTab === \'info\'">\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.status"></div>\n\t\t\t\t\t\t\t<div class="info-section-value" q-translation="odag.toolbar.navpoint.popup.request.tab.status.{{$ctrl.expandedItem.item.state}}"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.appOwner"></div>\n\t\t\t\t\t\t\t<div ng-if="!$ctrl.isOdagSaas" class="info-section-value">{{$ctrl.expandedItem.item.owner.userDirectory}}\\{{$ctrl.expandedItem.item.owner.userId}} ({{$ctrl.expandedItem.item.owner.name}})</div>\n\t\t\t\t\t\t\t<div ng-if="$ctrl.isOdagSaas" class="info-section-value">({{$ctrl.expandedItem.item.owner.name}})</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-section" ng-if="!$ctrl.isOdagSaas">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.publishToStream"></div>\n\t\t\t\t\t\t\t<div class="info-section-value"> {{$ctrl.expandedItem.item.publishToStreamName}} </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tab-content odag-request-status-content" ng-if="$ctrl.selectedTab === \'status\'">\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.lastCompletedRun"></div>\n\t\t\t\t\t\t\t<div class="info-section-value">{{$ctrl.expandedItem.item.lastLoadedTime ? $ctrl.expandedItem.item.lastLoadedTime : \'Common.None\' | translate }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-repeat="message in $ctrl.expandedItem.item.statusMessageArray" class="info-field-row" ng-if="$ctrl.expandedItem.item.statusMessageArray.length" ng-bind="message.message"></div>\n\t\t\t\t\t\t<div ng-repeat="error in $ctrl.expandedItem.item.progressErrors" class="info-field-row info-field-row-error" ng-if="$ctrl.expandedItem.item.progressErrors.length" ng-bind="error.message"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(981)],s=function(t,e){t.directive("qvProgressCircle",function(){return{scope:{percentage:"="},restrict:"E",template:e,link:function t(e,n){function i(){var t=e.percentage;var i=n.find(".progress-circle-svg .bar");var s=i.attr("r");var o=Math.PI*(2*s);if(Number.isNaN(+t)){t=100;i.css({strokeDashoffset:o,fill:"#CCCCCC"})}else{t<0&&(t=0);t>100&&(t=100);var r=(100-t)/100*o;i.css({strokeDashoffset:r});100===e.percentage?i.css({fill:"#61a729"}):i.css({fill:"transparent"})}}e.$watch("percentage",i)},controller:["$scope",function(t){t.$on("$destroy",function(){})}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<div class="progress-circle-container" ng-class="{\'full\': percentage === 100}">\n\t<svg class="progress-circle-svg" viewPort="0 0 0 0">\n\t\t<circle class="baseCircle" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t\t<circle class="whiteBar" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t\t<circle class="bar" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t</svg>\n</div>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(379),n(89)],s=function(t,e){function n(){return t.get().then(function(t){return t.getRestService()})}function i(t){return t}function s(t){if(t.stats.dims>9||t.stats.msrs>9)return e.resolve([]);var s={exploreSupplemental:["appNMinExplore"]};return n().then(function(e){return e.getVisRecommendations(t,true,s,[]).then(function(e){var n=[];var i=t.stats;e.appRecommendations.forEach(function(t){o(t)&&t.recAnalyses.forEach(function(t){r(t,i)&&n.push(t)})});return n})}).catch(i)}function o(t){return t&&t.group&&"insight"!==t.group}function r(t,e){if(t.isExtendedAnalysis)return false;var n=t.analysis.dims||[];var i=t.analysis.msrs||[];return n.length===e.dims&&i.length===e.msrs}function a(t){function e(t){if(t.isLibraryItem())return{libId:t.libId,cType:"eLibItem"};if(t.isFieldItem())return{field:t.name,expr:t.expr,cType:"eField"};return{expr:t.expr,cType:"eInlineExpr"}}var n={analysis:{analysis:"list",dims:t.dimensions.map(e),msrs:t.measures.map(e)}};return n}return{getChartRecommendations:s,getFallbackRecommendation:a}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(54),n(878),n(1113),n(90),n(186)],s=function(t,e,n,i,s){var r={createChartDataProperties:a,findPossibleCharts:u,findChartsByAnalysis:p};return r;function a(t,e){var n=t.analysis.dims||[];var i=t.analysis.msrs||[];function s(t,e){var n=-1;t.some(function(t,i){if(t.mapLayer&&t.mapLayer===e){n=i;return true}return false});return n}function o(t,e){var o,r;var a={};if(void 0!==e.index){o=e.index;r=e.index}else if(void 0!==e.indexRange){o=e.indexRange.start;r=e.indexRange.end}else if("area"===e.key){var l=s(n,"geo_poly");if(l>-1){o=l;r=l;var c=n[l];c.relatedGeoDim&&(a.mapProperties=c.relatedGeoDim)}}else if("points"===e.key){var u=s(n,"geo_point");if(u>-1){o=u;r=u;var p=n[u];p.relatedGeoDim&&(a.mapProperties=p.relatedGeoDim)}}else{o=-1;r=-1}for(var h=o;h<=r;h++){var f=d(e.key,e.classification,e.adapt,h,n,i,a);f&&t.push(f)}return t}var r=[];e.forEach(function(t){var e={type:t.chartType,score:t.score,encodings:t.analysis.encodings.reduce(o,[]),adapt:t.adapt};r.push(e)});return r}function l(t,e,n,i,s){for(var r in t){var a=t[r];if("object"==o(a)&&null!==a){var c=a.classification;if(c){var u=Number.isNaN(+a.max)?1:a.max,d=a.min||0;if(-1!==c.indexOf("measure")){a.pseudoDim&&u>1&&e.unallocated>1&&n.unallocated++;u>1?a.indexRange={start:e.capacity,end:e.capacity+u-1}:a.index=e.capacity;e.unallocated=e.unallocated-u;e.capacity+=u;e.required+=d;i.push(a)}if(-1!==c.indexOf("dimension")&&"color"!==a.key){var p=-1!==c.indexOf("numeric"),h=false;s.dimensions.length&&(h="N"===s.dimensions[0].qDimensionType);if(!p||p&&h){u>1?a.indexRange={start:n.capacity,end:n.capacity+u-1}:a.index=n.capacity;n.unallocated=n.unallocated-u;n.capacity+=u;n.required+=d;i.push(a)}}}l(a,e,n,i,s)}}}function c(t){t=t||[];var e=t.map(function(t){if(!t.qGroupFieldDefs&&t.libId)return t.libId;var e=t.qGroupFieldDefs||[];return e.map(function(t){return s.normalizeExpression(t)}).join(",")});return i.getUnique(e).length!==e.length}function u(t,n){var i=[];t.forEach(function(t){var s=[],o=e.getChartDataDefinition(t);if(o.encodings){var r={length:n.measures?n.measures.length:0,capacity:0,required:0,unallocated:n.measures?n.measures.length:null,isSupported:function t(){return this.unallocated<1&&this.capacity>=this.length&&this.required<=this.length}},a={length:n.dimensions?n.dimensions.length:0,capacity:0,required:0,unallocated:n.dimensions?n.dimensions.length:null,isSupported:function t(){var e=o.supportsDuplicateDimensions||!c(n.dimensions);return this.unallocated<1&&this.capacity>=this.length&&this.required<=this.length&&e}};l(o.encodings,r,a,s,n);if(r.isSupported()&&a.isSupported()){var u={chartType:t,score:-1,analysis:{encodings:s}};i.push(u)}}});return i}function d(t,e,i,s,o,r,a){var l=-1!==e.indexOf("dimension");var c=l?o:r;if(c.length<=s)return;var u=new n.Value(c[s]);var d=new n.Encoding(t,e,u,i,a);return d}function p(t,n){var i=[];var s=t.analysis;e.getSupportedChartTypes().forEach(function(t){var o=e.getChartDataDefinition(t);if(o.analyses){var r=o.analyses.filter(function(t){if(t.analysis!==s.analysis)return false;if(!h(s.dims,t.dimensions))return false;if(!h(s.msrs,t.measures))return false;if(t.criteria&&!t.criteria(n))return false;var e=o.supportsDuplicateDimensions||!c(n.dimensions);if(!e)return false;return true});r.forEach(function(e){var n={chartType:t,encodings:o.encodings,score:e.score||0,adapt:e.adapt,analysis:e};i.push(n)})}});return i}function h(e,n){if(t.isObject(n)){if(f(e?e.length:0,n.min,n.max))return true}else if(f(e?e.length:0,n,n))return true;return false}function f(t,e,n){return t>=e&&t<=n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(49)],s=function(t){var e={type:"barchart",supportsDuplicateDimensions:true,encodings:[{key:"bars",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",min:t.getFlag("BARCHART")?0:1,encodings:[{key:"height",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",pseudoDim:true,min:1,max:15},{key:"groupStack",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0"},{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"}]}],analyses:[{analysis:"rank",dimensions:1,measures:1,score:5,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"timeCycle",dimensions:1,measures:2,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",indexRange:{start:0,end:1}}]},{analysis:"trend",dimensions:1,measures:1,score:101,criteria:function t(e){var n=e.getMetaDataForDimension(0);if(n)return n.qCardinal&&n.qCardinal<5&&n.qCardinal>1;return false},encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"ytdAnalysis",dimensions:2,measures:1,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"group",classification:"dimension",index:"1"},{key:"height",classification:"measure",indexRange:{start:0,end:1}}],adapt:function t(e){e.qHyperCubeDef.qDimensions[1].qNullSuppression=true}},{analysis:"countBasedRank",dimensions:1,measures:1,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"breakdown",dimensions:1,measures:{min:2,max:15},encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",indexRange:{start:0,end:14}}]},{analysis:"breakdown",dimensions:2,measures:1,criteria:function t(e){var n=e.getMetaDataForDimension(0);if(n)return n.qCardinal&&n.qCardinal<13&&e.isPerfectHierarchy();return false},encodings:[{key:"bars",classification:"dimension",index:"1"},{key:"color",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"breakdown",dimensions:2,measures:1,criteria:function t(e){return e.isPerfectHierarchy()},encodings:[{key:"bars",classification:"dimension",index:"1"},{key:"group",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]}]};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"kpi",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",classification:"measure",min:1,max:2}],analyses:[{analysis:"list",dimensions:0,measures:{min:1,max:1},score:10,encodings:[{key:"values",classification:"measure",index:0}]},{analysis:"fact",dimensions:0,measures:{min:1,max:2},score:15,encodings:[{key:"values",classification:"measure",indexRange:{start:0,end:1}}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){var e={type:"gauge",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",classification:"measure",min:1}],analyses:[{analysis:"fact",dimensions:0,measures:1,criteria:function t(e){var n=e.getMetaDataForMeasure(0);if(n){if(!e.hasOwnProperty("intermediateHyperCube")||e.intermediateHyperCube)return n.qMin>0&&n.qMax<1;if(n.classification&&"percentage"===n.classification)return true}return false},score:20,encodings:[{key:"values",classification:"measure",index:"0"}],adapt:function e(n){t.setValue(n,"measureAxis.max",1);n.disclaimerClosed=true}}]};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"scatterplot",supportsDuplicateDimensions:true,encodings:[{key:"dots",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"dimension",min:1,encodings:[{key:"x-axis",classification:"measure",path:"qHyperCubeDef.qMeasures.0.qDef.qDef",min:1},{key:"y-axis",classification:"measure",path:"qHyperCubeDef.qMeasures.1.qDef.qDef",min:1},{key:"size",classification:"measure",path:"qHyperCubeDef.qMeasures.2.qDef.qDef"},{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"},{key:"color",classification:"measure",path:"qHyperCubeDef.qDimensions.0.qAttributeExpressions.0"}]}],analyses:[{analysis:"comparison",dimensions:1,measures:{min:2,max:4},score:10,encodings:[{key:"dots",classification:"dimension",index:"0"},{key:"x-axis",classification:"measure",index:"0"},{key:"y-axis",classification:"measure",index:"1"},{key:"size",classification:"measure",index:"2"},{key:"color",classification:"measure",index:"3"}]},{analysis:"comparison",dimensions:2,measures:{min:2,max:3},criteria:function t(e){return e.isPerfectHierarchy()},score:10,encodings:[{key:"dots",classification:"dimension",index:"1"},{key:"color",classification:"dimension",index:"0"},{key:"x-axis",classification:"measure",index:"0"},{key:"y-axis",classification:"measure",index:"1"},{key:"size",classification:"measure",index:"2"}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"linechart",supportsDuplicateDimensions:false,encodings:[{key:"linePoints",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"dimension",min:1,encodings:[{key:"lines",classification:"dimension",path:"qHyperCubeDef.qDimensions.1.qDef.qFieldDefs.0"},{key:"position",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",pseudoDim:true,min:1,max:15}]}],analyses:[{analysis:"trend",dimensions:1,measures:{min:1,max:4},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"position",classification:"measure",indexRange:{start:0,end:3}}]},{analysis:"trend",dimensions:2,measures:1,criteria:function t(e){if(!e.qSize)return false;var n=e.getMetaDataForDimension(1);if(n&&n.qCardinal>12)return false;var i=e.getMetaDataForDimension(0);var s=e.getMetaDataForDimension(1);var o=i.qCardinal*s.qCardinal;return o===e.qSize.qcy},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"lines",classification:"dimension",index:"1"},{key:"position",classification:"measure",index:"0"}],adapt:function t(e){e.lineType="area";e.stackedArea=true}},{analysis:"trend",dimensions:2,measures:1,criteria:function t(e){var n=e.getMetaDataForDimension(1);return n&&n.qCardinal<13},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"lines",classification:"dimension",index:"1"},{key:"position",classification:"measure",index:"0"}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"table",supportsDuplicateDimensions:true,encodings:[{key:"columns",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0",min:0,max:15},{key:"columns",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",max:15}],analyses:[{analysis:"list",dimensions:{min:0,max:15},measures:{min:0,max:15},encodings:[{key:"columns",classification:"dimension",indexRange:{start:0,end:14}},{key:"columns",classification:"measure",indexRange:{start:0,end:14}}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(49)],s=function(t){var e=t.getFlag("PIE_RADIUS");var n={type:"piechart",supportsDuplicateDimensions:true,encodings:[{key:"slices",path:"qHyperCubeDef.qDimensions.0",classification:"dimension",min:1,encodings:e?[{key:"angle",path:"qHyperCubeDef.qMeasures.0",classification:"measure",min:1},{key:"radius",path:"qHyperCubeDef.qMeasures.1",classification:"measure"}]:[{key:"angle",path:"qHyperCubeDef.qMeasures.0",classification:"measure",min:1},{key:"color",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0",classification:"dimension"},{key:"color",classification:"measure"}]}],analyses:[{analysis:"rank",dimensions:1,measures:1,score:10,criteria:function t(e){var n=e.getMetaDataForDimension(0);var i=e.getMetaDataForMeasure(0);if(n&&n.qCardinal<13&&i&&i.aggregation&&"sum"===i.aggregation.toLowerCase()&&e.isSummable())return true;return false},encodings:e?[{key:"slices",classification:"dimension",index:"0"},{key:"angle",classification:"measure",index:"0"},{key:"radius",classification:"measure",index:"1"}]:[{key:"slices",classification:"dimension",index:"0"},{key:"color",classification:"dimension",index:"0"},{key:"angle",classification:"measure",index:"0"}]}]};return n}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"combochart",supportsDuplicateDimensions:false,encodings:[{key:"records",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",min:1,encodings:[{key:"bars",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef"},{key:"lines",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.series",min:1,max:15}]}],analyses:[{analysis:"trend",dimensions:1,measures:2,score:10,criteria:function t(e){function n(t){return Math.log(t)/Math.LN10}var i=e.getMetaDataForMeasure(0);var s=e.getMetaDataForMeasure(1);var o=Math.floor(n(i.qMax));var r=Math.floor(n(s.qMax));var a=Math.abs(o-r);return a>=1},encodings:[{key:"records",classification:"dimension",index:"0"},{key:"bars",classification:"measure",index:"0"},{key:"lines",classification:"measure",index:"1"}]},{analysis:"contribution",dimensions:1,measures:2,score:20,adapt:function t(e){var n=[{qSortByState:0,qSortByFrequency:0,qSortByNumeric:-1,qSortByAscii:-1,qSortByLoadOrder:-1,qExpression:{qv:e.qHyperCubeDef.qMeasures[0].qDef.qDef},qSortByExpression:-1,qSortByGreyness:0}];var i={qType:"R",qnDec:2,qUseThou:0,qFmt:"#,##0.00%",qDec:".",qThou:","};e.qHyperCubeDef.qDimensions[0].qDef.qSortCriterias=n;e.qHyperCubeDef.qMeasures[1].qDef.qNumFormat=i},encodings:[{key:"records",classification:"dimension",index:"0"},{key:"bars",classification:"measure",index:"0"},{key:"lines",classification:"measure",index:"1"}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"treemap",supportsDuplicateDimensions:false,encodings:[{key:"blocks",classification:"dimension",path:["qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0","qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldLabels.0"],min:1,max:15,encodings:[{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"},{key:"size",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",min:1},{key:"color",classification:"measure",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrExps.0"}]}],analyses:[{analysis:"breakdown",dimensions:{min:2,max:15},measures:{min:1,max:2},criteria:function t(e){var n=e.getMetaDataForDimension(0);if(n&&n.qCardinal>12)return false;if(!e.isPerfectHierarchy())return false;var i=false;var s=e.getMetaDataForMeasure(0);var o=e.getMetaDataForMeasure(1);s&&s.qMin>=0&&(i=!o||o.qMin>=0);return i},score:10,encodings:[{key:"blocks",classification:"dimension",index:"0"},{key:"group",classification:"dimension",indexRange:{start:1,end:14}},{key:"size",classification:"measure",index:"0"},{key:"color",classification:"measure",index:"1"}]},{analysis:"breakdown",dimensions:2,measures:{min:1,max:2},criteria:function t(e){var n=e.getMetaDataForDimension(1);if(n&&n.qCardinal>12)return false;var i=e.getMetaDataForMeasure(0);var s=e.getMetaDataForMeasure(1);if(i&&i.qMin>=0)return!s;return false},encodings:[{key:"blocks",classification:"dimension",index:"1"},{key:"group",classification:"dimension",index:"0"},{key:"size",classification:"measure",index:"0"},{key:"color",classification:"measure",index:"1"}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){var e={type:"map",supportsDuplicateDimensions:true,encodings:[{key:"point",classification:"dimension",min:1,encodings:[{key:"size",classification:"dimension"},{key:"color",classification:"measure"}]}],analyses:[{analysis:"polymapdistribution",dimensions:1,measures:{min:0,max:1},criteria:function t(){return true},score:100,encodings:[{key:"area",classification:"dimension",index:"0"},{key:"color",classification:"measure",index:"0"}]},{analysis:"pointmapdistribution",dimensions:1,measures:{min:0,max:2},criteria:function t(){return true},score:100,encodings:[{key:"points",classification:"dimension",index:"0"},{key:"custom",classification:"measure",index:"0",adapt:function e(n,i){if(i.isFieldValue()||i.isExpressionValue()){t.setValue(n,"size.expression.key",i.getExpression());t.setValue(n,"size.expression.label",i.getExpression());t.setValue(n,"size.expression.type","expression")}else if(i.isLibraryValue()){t.setValue(n,"size.expression.key",i.getLibraryId());t.setValue(n,"size.expression.label","");t.setValue(n,"size.expression.type","libraryItem")}}},{key:"color",classification:"measure",index:"1"}]},{analysis:"geoAnalysis",dimensions:{min:1,max:2},measures:{min:0,max:2},criteria:function t(){return true},score:100,encodings:[{key:"area",classification:"dimension"},{key:"points",classification:"dimension"},{key:"color",classification:"measure",index:"0"},{key:"custom",classification:"measure",index:"1",adapt:function e(n,i){if(i.isFieldValue()||i.isExpressionValue()){t.setValue(n,"size.expression.key",i.getExpression());t.setValue(n,"size.expression.label",i.getExpression());t.setValue(n,"size.expression.type","expression")}else if(i.isLibraryValue()){t.setValue(n,"size.expression.key",i.getLibraryId());t.setValue(n,"size.expression.label","");t.setValue(n,"size.expression.type","libraryItem")}}}]}]};return e}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"distributionplot",supportsDuplicateDimensions:false,encodings:[{key:"records",classification:"dimension",min:1,encodings:[{key:"bars",classification:"dimension"},{key:"lines",classification:"measure",min:1}]}],analyses:[{analysis:"overview",dimensions:{min:1,max:2},measures:1,criteria:function t(e){var n=false;var i=e.getMetaDataForDimension(0);var s=e.getMetaDataForDimension(1);i&&i.qCardinal<=500&&(s?s&&s.qCardinal<=500&&(n=true):n=true);return n},encodings:[{key:"records",classification:"dimension",index:"1"},{key:"bars",classification:"dimension",index:"0"},{key:"lines",classification:"measure",index:"0"}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"boxplot",supportsDuplicateDimensions:true,encodings:[{key:"records",classification:"dimension",min:1,encodings:[{key:"bars",classification:"dimension"},{key:"lines",classification:"measure",min:1}]}],analyses:[{analysis:"overview",dimensions:{min:1,max:2},measures:1,criteria:function t(e){var n=false;var i=e.getMetaDataForDimension(0);var s=e.getMetaDataForDimension(1);i&&i.qCardinal>500?n=true:s&&s.qCardinal>500&&(n=true);return n},encodings:[{key:"records",classification:"dimension",index:"1"},{key:"bars",classification:"dimension",index:"0"},{key:"lines",classification:"measure",index:"0"}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"histogram",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"numeric dimension",min:1}],analyses:[{analysis:"values",dimensions:1,measures:0,criteria:function t(e){var n=e.getMetaDataForDimension(0);if(n&&("integer"===n.dataType||"double"===n.dataType))return true;return false},encodings:[{key:"values",classification:"dimension",index:0}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"pivot-table",supportsDuplicateDimensions:false,encodings:[{key:"rows",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0",min:1,max:15},{key:"values",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",min:1,max:15}],analyses:[{analysis:"rank",dimensions:{min:2,max:15},measures:{min:1,max:15},encodings:[{key:"rows",classification:"dimension",indexRange:{start:0,end:14}},{key:"values",classification:"measure",indexRange:{start:0,end:14}}]}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){this.type="eLibItem"===t.cType?"library":"eField"===t.cType?"field":"eInlineExpr"===t.cType?"expression":"unknown";this.expr=t.expr;this.field=t.field;this.libId=t.libId}t.prototype.isLibraryValue=function(){return"library"===this.type};t.prototype.getLibraryId=function(){return this.libId};t.prototype.isFieldValue=function(){return"field"===this.type};t.prototype.getFieldName=function(){return this.field||this.expr};t.prototype.isExpressionValue=function(){return"expression"===this.type};t.prototype.getExpression=function(){return this.expr};function e(t,e,n,i,s){this.key=t;this.classification=e;this.value=n;this.adapt=i;this.optionalObj=s}e.prototype.isMeasure=function(){return-1!==this.classification.indexOf("measure")};e.prototype.isDimension=function(){return-1!==this.classification.indexOf("dimension")};e.prototype.isColorBy=function(){return"color"===this.key};e.prototype.isCustom=function(){return"custom"===this.key};return{Value:t,Encoding:e}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90),n(282),n(204),n(483),n(879),n(89),n(186)],s=function(t,e,n,i,s,o,r){s=s.default;return{generateProperties:d};function a(e,o,r,a,l,c,u){var d=s.getInitialProperties(e);d.cId=t.generateId();var h=s.getDataSection().items.data;o.gaLayers.unshift(d);var f=d;var g=new n({app:r,dimensionDefinition:h.dimension||{},measureDefinition:h.measure||{},dimensionProperties:d.qHyperCubeDef.qDimensions,measureProperties:d.qHyperCubeDef.qMeasures,globalChangeListeners:[function(t){i.colorByUpdater(t,"qHyperCubeDef.",t.color)}]});g.setProperties(f);return p(g,o,f,a,l,c,u)}function l(t,e,n){var i=["points","custom"];var s=["area"];var o=["color"];var r=[];if(t||e){var a=[];var l=[];if(t){a=u(s,o,n);r[t]=a}if(e){l=a.length>0?u(i,[],n):u(i,o,n);r[e]=l}}return r}function c(t,e){var n=[];e.forEach(function(e){var i=e.key;t.indexOf(i)>=0&&n.push(e)});return n}function u(t,e,n){var i=[];var s=c(t,n);if(s.length>0){i.push.apply(i,s);if(e.length>0){var o=c(e,n);i.push.apply(i,o)}}return i}function d(t,n,i){var s=t.type;return o.all([e.getExtensionType(s),e.getInitialProperties(s)]).then(function(e){var r=e[0];var c=e[1];c.isRecommended=t.score>-1;var u;var d=c;if("map"===s){var h="AreaLayer";var f="PointLayer";var g=[];var v=[];var m=l(h,f,t.encodings);m[h]&&(v=m[h]);m[f]&&(g=m[f]);if(g.length>0&&v.length>0){a(f,c,i,n,t,g,r);return a(h,c,i,n,t,v,r)}return g.length>0?a(f,c,i,n,t,g,r):h.length>0?a(h,c,i,n,t,v,r):o.resolve()}d=c;r.mapProperties();u=r.getCreatePropertyHandler.call(r,i);u.setProperties(d);return p(u,c,d,n,t,t.encodings,r)})}function p(t,e,n,i,s,o,r){var a={dimensions:i?i.qHyperCubeDef.qDimensions.map(function(t){return t}):[],measures:i?i.qHyperCubeDef.qMeasures.map(function(t){return t}):[]};return h(o,0,a,n,t).then(function(){s.adapt&&s.adapt(e);m(e);var t=r.exportProperties&&r.importProperties;return t?r.importProperties(r.exportProperties({qProperty:e},r.options.hyperCubePath),e,r,r.options.hyperCubePath).qProperty:e})}function h(t,e,n,i,s){if(e>=t.length)return o.resolve();return f(t[e],n,i,s).then(function(){return h(t,e+1,n,i,s)})}function f(e,n,s,a){var l=e.value;if(e.isColorBy()){if(s.color){var c=e.isMeasure();var u=g(e,n);var d;if(l.isFieldValue()||l.isExpressionValue()){d={type:c?"expression":"field",name:c||l.isExpressionValue()?l.getExpression():l.getFieldName()};u&&(d.label=c?u.qDef.qLabel:u.qDef.qFieldLabels[0]);d.label||(d.label=r.convertEvaluationExpressionToLabel(d.name))}else l.isLibraryValue()&&(d={type:c?"measure":"dimension",id:l.getLibraryId()});if(d){e.adapt&&e.adapt(d);i.setColorByPropertyDef(s.color,d);a.updateGlobalChangeListeners()}}}else if(e.isCustom())e.adapt(s,l);else if(e.isMeasure()){var p;var h=g(e,n);if(h)p=t.extend(true,{},h);else if(l.isFieldValue()||l.isExpressionValue()){var f=l.getExpression();var v=r.convertEvaluationExpressionToLabel(f);p=a.createExpressionMeasure(f,v)}else if(l.isLibraryValue()){var m=l.getLibraryId();p=a.createLibraryMeasure(m)}if(p){e.adapt&&e.adapt(p);return a.addMeasure(p,void 0,void 0,true)}}else if(e.isDimension()){var b;var y=g(e,n);if(y)b=t.extend(true,{},y);else if(l.isFieldValue()){var x=r.convertEvaluationExpressionToLabel(l.getFieldName());var q=l.getExpression();b=a.createFieldDimension(q,x)}else if(l.isExpressionValue()){var S=l.getExpression();var w=r.convertEvaluationExpressionToLabel(S);b=a.createFieldDimension(S,w)}else if(l.isLibraryValue()){var C=l.getLibraryId();b=a.createLibraryDimension(C)}if(b){e.adapt&&e.adapt(b);return a.addDimension(b).then(function(){var t=e.optionalObj;if(t&&t.mapProperties){var n=t.mapProperties;var i="";b.qDef&&b.qDef.qFieldDefs&&b.qDef.qFieldDefs.length>0&&(i=b.qDef.qFieldDefs[0]);a.properties.locationOrLatitude.key=n.expr;a.properties.locationOrLatitude.label=n.field;a.properties.locationOrLatitude.type="expression";a.properties.locationDefault=a.properties.locationOrLatitude.key;a.properties.label.expression.key=i;a.properties.label.expression.type="expression";a.properties.label.expression.label="dimension.qDef.qFieldDefs[0]"}})}}return o.resolve()}function g(t,e){var n=t.value;if(t.isMeasure()){if(n.isFieldValue()||n.isExpressionValue()){var i=n.getExpression();var s=r.normalizeExpression(i);var o=v(e.measures,function(t){return t.qDef&&r.normalizeExpression(t.qDef.qDef)===s});return o}if(n.isLibraryValue()){var a=n.getLibraryId();var l=v(e.measures,function(t){return t.qLibraryId===a});return l}}else if(t.isDimension()){if(n.isFieldValue()){var c=n.getExpression();var u=r.normalizeExpression(c);var d=v(e.dimensions,function(t){return t.qDef&&t.qDef.qFieldDefs&&r.normalizeExpression(t.qDef.qFieldDefs[0])===u});return d}if(n.isExpressionValue()){var p=n.getExpression();var h=r.normalizeExpression(p);var f=v(e.dimensions,function(t){return t.qDef&&t.qDef.qFieldDefs&&r.normalizeExpression(t.qDef.qFieldDefs[0])===h});return f}if(n.isLibraryValue()){var g=n.getLibraryId();var m=v(e.dimensions,function(t){return t.qLibraryId===g});return m}}return}function v(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(e(i)){t.splice(n,1);return i}}return}function m(e){if(e.qHyperCubeDef){var n=e.qHyperCubeDef.qDimensions;var i=e.qHyperCubeDef.qMeasures;n.forEach(function(e){e.qDef.cId=t.generateId()});i.forEach(function(e){e.qDef.cId=t.generateId()})}}}.apply(e,i),void 0!==s&&(t.exports=s))},,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(54),n(89),n(186),n(1117),n(229),n(233)],s=function(t,e,n,i,s,o){return{createDataCollection:r,adaptDataCollectionForRecommendations:a};function r(e,r,a){if(a)return s.createDataCollection(a,r.qHyperCubeDef.qDimensions,r.qHyperCubeDef.qMeasures);return n.all({appFieldList:e.getFieldList(),classificationsResult:t.getService("classificationService").getClassification()}).then(function(t){var e=t.appFieldList;var n=t.classificationsResult;var a=n?new o(n):void 0;i.addClassificationDataToFields(e,a);return s.createDataCollection(e,r.qHyperCubeDef.qDimensions,r.qHyperCubeDef.qMeasures)})}function a(t,e){var n={fields:[],libItems:[],expressions:[]};t.dimensions.forEach(function(t,s){var o={};if(e.qDimensionInfo&&e.qDimensionInfo.length>s){var r=e.qDimensionInfo[s];o.distinctCount=r.qCardinal}if(t.isLibraryItem())n.libItems.push({libId:t.libId,overrides:o});else if(t.isFieldItem()){n.fields.push({name:t.name,overrides:o});i.isDimension(t.defaultClassifications)||(o.classifications=[i.Constants.dimension])}else{n.expressions.push({expr:t.expr,overrides:o});l(t.expr,e)?o.classifications=[i.Constants.temporal]:o.classifications=[i.Constants.dimension]}});t.measures.forEach(function(t,s){var o={};if(e.qMeasureInfo&&e.qMeasureInfo.length>s){var r=e.qMeasureInfo[s];o.valueRange={min:r.qMin,max:r.qMax}}if(t.isLibraryItem())n.libItems.push({libId:t.libId,overrides:o});else if(t.isFieldItem()){n.fields.push({name:t.name,overrides:o});o.defaultAggregation=t.aggregation;i.isMeasure(t.defaultClassifications)||(o.classifications=[i.Constants.measure])}else{n.expressions.push({expr:t.expr,overrides:o});o.classifications=[i.Constants.measure]}});n.stats={total:t.dimensions.length+t.measures.length,dims:t.dimensions.length,msrs:t.measures.length};return n}function l(t,n){if(n&&n.qDimensionInfo){var i=e.find(n.qDimensionInfo,function(e){return e.qGroupFieldDefs&&e.qGroupFieldDefs.indexOf(t)>=0});return i&&i.qDerivedField}return false}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(92),n(1118)],s=function(t,e,n){var i=["sum","count","avg","min","max"];var s=e.extend("DataCollectionFactory",{getField:function e(n,i){return t.find(n,function(t){return t.qName===i})},isAggregation:function t(e){return e&&i.indexOf(e.toLowerCase())>=0},unwrapName:function t(e){var n="["===e.charAt(0)&&"]"===e.charAt(e.length-1)?e.substring(1,e.length-1):e;return n},createDataCollection:function t(e,i,s){var o=this;var r=new n.DataCollection;i.forEach(function(t){var i;if(t.qLibraryId)i=new n.Dimension({libId:t.qLibraryId});else{var s=t.qDef.qFieldDefs[0];var a=o.unwrapName(s);var l=o.getField(e,a);i=l?new n.Dimension({dataTypes:l.dataTypes,defaultClassifications:l.classifications,name:a,expr:s}):new n.Dimension({expr:s})}i&&r.dimensions.push(i)});s.forEach(function(t){var i;if(t.qLibraryId)i=new n.Measure({libId:t.qLibraryId});else{var s=t.qDef.qDef;var a=/^=?(.+)\(((\[(.+)\])|((.+)))\)$/;var l=a.exec(s);if(l){l=l.filter(function(t){return t});if(l.length>=5){var c=l[1];var u=l[4];c&&(c=c.trim());if(o.isAggregation(c)){var d=o.getField(e,u);d&&(i=new n.Measure({dataTypes:d.dataTypes,defaultClassifications:d.classifications,defaultAggregation:d.defaultAggregation,aggregation:c,name:u,expr:s}))}}}i||(i=new n.Measure({expr:s}))}i&&r.measures.push(i)});return r},merge:function t(e){var i=new n.DataCollection;e.forEach(function(t){i.dimensions=i.dimensions.concat(t.dimensions);i.measures=i.measures.concat(t.measures)});return i}});return new s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){this.name=t.name;this.expr=t.expr;this.defaultClassifications=t.defaultClassifications;this.libId=t.libId;this.dataTypes=t.dataTypes}t.prototype.isLibraryItem=function(){return!!this.libId};t.prototype.isFieldItem=function(){return!!this.name};function e(t){this.name=t.name;this.aggregation=t.aggregation;this.defaultAggregation=t.defaultAggregation;this.defaultClassifications=t.defaultClassifications;this.expr=t.expr;this.libId=t.libId;this.dataTypes=t.dataTypes}e.prototype.isLibraryItem=function(){return!!this.libId};e.prototype.isFieldItem=function(){return!!this.name};function n(){this.dimensions=[];this.measures=[]}n.prototype.size=function(){return this.dimensions.length+this.measures.length};return{Dimension:t,Measure:e,DataCollection:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(54),n(90),n(1120),n(186)],s=function(t,e,n,i){var s={collectFromRecommendation:r,merge:l};function o(t,e,n,s){s=s||[];var o=-1;t&&e&&e.some(function(e,r){"dimension"===n?(t.qLibraryId&&t.qLibraryId===e.libId||i.normalizeExpression(t.qDef.qFieldDefs[0])===i.normalizeExpression(e.expr))&&-1===s.indexOf(r)&&(o=r):"measure"===n&&(t.qLibraryId&&t.qLibraryId===e.libId||i.normalizeExpression(t.qDef.qDef)===i.normalizeExpression(e.expr))&&(o=r);return-1!==o});return o}function r(e){var i=e.analysis.dims?e.analysis.dims:[];var s=e.analysis.msrs?e.analysis.msrs:[];var o=e.matchRecord?e.matchRecord.matches:[];var r=i.map(function(t){var e={dataType:"",qCardinal:0};if("eField"===t.cType){e.expr=t.expr;e.qGroupFieldDefs=[t.field]}else"eInlineExpr"===t.cType?e.expr=t.expr:"eLibItem"===t.cType&&(e.libId=t.libId);if(t.fieldStats){e.dataType=t.fieldStats.dataType||"";e.qCardinal=t.fieldStats.distinctCount||0}return e});var l=s.map(function(e){var n={dataType:"",qMax:0,qMin:0,aggregation:"",libItemLabel:""};if("eField"===e.cType){n.expr=e.expr;var i=t.findWhere(o,{field:e.field});i&&i.aggr&&(n.aggregation=i.aggr)}else"eInlineExpr"===e.cType?n.expr=e.expr:"eLibItem"===e.cType&&(n.libId=e.libId);if(e.fieldStats){n.dataType=e.fieldStats.dataType||"";if(e.fieldStats.valueRange){n.qMax=e.fieldStats.valueRange.max;n.qMin=e.fieldStats.valueRange.min}if("eLibItem"===e.cType&&e.fieldStats.classification&&e.fieldStats.classification.length>0){var s=e.fieldStats.classification[0];n.classification=s}}return n});var c=a(e);var u={};u.intermediateHyperCube=false;return new n(r,l,c,u)}function a(e){var n=[];var i=e.analysis;var s=e.matchRecord;if(s&&i.dims&&i.dims.length>1){var o=true;for(var r=1;r<i.dims.length;r++){var a=i.dims[r];if("eField"!==a.cType){o=false;break}var l=t.findWhere(s.matches,{field:a.field});if(!l.groupCriteria||l.groupCriteria.indexOf("sameHierarchy")<0){o=false;break}}o&&n.push({name:"perfectHierarchy",result:"1"})}return n}function l(t,i,s,r){var l=r.analysis.dims?r.analysis.dims:[];var c=r.analysis.msrs?r.analysis.msrs:[];var u=new Array(c.length);var p=new Array(l.length);var h=[];t.qDimensionInfo.forEach(function(e,n){var a=i.qDimensions[n];var l=o(a,r.analysis.dims,"dimension",h);h.push(l);p.splice(l,1,d(t.qDimensionInfo[n],n,"dimension",i,s))});t.qMeasureInfo.forEach(function(e,n){var a=i.qMeasures[n];var l=o(a,r.analysis.msrs,"measure");u.splice(l,1,d(t.qMeasureInfo[n],n,"measure",i,s))});var f={qSize:e.extend(true,{},t.qSize)};var g=a(r);return new n(p,u,g,f)}function c(t,e,n,i,s){var o;var r=[];switch(i){case"dimension":r=s.dimensions;break;case"measure":r=s.measures;break}r.some(function(i){var s=false;if(e){s=i.expr===e;t.dataType=i.dataTypes&&i.dataTypes.length>0?i.dataTypes[0]:null;t.aggregation=i.aggregation?i.aggregation:null}else n&&(s=i.libId===n);o=s?i:o;return s})}function u(t,e,n,i,s){var o;var r;var a;function l(t,e){var n=!!o.qLibraryId;n?a=o.qLibraryId:"dimension"===e?r=o.qDef.qFieldDefs[0]:"measure"===e&&(r=o.qDef.qDef)}if("dimension"===n){o=i.qDimensions[e];l(o,"dimension")}else if("measure"===n){o=i.qMeasures[e];l(o,"measure")}c(t,r,a,n,s)}function d(t,n,i,s,o){var r=e.extend(true,{},t,n);u(r,n,i,s,o);return r}return s}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(90)],s=function(t){function e(e,n,i,s){this.measures=n;this.dimensions=e;this.overallIndicators=i;t.extend(true,this,s)}e.prototype.getMetaDataForDimension=function(t){if(this.dimensions.length>t){var e=this.dimensions[t];return e}return};e.prototype.getMetaDataForMeasure=function(t){if(this.measures.length>t){var e=this.measures[t];return e}return};e.prototype.getIndicatorByName=function(t){var e=void 0;this.overallIndicators&&this.overallIndicators.some(function(n){var i=n.name===t;i&&(e=n);return i});return e};e.prototype.isSummable=function(){var t=this.getIndicatorByName("summable");return t&&"1"===t.result};e.prototype.isPerfectHierarchy=function(){var t=this.getIndicatorByName("perfectHierarchy");return t&&"1"===t.result};return e}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(2043),n(2045),n(2050)],s=function(t,e,n){return{connectDialog:t,selectDialog:e,connectorMain:n}}.apply(e,i),void 0!==s&&(t.exports=s))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,s;!(i=[n(48),n(2044),n(91)],s=function(t,e,n){var i={restrict:"E",template:e,replace:true,scope:{},controller:["$scope",function(t){t.model={host:"",port:"",model:"",connectionName:""};t.editMode=t.input.editMode;t.isLoading=true;var e;var i=function n(){return t.input.serverside.sendJsonRequest("getConnectionInfo","",t.model.connectionName).then(function(n){t.isLoading=false;e=n;t.model.host=e.properties.propertiesList[0];t.model.port=e.properties.propertiesList[1];t.model.model=e.properties.propertiesList[2]})};if(t.editMode){t.isLoading=true;t.input.serverside.getConnection(t.input.instanceId).then(function(e){t.model.connectionName=e.qConnection.qName;i()})}else i();t.$watch("model",function(){t.connectionTestMessage=""},true);t.testConnection=function(){t.isLoading=true;t.input.serverside.sendJsonRequest("testConnection",e.sessionId,{propertiesList:e.properties.propertiesList},t.model.connectionName).then(function(e){t.isLoading=false;e.success?t.connectionTestMessage=n.get("scripteditor.dataconnectors.testconnection.succeeded"):t.connectionTestMessage=n.get("scripteditor.dataconnectors.testconnection.failed")})};t.createConnection=function(){t.isLoading=true;t.editMode?t.input.serverside.sendJsonRequest("getConnectionString",e.sessionId,{propertiesList:e.properties.propertiesList},t.model.connectionName).then(function(e){t.input.serverside.modifyConnection(t.input.instanceId,t.model.connectionName,e.connectionString,"BDI.exe").then(function(e){t.isLoading=false;e&&t.destroyComponent()},t.handleErrors)}):t.input.serverside.sendJsonRequest("getConnectionString",e.sessionId,{propertiesList:e.properties.propertiesList},t.model.connectionName).then(function(e){t.input.serverside.createNewConnectionAPI(t.model.connectionName,e.connectionString,"BDI.exe").then(function(e){e&&t.destroyComponent()})})};t.canCreate=function(){return t.model.model&&t.model.host&&t.model.port&&t.model.connectionName}}]};var s=function e(n){t.getService("luiDialog").show({template:i.template,controller:i.controller,input:n,closeOnOutside:false,showArrow:false})};return{showDialog:s}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-dialog id="bdi-connect-dialog">\n\n\t<lui-dialog-header q-translation="bdi.connect.title">\n\t</lui-dialog-header>\n\n\t<lui-dialog-body class="">\n\n\t\t<qv-spinner class="spinner" show="isLoading" show-delay="100" show-for-at-least="300" spinner-height="150px" spinner-width="150px"\n\t\t center-in-parent="true "></qv-spinner>\n\n\t\t<label class="lui-label" q-translation="bdi.connect.host"></label>\n\t\t<input class="lui-input" ng-model="model.host.value" ng-disabled="isLoading" />\n\n\t\t<label class="lui-label" q-translation="bdi.connect.port"></label>\n\t\t<input class="lui-input" ng-model="model.port.value" ng-disabled="isLoading" />\n\n\t\t<label class="lui-label" q-translation="bdi.connect.model"></label>\n\t\t<input class="lui-input" ng-model="model.model.value" ng-disabled="isLoading" />\n\n\t\t<label class="lui-label" q-translation="Common.Name"></label>\n\t\t<input class="lui-input" ng-model="model.connectionName" ng-disabled="isLoading" />\n\n\n\t</lui-dialog-body>\n\n\n\t<lui-dialog-footer class="bdi-footer">\n\n\t\t<div>\n\t\t\t{{connectionTestMessage}}\n\t\t</div>\n\n\t\t<div class="buttons">\n\t\t\t<button class="lui-button" ng-click="close()" q-translation="Common.Cancel"></button>\n\t\t\t<button class="lui-button" ng-click="testConnection() " q-translation="scripteditor.dataconnectors.testconnection" ng-disabled="isLoading || !canCreate()"></button>\n\t\t\t<button class="lui-button" ng-click="createConnection()" qv-confirm="createConnection()" q-translation="Common.Create" ng-disabled="isLoading || !canCreate()"></button>\n\t\t</div>\n\t</lui-dialog-footer>\n\n\n</lui-dialog>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(2046)],s=function(t,e){var n=function n(i,s,o){var r=i.connectionString;var a={connectionName:i.name,connectionString:r,scriptEditorProxy:s,serverside:o};t.getService("luiDialog").show({template:e.template,controller:e.controller,input:a,closeOnOutside:false,showArrow:false})};return{showDialog:n}}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e,n){"use strict";var i,s;!(i=[n(10),n(2047),n(239),n(91),n(93),n(2048),n(306)],s=function(t,e,n,i,s){var o={restrict:"E",template:e,replace:true,scope:{},controller:["$scope","$q","$timeout",function(e,o,r){var a=true;var l;var c;var u;var d;var p;var h=false;var f=false;var g=r(t.noop);var v,m,b;e.loading=false;e.search={text:""};e.totalPossibleRows=0;e.loading=true;e.selectedRowString=i.get("bdi.select.selectedrows",[0,0]);e.openedDeferred.promise.then(function(){var t=Math.random().toString(36).substring(7);s.getApp().then(function(i){s.getSessionApp("?transient=",{route:"app/bdi_"+t+"/app/"+i.id,onError:function t(){}}).then(function(t){l=t.app;u=t.global;e.app=l;var i=/.*model=(.*);host=(.*);port=(.*);/g;var s=i.exec(e.input.connectionString);b=s[1];v=s[2];m=s[3];var o="SET CreateSearchIndexOnReload=0;BDI CONNECT TO '"+b+" "+v+":"+m+"';Import Live "+b+";";l.setScript({qScript:o});l.doReload().then(function(){c=new n(l);var t={qWindowSize:{qcx:0,qcy:0},qNullSize:{qcx:0,qcy:0},qCellHeight:0,qSyntheticMode:false,qIncludeSysVars:false};l.getTablesAndKeys(t.qWindowSize,t.qNullSize,t.qCellHeight,t.qSyntheticMode,t.qIncludeSysVars).then(function(t){y(t)});var e={qInfo:{qId:"BDIObject",qType:"BDIObject"},qBDIObjectDef:{}};l.createSessionObject(e).then(function(t){d=t})})})})});e.$on("$destroy",function(){e.selState&&e.selState.OnData&&e.selState.OnData.unbind(x)});var y=function t(n){var i=n.qtr.map(function(t){return{name:t.qName,fields:t.qFields,isMeta:t.qName.indexOf("_meta")>0}});e.allTables=i.filter(function(t){return!t.isMeta}).sort(function(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())});var s=[];e.allTables.forEach(function(t){t.fields.forEach(function(n){n.qTags.indexOf("$key")>-1&&(n.isKeyField=true);n.selected=false;if(!t.countField&&!n.isKeyField){t.countField=n;e.totalPossibleRows+=n.qnPresentDistinctValues}n.listboxCreation=function(){return q(n)};a||s.push(q(n))})});o.all(s).then(function(){e.selState=c.selectionState();e.selState.OnData.bind(x);e.onFieldStateUpdated();e.loading=false})};var x=function t(){e.onFieldStateUpdated()};var q=function t(e){return c.visualization.create("listbox",[e.qName],{title:e.qName}).then(function(t){e.cachedListVisual={id:e,model:t.model,options:{}};return e.cachedListVisual.model})};e.selectAll=function(){e.allTables.forEach(function(t){t.fieldListApi.selectAll()})};e.clearAll=function(){e.allTables.forEach(function(t){t.fieldListApi.deselectAll()})};e.onFieldStateUpdated=function(){h=false;if(f)h=true;else{r.cancel(g);g=r(S,1e3)}};var S=function t(){f=true;var n=e.allTables.filter(function(t){return t.fields.some(function(t){return true===t.selected})});d.getLayout().then(function(t){var s=t.qBDIObject.qCurrentHandle;w().then(function(t){var r=[];n.forEach(function(n){var i="["+b+"].["+n.name+"]";r.push(e.serverside.sendJsonRequest("executeQSL",t.sessionId,"set hQuery = Select count(*) FROM "+i+" at STATE ["+s+"] ;\nFETCH FROM hQuery Page(0,1);"))});o.all(r).then(function(t){var n=0;t.forEach(function(t){t.success&&(n+=parseInt(t.responses[0].qData[0]))});e.currentlySelectedRows=n;e.selectedRowString=i.get("bdi.select.selectedrows",[e.currentlySelectedRows]);f=false;h&&e.onFieldStateUpdated()})})})};var w=function t(){p||(p=e.serverside.sendJsonRequest("getConnectionInfo","").then(function(t){return t}));return p};var C=function t(n){var i="SET bdiHandle = '"+n+"';\r\n";i+="LET MaxRowsPerTable = 10000;\r\n";i+="BDI CONNECT TO '"+b+" "+v+":"+m+"';\r\n\n";var s=e.allTables.filter(function(t){return t.fields.some(function(t){return true===t.selected})});s.forEach(function(t,e){var n="["+b+"].["+t.name+"]";i+="[rowcount@"+t.name+"]:\r\n";i+="QSL Select count(*) as nRows"+e+" from "+n+" at STATE ${bdiHandle};\r\n";i+="let nFilteredRows = Peek('nRows"+e+"',0,'"+t.name+"');\r\n\n";i+="TRACE 'nFilteredRows' = ${nFilteredRows};\r\n";i+="if( nFilteredRows > MaxRowsPerTable ) then\r\n";i+="\tTRACE 'Too many rows to import for "+t.name+"';\r\n";i+="\tdrop table [rowcount@"+t.name+"];\r\n";i+="\tExit Script;\r\n";i+="end if\r\n\n";i+="drop table [rowcount@"+t.name+"];\r\n\n";i+="["+t.name+"]:\r\n";var s="QSL SELECT \r\n";s=t.fields.filter(function(t){return t.selected||t.isKeyField}).reduce(function(t,e,n,i){var s=t+"\t["+e.qName+"]";n<i.length-1&&(s+=", ");return s+"\r\n"},s);s+="FROM "+n+"\r\n";s+="AT STATE ${bdiHandle};\r\n\r\n";i+=s});return i};e.insertScript=function(){var t={qBDIObjectDef:{qHandleCopyInLayout:"model"}};d.setProperties(t).then(function(){d.getLayout().then(function(t){var n=t.qBDIObject.qGeneratedHandleCopy;e.input.scriptEditorProxy.insertCode(C(n));u.session.close().then(function(){u=null;e.close()})})})};e.cancel=function(){u&&u.session.close().then(function(){u=null;e.close()})}}]};return o}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<lui-dialog id="bdi-dialog">\n\n  <lui-dialog-header>\n   <div q-translation="bdi.select.title"></div>\n  </lui-dialog-header>\n\n  <lui-dialog-body class="bdi-container">\n\n    <qv-spinner class="spinner" show="loading" show-delay="100" show-for-at-least="300" spinner-height="150px" spinner-width="150px"\n      center-in-parent="true "></qv-spinner>\n\n    <qv-stage-current-selections ng-if="app && !loading" app="app" class="qvt-selections" options="{variant: \'bright\', hideUndoRedo: true, hideSelectionsTool: true, hideSearch: true, hideClearSelections: true}"></qv-stage-current-selections>\n\n    <div class="bdi-top-bar" ng-hide="loading">\n      <lui-search class="bdi-search-box " query="search.text " on-escape="search.text=\'\' ; " placeholder="Common.Search " />\n\n      <div class="bdi-top-bar-right">\n        <button class="lui-fade-button" ng-click="selectAll()">\n          <span class="lui-fade-button__icon  lui-icon lui-icon--select-all"></span>\n        </button>\n        <button class="lui-fade-button" ng-click="clearAll()">\n          <span class="lui-fade-button__icon  lui-icon lui-icon--clear-selections"></span>\n        </button>\n      </div>\n\n    </div>\n\n    <div class="bdi-field-lists-container">\n      <bdi-field-list fields="table.fields " name="table.name " filter="search.text" state-updated="onFieldStateUpdated()" ng-repeat="table in allTables"\n        ng-hide="loading || (table.fieldListApi && !table.fieldListApi.isDisplayed())" field-list-on-init="table.fieldListApi=$api"></bdi-field-list>\n    </div>\n  </lui-dialog-body>\n\n\n  <lui-dialog-footer class="bdi-footer">\n    \x3c!-- Count is off for now --\x3e\n    <div class="bdi-row-count" ng-hide="loading">\n      <div>{{selectedRowString}}</div>\n    </div>\n    <button class="lui-button close button " ng-click="cancel() " name="cancelButton " q-translation="Common.Cancel" ng-disabled="!app">Cancel</button>\n    <button class="lui-button confirm button " ng-click="insertScript()" qv-confirm="insertScript()" ng-disabled="loading || getRowCount() === 0"\n      q-translation="scripteditor.dataconnectors.addToScript"></button>\n  </lui-dialog-footer>\n\n</lui-dialog>'},function(t,e,n){"use strict";var i,s;!(i=[n(48),n(2049),n(392),n(290)],s=function(t,e){t.nativeComponent("bdiFieldList",{bindings:{name:"<",fields:"<",filter:"<",fieldListOnInit:"&",stateUpdated:"&"},controller:["qvListboxPopoverService",function(t){var e=this;e.$onInit=function(){e.api={};e.api.selectAll=i;e.api.deselectAll=s;e.api.isDisplayed=e.isDisplayed;e.fieldListOnInit({$api:e.api})};e.tableState={checked:false,indeterminate:false};e.isDisplayed=function(){if(""===e.filter)return true;var t=e.filter.toLowerCase();if(e.name.toLowerCase().indexOf(t)>-1)return true;return e.fields.filter(function(e){return e.qName.toLowerCase().indexOf(t)>-1}).length>0};e.showFilterFor=function(e,n){if(n.isKeyField)return;var i={$alignToElement:[e.currentTarget],position:"right",collision:"flipfit"};n.cachedListVisual?t.show(n.cachedListVisual.model,i):t.showDelayed(n.listboxCreation(),i)};e.updateCheckedStates=function(){var t=e.fields.filter(function(t){return t.selected}).length;var n=e.fields.filter(function(t){return!t.isKeyField}).length;if(0===t){e.tableState.checked=false;e.tableState.indeterminate=false}else if(t===n){e.tableState.checked=true;e.tableState.indeterminate=false}else{e.tableState.checked=false;e.tableState.indeterminate=true}e.stateUpdated()};e.showStateBar=function(t){if(t.cachedListVisual)return t.cachedListVisual.model.layout.qListObject.qDimensionInfo.qStateCounts.qExcluded>0||t.cachedListVisual.model.layout.qListObject.qDimensionInfo.qStateCounts.qSelected>0;return false};e.tableSelectClicked=function(){n(!e.tableState.checked);e.tableState.checked=!e.tableState.checked;e.tableState.indeterminate=false;e.stateUpdated()};var n=function t(n){e.fields.forEach(function(t){t.isKeyField||(t.selected=n)})};var i=function t(){n(true);e.tableState.checked=true;e.tableState.indeterminate=false;e.stateUpdated()};var s=function t(){n(false);e.tableState.checked=false;e.tableState.indeterminate=false;e.stateUpdated()}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},function(t,e){t.exports='<ul class="bdi-field-list lui-list">\n\n    <li class="lui-list__header bdi-field-header">\n        <span class="lui-list__text">{{$ctrl.name}}</span>\n        <label class="lui-checkbox bdi-header-selectall">\n            <input class="lui-checkbox__input" type="checkbox" aria-label="Label" qva-indeterminate="$ctrl.tableState.indeterminate"\n                ng-checked="$ctrl.tableState.checked" ng-click="$ctrl.tableSelectClicked()" />\n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check"></span>\n            </div>\n        </label>\n    </li>\n\n    <div class="bdi-item-container">\n\n        <li class="lui-list__item bdi-field-item" ng-click="$ctrl.showFilterFor($event, field)" ng-repeat="field in $ctrl.fields">\n\n            <div class="bdi-field-item-container">\n                \n\n                <span class="lui-list__text bdi-list-item-text">\n                    <div>{{field.qName}}</div>\n                </span>\n\n\n                <label class="lui-checkbox bdi-field-item-check" ng-if="!field.isKeyField">\n                        <input class="lui-checkbox__input" type="checkbox" aria-label="Label" ng-model="field.selected" ng-click="$event.stopPropagation(); $ctrl.updateCheckedStates()"/>\n                        <div class="lui-checkbox__check-wrap" ng-click="$event.stopPropagation()">\n                            <span class="lui-checkbox__check"></span>\n                        </div>\n                    </label>\n    \n                    <span class="lui-icon  lui-icon--key bdi-field-item-icon" aria-hidden="true" ng-if="field.isKeyField"></span>\n\n            </div>\n\n            \x3c!-- turned off for now --\x3e\n            <qv-state-count-bar ng-if="false && $ctrl.showStateBar( field )" state-counts="field.cachedListVisual.model.layout.qListObject.qDimensionInfo.qStateCounts" options="options"></qv-state-count-bar>\n        </li>\n\n    </div>\n\n</ul>'},function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(){var t=[{id:"BDI",category:"database",name:"QABDI",scriptOnly:true}];function e(){}var n={entrypoints:t,getInitialSelectStep:e};return n}return{create:t}}.apply(e,i),void 0!==s&&(t.exports=s))}])]);