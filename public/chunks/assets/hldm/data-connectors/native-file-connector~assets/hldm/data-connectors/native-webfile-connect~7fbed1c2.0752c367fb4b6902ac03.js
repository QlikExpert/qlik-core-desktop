/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[16],{1007:function(e,t,n){"use strict";var i,a;!(i=[n(48),n(90),n(91)],a=function(e,t,n){function i(e){return(t.basePath||"/")+e}function a(e,t){var n;n=e&&""!==e?t.name+"/"+e:t.name;return n}function r(t,i,a){var r=e.defer();f("",i&&i.path||"",a).then(function(e){var i=o(t,e);if(!i){r.reject(new Error(n.get("UploadedFilesFolder.Error.NotAllowedFileType",[t.name])));return r.promise}try{encodeURIComponent(t.name)}catch(e){r.reject(new Error(n.get("UploadedFilesFolder.Error.IllegalCharsInFilename",[t.name])));return r.promise}l(t,e).then(function(){r.resolve(true)},function(e){r.reject(e)})});return r.promise}function o(e,n){if(!n.allowedExtensions)return false;return n.allowedExtensions.some(function(n){return t.hasFileExtension(e.name,n)})}function l(t,i){var a=e.defer();var r=i.maxSize;var o=i.maxSize-i.size;var l=s(t.size,Math.floor);"number"===typeof r&&r>0&&t.size>r?a.reject({message:n.get("UploadedFilesFolder.Error.MaxFileSizeExceeded",[t.name,l,s(r,Math.ceil)])}):"number"===typeof o&&t.size>o?a.reject({message:n.get("UploadedFilesFolder.Error.AvailableSpaceExceeded",[t.name,l,s(o,Math.ceil)])}):a.resolve();return a.promise}function s(e,t){var i=[n.get("UploadedFilesFolder.FileSizeUnit.Bytes"),n.get("UploadedFilesFolder.FileSizeUnit.KB"),n.get("UploadedFilesFolder.FileSizeUnit.MB")];var a=n.get("UploadedFilesFolder.FileSize.NA");if(e>0){var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),i.length-1);a=t?t(e/Math.pow(1024,r)*10)/10+i[r]:Math.ceil(e/Math.pow(1024,r)*10)/10+i[r]}return a}function c(t,n,a,r,o){var l=new FormData;l.append("data",t);var s=e.defer();var c=e.getService("$http");c.post(i("api/v1/qix-datafiles"),l,{headers:{"Content-Type":void 0},transformRequest:e.identity,uploadEventHandlers:{progress:function e(t){if(t.lengthComputable){var e=t.loaded/Math.max(Math.max(t.total,t.loaded),1);s.notify(e)}}},params:{name:t.name}}).then(function(){s.resolve(t)},function(e){s.reject(e.data)});return s.promise}function d(t,n,a){var r=new FormData;r.append("data",n);var o=e.defer();var l=e.getService("$http");l.put(i("api/v1/qix-datafiles/"+encodeURIComponent(t)),r,{headers:{"Content-Type":void 0},transformRequest:e.identity,uploadEventHandlers:{progress:function e(t){if(t.lengthComputable){var e=t.loaded/Math.max(Math.max(t.total,t.loaded),1);o.notify(e)}}},params:{name:a}}).then(function(){o.resolve(n)},function(e){o.reject(e.data)});return o.promise}function u(t){var n=e.defer();var a=e.getService("$http");a.delete(i("api/v1/qix-datafiles/"+encodeURIComponent(t))).then(function(){n.resolve(true)},function(e){n.reject(e.data)});return n.promise}function p(t,n,a,r){var o={};r&&""!==r&&(o["scopedAppId"]=r);var l=e.defer();var s=e.getService("$http");s.get(i("api/v1/qix-datafiles"),{params:o}).then(function(e){l.resolve({files:e.data,folders:[]})},function(){l.reject()});return l.promise}function f(){var t={};var n=e.defer();var a=e.getService("$http");a.get(i("api/v1/qix-datafiles/quota"),{params:t}).then(function(e){n.resolve(e.data)},function(){n.reject()});return n.promise}var m=(new XMLHttpRequest).upload;function g(){return m}function v(e){return this.isDatafilesConnection(e)}function h(e){if(!e||!e.name)return false;return"MyDataFiles"===e.name}function F(e){if(!e||!e.connectionString||!e.type)return false;return"qix-datafiles.exe"===e.type.provider}return{isMyDataFilesConnection:h,isDatafilesConnection:F,isFileUploadEnabled:v,isFileUploadSupported:g,uploadFile:c,updateFile:d,deleteFile:u,listFolder:p,getFolderInfo:f,preUploadValidateFile:r}}.apply(t,i),void 0!==a&&(e.exports=a))},1042:function(e,t,n){"use strict";var i;!(i=function(){function e(e){var t,n,i,a=0;e=String(e);if(0===e.length)return false;t=e.split(",");for(n in t){i=t[n].trim();if(0===i.length)return false;if(Number.isNaN(+i))return false;if(Number(i)<=Number(a))return false;a=i}return true}return{isValid:e}}.call(t,n,t,e),void 0!==i&&(e.exports=i))},1063:function(e,t,n){"use strict";var i,a;!(i=[],a=function(){var e,t;function n(){return t}function i(){return e}function a(t){e=t}function r(e){t=e}return{setAllKeywordsAsLowerCase:r,getAllKeywordsAsLowerCase:n,setAllKeywords:a,getAllKeywords:i}}.apply(t,i),void 0!==a&&(e.exports=a))},1082:function(e,t,n){"use strict";var i,a;!(i=[n(92),n(1212),n(1042)],a=function(e,t,n){var i="embedded labels";var a="no labels";function r(e){return!(!e||"false"===e)}function o(e,t,n){var i={},a={};this.getSettingsModelForFile=function(e){e||(e="");a[e]||(a[e]=new l);return a[e]};this.getSettingsModelForTable=function(a,r,o){a||(a="");r||(r="");o||(o="");var l=e.name+"/"+a+"/"+r+"/"+o;if(!i[l]){var c=this.getSettingsModelForFile(a,r).settingsGuess;if(n){var d=n.getTableModelByDatabasePath(a,r,o);d&&d.data.fileFormatSettings&&(c=d.data.fileFormatSettings)}i[l]=new s(c,t)}return i[l]}}var l=e.extend("FileSettings",{init:function e(){},setSettingsGuess:function e(t){this.settingsGuess=t},getParamsForEngine:function e(){return{}}}),s=e.extend("TableSettings",{labelStrategyOptions:[i,a],quotingOptions:["standard","msq","none"],delimiterOptions:t,init:function e(n,a){this.codepageOptions=a;n&&"undefined"!==typeof n.qHeaderSize?this.nbrOfHeaderLinesToRemove=""+n.qHeaderSize:this.nbrOfHeaderLinesToRemove=0;n&&"undefined"!==typeof n.qTabSize?this.tabSize=n.qTabSize:this.tabSize=1;this.formatSpec="undefined format spec";n&&"undefined"!==typeof n.qIgnoreEOF?this.ignoreEOF=n.qIgnoreEOF:this.ignoreEOF=false;n&&"undefined"!==typeof n.qFixedWidthDelimiters?this.fixedWidthDelimiters=n.qFixedWidthDelimiters:this.fixedWidthDelimiters="1";this.fixedWidthDelimitersLastValid=this.fixedWidthDelimiters;n&&"undefined"!==typeof n.qRecordSize?this.recordSize=-n.qRecordSize:this.recordSize=0;n&&"undefined"!==typeof n.qComment?this.comment=n.qComment:this.comment="";n&&n.qLabel?n.qType&&0===n.qType.indexOf("TYPE9_EXCEL_")?this.labelStrategy=i:this.labelStrategy=n.qLabel:this.labelStrategy=this.labelStrategyOptions[0];n&&n.qDelimiter?this.delimiter=c(n.qDelimiter):this.delimiter=t[0];n&&n.qQuote?this.quoting=n.qQuote:this.quoting=this.quotingOptions[0];n&&n.qCodePage?this.codepage=d(this.codepageOptions,n.qCodePage):this.codepage=this.codepageOptions[0];n&&"undefined"!==typeof n.qIgnoreEOF?this.ignoreEOF=r(n.qIgnoreEOF):this.ignoreEOF=false},setFormatSpec:function e(t){this.formatSpec=t},getFormatSpec:function e(){return this.formatSpec},getCompiledSettings:function e(){return JSON.stringify(this.getParamsForEngine())},getParamsForEngine:function e(){n.isValid(this.fixedWidthDelimiters)&&(this.fixedWidthDelimitersLastValid=this.fixedWidthDelimiters);return{qLabel:this.labelStrategy,qHeaderSize:parseInt(this.nbrOfHeaderLinesToRemove,10),qDelimiter:{qNumber:parseInt(this.delimiter.number,10),qIsMultiple:!!this.delimiter.multiple},qQuote:this.quoting,qCodePage:this.codepage.number,qIgnoreEOF:r(this.ignoreEOF),qFixedWidthDelimiters:this.fixedWidthDelimitersLastValid,qTabSize:this.tabSize,qRecordSize:-1*this.recordSize,qComment:this.comment}}});function c(e){return e.qIsMultiple&&"false"!==e.qIsMultiple?t.filter(function(e){return"spaces"===e.scriptCode})[0]:t.filter(function(t){return t.number===e.qNumber.toString()})[0]}function d(e,t){return e.filter(function(e){return e.number===t})[0]}return o}.apply(t,i),void 0!==a&&(e.exports=a))},1083:function(e,t,n){"use strict";var i,a;!(i=[n(54),n(1063)],a=function(e){function t(e){return-1===e.indexOf("[")&&-1===e.indexOf("]")?"["+e+"]":-1===e.indexOf('"')?'"'+e+'"':-1===e.indexOf("'")?"'"+e+"'":-1===e.indexOf("´")?"´"+e+"´":e}function n(n,i,a){function r(e,t){var n="",i="    ",a,r;if(t){a=e.databases;a&&a.forEach(function(e){e.owners&&e.owners.length>0&&e.owners.forEach(function(a){a.tables&&a.tables.length>0&&a.tables.forEach(function(s){r=o(s.fields);if(r&&r.length>0){n+="\r\nLOAD\r\n";for(var d=0;d<r.length;d++){d>0&&(n+=",\r\n");var u=r[d].originalFieldName?r[d].originalFieldName:r[d].name;r[d].alias&&r[d].name!==r[d].alias?n+=i+c(u,t)+" AS "+c(r[d].alias,t):n+=i+c(u,t)}n+="\r\nFROM "+l(e.name,a.name,s.name)+";\r\n"}})})});return n.trim()+"\r\n\r\n"}return""}function o(t){return e.filter(t,function(e){return e.checked})}function l(e,a,r){var o,l;o="internet"!==n.type.provider?"lib://"+n.name+"/"+e:"lib://"+n.name;l=t(o)+"\r\n"+i.getSettingsModelForTable(e,a,r).getFormatSpec();return l}var s={};function c(e,t){if(s[e]||d(e,t.specialchars)||p(e,t.keywords)||u(e)||""===e){s[e]=true;return-1===e.indexOf('"')?t.quoteprefix+e+t.quotesuffix:t.quoteprefixfordoublequotes+e+t.quotesuffixfordoublequotes}return e}function d(e,t){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e.charAt(n)))return true;return false}function u(e){if(e.length>0){var t=e.charCodeAt(0);return 48<=t&&t<=57}return false}function p(e){return a.isKeyword(e)}var f={generateScriptForSelections:r};return f}return{createScriptGenerator:n,quoteConnectionName:t}}.apply(t,i),void 0!==a&&(e.exports=a))},1084:function(e,t,n){"use strict";var i,a;!(i=[n(117)],a=function(e){function t(e){return 1252===e||850===e||1e4===e||65001===e||1200===e}function n(e,t){return i(e,function(e){return e.qNumber===t})}function i(e,t){var n=e.filter(t)[0],i=e.indexOf(n);e.splice(i,1);return n}function a(){return e.global.getSupportedCodePages().then(function(e){e.qCodePages.push({qDescription:"Unicode",qNumber:1200});var i=e.qCodePages,a=[n(i,1252),n(i,850),n(i,1e4),n(i,65001),n(i,1200)],r=a.concat(i),o=r.map(function(e){return{title:e.qDescription,number:e.qNumber,kind:t(e.qNumber)?"Common.Standard":"scripteditor.dataconnectors.customcodepage"}});return o})}return{getCodepageOptionsPromise:a}}.apply(t,i),void 0!==a&&(e.exports=a))},1085:function(e,t,n){"use strict";var i,a;!(i=[n(48),n(1213),n(91),n(1042)],a=function(e,t,n,i){e.filter("translatelabelstrategy",function(){return function(e){return"scripteditor.dataconnectors.labelstrategy."+e.replace(" ","_")}});e.filter("quotingvaluetolabelkey",function(){return function(e){return"none"===e?"Common.None":"standard"===e?"Common.Standard":"scripteditor.dataconnectors.quoting."+e.replace(" ","_")}});e.filter("delimitertotitle",function(){return function(e){return"Common.Standard"===e.kind?n.get(e.name):e.number+". "+n.get(e.name)}});function a(e){this.template=t;this.controller=["$scope",function(t){t.currentSettings={};t.tableFieldsDisabled=true;t.$watch("ownerName",function(e){t.layout=e});var n;t.$watch("tableName",function(){t.currentSettings=e.getSettingsModelForTable(t.databaseName,t.ownerName,t.tableName);t.tableName&&(t.tableFieldsDisabled=false);n&&n();n=t.$watch("settingsAsText()",function(e,n){t.tableName&&t.currentSettings&&e!==n&&t.onRefresh({})})});t.settingsAsText=function(){return t.currentSettings.getCompiledSettings()};t.isFixedWidthDelimitersValid=function(){return i.isValid(t.currentSettings.fixedWidthDelimiters)};t.$parent.$parent.setFixedWidthGUIControllerOnChangeListener(function(e){t.currentSettings.fixedWidthDelimiters=e.join(",");t.$apply()});t.$watch("currentSettings.fixedWidthDelimiters",function(){t.$parent.$parent.specialTableSettingsOk=t.isFixedWidthDelimitersValid();t.isFixedWidthDelimitersValid()&&t.$parent.$parent.onFixedWidthDelimitersInputChange(t.currentSettings.fixedWidthDelimiters)});t.headerSizeInput="header-size-input";t.recordSizeInput="record-size-input";t.tabSizeInput="tab-size-input";t.headerSizeTid="ds-header-size-input";t.recordSizeTid="ds-record-size-input";t.tabSizeTid="ds-tab-size-input"}]}return a}.apply(t,i),void 0!==a&&(e.exports=a))},1087:function(e,t,n){"use strict";var i,a;!(i=[n(48),n(118),n(1215),n(54)],a=function(e,t,n,i){function a(a,r){return a.getConnections().then(function(o){var l=n.getName(t.lastFolderFromPath(r),o.qConnections);var s=t.fileDirectoryFromPath(r);var c=i.find(o.qConnections,function(e){return e.qConnectionString===s});if(c)return e.promise({name:c.qName,type:c.qType,id:c.qId,existedPreviously:true});return a.createNewRawConnection(l,s,"folder").then(function(e){return{name:l,type:{provider:"folder",displayName:"scripteditor.dataconnectors.filedirectory",connectDialog:"scripteditor.views/fileconnectdialog/fileconnectdialog",selectDialog:"scripteditor.views/fileselectdialog/fileselectdialog",needsConnect:false,isStandardConnector:true},typeName:"folder",id:e.qConnectionId,existedPreviously:false}})})}function r(e,t){return e.getConnections().then(function(n){for(var i=0;i<n.qConnections.length;i++)if(n.qConnections[i].qName===t)return e.removeConnection(n.qConnections[i].qId)})}function o(e){return e.getConnections().then(function(e){var t;var n=0;for(var i=0;i<e.qConnections.length;i++){var a=e.qConnections[i];var r=Date.parse(a.qModifiedDate.replace(" ","T"));if("folder"===a.qType&&r>n){t=a;n=r}}if(t)return t.qConnectionString})}return{createConnector:a,removeConnector:r,getLatestConnectorPath:o}}.apply(t,i),void 0!==a&&(e.exports=a))},1157:function(e,t,n){"use strict";var i,a;!(i=[n(117),n(48),n(89),n(286),n(1082),n(1083),n(1084),n(1085),n(110)],a=function(e,t,n,i,a,r,o,l,s){function c(c,d,u,p,f){function m(e){var t=e.substring(e.indexOf("_")+1,e.length);return t}function g(e){if("FIX"===e.qType){e.qFixedWidthDelimiters=e.qFixedWidthDelimiters.toString();e.qLabel="no labels";"1"!==e.qFixedWidthDelimiters&&0!==e.qFixedWidthDelimiters.indexOf("1,")&&(e.qFixedWidthDelimiters="1,"+e.qFixedWidthDelimiters)}return e}function v(){var e,t={},n,i;for(e=0;e<arguments.length;e++){n=arguments[e];for(i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}function h(t,n){var i=n?e.currentApp.guessFileType(t,n):e.currentApp.guessFileType(t);return i}var F;var b;var q=c.id;var x;u?f?e.currentApp.getConnection(q).then(function(e){x=e.qConnection.qConnectionString}):x=u.singleFileName:p?x=p.data.databaseName:f?e.currentApp.getConnection(q).then(function(e){x=e.qConnection.qConnectionString}):x=void 0;var S;var C;var E,y,T;var D=["TYPE9_FIX","TYPE9_EXCEL_OOXML","TYPE9_EXCEL_BIFF","TYPE9_HTML","TYPE9_XML","TYPE9_KML","TYPE9_CSV","TYPE9_QVD","TYPE9_QVX"],w=["TYPE9_EXCEL_OOXML","TYPE9_EXCEL_BIFF","TYPE9_HTML","TYPE9_XML","TYPE9_KML"];return n.all({codepageOptions:o.getCodepageOptionsPromise(),bnfModel:i.getReloadScriptBnfModel()}).then(function(n){b=n.codepageOptions;F=n.bnfModel;S=new a(c,b,d);C=new r.createScriptGenerator(c,S,F);var i=h(q,x).then(function(n){n.qDataFormat.qType="TYPE9_"+n.qDataFormat.qType;-1===D.indexOf(n.qDataFormat.qType)&&(n.qDataFormat.qType="TYPE9_CSV");S.getSettingsModelForFile(x).setSettingsGuess(n.qDataFormat);y=!p&&("TYPE9_XML"===n.qDataFormat.qType||"TYPE9_CSV"===n.qDataFormat.qType||"TYPE9_QVD"===n.qDataFormat.qType||"TYPE9_QVX"===n.qDataFormat.qType||"TYPE9_JSON"===n.qDataFormat.qType||"TYPE9_KML"===n.qDataFormat.qType);E=w.indexOf(n.qDataFormat.qType)>-1;T="scripteditor.dataconnectors."+("TYPE9_XML"===n.qDataFormat.qType||"TYPE9_HTML"===n.qDataFormat.qType?"tables":"sheets");var i={getConnectionInfo:function e(){return t.promise({dbusage:false,ownerusage:false,dbfirst:false,specialchars:"!  　\"$&'()*+,-/:;<>´`{}~[]\r\n\t",dbseparator:"",ownerseparator:"",quotesuffix:'"',quoteprefix:'"',quotesuffixfordoublequotes:"]",quoteprefixfordoublequotes:"[",keywords:[]})},getDatabases:function e(){return f?t.promise([{qName:""}]):t.promise([{qName:x}])},getOwners:function e(){var i=[],a;for(a=0;a<D.length;a++)i.push({qName:D[a],qIsDefault:D[a]===n.qDataFormat.qType});return t.promise(i)},getTables:function n(i,a){if(w.indexOf(a)>-1){var r=m(a);var o={qType:r};var l={qConnectionId:q,qRelativePath:i,qDataFormat:o};return("TYPE9_XML"===a||"TYPE9_JSON"===a||"TYPE9_KML"===a?e.currentApp.getFileTablesEx(l):e.currentApp.getFileTables(l)).then(function(e){if(e.qTables.length>0){if(y){for(var t=0;t<e.qTables.length;t++)if(d){var n=d.getOrCreateTableModelByDatabasePath(i,a,e.qTables[t].qName);var r=S.getSettingsModelForTable(i,a,e.qTables[t].qName);r.setFormatSpec(e.qTables[t].qFormatSpec);n.setFormatSpec(e.qTables[t].qFormatSpec)}else S.getSettingsModelForTable(i,a,e.qTables[t].qName).setFormatSpec(e.qTables[t].qFormatSpec);e.qTables[0].qIsDefault=true}return e.qTables}return[]},function(e){3002!==e.code&&e.code!==s.LocalizedErrorCode.LOCERR_GENERIC_INVALID_PARAMETERS&&(e.isHandled=true);return[]})}if(f)return t.promise([{qName:c.name,qIsDefault:true}]);var u=x.lastIndexOf("\\"),p=u>=0?x.substring(u+1):x,g=p.lastIndexOf("."),v=g>=0?p.substring(0,g):p;return t.promise([{qName:v,qIsDefault:true}])},getFields:function t(n,i,a,r){var o=w.indexOf(i)>-1;var l=m(i);var s={qType:l},c=S.getSettingsModelForFile(n).getParamsForEngine(),u=S.getSettingsModelForTable(n,i,a).getParamsForEngine(),p=g(v(s,c,u)),f=o?{qConnectionId:q,qRelativePath:n,qTable:a,qDataFormat:p}:{qConnectionId:q,qRelativePath:n,qTable:"",qDataFormat:p};return e.currentApp.getFileTableFields(f).then(function(e){var t=S.getSettingsModelForTable(n,i,a);t.setFormatSpec(e.qFormatSpec);if(d){var o=d.getOrCreateTableModelByDatabasePath(n,i,a);o.data.fileFormatSettings=t.getParamsForEngine();o.setFormatSpec(e.qFormatSpec)}if(r){r.qFormatSpec=e.qFormatSpec;r.fileFormatSettings=t.getParamsForEngine()}if(e.qFields)for(var l=0;l<e.qFields.length;l++)e.qFields[l].qName||(e.qFields[l]={qName:""});return e.qFields},function(e){e.isHandled=true;return[]})},getPreview:function t(n,i,a){E=w.indexOf(i)>-1;var r=m(i);var o={qType:r},l=S.getSettingsModelForFile(n).getParamsForEngine(),s=S.getSettingsModelForTable(n,i,a).getParamsForEngine(),c=g(v(o,l,s)),d=E?{qConnectionId:q,qRelativePath:n,qTable:a,qDataFormat:c}:{qConnectionId:q,qRelativePath:n,qTable:"",qDataFormat:c};return e.currentApp.getFileTablePreview(d).then(function(e){return e.qPreview},function(e){e.isHandled=true;return[]})},selectOptions:{databaseTitle:"scripteditor.dataconnectors.file",databasePlaceholder:"scripteditor.dataconnectors.selectfile",tablesTitle:T,ownerTitle:"scripteditor.dataconnectors.fileformat",ownerPlaceholder:"",metadataVisible:false,tablesLocation:"full-height-left",specialTableSettingsLocation:"top-right",databaseVisible:false,ownerVisible:true,tablesVisible:true,forceSelectTables:y,scriptGenerator:C,showSelectionsSummary:false,specialTableSettings:new l(S),precedingLoadVisible:false,selectFromTitleName:x,fileTypesWithTables:w,dataconnectorInstance:c,forceSelectFirstTable:!p,tableModelToEdit:p}};return i});return i})}return{createNativeFileProvider:c}}.apply(t,i),void 0!==a&&(e.exports=a))},1158:function(e,t,n){"use strict";var i,a;!(i=[n(117),n(294),n(994),n(118),n(89)],a=function(e,t,n,i,a){var r=null;var o=[];function l(){var i=void 0;var l=true;var s;s=n.createDataconnectorsModel(e,e.currentApp,t,i,l);return s.then(function(e){r=[];var t=e;if(!t.allConnectorEntrypoints.folder)return[];var n=t.allConnectorEntrypoints.folder.map(function(e){return e.isInitialized()});return a.all(n).then(function(){return t.allConnectorEntrypoints.folder.map(function(e){r[e.getId()]=e.getDisplayName();var t={id:e.getId(),name:e.getDisplayName(),imagePath:e.getImagePath(),providerName:e.getConnectorMain().providerName,credentialsDialog:e.getCredentialsDialog(),requiresAuthentication:!!e.getConnectorMain().requiresAuthentication,authenticate:e.getConnectorMain().authenticate,getDirectoryInfo:e.getConnectorMain().getDirectoryInfo,saveConnection:e.getConnectorMain().saveConnection,getConnectionMatch:e.getConnectorMain().getConnectionMatch,updateConnection:e.getConnectorMain().updateConnection,getAccountId:e.getConnectorMain().getAccountId,modifyConnection:e.getConnectorMain().modifyConnection,testSavedConnection:e.getConnectorMain().testSavedConnection};o[t.id]=t;return t})})})}function s(e){var n=[];return t.getDataconnectorInstances(function(e,t){n[e.id]=t.qConnectionString}).then(function(t){return r?m(t,n,e):l().then(function(){return m(t,n,e)})})}function c(e,t,n){e.updateConnection(t,n)}function d(e,t,n,i){return e.modifyConnection(t,n,i)}function u(e,t,n,i){var a={name:"",existedPreviously:false};return i?s().then(function(i){var r=e.getConnectionMatch(i,e,t.jsonString,n);if(!r){var o=g(i,t.connectionName);t.connectionName=o;return f(e,t,n).then(function(e){a.name=e.name;return a})}a.name=r.name;a.existedPreviously=true;return a}):f(e,t,n).then(function(e){a.name=e.name;return a})}function p(e){return t.getDataconnectorTypes().then(function(t){var n=t.filter(function(t){return t.provider===e})[0];return n})}function f(e,t,n){return e.saveConnection(t,n)}function m(e,t,n){var i=e.filter(function(e){return!!r[e.sourceConnectorID]});i.map(function(e){var n=t[e.id];var i=o[e.sourceConnectorID];if(n&&i&&i.getAccountId){e.accountId=i.getAccountId(n);e.providerName=r[e.sourceConnectorID];e.connectorImagePath=i.imagePath}});if(n){var a=[];i=i.filter(function(e){var t=false;if(a[e.providerName]){if(!a[e.providerName][e.accountId]){a[e.providerName][e.accountId]=true;t=true}}else{var n={};n[e.accountId]=true;a[e.providerName]=n;t=true}return t})}return i}function g(e,t){var n=e.filter(function(e){return i.startsWith(e.name,t)});var a=t.replace(/["'()]/g,"_");var r=1;while(n.length>0){a=t+r.toString();n=n.filter(function(e){return i.startsWith(e.name,a)});++r}return a}return{getStorageProviders:l,getConnections:s,saveConnection:u,updateConnection:c,modifyConnection:d,getConnectorType:p}}.apply(t,i),void 0!==a&&(e.exports=a))},1212:function(e,t,n){"use strict";var i,a;!(i=[],a=function(){function e(){var e=t().concat(n());return e}function t(){var e,t=[{number:"59",name:"scripteditor.dataconnectors.delimiter.semicolon",scriptCode:";",kind:"Common.Standard"},{number:"44",name:"scripteditor.dataconnectors.delimiter.comma",scriptCode:",",kind:"Common.Standard"},{number:"9",name:"scripteditor.dataconnectors.delimiter.tab",scriptCode:"\\t",kind:"Common.Standard"},{number:"32",name:"scripteditor.dataconnectors.delimiter.spaces",scriptCode:"spaces",multiple:true,kind:"Common.Standard"}];for(e in t)t[e].title=t[e].name;return t}function n(){var e=[],t,n;for(t=0;t<=127;t++){n=String.fromCharCode(t);e[t]={number:""+t,name:n,scriptCode:n.match(/\w/)?"'"+n+"'":"'\\x"+t.toString(16)+"'",kind:"Common.Custom"}}e[0].name="NUL";e[1].name="SOH";e[2].name="STX";e[3].name="ETX";e[4].name="EOT";e[5].name="ENQ";e[6].name="ACK";e[7].name="BEL";e[8].name="BS";e[9].name="scripteditor.dataconnectors.delimiter.tab";e[10].name="LF";e[11].name="VT";e[12].name="FF";e[13].name="CR";e[14].name="SO";e[15].name="SI";e[16].name="DLE";e[17].name="DC1 (XON)";e[18].name="DC2";e[19].name="DC3 (XOFF)";e[20].name="DC4";e[21].name="NAK";e[22].name="SYN";e[23].name="ETB";e[24].name="CAN";e[25].name="EM";e[26].name="SUB";e[27].name="ESC";e[28].name="FS";e[29].name="GS";e[30].name="RS";e[31].name="US";e[32].name="scripteditor.dataconnectors.delimiter.space";e[44].name="scripteditor.dataconnectors.delimiter.comma";e[59].name="scripteditor.dataconnectors.delimiter.semicolon";e[127].name="DEL";e[8].scriptCode="'\\b'";e[9].scriptCode="'\\t'";e[10].scriptCode="'\\n'";e[13].scriptCode="'\\r'";e[32].scriptCode="' '";e[39].scriptCode='"\'"';e[92].scriptCode="\\\\";e[32].scriptCode="' '";e.splice(33,0,{number:"32",name:"scripteditor.dataconnectors.delimiter.spaces",scriptCode:"spaces",multiple:true,kind:"Common.Custom"});return e}return e()}.apply(t,i),void 0!==a&&(e.exports=a))},1213:function(e,t){e.exports='<div class="filesettings">\n\t<div ng-switch="layout">\n\n\t\t\x3c!-- EXCEL SETTINGS --\x3e\n\t\t<div ng-switch-when="TYPE9_EXCEL_BIFF" class="row">\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_labels\'"></div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_headersize\'"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- EXCEL SETTINGS --\x3e\n\t\t<div ng-switch-when="TYPE9_EXCEL_OOXML" class="row">\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_labels\'"></div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_headersize\'"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- CSV SETTINGS --\x3e\n\t\t<div ng-switch-when="TYPE9_CSV" class="row">\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_labels\'"></div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_headersize\'"></div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_delimiter\'"></div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_codepage\'"></div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_inline\'"></div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_oef\'"></div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_comment\'"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- FIXED FILES --\x3e\n\t\t<div ng-switch-when="TYPE9_FIX" class="row">\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_labels\'"></div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_headersize\'"></div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_fixedwidth_delimiters\'"></div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_codepage\'"></div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_tab_size\'"></div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_recordsize\'"></div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_oef\'"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- HTML SETTINGS --\x3e\n\t\t<div ng-switch-when="TYPE9_HTML" class="row">\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_labels\'"></div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class="settingArea" ng-include src="\'setting_area_codepage\'"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\x3c!-- Templates --\x3e\n\n<script type="text/ng-template" id="setting_area_labels">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.labels"></div>\n\t<div class="setting">\n\t\t<lui-select x-model="currentSettings.labelStrategy" x-options="option|translatelabelstrategy|translate for option in currentSettings.labelStrategyOptions" x-disabled="tableFieldsDisabled"></lui-select>\n\t</div>\n\n<\/script>\n\n<script type="text/ng-template" id="setting_area_headersize">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.headersize"></div>\n\t<div class="headerSizeSetting">\n\t\t<ds-number-input\n\t\t\tmin-input="0"\t\n\t\t\tmax-input="9999999"\n\t\t\tselector-class="headerSizeInput"\n\t\t\tmodel="currentSettings.nbrOfHeaderLinesToRemove"\n\t\t\tdisabled="tableFieldsDisabled"\n\t\t\tinput-tid="headerSizeTid">\n\t\t</ds-number-input>\n\t</div>\n\n<\/script>\n\n<script type="text/ng-template" id="setting_area_delimiter">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.delimiter"></div>\n\t<div class="setting">\n\t\t<lui-select x-model="currentSettings.delimiter" x-options="option|delimitertotitle group by option.kind|translate for option in currentSettings.delimiterOptions"></lui-select>\n\t</div>\n\n<\/script>\n\n<script type="text/ng-template" id="setting_area_fixedwidth_delimiters">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.fixpositions"></div>\n\t<div class="setting">\n\t\t<input class="lui-input" ng-class="{ \'qui-invalid\': !isFixedWidthDelimitersValid() }" type="text" ng-model="currentSettings.fixedWidthDelimiters" ng-disabled="tableFieldsDisabled" maxlength="250"/>\n\t</div>\n\n<\/script>\n\n<script type="text/ng-template" id="setting_area_codepage">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.codepage"></div>\n\t<div class="setting">\n\t\t<lui-select class="codepageselect" x-model="currentSettings.codepage" x-options="option.title group by option.kind|translate for option in currentSettings.codepageOptions">\n\t\t</lui-select>\n\t</div>\n\n<\/script>\n\n<script type="text/ng-template" id="setting_area_inline">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.quoting"></div>\n\t<div class="setting">\n\t\t<lui-select x-model="currentSettings.quoting" x-options="option|quotingvaluetolabelkey|translate for option in currentSettings.quotingOptions">\n\t\t</lui-select>\n\t</div>\n<\/script>\n\n<script type="text/ng-template" id="setting_area_oef">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.ignoreEOF"></div>\n\t<div class="setting">\n\t\t<lui-checkbox x-model="currentSettings.ignoreEOF"></lui-checkbox>\n\t</div>\n\n<\/script>\n\n<script type="text/ng-template" id="setting_area_comment">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.comment"></div>\n\t<div class="setting">\n\t\t<input class="lui-input" type="text" ng-model="currentSettings.comment" qva-model-onblur maxlength="250" />\n\t</div>\n\n<\/script>\n\n<script type="text/ng-template" id="setting_recordsize">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.recordsize"></div>\n\t<div class="headerSizeSetting">\n\t\t<ds-number-input\n\t\t\tmin-input="0"\t\n\t\t\tmax-input="9999999"\n\t\t\tselector-class="recordSizeInput"\n\t\t\tmodel="currentSettings.recordSize"\n\t\t\tdisabled="tableFieldsDisabled"\n\t\t\tinput-tid="recordSizeTid">\n\t\t</ds-number-input>\n\t</div>\n\n<\/script>\n\n<script type="text/ng-template" id="setting_tab_size">\n\n\t<div class="title" q-translation="scripteditor.dataconnectors.tabsize"></div>\n\t<div class="headerSizeSetting">\n\t\t<ds-number-input\n\t\t\tmin-input="1"\t\n\t\t\tmax-input="9999999"\n\t\t\tselector-class="headerSizeInput"\n\t\t\tmodel="currentSettings.tabSize"\n\t\t\tdisabled="tableFieldsDisabled"\n\t\t\tinput-tid="tabSizeTid">\n\t\t</ds-number-input>\n\t</div>\n\n<\/script>\n'},1215:function(e,t,n){"use strict";var i,a;!(i=[],a=function(){var e;var t;function n(){return t||"Connector"}function i(e){if(!e)return n();return n()+" "+e}function a(t){for(var n=0;n<e.length;n++)if(e[n].qName===t)return false;return true}function r(e){if(e)return e.replace(/<|>|:|\\|\*|\?|"|\||\//g,"");return null}function o(n,o){e=o;t=r(n);var l=i();if(e){var s=e.length+1;while(!a(l)){l=i(s);s+=1}}return l}return{getName:o}}.apply(t,i),void 0!==a&&(e.exports=a))},1216:function(e,t,n){"use strict";var i,a;!(i=[n(11),n(48),n(91),n(95),n(96),n(138),n(117),n(118),n(416),n(998),n(227),n(496),n(105),n(253),n(1217),n(280)],a=function(e,t,n,i,a,r,o,l,s,c,d,u,p,f,m){t.directive("qvUploadedDataFilesView",function(){return{restrict:"E",replace:true,template:m,scope:{uploadFolderConnection:"=",onFileSelected:"&",selectedFileName:"=",stepContext:"=",fileToUploadOnFirstLoad:"=",showFilePickerOnOpen:"=",chooseOnSingleClick:"="},controller:["$scope","$element","$timeout","$delayedModal",function(m,g,v,h){m.allUploadedFiles=null;m.uploadedFiles=null;m.fileFilters=s.getFileFilters();m.selectedFileFilter=m.fileFilters[0];m.uploading=false;m.draggingOver=false;m.uploadingFileName=null;m.uploadingFileSize=null;m.uplodingProgress=0;m.canUserModifyAppStore=false;m.availableSpace=null;u.canUserModifyAppStore().then(function(e){m.canUserModifyAppStore=e});var F=e("body");m.$watch("uploadFolderConnection",function(){S();b()});m.$watch("selectedFileFilter",function(){m.allUploadedFiles&&C(m.allUploadedFiles)});function b(){u.getAppStoreLibrary().then(function(e){e&&(m.availableSpace=u.getFormattedAvailableSpace(e.qMeta.remainingLibrarySpace))})}var q=f.getLoadModel(function(){}).then(function(e){return e.serialize()});function x(e){return q.then(function(t){var n={};t&&t.tables&&t.connectionMetaDataModels&&t.tables.filter(function(e){return"load-file"===e.boxType&&u.isUploadFolderConnection(t.connectionMetaDataModels[e.dataconnectorName])}).forEach(function(e){n[e.databaseName.toLowerCase()]=true});e.forEach(function(e){e.usedInLoadModel=!!n[e.name.toLowerCase()]})})}function S(){m.uploadFolderConnection&&o.currentApp.getFolderItemsForConnection({qConnectionId:m.uploadFolderConnection.id}).then(function(e){m.allUploadedFiles=e.qFolderItems;C(m.allUploadedFiles)},function(e){m.allUploadedFiles=null;E(e)})}function C(e){var t=c.postProcessDirectoryListing("",e,m.selectedFileFilter.regexps).filter(function(e){return e.isFile});x(t).then(function(){m.uploadedFiles=t})}function E(e){m.uploadedFiles=null;e.isHandled=true}var y=null;function T(e){var t=e.dataTransfer||e.originalEvent&&e.originalEvent.dataTransfer;var n=e.target.files||t.files;return n?n[0]:null}function D(e){e.stopPropagation();e.preventDefault();if(y){v.cancel(y);y=null}m.$apply(function(){m.draggingOver=true})}function w(e){e.stopPropagation();e.preventDefault();if(e.relatedTarget)return;y&&v.cancel(y);y=v(function(){m.draggingOver=false},100)}function P(e){e.stopPropagation();e.preventDefault();if(m.stepContext.visible){var t=T(e);m.$apply(function(){m.draggingOver=false;M(t)})}}F.on("dragover",D);F.on("dragleave",w);F.on("drop",P);m.$on("$destroy",function(){F.off("dragover",D);F.off("dragleave",w);F.off("drop",P)});function I(e){var i=t.defer();m.allUploadedFiles&&m.allUploadedFiles.some(function(t){return t.qName===e.name})?h.open({title:"UploadedFilesFolder.Confirm.Overwrite.Title",content:n.get("UploadedFilesFolder.Confirm.Overwrite.Description",[e.name]),buttons:[{name:"Common.Cancel",callback:function e(){i.reject()}},{name:"UploadedFilesFolder.Button.Overwrite",defaultButton:true,callback:function e(){i.resolve(true)}}]}):i.resolve(true);return i.promise}function M(e){if(m.uploading)return;e&&u.preUploadValidateFile(e).then(function(){I(e).then(function(){u.setAttachedFilesToReplace([{fileName:e.name}]);m.uploading=true;m.uploadingFileName=e.name;m.uploadingFileSize=u.getFormattedFileSize(e.size);m.uploadingProgress=r.format.number(0,{style:"percent"});u.uploadFile(e).then(_,N,L)})},N)}function _(e){S();b();m.uploadingProgress=r.format.number(1,{style:"percent"});v(function(){m.uploading=false;m.selectedFileName.name=e.name;m.onFileSelected&&m.onFileSelected({name:e.name})},800)}function N(e){m.uploading=false;e||(e={code:500});d.showDialog(e)}function L(e){m.uploadingProgress=r.format.number(e,{style:"percent"})}function O(e){var t=e&&e.usedInLoadModel?n.get("UploadedFilesFolder.Confirm.DeleteUsedFile.Description",[e.name]):n.get("UploadedFilesFolder.Confirm.DeleteNotUsedFile.Description",[e.name]);h.open({title:"UploadedFilesFolder.Confirm.Delete.Title",html:'<span style="word-wrap: break-word">'+t+"</span>",buttons:[{name:"Common.Cancel",callback:function e(){}},{name:"Common.Delete",defaultButton:true,callback:function t(){e.deleting=true;u.deleteFile(e.name).then(function(){k(e);i.publish(p.Events.PubSub.ConnectionDeleted)},function(t){e.deleting=false;$(e,t)})}}]})}function k(e){m.selectedFileName.name===e.name&&(m.selectedFileName.name=null);S();b()}function $(e){d.showDialog({message:n.get("UploadedFilesFolder.Error.CannotDeleteFile",[e.name])})}m.onFileClicked=function(e){m.selectedFileName.name=e.name;m.chooseOnSingleClick&&m.onFileSelected({name:l.removeSurroundingSlashes(e.name)})};m.onFileDblClick=function(e){m.onFileSelected&&m.onFileSelected({name:l.removeSurroundingSlashes(e.name)})};m.onDeleteFileClicked=function(e){O(e)};m.selectFile=function(){u.selectFile().then(function(e){e&&M(e)}).catch(function(){})};m.getFileInUseTitle=function(e){if(e&&e.usedInLoadModel)return n.get("UploadedFilesFolder.FileInUseIndicator.Title");return n.get("UploadedFilesFolder.FileNotInUseIndicator.Title")};m.fileToUploadOnFirstLoad&&M(m.fileToUploadOnFirstLoad);m.showFilePickerOnOpen&&m.selectFile();a(g.find(".file-list")[0]).swipe({options:{preventDefault:false},end:function e(){a.preventGestures(this.gestureHandler)}})}]}})}.apply(t,i),void 0!==a&&(e.exports=a))},1217:function(e,t){e.exports='<div class="uploaded-data-files" ng-class="{\'dragging-over\': draggingOver && !uploading}">\n\t<div class="file-list">\n\t\t<ul vs-repeat vs-scroll-parent=".file-list">\n\t\t\t<li class="qui-menu-item" ng-disabled="item.disabled" ng-repeat="item in uploadedFiles"\n\t\t\t\tng-class="{fileselected:( item.isFile && item.name == selectedFileName.name)}"\n\t\t\t\tng-click="onFileClicked(item)" ng-dblclick="onFileDblClick(item)" title="{{item.name}}">\n\t\t\t\t<span class="used-file-indicator" ng-class="{\'file-in-use\':item.usedInLoadModel}"\n\t\t\t\t\t  title="{{getFileInUseTitle(item)}}"></span>\n\t\t\t\t<span class="file-name-icon lui-icon lui-icon--file"></span>\n\t\t\t\t<span class="file-name">{{item.name}}</span>\n\t\t\t\t<button ng-if="canUserModifyAppStore" class="lui-fade-button" ng-click="onDeleteFileClicked(item); $event.stopPropagation();" q-title-translation="UploadedFilesFolder.DeleteFileButton.Title">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon lui-icon--bin"></span>\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t\x3c!-- <div class="text" q-translation="scripteditor.flatfilechooser.filetype"></div> --\x3e\n\n\t<div class="bottom">\n\t\t<lui-select class="file-type"\n\t\t\t\t\tx-model="selectedFileFilter"\n\t\t\t\t\tx-options="option.title|translate for option in fileFilters"></lui-select>\n\t\t<div ng-if="canUserModifyAppStore" class="upload-drop-zone" ng-click="selectFile()">\n\t\t\t<span class="lui-icon lui-icon--upload lui-icon--large"></span>\n\t\t\t<span class="text drag-and-drop-label" q-translation="uploadfile.selectfiledialog.draganddropfilehere"></span>\n\t\t</div>\n\t\t<div ng-if="availableSpace != null" class="store-status">\n\t\t\t<span class="text" q-translation="UploadedFilesFolder.Status.AvailableSpace, {{availableSpace}}"></span>\n\t\t</div>\n\t\t<div class="file-info" ng-show="uploading || draggingOver">\n\t\t\t<div class="overlay"></div>\n\t\t\t<div class="dragging-circle centered">\n\t\t\t\t<div class="upload-icon centered lui-icon lui-icon--upload" ng-show="draggingOver && !uploading"></div>\n\t\t\t\t<div class="text upload-progress centered" ng-show="uploading">{{uploadingProgress}}</div>\n\t\t\t</div>\n\t\t\t<div class="text upload-message centered" ng-show="draggingOver && !uploading" q-translation="uploadfile.selectfiledialog.dropfilehere"></div>\n\t\t\t<div class="text upload-message centered" ng-show="uploading">{{uploadingFileName}} ({{uploadingFileSize}})</div>\n\t\t</div>\n\t</div>\n</div>\n'},1228:function(e,t,n){"use strict";var i,a;!(i=[n(119),n(91),n(1473),n(96),n(280)],a=function(e,t,n,i){e.directive("qvFileBrowserWidget",function(){return{restrict:"EAC",replace:true,scope:{path:"=",hoverPath:"=",folderitems:"=",onFileClicked:"&",selectedFileName:"=",isAddMode:"=",onDblClick:"&",returnToHome:"=",hideBack:"=",onDeleteFile:"&",canDelete:"&"},template:n,controller:["$scope","$element","$timeout","$delayedModal",function(e,n,a,r){var o=false;e.onItemClick=function(t){if(t.disabled)return;if(t.isFile)e.onFileClicked&&e.onFileClicked({item:t,path:t.path,name:t.name});else if(t.isAtRoot)e.returnToHome&&e.returnToHome();else{e.path=t.path;n.scrollTop(0)}};e.onItemDblClick=function(t){if(!t.disabled&&!o){o=true;e.onDblClick();a(function(){o=false},500)}};e.onMouseEnter=function(t){e.hoverPath=t};e.onMouseLeave=function(t){e.hoverPath===t&&(e.hoverPath=void 0)};e.onDeleteFileClicked=function(e){l(e)};function l(n){var i=t.get("DataFiles.Confirm.DeleteFile.Description",[n.name]);r.open({title:"DataFiles.Confirm.Delete.Title",html:'<span style="word-wrap: break-word">'+i+"</span>",buttons:[{name:"Common.Cancel",callback:function e(){}},{name:"Common.Delete",defaultButton:true,callback:function t(){if(e.onDeleteFile){n.deleting=true;e.onDeleteFile({file:n}).then(function(){n.deleting=false},function(){n.deleting=false})}}}]})}e.isHovered=function(t){return e.hoverPath===t};e.isFileSelected=function(t){return t.isFile&&t.name===e.selectedFileName};i(n[0]).swipe({options:{preventDefault:false},end:function e(){i.preventGestures(this.gestureHandler)}})}]}})}.apply(t,i),void 0!==a&&(e.exports=a))},1229:function(e,t,n){"use strict";var i,a;!(i=[n(119),n(11),n(1474),n(118)],a=function(e,t,n,i){e.directive("qvFilePathInput",function(){return{restrict:"EA",scope:{path:"=",hoverPath:"=",isvalidpath:"=",rootPlaceholder:"=",hideRootPlaceholderInPath:"="},replace:true,requires:["qvEnter"],template:n,controller:["$scope",function(e){function n(){e.items.unshift({name:e.rootPlaceholder,path:""})}function a(){var t,a,r,o;e.items=[];if("\\\\"===e.path.substring(0,2)){t=i.removeSurroundingSlashes(e.path.substring(2)||"").split("\\");t[0]="\\\\"+t[0]}else t=i.removeSurroundingSlashes(e.path||"").split("\\");if(t.length>0&&t[0].length>0){o="";for(var l=0;l<t.length;l++){a=t[l];r=t[l];":"===r[r.length-1]&&(r=r.substring(0,r.length-1));o+=l!==t.length-1||""===o?a+"\\":a;e.items.push({name:r,path:o})}!e.rootPlaceholder||e.hideRootPlaceholderInPath||n()}else e.rootPlaceholder&&n()}e.focusOnInput=function(){t("input.qvfilepathinputcontainer-input").focus()};e.onItemClick=function(t,n){n.stopPropagation();e.path=t;a()};e.$watch("path",function(t){if("undefined"!==typeof t){e.path=t.trim();a()}});e.$watch("rootPlaceholder",function(){"undefined"!==typeof e.path&&a()});e.onMouseEnter=function(t){e.hoverPath=t};e.onMouseLeave=function(t){e.hoverPath===t&&(e.hoverPath=void 0)};e.isHovered=function(t){return e.hoverPath===t}}]}})}.apply(t,i),void 0!==a&&(e.exports=a))},1230:function(e,t,n){"use strict";var i,a;!(i=[n(48),n(1475)],a=function(e,t){e.nativeComponent("qvFileBrowserHome",{bindings:{connections:"<",drives:"<",onClickShortcut:"<",onClickDrive:"<"},controller:[function(){var e=this;e.folderListExpanded=true;e.computerExpanded=true;e.toggleFolderExpansion=function(){e.folderListExpanded=!e.folderListExpanded};e.toggleComputerExpansion=function(){e.computerExpanded=!e.computerExpanded}}],template:t})}.apply(t,i),void 0!==a&&(e.exports=a))},1231:function(e,t,n){"use strict";var i,a;!(i=[n(48),n(117),n(1083),n(1082),n(1085),n(1477),n(1481),n(1084),n(286),n(496),n(110),n(91),n(1483),n(294),n(1087),n(1228),n(1229),n(1230)],a=function(e,t,n,i,a,r,o,l,s,c,d,u){function p(e){if("TYPE9_FIX"===e.type){e.fixedWidthDelimiters=e.fixedWidthDelimiters.toString();"1"!==e.fixedWidthDelimiters&&0!==e.fixedWidthDelimiters.indexOf("1,")&&(e.fixedWidthDelimiters="1,"+e.fixedWidthDelimiters)}return e}function f(e){var t=e.substring(e.indexOf("_")+1,e.length);return t}return["input","$q","standardSelectDialogService","qvAlertDialog",function(m,g,v,h){var F=m.quickLoadContext;var b=e.getService("qvLoader");function q(){var e,t={},n,i;for(e=0;e<arguments.length;e++){n=arguments[e];for(i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}function x(){if("internet"!==m.dataconnectorInstance.type.provider){if(c.isUploadFolderConnection(m.dataconnectorInstance))return o.selectFile({instance:m.dataconnectorInstance});return r.selectFile({instance:m.dataconnectorInstance})}return t.currentApp.getConnection(m.dataconnectorInstance.id).then(function(e){return e.qConnection.qConnectionString})}g.all([x(),l.getCodepageOptionsPromise(),s.getReloadScriptBnfModel()]).then(function(r){var o=r[0];if(o){o=o.replace(/^(\\)/,"");o=o.replace(/\\/g,"/")}var l=r[1];var s=r[2];var c=m.dataconnectorInstance.id;var g=new i(m.dataconnectorInstance,l);var x,S,C,E;var y=["TYPE9_FIX","TYPE9_EXCEL_OOXML","TYPE9_EXCEL_BIFF","TYPE9_HTML","TYPE9_XML","TYPE9_KML","TYPE9_CSV","TYPE9_QVD","TYPE9_QVX"],T=["TYPE9_EXCEL_OOXML","TYPE9_EXCEL_BIFF","TYPE9_HTML","TYPE9_XML","TYPE9_KML"];b.show({messageObj:{task:"DataLoadEditor.DataConnectors.WaitWhileAnalyzing"},transparentBackground:true});(o?t.currentApp.guessFileType(c,o):t.currentApp.guessFileType(c)).then(function(i){i.qDataFormat.qType="TYPE9_"+i.qDataFormat.qType;-1===y.indexOf(i.qDataFormat.qType)&&(i.qDataFormat.qType="TYPE9_CSV");g.getSettingsModelForFile(o).setSettingsGuess(i.qDataFormat);x=T.indexOf(i.qDataFormat.qType)>-1;C="scripteditor.dataconnectors."+("TYPE9_XML"===i.qDataFormat.qType||"TYPE9_HTML"===i.qDataFormat.qType?"tables":"sheets");S="TYPE9_XML"===i.qDataFormat.qType||"TYPE9_CSV"===i.qDataFormat.qType||"TYPE9_QVD"===i.qDataFormat.qType||"TYPE9_QVX"===i.qDataFormat.qType||"TYPE9_JSON"===i.qDataFormat.qType||"TYPE9_KML"===i.qDataFormat.qType;E=x?"top-right":("TYPE9_CSV"===i.qDataFormat.qType,"top-wide");var r={getConnectionInfo:function t(){return e.promise({dbusage:false,ownerusage:false,dbfirst:false,specialchars:"!  　\"$&'()*+,-/:;<>´`{}~[]\n\r\t",dbseparator:"",ownerseparator:"",quotesuffix:'"',quoteprefix:'"',quotesuffixfordoublequotes:"]",quoteprefixfordoublequotes:"[",keywords:[]})},getDatabases:function t(){return e.promise([{qName:o}])},getOwners:function t(){var n=[],a;for(a=0;a<y.length;a++)n.push({qName:y[a],qIsDefault:y[a]===i.qDataFormat.qType});return e.promise(n)},getTables:function n(i,a){if(T.indexOf(a)>-1){var r=f(a);var l={qType:r};var s={qConnectionId:c,qRelativePath:i,qDataFormat:l};return("TYPE9_XML"===a||"TYPE9_JSON"===a||"TYPE9_KML"===a?t.currentApp.getFileTablesEx(s):t.currentApp.getFileTables(s)).then(function(e){if(e.qTables.length>0){if(S){for(var t=0;t<e.qTables.length;t++){g.getSettingsModelForTable(i,a,e.qTables[t].qName).setFormatSpec(e.qTables[t].qFormatSpec);m.dataconnectionEditor&&m.dataconnectionEditor.getTableEditor(i,a,e.qTables[t].qName).setFormatSpec(e.qTables[t].qFormatSpec)}e.qTables[0].qIsDefault=true}return e.qTables}return[]},function(e){3002!==e.code&&e.code!==d.LocalizedErrorCode.LOCERR_GENERIC_INVALID_PARAMETERS&&(e.isHandled=true);return[]})}return e.promise([{qName:o,qIsDefault:true}])},getFields:function e(n,i,a){x=T.indexOf(i)>-1;var r=f(i);var o={qType:r},l=g.getSettingsModelForFile(n).getParamsForEngine(),s=g.getSettingsModelForTable(n,i,a).getParamsForEngine(),d=p(q(o,l,s)),u=x?{qConnectionId:c,qRelativePath:n,qTable:a,qDataFormat:d}:{qConnectionId:c,qRelativePath:n,qTable:"",qDataFormat:d};return t.currentApp.getFileTableFields(u).then(function(e){g.getSettingsModelForTable(n,i,a).setFormatSpec(e.qFormatSpec);m.dataconnectionEditor&&m.dataconnectionEditor.getTableEditor(n,i,a).setFormatSpec(e.qFormatSpec);return e.qFields},function(e){e.isHandled=true;return[]})},getPreview:function e(n,i,a){x=T.indexOf(i)>-1;var r=f(i);var o={qType:r},l=g.getSettingsModelForFile(n).getParamsForEngine(),s=g.getSettingsModelForTable(n,i,a).getParamsForEngine(),d=p(q(o,l,s)),u=x?{qConnectionId:c,qRelativePath:n,qTable:a,qDataFormat:d}:{qConnectionId:c,qRelativePath:n,qTable:"",qDataFormat:d};return t.currentApp.getFileTablePreview(u).then(function(e){return e.qPreview},function(e){e.isHandled=true;return[]})}},l=new n.createScriptGenerator(m.dataconnectorInstance,g,s),u=new a(g),h={databaseTitle:"scripteditor.dataconnectors.file",databasePlaceholder:"scripteditor.dataconnectors.selectfile",tablesTitle:C,ownerTitle:"scripteditor.dataconnectors.fileformat",ownerPlaceholder:"",metadataVisible:false,tablesLocation:"full-height-left",specialTableSettingsLocation:E,databaseVisible:false,ownerVisible:true,tablesVisible:x,forceSelectTables:S,showSelectionsSummary:false,specialTableSettings:u,scriptGenerator:l,precedingLoadVisible:false,selectFromTitleName:o,fileTypesWithTables:T,quickLoadContext:F,dataconnectorInstance:m.dataconnectorInstance,forceSelectFirstTable:true};v.showStandardDialog(r,h)}).catch(function(e){e.isHandled=true;h.show({title:u.get("ErrorDialog.Title"),message:u.get("ErrorCode."+e.code),okLabel:u.get("Common.Close")})}).finally(function(){b.close()})}).catch(function(){})}]}.apply(t,i),void 0!==a&&(e.exports=a))},1473:function(e,t){e.exports='<div class="qvfilebrowser">\n\t<ul class="qv-fb-ul" vs-repeat vs-scroll-parent=".qvfilebrowser" ng-class="{\'hideBack\': hideBack}">\n\t\t<li class="qui-menu-item" tid="file-list-item" ng-disabled="item.disabled || (item.isFile && isAddMode)" ng-repeat="item in folderitems"\n\t\t\tng-class="{\'data-file\': item.isFile, \'data-folder\': !item.isFile, \'fileselected\': item.isFile && item.name == selectedFileName }"\n\t\t\tng-click="onItemClick(item);"\n\t\t\tng-dblclick="onItemDblClick(item)"\n\t\t\ttitle="{{item.path}}">\n\n\t\t\t<span class="list-icon lui-icon lui-icon--back" ng-show="!hideBack && $index === 0"></span>\n\n\t\t\t<span  class="list-icon lui-icon" ng-show="hideBack || $index > 0" ng-class="{\'lui-icon--file\': item.isFile, \'lui-icon--folder\': !item.isFile }"></span>\n\t\t\t<span ng-class="{\'file-name-with-delete\': (item.isFile && (hideBack || $index > 0) && canDelete())}">{{item.name}}</span>\n\t\t\t<span class="extra-info" ng-show="item.extraInfo">{{item.extraInfo}}</span>\n\t\t\t<button class="lui-fade-button" ng-show="item.isFile && (hideBack || $index > 0) && canDelete()" ng-click="onDeleteFileClicked(item); $event.stopPropagation();" q-title-translation="UploadedFilesFolder.DeleteFileButton.Title">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon lui-icon--bin"></span>\n\t\t\t</button>\n\t\t</li>\n\t</ul>\n</div>\n'},1474:function(e,t){e.exports='<div class="qvfilepathinputcontainer" tabindex="-1" ng-class="{ invalidpath: !isvalidpath }">\n\t<div class="itemcontainer" ng-click="focusOnInput()">\n\t\t<div ng-repeat="item in items" class="item">\n\t\t\t<div class="lui-button" ng-class="{hover:isHovered(item.path)}" ng-click="onItemClick(item.path, $event);" ng-mouseenter="onMouseEnter(item.path);" ng-mouseleave="onMouseLeave(item.path);" title="{{item.path}}">{{item.name}}</div>\n\t\t\t<div class="lui-icon lui-icon--next" tid="add-data-path-separator"></div>\n\t\t</div>\n\t</div>\n\t<input class="lui-input qvfilepathinputcontainer-input" tid="filepathinputcontainer-path-input-box" type="text" ng-model="path" qva-model-onblur="true" maxlength="500" onfocus="this.value = this.value;" onblur="/*QLIK-14545*/var t = this.value; this.value = \'\'; this.value = t;"/>\n</div>\n'},1475:function(e,t){e.exports='<ul class="qv-fb-ul" ng-if="$ctrl.connections.length > 0">\n\n\t<li class="qui-menu-item header">\n\t\t<span class="title-icon lui-icon  lui-icon--triangle-bottom" aria-hidden="true" ng-class="{\'lui-icon--triangle-bottom\': $ctrl.folderListExpanded, \'lui-icon--triangle-right\': !$ctrl.folderListExpanded}" ng-click="$ctrl.toggleFolderExpansion()"></span>\n\t\t<div class="title-text" q-translation="AddData.SharedFiles.FolderShortcuts"></div>\n\t</li>\n\n\t<li ng-if="$ctrl.folderListExpanded" class="qui-menu-item" tid="file-list-item" ng-repeat="connection in $ctrl.connections"\n\t\ttitle="{{connection.connectorInstance.name}}" ng-click="$ctrl.onClickShortcut(connection)">\n\t\t<span class="list-icon lui-icon lui-icon--folder"></span>\n\t\t{{connection.connectorInstance.name}}\n\t</li>\n</ul>\n\n<ul class="qv-fb-ul" ng-if="$ctrl.drives.length > 0">\n\t<li class="qui-menu-item header">\n\t\t<span class="title-icon lui-icon  lui-icon--triangle-bottom" aria-hidden="true" ng-class="{\'lui-icon--triangle-bottom\': $ctrl.computerExpanded, \'lui-icon--triangle-right\': !$ctrl.computerExpanded}" ng-click="$ctrl.toggleComputerExpansion()"></span>\n\t\t<div class="title-text" q-translation="AddData.SharedFiles.Computer"></div>\n\t</li>\n\n\t<li ng-if="$ctrl.computerExpanded" tid="file-list-item" class="qui-menu-item" ng-repeat="drive in $ctrl.drives"\n\t\ttitle="{{drive.name}}" ng-click="$ctrl.onClickDrive(drive.path)">\n\t\t<span class="list-icon lui-icon lui-icon--folder"></span>\n\t\t{{drive.name}}\n\t</li>\n</ul>\n'},1477:function(e,t,n){"use strict";var i,a;!(i=[n(1478),n(51),n(11),n(118),n(89),n(117),n(416),n(91),n(998),n(294),n(1158),n(996),n(1007),n(1479)],a=function(e,t,n,i,a,r,o,l,s,c,d,u,p){var f={template:e,scope:{dataconnectorInstance:"=",scriptEditorProxy:"=",selectedFileName:"=",stepContext:"="},controller:["$scope",function(e){e.storageProviders=[];e.selectedStorageProvider=null;e.providersLoaded=false;e.isLoading=true;e.folderitems=[];e.availableSpace=null;e.folderSize=null;e.maxFolderSize=null;e.maxFileSize=null;e.allowedExtensions=null;var t={};var f=false;"qix-datafiles.exe"===e.dataconnectorInstance.type.provider?e.activeDatafilesService=p:e.activeDatafilesService=u;e.canUpload=function(){return e.activeDatafilesService.isFileUploadEnabled(e.dataconnectorInstance)};e.canDelete=function(){return e.activeDatafilesService.isFileUploadEnabled(e.dataconnectorInstance)};e.onFileUpload=function(t){m();e.selectedFileName=t.name};e.storageProviders=d.getStorageProviders().then(function(t){e.storageProviders=t;if(e.dataconnectorInstance){e.currentStorageProvider=e.storageProviders.filter(function(t){return t.id===e.dataconnectorInstance.sourceConnectorID})[0];var n=e;if(e.currentStorageProvider){e.serverside=c.getServersideConnectorProxy(e.dataconnectorInstance.type.provider,e.dataconnectorInstance.type.name,e.dataconnectorInstance);e.currentStorageProvider.updateConnection(e.dataconnectorInstance,e.serverside);e.currentStorageProvider.getDirectoryInfo(e.currentCredentials,e.path,F(e.path)).then(function(e){x(e);n.isLoading=false},function(){n.isLoading=false})}else n.isLoading=false}else e.isLoading=false;e.providersLoaded=true},function(){e.isLoading=false});e.fileFilters=o.getFileFilters();e.path="";e.validpath=true;e.selectedFileFilter=e.fileFilters[0];e.rootPlaceholderName=e.dataconnectorInstance?"<"+e.dataconnectorInstance.name+">":"";e.invalidPathDefaultMessage=l.get("scripteditor.dataconnectors.fileconnect.illegalpath");e.invalidPathLabel=e.invalidPathDefaultMessage;function m(){if(e.activeDatafilesService.isDatafilesConnection(e.dataconnectorInstance)){g();e.activeDatafilesService.listFolder("",e.path,e.dataconnectorInstance).then(function(e){q(e)})}else if(e.currentStorageProvider||e.qvxSelectedEntrypoint&&e.qvxSelectedEntrypoint.isStorageProvider){if(e.currentStorageProvider){var t=e;t.isLoading=true;e.currentStorageProvider.getDirectoryInfo(e.currentCredentials,e.path,F(e.path)).then(function(e){x(e);t.isLoading=false},function(){t.isLoading=false})}}else v(e.path)}function g(){e.activeDatafilesService.getFolderInfo("",e.path,e.dataconnectorInstance).then(function(t){if(t){e.availableSpace=t.maxSize-t.size;e.folderSize=t.size;e.maxFolderSize=t.maxSize;e.maxFileSize=t.maxFileSize;e.allowedExtensions=t.allowedExtensions}})}function v(t){e.folderitems=[];e.isLoading=true;function n(n){e.folderitems=s.postProcessDirectoryListing(t,n.qFolderItems,e.selectedFileFilter.regexps);h(true);e.isLoading=false;b()}function a(n){e.folderitems=s.postProcessDirectoryListing(t,[],e.selectedFileFilter.regexps);n.isHandled=true;h(false,n.code);e.isLoading=false;b()}e.dataconnectorInstance?r.currentApp.getFolderItemsForConnection({qConnectionId:e.dataconnectorInstance.id,qRelativePath:i.removeSurroundingSlashes(t)}).then(n,a):r.global.getFolderItemsForPath(t).then(n,a)}function h(t,n){e.validpath=t;e.invalidPathLabel=n?l.get("ErrorCode."+n):e.invalidPathDefaultMessage}function F(e){if(!f)return"";if(!e)return"root";return t[i.removeSurroundingSlashes(e)]}function b(){e.validFilePathName=S(e.selectedFileName)}e.$watch("path + selectedFileFilter.title",function(){if(e.dataconnectorInstance.sourceConnectorID&&i.startsWith(e.dataconnectorInstance.sourceConnectorID,"File_")&&!e.providersLoaded)return;m()});e.$watch("selectedFileName",function(){b()});e.providerSelected=function(t){if(!t){alert("Storage provider missing");return}e.currentStorageProvider=t;t.requiresAuthentication&&!e.currentCredentials?d.getConnectorType(t.providerName).then(function(i){var r=new a;var o={id:t.id,name:t.name,qvxSelectedEntrypoint:{id:t.id,name:t.name},kind:"connect",connectorType:i,serverside:c.getServersideConnectorProxy(i.provider),configuration:e.configuration,deferredResult:r};var l=n("#credentialsContainer").showComponent(t.credentialsDialog,o);l.onVerifyPromise.then(function(n){e.currentCredentials=n;e.rootPlaceholderName=t.name;t.getDirectoryInfo(n,e.path,F(e.path)).then(function(e){x(e)})})}):t.getDirectoryInfo(e.currentCredentials,e.path,F(e.path)).then(function(e){x(e)})};function q(t){e.folderitems=s.postProcessDatafilesListing(e.path,t,e.selectedFileFilter.regexps);h(true);e.isLoading=false;b()}function x(n){f=n.usesId;n.success?h(true):h(false);e.folderitems=[];e.currentLocation=n.location?n.location:"";if(f){t["root"]="";n.folders.forEach(function(e){t[i.removeSurroundingSlashes(e.path)]=e.id});n.files.forEach(function(e){n.location?t[i.removeSurroundingSlashes(n.location)+"\\"+e.name]=e.id:t[e.name]=e.id})}e.folderitems=s.postProcessStorageProviderDirectoryListing(e.path,n.folders,n.files,e.selectedFileFilter.regexps)}e.onFileClicked=function(t,n){e.selectedFileName=n};e.onDeleteFile=function(t){return e.activeDatafilesService.deleteFile(t.id).then(function(){m()},function(){console.log("failed to delete")})};e.filePathName=function t(){if(f){var n=F(e.path);if(n)return e.path?F(i.combinePath(e.path,e.selectedFileName)):F(e.selectedFileName)}return e.path?i.combinePath(e.path,e.selectedFileName):e.selectedFileName};function S(t){return e.folderitems&&e.folderitems.some(function(e){return!!e.isFile&&e.name===t})}e.isOkDisabled=function(){return!e.validFilePathName};e.onOKClicked=function(){e.destroyComponent();e.deferredResult.resolve(e.filePathName())};e.onEnter=function(){e.isOkDisabled()||e.onOKClicked()};function C(){e.destroyComponent();e.deferredResult.reject()}e.onEscape=C;e.onCancelClicked=C}]};return{selectFile:function e(n){return t.show(f,{dataconnectorInstance:n.instance,scriptEditorProxy:n.scriptEditorProxy}).resultPromise}}}.apply(t,i),void 0!==a&&(e.exports=a))},1478:function(e,t){e.exports='<div class="qui-modalbackground flatfilechoosercontainer" tid="2e6965">\n    <div class="qui-delayedModal" qv-global-escape="onEscape()" qv-global-enter="onEnter()">\n\t\t<div class="loading-screen" ng-show="isLoading">\n\t\t\t<div class="qv-loader"></div>\n\t\t</div>\n        <header class="dm-header" q-translation="scripteditor.dataconnectors.filechooser.title"></header>\n        <main class="dm-main">\n            <div class="text" q-translation="scripteditor.dataconnectors.fileconnect.path"></div>\n            <qv-file-path-input path="path" hover-path="currentHoverPath" isvalidpath="validpath" root-placeholder="rootPlaceholderName"></qv-file-path-input>\n            <p class="illegalpath" ng-style="{visibility: !validpath && \'visible\' || \'hidden\'}">{{invalidPathLabel}}</p>\n\t\t\t<qv-file-browser-widget on-dbl-click="onOKClicked()" can-delete="canDelete()" path="path" hover-path="currentHoverPath" folderitems="folderitems" selected-file-name="selectedFileName" on-file-clicked="onFileClicked(path, name)" on-delete-file="onDeleteFile(file)"></qv-file-browser-widget>\n            <div class="text" q-translation="scripteditor.flatfilechooser.filetype"></div>\n            <lui-select class="filetype" x-model="selectedFileFilter" x-options="option.title|translate for option in fileFilters"></lui-select>\n\n\n            <qv-file-upload-widget ng-if="dataconnectorInstance && canUpload()"  on-file-upload="onFileUpload(file)" dataconnector-instance="dataconnectorInstance" folderitems="folderitems"\n                                    available-space="availableSpace" max-file-size="maxFileSize" folder-size="folderSize" max-folder-size="maxFolderSize" allowed-extensions="allowedExtensions"> </qv-file-upload-widget>\n\n        </main>\n        <footer class="dm-footer">\n\t\t\t<lui-button x-variant="inverse" ng-click="$event.preventDefault(); onCancelClicked()" q-translation="Common.Cancel"></lui-button>\n\t\t\t<lui-button x-variant="inverse" ng-click="$event.preventDefault(); onOKClicked()" ng-disabled="isOkDisabled()" q-translation="scripteditor.dataconnectors.filechooser.choosefile" title="{{filePathName()}}"></lui-button>\n        </footer>\n    </div>\n</div>\n'},1479:function(e,t,n){"use strict";var i,a;!(i=[n(11),n(119),n(90),n(138),n(91),n(1480),n(996),n(1007),n(227),n(280)],a=function(e,t,n,i,a,r,o,l,s){t.directive("qvFileUploadWidget",function(){return{restrict:"EA",replace:true,scope:{path:"=",folderitems:"=",availableSpace:"=",folderSize:"=",maxFolderSize:"=",maxFileSize:"=",allowedExtensions:"=",selectedFileName:"=",dataconnectorInstance:"<",onFileUpload:"&"},template:r,controller:["$scope","$timeout","$delayedModal",function(r,c,d){var u=null;var p=e("body");r.uploading=false;r.draggingOver=false;r.uploadingFileName=null;r.uploadingFileSize=null;r.hideAvailableSpaceInfo=false;if("qix-datafiles.exe"===r.dataconnectorInstance.type.provider){r.activeDatafilesService=l;r.hideAvailableSpaceInfo=true}else r.activeDatafilesService=o;r.selectFile=function(){u||(u=e("<input type='file' style='display: none;'/>").appendTo(e("body")).change(function(){h(u[0].files[0]);u.remove();u=null}));n.isMSIE()||n.isEdge()?t.getService("$timeout")(function(){u[0].click()},0):u[0].click()};r.formatSize=function(e,t){var n=[a.get("UploadedFilesFolder.FileSizeUnit.Bytes"),a.get("UploadedFilesFolder.FileSizeUnit.KB"),a.get("UploadedFilesFolder.FileSizeUnit.MB")];var i=a.get("UploadedFilesFolder.FileSize.NA");if(e>0){var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);i=t?t(e/Math.pow(1024,r)*10)/10+n[r]:Math.ceil(e/Math.pow(1024,r)*10)/10+n[r]}return i};function f(e){var n=t.defer();var i=r.folderitems&&r.folderitems.filter(function(t){return t.isFile&&t.name===e.name});i&&i.length>0?d.open({title:"DataFiles.Confirm.Overwrite.Title",content:a.get("DataFiles.Confirm.Overwrite.Description",[e.name]),buttons:[{name:"Common.Cancel",callback:function e(){n.reject()}},{name:"DataFiles.Button.Overwrite",defaultButton:true,callback:function e(){n.resolve({existingFile:true,fileId:i[0].id})}}]}):n.resolve({existingFile:false});return n.promise}function m(e){if(!r.allowedExtensions)return false;return r.allowedExtensions.some(function(t){return n.hasFileExtension(e.name,t)})}function g(e){var n=t.defer();var i=r.maxFileSize;var o=r.availableSpace;var l=r.formatSize(e.size,Math.floor);"number"===typeof i&&i>0&&e.size>i?n.reject({message:a.get("UploadedFilesFolder.Error.MaxFileSizeExceeded",[e.name,l,r.formatSize(i,Math.ceil)])}):"number"===typeof o&&e.size>o?n.reject({message:a.get("UploadedFilesFolder.Error.AvailableSpaceExceeded",[e.name,l,r.formatSize(o,Math.ceil)])}):n.resolve();return n.promise}function v(e){var n=t.defer();var i=m(e);if(!i){n.reject(new Error(a.get("UploadedFilesFolder.Error.NotAllowedFileType",[e.name])));return n.promise}try{encodeURIComponent(e.name)}catch(t){n.reject(new Error(a.get("UploadedFilesFolder.Error.IllegalCharsInFilename",[e.name])));return n.promise}g(e).then(function(){n.resolve(true)},function(e){n.reject(e)});return n.promise}function h(e){if(r.uploading)return;v(e).then(function(){f(e).then(function(t){r.uploading=true;r.uploadingFileName=e.name;r.uploadingFileSize=r.formatSize(e.size,Math.ceil);t.existingFile?r.activeDatafilesService.updateFile(t.fileId,e).then(F,q,b):r.activeDatafilesService.uploadFile(e,r.dataconnectorInstance).then(F,q,b)})},function(e){s.showDialog(e)})}function F(e){r.uploadingProgress=i.format.number(1,{style:"percent"});c(function(){r.uploading=false;r.onFileUpload&&r.onFileUpload({file:e})},500)}function b(e){r.uploadingProgress=i.format.number(e,{style:"percent"})}function q(e){r.uploading=false;e||(e={code:500});s.showDialog(e)}var x=null;function S(e){var t=e.dataTransfer||e.originalEvent&&e.originalEvent.dataTransfer;var n=e.target.files||t.files;return n?n[0]:null}function C(e){e.stopPropagation();e.preventDefault();if(x){c.cancel(x);x=null}r.$apply(function(){r.draggingOver=true})}function E(e){e.stopPropagation();e.preventDefault();if(e.relatedTarget)return;x&&c.cancel(x);x=c(function(){r.draggingOver=false},100)}function y(e){e.stopPropagation();e.preventDefault();var t=S(e);r.$apply(function(){r.draggingOver=false;h(t)})}p.on("dragover",C);p.on("dragleave",E);p.on("drop",y);r.$on("$destroy",function(){p.off("dragover",C);p.off("dragleave",E);p.off("drop",y)})}]}})}.apply(t,i),void 0!==a&&(e.exports=a))},1480:function(e,t){e.exports='<div class="qvfileupload">\n    <div class="upload-drop-zone" ng-click="selectFile()">\n        <span class="lui-icon lui-icon--upload lui-icon--large"></span>\n        <span class="text drag-and-drop-label" q-translation="uploadfile.selectfiledialog.draganddropfilehere"></span>\n    </div>\n    <div ng-if="availableSpace != null && !hideAvailableSpaceInfo" class="store-status">\n        <span class="text" q-translation="UploadedFilesFolder.Status.AvailableSpace, {{formatSize(availableSpace)}}"></span>\n    </div>\n    <div class="file-info" ng-show="uploading || draggingOver">\n        <div class="overlay"></div>\n        <div class="dragging-circle centered">\n            <div class="upload-icon centered lui-icon lui-icon--upload" ng-show="draggingOver && !uploading"></div>\n            <div class="text upload-progress centered" ng-show="uploading">{{uploadingProgress}}</div>\n        </div>\n        <div class="text upload-message centered" ng-show="draggingOver && !uploading" q-translation="uploadfile.selectfiledialog.dropfilehere"></div>\n        <div class="text upload-message centered" ng-show="uploading">{{uploadingFileName}} ({{uploadingFileSize}})</div>\n    </div>\n</div>\n'},1481:function(e,t,n){"use strict";var i,a;!(i=[n(1482),n(51),n(1216)],a=function(e,t){var n={template:e,scope:{dataconnectorInstance:"=",stepContext:"="},controller:["$scope",function(e){e.selectedFileName={name:null};e.onFileClicked=function(t,n){e.selectedFileName=n};e.isOkDisabled=function(){return!e.selectedFileName.name};e.onOKClicked=function(){e.destroyComponent();e.deferredResult.resolve(e.selectedFileName.name)};e.onEnter=function(){e.isOkDisabled()||e.onOKClicked()};function t(){e.destroyComponent();e.deferredResult.reject()}e.onEscape=t;e.onCancelClicked=t;e.onUploadedFileSelected=function(t){e.selectedFileName.name=t;t&&e.onOKClicked()}}]};return{selectFile:function e(i){return t.show(n,{dataconnectorInstance:i.instance,stepContext:{visible:true}}).resultPromise}}}.apply(t,i),void 0!==a&&(e.exports=a))},1482:function(e,t){e.exports='<div class="qui-modalbackground uploadedfilechoosercontainer">\n\t<div class="qui-delayedModal" qv-global-escape="onEscape()" qv-global-enter="onEnter()">\n\t\t<header class="dm-header" q-translation="scripteditor.dataconnectors.filechooser.title"></header>\n\t\t<main class="dm-main">\n\t\t\t<qv-uploaded-data-files-view class="uploaded-files-view" on-file-selected="onUploadedFileSelected(name)" selected-file-name="selectedFileName" step-context="stepContext" upload-folder-connection="dataconnectorInstance"></qv-uploaded-data-files-view>\n\t\t</main>\n\t\t<footer class="dm-footer">\n\t\t\t<lui-button x-variant="inverse" ng-click="$event.preventDefault(); onCancelClicked()" q-translation="Common.Cancel"></lui-button>\n\t\t\t<lui-button x-variant="inverse" ng-click="$event.preventDefault(); onOKClicked()" ng-disabled="isOkDisabled()" q-translation="scripteditor.dataconnectors.filechooser.choosefile" title="{{filePathName()}}"></lui-button>\n\t\t</footer>\n\t</div>\n</div>\n'},1483:function(e,t,n){"use strict";var i,a;!(i=[n(48),n(1484)],a=function(e,t){var n={template:t,bindings:{minInput:"=",maxInput:"=",selectorClass:"=",model:"=",disabled:"=",inputTid:"="},controller:["$element",function(e){var t=this;t.onChange=function(n){var a=parseInt(n)||0;var r=parseInt(e.find("."+t.selectorClass)[0].value);t.model=i(r+a,t.minInput,t.maxInput)};function n(e){return Number(String(e).replace(/[^-\d]/g,""))}function i(e,t,i){e=n(e);t=Number(t);i=Number(i);if(e<t)return t;if(0!==i&&e>i)return i;return e}}]};e.nativeComponent("dsNumberInput",n)}.apply(t,i),void 0!==a&&(e.exports=a))},1484:function(e,t){e.exports='<div class="ds-number-input">\n\t<span class="lui-input-group">\n\t\t<button class="lui-input-group__item lui-input-group__button lui-button"\n\t\t\tng-click="$ctrl.onChange( -1 )"\n\t\t\tng-disabled="$ctrl.disabled">\n\t\t\t<span class="lui-button__icon">-</span>\n\t\t</button>\n\t\n\t\t<input type="text"\n\t\t\tclass="lui-input-group__item  lui-input-group__input  lui-input  ds-number-text-input  {{$ctrl.selectorClass}}"\n\t\t\ttid="{{$ctrl.inputTid}}"\n\t\t\tng-model="$ctrl.model"\n\t\t\tng-change="$ctrl.onChange()"\n\t\t\tng-disabled="$ctrl.disabled">\n\t\n\t\t<button class="lui-input-group__item lui-input-group__button lui-button"\n\t\t\tng-click="$ctrl.onChange( 1 )"\n\t\t\tng-disabled="$ctrl.disabled">\n\t\t\t<span class="lui-button__icon">+</span>\n\t\t</button>\n\t</span>\n</div>\n'},280:function(e,t,n){"use strict";var i,a;!(i=[n(11),n(89),n(48),n(397),n(10)],a=function(e,t,n,i){var a=window.angular,r={"max-height":"90%","max-width":"90%","min-height":"180px",width:"400px"},o,l=false,s=false;n.directive("qvDelayedDialogButton",function(){return{replace:true,restrict:"A",link:function e(t){t.button&&t.button.defaultEscButton&&(o=t);t.closeModal=function(e,n){if(e){e.preventDefault();e.stopPropagation()}t.button&&t.button.callback&&("undefined"===typeof t.button.expression||t.button.expression)&&t.button.callback();(n||t.autoClose||t.button&&!t.button.callback)&&t.destroyModal();return}}}});n.service("$delayedModal",["$compile","$rootScope","$document",function(n,c,d){var u={},p,f,m,g,v=i,h;var F={open:function e(i){var F=new t,b;if(p){f=p;g=m}p=c.$new();m=a.element('<div class="qv-modal-container qui-modalbackground-centered" qva-outside-ignore-for="allOutside" ng-style="containerStyle" ng-class="classes"></div>');p.containerStyle={content:" "};p.classes={};p.modalStyle={};var q;for(q in r)p.modalStyle[q]=r[q];p.wasDisabled=[];p.showDefaultButton=true;l=true;s=false;u=i;p.failed=false;p.autoClose=true;for(q in u)p[q]=u[q];m.html(v).appendTo(d.find("body"));p.html&&m.find("main").append(p.html);b=p.$watch("element",function(){F.resolve();b()});h=n(m)(p);p.destroyModal=this.close.bind(this);p.handleEscButton=function(e){if(e){e.preventDefault();e.stopPropagation()}p.buttons&&o?o&&o.closeModal():p.destroyModal()};p.$broadcast("delayed-modal-opened");p.$watchCollection("[width, height]",function(){p.width&&(p.modalStyle.width=p.width);p.height&&(p.modalStyle.height=p.height)});return F.promise},update:function e(t){if(!l)return;for(var i in t){p[i]=t[i];u[i]=t[i]}if(t.html||t.buttons){m.html(v);m.find("main").html(t.html);d.find("body").find(".qui-delayedModal").replaceWith(m.html());h=n(m)(p)}},close:function e(){if(p&&m){p.$broadcast("delayed-modal-closed");m.remove();p.$destroy();p=f||null;m=g||null;g=null;f=null}l=false;s=false},lock:function t(){s=true;p.wasDisabled.length=0;h.find("button, input, textarea, select").each(function(){var t=e(this);t.prop("disabled")?p.wasDisabled.push(this):t.prop("disabled",true)})},unlock:function t(){s=false;h.find("button, input, textarea, select").each(function(){-1===p.wasDisabled.indexOf(this)&&e(this).prop("disabled",false)});p.wasDisabled.length=0}};Object.defineProperty(F,"isOpened",{get:function e(){return l}});Object.defineProperty(F,"isLocked",{get:function e(){return s}});Object.defineProperty(F,"scope",{get:function e(){return p}});return F}])}.apply(t,i),void 0!==a&&(e.exports=a))},397:function(e,t){e.exports='<div class="lui-dialog error-dialog" on-close-view="closeView( $event )" qv-escape="handleEscButton( $event )" ng-style="modalStyle" tid="errorDialog">\n\t<div class="lui-dialog__header">\n\t\t<div class="lui-dialog__title" ng-if="title" q-translation="{{title}}"></div>\n\t</div>\n\t<div class="lui-dialog__body dm-main">\n\n\t\t<main ng-if="!html">{{content | translate}}</main>\n\t\t<main ng-if="html" class="qv-appname"></main>\n\n\t</div>\n\n\t<div class="lui-dialog__footer">\n\t\t<lui-button qv-delayed-dialog-button ng-if="!buttons.length && showDefaultButton" ng-click="closeModal( $event, true );" qva-focus="true"\n\t\t\t\t\tq-translation="Common.OK" tid="confirm"></lui-button>\n\t\t<lui-button qv-delayed-dialog-button ng-repeat="button in buttons" qva-focus="button.defaultButton" ng-click="closeModal( $event );" ng-disabled="button.expression === false"\n\t\t\t\t\tq-translation="{{button.name}}" tid="{{button.tid}}"></lui-button>\n\t</div>\n</div>'},416:function(e,t,n){"use strict";var i,a;!(i=[],a=function(){function e(){return[new RegExp("\\.csv$","i"),new RegExp("\\.txt$","i"),new RegExp("\\.tab$","i"),new RegExp("\\.qvo$","i"),new RegExp("\\.mem$","i"),new RegExp("\\.skv$","i"),new RegExp("\\.prn$","i"),new RegExp("\\.log$","i"),new RegExp("\\.xls$","i"),new RegExp("\\.xlw$","i"),new RegExp("\\.xlsx$","i"),new RegExp("\\.xlsm$","i"),new RegExp("\\.html$","i"),new RegExp("\\.htm$","i"),new RegExp("\\.php$","i"),new RegExp("\\.fix$","i"),new RegExp("\\.dat$","i"),new RegExp("\\.qvd$","i"),new RegExp("\\.qvx$","i"),new RegExp("\\.xml$","i"),new RegExp("\\.html$","i"),new RegExp("\\.kml$","i")]}function t(e){var t=e.split(".").pop();switch(t){case"xls":case"xlw":case"xlsx":case"xlsm":return n.p+"img/connector-logos/Excel48.png";case"csv":case"txt":case"tab":case"qvo":case"mem":case"skv":case"prn":case"log":return n.p+"img/connector-logos/Delimited48.png";case"qvd":return n.p+"img/connector-logos/QVD48.png";case"qvx":return n.p+"img/connector-logos/QVX48.png";case"xml":case"html":case"kml":return n.p+"img/connector-logos/AnyFile48.png";default:return n.p+"img/connector-logos/AnyFile48.png"}}var i=[{title:"scripteditor.flatfilechooser.files.tables",titleShort:"scripteditor.flatfilechooser.files.tablesShort",regexps:e()},{title:"scripteditor.flatfilechooser.files.delimited",titleShort:"scripteditor.flatfilechooser.files.delimitedShort",regexps:[new RegExp("\\.csv$","i"),new RegExp("\\.txt$","i"),new RegExp("\\.tab$","i"),new RegExp("\\.qvo$","i"),new RegExp("\\.mem$","i"),new RegExp("\\.skv$","i"),new RegExp("\\.prn$","i"),new RegExp("\\.log$","i")]},{title:"scripteditor.flatfilechooser.files.excel",titleShort:"scripteditor.flatfilechooser.files.excelShort",regexps:[new RegExp("\\.xls$","i"),new RegExp("\\.xlw$","i"),new RegExp("\\.xlsx$","i"),new RegExp("\\.xlsm$","i")]},{title:"scripteditor.flatfilechooser.files.html",titleShort:"scripteditor.flatfilechooser.files.htmlShort",regexps:[new RegExp("\\.html$","i"),new RegExp("\\.htm$","i")]},{title:"scripteditor.flatfilechooser.files.kml",titleShort:"scripteditor.flatfilechooser.files.kmlShort",regexps:[new RegExp("\\.kml$","i")]},{title:"scripteditor.flatfilechooser.files.fix",titleShort:"scripteditor.flatfilechooser.files.fixShort",regexps:[new RegExp("\\.fix$","i"),new RegExp("\\.dat$","i")]},{title:"scripteditor.flatfilechooser.files.qvd",titleShort:"scripteditor.flatfilechooser.files.qvdShort",regexps:[new RegExp("\\.qvd$","i")]},{title:"scripteditor.flatfilechooser.files.qvx",titleShort:"scripteditor.flatfilechooser.files.qvxShort",regexps:[new RegExp("\\.qvx$","i")]},{title:"scripteditor.flatfilechooser.files.xml",titleShort:"scripteditor.flatfilechooser.files.xmlShort",regexps:[new RegExp("\\.xml$","i"),new RegExp("\\.html$","i")]},{title:"scripteditor.flatfilechooser.files.all",titleShort:"scripteditor.flatfilechooser.files.allShort",regexps:[new RegExp(".*","i")]}];return{getAllTableFileFormats:e,getFileFilters:function e(){return i},getIconForFile:t}}.apply(t,i),void 0!==a&&(e.exports=a))},496:function(e,t,n){"use strict";var i,a;!(i=[n(11),n(48),n(90),n(117),n(108),n(91),n(54)],a=function(e,t,n,i,a,r,o){var l=[];var s="47a1cfd8-f70e-4a98-a00d-00fca6c8e253";var c=n.getRandomString(16);var d;function u(e){return e.id===s}var p=null;var f=null;function m(){f&&f.reject(null);f=t.defer();p||(p=e("<input type='file' style='display: none;'/>").appendTo(e("body")).change(function(){if(f){f.resolve(p[0].files[0]);f=null;p.remove();p=null}}));n.isMSIE()||n.isEdge()?t.getService("$timeout")(function(){p[0].click()},0):p[0].click();return f.promise}function g(e,t){var i=(n.basePath||"/")+"qrs/appcontent/"+n.getParameterByName("app")+"/"+e+"?";t=t||{};i+=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");return i}function v(e){var n=t.defer();var i=new XMLHttpRequest;if(i.upload){i.upload.addEventListener("progress",o,false);i.addEventListener("load",l,false);i.addEventListener("error",s,false);i.addEventListener("abort",d,false);var a=g("uploadfile",{externalpath:e.name,overwrite:true,xrfkey:c});i.open("POST",a,true);i.setRequestHeader("X-Qlik-XrfKey",c);var r=new FormData;r.append("file",e);i.send(r)}function o(e){if(e.lengthComputable){var t=e.loaded/Math.max(Math.max(e.total,e.loaded),1);n.notify(t)}}function l(){n.resolve(e)}function s(){n.reject()}function d(){n.resolve(null)}return n.promise}function h(e){var n=t.defer();var i=new XMLHttpRequest;i.addEventListener("load",r,false);i.addEventListener("error",o,false);var a=g("deletecontent",{externalpath:e,xrfkey:c});i.open("DELETE",a,true);i.setRequestHeader("X-Qlik-XrfKey",c);i.send();function r(){n.resolve()}function o(){n.reject()}return n.promise}var F=(new XMLHttpRequest).upload;function b(){return F}function q(e,t){var n=[r.get("UploadedFilesFolder.FileSizeUnit.Bytes"),r.get("UploadedFilesFolder.FileSizeUnit.KB"),r.get("UploadedFilesFolder.FileSizeUnit.MB")];var i=r.get("UploadedFilesFolder.FileSize.NA");if(e>0){var a=Math.max(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);i=t(e/Math.pow(1024,a)*10)/10+n[a]}return i}function x(e){return q(e,Math.ceil)}function S(e){return q(e,Math.floor)}var C=null;function E(){C=i.currentApp.getContentLibraries().then(function(e){return e.qList.filter(function(e){return e.qAppSpecific})[0]});return C}function y(){return(C||E()).then(function(e){return e.qMeta.privileges})}function T(){return y().then(function(e){return e&&e.indexOf("read")>=0})}function D(){return y().then(function(e){return e&&e.indexOf("update")>=0})}function w(){var e=/[^/]*$/;return(C||E()).then(function(e){return i.currentApp.getLibraryContent(e.qName)}).then(function(t){var n=t.qList&&t.qList.qItems||t.qList;if(!n||!n.length)return[];var i=n.map(function(t){return{fileName:t.qUrl.match(e)[0],url:t.qUrl}});return i})}function P(){return Promise.resolve(!a.isPersonalModeSync())}function I(e){return M().then(function(t){return t.some(function(t){return n.hasFileExtension(e.name,t)})})}function M(){var e=t.defer();if(d)e.resolve(d);else{var i=encodeURI((n.basePath||"/")+"qrs/app/content/"+n.getParameterByName("app")+"/fileextensionwhitelist?xrfkey="+c);t.getService("$http").get(i,{headers:{"X-Qlik-XrfKey":c}}).then(function(t){d=t.data.fileExtensions.map(function(e){return e.name});e.resolve(d)})}return e.promise}function _(e){if(u(e)){e.displayName=r.get("UploadedFilesFolder.DisplayName");e.privileges&&e.privileges.indexOf("read")>-1?e.privileges=["read"]:e.privileges=[]}}function N(e){var n=t.defer();E().then(function(t){if(t){var i=t.qMeta.maxFileSize;var a=t.qMeta.remainingLibrarySpace;var o=x(e.size);"number"===typeof i&&i>0&&e.size>i?n.reject({message:r.get("UploadedFilesFolder.Error.MaxFileSizeExceeded",[e.name,o,x(i)])}):"number"===typeof a&&e.size>a?n.reject({message:r.get("UploadedFilesFolder.Error.AvailableSpaceExceeded",[e.name,o,S(a)])}):n.resolve()}},function(e){n.reject(e)});return n.promise}function L(e){var n=t.defer();return I(e).then(function(t){if(!t){n.reject(new Error(r.get("UploadedFilesFolder.Error.NotAllowedFileType",[e.name])));return n.promise}try{encodeURIComponent(e.name)}catch(t){n.reject(new Error(r.get("UploadedFilesFolder.Error.IllegalCharsInFilename",[e.name])));return n.promise}N(e).then(function(){n.resolve(true)},function(e){n.reject(e)});return n.promise})}function O(e){e&&e.length>0?e.forEach(function(e){l.push(e.fileName?e.fileName:e.qName)}):l=[];l=o.uniq(l)}function k(){return l}function $(e,t){var n=[];t&&t.length>0&&t.forEach(function(t){e.tableModels.forEach(function(e){t===e.data.databaseName&&n.push(e.data.id)})});n=o.uniq(n);return n}function U(e,t){var n=[];t&&t.length>0&&t.forEach(function(t){e.tableModels.forEach(function(e){t===e.data.tableName&&n.push(e.data.id)})});return n}return{isFileUploadEnabled:P,getAppStoreLibrary:E,getAppStoreContent:w,canUserReadAppStore:T,canUserModifyAppStore:D,isFileUploadSupported:b,selectFile:m,uploadFile:v,deleteFile:h,getFormattedFileSize:x,getFormattedAvailableSpace:S,isUploadFolderConnection:u,adjustConnectionProperties:_,isAllowedFileType:I,checkUploadQuota:N,preUploadValidateFile:L,setAttachedFilesToReplace:O,getAttachedFilesToReplace:k,getTableIdsFromLoadModelWithFileNames:$,getTableIdsFromLoadModelUsingTableNames:U}}.apply(t,i),void 0!==a&&(e.exports=a))},996:function(e,t,n){"use strict";var i,a;!(i=[n(48),n(90),n(118),n(91)],a=function(e,t,n,i){function a(e){return(t.basePath||"/")+e}function r(e,t){var n;n=e&&""!==e?t.name+"/"+e:t.name;return n}function o(t,n,a){var r=e.defer();m("",n&&n.path||"",a).then(function(e){var n=l(t,e);if(!n){r.reject(new Error(i.get("UploadedFilesFolder.Error.NotAllowedFileType",[t.name])));return r.promise}try{encodeURIComponent(t.name)}catch(e){r.reject(new Error(i.get("UploadedFilesFolder.Error.IllegalCharsInFilename",[t.name])));return r.promise}s(t,e).then(function(){r.resolve(true)},function(e){r.reject(e)})});return r.promise}function l(e,n){if(!n.allowedExtensions)return false;return n.allowedExtensions.some(function(n){return t.hasFileExtension(e.name,n)})}function s(t,n){var a=e.defer();var r=n.maxSize;var o=n.maxSize-n.size;var l=c(t.size,Math.floor);"number"===typeof r&&r>0&&t.size>r?a.reject({message:i.get("UploadedFilesFolder.Error.MaxFileSizeExceeded",[t.name,l,c(r,Math.ceil)])}):"number"===typeof o&&t.size>o?a.reject({message:i.get("UploadedFilesFolder.Error.AvailableSpaceExceeded",[t.name,l,c(o,Math.ceil)])}):a.resolve();return a.promise}function c(e,t){var n=[i.get("UploadedFilesFolder.FileSizeUnit.Bytes"),i.get("UploadedFilesFolder.FileSizeUnit.KB"),i.get("UploadedFilesFolder.FileSizeUnit.MB")];var a=i.get("UploadedFilesFolder.FileSize.NA");if(e>0){var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);a=t?t(e/Math.pow(1024,r)*10)/10+n[r]:Math.ceil(e/Math.pow(1024,r)*10)/10+n[r]}return a}function d(t,n,i,o,l){var s=new FormData;o&&""!==o?s.append("folder",o):s.append("path",r(i,n));s.append("file",t);l&&""!==l&&s.append("appId",l);var c=e.defer();var d=e.getService("$http");d.post(a("api/v1/datafiles"),s,{headers:{"Content-Type":void 0},transformRequest:e.identity,uploadEventHandlers:{progress:function e(t){if(t.lengthComputable){var e=t.loaded/Math.max(Math.max(t.total,t.loaded),1);c.notify(e)}}}}).then(function(){c.resolve(t)},function(e){c.reject(e.data)});return c.promise}function u(t,n,i){var r=new FormData;i&&""!==i&&r.append("name",i);r.append("file",n);var o=e.defer();var l=e.getService("$http");l.put(a("api/v1/datafiles/"+encodeURIComponent(t)),r,{headers:{"Content-Type":void 0},transformRequest:e.identity,uploadEventHandlers:{progress:function e(t){if(t.lengthComputable){var e=t.loaded/Math.max(Math.max(t.total,t.loaded),1);o.notify(e)}}}}).then(function(){o.resolve(n)},function(e){o.reject(e.data)});return o.promise}function p(t){var n=e.defer();var i=e.getService("$http");i.delete(a("api/v1/datafiles/"+encodeURIComponent(t))).then(function(){n.resolve(true)},function(e){n.reject(e.data)});return n.promise}function f(t,n,i,o){var l={};t&&""!==t||(l["path"]=r(n,i));o&&""!==o&&(l["appId"]=o);var s=e.defer();var c=e.getService("$http");c.get(a("api/v1/datafolders"+(t&&""!==t?encodeURIComponent(t)+"/":"/")+"items"),{params:l}).then(function(e){s.resolve(e.data)},function(){s.reject()});return s.promise}function m(t,n,i,o){var l={};t&&""!==t||(l["path"]=r(n,i));o&&""!==o&&(l["appId"]=o);var s=e.defer();var c=e.getService("$http");c.get(a("api/v1/datafolders"+(t&&""!==t?encodeURIComponent(t)+"/":"/info")),{params:l}).then(function(e){s.resolve(e.data)},function(){s.reject()});return s.promise}var g=(new XMLHttpRequest).upload;function v(){return g}function h(e){return this.isDatafilesConnection(e)}function F(e){if(!e||!e.name)return false;return"MyDataFiles"===e.name}function b(e){if(!e||!e.connectionString||!e.type)return false;if("datafiles.exe"===e.type.provider)return true;if("folder"!==e.type.provider)return false;return n.startsWith(e.connectionString,"/qlik/datafiles")}return{isMyDataFilesConnection:F,isDatafilesConnection:b,isFileUploadEnabled:h,isFileUploadSupported:v,uploadFile:d,updateFile:u,deleteFile:p,listFolder:f,getFolderInfo:m,preUploadValidateFile:o}}.apply(t,i),void 0!==a&&(e.exports=a))},998:function(e,t,n){"use strict";var i,a;!(i=[n(118),n(91)],a=function(e,t){var n=false;var i={Removable:"REMOVABLE",Fixed:"FIXED",Cd_rom:"CD_ROM",Ram:"RAM",UnknownType:"UNKNOWN_TYPE"};function a(t,n){t=t||[];function i(t){return{name:e.removeSurroundingSlashes(t.qDrive),extraInfo:t.qUnnamedDrive?r(t.qTypeIdentifier,t):t.qName,path:t.qDrive,isFile:false}}var a=t.map(i);l(a);n||c(a,"");return a}function r(e,n){switch(e){case i.Removable:return t.get("DriveName.0");case i.Fixed:return t.get("DriveName.1");case i.Cd_rom:return t.get("DriveName.2");case i.Ram:return t.get("DriveName.3");case i.UnknownType:return t.get("DriveName.4");default:return n.qName}}function o(e,t){if(void 0===t)return true;for(var n=0;n<t.length;n++)if(e.match(t[n]))return true;return false}function l(t){t.sort(function(t,n){return t.isFile===n.isFile?e.sortSlightlyMoreNaturallySingle(t.name,n.name):t.isFile?1:-1})}function s(e){if(e&&e.match(/^\\\\.*/)){var t=e.replace(/^\\\\/,"");return t.split("\\").length<=1}return false}function c(t,i){var a=e.goUpOneFolderLevel(i);n?t.unshift({name:"",path:a,isFile:false,isAtRoot:0===i.length||s(a),disabled:false}):t.unshift({name:"",path:a,isFile:false,disabled:0===i.length||s(a)})}function d(e){function t(t){return!t.isFile||o(t.name,e)}return t}function u(t,n,i,a){function r(n){return{name:n.qName,path:t+(e.endsWith(t,"\\")?"":"\\")+n.qName,isFile:"FILE"===n.qType}}var o=n.map(r).filter(d(i));l(o);a||c(o,t);return o}function p(t,n,i,a){t=t||"";var r=n.folders.map(function(n){return{id:n.id,name:n.name,path:t+(e.endsWith(t,"\\")?"":"\\")+n.name,isFile:false}});r=r.concat(n.files.map(function(n){return{id:n.id,name:n.name,path:t+(e.endsWith(t,"\\")?"":"\\")+n.name,isFile:true}}));r=r.filter(d(i));l(r);a||c(r,t);return r}function f(t,n,i,a,r){function o(n){return{name:n.name,id:n.id,path:t?t+(e.endsWith(t,"\\")?"":"\\")+n.name:n.name,isFile:false,isRemote:true,extraInfo:""}}function s(n){return{name:n.name,id:n.id,path:t?t+(e.endsWith(t,"\\")?"":"\\")+n.name:n.name,isFile:true,isRemote:true,extraInfo:""}}var u=n.map(o);u=u.concat(i.map(s).filter(d(a)));l(u);r||c(u,t);return u}return{setNewBackStyle:function e(){n=true},postProcessDirectoryListing:u,postProcessDriveListing:a,postProcessDatafilesListing:p,postProcessStorageProviderDirectoryListing:f}}.apply(t,i),void 0!==a&&(e.exports=a))}}]);