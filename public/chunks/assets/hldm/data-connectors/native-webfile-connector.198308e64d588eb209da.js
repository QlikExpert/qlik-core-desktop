/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[30],{1300:function(t,e,n){"use strict";var i,o;!(i=[n(48),n(1492),n(11),n(54)],o=function(t,e,n,i){t.filter("qvAutocompleteFilter",function(){function t(t,e){var n=false;var o=i.filter(t,function(t){if(t===e){n=true;return true}return t.indexOf(e)>-1});return o.length>0&&!n?o:t}return t});t.directive("qvAutocompleteInput",["$timeout","$filter",function(t,i){return{restrict:"E",replace:true,template:e,scope:{value:"=",listItems:"=",tooltip:"@",testid:"@",maxInputLength:"@",inputType:"@"},link:function e(o,a){var s=40;var r=13;var l=38;var c=27;var d=9;o.autoCapitalize="on";o.autoCorrect="on";o.maxInputLength||(o.maxInputLength="256");o.inputType||(o.inputType="text");if("url"===o.inputType){o.autoCapitalize="off";o.autoCorrect="off"}var u=a.find("input");var f=n(a[0]).find(".pop-up-list");o.suggestionsVisible=false;o.$watch("value",function(t){o.filteredList=i("qvAutocompleteFilter")(o.listItems,t)});o.showSuggestions=function(){o.suggestionsVisible=true;n(document).on("click",g)};o.hideSuggestions=function(){o.suggestionsVisible=false;n(document).off("click",g)};o.toggleSuggestions=function(){o.suggestionsVisible?o.hideSuggestions():o.showSuggestions()};function g(e){n(e.target).closest(n(a[0])).length||t(function(){o.hideSuggestions()},0)}o.selectItem=function(t){o.value=t;p(-1)};u.on("keydown",m);f.on("keydown",v);function p(e){t(function(){o.currentListIndex=e},0)}function v(e){if(e.keyCode===s){e.preventDefault();o.currentListIndex<o.filteredList.length-1?p(o.currentListIndex+1):p(0)}else if(e.keyCode===l){e.preventDefault();0===o.currentListIndex?p(o.filteredList.length-1):p(o.currentListIndex-1)}else if(e.keyCode===r||e.keyCode===d){e.preventDefault();t(function(){o.selectItem(o.filteredList[o.currentListIndex]);o.hideSuggestions()},0)}else if(e.keyCode===c){e.preventDefault();p(-1);t(function(){o.hideSuggestions()},0);u.focus()}}function m(e){if(e.keyCode===s){e.preventDefault();if(o.suggestionsVisible&&o.filteredList.length>0){u.blur();f.focus();t(function(){o.currentListIndex=0},0)}}else if(e.keyCode===c||e.keyCode===r){e.preventDefault();t(function(){o.hideSuggestions()},0)}else e.keyCode===d?t(function(){o.hideSuggestions()},0):o.suggestionsVisible||t(function(){o.showSuggestions()},0)}o.$on("$destroy",function(){n(document).off("click",g);u.off("keydown",m);f.off("keydown",v)})}}}])}.apply(e,i),void 0!==o&&(t.exports=o))},1491:function(t,e,n){"use strict";var i,o;!(i=[n(2036),n(1231),n(2038)],o=function(t,e,n){return{connectDialog:t,selectDialog:e,connectorMain:n}}.apply(e,i),void 0!==o&&(t.exports=o))},1492:function(t,e){t.exports='<div class="qv-autocomplete-input" q-title-translation="{{tooltip}}">\n\n\t<div class="input-box">\n\t\t<input maxlength="{{maxInputLength}}"\n\t\t\t   type="{{inputType}}"\n\t\t\t   autocapitalize="{{autoCapitalize}}"\n\t\t\t   autocorrect="{{autoCorrect}}"\n\t\t\t   class="lui-input"\n\t\t\t   ng-model="value"\n\t\t\t   tid="{{testid}}"\n\t\t/>\n\n\t\t<div class="lui-icon lui-icon--triangle-bottom" ng-click="toggleSuggestions()" ng-if="listItems.length > 0"></div>\n\t</div>\n\n\t<div class="pop-up-list" ng-show="suggestionsVisible && filteredList.length > 0" tabindex="1">\n\n\t\t<div class="list-item" ng-repeat="item in filteredList" ng-bind="item" qva-activate="selectItem(item); hideSuggestions();" ng-class="{selected: $index === currentListIndex}" tid="{{testid}}_list_item_{{$index}}"></div>\n\n\t</div>\n</div>\n'},2036:function(t,e,n){"use strict";var i,o;!(i=[n(2037),n(118),n(91),n(1300)],o=function(t,e,n){return{template:t,controller:["$scope","serverside","input",function(t,i,o){t.isLoading=false;t.showRecent=false;t.isEdit=o.editMode;t.id=o.instanceId;t.maxConnectionNameLength=e.MAX_CONNECTION_NAME_LENGTH-i.getUsernameSuffix().length;t.backendIsThinking=false;t.path="";t.init=function(){if(t.isEdit){t.isLoading=true;i.getConnection(t.id).then(function(e){t.isLoading=false;t.name=e.qConnection.qName;t.path=e.qConnection.qConnectionString;t.originalName=e.qConnection.qName;t.originalPath=e.qConnection.qConnectionString})}else setTimeout(function(){if(!/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=document.getElementById("urlInput");t&&t.focus()}});t.recentUrls=s().reverse()};t.onCancelClicked=function(){t.backendIsThinking||t.destroyComponent()};t.onNameChanged=function(){t.nameChangedAtLeastOnce=true};t.onUrlChanged=function(){t.urlChangedAtLeastOnce=true};t.isOkDisabled=function(){return!e.isValidConnectionName(t.name)||!e.isValidUrl(a())||t.backendIsThinking};t.$watch("name",function(){t.showCreateConnectionError=false;if(""!==t.name&&t.isNameInvalid()){t.errorContent=n.get("Common.InvalidCharacters");t.showCreateConnectionError=true}});t.isNameInvalid=function(){return t.name?!e.isValidConnectionName(t.name):t.nameChangedAtLeastOnce};function a(){return e.prefixHttpToUrl(t.path)}t.handleErrors=function(e){t.errorContent=i.getErrorContent(e);t.showCreateConnectionError=true;e.isHandled=true;t.backendIsThinking=false};t.onChooseClicked=function(){if(!t.isOkDisabled()){t.backendIsThinking=true;r(a());t.isEdit?i.modifyConnection(t.id,t.name,a(),"internet",false,"","").then(function(e){t.isLoading=false;t.backendIsThinking=false;e&&t.destroyComponent()},t.handleErrors):i.createNewRawConnection(t.name,a(),"internet").then(function(e){t.isLoading=false;t.backendIsThinking=false;e&&t.destroyComponent()},t.handleErrors)}};t.shared={};function s(){var t=[],e=localStorage.getItem("scripteditor.webfilechooser.recentUrls");e&&(t=JSON.parse(e));return t}function r(t){if(e.isValidUrl(t)){var n=s(),i,o=false;for(i=0;i<n.length;i++)if(t===n[i]){o=true;n.splice(i,1)}o||n.length>4&&n.splice(0,1);n.push(t);localStorage.setItem("scripteditor.webfilechooser.recentUrls",JSON.stringify(n))}}t.init()}]}}.apply(e,i),void 0!==o&&(t.exports=o))},2037:function(t,e){t.exports='<div class="qui-modalbackground filechoosercontainer">\n\t<div class="qui-delayedModal filechooser" qv-global-escape="onCancelClicked()" qv-global-enter="onChooseClicked()">\n\t\t<div class="loading-screen" ng-show="backendIsThinking">\n\t\t\t<div class="qv-loader"></div>\n\t\t</div>\n\t\t<header class="dm-header" q-translation="scripteditor.dataconnectors.filechooser.urltitle"></header>\n\t\t<main class="dm-main">\n\t\t\t<div class="title" q-translation="Common.URL"></div>\n\n\t\t\t<qv-autocomplete-input value="path" list-items="recentUrls" testid="urlInput" input-type="text" max-input-length="2000">\n\t\t\t</qv-autocomplete-input>\n\n\t\t\t<div class="text" q-translation="Common.Name"></div>\n\t\t\t<input class="lui-input textfield" ng-model="name" maxlength="{{maxConnectionNameLength}}" ng-change="onNameChanged()" invalid="{{isNameInvalid()}}"/>\n\t\t\t<label ng-style="{visibility: showCreateConnectionError && \'visible\' || \'hidden\'}" class="errorlabel">{{errorContent}}</label>\n\n\t\t</main>\n\t\t<footer class="dm-footer">\n\t\t\t<lui-button x-variant="inverse" ng-click="$event.preventDefault(); onCancelClicked()" q-translation="Common.Cancel" ng-disabled="backendIsThinking" tid="2e684a"></lui-button>\n\t\t\t<lui-button x-variant="inverse" id="okButton" ng-click="$event.preventDefault(); onChooseClicked()" q-translation="{{isEdit ? \'Common.Save\' : \'Common.Create\'}}" ng-disabled="isOkDisabled()"></lui-button>\n\t\t</footer>\n\t</div>\n</div>\n'},2038:function(t,e,n){"use strict";var i,o;!(i=[n(2039),n(2041),n(91)],o=function(t,e,n){function i(){var i=[{id:"internet",category:"web",name:n.get("scripteditor.dataconnectors.webfile"),initialConnectStep:t}];function o(){return e}var a={entrypoints:i,getInitialSelectStep:o};return a}return{create:i}}.apply(e,i),void 0!==o&&(t.exports=o))},2039:function(t,e,n){"use strict";var i,o;!(i=[n(2040),n(118),n(91),n(1300)],o=function(t,e,n){return{template:t,scope:{title:"=",serverside:"=",continueWithNewConnection:"=",qvDialogContext:"="},controller:["$scope","serverside",function(t,i){t.isLoading=false;t.showRecent=false;t.maxConnectionNameLength=e.MAX_CONNECTION_NAME_LENGTH-i.getUsernameSuffix().length;t.path="";t.qvDialogContext.title=n.get("scripteditor.dataconnectors.filechooser.urltitle");t.qvDialogContext.size="T";t.recentUrls=a();t.nextDisabled=function(){return!e.isValidConnectionName(t.name)||!e.isValidUrl(o())||t.isLoading};t.$watch("name",function(){t.showCreateConnectionError=false;if(""!==t.name&&t.isNameInvalid()){t.nameChangedAtLeastOnce=true;t.errorContent=n.get("Common.InvalidCharacters");t.showCreateConnectionError=true}});t.isNameInvalid=function(){return t.name?!e.isValidConnectionName(t.name):t.nameChangedAtLeastOnce};function o(){return e.prefixHttpToUrl(t.path)}t.handleErrors=function(e){t.errorContent=i.getErrorContent(e);t.showCreateConnectionError=true;e.isHandled=true;t.isLoading=false};function a(){var t=[];var e=localStorage.getItem("scripteditor.webfilechooser.recentUrls");e&&(t=JSON.parse(e));return t}function s(t){if(e.isValidUrl(t)){var n=a(),i,o=false;for(i=0;i<n.length;i++)if(t===n[i]){o=true;n.splice(i,1)}o||n.length>4&&n.splice(0,1);n.push(t);localStorage.setItem("scripteditor.webfilechooser.recentUrls",JSON.stringify(n))}}t.qvDialogContext.nextDisabled=t.nextDisabled;t.qvDialogContext.next=function(){if(!t.nextDisabled()){t.isLoading=true;s(o());t.isEdit?i.modifyConnection(t.id,t.name,o(),"internet",false,"","").then(function(){t.isLoading=false},t.handleErrors):i.createNewRawConnection(t.name,o(),"internet").then(function(){t.isLoading=false;t.continueWithNewConnection({connectionName:t.name})},t.handleErrors)}};function r(){t.isLoading||t.destroyComponent();t.close()}t.onEscape=r;t.onCancelClicked=r}]}}.apply(e,i),void 0!==o&&(t.exports=o))},2040:function(t,e){t.exports='<div class="native-webfile-connector-connect flatfilechoosercontainer">\n\t<div class="loading-screen" ng-show="isLoading">\n\t\t<div class="qv-loader"></div>\n\t</div>\n\n\t<main class="dm-main">\n\t\t<div class="title" q-translation="Common.URL"/>\n\n\t\t<qv-autocomplete-input value="path" list-items="recentUrls" testid="urlInput" input-type="text" max-input-length="2000">\n\t\t</qv-autocomplete-input>\n\n\t\t<div class="text" q-translation="Common.Name"/>\n\t\t<input class="lui-input textfield" ng-model="name" maxlength="{{maxConnectionNameLength}}" invalid="{{isNameInvalid()}}"/>\n\t\t<label ng-style="{visibility: showCreateConnectionError && \'visible\' || \'hidden\'}" class="errorlabel">{{errorContent}}</label>\n\t</main>\n</div>'},2041:function(t,e,n){"use strict";var i,o;!(i=[n(2042),n(1157),n(91)],o=function(t,e,n){return{template:t,scope:{qvDialogContext:"=",dataconnectionSelectionEditor:"=",connectionInput:"=",dataconnectorInstance:"=",qvInternals:"=",tableModelToEdit:"="},controller:["$scope",function(t){t.dataHasLoaded=false;e.createNativeFileProvider(t.dataconnectorInstance,t.dataconnectionSelectionEditor,t.connectionInput,t.tableModelToEdit,t.qvDialogContext,true).then(function(e){t.qvDialogContext.size="L";t.qvDialogContext.title=t.tableModelToEdit?n.get("quickdataload.EditSelectionsFor",t.tableModelToEdit.data.tableName):n.get("scripteditor.dataconnectors.dialog.titlewithname",e.selectOptions.selectFromTitleName);t.provider=e;t.dataHasLoaded=true})}]}}.apply(e,i),void 0!==o&&(t.exports=o))},2042:function(t,e){t.exports='<div class="native-webfile-connector-select">\n\t<qv-generic-select-dialog ng-if="dataHasLoaded" data-provider="provider"\n\t\t\t\t\t\t\t  data-dataconnection-selection-editor="dataconnectionSelectionEditor"\n\t\t\t\t\t\t\t  data-qv-dialog-context="qvDialogContext"\n\t\t\t\t\t\t\t  data-qv-internals="qvInternals">\n\t</qv-generic-select-dialog>\n\t<qv-spinner class="spinner" show="!dataHasLoaded" show-delay="200" show-for-at-least="500" spinner-height="200px" spinner-width="200px" center-in-parent="true"></qv-spinner>\n</div>\n'}}]);