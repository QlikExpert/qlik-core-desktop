/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[4],{1124:function(t,e,n){!function(e,n){t.exports=n()}(this,function(){"use strict";var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,n=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;var i=function(i){var r=[],a=String(i).trim();return"M"!==a[0]&&"m"!==a[0]||a.replace(e,function(e,i,a){var o,s=i.toLowerCase(),c=(o=a.match(n))?o.map(Number):[],l=i;if("m"===s&&2<c.length&&(r.push([l].concat(c.splice(0,2))),s="l",l="m"===l?"l":"L"),c.length<t[s])return"";for(r.push([l].concat(c.splice(0,t[s])));c.length>=t[s]&&c.length&&t[s];)r.push([l].concat(c.splice(0,t[s])));return""}),r};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){var n=t.x*Math.cos(e)-t.y*Math.sin(e),i=t.y*Math.cos(e)+t.x*Math.sin(e);t.x=n,t.y=i}function s(t,e){t.x*=e,t.y*=e}"undefined"!=typeof window&&function(t){if(void 0!==t&&t.CanvasRenderingContext2D&&(!t.Path2D||(n=(e=t).document.createElement("canvas").getContext("2d"),c=new e.Path2D("M0 0 L1 1"),n.strokeStyle="red",n.lineWidth=1,n.stroke(c),255!==n.getImageData(0,0,1,1).data[0]))){var e,n,c,l=function(){function t(e){var n;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.segments=[],e&&e instanceof t?(n=this.segments).push.apply(n,a(e.segments)):e&&(this.segments=i(e))}var e,n;return r((e=t).prototype,[{key:"addPath",value:function(e){var n;e&&e instanceof t&&(n=this.segments).push.apply(n,a(e.segments))}},{key:"moveTo",value:function(t,e){this.segments.push(["M",t,e])}},{key:"lineTo",value:function(t,e){this.segments.push(["L",t,e])}},{key:"arc",value:function(t,e,n,i,r,a){this.segments.push(["AC",t,e,n,i,r,!!a])}},{key:"arcTo",value:function(t,e,n,i,r){this.segments.push(["AT",t,e,n,i,r])}},{key:"ellipse",value:function(t,e,n,i,r,a,o,s){this.segments.push(["E",t,e,n,i,r,a,o,!!s])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(t,e,n,i,r,a){this.segments.push(["C",t,e,n,i,r,a])}},{key:"quadraticCurveTo",value:function(t,e,n,i){this.segments.push(["Q",t,e,n,i])}},{key:"rect",value:function(t,e,n,i){this.segments.push(["R",t,e,n,i])}}]),n&&r(e,n),t}(),u=t.CanvasRenderingContext2D.prototype.fill,h=t.CanvasRenderingContext2D.prototype.stroke;t.CanvasRenderingContext2D.prototype.fill=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i="nonzero";0===e.length||1===e.length&&"string"==typeof e[0]?u.apply(this,e):(2===arguments.length&&(i=e[1]),f(this,e[0].segments),u.call(this,i))},t.CanvasRenderingContext2D.prototype.stroke=function(t){t&&f(this,t.segments),h.call(this)},t.Path2D=l}function f(t,e){var n,i,r,a,c,l,u,h,f,d,p,g,y,v,m,x,b,w,k,M,_,S,R,C,N,A,T,E,z,O={x:0,y:0},j={x:0,y:0};t.beginPath();for(var D=0;D<e.length;++D){var q=e[D];switch("S"!==(M=q[0])&&"s"!==M&&"C"!==M&&"c"!==M&&(R=S=null),"T"!==M&&"t"!==M&&"Q"!==M&&"q"!==M&&(N=C=null),M){case"m":case"M":"m"===M?(p+=q[1],y+=q[2]):(p=q[1],y=q[2]),"M"!==M&&O||(O={x:p,y:y}),t.moveTo(p,y);break;case"l":p+=q[1],y+=q[2],t.lineTo(p,y);break;case"L":p=q[1],y=q[2],t.lineTo(p,y);break;case"H":p=q[1],t.lineTo(p,y);break;case"h":p+=q[1],t.lineTo(p,y);break;case"V":y=q[1],t.lineTo(p,y);break;case"v":y+=q[1],t.lineTo(p,y);break;case"a":case"A":"a"===M?(p+=q[6],y+=q[7]):(p=q[6],y=q[7]),x=q[1],b=q[2],u=q[3]*Math.PI/180,r=!!q[4],a=!!q[5],c={x:p,y:y},o(l={x:(j.x-c.x)/2,y:(j.y-c.y)/2},-u),1<(h=l.x*l.x/(x*x)+l.y*l.y/(b*b))&&(x*=h=Math.sqrt(h),b*=h),f=x*x*b*b,d=x*x*l.y*l.y+b*b*l.x*l.x,s(_={x:x*l.y/b,y:-b*l.x/x},a!==r?Math.sqrt((f-d)/d)||0:-Math.sqrt((f-d)/d)||0),i=Math.atan2((l.y-_.y)/b,(l.x-_.x)/x),n=Math.atan2(-(l.y+_.y)/b,-(l.x+_.x)/x),o(_,u),T=_,E=(c.x+j.x)/2,z=(c.y+j.y)/2,T.x+=E,T.y+=z,t.save(),t.translate(_.x,_.y),t.rotate(u),t.scale(x,b),t.arc(0,0,1,i,n,!a),t.restore();break;case"C":S=q[3],R=q[4],p=q[5],y=q[6],t.bezierCurveTo(q[1],q[2],S,R,p,y);break;case"c":t.bezierCurveTo(q[1]+p,q[2]+y,q[3]+p,q[4]+y,q[5]+p,q[6]+y),S=q[3]+p,R=q[4]+y,p+=q[5],y+=q[6];break;case"S":null!==S&&null!==S||(S=p,R=y),t.bezierCurveTo(2*p-S,2*y-R,q[1],q[2],q[3],q[4]),S=q[1],R=q[2],p=q[3],y=q[4];break;case"s":null!==S&&null!==S||(S=p,R=y),t.bezierCurveTo(2*p-S,2*y-R,q[1]+p,q[2]+y,q[3]+p,q[4]+y),S=q[1]+p,R=q[2]+y,p+=q[3],y+=q[4];break;case"Q":C=q[1],N=q[2],p=q[3],y=q[4],t.quadraticCurveTo(C,N,p,y);break;case"q":C=q[1]+p,N=q[2]+y,p+=q[3],y+=q[4],t.quadraticCurveTo(C,N,p,y);break;case"T":null!==C&&null!==C||(C=p,N=y),C=2*p-C,N=2*y-N,p=q[1],y=q[2],t.quadraticCurveTo(C,N,p,y);break;case"t":null!==C&&null!==C||(C=p,N=y),C=2*p-C,N=2*y-N,p+=q[1],y+=q[2],t.quadraticCurveTo(C,N,p,y);break;case"z":case"Z":p=O.x,y=O.y,O=void 0,t.closePath();break;case"AC":p=q[1],y=q[2],m=q[3],i=q[4],n=q[5],A=q[6],t.arc(p,y,m,i,n,A);break;case"AT":g=q[1],v=q[2],p=q[3],y=q[4],m=q[5],t.arcTo(g,v,p,y,m);break;case"E":p=q[1],y=q[2],x=q[3],b=q[4],u=q[5],i=q[6],n=q[7],A=q[8],t.save(),t.translate(p,y),t.rotate(u),t.scale(x,b),t.arc(0,0,1,i,n,A),t.restore();break;case"R":p=q[1],y=q[2],w=q[3],k=q[4],O={x:p,y:y},t.rect(p,y,w,k)}j.x=p,j.y=y}}}(window);var c=i,l=Object.prototype.hasOwnProperty,u=Object.prototype.toString,h=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===u.call(t)},p=function(t){if(!t||"[object Object]"!==u.call(t))return!1;var e,n=l.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&l.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;for(e in t);return void 0===e||l.call(t,e)},g=function(t,e){h&&"__proto__"===e.name?h(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},y=function(t,e){if("__proto__"===e){if(!l.call(t,e))return;if(f)return f(t,e).value}return t[e]},v=function t(){var e,n,i,r,a,o,s=arguments[0],c=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},c=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});c<l;++c)if(null!=(e=arguments[c]))for(n in e)i=y(s,n),s!==(r=y(e,n))&&(u&&r&&(p(r)||(a=d(r)))?(o=a?(a=!1,i&&d(i)?i:[]):i&&p(i)?i:{},g(s,{name:n,newValue:t(u,o,r)})):void 0!==r&&g(s,{name:n,newValue:r}));return s},m={version:"0.25.2"};function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function k(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),t}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){M(t,e,n[e])})}return t}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t,e,n){return(N=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&C(r,n.prototype),r}).apply(null,arguments)}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?A(t):e}function E(t,e,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.dock,i=void 0===n?"center":n,r=t.displayOrder,a=void 0===r?0:r,o=t.prioOrder,s=void 0===o?0:o,c=t.preferredSize,l=void 0===c?0:c,u=t.minimumLayoutMode,h=t.show,f=void 0===h||h;return i=i||"center",{computePreferredSize:function(t){var n=t.inner,i=t.outer;return"function"==typeof l?l({inner:n,outer:i,dock:this.dock()},e):l},dock:function(t){return void 0!==t?(i=t,this):"function"==typeof i?i(e):i},displayOrder:function(t){return void 0!==t?(a=t,this):"function"==typeof a?a(e):a},prioOrder:function(t){return void 0!==t?(s=t,this):"function"==typeof s?s(e):s},minimumLayoutMode:function(t){return void 0!==t?(u=t,this):"function"==typeof u?u(e):u},show:function(t){return void 0!==t?(f=t,this):"function"==typeof f?f(e):f}}}function D(t){t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height)}function q(t){var e={center:{minWidthRatio:.5,minHeightRatio:.5,minWidth:0,minHeight:0}};return v(!0,e,t),e.center.minWidthRatio=Math.min(Math.max(e.center.minWidthRatio,0),1),e.center.minHeightRatio=Math.min(Math.max(e.center.minHeightRatio,0),1),e.center.minWidth=Math.max(e.center.minWidth,0),e.center.minHeight=Math.max(e.center.minHeight,0),e}function P(t){return"number"==typeof t&&!isNaN(t)}function I(t){return"number"!=typeof t||isNaN(t)}function F(t){for(var e=t.length,n=NaN,i=NaN,r=NaN,a=NaN,o=0;o<e;o++)n=isNaN(n)?t[o].x:Math.min(n,t[o].x),i=isNaN(i)?t[o].x:Math.max(i,t[o].x),r=isNaN(r)?t[o].y:Math.min(r,t[o].y),a=isNaN(a)?t[o].y:Math.max(a,t[o].y);return[n,r,i,a]}function B(t){return[{x:t.x1||0,y:t.y1||0},{x:t.x2||0,y:t.y2||0}]}function L(t){return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}]}function W(t){var e=z(F(t),4),n=e[0],i=e[1];return{x:n,y:i,width:e[2]-n,height:e[3]-i}}function V(t){return{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y}}function H(t){var e=t||{},n=e.x,i=e.y,r=e.width,a=e.height,o=e.x1,s=e.x2,c=e.y1,l=e.y2,u=e.cx,h=e.cy,f=e.r,d=e.vertices;return P(u)&&P(h)&&P(f)?"circle":P(o)&&P(s)&&P(c)&&P(l)?"line":P(n)&&P(i)&&P(r)&&P(a)?"rect":P(n)&&P(i)?"point":Array.isArray(d)?"polygon":null}function U(t,e){return{x:e.x-t,y:e.y-t,width:e.width+t,height:e.height+t}}function $(t,e,n,i,r){return{x:isNaN(t)?0:t,y:isNaN(t)?0:e,width:isNaN(t)?0:n,height:isNaN(t)?0:i,margin:isNaN(r)?0:r}}function Y(t,e,n){if(void 0===t.cachedSize){var i,r=t.config.dock(),a=t.comp.preferredSize({inner:e,outer:n,dock:r});isNaN(a)?a&&!isNaN(a.size)&&(a.width=a.size,a.height=a.size):a={width:a,height:a},i="top"===r||"bottom"===r?a.height:"right"===r||"left"===r?a.width:Math.max(a.width,a.height),t.cachedSize=Math.ceil(i),t.edgeBleed=a.edgeBleed||0}return t.cachedSize}function X(t,e){switch(e.config.dock()){case"top":t.y+=e.cachedSize,t.height-=e.cachedSize;break;case"bottom":t.height-=e.cachedSize;break;case"left":t.x+=e.cachedSize,t.width-=e.cachedSize;break;case"right":t.width-=e.cachedSize}}function J(t,e){var n=e.edgeBleed;n&&(t.left=Math.max(t.left,n.left||0),t.right=Math.max(t.right,n.right||0),t.top=Math.max(t.top,n.top||0),t.bottom=Math.max(t.bottom,n.bottom||0))}function K(t,e,n){e.x<n.left&&(e.width-=n.left-e.x,e.x=n.left);var i=t.width-(e.x+e.width);i<n.right&&(e.width-=n.right-i),e.y<n.top&&(e.height-=n.top-e.y,e.y=n.top);var r=t.height-(e.y+e.height);r<n.bottom&&(e.height-=n.bottom-r)}function G(t,e,n,i,r){var a,o,s,c,l,u=v({},e),h=v({},n);return X(u,i),J(h,i),K(t,u,h),a=t,o=u,s=r,c=Math.min(s.center.minWidth,a.width)||Math.max(a.width*s.center.minWidthRatio,1),l=Math.min(s.center.minHeight,a.height)||Math.max(a.height*s.center.minHeightRatio,1),o.width>=c&&o.height>=l&&(X(e,i),J(n,i),!0)}function Z(t){return{x:t.margin.left+t.x*t.scaleRatio.x,y:t.margin.top+t.y*t.scaleRatio.y,width:t.width*t.scaleRatio.x,height:t.height*t.scaleRatio.y}}function Q(t){var e;return W((e=[]).concat.apply(e,O(t.map(L))))}function tt(t){var e=t.visible,n=t.layoutRect,i=t.reducedRect,r=t.containerRect,a=t.translation,o=$(i.x,i.y,i.width,i.height),s=$(i.x,i.y,i.width,i.height),c={},l=e.slice(),u=l.slice().sort(function(t,e){return t.config.displayOrder()-e.config.displayOrder()});return e.sort(function(t,e){if(0<e.referencedDocks.length)return-1;if(0<t.referencedDocks.length)return 1;var n=t.config.displayOrder()-e.config.displayOrder();return 0===n?l.indexOf(t)-l.indexOf(e):n}).forEach(function(t){var e={},l={};switch(t.config.dock()){case"top":e.height=l.height=t.cachedSize,e.width=n.width,l.width=o.width,e.x=n.x,l.x=o.x,e.y=l.y=o.y-t.cachedSize,o.y-=t.cachedSize,o.height+=t.cachedSize;break;case"bottom":e.x=n.x,l.x=o.x,e.y=l.y=o.y+o.height,e.width=n.width,l.width=o.width,e.height=l.height=t.cachedSize,o.height+=t.cachedSize;break;case"left":e.x=l.x=s.x-t.cachedSize,e.y=n.y,l.y=s.y,e.width=l.width=t.cachedSize,e.height=n.height,l.height=s.height,s.x-=t.cachedSize,s.width+=t.cachedSize;break;case"right":e.x=l.x=s.x+s.width,e.y=n.y,l.y=s.y,e.width=l.width=t.cachedSize,e.height=n.height,l.height=s.height,s.width+=t.cachedSize;break;case"center":e.x=l.x=i.x,e.y=l.y=i.y,e.width=l.width=i.width,e.height=l.height=i.height;break;default:if(0<t.referencedDocks.length){var u=t.referencedDocks.map(function(t){return c[t]}).filter(function(t){return!!t});0<u.length&&(e=Q(u.map(function(t){return t.outerRect})),l=Q(u.map(function(t){return t.r})))}}t.key&&(c[t.key]={r:l,outerRect:e}),function(t,e,n,i){var r={x:i.width/n.width,y:i.height/n.height},a={left:0,top:0};if(n.preserveAspectRatio){var o=r.x<r.y,s=Math.min(r.x,r.y);r.x=s,r.y=s;var c=o?"height":"width",l=(i[c]-n[c]*r.x)*n.align;a.left=o?0:l,a.top=o?l:0}t.scaleRatio=r,t.margin=a,e.scaleRatio=r,e.margin=a,n.scaleRatio=r,n.margin=a}(l,e,n,r),l.edgeBleed=t.edgeBleed,l.computed=Z(l),e.edgeBleed=t.edgeBleed,e.computed=Z(e),l.x+=a.x,l.y+=a.y,e.x+=a.x,e.y+=a.y,t.comp.resize(l,e),t.cachedSize=void 0,t.edgeBleed=void 0}),e.map(function(t){return u.indexOf(t)})}function et(t){if(!t.settings&&!t.settings)throw new Error("Invalid component settings");if(!t.resize||"function"!=typeof t.resize)throw new Error("Component is missing resize function");if(!t.dockConfig&&!t.preferredSize)throw new Error("Component is missing preferredSize function")}function nt(t){var e=q(t),n={};return n.layout=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!t||isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))throw new Error("Invalid rect");if(!n.length)return{visible:[],hidden:[]};var i,r,a,o,s=(r=e,o={x:0,y:0,width:0,height:0},(a={x:0,y:0,width:0,height:0}).width=(i=t).width||0,a.height=i.height||0,void 0!==r.size&&(a.width=isNaN(r.size.width)?a.width:r.size.width,a.height=isNaN(r.size.height)?a.height:r.size.height),void 0!==r.logicalSize?(o.width=isNaN(r.logicalSize.width)?a.width:r.logicalSize.width,o.height=isNaN(r.logicalSize.height)?a.height:r.logicalSize.height,o.align=isNaN(r.logicalSize.align)?.5:Math.min(Math.max(r.logicalSize.align,0),1),o.preserveAspectRatio=r.logicalSize.preserveAspectRatio):(o.width=a.width,o.height=a.height,o.preserveAspectRatio=!1),D(o),D(a),{logicalContainerRect:o,containerRect:a}),c=s.logicalContainerRect,l=s.containerRect,u=z(function(t,e,n){for(var i,r,a,o,s,c=[],l=[],u=0;u<t.length;++u){var h=t[u];et(h);var f=void 0;f=h.instance?h.instance.dockConfig():j(h.settings.layout);var d=h.settings.key,p=f.dock(),g=/@/.test(p)?p.split(",").map(function(t){return t.replace(/^\s*@/,"")}):[];i=f,r=n,s=void 0,a=e.layoutModes||{},o=i.minimumLayoutMode(),(s=i.show())&&"object"===x(o)?s=a[o.width]&&a[o.height]&&r.width>=a[o.width].width&&r.height>=a[o.height].height:s&&void 0!==o&&(s=a[o]&&r.width>=a[o].width&&r.height>=a[o].height),s?c.push({comp:h,key:d,config:f,referencedDocks:g}):l.push({comp:h,key:d,config:f,referencedDocks:g})}return[c,l]}(n,e,c),2),h=u[0],f=u[1],d=tt({visible:h,layoutRect:c,reducedRect:function(t){var e=t.layoutRect,n=t.visible,i=t.hidden,r=t.settings,a=$(e.x,e.y,e.width,e.height),o={left:0,right:0,top:0,bottom:0},s=n.slice();s.sort(function(t,e){return t.config.prioOrder()-e.config.prioOrder()});for(var c=0;c<s.length;++c){var l=s[c];Y(l,a,e),G(e,a,o,l,r)||(i.push(s.splice(c,1)[0]),--c)}!function(t,e){if(0!==e.length)for(var n=0;n<t.length;++n){var i=t[n];i.referencedDocks.length&&i.referencedDocks.every(function(t){return e.some(function(e){return e.key===t})})&&e.push(t.splice(n,1)[0])}}(n,i);var u=n.filter(function(t){return-1!==s.indexOf(t)});return n.length=0,n.push.apply(n,O(u)),K(e,a,o),a}({layoutRect:c,visible:h,hidden:f,settings:e}),containerRect:l,translation:{x:t.x,y:t.y}});return f.forEach(function(t){t.comp.visible=!1;var e=$();t.comp.resize(e,e)}),{visible:h.map(function(t){return t.comp}),hidden:f.map(function(t){return t.comp}),order:d}},n.settings=function(t){e=q(t)},n}function it(t){return!!t.changedTouches}var rt=Math.PI,at=2*rt,ot=1e-6,st=at-ot;function ct(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function lt(){return new ct}function ut(t){return function(){return t}}ct.prototype=lt.prototype={constructor:ct,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-t,c=i-e,l=a-t,u=o-e,h=l*l+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(ot<h)if(Math.abs(u*s-c*l)>ot&&r){var f=n-a,d=i-o,p=s*s+c*c,g=f*f+d*d,y=Math.sqrt(p),v=Math.sqrt(h),m=r*Math.tan((rt-Math.acos((p+h-g)/(2*y*v)))/2),x=m/v,b=m/y;Math.abs(x-1)>ot&&(this._+="L"+(t+x*l)+","+(e+x*u)),this._+="A"+r+","+r+",0,0,"+ +(l*d<u*f)+","+(this._x1=t+b*s)+","+(this._y1=e+b*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,a){t=+t,e=+e;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),c=t+o,l=e+s,u=1^a,h=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>ot||Math.abs(this._y1-l)>ot)&&(this._+="L"+c+","+l),n&&(h<0&&(h=h%at+at),st<h?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):ot<h&&(this._+="A"+n+","+n+",0,"+ +(rt<=h)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var ht=Math.abs,ft=Math.atan2,dt=Math.cos,pt=Math.max,gt=Math.min,yt=Math.sin,vt=Math.sqrt,mt=1e-12,xt=Math.PI,bt=xt/2,wt=2*xt;function kt(t){return 1<=t?bt:t<=-1?-bt:Math.asin(t)}function Mt(t){return t.innerRadius}function _t(t){return t.outerRadius}function St(t){return t.startAngle}function Rt(t){return t.endAngle}function Ct(t){return t&&t.padAngle}function Nt(t,e,n,i,r,a,o){var s=t-n,c=e-i,l=(o?a:-a)/vt(s*s+c*c),u=l*c,h=-l*s,f=t+u,d=e+h,p=n+u,g=i+h,y=(f+p)/2,v=(d+g)/2,m=p-f,x=g-d,b=m*m+x*x,w=r-a,k=f*g-p*d,M=(x<0?-1:1)*vt(pt(0,w*w*b-k*k)),_=(k*x-m*M)/b,S=(-k*m-x*M)/b,R=(k*x+m*M)/b,C=(-k*m+x*M)/b,N=_-y,A=S-v,T=R-y,E=C-v;return T*T+E*E<N*N+A*A&&(_=R,S=C),{cx:_,cy:S,x01:-u,y01:-h,x11:_*(r/w-1),y11:S*(r/w-1)}}function At(){var t=Mt,e=_t,n=ut(0),i=null,r=St,a=Rt,o=Ct,s=null;function c(){var c,l,u,h=+t.apply(this,arguments),f=+e.apply(this,arguments),d=r.apply(this,arguments)-bt,p=a.apply(this,arguments)-bt,g=ht(p-d),y=d<p;if(s||(s=c=lt()),f<h&&(l=f,f=h,h=l),mt<f)if(wt-mt<g)s.moveTo(f*dt(d),f*yt(d)),s.arc(0,0,f,d,p,!y),mt<h&&(s.moveTo(h*dt(p),h*yt(p)),s.arc(0,0,h,p,d,y));else{var v,m,x=d,b=p,w=d,k=p,M=g,_=g,S=o.apply(this,arguments)/2,R=mt<S&&(i?+i.apply(this,arguments):vt(h*h+f*f)),C=gt(ht(f-h)/2,+n.apply(this,arguments)),N=C,A=C;if(mt<R){var T=kt(R/h*yt(S)),E=kt(R/f*yt(S));(M-=2*T)>mt?(w+=T*=y?1:-1,k-=T):(M=0,w=k=(d+p)/2),(_-=2*E)>mt?(x+=E*=y?1:-1,b-=E):(_=0,x=b=(d+p)/2)}var z=f*dt(x),O=f*yt(x),j=h*dt(k),D=h*yt(k);if(mt<C){var q,P=f*dt(b),I=f*yt(b),F=h*dt(w),B=h*yt(w);if(g<xt&&(q=function(t,e,n,i,r,a,o,s){var c=n-t,l=i-e,u=o-r,h=s-a,f=h*c-u*l;if(!(f*f<mt))return[t+(f=(u*(e-a)-h*(t-r))/f)*c,e+f*l]}(z,O,F,B,P,I,j,D))){var L=z-q[0],W=O-q[1],V=P-q[0],H=I-q[1],U=1/yt((1<(u=(L*V+W*H)/(vt(L*L+W*W)*vt(V*V+H*H)))?0:u<-1?xt:Math.acos(u))/2),$=vt(q[0]*q[0]+q[1]*q[1]);N=gt(C,(h-$)/(U-1)),A=gt(C,(f-$)/(U+1))}}mt<_?mt<A?(v=Nt(F,B,z,O,f,A,y),m=Nt(P,I,j,D,f,A,y),s.moveTo(v.cx+v.x01,v.cy+v.y01),A<C?s.arc(v.cx,v.cy,A,ft(v.y01,v.x01),ft(m.y01,m.x01),!y):(s.arc(v.cx,v.cy,A,ft(v.y01,v.x01),ft(v.y11,v.x11),!y),s.arc(0,0,f,ft(v.cy+v.y11,v.cx+v.x11),ft(m.cy+m.y11,m.cx+m.x11),!y),s.arc(m.cx,m.cy,A,ft(m.y11,m.x11),ft(m.y01,m.x01),!y))):(s.moveTo(z,O),s.arc(0,0,f,x,b,!y)):s.moveTo(z,O),mt<h&&mt<M?mt<N?(v=Nt(j,D,P,I,h,-N,y),m=Nt(z,O,F,B,h,-N,y),s.lineTo(v.cx+v.x01,v.cy+v.y01),N<C?s.arc(v.cx,v.cy,N,ft(v.y01,v.x01),ft(m.y01,m.x01),!y):(s.arc(v.cx,v.cy,N,ft(v.y01,v.x01),ft(v.y11,v.x11),!y),s.arc(0,0,h,ft(v.cy+v.y11,v.cx+v.x11),ft(m.cy+m.y11,m.cx+m.x11),y),s.arc(m.cx,m.cy,N,ft(m.y11,m.x11),ft(m.y01,m.x01),!y))):s.arc(0,0,h,k,w,y):s.lineTo(j,D)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-xt/2;return[dt(i)*n,yt(i)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:ut(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:ut(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:ut(+t),c):n},c.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:ut(+t),c):i},c.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:ut(+t),c):r},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:ut(+t),c):a},c.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:ut(+t),c):o},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}function Tt(t){this._context=t}function Et(t){return new Tt(t)}function zt(t){return t[0]}function Ot(t){return t[1]}function jt(){var t=zt,e=null,n=ut(0),i=Ot,r=ut(!0),a=null,o=Et,s=null;function c(c){var l,u,h,f,d,p=c.length,g=!1,y=new Array(p),v=new Array(p);for(null==a&&(s=o(d=lt())),l=0;l<=p;++l){if(!(l<p&&r(f=c[l],l,c))===g)if(g=!g)u=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=l-1;u<=h;--h)s.point(y[h],v[h]);s.lineEnd(),s.areaEnd()}g&&(y[l]=+t(f,l,c),v[l]=+n(f,l,c),s.point(e?+e(f,l,c):y[l],i?+i(f,l,c):v[l]))}if(d)return s=null,d+""||null}function l(){return function(){var t=zt,e=Ot,n=ut(!0),i=null,r=Et,a=null;function o(o){var s,c,l,u=o.length,h=!1;for(null==i&&(a=r(l=lt())),s=0;s<=u;++s)!(s<u&&n(c=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(c,s,o),+e(c,s,o));if(l)return a=null,l+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:ut(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:ut(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:ut(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=i&&(a=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=a=null:a=r(i=t),o):i},o}().defined(r).curve(o).context(a)}return c.x=function(n){return arguments.length?(t="function"==typeof n?n:ut(+n),e=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:ut(+e),c):t},c.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:ut(+t),c):e},c.y=function(t){return arguments.length?(n="function"==typeof t?t:ut(+t),i=null,c):n},c.y0=function(t){return arguments.length?(n="function"==typeof t?t:ut(+t),c):n},c.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:ut(+t),c):i},c.lineX0=c.lineY0=function(){return l().x(t).y(n)},c.lineY1=function(){return l().x(t).y(i)},c.lineX1=function(){return l().x(e).y(n)},c.defined=function(t){return arguments.length?(r="function"==typeof t?t:ut(!!t),c):r},c.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),c):o},c.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),c):a},c}function Dt(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function qt(t){return t}Tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Pt=Array.prototype.slice;function It(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ft(t){this._context=t}function Bt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Lt(t,e){this._context=t,this._k=(1-e)/6}Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:It(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:It(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Bt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Bt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Wt=function t(e){function n(t){return new Lt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Vt(t,e){this._context=t,this._alpha=e}Vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>mt){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>mt){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*l+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ht=function t(e){function n(t){return e?new Vt(t,e):new Lt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ut(t){return t<0?-1:1}function $t(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Ut(a)+Ut(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Yt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Xt(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function Jt(t){this._context=t}function Kt(t){this._context=new Gt(t)}function Gt(t){this._context=t}function Zt(t){this._context=t}function Qt(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(a[r[0]=0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;0<=e;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function te(t,e){this._context=t,this._t=e}function ee(t,e){if(1<(r=t.length))for(var n,i,r,a=1,o=t[e[0]],s=o.length;a<r;++a)for(i=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function ne(t){for(var e=t.length,n=new Array(e);0<=--e;)n[e]=e;return n}function ie(t,e){return t[e]}function re(t){for(var e,n=-1,i=0,r=t.length,a=-1/0;++n<r;)(e=+t[n][1])>a&&(a=e,i=n);return i}function ae(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}function oe(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"unspecified",i=2<arguments.length?arguments[2]:void 0,r={},a=t||{get:function(){},has:function(){return!1},default:function(){}};function o(t,e){if(!t||"string"!=typeof t)throw new TypeError("Invalid argument: key must be a non-empty string");return!(t in r)&&(r[t]=e,!0)}function s(t){return r[t]||a.get(t)}function c(t,r){if(void 0!==r)return o(t,r);var a=s(t);return i&&void 0===a&&i.warn("".concat(t," does not exist in ").concat(n," registry")),a||s(e)}return e=a.default(),c.add=o,c.get=s,c.has=function(t){return!!r[t]||a.has(t)},c.remove=function(t){var e=r[t];return delete r[t],e},c.getKeys=function(){return Object.keys(r)},c.getValues=function(){return Object.keys(r).map(function(t){return r[t]})},c.default=function(t){return void 0!==t&&(e=t),e},c.register=o,c}function se(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[1<i.length?i[0]+i.slice(2):i,+t.slice(n+1)]}function ce(t){return(t=se(Math.abs(t)))?t[1]:NaN}Jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Xt(this,this._t0,Yt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Xt(this,Yt(this,n=$t(this,t,e)),n);break;default:Xt(this,this._t0,n=$t(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Kt.prototype=Object.create(Jt.prototype)).point=function(t,e){Jt.prototype.point.call(this,e,t)},Gt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Qt(t),r=Qt(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var le,ue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function he(t){return new fe(t)}function fe(t){if(!(e=ue.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function de(t,e){var n=se(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}he.prototype=fe.prototype,fe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var pe={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return de(100*t,e)},r:de,s:function(t,e){var n=se(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(le=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:o<a?i+new Array(a-o+1).join("0"):0<a?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+se(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function ge(t){return t}var ye,ve,me,xe=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function be(t){var e,n,i,r=t.grouping&&t.thousands?(n=t.grouping,i=t.thousands,function(t,e){for(var r=t.length,a=[],o=0,s=n[0],c=0;0<r&&0<s&&(e<c+s+1&&(s=Math.max(1,e-c)),a.push(t.substring(r-=s,r+s)),!((c+=s+1)>e));)s=n[o=(o+1)%n.length];return a.reverse().join(i)}):ge,a=t.currency,o=t.decimal,s=t.numerals?(e=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}):ge,c=t.percent||"%";function l(t){var e=(t=he(t)).fill,n=t.align,i=t.sign,l=t.symbol,u=t.zero,h=t.width,f=t.comma,d=t.precision,p=t.trim,g=t.type;"n"===g?(f=!0,g="g"):pe[g]||(null==d&&(d=12),p=!0,g="g"),(u||"0"===e&&"="===n)&&(u=!0,e="0",n="=");var y="$"===l?a[0]:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",v="$"===l?a[1]:/[%p]/.test(g)?c:"",m=pe[g],x=/[defgprs%]/.test(g);function b(t){var a,c,l,b=y,w=v;if("c"===g)w=m(t)+w,t="";else{var k=(t=+t)<0;if(t=m(Math.abs(t),d),p&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(0<r){if(!+t[i])break t;r=0}}return 0<r?t.slice(0,r)+t.slice(e+1):t}(t)),k&&0==+t&&(k=!1),b=(k?"("===i?i:"-":"-"===i||"("===i?"":i)+b,w=("s"===g?xe[8+le/3]:"")+w+(k&&"("===i?")":""),x)for(a=-1,c=t.length;++a<c;)if((l=t.charCodeAt(a))<48||57<l){w=(46===l?o+t.slice(a+1):t.slice(a))+w,t=t.slice(0,a);break}}f&&!u&&(t=r(t,1/0));var M=b.length+t.length+w.length,_=M<h?new Array(h-M+1).join(e):"";switch(f&&u&&(t=r(_+t,_.length?h-w.length:1/0),_=""),n){case"<":t=b+t+w+_;break;case"=":t=b+_+t+w;break;case"^":t=_.slice(0,M=_.length>>1)+b+t+w+_.slice(M);break;default:t=_+b+t+w}return s(t)}return d=null==d?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),b.toString=function(){return t+""},b}return{format:l,formatPrefix:function(t,e){var n=l(((t=he(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(ce(e)/3))),r=Math.pow(10,-i),a=xe[8+i/3];return function(t){return n(r*t)+a}}}}ye=be({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),ve=ye.format,me=ye.formatPrefix;var we=new Date,ke=new Date;function Me(t,e,n,i){function r(e){return t(e=new Date(+e)),e}return(r.floor=r).ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&0<a))return s;for(;s.push(o=new Date(+n)),e(n,a),t(n),o<n&&n<i;);return s},r.filter=function(n){return Me(function(e){if(e<=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t<=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;0<=--i;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return we.setTime(+e),ke.setTime(+i),t(we),t(ke),Math.floor(n(we,ke))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var _e=Me(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});_e.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?Me(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):_e:null};_e.range;var Se=6e4,Re=36e5,Ce=(Me(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}).range,Me(function(t){t.setTime(Math.floor(t/Se)*Se)},function(t,e){t.setTime(+t+e*Se)},function(t,e){return(e-t)/Se},function(t){return t.getMinutes()}).range,Me(function(t){var e=t.getTimezoneOffset()*Se%Re;e<0&&(e+=Re),t.setTime(Math.floor((+t-e)/Re)*Re+e)},function(t,e){t.setTime(+t+e*Re)},function(t,e){return(e-t)/Re},function(t){return t.getHours()}).range,Me(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Se)/864e5},function(t){return t.getDate()-1}));Ce.range;function Ne(t){return Me(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Se)/6048e5})}var Ae=Ne(0),Te=Ne(1),Ee=(Ne(2),Ne(3),Ne(4)),ze=(Ne(5),Ne(6),Ae.range,Te.range,Ee.range,Me(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}).range,Me(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));ze.every=function(t){return isFinite(t=Math.floor(t))&&0<t?Me(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};ze.range,Me(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Se)},function(t,e){return(e-t)/Se},function(t){return t.getUTCMinutes()}).range,Me(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Re)},function(t,e){return(e-t)/Re},function(t){return t.getUTCHours()}).range;var Oe=Me(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});Oe.range;function je(t){return Me(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var De=je(0),qe=je(1),Pe=(je(2),je(3),je(4)),Ie=(je(5),je(6),De.range,qe.range,Pe.range,Me(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}).range,Me(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));Ie.every=function(t){return isFinite(t=Math.floor(t))&&0<t?Me(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};Ie.range;function Fe(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Be(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Le(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function We(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,l=Ze(r),u=Qe(r),h=Ze(a),f=Qe(a),d=Ze(o),p=Qe(o),g=Ze(s),y=Qe(s),v=Ze(c),m=Qe(c),x={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:bn,e:bn,f:Sn,H:wn,I:kn,j:Mn,L:_n,m:Rn,M:Cn,p:function(t){return r[+(12<=t.getHours())]},Q:ei,s:ni,S:Nn,u:An,U:Tn,V:En,w:zn,W:On,x:null,X:null,y:jn,Y:Dn,Z:qn,"%":ti},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Pn,e:Pn,f:Wn,H:In,I:Fn,j:Bn,L:Ln,m:Vn,M:Hn,p:function(t){return r[+(12<=t.getUTCHours())]},Q:ei,s:ni,S:Un,u:$n,U:Yn,V:Xn,w:Jn,W:Kn,x:null,X:null,y:Gn,Y:Zn,Z:Qn,"%":ti},w={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=m[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=y[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return _(t,e,n,i)},d:un,e:un,f:yn,H:fn,I:fn,j:hn,L:gn,m:ln,M:dn,p:function(t,e,n){var i=l.exec(e.slice(n));return i?(t.p=u[i[0].toLowerCase()],n+i[0].length):-1},Q:mn,s:xn,S:pn,u:en,U:nn,V:rn,w:tn,W:an,x:function(t,e,i){return _(t,n,e,i)},X:function(t,e,n){return _(t,i,e,n)},y:sn,Y:on,Z:cn,"%":vn};function k(t,e){return function(n){var i,r,a,o=[],s=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(o.push(t.slice(c,s)),null!=(r=$e[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(a=e[i])&&(i=a(n,r)),o.push(i),c=s+1);return o.push(t.slice(c,s)),o.join("")}}function M(t,e){return function(n){var i,r,a=Le(1900);if(_(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||53<a.V)return null;"w"in a||(a.w=1),a.d="Z"in a?(i=4<(r=(i=Be(Le(a.y))).getUTCDay())||0===r?qe.ceil(i):qe(i),i=Oe.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),i.getUTCDate()+(a.w+6)%7):(i=4<(r=(i=e(Le(a.y))).getDay())||0===r?Te.ceil(i):Te(i),i=Ce.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?Be(Le(a.y)).getUTCDay():e(Le(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Be(a)):e(a)}}function _(t,e,n,i){for(var r,a,o=0,s=e.length,c=n.length;o<s;){if(c<=i)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=w[r in $e?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return x.x=k(n,x),x.X=k(i,x),x.c=k(e,x),b.x=k(n,b),b.X=k(i,b),b.c=k(e,b),{format:function(t){var e=k(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",Fe);return e.toString=function(){return t},e},utcFormat:function(t){var e=k(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t,Be);return e.toString=function(){return t},e}}}var Ve,He,Ue,$e={"-":"",_:" ",0:"0"},Ye=/^\s*\d+/,Xe=/^%/,Je=/[\\^$*+?|[\]().{}]/g;function Ke(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function Ge(t){return t.replace(Je,"\\$&")}function Ze(t){return new RegExp("^(?:"+t.map(Ge).join("|")+")","i")}function Qe(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function tn(t,e,n){var i=Ye.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function en(t,e,n){var i=Ye.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function nn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function rn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function an(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function on(t,e,n){var i=Ye.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function sn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(68<+i[0]?1900:2e3),n+i[0].length):-1}function cn(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function ln(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function un(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function hn(t,e,n){var i=Ye.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function fn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function dn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function pn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function gn(t,e,n){var i=Ye.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function yn(t,e,n){var i=Ye.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function vn(t,e,n){var i=Xe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function mn(t,e,n){var i=Ye.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function xn(t,e,n){var i=Ye.exec(e.slice(n));return i?(t.Q=1e3*+i[0],n+i[0].length):-1}function bn(t,e){return Ke(t.getDate(),e,2)}function wn(t,e){return Ke(t.getHours(),e,2)}function kn(t,e){return Ke(t.getHours()%12||12,e,2)}function Mn(t,e){return Ke(1+Ce.count(ze(t),t),e,3)}function _n(t,e){return Ke(t.getMilliseconds(),e,3)}function Sn(t,e){return _n(t,e)+"000"}function Rn(t,e){return Ke(t.getMonth()+1,e,2)}function Cn(t,e){return Ke(t.getMinutes(),e,2)}function Nn(t,e){return Ke(t.getSeconds(),e,2)}function An(t){var e=t.getDay();return 0===e?7:e}function Tn(t,e){return Ke(Ae.count(ze(t),t),e,2)}function En(t,e){var n=t.getDay();return t=4<=n||0===n?Ee(t):Ee.ceil(t),Ke(Ee.count(ze(t),t)+(4===ze(t).getDay()),e,2)}function zn(t){return t.getDay()}function On(t,e){return Ke(Te.count(ze(t),t),e,2)}function jn(t,e){return Ke(t.getFullYear()%100,e,2)}function Dn(t,e){return Ke(t.getFullYear()%1e4,e,4)}function qn(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+Ke(e/60|0,"0",2)+Ke(e%60,"0",2)}function Pn(t,e){return Ke(t.getUTCDate(),e,2)}function In(t,e){return Ke(t.getUTCHours(),e,2)}function Fn(t,e){return Ke(t.getUTCHours()%12||12,e,2)}function Bn(t,e){return Ke(1+Oe.count(Ie(t),t),e,3)}function Ln(t,e){return Ke(t.getUTCMilliseconds(),e,3)}function Wn(t,e){return Ln(t,e)+"000"}function Vn(t,e){return Ke(t.getUTCMonth()+1,e,2)}function Hn(t,e){return Ke(t.getUTCMinutes(),e,2)}function Un(t,e){return Ke(t.getUTCSeconds(),e,2)}function $n(t){var e=t.getUTCDay();return 0===e?7:e}function Yn(t,e){return Ke(De.count(Ie(t),t),e,2)}function Xn(t,e){var n=t.getUTCDay();return t=4<=n||0===n?Pe(t):Pe.ceil(t),Ke(Pe.count(Ie(t),t)+(4===Ie(t).getUTCDay()),e,2)}function Jn(t){return t.getUTCDay()}function Kn(t,e){return Ke(qe.count(Ie(t),t),e,2)}function Gn(t,e){return Ke(t.getUTCFullYear()%100,e,2)}function Zn(t,e){return Ke(t.getUTCFullYear()%1e4,e,4)}function Qn(){return"+0000"}function ti(){return"%"}function ei(t){return+t}function ni(t){return Math.floor(+t/1e3)}Ve=We({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ve.format,Ve.parse,He=Ve.utcFormat,Ue=Ve.utcParse;var ii="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||He(ii);+new Date("2000-01-01T00:00:00.000Z")||Ue(ii);var ri=oe();ri("d3-number",function(t,e,n){var i,r;function a(t){return r(t)}function o(){a.locale({decimal:n||".",thousands:e||",",grouping:[3],currency:["$",""]})}return a.locale=function(e){return i=be(e),r=i.format(t),this},o(),a.format=function(t,r,a,s){return(a||s)&&(e=a,n=s,o()),i.format(t)(r)},a.pattern=function(e){return e&&(t=e,r=i.format(e)),t},a}),ri("d3-time",function(t){var e=We({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),n=e.format(t);function i(t){return n(t)}return i.format=function(t,n){return e.format(t)(n)},i.locale=function(){return e=We.apply(void 0,arguments),n=e.format(t),this},i.parse=function(t,n){return e.parse(t)(n)},i.parsePattern=function(t){return e.parse(t)},i});var ai={id:function(t){return"".concat(t.source,"/").concat(t.key||t.title)},key:function(t){return String(t.key||t.title)},tags:function(t){return t.tags},min:function(t){return t.min},max:function(t){return t.max},type:function(t){return t.type},title:function(t){return String(t.title)},values:function(t){return t.values},value:function(t){return t},label:function(t){return t},formatter:function(t){return function(t){if("function"==typeof t.formatter)return t.formatter();var e=t.formatter||{};return ri(e.type||"d3-number")(e.format||"")}(t)}};function oi(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.id,i=void 0===n?ai.id:n,r=e.key,a=void 0===r?ai.key:r,o=e.min,s=void 0===o?ai.min:o,c=e.max,l=void 0===c?ai.max:c,u=e.type,h=void 0===u?ai.type:u,f=e.tags,d=void 0===f?ai.tags:f,p=e.title,g=void 0===p?ai.title:p,y=e.values,v=void 0===y?ai.values:y,m=e.value,x=void 0===m?ai.value:m,b=e.label,w=void 0===b?ai.label:b,k=e.formatter,M=void 0===k?ai.formatter:k;return{id:function(){return i(t)},key:function(){return a(t)},raw:function(){return t},tags:function(){return d(t)},type:function(){return h(t)},min:function(){return s(t)},max:function(){return l(t)},title:function(){return g(t)},items:function(){return v(t)},formatter:function(){return M(t)},value:x,label:w}}var si={diverging:function(t,e){if(0<(s=t.length))for(var n,i,r,a,o,s,c=0,l=t[e[0]].length;c<l;++c)for(a=o=0,n=0;n<s;++n)0<=(r=(i=t[e[n]][c])[1]-i[0])?(i[0]=a,i[1]=a+=r):i[0]=r<0?(i[1]=o,o+=r):a},none:ee,silhouette:function(t,e){if(0<(n=t.length)){for(var n,i=0,r=t[e[0]],a=r.length;i<a;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}ee(t,e)}},expand:function(t,e){if(0<(i=t.length)){for(var n,i,r,a=0,o=t[0].length;a<o;++a){for(r=n=0;n<i;++n)r+=t[n][a][1]||0;if(r)for(n=0;n<i;++n)t[n][a][1]/=r}ee(t,e)}},wiggle:function(t,e){if(0<(r=t.length)&&0<(i=(n=t[e[0]]).length)){for(var n,i,r,a=0,o=1;o<i;++o){for(var s=0,c=0,l=0;s<r;++s){for(var u=t[e[s]],h=u[o][1]||0,f=(h-(u[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];f+=(p[o][1]||0)-(p[o-1][1]||0)}c+=h,l+=f*h}n[o-1][1]+=n[o-1][0]=a,c&&(a-=l/c)}n[o-1][1]+=n[o-1][0]=a,ee(t,e)}}},ci={ascending:function(t){var e=t.map(ae);return ne(t).sort(function(t,n){return e[t]-e[n]})},insideout:function(t){var e,n,i,r,a=t.length,o=t.map(ae),s=(r=(i=t).map(re),ne(i).sort(function(t,e){return r[t]-r[e]})),c=0,l=0,u=[],h=[];for(e=0;e<a;++e)n=s[e],c<l?(c+=o[n],u.push(n)):(l+=o[n],h.push(n));return h.reverse().concat(u)},none:ne,reverse:function(t){return ne(t).reverse()}};function li(t,e,n){for(var i={},r=e.stackKey,a=e.value,o=e.startProp||"start",s=e.endProp||"end",c=e.offset||"none",l=e.order||"none",u=e.valueRef||"",h=0,f={},d=0;d<t.items.length;d++){var p=t.items[d],g=u?p[u]:null;if(g&&g.source){var y="".concat(g.source.key||"","/").concat(g.source.field);f[y]||(f[y]=g.source)}var v=r(p);i[v]=i[v]||{items:[]},i[v].items.push(p),h=Math.max(h,i[v].items.length)}for(var m=Array.apply(null,{length:h}).map(Number.call,Number),x=Object.keys(i).map(function(t){return i[t].items}),b=function(){var t=ut([]),e=ne,n=ee,i=ie;function r(r){var a,o,s=t.apply(this,arguments),c=r.length,l=s.length,u=new Array(l);for(a=0;a<l;++a){for(var h,f=s[a],d=u[a]=new Array(c),p=0;p<c;++p)d[p]=h=[0,+i(r[p],f,p,r)],h.data=r[p];d.key=f}for(a=0,o=e(u);a<l;++a)u[o[a]].index=a;return n(u,o),u}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:ut(Pt.call(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:ut(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?ne:"function"==typeof t?t:ut(Pt.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?ee:t,r):n},r}().keys(m).value(function(t,e){return t[e]?a(t[e]):0}).order(ci[l]).offset(si[c])(x),w=[],k=0;k<b.length;k++)for(var M=b[k],_=0;_<M.length;_++){var S=M[_],R=M[_].data[M.key];R&&(R[o]={value:S[0]},R[s]={value:S[1]},w.push(S[0],S[1]))}var C=Object.keys(f).map(function(t){var e=n(f[t].key);return e?e.field(f[t].field):null}).filter(function(t){return!!t}),N=oi({title:C.map(function(t){return t.title()}).join(", "),min:Math.min.apply(Math,w),max:Math.max.apply(Math,w),type:"measure",formatter:C[0]?C[0].formatter:void 0});t.fields.push(N)}function ui(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i={},r=n.logger;if(Array.isArray(t))i.items=t.map(function(t){return{value:t,label:String(t)}});else if(t){if("collection"in t)i=_({},e.collection(t.collection));else{var a=e.dataset?e.dataset(t.source):null,o=t.value||function(t){return t},s=t.label||function(t){return t};if(t.groupBy||t.mapTo)r.warn('Deprecated "data" configuration',t),i.items=[];else if(t.hierarchy)i.root=a.hierarchy?a.hierarchy(t.hierarchy):null,i.fields=a.fields();else if(t.items)i.items=t.items.map(function(t){return{value:o(t),label:String(s(t))}});else if(t.extract){var c=Array.isArray(t.extract)?t.extract:[t.extract];i.items=[];var l,u=[];(c.forEach(function(t){var n,r=t.source?e.dataset(t.source):a;r&&((n=i.items).push.apply(n,O(r.extract(t))),void 0!==t.field&&u.push(r.field(t.field)))}),u.length&&(i.fields=u),t.amend&&Array.isArray(t.amend))&&(l=i.items).push.apply(l,O(t.amend))}else if(void 0!==t.field&&a){var h=a.field(t.field);h&&(i.fields||(i.fields=[]),i.fields.push(h),"value"in t||(o=h.value||function(t){return t},s=h.label||function(t){return t},i.value=o),i.items=h.items().map(function(e){return{value:o(e),label:String(s(e)),source:{field:t.field}}}))}else t.fields&&t.fields.forEach(function(t){var n,r="object"===x(t)&&t.source?e.dataset(t.source):a;r&&(n="object"===x(t)&&void 0!==t.field?r.field(t.field):r.field(t))&&(i.fields||(i.fields=[]),i.fields.push(n))});i.items&&t.map&&(i.items=i.items.map(t.map))}t&&t.stack&&li(i,t.stack,e.dataset)}return t&&!Array.isArray(t)&&"function"==typeof t.filter&&i.items&&(i.items=i.items.filter(t.filter)),t&&!Array.isArray(t)&&"function"==typeof t.sort&&i.items&&(i.items=i.items.sort(t.sort)),i}function hi(t,e,n){var i,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:ui;if(t.data){var a=r(t.data,e,n);if(a&&a.fields&&a.fields[0])return a.fields[0].formatter()}if(i=t.formatter?"".concat(t.formatter,"-").concat(t.type||"number"):t.type||"d3-number",n.formatter.has(i))return n.formatter.get(i)(t.format||"");throw new Error("Formatter of type '".concat(i,"' was not found"))}function fi(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var di,pi,gi=(1===(di=fi).length&&(pi=di,di=function(t,e){return fi(pi(t),e)}),{left:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;di(t[r],e)<0?n=r+1:i=r}return n},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;0<di(t[r],e)?i=r:n=r+1}return n}}).right;var yi=Math.sqrt(50),vi=Math.sqrt(10),mi=Math.sqrt(2);function xi(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return 0<=r?(yi<=a?10:vi<=a?5:mi<=a?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(yi<=a?10:vi<=a?5:mi<=a?2:1)}function bi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var wi="$";function ki(){}function Mi(t,e){var n=new ki;if(t instanceof ki)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(null==e)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e(i=t[r],r,t),i)}else if(t)for(var o in t)n.set(o,t[o]);return n}function _i(){}ki.prototype=Mi.prototype={constructor:ki,has:function(t){return wi+t in this},get:function(t){return this[wi+t]},set:function(t,e){return this[wi+t]=e,this},remove:function(t){var e=wi+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===wi&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===wi&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===wi&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===wi&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===wi&&++t;return t},empty:function(){for(var t in this)if(t[0]===wi)return!1;return!0},each:function(t){for(var e in this)e[0]===wi&&t(this[e],e.slice(1),this)}};var Si=Mi.prototype;_i.prototype=function(t,e){var n=new _i;if(t instanceof _i)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}.prototype={constructor:_i,has:Si.has,add:function(t){return this[wi+(t+="")]=t,this},remove:Si.remove,clear:Si.clear,values:Si.keys,size:Si.size,empty:Si.empty,each:Si.each};var Ri=Array.prototype,Ci=Ri.map,Ni=Ri.slice,Ai={name:"implicit"};function Ti(){var t=Mi(),e=[],n=[],i=Ai;function r(r){var a=r+"",o=t.get(a);if(!o){if(i!==Ai)return i;t.set(a,o=e.push(r))}return n[(o-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Mi();for(var i,a,o=-1,s=n.length;++o<s;)t.has(a=(i=n[o])+"")||t.set(a,e.push(i));return r},r.range=function(t){return arguments.length?(n=Ni.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return Ti(e,n).unknown(i)},bi.apply(r,arguments),r}function Ei(){var t,e,n=Ti().unknown(void 0),i=n.domain,r=n.range,a=[0,1],o=!1,s=0,c=0,l=.5;function u(){var n=i().length,u=a[1]<a[0],h=a[u-0],f=a[1-u];t=(f-h)/Math.max(1,n-s+2*c),o&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*l,e=t*(1-s),o&&(h=Math.round(h),e=Math.round(e));var d=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a}(n).map(function(e){return h+t*e});return r(u?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),u()):i()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],u()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,u()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,c=+t),u()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),u()):s},n.paddingOuter=function(t){return arguments.length?(c=+t,u()):c},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),u()):l},n.copy=function(){return Ei(i(),a).round(o).paddingInner(s).paddingOuter(c).align(l)},bi.apply(u(),arguments)}function zi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Oi(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ji(){}var Di=1/.7,qi="\\s*([+-]?\\d+)\\s*",Pi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ii="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fi=/^#([0-9a-f]{3})$/,Bi=/^#([0-9a-f]{6})$/,Li=new RegExp("^rgb\\("+[qi,qi,qi]+"\\)$"),Wi=new RegExp("^rgb\\("+[Ii,Ii,Ii]+"\\)$"),Vi=new RegExp("^rgba\\("+[qi,qi,qi,Pi]+"\\)$"),Hi=new RegExp("^rgba\\("+[Ii,Ii,Ii,Pi]+"\\)$"),Ui=new RegExp("^hsl\\("+[Pi,Ii,Ii]+"\\)$"),$i=new RegExp("^hsla\\("+[Pi,Ii,Ii,Pi]+"\\)$"),Yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xi(t){var e;return t=(t+"").trim().toLowerCase(),(e=Fi.exec(t))?new Qi((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=Bi.exec(t))?Ji(parseInt(e[1],16)):(e=Li.exec(t))?new Qi(e[1],e[2],e[3],1):(e=Wi.exec(t))?new Qi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Vi.exec(t))?Ki(e[1],e[2],e[3],e[4]):(e=Hi.exec(t))?Ki(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ui.exec(t))?er(e[1],e[2]/100,e[3]/100,1):(e=$i.exec(t))?er(e[1],e[2]/100,e[3]/100,e[4]):Yi.hasOwnProperty(t)?Ji(Yi[t]):"transparent"===t?new Qi(NaN,NaN,NaN,0):null}function Ji(t){return new Qi(t>>16&255,t>>8&255,255&t,1)}function Ki(t,e,n,i){return i<=0&&(t=e=n=NaN),new Qi(t,e,n,i)}function Gi(t){return t instanceof ji||(t=Xi(t)),t?new Qi((t=t.rgb()).r,t.g,t.b,t.opacity):new Qi}function Zi(t,e,n,i){return 1===arguments.length?Gi(t):new Qi(t,e,n,null==i?1:i)}function Qi(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function tr(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function er(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new nr(t,e,n,i)}function nr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ir(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}zi(ji,Xi,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),zi(Qi,Zi,Oi(ji,{brighter:function(t){return t=null==t?Di:Math.pow(Di,t),new Qi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+tr(this.r)+tr(this.g)+tr(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),zi(nr,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof nr)return new nr(t.h,t.s,t.l,t.opacity);if(t instanceof ji||(t=Xi(t)),!t)return new nr;if(t instanceof nr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,c=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=c<.5?a+r:2-a-r,o*=60):s=0<c&&c<1?0:o,new nr(o,s,c,t.opacity)}(t):new nr(t,e,n,null==i?1:i)},Oi(ji,{brighter:function(t){return t=null==t?Di:Math.pow(Di,t),new nr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new nr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Qi(ir(240<=t?t-240:t+120,r,i),ir(t,r,i),ir(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var rr=Math.PI/180,ar=180/Math.PI,or=.96422,sr=1,cr=.82521,lr=4/29,ur=6/29,hr=3*ur*ur,fr=ur*ur*ur;function dr(t){if(t instanceof pr)return new pr(t.l,t.a,t.b,t.opacity);if(t instanceof xr){if(isNaN(t.h))return new pr(t.l,0,0,t.opacity);var e=t.h*rr;return new pr(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Qi||(t=Gi(t));var n,i,r=mr(t.r),a=mr(t.g),o=mr(t.b),s=gr((.2225045*r+.7168786*a+.0606169*o)/sr);return r===a&&a===o?n=i=s:(n=gr((.4360747*r+.3850649*a+.1430804*o)/or),i=gr((.0139322*r+.0971045*a+.7141733*o)/cr)),new pr(116*s-16,500*(n-s),200*(s-i),t.opacity)}function pr(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function gr(t){return fr<t?Math.pow(t,1/3):t/hr+lr}function yr(t){return ur<t?t*t*t:hr*(t-lr)}function vr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function mr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xr(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}zi(pr,function(t,e,n,i){return 1===arguments.length?dr(t):new pr(t,e,n,null==i?1:i)},Oi(ji,{brighter:function(t){return new pr(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new pr(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Qi(vr(3.1338561*(e=or*yr(e))-1.6168667*(t=sr*yr(t))-.4906146*(n=cr*yr(n))),vr(-.9787684*e+1.9161415*t+.033454*n),vr(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),zi(xr,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof xr)return new xr(t.h,t.c,t.l,t.opacity);if(t instanceof pr||(t=dr(t)),0===t.a&&0===t.b)return new xr(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ar;return new xr(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new xr(t,e,n,null==i?1:i)},Oi(ji,{brighter:function(t){return new xr(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new xr(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return dr(this).rgb()}}));var br=1.78277,wr=-.29227,kr=-.90649,Mr=1.97294,_r=Mr*kr,Sr=Mr*br,Rr=br*wr- -.14861*kr;function Cr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Nr(t){return function(){return t}}function Ar(t){return 1==(t=+t)?Tr:function(e,n){return n-e?(i=e,r=n,a=t,i=Math.pow(i,a),r=Math.pow(r,a)-i,a=1/a,function(t){return Math.pow(i+t*r,a)}):Nr(isNaN(e)?n:e);var i,r,a}}function Tr(t,e){var n,i,r=e-t;return r?(n=t,i=r,function(t){return n+t*i}):Nr(isNaN(t)?e:t)}zi(Cr,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Cr)return new Cr(t.h,t.s,t.l,t.opacity);t instanceof Qi||(t=Gi(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Rr*i+_r*e-Sr*n)/(Rr+_r-Sr),a=i-r,o=(Mr*(n-r)-wr*a)/kr,s=Math.sqrt(o*o+a*a)/(Mr*r*(1-r)),c=s?Math.atan2(o,a)*ar-120:NaN;return new Cr(c<0?c+360:c,s,r,t.opacity)}(t):new Cr(t,e,n,null==i?1:i)},Oi(ji,{brighter:function(t){return t=null==t?Di:Math.pow(Di,t),new Cr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Cr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*rr,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Qi(255*(e+n*(-.14861*i+br*r)),255*(e+n*(wr*i+kr*r)),255*(e+n*(Mr*i)),this.opacity)}}));var Er=function t(e){var n=Ar(e);function i(t,e){var i=n((t=Zi(t)).r,(e=Zi(e)).r),r=n(t.g,e.g),a=n(t.b,e.b),o=Tr(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=a(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function zr(t,e){return e-=t=+t,function(n){return t+e*n}}function Or(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=qr(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var jr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dr=new RegExp(jr.source,"g");function qr(t,e){var n,i=typeof e;return null==e||"boolean"===i?Nr(e):("number"===i?zr:"string"===i?(n=Xi(e))?(e=n,Er):function(t,e){var n,i,r,a,o,s=jr.lastIndex=Dr.lastIndex=0,c=-1,l=[],u=[];for(t+="",e+="";(n=jr.exec(t))&&(i=Dr.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),l[c]?l[c]+=r:l[++c]=r),(n=n[0])===(i=i[0])?l[c]?l[c]+=i:l[++c]=i:(l[++c]=null,u.push({i:c,x:zr(n,i)})),s=Dr.lastIndex;return s<e.length&&(r=e.slice(s),l[c]?l[c]+=r:l[++c]=r),l.length<2?u[0]?(o=u[0].x,function(t){return o(t)+""}):(a=e,function(){return a}):(e=u.length,function(t){for(var n,i=0;i<e;++i)l[(n=u[i]).i]=n.x(t);return l.join("")})}:e instanceof Xi?Er:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}}:Array.isArray(e)?function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=qr(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Or:zr)(t,e)}function Pr(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}Math.PI,Math.SQRT2;function Ir(t){return+t}var Fr=[0,1];function Br(t){return t}function Lr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Wr(t){var e,n=t[0],i=t[t.length-1];return i<n&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function Vr(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return a=r<i?(i=Lr(r,i),n(o,a)):(i=Lr(i,r),n(a,o)),function(t){return a(i(t))}}function Hr(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Lr(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=gi(t,e,1,i)-1;return a[n](r[n](e))}}function Ur(t,e){return function(){var t,e,n,i,r,a,o=Fr,s=Fr,c=qr,l=Br;function u(){return i=2<Math.min(o.length,s.length)?Hr:Vr,r=a=null,h}function h(e){return isNaN(e=+e)?n:(r||(r=i(o.map(t),s,c)))(t(l(e)))}return h.invert=function(n){return l(e((a||(a=i(s,o.map(t),zr)))(n)))},h.domain=function(t){return arguments.length?(o=Ci.call(t,Ir),l===Br||(l=Wr(o)),u()):o.slice()},h.range=function(t){return arguments.length?(s=Ni.call(t),u()):s.slice()},h.rangeRound=function(t){return s=Ni.call(t),c=Pr,u()},h.clamp=function(t){return arguments.length?(l=t?Wr(o):Br,h):l!==Br},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,u()}}()(t,e)}function $r(t,e,n,i){var r,a,o,s,c,l,u,h,f,d,p,g,y=(a=t,o=e,s=n,c=Math.abs(o-a)/Math.max(0,s),l=Math.pow(10,Math.floor(Math.log(c)/Math.LN10)),yi<=(u=c/l)?l*=10:vi<=u?l*=5:mi<=u&&(l*=2),o<a?-l:l);switch((i=he(null==i?",f":i)).type){case"s":var v=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN((p=y,g=v,r=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ce(g)/3)))-ce(Math.abs(p)))))||(i.precision=r),me(i,v);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN((f=y,d=Math.max(Math.abs(t),Math.abs(e)),f=Math.abs(f),d=Math.abs(d)-f,r=Math.max(0,ce(d)-ce(f))+1))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN((h=y,r=Math.max(0,-ce(Math.abs(h)))))||(i.precision=r-2*("%"===i.type))}return ve(i)}function Yr(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,a,o,s=-1;if(n=+n,(t=+t)==(e=+e)&&0<n)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=xi(t,e,n))||!isFinite(o))return[];if(0<o)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(r=Math.ceil(t-e+1));++s<r;)a[s]=(t-s)/o;return i&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return $r(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),a=0,o=r.length-1,s=r[a],c=r[o];return c<s&&(i=s,s=c,c=i,i=a,a=o,o=i),0<(i=xi(s,c,n))?i=xi(s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i,n):i<0&&(i=xi(s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i,n)),0<i?(r[a]=Math.floor(s/i)*i,r[o]=Math.ceil(c/i)*i,e(r)):i<0&&(r[a]=Math.ceil(s*i)/i,r[o]=Math.floor(c*i)/i,e(r)),t},t}function Xr(){var t=Ur(Br,Br);return t.copy=function(){return e=t,Xr().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},bi.apply(t,arguments),Yr(t)}function Jr(t){return void 0===t?function(t){return t}:function(e){return t(e)}}function Kr(t){return Math.max(0,Math.min(1,t))}function Gr(t){return"object"===x(t)}function Zr(t,e,n){for(var i=Math.abs(e-n)/(t+1),r=[],a=1;a<=t;a++){var o=a*i;r.push(e<n?e+o:e-o)}return r}function Qr(t,e,n){if(1===t.length)return t;for(var i=t.concat([]),r=0;r<t.length;r++){var a=t[r],o=t[r+1];0===r&&a!==n.start()?(i.push.apply(i,O(Zr(e,a,o))),a-=o-a,o=t[r]):r===t.length-1&&o!==n.end()&&(o=a+(a-t[r-1])),i.push.apply(i,O(Zr(e,a,o)))}return i.filter(function(t){return t>=n.min()&&t<=n.max()})}function ta(t){var e=t.distance,n=t.scale,i=t.minorCount,r=void 0===i?0:i,a=t.unitDivider,o=void 0===a?100:a,s=t.formatter,c=void 0===s?void 0:s,l=I(o)||I(e)?2:Math.max(e/o,2),u=Math.min(1e3,Math.round(l)),h=n.ticks(u);h.length<=1&&(h=n.ticks(u+1));var f=0<r?Qr(h,r,n):h;f.sort(function(t,e){return t-e});var d=f.map(Jr(c));return f.map(function(t,e){var i=n(t);return{position:i,start:i,end:i,label:d[e],value:t,isMinor:-1===h.indexOf(t)}})}function ea(t){var e=t.distance,n=t.scale,i=t.minorCount,r=void 0===i?0:i,a=t.unitDivider,o=void 0===a?100:a,s=t.formatter,c=void 0===s?void 0:s,l=I(o)||I(e)?2:Math.max(e/o,2),u=Math.min(1e3,Math.round(l)),h=10<u?10:u;n.nice(h);var f=n.ticks(u),d=0<r?Qr(f,r,n):f;d.sort(function(t,e){return t-e});var p=d.map(Jr(c));return d.map(function(t,e){var i=n(t);return{position:i,start:i,end:i,label:p[e],value:t,isMinor:-1===f.indexOf(t)}})}function na(t){var e,n,i,r,a,o,s,c,l,u,h,f=t.settings,d=t.scale,p=t.distance,g=t.formatter,y=void 0===g?function(t){return t}:g,v=f.minorTicks&&!I(f.minorTicks.count)?Math.min(100,f.minorTicks.count):0;if(Array.isArray(f.ticks.values)){var m=f.ticks.values.filter(function(t){return"object"===x(t)?!I(t.value):!I(t)});s={values:m,scale:d.copy(),formatter:y},c=s.values,l=s.scale,u=s.formatter,h=void 0===u?function(t){return t}:u,e=c.sort(function(t,e){return(Gr(t)?t.value:t)-(Gr(e)?e.value:e)}).filter(function(t,e,n){var i=Gr(t)?t.value:t;return i<=l.max()&&i>=l.min()&&n.indexOf(t)===e}).map(function(t){var e=Gr(t),n=e?t.value:t,i=l(n);return{position:i,value:n,label:e&&void 0!==t.label?t.label:h(n),isMinor:!!e&&!!t.isMinor,start:e&&!isNaN(t.start)?Kr(l(t.start)):i,end:e&&!isNaN(t.end)?Kr(l(t.end)):i}})}else if(I(f.ticks.count))e=(f.ticks.tight?ea:ta)({distance:p,minorCount:v,unitDivider:f.ticks.distance,scale:d,formatter:y}),f.ticks.forceBounds&&function(t,e,n){var i=t.map(function(t){return t.position}),r=e.range();-1===i.indexOf(r[0])?t.splice(0,0,{position:r[0],start:r[0],end:r[0],label:n(e.start()),isMinor:!1,value:e.start()}):t[0]&&t[0].isMinor&&(t[0].isMinor=!1);var a=t[t.length-1];-1===i.indexOf(r[1])?t.push({position:r[1],start:r[1],end:r[1],label:n(e.end()),isMinor:!1,value:e.end()}):a&&a.isMinor&&(a.isMinor=!1)}(e,d,y);else{var b=Math.min(1e3,f.ticks.count);n={count:b,minorCount:v,scale:d.copy(),formatter:y},i=n.count,r=n.minorCount,a=n.scale,o=n.formatter,e=a.ticks((i-1)*r+i).map(function(t,e){var n=a(t);return{position:n,start:n,end:n,label:o(t),isMinor:e%(r+1)!=0,value:t}})}return e}function ia(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i={};return Object.keys(e).forEach(function(r){var a=x(t[r]);i[r]="function"===a?t[r](n):"undefined"===a?e[r]:t[r]}),i}var ra={min:NaN,max:NaN,expand:NaN,include:[],invert:!1},aa={tight:!1,forceBounds:!1,values:void 0,count:NaN,distance:100},oa={count:NaN};function sa(t,e){t.instance||(t.instance=e.copy(),t.instance.domain([e.start(),e.end()]),t.instance.clamp(!0),t.instance.range(t.invert?[1,0]:[0,1]))}function ca(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=Xr(),a={instance:null,invert:!1},o={data:n,resources:i},s=ia(e,ra,o);function c(t){return I(t)?NaN:r(t)}s.ticks=ia(e.ticks,aa,o),s.minorTicks=ia(e.minorTicks,oa,o),c.data=function(){return n},c.invert=function(t){return r.invert(t)},c.rangeRound=function(t){return r.rangeRound(t),c},c.clamp=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return r.clamp(t),c},c.cachedTicks=function(){return t},c.clearTicksCache=function(){return t=void 0,this},c.ticks=function(e){return t=null!==e&&"object"===x(e)?(e.settings=e.settings||{},e.settings=v(!0,{},s,e.settings),e.scale=c,na(e)):r.ticks(e)},c.nice=function(t){return r.nice(t),c},c.tickFormat=function(t,e){return r.tickFormat(t,e)},c.interpolate=function(t){return r.interpolate(t),c},c.domain=function(t){return arguments.length?(r.domain(t),a.instance&&a.instance.domain([c.start(),c.end()]),c):r.domain()},c.range=function(t){return arguments.length?(r.range(t),c):r.range()},c.start=function(){return c.domain()[0]},c.end=function(){return c.domain()[this.domain().length-1]},c.min=function(){return Math.min(this.start(),this.end())},c.max=function(){return Math.max(this.start(),this.end())},c.classify=function(t){for(var e=(c.start()-c.end())/t,n=[c.end()],i=[],r=e/2,a=0;a<t;a++){var o=n[n.length-1]||0,s=o+e,l=c(o+r);n.push.apply(n,[s,s]),i.push.apply(i,[l,l])}return n.pop(),c.domain(n),c.range(i),c},c.copy=function(){var t=ca(e,n,i);return t.domain(c.domain()),t.range(c.range()),t.clamp(r.clamp()),t},c.norm=function(t){return sa(a,c),a.instance(t)},c.normInvert=function(t){return sa(a,c),a.instance.invert(t)};var l=function(t,e){var n=+t.min,i=+t.max,r=0,a=1;if(e&&e[0]){var o=e.map(function(t){return t.min()}).filter(function(t){return!isNaN(t)}),s=e.map(function(t){return t.max()}).filter(function(t){return!isNaN(t)});if(r=o.length?Math.min.apply(Math,O(o)):Number.NaN,a=s.length?Math.max.apply(Math,O(s)):Number.NaN,isNaN(r)||isNaN(a))r=-1,a=1;else if(r===a&&0===r)r=-1,a=1;else if(r===a&&r)r-=Math.abs(.1*r),a+=Math.abs(.1*a);else if(!isNaN(t.expand)){var c=a-r;r-=c*t.expand,a+=c*t.expand}if(Array.isArray(t.include)){var l=t.include.filter(function(t){return!isNaN(t)});r=Math.min.apply(Math,O(l).concat([r])),a=Math.max.apply(Math,O(l).concat([a]))}}return{mini:isNaN(n)?r:n,maxi:isNaN(i)?a:i}}(s,n?n.fields:[]),u=l.mini,h=l.maxi;return c.domain([u,h]),c.range(s.invert?[1,0]:[0,1]),a.invert=s.invert,c}var la={padding:0,paddingInner:NaN,paddingOuter:NaN,align:.5,invert:!1,maxPxStep:NaN,range:[0,1]};function ua(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=Ei(),r={data:e,resources:n},a=ia(t,la,r),o=e.items||[],s={},c=[],l=[];function u(t,n){t.data=function(){return e},t.datum=function(t){return o[s[t]]},t.start=function(){return t.domain()[0]},t.end=function(){return t.domain()[t.domain().length-1]},t.labels=function(){return l},t.ticks=function(){var e,i,r,a,o,s,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return c.scale=t,e=c,n.trackBy,i=e.scale,r=i.domain(),a=i.data().items,o=i.labels?i.labels():r,s=i.bandwidth(),r.map(function(t,e){var n=i(t);return{position:n+s/2,label:"".concat(o[e]),data:a?a[e]:void 0,start:n,end:n+s}})}}u(i,t),i.pxScale=function(e){var n=a.maxPxStep;if(isNaN(n))return i;var r=i.domain().length,o=Math.max(1,r-i.paddingInner()+2*i.paddingOuter());if(e<=o*n)return i;var s=i.copy();s.type=i.type,u(s,t);var c=o*n/e,l=(1-c)*i.align();return s.range(a.invert?[c+l,l]:[l,c+l]),s};for(var h="function"==typeof t.value?t.value:function(t){return t.datum.value},f="function"==typeof t.label?t.label:function(t){return t.datum.label},d=0;d<o.length;d++){var p=v({datum:o[d]},r),g=h(p,d);-1===c.indexOf(g)&&(c.push(g),l.push(f(p,d)),s[g]=d)}return i.domain(c),i.range(a.invert?a.range.slice().reverse():a.range),i.padding(isNaN(a.padding)?0:a.padding),isNaN(a.paddingInner)||i.paddingInner(a.paddingInner),isNaN(a.paddingOuter)||i.paddingOuter(a.paddingOuter),i.align(isNaN(a.align)?.5:a.align),i}var ha={depth:0};function fa(t,e,n){return t.ancestors().map(function(t){return e(v({datum:t.data},n))}).reverse().slice(1).toString()}var da=function(t){return t.min()},pa=function(t){return t.max()};function ga(t,e){var n=t&&!isNaN(t.min),i=t&&!isNaN(t.max),r=n?+t.min:0,a=i?+t.max:1;if(e&&e.length){if(!n){var o=e.map(da).filter(P);r=o.length?Math.min.apply(Math,O(o)):r}if(!i){var s=e.map(pa).filter(P);a=s.length?Math.max.apply(Math,O(s)):a}}return[r,a]}var ya={domain:[],range:[],invert:!1,min:NaN,max:NaN};function va(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=ca(t,e,n).clamp(!0).interpolate(Er),r=ia(t,ya,{data:e,resources:n}),a=Array.isArray(r.domain)&&r.domain.length,o=Array.isArray(r.range)&&r.range.length,s=i;v(!0,s,i);var c=z(ga(r,e?e.fields:[]),2),l=c[0],u=c[1],h=a?r.domain.length:-1,f=n.theme?n.theme.palette("sequential",0<h?h:2):[],d=o?r.range:f;return s.range(r.invert?d.slice().reverse():d.slice()),s.domain(a?r.domain:function(t,e,n){var i=t.length;if(2===i)return[e,n];var r=[],a=(n-e)/(i-1);r.push(e);for(var o=1;o<i-1;o++)r.push(e+a*o);return r.push(n),r}(s.range(),l,u)),s}var ma={domain:[],range:[],invert:!1,min:NaN,max:NaN,nice:!1};var xa={domain:[],range:[]};var ba={domain:[],range:[],unknown:void 0},wa={domain:[],range:[],override:!1};var ka=oe();function Ma(t,e,n){var i=t.data;t.source&&(n.logger.warn("Deprecated: Scale data source configuration"),i={extract:[]},(Array.isArray(t.source)?t.source:[t.source]).forEach(function(t){i.extract.push({field:t})}));var r,a,o=ui(i,e,n),s=t.type||((r=o).root?"h-band":r.fields&&r.fields[0]?-1!==r.fields.map(function(t){return"dimension"===t.type()?"band":"linear"}).indexOf("linear")?"linear":"band":"linear");return"color"===s&&(s=o.fields&&o.fields[0]&&"dimension"===o.fields[0].type()?"categorical-color":"sequential-color"),n.scale.has(s)&&((a=(a=n.scale.get(s))(t,o,{theme:n.theme,logger:n.logger})).type=s),a}ka("linear",ca),ka("band",ua),ka("h-band",function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r={data:n,resources:i},a=ia(e,la,r);a.ticks=ia(e.ticks,ha,r),a.value="function"==typeof e.value?e.value:function(t){return t.datum.value},a.label="function"==typeof e.label?e.label:function(t){return t.datum.value};var o=ua(a),s=function(t,e,n){var i=e.ticks.depth,r=e.value,a=e.label,o=[],s=[],c={},l=[],u=0;if(!t)return{values:o,labels:s,items:c,ticks:l};t.eachAfter(function(t){if(0<t.depth){var e=fa(t,r,n),h=t.leaves()||[t],f=r(v({datum:t.data},n)),d=a(v({datum:t.data},n)),p=Array.isArray(t.children),g={key:e,count:h.length,value:f,label:d,leftEdge:fa(h[0],r,n),rightEdge:fa(h[Math.max(h.length-1,0)],r,n),node:t};p?(o.push("SPACER_".concat(u,"_SPACER")),u++):(o.push(e),s.push(d)),(i<=0&&!p||t.depth===i)&&l.push(g),c[e]=g}});var h=t.height-1;return 0<h&&o.splice(-h),{values:o,labels:s,items:c,ticks:l}}(n.root,a,r),c=s.values,l=s.labels,u=s.items,h=s.ticks,f=function(t){var e=String(t),n=u[e];return o(n?a.invert?n.rightEdge:n.leftEdge:e)};v(!0,f,o),f.bandwidth=function(t){var e=u[String(t)],n=o.bandwidth();if(!e||e.isLeaf)return n;var i=f(e.leftEdge),r=f(e.rightEdge);return Math.abs(i-r)+n},f.step=function(t){var e=u[String(t)],n=e?e.count:1,i=o.step();return i*n},f.data=function(){return n},f.datum=function(t){var e=u[String(t)];return e?e.node.data:null},f.copy=function(){return t(e,n,i)},f.labels=function(){return l},f.ticks=function(){return h.map(function(t){var e=f(t.key),n=f.bandwidth(t.key);return{position:e+n/2,label:t.label,data:t.node.data,start:e,end:e+n}})};var d=o.pxScale;return f.pxScale=function(t){return o=d(t),f},f.domain(c),f}),ka("sequential-color",va),ka("threshold-color",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=function t(){var e,n=[.5],i=[0,1],r=1;function a(t){return t<=t?i[gi(n,t,0,r)]:e}return a.domain=function(t){return arguments.length?(n=Ni.call(t),r=Math.min(n.length,i.length-1),a):n.slice()},a.range=function(t){return arguments.length?(i=Ni.call(t),r=Math.min(n.length,i.length-1),a):i.slice()},a.invertExtent=function(t){var e=i.indexOf(t);return[n[e-1],n[e]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(i).unknown(e)},bi.apply(a,arguments)}(),r=ia(t,ma,{data:e,resources:n}),a=Array.isArray(r.domain)&&r.domain.length,o=Array.isArray(r.range)&&r.range.length;function s(t){return I(t)?NaN:i(t)}Object.keys(i).forEach(function(t){return s[t]=i[t]});var c=z(ga(r,e.fields),2),l=c[0],u=c[1],h=a?r.domain.length:-1,f=n.theme?n.theme.palette("sequential",0<h?h:2):[],d=o?r.range:f,p=[];return p=a?r.domain:r.nice?function(t,e,n){var i=2===t.length?10:Math.max(1,t.length),r=Xr().domain([e,n]).nice(i).ticks(i);if(!t||!t.length)return r;for(var a=Math.max(0,t.length-1);r.length>a;)r[0]-e<=n-r[r.length-1]?r.shift():r.pop();return r}(d,l,u):[l+(u-l)/2],d.length>p.length+1?p=function(t,e,n){var i=t.length;if(2===i)return[e+(n-e)/2];for(var r=[],a=(n-e)/i,o=1;o<i;o++)r.push(e+a*o);return r}(d,l,u):d.length<p.length+1&&(d=function(t,e,n,i){n=t[0],i=t&&2<=t.length?t[t.length-1]:i;var r=va().domain([n,i]).range(e);return[n].concat(O(function(t){for(var e=[],n=0;n<t.length-1;n++)e.push((t[n]+t[n+1])/2);return e}(t)),[i]).map(function(t){return r(t)})}(p,d,l,u)),s.data=function(){return e},s.range(r.invert?d.slice().reverse():d),s.domain(p),s}),ka("categorical-color",function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=Ti(),r={data:e,resources:n},a=ia(t,xa,r),o="function"==typeof t.value?t.value:function(t){return t.datum.value},s="function"==typeof t.label?t.label:function(t){return t.datum.label},c=e.items||[],l={},u=[],h=[],f=0;f<c.length;f++){var d=v({datum:c[f]},r),p=o(d,f);-1===u.indexOf(p)&&(u.push(p),h.push(s(d,f)),l[p]=f)}return i.data=function(){return e},i.labels=function(){return h},i.label=function(t){return h[u.indexOf(t)]},i.datum=function(t){return c[l[t]]},i.range(a.range),Array.isArray(a.domain)&&a.domain.length?i.domain(a.domain):i.domain(u),i}(e,n,i),a=i.theme,o=ia(e,ba,{data:n,resources:i});if(o.explicit=ia(e.explicit,wa,{data:n,resources:i}),t=Array.isArray(o.range)&&0!==o.range.length?o.range.slice():a?a.palette("categorical",r.domain().length).slice():[],o.unknown)r.unknown(o.unknown);else if(a&&a.palette("unknown")){var s=a.palette("unknown");r.unknown(s[0])}if(Array.isArray(o.explicit.domain)&&o.explicit.domain.length){for(var c=r.domain().slice(),l=o.explicit.domain,u=Array.isArray(o.explicit.range)?o.explicit.range:[],h=Math.floor(c.length/t.length),f=1;f<h+1;f*=2)t=t.concat(t);if(o.explicit.override)for(var d=0;d<l.length;d++){var p=c.indexOf(l[d]);-1<p&&(t[p]=u[d])}else l.map(function(t,e){return[c.indexOf(t),t,u[e]]}).sort(function(t,e){return t[0]-e[0]}).forEach(function(e){var n=c.indexOf(e[1]);-1!==n&&t.splice(n,0,e[2])});t.length=c.length}return r.range(t),r});var _a={};function Sa(){Sa.init.call(this)}_a.isObject=function(t){return"object"==typeof t&&null!==t},_a.isNumber=function(t){return"number"==typeof t},_a.isUndefined=function(t){return void 0===t},_a.isFunction=function(t){return"function"==typeof t};var Ra=Sa;(Sa.EventEmitter=Sa).prototype._events=void 0,Sa.prototype._maxListeners=void 0,Sa.defaultMaxListeners=10,Sa.init=function(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0},Sa.prototype.setMaxListeners=function(t){if(!_a.isNumber(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},Sa.prototype.emit=function(t){var e,n,i,r,a,o;if(this._events||(this._events={}),"error"===t&&!this._events.error)throw(e=arguments[1])instanceof Error?e:Error('Uncaught, unspecified "error" event.');if(n=this._events[t],_a.isUndefined(n))return!1;if(_a.isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];n.apply(this,r)}else if(_a.isObject(n)){for(i=arguments.length,r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];for(i=(o=n.slice()).length,a=0;a<i;a++)o[a].apply(this,r)}return!0},Sa.prototype.on=Sa.prototype.addListener=function(t,e){var n;if(!_a.isFunction(e))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,_a.isFunction(e.listener)?e.listener:e),this._events[t]?_a.isObject(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,_a.isObject(this._events[t])&&!this._events[t].warned)&&(n=_a.isUndefined(this._maxListeners)?Sa.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[t].length>n&&(this._events[t].warned=!0,_a.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),_a.isFunction(console.trace)&&console.trace());return this},Sa.prototype.once=function(t,e){if(!_a.isFunction(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},Sa.prototype.removeListener=function(t,e){var n,i,r,a;if(!_a.isFunction(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(n=this._events[t]).length,i=-1,n===e||_a.isFunction(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(_a.isObject(n)){for(a=r;0<a--;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},Sa.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],_a.isFunction(n))this.removeListener(t,n);else if(Array.isArray(n))for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},Sa.prototype.listeners=function(t){return this._events&&this._events[t]?_a.isFunction(this._events[t])?[this._events[t]]:this._events[t].slice():[]},Sa.listenerCount=function(t,e){return t._events&&t._events[e]?_a.isFunction(t._events[e])?1:t._events[e].length:0};var Ca={mixin:function(t){return Object.keys(Ra.prototype).forEach(function(e){t[e]=Ra.prototype[e]}),Ra.init(t),t}};function Na(){var t=0,e=0,n=0,i=0;n=n||t;var r={move:function(t){this.moveTo(n+t)},moveTo:function(a){var o=Math.max(t,Math.min(e-i,a));n!==o&&(n=o,r.emit("update"))},update:function(a){var o=!1,s=a.min;t=void 0===s?t:s;var c=a.max;e=void 0===c?e:c,void 0!==a.viewSize&&a.viewSize!==i&&(i=a.viewSize,o=!0);var l=Math.max(t,Math.min(e-i,n));n!==l&&(n=l,o=!0),o&&r.emit("update")},getState:function(){return{min:t,max:e,start:n,viewSize:i}}};return Ca.mixin(r),r}function Aa(t,e){return t<=e}function Ta(t,e){return t<e}function Ea(t,e,n){for(var i=0;i<t.length&&e>t[i];)++i;return t[i]===e&&n&&++i,i}function za(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=[];function r(){}return r.configure=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=n.includeMax,r=void 0===i||i,a=n.includeMin;t=r?Aa:Ta,e=void 0===a||a?Aa:Ta},r.add=function(t){var e,n=t.min,r=t.max,a=Ea(i,n),o=Ea(i,r,!0),s=[a,o-a];a%2==0&&s.push(n),o%2==0&&s.push(r);var c=i.join(",");return(e=i).splice.apply(e,s),c!==i.join(",")},r.remove=function(t){var e,n=t.min,r=t.max,a=Ea(i,n),o=Ea(i,r,!0),s=[a,o-a];a%2==1&&s.push(n),o%2==1&&s.push(r);var c=i.join(",");return(e=i).splice.apply(e,s),c!==i.join(",")},r.set=function(t){var e=i.join(",");return i=[],Array.isArray(t)?t.forEach(r.add):r.add(t),e!==i.join(",")},r.clear=function(){var t=0<i.length;return i=[],t},r.containsValue=function(n){return function(t,e,n,i){for(var r=t.length,a=1;a<r;a+=2)if(n(t[a-1],e)&&i(e,t[a]))return!0;return!1}(i,n,e,t)},r.containsRange=function(t){var e=t.min,n=t.max,r=Ea(i,e,!0),a=Ea(i,n);return r===a&&a%2==1},r.toggle=function(t){return r.containsRange(t)?r.remove(t):r.add(t)},r.ranges=function(){for(var t=[],e=1;e<i.length;e+=2)t.push({min:i[e-1],max:i[e]});return t},r.configure(n),r}function Oa(){var t=[];function e(){}return e.add=function(e){return-1===t.indexOf(e)&&(t.push(e),!0)},e.remove=function(e){var n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)},e.contains=function(e){return-1!==t.indexOf(e)},e.values=function(){return t.slice()},e.clear=function(){return t=[]},e.toString=function(){return t.join(";")},e}var ja={key:void 0,includeMin:!0,includeMax:!0};function Da(t){for(var e,n,i=t.items,r=t.collection,a=t.vc,o={},s=[],c=0,l=i.length;c<l;c++){r[e=i[c].key]||(r[e]=a()),n=i[c].values||[i[c].value];for(var u=0;u<n.length;u++)r[e].add(n[u])&&(o[e]=o[e]||[],o[e].push(n[u]))}for(var h=Object.keys(o),f=0,d=h.length;f<d;f++)e=h[f],s.push({id:e,values:o[e]});return s}function qa(t){for(var e,n,i=t.items,r=t.collection,a={},o=[],s=0,c=i.length;s<c;s++)if(r[e=i[s].key]){n=i[s].values||[i[s].value];for(var l=0;l<n.length;l++)r[e].remove(n[l])&&(a[e]=a[e]||[],a[e].push(n[l]))}for(var u=Object.keys(a),h=0,f=u.length;h<f;h++)e=u[h],o.push({id:e,values:a[e]});return o}function Pa(t){for(var e,n,i={},r=0,a=t.length;r<a;r++){e=t[r].key,n=t[r].values||[t[r].value],i[e]||(i[e]=[]);for(var o=0;o<n.length;o++)-1===i[e].indexOf(n[o])&&i[e].push(n[o])}return i}function Ia(t){var e=t.key,n=t.collection,i=t.obj,r=t.fn,a=t.value;n[e]||(n[e]=r()),i[e]=i[e]||[],i[e].push(a),n[e].add(a)}function Fa(t,e){for(var n,i,r=[],a=Object.keys(t),o=function(t){return-1===e[n].indexOf(t)},s=0,c=a.length;s<c;s++)n=a[s],e[n]?(i=t[n].filter(o)).length&&r.push({id:n,values:i}):r.push({id:n,values:t[n]});return r}function Ba(t,e,n){var i=function(t,e){if(!Object.keys(e).length)return t;for(var n=t.length,i=Array(n),r=0;r<n;r++)i[r]=t[r].key in e?v({},t[r],{key:e[t[r].key]}):t[r];return i}(e,n);return t&&t.length?t.reduce(function(t,e){return e(t)},i):i}function La(t){return t.replace(/(-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function Wa(t,e,n){var i=n.ranges,r=n.interceptors,a=n.rc,o=n.aliases,s=n.rangeConfig,c=Ba(r["".concat(e,"Ranges")],t,o),l=!1;return c.forEach(function(t){var n=t.key;if(i[n]||(i[n]=a(s.sources[n]||s.default)),"set"===e)l=i[n][e](t.ranges||t.range)||l;else for(var r=t.ranges||[t.range],o=0;o<r.length;o++)l=i[n][e](r[o])||l}),l}function Va(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.vc,n=void 0===e?Oa:e,i=t.rc,r=void 0===i?za:i,a=!1,o={},s={},c={},l={sources:{},default:v({},ja)},u={addValues:[],removeValues:[],toggleValues:[],setValues:[],addRanges:[],setRanges:[],removeRanges:[],toggleRanges:[]},h=function(){var t={values:{},ranges:{}};return Object.keys(s).forEach(function(e){t.values[e]=s[e].values()}),Object.keys(o).forEach(function(e){t.ranges[e]=o[e].ranges()}),t},f={ls:[],clear:function(){this.ls.forEach(function(t){return t.clear()})},start:function(){this.ls.forEach(function(t){return t.start()})},end:function(){this.ls.forEach(function(t){return t.end()})},update:function(){var t=h();this.ls.forEach(function(e){return e._state(t)})},updateValues:function(){var t=h();this.ls.forEach(function(e){return e._state({values:t.values})})},updateRanges:function(){var t=h();this.ls.forEach(function(e){return e._state({ranges:t.ranges})})}},d={configure:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(t.ranges)&&t.ranges.length&&(l={sources:{},default:v({},ja)},t.ranges.forEach(function(t){var e={};Object.keys(ja).filter(function(t){return"key"!==t}).forEach(function(n){e[n]=void 0!==t[n]?t[n]:ja[n]}),void 0!==t.key?l.sources[t.key]=e:l.default=e}),Object.keys(o).forEach(function(t){return o[t].configure(l.sources[t]||l.default)}),d.emit("update",[],[]))},link:function(t){if(d===t)throw new Error("Can't link to self");f.ls.push(t),t._state(h())},_state:function(t){if(!t)return h();if(t.values){var e=[];Object.keys(t.values).forEach(function(n){s[n]&&t.values[n].join(";")===s[n].toString()||e.push({key:n,values:t.values[n]})}),Object.keys(s).forEach(function(n){t.values[n]||e.push({key:n,values:[]})}),e.length&&d.setValues(e)}if(t.ranges){var n=[];Object.keys(t.ranges).forEach(function(e){o[e]&&t.ranges[e].join(";")===o[e].toString()||n.push({key:e,ranges:t.ranges[e]})}),Object.keys(o).forEach(function(e){t.ranges[e]||n.push({key:e,ranges:[]})}),n.length&&d.setRanges(n)}},start:function(){a||(a=!0,d.emit("start"),f.start())},end:function(){a&&(a=!1,o={},s={},d.emit("end"),f.end())},isActive:function(){return a},clear:function(){var t=d.brushes().filter(function(t){return"value"===t.type&&t.brush.values().length}).map(function(t){return{id:t.id,values:t.brush.values()}}),e=0<Object.keys(o).length||t.length;o={},s={},e&&(d.emit("update",[],t),f.clear())},brushes:function(){var t=[];return(t=t.concat(Object.keys(o).map(function(t){return{type:"range",id:t,brush:o[t]}}))).concat(Object.keys(s).map(function(t){return{type:"value",id:t,brush:s[t]}}))},addValue:function(t,e){d.addValues([{key:t,value:e}])},addValues:function(t){var e=Ba(u.addValues,t,c),i=Da({vc:n,collection:s,items:e});d.emit("add-values",e),i.length&&(a||(a=!0,d.emit("start")),d.emit("update",i,[]),f.updateValues())}};return d.setValues=function(t){var e=Ba(u.setValues,t,c),i=function(t){for(var e,n,i=t.items,r=t.vCollection,a=t.vc,o={},s=Pa(i),c={},l=Object.keys(r),u=0,h=l.length;u<h;u++)c[n=l[u]]=r[n].values().slice(),delete r[n];for(var f=function(t){r[n]&&r[n].contains(t)||Ia({key:n,value:t,collection:r,obj:o,fn:a})},d=Object.keys(s),p=0,g=d.length;p<g;p++)s[n=d[p]].forEach(f);return e=Fa(c,o),[Fa(o,c),e]}({items:e,vCollection:s,vc:n});d.emit("set-values",e),(0<i[0].length||0<i[1].length)&&(a||(a=!0,d.emit("start")),d.emit("update",i[0],i[1]),f.updateValues())},d.removeValue=function(t,e){d.removeValues([{key:t,value:e}])},d.removeValues=function(t){var e=Ba(u.removeValues,t,c),n=qa({collection:s,items:e});d.emit("remove-values",e),n.length&&(d.emit("update",[],n),f.updateValues())},d.addAndRemoveValues=function(t,e){var i=Ba(u.addValues,t,c),r=Ba(u.removeValues,e,c),o=Da({vc:n,collection:s,items:i}),l=qa({collection:s,items:r});d.emit("add-values",i),d.emit("remove-values",r),(o.length||l.length)&&(a||(a=!0,d.emit("start")),d.emit("update",o,l),f.updateValues())},d.toggleValue=function(t,e){d.toggleValues([{key:t,value:e}])},d.toggleValues=function(t){var e=Ba(u.toggleValues,t,c),i=function(t){for(var e,n,i,r=t.items,a=t.values,o=t.vc,s={},c={},l=[],u=[],h=Pa(r),f=Object.keys(h),d=0,p=f.length;d<p;d++)for(var g=0,y=(i=h[e=f[d]]).length;g<y;g++)n=i[g],a[e]&&a[e].contains(n)?a[e]&&a[e].contains(n)&&(c[e]=c[e]||[],c[e].push(n),a[e].remove(n)):Ia({key:e,value:n,collection:a,obj:s,fn:o});for(var v=Object.keys(s),m=0,x=v.length;m<x;m++)e=v[m],l.push({id:e,values:s[e]});for(var b=Object.keys(c),w=0,k=b.length;w<k;w++)e=b[w],u.push({id:e,values:c[e]});return[l,u]}({items:e,values:s,vc:n});d.emit("toggle-values",e),(0<i[0].length||0<i[1].length)&&(a||(a=!0,d.emit("start")),d.emit("update",i[0],i[1]),f.updateValues())},d.containsValue=function(t,e){var n=c[t]||t;return!!s[n]&&s[n].contains(e)},d.addRange=function(t,e){d.addRanges([{key:t,range:e}])},d.addRanges=function(t){Wa(t,"add",{ranges:o,rc:r,interceptors:u,aliases:c,rangeConfig:l})&&(a||(a=!0,d.emit("start")),d.emit("update",[],[]),f.updateRanges())},d.removeRange=function(t,e){d.removeRanges([{key:t,range:e}])},d.removeRanges=function(t){Wa(t,"remove",{ranges:o,rc:r,interceptors:u,aliases:c,rangeConfig:l})&&(a||(a=!0,d.emit("start")),d.emit("update",[],[]),f.updateRanges())},d.setRange=function(t,e){d.setRanges([{key:t,range:e}])},d.setRanges=function(t){Wa(t,"set",{ranges:o,rc:r,interceptors:u,aliases:c,rangeConfig:l})&&(a||(a=!0,d.emit("start")),d.emit("update",[],[]),f.updateRanges())},d.toggleRange=function(t,e){d.toggleRanges([{key:t,range:e}])},d.toggleRanges=function(t){Wa(t,"toggle",{ranges:o,rc:r,interceptors:u,aliases:c,rangeConfig:l})&&(a||(a=!0,d.emit("start")),d.emit("update",[],[]),f.updateRanges())},d.containsRangeValue=function(t,e){var n=c[t]||t;return!!o[n]&&o[n].containsValue(e)},d.containsRange=function(t,e){var n=c[t]||t;return!!o[n]&&o[n].containsRange(e)},d.containsMappedData=function(t,e,n){for(var i,r,a,l,u=[],h=Object.keys(t),f=0,d=h.length;f<d;f++){if("value"===(i=h[f]))r=t,u[f]={key:"",i:f,bool:!1};else{if("source"===i)continue;r=t[i],u[f]={key:i,i:f,bool:!1}}void 0!==(a=r.source&&r.source.field)&&(void 0!==r.source.key&&(a="".concat(r.source.key,"/").concat(a)),a in c&&(a=c[a]),l=r.value,o[a]?u[f].bool=Array.isArray(l)?o[a].containsRange({min:l[0],max:l[1]}):o[a].containsValue(l):s[a]&&s[a].contains(l)&&(u[f].bool=!0))}return e?(u=u.filter(function(t){return-1!==e.indexOf(t.key)}),"and"===n?!!u.length&&!u.some(function(t){return!1===t.bool}):"xor"===n?!!u.length&&u.some(function(t){return t.bool})&&u.some(function(t){return!1===t.bool}):u.some(function(t){return t.bool})):u.some(function(t){return t.bool})},d.intercept=function(t,e){var n=La(t);u[n]&&u[n].push(e)},d.removeInterceptor=function(t,e){var n=La(t);if(u[n]){var i=u[n].indexOf(e);-1!==i&&u[n].splice(i,1)}},d.removeAllInterceptors=function(t){var e=[];if(t){var n=La(t);u[n]&&u[n].length&&e.push({name:t,handlers:u[n]})}else Object.keys(u).forEach(function(t){var n;u[t].length&&e.push({name:(n=t,n.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})),handlers:u[t]})});e.forEach(function(t){t.handlers.slice().forEach(function(e){return d.removeInterceptor(t.name,e)})})},d.addKeyAlias=function(t,e){c[t]=e},d.removeKeyAlias=function(t){delete c[t]},Ca.mixin(d),d}oe();function Ha(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Math.PI;var Ua=2*Math.PI,$a=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Ua);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*Ua)},r.period=function(n){return t(e,n)},r}(1,.3);function Ya(t,e){return t.data?t.data.value:"text"===t.type?t.text:e}var Xa={fontFamily:"Arial",fontSize:"13px",color:"#595959",backgroundColor:"#ffffff",stroke:"#000000",strokeWidth:0,$fill:"#333333"},Ja=/^\$/;function Ka(t){var e=x(t);return"object"!==e&&"function"!==e&&"undefined"!==e}function Ga(t,e,n){var i=t[e];i&&i.scale&&i.scale.pxScale?i.scale=i.scale.pxScale(n):i&&i.pxScale&&(t[e]=i.pxScale(n))}function Za(t,e){return t.pxScale?t.pxScale(e):t}var Qa={normalizeSettings:function(t,e,n){var i=v({},t),r=v({},e);return Object.keys(i).forEach(function(t){r[t]={};var a=i[t],o=x(a);if("function"==typeof a)r[t].fn=a;else if(Ka(a)){var s=e[t];"string"==typeof s&&Ja.test(s)&&(s=Xa[s]);var c=x(s);r[t]="undefined"===c?a:c===o?a:s}else a&&"object"===x(a)&&("function"==typeof a.fn&&(r[t].fn=a.fn),void 0!==a.scale&&(r[t].scale=n.scale(a.scale)),"string"==typeof a.ref&&(r[t].ref=a.ref))}),Object.keys(e).forEach(function(t){if(!(t in i)){var n=e[t];"string"===x(n)&&Ja.test(n)?r[t]=Xa[n]:r[t]=n}}),r},resolveForItem:function(t,e,n){for(var i={},r=Object.keys(e),a=r.length,o=t.datum,s=t.datum,c=0;c<a;c++){var l=r[c],u=e[l],h="object"===x(s)&&void 0!==u,f=h&&"string"==typeof u.ref,d=h&&l in s,p=f?s[u.ref]:d?s[l]:o;Ka(u)?i[l]=u:h&&u.fn?(u.scale&&(t.scale=u.scale),i[l]=u.fn.call(null,t,n)):h&&u.scale&&p?(i[l]=u.scale(p.value),u.scale.bandwidth&&(i[l]+=u.scale.bandwidth()/2)):f&&p?i[l]=p.value:u.fn?i[l]=u.fn.call(null,t,n):i[l]=u}return i},updateScaleSize:Ga};function to(t,e){var n=e.context,i=e.data,r=e.style,a=e.filter,o=e.mode,s=t.chart.brush(n),c=i,l=r.active||{},u=r.inactive||{},h=[];Object.keys(l).forEach(function(t){h.push(t)}),Object.keys(u).forEach(function(t){-1===h.indexOf(t)&&h.push(t)});var f=[],d=!1,p=function(){var e=function t(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,n){return Array.isArray(n.children)?e.push.apply(e,O(t(n.children))):e.push(n),e},[])}(t.nodes);return"function"==typeof a&&(e=e.filter(a)),e},g=function(){for(var t,e=p(),n=e.length,i=!1,r=function(n){if(!(t=e[n].data))return"continue";e[n].__style||(e[n].__style={},h.forEach(function(t){e[n].__style[t]=e[n][t]}));var r=s.containsMappedData(t,c,o),a=f.indexOf(e[n]),p=!1;if(r&&-1===a?(f.push(e[n]),p=!0):r||-1===a||(f.splice(a,1),p=!0),p||d){var g=v({},e[n],e[n].__style);h.forEach(function(t){e[n][t]=r&&t in l?"function"==typeof l[t]?l[t].call(null,g):l[t]:!r&&t in u?"function"==typeof u[t]?u[t].call(null,g):u[t]:e[n].__style[t]}),i=!0}},a=0;a<n;a++)r(a);return d=!1,i},y=function(){for(var e=p(),n=e.length,i=function(t){if(!e[t].data)return"continue";e[t].__style=e[t].__style||{},h.forEach(function(n){e[t].__style[n]=e[t][n],n in u&&(e[t][n]="function"==typeof u[n]?u[n].call(null,e[t]):u[n])})},r=0;r<n;r++)i(r);d=!0,f.length=0,t.renderer.render(t.nodes)},m=function(){for(var e=p(),n=e.length,i=function(t){e[t].__style&&(Object.keys(e[t].__style).forEach(function(n){e[t][n]=e[t].__style[n]}),e[t].__style=void 0)},r=0;r<n;r++)i(r);f.length=0,t.renderer.render(t.nodes)},x=function(){g()&&t.renderer.render(t.nodes)};return s.on("start",y),s.on("end",m),s.on("update",x),{isActive:function(){return s.isActive()},update:function(){f.length=0,d=!0,g()},cleanUp:function(){s.removeListener("start",y),s.removeListener("end",m),s.removeListener("update",x)}}}function eo(t){for(var e=t.nodes,n=t.action,i=t.chart,r=t.trigger,a=[],o=0;o<e.length;o++){var s=e[o].data;null!==s&&a.push(s)}!function(t){var e=t.dataPoints,n=t.action,i=t.chart,r=t.trigger;if(r){var a=r.data||[""],o={items:[],actionFn:"toggleRanges"},s={items:[],actionFn:"toggleValues"};-1!==["add","remove","set","toggle"].indexOf(n)&&(o.actionFn="".concat(n,"Ranges"),s.actionFn="".concat(n,"Values"));for(var c=function(t){var n=e[t];if(!n)return"continue";a.forEach(function(t){var e=n&&!t?n:n[t];if(e){var i={key:e.source.field};void 0!==e.source.key&&(i.key="".concat(e.source.key,"/").concat(e.source.field)),Array.isArray(e.value)?(i.range={min:e.value[0],max:e.value[1]},o.items.push(i)):(i.value=e.value,s.items.push(i))}})},l=0;l<e.length;l++)c(l);r.contexts.forEach(function(t){o.items.length?i.brush(t)[o.actionFn](o.items):i.brush(t)[s.actionFn](s.items)})}}({dataPoints:a,action:n,chart:i,trigger:r})}function no(t){var e=t.collisions,n=t.t,i=t.config,r=t.action,a=[],o=!1;return 0<e.length&&(a=e,o=!0,"stop"===n.propagation&&(a=[e[e.length-1]])),eo({nodes:a.map(function(t){return t.node}),action:r,chart:i.chart,data:i.data,trigger:n}),o}function io(t,e,n){var i,r,a,o,s=n.element().getBoundingClientRect(),c=it(t)?(o=s,1!==(a=t).changedTouches.length?null:{x:a.changedTouches[0].clientX-o.left,y:a.changedTouches[0].clientY-o.top}):(r=s,{x:(i=t).clientX-r.left,y:i.clientY-r.top});return null===c||c.x<0||c.y<0||c.x>s.width||c.y>s.height?[]:(0<e.touchRadius&&it(t)&&(c={cx:c.x,cy:c.y,r:e.touchRadius}),n.itemsAt(c))}function ro(t,e,n){return t?"function"==typeof t?t(e):t:n}var ao={fill:"fill",stroke:"stroke",opacity:"opacity",strokeWidth:"stroke-width",strokeLinejoin:"stroke-linejoin",fontFamily:"font-family",fontSize:"font-size",baseline:"dominant-baseline",dominantBaseline:"dominant-baseline",anchor:"text-anchor",textAnchor:"text-anchor",maxWidth:"maxWidth",transform:"transform",strokeDasharray:"stroke-dasharray",id:"id"};function oo(t){for(var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",i=0;i<t.length;i++){var r=t[i];n+=0===i?"M".concat(r.x," ").concat(r.y):"L".concat(r.x," ").concat(r.y),n+=" "}return e&&(n+="Z"),n}function so(t,e,n,i){var r=n/2,a=t-i/2,o=e-i/2,s=t-r,c=e-r;return[{x:a,y:o},{x:a,y:c},{x:a+i,y:c},{x:a+i,y:o},{x:s+n,y:o},{x:s+n,y:o+i},{x:a+i,y:o+i},{x:a+i,y:c+n},{x:a,y:c+n},{x:a,y:o+i},{x:s,y:o+i},{x:s,y:o}]}function co(t){return-t/180*Math.PI}function lo(t){return e=co(t),n=(.5*(Math.floor(e/Math.PI*2)+2)+.25)*Math.PI,i=Math.cos(Math.abs(n-e))*Math.sqrt(2),r=i*Math.cos(e),a=i*Math.sin(e),{x1:r<0?1:0,y1:a<0?1:0,x2:0<=r?r:r+1,y2:0<=a?a:a+1};var e,n,i,r,a}function uo(t,e){return{x:t.x+e.x,y:t.y+e.y}}function ho(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fo(t,e){return{x:t.x*e,y:t.y*e}}function po(t,e){return t.x-e.x}function go(t,e){return t.y-e.y}function yo(t,e){return Math.pow(po(t,e),2)+Math.pow(go(t,e),2)}function vo(t,e){return Math.sqrt(yo(t,e))}function mo(t,e){return t.x*e.x+t.y*e.y}function xo(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},i=Math.cos(e),r=Math.sin(e),a=ho(t,n);return uo({x:i*a.x-r*a.y,y:r*a.x+i*a.y},n)}var bo={up:0,down:180,left:90,right:-90};var wo=oe();function ko(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=wo.get(t.type);if(e){var n=e(t);return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach(function(n){void 0!==ao[n]&&"transform"!==n&&(t[n]=e[n])})}(n,t),void 0!==t.data&&(n.data=t.data),n}return e}wo.add("circle",function(t){return{type:"circle",fill:"black",cx:t.x,cy:t.y,r:t.size/2}}),wo.add("diamond",function(t){var e=t.size,n=t.x-e/2,i=t.y-e/2;return{type:"path",fill:"black",d:oo([{x:n,y:i+e/2},{x:n+e/2,y:i},{x:n+e,y:i+e/2},{x:n+e/2,y:i+e},{x:n,y:i+e/2}])}}),wo.add("saltire",function(t){var e=co(45),n=t.size/2,i=isNaN(t.width)?n/2:t.width,r=Math.min(i,n),a=t.size,o=Math.sin(Math.asin(-e))*(r/2);a+=2*(n/Math.sin(-e)-n),a-=2*o;var s={x:t.x,y:t.y};return{type:"path",fill:"black",d:oo(so(t.x,t.y,a,r).map(function(t){return xo(t,e,s)}))}}),wo.add("square",function(t){var e=t.size;return{type:"rect",fill:"black",x:t.x-e/2,y:t.y-e/2,width:e,height:e}}),wo.add("triangle",function(t){var e=t.size,n={x:t.x,y:t.y},i=bo[t.direction]||0,r=e/2,a=t.x-r,o=t.y-r,s=[{x:a,y:o+e},{x:a+r,y:o},{x:a+e,y:o+e},{x:a,y:o+e}],c=co(i);return{type:"path",fill:"black",d:oo(s=s.map(function(t){return xo(t,c,n)}))}}),wo.add("line",function(t){var e,n,i,r,a,o="vertical"===t.direction,s=t.size/2,c=t.x,l=t.y;return{type:"line",stroke:"black",strokeWidth:1,x1:c-(o?0:s),y1:l-(o?s:0),x2:c+(o?0:s),y2:l+(o?s:0),collider:(e=t,n=e.x,i=e.y,r=e.size,a=r/2,{type:"rect",x:n-a,y:i-a,width:r,height:r})}}),wo.add("star",function(t){for(var e=t.size,n=[],i=e/2,r=t.points||5,a=Math.min(t.innerRadius||e/2,e)/2,o=isNaN(t.startAngle)?90:t.startAngle,s=360/r,c=1;c<=r;c++){var l=s*c+o,u=co(l),h=co(l+s/2),f=Math.sin(u),d=Math.cos(u),p=Math.sin(h),g=Math.cos(h);n.push({x:t.x+d*i,y:t.y+f*i}),n.push({x:t.x+g*a,y:t.y+p*a})}return{type:"path",fill:"black",d:oo(n)}}),wo.add("n-polygon",function(t){for(var e=[],n=t.size/2,i=Math.max(isNaN(t.sides)?6:t.sides,3),r=360/i,a=isNaN(t.startAngle)?0:t.startAngle,o=1;o<=i;o++){var s=co(r*o+a),c=Math.sin(s),l=Math.cos(s);e.push({x:t.x+l*n,y:t.y+c*n})}return{type:"path",fill:"black",d:oo(e)}}),wo.add("cross",function(t){var e=t.x,n=t.y,i=t.size/2,r=isNaN(t.width)?i/2:t.width,a=Math.min(r,i);return{type:"path",fill:"black",d:oo(so(e,n,t.size,a))}}),wo.add("bar",function(t){var e={x:t.x,y:t.y},n="vertical"===t.direction,i=t.size/2,r=i/2/2,a=[{x:e.x-i,y:e.y+r},{x:e.x-i,y:e.y-r},{x:e.x+i,y:e.y-r},{x:e.x+i,y:e.y+r}];if(n){var o=co(90);a=a.map(function(t){return xo(t,o,e)})}var s=W(a);return s.type="rect",s.fill="black",s});var Mo=function(t){return["on","preferredSize","created","beforeMount","mounted","resize","beforeUpdate","updated","beforeRender","render","beforeUnmount","beforeDestroy","destroyed","defaultSettings","data","settings","formatter","scale","chart","dockConfig","mediator","style","resolver","registries","_DO_NOT_USE_getInfo","symbol","isVisible"].some(function(e){return e===t})};function _o(t,e,n){var i=e.require,r=void 0===i?[]:i,a=e.mediator||{},o=n.settings,s=n.formatter,c=n.scale,l=n.data,u=n.renderer,h=n.chart,f=n.dockConfig,d=n.mediator,p=n.instance,g=n.rect,y=n.style,v=n.registries,m=n.resolver,x=n.update,b=n._DO_NOT_USE_getInfo,w=n.symbol,k=n.isVisible;t.emit=function(){},k&&(t.isVisible=k),Object.defineProperty(t,"settings",{get:o}),Object.defineProperty(t,"data",{get:l}),Object.defineProperty(t,"formatter",{get:s}),Object.defineProperty(t,"scale",{get:c}),Object.defineProperty(t,"mediator",{get:d}),Object.defineProperty(t,"style",{get:y}),Object.defineProperty(t,"registries",{get:v}),g&&Object.defineProperty(t,"rect",{get:g}),b&&(t._DO_NOT_USE_getInfo=b),Object.keys(e).forEach(function(n){Mo(n)||("function"==typeof e[n]?t[n]=e[n].bind(t):t[n]=e[n])}),r.forEach(function(e){"renderer"===e?Object.defineProperty(t,"renderer",{get:u}):"chart"===e?Object.defineProperty(t,"chart",{get:h}):"dockConfig"===e?Object.defineProperty(t,"dockConfig",{get:f}):"instance"===e?Object.defineProperty(t,"instance",{get:p}):"update"===e&&x?Object.defineProperty(t,"update",{get:x}):"resolver"===e?Object.defineProperty(t,"resolver",{get:m}):"symbol"===e&&Object.defineProperty(t,"symbol",{get:w})}),Object.keys(a).forEach(function(e){t.mediator.on(e,a[e].bind(t))})}function So(t,e,n){var i=function(e){return t[e]?(n.warn("Deprecation Warning the ".concat(e," property should be moved into layout: {} property")),t[e]):t.layout?t.layout[e]:void 0},r={};return r.displayOrder=i("displayOrder"),r.dock=i("dock"),r.prioOrder=i("prioOrder"),r.minimumLayoutMode=i("minimumLayoutMode"),t.layout=t.layout||{},t.layout.displayOrder=void 0!==r.displayOrder?r.displayOrder:t.layout.displayOrder,t.layout.prioOrder=void 0!==r.prioOrder?r.prioOrder:t.layout.prioOrder,t.layout.dock=r.dock||t.layout.dock,t.layout.minimumLayoutMode=r.minimumLayoutMode||t.layout.minimumLayoutMode,r.show=t.show,r.preferredSize=e,r}function Ro(t,e,n){Object.keys(n.on||{}).forEach(function(i){t.eventListeners=t.eventListeners||[];var r=n.on[i].bind(t);t.eventListeners.push({event:i,listener:r}),e.on(i,r)}),t.emit=function(t){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.emit.apply(e,[t].concat(i))}}function Co(t){var e,n,i,r,a,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=t.defaultSettings,c=void 0===s?{}:s,l=t._DO_NOT_USE_getInfo,u=void 0===l?function(){return{}}:l,h=o.chart,f=o.container,d=o.mediator,p=o.registries,g=o.theme,y=o.renderer,m=Ca.mixin({}),b=o.settings||{},w=v(!0,{},c,b),k=[],M=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Qa,n={};return{resolve:function(i){var r=i.data,a=i.settings,o=i.defaults,s=void 0===o?{}:o,c=i.scaled,l=n.norm=e.normalizeSettings(a,s,t.chart),u={scale:t.chart.scale,formatter:t.chart.formatter};c&&Object.keys(c).forEach(function(t){l[t]&&e.updateScaleSize(l,t,c[t])});var h=[];if(!r||!Array.isArray(r.items)){var f={data:r,resources:u},d=e.resolveForItem(f,n.norm,-1);return{settings:n.norm,item:d}}for(var p,g=0,y=r.items.length;g<y;g++){p={datum:r.items[g],data:r,resources:u};var v=e.resolveForItem(p,n.norm,g);v.data=r.items[g],h.push(v)}return{settings:n.norm,items:h}}}}({chart:h}),_=!1,S={nodes:[],chart:h,config:w.brush||{},renderer:null},R={tap:[],over:[]},C=[],N={},A=v({},b);function T(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return function(){for(var r,a,o,s=void 0!==t[e],c=void 0!==b[e],l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];s&&("function"==typeof t[e]?r=(a=t[e]).call.apply(a,[N].concat(u)):i&&(r=t[e]));c&&("function"==typeof b[e]?r=(o=b[e]).call.apply(o,[A].concat(u)):i&&(r=b[e]));return s||c||(r=n.call.apply(n,[N].concat(u))),r}}var E=T("preferredSize",function(){return 0},!0),z=T("resize",function(t){return t.inner}),D=T("created"),q=T("beforeMount"),P=T("mounted"),I=T("beforeUnmount"),F=T("beforeUpdate"),B=T("updated"),L=T("beforeRender"),W=T("beforeDestroy"),V=T("destroyed"),H=t.render,U=function(){w.brush&&(w.brush.consume||[]).forEach(function(t){t.context&&t.style&&C.push(to(S,t))})},$=function(){w.brush&&(w.brush.trigger||[]).forEach(function(t){"over"===t.on?R.over.push(t):R.tap.push(t)})};Object.defineProperty(S,"data",{get:function(){return k}});var Y=w.renderer||t.renderer,X=Y?y||p.renderer(Y)():y||p.renderer()();S.renderer=X;var J={resources:h.logger?{logger:h.logger()}:{}},K=j(So(w,E,h.logger()),J),G=function(t){t.key=w.key,t.element=X.element()},Z=function(){};Z.dockConfig=function(){return K},Z.set=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.settings&&(b=t.settings,w=v(!0,{},c,t.settings),K=j(So(w,E,h.logger()),J)),w.scale&&(e=h.scale(w.scale)),k=w.data?ui(w.data,{dataset:h.dataset,collection:h.dataCollection},{logger:h.logger()},h.dataCollection):e?e.data():[],"string"==typeof w.formatter?n=h.formatter(w.formatter):"object"===x(w.formatter)?n=h.formatter(w.formatter):e&&e.data().fields&&(n=e.data().fields[0].formatter()),a=g.style(w.style||{})},Z.resize=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=z({inner:t,outer:e});r=n?X.size(n):X.size(t),A.rect=v(!0,{computedPhysical:r.computedPhysical,computedOuter:e.computed||e,computedInner:t.computed||t},t),r=v(!0,{computedOuter:e.computed||e,computedInner:t.computed||t},r)},Z.getRect=function(){return A.rect};var Q,tt,et=function(){var t=X.renderArgs?X.renderArgs.slice(0):[];return t.push({data:k}),t};Z.beforeMount=q,Z.beforeRender=function(){L({size:r})},Z.render=function(){var t=S.nodes=H.call.apply(H,[N].concat(O(et())));X.render(t),Q=t},Z.hide=function(){Z.unmount(),X.size({x:0,y:0,width:0,height:0}),X.clear()},Z.beforeUpdate=function(){F({settings:w,data:k})},Z.update=function(){tt&&tt.stop();var t,e,n,i,r,a,o,s,c,l,u,h,f,d,p=S.nodes=H.call.apply(H,[N].concat(O(et())));C.forEach(function(t){return t.cleanUp()}),C.length=0,R.tap=[],R.over=[],w.brush&&(U(),$()),C.forEach(function(t){t.isActive()&&t.update()}),Q&&w.animations&&w.animations.enabled?(t={old:Q,current:p},e={renderer:X},n=w.animations,r=t.old,a=t.current,o=e.renderer,s=[],c={nodes:[],ips:[]},l={nodes:[],ips:[]},u={nodes:[],ips:[]},h=[],f=n.trackBy||Ya,(tt=d={start:function(){var t={};r.forEach(function(e,n){var i=f(e,n);t[i]=e}),a.forEach(function(e,n){var i=f(e,n);t[i]?(u.ips.push(Or(t[i],e)),u.nodes.push(e),s.push(t[i]),t[i]=!1):(c.nodes.push(e),c.ips.push(Or({r:.001,opacity:0},e)))}),Object.keys(t).forEach(function(e){t[e]&&(l.nodes.push(t[e]),l.ips.push(Or(t[e],v({},t[e],{r:1e-4,opacity:0}))))}),l.ips.length&&h.push({easing:Ha,duration:200,tweens:l.ips,nodes:s.concat()}),u.ips.length&&h.push({easing:Ha,duration:400,tweens:u.ips,nodes:[]}),c.ips.length&&h.push({easing:$a,duration:1200,tweens:c.ips,nodes:O(u.nodes)}),h.length&&(h[0].started=Date.now(),"undefined"!=typeof window&&(i=window.requestAnimationFrame(d.tick)))},tick:function(){var t=h[0];t||d.stop(),t.started||(t.started=Date.now());var e=(Date.now()-t.started)/t.duration,n=[],r=t.tweens.map(function(n){return n(t.easing(Math.min(1,e)))});n.push.apply(n,O(r)),n.push.apply(n,O(t.nodes)),o.render(n),1<=e&&(h.shift(),h.length||d.stop()),i&&(i=window.requestAnimationFrame(d.tick))},stop:function(){i&&(window.cancelAnimationFrame(i),i=!1)}}).start()):X.render(p),Q=p,X.setKey&&"string"==typeof b.key&&X.setKey(b.key)},Z.updated=B,Z.destroy=function(){Z.unmount(),W(i),X.destroy(),V(),i=null};var nt=function(t){S.nodes=t,C.forEach(function(t){t.isActive()&&t.update()}),X.render(t)};return _o(N,t,{settings:function(){return w},data:function(){return k},scale:function(){return e},formatter:function(){return n},renderer:function(){return X},chart:function(){return h},dockConfig:function(){return K},mediator:function(){return d},instance:function(){return A},rect:function(){return A.rect},style:function(){return a},update:function(){return nt},registries:function(){return p},resolver:function(){return M},symbol:function(){return ko}}),_o(A,b,{settings:function(){return w},data:function(){return k},scale:function(){return e},formatter:function(){return n},renderer:function(){return X},chart:function(){return h},dockConfig:function(){return K},mediator:function(){return d},style:function(){return a},_DO_NOT_USE_getInfo:u.bind(N),isVisible:function(){return _}}),Z.getBrushedShapes=function(t,e,n){var i=[];if(w.brush&&w.brush.consume){var r=h.brush(t),a=X.findShapes("*");w.brush.consume.filter(function(e){return e.context===t}).forEach(function(t){for(var o=0;o<a.length;o++){var s=a[o];s.data&&r.containsMappedData(s.data,n||t.data,e)&&(G(s),i.push(s),a.splice(o,1),o--)}})}return i},Z.findShapes=function(t){for(var e=X.findShapes(t),n=0,i=e.length;n<i;n++)G(e[n]);return e},Z.shapesAt=function(t){for(var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=X.itemsAt(t),r=0,a=(e=n&&"stop"===n.propagation&&0<i.length?[i.pop().node]:i.map(function(t){return t.node})).length;r<a;r++)G(e[r]);return e},Z.brushFromShapes=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.contexts=Array.isArray(e.contexts)?e.contexts:[],eo({nodes:t,action:e.action||"toggle",trigger:e,chart:h,data:S.data})},Z.mount=function(){i=X.element&&X.element()?i:X.appendTo(f),X.setKey&&"string"==typeof b.key&&X.setKey(b.key),w.brush&&(U(),$()),Ro(A,m,b),Ro(N,m,t),_=!0},Z.mounted=function(){return P(i)},Z.unmount=function(){[A,N].forEach(function(t){var e,n;n=m,(e=t).eventListeners&&(e.eventListeners.forEach(function(t){var e=t.event,i=t.listener;n.removeListener(e,i)}),e.eventListeners.length=0),e.emit=function(){}}),R.tap=[],R.over=[],C.forEach(function(t){t.cleanUp()}),C.length=0,I(),_=!1},Z.onBrushTap=function(t){R.tap.forEach(function(e){var n,i,r,a;i=(n={e:t,t:e,config:S}).e,r=n.t,a=n.config,no({collisions:io(i,r,a.renderer),t:r,config:a,action:ro(r.action,i,"toggle")})&&"stop"===e.globalPropagation&&h.toggleBrushing(!0)})},Z.onBrushOver=function(t){R.over.forEach(function(e){var n,i,r,a;i=(n={e:t,t:e,config:S}).e,r=n.t,a=n.config,no({collisions:io(i,r,a.renderer),t:r,config:a,action:ro(r.action,i,"set")})&&"stop"===e.globalPropagation&&h.toggleBrushing(!0)})},Z.def=N,Z.ctx=A,Z.renderer=function(){return X},Z.set({settings:b}),D(),Z}var No=1e-12;function Ao(t,e,n){var i,r,a=ho(n,t),o=ho(e,t);return uo((r=mo(a,i=o)/mo(i,i)||1,{x:i.x*r,y:i.y*r}),t)}function To(t,e,n){return vo(t,n)+vo(e,n)-vo(t,e)<No}function Eo(t){return t.x1===t.x2&&t.y1===t.y2}function zo(t){return t.width<=0||t.height<=0}function Oo(t){return t.r<=0}function jo(t){return t.edges.length<=2}function Do(t,e){return!Oo(t)&&yo({x:t.cx,y:t.cy},e)<=Math.pow(t.r,2)}function qo(t,e){if(zo(e)||Oo(t))return!1;var n=e.width/2,i=e.height/2,r=e.x+n,a=e.y+i,o=t.r,s=t.cx,c=t.cy,l=Math.abs(s-r),u=Math.abs(c-a);return!(n+o<l||i+o<u)&&(l<=n||u<=i||Math.pow(l-n,2)+Math.pow(u-i,2)<=Math.pow(o,2))}function Po(t,e){if(Oo(t)||Eo(e))return!1;var n=z(B(e),2),i=n[0],r=n[1];if(Do(t,i)||Do(t,r))return!0;var a={x:t.cx,y:t.cy},o=Ao(i,r,a);return yo(o,a)<=Math.pow(t.r,2)&&To(i,r,o)}function Io(t,e){if(jo(e)||Oo(t))return!1;if(Fo(e,{x:t.cx,y:t.cy}))return!0;for(var n=e.edges.length,i=0;i<n;i++)if(Po(t,V(e.edges[i])))return!0;return!1}function Fo(t,e){if(jo(t)||!Vo(t.boundingRect(),e))return!1;for(var n=!0,i=t.vertices.length,r={x:t.xMin-1,y:e.y},a=0;a<i-1;a++){var o=V(t.edges[a]);o.y1<e.y&&o.y2<e.y||o.y1>e.y&&o.y2>e.y||(n=Uo(o,V([r,e]))?!n:n)}return!n}function Bo(t,e){if(jo(t))return!1;for(var n=0,i=t.edges.length;n<i;n++)if(Uo(e,V(t.edges[n])))return!0;var r=z(B(e),2),a=r[0],o=r[1];return Fo(t,a)||Fo(t,o)}function Lo(t,e){if(jo(t))return!1;for(var n=0,i=t.edges.length;n<i;n++)if(Ho(e,V(t.edges[n])))return!0;var r=z(L(e),4),a=r[0],o=r[1],s=r[2],c=r[3];return Fo(t,a)||Fo(t,o)||Fo(t,s)||Fo(t,c)}function Wo(t,e){return!zo(t)&&!zo(e)&&t.x<=e.x+e.width&&e.x<=t.x+t.width&&t.y<=e.y+e.height&&e.y<=t.y+t.height}function Vo(t,e){return!zo(t)&&e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function Ho(t,e){if(Eo(e)||zo(t))return!1;var n=z(B(e),2),i=n[0],r=n[1];if(Vo(t,i)||Vo(t,r))return!0;for(var a=L(t),o=a.length,s=0;s<o;s++)if(Uo(V([a[s],a[3!==s?s+1:0]]),e))return!0;return!1}function Uo(t,e){var n,i,r=z(B(t),2),a=r[0],o=r[1],s=z(B(e),2),c=s[0],l=s[1],u=po(o,a),h=go(o,a),f=po(l,c),d=go(l,c),p=po(a,c),g=go(a,c),y=d*u-f*h,v=f*g-d*p,m=u*g-h*p;if(0===u&&0===h)return!1;if(0===f&&0===d)return!1;if(0===y){if(0!==v||0!==m)return!1;if(0===u){if(0===h)return a.x===o.x&&a.y===o.y;n=go(c,a)/h,i=go(l,a)/h}else n=(c.x-a.x)/u,i=(l.x-a.x)/u;return!(n<0&&i<0||1<n&&1<i)}var x=v/y;return y=m/y,0<=x&&x<=1&&0<=y&&y<=1}function $o(t,e){if(Eo(t))return!1;var n=z(B(t),2);return To(n[0],n[1],e)}var Yo=/^\$/,Xo="@extend";function Jo(t){throw new Error('Cyclical reference for "'.concat(t,'"'))}function Ko(t,e){return function t(e,n,i){if("string"==typeof e){var r=n[e];return-1!==i.indexOf(e)&&Jo(e),Yo.test(r)?(i.push(e),t(r,n,i)):r}var a=e,o=v(!0,{},n,e),s={};if(e[Xo]){var c=e[Xo];-1!==i.indexOf(c)&&Jo(c);var l=i.slice();l.push(c),a=v(!0,{},t(o[c],n,l),e)}return Object.keys(a).forEach(function(e){var n=i.slice();if(e!==Xo&&!Yo.test(e)){s[e]=a[e];var r=s[e];Yo.test(r)&&r in o?(-1!==i.indexOf(r)&&Jo(r),n.push(r),"object"===x(r=o[r])?s[e]=t(r,o,n):Yo.test(r)&&r in o?s[e]=t(r,o,n):s[e]=r):"object"===x(r)&&(s[e]=t(r,o,n))}}),s}(t,e,[])}function Go(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n={},i=function(t){t.forEach(function(t){var e=Array.isArray(t.colors[0])?t.colors:[t.colors];n[t.key]={colors:e,sizes:e.map(function(t){return t?t.length:0})}})},r={palette:function(t,e){return function(t,e){var i=n[t];if(!i)return[];for(var r=i.sizes,a=0;a<r.length;a++)if(e<=r[a])return i.colors[a];return i.colors[r.length-1]}(t,e)},setPalettes:i,style:function(e){return Ko(e,t)}};return i(e),r}function Zo(t,e,n){var i=e.left-n.left,r=e.top-n.top,a=H(t),o=v(!0,{},t);switch(a){case"circle":o.cx+=i,o.cy+=r;break;case"polygon":for(var s=0,c=o.vertices.length;s<c;s++){var l=o.vertices[s];l.x+=i,l.y+=r}break;case"line":o.x1+=i,o.y1+=r,o.x2+=i,o.y2+=r;break;case"point":case"rect":o.x+=i,o.y+=r}return o}var Qo=function(t,e,n){var i=e.instance.renderer().element();if(!isNaN(n)&&i&&t&&t.children){var r=t.children[Math.max(0,n)];if(i!==r){var a=e.instance.def.additionalElements&&e.instance.def.additionalElements().filter(Boolean);t.insertBefore&&void 0!==r?(t.insertBefore(i,r),a&&a.forEach(function(e){t.insertBefore(e,i)})):(a&&a.forEach(function(e){t.appendChild(e,i)}),t.appendChild(i))}}};function ts(t,e,n){var i=[],r=0,a=n?e.slice().sort(function(t,i){return n[e.indexOf(t)]-n[e.indexOf(i)]}):e;a.forEach(function(t){i.push(r),r++;var e=t.instance.def.additionalElements&&t.instance.def.additionalElements();e&&(r+=e.length)}),a.forEach(function(e,n){return Qo(t,e,i[n])})}function es(t,e){var n,i=t.element,r=t.data,a=void 0===r?[]:r,o=t.settings,s=void 0===o?{}:o,c=t.on,l=void 0===c?{}:c,u=e.registries,h=e.logger,f=Go(e.style,e.palettes),d=[],p=v({},t),g=(n={},Ca.mixin(n),n),y=[],m=[],b=null,w=null,k=null,M=[],S=function(){},R=function(){},C={},N=!1,A=function(t,e){return u.component.has(t.type)?{instance:Co(u.component(t.type),{settings:t,chart:p,mediator:g,registries:u,theme:f,container:e}),settings:v(!0,{},t),key:t.key,hasKey:void 0!==t.key}:(h.warn("Unknown component: ".concat(t.type)),!1)};function T(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return function(){for(var i,r,a="function"==typeof t[e],o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];i=a?(r=t[e]).call.apply(r,[p].concat(s)):n.call.apply(n,[p].concat(s));return i}}var E=function(t){for(var e=0;e<y.length;e++)if(y[e].instance===t)return y[e];return null},z=function(t){for(var e=0;e<y.length;e++){var n=y[e];if(n.hasKey&&n.key===t)return e}return-1};var j=function(t){var e=t.map(function(t){var e=t.instance.dockConfig();return{instance:t.instance,resize:t.instance.resize,preferredSize:e.computePreferredSize.bind(e),settings:t.settings,layoutComponents:function(){}}}),n=nt(s.dockLayout?(h.warn('Deprecation Warning: "dockLayout" property should be renamed to "strategy"'),s.dockLayout):s.strategy),r=function(t){if("function"!=typeof t.getBoundingClientRect)return{x:0,y:0,width:0,height:0};var e=t.getBoundingClientRect();return{x:0,y:0,width:e.width,height:e.height}}(i),a=n.layout(r,e),o=a.visible,c=a.hidden,l=a.order;return{visible:o.map(function(t){return E(t.instance)}),hidden:c.map(function(t){return E(t.instance)}),order:l}},D=T("created"),q=T("beforeMount"),P=T("mounted"),I=T("beforeUpdate"),F=T("updated"),B=T("beforeRender"),L=T("beforeDestroy"),W=T("destroyed"),V=function(t,e){var n,i,r,a,o,s,c=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).partialData,l=e.formatters,d=void 0===l?{}:l,p=e.scales,g=void 0===p?{}:p,y=e.scroll,m=void 0===y?{}:y;n=t,i={logger:h,types:u.data},r=i.types,a=i.logger,o={},s=[],Array.isArray(n)?s.push.apply(s,O(n)):(a.warn('Deprecated: "data-source" configuration"'),s.push(n)),s.forEach(function(t,e){var n=r(t.type);if(n){var i=t.key;void 0===t.key&&(a.warn("Missing key for dataset. Using index '".concat(e,"' as key.")),i=e);var s=n({key:i,data:t.data,config:t.config});o[i]=s}}),S=function(t){return t?o[t]:o[Object.keys(o)[0]]},c||Object.keys(C).forEach(function(t){return C[t].clear()}),e.palettes&&f.setPalettes(e.palettes),R=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:ui,r={};return(t||[]).forEach(function(t){if(!t.key)throw new Error('Data collection is missing "key" property');if("object"===x(t.data)&&"collection"in t.data)throw new Error("Data config for collections may not reference other collections");r[t.key]=function(){return i(t.data,e,n)}}),function(t){var e,n;if("string"==typeof t?e=t:"object"===x(t)&&(e=t.key,n=t),!(e in r))throw new Error("Unknown data collection: ".concat(e));"function"==typeof r[e]&&(r[e]=r[e]());var i=r[e];if(n&&n.fields&&n.fields.filter){var a=i.fields.filter(n.fields.filter);i.fields.length!==a.length&&(i=v(i,{fields:a}))}return i}}(e.collections,{dataset:S},{logger:h});var M={theme:f,logger:h};b=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Ma,r={};return{get:function(a){var o;return"string"==typeof a&&t[a]?o=a:"object"===x(a)&&"scale"in a&&t[a.scale]&&(o=a.scale),o?(r[o]=r[o]||i(t[o],e,n),r[o]):i(a,e,n)},all:function(){return Object.keys(t).forEach(this.get),r}}}(g,{dataset:S,collection:R},_({},M,{scale:u.scale})),w=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:hi,r={};return{get:function(a){var o;return"string"==typeof a&&t[a]?o=a:"object"===x(a)&&"formatter"in a&&t[a.formatter]?o=a.formatter:"object"===x(a)&&"type"in a&&t[a.type]&&(o=a.type),o?(r[o]=r[o]||i(t[o],e,n),r[o]):i(a||{},e,n)},all:function(){return Object.keys(t).forEach(this.get),r}}}(d,{dataset:S,collection:R},_({},M,{formatter:u.formatter})),k=function(t,e){var n,i,r,a,o,s,c={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(c[l]=(n=t[l],i=e?e[l]:null,s=void 0,r=n.min||0,a=n.max||0,o=n.viewSize||0,(s=i||Na()).update({min:r,max:a,viewSize:o}),s));return c}(m,k)};function H(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e={},n=t.filter(function(t){return!!t.key}).map(function(t){return t.key});M.forEach(function(t){t.key&&-1!==n.indexOf(t.key)?e[t.key]=t:t.destroy()}),M=t.map(function(t){var n=t.key&&e[t.key]?e[t.key]:u.interaction(t.type)(p,g,i);return n.set(t),n})}var U=function(t){var e=i.getBoundingClientRect(),n="clientX"in t?t.clientX:t.x,r="clientY"in t?t.clientY:t.y,a={x:n-e.left,y:r-e.top},o=[];return m.forEach(function(t){var e=t.instance.getRect();Vo(e.computedPhysical?e.computedPhysical:{x:e.margin.left+e.x*e.scaleRatio.x,y:e.margin.top+e.y*e.scaleRatio.y,width:e.width*e.scaleRatio.x,height:e.height*e.scaleRatio.y},a)&&o.push(t)}),o},$=function(){if(!d.length&&i){Object.keys(l).forEach(function(t){var e=l[t].bind(p);i.addEventListener(t,e),d.push({key:t,listener:e})});var t,e={},n=function(t){t.touches?(e.x=t.touches[0].clientX,e.y=t.touches[0].clientY,e.multiTouch=1<t.touches.length):(e.x=t.clientX,e.y=t.clientY,e.multiTouch=!1),e.time=Date.now(),e.comps=U(e)},r=function(t){var n=e.comps||U(t);if(!n.every(function(t){return t.instance.def.disableTriggers})&&("touchend"===t.type&&t.preventDefault(),r=e,a=it(i=t),o=a?i.changedTouches[0]:i,s=Date.now()-r.time,c=isNaN(r.x)?0:Math.abs(o.clientX-r.x),l=isNaN(r.y)?0:Math.abs(o.clientY-r.y),(0===i.button||a)&&!r.multiTouch&&c<=12&&l<=12&&s<=300))for(var i,r,a,o,s,c,l,u=n.length-1;0<=u;u--)if(n[u].instance.onBrushTap(t),N){N=!1;break}},a=[];a.push({key:"mousedown",listener:n}),a.push({key:"mouseup",listener:r}),("ontouchstart"in(t=i)&&"ontouchend"in t||1<navigator.maxTouchPoints)&&(a.push({key:"touchstart",listener:n}),a.push({key:"touchend",listener:r})),a.push({key:"mousemove",listener:function(t){for(var e=U(t),n=e.length-1;0<=n;n--)if(e[n].instance.onBrushOver(t),N){N=!1;break}}}),a.forEach(function(t){i.addEventListener(t.key,t.listener),d.push(t)})}},Y=function(){d.forEach(function(t){var e=t.key,n=t.listener;return i.removeEventListener(e,n)}),d.length=0};return p.update=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.partialData,r=e.excludeFromUpdate,o=void 0===r?[]:r;e.data&&(a=e.data),e.settings&&(s=e.settings,H(e.settings.interactions)),I(),V(a,s,{partialData:n});for(var c=s,l=c.formatters,u=c.scales,h=c.components,f=void 0===h?[]:h,d=function(t){var e=y[t];f.some(function(t){return e.hasKey&&e.key===t.key})||(y.splice(t,1),e.instance.destroy())},p=y.length-1;0<=p;p--)d(p);(y=f.map(function(t){var e=z(t.key);return-1<o.indexOf(t.key)?y[e]:-1===e?A(t,i):(y[e].updateWith={formatters:l,scales:u,data:a,settings:t},y[e])}).filter(function(t){return!!t})).forEach(function(t){t.updateWith&&t.instance.set(t.updateWith)}),y.forEach(function(t){t.updateWith&&t.instance.beforeUpdate()});var g,v=[],x=[];if(n)y.forEach(function(t){t.updateWith&&t.visible&&v.push(t)}),g=v;else{var b=j(y),w=b.visible,k=b.hidden;t=b.order,(g=m=w).forEach(function(t){t.updateWith&&t.visible?v.push(t):x.push(t)}),k.forEach(function(t){t.instance.hide(),t.visible=!1,delete t.updateWith})}x.forEach(function(t){return t.instance.beforeMount()}),x.forEach(function(t){return t.instance.mount()}),g.forEach(function(t){return t.instance.beforeRender()}),g.forEach(function(t){t.updateWith&&t.visible?t.instance.update():t.instance.render()}),n||ts(i,m,t),x.forEach(function(t){return t.instance.mounted()}),v.forEach(function(t){return t.instance.updated()}),m.forEach(function(t){delete t.updateWith,t.visible=!0}),F()},p.destroy=function(){L(),y.forEach(function(t){return t.instance.destroy()}),y=[],Y(),H(),delete p.update,delete p.destroy,W()},p.getAffectedShapes=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"and",n=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0,r=[];return y.filter(function(t){return null==i||t.key===i}).forEach(function(i){r.push.apply(r,O(i.instance.getBrushedShapes(t,e,n)))}),r},p.findShapes=function(t){var e=[];return m.forEach(function(n){e.push.apply(e,O(n.instance.findShapes(t)))}),e},p.componentsFromPoint=function(t){return U(t).map(function(t){return t.instance.ctx})},p.shapesAt=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=[],r=i.getBoundingClientRect(),a=m;if(Array.isArray(e.components)&&0<e.components.length){var o=e.components.map(function(t){return t.key});a=m.filter(function(t){return-1!==o.indexOf(t.key)}).map(function(t){return{instance:t.instance,opts:e.components[o.indexOf(t.key)]}})}for(var s=a.length-1;0<=s;s--){var c=a[s],l=Zo(t,r,c.instance.renderer().element().getBoundingClientRect()),u=c.instance.shapesAt(l,c.opts),h=0<u.length&&"stop"===e.propagation;if(n.push.apply(n,O(u)),0<n.length&&h)return n}return n},p.brushFromShapes=function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{components:[]},n=function(n){var i=e.components[n].key;m.filter(function(t){return i===t.key}).forEach(function(i){var r=t.filter(function(t){return t.key===i.key});i.instance.brushFromShapes(r,e.components[n])})},i=0;i<e.components.length;i++)n(i)},p.scroll=function(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";return(e=k)[t=n]||(e[t]=Na()),e[t]},p.dataset=function(t){return S(t)},p.dataCollection=function(t){return R(t)},p.scales=function(){return b.all()},p.formatters=function(){return w.all()},p.brush=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";return C[t]||(C[t]=Va()),C[t]},p.scale=function(t){return b.get(t)},p.formatter=function(t){return w.get(t)},p.toggleBrushing=function(t){N=void 0!==t?t:!N},p.component=function(t){var e=z(t);if(-1!==e)return y[e].instance.ctx},p.logger=function(){return h},p.theme=function(){return f},Object.defineProperty(p,"interactions",{get:function(){return{instances:M,on:function(){$(),M.forEach(function(t){return t.on()})},off:function(){Y(),M.forEach(function(t){return t.off()})}}}}),D(),i&&(q(),i.innerHTML="",function(){var t=s.components,e=void 0===t?[]:t;B(),V(a,s),y=e.map(function(t){return A(t,i)}).filter(function(t){return!!t});var n=j(y),r=n.visible,o=n.hidden,c=n.order;m=r,o.forEach(function(t){t.instance.hide(),t.visible=!1}),r.forEach(function(t){return t.instance.beforeMount()}),r.forEach(function(t){return t.instance.mount()}),r.forEach(function(t){return t.instance.beforeRender()}),r.forEach(function(t){return t.instance.render()}),r.forEach(function(t){return t.instance.mounted()}),r.forEach(function(t){t.visible=!0}),ts(i,m,c)}(),$(),H(s.interactions),P(i),p.element=i),p}var ns=function(t){var e=oe(t);return e.prio=function(t){return t?e.default(t[0]):[e.default()]},e.types=function(){return e.getKeys()},e},is=oe();var rs=function(t){return t.filter(function(t){return"number"==typeof t&&!isNaN(t)})},as=function(t){return t.reduce(function(t,e){return t+e},0)},os={first:function(t){return t[0]},last:function(t){return t[t.length-1]},min:function(t){var e=rs(t);return e.length?Math.min.apply(null,e):NaN},max:function(t){var e=rs(t);return e.length?Math.max.apply(null,e):NaN},sum:function(t){var e=rs(t);return e.length?e.reduce(function(t,e){return t+e},0):NaN},avg:function(t){var e=rs(t),n=e.length;return n?as(e)/n:NaN}};function ss(t,e,n,i){var r={},a=i.field||(void 0!==t.field?e.field(t.field):null);return Object.keys(n).forEach(function(o){var s=n[o],c=r[o]={};-1!==["number","string","boolean"].indexOf(x(s))?(c.type="primitive",c.value=s):"function"==typeof s?(c.type="function",c.value=s,c.label=s,c.field=a):"object"===x(s)&&(s.fields?c.fields=s.fields.map(function(n){return ss(t,e,{main:n},i).main}):void 0!==s.field?(c.type="field",c.field=e.field(s.field),c.value=c.field.value,c.label=c.field.label):a&&(c.value=a.value,c.label=a.label,c.field=a),"function"==typeof s.filter&&(c.filter=s.filter),void 0!==s.value&&(c.value=s.value),void 0!==s.label&&(c.label=s.label),"function"==typeof s.reduce?c.reduce=s.reduce:s.reduce?c.reduce=os[s.reduce]:c.field&&c.field.reduce&&(c.reduce="string"==typeof c.field.reduce?os[c.field.reduce]:c.field.reduce),"function"==typeof s.reduceLabel?c.reduceLabel=s.reduceLabel:s.reduceLabel?c.reduceLabel=os[s.reduceLabel]:c.field&&c.field.reduceLabel&&(c.reduceLabel="string"==typeof c.field.reduceLabel?os[c.field.reduceLabel]:c.field.reduceLabel))}),r}function cs(t,e){var n=ss(t,e,{main:{value:t.value,label:t.label,reduce:t.reduce,filter:t.filter}},{}).main;return{props:ss(t,e,t.props||{},n),main:n}}function ls(t,e,n,i){for(var r,a=Array(t.length),o=Array(t.length),s=0;s<t.length;s++)r=i?t[s][i]:t[s],a[s]=r.value,o[s]=r.label;var c=e.reduce,l=e.reduceLabel,u=c?c(a):a,h={value:u,label:l?l(o,u):n?n(u):String(u)};return i&&t[0][i].source?h.source=t[0][i].source:!i&&t[0].source&&(h.source=t[0].source),h}function us(t,e){var n=e.main,i=e.propsArr,r=e.props,a=[],o=n.field.formatter(),s={};return i.forEach(function(t){s[t]=r[t].field?r[t].field.formatter():function(t){return t}}),a.push.apply(a,O(t.map(function(t){var e=ls(t.items,n,o);return i.forEach(function(n){e[n]=ls(t.items,r[n],s[n],n)}),e}))),a}function hs(t){var e=t.cfg,n=t.itemData,i=t.obj,r=t.target,a=t.tracker,o="function"===t.trackType?e.trackBy(n):n[e.trackBy],s=a[o];s||(s=a[o]={items:[],id:o},r.push(s)),s.items.push(i)}function fs(t,e,n){var i=n.key,r={value:"function"==typeof t.value?t.value(e):void 0!==t.value?t.value:e};return r.label="function"==typeof t.label?t.label(e):void 0!==t.label?String(t.label):String(r.value),t.field&&(r.source={key:i,field:t.field.key()}),r}var ds=function(t){return t.filter(function(t){return"number"==typeof t&&!isNaN(t)})};var ps=function(t){var e=t.key,n=t.data,i=t.cache,r=t.config;if(n){var a=n;"string"==typeof a&&(a=function(t){var e=t.data,n=t.config,i=e.split("\n"),r=i[0],a=i[1],o=",";if(n&&n.parse&&n.parse.delimiter)o=n.parse.delimiter;else if(r)for(var s=[/,/,/\t/,/;/],c=0;c<s.length;c++){var l=s[c];if(r&&a){if(l.test(r)&&l.test(a)&&r.split(l).length===a.split(l).length){o=l;break}}else l.test(r)&&(o=l)}return i.map(function(t){return t.split(o)})}({data:n,config:r})),Array.isArray(a)&&function(t){var e,n=t.source,i=t.data,r=t.cache,a=t.config,o=i,s=a&&a.parse;Array.isArray(i[0])?s&&!1===s.headers?e=i[0].map(function(t,e){return e}):(e=i[0],o=i.slice(1)):e=Object.keys(i[0]);var c,l=!!s&&"function"==typeof s.row&&s.row,u=e;u=s&&"function"==typeof s.fields?s.fields(u.slice()):e.map(function(t){return{key:t,title:t}}),Array.isArray(i[0])?c=u.map(function(){return[]}):(c={},u.forEach(function(t){c[t.key]=[]}));for(var h=0;h<o.length;h++){var f=l?l(o[h],h,u):o[h];if(f)if(Array.isArray(f))for(var d=0;d<u.length;d++)c[d].push(f[d]);else for(var p=0;p<u.length;p++)c[u[p].key].push(f[u[p].key])}for(var g=Array.isArray(c)?function(t){return c[t]}:function(t){return c[u[t].key]},y=0;y<u.length;y++){var m=g(y),x=ds(m),b=0<x.length,w=b?"measure":"dimension",k=b?Math.min.apply(Math,O(x)):NaN,M=b?Math.max.apply(Math,O(x)):NaN;r.fields.push(oi(v({source:n,key:y,title:u[y].title,values:m,min:k,max:M,type:w},u[y]),{value:u[y].value,label:u[y].label}))}}({data:a,cache:i,source:e,config:r})}};function gs(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=t.data,i=t.config,r={fields:[]},a={key:function(){return e},raw:function(){return n},field:function(t){return function(t,e){var n=e.cache;if("number"==typeof t)return n.fields[t];for(var i=0;i<n.fields.length;i++)if(n.fields[i].key()===t)return n.fields[i];for(var r=0;r<n.fields.length;r++)if(n.fields[r].title()===t)return n.fields[r];return null}(t,{cache:r,matrix:n})},fields:function(){return r.fields.slice()},extract:function(t){return e=t,n=a,i=Array.isArray(e)?e:[e],r=[],i.forEach(function(t){void 0!==t.field&&function(){var e=n.field(t.field),i=n.key();if(!e)throw Error("Field '".concat(t.field,"' not found"));for(var a=cs(t,n),o=a.props,s=a.main,c=Object.keys(o),l=!!t.trackBy,u=x(t.trackBy),h={},f=[],d=e.items(),p=[],g=function(e){var n=d[e];if(s.filter&&!s.filter(n))return"continue";var r=fs(s,n,{key:i});c.forEach(function(t){var a=o[t],s=a.field?a.field.items()[e]:n;r[t]=fs(a,s,{key:i})}),l&&hs({cfg:t,itemData:n,obj:r,target:f,tracker:h,trackType:u}),p.push(r)},y=0;y<d.length;y++)g(y);l?r.push.apply(r,O(us(f,{main:s,propsArr:c,props:o}))):r.push.apply(r,p)}()}),r;var e,n,i,r},hierarchy:function(){return null}};return ps({key:e,data:n,config:i,cache:r}),a}gs.util={normalizeConfig:cs,collect:us,track:hs};var ys=oe();ys.default("matrix"),ys("matrix",gs),ys("default",gs);var vs=oe();function ms(t,e,n){return Math.max(t,Math.min(e,n))}function xs(t){var e,n=t.item,i=t.value,r=t.boxCenter,a=t.rendWidth,o=t.rendHeight,s="x",c="y",l=a,u=o,h=i<.5?90:-90;return t.flipXY&&(s="y",c="x",l=o,u=a,h=i<.5?180:0),(0,t.symbol)(v({},n.oob,(M(e={},s,r*l),M(e,c,Math.max(n.oob.size/2,Math.min(i*u,u-n.oob.size/2))),M(e,"startAngle",h),e)))}function bs(t){var e,n=t.item,i=t.boxWidth,r=t.boxPadding,a=t.rendWidth,o=t.rendHeight,s="x",c="y",l="width",u="height",h=a,f=o;t.flipXY&&(s="y",c="x",l="height",u="width",h=o,f=a);var d,p,g,y,m,x,b,w,k,_,S,R,C,N,A=(d={start:n.start,end:n.end,minPx:n.box.minHeightPx,maxPx:f},p=d.start,g=d.end,y=d.minPx,m=void 0===y?.1:y,x=d.maxPx,b=void 0===x?1:x,w=Math.max(p,g),k=Math.min(p,g),_=ms(-.1,1.2,w),S=ms(-.1,1.2,k),R=_*b-S*b,{actualDiff:C=Math.max(m,R),startModifier:N=(C-R)/2,actualLow:S*b-N}),T=A.actualDiff,E=A.actualLow;return v({},n.box,(M(e={type:"rect"},s,(r+n.major)*h),M(e,c,E),M(e,u,T),M(e,l,i*h),M(e,"data",n.data||{}),M(e,"collider",{type:null}),e))}function ws(t){var e,n=t.item,i=t.from,r=t.to,a=t.boxCenter,o=t.rendWidth,s=t.rendHeight,c="x1",l="y1",u="x2",h="y2",f=o,d=s;return t.flipXY&&(c="y1",l="x1",u="y2",h="x2",f=s,d=o),v({},n.line,(M(e={type:"line"},h,Math.floor(i*d)),M(e,c,a*f),M(e,l,Math.floor(r*d)),M(e,u,a*f),M(e,"data",n.data||{}),M(e,"collider",{type:null}),e))}function ks(t){var e,n=t.item,i=t.key,r=t.position,a=t.width,o=t.boxCenter,s=t.rendWidth,c=t.rendHeight,l="x1",u="y1",h="x2",f="y2",d=s,p=c;t.flipXY&&(l="y1",u="x1",h="y2",f="x2",d=c,p=s);var g=a/2;return v({type:"line"},n[i],(M(e={},u,Math.floor(r*p)),M(e,l,(o-g)*d),M(e,f,Math.floor(r*p)),M(e,h,(o+g)*d),M(e,"r",g*d),M(e,"cx",o*d),M(e,"cy",r*p),M(e,"width",a*d),M(e,"data",n.data||{}),M(e,"collider",{type:null}),e))}vs("native",function(t,e,n){var i,r,a={chart:t,mediator:e,element:n},o=[],s=!0;function c(){"function"==typeof i.enable&&(i.enable=i.enable.bind(a)()),i.enable&&Object.keys(i.events).forEach(function(t){var e=i.events[t].bind(a);n.addEventListener(t,e),o.push({key:t,listener:e})})}function l(){o.forEach(function(t){var e=t.key,i=t.listener;n.removeEventListener(e,i)}),o=[]}return{get key(){return r},set:function(t){var e;r=(e=t).key,(i=e).events=i.events||[],void 0===i.enable&&(i.enable=!0),l(),s&&c()},off:function(){s=!1,l()},on:function(){s=!0,0===o.length&&c()},destroy:function(){l(),i=a=null}}});var Ms={oob:{show:!0,type:"n-polygon",fill:"#999",stroke:"#000",strokeWidth:0,size:10,sides:3,startAngle:-90},box:{show:!0,fill:"#fff",stroke:"#000",strokeWidth:1,strokeLinejoin:"miter",width:1,maxWidthPx:void 0,minWidthPx:1,minHeightPx:1},line:{show:!0,stroke:"#000",strokeWidth:1},median:{show:!0,stroke:"#000",strokeWidth:1},whisker:{show:!0,stroke:"#000",strokeWidth:1,fill:"",type:"line",width:1}},_s=Object.keys(Ms),Ss={require:["chart","resolver","symbol"],defaultSettings:{settings:{},data:{},style:{box:"$shape",line:"$shape-guide",whisker:"$shape-guide",median:"$shape-guide--inverted"}},created:function(){this.state={}},render:function(t){var e=this,n=t.data,i=this.rect,r=i.width,a=i.height,o="horizontal"===this.settings.settings.orientation,s=this.style,c=this.resolver,l=this.symbol,u=_s.filter(function(t){return!e.settings.settings[t]||!1!==e.settings.settings[t].show}),h={};u.forEach(function(t){return h[t]=Ms[t]});var f=function(t){var e,n=t.keys,i=t.data,r=t.defaultSettings,a=t.style,o=t.settings,s=t.width,c=t.height,l=t.resolver,u=v(!0,{},r||{},a||{}),h={major:"horizontal"===o.orientation?c:s,minor:"horizontal"===o.orientation?s:c},f=o.major;e="object"===x(f)&&"object"===x(f.ref)&&void 0!==f.ref.start&&void 0!==f.ref.end?l.resolve({data:i,defaults:{start:0,end:1},scaled:h,settings:v(!0,{},{binStart:{scale:o.major.scale,ref:o.major.ref.start},binEnd:{scale:o.major.scale,ref:o.major.ref.end}})}):"object"===x(f)&&void 0!==f.binStart&&void 0!==f.binEnd?l.resolve({data:i,defaults:{start:0,end:1},scaled:h,settings:v(!0,{},{binStart:{scale:o.major.scale,ref:"binStart"},binEnd:{scale:o.major.scale,ref:"binEnd"}},o.major)}):l.resolve({data:i,scaled:h,defaults:{major:.5},settings:{major:o.major}});var d=o.minor||{},p={};["start","end","min","max","med"].forEach(function(t){(d[t]||i.items&&i.items.length&&i.items[0][t])&&(p[t]={scale:d.scale,ref:t})});for(var g,y={major:e,minor:l.resolve({data:i,defaults:{start:0,end:1},scaled:h,settings:v(!0,{},p,d)})},m=0,b=n.length;m<b;m++)o[g]&&!1===o[g].show||(y[g=n[m]]=l.resolve({data:i,defaults:u[g],settings:o[g],scaled:h}));return y}({keys:u,data:n,defaultSettings:h,style:s,settings:this.settings.settings,width:r,height:a,resolver:c}),d=f.settings;return function(t){var e=t.width,n=t.height,i=t.flipXY,r=t.resolved,a=t.keys,o=t.symbol,s=[],c=r.major.items;if(!c.length)return s;var l,u,h,f,d,p,g,y,m,x,b,w,k,M,_,S,R,C=e,N=n,A=i?n:e,T=r.major.settings,E=["start","end","min","max","med"].filter(function(t){return void 0!==r.minor.settings[t]}),z=E.length,O=a.filter(function(t){return"oob"!==t}),j=a?a.length:0,D=O?O.length:0,q={box:function(){h.box&&P(h.start)&&P(h.end)&&l.push(bs({item:h,boxWidth:f,boxPadding:d,rendWidth:C,rendHeight:N,flipXY:i}))},line:function(){P(h.min)&&P(h.start)&&l.push(ws({item:h,from:h.min,to:h.start,boxCenter:p,rendWidth:C,rendHeight:N,flipXY:i})),P(h.max)&&P(h.end)&&l.push(ws({item:h,from:h.max,to:h.end,boxCenter:p,rendWidth:C,rendHeight:N,flipXY:i}))},median:function(){h.median&&P(h.med)&&l.push(ks({item:h,key:"median",position:h.med,width:f,boxCenter:p,rendWidth:C,rendHeight:N,flipXY:i}))},whisker:function(){if(h.whisker){var t=f*h.whisker.width;P(h.min)&&l.push(ks({item:h,key:"whisker",position:h.min,width:t,boxCenter:p,rendWidth:C,rendHeight:N,flipXY:i})),P(h.max)&&l.push(ks({item:h,key:"whisker",position:h.max,width:t,boxCenter:p,rendWidth:C,rendHeight:N,flipXY:i}))}}};function I(){for(var t,e=-Number.MAX_VALUE,n=Number.MAX_VALUE,i=0;i<z;i++)P(t=h[E[i]])&&(e<t&&(e=t),t<n&&(n=t));g=e<0&&e!==-Number.MAX_VALUE,y=1<n&&n!==Number.MAX_VALUE,m=g||y}for(var F=0,B=c.length;F<B;F++){l=[],u=null;var L=c[F],W=L.data,V=null,H=null;void 0!==T.binStart?(V=L.binStart,H=L.binEnd,u=T.binStart.scale):V=(u=T.major.scale)?L.major:0;var U=0;u?u.bandwidth?V-=(U=u.bandwidth())/2:U=H-V:U=1,h=v({},{major:V,majorEnd:H},r.minor.items[F]);for(var $=0;$<j;$++)h[a[$]]=r[a[$]].items[F];if(x=U,b=A,R=void 0,w=h.box,k=w.width,M=w.maxWidthPx,_=w.minWidthPx,S=0<=x?1:-1,R=Math.min(S*x*k,isNaN(M)?b:M/b),f=(R=isNaN(_)?R:Math.max(_/b,R))*S,p=(d=(U-f)/2)+h.major+f/2,I(),m)h.oob&&(g?l.push(xs({item:h,value:0,boxCenter:p,rendWidth:C,rendHeight:N,flipXY:i,symbol:o})):y&&l.push(xs({item:h,value:1,boxCenter:p,rendWidth:C,rendHeight:N,flipXY:i,symbol:o})));else for(var Y=0;Y<D;Y++)q[O[Y]]();var X={type:"container",data:W,collider:{type:"bounds"},children:l};s.push(X)}return s}({items:f.items,settings:d,width:r,height:a,flipXY:o,resolved:f,keys:u,symbol:l})}};var Rs={errorShape:{shape:"saltire",width:2,size:.5,fill:"#333",stroke:"#333",strokeWidth:0}},Cs={shape:"circle",label:"",fill:"#333",stroke:"#ccc",strokeWidth:0,strokeLinejoin:"miter",opacity:1,x:.5,y:.5,size:1,strokeDasharray:""},Ns={maxPx:1e4,minPx:1,maxRelExtent:.1,minRelExtent:.01,maxRelDiscrete:1,minRelDiscrete:.1};function As(t,e){return t&&"function"==typeof t.bandwidth?{isBandwidth:!0,value:Math.max(1,t.bandwidth()*e)}:{isBandwidth:!1,value:Math.max(1,e)}}var Ts={require:["chart","resolver"],defaultSettings:{settings:{},data:{},animations:{enabled:!1,trackBy:function(t){return t.data.value}},style:{item:"$shape"}},render:function(t){var e,n,i,r,a,o,s,c,l,u,h,f,d,p,g,y=t.data,m=this.resolver.resolve({data:y,defaults:v({},Cs,this.style.item),settings:this.settings.settings,scaled:{x:this.rect.width,y:this.rect.height}}),x=this.rect,b=x.width,w=x.height,k=v({},Ns,this.settings.settings.sizeLimits),M=m.items,_=(e=m.settings.x,n=m.settings.y,i=b,r=w,a=k,o=As(e?e.scale:void 0,i),s=As(n?n.scale:void 0,r),c=Math.min(o.value*a[o.isBandwidth?"maxRelDiscrete":"maxRelExtent"],s.value*a[s.isBandwidth?"maxRelDiscrete":"maxRelExtent"]),l=Math.min(o.value*a[o.isBandwidth?"minRelDiscrete":"minRelExtent"],s.value*a[s.isBandwidth?"minRelDiscrete":"minRelExtent"]),{min:Math.max(1,Math.floor(l)),max:Math.max(1,Math.floor(c)),maxGlobal:a.maxPx,minGlobal:a.minPx});return u=M,h=this.rect,f=_,d=this.settings.shapeFn||ko,p=h.width,g=h.height,u.filter(function(t){return!isNaN(t.x+t.y)}).map(function(t){var e=I(t.size)?Rs.errorShape:t,n=f.min+e.size*(f.max-f.min),i={type:"rect"===e.shape?"square":e.shape,label:t.label,x:t.x*p,y:t.y*g,fill:e.fill,size:Math.min(f.maxGlobal,Math.max(f.minGlobal,n)),stroke:e.stroke,strokeWidth:e.strokeWidth,strokeDasharray:e.strokeDasharray,opacity:e.opacity};e===t.errorShape&&(i.width=e.width);var r=d(i);return r.data=t.data,r})}};Math.PI;var Es={label:"",arc:1,show:!0,fill:"#333",stroke:"#ccc",strokeWidth:1,strokeLinejoin:"round",opacity:1,innerRadius:0,outerRadius:.8,cornerRadius:0,offset:0};function zs(t,e,n,i){var r=e.x,a=e.y,o=e.width,s=e.height,c=At(),l={x:r+o/2,y:a+s/2},u=Math.min(o,s)/2,h=Math.min(o,s)/2,f=h/100;return t.map(function(t,e){var r=n[e];r.type="path";var a=h*r.outerRadius,o=u*r.innerRadius;c.innerRadius(o),c.outerRadius(a),c.cornerRadius(f*r.cornerRadius),r.d=c(t);var s,d,p,g,y,v,m,x,b,w=c.centroid(t),k=r.offset?(s=w,d=r.offset,p=a,g=o,y=z(s,2),v=y[0],m=y[1],x=Math.sqrt(v*v+m*m),{x:(v/=x)*d*(b=p-g),y:(m/=x)*d*b}):{x:0,y:0};return r.transform="translate(".concat(k.x,", ").concat(k.y,") translate(").concat(l.x,", ").concat(l.y,")"),r.desc={share:t.value/i,slice:{start:t.startAngle,end:t.endAngle,innerRadius:o,outerRadius:a,offset:{x:l.x+k.x,y:l.y+k.y}}},r})}var Os={require:["chart","resolver"],defaultSettings:{settings:{startAngle:0,endAngle:2*Math.PI,padAngle:0,slice:{}},style:{slice:"$shape"},data:{}},render:function(t){for(var e,n,i=t.data,r=[],a=[],o=this.settings.settings,s=this.resolver.resolve({data:i,defaults:v({},Es,this.style.slice),settings:o.slice}).items,c=0,l=0,u=s.length;l<u;l++){var h=(e=o,n=s[l],e.slice&&"arc"in e.slice?n.arc:n.data.value);0<h&&s[l].outerRadius>=s[l].innerRadius&&(r.push(h),a.push(s[l]),c+=h)}var f=function(){var t=qt,e=Dt,n=null,i=ut(0),r=ut(wt),a=ut(0);function o(o){var s,c,l,u,h,f=o.length,d=0,p=new Array(f),g=new Array(f),y=+i.apply(this,arguments),v=Math.min(wt,Math.max(-wt,r.apply(this,arguments)-y)),m=Math.min(Math.abs(v)/f,a.apply(this,arguments)),x=m*(v<0?-1:1);for(s=0;s<f;++s)0<(h=g[p[s]=s]=+t(o[s],s,o))&&(d+=h);for(null!=e?p.sort(function(t,n){return e(g[t],g[n])}):null!=n&&p.sort(function(t,e){return n(o[t],o[e])}),s=0,l=d?(v-f*x)/d:0;s<f;++s,y=u)c=p[s],u=y+(0<(h=g[c])?h*l:0)+x,g[c]={data:o[c],index:s,value:h,startAngle:y,endAngle:u,padAngle:m};return g}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:ut(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:ut(+t),o):i},o.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:ut(+t),o):r},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:ut(+t),o):a},o}().sortValues(null);return f.startAngle(o.startAngle),f.endAngle(o.endAngle),f.padAngle(o.padAngle),zs(f(r),v({},this.rect,{x:0,y:0}),a,c)}};var js=function(t){function e(e){if(t[e.type]&&t[e.type].condition(e)){var n=t[e.type],i=void 0===n.conditionAppend||n.conditionAppend(e);n.items.forEach(function(t){var n=Math.round(e[t.key]),r=e[t.key]-n;e[t.key]=n,i&&"append"===t.type&&(0<r?e[t.key]+=.5:e[t.key]-=.5)})}}return void 0===t&&(t={line:{append:["x1","x2","y1","y2"],round:[],condition:function(t){return t.x1===t.x2||t.y1===t.y2},conditionAppend:function(t){return t.strokeWidth%2!=0}},rect:{append:["x","y"],round:["width","height"],condition:function(){return!0},conditionAppend:function(t){return t.strokeWidth%2!=0}}}),Object.keys(t).forEach(function(e){var n=t[e];n.items=[],n.append.forEach(function(t){n.items.push({key:t,type:"append"})}),n.round.forEach(function(t){n.items.push({key:t,type:"round"})})}),e.multiple=function(t){return t.forEach(function(t){return e(t)})},e}(),Ds=function(){function t(){b(this,t),this.reset(),this.push.apply(this,arguments)}return k(t,[{key:"transposeCoordinate",value:function(t,e,n){if("number"==typeof e&&isFinite(e)){var i=t.substring(0,1);if("x"===i||"cx"===t)return e*this.width;if("width"===t)return e*this.width;if("r"===t)return e*(n?this.height:this.width);if("y"===i||"cy"===t)return e*this.height;if("height"===t)return e*this.height}return e}},{key:"push",value:function(){var t;return(t=this.storage).push.apply(t,arguments),this}},{key:"processItem",value:function(e){var n={},i=void 0!==e.flipXY?e.flipXY:this.flipXY,r=void 0!==e.crisp?e.crisp:this.crisp;if(e.fn&&"function"==typeof e.fn){var a=i?this.height:this.width,o=i?this.width:this.height;e=e.fn({width:a,height:o,flipXY:i});for(var s=Object.keys(e),c=0,l=s.length;c<l;c++){var u=s[c];n[t.evaluateKey(u,i)]=e[u]}}else for(var h=Object.keys(e),f=0,d=h.length;f<d;f++){var p=h[f],g=t.evaluateKey(p,i),y=this.transposeCoordinate(g,e[p],i);n[g]=y}return r&&js(n),n}},{key:"output",value:function(){for(var t=[],e=0,n=this.storage.length;e<n;e++){var i=this.processItem(this.storage[e]);t.push(i)}return t}},{key:"reset",value:function(){this.storage=[],this.flipXY=!1,this.crisp=!1,this.width=0,this.height=0}}],[{key:"evaluateKey",value:function(t,e){if(e){var n=t.substring(0,1),i=t.substring(1);if("x"===n)return"y".concat(i);if("y"===n)return"x".concat(i);if("cx"===t)return"cy";if("cy"===t)return"cx";if("width"===t)return"height";if("height"===t)return"width"}return t}}]),t}();function qs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(Ds,e)}function Ps(t,e){return t&&e?t.cachedTicks&&t.cachedTicks()||t.ticks({distance:e}):[]}var Is={created:function(){},require:["chart","renderer","resolver"],defaultSettings:{layout:{displayOrder:0},style:{ticks:"$guide-line",minorTicks:"$guide-line--minor"}},beforeRender:function(){this.blueprint=qs(),this.blueprint.width=this.rect.width,this.blueprint.height=this.rect.height,this.blueprint.x=this.rect.x,this.blueprint.y=this.rect.y,this.blueprint.crisp=!0},render:function(){var t=this;if(this.x=this.settings.x?this.chart.scale(this.settings.x):null,this.y=this.settings.y?this.chart.scale(this.settings.y):null,Ga(this,"x",this.rect.width),Ga(this,"y",this.rect.height),!this.x&&!this.y)return[];this.settings.ticks=v({show:!0},this.style.ticks,this.settings.ticks||{}),this.settings.minorTicks=v({show:!1},this.style.minorTicks,this.settings.minorTicks||{}),this.lines={x:[],y:[]},this.lines.x=Ps(this.x,this.rect.width),this.lines.y=Ps(this.y,this.rect.height),this.lines.y=this.lines.y.map(function(t){return v(t,{flipXY:!0})});var e=function(e){var n=e.dir,i=e.isMinor,r=t.lines[n].filter(function(t){return!!t.isMinor===i}),a=i?t.settings.minorTicks:t.settings.ticks;t.resolver.resolve({settings:a,data:{items:r,dir:n}}).items.forEach(function(e){var n=e.data;e.show&&t.blueprint.push({type:"line",x1:n.position,y1:0,x2:n.position,y2:1,stroke:e.stroke||"black",strokeWidth:void 0!==e.strokeWidth?e.strokeWidth:1,strokeDasharray:void 0!==e.strokeDasharray?e.strokeDasharray:void 0,flipXY:n.flipXY||!1})})};return e({dir:"x",isMinor:!1}),e({dir:"x",isMinor:!0}),e({dir:"y",isMinor:!1}),e({dir:"y",isMinor:!0}),this.blueprint.output()}};function Fs(t){if(void 0===t)return 0;if("number"==typeof t&&isFinite(t))return t;if("string"==typeof t)switch(t){case"center":case"middle":return.5;case"bottom":case"right":return 1;case"top":case"left":default:return 0}return 0}function Bs(t){var e={value:t.value};return t.label&&(e.label=t.label.text),e}function Ls(t){return void 0!==t.value}var Ws={require:["chart","renderer"],defaultSettings:{layout:{displayOrder:0},style:{oob:{show:!0,width:10,fill:"#1A1A1A",stroke:"transparent",strokeWidth:0,opacity:1,text:{fontFamily:"Arial",stroke:"transparent",fill:"#fff",strokeWidth:0,opacity:1},triangle:{fill:"#4D4D4D",stroke:"transparent",strokeWidth:0,opacity:1},padding:{x:28,y:5}},line:{stroke:"#000"},label:{strokeWidth:0}}},preferredSize:function(){return 30},beforeRender:function(){this.blueprint=qs(),this.blueprint.width=this.rect.width,this.blueprint.height=this.rect.height,this.blueprint.x=this.rect.x,this.blueprint.y=this.rect.y,this.blueprint.crisp=!0},render:function(){var t=this,e=this.settings;if(this.lines={x:[],y:[]},this.lines.x=e.lines&&e.lines.x||[],this.lines.y=e.lines&&e.lines.y||[],0===this.lines.x.length&&0===this.lines.y.length)return[];var n={x0:[],x1:[],y0:[],y1:[]};this.lines.x=this.lines.x.filter(Ls).map(function(e){if(e.scale){var n=t.chart.scale(e.scale);return v(e,{scale:n,position:n(e.value)})}return v(e,{position:e.value})}),this.lines.y=this.lines.y.filter(Ls).map(function(e){if(e.scale){var n=t.chart.scale(e.scale);return v(e,{scale:n,position:n(e.value),flipXY:!0})}return v(e,{position:e.value,flipXY:!0})}),this.lines.x=this.lines.x.filter(function(t){return!(t.position<0||1<t.position)||(n["x".concat(1<t.position?1:0)].push(Bs(t)),!1)}),this.lines.y=this.lines.y.filter(function(t){return!(t.position<0||1<t.position)||(n["y".concat(1<t.position?1:0)].push(Bs(t)),!1)});var i=[];return O(this.lines.x).concat(O(this.lines.y)).forEach(function(n){(!0===n.show||void 0===n.show)&&function(t){var e,n=t.chart,i=t.blueprint,r=t.renderer,a=t.p,o=t.settings,s=t.items,c=!0,l=!1,u=!1,h=!1,f=v(!0,{},o.style.line,a.line||{});if(e=i.processItem({type:"line",x1:a.position,y1:0,x2:a.position,y2:1,stroke:f.stroke||"black",strokeWidth:f.strokeWidth||1,flipXY:a.flipXY||!1}),a.label){var d,p=v(!0,{fill:"#000",fontFamily:"Arial",fontSize:"12px",opacity:1,maxWidth:1,maxWidthPx:9999,padding:5,background:{fill:"#fff",stroke:"transparent",strokeWidth:0,opacity:.5}},o.style.label||{},{fill:f.stroke},a.label),g={width:0,height:0},y="";if("string"==typeof a.formatter)d=n.formatter(a.formatter);else if("object"===x(a.formatter))d=n.formatter(a.formatter);else if(void 0!==a.scale&&a.scale.data){var m=a.scale.data()&&a.scale.data().fields;d=m&&m[0]?m[0].formatter():null}d?y=" (".concat(d(a.value),")"):a.scale&&(y=" (".concat(a.value,")")),y&&(g=r.measureText({text:y,fontFamily:p.fontFamily,fontSize:p.fontSize}));var b=r.measureText({text:p.text||"",fontFamily:p.fontFamily,fontSize:p.fontSize}),w=b.width+g.width,k=Math.max(b.height,g.height),M=p.padding,_=Fs(a.flipXY?p.vAlign:p.align),S=Fs(a.flipXY?p.align:p.vAlign),R=Math.min(1+w+2*M,p.maxWidth*i.width,p.maxWidthPx),C=k+2*M,N=a.flipXY?C:R,A=a.flipXY?R:C;if((l=i.processItem({fn:function(t){var e=t.width,n=t.height,r=a.position*e-(a.flipXY?C:R)*(1-_);return{type:"rect",x:r=a.flipXY?r:Math.max(r,0),y:Math.max(Math.abs(S*n-A*S),0),width:a.flipXY?N:Math.min(N,i.width-r),height:A,stroke:p.background.stroke,strokeWidth:p.background.strokeWidth,fill:p.background.fill,opacity:p.background.opacity}},flipXY:a.flipXY||!1})).x<-1||l.x+l.width>i.width+1||l.y<-1||l.y+l.height>i.height+1)l=void 0;else{u={type:"text",text:p.text||"",fill:p.fill,opacity:p.opacity,fontFamily:p.fontFamily,fontSize:p.fontSize,x:l.x+M,y:l.y+l.height/2+k/3,maxWidth:l.width-2*M-g.width,anchor:"start"},y&&(h={type:"text",text:y||"",fill:p.fill,opacity:p.opacity,fontFamily:p.fontFamily,fontSize:p.fontSize,x:u.x+3+(l.width-(g.width+2*M)),y:u.y});for(var T=0,E=s.length;T<E;T++){var z=s[T];"rect"===z.type?Wo(l,z)&&(c=!1):"line"===z.type&&a.flipXY===z.flipXY&&Ho(l,z)&&(c=!1)}}}s.push(e),c&&l&&u&&(s.push(l,u),h&&s.push(h))}({chart:t.chart,blueprint:t.blueprint,renderer:t.renderer,p:n,settings:e,items:i})}),e.style.oob.show&&function(t){for(var e=t.blueprint,n=t.oob,i=t.settings,r=t.items,a=Object.keys(n),o=i.style.oob||{},s=function(t,i){var s=a[t],c=n[s];if(0<c.length){var l=s.charAt(1),u="y"===s.charAt(0),h=o.padding.x+o.width,f=o.padding.y+o.width,d="bottom";d=u?"1"===l?"bottom":"top":"1"===l?"right":"left";var p=e.processItem({fn:function(t){var e=t.width,n=t.height,i=l*e+("1"===l?-h:h),r=u?f:n-f;return"arc"===o.type?{type:"path",d:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"bottom";if(n*=.8,"left"===i||"right"===i){var r="right"===i;return"\n      M ".concat(t," ").concat(e-n,"\n      A ").concat(1.25*n," ").concat(1.25*n,", 0, 1, ").concat(r?0:1,", ").concat(t," ").concat(e+n,"\n      L ").concat(r?t+n:t-n," ").concat(e," Z\n    ")}var a="bottom"===i;return"\n    M ".concat(t-n," ").concat(e,"\n    A ").concat(1.25*n," ").concat(1.25*n,", 0, 1, ").concat(a?1:0,", ").concat(t+n," ").concat(e,"\n    L ").concat(t," ").concat(a?e+n:e-n," Z\n  ")}(u?r:i,u?i:r,o.width,d),x:i,y:r,stroke:o.stroke,fill:o.fill,strokeWidth:o.strokeWidth||0}:{type:"circle",cx:i,cy:r,r:o.width,stroke:o.stroke,fill:o.fill,strokeWidth:o.strokeWidth||0,opacity:o.opacity,data:c}},flipXY:u}),g=p.cx||p.x,y=p.cy||p.y,v={type:"text",text:c.length||"",x:g-.4*o.width,y:y+.4*o.width,fontFamily:o.text.fontFamily,fontSize:"".concat(1.3*o.width,"px"),stroke:o.text.stroke,fill:o.text.fill,strokeWidth:o.text.strokeWidth||0,opacity:o.text.opacity},m={type:"path",d:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"bottom";if(n*=.75,"left"===i||"right"===i){var r="right"===i;return"\n      M ".concat(t+=r?1.5*n:-1.5*n," ").concat(e-n,"\n      L ").concat(t," ").concat(e+n,"\n      L ").concat(r?t+n:t-n," ").concat(e," Z\n    ")}var a="bottom"===i;return e+=a?1.5*n:-1.5*n,"\n    M ".concat(t-n," ").concat(e,"\n    L ").concat(t+n," ").concat(e,"\n    L ").concat(t," ").concat(a?e+n:e-n," Z\n  ")}(g,y,o.width,d),x:g,y:y,stroke:o.triangle.stroke,fill:o.triangle.fill,strokeWidth:o.triangle.strokeWidth||0,opacity:o.triangle.opacity};r.push(p,v,m)}},c=0,l=a.length;c<l;c++)s(c)}({blueprint:this.blueprint,oob:n,settings:e,items:i}),i}};function Vs(t){var e={type:"line",x1:0,x2:0,y1:0,y2:0,collider:{type:null}};return"top"===t.align||"bottom"===t.align?(e.x1=t.innerRect.x-t.outerRect.x,e.x2=t.innerRect.width+t.innerRect.x,e.y1=e.y2="top"===t.align?t.innerRect.height-t.padding:t.padding):(e.x1=e.x2="left"===t.align?t.innerRect.width-t.padding:t.padding,e.y1=t.innerRect.y-t.outerRect.y,e.y2=t.innerRect.height+t.innerRect.y),function(t,e){v(t,e.style);var n=t.strokeWidth/2;"top"===e.align?(t.y1-=n,t.y2-=n):"bottom"===e.align?(t.y1+=n,t.y2+=n):"left"===e.align?(t.x1-=n,t.x2-=n):"right"===e.align&&(t.x1+=n,t.x2+=n)}(e,t),e}function Hs(t,e,n){var i,r,a,o,s,c,l,u,h,f,d,p,g;n.layered||!n.stepSize?(g=e).collider={type:"polygon",vertices:[{x:g.boundingRect.x,y:g.boundingRect.y},{x:g.boundingRect.x+g.boundingRect.width,y:g.boundingRect.y},{x:g.boundingRect.x+g.boundingRect.width,y:g.boundingRect.y+g.boundingRect.height},{x:g.boundingRect.x,y:g.boundingRect.y+g.boundingRect.height}]}:n.tilted?(i=e,a=(r=n).angle*(Math.PI/180),o=Math.max(r.stepSize/2,i.boundingRect.height/2),s="start"===i.anchor,c="end"===i.anchor&&a<0,l="start"===i.anchor&&0<=a,u=i.boundingRect.y+(l||c?i.boundingRect.height:0),h=[{x:i.x-o,y:u},{x:i.x+o,y:u}].map(function(t){return xo(t,a,{x:i.x,y:i.y})}),f={x:s?i.boundingRect.x+i.boundingRect.width+10:i.boundingRect.x-10,y:i.boundingRect.y+i.boundingRect.height},d={x:s?i.boundingRect.x+i.boundingRect.width+10:i.boundingRect.x-10,y:i.boundingRect.y},p=0<=a?[f,d]:[d,f],h.push.apply(h,p),i.collider={type:"polygon",vertices:h}):function(t,e,n){if("bottom"===n.align||"top"===n.align){var i=t.position*n.innerRect.width+(n.innerRect.x-n.outerRect.x-n.stepSize/2);e.collider={type:"rect",x:i,y:0,width:i<0?n.stepSize+i:n.stepSize,height:n.innerRect.height}}else{var r=t.position*n.innerRect.height+(n.innerRect.y-n.outerRect.y-n.stepSize/2);e.collider={type:"rect",x:0,y:r,width:n.innerRect.width,height:r<0?n.stepSize+r:n.stepSize}}var a=e.collider;a.x=Math.max(a.x,0),a.y=Math.max(a.y,0);var o=a.x+a.width-(n.outerRect.x+n.outerRect.width);a.width=0<o?a.width-o:a.width;var s=a.y+a.height-(n.outerRect.y+n.outerRect.height);a.height=0<s?a.height-s:a.height}(t,e,n)}function Us(t,e){var n=isNaN(t.style.align)?.5:Math.min(Math.max(t.style.align,0),1),i=0;if(t.tilted)i=t.stepSize*n;else{var r=e?t.textRect.height:t.textRect.width;i=Math.max(0,t.stepSize-r)*n}return i}function $s(t,e){var n,i,r,a,o,s,c,l={type:"text",text:(n=t.label,"string"==typeof n||"number"==typeof n?n:"-"),x:0,y:0,maxWidth:e.maxWidth,maxHeight:e.maxHeight};return"top"===e.align||"bottom"===e.align?(l.x=t.start*e.innerRect.width+(e.innerRect.x-e.outerRect.x)+Us(e,!1),l.y="top"===e.align?e.innerRect.height:0,l.anchor=e.stepSize?"start":"middle",l.x+=isNaN(e.style.offset)?0:+e.style.offset):(l.y=t.start*e.innerRect.height+(e.innerRect.y-e.outerRect.y)+Us(e,!0),l.x="left"===e.align?e.innerRect.width:0,l.anchor="left"===e.align?"end":"start",l.baseline=e.stepSize?"text-before-edge":"central",l.y+=isNaN(e.style.offset)?0:+e.style.offset),i=l,r=e,["fill","fontSize","fontFamily"].forEach(function(t){i[t]=r.style[t]}),function(t,e){if(!e.tilted&&!e.stepSize)if("top"===e.align||"bottom"===e.align){var n=e.outerRect.width,i=Math.min(e.maxWidth/2,e.textRect.width/2),r=t.x-i,a=t.x+i;r<0?(t.anchor="start",t.x=e.innerRect.x-e.outerRect.x):n<a&&(t.anchor="end",t.x=e.innerRect.width+e.innerRect.x)}else{var o=e.outerRect.height,s=e.maxHeight/2,c=t.y-s,l=t.y+s;c<0?(t.y=e.innerRect.y-e.outerRect.y,t.baseline="text-before-edge"):o<l&&(t.y=e.innerRect.height+(e.innerRect.y-e.outerRect.y),t.baseline="text-after-edge")}}(l,e),a=l,"top"===(o=e).align?a.y-=o.padding:"bottom"===o.align?a.y+=o.padding+o.maxHeight:"left"===o.align?a.x-=o.padding:"right"===o.align&&(a.x+=o.padding),function(t,e){if(e.tilted){var n=-e.angle,i=n*(Math.PI/180);"bottom"===e.align?(t.x-=e.maxHeight*Math.sin(i)/2,t.y-=e.maxHeight,t.y+=e.maxHeight*Math.cos(i)/2):t.x-=e.maxHeight*Math.sin(i)/3,t.transform="rotate(".concat(n,", ").concat(t.x,", ").concat(t.y,")"),t.anchor="bottom"===e.align==e.angle<0?"start":"end";var r=Math.cos(i)*e.maxWidth;if("bottom"===e.align==e.angle<0){var a=e.outerRect.width-e.paddingEnd;a<t.x+r&&(t.maxWidth=(a-t.x-10)/Math.cos(i))}else{var o=e.paddingEnd;t.x-r<o&&(t.maxWidth=(t.x-o-10)/Math.cos(i))}}}(l,e),c=e,(s=l).boundingRect=c.textBounds(s),Hs(t,l,e),l}function Ys(t,e){var n,i,r,a,o,s={type:"line",x1:0,x2:0,y1:0,y2:0,collider:{type:null}};return"top"===e.align||"bottom"===e.align?(s.x1=s.x2=t.position*e.innerRect.width+(e.innerRect.x-e.outerRect.x),s.y1="top"===e.align?e.innerRect.height:0,s.y2="top"===e.align?s.y1-e.tickSize:s.y1+e.tickSize):(s.y1=s.y2=t.position*e.innerRect.height+(e.innerRect.y-e.outerRect.y),s.x1="left"===e.align?e.innerRect.width:0,s.x2="left"===e.align?s.x1-e.tickSize:s.x1+e.tickSize),v(s,e.style),n=s,"top"===(i=e).align?(n.y1-=i.padding,n.y2-=i.padding):"bottom"===i.align?(n.y1+=i.padding,n.y2+=i.padding):"left"===i.align?(n.x1-=i.padding,n.x2-=i.padding):"right"===i.align&&(n.x1+=i.padding,n.x2+=i.padding),a=e,o=(r=s).strokeWidth/2,r.x1===a.innerRect.width?(r.x1-=o,r.x2-=o):0===r.x1?(r.x1+=o,r.x2+=o):r.y1===a.innerRect.height?(r.y1-=o,r.y2-=o):0===r.y1&&(r.y1+=o,r.y2+=o),s}function Xs(t){return!t.isMinor&&0<=t.position&&t.position<=1}function Js(t){var e,n,i,r,a,o=t.rect,s=t.state,c=t.majorTicks,l=t.measure;return t.horizontal?function(t){for(var e=t.majorTicks,n=t.measureText,i=t.rect,r="layered"===t.state.labels.activeMode?2:1,a=i.width,o=e.map(function(t){return t.label}).map(function(t){return"".concat(t.slice(0,1)).concat(1<t.length?"…":"")}).map(n).map(function(t){return t.width}),s=0;s<e.length;++s){var c=e[s];if(r*a*Math.abs(c.start-c.end)<o[s])return!0}return!1}({majorTicks:c,measureText:l,rect:o,state:s}):(n=(e={majorTicks:c,measureText:l,rect:o,state:s}).majorTicks,i=e.measureText,r=e.rect.height,a=i("M").height,!(n.length<2)&&r*Math.abs(n[0].position-n[1].position)<a)}function Ks(t){var e=t.value,n=t.maxValue,i=t.minValue,r=t.range,a=t.modifier;return isNaN(r)||isNaN(a)||(e=r*a),n<e&&(e=n),e<i&&(e=i),e}function Gs(t){var e=t.isDiscrete,n=t.rect,i=t.formatter,r=t.measureText,a=t.scale,o=t.settings,s=t.state,c=0,l={left:0,top:0,right:0,bottom:0},u=o.labels,h=u.maxLengthPx,f=u.minLengthPx;if(o.labels.show){var d,p,g=o.align,y="top"===g||"bottom"===g,v=y?n.width:n.height,m=a.ticks({settings:o,distance:v,formatter:i}).filter(Xs),x=function(t){var e=r({text:t,fontSize:o.labels.fontSize,fontFamily:o.labels.fontFamily});return e.width=Ks({value:e.width,maxValue:h,minValue:f}),e};if(e&&y&&"auto"===o.labels.mode&&(function(t){var e=t.majorTicks,n=t.measure,i=t.rect,r=t.state,a=t.settings,o=a.labels.maxGlyphCount,s="layered"===r.labels.activeMode?2:1,c=a.labels.tiltThreshold?a.labels.tiltThreshold:.7,l=n("…").width,u=i.width;if(isNaN(o))for(var h=0;h<e.length;h++){var f=e[h],d=f.label,p=n(d).width*(1<d.length?c:1);if(s*u*Math.abs(f.start-f.end)<p+l)return!0}else if(s*u*e.reduce(function(t,e){return Math.min(Math.abs(e.start-e.end),t)},1/0)<n("M").width*c*o+l)return!0;return!1}({majorTicks:m,measure:x,rect:n,state:s,settings:o})?s.labels.activeMode="tilted":s.labels.activeMode="horizontal"),!o.labels.filterOverlapping&&"tilted"!==s.labels.activeMode&&Js({rect:n,state:s,majorTicks:m,measure:x,horizontal:y}))return{size:Math.max(n.width,n.height),isToLarge:!0};if("tilted"===s.labels.activeMode){var b=Math.abs(o.labels.tiltAngle)*(Math.PI/180);d=function(t){return Ks({value:t.width,maxValue:h,minValue:f})*Math.sin(b)+t.height*Math.cos(b)}}else d=y?function(t){return t.height}:function(t){return Ks({value:t.width,maxValue:h,minValue:f})};if(y&&"tilted"!==s.labels.activeMode)p=["M"];else if(isNaN(o.labels.maxGlyphCount))p=m.map(function(t){return t.label});else{for(var w="",k=0;k<o.labels.maxGlyphCount;k++)w+="M";p=[w]}var M=p.map(x),_=M.map(d),S=Math.max.apply(Math,O(_).concat([0]));if(c+=S,c+=o.labels.margin,"layered"===s.labels.activeMode&&(c*=2),"tilted"===s.labels.activeMode){var R="bottom"===o.align==0<=o.labels.tiltAngle,C=Math.abs(o.labels.tiltAngle)*(Math.PI/180),N=(S-r("M").height*Math.cos(C))/Math.sin(C),A=Math.min(o.labels.maxEdgeBleed,Math.max.apply(Math,O(M.map(function(t){return Math.min(N,t.width)*Math.cos(C)+t.height}).map(function(t,e){var i=m[e]?m[e].position:0;return R?t-i*n.width:t-(1-i)*n.width})).concat([0])))+o.paddingEnd;if(l[R?"left":"right"]=A,!o.labels.filterOverlapping&&function(t){var e=t.majorTicks,n=t.measureText,i=t.rect,r=t.bleedSize,a=t.angle;if(e.length<2)return!1;if(0===a)return!0;var o=Math.abs(a),s=(i.width-r)*Math.abs(e[0].position-e[1].position),c=n("M").height,l=1/s;return Math.sin(o*(Math.PI/180))/l<c}({majorTicks:m,measureText:r,rect:n,bleedSize:A,angle:o.labels.tiltAngle}))return{size:Math.max(n.width,n.height),isToLarge:!0}}}return{size:c,edgeBleed:l}}var Zs=2,Qs=function(t,e,n){return t.width*Math.abs(e.position-n.position)},tc=function(t){var e=t.innerRect,n=t.outerRect,i=t.tick,r=t.nextWidth,a=e.x-n.x,o=e.width*i.position+a,s=2*Math.min(r,o),c=0===i.position?e.width/2-Zs:0;return Math.max(r,s,c)},ec=function(t){var e=t.innerRect,n=t.outerRect,i=t.tick,r=t.prevWidth,a=e.x-n.x,o=n.width-e.width-a,s=e.width-e.width*i.position+o,c=2*Math.min(r,s),l=1===i.position?e.width/2-Zs:0;return Math.max(r,c,l)};function nc(t){var e=0;return e+=t.paddingStart,e+=t.line.show?t.line.strokeWidth:0,e+(t.ticks.show?t.ticks.margin:0)}function ic(t){var e=0;return e+=t.ticks.show?t.ticks.tickSize:0,e+(nc(t)+t.labels.margin)}function rc(t,e){return t.map(function(t){return Ys(t,e)})}function ac(t,e){return e?Math.abs(e.end-e.start):t.bandwidth()}function oc(t){var e=t.textMetrics,n=t.settings,i=t.innerRect,r=t.scale,a=t.tilted,o=t.layered,s=t.tick,c=e.height,l=ac(r,s),u={width:0,height:c};if("left"===n.align||"right"===n.align)u.width=i.width-ic(n)-n.paddingEnd;else if(o)u.width=l*i.width*2;else if(a){var h=Math.abs(n.labels.tiltAngle)*(Math.PI/180);u.width=(i.height-ic(n)-n.paddingEnd-c*Math.cos(h))/Math.sin(h)}else u.width=l*i.width;return u.width=Ks({value:u.width,maxValue:n.labels.maxLengthPx,minValue:n.labels.minLengthPx}),u}function sc(t){var e,n,i,r,a,o,s,c,l,u,h,f,d=t.textMetrics,p=t.settings,g=t.innerRect,y=t.outerRect,v=t.tilted,m=t.layered,x=t.tick,b=t.index,w=t.major,k=d.height,M={width:0,height:k};if("left"===p.align||"right"===p.align)M.width=g.width-ic(p)-p.paddingEnd;else if(v){var _=Math.abs(p.labels.tiltAngle)*(Math.PI/180);M.width=(g.height-ic(p)-p.paddingEnd-k*Math.cos(_))/Math.sin(_)}else M.width=(n=(e={layered:m,major:w,innerRect:g,outerRect:y,tick:x,index:b}).layered,i=e.major,r=e.innerRect,a=e.outerRect,o=e.tick,s=e.index,l=i[s-(c=n?2:1)],u=i[s+c],h=l?Qs(r,o,l)/2-Zs:1/0,f=u?Qs(r,o,u)/2-Zs:1/0,i.length<2?r.width:l?u?2*Math.min(h,f):ec({innerRect:r,outerRect:a,tick:o,prevWidth:h}):tc({innerRect:r,outerRect:a,tick:o,nextWidth:f}));return M.width=Ks({value:M.width,maxValue:p.labels.maxLengthPx,minValue:p.labels.minLengthPx}),M}function cc(t){var e;function n(){return e=sc,n}function i(){return e=oc,i}function r(t){var n,i,r,a,o,s,c,l,u,h,f=t.settings,d=t.scale,p=t.innerRect,g=t.outerRect,y=t.measureText,v=t.ticks,m=t.state,x=t.textBounds,b=[],w=v.filter(function(t){return!t.isMinor}),k=v.filter(function(t){return t.isMinor}),M={innerRect:p,align:f.align,outerRect:g},_="tilted"===m.labels.activeMode,S="layered"===m.labels.activeMode;if(f.line.show&&(M.style=f.line,M.padding=f.paddingStart,b.push(Vs(M))),f.ticks.show&&(M.style=f.ticks,M.tickSize=f.ticks.tickSize,M.padding=nc(f),n=rc(w,M)),f.labels.show){var R=ic(f);M.style=f.labels,M.padding=R,M.tilted=_,M.layered=S,M.angle=f.labels.tiltAngle,M.paddingEnd=f.paddingEnd,M.textBounds=x;var C=function(t,n){var i,r;M.textRect=(i={tick:t,measureText:y,style:M.style},r=i.style,(0,i.measureText)({text:i.tick.label,fontSize:r.fontSize,fontFamily:r.fontFamily}));var a,o,s,c,l,u=e({textMetrics:M.textRect,settings:f,innerRect:p,outerRect:g,scale:d,tilted:_,layered:S,tick:t,major:w,index:n});M.maxWidth=u.width,M.maxHeight=u.height,M.stepSize=(o=(a={innerRect:p,scale:d,ticks:v,settings:f,tick:t}).innerRect,s=a.scale,c=a.settings,l=a.tick,("top"===c.align||"bottom"===c.align?o.width:o.height)*ac(s,l))},N=[];N=!S||"top"!==f.align&&"bottom"!==f.align?(i=M,r=C,w.map(function(t,e){r(t,e);var n=$s(t,i);return n.data=t.data,n})):(a=w,s=f,c=C,l=(o=M).padding,u=ic(s),a.map(function(t,e){c(t,e);var n=u+o.maxHeight+s.labels.margin;o.layer=e%2,o.padding=e%2==0?l:n;var i=$s(t,o);return i.data=t.data,i})),f.labels.filterOverlapping&&function(t,e,n){var i=function(e,n){return Wo(U(1,t[e].boundingRect),U(1,t[n].boundingRect))};if(n&&n.tilted){var r=Math.abs(n.angle);i=function(e,n){var i=1/Math.abs(t[e].x-t[n].x),a=Math.sin(r*(Math.PI/180))/i;return t[e].boundingRect.height>a}}for(var a=0;a<=t.length-1;a++)for(var o=a+1;o<=Math.min(a+5,a+(t.length-1));o++)t[a]&&t[o]&&i(a,o)&&(o===t.length-1?(t.splice(a,1),e&&e.splice(a,1)):(t.splice(o,1),e&&e.splice(o,1)),o--,a--)}(N,n,M),b.push.apply(b,O(N))}return f.minorTicks&&f.minorTicks.show&&0<k.length&&(M.style=f.minorTicks,M.tickSize=f.minorTicks.tickSize,M.padding=(h=f).line.strokeWidth+h.minorTicks.margin,b.push.apply(b,O(rc(k,M)))),n&&b.push.apply(b,O(n)),b}return i.build=n.build=r,t?i():n()}var lc={labels:{show:!0,tiltAngle:40,tiltThreshold:.7,maxEdgeBleed:1/0,margin:4,maxLengthPx:150,minLengthPx:0,mode:"auto",maxGlyphCount:NaN,align:.5,offset:0,filterOverlapping:!1},ticks:{show:!1,margin:0,tickSize:4},line:{show:!1},paddingStart:0,paddingEnd:10,align:"auto"},uc={labels:{show:!0,margin:4,maxLengthPx:150,minLengthPx:0,align:.5,offset:0,filterOverlapping:!0},ticks:{show:!0,margin:0,tickSize:8},minorTicks:{show:!1,tickSize:3,margin:0},line:{show:!0},paddingStart:0,paddingEnd:10,align:"auto"};var hc={require:["chart","renderer","dockConfig"],defaultSettings:{layout:{displayOrder:0,prioOrder:0},settings:{},style:{labels:"$label",ticks:"$guide-line",minorTicks:"$guide-line--minor",line:"$guide-line"}},created:function(){this.state={isDiscrete:!!this.scale.bandwidth,isHorizontal:!1,labels:{activeMode:"horizontal"},ticks:[],innerRect:{width:0,height:0,x:0,y:0},outerRect:{width:0,height:0,x:0,y:0},defaultDock:void 0,concreteNodeBuilder:void 0,settings:void 0},this.state.isDiscrete?this.state.defaultDock="bottom":this.state.defaultDock="left",this.setState(this.settings)},setState:function(){var t,e,n,i,r,a,o,s,c,l,u,h,f,d,p;this.state.isDiscrete=!!this.scale.bandwidth,this.state.settings=(a=(t=this).state,o=t.style,s=t.settings,c=v(!0,{},a.isDiscrete?lc:uc,o),l=v(!0,{},c,s.settings),u=s.layout.dock||a.defaultDock,l.dock=u,l.align=(e=s.settings.align,n=u,r=["left","right"],-1!==(i=["top","bottom"]).indexOf(e)&&-1===r.indexOf(n)?e:-1!==r.indexOf(e)&&-1===i.indexOf(n)?e:n),l.labels.tiltAngle=Math.max(-90,Math.min(l.labels.tiltAngle,90)),l),this.state.concreteNodeBuilder=cc(this.state.isDiscrete),this.dockConfig.dock(this.state.settings.dock),this.state.isHorizontal="top"===this.state.settings.align||"bottom"===this.state.settings.align,this.state.labels.activeMode=(h=this.state,f=this.state.settings,d=this.state.isDiscrete,p=f.labels.mode,d&&h.isHorizontal?"auto"===p?h.labels.activeMode:-1!==["layered","tilted"].indexOf(f.labels.mode)&&-1!==["top","bottom"].indexOf(f.dock)?p:"horizontal":"horizontal")},preferredSize:function(t){var e=this.formatter,n=this.state,i=this.scale,r=this.state.isHorizontal?t.inner.width:t.inner.height;return this.state.pxScale=Za(i,r),function(t){var e=t.isDiscrete,n=t.rect,i=t.formatter,r=t.measureText,a=t.scale,o=t.settings,s=0,c=Gs({isDiscrete:e,rect:n,formatter:i,measureText:r,scale:a,settings:o,state:t.state}),l=c.size,u=c.edgeBleed;if(s+=l,c.isToLarge)return{size:s};if(o.ticks.show&&(s+=o.ticks.margin,s+=o.ticks.tickSize),o.minorTicks&&o.minorTicks.show){var h=o.minorTicks.margin+o.minorTicks.tickSize;s<h&&(s=h)}return o.line.show&&(s+=o.line.strokeWidth),s+=o.paddingStart,{size:s+=o.paddingEnd,edgeBleed:u}}({isDiscrete:this.state.isDiscrete,rect:t.inner,formatter:e,measureText:this.renderer.measureText,scale:this.state.pxScale,settings:this.state.settings,state:n})},beforeUpdate:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).settings;this.setState(t)},resize:function(t){var e,n,i,r=t.inner,a=t.outer,o=v({},r,(e={align:this.state.settings.align,inner:r},n=e.align,i=e.inner,"left"===n?{x:i.width+i.x}:"right"===n||"bottom"===n?i:{y:i.y+i.height})),s=a||o;return v(this.state.innerRect,o),v(this.state.outerRect,s),a},beforeRender:function(){var t=this.scale,e=this.formatter,n=this.state.isHorizontal?this.state.innerRect.width:this.state.innerRect.height;this.state.pxScale=Za(t,n),this.state.ticks=this.state.pxScale.ticks({distance:n,formatter:e}).filter(function(t){return 0<=t.position&&t.position<=1})},render:function(){var t=this.state,e=[];return e.push.apply(e,O(this.state.concreteNodeBuilder.build({settings:this.state.settings,scale:this.state.pxScale,innerRect:this.state.innerRect,outerRect:this.state.outerRect,measureText:this.renderer.measureText,textBounds:this.renderer.textBounds,ticks:this.state.ticks,state:t}))),js.multiple(e),e}};function fc(t,e,n){var i="";"function"==typeof t?i=t():"string"==typeof t?i=t:n&&(i=(n.data().fields||[]).map(function(t){return t.title()}).join(e));return i}var dc={require:["renderer","chart"],defaultSettings:{layout:{dock:"bottom",displayOrder:0,prioOrder:0},settings:{paddingStart:5,paddingEnd:5,paddingLeft:0,paddingRight:0,anchor:"center",join:", ",maxLengthPx:NaN},style:{text:"$title"}},created:function(){this.definitionSettings=this.settings.settings;var t=this.settings.text,e=this.definitionSettings.join;this.title=fc(t,e,this.scale)},preferredSize:function(){return this.renderer.measureText({text:this.title,fontSize:this.style.text.fontSize,fontFamily:this.style.text.fontFamily}).height+this.definitionSettings.paddingStart+this.definitionSettings.paddingEnd},render:function(){var t=this.title,e=this.definitionSettings,n=this.rect,i=[];return i.push(function(t){var e,n,i,r=t.title,a=t.definitionSettings,o=t.dock,s=t.rect,c=t.measureText,l=t.style,u={type:"text",text:r,x:0,y:0,dx:0,dy:0,anchor:(e=o,n=a.anchor,i="middle","left"===e?"top"===n?i="end":"bottom"===n&&(i="start"):"right"===e?"top"===n?i="start":"bottom"===n&&(i="end"):"left"===n?i="start":"right"===n&&(i="end"),i),baseline:"alphabetical"};v(u,l.text);var h=c(u);if("top"===o||"bottom"===o){var f=s.width/2;"left"===a.anchor?f=a.paddingLeft||0:"right"===a.anchor&&(f=s.width-(a.paddingRight||0)),u.x=f,u.y="top"===o?s.height-a.paddingStart:a.paddingStart+h.height,u.dy="top"===o?-h.height/6:-h.height/3,u.maxWidth=.8*s.width}else{var d=s.height/2;"top"===a.anchor?d=a.paddingStart:"bottom"===a.anchor&&(d=s.height-a.paddingStart),u.y=d,u.x="left"===o?s.width-a.paddingStart:a.paddingStart,u.dx="left"===o?-h.height/3:h.height/3;var p="left"===o?270:90;u.transform="rotate(".concat(p,", ").concat(u.x+u.dx,", ").concat(u.y+u.dy,")"),u.maxWidth=.8*s.height}return isNaN(a.maxLengthPx)||(u.maxWidth=Math.min(u.maxWidth,a.maxLengthPx)),u}({title:t,dock:this.settings.layout.dock,definitionSettings:e,rect:n,measureText:this.renderer.measureText,style:this.style})),i},beforeUpdate:function(t){t.settings&&(v(this.settings,t.settings),this.definitionSettings=t.settings.settings);var e=this.settings.text,n=this.definitionSettings.join;this.title=fc(e,n,this.scale)}};function pc(t,e){var n,i=t.settings.layout.dock,r=t.settings.settings.invert,a="top"===i||"bottom"===i,o=a?"width":"height",s=t.rect[o],c=t.chart.scroll(t.settings.scroll),l=e[a?"x":"y"];r&&(l=s-l);var u=c.getState();n={startOffset:l,startScroll:u.start,swipe:!1};var h=l/s*(u.max-u.min)+u.min;h<u.start?n.startScroll=h:h>u.start+u.viewSize&&(n.startScroll=h-u.viewSize);return{update:function(t){var e=t[a?"x":"y"];if(r&&(e=s-e),!n.swipe){if(Math.abs(n.startOffset-e)<=1)return;n.swipe=!0}var i=c.getState(),o=(e-n.startOffset)/s*(i.max-i.min),l=n.startScroll+o;c.moveTo(l)},end:function(t){var e=t[a?"x":"y"];r&&(e=s-e);var i=c.getState();if(n.swipe){var o=(e-n.startOffset)/s*(i.max-i.min),l=n.startScroll+o;c.moveTo(l)}else{var u=e/s*(i.max-i.min)+i.min-i.viewSize/2;c.moveTo(u)}}}}function gc(t,e){var n=e.element().getBoundingClientRect();return{x:t.center.x-n.left,y:t.center.y-n.top}}var yc={require:["chart","renderer"],on:{panStart:function(t){var e=gc(t,this.renderer),n={x:e.x-t.deltaX,y:e.y-t.deltaY};this.currentMove=pc(this,n),this.currentMove.update(e)},panMove:function(t){if(this.currentMove){var e=gc(t,this.renderer);this.currentMove.update(e)}},panEnd:function(t){if(this.currentMove){var e=gc(t,this.renderer);this.currentMove.end(e),this.currentMove=null}},panCancel:function(){this.currentMove=null},tap:function(t){var e=gc(t,this.renderer);pc(this,e).end(e)}},defaultSettings:{settings:{backgroundColor:"#eee",thumbColor:"#ccc",width:16}},preferredSize:function(t){var e=this.chart.scroll(this.settings.scroll).getState();return e.viewSize>=e.max-e.min?Math.max(t.width,t.height):this.settings.settings.width},render:function(t){var e,n=this.settings.layout.dock,i=this.settings.settings.invert,r="top"===n||"bottom"===n,a=r?"width":"height",o=this.rect[a],s=this.chart.scroll(this.settings.scroll).getState(),c=o*(s.start-s.min)/(s.max-s.min),l=o*s.viewSize/(s.max-s.min);return i&&(c=o-c-l),t("div",{style:{position:"relative",width:"100%",height:"100%",background:this.settings.settings.backgroundColor,pointerEvents:"auto"}},[].concat(t("div",{class:"scroller",style:(e={position:"absolute"},M(e,r?"left":"top","".concat(c,"px")),M(e,r?"top":"left","25%"),M(e,r?"height":"width","50%"),M(e,a,"".concat(Math.max(1,l),"px")),M(e,"background",this.settings.settings.thumbColor),e)})))},renderer:"dom"};var vc=5,mc=0;function xc(t){var e=t.h,n=t.isVertical,i=t.value,r=t.pos,a=t.align,o=t.borderHit,s=t.state,c=t.idx,l="end"!==a,u=l?{left:"0",top:"0"}:{right:"0",bottom:"0"},h=0,f="100%",d="100%";return s.targetRect&&"start"===s.settings.bubbles.align?(f="".concat(s.targetRect.x+s.targetRect.width,"px"),d="".concat(s.targetRect.y+s.targetRect.height,"px")):s.targetRect&&"end"===s.settings.bubbles.align&&(h=n?s.targetRect.x:s.targetRect.y,f="".concat(s.rect.width-h,"px"),d="".concat(s.rect.height-h,"px")),l||(r-=o),e("div",{onmouseover:function(t){t.srcElement.children[0].style.backgroundColor="#000",t.srcElement.children[0].style[n?"height":"width"]="2px"},onmouseout:function(t){t.srcElement.children[0].style.backgroundColor=s.style.line.stroke,t.srcElement.children[0].style[n?"height":"width"]="1px"},"data-value":i,"data-key":[s.key,"edge",c].join("-"),style:{cursor:n?"ns-resize":"ew-resize",position:"absolute",left:"".concat(n?h:r,"px"),top:"".concat(n?r:h,"px"),height:n?"".concat(o,"px"):d,width:n?f:"".concat(o,"px"),pointerEvents:"auto"}},[e("div",{style:v({backgroundColor:s.style.line.stroke,position:"absolute",height:n?"".concat(1,"px"):"100%",width:n?"100%":"".concat(1,"px"),pointerEvents:"none"},u)})])}function bc(t){var e,n,i=t.h,r=t.isVertical,a=t.label,o=t.otherValue,s=t.rangeIdx,c=t.idx,l=t.pos,u=t.align,h=t.state,f=t.value,d="end"!==u,p="outside"===h.settings.bubbles.placement,g="none";r?(n=d?"left":"right",p&&(g=d?"translate(-100%,  0px)":"translate(100%,  0px)")):(n=d?"top":"bottom",p&&(g=d?"translate(0px, -100%)":"translate(0px,  100%)"));var y=h.edit&&h.edit.rangeIdx===s&&h.edit.bubbleIdx===c,v={position:"relative",borderRadius:"".concat(h.style.bubble.borderRadius,"px"),border:"".concat(h.style.bubble.strokeWidth,"px solid ").concat(h.style.bubble.stroke),backgroundColor:h.style.bubble.fill,color:h.style.bubble.color,fontFamily:h.style.bubble.fontFamily,fontSize:h.style.bubble.fontSize,padding:"4px 8px",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px",minWidth:"50px",minHeight:"1em",pointerEvents:"auto",transform:r?"translate(0,-50%)":"translate(-50%,0)",cursor:r?"ns-resize":"ew-resize"},m=h.style.bubble.stroke,x=y?i("input",{type:"text",value:f,style:_({},v,{textAlign:"start",textOverflow:"",fontSize:"13px"}),onkeyup:function(t){if("Enter"===t.key){t.preventDefault(),t.stopPropagation();var e=parseFloat(t.target.value);isNaN(e)?(m="rgba(230, 78, 78, 0.6)",t.target.style.border="".concat(h.style.bubble.strokeWidth,"px solid ").concat(m)):h.onEditConfirmed(s,e,o)}else"Escape"===t.key&&(t.preventDefault(),t.stopPropagation(),h.onEditCanceled())}}):i("div",{"data-key":[h.key,"bubble",s].join("-"),"data-other-value":o,"data-idx":s,"data-bidx":c,style:v},[a]);return i("div",{style:(e={position:"absolute"},M(e,n,"0"),M(e,r?"top":"left","".concat(l,"px")),M(e,"transform",g),e)},[x])}function wc(t){var e=t.borderHit,n=t.els,i=t.isVertical,r=t.state,a=t.vStart,o=t.vEnd,s=t.idx,c=0;r.targetRect&&(c=i?r.targetRect.y:r.targetRect.x);var l,u,h,f,d,p,g,y,m=!!r.scale,x=m?r.scale.norm(a)*r.size:a,b=m?r.scale.norm(o)*r.size:o,w=Math.abs(x-b),k=Math.min(x,b)+c,M=k+w;if(r.targetRect){var _=r.targetFillRect||r.targetRect,S=i?_.height:_.width,R=m?r.scale.norm(a)*S:a,C=m?r.scale.norm(o)*S:o,N=Math.abs(R-C),A=Math.min(R,C),T={h:r.h,isVertical:i,top:A,height:N,color:r.style.target.fill,opacity:r.style.target.opacity};r.style.target.opacity<.8&&(T.on={onmouseover:function(t){t.srcElement.style.opacity=r.style.target.opacity+.1},onmouseout:function(t){t.srcElement.style.opacity=r.style.target.opacity}}),n.push(r.h("div",{style:{position:"absolute",left:"".concat(_.x,"px"),top:"".concat(_.y,"px"),height:"".concat(_.height,"px"),width:"".concat(_.width,"px")}},[(l=T,u=l.h,h=l.isVertical,f=l.top,d=l.height,p=l.color,g=l.on,y=l.opacity,u("div",v({style:{backgroundColor:p,opacity:y,position:"absolute",left:h?0:"".concat(f,"px"),top:h?"".concat(f,"px"):0,height:h?"".concat(d,"px"):"100%",width:h?"100%":"".concat(d,"px"),pointerEvents:"auto"}},g),[]))]))}var E=x<b?a:o,O=x<b?o:a,j=z(m?r.scale.domain():[Math.min(a,o),Math.max(a,o)],2),D=j[0],q=j[1],P=D<=E+1e-5&&E-1e-5<=q,I=O-1e-5<=q&&D<=O+1e-5;P&&n.push(xc({h:r.h,isVertical:i,borderHit:e,value:E,pos:k,align:"start",state:r,idx:s})),I&&n.push(xc({h:r.h,isVertical:i,borderHit:e,value:O,pos:M,align:"end",state:r,idx:s}));var F=r.settings.bubbles;if(F&&F.show){var B={fontSize:F.fontSize,fontFamily:F.fontFamily,color:F.fill},L=[a,o];P&&n.push(bc({h:r.h,isVertical:i,align:F.align,style:B,rangeIdx:s,idx:0,otherValue:O,value:E,label:"".concat(r.format(E,L)),pos:k,state:r})),I&&n.push(bc({h:r.h,isVertical:i,align:F.align,style:B,rangeIdx:s,idx:1,otherValue:E,value:O,label:"".concat(r.format(O,L)),pos:M,state:r}))}}function kc(t){var e=t.active.limitHigh-t.active.end,n=t.active.limitLow-t.active.start,i=t.current-t.start;return i<0?Math.max(i,n):Math.min(i,e)}function Mc(t){var e=[],n=t.direction===mc;if(Array.isArray(t.ranges)&&t.ranges.forEach(function(i,r){t.active&&r===t.active.idx||wc({borderHit:vc,els:e,isVertical:n,state:t,vStart:Math.min(i.min,i.max),vEnd:Math.max(i.min,i.max),idx:r})}),t.active){var i=t.start,r=t.current;if(-1!==t.active.idx)if("foo"===t.active.mode)i=Math.min(t.active.start,t.active.end),r=Math.max(t.active.start,t.active.end);else if("modify"===t.active.mode)i=Math.min(t.start,t.current),r=Math.max(t.start,t.current);else{var a=kc(t);i=t.active.start+a,r=t.active.end+a}wc({borderHit:vc,els:e,isVertical:n,state:t,vStart:i,vEnd:r,idx:t.active.idx})}return e}function _c(t){return{min:t.scale.min(),max:t.scale.max()}}function Sc(t){return{min:0,max:t.direction?t.rect.width:t.rect.height}}function Rc(t,e,n){var i,r,a=t.ranges,o=-1;for(i=0;i<a.length;i++){if(a[i].min<=e&&e<=a[i].max){o=i,n.min=i?a[i-1].max:n.min,n.max=i+1<a.length?a[i+1].min:n.max;break}if(e<a[i].min){n.max=a[i].min,n.min=i?a[i-1].max:n.min;break}}-1===o&&a.length&&i>=a.length&&(n.min=a[a.length-1].max),-1!==o&&(r={idx:o,start:a[o].min,end:a[o].max,limitLow:n.min,limitHigh:n.max,mode:"foo"}),t.active=r}function Cc(t){t.renderer.render(Mc(t))}function Nc(t,e){if(!e||!e.isActive())return[];var n=t.scale.data(),i=(n&&n.fields||[]).map(function(t){return t.id()}),r=e.brushes().filter(function(t){return"range"===t.type&&-1!==i.indexOf(t.id)})[0];return r?r.brush.ranges():[]}function Ac(t,e){for(var n,i=1/0,r=e.domain(),a=e.bandwidth()/2,o=0;o<r.length;++o){var s=Math.abs(t-a-e(r[o]));s<i&&(i=s,n=r[o])}return n}function Tc(t,e){return Math.min.apply(Math,O(t))<=Math.max.apply(Math,O(e))&&Math.max.apply(Math,O(t))>=Math.min.apply(Math,O(e))}function Ec(t){return W(t.reduce(function(t,e){return t.push.apply(t,O(L(e.bounds))),t},[]))}var zc={require:["chart","settings","renderer"],defaultSettings:{settings:{bubbles:{show:!0,align:"start"}},style:{bubble:"$label-overlay",line:"$shape-guide--inverted",target:"$selection-area-target"}},renderer:"dom",on:{rangeStart:function(t){this.start(t)},rangeMove:function(t){this.move(t)},rangeEnd:function(t){this.end(t)},rangeClear:function(t){this.clear(t)},bubbleStart:function(t){this.bubbleStart(t)}},created:function(){this.state={key:this.settings.key||"brush-range"}},beforeRender:function(t){this.state.rect=t.size.computedInner},renderRanges:function(){this.state.started||(this.state.ranges=Nc(this.state,this.state.brushInstance),this.state.active=null,Cc(this.state))},render:function(t){var e=this,n=this.settings.settings;this.state.direction="vertical"===n.direction?mc:1;var i=this.renderer.element().getBoundingClientRect(),r=this.state.rect[this.state.direction===mc?"height":"width"],a=Za(this.chart.scale(n.scale),r),o=function(t){var e={targetRect:null,targetFillRect:null,scale:null,size:null},n=t.settings.settings,i=n.target&&(n.target.components||(n.target.component?[n.target.component]:[])).map(function(e){return t.chart.component(e)}).filter(function(t){return!!t&&!!t.rect}),r=n.target&&n.target.selector?t.chart.findShapes(n.target.selector):[],a=n.target&&n.target.fillSelector?t.chart.findShapes(n.target.fillSelector):[];if(0<r.length){var o=Ec(r);if(e.size=o[t.state.direction===mc?"height":"width"],e.scale=Za(t.chart.scale(n.scale),e.size),e.targetRect=o,0<a.length){var s=Ec(a);e.targetFillRect=s}}else if(i&&0<i.length){var c=i.slice(1).reduce(function(t,e){return{x0:Math.min(t.x0,e.rect.computedInner.x),y0:Math.min(t.y0,e.rect.computedInner.y),x1:Math.max(t.x1,e.rect.computedInner.x+e.rect.computedInner.width),y1:Math.max(t.y1,e.rect.computedInner.y+e.rect.computedInner.height)}},{x0:i[0].rect.computedInner.x,y0:i[0].rect.computedInner.y,x1:i[0].rect.computedInner.x+i[0].rect.computedInner.width,y1:i[0].rect.computedInner.y+i[0].rect.computedInner.height});e.targetRect={x:c.x0-t.state.rect.x,y:c.y0-t.state.rect.y,width:c.x1-c.x0,height:c.y1-c.y0}}return e}(this);if(a=o.scale?o.scale:a,this.state.targetRect=o.targetRect,this.state.targetFillRect=o.targetFillRect,this.state.size=null===o.size?r:o.size,this.state.settings=n,this.state.style=this.style,this.state.offset=i,this.state.brush="object"===x(n.brush)?n.brush.context:n.brush,this.state.brushInstance=this.chart.brush(this.state.brush),this.state.renderer=this.renderer,this.state.multi=!!n.multiple,this.state.h=t,this.state.onEditConfirmed=function(t,n,i){e.state.edit=null,function(t,e,n,i){var r=t.ranges.map(function(t){return{min:t.min,max:t.max}}),a=t.scale.min(),o=t.scale.max();r[e]={min:Math.max(a,Math.min(n,i)),max:Math.min(o,Math.max(n,i))},t.ranges[e]=_({},r[e]);var s=t.scale.data();s&&s.fields&&s.fields.forEach(function(e){t.fauxBrushInstance||t.brushInstance.setRange(e.id(),r)})}(e.state,t,n,i),e.emit("bubbleEnd"),Cc(e.state)},this.state.onEditCanceled=function(){e.state.edit=null,Cc(e.state)},this.state.cssCoord={offset:this.state.direction===mc?"top":"left",coord:this.state.direction===mc?"y":"x",pos:this.state.direction===mc?"deltaY":"deltaX"},this.state.format="function"==typeof n.bubbles.label&&function(t,i){return n.bubbles.label.call(void 0,{datum:t,data:i,scale:a,resources:{scale:e.chart.scale,formatter:e.chart.formatter}})},{}.hasOwnProperty.call(a,"norm")){this.state.editable=!0,this.state.observeBrush="object"===x(n.brush)&&n.brush.observe,this.state.fauxBrushInstance=null,this.state.findValues=null,this.state.scale=a;var s=this.state.scale.data();!this.state.format&&s&&s.fields&&s.fields[0]&&(this.state.format=s.fields[0].formatter())}else this.state.editable=!1,this.state.scale=ca(),this.state.scale.data=a.data,this.state.format||(this.state.format=function(t,e){return Tc(a.range(),e)?(n=t,r=(i=a).ticks(),-1!==(o=i.domain().indexOf(Ac(n,i)))?r[o].label:"-"):"-";var n,i,r,o}),this.state.fauxBrushInstance=Va(),this.state.findValues=function(t){return e=t,i=(n=a).domain(),r=n.range(),o=[],e.forEach(function(t){if(Tc(r,[t.min,t.max])){var e=i.indexOf(Ac(t.min,n)),a=i.indexOf(Ac(t.max,n));o.push.apply(o,i.slice(Math.min(e,a),Math.max(e,a)+1))}}),o;var e,n,i,r,o};return this.state.ranges=Nc(this.state,this.state.brushInstance),this.state.observeBrush||this.state.sourcedFromThisComponent?[Mc(this.state)]:[]},mounted:function(){this.state.observeBrush&&this.state.brushInstance&&this.state.brushInstance.on("update",this.renderRanges)},beforeDestroy:function(){this.state.observeBrush&&this.state.brushInstance&&this.state.brushInstance.removeListener("update",this.renderRanges)},start:function(t){!function(t){var e=t.state,n=t.e,i=t.renderer,r=t.ranges,a=t.targetSize;if(!e.started){e.edit=null;var o=n.center.x-n.deltaX,s=n.center.y-n.deltaY,c=document.elementFromPoint(o,s);i.element().contains(c)||(c=null);var l={started:!0};e.offset=v({},i.element().getBoundingClientRect());var u=o-e.offset.left,h=s-e.offset.top;e.offset.left+=e.targetRect?e.targetRect.x:0,e.offset.top+=e.targetRect?e.targetRect.y:0,e.ranges=r(e,e.fauxBrushInstance||e.brushInstance);var f=n.center[e.cssCoord.coord]-n[e.cssCoord.pos]-e.offset[e.cssCoord.offset],d=n.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset];l.current=e.scale.normInvert(d/e.size),l.start=e.scale.normInvert(f/e.size);var p,g,y=e.ranges,m=_c(e),x=-1;if(c&&c.hasAttribute("data-idx"))x=parseInt(c.getAttribute("data-idx"),10),m.min=0<x?y[x-1].max:m.min,m.max=x+1<y.length?y[x+1].min:m.max;else{for(p=0;p<y.length;p++){if(y[p].min<=l.start&&l.start<=y[p].max){x=p,m.min=p?y[p-1].max:m.min,m.max=p+1<y.length?y[p+1].min:m.max;break}if(l.start<y[p].min){m.max=y[p].min,m.min=p?y[p-1].max:m.min;break}}-1===x&&y.length&&p>=y.length&&(m.min=y[y.length-1].max)}if(-1!==x||e.multi||(l.ranges=[],m.min=e.scale.min(),m.max=e.scale.max()),-1!==x)if(g={idx:x,start:y[x].min,end:y[x].max,limitLow:m.min,limitHigh:m.max,mode:"move"},c&&c.hasAttribute("data-other-value"))l.start=parseFloat(c.getAttribute("data-other-value")),g.mode="modify";else{var b=e.scale.norm(g.start)*e.size,w=e.scale.norm(g.end)*e.size;Math.abs(f-b)<=a?(l.start=g.end,g.mode="modify"):Math.abs(f-w)<=a&&(l.start=g.start,g.mode="modify")}else g={idx:-1,start:l.start,end:l.current,limitLow:m.min,limitHigh:m.max,mode:"current"};"modify"!==(l.active=g).mode&&e.targetRect&&!Vo(e.targetRect,{x:u,y:h})||Object.keys(l).forEach(function(t){return e[t]=l[t]})}}({e:t,state:this.state,renderer:this.renderer,ranges:Nc,targetSize:vc})},end:function(){this.state.started&&(!function(t,e){t.started=!1,t.ranges=e(t,t.fauxBrushInstance||t.brushInstance);var n=_c(t);Rc(t,t.current,n)}(this.state,Nc),Cc(this.state),this.state.sourcedFromThisComponent=!0,this.state.active=null)},move:function(t){var e,n,i;this.state.started&&(e=this.state,n=(t.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset])/e.size,i=e.scale.normInvert(n),e.current=Math.max(Math.min(i,e.active.limitHigh),e.active.limitLow),function(t){var e=t.ranges.map(function(t){return{min:t.min,max:t.max}});if(-1!==t.active.idx)if("modify"===t.active.mode)e[t.active.idx].min=Math.min(t.start,t.current),e[t.active.idx].max=Math.max(t.start,t.current);else{var n=kc(t);e[t.active.idx].min+=n,e[t.active.idx].max+=n}else e.push({min:Math.min(t.start,t.current),max:Math.max(t.start,t.current)});var i=t.scale.data();i&&i.fields&&i.fields.forEach(function(n){if(t.fauxBrushInstance){var i=Nc(t,t.fauxBrushInstance),r=t.findValues(i),a=t.findValues(e),o=a.filter(function(t){return-1===r.indexOf(t)}),s=r.filter(function(t){return-1===a.indexOf(t)}),c=o.map(function(t){return{key:n.id(),value:t}}),l=s.map(function(t){return{key:n.id(),value:t}});t.brushInstance.addAndRemoveValues(c,l),t.fauxBrushInstance.setRange(n.id(),e)}else t.brushInstance.setRange(n.id(),e)})}(this.state),Cc(this.state))},clear:function(){this.state.fauxBrushInstance&&this.state.fauxBrushInstance.clear(),this.state.renderer.render([]),this.state.started=!1,this.state.active=null,this.state.sourcedFromThisComponent=!1},bubbleStart:function(t){if(this.state.editable){var e=t.srcEvent||t,n=e.target,i={rangeIdx:parseInt(n.getAttribute("data-idx"),10),bubbleIdx:parseInt(n.getAttribute("data-bidx"),10)};if(!isNaN(i.rangeIdx)&&JSON.stringify(i)!==JSON.stringify(this.state.edit)){this.state.edit=i,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();var r=n.parentNode;Cc(this.state);var a=r.querySelector("input");a.focus(),a.select()}}}};function Oc(t){t.renderer.render(Mc(t))}function jc(t){return t.rc.ranges()}var Dc={require:["chart","settings","renderer"],defaultSettings:{settings:{bubbles:{show:!0,align:"start"}},style:{bubble:"$label-overlay",line:"$shape-guide--inverted",target:"$selection-area-target"}},renderer:"dom",on:{areaStart:function(t){this.start(t)},areaMove:function(t){this.move(t)},areaEnd:function(t){this.end(t)},areaClear:function(t){this.clear(t)}},created:function(){this.state={key:this.settings.key||"brush-area-dir"}},render:function(t){var e=this;this.state.rect=this.rect;var n=this.settings.settings,i="vertical"===n.direction?mc:1,r=this.state.rect[i===mc?"height":"width"],a=this.renderer.element().getBoundingClientRect(),o=(n.target?n.target.components||[n.target.component]:[]).map(function(t){return e.chart.component(t)}).filter(function(t){return!!t&&!!t.rect}),s=o[0]?o.slice(1).reduce(function(t,e){return{x0:Math.min(t.x0,e.rect.x),y0:Math.min(t.y0,e.rect.y),x1:Math.max(t.x1,e.rect.x+e.rect.width),y1:Math.max(t.y1,e.rect.y+e.rect.height)}},{x0:o[0].rect.x,y0:o[0].rect.y,x1:o[0].rect.x+o[0].rect.width,y1:o[0].rect.y+o[0].rect.height}):null;return this.state.targetRect=s?{x:s.x0-this.rect.x,y:s.y0-this.rect.y,width:s.x1-s.x0,height:s.y1-s.y0}:null,this.state.style=this.style,this.state.chart=this.chart,this.state.direction=i,this.state.settings=n,this.state.offset=a,this.state.rc=za(),this.state.renderer=this.renderer,this.state.multi=!!n.multiple,this.state.h=t,this.state.size=r,this.state.cssCoord={offset:this.state.direction===mc?"top":"left",coord:this.state.direction===mc?"y":"x",pos:this.state.direction===mc?"deltaY":"deltaX",area:this.state.direction===mc?"height":"width"},this.state.format=function(t,e){return function(t,e,n){var i=Math.min.apply(Math,O(n)),r=Math.max.apply(Math,O(n)),a={x:t.direction?i+t.rect.x:t.rect.x,y:t.direction?t.rect.y:i+t.rect.y,width:t.direction?r-i:t.rect.width+t.rect.x,height:t.direction?t.rect.height+t.rect.y:r-i},o=t.chart.shapesAt(a,t.settings.brush);if(0===o.length)return"-";var s=o.reduce(function(n,r){var a=n.bounds,o=r.bounds;return e===i?a[t.cssCoord.coord]<=o[t.cssCoord.coord]?n:r:a[t.cssCoord.coord]+a[t.cssCoord.area]>=o[t.cssCoord.coord]+o[t.cssCoord.area]?n:r}),c=t.settings.brush.components.reduce(function(t,e){return t.key===s.key?t:e});return"function"==typeof t.settings.bubbles.label?t.settings.bubbles.label(s.data):Array.isArray(c.data)&&c.data.length?s.data[c.data[0]].label:s.data&&s.data.label?s.data.label:"-"}(this,t,e)},[]},start:function(t){!function(t){var e=t.state,n=t.e,i=t.renderer,r=t.ranges,a=t.targetSize;if(!e.started){var o=n.center.x-n.deltaX,s=n.center.y-n.deltaY,c=document.elementFromPoint(o,s);i.element().contains(c)||(c=null);var l={started:!0};e.offset=i.element().getBoundingClientRect(),e.ranges=r(e);var u=o-e.offset.left,h=s-e.offset.top,f=n.center[e.cssCoord.coord]-n[e.cssCoord.pos]-e.offset[e.cssCoord.offset],d=n.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset],p=d,g=f;l.start=f,l.current=d;var y,v,m=e.ranges,x=Sc(e),b=-1;if(c&&c.hasAttribute("data-idx"))b=parseInt(c.getAttribute("data-idx"),10),x.min=0<b?m[b-1].max:x.min,x.max=b+1<m.length?m[b+1].min:x.max;else{for(y=0;y<m.length;y++){if(m[y].min<=g&&g<=m[y].max){b=y,x.min=y?m[y-1].max:x.min,x.max=y+1<m.length?m[y+1].min:x.max;break}if(g<m[y].min){x.max=m[y].min,x.min=y?m[y-1].max:x.min;break}}-1===b&&m.length&&y>=m.length&&(x.min=m[m.length-1].max)}if(-1!==b||e.multi||(l.ranges=[],x.min=0,x.max=e.direction?e.rect.width:e.rect.height),-1!==b)if(v={idx:b,start:m[b].min,end:m[b].max,limitLow:x.min,limitHigh:x.max,mode:"move"},c&&c.hasAttribute("data-other-value"))l.start=parseFloat(c.getAttribute("data-other-value")),v.mode="modify";else{var w=v.start,k=v.end;Math.abs(f-w)<=a?(l.start=v.end,v.mode="modify"):Math.abs(f-k)<=a&&(l.start=v.start,v.mode="modify")}else v={idx:-1,start:g,end:p,limitLow:x.min,limitHigh:x.max,mode:"current"};"modify"!==(l.active=v).mode&&e.targetRect&&!Vo(e.targetRect,{x:u,y:h})||Object.keys(l).forEach(function(t){return e[t]=l[t]})}}({e:t,state:this.state,renderer:this.renderer,ranges:jc,targetSize:vc})},end:function(){this.state.started&&(!function(t,e){t.started=!1,t.ranges=e(t);var n=Sc(t);Rc(t,t.current,n)}(this.state,jc),Oc(this.state))},move:function(t){var e,n;this.state.started&&(e=this.state,n=t.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset],e.current=Math.max(Math.min(n,e.active.limitHigh),e.active.limitLow),function(t){var e=t.ranges.map(function(t){return{min:t.min,max:t.max}});if(-1!==t.active.idx)if("modify"===t.active.mode)e[t.active.idx].min=Math.min(t.start,t.current),e[t.active.idx].max=Math.max(t.start,t.current);else{var n=kc(t);e[t.active.idx].min=t.active.start+n,e[t.active.idx].max=t.active.end+n}else e.push({min:Math.min(t.start,t.current),max:Math.max(t.start,t.current)});t.rc.set(e);var i,r,a=[];e.forEach(function(e){var n,i,r;a.push.apply(a,O((i=e,r={x:(n=t).direction?i.min+n.rect.x:n.rect.x,y:n.direction?n.rect.y:i.min+n.rect.y,width:n.direction?i.max-i.min:n.rect.width+n.rect.x,height:n.direction?n.rect.height+n.rect.y:i.max-i.min},n.chart.shapesAt(r,n.settings.brush))))}),r=a,(i=t).chart.brushFromShapes(r,i.settings.brush)}(this.state),Oc(this.state))},clear:function(){this.state.rc&&this.state.rc.clear(),this.state.renderer.render([])}};function qc(t){var e="vertical"===t.direction,n=t.rect[e?"height":"width"],i=t.rect[e?"width":"height"];return function(t){var e=t.brush;if(!e||!e.isActive())return[];var n=t.scale.data(),i=(n&&n.fields||[]).map(function(t){return t.id()}),r=e.brushes().filter(function(t){return"range"===t.type&&-1!==i.indexOf(t.id)})[0];return r?r.brush.ranges():[]}(t).map(function(r){var a=t.scale(r.min)*n,o=t.scale(r.max)*n,s=Math.min(a,o),c=Math.abs(a-o);return{type:"rect",fill:t.fill,opacity:t.opacity,x:e?0:s,width:e?i:c,y:e?s:0,height:e?c:i}})}function Pc(t,e,n,i){function r(){var e;(e=t).renderer.render(qc(e))}function a(){var e;(e=t).renderer.render(qc(e))}function o(){var e;(e=t).renderer.render(qc(e))}(t.brush=e)&&(e.on("start",r),e.on("update",a),e.on("end",o),t.start=r,t.update=a,t.end=o,t.brush=e,t.scale=n,t.renderer=i)}function Ic(t){t.brush&&(t.brush.removeListener("start",t.start),t.brush.removeListener("update",t.update),t.brush.removeListener("end",t.end)),t.start=void 0,t.update=void 0,t.end=void 0,t.brush=void 0,t.scale=void 0,t.renderer=void 0}var Fc={require:["chart","settings","renderer"],defaultSettings:{settings:{}},preferredSize:function(){return 50},created:function(){this.state={}},render:function(){var t=this.settings.settings,e=this.chart.brush(t.brush),n=t.direction||"horizontal",i="horizontal"===n?this.rect.width:this.rect.height,r=Za(this.chart.scale(t.scale),i);return Ic(this.state),Pc(this.state,e,r,this.renderer),this.state.rect=this.rect,this.state.fill=t.fill||"#ccc",this.state.opacity=void 0!==t.opacity?t.opacity:1,this.state.direction=n,qc(this.state)},beforeDestroy:function(){Ic(this.state)}};function Bc(t,e){var n=e.center.x,i=e.center.y;return{x:n-t.left,y:i-t.top}}function Lc(t,e,n){return yo(t,e.points[0])<Math.pow(n.settings.snapIndicator.threshold,2)}function Wc(t,e){null==t.path.d?t.path.d="M".concat(e.x," ").concat(e.y," "):t.path.d+="L".concat(e.x," ").concat(e.y," "),t.points.push(e)}function Vc(t){var e=t.state,n=t.start,i=void 0===n?null:n,r=t.end,a=void 0===r?null:r;null!==i&&(e.snapIndicator.x1=i.x,e.snapIndicator.y1=i.y),null!==a&&(e.snapIndicator.x2=a.x,e.snapIndicator.y2=a.y)}function Hc(t,e){t.snapIndicator.visible=e}var Uc={require:["chart","renderer","settings"],defaultSettings:{layout:{displayOrder:0},settings:{brush:{components:[]},snapIndicator:{threshold:75,strokeDasharray:"5, 5",stroke:"black",strokeWidth:2,opacity:.5},lasso:{fill:"transparent",stroke:"black",strokeWidth:2,opacity:.7,strokeDasharray:"20, 10"},startPoint:{r:10,fill:"green",stroke:"black",strokeWidth:1,opacity:1}}},on:{lassoStart:function(t){this.start(t)},lassoEnd:function(t){this.end(t)},lassoMove:function(t){this.move(t)},lassoCancel:function(){this.cancel()}},created:function(){this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}}},start:function(t){var e,n,i,r,a,o;this.state.active=!0,this.state.path={visible:!0,type:"path",d:null,fill:(e=this.settings.settings.lasso).fill,stroke:e.stroke,strokeWidth:e.strokeWidth,opacity:e.opacity,strokeDasharray:e.strokeDasharray,collider:{type:null}},this.state.snapIndicator={visible:!1,type:"line",x1:0,y1:0,x2:0,y2:0,strokeDasharray:(n=this.settings.settings.snapIndicator).strokeDasharray,stroke:n.stroke,strokeWidth:n.strokeWidth,opacity:n.opacity,collider:{type:null}},this.state.startPoint={visible:!0,type:"circle",cx:0,cy:0,r:(i=this.settings.settings.startPoint).r,fill:i.fill,opacity:i.opacity,stroke:i.stroke,strokeWidth:i.strokeWidth,collider:{type:null}},this.state.rendererBounds=this.renderer.element().getBoundingClientRect(),this.state.componentDelta=(r=this.chart,a=this.state.rendererBounds,o=r.element.getBoundingClientRect(),{x:a.left-o.left,y:a.top-o.top}),this.state.brushConfig=this.settings.settings.brush.components.map(function(t){return{key:t.key,contexts:t.contexts||["lassoBrush"],data:t.data||[""],action:t.action||"add"}});var s,c,l=Bc(this.state.rendererBounds,t);Wc(this.state,l),Vc({state:this.state,start:l}),s=this.state,c=l,s.startPoint.cx=c.x,s.startPoint.cy=c.y},move:function(t){if(this.state.active){var e,n,i,r=Bc(this.state.rendererBounds,t);Lc(r,this.state,this.settings)?Hc(this.state,!0):Hc(this.state,!1),Wc(this.state,r),Vc({state:this.state,end:r}),e=this.state,n=this.renderer,i=[e.startPoint,e.path,e.snapIndicator].filter(function(t){return t.visible}),n.render(i),function(t,e){if(t.active){var n=t.points[t.points.length-2],i=t.points[t.points.length-1];t.lineBrushShape.x1=n.x+t.componentDelta.x,t.lineBrushShape.y1=n.y+t.componentDelta.y,t.lineBrushShape.x2=i.x+t.componentDelta.x,t.lineBrushShape.y2=i.y+t.componentDelta.y;var r=e.shapesAt(t.lineBrushShape,{components:t.brushConfig});e.brushFromShapes(r,{components:t.brushConfig})}}(this.state,this.chart)}},end:function(t){this.state.active&&(Hc(this.state,!1),Lc(Bc(this.state.rendererBounds,t),this.state,this.settings)&&function(t,e){if(t.active){var n=t.componentDelta.x,i=t.componentDelta.y,r=t.points.map(function(t){return{x:t.x+n,y:t.y+i}}),a=e.shapesAt({vertices:r},{components:t.brushConfig});e.brushFromShapes(a,{components:t.brushConfig})}}(this.state,this.chart),this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}},this.renderer.render([]))},cancel:function(){var t,e;this.state.active&&(t=this.state,e=this.chart,t.brushConfig.forEach(function(t){t.contexts.forEach(function(t){e.brush(t).end()})}),this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}},this.renderer.render([]))},render:function(){}};function $c(t,e,n,i,r){for(var a,o=0,s=e.length-1;o<s;){var c=Math.floor((o+s)/2);(a=r(e[c]))[n]+a[i]<t[n]?o=c+1:s=c}return o}function Yc(t){var e=t.orientation,n=t.targetNodes,i=t.labels,r=t.container,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:$c,o=[],s="v"===e?"x":"y",c="v"===e?"width":"height",l=function(t){return t.textBounds},u=function(t){return t.node.localBounds};return function(t,e){var h=i[e],f=h.textBounds,d=h.node;if(f[s]<r[s]||f[s]+f[c]>r[s]+r[c])return!1;for(var p=a(f,o,s,c,l);p<o.length;p++)if(Wo(f,o[p].textBounds))return!1;for(var g=a(f,n,s,c,u),y=f[s]+f[c],v=g;v<n.length;v++){var m=n[v].node;if(y<m.localBounds[s])break;if(Wo(f,m.localBounds)&&d!==m)return!1}return o.push(i[e]),!0}}var Xc=1.5,Jc=4;function Kc(t,e){return{node:t,data:t.data,scale:e.scale,formatter:e.formatter,dataset:e.dataset}}function Gc(t){var e=x(t);return("string"===e||"number"===e)&&""!==t}function Zc(t){return _({type:"rect",rx:2,ry:2,fill:t.backgroundColor},t.backgroundBounds)}function Qc(t,e,n,i){return t+.5*e+(i-.5)*(e-n)-.5*n}function tl(t,e,n){var i,r,a={type:"text",text:e,maxWidth:n.rotate?t.height:t.width,x:0,y:t.y,dx:0,dy:0,fill:n.fill,anchor:n.rotate?"end":"start",baseline:"central",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily},o=n.textMetrics;if(!(n.overflow||(i=t,r=o,n.rotate?!(i.width<r.height||i.height<r.width):!(i.width<r.width||i.height<r.height))))return!1;var s=.5*o.height;return n.rotate?(a.x=Qc(t.x,t.width,o.height,n.align)+s,a.y=Qc(t.y,t.height,o.width,n.justify),a.transform="rotate(-90, ".concat(a.x+a.dx,", ").concat(a.y+a.dy,")")):(a.x=Qc(t.x,t.width,o.width,n.align),a.y=Qc(t.y,t.height,o.height,n.justify)+s),a}function el(t){var e,n,i,r,a,o,s=t.bar,c=t.view,l=t.direction,u=t.position,h=t.padding,f=void 0===h?Jc:h,d={};if(v(d,s),u&&"inside"!==u)if("up"===l||"down"===l){var p=Math.max(0,Math.min(s.y,c.height)),g=Math.max(0,Math.min(s.y+s.height,c.height));"outside"===u&&"up"===l||"opposite"===u&&"down"===l?(d.y=0,d.height=p):("outside"===u&&"down"===l||"opposite"===u&&"up"===l)&&(d.y=g,d.height=c.height-g)}else{var y=Math.max(0,Math.min(s.x,c.width)),m=Math.max(0,Math.min(s.x+s.width,c.width));"outside"===u&&"left"===l||"opposite"===u&&"right"===l?(d.x=0,d.width=y):("outside"===u&&"right"===l||"opposite"===u&&"left"===l)&&(d.x=m,d.width=c.width-m)}return e=d,n=c,i=Math.max(0,Math.min(e.y,n.height)),r=Math.max(0,Math.min(e.y+e.height,n.height)),a=Math.max(0,Math.min(e.x,n.width)),o=Math.max(0,Math.min(e.x+e.width,n.width)),e.x=a,e.width=o-a,e.y=i,e.height=r-i,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.top,i=void 0===n?Jc:n,r=e.bottom,a=void 0===r?Jc:r,o=e.left,s=void 0===o?Jc:o,c=e.right,l=void 0===c?Jc:c;t.x+=s,t.width-=s+l,t.y+=i,t.height-=i+a}(d,f),d}function nl(t){var e,n,i,r,a,o=t.direction,s=t.fitsHorizontally,c=t.measured,l=t.node,u=t.orientation,h=t.placementSettings,f=t.rect,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:el,p=[];for(a=0;a<h.length;a++){if(i=h[a],r=d({bar:l.localBounds,view:f,direction:o,position:i.position,padding:i.padding}),p.push(r),e=!a||r.height>e.height?r:e,"v"===u&&(s&&r.height>c.height*Xc||!s&&r.height>c.width)){n=r;break}if("h"===u&&r.height>c.height&&r.width>c.width){n=r;break}}return n||(n=e,a=p.indexOf(n)),{bounds:n,placement:i=h[a]}}function il(t,e,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=r.top,o=void 0===a?Jc:a,s=r.bottom,c=void 0===s?Jc:s,l=r.left,u=void 0===l?Jc:l,h=r.right,f=void 0===h?Jc:h,d=t.x+t.dx,p=t.y+t.dy,g=n?Math.min(e.width,i.height):Math.min(e.height,i.width),y=n?Math.min(e.height,i.height):Math.min(e.width,i.width),v=.5*e.height;return{x:(n?d-v:d)-u-1e-9,y:(n?p:p-v)-o-1e-9,width:y+(u+f)-1e-9,height:g+(o+c)-1e-9}}function rl(t){for(var e,n,i,r,a,o,s,c,l,u,h,f,d,p=t.chart,g=t.targetNodes,y=t.rect,v=t.fitsHorizontally,m=t.collectiveOrientation,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:nl,w=2<arguments.length&&void 0!==arguments[2]?arguments[2]:tl,k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Yc,M=[],_={container:y,targetNodes:g,labels:[],orientation:m},S=0,R=g.length;S<R;S++){o=null,f=Kc(i=(n=g[S]).node,p),d="left"===(l=n.direction)||"right"===l?"h":"v";for(var C=0;C<n.texts.length;C++)if(Gc(r=n.texts[C])){var N=b({direction:l,fitsHorizontally:v,lblStngs:u=n.labelSettings[C],measured:c=n.measurements[C],node:i,orientation:d,placements:u.placements,placementSettings:n.placementSettings[C],rect:y});if(o=N.bounds,h=N.placement,o&&h){a=h.justify,s="function"==typeof h.fill?h.fill(f,S):h.fill;var A="function"==typeof u.linkData?u.linkData(f,S):void 0,T="function"==typeof h.overflow?h.overflow(f,S):h.overflow;"up"===l&&(a=1-a),"opposite"===h.position&&(a=1-a),"left"===l&&(a=1-a);var E=!("h"===m||v);(e=w(o,r,{fill:s,justify:"h"===d?h.align:a,align:"h"===d?a:h.align,fontSize:u.fontSize,fontFamily:u.fontFamily,textMetrics:c,rotate:E,overflow:!!T}))&&(void 0!==A&&(e.data=A),"object"===x(h.background)&&(e.backgroundColor="function"==typeof h.background.fill?h.background.fill(f,S):h.background.fill,void 0!==e.backgroundColor&&(e.backgroundBounds=il(e,c,E,o,h.background.padding))),M.push(e),_.labels.push({node:i,textBounds:il(e,c,E,o,h.padding)}))}}}var z=M.filter(k(_));return O(z.filter(function(t){return void 0!==t.backgroundBounds}).map(Zc)).concat(O(z))}function al(t){var e=2*Math.PI;return(t%e+e)%e}function ol(t,e,n){var i=e.x,r=e.y;if(t*t<i*i+r*r)return null;var a=Math.sin(n),o=Math.cos(n),s=i*o-r*a,c=t*t-s*s;if(c<0)return null;var l=Math.sqrt(c);return{x:s*o+a*l,y:-s*a+o*l}}function sl(t){var e,n,i=t.slice,r=t.padding,a=t.measured,o=i.start,s=i.end,c=i.innerRadius,l=i.outerRadius,u=al((o+s)/2),h=function(t){var e,n,i=t.radius,r=t.size,a=t.angle,o=r.width,s=r.height,c={x:o/2,y:s/2};switch(Math.floor(a/(Math.PI/2))){case 0:if(!(e=ol(i,c,a)))return null;e.y*=-1,n={x:-o,y:0};break;case 1:if(!(e=ol(i,c,Math.PI-a)))return null;n={x:-o,y:-s};break;case 2:if(!(e=ol(i,c,a-Math.PI)))return null;e.x*=-1,n={x:0,y:-s};break;case 3:if(!(e=ol(i,c,2*Math.PI-a)))return null;e.x*=-1,e.y*=-1,n={x:0,y:0};break;default:throw new Error("invalid angle")}return{x:e.x+n.x,y:e.y+n.y,width:o,height:s}}({radius:l,size:{width:a.width+2*r,height:a.height+2*r},angle:u});return h?(h.baseline="top",Ho(h,{x1:0,y1:0,x2:Math.sin(o)*l,y2:-Math.cos(o)*l})?null:Ho(h,{x1:0,y1:0,x2:Math.sin(s)*l,y2:-Math.cos(s)*l})?null:qo({cx:0,cy:0,r:c},h)?null:(n=r,(e=h).x+=n,e.width-=2*n,e.y+=n,e.height-=2*n,h)):null}function cl(t){var e=t.slice,n=t.measured,i=t.padding,r=e.start,a=e.end,o=e.innerRadius,s=e.outerRadius,c=s-o-2*i,l=a-r;if(l<Math.PI){var u=(n.height/2+i)/Math.tan(l/2);o<u&&(c=s-u-2*i)}if(c<0)return null;var h=al((r+a)/2),f=s-i,d={x:Math.sin(h)*f,y:-Math.cos(h)*f,width:c,height:n.height};return h<Math.PI?(d.angle=h-Math.PI/2,d.anchor="end"):(d.angle=h+Math.PI/2,d.anchor="start"),d}function ll(t){var e=t.context,n=t.node,i=t.bounds,r=n.desc.slice,a=al((r.start+r.end)/2);switch(Math.floor(a/(Math.PI/2))){case 0:e.q1maxY=i.y-2,void 0===e.q2minY&&(e.q2minY=i.y+i.height+2);break;case 1:e.q2minY=i.y+i.height+2;break;case 2:e.q3minY=i.y+i.height+2;break;case 3:e.q4maxY=i.y-2,void 0===e.q3minY&&(e.q3minY=i.y+i.height+2)}}function ul(t,e,n){var i={type:"text",text:e,maxWidth:t.width,x:t.x,y:t.y+("top"===t.baseline?t.height/2:0),fill:n.fill,anchor:t.anchor||"start",baseline:"middle",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily};if(!isNaN(t.angle)){var r=t.angle*(360/(2*Math.PI));i.transform="rotate(".concat(r,", ").concat(i.x,", ").concat(i.y,")")}return i}function hl(t){var e,n,i=t.slice,r=t.direction,a=t.position,o=t.padding,s=t.measured,c=t.view,l=t.context,u=i.start,h=i.end,f=i.innerRadius,d=i.offset;switch(a){case"into":e="rotate"===r?cl({slice:i,measured:s,padding:o}):sl({slice:i,measured:s,padding:o});break;case"inside":n={start:u,end:h,innerRadius:0,outerRadius:f},e="rotate"===r?cl({slice:n,measured:s,padding:o}):sl({slice:n,measured:s,padding:o});break;case"outside":e="rotate"===r?function(t){var e=t.slice,n=t.measured,i=t.padding,r=t.view,a=e.start,o=e.end,s=e.outerRadius,c=e.offset,l=s+i,u=o-a;if(u<Math.PI&&l<(n.height/2+i)/Math.tan(u/2))return null;var h=al((a+o)/2),f=Math.sin(h)*l,d=-Math.cos(h)*l,p=n.width,g=h%Math.PI;if(g>Math.PI/2&&(g=Math.PI-g),.001<Math.cos(g)){var y=d<0?r.y:r.y+r.height,v=Math.abs(y-c.y)/Math.cos(g)-Math.tan(g)*(n.height/2)-2*i-s;v<p&&(p=v)}if(.001<Math.sin(g)){var m=f<0?r.x:r.x+r.width,x=Math.abs(m-c.x)/Math.sin(g)-n.height/2/Math.tan(g)-2*i-s;x<p&&(p=x)}if(p<=0)return 0;var b={x:f,y:d,width:p,height:n.height};return h<Math.PI?(b.angle=h-Math.PI/2,b.anchor="start"):(b.angle=h+Math.PI/2,b.anchor="end"),b}({slice:i,measured:s,padding:o,view:c}):function(t){var e=t.slice,n=t.measured,i=t.padding,r=t.view,a=t.context,o=e.start,s=e.end,c=e.outerRadius,l=e.offset,u=al((o+s)/2);if(function(t,e,n){switch(e){case 0:return t.q1maxY<0;case 1:return t.q2minY>n.height;case 2:return t.q3minY>n.height;case 3:return t.q4maxY<0;default:return!0}}(a,Math.floor(u/(Math.PI/2)),r))return null;var h=c+i+n.height/2,f=Math.sin(u)*h,d=-Math.cos(u)*h,p=n.width;if(u<Math.PI){var g=Math.abs(r.x+r.width-(f+l.x));g<p&&(p=g)}else{var y=Math.abs(r.x-(f+l.x));y<p&&(p=y)}var v={x:f,y:d,width:p,height:n.height};return u<Math.PI?v.anchor="start":v.anchor="end",v}({slice:i,measured:s,padding:o,view:c,context:l});break;default:throw new Error("not implemented")}return e&&(e.x+=d.x,e.y+=d.y,"outside"===a&&"rotate"!==r&&function(t,e,n){var i=n.start,r=n.end,a=n.offset,o=n.outerRadius,s=al((i+r)/2);switch(Math.floor(s/(Math.PI/2))){case 0:if(void 0!==e.q1maxY){var c=Math.min(t.y,e.q1maxY-t.height),l=t.y-c;if(t.y=c,1<l){var u=o+2;t.line={type:"line",x1:t.x-2,y1:t.y+2,x2:a.x+Math.sin(s)*u,y2:a.y-Math.cos(s)*u,strokeWidth:1}}}break;case 1:if(void 0!==e.q2minY){var h=Math.max(t.y,e.q2minY),f=h-t.y;if(t.y=h,1<f){var d=o+2;t.line={type:"line",x1:t.x-2,y1:t.y-2,x2:a.x+Math.sin(s)*d,y2:a.y-Math.cos(s)*d,strokeWidth:1}}}break;case 2:if(void 0!==e.q3minY){var p=Math.max(t.y,e.q3minY),g=p-t.y;if(t.y=p,1<g){var y=o+2;t.line={type:"line",x1:t.x+2,y1:t.y-2,x2:a.x+Math.sin(s)*y,y2:a.y-Math.cos(s)*y,strokeWidth:1}}}break;case 3:if(void 0!==e.q4maxY){var v=Math.min(t.y,e.q4maxY-t.height),m=t.y-v;if(t.y=v,1<m){var x=o+2;t.line={type:"line",x1:t.x+2,y1:t.y+2,x2:a.x+Math.sin(s)*x,y2:a.y-Math.cos(s)*x,strokeWidth:1}}}}}(e,l,i)),e}function fl(t){for(var e=t.context,n=t.direction,i=t.measured,r=t.node,a=t.placementSettings,o=t.rect,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:hl,c=0;c<a.length;c++){var l=a[c],u=s({context:e,slice:r.desc.slice,view:o,direction:n,position:l.position,measured:i,padding:l.padding});if(u)return{bounds:u,placement:l}}return{bounds:null,placement:null}}var dl=1.2;function pl(t,e,n){var i={type:"text",text:e,maxWidth:t.width,x:0,y:t.y,dx:0,dy:0,fill:n.fill,anchor:"start",baseline:"alphabetical",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily},r=n.textMetrics;if(t.width<n.fontSize)return!1;var a=Math.max(0,t.width-r.width);return i.x=t.x+n.align*a,i.y=t.y+r.height/dl,i}function gl(t){return{type:"circle",bounds:{cx:t.cx,cy:t.cy,r:t.r}}}function yl(t){return t.desc&&t.desc.slice?function(t){var e=t.start,n=t.end,i=t.innerRadius,r=t.outerRadius,a=t.offset;if(1e-12<Math.abs(e+2*Math.PI-n))return{type:null,bounds:null};var o=0!==i?i:r;return gl({cx:a.x,cy:a.y,r:o})}(t.desc.slice):"circle"===t.type?gl(t.attrs):"rect"===t.type?{type:"rect",bounds:t.bounds}:{type:null,bounds:null}}var vl={bar:function(t){var e=t.settings,n=t.chart,i=t.nodes,r=t.rect,a=t.renderer,o=t.style,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:rl,c=v({fontSize:12,fontFamily:"Arial",align:.5,justify:0,fill:"#333"},o.label);c.fontSize=parseInt(c.fontSize,10);var l=e.labels.map(function(t){return v({},c,e,t)}),u=e.labels.map(function(t){return t.placements.map(function(n){return v({},c,e,t,n)})}),h=function(t){for(var e,n,i,r,a,o,s,c=t.nodes,l=t.rect,u=t.chart,h=t.labelSettings,f=t.placementSettings,d=t.settings,p=t.renderer,g={},y=[],v=!0,m=!1,x=0;x<c.length;x++)if(Wo(r=(n=c[x]).localBounds,l)){var b=Kc(n,u);e={node:n,texts:[],measurements:[],labelSettings:[],placementSettings:[]};for(var w=0;w<h.length;w++)Gc(i="function"==typeof(o=h[w]).label?o.label(b,x):void 0)&&(s="function"==typeof d.direction?d.direction(b,x):d.direction||"up",m=m||"left"===s||"right"===s,g.fontFamily=o.fontFamily,g.fontSize="".concat(o.fontSize,"px"),g.text=i,a=p.measureText(g),e.measurements.push(a),e.texts.push(i),e.labelSettings.push(o),e.placementSettings.push(f[w]),e.direction=s,v=v&&a.width<=r.width-2*Jc);y.push(e)}return{targetNodes:y,fitsHorizontally:v,hasHorizontalDirection:m}}({nodes:i,chart:n,renderer:a,settings:e,rect:r,labelSettings:l,placementSettings:u}),f=h.fitsHorizontally,d=h.hasHorizontalDirection,p=h.targetNodes,g=d?"y":"x",y=d?"height":"width";return p.sort(function(t,e){return t.node.localBounds[g]+t.node.localBounds[y]-(e.node.localBounds[g]+e.node.localBounds[y])}),s({chart:n,targetNodes:p,stngs:e,rect:r,fitsHorizontally:f,collectiveOrientation:d?"h":"v"})},slice:function(t){var e=t.settings,n=t.chart,i=t.nodes,r=t.rect,a=t.renderer,o=t.style,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:fl,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ul,l=v({fontSize:12,fontFamily:"Arial",fill:"#333",padding:4,position:"into"},o.label);l.fontSize=parseInt(l.fontSize,10);for(var u,h,f,d,p,g=e.labels.map(function(t){return v({},l,e,t)}),y=e.labels.map(function(t){return t.placements.map(function(n){return v({},l,e,t,n)})}),m={},x=[],b={},w=0,k=(i=function(t){for(var e=[],n=[],i=[],r=[],a=0;a<t.length;++a){var o=t[a].desc.slice,s=al((o.start+o.end)/2);switch(Math.floor(s/(Math.PI/2))){case 0:e.push(t[a]);break;case 1:n.push(t[a]);break;case 2:i.push(t[a]);break;case 3:r.push(t[a])}}var c=function(t,e){return al((t.desc.slice.start+t.desc.slice.end)/2)-al((e.desc.slice.start+e.desc.slice.end)/2)},l=function(t,e){return c(e,t)};return e.sort(l),n.sort(c),i.sort(l),r.sort(c),e.concat(n,r,i)}(i)).length;w<k;w++)for(var M=i[w],_=(p=n,{node:d=M,data:d.data,scale:p.scale,formatter:p.formatter,dataset:p.dataset}),S=0;S<g.length;S++){var R=g[S],C="function"==typeof R.label?R.label(_,w):"";if(C){var N="function"==typeof R.direction?R.direction(_,w):R.direction||"horizontal",A="function"==typeof R.linkData?R.linkData(_,w):void 0;m.fontFamily=R.fontFamily,m.fontSize="".concat(R.fontSize,"px"),m.text=C;var T=a.measureText(m),E=s({context:b,direction:N,lblStngs:R,measured:T,node:M,placementSettings:y[S],rect:r}),z=E.bounds,O=E.placement;if(z&&O){if("outside"===O.position&&"rotate"!==N){ll({context:b,node:M,bounds:z});var j={x:(f=z).x,y:f.y-f.height/2,width:f.width,height:f.height};if(!((u=j).x>=(h=r).x&&u.x+u.width<=h.x+h.width&&u.y>=h.y&&u.y+u.height<=h.y+h.height))continue}var D="function"==typeof O.fill?O.fill(_,w):O.fill,q=c(z,C,{fill:D,fontSize:R.fontSize,fontFamily:R.fontFamily,textMetrics:T});q&&(void 0!==A&&(q.data=A),x.push(q),z.line&&(z.line.stroke=D,x.push(z.line)))}}}return x},rows:function(t){var e=t.settings,n=t.chart,i=t.nodes,r=t.renderer,a=t.style,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:pl,s=v({fontSize:12,fontFamily:"Arial",fill:"#333",padding:4,align:.5,justify:.5},a.label);s.fontSize=parseInt(s.fontSize,10);for(var c,l,u=v({},s,e),h=e.labels.map(function(t){return v({},u,t)}),f={},d=[],p=0,g=i.length;p<g;p++){var y=i[p],m=(l=n,{node:c=y,data:c.data,scale:l.scale,formatter:l.formatter,dataset:l.dataset}),x=yl(y),b=x.type,w=x.bounds;if(w){var k=0,M=[],_=[],S="circle"===b?2*w.r*.9:w.height;k+=u.padding;var R=void 0;for(R=0;R<h.length;R++){var C=h[R],N="function"==typeof C.label?C.label(m,p):"";f.fontFamily=C.fontFamily,f.fontSize="".concat(C.fontSize,"px"),f.text=N;var A=r.measureText(f);if(S<(k+=A.height+C.padding))break;_.push(N),M.push(A)}var T=R,E=Math.max(0,S-k),z=void 0;for(z="circle"===b?w.cy-.9*w.r:w.y,z+=u.justify*E+u.padding,R=0;R<T;R++){var O=h[R],j=void 0;if("circle"===b){var D=Math.max(Math.abs(z-w.cy),Math.abs(z+M[R].height-w.cy)),q=Math.sqrt(w.r*w.r-D*D);j={x:w.cx-q+u.padding,y:z,width:2*q-2*u.padding,height:M[R].height}}else j={x:w.x+u.padding,y:z,width:w.width-2*u.padding,height:M[R].height};z+=M[R].height+u.padding;var P="function"==typeof O.fill?O.fill(m,p):O.fill,I="function"==typeof O.linkData?O.linkData(m,p):void 0,F=o(j,_[R],{fill:P,align:O.align,fontSize:O.fontSize,fontFamily:O.fontFamily,textMetrics:M[R]});F&&(void 0!==I&&(F.data=I),d.push(F))}}}return d}};var ml={require:["chart","renderer","settings"],defaultSettings:{settings:{},style:{label:"$label"}},render:function(){var t=this,e=this.settings.settings,n=[];return(e.sources||[]).forEach(function(e){e.strategy&&vl[e.strategy.type]&&e.component&&n.push.apply(n,O(function(t,e){var n=t.chart,i=t.source,r=t.rect,a=t.renderer,o=t.style;if(!n.component(i.component))return[];var s=n.findShapes(i.selector).filter(function(t){return t.key===i.component});return e({chart:n,settings:i.strategy.settings,nodes:s,rect:{x:0,y:0,width:r.width,height:r.height},renderer:a,style:o})}({chart:t.chart,rect:t.rect,renderer:t.renderer,source:e,style:t.style},vl[e.strategy.type])))}),n}};var xl={layout:{size:1,direction:"ltr",scrollOffset:0},item:{show:!0,justify:.5,align:.5,label:{fontSize:"12px",fontFamily:"Arial",fill:"#595959",wordBreak:"none",maxLines:2,maxWidth:136,lineHeight:1.2},shape:{type:"square",size:12}},title:{show:!0,text:void 0,anchor:"start",fontSize:"16px",fontFamily:"Arial",fill:"#595959",wordBreak:"none",maxLines:2,maxWidth:156,lineHeight:1.25},navigation:{button:{class:void 0,content:void 0},disabled:!1}};function bl(t){var e,n,i,r,a,o=t.x,s=void 0===o?0:o,c=t.y,l=t.item,u=t.globalMetrics,h=t.symbolFn,f=void 0===h?ko:h,d=t.direction,p=void 0===d?"ltr":d,g=l.label.displayObject,y=l.label.bounds,m=l.symbol.meta,x="rtl"===p,b={x:x?s+u.maxLabelBounds.width:s+u.maxSymbolSize+u.spacing,y:c,width:u.maxLabelBounds.width,height:Math.max(u.maxSymbolSize,u.maxLabelBounds.height)},w=(e={x:x?s+u.maxLabelBounds.width+u.spacing:s,y:c,width:u.maxSymbolSize,height:b.height},n=m.size,i={align:void 0===m.align?.5:m.align,justify:void 0===m.justify?.5:m.justify},r=Math.max(0,e.width-n),a=Math.max(0,e.height-n),{x:e.x+n/2+i.align*r,y:e.y+n/2+i.justify*a}),k=f(v({},m,w));return delete k.collider,g.anchor=x?"end":"start",function(t,e,n){var i=n.textMetrics;if(t.height<i.height)return;var r=Math.max(0,t.width-i.width);e.baseline="text-before-edge";var a=Math.max(0,t.height-i.height);e.x=t.x+n.align*r,e.y=t.y+n.justify*a+.175*parseInt(e.fontSize,10)}(b,g,{textMetrics:y,fontSize:parseInt(g.fontSize,10),align:0,justify:.5}),{item:{type:"container",data:l.label.displayObject.data,children:[k,g],collider:{type:"rect",x:s,y:c,width:u.maxItemBounds.width,height:u.maxItemBounds.height}},metrics:b}}function wl(t,e){var n=t.items.length,i=Math.ceil(n/e),r="horizontal"===t.layout.orientation?"width":"height",a="width"===r?"horizontal":"vertical";return t.globalMetrics.maxItemBounds[r]*i+(i-1)*t.layout.margin[a]}function kl(t,e){var n,i,r,a,o=e.onScroll,s=void 0===o?function(){}:o,c=null,l=0,u={itemize:function(e){n=function(t,e){for(var n,i,r=t.resolved,a=t.dock,o=[],s=r.items.items,c=r.symbols.items,l=r.labels.items,u=0,h=0,f=0,d=0;d<s.length;d++)if(!1!==s[d].show){var p=void 0!==l[d].text?l[d].text:l[d].data.label||"";n=v({},l[d],{type:"text",fontSize:"".concat(parseInt(l[d].fontSize,10),"px"),text:p,title:p}),i={symbol:{meta:c[d]},label:{displayObject:n,bounds:e.textBounds(n)}},o.push(i),u=Math.max(c[d].size,u),h=Math.max(i.label.bounds.width,h),f=Math.max(i.label.bounds.height,f)}return{items:o,globalMetrics:{spacing:8,maxSymbolSize:u,maxItemBounds:{height:Math.max(u,f),width:u+8+h},maxLabelBounds:{width:h,height:f}},layout:{margin:{vertical:void 0!==r.layout.item.vertical?r.layout.item.vertical:4,horizontal:void 0!==r.layout.item.horizontal?r.layout.item.horizontal:4},mode:r.layout.item.mode,size:r.layout.item.size,orientation:"top"===a||"bottom"===a?"horizontal":"vertical",direction:r.layout.item.direction,scrollOffset:r.layout.item.scrollOffset}}}(e,t.renderer),c=isNaN(n.layout.scrollOffset)?c:n.layout.scrollOffset},getItemsToRender:function(t){r=t.viewRect,l=u.getContentOverflow(r);var e=u.extent();c=Math.max(0,Math.min(c,l)),a=v({},r);var o="horizontal"===u.orientation()?"x":"y";return a[o]-=c,a["x"===o?"width":"height"]=e,function(t,e,n){for(var i=t.viewRect,r=n.itemized,a=n.create,o=void 0===a?bl:a,s=n.parallels,c=r.layout.direction,l=r.globalMetrics,u=r.items,h="horizontal"===r.layout.orientation,f=0,d=[],p=l.maxItemBounds.height,g=l.maxItemBounds.width,y=r.layout.margin.vertical+p,v=r.layout.margin.horizontal+g,m=e.x,x=e.y,b=i.x-e.x,w=0;w<u.length;w++){var k=o({y:x,x:"rtl"===c?i.x+b+i.width-g-(m-e.x):m,item:u[w],globalMetrics:l,direction:c});if((h&&m>=i.x-g||!h&&x>=i.y-p)&&d.push(k.item),s<=++f?(f=0,h?(m+=v,x=e.y):(x+=y,m=e.x)):h?x+=y:m+=v,!h&&x>i.y+i.height)break;if(h&&m>i.x+i.width)break}return d}(t,a,{itemized:n,parallels:i})},parallelize:function(t,e){return i=function(t,e,n){var i=n.items.length,r="horizontal"===n.layout.orientation?"width":"height",a="width"===r?"horizontal":"vertical",o=n.globalMetrics.maxItemBounds[r]*i+(i-1)*n.layout.margin[a],s=Math.ceil(o/t);if(null!=e){var c="horizontal"===n.layout.orientation?"height":"width",l=Math.floor(e/(4+n.globalMetrics.maxItemBounds[c]));s=Math.min(s,l)}var u=isNaN(n.layout.size)?1:n.layout.size;return Math.max(1,Math.min(s,u))}(t,e,n)},hasContentOverflow:function(){var t="horizontal"===n.layout.orientation?"width":"height";return wl(n,i)>r[t]},getContentOverflow:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r,e="horizontal"===n.layout.orientation?"width":"height";return Math.max(0,wl(n,i)-t[e])},getNextSize:function(){var t="horizontal"===n.layout.orientation?"width":"height",e="width"===t?"horizontal":"vertical";return n.globalMetrics.maxItemBounds[t]+n.layout.margin[e]},getPrevSize:function(){var t="horizontal"===n.layout.orientation?"width":"height",e="width"===t?"horizontal":"vertical";return n.globalMetrics.maxItemBounds[t]+n.layout.margin[e]},hasNext:function(){return"horizontal"===u.orientation()?r.x+r.width<a.x+a.width:r.y+r.height<a.y+a.height},hasPrev:function(){return"horizontal"===u.orientation()?a.x<r.x:a.y<r.y},next:function(){u.scroll(-u.getNextSize())},prev:function(){u.scroll(u.getPrevSize())},scroll:function(t){var e=Math.max(0,Math.min(l,c-t));e!==c&&(c=e,s())},offset:function(){return c},orientation:function(){return n.layout.orientation},direction:function(){return n.layout.direction},extent:function(){return wl(n,i)},spread:function(){return e=i,r="horizontal"===(t=n).layout.orientation?"height":"width",a="width"===r?"horizontal":"vertical",t.globalMetrics.maxItemBounds[r]*e+(e-1)*t.layout.margin[a];var t,e,r,a}};return u}function Ml(t){return Object.keys(t).filter(function(e){return t[e]}).join(" ")}var _l={up:"▲",right:"▶",down:"▼",left:"◀"};function Sl(t,e){var n=e.size,i=e.isActive,r=e.direction,a=e.nav,o=e.attrs,s={},c="";a&&a.button&&("function"==typeof a.button.class?s=a.button.class({direction:r}):a.button.class&&(s=a.button.class),"function"==typeof a.button.content&&(c=a.button.content(t,{direction:r})));var l={width:"".concat(n,"px"),minWidth:"".concat(n,"px"),height:"".concat(n,"px")};Object.keys(s).length||(l.border="0",l.background="none");var u=o;return(!i||a&&a.disabled)&&(u.disabled="disabled"),t("button",v({class:Ml(s),style:l},u),[c||t("span",{style:{pointerEvents:"none"}},[_l[r]])])}function Rl(t){var e,n={itemize:function(t){var n,i;i=(n=t).dock,e={layout:{orientation:"top"===i||"bottom"===i?"vertical":"horizontal"},navigation:n.navigation}},render:function(i){return function(t,e,n,i){var r=e.rect,a=e.itemRenderer;if(t&&t.renderArgs){t.size(r);var o=t.renderArgs[0],s="vertical"===n.layout.orientation,c="rtl"===a.direction(),l=a.hasNext(),u=a.hasPrev();if(u||l){var h=s?["right","left"]:["down","up"];c&&s&&h.reverse();var f=[o("div",{style:{position:"relative",display:"flex","flex-direction":s?"column":"row","justify-content":"center",height:"100%",pointerEvents:"auto"},dir:c&&!s?"rtl":"ltr"},[Sl(o,{size:32,isActive:l,direction:h[0],attrs:{"data-action":"next","data-component-key":i.settings.key},nav:n.navigation}),Sl(o,{size:32,isActive:u,direction:h[1],attrs:{"data-action":"prev","data-component-key":i.settings.key},nav:n.navigation})])];t.render(f)}else t.render([])}}(n.renderer,i,e,t)},extent:function(){return 32},spread:function(){return 64}};return n}function Cl(t){var e,n={itemize:function(n){e=function(t,e){var n=t.resolved;if(!1===n.title.item.show)return null;var i=v({},n.title.item,{type:"text"});if("rtl"===n.layout.item.direction&&(i.anchor&&"start"!==i.anchor?"end"===i.anchor&&(i.anchor="start"):i.anchor="end"),void 0===n.title.settings.text){var r=e.scale.data().fields;i.text=r&&r[0]?r[0].title():""}return{displayObject:i,bounds:e.renderer.textBounds(i)}}(n,t)},render:function(t){!function(t,e,n){var i=t.rect;if(e){var r=[];if(e.size(i),n){var a={start:0,end:i.width,middle:i.width/2};r.push(v({},n.displayObject,{x:a[n.displayObject.anchor]||0,y:0,baseline:"text-before-edge",title:n.displayObject.text}))}e.render(r)}}(t,n.renderer,e)},spread:function(){return e?e.bounds.height:0},extent:function(){return e?e.bounds.width:0}};return n}function Nl(t,e,n,i){var r,a,o,s=i.itemRenderer,c=i.navigationRenderer,l=i.titleRenderer,u=i.isPreliminary,h=void 0!==u&&u,f=0,d={x:e.spacing,y:e.spacing,width:t.width-2*e.spacing,height:t.height-2*e.spacing};if(r={x:d.x,y:d.y,width:d.width,height:l.spread()},"horizontal"===n){r={x:d.x,y:d.y,width:l.extent(),height:l.spread()};var p=d.width-r.width-(r.width?e.spacing:0),g=d.height;s.parallelize(p,h?void 0:g);var y=s.extent()>p?c.extent():0,m=s.spread(),x=y?c.spread():0;o={x:(a={x:r.x+r.width+(r.width?e.spacing:0),y:d.y+Math.max(0,(x-m)/2),width:d.width-y-r.width-(y?e.spacing:0)-(r.width?e.spacing:0),height:g}).x+a.width+(y?e.spacing:0),y:d.y,width:y,height:d.height},r.y=a.y,"rtl"===s.direction()&&(o.x=d.x,a.x=o.x+o.width+(o.width?e.spacing:0),r.x=a.x+a.width+(r.width?e.spacing:0)),f=Math.max(r.height,x,s.spread())}else{var b=d.height-r.height-(r.height?e.spacing:0),w=d.width;s.parallelize(b,h?void 0:w);var k=s.extent()>b?c.extent():0;o={x:d.x,y:d.y+d.height-k,width:d.width,height:k},a={x:d.x,y:r.y+r.height+(r.height?e.spacing:0),width:d.width,height:d.height-r.height-(r.height?e.spacing:0)-o.height-(o.height?e.spacing:0)},f=Math.max(l.extent(),k?c.spread():0,s.spread())}return a=v({},t,{x:t.x+a.x,y:t.y+a.y,width:a.width,height:a.height}),o.x+=t.x,o.y+=t.y,r.x+=t.x,r.y+=t.y,{title:v({},t,r),content:v({},t,a),navigation:v({},t,o),orientation:n,preferredSize:f}}function Al(t){t.state.resolved=function(t){var e=t.scale.domain(),n={items:[]},i=t.settings.layout.dock;if("threshold-color"===t.scale.type){var r=t.scale.data().fields[0],a=function(t){return String(t)};t.settings.formatter?a=t.chart.formatter(t.settings.formatter):r&&(a=r.formatter());for(var o=0;o<e.length-1;o++){var s={value:e[o],label:"".concat(a(e[o])," - < ").concat(a(e[o+1]))};r&&(s.source={field:r.id()}),n.items.push(s)}"vertical"==("top"===i||"bottom"===i?"horizontal":"vertical")&&n.items.reverse()}else{var c=t.scale.labels?t.scale.labels():null;n.items=e.map(function(e,n){var i=t.scale.datum?v({},t.scale.datum(e)):{value:e};return i.value=e,t.scale.label?i.label=t.scale.label(e):c&&(i.label=c[n]),i})}var l=t.resolver.resolve({data:{fields:t.scale.data().fields},defaults:v(!0,{},xl.title,t.style.title),settings:t.settings.settings.title}),u=t.resolver.resolve({data:{fields:t.scale.data().fields},defaults:xl.layout,settings:t.settings.settings.layout}),h=t.resolver.resolve({data:n,defaults:v(!0,{},xl.item.label,t.style.item.label),settings:(t.settings.settings.item||{}).label}),f=v(!0,{},(t.settings.settings.item||{}).shape);void 0===f.fill&&t.settings.scale&&(f.fill={scale:t.settings.scale});var d=t.resolver.resolve({data:n,defaults:v(!0,{},xl.item.shape,t.style.item.shape),settings:f}),p=t.resolver.resolve({data:n,defaults:v(!0,{},{show:xl.item.show}),settings:{show:(t.settings.settings.item||{}).show}});function g(t,n){var i=t.data.value,r=e[n+1];t.data.value=[i,r]}return"threshold-color"===t.scale.type&&("vertical"==("top"===i||"bottom"===i?"horizontal":"vertical")?(p.items.reverse().forEach(g),p.items.reverse()):p.items.forEach(g)),{title:l,labels:h,symbols:d,items:p,layout:u}}(t),t.titleRenderer.itemize({resolved:t.state.resolved,dock:t.settings.layout.dock||"center"}),t.itemRenderer.itemize({resolved:t.state.resolved,dock:t.settings.layout.dock||"center"}),t.navigationRenderer.itemize({resolved:t.state.resolved,dock:t.settings.layout.dock||"center",navigation:t.settings.settings.navigation}),t.state.display={spacing:8}}function Tl(t){var e=t.rect,n=t.settings,i=t.state,r=t.itemRenderer,a=t.navigationRenderer,o=t.titleRenderer,s=n.layout.dock,c="top"===s||"bottom"===s?"horizontal":"vertical",l=Nl(e,i.display,c,{itemRenderer:r,navigationRenderer:a,titleRenderer:o});t.renderer.size(l.content);var u=r.getItemsToRender({viewRect:v({},l.content,{x:0,y:0})});return a.render({rect:l.navigation,itemRenderer:r}),o.render({rect:l.title}),t.state.views={layout:l},u}var El={require:["chart","settings","renderer","update","resolver","registries"],defaultSettings:{settings:{},style:{item:{label:"$label",shape:"$shape"},title:"$title"}},mounted:function(t){t&&t.parentNode&&(this.navigationRenderer.renderer.appendTo(t.parentNode),this.titleRenderer.renderer.appendTo(t.parentNode),t.parentNode.insertBefore(this.navigationRenderer.renderer.element(),t),t.parentNode.insertBefore(this.titleRenderer.renderer.element(),t)),this.navigationRenderer.render({rect:this.state.views.layout.navigation,itemRenderer:this.itemRenderer}),this.titleRenderer.render({rect:this.state.views.layout.title})},beforeUnmount:function(){this.navigationRenderer.renderer.clear(),this.titleRenderer.renderer.clear()},on:{panstart:function(){this.state.interaction.started||this.itemRenderer.getContentOverflow()&&(this.state.interaction.started=!0,this.state.interaction.delta=0)},panmove:function(t){if(this.state.interaction.started){var e="horizontal"===this.itemRenderer.orientation()?("rtl"===this.itemRenderer.direction()?-1:1)*t.deltaX:t.deltaY;this.itemRenderer.scroll(e-this.state.interaction.delta),this.state.interaction.delta=e}},panend:function(){this.state.interaction.started=!1},scroll:function(t){this.itemRenderer.scroll(-t)},next:function(){this.itemRenderer.next()},prev:function(){this.itemRenderer.prev()}},created:function(){var t=this;this.state={interaction:{}},this.onScroll=function(){var e=Tl(t);t.update(e)},this.itemRenderer=kl(this,{onScroll:this.onScroll}),this.navigationRenderer=Rl(this),this.titleRenderer=Cl(this),this.navigationRenderer.renderer=this.registries.renderer("dom")(),this.titleRenderer.renderer=this.registries.renderer(this.settings.renderer)(),Al(this)},preferredSize:function(t){return n=t,i=0,r=(e=this).settings.layout.dock||"center",a="top"===r||"bottom"===r?"horizontal":"vertical",o=e.state.display,s=Nl(n.inner,o,a,{itemRenderer:e.itemRenderer,navigationRenderer:e.navigationRenderer,titleRenderer:e.titleRenderer,isPreliminary:!0}),i+=o.spacing,i+=s.preferredSize,i+o.spacing;var e,n,i,r,a,o,s},beforeUpdate:function(){Al(this)},render:function(){return Tl(this)},beforeDestroy:function(){this.navigationRenderer.renderer.destroy(),this.titleRenderer.renderer.destroy()},additionalElements:function(){return[this.titleRenderer.renderer.element(),this.navigationRenderer.renderer.element()]},_DO_NOT_USE_getInfo:function(){return{offset:this.itemRenderer.offset()}}};function zl(t,e){var n=0,i=t.state.isVertical?"justify":"align",r=t.state.isVertical?"y":"x",a=t.state.isVertical?"height":"width",o=t.state.isVertical?"requiredHeight":"requiredWidth";n=t.state.rect[a]-t.state.legend.length()-t.state.title[o](),n*=Math.min(1,Math.max(t.stgns[i],0)),e[r]+=n}function Ol(t,e,n){var i=n[t];return"object"===x(i)?-1!==i.valid.indexOf(e)?e:i.default:n.default}function jl(t,e){var n={x:0,y:0,width:0,height:0},i=t.stgns.padding;return n.x=i.left,n.y=i.top,n.width=e.width-i.left-i.right,n.height=e.height-i.top-i.bottom,n}function Dl(t){var e,n,i,r,a,o,s="top"!==t.settings.layout.dock&&"bottom"!==t.settings.layout.dock,c=t.stgns.title,l=t.chart.scale(t.stgns.fill),u=t.chart.scale(t.stgns.major),h=(e=t,i=(n=u).domain(),r=i,!(a=e.stgns.tick.label)&&e.formatter?a=e.formatter:!a&&n.data().fields&&(a=n.data().fields[0].formatter()),"function"==typeof a&&(r=i.map(a).map(String)),i.map(function(t,i){var a=r[i];return{value:t,label:a,pos:n.norm(parseFloat(t,10)),textMetrics:e.renderer.measureText({text:a,fontSize:e.stgns.tick.fontSize,fontFamily:e.stgns.tick.fontFamily})}})),f=Ol((o=t.settings).layout.dock,o.settings.tick.anchor,{left:{valid:["left","right"],default:"left"},right:{valid:["left","right"],default:"right"},top:{valid:["top","bottom"],default:"top"},bottom:{valid:["top","bottom"],default:"bottom"},default:"right"});if(void 0===c.text){var d=u.data().fields;c.text=d&&d[0]?d[0].title():""}var p,g=t.renderer.measureText({text:c.text,fontSize:c.fontSize,fontFamily:c.fontFamily}),y=t.renderer.textBounds({text:c.text,fontSize:c.fontSize,fontFamily:c.fontFamily,maxLines:c.maxLines,maxWidth:c.maxLengthPx,wordBreak:c.wordBreak,hyphens:c.hyphens,lineHeight:c.lineHeight}),v={isVertical:s,nodes:[],title:{anchor:(p=t.settings,Ol(p.layout.dock,p.settings.title.anchor,{left:{valid:["top"],default:"top"},right:{valid:["top"],default:"top"},top:{valid:["left","right"],default:"left"},bottom:{valid:["left","right"],default:"left"},default:"top"})),textMetrics:g,textBounds:y,requiredWidth:function(){if(!c.show)return 0;var t=y.width,e=c.maxLengthPx;return s||(t+=c.padding,e+=c.padding),Math.min(t,e,v.rect.width)},requiredHeight:function(){if(!c.show)return 0;var t=y.height;return s&&(t+=c.padding),Math.min(t,v.rect.height)}},ticks:{values:h,anchor:f,length:Math.min(Math.max.apply(Math,O(h.map(function(t){return t.textMetrics.width}))),t.stgns.tick.maxLengthPx),requiredHeight:function(){return"top"===f?Math.max.apply(Math,O(v.ticks.values.map(function(t){return t.textMetrics.height})))+t.stgns.tick.padding:0},height:Math.max.apply(Math,O(h.map(function(t){return t.textMetrics.height})))},legend:{fillScale:l,majorScale:u,length:function(){var e=s?"height":"width",n=s?"requiredHeight":"requiredWidth",i=Math.min(v.rect[e],v.rect[e]*t.stgns.length)-v.title[n]();return Math.max(0,Math.min(i,t.stgns.maxLengthPx))}}};return v}var ql={require:["chart","settings","renderer"],defaultSettings:{layout:{displayOrder:0,dock:"right"},settings:{size:15,length:.5,maxLengthPx:250,align:.5,justify:0,padding:{left:5,right:5,top:5,bottom:5},tick:{label:null,fill:"#595959",fontSize:"12px",fontFamily:"Arial",maxLengthPx:100,anchor:null,padding:5},title:{show:!0,text:void 0,fill:"#595959",fontSize:"12px",fontFamily:"Arial",maxLengthPx:100,padding:5,maxLines:2,wordBreak:"none",lineHeight:1.2,hyphens:"auto",anchor:null}}},preferredSize:function(t){var e=this.state;e.rect=jl(this,t.inner);var n=this.stgns.size,i=e.isVertical?this.stgns.padding.left+this.stgns.padding.right:this.stgns.padding.top+this.stgns.padding.bottom;n+=i;var r=Math.max(t.inner.width,t.inner.height);if("left"===e.ticks.anchor||"right"===e.ticks.anchor){if(e.ticks.values.reduce(function(t,e){return t+e.textMetrics.height},0)>this.state.legend.length())return r;n+=e.ticks.length}else{if(e.ticks.length>this.state.legend.length())return r;n+=Math.max.apply(Math,O(e.ticks.values.map(function(t){return t.textMetrics.height})))}return n+=this.stgns.tick.padding,this.stgns.title.show&&(n="left"===e.title.anchor||"right"===e.title.anchor?Math.max(e.title.textBounds.height+i,n):Math.max(n,e.title.requiredWidth()+i)),this.state.preferredSize=n},created:function(){this.stgns=this.settings.settings,this.state=Dl(this)},beforeUpdate:function(t){this.stgns=t.settings.settings,this.state=Dl(this)},beforeRender:function(t){if(this.state.nodes=[],this.state.rect=jl(this,t.size),this.stgns.title.show){var e=function(t){var e=t.state,n=t.stgns,i="left"===e.ticks.anchor,r="top"===e.ticks.anchor,a=e.rect.x,o=e.rect.y,s="start";"left"===e.title.anchor?(a+=e.title.requiredWidth()-n.title.padding,o+=e.title.textMetrics.height,o+=r?e.rect.height-e.title.textBounds.height:0,s="end"):"right"===e.title.anchor?(a+=e.legend.length(),a+=n.title.padding,o+=e.title.textMetrics.height,o+=r?e.rect.height-e.title.textBounds.height:0):"top"===e.title.anchor&&(a+=i?e.rect.width:0,o+=e.title.textMetrics.height,s=i?"end":"start");var c={tag:"legend-title",type:"text",x:a,y:Math.min(o,e.rect.y+e.rect.height),text:n.title.text,fill:n.title.fill,fontSize:n.title.fontSize,fontFamily:n.title.fontFamily,maxWidth:n.title.maxLengthPx,maxLines:n.title.maxLines,wordBreak:n.title.wordBreak,hyphens:n.title.hyphens,lineHeight:n.title.lineHeight,anchor:s,title:n.title.text};return zl(t,c),c}(this);this.state.nodes.push(e)}var n,i,r,a,o,s,c,l,u,h=function(t,e){var n=t.state,i=t.stgns,r=n.rect,a=r.x,o=r.y,s=n.isVertical?i.size:n.legend.length(),c=n.isVertical?n.legend.length():i.size;"left"===n.ticks.anchor?a+=n.rect.width-i.size:"top"===n.ticks.anchor&&(o+=n.rect.height-i.size),"top"===n.title.anchor?o+=n.title.requiredHeight():"left"===n.title.anchor&&(a+=n.title.requiredWidth());var l={type:"rect",x:a,y:o,width:s,height:c,fill:{type:"gradient",stops:e,degree:n.isVertical?90:180}};return zl(t,l),l}(this,(i=(n=this).state.legend.fillScale,r=n.state.legend.majorScale,i.domain().map(function(t){return{type:"stop",color:i(t),offset:Math.min(1,Math.max(0,r.norm(t)))}}).sort(function(t,e){return t.offset-e.offset}))),f={id:"legend-seq-target",type:"container",children:[h,(o=h,s=(a=this).state,c=a.stgns,l="start",u={type:"rect",x:o.x,y:o.y,width:s.isVertical?0:o.width,height:s.isVertical?o.height:0,fill:"transparent"},{type:"container",id:"legend-seq-ticks",children:O(s.ticks.values.map(function(t){var e=0,n=0,i=0,r="alphabetical";return s.isVertical?(n=o.y+o.height*t.pos,r=0===t.pos?"text-before-edge":"text-after-edge"):e=o.x+o.width*t.pos,"right"===s.ticks.anchor?(e=o.x+c.size+c.tick.padding,u.x=o.x+o.width):"left"===s.ticks.anchor?(e=o.x-c.tick.padding,l="end"):"top"===s.ticks.anchor?(n=o.y-c.tick.padding,i-=.25*t.textMetrics.height,l=0===t.pos?"start":"end"):"bottom"===s.ticks.anchor&&(n=o.y+o.height+c.tick.padding,i=.8*t.textMetrics.height,l=0===t.pos?"start":"end",u.y=o.y+o.height),{type:"text",x:e,y:n,dx:0,dy:i,text:t.label,fontSize:c.tick.fontSize,fontFamily:c.tick.fontFamily,fill:c.tick.fill,maxWidth:s.isVertical?c.tick.maxLengthPx:Math.min(c.tick.maxLengthPx,s.legend.length()/2),anchor:l,textBoundsFn:a.renderer.textBounds,title:t.label,baseline:r}})).concat([u])})]};this.state.nodes.push(f)},render:function(){return this.state.nodes}};var Pl={step:function(t){return new te(t,.5)},stepAfter:function(t){return new te(t,1)},stepBefore:function(t){return new te(t,0)},linear:Et,basis:function(t){return new Ft(t)},cardinal:Wt.tension(0),catmullRom:Ht,monotonex:function(t){return new Jt(t)},monotoney:function(t){return new Kt(t)},natural:function(t){return new Zt(t)}},Il={coordinates:{minor:.5,major:.5,layerId:0},orientation:"horizontal",layers:{curve:"linear",show:!0,sort:void 0,line:{stroke:"#ccc",strokeWidth:1,strokeLinejoin:"miter",strokeDasharray:void 0,opacity:1,show:!0},area:{fill:"#ccc",opacity:.8,show:!0}}};function Fl(t,e){var n=e.generator,i=e.item,r=e.data,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o={type:"path",d:n(t),opacity:i.opacity,stroke:i.stroke,strokeWidth:i.strokeWidth,strokeLinejoin:i.strokeLinejoin,fill:a||i.fill,data:r};return i.strokeDasharray&&(o.strokeDasharray=i.strokeDasharray),o}function Bl(t){var e=function(t){for(var e=t.data,n=t.stngs,i=t.rect,r=t.resolver,a=t.style,o=i.width,s=i.height,c=r.resolve({data:e,defaults:Il.coordinates,settings:n.coordinates||{},scaled:{major:"vertical"===n.orientation?s:o,minor:"vertical"===n.orientation?o:s}}),l={},u=0,h=0;h<c.items.length;h++){var f=c.items[h],d=f.layerId;l[d]=l[d]||{order:u++,id:d,items:[],firstPoint:f.data},l[d].items.push(f)}var p=Object.keys(l).map(function(t){return l[t]}),g={items:p.map(function(t){return t.firstPoint})},y=n.layers||{};return{coordinates:c,metaLayers:p,layers:r.resolve({data:g,defaults:{curve:Il.layers.curve,show:Il.layers.show},settings:{curve:y.curve,show:y.show}}),lines:r.resolve({data:g,defaults:v({},Il.layers.line,a.line),settings:y.line}),areas:r.resolve({data:g,defaults:v({},Il.layers.area,a.area),settings:y.area})}}(t),n=e.metaLayers,i=e.coordinates,r=e.layers,a=e.lines,o=e.areas,s=[];return n.forEach(function(e,n){var c=r.items[n];if(!1!==c.show){c.datum=c.data,c.data=[],c.id=e.id;for(var l,u,h=[],f=[],d=0;d<e.items.length;d++)u=(l=e.items[d]).data,isNaN(l.major)||(t.missingMinor0&&(l.minor0=i.settings.minor.scale?i.settings.minor.scale(u.minor0?u.minor0.value:0):0),isNaN(l.minor)||h.push(l.minor),f.push(l),c.data.push(l.data));var p=h.sort(function(t,e){return t-e})[Math.floor((h.length-1)/2)];s.push({layerObj:c,lineObj:a.items[n],areaObj:o.items[n],median:p,points:f,firstPoint:e.firstPoint})}}),s}var Ll={require:["chart","resolver"],defaultSettings:{style:{area:"$shape",line:"$shape-outline"}},created:function(){},render:function(t){var e=t.data,n=this.rect,i=n.width,r=n.height;this.stngs=this.settings.settings||{};var a,o,s,c,l,u,h,f,d=!this.stngs.coordinates||void 0===this.stngs.coordinates.minor0,p=Bl({data:e,stngs:this.stngs,rect:this.rect,resolver:this.resolver,style:this.style,missingMinor0:d});if(this.stngs.layers&&this.stngs.layers.sort){var g=p.map(function(t){return{id:t.layerObj.id,data:t.layerObj.data}});g.sort(this.stngs.layers.sort).map(function(t){return t.id}),p.sort(function(t,e){return g.indexOf(e.layerObj.id)-g.indexOf(t.layerObj.id)})}else p.sort(function(t,e){return t.median-e.median});return a=p,o={width:i,height:r,missingMinor0:d,stngs:this.stngs},s=o.width,c=o.height,l=o.missingMinor0,u=o.stngs,h=[],f=u.layers||{},a.forEach(function(t){var e,n,i=t.lineObj,r=t.layerObj,a=t.areaObj,o=t.points,d=jt(),p={size:c,p:"y"},g={size:s,p:"x"};if("vertical"===u.orientation){var y=v(!0,{},g);g=v(!0,{},p),p=v(!0,{},y)}d[g.p](function(t){return t.major*g.size})["".concat(p.p,"1")](function(t){return t.minor*p.size})["".concat(p.p,"0")](function(t){return t.minor0*p.size}).defined(function(t){return"number"==typeof t.minor&&!isNaN(t.minor)}).curve(Pl["monotone"===r.curve?"monotone".concat(g.p):r.curve]),e=d["line".concat(p.p.toUpperCase(),"1")](),n=d["line".concat(p.p.toUpperCase(),"0")](),f.area&&!1!==a.show&&h.push(Fl(o,{data:t.firstPoint,item:a,generator:d})),i&&!1!==i.show&&(h.push(Fl(o,{data:t.firstPoint,item:i,generator:e},"none")),!l&&f.area&&!1!==a.show&&h.push(Fl(o,{data:t.firstPoint,item:i,generator:n},"none")))}),h}};function Wl(t,e){var n,i,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];i="object"===x(e.center)?(n=e.center.x,e.center.y):(n=e.clientX,e.clientY);var a=n-t.state.boundingRect.left,o=i-t.state.boundingRect.top;return{x:r?Math.max(0,Math.min(a,t.rect.width)):a,y:r?Math.max(0,Math.min(o,t.rect.height)):o}}function Vl(t,e){return{x:e.x+t.rect.x,y:e.y+t.rect.y}}function Hl(t,e){var n=Math.min(t.x,e.x),i=Math.min(t.y,e.y);return{x:n,y:i,width:Math.max(t.x,e.x)-n,height:Math.max(t.y,e.y)-i}}var Ul={require:["chart","renderer"],defaultSettings:{layout:{displayOrder:99},settings:{brush:{components:[]}},style:{area:"$selection-area-target"}},on:{areaStart:function(t){this.start(t)},areaMove:function(t){this.move(t)},areaEnd:function(t){this.end(t)},areaCancel:function(){this.cancel()}},created:function(){this.state={start:{x:0,y:0},end:{x:0,y:0},active:!1}},preferredSize:function(){return 0},render:function(){},start:function(t){this.state.boundingRect=this.renderer.element().getBoundingClientRect();var e=Wl(this,t,!1);Vo({x:0,y:0,width:this.rect.width,height:this.rect.height},e)&&(this.state.brushConfig=this.settings.settings.brush.components.map(function(t){return{key:t.key,contexts:t.contexts,data:t.data,action:t.action||"set"}}),this.state.start=Wl(this,t),this.state.active=!0)},move:function(t){var e;this.state.active&&(this.state.end=Wl(this,t),function(t){if(t.state.active){var e=Vl(t,t.state.start),n=Vl(t,t.state.end),i=t.chart.shapesAt(Hl(e,n),{components:t.state.brushConfig});t.chart.brushFromShapes(i,{components:t.state.brushConfig})}}(this),(e=this).renderer.render([v({type:"rect"},Hl(e.state.start,e.state.end),e.style.area)]))},end:function(){this.state.active&&(this.state={start:{x:0,y:0},end:{x:0,y:0},active:!1},this.renderer.render([]))},cancel:function(){var t,e;this.state.active&&(t=this.state,e=this.chart,t.brushConfig.forEach(function(t){Array.isArray(t.contexts)&&t.contexts.forEach(function(t){e.brush(t).end()})}),this.state={start:{x:0,y:0},end:{x:0,y:0},active:!1},this.renderer.render([]))}};function $l(t,e,n){var i,r,a,o,s,c=n.renderer,l=n.style,u=n.props,h=n.h,f=(r=e,{tooltip:"function"==typeof(i=u).tooltipClass?i.tooltipClass({dock:r.dock}):i.tooltipClass,content:"function"==typeof i.contentClass?i.contentClass({dock:r.dock}):i.contentClass,arrow:"function"==typeof i.arrowClass?i.arrowClass({dock:r.dock}):i.arrowClass}),d=(a=h,o=t,s=l,u.content({h:a,style:s,data:o})),p=h("div",{dir:u.direction,class:Ml(v({"pic-tooltip":!0},f.tooltip)),style:v({position:"relative",display:"inline-block"},e.computedTooltipStyle)},h("div",{style:l.content,class:Ml(v({"pic-tooltip-content":!0},f.content))},d),h("div",{class:Ml(v({"pic-tooltip-arrow":!0},f.arrow)),style:v({},l.arrow,l["arrow-".concat(e.dock)],e.computedArrowStyle)}));return c.render(p),c.element().children[0]}function Yl(t){var e,n,i=t.defaultDuration,r=t.defaultDelay,a=null,o=null,s=!1,c=(n={pending:[],debounced:[],active:[],cancelled:[],rejected:[],fulfilled:[]},(e=function(){}).set=function(t){n[t].forEach(function(e){return e(t)})},e.on=function(t,e){Array.isArray(t)?t.forEach(function(t){return n[t].push(e)}):n[t].push(e)},e.destroy=function(){Object.keys(n).forEach(function(t){n[t].length=0})},e),l=function(){},u=function(){o=a=null,s=!1,c.set("fulfilled")};return l.invoke=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:r;a&&(clearTimeout(a),c.set("debounced")),c.set("pending"),a=setTimeout(function(){t(),s=!0,a=null,c.set("active")},n),0<e&&(o&&clearTimeout(o),o=setTimeout(u,e+Math.max(n,0)))},l.clear=function(){s?c.set("cancelled"):a&&(clearTimeout(a),c.set("rejected")),o&&clearTimeout(o),o=a=null,s=!1},l.on=function(t,e){c.on(t,e)},l.destroy=function(){l.clear(),c.destroy()},l}function Xl(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{left:"translate(-100%,-50%) translateX(".concat(-t,"px)"),right:"translate(".concat(t,"px, -50%)"),top:"translate(-50%, -100%) translateY(".concat(-t,"px)"),bottom:"translate(-50%, ".concat(t,"px)")}}function Jl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return{left:{x:-t-n,y:-e/2},right:{x:n,y:-e/2},top:{x:-t/2,y:-e-n},bottom:{x:-t/2,y:n}}}function Kl(t){return{left:{left:"100%",top:"calc(50% - ".concat(t,"px)"),borderWidth:"".concat(t,"px")},right:{left:"".concat(2*-t,"px"),top:"calc(50% - ".concat(t,"px)"),borderWidth:"".concat(t,"px")},top:{left:"calc(50% - ".concat(t,"px)"),top:"100%",borderWidth:"".concat(t,"px")},bottom:{left:"calc(50% - ".concat(t,"px)"),top:"".concat(2*-t,"px"),borderWidth:"".concat(t,"px")}}}function Gl(t){var e=t.options,n=t.pointer,i=t.width,r=t.height,a=t.dockOrder,o=t.x,s=t.y,c=n.targetBounds,l=Xl(e.offset),u=l[e.dock];if(u)return{computedTooltipStyle:{left:"".concat(o,"px"),top:"".concat(s,"px"),transform:u},computedArrowStyle:Kl(e.offset)[e.dock],dock:e.dock};for(var h,f,d,p,g,y,v,m,x,b,w,k,M,_={width:"target"===e.area?c.width:window.innerWidth,height:"target"===e.area?c.height:window.innerHeight},S=Jl(i,r,e.offset),R=[],C="target"===e.area?o:c.left+o,N="target"===e.area?s:c.top+s,A=0;A<a.length;A+=1){var T=a[A],E=(h={area:_,vx:C,vy:N,width:i,height:r,offset:S[T]},M=k=w=b=x=m=void 0,f=h.area,d=h.vx,p=h.vy,g=h.width,y=h.height,v=h.offset,m=d+v.x,x=p+v.y,w=y,k=m<0?-m:0,M=x<0?-x:0,{x:k+=m+(b=g)>f.width?-(m+b-f.width):0,y:M+=x+w>f.height?-(x+w-f.height):0}),z={left:"".concat(o,"px"),top:"".concat(s,"px"),transform:l[T]},O=Kl(e.offset)[T];0!==E.x&&(z.width="".concat(i-20-Math.abs(E.x),"px"),"top"!==T&&"bottom"!==T||(z.left="".concat(o+E.x,"px"),O.left="calc(50% ".concat(0<E.x?"-":"+"," ").concat(Math.abs(E.x),"px)")));var j={computedTooltipStyle:z,computedArrowStyle:O,dock:T,rect:{width:i,height:r}};if(0===E.x&&0===E.y)return j;j.offset=E,R.push(j)}return R.sort(function(t,e){return Math.abs(t.offset.x)-Math.abs(e.offset.x)}),R[0]}function Zl(t,e,n){var i=t.key?n.component(t.key):n.componentsFromPoint({x:e.clientX,y:e.clientY})[0];if(!i)return{x:0,y:0,width:0,height:0,scaleRatio:{x:1,y:1}};var r=i.rect;return v({scaleRatio:r.scaleRatio},r.computedInner)}var Ql,tu={bounds:function(t){var e=t.resources,n=t.nodes,i=t.pointer,r=t.width,a=t.height,o=t.options,s=i.targetBounds,c=e.getNodeBoundsRelativeToTarget(n[0]),l=c.x,u=c.y,h=c.width,f=c.height,d={left:{x:l,y:u+f/2},right:{x:l+h,y:u+f/2},top:{x:l+h/2,y:u},bottom:{x:l+h/2,y:u+f}},p=Xl(o.offset),g=p[o.dock];if(g)return{computedTooltipStyle:{left:"".concat(d[o.dock].x,"px"),top:"".concat(d[o.dock].y,"px"),transform:g},computedArrowStyle:Kl(o.offset)[o.dock],dock:o.dock};for(var y,v,m,x,b,w,k,M,_,S={width:"target"===o.area?s.width:window.innerWidth,height:"target"===o.area?s.height:window.innerHeight},R=Jl(r,a,o.offset),C=["top","left","right","bottom"],N=0;N<C.length;N+=1){var A=C[N],T="target"===o.area?d[A].x:s.left+d[A].x,E="target"===o.area?d[A].y:s.top+d[A].y;if(y=S,v=T,m=E,x=r,b=a,w=R[A],_=M=k=void 0,k=v+w.x,M=m+w.y,_=b,!(k<0||M<0||k+x>y.width||M+_>y.height))return{computedTooltipStyle:{left:"".concat(d[A].x,"px"),top:"".concat(d[A].y,"px"),transform:p[A]},computedArrowStyle:Kl(o.offset)[A],dock:A}}return{computedTooltipStyle:{left:"".concat(d.top.x,"px"),top:"".concat(d.top.y,"px"),transform:p.top},computedArrowStyle:Kl(o.offset).top,dock:"top"}},pointer:function(t){var e=t.options,n=t.pointer,i=t.width,r=t.height;return Gl({x:n.x,y:n.y,pointer:n,width:i,height:r,options:e,dockOrder:["top","left","right","bottom"]})},slice:function(t){var e=t.options,n=t.pointer,i=t.width,r=t.height,a=t.nodes,o=t.resources,s=a[0],c=n.dx,l=n.dy,u=o.getComponentBoundsFromNode(s),h=c+u.x+u.width/2,f=l+u.y+u.height/2,d=s.desc.slice,p=d.start,g=d.end,y=d.outerRadius,v=(p+g)/2-Math.PI/2,m=2*Math.PI,x=(v%m+m)%m,b=["top","left","right","bottom"];return"auto"===e.dock&&(b=x<=Math.PI/4||x>=7*Math.PI/4?["right","top","bottom","left"]:x<=3*Math.PI/4?["bottom","left","right","top"]:x<=5*Math.PI/4?["left","top","bottom","right"]:["top","left","right","bottom"]),Gl({x:h+y*u.scaleRatio.x*Math.cos(x),y:f+y*u.scaleRatio.y*Math.sin(x),pointer:n,width:i,height:r,options:e,dockOrder:b})}};function eu(t,e){var n=t.width,i=t.height,r=e.chart,a=e.state,o=e.props,s={resources:{formatter:r.formatter,scale:r.scale,component:r.component,getComponentBoundsFromNode:function(t){return Zl(t,a.pointer,r)},getNodeBoundsRelativeToTarget:function(t){return e=t,n=a.pointer,i=Zl(e,n,r),o=e.bounds,{x:i.x+n.dx+o.x,y:i.y+n.dy+o.y,width:o.width,height:o.height};var e,n,i,o}},nodes:a.activeNodes,pointer:a.pointer,width:n,height:i},c=x(o.placement);if("object"===c&&"function"==typeof o.placement.fn)return o.placement.fn(s);var l={type:"pointer",offset:8,dock:"auto",area:"viewport"};"function"===c&&(l=v(l,o.placement(s))),"object"===c&&tu[o.placement.type]?l=v(l,o.placement):"string"===c&&tu[o.placement]&&(l=v(l,{type:o.placement})),s.options=l;var u=tu[l.type](s),h=s.resources.getComponentBoundsFromNode(s.nodes[0]),f=h.x,d=h.y,p=h.width,g=h.height;return p+=f+=s.pointer.dx,g+=d+=s.pointer.dy,u.computedTooltipStyle.left="".concat(Math.min(Math.max(0,f,parseFloat(u.computedTooltipStyle.left)),p),"px"),u.computedTooltipStyle.top="".concat(Math.min(Math.max(0,d,parseFloat(u.computedTooltipStyle.top)),g),"px"),u}function nu(){Ql=null}var iu={require:["chart","renderer"],defaultSettings:{settings:{duration:8e3,delay:500,filter:function(t){return t.filter(function(t){return t.data&&void 0!==t.data.value})},extract:function(t){return t.node.data.value},content:function(t){var e=t.h;return t.data.map(function(t){return e("div",{},t)})},isEqual:function(t,e){return t.length&&t.length===e.length&&t.every(function(t,n){return e[n]&&JSON.stringify(t.data)===JSON.stringify(e[n].data)})},placement:{type:"pointer",dock:"auto",offset:8,area:"viewport"},tooltipClass:{},contentClass:{},arrowClass:{},direction:"ltr",appendTo:void 0,beforeShow:void 0,afterShow:void 0,beforeHide:void 0,onHide:void 0,afterHide:void 0},style:{tooltip:{},content:{backgroundColor:"$gray-25",color:"$font-color--inverted",fontFamily:"$font-family",fontSize:"$font-size",lineHeight:"$line-height",borderRadius:"4px",padding:"8px",opacity:.9},arrow:{position:"absolute",width:"0px",height:"0px",borderStyle:"solid",color:"$gray-25",opacity:.9},"arrow-bottom":{borderTopColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent"},"arrow-top":{borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent"},"arrow-right":{borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomColor:"transparent"},"arrow-left":{borderTopColor:"transparent",borderBottomColor:"transparent",borderRightColor:"transparent"}}},renderer:"dom",on:{hide:function(){this.hide()},show:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.show(t,e)},prevent:function(t){this.prevent(t)}},hide:function(){this.dispatcher.clear(),this.state.activeNodes=[],this.state.pointer={}},show:function(t){var e,n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=i.nodes,a=i.duration,o=i.delay;this.state.prevent||(this.state.pointer=function(t,e){var n=e.chart,i=e.state,r=0,a=0;t.center?(r+=t.center.x,a+=t.center.y):(r+=t.clientX,a+=t.clientY);var o=n.element.getBoundingClientRect(),s=i.targetElement.getBoundingClientRect(),c=r,l=a,u=o.left-s.left,h=o.top-s.top,f=r-o.left,d=a-o.top;return{x:r-=s.left,y:a-=s.top,dx:u,dy:h,cx:f,cy:d,clientX:c,clientY:l,targetBounds:s,chartBounds:o}}(t,this),e=Array.isArray(r)?this.props.filter(r):this.props.filter(this.chart.shapesAt({x:this.state.pointer.cx,y:this.state.pointer.cy})),this.props.isEqual(this.state.activeNodes,e)||(this.dispatcher.clear(),this.state.activeNodes=e,this.state.activeNodes.length&&this.dispatcher.invoke(function(){return n.invokeRenderer(n.state.activeNodes)},a,o)))},prevent:function(t){this.state.prevent=!!t},init:function(t){var e=this;this.state={activeNodes:[],pointer:{},targetElement:null,prevent:!1},this.props=t.settings,this.dispatcher=Yl({defaultDuration:this.props.duration,defaultDelay:this.props.delay});var n=this.dispatcher.clear;this.dispatcher.on("pending",function(){var t;t=n,Ql&&Ql!==t&&Ql(),Ql=n,"function"==typeof e.props.beforeShow&&e.props.beforeShow.call(void 0,{resources:{formatter:e.chart.formatter,scale:e.chart.scale}})}),this.dispatcher.on(["cancelled","fulfilled"],function(){var t={resources:{formatter:e.chart.formatter,scale:e.chart.scale}};"function"==typeof e.props.beforeHide&&e.props.beforeHide.call(void 0,v({element:e.state.tooltipElm},t)),"function"==typeof e.props.onHide?e.props.onHide.call(void 0,v({element:e.state.tooltipElm},t)):e.renderer.clear([]),"function"==typeof e.props.afterHide&&e.props.afterHide.call(void 0,t),Ql===n&&(Ql=null),e.state.tooltipElm=void 0}),this.dispatcher.on("active",function(){"function"==typeof e.props.afterShow&&e.props.afterShow.call(void 0,{element:e.state.tooltipElm,resources:{formatter:e.chart.formatter,scale:e.chart.scale}})})},created:function(){this.init(this.settings)},beforeUpdate:function(t){var e=t.settings;this.dispatcher&&(this.dispatcher.destroy(),nu()),this.init(e)},render:function(t){return this.h=t,[]},beforeDestroy:function(){this.dispatcher.destroy(),nu()},appendTo:function(){if(this.props.appendTo){this.state.targetElement="function"==typeof this.props.appendTo?this.props.appendTo({resources:{formatter:this.chart.formatter,scale:this.chart.scale}}):this.props.appendTo;var t=this.state.targetElement.getBoundingClientRect(),e=t.width,n=t.height;this.renderer.destroy(),this.renderer.size({width:e,height:n}),this.renderer.appendTo(this.state.targetElement)}else this.state.targetElement=this.renderer.element()},mounted:function(){this.appendTo()},updated:function(){this.appendTo()},invokeRenderer:function(t){var e,n,i,r,a,o,s,c,l=(e=t,i=(n=this).chart,r=n.scale,a=n.props,o=n.h,s={resources:{dataset:i.dataset,scale:i.scale,formatter:i.formatter},scale:r,h:o},c=[],e.forEach(function(t){if("function"==typeof a.extract){var e=v({node:t},s);c.push(a.extract(e))}}),c),u=eu($l(l,{style:{left:"0px",top:"0px",visibility:"hidden"}},this).getBoundingClientRect(),this);this.state.tooltipElm=$l(l,u,this)}};var ru={require:["renderer","chart"],defaultSettings:{settings:{target:"",selector:"*",fill:"rgba(0, 255, 0, 0.1)",stroke:"lime",opacity:1,useOuterRect:!1}},on:{update:function(){this.draw()}},draw:function(){var t=this,e=this.chart.findShapes(this.props.selector).filter(function(e){return e.key===t.props.target}).filter(function(t){return t.collider}).map(function(t){return t.collider});e.forEach(function(e){e.fill=t.props.fill,e.stroke=t.props.stroke,e.opacity=t.props.opacity,e.collider={type:null}}),this.renderer.render(e)},created:function(){this.props=this.settings.settings},resize:function(t){var e=t.outer,n=t.inner;return this.props.useOuterRect?e:n},render:function(){},mounted:function(){this.draw()},updated:function(){this.props=this.settings.settings,this.draw()}},au=2*Math.PI;function ou(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function su(t,e,n,i,r){var a=1-t;return Math.pow(a,3)*e+3*Math.pow(a,2)*t*n+3*a*Math.pow(t,2)*i+Math.pow(t,3)*r}function cu(t,e,n,i){var r,a,o,s,c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];if(r=t,a=e,o=n,s=i,Math.abs(r.x+o.x-(a.x+a.x))+Math.abs(r.y+o.y-(a.y+a.y))+Math.abs(a.x+s.x-(o.x+o.x))+Math.abs(a.y+s.y-(o.y+o.y))<=10)return-1===c.indexOf(t)&&c.push(t),-1===c.indexOf(i)&&c.push(i),c;var l=ou(t,e),u=ou(e,n),h=ou(n,i),f={x:su(.5,t.x,e.x,n.x,i.x),y:su(.5,t.y,e.y,n.y,i.y)},d=ou(l,u),p=ou(u,h);return cu(t,l,d,f,c),cu(f,p,h,i,c),c}function lu(t,e,n){var i,r,a,o=(r=e,a=n,{cp1:{x:(i=t).x+2/3*(r.x-i.x),y:i.y+2/3*(r.y-i.y)},cp2:{x:a.x+2/3*(r.x-a.x),y:a.y+2/3*(r.y-a.y)}});return cu(t,o.cp1,o.cp2,n)}var uu=1e-12;function hu(t,e,n){var i,r,a,o,s=[],c=!!t[4],l=!!t[5],u=t[3],h=t[6],f=t[7],d=t[1],p=t[2];if("a"===t[0]&&(h+=e,f+=n),e===f&&n===f)return s;if(!d||!p)return s.push({x:h,y:f}),s;var g=function(t,e,n,i,r,a,o,s,c){var l,u,h,f,d,p,g=co(n%360),y=Math.cos(g),v=Math.sin(g),m=(s-a)/2,x=(c-o)/2,b=y*m+v*x,w=y*x-v*m;t=Math.abs(t),e=Math.abs(e),1<(p=Math.pow(b,2)/Math.pow(t,2)+Math.pow(w,2)/Math.pow(e,2))&&(t*=p=Math.sqrt(p),e*=p);var k=t*e,M=t*w,_=e*b,S=Math.pow(M,2)+Math.pow(_,2),R=Math.pow(k,2)-S,C=Math.sqrt(Math.max(R/S,0));i===r&&(C=-C);var N=C*(M/e),A=C*(-_/t);f=y*N-v*A+(s+a)/2,d=v*N+y*A+(c+o)/2;var T=(b-N)/t,E=(w-A)/e,z=(-b-N)/t,O=(-w-A)/e;return l=Math.atan2(E,T),l+=l<0?au:0,u=Math.atan2(O,z),h=(u+=u<0?au:0)-l,!r&&l<u?h-=au:r&&u<l&&(h+=au),{startAngle:l,sweepAngle:h%=au,cx:f,cy:d,rx:t,ry:e}}(d,p,u,c,l,h,f,e,n);i=g.cx,r=g.cy,d=g.rx,p=g.ry,a=g.sweepAngle,o=g.startAngle;for(var y=Math.abs(a*Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2)),v=Math.ceil(y/10),m=a/v,x=1;x<=v;x++){var b=(o+m*x)%au,w=Math.cos(b),k=Math.sin(b);s.push({x:i+w*d+-k*w,y:r+k*p+w*k})}return s}function fu(t){for(var e=c(t),n=[],i=[],r=0,a=0,o=null,s=null,l=null,u=null,h=0;h<e.length;++h){var f=e[h],d=f[0];switch("S"!==d&&"s"!==d&&"C"!==d&&"c"!==d&&(s=o=null),"T"!==d&&"t"!==d&&"Q"!==d&&"q"!==d&&(u=l=null),d){case"m":i.length&&n.push(i.splice(0));case"l":r+=f[1],a+=f[2],i.push({x:r,y:a});break;case"M":i.length&&n.push(i.splice(0));case"L":r=f[1],a=f[2],i.push({x:r,y:a});break;case"H":r=f[1],i.push({x:r,y:a});break;case"h":r+=f[1],i.push({x:r,y:a});break;case"V":a=f[1],i.push({x:r,y:a});break;case"v":a+=f[1],i.push({x:r,y:a});break;case"a":i.push.apply(i,O(hu(f,r,a))),r+=f[6],a+=f[7];break;case"A":i.push.apply(i,O(hu(f,r,a))),r=f[6],a=f[7];break;case"c":i.push.apply(i,O(cu({x:r,y:a},{x:f[1]+r,y:f[2]+a},{x:f[3]+r,y:f[4]+a},{x:f[5]+r,y:f[6]+a}))),o=f[3]+r,s=f[4]+a,r+=f[5],a+=f[6];break;case"C":i.push.apply(i,O(cu({x:r,y:a},{x:f[1],y:f[2]},{x:f[3],y:f[4]},{x:f[5],y:f[6]}))),o=f[3],s=f[4],r=f[5],a=f[6];break;case"s":null!==o&&null!==o||(o=r,s=a),i.push.apply(i,O(cu({x:r,y:a},{x:2*r-o,y:2*a-s},{x:f[1]+r,y:f[2]+a},{x:f[3]+r,y:f[4]+a}))),o=f[1]+r,s=f[2]+a,r+=f[3],a+=f[4];break;case"S":null!==o&&null!==o||(o=r,s=a),i.push.apply(i,O(cu({x:r,y:a},{x:2*r-o,y:2*a-s},{x:f[1],y:f[2]},{x:f[3],y:f[4]}))),o=f[1],s=f[2],r=f[3],a=f[4];break;case"Q":i.push.apply(i,O(lu({x:r,y:a},{x:f[1],y:f[2]},{x:f[3],y:f[4]}))),l=f[1],u=f[2],r=f[3],a=f[4];break;case"q":i.push.apply(i,O(lu({x:r,y:a},{x:f[1]+r,y:f[2]+a},{x:f[3]+r,y:f[4]+a}))),l=f[1]+r,u=f[2]+a,r+=f[3],a+=f[4];break;case"T":null!==l&&null!==l||(l=r,u=a),l=2*r-l,u=2*a-u,i.push.apply(i,O(lu({x:r,y:a},{x:l,y:u},{x:f[1],y:f[2]}))),r=f[1],a=f[2];break;case"t":null!==l&&null!==l||(l=r,u=a),l=2*r-l,u=2*a-u,i.push.apply(i,O(lu({x:r,y:a},{x:l,y:u},{x:f[1]+r,y:f[2]+a}))),r+=f[1],a+=f[2];break;case"z":case"Z":i.length&&i.push({x:i[0].x,y:i[0].y})}}return function(t){for(var e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];Math.abs(n.x-i.x)<uu&&Math.abs(n.y-i.y)<uu&&(t.splice(e,1),e--)}}(i),n.push(i.splice(0)),n}var du={require:["renderer","chart"],defaultSettings:{settings:{target:"",fill:"transparent",stroke:"lime",opacity:1,radius:2,useOuterRect:!1}},on:{update:function(){this.draw()}},draw:function(){var t=this,e=this.chart.findShapes("path").filter(function(e){return e.key===t.props.target}),n=[];e.forEach(function(e){fu(e.attrs.d).forEach(function(e){e.forEach(function(e){n.push({type:"circle",cx:e.x,cy:e.y,r:t.props.radius,fill:t.props.fill,stroke:t.props.stroke,opacity:t.props.opacity,collider:{type:null}})})})}),this.renderer.render(n)},created:function(){this.props=this.settings.settings},resize:function(t){var e=t.outer,n=t.inner;return this.props.useOuterRect?e:n},render:function(){},mounted:function(){this.draw()},updated:function(){this.props=this.settings.settings,this.draw()}};var pu=[function(t){t.component("box",Ss),t.component("box-marker",Ss)},function(t){t.component("point",Ts),t.component("point-marker",Ts)},function(t){t.component("pie",Os)},function(t){t.component("grid-line",Is)},function(t){t.component("ref-line",Ws)},function(t){t.component("axis",hc)},function(t){t.component("text",dc)},function(t){t.component("scrollbar",yc)},function(t){t.component("brush-range",zc),t.component("brush-area-dir",Dc)},function(t){t.component("range",Fc)},function(t){t.component("brush-lasso",Uc)},function(t){t.component("labels",ml)},function(t){t.component("legend-cat",El)},function(t){t.component("legend-seq",ql)},function(t){t.component("line",Ll)},function(t){t.component("brush-area",Ul)},function(t){t.component("tooltip",iu)},function(t){t.component("debug-collider",ru)},function(t){t.component("debug-path-to-points",du)}],gu=function(){function t(e){b(this,t),this._parent=null,this._children=[],this._ancestors=null,this.type=e,this.data=null}return k(t,[{key:"detach",value:function(){return this._parent&&this._parent.removeChild(this),this}},{key:"equals",value:function(t){var e=this.children,n=t.children;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].equals(n[i]))return!1;return!0}},{key:"toJSON",value:function(){return{type:this.type,children:this.children.map(function(t){return t.toJSON()})}}},{key:"parent",get:function(){return this._parent}},{key:"isBranch",get:function(){return this._children&&this._children.length}},{key:"children",get:function(){return this._children}},{key:"ancestors",get:function(){var t;this._ancestors||(this._ancestors=[],this.parent&&(t=this._ancestors).push.apply(t,[this.parent].concat(O(this.parent.ancestors))));return this._ancestors}},{key:"descendants",get:function(){var t,e,n=[],i=this.children.length;for(t=0;t<i;t++)e=this.children[t],n.push(e),e.children.length&&n.push.apply(n,O(e.descendants));return n}}]),t}(),yu=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.x,i=void 0===n?0:n,r=e.y,a=void 0===r?0:r,o=e.width,s=void 0===o?0:o,c=e.height,l=void 0===c?0:c,u=e.minWidth,h=void 0===u?0:u,f=e.minHeight,d=void 0===f?0:f;b(this,t),this.set({x:i,y:a,width:s,height:l,minWidth:h,minHeight:d})}return k(t,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,i=t.y,r=void 0===i?0:i,a=t.width,o=void 0===a?0:a,s=t.height,c=void 0===s?0:s,l=t.minWidth,u=void 0===l?0:l,h=t.minHeight,f=void 0===h?0:h;this.type="rect",this.width=0<=o?(this.x=n,Math.max(o,u)):(this.x=n+Math.min(o,-u),-Math.min(o,-u)),this.height=0<=c?(this.y=r,Math.max(c,f)):(this.y=r+Math.min(c,-f),-Math.min(c,-f))}},{key:"containsPoint",value:function(t){return Vo(this,t)}},{key:"intersectsLine",value:function(t){return Ho(this,V(t))}},{key:"intersectsRect",value:function(t){return Wo(this,W(t))}},{key:"intersectsCircle",value:function(t){return qo(t,this)}},{key:"intersectsPolygon",value:function(t){return Lo(t,this)}},{key:"points",value:function(){return[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height}]}}]),t}();var vu=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.cx,i=void 0===n?0:n,r=e.cy,a=void 0===r?0:r,o=e.r,s=void 0===o?0:o,c=e.minRadius,l=void 0===c?0:c;b(this,t),this.set({cx:i,cy:a,r:s,minRadius:l})}return k(t,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.cx,n=void 0===e?0:e,i=t.cy,r=void 0===i?0:i,a=t.r,o=void 0===a?0:a,s=t.minRadius,c=void 0===s?0:s;this.type="circle",this.cx=n,this.cy=r,this.r=Math.max(o,c),this.vector={x:this.cx,y:this.cy}}},{key:"containsPoint",value:function(t){return Do(this,t)}},{key:"intersectsLine",value:function(t){return Po(this,V(t))}},{key:"intersectsRect",value:function(t){return qo(this,W(t))}},{key:"intersectsCircle",value:function(t){return function(t,e){if(Oo(t)||Oo(e))return!1;var n=t.cx-e.cx,i=t.cy-e.cy;return Math.pow(n,2)+Math.pow(i,2)<=Math.pow(t.r+e.r,2)}(this,t)}},{key:"intersectsPolygon",value:function(t){return Io(this,t)}},{key:"points",value:function(){return[{x:this.cx,y:this.cy}]}}]),t}();var mu=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.x1,i=void 0===n?0:n,r=e.y1,a=void 0===r?0:r,o=e.x2,s=void 0===o?0:o,c=e.y2,l=void 0===c?0:c,u=e.tolerance,h=void 0===u?0:u;b(this,t),this.set({x1:i,y1:a,x2:s,y2:l,tolerance:h})}return k(t,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.x1,n=void 0===e?0:e,i=t.y1,r=void 0===i?0:i,a=t.x2,o=void 0===a?0:a,s=t.y2,c=void 0===s?0:s,l=t.tolerance,u=void 0===l?0:l;this.type="line",this.x1=n,this.y1=r,this.x2=o,this.y2=c,this.tolerance=Math.max(0,Math.round(u)),this.vectors=this.points(),this.zeroSize=n===o&&r===c}},{key:"containsPoint",value:function(t){return 0<this.tolerance?Po({cx:t.x,cy:t.y,r:this.tolerance},this):$o(this,t)}},{key:"intersectsLine",value:function(t){return Uo(this,V(t))}},{key:"intersectsRect",value:function(t){return Ho(W(t),this)}},{key:"intersectsCircle",value:function(t){return Po(t,this)}},{key:"intersectsPolygon",value:function(t){return Bo(t,this)}},{key:"points",value:function(){return[{x:this.x1,y:this.y1},{x:this.x2,y:this.y2}]}}]),t}();var xu=function(){function t(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).vertices,n=void 0===e?[]:e;b(this,t),this.set({vertices:n})}return k(t,[{key:"set",value:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).vertices,e=void 0===t?[]:t;if(this.type="polygon",this.vertices=e.slice(),this.edges=[],function(t){for(var e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];n.x===i.x&&n.y===i.y&&(t.splice(e,1),e--)}}(this.vertices),!(this.vertices.length<=2)){var n,i,r;n=this.vertices,i=n[0],r=n[n.length-1],i.x===r.x&&i.y===r.y||n.push(i),this.xMin=NaN,this.yMin=NaN,this.xMax=NaN,this.yMax=NaN;for(var a=0;a<this.vertices.length;a++)a<this.vertices.length-1&&this.edges.push([this.vertices[a],this.vertices[a+1]]),this.xMin=isNaN(this.xMin)?this.vertices[a].x:Math.min(this.xMin,this.vertices[a].x),this.xMax=isNaN(this.xMax)?this.vertices[a].x:Math.max(this.xMax,this.vertices[a].x),this.yMin=isNaN(this.yMin)?this.vertices[a].y:Math.min(this.yMin,this.vertices[a].y),this.yMax=isNaN(this.yMax)?this.vertices[a].y:Math.max(this.yMax,this.vertices[a].y);this._bounds=null,this._boundingRect=null}}},{key:"containsPoint",value:function(t){return Fo(this,t)}},{key:"intersectsCircle",value:function(t){return Io(t,this)}},{key:"intersectsLine",value:function(t){return Bo(this,V(t))}},{key:"intersectsRect",value:function(t){return Lo(this,W(t))}},{key:"intersectsPolygon",value:function(t){if(!Wo(this.boundingRect(),t.boundingRect()))return!1;for(var e=!1,n=0,i=this.edges.length;n<i&&!0!==(e=Bo(t,V(this.edges[n])));n++);return e}},{key:"points",value:function(){return this.vertices}},{key:"bounds",value:function(){return this._bounds||(this._bounds=[{x:this.xMin,y:this.yMin},{x:this.xMax,y:this.yMin},{x:this.xMax,y:this.yMax},{x:this.xMin,y:this.yMax}]),this._bounds}},{key:"boundingRect",value:function(){return this._boundingRect||(this._boundingRect={x:this.xMin,y:this.yMin,width:this.xMax-this.xMin,height:this.yMax-this.yMin}),this._boundingRect}}]),t}();function bu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(xu,e)}var wu=function(){function t(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).points,n=void 0===e?[]:e;b(this,t),this.set({points:n})}return k(t,[{key:"set",value:function(){var t,e,n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).points,i=void 0===n?[]:n;if(this.type="polyline",this.segments=[],this._points=i.slice(),1<this._points.length)for(var r=0,a=this._points.length-1;r<a;r++)t=this._points[r],e=this._points[r+1],(t.x!==e.x||t.y!==e.y)&&this.segments.push({x1:this._points[r].x,y1:this._points[r].y,x2:this._points[r+1].x,y2:this._points[r+1].y})}},{key:"containsPoint",value:function(t){return this.segments.some(function(e){return $o(e,t)})}},{key:"intersectsCircle",value:function(t){return this.segments.some(function(e){return Po(t,e)})}},{key:"intersectsLine",value:function(t){var e=V(t);return this.segments.some(function(t){return Uo(t,e)})}},{key:"intersectsRect",value:function(t){var e=W(t);return this.segments.some(function(t){return Ho(e,t)})}},{key:"intersectsPolygon",value:function(t){return this.segments.some(function(e){return Bo(t,e)})}},{key:"points",value:function(){return this._points}}]),t}();var ku=oe();function Mu(t,e){return ku.get(t)(e)}ku.add("rect",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(yu,e)}),ku.add("circle",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(vu,e)}),ku.add("line",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(mu,e)}),ku.add("polygon",bu),ku.add("polyline",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(wu,e)});var _u=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];b(this,t),this.set(e)}return k(t,[{key:"set",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.geometries=[],e.forEach(function(e){var n=Mu(e.type,e);n&&t.geometries.push(n)})}},{key:"containsPoint",value:function(t){return this.geometries.some(function(e){return e.containsPoint(t)})}},{key:"intersectsLine",value:function(t){return this.geometries.some(function(e){return e.intersectsLine(t)})}},{key:"intersectsRect",value:function(t){return this.geometries.some(function(e){return e.intersectsRect(t)})}},{key:"intersectsCircle",value:function(t){return this.geometries.some(function(e){return e.intersectsCircle(t)})}},{key:"intersectsPolygon",value:function(t){return this.geometries.some(function(e){return e.intersectsPolygon(t)})}}]),t}();var Su=function(){function t(){b(this,t),this._elements=[[1,0,0],[0,1,0],[0,0,1]],this._stack=[]}return k(t,[{key:"clone",value:function(){return(new t).multiply(this)}},{key:"set",value:function(t){return this._elements=t,this}},{key:"save",value:function(){return this._stack.push(this.elements),this}},{key:"restore",value:function(){return this._stack.length&&(this._elements=this._stack.pop()),this}},{key:"add",value:function(t){var e,n;for(e=0;e<this._elements.length;e++)for(n=0;n<this._elements[e].length;n++)this._elements[e][n]+=t;return this}},{key:"translate",value:function(t,e){return this.multiply([[1,0,t],[0,1,e],[0,0,1]]),this}},{key:"rotate",value:function(t){var e=Math.cos(-t),n=Math.sin(-t);return this.multiply([[e,n,0],[-n,e,0],[0,0,1]]),this}},{key:"multiply",value:function(e){var n,i,r,a;if(e instanceof t&&(e=e._elements),Array.isArray(e)){for(r=[[0,0,0],[0,0,0],[0,0,0]],n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)for(a=0;a<3;a++)r[n][i]+=this._elements[n][a]*e[a][i];this._elements=r}else for(n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)this._elements[n][i]*=e;return this}},{key:"scale",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;return this.multiply([[t,0,0],[0,e,0],[0,0,1]]),this}},{key:"transform",value:function(t,e,n,i,r,a){return this.multiply([[t,n,r],[e,i,a],[0,0,1]]),this}},{key:"determinant",value:function(){var t=this._elements[0][0],e=this._elements[0][1],n=this._elements[0][2],i=this._elements[1][0],r=this._elements[1][1],a=this._elements[1][2],o=this._elements[2][0],s=this._elements[2][1],c=this._elements[2][2];return t*r*c+e*a*o+n*i*s-n*r*o-e*i*c-t*a*s}},{key:"invert",value:function(){var t=this.determinant(),e=this._elements[0][0],n=this._elements[0][1],i=this._elements[0][2],r=this._elements[1][0],a=this._elements[1][1],o=this._elements[1][2],s=this._elements[2][0],c=this._elements[2][1],l=this._elements[2][2];return this._elements=[[a*l-o*c,i*c-n*l,n*o-i*a],[o*s-r*l,e*l-i*s,i*r-e*o],[r*c-a*s,s*n-e*c,e*a-n*r]],this.multiply(1/t),this}},{key:"transpose",value:function(){var t=Object.create(this._elements);return this._elements=[[t[0][0],t[1][0],t[2][0]],[t[0][1],t[1][1],t[2][1]],[t[0][2],t[1][2],t[2][2]]],this}},{key:"identity",value:function(){return this._elements=[[1,0,0],[0,1,0],[0,0,1]],this}},{key:"toString",value:function(){return"".concat(this._elements.map(function(t){return t.join("\t")}).join("\n"))}},{key:"isIdentity",value:function(){var t=this._elements;return 1===t[0][0]&&0===t[0][1]&&0===t[0][2]&&0===t[1][0]&&1===t[1][1]&&0===t[1][2]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]}},{key:"transformPoint",value:function(t){var e,n,i=[t.x,t.y,1],r=this._elements,a=[0,0,0];for(e=0;e<this._elements.length;e++)for(n=0;n<this._elements[e].length;n++)a[e]+=i[n]*r[e][n];return{x:a[0],y:a[1]}}},{key:"transformPoints",value:function(t){var e,n,i,r,a,o=this._elements,s=[];for(r=0;r<t.length;r++){for(e=[t[r].x,t[r].y,1],a=[0,0,0],n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)a[n]+=e[i]*o[n][i];s.push({x:a[0],y:a[1]})}return s}},{key:"elements",get:function(){var t=this._elements;return[[t[0][0],t[0][1],t[0][2]],[t[1][0],t[1][1],t[1][2]],[t[2][0],t[2][1],t[2][2]]]}}]),t}(),Ru=/(translate|scale|rotate|matrix)\(([0-9,.eE+-\s]+)(?:,|\s?)+\)/g;function Cu(t,e){var n=e.args[0]*(Math.PI/180);if(2<e.args.length){var i=e.args[1],r=e.args[2];t.translate(i,r),t.rotate(n),t.translate(-i,-r)}else 1===e.args.length&&t.rotate(n)}function Nu(t,e){for(var n,i,r,a,o,s,c,l,u,h,f,d=function(t){for(var e,n=[];null!==(e=Ru.exec(t));){var i=e[2].trim(),r=-1===i.indexOf(",")?i.split(" "):i.split(",");n.push({cmd:e[1],args:r.filter(function(t){return 0<t.trim().length}).map(function(t){return Number(t)})})}return n}(t),p=0,g=d.length;p<g;p++)"rotate"===(n=d[p]).cmd?Cu(e,n):"scale"===n.cmd?(l=e,void 0,h=(u=n).args[0],f=isNaN(u.args[1])?u.args[0]:u.args[1],l.scale(h,f)):"matrix"===n.cmd?(s=e,6<=(c=n).args.length&&s.transform.apply(s,O(c.args))):"translate"===n.cmd&&(i=e,void 0,a=(r=n).args[0],o=isNaN(r.args[1])?0:r.args[1],i.translate(a,o))}var Au={type:/^\w[\w-]+/,attr:/^\[\w(?:[\w\._-]+)?(?:[!]?=['\"][\w\s*#_-]*['\"])?\]/,universal:/^(\*)/,tag:/^\.(\w+)/},Tu={type:function(t,e){return e.filter(function(e){var n=e.type;return!!n&&n.toLowerCase()===t.toLowerCase()})},attr:function(t,e,n,i){return i.filter(function(i){var r=i.attrs[t];if(!e)return void 0!==r;if(void 0===r)return!1;switch(e){case"=":return n===String(r);case"!=":return n!==String(r);default:return!1}})},universal:function(t){return t},tag:function(t,e){return e.filter(function(e){var n=e.tag;return!!n&&-1!==n.trim().split(/\s+/).indexOf(t.replace(".",""))})}};var Eu={find:function(t,e){var n,i,r,a,o,s,c,l=[],u=[];if(e.isBranch){var h;c=[],t.split(/\s*,\s*/).forEach(function(t){t=t.trim(),r=[];for(var e=function(e){(o=t.match(Au[e]))&&(s=!0,t=t.slice(o[0].length),a={type:e,value:o[0]},"attr"===e&&(o=o[0].match(/\[(\w[\w\._-]+)?(?:([!]?=)['\"]([\w\s#_-]*)['\"])?\]/),a.attribute=o[1],a.operator=o[2],a.attributeValue=o[3]),r.push(a))};t&&(s=!1,(o=t.match(/^\s*([>+~]|\s)\s*/))&&(s=!0,r.push({type:" ",value:o[0]}),t=t.slice(o[0].length)),Object.keys(Au).forEach(e),r&&r.length&&c.indexOf(r)<0&&c.push(r),s););}),n=c,i=e.descendants;for(var f=function(t,e){h=n[t];var r=[],a=i.slice(),o=!1;h.reverse().forEach(function(t){if(" "===t.type)return r.push(a),a=i.slice(),void(o=!1);a=function(t,e){if(!e||!e.length||!t||"function"!=typeof Tu[t.type])return[];switch(t.type){case"type":return Tu[t.type](t.value,e);case"attr":return Tu[t.type](t.attribute,t.operator,t.attributeValue,e);case"universal":return Tu[t.type](e);case"tag":return Tu[t.type](t.value,e);default:return[]}}(t,a),o=!0}),o&&r.push(a);var s=r[0].filter(function(t){for(var e,n=t.parent,i=1;i<r.length;i++){for(e=r[i].indexOf(n);n&&e<0;)n=n.parent,e=r[i].indexOf(n);if(e<0)return!1}return!0});u.push(s)},d=0,p=n.length;d<p;d++)f(d);for(var g=0,y=u.length;g<y;g++)for(var v=0,m=u[g].length;v<m;v++)l.indexOf(u[g][v])<0&&l.push(u[g][v])}return l||[]}};function zu(t,e,n){var i=t.type,r=n?n.transformPoints(t.points()):t.points();!function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].x/=e,t[n].y/=e}(r,e);var a,o,s=null;"rect"===i||"bounds"===i?(s=W(r)).type=i:"circle"===i?(a=r,o=t.r,(s={cx:a[0].x,cy:a[0].y,r:o}).type=i):"line"===i?(s=V(r)).type=i:"polygon"!==i&&"polyline"!==i||(s={type:"path",d:oo(r,"polygon"===i)});return s}var Ou=function(){function t(e){var n=this;b(this,t),this._bounds=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=e.boundingRect?e.boundingRect(t):{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width,height:n.height}},this._attrs=e.attrs,this._type=e.type,this._data=e.data,this._dpi=e.stage?e.stage.dpi:1,this._collider=function(){return function(t,e){if(t.collider){var n=t.modelViewMatrix;return"collection"===t.colliderType?{type:"container",children:t.collider.geometries.map(function(t){return zu(t,e,n)})}:zu(t.collider,e,n)}return null}(e,n._dpi)},this._desc=e.desc,this._tag=e.tag,this._children=function(){return e.children.map(function(e){return new t(e)})},this._parent=function(){return e.parent?new t(e.parent):null},this._cache={elementBoundingRect:null},this._getElementBoundingRect=function(){return!n._cache.elementBoundingRect&&n.element&&(n._cache.elementBoundingRect=n.element.getBoundingClientRect()),n._cache.elementBoundingRect||{left:0,top:0}}}return k(t,[{key:"boundsRelativeTo",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=x(t),i=e?this.bounds:this.localBounds,r=this._getElementBoundingRect(),a=r.left,o=r.top;if("object"===n&&null!==t&&"function"==typeof t.getBoundingClientRect){var s=t.getBoundingClientRect(),c=s.left,l=void 0===c?0:c,u=s.top;a-=l,o-=void 0===u?0:u}return i.x+=a,i.y+=o,i}},{key:"children",get:function(){return this._children()}},{key:"parent",get:function(){return this._parent()}},{key:"type",get:function(){return this._type}},{key:"data",get:function(){return this._data}},{key:"attrs",get:function(){return this._attrs}},{key:"element",set:function(t){this._cache.elementBoundingRect=null,this._element=t},get:function(){return this._element}},{key:"key",set:function(t){this._key=t},get:function(){return this._key}},{key:"bounds",get:function(){var t=this._bounds();return t.x/=this._dpi,t.y/=this._dpi,t.width/=this._dpi,t.height/=this._dpi,t}},{key:"localBounds",get:function(){return this._bounds(!1)}},{key:"collider",get:function(){return this._collider()}},{key:"desc",get:function(){return this._desc}},{key:"tag",get:function(){return this._tag}}]),t}();function ju(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(Ou,e)}var Du=function(){function t(e){b(this,t),this._node=ju(e),this._parent=null,this._input=null}return k(t,[{key:"node",get:function(){return this._node}},{key:"parent",set:function(t){this._parent=t},get:function(){return this._parent}},{key:"input",set:function(t){this._input=t},get:function(){return this._input}}]),t}();function qu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(Du,e)}function Pu(t,e){var n=t.parent;if(n&&"stage"!==n.type){e.parent=qu(n);var i=n.parent;i&&"stage"!==i.type&&Pu(i,e.parent)}}function Iu(t,e,n){if(null===t.colliderType)return null;var i=function(t,e){var n={};if(t.modelViewMatrix)if(Array.isArray(e))n=t.inverseModelViewMatrix.transformPoints(e);else if(isNaN(e.r))Array.isArray(e.vertices)?n.vertices=t.inverseModelViewMatrix.transformPoints(e.vertices):n=t.inverseModelViewMatrix.transformPoint(e);else{var i={x:e.cx,y:e.cy},r=t.inverseModelViewMatrix.transformPoint(i);n.cx=r.x,n.cy=r.y,n.r=e.r}else n=e;return Array.isArray(n.vertices)&&(n=bu(n)),n}(t,n);return"frontChild"===t.colliderType?function(t,e,n){for(var i=t.descendants.length-1;0<=i;i--){var r=t.descendants[i];if(null!==r.collider&&r.collider[e](n)){var a=qu(r);return Pu(r,a),a}}return null}(t,e,i):function(t,e,n){if(t.collider[e](n)){var i=qu(t);return Pu(t,i),i}return null}(t,e,i)}function Fu(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n={};switch(H(t)){case"circle":return n.cx=t.cx*e,n.cy=t.cy*e,n.r=t.r,["intersectsCircle",n];case"rect":return["intersectsRect",n=L(t).map(function(t){return fo(t,e)})];case"line":return["intersectsLine",n=B(t).map(function(t){return fo(t,e)})];case"point":return["containsPoint",n=fo(t,e)];case"polygon":return n.vertices=t.vertices.map(function(t){return fo(t,e)}),["intersectsPolygon",n];default:return[]}}function Bu(t,e){var n=z(Fu(e,t.dpi),2),i=n[0],r=n[1],a=[];return i&&(function t(e,n,i,r){for(var a=e.length,o=0;o<a;o++){var s=e[o],c=Iu(s,n,r);c&&i.push(c),!s.children||c||s.collider||t(s.children,n,i,r)}}([t],i,a,r),function(t,e){for(var n=0,i=e.length;n<i;n++)e[n].input=t}(e,a)),a}function Lu(t,e){var n=z(Fu(e,t.dpi),2);return function t(e,n,i){for(var r=e.length,a=0;a<r;a++){var o=e[a];if(null!==Iu(o,n,i))return!0;if(o.children&&!o.collider)return t(o.children,n,i)}return!1}([t],n[0],n[1])}var Wu=function(t){function e(t){var n;return b(this,e),(n=T(this,R(e).call(this,t)))._stage=null,n._collider={type:null,definition:null,fn:null},n._attrs={},n._node=null,n}return S(e,gu),k(e,[{key:"set",value:function(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=(this.node=n).data,r=n.desc,a=n.tag,o=n.strokeReference,s=n.fillReference;t=this.attrs,e=n,Object.keys(ao).forEach(function(n){var i=e[n];if(void 0!==i){var r=ao[n];t[r]=i}}),void 0!==i&&(this.data=i),"object"===x(r)&&(this.desc=v(!0,{},r)),"string"==typeof a&&(this.tag=a),"string"==typeof o&&(this.strokeReference=o),"string"==typeof s&&(this.fillReference=s)}},{key:"findShapes",value:function(t){return Eu.find(t,this).map(function(t){return ju(t)})}},{key:"getItemsFrom",value:function(t){return Bu(this,t)}},{key:"containsPoint",value:function(t){return Lu(this,t)}},{key:"intersectsLine",value:function(t){return Lu(this,t)}},{key:"intersectsRect",value:function(t){return Lu(this,t)}},{key:"intersectsCircle",value:function(t){return Lu(this,t)}},{key:"intersectsPolygon",value:function(t){return Lu(this,t)}},{key:"resolveLocalTransform",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Su;void 0!==this.attrs.transform&&Nu(this.attrs.transform,t),this.modelViewMatrix=t.clone()}},{key:"resolveGlobalTransform",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Su,e=this.ancestors;if(0<e.length)for(var n=e.length-1;0<=n;n--)e[n].resolveLocalTransform(t),t=e[n].modelViewMatrix;this.resolveLocalTransform(t)}},{key:"attr",value:function(t){return this.attrs[t]}},{key:"equals",value:function(t){var n=this.attrs,i=Object.keys(n),r=t.attrs,a=Object.keys(r);if(i.length!==a.length)return!1;for(var o=0;o<i.length;o++){var s=i[o];if(!Object.hasOwnProperty.call(r,s))return!1;if(n[s]!==r[s])return!1}return E(R(e.prototype),"equals",this).call(this,t)}},{key:"toJSON",value:function(){var t=E(R(e.prototype),"toJSON",this).call(this);return t.attrs=this.attrs,t}},{key:"attrs",get:function(){return this._attrs}},{key:"stage",get:function(){return this._parent&&!this._stage?this._stage=this._parent.stage:this._parent||this._stage===this||(this._stage=null),this._stage}},{key:"modelViewMatrix",set:function(t){this._mvm=t,this._imvm=null},get:function(){return this._mvm}},{key:"inverseModelViewMatrix",get:function(){return this._imvm=this._imvm?this._imvm:this._mvm.clone().invert(),this._imvm}},{key:"node",set:function(t){this._node=t},get:function(){return this._node}},{key:"collider",set:function(t){var e=Array.isArray(t)?"collection":t&&t.type;return"string"!=typeof e?(this._collider.type=null,this._collider.definition=null,void(this._collider.fn=null)):(null!==this._collider&&this._collider.type===e&&null!==this._collider.fn?this._collider.fn.set(t):this._collider.type=e,void(this._collider.definition=t))},get:function(){if(null!==this._collider.fn)return this._collider.fn;switch(this._collider.type){case"collection":this._collider.fn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(_u,e)}(this._collider.definition);break;case"frontChild":return!0;case"bounds":this._collider.fn=Mu("rect",this.boundingRect());break;case"line":case"rect":case"circle":case"polygon":case"polyline":this._collider.fn=Mu(this._collider.type,this._collider.definition);break;default:return null}return this._collider.fn}},{key:"colliderType",get:function(){return this._collider.type}}]),e}(),Vu=function(t){function e(){return b(this,e),T(this,R(e).apply(this,arguments))}return S(e,gu),k(e,[{key:"addChild",value:function(t){if(!(t&&t instanceof gu))throw new TypeError("Expecting a Node as argument, but got ".concat(t));if(t===this)throw new Error("Can not add itself as child!");if(t._children&&t._children.length&&0<=this.ancestors.indexOf(t))throw new Error("Can not add an ancestor as child!");return t._parent&&t._parent!==this&&t._parent.removeChild(t),this._children.push(t),t._parent=this,t._ancestors=null,this}},{key:"addChildren",value:function(t){var e,n=t?t.length:0;for(e=0;e<n;e++)this.addChild(t[e]);return this}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return 0<=e&&(this._children.splice(e,1),t._parent=null,t._ancestors=null),this}},{key:"removeChildren",value:function(t){var e,n;if(!this._children)return this;if(t)for(n=t.length,e=0;e<n;e++)this.removeChild(t[e]);else for(;this._children.length;)this.removeChild(this._children[0]);return this}}]),e}(),Hu=Vu.prototype,Uu=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b(this,e);var i=n.type,r=void 0===i?"container":i;return(t=T(this,R(e).call(this,r))).set(n),t}return S(e,Wu),k(e,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};E(R(e.prototype),"set",this).call(this,t);var n=t.collider,i=v({type:null},n);this.collider=i,this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"appendChildRect",value:function(t,e){if(void 0!==t.bounds){var n=this.__boundingRect[e]||{},i=z(t.bounds(e),3),r=i[0],a=i[2],o=r.x,s=r.y,c=a.x,l=a.y,u=isNaN(n.width)?c:Math.max(c,n.width+n.x),h=isNaN(n.height)?l:Math.max(l,n.height+n.y);n.x=isNaN(n.x)?o:Math.min(o,n.x),n.y=isNaN(n.y)?s:Math.min(s,n.y),n.width=u-n.x,n.height=h-n.y,this.__boundingRect[e]=n}}},{key:"boundingRect",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__boundingRect[t])return this.__boundingRect[t];for(var e=this.children.length,n=0;n<e;n++)this.appendChildRect(this.children[n],t);return this.__boundingRect[t]=v({x:0,y:0,width:0,height:0},this.__boundingRect[t]),this.__boundingRect[t]}},{key:"bounds",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__bounds[t])return this.__bounds[t];var e=this.boundingRect(t);return this.__bounds[t]=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],this.__bounds[t]}},{key:"addChild",value:function(t){var e=Hu.addChild.call(this,t);if(this._collider&&"bounds"===this._collider.type){this.appendChildRect(t,!0);var n=v({type:"bounds",x:0,y:0,width:0,height:0},this.__boundingRect.true);this.collider=n}return e}},{key:"addChildren",value:function(t){var e=Hu.addChildren.call(this,t),n=t.length;if(this._collider&&"bounds"===this._collider.type&&0<n){for(var i=0;i<n;i++)this.appendChildRect(t[i],!0);var r=v({type:"bounds",x:0,y:0,width:0,height:0},this.__boundingRect.true);this.collider=r}return e}},{key:"removeChild",value:function(t){t._stage=null;var e,n=t.descendants,i=n?n.length:0;for(e=0;e<i;e++)n[e]._stage=null;if(Hu.removeChild.call(this,t),this._collider&&"bounds"===this._collider.type){this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null};var r=v(this.boundingRect(!0),{type:"bounds"});this.collider=r}return this}},{key:"removeChildren",value:function(t){if(Hu.removeChildren.call(this,t),this._collider&&"bounds"===this._collider.type){this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null};var e=v(this.boundingRect(!0),{type:"bounds"});this.collider=e}return this}}]),e}();function $u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(Uu,e)}var Yu=function(t){function e(t){var n;return b(this,e),(n=T(this,R(e).call(this,"stage")))._stage=A(n),n._dpiRatio=t||1,n}return S(e,Uu),k(e,[{key:"dpi",get:function(){return this._dpiRatio}}]),e}();var Xu=Vu.prototype,Ju=["x1","x2","y1","y2","id","offset","style"],Ku=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b(this,e);var i=n.type,r=void 0===i?"container":i;return(t=T(this,R(e).call(this,r))).set(n),t._boundingRect={},t}return S(e,Wu),k(e,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};E(R(e.prototype),"set",this).call(this,t);for(var n=this.attrs,i="",r=0,a=Ju.length;r!==a;r++)void 0!==t[i=Ju[r]]&&(n[i]=t[i])}},{key:"addChild",value:function(t){return Xu.addChild.call(this,t)}},{key:"addChildren",value:function(t){return Xu.addChildren.call(this,t)}},{key:"removeChild",value:function(t){t._stage=null;var e,n=t.descendants,i=n?n.length:0;for(e=0;e<i;e++)n[e]._stage=null;return Xu.removeChild.call(this,t),this}},{key:"removeChildren",value:function(t){return Xu.removeChildren.call(this,t),this}}]),e}();function Gu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(Ku,e)}var Zu=Vu.prototype,Qu=["patternUnits","x","y","width","height","id"],th=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b(this,e);var i=n.type,r=void 0===i?"container":i;return(t=T(this,R(e).call(this,r))).set(n),t._boundingRect={},t}return S(e,Wu),k(e,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};E(R(e.prototype),"set",this).call(this,t);for(var n=this.attrs,i="",r=0,a=Qu.length;r!==a;r++)void 0!==t[i=Qu[r]]&&(n[i]=t[i])}},{key:"addChild",value:function(t){return Zu.addChild.call(this,t)}},{key:"addChildren",value:function(t){return Zu.addChildren.call(this,t)}},{key:"removeChild",value:function(t){t._stage=null;var e,n=t.descendants,i=n?n.length:0;for(e=0;e<i;e++)n[e]._stage=null;return Zu.removeChild.call(this,t),this}},{key:"removeChildren",value:function(t){return Zu.removeChildren.call(this,t),this}}]),e}();var eh=function(t){function e(){var t,n;return b(this,e),(t=n=T(this,R(e).call(this,"rect"))).set.apply(t,arguments),n}return S(e,Wu),k(e,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.x,i=void 0===n?0:n,r=t.y,a=void 0===r?0:r,o=t.width,s=void 0===o?0:o,c=t.height,l=void 0===c?0:c,u=t.rx,h=void 0===u?0:u,f=t.ry,d=void 0===f?0:f,p=t.collider,g=v({type:"rect",x:i,y:a,width:s,height:l},p);E(R(e.prototype),"set",this).call(this,t),this.attrs.width=0<=s?(this.attrs.x=i,s):(this.attrs.x=i+s,-s),this.attrs.height=0<=l?(this.attrs.y=a,l):(this.attrs.y=a+l,-l),0<h&&(this.attrs.rx=h),0<d&&(this.attrs.ry=d),this.collider=g,this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__boundingRect[t])return this.__boundingRect[t];var e=L(this.attrs),n=z(F(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(e):e),4),i=n[0],r=n[1],a=n[2],o=n[3];return this.__boundingRect[t]={x:i,y:r,width:a-i,height:o-r},this.__boundingRect[t]}},{key:"bounds",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__bounds[t])return this.__bounds[t];var e=this.boundingRect(t);return this.__bounds[t]=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],this.__bounds[t]}}]),e}();var nh=function(t){function e(){var t,n;return b(this,e),(t=n=T(this,R(e).call(this,"circle"))).set.apply(t,arguments),n}return S(e,Wu),k(e,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.cx,i=void 0===n?0:n,r=t.cy,a=void 0===r?0:r,o=t.r,s=void 0===o?0:o,c=t.collider,l=v({type:"circle",cx:i,cy:a,r:s},c);E(R(e.prototype),"set",this).call(this,t),this.attrs.cx=i,this.attrs.cy=a,this.attrs.r=s,this.collider=l,this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__boundingRect[t])return this.__boundingRect[t];var e=this.bounds(t);return this.__boundingRect[t]={x:e[0].x,y:e[0].y,width:e[2].x-e[0].x,height:e[2].y-e[0].y},this.__boundingRect[t]}},{key:"bounds",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__bounds[t])return this.__bounds[t];var e=this.attrs,n=e.cx,i=e.cy,r=e.r,a=e.r,o=n-r,s=i-a,c=2*r,l=2*a,u=[{x:o,y:s},{x:o+c,y:s},{x:o+c,y:s+l},{x:o,y:s+l}];if(t&&this.modelViewMatrix){var h=z(F(u=this.modelViewMatrix.transformPoints(u)),4),f=h[0],d=h[1];c=h[2]-f,l=h[3]-d,this.__bounds[t]=[{x:f,y:d},{x:f+c,y:d},{x:f+c,y:d+l},{x:f,y:d+l}]}else this.__bounds[t]=u;return this.__bounds[t]}}]),e}();var ih=function(t){function e(){var t,n;return b(this,e),(t=n=T(this,R(e).call(this,"line"))).set.apply(t,arguments),n}return S(e,Wu),k(e,[{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.x1,i=void 0===n?0:n,r=t.y1,a=void 0===r?0:r,o=t.x2,s=void 0===o?0:o,c=t.y2,l=void 0===c?0:c,u=t.collider;E(R(e.prototype),"set",this).call(this,t);var h={type:"line",x1:this.attrs.x1=i,y1:this.attrs.y1=a,x2:this.attrs.x2=s,y2:this.attrs.y2=l};this.collider=v(h,u),this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__boundingRect[t])return this.__boundingRect[t];var e=B(this.attrs);t&&this.modelViewMatrix&&(e=this.modelViewMatrix.transformPoints(e));var n=z(F(e),4),i=n[0],r=n[1],a=n[2],o=n[3],s=i!==a||r!==o;return this.__boundingRect[t]={x:i,y:r,width:s?Math.max(1,a-i):0,height:s?Math.max(1,o-r):0},this.__boundingRect[t]}},{key:"bounds",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__bounds[t])return this.__bounds[t];var e=this.boundingRect(t);return this.__bounds[t]=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],this.__bounds[t]}}]),e}();var rh=Math.PI/2;function ah(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return n<0?n+2*Math.PI:n}function oh(t,e,n){return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}}var sh=function(t){function e(){var t,n;return b(this,e),(t=n=T(this,R(e).call(this,"path"))).set.apply(t,arguments),n}return S(e,Wu),k(e,[{key:"set",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};E(R(e.prototype),"set",this).call(this,n),this.segments=[],this.points=[],this.attrs.d=n.d,Array.isArray(n.collider)||"object"===x(n.collider)&&void 0!==n.collider.type?this.collider=n.collider:n.d&&(this.segments=fu(n.d),this.segments.forEach(function(e){if(e.length<=1);else if(function(t){if(t.length<2)return!1;var e=t[0],n=t[t.length-1];return Math.abs(e.x-n.x)<1e-12&&Math.abs(e.y-n.y)<1e-12}(e))t.collider=v({type:"polygon",vertices:e},n.collider);else if("object"===x(n.collider)&&n.collider.visual){var i=t.attrs["stroke-width"]/2;t.collider=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=[],r=[];if("h"===n.forceOrientation){var a=t[0].x<t[1].x?-1:1,o=t[t.length-1].x>t[t.length-2].x?1:-1;t.unshift({x:t[0].x+a,y:t[0].y}),t.push({x:t[t.length-1].x+o,y:t[t.length-1].y})}else if("v"===n.forceOrientation){var s=t[0].y<t[1].y?-1:1,c=t[t.length-1].y>t[t.length-2].y?1:-1;t.unshift({x:t[0].x,y:t[0].y+s}),t.push({x:t[t.length-1].x,y:t[t.length-1].y+c})}for(var l=t.length-1,u=1;u<l;u++){var h=t[u-1],f=t[u],d=t[u+1],p=ah(f,h),g=ah(f,d),y=(p+g)/2,v=y+Math.PI,m=Math.max(y,v),x=Math.min(y,v),b=g<p;if(1===u){var w=ah(h,f);i.push(oh(h,w-rh,e)),r.unshift(oh(h,w+rh,e))}var k=b?m:x,M=b?x:m;if(i.push(oh(f,k,e)),r.unshift(oh(f,M,e)),u===l-1){var _=ah(d,f);i.push(oh(d,_+rh,e)),r.unshift(oh(d,_-rh,e))}}return{type:"polygon",vertices:i.concat(r)}}(e,i,n.collider)}else t.collider=v({type:"polyline",points:e},n.collider)})),this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__boundingRect[t])return this.__boundingRect[t];this.points.length||(this.segments=this.segments.length?this.segments:fu(this.attrs.d),this.points=function(t){for(var e,n=[],i=t.length,r=0;r<i;r++){e=t[r];for(var a=0;a<e.length;a++)n.push(e[a])}return n}(this.segments));var e=z(F(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(this.points):this.points),4),n=e[0],i=e[1],r=e[2],a=e[3];return this.__boundingRect[t]={x:n||0,y:i||0,width:r-n||0,height:a-i||0},this.__boundingRect[t]}},{key:"bounds",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__bounds[t])return this.__bounds[t];var e=this.boundingRect(t);return this.__bounds[t]=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],this.__bounds[t]}}]),e}();var ch=function(t){function e(){var t,n;return b(this,e),(t=n=T(this,R(e).call(this,"text"))).set.apply(t,arguments),n}return S(e,Wu),k(e,[{key:"set",value:function(){var t,n,i,r,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=a.x,s=void 0===o?0:o,c=a.y,l=void 0===c?0:c,u=a.dx,h=void 0===u?0:u,f=a.dy,d=void 0===f?0:f,p=a.textBoundsFn,g=a.text,y=a.title,m=a.collider,b=a.boundingRect;E(R(e.prototype),"set",this).call(this,a),this.attrs.x=s,this.attrs.y=l,this.attrs.dx=h,this.attrs.dy=d,this.attrs.text=g,void 0!==y&&(this.attrs.title=String(y)),"object"===x(b)?this._textBoundsFn=function(){return b}:"function"==typeof p&&(this._textBoundsFn=p),this.collider=v({type:(t=this,n=t.data,i=t._boundingRect,r=t._textBoundsFn,null!=n&&(i||r)?"bounds":null)},m),this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__boundingRect[t])return this.__boundingRect[t];if("function"!=typeof this._textBoundsFn)return{x:0,y:0,width:0,height:0};var e=L(this._textBoundsFn(this.attrs)),n=z(F(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(e):e),4),i=n[0],r=n[1],a=n[2],o=n[3];return this.__boundingRect[t]={x:i,y:r,width:a-i,height:o-r},this.__boundingRect[t]}},{key:"bounds",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(null!==this.__bounds[t])return this.__bounds[t];var e=this.boundingRect(t);return this.__bounds[t]=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],this.__bounds[t]}}]),e}();var lh=oe();function uh(t,e){return lh.get(t)(e)}lh.add("rect",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(eh,e)}),lh.add("circle",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(nh,e)}),lh.add("text",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(ch,e)}),lh.add("line",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(ih,e)}),lh.add("path",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(sh,e)}),lh.add("stage",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(Yu,e)}),lh.add("container",$u),lh.add("defs",$u),lh.add("linearGradient",Gu),lh.add("radialGradient",Gu),lh.add("stop",Gu),lh.add("pattern",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N(th,e)});var hh=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=[{}];function n(){return e[e.length-1]}return n.save=function(){for(var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n(),a={},o="",s=0;s<t.length;s++)void 0!==r[o=t[s]]&&(a[o]=r[o]);return v(a,i),e.push(a),n()},n.restore=function(){e.splice(e.length-1,1)},n}(["stroke","fill","strokeWidth","opacity","fontFamily","fontSize","baseline"]);function fh(t,e){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)e[n](t)}function dh(t){var e=t.items,n=t.stage,i=t.dpi,r=t.on,a=void 0===r?{}:r;return n||(n=uh("stage",i)),function t(e,n,i,r){for(var a,o,s,c={siblings:e,node:null,index:0},l=0,u=e.length;l<u;l++)if(o=l,s=e,(a=c).node=s[o],a.index=o,fh(c,r.create),!("function"==typeof c.node.disabled?c.node.disabled():c.node.disabled)){c.node=hh.save(c.node);var h=uh(c.node.type,c.node);h&&(c.node.transform&&(i.save(),Nu(c.node.transform,i)),i.isIdentity()||(h.modelViewMatrix=i.clone()),n.addChild(h),c.node.children&&t(c.node.children,h,i,r),c.node.transform&&i.restore()),hh.restore()}}(e,n,new Su,a),n}var ph=/\n+|\r+|\r\n/,gh=/\s/,yh=/[a-zA-Z\u00C0-\u00F6\u00F8-\u00FF\u00AD]/,vh=0,mh=1,xh=2;function bh(t){return"string"==typeof t?-1!==t.search(ph):-1!==String(t).search(ph)}function wh(t){return-1!==t.search(gh)}function kh(t){return-1!==t.search(yh)}function Mh(t,e,n){return Math.max(e,Math.min(n,t))}function _h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.string,i=e.separator,r=void 0===i?"":i,a=e.reverse,o=void 0!==a&&a,s=e.measureText,c=void 0===s?function(t){return{width:t.length,height:1}}:s,l=e.mandatoryBreakIdentifiers,u=void 0===l?[bh]:l,h=e.noBreakAllowedIdentifiers,f=void 0===h?[]:h,d=e.suppressIdentifier,p=void 0===d?[wh,bh,function(t){return""===t}]:d,g=e.hyphenationIdentifiers,y=void 0===g?[kh]:g,v=String(n).split(r);""===(t=v)[0]&&t.shift(),""===t[t.length-1]&&t.pop();var m=v.length,x=o?function(t){return 0<=t}:function(t){return t<m},b=o?m:-1;function w(t){var e,n,i,r,a=Mh(t,0,m-1),o=v[a],s=c(o),l=(e=o,n=a,i=v,r=f,u.some(function(t){return t(e,n,i)})?mh:r.some(function(t){return t(e,n,i)})?vh:xh);return{index:a,value:o,breakOpportunity:l,suppress:p.some(function(t){return t(o,a,v)}),hyphenation:y.some(function(t){return t(o,a,v)}),width:s.width,height:s.height,done:!1}}return{next:function(t){return isNaN(t)?o?b--:b++:b=Mh(t,0,m-1),x(b)?w(b):{done:!0}},peek:w,length:m}}var Sh="‐",Rh="…",Ch=24,Nh=4,Ah=1e-12,Th=16,Eh=1.2,zh=/^\s*\d+(\.\d+)?px\s*$/i;function Oh(t){return"string"===x(t)&&zh.test(t)}function jh(t){var e=t["font-size"]||t.fontSize;return Oh(e)?parseFloat(e)*Math.max(isNaN(t.lineHeight)?Eh:t.lineHeight,0):Th*Eh}function Dh(t,e){return{lines:[],line:"",width:0,maxLines:function(t){var e=t.maxHeight,n=Math.max(t.maxLines,1)||1/0;if(isNaN(e))return n;var i=jh(t);return Math.max(1,Math.min(Math.floor(e/i),n))}(t),maxWidth:t.maxWidth,hyphens:{enabled:"auto"===t.hyphens,char:Sh,metrics:e(Sh)}}}function qh(t){t.lines.push(t.line),t.line="",t.width=0}function Ph(t,e){t.line+=e.value,t.width+=e.width}function Ih(t,e,n){if(e.width>t.maxWidth)return e;for(var i=e.index,r=1;r<5;r++){var a=n.peek(e.index-1);if(!e.hyphenation||!a.hyphenation||0===e.index)return e;if(t.width+t.hyphens.metrics.width<=t.maxWidth)return t.line+=t.hyphens.char,e;if(1===t.line.length)return e;e=n.next(i-r),t.line=t.line.slice(0,-1),t.width-=e.width}return e}function Fh(t,e,n){for(var i=_h({string:e.value,measureText:n});t.lines.length<t.maxLines;){var r=i.next();if(r.done)break;t.width+r.width>t.maxWidth&&r.breakOpportunity===xh&&0<t.line.length&&(r=t.hyphens.enabled?Ih(t,r,i):r,qh(t)),Ph(t,r)}}function Bh(t,e){for(var n=_h({string:t.text,separator:"",measureText:e,noBreakAllowedIdentifiers:[function(t,e){return 0===e}]}),i=Dh(t,e),r=!0;i.lines.length<i.maxLines;){var a=n.next();if(a.done){qh(i),r=!1;break}a.breakOpportunity===mh?qh(i):i.width+a.width>i.maxWidth&&a.breakOpportunity===xh?a.suppress?i.width+=a.width:(a=i.hyphens.enabled?Ih(i,a,n):a,qh(i),Ph(i,a)):Ph(i,a)}return{lines:i.lines,reduced:r}}function Lh(t,e){for(var n=_h({string:t.text,separator:/(\s|-|\u2010)/,measureText:e}),i=Dh(t,e),r=!0;i.lines.length<i.maxLines;){var a=n.next();if(a.done){qh(i),r=!1;break}a.breakOpportunity===mh?qh(i):i.width+a.width>i.maxWidth&&a.breakOpportunity===xh?a.suppress?qh(i):a.width>i.maxWidth?Fh(i,a,e):(qh(i),Ph(i,a)):Ph(i,a)}return{lines:i.lines,reduced:r}}function Wh(t){return{"break-all":Bh,"break-word":Lh}[t.wordBreak]}function Vh(t){return function(e){var n,i,r,a=e.node;if("text"===(r=a).type&&!r._lineBreak){var o=Wh(a);if(!o)return;var s=t(a);if(s.width>a.maxWidth||bh(a.text)){var c=(jh(a)-s.height)/2,l=o(a,(n=a,i=t,function(t){return i({text:t,fontSize:n.fontSize,fontFamily:n.fontFamily})}));e.node=function(t,e,n,i){var r={type:"container",children:[]};void 0!==e.id&&(r.id=e.id);var a=0;return t.lines.forEach(function(o,s){var c=v({},e);c.text=o,c._lineBreak=!0,a+=n,t.reduced&&s===t.lines.length-1?c.text+=Rh:delete c.maxWidth,c.dy=isNaN(c.dy)?a:c.dy+a,a+=i,a+=n,r.children.push(c)}),r}(l,a,c,s.height)}}}}function Hh(t,e){var n=t.text,i=t["font-size"],r=t["font-family"],a=t.maxWidth;if(n="string"==typeof n?n:"".concat(n),void 0===a)return n;var o=e({text:n,fontSize:i,fontFamily:r}).width;if(o<=a)return n;for(var s=0,c=n.length-1;s<=c;){var l=Math.floor((s+c)/2);(o=e({text:n.substr(0,l)+Rh,fontSize:i,fontFamily:r}).width)<=a?s=l+1:c=l-1}return n.substr(0,c)+Rh}function Uh(t){var e=t.baseline||t["dominant-baseline"],n=0,i=parseInt(t.fontSize||t["font-size"],10)||0;switch(e){case"hanging":n=.75*i;break;case"text-before-edge":n=.85*i;break;case"middle":n=.25*i;break;case"central":n=.35*i;break;case"mathemetical":n=i/2;break;case"text-after-edge":case"ideographic":n=.2*-i;break;default:n=0}return n}var $h,Yh={},Xh={},Jh={fontSize:void 0,fontFamily:void 0};function Kh(t,e,n){var i,r,a=t+e+n;return"number"!=typeof Xh[a]&&($h=$h||document.createElement("canvas").getContext("2d"),i=e,r=n,Jh.fontSize===i&&Jh.fontFamily===r||($h.font=i+" "+r,Jh.fontSize=i,Jh.fontFamily=r),Xh[a]=$h.measureText(t).width),Xh[a]}function Gh(t){return"number"!=typeof Yh[t]&&(Yh[t]=function(t){if(Oh(t)){var e=parseFloat(t);return e+Nh*Math.ceil((e+Ah)/Ch)}return Th}(t)),Yh[t]}function Zh(t){var e=t.text,n=t.fontSize;return{width:Kh(e,n,t.fontFamily),height:Gh(n)}}function Qh(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Zh,n=t["font-size"]||t.fontSize,i=t["font-family"]||t.fontFamily,r=e({text:t.text,fontFamily:i,fontSize:n}),a=Math.min(t.maxWidth||r.width,r.width),o=t.x||0,s=t.y||0,c=t.dx||0,l={x:0,y:s+((t.dy||0)+Uh(t))-.75*r.height,width:a,height:r.height},u=t["text-anchor"]||t.anchor;return l.x="middle"===u?o+c-a/2:"end"===u?o+c-a:o+c,l}function tf(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Zh,n=Wh(t),i=t["font-size"]||t.fontSize,r=t["font-family"]||t.fontFamily,a=e({text:t.text,fontFamily:r,fontSize:i});if(n&&(a.width>t.maxWidth||bh(t.text))){for(var o=n(t,function(t){return e({text:t,fontFamily:r,fontSize:i})}),s=v({},t),c=0,l="",u=0,h=o.lines.length;u<h;u++){var f=o.lines[u];f+=u===h-1&&o.reduced?Rh:"";var d=e({text:f,fontSize:i,fontFamily:r}).width;c<=d&&(c=d,l=f)}s.text=l;var p=Qh(s,e);return p.height=jh(t)*o.lines.length,p}return Qh(t,e)}function ef(t,e,n){var i=n.orientation,r=n.degree,a=n.stops,o=void 0===a?[]:a,s=null;if("radial"===i){var c=e.boundingRect();s=t.createRadialGradient(c.x+c.width/2,c.y+c.height/2,1e-5,c.x+c.width/2,c.y+c.height/2,Math.max(c.width,c.height)/2)}else{var l=lo(r),u=e.boundingRect();s=t.createLinearGradient(u.x+l.x1*u.width,u.y+l.y1*u.height,u.x+l.x2*u.width,u.y+l.y2*u.height)}for(var h=0,f=o.length;h<f;h++){var d=o[h];s.addColorStop(d.offset,d.color)}return s}function nf(t,e,n){return e.width=t.width,e.height=t.height,n.save(),n.fillStyle=t.fill,t.shapes.forEach(function(t){switch(t.type){case"rect":n.rect(t.x,t.y,t.width,t.height)}}),n.fill(),n.restore(),n.createPattern(e,"repeat")}function rf(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=t.y,i=t.width,r=t.height,a=t.scaleRatio,o=t.margin,s=t.edgeBleed,c={x:0,y:0,width:0,height:0,scaleRatio:{x:1,y:1},margin:{left:0,top:0},edgeBleed:{left:0,right:0,top:0,bottom:0,bool:!1}};return c.x=isNaN(e)?c.x:e,c.y=isNaN(n)?c.y:n,c.width=isNaN(i)?c.width:i,c.height=isNaN(r)?c.height:r,void 0!==a&&(c.scaleRatio.x=isNaN(a.x)?c.scaleRatio.x:a.x,c.scaleRatio.y=isNaN(a.y)?c.scaleRatio.y:a.y),void 0!==o&&(c.margin.left=isNaN(o.left)?0:o.left,c.margin.top=isNaN(o.top)?0:o.top),"object"===x(s)&&["left","right","top","bottom"].forEach(function(t){!isNaN(s[t])&&0<s[t]&&(c.edgeBleed[t]=s[t],c.edgeBleed.bool=!0)}),c.computedPhysical={x:Math.round(c.margin.left+(c.x-c.edgeBleed.left)*c.scaleRatio.x),y:Math.round(c.margin.top+(c.y-c.edgeBleed.top)*c.scaleRatio.y),width:Math.round((c.width+c.edgeBleed.left+c.edgeBleed.right)*c.scaleRatio.x),height:Math.round((c.height+c.edgeBleed.top+c.edgeBleed.bottom)*c.scaleRatio.y)},c}function af(){var t={element:function(){},root:function(){},appendTo:function(){},render:function(){return!1},itemsAt:function(){return[]},findShapes:function(){return[]},clear:function(){},destory:function(){},size:function(){},measureText:Zh,textBounds:tf,setKey:function(e){t.element().setAttribute("data-key",e)}};return t}function of(t){return function(e){var n=e.node;"text"!==n.type||null==n.data||n.textBoundsFn||(n.textBoundsFn=t.textBounds)}}var sf=oe();function cf(t){return Array.isArray(t)?t:"string"==typeof t?-1!==t.indexOf(",")?t.split(","):t.split(" "):[]}function lf(t,e,n){for(var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=Object.keys(i),a=0,o=n.length;a<o;a++){var s=n[a],c=s[0],l=s[1],u=s[2];if(c in e.attrs&&!(l in i)&&t[l]!==e.attrs[c]){var h=u?u(e.attrs[c]):e.attrs[c];"function"==typeof t[l]?t[l](h):t[l]=h}}for(var f=0,d=r.length;f<d;f++){var p=r[f];t[p]=i[p]}}function uf(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:dh,r=!1,a=rf(),o=[["fill","fillStyle"],["stroke","strokeStyle"],["opacity","globalAlpha"],["globalAlpha","globalAlpha"],["stroke-width","lineWidth"],["stroke-linejoin","lineJoin"],["stroke-dasharray","setLineDash",cf]],s=af();return s.element=function(){return t},s.root=function(){return t},s.appendTo=function(e){return t||((t=e.ownerDocument.createElement("canvas")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none"),e.appendChild(t),t},s.render=function(c){if(!t)return!1;var l,u,h,f;n||(l=t.ownerDocument,u=l.createElement("canvas"),h=u.getContext("2d"),f={},n={create:function(t){var e=t.key;return e?(f[e]=f[e]||nf(t,u,h),f[e]):nf(t,u,h)},clear:function(){f={}}});var d,p=t.getContext("2d"),g=(d=p,("undefined"==typeof window?1:window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1)),y=a.scaleRatio.x,v=a.scaleRatio.y;r&&(t.style.left="".concat(a.computedPhysical.x,"px"),t.style.top="".concat(a.computedPhysical.y,"px"),t.style.width="".concat(a.computedPhysical.width,"px"),t.style.height="".concat(a.computedPhysical.height,"px"),t.width=Math.round(a.computedPhysical.width*g),t.height=Math.round(a.computedPhysical.height*g));var m={type:"container",children:c,transform:a.edgeBleed.bool?"translate(".concat(a.edgeBleed.left*g*y,", ").concat(a.edgeBleed.top*g*v,")"):""};1===g&&1===y&&1===v||(m.transform+="scale(".concat(g*y,", ").concat(g*v,")"));var b=i({items:[m],dpi:g,on:{create:[Vh(s.measureText),of(s)]}}),w=!e||!b.equals(e);n.clear();var k=r||w;return k&&(s.clear(),function t(e,n,i,r){for(var a=0,o=e.length;a<o;a++){var s=e[a],c={};n.save(),s.attrs&&(s.attrs.fill||s.attrs.stroke)&&(s.attrs.fill&&"object"===x(s.attrs.fill)&&"gradient"===s.attrs.fill.type?c.fillStyle=ef(n,s,s.attrs.fill):s.attrs.fill&&"object"===x(s.attrs.fill)&&"pattern"===s.attrs.fill.type&&(c.fillStyle=r.patterns.create(s.attrs.fill)),s.attrs.stroke&&"object"===x(s.attrs.stroke)&&"gradient"===s.attrs.stroke.type?c.strokeStyle=ef(n,s,s.attrs.stroke):s.attrs.stroke&&"object"===x(s.attrs.stroke)&&"pattern"===s.attrs.stroke.type&&(c.strokeStyle=r.patterns.create(s.attrs.stroke))),lf(n,s,i,c),s.modelViewMatrix&&(l=s.modelViewMatrix.elements,n.setTransform(l[0][0],l[1][0],l[0][1],l[1][1],l[0][2],l[1][2])),sf.has(s.type)&&sf.get(s.type)(s.attrs,{g:n,doFill:"fill"in s.attrs&&"none"!==s.attrs.fill,doStroke:"stroke"in s.attrs&&0!==s.attrs["stroke-width"]}),s.children&&t(s.children,n,i,r),n.restore()}var l}(b.children,p,o,{patterns:n})),r=!1,e=b,k},s.itemsAt=function(t){return e?e.getItemsFrom(t):[]},s.findShapes=function(t){return e?e.findShapes(t):[]},s.clear=function(){return t&&(t.width=t.width),e=null,s},s.size=function(t){if(t){var e=rf(t);JSON.stringify(a)!==JSON.stringify(e)&&(r=!0,a=e)}return a},s.destroy=function(){t&&(t.parentElement&&t.parentElement.removeChild(t),t=null),e=null},s}function hf(t,e){sf.add(t,e)}function ff(t,e){return Math.max(0,Math.min(t,e))}var df=new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͽΆΈ-ϵϷ-҂Ҋ-։ः-हऻऽ-ीॉ-ौॎ-ॐक़-ॡ।-ॿং-হঽ-ীে-ৌৎ-ৡ০-ৱ৴-৺ਃ-ਹਾ-ੀਖ਼-੯ੲ-ੴઃ-હઽ-ીૉ-ૌૐ-ૡ૦-૯ଂ-ହଽ-ାୀେ-ୌୗ-ୡ୦-୷ஃ-ிு-ௌௐ-௲ఁ-ఽు-ౄౘ-ౡ౦-౯౿-ಹಽ-ೋೕ-ೡ೦-ീെ-ൌൎ-ൡ൦-ෆා-ෑෘ-ะา-ำเ-ๆ๏-ະາ-ຳຽ-ໆ໐-༗༚-༴༶༸༾-ཬཿ྅ྈ-ྌ྾-࿅࿇-ာေးျ-ြဿ-ၗၚ-ၝၡ-ၰၵ-ႁႃ-ႄႇ-ႌႎ-ႜ႞-ፚ፠-ᎏᎠ-Ᏼᐁ-ᙿᚁ-ᚚᚠ-ᜑᜠ-ᜱ᜵-ᝑᝠ-ᝰក-ាើ-ៅះ-ៈ។-៚ៜ០-៩᠐-ᢨᢪ-ᤜᤣ-ᤦᤩ-ᤱᤳ-ᤸ᥆-᧚ᨀ-ᨖᨙ-ᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪭ᬄ-ᬳᬵᬻᬽ-ᭁᭃ-᭪᭴-᭼ᮂ-ᮡᮦ-ᮧ᮪-ᯥᯧᯪ-ᯬᯮ᯲-ᰫᰴ-ᰵ᰻-᱿᳓᳡ᳩ-ᳬᳮ-ᶿḀ-ᾼιῂ-ῌῐ-Ίῠ-Ῥῲ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎ-⅏Ⅰ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-ⳤⳫ-ⳮⴀ-⵰ⶀ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ㆺㇰ-㈜㈠-㉏㉠-㉻㉿-㊰㋀-㋋㋐-㍶㍻-㏝㏠-㏾㐀-䶵一-ꒌꓐ-ꘌꘐ-ꙮꚀ-ꛯ꛲-꛷Ꜣ-ꞇ꞉-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠤꠧ꠰-꠷ꡀ-ꡳꢀ-ꣃ꣎-꣙ꣲ-ꤥ꤮-ꥆꥒ-ꥼꦃ-ꦲꦴ-ꦵꦺ-ꦻꦽ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂ-ꯤꯦ-ꯧꯩ-꯬꯰-ﬗＡ-Ｚａ-ｚｦ-ￜ]"),pf=new RegExp("[־׀׃׆א-״߀-ߪߴ-ߵߺ-ࠕࠚࠤࠨ࠰-ࡘ࡞‏יִײַ-ﬨשׁ-ﭏ]"),gf=new RegExp("[؈؋؍؛-ي٭-ٯٱ-ەۥ-ۦۮ-ۯۺ-܍ܐܒ-ܯݍ-ޥޱﭐ-ﴽﵐ-﷼ﹰ-ﻼ]");function yf(t){var e,n,i,r,a=t?t.length:0;for(e=0;e<a;e++){if(n=t[e],r=n,df.test(r))return"ltr";if(i=n,pf.test(i)||gf.test(i))return"rtl"}return"ltr"}var vf={start:"end",end:"start",center:"center",middle:"middle"};function mf(t,e){return"rtl"===e?vf[t]:t}function xf(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i].object=n(t[i].content.type,e)}function bf(t,e){for(var n=0,i=t.length;n<i;n++)null!==t[n].object&&void 0!==t[n].object&&(e(t[n].object),t[n].object=null)}function wf(t,e,n,i,r,a){var o=function t(e,n){var i,r,a,o=[],s=[],c=[],l=[],u=function(t){return t.id},h=function(t,e){var n;return n="object"===x(t)?"id"in t?t.id:e:t,{content:t,id:"".concat(n,"__").concat(t.type||"")}};e.isTree||(e=e.map(h)),n=n.map(h),r=e.map(u),a=n.map(u);for(var f=0,d=n.length;f<d;f++)-1===r.indexOf(n[f].id)?o.push(n[f]):c.push(n[f]);for(var p=0,g=e.length;p<g;p++)-1===a.indexOf(e[p].id)?s.push(e[p]):l.push(e[p]);for(var y=0,v=o.length;y<v;y++)o[y].content.children&&(o[y].diff=t([],o[y].content.children),o[y].children=o[y].diff.updatedNew.concat(o[y].diff.added),o[y].children.isTree=!0);for(var m=0,b=c.length;m<b;m++)c[m].diff=t(l[m].children||[],c[m].content.children||[]),c[m].object=l[m].object,c[m].children=c[m].diff.items;return i=c.concat(o),o.isTree=!0,s.isTree=!0,c.isTree=!0,l.isTree=!0,i.isTree=!0,{added:o,updatedNew:c,updatedOld:l,removed:s,items:i}}(t,e);return xf(o.added,n,i),bf(o.removed,a),function t(e,n,i,r){for(var a,o=0,s=e.length;o<s;o++)null!==(a=e[o]).object&&void 0!==a.object&&(i(a.object,a.content),a.diff&&(xf(a.diff.added,a.object,n),bf(a.diff.removed,r),t(a.diff.items,n,i,r)))}(o.items,i,r,a),o.items}hf("rect",function(t,e){var n,i,r,a,o,s,c,l=e.g,u=e.doFill,h=e.doStroke;l.beginPath(),0<t.rx||0<t.ry?(n=l,i=t.x,r=t.y,a=t.width,o=t.height,s=t.rx,c=t.ry,s=ff(a/2,0<s?s:c),c=ff(o/2,0<c?c:s),n.moveTo(i,r+c),n.lineTo(i,r+o-c),n.quadraticCurveTo(i,r+o,i+s,r+o),n.lineTo(i+a-s,r+o),n.quadraticCurveTo(i+a,r+o,i+a,r+o-c),n.lineTo(i+a,r+c),n.quadraticCurveTo(i+a,r,i+a-s,r),n.lineTo(i+s,r),n.quadraticCurveTo(i,r,i,r+c)):l.rect(t.x,t.y,t.width,t.height),u&&l.fill(),h&&l.stroke()}),hf("circle",function(t,e){var n=e.g,i=e.doFill,r=e.doStroke;n.beginPath(),n.moveTo(t.cx+t.r,t.cy),n.arc(t.cx,t.cy,t.r,0,2*Math.PI,!1),i&&n.fill(),r&&n.stroke()}),hf("line",function(t,e){var n=e.g,i=e.doStroke;n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),i&&n.stroke()}),hf("path",function(t,e){var n=e.g,i=e.doStroke,r=e.doFill,a=new Path2D(t.d);r&&n.fill(a),i&&n.stroke(a)}),hf("text",function(t,e){var n=e.g,i=Hh(t,Zh);n.font="".concat(t["font-size"]," ").concat(t["font-family"]);var r=yf(t.text);n.canvas.dir!==r&&(n.canvas.dir=r);var a=mf("middle"===t["text-anchor"]?"center":t["text-anchor"],n.canvas.dir);a&&n.textAlign!==a&&(n.textAlign=a);var o=Uh(t);n.fillText(i,t.x+t.dx,t.y+t.dy+o)});var kf="http://www.w3.org/2000/svg",Mf=function(t,e){if(!t||"string"!=typeof t)throw new Error("Invalid type: ".concat(t));var n=e.ownerDocument.createElementNS(kf,"container"===t?"g":t);return e.appendChild(n),n},_f=function(t){t.parentNode&&t.parentNode.removeChild(t)},Sf=function(t,e){for(var n in e.attrs)if("stroke"===n&&e.strokeReference)t.setAttribute("stroke",e.strokeReference);else if("fill"===n&&e.fillReference)t.setAttribute("fill",e.fillReference);else if("text"===n){t.setAttribute("style","white-space: pre"),t.textContent=Hh(e.attrs,Zh);var i=yf(e.attrs.text);"rtl"===i&&(t.setAttribute("direction","rtl"),t.setAttribute("dir","rtl"),t.setAttribute("text-anchor",mf(t.getAttribute("text-anchor"),i)))}else if("text"!==e.type||"dy"!==n&&"dominant-baseline"!==n)if("text"===e.type&&"title"===n&&e.attrs.title){var r=t.ownerDocument.createElementNS(kf,"title");r.textContent=e.attrs.title,t.appendChild(r)}else t.setAttribute(n,e.attrs[n]);else{var a=+t.getAttribute(n)||0,o=0;o="dominant-baseline"===n?Uh(e.attrs):e.attrs[n],t.setAttribute("dy",o+a)}if("string"==typeof e.data||"number"==typeof e.data||"boolean"==typeof e.data)t.setAttribute("data",e.data);else if("object"===x(e.data)&&null!==e.data)for(var s in e.data)"string"!=typeof e.data[s]&&"number"!=typeof e.data[s]&&"boolean"!=typeof e.data[s]||t.setAttribute("data-".concat(s),e.data[s])},Rf=function(){function t(e,n,i,r){b(this,t),this.create=e,this.nodeCreator=n,this.nodeMaintainer=i,this.nodeDestroyer=r}return k(t,[{key:"render",value:function(t,e){return this.create([],t,e,this.nodeCreator,this.nodeMaintainer,this.nodeDestroyer)}}]),t}();function Cf(){return new Rf(wf,Mf,Sf,_f)}function Nf(t){var e,n,i=0;if(0===(t=JSON.stringify(t)).length)return i;for(e=0,n=t.length;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i&=i;return i}function Af(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Cf,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:kf,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:dh,o=i(),s=!1,c=rf(),l=af(),u={type:"defs",children:[]},h=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Nf,n={},i=Date.now();return{onCreate:function(r){var a={};r.node&&"object"===x(r.node.fill)&&"pattern"===r.node.fill.type&&r.node.fill.shapes&&(a.fill=r.node.fill),r.node&&"object"===x(r.node.stroke)&&"pattern"===r.node.stroke.type&&r.node.stroke.shapes&&(a.stroke=r.node.stroke),Object.keys(a).forEach(function(o){var s="",c=a[o],l=e(c),u="picasso-pattern-".concat(i,"-").concat(l);if("undefined"!=typeof window&&(s=window.location.href.split("#")[0]),!n[l]){var h={patternUnits:"userSpaceOnUse",x:0,y:0,width:c.width,height:c.height,type:"pattern",id:u,children:[],fill:c.fill};c.shapes.forEach(function(t){h.children.push(t)}),t.push(h),n[l]=!0}r.node["".concat(o,"Reference")]="url('".concat(s,"#").concat(u,"')")})},clear:function(){n={}}}}(u.children),f=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Nf,n={},i=Date.now(),r={getOrCreateGradient:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"fill",o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",s=e(r[a]),c="picasso-gradient-".concat(i,"-").concat(s);if(!n[s]){var l=r[a],u=l.orientation,h=l.degree,f=l.stops,d=void 0===f?[]:f,p={};void 0===h&&(h=90),"radial"===u?p.type="radialGradient":(p=lo(h)).type="linearGradient",p.id=c,p.children=d.map(function(t){var e=t.offset,n=t.color,i=t.opacity;return{type:"stop",offset:"".concat(100*e,"%"),style:"stop-color:".concat(n,";stop-opacity:").concat(void 0!==i?i:1)}}),t.push(p),n[s]=c}return"url('".concat(o,"#").concat(c,"')")},onCreate:function(t){var e="";"undefined"!=typeof window&&(e=window.location.href.split("#")[0]);var n=t.node;n.fill&&"object"===x(n.fill)&&"gradient"===n.fill.type&&(n.fillReference=r.getOrCreateGradient(n,"fill",e)),n.stroke&&"object"===x(n.stroke)&&"gradient"===n.stroke.type&&(n.strokeReference=r.getOrCreateGradient(n,"stroke",e))},clear:function(){n={}}};return r}(u.children);return l.element=function(){return t},l.root=function(){return e},l.appendTo=function(n){return t||((t=n.ownerDocument.createElementNS(r,"svg")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none",t.setAttribute("xmlns",r),(e=n.ownerDocument.createElementNS(r,"g")).style.pointerEvents="auto",t.appendChild(e)),n.appendChild(t),t},l.render=function(i){if(!t)return!1;var r=c.scaleRatio.x,d=c.scaleRatio.y;s&&(t.style.left="".concat(c.computedPhysical.x,"px"),t.style.top="".concat(c.computedPhysical.y,"px"),t.setAttribute("width",c.computedPhysical.width),t.setAttribute("height",c.computedPhysical.height)),f.clear(),h.clear(),u.children.length=0;var p={type:"container",children:Array.isArray(i)?O(i).concat([u]):i,transform:c.edgeBleed.bool?"translate(".concat(c.edgeBleed.left*r,", ").concat(c.edgeBleed.top*d,")"):""};1===r&&1===d||(p.transform+="scale(".concat(r,", ").concat(d,")"));var g=a({items:[p],on:{create:[function(t){t.node.fillReference=void 0,t.node.strokeReference=void 0},f.onCreate,h.onCreate,Vh(l.measureText),of(l)]}}),y=!n||!g.equals(n),v=s||y;return v&&(l.clear(),o.render(g.children,e)),s=!1,n=g,v},l.itemsAt=function(t){return n?n.getItemsFrom(t):[]},l.findShapes=function(t){return n?n.findShapes(t):[]},l.clear=function(){if(!e)return l;n=null;var i=e.cloneNode(!1);return t.replaceChild(i,e),e=i,l},l.destroy=function(){t&&t.parentNode&&t.parentNode.removeChild(t),e=t=null},l.size=function(t){if(t){var e=rf(t);JSON.stringify(c)!==JSON.stringify(e)&&(s=!0,c=e)}return c},l}var Tf=function(){},Ef={},zf=[],Of=[];function jf(t,e){var n,i,r,a,o=Of;for(a=arguments.length;2<a--;)zf.push(arguments[a]);for(e&&null!=e.children&&(zf.length||zf.push(e.children),delete e.children);zf.length;)if((i=zf.pop())&&void 0!==i.pop)for(a=i.length;a--;)zf.push(i[a]);else"boolean"==typeof i&&(i=null),(r="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(r=!1)),r&&n?o[o.length-1]+=i:o===Of?o=[i]:o.push(i),n=r;var s=new Tf;return s.nodeName=t,s.children=o,s.attributes=null==e?void 0:e,s.key=null==e?void 0:e.key,s}function Df(t,e){for(var n in e)t[n]=e[n];return t}function qf(t,e){null!=t&&("function"==typeof t?t(e):t.current=e)}var Pf="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,If=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,Ff=[];function Bf(t){!t._dirty&&(t._dirty=!0)&&1==Ff.push(t)&&Pf(Lf)}function Lf(){for(var t;t=Ff.pop();)t._dirty&&od(t)}function Wf(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function Vf(t){var e=Df({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===e[i]&&(e[i]=n[i]);return e}function Hf(t){var e=t.parentNode;e&&e.removeChild(t)}function Uf(t,e,n,i,r){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)qf(n,null),qf(i,t);else if("class"!==e||r)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof n||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof n)for(var a in n)a in i||(t.style[a]="");for(var a in i)t.style[a]="number"==typeof i[a]&&!1===If.test(a)?i[a]+"px":i[a]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var o=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?n||t.addEventListener(e,$f,o):t.removeEventListener(e,$f,o),(t._listeners||(t._listeners={}))[e]=i}else if("list"!==e&&"type"!==e&&!r&&e in t){try{t[e]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==e||t.removeAttribute(e)}else{var s=r&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function $f(t){return this._listeners[t.type](t)}var Yf=[],Xf=0,Jf=!1,Kf=!1;function Gf(){for(var t;t=Yf.shift();)t.componentDidMount&&t.componentDidMount()}function Zf(t,e,n,i,r,a){Xf++||(Jf=null!=r&&void 0!==r.ownerSVGElement,Kf=null!=t&&!("__preactattr_"in t));var o=Qf(t,e,n,i,a);return r&&o.parentNode!==r&&r.appendChild(o),--Xf||(Kf=!1,a||Gf()),o}function Qf(t,e,n,i,r){var a=t,o=Jf;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=e&&(t.nodeValue=e):(a=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(a,t),td(t,!0))),a.__preactattr_=!0,a;var s,c,l=e.nodeName;if("function"==typeof l)return function(t,e,n,i){var r=t&&t._component,a=r,o=t,s=r&&t._componentConstructor===e.nodeName,c=s,l=Vf(e);for(;r&&!c&&(r=r._parentComponent);)c=r.constructor===e.nodeName;r&&c&&(!i||r._component)?(ad(r,l,3,n,i),t=r.base):(a&&!s&&(sd(a),t=o=null),r=id(e.nodeName,l,n),t&&!r.nextBase&&(r.nextBase=t,o=null),ad(r,l,1,n,i),t=r.base,o&&t!==o&&(o._component=null,td(o,!1)));return t}(t,e,n,i);if(Jf="svg"===l||"foreignObject"!==l&&Jf,l=String(l),(!t||!Wf(t,l))&&(s=l,(c=Jf?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,a=c,t)){for(;t.firstChild;)a.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(a,t),td(t,!0)}var u=a.firstChild,h=a.__preactattr_,f=e.children;if(null==h){h=a.__preactattr_={};for(var d=a.attributes,p=d.length;p--;)h[d[p].name]=d[p].value}return!Kf&&f&&1===f.length&&"string"==typeof f[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||null!=u)&&function(t,e,n,i,r){var a,o,s,c,l,u=t.childNodes,h=[],f={},d=0,p=0,g=u.length,y=0,v=e?e.length:0;if(0!==g)for(var m=0;m<g;m++){var x=u[m],b=x.__preactattr_,w=v&&b?x._component?x._component.__key:b.key:null;null!=w?(d++,f[w]=x):(b||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(h[y++]=x)}if(0!==v)for(var m=0;m<v;m++){c=e[m],l=null;var w=c.key;if(null!=w)d&&void 0!==f[w]&&(l=f[w],f[w]=void 0,d--);else if(p<y)for(a=p;a<y;a++)if(void 0!==h[a]&&(k=o=h[a],_=r,"string"==typeof(M=c)||"number"==typeof M?void 0!==k.splitText:"string"==typeof M.nodeName?!k._componentConstructor&&Wf(k,M.nodeName):_||k._componentConstructor===M.nodeName)){l=o,h[a]=void 0,a===y-1&&y--,a===p&&p++;break}l=Qf(l,c,n,i),s=u[m],l&&l!==t&&l!==s&&(null==s?t.appendChild(l):l===s.nextSibling?Hf(s):t.insertBefore(l,s))}var k,M,_;if(d)for(var m in f)void 0!==f[m]&&td(f[m],!1);for(;p<=y;)void 0!==(l=h[y--])&&td(l,!1)}(a,f,n,i,Kf||null!=h.dangerouslySetInnerHTML),function(t,e,n){var i;for(i in n)e&&null!=e[i]||null==n[i]||Uf(t,i,n[i],n[i]=void 0,Jf);for(i in e)"children"===i||"innerHTML"===i||i in n&&e[i]===("value"===i||"checked"===i?t[i]:n[i])||Uf(t,i,n[i],n[i]=e[i],Jf)}(a,e.attributes,h),Jf=o,a}function td(t,e){var n=t._component;n?sd(n):(null!=t.__preactattr_&&qf(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||Hf(t),ed(t))}function ed(t){for(t=t.lastChild;t;){var e=t.previousSibling;td(t,!0),t=e}}var nd=[];function id(t,e,n){var i,r=nd.length;for(t.prototype&&t.prototype.render?(i=new t(e,n),cd.call(i,e,n)):((i=new cd(e,n)).constructor=t,i.render=rd);r--;)if(nd[r].constructor===t)return i.nextBase=nd[r].nextBase,nd.splice(r,1),i;return i}function rd(t,e,n){return this.constructor(t,n)}function ad(t,e,n,i,r){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,i)),i&&i!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=i),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&!1===Ef.syncComponentUpdates&&t.base?Bf(t):od(t,1,r)),qf(t.__ref,t))}function od(t,e,n,i){if(!t._disable){var r,a,o,s=t.props,c=t.state,l=t.context,u=t.prevProps||s,h=t.prevState||c,f=t.prevContext||l,d=t.base,p=t.nextBase,g=d||p,y=t._component,v=!1,m=f;if(t.constructor.getDerivedStateFromProps&&(c=Df(Df({},c),t.constructor.getDerivedStateFromProps(s,c)),t.state=c),d&&(t.props=u,t.state=h,t.context=f,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(s,c,l)?v=!0:t.componentWillUpdate&&t.componentWillUpdate(s,c,l),t.props=s,t.state=c,t.context=l),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!v){r=t.render(s,c,l),t.getChildContext&&(l=Df(Df({},l),t.getChildContext())),d&&t.getSnapshotBeforeUpdate&&(m=t.getSnapshotBeforeUpdate(u,h));var x,b,w=r&&r.nodeName;if("function"==typeof w){var k=Vf(r);(a=y)&&a.constructor===w&&k.key==a.__key?ad(a,k,1,l,!1):(x=a,t._component=a=id(w,k,l),a.nextBase=a.nextBase||p,a._parentComponent=t,ad(a,k,0,l,!1),od(a,1,n,!0)),b=a.base}else o=g,(x=y)&&(o=t._component=null),(g||1===e)&&(o&&(o._component=null),b=Zf(o,r,l,n||!d,g&&g.parentNode,!0));if(g&&b!==g&&a!==y){var M=g.parentNode;M&&b!==M&&(M.replaceChild(b,g),x||(g._component=null,td(g,!1)))}if(x&&sd(x),(t.base=b)&&!i){for(var _=t,S=t;S=S._parentComponent;)(_=S).base=b;b._component=_,b._componentConstructor=_.constructor}}for(!d||n?Yf.push(t):v||t.componentDidUpdate&&t.componentDidUpdate(u,h,m);t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);Xf||i||Gf()}}function sd(t){var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?sd(n):e&&(null!=e.__preactattr_&&qf(e.__preactattr_.ref,null),Hf(t.nextBase=e),nd.push(t),ed(e)),qf(t.__ref,null)}function cd(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function ld(){var t,e,n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).createElement,i=void 0===n?document.createElement.bind(document):n,r=rf(),a=af();return a.element=function(){return t},a.root=function(){return t},a.appendTo=function(e){return t||((t=i("div")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none"),e.appendChild(t),t},a.render=function(n){return!!t&&(t.style.left="".concat(r.computedPhysical.x,"px"),t.style.top="".concat(r.computedPhysical.y,"px"),t.style.width="".concat(r.computedPhysical.width,"px"),t.style.height="".concat(r.computedPhysical.height,"px"),i=Array.isArray(n)?jf("div",null,n):n,e=Zf(e,i,{},!1,t,!1),!0);var i},a.renderArgs=[jf],a.clear=function(){if(t){for(var n=t.firstChild;n;)t.removeChild(n),n=t.firstChild;e=null}return a},a.destroy=function(){t&&t.parentElement&&t.parentElement.removeChild(t),e=t=null},a.size=function(t){return t&&(r=rf(t)),r},a}Df(cd.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=Df(Df({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),Bf(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),od(this,2)},render:function(){}});var ud=[function(t){t.renderer("svg",Af)},function(t){t.renderer("canvas",uf)},function(t){t.renderer("dom",ld)}],hd={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},fd=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.level,i=void 0===n?hd.OFF:n,r=e.pipe,a=void 0===r?console:r,o=i,s=(M(t={},hd.OFF,function(){}),M(t,hd.ERROR,function(){return a.error.apply(a,arguments)}),M(t,hd.WARN,function(){return a.warn.apply(a,arguments)}),M(t,hd.INFO,function(){return a.info.apply(a,arguments)}),M(t,hd.DEBUG,function(){return a.log.apply(a,arguments)}),t),c=function(t){if(t&&!(o<t)){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(s[t]||s[hd.DEBUG]).apply(void 0,n)}};return{log:c,error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[hd.ERROR].concat(e))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[hd.WARN].concat(e))},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[hd.INFO].concat(e))},debug:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[hd.DEBUG].concat(e))},level:function(t){return"number"==typeof t&&(o=t),o},LOG_LEVEL:hd}};var dd=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=fd(e.logger),r={component:oe(n.component,"component",i),data:oe(n.data,"data",i),formatter:oe(n.formatter,"formatter",i),interaction:oe(n.interaction,"interaction",i),renderer:ns(n.renderer,"renderer",i),scale:oe(n.scale,"scale",i),symbol:oe(n.symbol,"symbol",i),logger:i};function a(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t({palettes:e.palettes.concat(n.palettes||[]),style:v({},e.style,n.style),logger:n.logger||e.logger,renderer:n.renderer||e.renderer},r)}return e.renderer&&e.renderer.prio&&r.renderer.default(e.renderer.prio[0]),a.use=function(t){return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t(2<arguments.length?arguments[2]:void 0,e)}(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r)},a.chart=function(t){return es(t,{registries:r,logger:i,style:e.style,palettes:e.palettes})},a.config=function(){return e},Object.keys(r).forEach(function(t){a[t]=r[t]}),a.version=m.version,a}({renderer:{prio:["svg","canvas"]},logger:{level:0},style:{"$font-family":"'Source Sans Pro', Arial, sans-serif","$font-size":"12px","$line-height":"16px","$font-size--l":"16px","$gray-100":"#ffffff","$gray-98":"#f9f9f9","$gray-95":"#f2f2f2","$gray-90":"#e6e6e6","$gray-35":"#595959","$gray-30":"#4d4d4d","$gray-25":"#404040","$gray-20":"#333333","$border-95":"rgba(255, 255, 255, 0.05)","$border-90":"rgba(255, 255, 255, 0.1)","$border-80":"rgba(255, 255, 255, 0.2)","$border-20":"rgba(0, 0, 0, 0.2)","$border-10":"rgba(0, 0, 0, 0.1)","$border-5":"rgba(0, 0, 0, 0.05)","$primary-blue":"#3F8AB3","$primary-green":"#6CB33F","$primary-red":"#DC423F","$primary-orange":"#EF960F","$spacing--s":4,$spacing:8,"$spacing--l":12,"$font-color":"$gray-35","$font-color--inverted":"$gray-90","$guide-color":"$gray-90","$guide-color--inverted":"$gray-35",$border:"$border-80","$border--inverted":"$border-10",$shape:{fill:"$primary-blue",strokeWidth:1,stroke:"$border"},"$shape-outline":{stroke:"$primary-blue",strokeWidth:2},"$shape-guide":{stroke:"$guide-color",strokeWidth:1},"$shape-guide--inverted":{"@extend":"$shape-guide",stroke:"$guide-color--inverted"},$label:{fontSize:"$font-size",fontFamily:"$font-family",fill:"$font-color"},"$label--inverted":{$extend:"$label",fill:"$font-color--inverted"},"$label-overlay":{fontSize:"$font-size--l",fontFamily:"$font-family",fill:"$gray-100",color:"$font-color",stroke:"$guide-color--inverted",strokeWidth:1,borderRadius:4},$title:{"@extend":"$label",fontSize:"$font-size--l"},"$guide-line":{strokeWidth:1,stroke:"$guide-color"},"$guide-line--minor":{strokeWidth:1,stroke:"$gray-95"},"$padding--s":{left:"$spacing--s",right:"$spacing--s",top:"$spacing--s",bottom:"$spacing--s"},$padding:{left:"$spacing",right:"$spacing",top:"$spacing",bottom:"$spacing"},"$selection-area-target":{fill:"$primary-green",strokeWidth:0,opacity:.2}},palettes:[{key:"categorical",colors:[["#a54343","#d76c6c","#ec983d","#ecc43d","#f9ec86","#cbe989","#70ba6e","#578b60","#79d69f","#26a0a7","#138185","#65d3da"]]},{key:"diverging",colors:[["#3d52a1","#3a89c9","#77b7e5","#b4ddf7","#e6f5fe","#ffe3aa","#f9bd7e","#ed875e","#d24d3e","#ae1c3e"]]},{key:"sequential",colors:[["rgb(180,221,212)","rgb(34, 83, 90)"]]}]},{component:is,data:ys,formatter:ri,interaction:vs,renderer:ns(),scale:ka,symbol:wo});return pu.forEach(dd.use),ud.forEach(dd.use),[].forEach(dd.use),dd})},1125:function(t,e,n){(function(e){!function(e,n){t.exports=n()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=Object.prototype.hasOwnProperty,h=Object.prototype.toString,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===h.call(t)},g=function(t){if(!t||"[object Object]"!==h.call(t))return!1;var e,n=u.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&u.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;for(e in t);return void 0===e||u.call(t,e)},y=function(t,e){f&&"__proto__"===e.name?f(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},v=function(t,e){if("__proto__"===e){if(!u.call(t,e))return;if(d)return d(t,e).value}return t[e]},m=function t(){var e,n,i,r,a,o,s=arguments[0],c=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},c=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});c<l;++c)if(null!=(e=arguments[c]))for(n in e)i=v(s,n),s!==(r=v(e,n))&&(u&&r&&(g(r)||(a=p(r)))?(o=a?(a=!1,i&&p(i)?i:[]):i&&g(i)?i:{},y(s,{name:n,newValue:t(u,o,r)})):void 0!==r&&y(s,{name:n,newValue:r}));return s};function x(t,e,n){if(!t)return-1;var i=n.cache,r=t.origin?t.origin():null;r&&(t=r);var a=i.fields.indexOf(t),o=-1,s=-1;if(-1===a)for(var c=0;c<i.wrappedFields.length;c++)if(s=i.wrappedFields[c].attrDims.map(function(t){return t.instance}).indexOf(t),o=i.wrappedFields[c].attrExps.map(function(t){return t.instance}).indexOf(t),-1!==s||-1!==o){a=c;break}return(a-=e.qArea.qLeft)<0||a>=e.qArea.qWidth?-1:0<=s?function(t){return t[a].qAttrDims.qValues[s]}:0<=o?function(t){return t[a].qAttrExps.qValues[o]}:function(t){return t[a]}}function b(t,e,n){var i=n.key,r={value:"function"==typeof t.value?t.value(e):void 0!==t.value?t.value:e};return r.label="function"==typeof t.label?t.label(e):void 0!==t.label?String(t.label):String(r.value),t.field&&(r.source={key:i,field:t.field.key()}),r}function w(t){var e=t.cache,n=t.f,i=t.mainCell,r=t.p,a=(t.prop,t.page),o=t.rowIdx,s=t.row,c=t.sourceKey,l=t.target,u=t.targetProp,h=i;if(r.field&&r.field!==n){var f=x(r.field,a,{cache:e});if(-1===f)return;h=m({qRow:o},f(s))}l[u]=b(r,h,{key:c})}function k(e,n,i,r){for(var a=Array.isArray(e)?e:[e],o=[],s=0;s<a.length;s++)if(void 0!==a[s].field){for(var c=n.raw(),u=n.key(),h="object"===t(a[s].field)?a[s].field:n.field(a[s].field),f=r.normalizeConfig(a[s],n),d=f.props,p=f.main,g=Object.keys(d),y=!!a[s].trackBy,v=t(a[s].trackBy),k={},M=[],_=[],S=0;S<c.qDataPages.length;S++){var R=x(h,c.qDataPages[S],{cache:i});if(-1!==R)for(var C=0;C<c.qDataPages[S].qMatrix.length;C++){var N=c.qDataPages[S].qArea.qTop+C,A=m({qRow:N},R(c.qDataPages[S].qMatrix[C])),T=b(p,A,{key:u});if(!(p.filter&&!p.filter(A))){for(var E=0;E<g.length;E++){var z=d[g[E]],O=z.fields||[z];z.fields&&(T[g[E]]=[]);for(var j=0;j<O.length;j++)w({cache:i,f:h,mainCell:A,p:O[j],prop:g[E],props:d,page:c.qDataPages[S],rowIdx:N,row:c.qDataPages[S].qMatrix[C],sourceKey:u,target:z.fields?T[g[E]]:T,targetProp:z.fields?j:g[E]});if(z.fields){var D=T[g[E]].map(function(t){return t.value}),q=T[g[E]].map(function(t){return t.label});T[g[E]]={value:"function"==typeof z.value?z.value(D):void 0!==z.value?z.value:D,label:"function"==typeof z.label?z.label(q):void 0!==z.label?String(z.label):String(T[g[E]].value)}}}y&&r.track({cfg:a[s],itemData:A,obj:T,target:M,tracker:k,trackType:v}),_.push(T)}}}y?o.push.apply(o,l(r.collect(M,{main:p,propsArr:g,props:d}))):o.push.apply(o,_)}return o}function M(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;0<=--i;)e+=n[i].value;else e=1;t.value=e}function _(t,e){var n,i,r,a,o,s=new N(t),c=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=S);n=l.pop();)if(c&&(n.value=+n.data.value),(r=e(n.data))&&(o=r.length))for(n.children=new Array(o),a=o-1;0<=a;--a)l.push(i=n.children[a]=new N(r[a])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(C)}function S(t){return t.children}function R(t){t.data=t.data.data}function C(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function N(t){this.data=t,this.depth=this.height=0,this.parent=null}function A(t){if("function"!=typeof t)throw new Error;return t}N.prototype=_.prototype={constructor:N,count:function(){return this.eachAfter(M)},each:function(t){var e,n,i,r,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i])}while(o.length);return this},eachAfter:function(t){for(var e,n,i,r=this,a=[r],o=[];r=a.pop();)if(o.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)a.push(e[n]);for(;r=o.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;0<=n;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;0<=--r;)n+=i[r].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return _(this).eachBefore(R)}};var T="$",E={depth:-1},z={};function O(t){return t.id}function j(t){return t.parentId}function D(t,e){"/"===t.charAt(0)&&(t=t.substring(1));for(var n,i=t.split("/"),r=e,a=0;a<i.length;a++){if("*"===i[a]&&Array.isArray(r)){var o=[];n=i.slice(a+1).join("/");for(var s=0;s<r.length;s++){var c=D(n,r[s]);Array.isArray(c)?o.push.apply(o,l(c)):o.push(c)}return o}if(!i[a]&&Array.isArray(r)){var u=new Array(r.length);n=i.slice(a+1).join("/");for(var h=0;h<r.length;h++)u[h]=D(n,r[h]);return u}i[a]in r&&(r=r[i[a]])}return r}function q(t,e,n){if(t===e)return function(t){return t};if(e<t){var i=Math.max(0,Math.min(100,t-e)),r=l(Array(i)).map(String.prototype.valueOf,"parent").join(".");return Function("node","return node.".concat(r,";"))}if(t<e){var a=Math.max(0,Math.min(100,e-t));return function(t){return function t(e,n,i){var r=[];if(!e||!e.length)return r;if(n<=0){var a=0<=i?[e[i]]:e;r.push.apply(r,l(a))}else for(var o=0;o<e.length;o++)e[o].children&&e[o].children.length&&r.push.apply(r,l(t(e[o].children,n-1,i)));return r}(t.children,a-1,n)}}return!1}var P=/^qDimensionInfo(?:\/(\d+))?/,I=/^\/?qMeasureInfo\/(\d+)/,F=/\/qAttrExprInfo\/(\d+)/,B=/\/qAttrDimInfo\/(\d+)/;function L(t){return(t.qColumnOrder&&t.qColumnOrder.length?t.qColumnOrder:t.qDimensionInfo.map(function(t,e){return e})).filter(function(e){return e<t.qDimensionInfo.length})}function W(t,e){var n=e.cube;if(!t)return-1;var i=t.origin&&t.origin()?t.origin().key():t.key(),r=!1,a=-1,o=-1,s=-1,c=-1,l=-1,u=i,h=n.qEffectiveInterColumnSortOrder,f=L(n);return P.test(u)&&(r=!0,a=+P.exec(u)[1],u=i.replace(P,"")),I.test(u)&&("K"===n.qMode?c=+I.exec(u)[1]:l=h&&-1!==h.indexOf(-1)?(c=+I.exec(u)[1],0):+I.exec(u)[1],u=u.replace(I,"")),u&&(B.exec(u)?s=+B.exec(u)[1]:F.exec(u)&&(o=+F.exec(u)[1])),{fieldDepth:(r?"S"===n.qMode?f[a]:h?h.indexOf(a):a:h&&-1!==h.indexOf(-1)?h.indexOf(-1):n.qDimensionInfo.length-("K"===n.qMode?0:1))+1,pseudoMeasureIndex:c,measureIdx:l,attrDimIdx:s,attrIdx:o}}function V(t,e){var n,i,r=q(t.fieldDepth,e.fieldDepth,e.pseudoMeasureIndex);return n=0<=e.measureIdx?function(t){return t.data.qValues[e.measureIdx]}:function(t){return t.data},0<=e.attrDimIdx?i=function(t){return t.qAttrDims.qValues[e.attrDimIdx]}:0<=e.attrIdx&&(i=function(t){return t.qAttrExps.qValues[e.attrIdx]}),{nodeFn:r,attrFn:i,valueFn:n}}function H(t,e,n){var i=n.key,r={value:"function"==typeof t.value?t.value(e):void 0!==t.value?t.value:e};return r.label="function"==typeof t.label?t.label(e):void 0!==t.label?String(t.label):String(r.value),t.field&&(r.source={key:i,field:t.field.key()}),r}function U(t){for(var e=t.propsArr,n=t.props,i=t.item,r=t.itemData,a=t.ret,o=t.sourceKey,s=0;s<e.length;s++){var c=n[e[s]],l=c.fields||[c],u=void 0,h=void 0;c.fields&&(u=[],h=[]);for(var f=function(t){var n=l[t],f=void 0,d=void 0,p=void 0,g=void 0,y=void 0,v=void 0;if(v="primitive"===n.type?(p=n.value,String(n.value)):("function"==typeof n.value&&(f=function(t){return n.value(t,i)}),"function"==typeof n.label&&(d=function(t){return n.label(t,i)}),n.accessor?(g=n.accessor(i),Array.isArray(g)?(y=g.map(n.valueAccessor),n.attrAccessor&&(y=y.map(n.attrAccessor)),f&&(p=y.map(f),f=null),d&&(v=y.map(d),d=null),p=n.reduce?n.reduce(p):p,n.reduceLabel?n.reduceLabel(v,p):String(p)):p=n.attrAccessor?n.attrAccessor(n.valueAccessor(g)):n.valueAccessor(g)):p=r),c.fields){var m=f?f(p):p;u.push(m),h.push(d&&null!=v?d(v):null!=v?v:String(m))}else{var x=f?f(p):p;a[e[s]]={value:x,label:d?d(v):null!=v?v:String(x)},n.field&&(a[e[s]].source={field:n.field.key(),key:o})}},d=0;d<l.length;d++)f(d);u&&(a[e[s]]={value:"function"==typeof c.value?c.value(u,i):u,label:"function"==typeof c.label?c.label(h,i):h})}}var $=function(t,e,n){var i="K"===t.qMode?"/qStackedDataPages/*/qData":"/qTreeDataPages/*",r="K"===t.qMode?"qSubNodes":"qNodes",a=D(i,t);return a&&a[0]?(e.tree=_(a[0],n.children||function(t){return t[r]}),e.tree):null};function Y(t){for(var e,n,i,r=t.raw().qDataPages.length?t.raw().qDataPages[0].qMatrix:[],a=(n=(e=t).raw().qColumnOrder,i=e.fields(),n&&n.length===i.length?n:i.map(function(t,e){return e})),o=t.fields(),s=t.fields().filter(function(t){return"dimension"===t.type()}).map(function(t){return a.indexOf(o.indexOf(t))}),c=t.fields().filter(function(t){return"measure"===t.type()}).map(function(t){return a.indexOf(o.indexOf(t))}),l={__root:{__id:"__root",qValues:[]}},u=0;u<r.length;u++){for(var h=r[u],f="__root",d=!1,p=0;p<s.length;p++){var g=h[s[p]],y="".concat(f,"__").concat(g.qText);l[y]||(l[y]=Object.assign({__id:y,__parent:f,qValues:[]},g),d=!0),f=y}if(d)for(var v=0;v<c.length;v++){var m=h[c[v]];l[f].qValues.push(m)}}var x=Object.keys(l).map(function(t){return l[t]});return function(){var t=O,e=j;function n(n){var i,r,a,o,s,c,l,u=n.length,h=new Array(u),f={};for(r=0;r<u;++r)i=n[r],s=h[r]=new N(i),null!=(c=t(i,r,n))&&(c+="")&&(f[l=T+(s.id=c)]=l in f?z:s);for(r=0;r<u;++r)if(s=h[r],null!=(c=e(n[r],r,n))&&(c+="")){if(!(o=f[T+c]))throw new Error("missing: "+c);if(o===z)throw new Error("ambiguous: "+c);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=E,a.eachBefore(function(t){t.depth=t.parent.depth+1,--u}).eachBefore(C),a.parent=null,0<u)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=A(e),n):t},n.parentId=function(t){return arguments.length?(e=A(t),n):e},n}().id(function(t){return t.__id}).parentId(function(t){return t.__parent})(x)}var X=function(t){for(var e=t.propsArr,n=t.props,i=t.cube,r=t.cache,a=t.itemDepthObject,o=t.f,s=0;s<e.length;s++)for(var c=n[e[s]],l=c.fields?c.fields:[c],u=0;u<l.length;u++){var h=l[u];if(h.field!==o){var f=V(a,W(h.field,{cube:i,cache:r}));h.accessor=f.nodeFn,h.valueAccessor=f.valueFn,h.attrAccessor=f.attrFn}}};function J(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0,r=e.raw(),a=e.key(),o="S"===r.qMode?Y(e):$(r,n,t);if(!o)return null;for(var s=o.height,c=[],l=0;l<=s;l++){var u=null;if(0<l)if("S"===r.qMode){var h=L(r)[l-1];u=n.fields[h]}else{var f=r.qEffectiveInterColumnSortOrder[l-1];l>r.qEffectiveInterColumnSortOrder.length&&(f=r.qDimensionInfo.length),u=n.fields[f]}var d=i.normalizeConfig(Object.assign({},t,{field:u?u.key():void 0}),e),p=d.props,g=d.main,y=Object.keys(p);c[l]={propsArr:y,props:p,main:g};var v=u?W(u,{cube:r,cache:n}):{fieldDepth:0};X({propsArr:y,props:p,cube:r,cache:n,itemDepthObject:v,f:u})}for(var m=o.copy().descendants(),x=o.descendants(),b=0;b<x.length;b++){var w=c[x[b].depth].propsArr,k=(p=c[x[b].depth].props,g=c[x[b].depth].main,m[b]),M=k.data,_=H(g,M,{key:a});U({propsArr:w,props:p,item:k,itemData:M,ret:_,sourceKey:a,isTree:!0}),x[b].data=_}return o}function K(e,n,i,r){for(var a=Array.isArray(e)?e:[e],o=[],s=0;s<a.length;s++)if(void 0!==a[s].field){var c=n.raw(),u=n.key();if(!$(c,i,e))continue;var h="object"===t(a[s].field)?a[s].field:n.field(a[s].field),f=r.normalizeConfig(a[s],n),d=f.props,p=f.main,g=Object.keys(d),y=W(h,{cube:c,cache:i}),v=V({fieldDepth:0},y),m=v.nodeFn,x=v.attrFn,b=v.valueFn;X({propsArr:g,props:d,cube:c,cache:i,itemDepthObject:y,f:h});for(var w=!!a[s].trackBy,k=t(a[s].trackBy),M={},_=[],S=m(i.tree),R=[],C=0;C<S.length;C++){var N=S[C],A=x?x(b(N)):b(N);if(!(p.filter&&!p.filter(A))){var T=H(p,A,{key:u});U({propsArr:g,props:d,item:N,itemData:A,ret:T,sourceKey:u}),w&&r.track({cfg:a[s],itemData:A,obj:T,target:_,tracker:M,trackType:k}),R.push(T)}}w?o.push.apply(o,l(r.collect(_,{main:p,propsArr:g,props:d}))):o.push.apply(o,R)}return o}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self&&self;var G,Z=(function(t){t.exports=function(t,e){if(!t||isNaN(+e))return e;var n,i,r,a,o,s,c,l,u,h,f=t.length,d=t.search(/[0-9\-\+#]/),p=0<d?t.substring(0,d):"",g=t.split("").reverse().join(""),y=g.search(/[0-9\-\+#]/),v=f-y,m=t.substring(v,v+1),x=v+("."===m||","===m?1:0),b=0<y?t.substring(x,f):"";if(t=t.substring(d,x),e="-"===t.charAt(0)?-e:+e,n=e<0?e=-e:0,i=t.match(/[^\d\-\+#]/g),r=i&&i[i.length-1]||".",a=i&&i[1]&&i[0]||",",t=t.split(r),e=+(e=e.toFixed(t[1]&&t[1].length))+"",s=t[1]&&t[1].lastIndexOf("0"),(!(l=e.split("."))[1]||l[1]&&l[1].length<=s)&&(e=(+e).toFixed(s+1)),u=t[0].split(a),t[0]=u.join(""),-1<(o=t[0]&&t[0].indexOf("0")))for(;l[0].length<t[0].length-o;)l[0]="0"+l[0];else 0==+l[0]&&(l[0]="");if((e=e.split("."))[0]=l[0],c=u[1]&&u[u.length-1].length){for(h=e[0],g="",v=h.length%c,f=h.length,x=0;x<f;x++)g+=h.charAt(x),!((x-v+1)%c)&&x<f-c&&(g+=a);e[0]=g}return e[1]=t[1]&&e[1]?r+e[1]:"","0"!==(i=e.join(""))&&""!==i||(n=!1),p+(n?"-":"")+i+b}}(G={exports:{}},G.exports),G.exports);function Q(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}var tt={3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y","-3":"m","-6":"μ","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},et=/%$/,nt=/^\(r(0[2-9]|[12]\d|3[0-6])\)/i,it=/^\(oct\)/i,rt=/^\(dec\)/i,at=/^\(hex\)/i,ot=/^\(bin\)/i,st=/^\(rom\)/i,ct=/^(\(rom\)|\(bin\)|\(hex\)|\(dec\)|\(oct\)|\(r(0[2-9]|[12]\d|3[0-6])\))/i,lt=/#|0/g;function ut(t,e,n,i){return t=t.toString(e),n[1]===n[1].toUpperCase()&&(t=t.toUpperCase()),10<t.length-t.indexOf(".")&&(t=t.slice(0,t.indexOf(".")+11)),t.replace(".",i||".")}function ht(t,e,n){var i;return nt.test(e)?t=ut(t,Number(/\d{2}/.exec(e)[0]),e,n):it.test(e)?t=ut(t,8,e,n):rt.test(e)?t=ut(t,10,e,n):at.test(e)?t=ut(t,16,e,n):ot.test(e)?t=ut(t,2,e,n):st.test(e)&&(i="",t<0&&(i="-",t=-t),t=0===(t=Math.floor(t))?"0":t<=5e5?i+(t=function(t,e){for(var n,i="",r=Number(String(t).slice(-3)),a=(t-r)/1e3,o=[0,1,4,5,9,10,40,50,90,100,400,500,900].reverse(),s=["0","I","IV","V","IX","X","XL","L","XC","C","CD","D","CM"].reverse();0<r;)for(n=0;n<o.length;n++)if(o[n]<=r){i+=s[n],r-=o[n];break}for(n=0;n<a;n++)i="M".concat(i);return e[1]!==e[1].toUpperCase()&&(i=i.toLowerCase()),i}(t,e)):e+i+t.toExponential(0)),t}function ft(t,e,n){var i=Q(t);return n?i:new RegExp(i||"",e)}function dt(t,e,n){var i,r,a,o,s,c,l,u,h,f,d,p=t.pattern;0<=p.indexOf("A")&&(p=p.replace("A",""),t.abbreviate=!0),f=e,(d=n)&&(d=Q(d)),f&&(f=Q(f)),h=new RegExp("(?:[#0]+".concat(f,")?[#0]+(?:").concat(d,"[#0]+)?")),o=(a=(a=p.match(h))?a[0]:"")?p.substr(0,p.indexOf(a)):p,s=a?p.substring(p.indexOf(a)+a.length):"",a||(a=p?"#":"##########"),e&&e===n&&(r=(i=a.split(n)).pop(),a=i.join("")+n+r,e=""),c=e,e=/,/.test(n)?"¤":",",c&&(a=a.replace(ft(c,"g"),e)),l=n,n=".",l&&(a=a.replace(ft(l,"g"),n)),u=(u=a.match(/#/g))?u.length:0;var g,y=p.split(l);y[1]&&(g=y[1].match(lt)),t.prefix=o||"",t.postfix=s||"",t.pattern=p,t.maxPrecision=g?g.length:2,t.percentage=et.test(p),t.numericPattern=a||"",t.numericRegex=new RegExp("".concat(ft(e,null,!0),"|").concat(ft(n,null,!0)),"g"),t.groupTemp=c,t.decTemp=l,t.t=e,t.d=n,t.temp=u}var pt=function(){function t(e,i,r,a,o){n(this,t),this.localeInfo=e,this.pattern=i,this.thousandDelimiter=r||",",this.decimalDelimiter=a||".",this.type=o||"numeric",this.patternSeparator=";",this.abbreviations=function(t,e){if(!t||!t.qNumericalAbbreviation)return tt;var n={};return t.qNumericalAbbreviation.split(e).forEach(function(t){var e=t.split(":");2===e.length&&(n[e[0]]=e[1])}),n}(e,this.patternSeparator),this.prepare()}return r(t,[{key:"clone",value:function(){var e=new t(this.localeInfo,this.pattern,this.thousandDelimiter,this.decimalDelimiter,this.type);return e.subtype=this.subtype,e}},{key:"format",value:function(t,e,n,i){return this.prepare(e,n,i),this.formatValue(t)}},{key:"prepare",value:function(t,e,n){var i;void 0===t&&(t=this.pattern),void 0===e&&(e=this.thousandDelimiter),void 0===n&&(n=this.decimalDelimiter),t?(this._prepared={positive:{d:n,t:e,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""},negative:{d:n,t:e,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""},zero:{d:n,t:e,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""}},i=this._prepared,t=t.split(this.patternSeparator),i.positive.pattern=t[0],i.negative.pattern=t[1],i.zero.pattern=t[2],ct.test(t[0])&&(i.positive.isFunctional=!0),t[1]?ct.test(t[1])&&(i.negative.isFunctional=!0):i.negative=!1,t[2]?ct.test(t[2])&&(i.zero.isFunctional=!0):i.zero=!1,i.positive.isFunctional||dt(i.positive,e,n),i.negative&&!i.negative.isFunctional&&dt(i.negative,e,n),i.zero&&!i.zero.isFunctional&&dt(i.zero,e,n)):this._prepared={pattern:!1}}},{key:"formatValue",value:function(t){var e,n,i,r,a,o,s,c,l,u=this._prepared,h="",f="",d=t;if(isNaN(t))return"".concat(d);if(t=+t,!1===u.pattern)return t.toString();if(0===t&&u.zero)return(u=u.zero).pattern;if(t<0&&u.negative?(u=u.negative,t=-t):u=u.positive,a=u.d,o=u.t,u.isFunctional)t=ht(t,u.pattern,a);else{if(u.percentage&&(t*=100),u.abbreviate){var p,g,y=Object.keys(this.abbreviations).map(function(t){return parseInt(t,10)}).sort(function(t,e){return t-e}),v=y[0];for(s=0,n=Number(Number(t).toExponential().split("e")[1]);v<=n&&s<y.length;)v=y[++s];0<s&&(p=y[s-1]),p&&0<n&&0<p?g=p:(n<0&&p<0||!p)&&(v<0&&v-n<=u.maxPrecision?g=v:p<=n&&!(0<v&&-n<=u.maxPrecision)&&(g=p)),g&&(h=this.abbreviations[g],t/=Math.pow(10,g))}if(i=Math.abs(t),e=u.temp,l=(c=u.numericPattern).split(a)[1],"I"===this.type&&(t=Math.round(t)),r=t,l||"#"!==c.slice(-1)[0])if(1e15<=i||0<i&&i<=1e-14)t=i?i.toExponential(15).replace(/\.?0+(?=e)/,""):"0";else{var m=Number(t.toFixed(Math.min(20,l?l.length:0)).split(".")[0]),x=c.split(a)[0];if(t=Z(x+=a,m)||"0",l){var b=Math.max(0,Math.min(14,l.length)),w=l.replace(/#+$/,"").length,k=("I"===this.type?0:i%1).toFixed(b).slice(2).replace(/0+$/,"");for(s=k.length;s<w;s++)k+="0";k&&(t+=a+k)}else 0===m&&(r=0)}else if(i>=Math.pow(10,e)||i<1||i<1e-4)0===t?t="0":i<1e-4||1e20<=i?(t=(t=r.toExponential(Math.max(1,Math.min(14,e))-1)).replace(/\.?0+(?=e)/,""),f=""):0<=(t=t.toPrecision(Math.max(1,Math.min(14,e)))).indexOf(".")&&(t=(t=t.replace(t.indexOf("e")<0?/0+$/:/\.?0+(?=e)/,"")).replace(".",a));else{for(c+=a,e=Math.max(0,Math.min(20,e-Math.ceil(Math.log(i)/Math.log(10)))),s=0;s<e;s++)c+="#";t=Z(c,t)}t=t.replace(u.numericRegex,function(t){return t===o?u.groupTemp:t===a?u.decTemp:""}),r<0&&!/^-/.test(t)&&(t="-".concat(t))}return u.prefix+t+f+h+u.postfix}}],[{key:"getStaticFormatter",value:function(){return{prepare:function(){},formatValue:function(t){return"".concat(t)}}}}]),t}();function gt(t){var e,n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=i.size,a=void 0===r?5e3:r,o=i.multipleArguments,s=void 0!==o&&o,c=i.toKey,l=void 0===c?function(t){return t}:c,u=Object.create(null),h=Object.create(null),f=0,d=0;return(e=s?function(){return n=l.apply(void 0,arguments),e.has(n)?e.get(n):e.set(n,t.apply(void 0,arguments))}:function(i){return n=l(i),e.has(n)?e.get(n):e.set(n,t(i))}).set=function(t,e){return a<=f&&(delete u[h[d]],delete h[d],f--,d++),u[t]=e,h[f]=t,f++,e},e.get=function(t){return u[t]},e.has=function(t){return t in u},e.clear=function(){u=Object.create(null),h=Object.create(null),d=f=0},e.size=function(){return f},e}function yt(t,e,n,i,r){var a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(pt,e)}(r,t,e,n,i),o=gt(a.formatValue.bind(a),{toKey:function(t){return isNaN(t)?t:+t}});function c(t){return o(t)}return c.format=function(t,e,n,i){return o.clear(),a.format(e,t,n,i)},c.pattern=function(t){return t&&(o.clear(),a.pattern=t,a.prepare()),a.pattern},c}var vt={AUTO:"U",INTEGER:"I",NUMBER:"R",FIXED_TO:"F",MONEY:"M",DATE:"D",TIME:"T",DATE_TIME:"TS",INTERVAL:"IV"},mt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],xt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],bt=["January","February","March","April","May","June","July","August","September","October","November","December"],wt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function kt(t,e){for(var n=t.length;n<e;n++)t="0".concat(t);return t}function Mt(t){var e=t.toString().split(".");return e[1]?e=Number("0.".concat(e[1])):0}function _t(t,e){var n,i,r,a,o,s,c=(r=24*Mt(i=t),a=60*Mt(r),o=60*Mt(a),s=1e3*Mt(o),{d:Math.floor(i),h:Math.floor(r),m:Math.floor(a),s:Math.floor(o),f:Math.round(s)}),l=c.d,u=c.h,h=c.m,f=c.s,d=c.f,p=0;/w+|t+/gi.test(e)&&(n=new Date(Date.UTC(1899,11,30+Math.floor(t),0,0,Math.round(86400*(t-Math.floor(t))))),isNaN(n.getTime())&&(n=null)),/D+/gi.test(e)||(u+=24*l),/h+/gi.test(e)||(h+=60*u),/m+/gi.test(e)||(f+=60*h),/w+/gi.test(e)&&(p=n?n.getDay()-1:0)<0&&(p=6);var g="";return n&&(g=12<=n.getUTCHours()?"pm":"am"),{year:0,month:0,day:p,date:l,h:u,m:h,s:f,f:d,t:g}}var St=function(){function t(e,i,r){n(this,t);var o,s=e||{};(s.qCalendarStrings||(s.qCalendarStrings={qLongDayNames:mt,qDayNames:xt,qLongMonthNames:bt,qMonthNames:wt}),this.localeInfo=s,this.locale_days=s.qCalendarStrings.qLongDayNames.slice(),this.locale_days_abbr=s.qCalendarStrings.qDayNames.slice(),this.locale_months=s.qCalendarStrings.qLongMonthNames.slice(),this.locale_months_abbr=s.qCalendarStrings.qMonthNames.slice(),i)||(i=(a(o={},vt.TIME,s.qTimeFmt||"hh:mm:ss"),a(o,vt.DATE,s.qDateFmt||"YYYY-MM-DD"),a(o,vt.DATE_TIME,s.qTimestampFmt||"YYYY-MM-DD hh:mm:ss"),o)[r]);this.pattern=i}return r(t,[{key:"clone",value:function(){var e=new t(this.localeInfo,this.pattern);return e.subtype=this.subtype,e}},{key:"format",value:function(t,e){e||(e=this.pattern?this.pattern:"YYYY-MM-DD hh:mm:ss"),e=e.replace(/\[.+]|\[|]/g,"");var n,i,r,a,o,s=/t+/gi.test(e);n=t instanceof Date?(r=s,a=(i=t).getUTCHours(),o=i.getUTCDay()-1,r&&((a%=12)||(a=12)),o<0&&(o=6),{year:i.getUTCFullYear(),month:i.getUTCMonth(),day:o,date:i.getUTCDate(),h:a,m:i.getUTCMinutes(),s:i.getUTCSeconds(),f:i.getUTCMilliseconds(),t:12<=i.getUTCHours()?"pm":"am"}):(t<0&&(t=-t,e="-".concat(e)),_t(t,e));var c,l,u=(c=this,l=n,{"Y+|y+":{Y:"".concat(Number("".concat(l.year).slice(-2))),YY:kt("".concat(l.year).slice(-2),2),YYY:kt("".concat(l.year).slice(-3),3),def:function(t){return kt("".concat(l.year),t.length)}},"M+":{M:l.month+1,MM:kt("".concat(l.month+1),2),MMM:c.locale_months_abbr[l.month],def:c.locale_months[l.month]},"W+|w+":{W:l.day,WW:kt("".concat(l.day),2),WWW:c.locale_days_abbr[l.day],def:c.locale_days[l.day]},"D+|d+":{D:l.date,def:function(t){return kt("".concat(l.date),t.length)}},"h+|H+":{h:l.h,def:function(t){return kt("".concat(l.h),t.length)}},"m+":{m:l.m,def:function(t){return kt("".concat(l.m),t.length)}},"s+|S+":{s:l.s,def:function(t){return kt("".concat(l.s),t.length)}},"f+|F+":{def:function(t){var e="".concat(l.f),n=t.length-e.length;if(0<n)for(var i=0;i<n;i++)e+="0";else n<0&&(e=e.slice(0,t.length));return e}},"t{1,2}|T{1,2}":{def:function(t){var e=l.t;return t[0].toUpperCase()===t[0]&&(e=e.toUpperCase()),e.slice(0,t.length)}}}),h=[];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&h.push(f);var d=new RegExp(h.join("|"),"g");return e.replace(d,function(t){var e,n,i;for(n in u)if(Object.prototype.hasOwnProperty.call(u,n)&&(e=new RegExp(n)).test(t))break;if(!e)return"";for(var r in u[n])if(r===t||r.toLowerCase()===t){void 0===(i=u[n][r])&&(i=u[n][r.toLowerCase()]);break}return void 0===i&&(i=u[n].def),"function"==typeof i&&(i=i(t)),i})}}]),t}();function Rt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(St,e)}var Ct=864e5;function Nt(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"TS",i=Rt(2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e,n),r=gt(i.format.bind(i),{toKey:function(e){return"object"===t(e)?e.getTime():e}});function a(t){return n!==vt.INTERVAL?(e=t,new Date(Date.UTC(1899,11,30+Math.floor(e),0,0,0,Math.round(Ct*(e-Math.floor(e)))))):t;var e}function o(t){return t=a(t),r(t)}return o.format=function(t,e){return r.clear(),e=a(e),i.format(e,t)},o.locale=function(a){return i=Rt(a,e,n),r=gt(i.format.bind(i),{toKey:function(e){return"object"===t(e)?e.getTime():e}}),this},o.qtype=function(t){return void 0!==t&&(n=t,r.clear()),n},o}function At(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.meta,i=e.id,r=e.key,a=e.localeInfo,o=e.fieldExtractor,s=e.value,c=e.type,l=e.sourceField,u=s||("dimension"===c?function(t){return t.qElemNo}:function(t){return t.qValue}),h="dimension"===c?"first":"avg",f=function(t,e){if(t&&t.qNumFormat&&-1!==["D","T","TS","IV"].indexOf(t.qNumFormat.qType))return Nt(t.qNumFormat.qFmt,t.qNumFormat.qType,e);var n="#",i=e&&void 0!==e.qThousandSep?e.qThousandSep:",",r=e&&void 0!==e.qDecimalSep?e.qDecimalSep:".",a="U",o=t&&!!t.qIsAutoFormat;return((o=!t||!t.qNumFormat||(n=t.qNumFormat.qFmt||n,i=t.qNumFormat.qThou||i,r=t.qNumFormat.qDec||r,a=t.qNumFormat.qType||a,o&&-1===["M"].indexOf(t.qNumFormat.qType)))||"U"===a)&&(n="#".concat(r,"##A"),a="U"),yt(n,i,r,a,e)}(n,a),d={id:function(){return i},key:function(){return r},raw:function(){return n},title:function(){return n.qFallbackTitle||n.label},type:function(){return c},origin:function(){return l},items:function(){return t||(t=o(d)),t},min:function(){return n.qMin},max:function(){return n.qMax},value:u,label:function(t){return t.qText||""},reduce:h,reduceLabel:"dimension"===c?"first":function(t,e){return f(e)},formatter:function(){return f},tags:function(){return n.qTags}};return d}function Tt(t,e,n,i,r){return(e[t]||[]).map(function(e,a){var o="".concat(i?"".concat(i,"/"):"").concat(t,"/").concat(a),s={instance:At(m({id:"".concat(n?"".concat(n,"/"):"").concat(o),key:o,meta:e},r))};return s.attrDims=Tt("qAttrDimInfo",e,n,o,m({},r,{value:function(t){return t.qElemNo},type:"dimension"})),s.attrExps=Tt("qAttrExprInfo",e,n,o,m({},r,{value:function(t){return t.qNum},type:"measure"})),s.measures=Tt("qMeasureInfo",e,n,o,m({},r,{value:function(t){return t.qValue},type:"measure"})),s})}function Et(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=i.key,o=i.data,s=i.config,c=void 0===s?{}:s,u={fields:[],wrappedFields:[],allFields:[],virtualFields:[]},h=o;if(!h)throw new Error('Missing "data" input');if(!h.qDimensionInfo)throw new Error('The "data" input is not recognized as a hypercube');var f=Et.util,d={cache:u,cube:h,localeInfo:c.localeInfo,fieldExtractor:null,pages:null,hierarchy:function(){return null},virtualFields:c.virtualFields},p={key:function(){return r},raw:function(){return h},field:function(t){return function(t,e){var n=e.cache;if("number"==typeof t)return n.fields[t];var i=n.allFields;if("function"==typeof t){for(var r=0;r<i.length;r++)if(t(i[r]))return i[r];return!1}if("string"==typeof t){for(var a=0;a<i.length;a++)if(i[a].key()===t||i[a].title()===t)return i[a]}else if(t&&-1!==i.indexOf(t))return t;throw Error("Field not found: ".concat(t))}(t,d)},fields:function(){return u.fields.slice()},extract:function(t){return d.extractor(t,p,u,f)},hierarchy:function(t){return d.hierarchy(t,p,u,f)},_cache:function(){return u}};"K"===h.qMode||"T"===h.qMode||!h.qMode&&h.qNodesOnDim?(d.extractor=K,d.hierarchy=J,d.pages="K"===h.qMode?h.qStackedDataPages:h.qTreeDataPages):"S"===h.qMode?(d.extractor=k,d.pages=h.qDataPages,d.hierarchy=J):d.extractor=function(){return[]},d.fieldExtractor=function(t){return d.extractor({field:t},p,u,f)};var g="S"===h.qMode?function(t){return t.qElemNumber}:void 0,y="S"===h.qMode?function(t){return t.qNum}:void 0;(t=u.wrappedFields).push.apply(t,l(Tt("qDimensionInfo",h,r,"",m({},d,{value:g,type:"dimension"})))),(e=u.wrappedFields).push.apply(e,l(Tt("qMeasureInfo",h,r,"",m({},d,{value:y,type:"measure"})))),u.fields=u.wrappedFields.map(function(t){return t.instance});return function t(e){e.forEach(function(e){u.allFields.push(e.instance),t(e.measures),t(e.attrDims),t(e.attrExps)})}(u.wrappedFields),(c.virtualFields||[]).forEach(function(t){var e=p.field(t.from),n=At(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){a(t,e,n[e])})}return t}({meta:e.raw(),id:"".concat(r,"/").concat(t.key),sourceField:e,fieldExtractor:function(t){return d.extractor({field:t},p,u,f)},key:t.key,type:e.type(),localeInfo:d.localeInfo,value:e.value},t.override||{}));u.virtualFields.push(n)}),(n=u.allFields).push.apply(n,l(u.virtualFields)),p}var zt=[["qHyperCube","qHyperCubeDef"],["qTreeData","qTreeDataDef"],["qDimensionInfo","qDimensions"],["qMeasureInfo","qMeasures"],["qAttrDimInfo","qAttributeDimensions"],["qAttrExprInfo","qAttributeExpressions"]],Ot=/\/qDimensionInfo(?:\/(\d+))?/,jt=/\/qMeasureInfo\/(\d+)/,Dt=/\/qAttrDimInfo\/(\d+)(?:\/(\d+))?/,qt=/\/qAttrExprInfo\/(\d+)/,Pt=/\/?qHyperCube/,It=/\/?qTreeData/,Ft=function(t){return"".concat(t.substr(0,t.indexOf("/qHyperCubeDef")+14))},Bt=function(t){return"".concat(t.substr(0,t.indexOf("/qTreeDataDef")+13))};function Lt(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,i=e.byCells,r=e.primarySource,a=[],o={},s=t.isActive(),l=!1;return t.brushes().forEach(function(t){var e=function(t,e){var n=t,i=-1,r=-1,a="",o=function(t){return t};Pt.test(t)?(a="".concat(n.substr(0,n.indexOf("qHyperCube")+10)),o=Ft):It.test(t)&&(a="".concat(n.substr(0,n.indexOf("qTreeData")+9)),o=Bt);var s=!0;if(Ot.test(t)&&(i=+Ot.exec(t)[1]),jt.test(t)&&(r=+jt.exec(t)[1]),Dt.test(t)){r=-1,i=0;var l=+Dt.exec(n)[2];isNaN(l)||(i=l,n=n.replace(/\/\d+$/,"")),s=!1}if(qt.test(t)){var u=r;if(e){r=0;var h=D(a,e);r+=(h.qMeasureInfo||[]).length,-1<i?(r=h.qDimensionInfo.slice(0,i).reduce(function(t,e){return t+e.qAttrExprInfo.length},r),i=-1):(r=h.qDimensionInfo.reduce(function(t,e){return t+e.qAttrExprInfo.length},r),r=h.qMeasureInfo.slice(0,u).reduce(function(t,e){return t+e.qAttrExprInfo.length},r)),r+=+qt.exec(n)[1]}else-1<i?(i=-1,r=+qt.exec(n)[1]):r+=+qt.exec(n)[1]+1}return zt.forEach(function(t){var e=c(t,2),i=e[0],r=e[1];n=n.replace(i,r)}),s&&(n=o(n)),n&&"/"!==n[0]&&(n="/".concat(n)),{measureIdx:r,dimensionIdx:i,path:n}}(t.id,n);if("range"===t.type&&-1<e.measureIdx&&-1<e.dimensionIdx){var s=t.brush.ranges();s.length&&(l=!0,o.multiRangeSelectTreeDataValues||(o.multiRangeSelectTreeDataValues={path:e.path,ranges:[]}),s.forEach(function(t){return o.multiRangeSelectTreeDataValues.ranges.push({qMeasureIx:e.measureIdx,qDimensionIx:e.dimensionIdx,qRange:{qMin:t.min,qMax:t.max,qMinInclEq:!0,qMaxInclEq:!0}})}))}else{if("range"===t.type&&-1<e.measureIdx){var u=t.brush.ranges();u.length&&(l=!0,o.rangeSelectHyperCubeValues||(o.rangeSelectHyperCubeValues={path:e.path,ranges:[]}),u.forEach(function(t){return o.rangeSelectHyperCubeValues.ranges.push({qMeasureIx:e.measureIdx,qRange:{qMin:t.min,qMax:t.max,qMinInclEq:!0,qMaxInclEq:!0}})}))}if("range"===t.type&&-1<e.dimensionIdx){var h=t.brush.ranges();h.length&&(l=!0,o.selectHyperCubeContinuousRange||(o.selectHyperCubeContinuousRange={path:e.path,ranges:[]}),h.forEach(function(t){return o.selectHyperCubeContinuousRange.ranges.push({qDimIx:e.dimensionIdx,qRange:{qMin:t.min,qMax:t.max,qMinInclEq:!0,qMaxInclEq:!1}})}))}if("value"===t.type&&-1<e.dimensionIdx)if(i)if(n&&n.qHyperCube&&("P"===n.qHyperCube.qMode||"T"===n.qHyperCube.qMode||"K"===n.qHyperCube.qMode)){var f=n.qHyperCube,d=f.qNoOfLeftDims,p=f.qEffectiveInterColumnSortOrder.indexOf(e.dimensionIdx);if(o.selectPivotCells||(o.selectPivotCells={path:e.path,cells:[]}),t.id===r||!r&&0===o.selectPivotCells.cells.length){var g=t.brush.values().map(function(t){return+t}).filter(function(t){return!isNaN(t)});(0===d||d<=p)&&-1<d?g.forEach(function(t){o.selectPivotCells.cells.push({qType:"T",qCol:t,qRow:p-d})}):g.forEach(function(t){o.selectPivotCells.cells.push({qType:"L",qCol:e.dimensionIdx,qRow:t})}),l=!!o.selectPivotCells.cells.length}}else o.selectHyperCubeCells||(o.selectHyperCubeCells={path:e.path,cols:[]}),o.selectHyperCubeCells.cols.push(e.dimensionIdx),t.id!==r&&(r||o.selectHyperCubeCells.values)||(o.selectHyperCubeCells.values=t.brush.values().map(function(t){return+t}).filter(function(t){return!isNaN(t)}),l=!!o.selectHyperCubeCells.values.length);else{var y=t.brush.values().map(function(t){return+t}).filter(function(t){return!isNaN(t)});l=!!y.length,a.push({params:[e.path,e.dimensionIdx,y,!1],method:"selectHyperCubeValues"})}}}),!l&&s?[{method:"resetMadeSelections",params:[]}]:(o.rangeSelectHyperCubeValues&&a.push({method:"rangeSelectHyperCubeValues",params:[o.rangeSelectHyperCubeValues.path,o.rangeSelectHyperCubeValues.ranges,[],!0]}),o.selectHyperCubeContinuousRange&&a.push({method:"selectHyperCubeContinuousRange",params:[o.selectHyperCubeContinuousRange.path,o.selectHyperCubeContinuousRange.ranges]}),o.selectHyperCubeCells&&a.push({method:"selectHyperCubeCells",params:[o.selectHyperCubeCells.path,o.selectHyperCubeCells.values,o.selectHyperCubeCells.cols]}),o.selectPivotCells&&a.push({method:"selectPivotCells",params:[o.selectPivotCells.path,o.selectPivotCells.cells]}),o.multiRangeSelectTreeDataValues&&a.push({method:"multiRangeSelectTreeDataValues",params:[o.multiRangeSelectTreeDataValues.path,o.multiRangeSelectTreeDataValues.ranges]}),a)}function Wt(t){Et.util=t.data("matrix").util,t.data("q",Et),t.formatter("q-number",yt),t.formatter("q-time",Nt)}return Wt.qBrushHelper=Lt,Wt.selections=Lt,Wt})}).call(this,n(15))},1301:function(t,e,n){!function(e,n){t.exports=n()}(this,function(){"use strict";var t={click:"Tap",Click:"Tap",tap:"Tap",pan:"Pan",swipe:"Swipe",rotate:"Rotate",press:"Press",pinch:"Pinch"};function e(e){return t[e]||e}function n(t,n,i){var r,a,o,s,c=[],l=!0;function u(){"function"==typeof r.enable&&(r.enable=r.enable.bind(a)()),r.enable&&(r.gestures.forEach(function(t){t.options=t.options||{},void 0===t.options.enable&&(t.options.enable=!0),"function"==typeof t.options.enable&&(t.options.enable=t.options.enable.bind(a));var n=e(t.type);Hammer&&Hammer[n]&&(t.options.event=t.options.event||t.type.toLowerCase(),(o=o||new Hammer.Manager(i)).add(new Hammer[n](t.options)),Object.keys(t.events).forEach(function(e){t.events[e]=t.events[e].bind(a),o.on(e,t.events[e])}),c.push(t))}),r.gestures.forEach(function(t){var n=e(t.type);Hammer&&Hammer[n]&&(t.recognizeWith&&o.get(t.options.event).recognizeWith(t.recognizeWith.split(" ").filter(function(t){return""!==t})),t.requireFailure&&o.get(t.options.event).requireFailure(t.requireFailure.split(" ").filter(function(t){return""!==t})))}))}function h(){c.forEach(function(t){Object.keys(t.events).forEach(function(e){o.off(e,t.events[e])}),o.remove(t.options.event)}),c=[]}return{get key(){return s},set:function(e){var i;s=(i=e).key,a={chart:t,mediator:n,settings:r=i},r.gestures=r.gestures||[],void 0===r.enable&&(r.enable=!0),h(),l&&u()},off:function(){l=!1,h()},on:function(){l=!0,0===c.length&&u()},destroy:function(){h(),o&&o.destroy(),r=a=o=null}}}return function(t){t.interaction("hammer",n)}})}}]);