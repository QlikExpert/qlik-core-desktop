/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[13],{1097:function(e,i,n){"use strict";var s,a;!(s=[n(379),n(89)],a=function(e,i){function n(){return e.get().then(function(e){return e.getRestService()})}function s(e){return e}function a(e){if(e.stats.dims>9||e.stats.msrs>9)return i.resolve([]);var a={exploreSupplemental:["appNMinExplore"]};return n().then(function(i){return i.getVisRecommendations(e,true,a,[]).then(function(i){var n=[];var s=e.stats;i.appRecommendations.forEach(function(e){r(e)&&e.recAnalyses.forEach(function(e){t(e,s)&&n.push(e)})});return n})}).catch(s)}function r(e){return e&&e.group&&"insight"!==e.group}function t(e,i){if(e.isExtendedAnalysis)return false;var n=e.analysis.dims||[];var s=e.analysis.msrs||[];return n.length===i.dims&&s.length===i.msrs}function o(e){function i(e){if(e.isLibraryItem())return{libId:e.libId,cType:"eLibItem"};if(e.isFieldItem())return{field:e.name,expr:e.expr,cType:"eField"};return{expr:e.expr,cType:"eInlineExpr"}}var n={analysis:{analysis:"list",dims:e.dimensions.map(i),msrs:e.measures.map(i)}};return n}return{getChartRecommendations:a,getFallbackRecommendation:o}}.apply(i,s),void 0!==a&&(e.exports=a))},1098:function(e,i,n){"use strict";var s,a;function r(e){r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(i){return typeof i}:function e(i){return i&&"function"===typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};return r(e)}!(s=[n(54),n(878),n(1113),n(90),n(186)],a=function(e,i,n,s,a){var t={createChartDataProperties:o,findPossibleCharts:l,findChartsByAnalysis:d};return t;function o(e,i){var n=e.analysis.dims||[];var s=e.analysis.msrs||[];function a(e,i){var n=-1;e.some(function(e,s){if(e.mapLayer&&e.mapLayer===i){n=s;return true}return false});return n}function r(e,i){var r,t;var o={};if(void 0!==i.index){r=i.index;t=i.index}else if(void 0!==i.indexRange){r=i.indexRange.start;t=i.indexRange.end}else if("area"===i.key){var u=a(n,"geo_poly");if(u>-1){r=u;t=u;var c=n[u];c.relatedGeoDim&&(o.mapProperties=c.relatedGeoDim)}}else if("points"===i.key){var l=a(n,"geo_point");if(l>-1){r=l;t=l;var d=n[l];d.relatedGeoDim&&(o.mapProperties=d.relatedGeoDim)}}else{r=-1;t=-1}for(var p=r;p<=t;p++){var m=f(i.key,i.classification,i.adapt,p,n,s,o);m&&e.push(m)}return e}var t=[];i.forEach(function(e){var i={type:e.chartType,score:e.score,encodings:e.analysis.encodings.reduce(r,[]),adapt:e.adapt};t.push(i)});return t}function u(e,i,n,s,a){for(var t in e){var o=e[t];if("object"==r(o)&&null!==o){var c=o.classification;if(c){var l=Number.isNaN(+o.max)?1:o.max,f=o.min||0;if(-1!==c.indexOf("measure")){o.pseudoDim&&l>1&&i.unallocated>1&&n.unallocated++;l>1?o.indexRange={start:i.capacity,end:i.capacity+l-1}:o.index=i.capacity;i.unallocated=i.unallocated-l;i.capacity+=l;i.required+=f;s.push(o)}if(-1!==c.indexOf("dimension")&&"color"!==o.key){var d=-1!==c.indexOf("numeric"),p=false;a.dimensions.length&&(p="N"===a.dimensions[0].qDimensionType);if(!d||d&&p){l>1?o.indexRange={start:n.capacity,end:n.capacity+l-1}:o.index=n.capacity;n.unallocated=n.unallocated-l;n.capacity+=l;n.required+=f;s.push(o)}}}u(o,i,n,s,a)}}}function c(e){e=e||[];var i=e.map(function(e){if(!e.qGroupFieldDefs&&e.libId)return e.libId;var i=e.qGroupFieldDefs||[];return i.map(function(e){return a.normalizeExpression(e)}).join(",")});return s.getUnique(i).length!==i.length}function l(e,n){var s=[];e.forEach(function(e){var a=[],r=i.getChartDataDefinition(e);if(r.encodings){var t={length:n.measures?n.measures.length:0,capacity:0,required:0,unallocated:n.measures?n.measures.length:null,isSupported:function e(){return this.unallocated<1&&this.capacity>=this.length&&this.required<=this.length}},o={length:n.dimensions?n.dimensions.length:0,capacity:0,required:0,unallocated:n.dimensions?n.dimensions.length:null,isSupported:function e(){var i=r.supportsDuplicateDimensions||!c(n.dimensions);return this.unallocated<1&&this.capacity>=this.length&&this.required<=this.length&&i}};u(r.encodings,t,o,a,n);if(t.isSupported()&&o.isSupported()){var l={chartType:e,score:-1,analysis:{encodings:a}};s.push(l)}}});return s}function f(e,i,s,a,r,t,o){var u=-1!==i.indexOf("dimension");var c=u?r:t;if(c.length<=a)return;var l=new n.Value(c[a]);var f=new n.Encoding(e,i,l,s,o);return f}function d(e,n){var s=[];var a=e.analysis;i.getSupportedChartTypes().forEach(function(e){var r=i.getChartDataDefinition(e);if(r.analyses){var t=r.analyses.filter(function(e){if(e.analysis!==a.analysis)return false;if(!p(a.dims,e.dimensions))return false;if(!p(a.msrs,e.measures))return false;if(e.criteria&&!e.criteria(n))return false;var i=r.supportsDuplicateDimensions||!c(n.dimensions);if(!i)return false;return true});t.forEach(function(i){var n={chartType:e,encodings:r.encodings,score:i.score||0,adapt:i.adapt,analysis:i};s.push(n)})}});return s}function p(i,n){if(e.isObject(n)){if(m(i?i.length:0,n.min,n.max))return true}else if(m(i?i.length:0,n,n))return true;return false}function m(e,i,n){return e>=i&&e<=n}}.apply(i,s),void 0!==a&&(e.exports=a))},1099:function(e,i,n){"use strict";var s,a;!(s=[n(49)],a=function(e){var i={type:"barchart",supportsDuplicateDimensions:true,encodings:[{key:"bars",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",min:e.getFlag("BARCHART")?0:1,encodings:[{key:"height",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",pseudoDim:true,min:1,max:15},{key:"groupStack",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0"},{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"}]}],analyses:[{analysis:"rank",dimensions:1,measures:1,score:5,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"timeCycle",dimensions:1,measures:2,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",indexRange:{start:0,end:1}}]},{analysis:"trend",dimensions:1,measures:1,score:101,criteria:function e(i){var n=i.getMetaDataForDimension(0);if(n)return n.qCardinal&&n.qCardinal<5&&n.qCardinal>1;return false},encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"ytdAnalysis",dimensions:2,measures:1,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"group",classification:"dimension",index:"1"},{key:"height",classification:"measure",indexRange:{start:0,end:1}}],adapt:function e(i){i.qHyperCubeDef.qDimensions[1].qNullSuppression=true}},{analysis:"countBasedRank",dimensions:1,measures:1,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"breakdown",dimensions:1,measures:{min:2,max:15},encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",indexRange:{start:0,end:14}}]},{analysis:"breakdown",dimensions:2,measures:1,criteria:function e(i){var n=i.getMetaDataForDimension(0);if(n)return n.qCardinal&&n.qCardinal<13&&i.isPerfectHierarchy();return false},encodings:[{key:"bars",classification:"dimension",index:"1"},{key:"color",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"breakdown",dimensions:2,measures:1,criteria:function e(i){return i.isPerfectHierarchy()},encodings:[{key:"bars",classification:"dimension",index:"1"},{key:"group",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]}]};return i}.apply(i,s),void 0!==a&&(e.exports=a))},1100:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"kpi",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",classification:"measure",min:1,max:2}],analyses:[{analysis:"list",dimensions:0,measures:{min:1,max:1},score:10,encodings:[{key:"values",classification:"measure",index:0}]},{analysis:"fact",dimensions:0,measures:{min:1,max:2},score:15,encodings:[{key:"values",classification:"measure",indexRange:{start:0,end:1}}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1101:function(e,i,n){"use strict";var s,a;!(s=[n(90)],a=function(e){var i={type:"gauge",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",classification:"measure",min:1}],analyses:[{analysis:"fact",dimensions:0,measures:1,criteria:function e(i){var n=i.getMetaDataForMeasure(0);if(n){if(!i.hasOwnProperty("intermediateHyperCube")||i.intermediateHyperCube)return n.qMin>0&&n.qMax<1;if(n.classification&&"percentage"===n.classification)return true}return false},score:20,encodings:[{key:"values",classification:"measure",index:"0"}],adapt:function i(n){e.setValue(n,"measureAxis.max",1);n.disclaimerClosed=true}}]};return i}.apply(i,s),void 0!==a&&(e.exports=a))},1102:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"scatterplot",supportsDuplicateDimensions:true,encodings:[{key:"dots",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"dimension",min:1,encodings:[{key:"x-axis",classification:"measure",path:"qHyperCubeDef.qMeasures.0.qDef.qDef",min:1},{key:"y-axis",classification:"measure",path:"qHyperCubeDef.qMeasures.1.qDef.qDef",min:1},{key:"size",classification:"measure",path:"qHyperCubeDef.qMeasures.2.qDef.qDef"},{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"},{key:"color",classification:"measure",path:"qHyperCubeDef.qDimensions.0.qAttributeExpressions.0"}]}],analyses:[{analysis:"comparison",dimensions:1,measures:{min:2,max:4},score:10,encodings:[{key:"dots",classification:"dimension",index:"0"},{key:"x-axis",classification:"measure",index:"0"},{key:"y-axis",classification:"measure",index:"1"},{key:"size",classification:"measure",index:"2"},{key:"color",classification:"measure",index:"3"}]},{analysis:"comparison",dimensions:2,measures:{min:2,max:3},criteria:function e(i){return i.isPerfectHierarchy()},score:10,encodings:[{key:"dots",classification:"dimension",index:"1"},{key:"color",classification:"dimension",index:"0"},{key:"x-axis",classification:"measure",index:"0"},{key:"y-axis",classification:"measure",index:"1"},{key:"size",classification:"measure",index:"2"}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1103:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"linechart",supportsDuplicateDimensions:false,encodings:[{key:"linePoints",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"dimension",min:1,encodings:[{key:"lines",classification:"dimension",path:"qHyperCubeDef.qDimensions.1.qDef.qFieldDefs.0"},{key:"position",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",pseudoDim:true,min:1,max:15}]}],analyses:[{analysis:"trend",dimensions:1,measures:{min:1,max:4},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"position",classification:"measure",indexRange:{start:0,end:3}}]},{analysis:"trend",dimensions:2,measures:1,criteria:function e(i){if(!i.qSize)return false;var n=i.getMetaDataForDimension(1);if(n&&n.qCardinal>12)return false;var s=i.getMetaDataForDimension(0);var a=i.getMetaDataForDimension(1);var r=s.qCardinal*a.qCardinal;return r===i.qSize.qcy},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"lines",classification:"dimension",index:"1"},{key:"position",classification:"measure",index:"0"}],adapt:function e(i){i.lineType="area";i.stackedArea=true}},{analysis:"trend",dimensions:2,measures:1,criteria:function e(i){var n=i.getMetaDataForDimension(1);return n&&n.qCardinal<13},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"lines",classification:"dimension",index:"1"},{key:"position",classification:"measure",index:"0"}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1104:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"table",supportsDuplicateDimensions:true,encodings:[{key:"columns",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0",min:0,max:15},{key:"columns",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",max:15}],analyses:[{analysis:"list",dimensions:{min:0,max:15},measures:{min:0,max:15},encodings:[{key:"columns",classification:"dimension",indexRange:{start:0,end:14}},{key:"columns",classification:"measure",indexRange:{start:0,end:14}}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1105:function(e,i,n){"use strict";var s,a;!(s=[n(49)],a=function(e){var i=e.getFlag("PIE_RADIUS");var n={type:"piechart",supportsDuplicateDimensions:true,encodings:[{key:"slices",path:"qHyperCubeDef.qDimensions.0",classification:"dimension",min:1,encodings:i?[{key:"angle",path:"qHyperCubeDef.qMeasures.0",classification:"measure",min:1},{key:"radius",path:"qHyperCubeDef.qMeasures.1",classification:"measure"}]:[{key:"angle",path:"qHyperCubeDef.qMeasures.0",classification:"measure",min:1},{key:"color",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0",classification:"dimension"},{key:"color",classification:"measure"}]}],analyses:[{analysis:"rank",dimensions:1,measures:1,score:10,criteria:function e(i){var n=i.getMetaDataForDimension(0);var s=i.getMetaDataForMeasure(0);if(n&&n.qCardinal<13&&s&&s.aggregation&&"sum"===s.aggregation.toLowerCase()&&i.isSummable())return true;return false},encodings:i?[{key:"slices",classification:"dimension",index:"0"},{key:"angle",classification:"measure",index:"0"},{key:"radius",classification:"measure",index:"1"}]:[{key:"slices",classification:"dimension",index:"0"},{key:"color",classification:"dimension",index:"0"},{key:"angle",classification:"measure",index:"0"}]}]};return n}.apply(i,s),void 0!==a&&(e.exports=a))},1106:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"combochart",supportsDuplicateDimensions:false,encodings:[{key:"records",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",min:1,encodings:[{key:"bars",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef"},{key:"lines",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.series",min:1,max:15}]}],analyses:[{analysis:"trend",dimensions:1,measures:2,score:10,criteria:function e(i){function n(e){return Math.log(e)/Math.LN10}var s=i.getMetaDataForMeasure(0);var a=i.getMetaDataForMeasure(1);var r=Math.floor(n(s.qMax));var t=Math.floor(n(a.qMax));var o=Math.abs(r-t);return o>=1},encodings:[{key:"records",classification:"dimension",index:"0"},{key:"bars",classification:"measure",index:"0"},{key:"lines",classification:"measure",index:"1"}]},{analysis:"contribution",dimensions:1,measures:2,score:20,adapt:function e(i){var n=[{qSortByState:0,qSortByFrequency:0,qSortByNumeric:-1,qSortByAscii:-1,qSortByLoadOrder:-1,qExpression:{qv:i.qHyperCubeDef.qMeasures[0].qDef.qDef},qSortByExpression:-1,qSortByGreyness:0}];var s={qType:"R",qnDec:2,qUseThou:0,qFmt:"#,##0.00%",qDec:".",qThou:","};i.qHyperCubeDef.qDimensions[0].qDef.qSortCriterias=n;i.qHyperCubeDef.qMeasures[1].qDef.qNumFormat=s},encodings:[{key:"records",classification:"dimension",index:"0"},{key:"bars",classification:"measure",index:"0"},{key:"lines",classification:"measure",index:"1"}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1107:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"treemap",supportsDuplicateDimensions:false,encodings:[{key:"blocks",classification:"dimension",path:["qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0","qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldLabels.0"],min:1,max:15,encodings:[{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"},{key:"size",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",min:1},{key:"color",classification:"measure",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrExps.0"}]}],analyses:[{analysis:"breakdown",dimensions:{min:2,max:15},measures:{min:1,max:2},criteria:function e(i){var n=i.getMetaDataForDimension(0);if(n&&n.qCardinal>12)return false;if(!i.isPerfectHierarchy())return false;var s=false;var a=i.getMetaDataForMeasure(0);var r=i.getMetaDataForMeasure(1);a&&a.qMin>=0&&(s=!r||r.qMin>=0);return s},score:10,encodings:[{key:"blocks",classification:"dimension",index:"0"},{key:"group",classification:"dimension",indexRange:{start:1,end:14}},{key:"size",classification:"measure",index:"0"},{key:"color",classification:"measure",index:"1"}]},{analysis:"breakdown",dimensions:2,measures:{min:1,max:2},criteria:function e(i){var n=i.getMetaDataForDimension(1);if(n&&n.qCardinal>12)return false;var s=i.getMetaDataForMeasure(0);var a=i.getMetaDataForMeasure(1);if(s&&s.qMin>=0)return!a;return false},encodings:[{key:"blocks",classification:"dimension",index:"1"},{key:"group",classification:"dimension",index:"0"},{key:"size",classification:"measure",index:"0"},{key:"color",classification:"measure",index:"1"}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1108:function(e,i,n){"use strict";var s,a;!(s=[n(90)],a=function(e){var i={type:"map",supportsDuplicateDimensions:true,encodings:[{key:"point",classification:"dimension",min:1,encodings:[{key:"size",classification:"dimension"},{key:"color",classification:"measure"}]}],analyses:[{analysis:"polymapdistribution",dimensions:1,measures:{min:0,max:1},criteria:function e(){return true},score:100,encodings:[{key:"area",classification:"dimension",index:"0"},{key:"color",classification:"measure",index:"0"}]},{analysis:"pointmapdistribution",dimensions:1,measures:{min:0,max:2},criteria:function e(){return true},score:100,encodings:[{key:"points",classification:"dimension",index:"0"},{key:"custom",classification:"measure",index:"0",adapt:function i(n,s){if(s.isFieldValue()||s.isExpressionValue()){e.setValue(n,"size.expression.key",s.getExpression());e.setValue(n,"size.expression.label",s.getExpression());e.setValue(n,"size.expression.type","expression")}else if(s.isLibraryValue()){e.setValue(n,"size.expression.key",s.getLibraryId());e.setValue(n,"size.expression.label","");e.setValue(n,"size.expression.type","libraryItem")}}},{key:"color",classification:"measure",index:"1"}]},{analysis:"geoAnalysis",dimensions:{min:1,max:2},measures:{min:0,max:2},criteria:function e(){return true},score:100,encodings:[{key:"area",classification:"dimension"},{key:"points",classification:"dimension"},{key:"color",classification:"measure",index:"0"},{key:"custom",classification:"measure",index:"1",adapt:function i(n,s){if(s.isFieldValue()||s.isExpressionValue()){e.setValue(n,"size.expression.key",s.getExpression());e.setValue(n,"size.expression.label",s.getExpression());e.setValue(n,"size.expression.type","expression")}else if(s.isLibraryValue()){e.setValue(n,"size.expression.key",s.getLibraryId());e.setValue(n,"size.expression.label","");e.setValue(n,"size.expression.type","libraryItem")}}}]}]};return i}.apply(i,s),void 0!==a&&(e.exports=a))},1109:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"distributionplot",supportsDuplicateDimensions:false,encodings:[{key:"records",classification:"dimension",min:1,encodings:[{key:"bars",classification:"dimension"},{key:"lines",classification:"measure",min:1}]}],analyses:[{analysis:"overview",dimensions:{min:1,max:2},measures:1,criteria:function e(i){var n=false;var s=i.getMetaDataForDimension(0);var a=i.getMetaDataForDimension(1);s&&s.qCardinal<=500&&(a?a&&a.qCardinal<=500&&(n=true):n=true);return n},encodings:[{key:"records",classification:"dimension",index:"1"},{key:"bars",classification:"dimension",index:"0"},{key:"lines",classification:"measure",index:"0"}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1110:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"boxplot",supportsDuplicateDimensions:true,encodings:[{key:"records",classification:"dimension",min:1,encodings:[{key:"bars",classification:"dimension"},{key:"lines",classification:"measure",min:1}]}],analyses:[{analysis:"overview",dimensions:{min:1,max:2},measures:1,criteria:function e(i){var n=false;var s=i.getMetaDataForDimension(0);var a=i.getMetaDataForDimension(1);s&&s.qCardinal>500?n=true:a&&a.qCardinal>500&&(n=true);return n},encodings:[{key:"records",classification:"dimension",index:"1"},{key:"bars",classification:"dimension",index:"0"},{key:"lines",classification:"measure",index:"0"}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1111:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"histogram",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"numeric dimension",min:1}],analyses:[{analysis:"values",dimensions:1,measures:0,criteria:function e(i){var n=i.getMetaDataForDimension(0);if(n&&("integer"===n.dataType||"double"===n.dataType))return true;return false},encodings:[{key:"values",classification:"dimension",index:0}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1112:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){var e={type:"pivot-table",supportsDuplicateDimensions:false,encodings:[{key:"rows",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0",min:1,max:15},{key:"values",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",min:1,max:15}],analyses:[{analysis:"rank",dimensions:{min:2,max:15},measures:{min:1,max:15},encodings:[{key:"rows",classification:"dimension",indexRange:{start:0,end:14}},{key:"values",classification:"measure",indexRange:{start:0,end:14}}]}]};return e}.apply(i,s),void 0!==a&&(e.exports=a))},1113:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){function e(e){this.type="eLibItem"===e.cType?"library":"eField"===e.cType?"field":"eInlineExpr"===e.cType?"expression":"unknown";this.expr=e.expr;this.field=e.field;this.libId=e.libId}e.prototype.isLibraryValue=function(){return"library"===this.type};e.prototype.getLibraryId=function(){return this.libId};e.prototype.isFieldValue=function(){return"field"===this.type};e.prototype.getFieldName=function(){return this.field||this.expr};e.prototype.isExpressionValue=function(){return"expression"===this.type};e.prototype.getExpression=function(){return this.expr};function i(e,i,n,s,a){this.key=e;this.classification=i;this.value=n;this.adapt=s;this.optionalObj=a}i.prototype.isMeasure=function(){return-1!==this.classification.indexOf("measure")};i.prototype.isDimension=function(){return-1!==this.classification.indexOf("dimension")};i.prototype.isColorBy=function(){return"color"===this.key};i.prototype.isCustom=function(){return"custom"===this.key};return{Value:e,Encoding:i}}.apply(i,s),void 0!==a&&(e.exports=a))},1114:function(e,i,n){"use strict";var s,a;!(s=[n(90),n(282),n(204),n(483),n(879),n(89),n(186)],a=function(e,i,n,s,a,r,t){a=a.default;return{generateProperties:f};function o(i,r,t,o,u,c,l){var f=a.getInitialProperties(i);f.cId=e.generateId();var p=a.getDataSection().items.data;r.gaLayers.unshift(f);var m=f;var y=new n({app:t,dimensionDefinition:p.dimension||{},measureDefinition:p.measure||{},dimensionProperties:f.qHyperCubeDef.qDimensions,measureProperties:f.qHyperCubeDef.qMeasures,globalChangeListeners:[function(e){s.colorByUpdater(e,"qHyperCubeDef.",e.color)}]});y.setProperties(m);return d(y,r,m,o,u,c,l)}function u(e,i,n){var s=["points","custom"];var a=["area"];var r=["color"];var t=[];if(e||i){var o=[];var u=[];if(e){o=l(a,r,n);t[e]=o}if(i){u=o.length>0?l(s,[],n):l(s,r,n);t[i]=u}}return t}function c(e,i){var n=[];i.forEach(function(i){var s=i.key;e.indexOf(s)>=0&&n.push(i)});return n}function l(e,i,n){var s=[];var a=c(e,n);if(a.length>0){s.push.apply(s,a);if(i.length>0){var r=c(i,n);s.push.apply(s,r)}}return s}function f(e,n,s){var a=e.type;return r.all([i.getExtensionType(a),i.getInitialProperties(a)]).then(function(i){var t=i[0];var c=i[1];c.isRecommended=e.score>-1;var l;var f=c;if("map"===a){var p="AreaLayer";var m="PointLayer";var y=[];var v=[];var D=u(p,m,e.encodings);D[p]&&(v=D[p]);D[m]&&(y=D[m]);if(y.length>0&&v.length>0){o(m,c,s,n,e,y,t);return o(p,c,s,n,e,v,t)}return y.length>0?o(m,c,s,n,e,y,t):p.length>0?o(p,c,s,n,e,v,t):r.resolve()}f=c;t.mapProperties();l=t.getCreatePropertyHandler.call(t,s);l.setProperties(f);return d(l,c,f,n,e,e.encodings,t)})}function d(e,i,n,s,a,r,t){var o={dimensions:s?s.qHyperCubeDef.qDimensions.map(function(e){return e}):[],measures:s?s.qHyperCubeDef.qMeasures.map(function(e){return e}):[]};return p(r,0,o,n,e).then(function(){a.adapt&&a.adapt(i);D(i);var e=t.exportProperties&&t.importProperties;return e?t.importProperties(t.exportProperties({qProperty:i},t.options.hyperCubePath),i,t,t.options.hyperCubePath).qProperty:i})}function p(e,i,n,s,a){if(i>=e.length)return r.resolve();return m(e[i],n,s,a).then(function(){return p(e,i+1,n,s,a)})}function m(i,n,a,o){var u=i.value;if(i.isColorBy()){if(a.color){var c=i.isMeasure();var l=y(i,n);var f;if(u.isFieldValue()||u.isExpressionValue()){f={type:c?"expression":"field",name:c||u.isExpressionValue()?u.getExpression():u.getFieldName()};l&&(f.label=c?l.qDef.qLabel:l.qDef.qFieldLabels[0]);f.label||(f.label=t.convertEvaluationExpressionToLabel(f.name))}else u.isLibraryValue()&&(f={type:c?"measure":"dimension",id:u.getLibraryId()});if(f){i.adapt&&i.adapt(f);s.setColorByPropertyDef(a.color,f);o.updateGlobalChangeListeners()}}}else if(i.isCustom())i.adapt(a,u);else if(i.isMeasure()){var d;var p=y(i,n);if(p)d=e.extend(true,{},p);else if(u.isFieldValue()||u.isExpressionValue()){var m=u.getExpression();var v=t.convertEvaluationExpressionToLabel(m);d=o.createExpressionMeasure(m,v)}else if(u.isLibraryValue()){var D=u.getLibraryId();d=o.createLibraryMeasure(D)}if(d){i.adapt&&i.adapt(d);return o.addMeasure(d,void 0,void 0,true)}}else if(i.isDimension()){var g;var h=y(i,n);if(h)g=e.extend(true,{},h);else if(u.isFieldValue()){var x=t.convertEvaluationExpressionToLabel(u.getFieldName());var q=u.getExpression();g=o.createFieldDimension(q,x)}else if(u.isExpressionValue()){var b=u.getExpression();var C=t.convertEvaluationExpressionToLabel(b);g=o.createFieldDimension(b,C)}else if(u.isLibraryValue()){var k=u.getLibraryId();g=o.createLibraryDimension(k)}if(g){i.adapt&&i.adapt(g);return o.addDimension(g).then(function(){var e=i.optionalObj;if(e&&e.mapProperties){var n=e.mapProperties;var s="";g.qDef&&g.qDef.qFieldDefs&&g.qDef.qFieldDefs.length>0&&(s=g.qDef.qFieldDefs[0]);o.properties.locationOrLatitude.key=n.expr;o.properties.locationOrLatitude.label=n.field;o.properties.locationOrLatitude.type="expression";o.properties.locationDefault=o.properties.locationOrLatitude.key;o.properties.label.expression.key=s;o.properties.label.expression.type="expression";o.properties.label.expression.label="dimension.qDef.qFieldDefs[0]"}})}}return r.resolve()}function y(e,i){var n=e.value;if(e.isMeasure()){if(n.isFieldValue()||n.isExpressionValue()){var s=n.getExpression();var a=t.normalizeExpression(s);var r=v(i.measures,function(e){return e.qDef&&t.normalizeExpression(e.qDef.qDef)===a});return r}if(n.isLibraryValue()){var o=n.getLibraryId();var u=v(i.measures,function(e){return e.qLibraryId===o});return u}}else if(e.isDimension()){if(n.isFieldValue()){var c=n.getExpression();var l=t.normalizeExpression(c);var f=v(i.dimensions,function(e){return e.qDef&&e.qDef.qFieldDefs&&t.normalizeExpression(e.qDef.qFieldDefs[0])===l});return f}if(n.isExpressionValue()){var d=n.getExpression();var p=t.normalizeExpression(d);var m=v(i.dimensions,function(e){return e.qDef&&e.qDef.qFieldDefs&&t.normalizeExpression(e.qDef.qFieldDefs[0])===p});return m}if(n.isLibraryValue()){var y=n.getLibraryId();var D=v(i.dimensions,function(e){return e.qLibraryId===y});return D}}return}function v(e,i){for(var n=0;n<e.length;n++){var s=e[n];if(i(s)){e.splice(n,1);return s}}return}function D(i){if(i.qHyperCubeDef){var n=i.qHyperCubeDef.qDimensions;var s=i.qHyperCubeDef.qMeasures;n.forEach(function(i){i.qDef.cId=e.generateId()});s.forEach(function(i){i.qDef.cId=e.generateId()})}}}.apply(i,s),void 0!==a&&(e.exports=a))},1116:function(e,i,n){"use strict";var s,a;!(s=[n(48),n(54),n(89),n(186),n(1117),n(229),n(233)],a=function(e,i,n,s,a,r){return{createDataCollection:t,adaptDataCollectionForRecommendations:o};function t(i,t,o){if(o)return a.createDataCollection(o,t.qHyperCubeDef.qDimensions,t.qHyperCubeDef.qMeasures);return n.all({appFieldList:i.getFieldList(),classificationsResult:e.getService("classificationService").getClassification()}).then(function(e){var i=e.appFieldList;var n=e.classificationsResult;var o=n?new r(n):void 0;s.addClassificationDataToFields(i,o);return a.createDataCollection(i,t.qHyperCubeDef.qDimensions,t.qHyperCubeDef.qMeasures)})}function o(e,i){var n={fields:[],libItems:[],expressions:[]};e.dimensions.forEach(function(e,a){var r={};if(i.qDimensionInfo&&i.qDimensionInfo.length>a){var t=i.qDimensionInfo[a];r.distinctCount=t.qCardinal}if(e.isLibraryItem())n.libItems.push({libId:e.libId,overrides:r});else if(e.isFieldItem()){n.fields.push({name:e.name,overrides:r});s.isDimension(e.defaultClassifications)||(r.classifications=[s.Constants.dimension])}else{n.expressions.push({expr:e.expr,overrides:r});u(e.expr,i)?r.classifications=[s.Constants.temporal]:r.classifications=[s.Constants.dimension]}});e.measures.forEach(function(e,a){var r={};if(i.qMeasureInfo&&i.qMeasureInfo.length>a){var t=i.qMeasureInfo[a];r.valueRange={min:t.qMin,max:t.qMax}}if(e.isLibraryItem())n.libItems.push({libId:e.libId,overrides:r});else if(e.isFieldItem()){n.fields.push({name:e.name,overrides:r});r.defaultAggregation=e.aggregation;s.isMeasure(e.defaultClassifications)||(r.classifications=[s.Constants.measure])}else{n.expressions.push({expr:e.expr,overrides:r});r.classifications=[s.Constants.measure]}});n.stats={total:e.dimensions.length+e.measures.length,dims:e.dimensions.length,msrs:e.measures.length};return n}function u(e,n){if(n&&n.qDimensionInfo){var s=i.find(n.qDimensionInfo,function(i){return i.qGroupFieldDefs&&i.qGroupFieldDefs.indexOf(e)>=0});return s&&s.qDerivedField}return false}}.apply(i,s),void 0!==a&&(e.exports=a))},1117:function(e,i,n){"use strict";var s,a;!(s=[n(54),n(92),n(1118)],a=function(e,i,n){var s=["sum","count","avg","min","max"];var a=i.extend("DataCollectionFactory",{getField:function i(n,s){return e.find(n,function(e){return e.qName===s})},isAggregation:function e(i){return i&&s.indexOf(i.toLowerCase())>=0},unwrapName:function e(i){var n="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.substring(1,i.length-1):i;return n},createDataCollection:function e(i,s,a){var r=this;var t=new n.DataCollection;s.forEach(function(e){var s;if(e.qLibraryId)s=new n.Dimension({libId:e.qLibraryId});else{var a=e.qDef.qFieldDefs[0];var o=r.unwrapName(a);var u=r.getField(i,o);s=u?new n.Dimension({dataTypes:u.dataTypes,defaultClassifications:u.classifications,name:o,expr:a}):new n.Dimension({expr:a})}s&&t.dimensions.push(s)});a.forEach(function(e){var s;if(e.qLibraryId)s=new n.Measure({libId:e.qLibraryId});else{var a=e.qDef.qDef;var o=/^=?(.+)\(((\[(.+)\])|((.+)))\)$/;var u=o.exec(a);if(u){u=u.filter(function(e){return e});if(u.length>=5){var c=u[1];var l=u[4];c&&(c=c.trim());if(r.isAggregation(c)){var f=r.getField(i,l);f&&(s=new n.Measure({dataTypes:f.dataTypes,defaultClassifications:f.classifications,defaultAggregation:f.defaultAggregation,aggregation:c,name:l,expr:a}))}}}s||(s=new n.Measure({expr:a}))}s&&t.measures.push(s)});return t},merge:function e(i){var s=new n.DataCollection;i.forEach(function(e){s.dimensions=s.dimensions.concat(e.dimensions);s.measures=s.measures.concat(e.measures)});return s}});return new a}.apply(i,s),void 0!==a&&(e.exports=a))},1118:function(e,i,n){"use strict";var s,a;!(s=[],a=function(){function e(e){this.name=e.name;this.expr=e.expr;this.defaultClassifications=e.defaultClassifications;this.libId=e.libId;this.dataTypes=e.dataTypes}e.prototype.isLibraryItem=function(){return!!this.libId};e.prototype.isFieldItem=function(){return!!this.name};function i(e){this.name=e.name;this.aggregation=e.aggregation;this.defaultAggregation=e.defaultAggregation;this.defaultClassifications=e.defaultClassifications;this.expr=e.expr;this.libId=e.libId;this.dataTypes=e.dataTypes}i.prototype.isLibraryItem=function(){return!!this.libId};i.prototype.isFieldItem=function(){return!!this.name};function n(){this.dimensions=[];this.measures=[]}n.prototype.size=function(){return this.dimensions.length+this.measures.length};return{Dimension:e,Measure:i,DataCollection:n}}.apply(i,s),void 0!==a&&(e.exports=a))},1119:function(e,i,n){"use strict";var s,a;!(s=[n(54),n(90),n(1120),n(186)],a=function(e,i,n,s){var a={collectFromRecommendation:t,merge:u};function r(e,i,n,a){a=a||[];var r=-1;e&&i&&i.some(function(i,t){"dimension"===n?(e.qLibraryId&&e.qLibraryId===i.libId||s.normalizeExpression(e.qDef.qFieldDefs[0])===s.normalizeExpression(i.expr))&&-1===a.indexOf(t)&&(r=t):"measure"===n&&(e.qLibraryId&&e.qLibraryId===i.libId||s.normalizeExpression(e.qDef.qDef)===s.normalizeExpression(i.expr))&&(r=t);return-1!==r});return r}function t(i){var s=i.analysis.dims?i.analysis.dims:[];var a=i.analysis.msrs?i.analysis.msrs:[];var r=i.matchRecord?i.matchRecord.matches:[];var t=s.map(function(e){var i={dataType:"",qCardinal:0};if("eField"===e.cType){i.expr=e.expr;i.qGroupFieldDefs=[e.field]}else"eInlineExpr"===e.cType?i.expr=e.expr:"eLibItem"===e.cType&&(i.libId=e.libId);if(e.fieldStats){i.dataType=e.fieldStats.dataType||"";i.qCardinal=e.fieldStats.distinctCount||0}return i});var u=a.map(function(i){var n={dataType:"",qMax:0,qMin:0,aggregation:"",libItemLabel:""};if("eField"===i.cType){n.expr=i.expr;var s=e.findWhere(r,{field:i.field});s&&s.aggr&&(n.aggregation=s.aggr)}else"eInlineExpr"===i.cType?n.expr=i.expr:"eLibItem"===i.cType&&(n.libId=i.libId);if(i.fieldStats){n.dataType=i.fieldStats.dataType||"";if(i.fieldStats.valueRange){n.qMax=i.fieldStats.valueRange.max;n.qMin=i.fieldStats.valueRange.min}if("eLibItem"===i.cType&&i.fieldStats.classification&&i.fieldStats.classification.length>0){var a=i.fieldStats.classification[0];n.classification=a}}return n});var c=o(i);var l={};l.intermediateHyperCube=false;return new n(t,u,c,l)}function o(i){var n=[];var s=i.analysis;var a=i.matchRecord;if(a&&s.dims&&s.dims.length>1){var r=true;for(var t=1;t<s.dims.length;t++){var o=s.dims[t];if("eField"!==o.cType){r=false;break}var u=e.findWhere(a.matches,{field:o.field});if(!u.groupCriteria||u.groupCriteria.indexOf("sameHierarchy")<0){r=false;break}}r&&n.push({name:"perfectHierarchy",result:"1"})}return n}function u(e,s,a,t){var u=t.analysis.dims?t.analysis.dims:[];var c=t.analysis.msrs?t.analysis.msrs:[];var l=new Array(c.length);var d=new Array(u.length);var p=[];e.qDimensionInfo.forEach(function(i,n){var o=s.qDimensions[n];var u=r(o,t.analysis.dims,"dimension",p);p.push(u);d.splice(u,1,f(e.qDimensionInfo[n],n,"dimension",s,a))});e.qMeasureInfo.forEach(function(i,n){var o=s.qMeasures[n];var u=r(o,t.analysis.msrs,"measure");l.splice(u,1,f(e.qMeasureInfo[n],n,"measure",s,a))});var m={qSize:i.extend(true,{},e.qSize)};var y=o(t);return new n(d,l,y,m)}function c(e,i,n,s,a){var r;var t=[];switch(s){case"dimension":t=a.dimensions;break;case"measure":t=a.measures;break}t.some(function(s){var a=false;if(i){a=s.expr===i;e.dataType=s.dataTypes&&s.dataTypes.length>0?s.dataTypes[0]:null;e.aggregation=s.aggregation?s.aggregation:null}else n&&(a=s.libId===n);r=a?s:r;return a})}function l(e,i,n,s,a){var r;var t;var o;function u(e,i){var n=!!r.qLibraryId;n?o=r.qLibraryId:"dimension"===i?t=r.qDef.qFieldDefs[0]:"measure"===i&&(t=r.qDef.qDef)}if("dimension"===n){r=s.qDimensions[i];u(r,"dimension")}else if("measure"===n){r=s.qMeasures[i];u(r,"measure")}c(e,t,o,n,a)}function f(e,n,s,a,r){var t=i.extend(true,{},e,n);l(t,n,s,a,r);return t}return a}.apply(i,s),void 0!==a&&(e.exports=a))},1120:function(e,i,n){"use strict";var s,a;!(s=[n(90)],a=function(e){function i(i,n,s,a){this.measures=n;this.dimensions=i;this.overallIndicators=s;e.extend(true,this,a)}i.prototype.getMetaDataForDimension=function(e){if(this.dimensions.length>e){var i=this.dimensions[e];return i}return};i.prototype.getMetaDataForMeasure=function(e){if(this.measures.length>e){var i=this.measures[e];return i}return};i.prototype.getIndicatorByName=function(e){var i=void 0;this.overallIndicators&&this.overallIndicators.some(function(n){var s=n.name===e;s&&(i=n);return s});return i};i.prototype.isSummable=function(){var e=this.getIndicatorByName("summable");return e&&"1"===e.result};i.prototype.isPerfectHierarchy=function(){var e=this.getIndicatorByName("perfectHierarchy");return e&&"1"===e.result};return i}.apply(i,s),void 0!==a&&(e.exports=a))},406:function(e,i,n){"use strict";var s,a;!(s=[n(282),n(89)],a=function(e,i){return{createInitialChart:a,createChart:s,convertChart:r,getPropertyTreeForConvertedChart:t,createConvertedChart:o};function n(e){var i=e.qHyperCubeDef;if(i&&i.qMeasures&&i.qDimensions){var n=i.qDimensions.concat(i.qMeasures);n.forEach(function(e){e.qAttributeExpressions&&e.qAttributeExpressions.forEach(function(e){e.qAttribute=true})})}}function s(e,i,s){var a=u(i,s).bind(i);n(e);return a(e)}function a(i,n,a){c(i,n,a);return e.getInitialProperties(i).then(function(e){return s(e,n,a)})}function r(e,i,n){if(!e)throw new Error("No extension provided");var s=n||e.model;return t(e,i,n).then(function(e){return n.setFullPropertyTree(e).then(function(){return s})})}function t(n,s,a){if(!n)throw new Error("No extension provided");var r=a||n.model;return i.all([e.getExtensionType(s),e.getInitialProperties(s),r.getFullPropertyTree()]).then(function(e){var i=e[0];var s=e[1];var a=e[2];var r;delete a.qProperty.qInfo.qId;if(n.exportProperties&&i.importProperties){var t;"boxplot"===n.type&&(t="boxplotDef");r=i.importProperties(n.exportProperties(a,t),s,i)}else r={qProperty:s,qChildren:[]};return r})}function o(e,i,n,s){c(i,n,s);return(e.model.properties,n,s).then(function(n){return r(e,i,n)})}function u(e,i){return i?e.createObject:e.createSessionObject}function c(e,i,n){if(!i||!e)throw new Error("Invalid inparameters: type or app missing");if(n)throw new Error("Persisted objects not implemented yet")}}.apply(i,s),void 0!==a&&(e.exports=a))},483:function(e,i,n){"use strict";var s,a;!(s=[n(160),n(101),n(385)],a=function(e,i,n){var s=["scatterplot","map"],a=["map"];return{baseColor:{isSupported:function e(i){return i&&i.length&&-1===s.indexOf(i)},isDimSupported:function e(i){return i&&i.length&&-1!==a.indexOf(i)}},colorBy:{},colorByUpdater:function e(i,n,s,a){this.updateColorDef(i,a,s);this.updateHypercubeAttributes(i,n,s)},updateColorDef:function s(a,r,t){var o=i.getValue(t,"mode");var c=i.getValue(t,"auto");var f=i.getValue(a,r+"qDimensions",[]);var d=i.getValue(a,r+"qMeasures",[]);var p,m,y,v;if(!c&&"byDimension"===o&&f.length){p=i.getValue(t,"byDimDef");p&&l(t,p.label);if(p&&p.activeDimensionIndex>-1){p.activeDimensionIndex=Math.min(p.activeDimensionIndex,f.length-1);m=f[p.activeDimensionIndex];v=n.getColorByDefinition("dimension",false,m);v.activeDimensionIndex=p.activeDimensionIndex;u(t,v)}else if(!p||!p.key){m=f[f.length-1];y=e.getById(m.qAttributeDimensions,e.IDMAP.COLOR_BY_ALTERNATIVE);u(t,n.getColorByDefinition("dimension",!!y,y||m))}}else if(!c&&"byMeasure"===o&&f.length){p=i.getValue(t,"byMeasureDef");p&&l(t,p.label);if((!p||!p.key)&&d.length){var D=d[0];m=f[f.length-1];y=e.getById(m.qAttributeExpressions,e.IDMAP.COLOR_BY_ALTERNATIVE);u(t,n.getColorByDefinition("measure",!!y,y||D))}}else"byMultiple"===o&&d.length<2&&i.setValue(t,"mode","primary")},updateHypercubeAttributes:function e(n,s,a){var t=i.getValue(a,"mode");var o=i.getValue(a,"auto");var u=i.getValue(n,s+"qDimensions",[]);var l=i.getValue(n,s+"qMeasures",[]);var f=i.getValue(n,s+"qLayoutExclude.qHyperCubeDef.qDimensions",[]);!o&&"byDimension"===t&&u.length?c(a,true,u,f,l,i.getValue(a,"byDimDef.label")):!o&&"byMeasure"===t&&u.length?c(a,false,u,f,l,i.getValue(a,"byMeasureDef.label")):r(u,f)},setColorByPropertyDef:u,resolveColorByPropertyDef:c,clearColorByItem:r};function r(i,n){i.forEach(function(i){t(i,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");t(i,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")});n.forEach(function(i){t(i,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");t(i,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")})}function t(i,n,s){if(i[s]){var a=e.getIndexById(i[s],n);a>=0&&i[s].splice(a,1)}else i[s]=[]}function o(e){return e.split(" ").length>1&&"="!==e[0]&&"["!==e[0]?"["+e+"]":e}function u(e,i,n,s){var a=n?"expression":i.type,r=e.mode,t=i.label||i.name||"";l(e,t);switch(a){case"field":r="byDimension";e.byDimDef={label:i.label||o(i.name),key:o(i.name),type:"expression",activeDimensionIndex:i.activeDimensionIndex};break;case"expression":r="byMeasure";e.byMeasureDef={label:n||i.label||i.name,key:n||i.name,type:"expression"};break;case"dimension":r="byDimension";e.byDimDef={label:i.name,key:i.id,type:"libraryItem",activeDimensionIndex:i.activeDimensionIndex};break;case"measure":r="byMeasure";e.byMeasureDef={label:i.name,key:i.id,type:"libraryItem"};break}if(!s){e.auto=false;e.mode=r}}function c(n,s,a,t,o,u){r(a,t);var c=a[a.length-1];if(c){var l=s?i.getValue(n,"byDimDef"):i.getValue(n,"byMeasureDef");if(l){var f=e.create(e.IDMAP.COLOR_BY_ALTERNATIVE);switch(l.type){case"expression":f.label=u||l.label;s?f.qDef=l.key:f.qExpression=l.key;break;case"libraryItem":if(!s){var d=-1;o.forEach(function(e,i){l.key===e.qLibraryId&&(d=i)});f.matchMeasure=d}f.qLibraryId=l.key;f.colorMapRef=l.key;break}if(s){f.qSortBy={qSortByAscii:1};c.qAttributeDimensions.push(f)}else c.qAttributeExpressions.push(f)}}}function l(e,i){if(!i)return;var n="="===i.charAt(0);e.altLabel=n?{qStringExpression:{qExpr:i.substr(1)}}:i}}.apply(i,s),void 0!==a&&(e.exports=a))},877:function(e,i,n){"use strict";var s,a;!(s=[n(54),n(1097),n(1098),n(1114),n(1116),n(1119),n(878),n(199)],a=function(e,i,n,s,a,r,t,o){return{generateAlternativeChartProperties:c,generateDefaultChartProperties:l,generateChartPropertiesForRecommendation:f};function u(s,o,u,c){return a.createDataCollection(u,s).then(function(u){var l=a.adaptDataCollectionForRecommendations(u,o.qHyperCube);return i.getChartRecommendations(l).then(function(a){var l=[];var f=!e.isArray(a);f&&(a=[]);var d=a.some(function(e){return"list"===e.analysis.analysis});if(!d){var p=i.getFallbackRecommendation(u);a.push(p)}a.forEach(function(i){var a=r.merge(o.qHyperCube,s.qHyperCubeDef,u,i);var t=n.findChartsByAnalysis(i,a);n.createChartDataProperties(i,t).forEach(function(i){var n=e.findWhere(l,{type:i.type});if(n){if(i.score&&(!n.score||i.score>n.score)){var s=l.indexOf(n);l[s]=i}}else l.push(i)})});if(c){var m=t.getSupportedChartTypes().slice().filter(function(e){var i=true;for(var n=0;n<l.length;n++)if(l[n].type===e){i=false;break}return i});var y=r.merge(o.qHyperCube,s.qHyperCubeDef,u,a[0]);var v=n.findPossibleCharts(m,y);n.createChartDataProperties(a[0],v).forEach(function(e){l.push(e)})}return{recommendations:a,allChartDataProperties:l}})})}function c(e,i,n,a){return u(e,i,n,a).then(function(i){if(o.CRE_CHARTS){var a={recommendations:i.recommendations,allChartDataProperties:i.allChartDataProperties};console.log(a)}i.allChartDataProperties.length>1&&i.allChartDataProperties.sort(function(e,i){return i.score-e.score});return i.allChartDataProperties.map(function(i){return s.generateProperties(i,e,n)})})}function l(e,i,n,a){return u(e,i,n,a).then(function(i){var a=i.allChartDataProperties;a.length>1&&a.sort(function(e,i){return i.score-e.score});var r=a[0];e&&e.preferredChart&&a.forEach(function(i,n){i.type===e.preferredChart&&(r=a[n])});return s.generateProperties(r,e,n).then(function(e){if(o.CRE_CHARTS){var n={recommendations:i.recommendations,allChartDataProperties:a,bestChartDataProperties:r,chartProperties:e};console.log(n)}return e})})}function f(i,a){var t=[];var u=[i];var c=u.some(function(e){return"list"===e.analysis.analysis});if(!c){var l={analysis:{analysis:"list",dims:i.analysis.dims,msrs:i.analysis.msrs}};u.push(l)}u.forEach(function(i){var s=r.collectFromRecommendation(i);var a=n.findChartsByAnalysis(i,s);n.createChartDataProperties(i,a).forEach(function(i){var n=e.findWhere(t,{type:i.type});if(n){if(i.score&&(!n.score||i.score>n.score)){var s=t.indexOf(n);t[s]=i}}else t.push(i)})});t.length>1&&t.sort(function(e,i){return i.score-e.score});var f=t[0];return s.generateProperties(f,void 0,a).then(function(e){if(o.CRE_CHARTS){var i={recommendations:u,allChartDataProperties:t,bestChartDataProperties:f,chartProperties:e};console.log(i)}return e})}}.apply(i,s),void 0!==a&&(e.exports=a))},878:function(e,i,n){"use strict";var s,a;!(s=[n(54),n(1099),n(1100),n(1101),n(1102),n(1103),n(1104),n(1105),n(1106),n(1107),n(1108),n(1109),n(1110),n(1111),n(1112)],a=function(e,i,n,s,a,r,t,o,u,c,l,f,d,p,m){function y(e){v[e.type]=e}var v={};y(n);y(s);y(r);y(t);y(o);y(u);y(c);y(l);y(f);y(d);y(p);y(a);y(i);y(m);function D(){var i=e.keys(v);if(h)return e.filter(i,function(e){return h.indexOf(e)>=0});return i}function g(e){return v[e]}var h=void 0;function x(e){h=e}return{getSupportedChartTypes:D,getChartDataDefinition:g,restrictSupportedChartTypes:x}}.apply(i,s),void 0!==a&&(e.exports=a))}}]);