/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[73],{1271:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(t,e){true;!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return e(t)}.call(exports,__webpack_require__,exports,module),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(window||{},function(window){var svgNS="http://www.w3.org/2000/svg";var locationHref="";var subframeEnabled=true;var expressionsPlugin;var isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var cachedColors={};var bm_rounder=Math.round;var bm_rnd;var bm_pow=Math.pow;var bm_sqrt=Math.sqrt;var bm_abs=Math.abs;var bm_floor=Math.floor;var bm_max=Math.max;var bm_min=Math.min;var blitter=10;var BMMath={};(function(){var t=Object.getOwnPropertyNames(Math);var e,r=t.length;for(e=0;e<r;e+=1)BMMath[t[e]]=Math[t[e]]})();function ProjectInterface(){return{}}BMMath.random=Math.random;BMMath.abs=function(t){var e=typeof t;if("object"===e&&t.length){var r=Array.apply(null,{length:t.length});var s,i=t.length;for(s=0;s<i;s+=1)r[s]=Math.abs(t[s]);return r}return Math.abs(t)};var defaultCurveSegments=150;var degToRads=Math.PI/180;var roundCorner=.5519;function roundValues(t){bm_rnd=t?Math.round:function(t){return t}}roundValues(false);function roundTo2Decimals(t){return Math.round(1e4*t)/1e4}function roundTo3Decimals(t){return Math.round(100*t)/100}function styleDiv(t){t.style.position="absolute";t.style.top=0;t.style.left=0;t.style.display="block";t.style.transformOrigin=t.style.webkitTransformOrigin="0 0";t.style.backfaceVisibility=t.style.webkitBackfaceVisibility="visible";t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="preserve-3d"}function styleUnselectableDiv(t){t.style.userSelect="none";t.style.MozUserSelect="none";t.style.webkitUserSelect="none";t.style.oUserSelect="none"}function BMEnterFrameEvent(t,e,r,s){this.type=t;this.currentTime=e;this.totalTime=r;this.direction=s<0?-1:1}function BMCompleteEvent(t,e){this.type=t;this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,r,s){this.type=t;this.currentLoop=e;this.totalLoops=r;this.direction=s<0?-1:1}function BMSegmentStartEvent(t,e,r){this.type=t;this.firstFrame=e;this.totalFrames=r}function BMDestroyEvent(t,e){this.type=t;this.target=e}function _addEventListener(t,e){this._cbs[t]||(this._cbs[t]=[]);this._cbs[t].push(e);return function(){this.removeEventListener(t,e)}.bind(this)}function _removeEventListener(t,e){if(e){if(this._cbs[t]){var r=0,s=this._cbs[t].length;while(r<s){if(this._cbs[t][r]===e){this._cbs[t].splice(r,1);r-=1;s-=1}r+=1}this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}function _triggerEvent(t,e){if(this._cbs[t]){var r=this._cbs[t].length;for(var s=0;s<r;s++)this._cbs[t][s](e)}}function randomString(t,e){void 0===e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");var r;var s="";for(r=t;r>0;--r)s+=e[Math.round(Math.random()*(e.length-1))];return s}function HSVtoRGB(t,e,r){var s,i,a,n,o,h,l,p;1===arguments.length&&(e=t.s,r=t.v,t=t.h);n=Math.floor(6*t);o=6*t-n;h=r*(1-e);l=r*(1-o*e);p=r*(1-(1-o)*e);switch(n%6){case 0:s=r,i=p,a=h;break;case 1:s=l,i=r,a=h;break;case 2:s=h,i=r,a=p;break;case 3:s=h,i=l,a=r;break;case 4:s=p,i=h,a=r;break;case 5:s=r,i=h,a=l;break}return[s,i,a]}function RGBtoHSV(t,e,r){1===arguments.length&&(e=t.g,r=t.b,t=t.r);var s=Math.max(t,e,r),i=Math.min(t,e,r),a=s-i,n,o=0===s?0:a/s,h=s/255;switch(s){case i:n=0;break;case t:n=e-r+a*(e<r?6:0);n/=6*a;break;case e:n=r-t+2*a;n/=6*a;break;case r:n=t-e+4*a;n/=6*a;break}return[n,o,h]}function addSaturationToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);r[1]+=e;r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0);return HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);r[2]+=e;r[2]>1?r[2]=1:r[2]<0&&(r[2]=0);return HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);r[0]+=e/360;r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1);return HSVtoRGB(r[0],r[1],r[2])}function componentToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}var rgbToHex=function(){var t=[];var e;var r;for(e=0;e<256;e+=1){r=e.toString(16);t[e]=1==r.length?"0"+r:r}return function(e,r,s){e<0&&(e=0);r<0&&(r=0);s<0&&(s=0);return"#"+t[e]+t[r]+t[s]}}();function fillToRgba(t,e){if(!cachedColors[t]){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);cachedColors[t]=parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)}return"rgba("+cachedColors[t]+","+e+")"}var fillColorToString=function(){var t=[];return function(e,r){void 0!==r&&(e[3]=r);t[e[0]]||(t[e[0]]={});t[e[0]][e[1]]||(t[e[0]][e[1]]={});t[e[0]][e[1]][e[2]]||(t[e[0]][e[1]][e[2]]={});t[e[0]][e[1]][e[2]][e[3]]||(t[e[0]][e[1]][e[2]][e[3]]="rgba("+e.join(",")+")");return t[e[0]][e[1]][e[2]][e[3]]}}();function RenderedFrame(t,e){this.tr=t;this.o=e}function iterateDynamicProperties(t){var e,r=this.dynamicProperties;for(e=0;e<r;e+=1)this.dynamicProperties[e].getValue(t)}function reversePath(t){var e=[],r=[],s=[];var i,a,n={};var o=0;if(t.c){e[0]=t.o[0];r[0]=t.i[0];s[0]=t.v[0];o=1}a=t.i.length;var h=a-1;for(i=o;i<a;i+=1){e.push(t.o[h]);r.push(t.i[h]);s.push(t.v[h]);h-=1}n.i=e;n.o=r;n.v=s;return n}var Matrix=function(){function t(){this.props[0]=1;this.props[1]=0;this.props[2]=0;this.props[3]=0;this.props[4]=0;this.props[5]=1;this.props[6]=0;this.props[7]=0;this.props[8]=0;this.props[9]=0;this.props[10]=1;this.props[11]=0;this.props[12]=0;this.props[13]=0;this.props[14]=0;this.props[15]=1;return this}function e(t){if(0===t)return this;var e=Math.cos(t);var r=Math.sin(t);return this._t(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1)}function r(t){if(0===t)return this;var e=Math.cos(t);var r=Math.sin(t);return this._t(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1)}function s(t){if(0===t)return this;var e=Math.cos(t);var r=Math.sin(t);return this._t(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1)}function i(t){if(0===t)return this;var e=Math.cos(t);var r=Math.sin(t);return this._t(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1)}function a(t,e){return this._t(1,e,t,1,0,0)}function n(t,e){return this.shear(Math.tan(t),Math.tan(e))}function o(t,e){var r=Math.cos(e);var s=Math.sin(e);return this._t(r,s,0,0,-s,r,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1)._t(r,-s,0,0,s,r,0,0,0,0,1,0,0,0,0,1)}function h(t,e,r){r=isNaN(r)?1:r;if(1==t&&1==e&&1==r)return this;return this._t(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1)}function l(t,e,r,s,i,a,n,o,h,l,p,m,f,c,d,u){this.props[0]=t;this.props[1]=e;this.props[2]=r;this.props[3]=s;this.props[4]=i;this.props[5]=a;this.props[6]=n;this.props[7]=o;this.props[8]=h;this.props[9]=l;this.props[10]=p;this.props[11]=m;this.props[12]=f;this.props[13]=c;this.props[14]=d;this.props[15]=u;return this}function p(t,e,r){r=r||0;if(0!==t||0!==e||0!==r)return this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1);return this}function m(t,e,r,s,i,a,n,o,h,l,p,m,f,c,d,u){if(1===t&&0===e&&0===r&&0===s&&0===i&&1===a&&0===n&&0===o&&0===h&&0===l&&1===p&&0===m){if(0!==f||0!==c||0!==d){this.props[12]=this.props[12]*t+this.props[13]*i+this.props[14]*h+this.props[15]*f;this.props[13]=this.props[12]*e+this.props[13]*a+this.props[14]*l+this.props[15]*c;this.props[14]=this.props[12]*r+this.props[13]*n+this.props[14]*p+this.props[15]*d;this.props[15]=this.props[12]*s+this.props[13]*o+this.props[14]*m+this.props[15]*u}this._identityCalculated=false;return this}var v=this.props[0];var y=this.props[1];var g=this.props[2];var b=this.props[3];var E=this.props[4];var P=this.props[5];var x=this.props[6];var S=this.props[7];var C=this.props[8];var k=this.props[9];var A=this.props[10];var M=this.props[11];var w=this.props[12];var D=this.props[13];var T=this.props[14];var _=this.props[15];this.props[0]=v*t+y*i+g*h+b*f;this.props[1]=v*e+y*a+g*l+b*c;this.props[2]=v*r+y*n+g*p+b*d;this.props[3]=v*s+y*o+g*m+b*u;this.props[4]=E*t+P*i+x*h+S*f;this.props[5]=E*e+P*a+x*l+S*c;this.props[6]=E*r+P*n+x*p+S*d;this.props[7]=E*s+P*o+x*m+S*u;this.props[8]=C*t+k*i+A*h+M*f;this.props[9]=C*e+k*a+A*l+M*c;this.props[10]=C*r+k*n+A*p+M*d;this.props[11]=C*s+k*o+A*m+M*u;this.props[12]=w*t+D*i+T*h+_*f;this.props[13]=w*e+D*a+T*l+_*c;this.props[14]=w*r+D*n+T*p+_*d;this.props[15]=w*s+D*o+T*m+_*u;this._identityCalculated=false;return this}function f(){if(!this._identityCalculated){this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]);this._identityCalculated=true}return this._identity}function c(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function d(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function u(t,e,r){return{x:t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]}}function v(t,e,r){return t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12]}function y(t,e,r){return t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13]}function g(t,e,r){return t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]}function b(t){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4];var r=this.props[5]/e;var s=-this.props[1]/e;var i=-this.props[4]/e;var a=this.props[0]/e;var n=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e;var o=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e;return[t[0]*r+t[1]*i+n,t[0]*s+t[1]*a+o,0]}function E(t){var e,r=t.length,s=[];for(e=0;e<r;e+=1)s[e]=b(t[e]);return s}function P(t,e,r,s){if(s&&2===s){var i=point_pool.newPoint();i[0]=t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12];i[1]=t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13];return i}return[t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]]}function x(t,e){if(this.isIdentity())return t+","+e;return bm_rnd(t*this.props[0]+e*this.props[4]+this.props[12])+","+bm_rnd(t*this.props[1]+e*this.props[5]+this.props[13])}function S(){return[this.props[0],this.props[1],this.props[2],this.props[3],this.props[4],this.props[5],this.props[6],this.props[7],this.props[8],this.props[9],this.props[10],this.props[11],this.props[12],this.props[13],this.props[14],this.props[15]]}function C(){if(isSafari)return"matrix3d("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[2])+","+roundTo2Decimals(this.props[3])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[6])+","+roundTo2Decimals(this.props[7])+","+roundTo2Decimals(this.props[8])+","+roundTo2Decimals(this.props[9])+","+roundTo2Decimals(this.props[10])+","+roundTo2Decimals(this.props[11])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+","+roundTo2Decimals(this.props[14])+","+roundTo2Decimals(this.props[15])+")";this.cssParts[1]=this.props.join(",");return this.cssParts.join("")}function k(){return"matrix("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+")"}function A(){return""+this.toArray()}return function(){this.reset=t;this.rotate=e;this.rotateX=r;this.rotateY=s;this.rotateZ=i;this.skew=n;this.skewFromAxis=o;this.shear=a;this.scale=h;this.setTransform=l;this.translate=p;this.transform=m;this.applyToPoint=u;this.applyToX=v;this.applyToY=y;this.applyToZ=g;this.applyToPointArray=P;this.applyToPointStringified=x;this.toArray=S;this.toCSS=C;this.to2dCSS=k;this.toString=A;this.clone=c;this.cloneFromProps=d;this.inversePoints=E;this.inversePoint=b;this._t=this.transform;this.isIdentity=f;this._identity=true;this._identityCalculated=false;this.props=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.cssParts=["matrix3d(","",")"]}}();function Matrix(){}(function(t,e){var r=this,s=256,i=6,a=52,n="random",o=e.pow(s,i),h=e.pow(2,a),l=2*h,p=s-1,m;function f(r,a,p){var m=[];a=true==a?{entropy:true}:a||{};var f=v(u(a.entropy?[r,g(t)]:null==r?y():r,3),m);var b=new c(m);var E=function(){var t=b.g(i),e=o,r=0;while(t<h){t=(t+r)*s;e*=s;r=b.g(1)}while(t>=l){t/=2;e/=2;r>>>=1}return(t+r)/e};E.int32=function(){return 0|b.g(4)};E.quick=function(){return b.g(4)/4294967296};E.double=E;v(g(b.S),t);return(a.pass||p||function(t,r,s,i){if(i){i.S&&d(i,b);t.state=function(){return d(b,{})}}if(s){e[n]=t;return r}return t})(E,f,"global"in a?a.global:this==e,a.state)}e["seed"+n]=f;function c(t){var e,r=t.length,i=this,a=0,n=i.i=i.j=0,o=i.S=[];r||(t=[r++]);while(a<s)o[a]=a++;for(a=0;a<s;a++){o[a]=o[n=p&n+t[a%r]+(e=o[a])];o[n]=e}(i.g=function(t){var e,r=0,a=i.i,n=i.j,o=i.S;while(t--){e=o[a=p&a+1];r=r*s+o[p&(o[a]=o[n=p&n+e])+(o[n]=e)]}i.i=a;i.j=n;return r})(s)}function d(t,e){e.i=t.i;e.j=t.j;e.S=t.S.slice();return e}function u(t,e){var r=[],s=typeof t,i;if(e&&"object"==s)for(i in t)try{r.push(u(t[i],e-1))}catch(t){}return r.length?r:"string"==s?t:t+"\0"}function v(t,e){var r=t+"",s,i=0;while(i<r.length)e[p&i]=p&(s^=19*e[p&i])+r.charCodeAt(i++);return g(e)}function y(){try{if(m)return g(m.randomBytes(s));var e=new Uint8Array(s);(r.crypto||r.msCrypto).getRandomValues(e);return g(e)}catch(e){var i=r.navigator,a=i&&i.plugins;return[+new Date,r,a,r.screen,g(t)]}}function g(t){return String.fromCharCode.apply(0,t)}v(e.random(),t)})([],BMMath);var BezierFactory=function(){var t={};t.getBezierEasing=r;var e={};function r(t,r,s,i,a){var n=a||("bez_"+t+"_"+r+"_"+s+"_"+i).replace(/\./g,"p");if(e[n])return e[n];var o=new y([t,r,s,i]);e[n]=o;return o}var s=4;var i=.001;var a=1e-7;var n=10;var o=11;var h=1/(o-1);var l="function"===typeof Float32Array;function p(t,e){return 1-3*e+3*t}function m(t,e){return 3*e-6*t}function f(t){return 3*t}function c(t,e,r){return((p(e,r)*t+m(e,r))*t+f(e))*t}function d(t,e,r){return 3*p(e,r)*t*t+2*m(e,r)*t+f(e)}function u(t,e,r,s,i){var o,h,l=0;do{h=e+(r-e)/2;o=c(h,s,i)-t;o>0?r=h:e=h}while(Math.abs(o)>a&&++l<n);return h}function v(t,e,r,i){for(var a=0;a<s;++a){var n=d(e,r,i);if(0===n)return e;var o=c(e,r,i)-t;e-=o/n}return e}function y(t){this._p=t;this._mSampleValues=l?new Float32Array(o):new Array(o);this._precomputed=false;this.get=this.get.bind(this)}y.prototype={get:function(t){var e=this._p[0],r=this._p[1],s=this._p[2],i=this._p[3];this._precomputed||this._precompute();if(e===r&&s===i)return t;if(0===t)return 0;if(1===t)return 1;return c(this._getTForX(t),r,i)},_precompute:function(){var t=this._p[0],e=this._p[1],r=this._p[2],s=this._p[3];this._precomputed=true;t===e&&r===s||this._calcSampleValues()},_calcSampleValues:function(){var t=this._p[0],e=this._p[2];for(var r=0;r<o;++r)this._mSampleValues[r]=c(r*h,t,e)},_getTForX:function(t){var e=this._p[0],r=this._p[2],s=this._mSampleValues;var a=0;var n=1;var l=o-1;for(;n!==l&&s[n]<=t;++n)a+=h;--n;var p=(t-s[n])/(s[n+1]-s[n]);var m=a+p*h;var f=d(m,e,r);return f>=i?v(t,m,e,r):0===f?m:u(t,a,a+h,e,r)}};return t}();(function(){var t=0;var e=["ms","moz","webkit","o"];for(var r=0;r<e.length&&!window.requestAnimationFrame;++r){window.requestAnimationFrame=window[e[r]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[e[r]+"CancelAnimationFrame"]||window[e[r]+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(e,r){var s=(new Date).getTime();var i=Math.max(0,16-(s-t));var a=setTimeout(function(){e(s+i)},i);t=s+i;return a});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})();function createElement(t,e,r){if(!e){var s=Object.create(t.prototype,r);var i={};s&&"[object Function]"===i.toString.call(s.init)&&s.init();return s}e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.prototype._parent=t.prototype}function extendPrototype(t,e){for(var r in t.prototype)t.prototype.hasOwnProperty(r)&&(e.prototype[r]=t.prototype[r])}function bezFunction(){var t=[];var e=Math;function r(t,e,r,s,i,a){var n=t*s+e*i+r*a-i*s-a*t-r*e;return n>-1e-4&&n<1e-4}function s(t,e,s,i,a,n,o,h,l){if(0===s&&0===n&&0===l)return r(t,e,i,a,o,h);var p=Math.sqrt(Math.pow(i-t,2)+Math.pow(a-e,2)+Math.pow(n-s,2));var m=Math.sqrt(Math.pow(o-t,2)+Math.pow(h-e,2)+Math.pow(l-s,2));var f=Math.sqrt(Math.pow(o-i,2)+Math.pow(h-a,2)+Math.pow(l-n,2));var c;c=p>m?p>f?p-m-f:f-m-p:f>m?f-m-p:m-p-f;return c>-1e-4&&c<1e-4}var i=function(){function t(t,e){this.l=t;this.p=e}return function(e,r,s,i){var a=defaultCurveSegments;var n;var o,h;var l,p,m=0;var f;var c=[],d=[];var u={addedLength:0,segments:[]};h=s.length;for(n=0;n<a;n+=1){p=n/(a-1);f=0;for(o=0;o<h;o+=1){l=bm_pow(1-p,3)*e[o]+3*bm_pow(1-p,2)*p*s[o]+3*(1-p)*bm_pow(p,2)*i[o]+bm_pow(p,3)*r[o];c[o]=l;null!==d[o]&&(f+=bm_pow(c[o]-d[o],2));d[o]=c[o]}if(f){f=bm_sqrt(f);m+=f}u.segments.push(new t(m,p))}u.addedLength=m;return u}}();function a(t){var e=t.c;var r=t.v;var s=t.o;var a=t.i;var n,o=t._length;var h=[];var l=0;for(n=0;n<o-1;n+=1){h[n]=i(r[n],r[n+1],s[n],a[n+1]);l+=h[n].addedLength}if(e){h[n]=i(r[n],r[0],s[n],a[0]);l+=h[n].addedLength}return{lengths:h,totalLength:l}}function n(t){this.segmentLength=0;this.points=new Array(t)}function o(t,e){this.partialLength=t;this.point=e}var h=function(){var t={};return function(e){var s=e.s;var i=e.e;var a=e.to;var h=e.ti;var l=(s.join("_")+"_"+i.join("_")+"_"+a.join("_")+"_"+h.join("_")).replace(/\./g,"p");if(t[l]){e.bezierData=t[l];return}var p=defaultCurveSegments;var m,f,c;var d,u,v=0;var y;var g,b=null;2===s.length&&(s[0]!=i[0]||s[1]!=i[1])&&r(s[0],s[1],i[0],i[1],s[0]+a[0],s[1]+a[1])&&r(s[0],s[1],i[0],i[1],i[0]+h[0],i[1]+h[1])&&(p=2);var E=new n(p);c=a.length;for(m=0;m<p;m+=1){g=new Array(c);u=m/(p-1);y=0;for(f=0;f<c;f+=1){d=bm_pow(1-u,3)*s[f]+3*bm_pow(1-u,2)*u*(s[f]+a[f])+3*(1-u)*bm_pow(u,2)*(i[f]+h[f])+bm_pow(u,3)*i[f];g[f]=d;null!==b&&(y+=bm_pow(g[f]-b[f],2))}y=bm_sqrt(y);v+=y;E.points[m]=new o(y,g);b=g}E.segmentLength=v;e.bezierData=E;t[l]=E}}();function l(t,e){var r=e.segments;var s=r.length;var i=bm_floor((s-1)*t);var a=t*e.addedLength;var n=0;if(a==r[i].l)return r[i].p;var o=r[i].l>a?-1:1;var h=true;while(h){if(r[i].l<=a&&r[i+1].l>a){n=(a-r[i].l)/(r[i+1].l-r[i].l);h=false}else i+=o;(i<0||i>=s-1)&&(h=false)}return r[i].p+(r[i+1].p-r[i].p)*n}function p(){this.pt1=new Array(2);this.pt2=new Array(2);this.pt3=new Array(2);this.pt4=new Array(2)}function m(t,e,r,s,i,a){var n=l(i,a);var o=1;var h=1-n;var p=Math.round(1e3*(h*h*h*t[0]+(n*h*h+h*n*h+h*h*n)*r[0]+(n*n*h+h*n*n+n*h*n)*s[0]+n*n*n*e[0]))/1e3;var m=Math.round(1e3*(h*h*h*t[1]+(n*h*h+h*n*h+h*h*n)*r[1]+(n*n*h+h*n*n+n*h*n)*s[1]+n*n*n*e[1]))/1e3;return[p,m]}function f(t,e,r,s,i,a,n){var o=new p;i=i<0?0:i>1?1:i;var h=l(i,n);a=a>1?1:a;var m=l(a,n);var f,c=t.length;var d=1-h;var u=1-m;for(f=0;f<c;f+=1){o.pt1[f]=Math.round(1e3*(d*d*d*t[f]+(h*d*d+d*h*d+d*d*h)*r[f]+(h*h*d+d*h*h+h*d*h)*s[f]+h*h*h*e[f]))/1e3;o.pt3[f]=Math.round(1e3*(d*d*u*t[f]+(h*d*u+d*h*u+d*d*m)*r[f]+(h*h*u+d*h*m+h*d*m)*s[f]+h*h*m*e[f]))/1e3;o.pt4[f]=Math.round(1e3*(d*u*u*t[f]+(h*u*u+d*m*u+d*u*m)*r[f]+(h*m*u+d*m*m+h*u*m)*s[f]+h*m*m*e[f]))/1e3;o.pt2[f]=Math.round(1e3*(u*u*u*t[f]+(m*u*u+u*m*u+u*u*m)*r[f]+(m*m*u+u*m*m+m*u*m)*s[f]+m*m*m*e[f]))/1e3}return o}return{getBezierLength:i,getSegmentsLength:a,getNewSegment:f,getPointInSegment:m,buildBezierData:h,pointOnLine2D:r,pointOnLine3D:s}}var bez=bezFunction();function dataFunctionManager(){function t(i,a,n){var o;var h,l;var m,f=i.length;var c,d,u,v;for(m=0;m<f;m+=1){o=i[m];if(!("ks"in o)||o.completed)continue;o.completed=true;o.tt&&(i[m-1].td=o.tt);h=[];l=-1;if(o.hasMask){var y=o.masksProperties;d=y.length;for(c=0;c<d;c+=1)if(y[c].pt.k.i)s(y[c].pt.k);else{v=y[c].pt.k.length;for(u=0;u<v;u+=1){y[c].pt.k[u].s&&s(y[c].pt.k[u].s[0]);y[c].pt.k[u].e&&s(y[c].pt.k[u].e[0])}}}if(0===o.ty){o.layers=e(o.refId,a);t(o.layers,a,n)}else 4===o.ty?r(o.shapes):5==o.ty&&p(o,n)}}function e(t,e){var r=0,s=e.length;while(r<s){if(e[r].id===t){if(!e[r].layers.__used){e[r].layers.__used=true;return e[r].layers}return JSON.parse(JSON.stringify(e[r].layers))}r+=1}}function r(t){var e,i=t.length;var a,n;var o=false;for(e=i-1;e>=0;e-=1)if("sh"==t[e].ty){if(t[e].ks.k.i)s(t[e].ks.k);else{n=t[e].ks.k.length;for(a=0;a<n;a+=1){t[e].ks.k[a].s&&s(t[e].ks.k[a].s[0]);t[e].ks.k[a].e&&s(t[e].ks.k[a].e[0])}}o=true}else"gr"==t[e].ty&&r(t[e].it)}function s(t){var e,r=t.i.length;for(e=0;e<r;e+=1){t.i[e][0]+=t.v[e][0];t.i[e][1]+=t.v[e][1];t.o[e][0]+=t.v[e][0];t.o[e][1]+=t.v[e][1]}}function i(t,e){var r=e?e.split("."):[100,100,100];if(t[0]>r[0])return true;if(r[0]>t[0])return false;if(t[1]>r[1])return true;if(r[1]>t[1])return false;if(t[2]>r[2])return true;if(r[2]>t[2])return false}var a=function(){var t=[4,4,14];function e(t){var e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function r(t){var r,s=t.length;for(r=0;r<s;r+=1)5===t[r].ty&&e(t[r])}return function(e){if(i(t,e.v)){r(e.layers);if(e.assets){var s,a=e.assets.length;for(s=0;s<a;s+=1)e.assets[s].layers&&r(e.assets[s].layers)}}}}();var n=function(){var t=[4,7,99];return function(e){if(e.chars&&!i(t,e.v)){var r,a=e.chars.length,n,o,h,l;var p,m;for(r=0;r<a;r+=1)if(e.chars[r].data&&e.chars[r].data.shapes){m=e.chars[r].data.shapes[0].it;o=m.length;for(n=0;n<o;n+=1){p=m[n].ks.k;if(!p.__converted){s(m[n].ks.k);p.__converted=true}}}}}}();var o=function(){var t=[4,1,9];function e(t){var r,s=t.length;var i,a;for(r=0;r<s;r+=1)if("gr"===t[r].ty)e(t[r].it);else if("fl"===t[r].ty||"st"===t[r].ty)if(t[r].c.k&&t[r].c.k[0].i){a=t[r].c.k.length;for(i=0;i<a;i+=1){if(t[r].c.k[i].s){t[r].c.k[i].s[0]/=255;t[r].c.k[i].s[1]/=255;t[r].c.k[i].s[2]/=255;t[r].c.k[i].s[3]/=255}if(t[r].c.k[i].e){t[r].c.k[i].e[0]/=255;t[r].c.k[i].e[1]/=255;t[r].c.k[i].e[2]/=255;t[r].c.k[i].e[3]/=255}}}else{t[r].c.k[0]/=255;t[r].c.k[1]/=255;t[r].c.k[2]/=255;t[r].c.k[3]/=255}}function r(t){var r,s=t.length;for(r=0;r<s;r+=1)4===t[r].ty&&e(t[r].shapes)}return function(e){if(i(t,e.v)){r(e.layers);if(e.assets){var s,a=e.assets.length;for(s=0;s<a;s+=1)e.assets[s].layers&&r(e.assets[s].layers)}}}}();var h=function(){var t=[4,4,18];function e(t){var r,s=t.length;var i,a;var n=false;for(r=s-1;r>=0;r-=1)if("sh"==t[r].ty){if(t[r].ks.k.i)t[r].ks.k.c=t[r].closed;else{a=t[r].ks.k.length;for(i=0;i<a;i+=1){t[r].ks.k[i].s&&(t[r].ks.k[i].s[0].c=t[r].closed);t[r].ks.k[i].e&&(t[r].ks.k[i].e[0].c=t[r].closed)}}n=true}else"gr"==t[r].ty&&e(t[r].it)}function r(t){var r;var s,i=t.length;var a,n,o,h;for(s=0;s<i;s+=1){r=t[s];if(r.hasMask){var l=r.masksProperties;n=l.length;for(a=0;a<n;a+=1)if(l[a].pt.k.i)l[a].pt.k.c=l[a].cl;else{h=l[a].pt.k.length;for(o=0;o<h;o+=1){l[a].pt.k[o].s&&(l[a].pt.k[o].s[0].c=l[a].cl);l[a].pt.k[o].e&&(l[a].pt.k[o].e[0].c=l[a].cl)}}}4===r.ty&&e(r.shapes)}}return function(e){if(i(t,e.v)){r(e.layers);if(e.assets){var s,a=e.assets.length;for(s=0;s<a;s+=1)e.assets[s].layers&&r(e.assets[s].layers)}}}}();function l(e,r){if(e.__complete)return;o(e);a(e);n(e);h(e);t(e.layers,e.assets,r);e.__complete=true}function p(t,e){0!==t.t.a.length||"m"in t.t.p||(t.singleShape=true)}var m={};m.completeData=l;return m}var dataManager=dataFunctionManager();var FontManager=function(){var t=5e3;function e(t,e){var r=document.createElement("span");r.style.fontFamily=e;var s=document.createElement("span");s.innerHTML="giItT1WQy@!-/#";r.style.position="absolute";r.style.left="-10000px";r.style.top="-10000px";r.style.fontSize="300px";r.style.fontVariant="normal";r.style.fontStyle="normal";r.style.fontWeight="normal";r.style.letterSpacing="0";r.appendChild(s);document.body.appendChild(r);var i=s.offsetWidth;s.style.fontFamily=t+", "+e;return{node:s,w:i,parent:r}}function r(){var e,s=this.fonts.length;var i,a;var n=s;for(e=0;e<s;e+=1){if(this.fonts[e].loaded){n-=1;continue}if("t"===this.fonts[e].fOrigin||2===this.fonts[e].origin){if(window.Typekit&&window.Typekit.load&&0===this.typekitLoaded){this.typekitLoaded=1;try{window.Typekit.load({async:true,active:function(){this.typekitLoaded=2}.bind(this)})}catch(t){}}2===this.typekitLoaded&&(this.fonts[e].loaded=true)}else if("n"===this.fonts[e].fOrigin||0===this.fonts[e].origin)this.fonts[e].loaded=true;else{i=this.fonts[e].monoCase.node;a=this.fonts[e].monoCase.w;if(i.offsetWidth!==a){n-=1;this.fonts[e].loaded=true}else{i=this.fonts[e].sansCase.node;a=this.fonts[e].sansCase.w;if(i.offsetWidth!==a){n-=1;this.fonts[e].loaded=true}}if(this.fonts[e].loaded){this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent);this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)}}}0!==n&&Date.now()-this.initTime<t?setTimeout(r.bind(this),20):setTimeout(function(){this.loaded=true}.bind(this),0)}function s(t,e){var r=document.createElementNS(svgNS,"text");r.style.fontSize="100px";r.style.fontFamily=e.fFamily;r.textContent="1";if(e.fClass){r.style.fontFamily="inherit";r.className=e.fClass}else r.style.fontFamily=e.fFamily;t.appendChild(r);var s=document.createElement("canvas").getContext("2d");s.font="100px "+e.fFamily;return s}function i(t,i){if(!t){this.loaded=true;return}if(this.chars){this.loaded=true;this.fonts=t.list;return}var a=t.list;var n,o=a.length;for(n=0;n<o;n+=1){a[n].loaded=false;a[n].monoCase=e(a[n].fFamily,"monospace");a[n].sansCase=e(a[n].fFamily,"sans-serif");if(a[n].fPath){if("p"===a[n].fOrigin||3===a[n].origin){var h=document.createElement("style");h.type="text/css";h.innerHTML="@font-face {font-family: "+a[n].fFamily+"; font-style: normal; src: url('"+a[n].fPath+"');}";i.appendChild(h)}else if("g"===a[n].fOrigin||1===a[n].origin){var l=document.createElement("link");l.type="text/css";l.rel="stylesheet";l.href=a[n].fPath;i.appendChild(l)}else if("t"===a[n].fOrigin||2===a[n].origin){var p=document.createElement("script");p.setAttribute("src",a[n].fPath);i.appendChild(p)}}else a[n].loaded=true;a[n].helper=s(i,a[n]);this.fonts.push(a[n])}r.bind(this)()}function a(t){if(!t)return;this.chars||(this.chars=[]);var e,r=t.length;var s,i=this.chars.length,a;for(e=0;e<r;e+=1){s=0;a=false;while(s<i){this.chars[s].style===t[e].style&&this.chars[s].fFamily===t[e].fFamily&&this.chars[s].ch===t[e].ch&&(a=true);s+=1}if(!a){this.chars.push(t[e]);i+=1}}}function n(t,e,r){var s=0,i=this.chars.length;while(s<i){if(this.chars[s].ch===t&&this.chars[s].style===e&&this.chars[s].fFamily===r)return this.chars[s];s+=1}}function o(t,e,r){var s=this.getFontByName(e);var i=s.helper;return i.measureText(t).width*r/100}function h(t){var e=0,r=this.fonts.length;while(e<r){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return"sans-serif"}var l=function(){this.fonts=[];this.chars=null;this.typekitLoaded=0;this.loaded=false;this.initTime=Date.now()};l.prototype.addChars=a;l.prototype.addFonts=i;l.prototype.getCharData=n;l.prototype.getFontByName=h;l.prototype.measureText=o;return l}();var PropertyFactory=function(){var t=-999999;function e(t,e,r,s){var i=this.offsetTime;var a;r.constructor===Array&&(a=Array.apply(null,{length:r.length}));var n=e;var o=this.keyframes.length-1,h=true;var l,p;while(h){l=this.keyframes[n];p=this.keyframes[n+1];if(n==o-1&&t>=p.t-i){l.h&&(l=p);e=0;break}if(p.t-i>t){e=n;break}if(n<o-1)n+=1;else{e=0;h=false}}var m,f,c,d,u,v;if(l.to){l.bezierData||bez.buildBezierData(l);var y=l.bezierData;if(t>=p.t-i||t<l.t-i){var g=t>=p.t-i?y.points.length-1:0;f=y.points[g].point.length;for(m=0;m<f;m+=1)a[m]=y.points[g].point[m];s._lastBezierData=null}else{if(l.__fnct)v=l.__fnct;else{v=BezierFactory.getBezierEasing(l.o.x,l.o.y,l.i.x,l.i.y,l.n).get;l.__fnct=v}c=v((t-(l.t-i))/(p.t-i-(l.t-i)));var b=y.segmentLength*c;var E;var P=s.lastFrame<t&&s._lastBezierData===y?s._lastAddedLength:0;u=s.lastFrame<t&&s._lastBezierData===y?s._lastPoint:0;h=true;d=y.points.length;while(h){P+=y.points[u].partialLength;if(0===b||0===c||u==y.points.length-1){f=y.points[u].point.length;for(m=0;m<f;m+=1)a[m]=y.points[u].point[m];break}if(b>=P&&b<P+y.points[u+1].partialLength){E=(b-P)/y.points[u+1].partialLength;f=y.points[u].point.length;for(m=0;m<f;m+=1)a[m]=y.points[u].point[m]+(y.points[u+1].point[m]-y.points[u].point[m])*E;break}u<d-1?u+=1:h=false}s._lastPoint=u;s._lastAddedLength=P-y.points[u].partialLength;s._lastBezierData=y}}else{var x,S,C,k,A;o=l.s.length;for(n=0;n<o;n+=1){if(1!==l.h)if(t>=p.t-i)c=1;else if(t<l.t-i)c=0;else{if(l.o.x.constructor===Array){l.__fnct||(l.__fnct=[]);if(l.__fnct[n])v=l.__fnct[n];else{x=l.o.x[n]||l.o.x[0];S=l.o.y[n]||l.o.y[0];C=l.i.x[n]||l.i.x[0];k=l.i.y[n]||l.i.y[0];v=BezierFactory.getBezierEasing(x,S,C,k).get;l.__fnct[n]=v}}else if(l.__fnct)v=l.__fnct;else{x=l.o.x;S=l.o.y;C=l.i.x;k=l.i.y;v=BezierFactory.getBezierEasing(x,S,C,k).get;l.__fnct=v}c=v((t-(l.t-i))/(p.t-i-(l.t-i)))}if(this.sh&&1!==l.h){var M=l.s[n];var w=l.e[n];M-w<-180?M+=360:M-w>180&&(M-=360);A=M+(w-M)*c}else A=1===l.h?l.s[n]:l.s[n]+(l.e[n]-l.s[n])*c;1===o?a=A:a[n]=A}}return{value:a,iterationIndex:e}}function r(){if(this.elem.globalData.frameId===this.frameId)return;this.mdf=false;var e=this.comp.renderedFrame-this.offsetTime;var r=this.keyframes[0].t-this.offsetTime;var s=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==t&&(this._caching.lastFrame>=s&&e>=s||this._caching.lastFrame<r&&e<r))){var i=this._caching.lastFrame<e?this._caching.lastIndex:0;var a=this.interpolateValue(e,i,this.pv,this._caching);this._caching.lastIndex=a.iterationIndex;if(this.pv.constructor===Array){i=0;while(i<this.v.length){this.pv[i]=a.value[i];this.v[i]=this.mult?this.pv[i]*this.mult:this.pv[i];if(this.lastPValue[i]!==this.pv[i]){this.mdf=true;this.lastPValue[i]=this.pv[i]}i+=1}}else{this.pv=a.value;this.v=this.mult?this.pv*this.mult:this.pv;if(this.lastPValue!=this.pv){this.mdf=true;this.lastPValue=this.pv}}}this._caching.lastFrame=e;this.frameId=this.elem.globalData.frameId}function s(){}function i(t,e,r){this.mult=r;this.v=r?e.k*r:e.k;this.pv=e.k;this.mdf=false;this.comp=t.comp;this.k=false;this.kf=false;this.vel=0;this.getValue=s}function a(t,e,r){this.mult=r;this.data=e;this.mdf=false;this.comp=t.comp;this.k=false;this.kf=false;this.frameId=-1;this.v=Array.apply(null,{length:e.k.length});this.pv=Array.apply(null,{length:e.k.length});this.lastValue=Array.apply(null,{length:e.k.length});var i=Array.apply(null,{length:e.k.length});this.vel=i.map(function(){return 0});var a,n=e.k.length;for(a=0;a<n;a+=1){this.v[a]=r?e.k[a]*r:e.k[a];this.pv[a]=e.k[a]}this.getValue=s}function n(s,i,a){this.keyframes=i.k;this.offsetTime=s.data.st;this.lastValue=-99999;this.lastPValue=-99999;this.frameId=-1;this._caching={lastFrame:t,lastIndex:0};this.k=true;this.kf=true;this.data=i;this.mult=a;this.elem=s;this.comp=s.comp;this.v=a?i.k[0].s[0]*a:i.k[0].s[0];this.pv=i.k[0].s[0];this.getValue=r;this.interpolateValue=e}function o(s,i,a){var n,o=i.k.length;var h,l,p,m;for(n=0;n<o-1;n+=1)if(i.k[n].to&&i.k[n].s&&i.k[n].e){h=i.k[n].s;l=i.k[n].e;p=i.k[n].to;m=i.k[n].ti;if(2===h.length&&!(h[0]===l[0]&&h[1]===l[1])&&bez.pointOnLine2D(h[0],h[1],l[0],l[1],h[0]+p[0],h[1]+p[1])&&bez.pointOnLine2D(h[0],h[1],l[0],l[1],l[0]+m[0],l[1]+m[1])||3===h.length&&!(h[0]===l[0]&&h[1]===l[1]&&h[2]===l[2])&&bez.pointOnLine3D(h[0],h[1],h[2],l[0],l[1],l[2],h[0]+p[0],h[1]+p[1],h[2]+p[2])&&bez.pointOnLine3D(h[0],h[1],h[2],l[0],l[1],l[2],l[0]+m[0],l[1]+m[1],l[2]+m[2])){i.k[n].to=null;i.k[n].ti=null}}this.keyframes=i.k;this.offsetTime=s.data.st;this.k=true;this.kf=true;this.mult=a;this.elem=s;this.comp=s.comp;this._caching={lastFrame:t,lastIndex:0};this.getValue=r;this.interpolateValue=e;this.frameId=-1;this.v=Array.apply(null,{length:i.k[0].s.length});this.pv=Array.apply(null,{length:i.k[0].s.length});this.lastValue=Array.apply(null,{length:i.k[0].s.length});this.lastPValue=Array.apply(null,{length:i.k[0].s.length})}var h=function(){function t(){return this.p?ExpressionValue(this.p):[this.px.v,this.py.v,this.pz?this.pz.v:0]}function e(){return ExpressionValue(this.px)}function r(){return ExpressionValue(this.py)}function s(){return ExpressionValue(this.pz)}function i(){return ExpressionValue(this.a)}function a(){return ExpressionValue(this.or)}function n(){return this.r?ExpressionValue(this.r,1/degToRads):ExpressionValue(this.rz,1/degToRads)}function o(){return ExpressionValue(this.s,100)}function h(){return ExpressionValue(this.o,100)}function l(){return ExpressionValue(this.sk)}function p(){return ExpressionValue(this.sa)}function m(t){var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1){this.dynamicProperties[e].getValue();this.dynamicProperties[e].mdf&&(this.mdf=true)}this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]);this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function f(){if(this.elem.globalData.frameId===this.frameId)return;this.mdf=false;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1){this.dynamicProperties[t].getValue();this.dynamicProperties[t].mdf&&(this.mdf=true)}if(this.mdf){this.v.reset();this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]);this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v);this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);if(this.autoOriented&&this.p.keyframes&&this.p.getValueAtTime){var r,s;if(this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t){r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/this.elem.globalData.frameRate,0);s=this.p.getValueAtTime(this.p.keyframes[0].t/this.elem.globalData.frameRate,0)}else if(this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t){r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/this.elem.globalData.frameRate,0);s=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.01)/this.elem.globalData.frameRate,0)}else{r=this.p.pv;s=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/this.elem.globalData.frameRate,this.p.offsetTime)}this.v.rotate(-Math.atan2(r[1]-s[1],r[0]-s[0]))}this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}function c(){this.inverted=true;this.iv=new Matrix;if(!this.k){this.data.p.s?this.iv.translate(this.px.v,this.py.v,-this.pz.v):this.iv.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);this.r?this.iv.rotate(-this.r.v):this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);this.s&&this.iv.scale(this.s.v[0],this.s.v[1],1);this.a&&this.iv.translate(-this.a.v[0],-this.a.v[1],this.a.v[2])}}function d(){}return function s(u,v,y){this.elem=u;this.frameId=-1;this.type="transform";this.dynamicProperties=[];this.mdf=false;this.data=v;this.getValue=f;this.applyToMatrix=m;this.setInverted=c;this.autoOrient=d;this.v=new Matrix;if(v.p.s){this.px=PropertyFactory.getProp(u,v.p.x,0,0,this.dynamicProperties);this.py=PropertyFactory.getProp(u,v.p.y,0,0,this.dynamicProperties);v.p.z&&(this.pz=PropertyFactory.getProp(u,v.p.z,0,0,this.dynamicProperties))}else this.p=PropertyFactory.getProp(u,v.p,1,0,this.dynamicProperties);if(v.r)this.r=PropertyFactory.getProp(u,v.r,0,degToRads,this.dynamicProperties);else if(v.rx){this.rx=PropertyFactory.getProp(u,v.rx,0,degToRads,this.dynamicProperties);this.ry=PropertyFactory.getProp(u,v.ry,0,degToRads,this.dynamicProperties);this.rz=PropertyFactory.getProp(u,v.rz,0,degToRads,this.dynamicProperties);this.or=PropertyFactory.getProp(u,v.or,1,degToRads,this.dynamicProperties);this.or.sh=true}if(v.sk){this.sk=PropertyFactory.getProp(u,v.sk,0,degToRads,this.dynamicProperties);this.sa=PropertyFactory.getProp(u,v.sa,0,degToRads,this.dynamicProperties)}v.a&&(this.a=PropertyFactory.getProp(u,v.a,1,0,this.dynamicProperties));v.s&&(this.s=PropertyFactory.getProp(u,v.s,1,.01,this.dynamicProperties));v.o?this.o=PropertyFactory.getProp(u,v.o,0,.01,this.dynamicProperties):this.o={mdf:false,v:1};if(this.dynamicProperties.length)y.push(this);else{this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]);this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v);this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);this.data.p.s?v.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}Object.defineProperty(this,"position",{get:t});Object.defineProperty(this,"xPosition",{get:e});Object.defineProperty(this,"yPosition",{get:r});Object.defineProperty(this,"orientation",{get:a});Object.defineProperty(this,"anchorPoint",{get:i});Object.defineProperty(this,"rotation",{get:n});Object.defineProperty(this,"scale",{get:o});Object.defineProperty(this,"opacity",{get:h});Object.defineProperty(this,"skew",{get:l});Object.defineProperty(this,"skewAxis",{get:p})}}();function l(t,e,r,s,l){var p;if(2===r)p=new h(t,e,l);else if(0===e.a)p=0===r?new i(t,e,s):new a(t,e,s);else if(1===e.a)p=0===r?new n(t,e,s):new o(t,e,s);else if(e.k.length)if("number"===typeof e.k[0])p=new a(t,e,s);else switch(r){case 0:p=new n(t,e,s);break;case 1:p=new o(t,e,s);break}else p=new i(t,e,s);p.k&&l.push(p);return p}var p=function(){function t(t){this.prop.getValue();this.cmdf=false;this.omdf=false;if(this.prop.mdf||t){var e,r=4*this.data.p;var s,i;for(e=0;e<r;e+=1){s=e%4===0?100:255;i=Math.round(this.prop.v[e]*s);if(this.c[e]!==i){this.c[e]=i;this.cmdf=true}}if(this.o.length){r=this.prop.v.length;for(e=4*this.data.p;e<r;e+=1){s=e%2===0?100:1;i=e%2===0?Math.round(100*this.prop.v[e]):this.prop.v[e];if(this.o[e-4*this.data.p]!==i){this.o[e-4*this.data.p]=i;this.omdf=true}}}}}function e(e,r,s){this.prop=l(e,r.k,1,null,[]);this.data=r;this.k=this.prop.k;this.c=Array.apply(null,{length:4*r.p});var i=r.k.k[0].s?r.k.k[0].s.length-4*r.p:r.k.k.length-4*r.p;this.o=Array.apply(null,{length:i});this.cmdf=false;this.omdf=false;this.getValue=t;this.prop.k&&s.push(this);this.getValue(true)}return function t(r,s,i){return new e(r,s,i)}}();var m=function(){function t(t){var e=0,r=this.dataProps.length;if(this.elem.globalData.frameId===this.frameId&&!t)return;this.mdf=false;this.frameId=this.elem.globalData.frameId;while(e<r){if(this.dataProps[e].p.mdf){this.mdf=true;break}e+=1}if(this.mdf||t){"svg"===this.renderer&&(this.dasharray="");for(e=0;e<r;e+=1)"o"!=this.dataProps[e].n?"svg"===this.renderer?this.dasharray+=" "+this.dataProps[e].p.v:this.dasharray[e]=this.dataProps[e].p.v:this.dashoffset=this.dataProps[e].p.v}}return function(e,r,s,i){this.elem=e;this.frameId=-1;this.dataProps=new Array(r.length);this.renderer=s;this.mdf=false;this.k=false;"svg"===this.renderer?this.dasharray="":this.dasharray=new Array(r.length-1);this.dashoffset=0;var a,n=r.length,o;for(a=0;a<n;a+=1){o=PropertyFactory.getProp(e,r[a].v,0,0,i);this.k=!!o.k||this.k;this.dataProps[a]={n:r[a].n,p:o}}this.getValue=t;this.k?i.push(this):this.getValue(true)}}();function f(t,e,r,s){return new m(t,e,r,s)}var c=function(){var t=Math.max;var e=Math.min;var r=Math.floor;function s(t){this.mdf=t||false;if(this.dynamicProperties.length){var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1){this.dynamicProperties[e].getValue();this.dynamicProperties[e].mdf&&(this.mdf=true)}}var s=this.elem.textProperty.currentData?this.elem.textProperty.currentData.l.length:0;t&&2===this.data.r&&(this.e.v=s);var i=2===this.data.r?1:100/s;var a=this.o.v/i;var n=this.s.v/i+a;var o=this.e.v/i+a;if(n>o){var h=n;n=o;o=h}this.finalS=n;this.finalE=o}function i(s){var i=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get;var a=0;var n=this.finalS;var o=this.finalE;var h=this.data.sh;if(2==h){a=o===n?s>=o?1:0:t(0,e(.5/(o-n)+(s-n)/(o-n),1));a=i(a)}else if(3==h){a=o===n?s>=o?0:1:1-t(0,e(.5/(o-n)+(s-n)/(o-n),1));a=i(a)}else if(4==h){if(o===n)a=0;else{a=t(0,e(.5/(o-n)+(s-n)/(o-n),1));a<.5?a*=2:a=1-2*(a-.5)}a=i(a)}else if(5==h){if(o===n)a=0;else{var l=o-n;s=e(t(0,s+.5-n),o-n);var p=-l/2+s;var m=l/2;a=Math.sqrt(1-p*p/(m*m))}a=i(a)}else if(6==h){if(o===n)a=0;else{s=e(t(0,s+.5-n),o-n);a=(1+Math.cos(Math.PI+2*Math.PI*s/(o-n)))/2}a=i(a)}else{s>=r(n)&&(a=s-n<0?1-(n-s):t(0,e(o-s,1)));a=i(a)}return a*this.a.v}return function t(e,r,a){this.mdf=false;this.k=false;this.data=r;this.dynamicProperties=[];this.getValue=s;this.getMult=i;this.elem=e;this.comp=e.comp;this.finalS=0;this.finalE=0;this.s=PropertyFactory.getProp(e,r.s||{k:0},0,0,this.dynamicProperties);this.e="e"in r?PropertyFactory.getProp(e,r.e,0,0,this.dynamicProperties):{v:100};this.o=PropertyFactory.getProp(e,r.o||{k:0},0,0,this.dynamicProperties);this.xe=PropertyFactory.getProp(e,r.xe||{k:0},0,0,this.dynamicProperties);this.ne=PropertyFactory.getProp(e,r.ne||{k:0},0,0,this.dynamicProperties);this.a=PropertyFactory.getProp(e,r.a,0,.01,this.dynamicProperties);this.dynamicProperties.length?a.push(this):this.getValue()}}();function d(t,e,r){return new c(t,e,r)}var u={getProp:l,getDashProp:f,getTextSelectorProp:d,getGradientProp:p};return u}();function ShapePath(){this.c=false;this._length=0;this._maxLength=8;this.v=Array.apply(null,{length:this._maxLength});this.o=Array.apply(null,{length:this._maxLength});this.i=Array.apply(null,{length:this._maxLength})}ShapePath.prototype.setPathData=function(t,e){this.c=t;this.setLength(e);var r=0;while(r<e){this.v[r]=point_pool.newPoint();this.o[r]=point_pool.newPoint();this.i[r]=point_pool.newPoint();r+=1}};ShapePath.prototype.setLength=function(t){while(this._maxLength<t)this.doubleArrayLength();this._length=t};ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(Array.apply(null,{length:this._maxLength}));this.i=this.i.concat(Array.apply(null,{length:this._maxLength}));this.o=this.o.concat(Array.apply(null,{length:this._maxLength}));this._maxLength*=2};ShapePath.prototype.setXYAt=function(t,e,r,s,i){var a;this._length=Math.max(this._length,s+1);this._length>=this._maxLength&&this.doubleArrayLength();switch(r){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break}(!a[s]||a[s]&&!i)&&(a[s]=point_pool.newPoint());a[s][0]=t;a[s][1]=e};ShapePath.prototype.setTripleAt=function(t,e,r,s,i,a,n,o){this.setXYAt(t,e,"v",n,o);this.setXYAt(r,s,"o",n,o);this.setXYAt(i,a,"i",n,o)};var ShapePropertyFactory=function(){var t=-999999;function e(t,e,r,s){var i,a,n;if(t<this.keyframes[0].t-this.offsetTime){i=this.keyframes[0].s[0];n=true;e=0}else if(t>=this.keyframes[this.keyframes.length-1].t-this.offsetTime){i=1===this.keyframes[this.keyframes.length-2].h?this.keyframes[this.keyframes.length-1].s[0]:this.keyframes[this.keyframes.length-2].e[0];n=true}else{var o=e;var h=this.keyframes.length-1,l=true,p,m,f,c,d,u;while(l){p=this.keyframes[o];m=this.keyframes[o+1];if(m.t-this.offsetTime>t)break;o<h-1?o+=1:l=false}n=1===p.h;e=o;var v;if(!n){if(t>=m.t-this.offsetTime)v=1;else if(t<p.t-this.offsetTime)v=0;else{var y;if(p.__fnct)y=p.__fnct;else{y=BezierFactory.getBezierEasing(p.o.x,p.o.y,p.i.x,p.i.y).get;p.__fnct=y}v=y((t-(p.t-this.offsetTime))/(m.t-this.offsetTime-(p.t-this.offsetTime)))}a=p.e[0]}i=p.s[0]}c=r._length;u=i.i[0].length;var g=false;var b;for(f=0;f<c;f+=1)for(d=0;d<u;d+=1)if(n){b=i.i[f][d];if(r.i[f][d]!==b){r.i[f][d]=b;s&&(this.pv.i[f][d]=b);g=true}b=i.o[f][d];if(r.o[f][d]!==b){r.o[f][d]=b;s&&(this.pv.o[f][d]=b);g=true}b=i.v[f][d];if(r.v[f][d]!==b){r.v[f][d]=b;s&&(this.pv.v[f][d]=b);g=true}}else{b=i.i[f][d]+(a.i[f][d]-i.i[f][d])*v;if(r.i[f][d]!==b){r.i[f][d]=b;s&&(this.pv.i[f][d]=b);g=true}b=i.o[f][d]+(a.o[f][d]-i.o[f][d])*v;if(r.o[f][d]!==b){r.o[f][d]=b;s&&(this.pv.o[f][d]=b);g=true}b=i.v[f][d]+(a.v[f][d]-i.v[f][d])*v;if(r.v[f][d]!==b){r.v[f][d]=b;s&&(this.pv.v[f][d]=b);g=true}}g&&(r.c=i.c);return{iterationIndex:e,hasModified:g}}function r(){if(this.elem.globalData.frameId===this.frameId)return;this.mdf=false;var e=this.comp.renderedFrame-this.offsetTime;var r=this.keyframes[0].t-this.offsetTime;var s=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(this.lastFrame!==t&&(this.lastFrame<r&&e<r||this.lastFrame>s&&e>s))){var i=this.lastFrame<e?this._lastIndex:0;var a=this.interpolateShape(e,i,this.v,true);this._lastIndex=a.iterationIndex;this.mdf=a.hasModified;a.hasModified&&(this.paths=this.localShapeCollection)}this.lastFrame=e;this.frameId=this.elem.globalData.frameId}function s(){return this.v}function i(){this.paths=this.localShapeCollection;this.k||(this.mdf=false)}function a(t,e,r){this.__shapeObject=1;this.comp=t.comp;this.k=false;this.mdf=false;var s=3===r?e.pt.k:e.ks.k;this.v=shape_pool.clone(s);this.pv=shape_pool.clone(this.v);this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.paths=this.localShapeCollection;this.paths.addShape(this.v);this.reset=i}a.prototype.interpolateShape=e;a.prototype.getValue=s;function n(e,r,s){this.__shapeObject=1;this.comp=e.comp;this.elem=e;this.offsetTime=e.data.st;this._lastIndex=0;this.keyframes=3===s?r.pt.k:r.ks.k;this.k=true;this.kf=true;var a,n=this.keyframes[0].s[0].i.length;var o=this.keyframes[0].s[0].i[0].length;this.v=shape_pool.newShape();this.v.setPathData(this.keyframes[0].s[0].c,n);this.pv=shape_pool.clone(this.v);this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.paths=this.localShapeCollection;this.paths.addShape(this.v);this.lastFrame=t;this.reset=i}n.prototype.getValue=r;n.prototype.interpolateShape=e;var o=function(){var t=roundCorner;function e(){var e=this.p.v[0],r=this.p.v[1],s=this.s.v[0]/2,i=this.s.v[1]/2;if(3!==this.d){this.v.v[0][0]=e;this.v.v[0][1]=r-i;this.v.v[1][0]=e+s;this.v.v[1][1]=r;this.v.v[2][0]=e;this.v.v[2][1]=r+i;this.v.v[3][0]=e-s;this.v.v[3][1]=r;this.v.i[0][0]=e-s*t;this.v.i[0][1]=r-i;this.v.i[1][0]=e+s;this.v.i[1][1]=r-i*t;this.v.i[2][0]=e+s*t;this.v.i[2][1]=r+i;this.v.i[3][0]=e-s;this.v.i[3][1]=r+i*t;this.v.o[0][0]=e+s*t;this.v.o[0][1]=r-i;this.v.o[1][0]=e+s;this.v.o[1][1]=r+i*t;this.v.o[2][0]=e-s*t;this.v.o[2][1]=r+i;this.v.o[3][0]=e-s;this.v.o[3][1]=r-i*t}else{this.v.v[0][0]=e;this.v.v[0][1]=r-i;this.v.v[1][0]=e-s;this.v.v[1][1]=r;this.v.v[2][0]=e;this.v.v[2][1]=r+i;this.v.v[3][0]=e+s;this.v.v[3][1]=r;this.v.i[0][0]=e+s*t;this.v.i[0][1]=r-i;this.v.i[1][0]=e-s;this.v.i[1][1]=r-i*t;this.v.i[2][0]=e-s*t;this.v.i[2][1]=r+i;this.v.i[3][0]=e+s;this.v.i[3][1]=r+i*t;this.v.o[0][0]=e-s*t;this.v.o[0][1]=r-i;this.v.o[1][0]=e-s;this.v.o[1][1]=r+i*t;this.v.o[2][0]=e+s*t;this.v.o[2][1]=r+i;this.v.o[3][0]=e+s;this.v.o[3][1]=r-i*t}}function r(t){var e,r=this.dynamicProperties.length;if(this.elem.globalData.frameId===this.frameId)return;this.mdf=false;this.frameId=this.elem.globalData.frameId;for(e=0;e<r;e+=1){this.dynamicProperties[e].getValue(t);this.dynamicProperties[e].mdf&&(this.mdf=true)}this.mdf&&this.convertEllToPath()}return function t(s,a){this.v=shape_pool.newShape();this.v.setPathData(true,4);this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.paths=this.localShapeCollection;this.localShapeCollection.addShape(this.v);this.d=a.d;this.dynamicProperties=[];this.elem=s;this.comp=s.comp;this.frameId=-1;this.mdf=false;this.getValue=r;this.convertEllToPath=e;this.reset=i;this.p=PropertyFactory.getProp(s,a.p,1,0,this.dynamicProperties);this.s=PropertyFactory.getProp(s,a.s,1,0,this.dynamicProperties);this.dynamicProperties.length?this.k=true:this.convertEllToPath()}}();var h=function(){function t(){var t=Math.floor(this.pt.v);var e=2*Math.PI/t;var r=this.or.v;var s=this.os.v;var i=2*Math.PI*r/(4*t);var a,n=-Math.PI/2;var o=3===this.data.d?-1:1;n+=this.r.v;this.v._length=0;for(a=0;a<t;a+=1){var h=r*Math.cos(n);var l=r*Math.sin(n);var p=0===h&&0===l?0:l/Math.sqrt(h*h+l*l);var m=0===h&&0===l?0:-h/Math.sqrt(h*h+l*l);h+=+this.p.v[0];l+=+this.p.v[1];this.v.setTripleAt(h,l,h-p*i*s*o,l-m*i*s*o,h+p*i*s*o,l+m*i*s*o,a,true);n+=e*o}this.paths.length=0;this.paths[0]=this.v}function e(){var t=2*Math.floor(this.pt.v);var e=2*Math.PI/t;var r=true;var s=this.or.v;var i=this.ir.v;var a=this.os.v;var n=this.is.v;var o=2*Math.PI*s/(2*t);var h=2*Math.PI*i/(2*t);var l,p,m,f,c=-Math.PI/2;c+=this.r.v;var d=3===this.data.d?-1:1;this.v._length=0;for(l=0;l<t;l+=1){p=r?s:i;m=r?a:n;f=r?o:h;var u=p*Math.cos(c);var v=p*Math.sin(c);var y=0===u&&0===v?0:v/Math.sqrt(u*u+v*v);var g=0===u&&0===v?0:-u/Math.sqrt(u*u+v*v);u+=+this.p.v[0];v+=+this.p.v[1];this.v.setTripleAt(u,v,u-y*f*m*d,v-g*f*m*d,u+y*f*m*d,v+g*f*m*d,l,true);r=!r;c+=e*d}}function r(){if(this.elem.globalData.frameId===this.frameId)return;this.mdf=false;this.frameId=this.elem.globalData.frameId;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1){this.dynamicProperties[t].getValue();this.dynamicProperties[t].mdf&&(this.mdf=true)}this.mdf&&this.convertToPath()}return function s(a,n){this.v=shape_pool.newShape();this.v.setPathData(true,0);this.elem=a;this.comp=a.comp;this.data=n;this.frameId=-1;this.d=n.d;this.dynamicProperties=[];this.mdf=false;this.getValue=r;this.reset=i;if(1===n.sy){this.ir=PropertyFactory.getProp(a,n.ir,0,0,this.dynamicProperties);this.is=PropertyFactory.getProp(a,n.is,0,.01,this.dynamicProperties);this.convertToPath=e}else this.convertToPath=t;this.pt=PropertyFactory.getProp(a,n.pt,0,0,this.dynamicProperties);this.p=PropertyFactory.getProp(a,n.p,1,0,this.dynamicProperties);this.r=PropertyFactory.getProp(a,n.r,0,degToRads,this.dynamicProperties);this.or=PropertyFactory.getProp(a,n.or,0,0,this.dynamicProperties);this.os=PropertyFactory.getProp(a,n.os,0,.01,this.dynamicProperties);this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.localShapeCollection.addShape(this.v);this.paths=this.localShapeCollection;this.dynamicProperties.length?this.k=true:this.convertToPath()}}();var l=function(){function t(t){if(this.elem.globalData.frameId===this.frameId)return;this.mdf=false;this.frameId=this.elem.globalData.frameId;var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1){this.dynamicProperties[e].getValue(t);this.dynamicProperties[e].mdf&&(this.mdf=true)}this.mdf&&this.convertRectToPath()}function e(){var t=this.p.v[0],e=this.p.v[1],r=this.s.v[0]/2,s=this.s.v[1]/2;var i=bm_min(r,s,this.r.v);var a=i*(1-roundCorner);this.v._length=0;if(2===this.d||1===this.d){this.v.setTripleAt(t+r,e-s+i,t+r,e-s+i,t+r,e-s+a,0,true);this.v.setTripleAt(t+r,e+s-i,t+r,e+s-a,t+r,e+s-i,1,true);if(0!==i){this.v.setTripleAt(t+r-i,e+s,t+r-i,e+s,t+r-a,e+s,2,true);this.v.setTripleAt(t-r+i,e+s,t-r+a,e+s,t-r+i,e+s,3,true);this.v.setTripleAt(t-r,e+s-i,t-r,e+s-i,t-r,e+s-a,4,true);this.v.setTripleAt(t-r,e-s+i,t-r,e-s+a,t-r,e-s+i,5,true);this.v.setTripleAt(t-r+i,e-s,t-r+i,e-s,t-r+a,e-s,6,true);this.v.setTripleAt(t+r-i,e-s,t+r-a,e-s,t+r-i,e-s,7,true)}else{this.v.setTripleAt(t-r,e+s,t-r+a,e+s,t-r,e+s,2);this.v.setTripleAt(t-r,e-s,t-r,e-s+a,t-r,e-s,3)}}else{this.v.setTripleAt(t+r,e-s+i,t+r,e-s+a,t+r,e-s+i,0,true);if(0!==i){this.v.setTripleAt(t+r-i,e-s,t+r-i,e-s,t+r-a,e-s,1,true);this.v.setTripleAt(t-r+i,e-s,t-r+a,e-s,t-r+i,e-s,2,true);this.v.setTripleAt(t-r,e-s+i,t-r,e-s+i,t-r,e-s+a,3,true);this.v.setTripleAt(t-r,e+s-i,t-r,e+s-a,t-r,e+s-i,4,true);this.v.setTripleAt(t-r+i,e+s,t-r+i,e+s,t-r+a,e+s,5,true);this.v.setTripleAt(t+r-i,e+s,t+r-a,e+s,t+r-i,e+s,6,true);this.v.setTripleAt(t+r,e+s-i,t+r,e+s-i,t+r,e+s-a,7,true)}else{this.v.setTripleAt(t-r,e-s,t-r+a,e-s,t-r,e-s,1,true);this.v.setTripleAt(t-r,e+s,t-r,e+s-a,t-r,e+s,2,true);this.v.setTripleAt(t+r,e+s,t+r-a,e+s,t+r,e+s,3,true)}}}return function r(s,a){this.v=shape_pool.newShape();this.v.c=true;this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.localShapeCollection.addShape(this.v);this.paths=this.localShapeCollection;this.elem=s;this.comp=s.comp;this.frameId=-1;this.d=a.d;this.dynamicProperties=[];this.mdf=false;this.getValue=t;this.convertRectToPath=e;this.reset=i;this.p=PropertyFactory.getProp(s,a.p,1,0,this.dynamicProperties);this.s=PropertyFactory.getProp(s,a.s,1,0,this.dynamicProperties);this.r=PropertyFactory.getProp(s,a.r,0,0,this.dynamicProperties);this.dynamicProperties.length?this.k=true:this.convertRectToPath()}}();function p(t,e,r,s){var i;if(3===r||4===r){var p=3===r?e.pt:e.ks;var m=p.k;i=1===p.a||m.length?new n(t,e,r):new a(t,e,r)}else 5===r?i=new l(t,e):6===r?i=new o(t,e):7===r&&(i=new h(t,e));i.k&&s.push(i);return i}function m(){return a}function f(){return n}var c={};c.getShapeProp=p;c.getConstructorFunction=m;c.getKeyframedConstructorFunction=f;return c}();var ShapeModifiers=function(){var t={};var e={};t.registerModifier=r;t.getModifier=s;function r(t,r){e[t]||(e[t]=r)}function s(t,r,s,i){return new e[t](r,s,i)}return t}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){};ShapeModifier.prototype.addShapeToModifier=function(){};ShapeModifier.prototype.addShape=function(t){if(!this.closed){this.shapes.push({shape:t.sh,data:t,localShapeCollection:shapeCollection_pool.newShapeCollection()});this.addShapeToModifier(t.sh)}};ShapeModifier.prototype.init=function(t,e,r){this.elem=t;this.frameId=-1;this.shapes=[];this.dynamicProperties=[];this.mdf=false;this.closed=false;this.k=false;this.comp=t.comp;this.initModifierProperties(t,e);if(this.dynamicProperties.length){this.k=true;r.push(this)}else this.getValue(true)};function TrimModifier(){}extendPrototype(ShapeModifier,TrimModifier);TrimModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId===this.frameId&&!t)return;this.mdf=!!t;this.frameId=this.elem.globalData.frameId;var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1){this.dynamicProperties[e].getValue();this.dynamicProperties[e].mdf&&(this.mdf=true)}if(this.mdf||t){var s=this.o.v%360/360;s<0&&(s+=1);var i=this.s.v+s;var a=this.e.v+s;i==a;if(i>a){var n=i;i=a;a=n}this.sValue=i;this.eValue=a;this.oValue=s}};TrimModifier.prototype.initModifierProperties=function(t,e){this.sValue=0;this.eValue=0;this.oValue=0;this.getValue=this.processKeys;this.s=PropertyFactory.getProp(t,e.s,0,.01,this.dynamicProperties);this.e=PropertyFactory.getProp(t,e.e,0,.01,this.dynamicProperties);this.o=PropertyFactory.getProp(t,e.o,0,0,this.dynamicProperties);this.m=e.m;this.dynamicProperties.length||this.getValue(true)};TrimModifier.prototype.calculateShapeEdges=function(t,e,r,s,i){var a=[];if(e<=1)a.push({s:t,e:e});else if(t>=1)a.push({s:t-1,e:e-1});else{a.push({s:t,e:1});a.push({s:0,e:e-1})}var n=[];var o,h=a.length,l;for(o=0;o<h;o+=1){l=a[o];if(l.e*i<s||l.s*i>s+r);else{var p,m;p=l.s*i<=s?0:(l.s*i-s)/r;m=l.e*i>=s+r?1:(l.e*i-s)/r;n.push([p,m])}}n.length||n.push([0,0]);return n};TrimModifier.prototype.processShapes=function(t){var e;var r,s=this.shapes.length;var i,a;var n=this.sValue;var o=this.eValue;var h,l,p,m=0;if(o===n)for(r=0;r<s;r+=1){this.shapes[r].localShapeCollection.releaseShapes();this.shapes[r].shape.mdf=true;this.shapes[r].shape.paths=this.shapes[r].localShapeCollection}else if(1===o&&0===n||0===o&&1===n){if(this.mdf)for(r=0;r<s;r+=1)this.shapes[r].shape.mdf=true}else{var f=[],c,d;for(r=0;r<s;r+=1){c=this.shapes[r];if(c.shape.mdf||this.mdf||t||2===this.m){e=c.shape.paths;a=e._length;p=0;if(!c.shape.mdf&&c.pathsData)p=c.totalShapeLength;else{h=[];for(i=0;i<a;i+=1){l=bez.getSegmentsLength(e.shapes[i]);h.push(l);p+=l.totalLength}c.totalShapeLength=p;c.pathsData=h}m+=p;c.shape.mdf=true}else c.shape.paths=c.localShapeCollection}var u=n,v=o,y=0;var i,a;for(r=s-1;r>=0;r-=1){c=this.shapes[r];if(c.shape.mdf){d=c.localShapeCollection;d.releaseShapes();if(2===this.m&&s>1){var g=this.calculateShapeEdges(n,o,c.totalShapeLength,y,m);y+=c.totalShapeLength}else g=[[u,v]];a=g.length;for(i=0;i<a;i+=1){u=g[i][0];v=g[i][1];f.length=0;if(v<=1)f.push({s:c.totalShapeLength*u,e:c.totalShapeLength*v});else if(u>=1)f.push({s:c.totalShapeLength*(u-1),e:c.totalShapeLength*(v-1)});else{f.push({s:c.totalShapeLength*u,e:c.totalShapeLength});f.push({s:0,e:c.totalShapeLength*(v-1)})}var b=this.addShapes(c,f[0]);if(f[0].s!==f[0].e){var E;if(f.length>1)if(c.shape.v.c){var P=b.pop();this.addPaths(b,d);b=this.addShapes(c,f[1],P)}else{this.addPaths(b,d);b=this.addShapes(c,f[1])}this.addPaths(b,d)}}c.shape.paths=d}}}this.dynamicProperties.length||(this.mdf=false)};TrimModifier.prototype.addPaths=function(t,e){var r,s=t.length;for(r=0;r<s;r+=1)e.addShape(t[r])};TrimModifier.prototype.addSegment=function(t,e,r,s,i,a,n){i.setXYAt(e[0],e[1],"o",a);i.setXYAt(r[0],r[1],"i",a+1);n&&i.setXYAt(t[0],t[1],"v",a);i.setXYAt(s[0],s[1],"v",a+1)};TrimModifier.prototype.addShapes=function(t,e,r){var s=t.pathsData;var i=t.shape.paths.shapes;var a,n=t.shape.paths._length,o,h;var l=0;var p,m;var f;var c;var d=[];var u;var v=true;if(r){m=r._length;u=r._length}else{r=shape_pool.newShape();m=0;u=0}d.push(r);for(a=0;a<n;a+=1){f=s[a].lengths;r.c=i[a].c;h=i[a].c?f.length:f.length+1;for(o=1;o<h;o+=1){p=f[o-1];if(l+p.addedLength<e.s){l+=p.addedLength;r.c=false}else{if(l>e.e){r.c=false;break}if(e.s<=l&&e.e>=l+p.addedLength){this.addSegment(i[a].v[o-1],i[a].o[o-1],i[a].i[o],i[a].v[o],r,m,v);v=false}else{c=bez.getNewSegment(i[a].v[o-1],i[a].v[o],i[a].o[o-1],i[a].i[o],(e.s-l)/p.addedLength,(e.e-l)/p.addedLength,f[o-1]);this.addSegment(c.pt1,c.pt3,c.pt4,c.pt2,r,m,v);v=false;r.c=false}l+=p.addedLength;m+=1}}if(i[a].c){p=f[o-1];if(l<=e.e){var y=f[o-1].addedLength;if(e.s<=l&&e.e>=l+y){this.addSegment(i[a].v[o-1],i[a].o[o-1],i[a].i[0],i[a].v[0],r,m,v);v=false}else{c=bez.getNewSegment(i[a].v[o-1],i[a].v[0],i[a].o[o-1],i[a].i[0],(e.s-l)/y,(e.e-l)/y,f[o-1]);this.addSegment(c.pt1,c.pt3,c.pt4,c.pt2,r,m,v);v=false;r.c=false}}else r.c=false;l+=p.addedLength;m+=1}if(r._length){r.setXYAt(r.v[u][0],r.v[u][1],"i",u);r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)}if(l>e.e)break;if(a<n-1){r=shape_pool.newShape();v=true;d.push(r);m=0}}return d};ShapeModifiers.registerModifier("tm",TrimModifier);function RoundCornersModifier(){}extendPrototype(ShapeModifier,RoundCornersModifier);RoundCornersModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId===this.frameId&&!t)return;this.mdf=!!t;this.frameId=this.elem.globalData.frameId;var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1){this.dynamicProperties[e].getValue();this.dynamicProperties[e].mdf&&(this.mdf=true)}};RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys;this.rd=PropertyFactory.getProp(t,e.r,0,null,this.dynamicProperties);this.dynamicProperties.length||this.getValue(true)};RoundCornersModifier.prototype.processPath=function(t,e){var r=shape_pool.newShape();r.c=t.c;var s,i=t._length;var a,n,o,h,l,p,m,f,c,d=0;var u,v,y,g,b,E;for(s=0;s<i;s+=1){a=t.v[s];o=t.o[s];n=t.i[s];if(a[0]===o[0]&&a[1]===o[1]&&a[0]===n[0]&&a[1]===n[1])if(0!==s&&s!==i-1||t.c){h=0===s?t.v[i-1]:t.v[s-1];f=Math.sqrt(Math.pow(a[0]-h[0],2)+Math.pow(a[1]-h[1],2));c=f?Math.min(f/2,e)/f:0;u=b=a[0]+(h[0]-a[0])*c;v=E=a[1]-(a[1]-h[1])*c;y=u-(u-a[0])*roundCorner;g=v-(v-a[1])*roundCorner;r.setTripleAt(u,v,y,g,b,E,d);d+=1;h=s===i-1?t.v[0]:t.v[s+1];f=Math.sqrt(Math.pow(a[0]-h[0],2)+Math.pow(a[1]-h[1],2));c=f?Math.min(f/2,e)/f:0;u=y=a[0]+(h[0]-a[0])*c;v=g=a[1]+(h[1]-a[1])*c;b=u-(u-a[0])*roundCorner;E=v-(v-a[1])*roundCorner;r.setTripleAt(u,v,y,g,b,E,d);d+=1}else{r.setTripleAt(a[0],a[1],o[0],o[1],n[0],n[1],d);d+=1}else{r.setTripleAt(t.v[s][0],t.v[s][1],t.o[s][0],t.o[s][1],t.i[s][0],t.i[s][1],d);d+=1}}return r};RoundCornersModifier.prototype.processShapes=function(t){var e;var r,s=this.shapes.length;var i,a;var n=this.rd.v;if(0!==n){var o,h,l;for(r=0;r<s;r+=1){o=this.shapes[r];h=o.shape.paths;l=o.localShapeCollection;if(!(!o.shape.mdf&&!this.mdf&&!t)){l.releaseShapes();o.shape.mdf=true;e=o.shape.paths.shapes;a=o.shape.paths._length;for(i=0;i<a;i+=1)l.addShape(this.processPath(e[i],n))}o.shape.paths=o.localShapeCollection}}this.dynamicProperties.length||(this.mdf=false)};ShapeModifiers.registerModifier("rd",RoundCornersModifier);function RepeaterModifier(){}RepeaterModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId===this.frameId&&!t)return;this.mdf=!!t;var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1){this.dynamicProperties[e].getValue();this.dynamicProperties[e].mdf&&(this.mdf=true)}};RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys;this.c=PropertyFactory.getProp(t,e.c,0,null,this.dynamicProperties);this.o=PropertyFactory.getProp(t,e.o,0,null,this.dynamicProperties);this.tr=PropertyFactory.getProp(t,e.tr,2,null,this.dynamicProperties);this.data=e;this.dynamicProperties.length||this.getValue(true);this.pMatrix=new Matrix;this.rMatrix=new Matrix;this.sMatrix=new Matrix;this.tMatrix=new Matrix;this.matrix=new Matrix};RepeaterModifier.prototype.applyTransforms=function(t,e,r,s,i,a){var n=a?-1:1;var o=s.s.v[0]+(1-s.s.v[0])*(1-i);var h=s.s.v[1]+(1-s.s.v[1])*(1-i);t.translate(s.p.v[0]*n*i,s.p.v[1]*n*i,s.p.v[2]);e.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]);e.rotate(-s.r.v*n*i);e.translate(s.a.v[0],s.a.v[1],s.a.v[2]);r.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]);r.scale(a?1/o:o,a?1/h:h);r.translate(s.a.v[0],s.a.v[1],s.a.v[2])};RepeaterModifier.prototype.init=function(t,e,r,s,i){this.elem=t;this.arr=e;this.pos=r;this.elemsData=s;this._currentCopies=0;this._elements=[];this._groups=[];this.dynamicProperties=[];this.frameId=-1;this.initModifierProperties(t,e[r]);var a=0;while(r>0){r-=1;this._elements.unshift(e[r]);a+=1}if(this.dynamicProperties.length){this.k=true;i.push(this)}else this.getValue(true)};RepeaterModifier.prototype.resetElements=function(t){var e,r=t.length;for(e=0;e<r;e+=1){t[e]._processed=false;"gr"===t[e].ty&&this.resetElements(t[e].it)}};RepeaterModifier.prototype.cloneElements=function(t){var e,r=t.length;var s=JSON.parse(JSON.stringify(t));this.resetElements(s);return s};RepeaterModifier.prototype.changeGroupRender=function(t,e){var r,s=t.length;for(r=0;r<s;r+=1){t[r]._render=e;"gr"===t[r].ty&&this.changeGroupRender(t[r].it,e)}};RepeaterModifier.prototype.processShapes=function(t){if(this.elem.globalData.frameId===this.frameId)return;this.frameId=this.elem.globalData.frameId;this.dynamicProperties.length||t||(this.mdf=false);if(this.mdf){var e=Math.ceil(this.c.v);if(this._groups.length<e){while(this._groups.length<e){var r={it:this.cloneElements(this._elements),ty:"gr"};r.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:0,ix:6,k:0},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"});this.arr.splice(0,0,r);this._groups.splice(0,0,r);this._currentCopies+=1}this.elem.reloadShapes()}var s,i=0,a;for(s=0;s<=this._groups.length-1;s+=1){a=i<e;this._groups[s]._render=a;this.changeGroupRender(this._groups[s].it,a);i+=1}this._currentCopies=e;this.elem.firstFrame=true;var n=this.o.v;var o=n%1;var h=n>0?Math.floor(n):Math.ceil(n);var l;var p=this.tr.v.props;var m=this.pMatrix.props;var f=this.rMatrix.props;var c=this.sMatrix.props;this.pMatrix.reset();this.rMatrix.reset();this.sMatrix.reset();this.tMatrix.reset();this.matrix.reset();var d=0;if(n>0){while(d<h){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,false);d+=1}if(o){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,o,false);d+=o}}else if(n<0){while(d>h){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,true);d-=1}if(o){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-o,true);d-=o}}s=1===this.data.m?0:this._currentCopies-1;var u=1===this.data.m?1:-1;i=this._currentCopies;while(i){if(0!==d){(0!==s&&1===u||s!==this._currentCopies-1&&-1===u)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,false);this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]);this.matrix.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]);this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]);var v=this.elemsData[s].it;var y=v[v.length-1].transform.mProps.v.props;var g,b=y.length;for(g=0;g<b;g+=1)y[g]=this.matrix.props[g];this.matrix.reset()}else{this.matrix.reset();var v=this.elemsData[s].it;var y=v[v.length-1].transform.mProps.v.props;var g,b=y.length;for(g=0;g<b;g+=1)y[g]=this.matrix.props[g]}d+=1;i-=1;s+=u}}};RepeaterModifier.prototype.addShape=function(){};ShapeModifiers.registerModifier("rp",RepeaterModifier);function ShapeCollection(){this._length=0;this._maxLength=4;this.shapes=Array.apply(null,{length:this._maxLength})}ShapeCollection.prototype.addShape=function(t){if(this._length===this._maxLength){this.shapes=this.shapes.concat(Array.apply(null,{length:this._maxLength}));this._maxLength*=2}this.shapes[this._length]=t;this._length+=1};ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shape_pool.release(this.shapes[t]);this._length=0};var ImagePreloader=function(){var t;function e(){this.loadedAssets+=1;this.loadedAssets===this.totalImages&&t&&t(null)}function r(t){var e="";if(this.assetsPath){var r=t.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]);e=this.assetsPath+r}else{e=this.path;e+=t.u?t.u:"";e+=t.p}return e}function s(t){var r=document.createElement("img");r.addEventListener("load",e.bind(this),false);r.addEventListener("error",e.bind(this),false);r.src=t}function i(e,i){t=i;this.totalAssets=e.length;var a;for(a=0;a<this.totalAssets;a+=1)if(!e[a].layers){s.bind(this)(r.bind(this)(e[a]));this.totalImages+=1}}function a(t){this.path=t||""}function n(t){this.assetsPath=t||""}return function t(){this.loadAssets=i;this.setAssetsPath=n;this.setPath=a;this.assetsPath="";this.path="";this.totalAssets=0;this.totalImages=0;this.loadedAssets=0}}();var featureSupport=function(){var t={maskType:true};(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=false);return t}();var filtersFactory=function(){var t={};t.createFilter=e;t.createAlphaToLuminanceFilter=r;function e(t){var e=document.createElementNS(svgNS,"filter");e.setAttribute("id",t);e.setAttribute("filterUnits","objectBoundingBox");e.setAttribute("x","0%");e.setAttribute("y","0%");e.setAttribute("width","100%");e.setAttribute("height","100%");return e}function r(){var t=document.createElementNS(svgNS,"feColorMatrix");t.setAttribute("type","matrix");t.setAttribute("color-interpolation-filters","sRGB");t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1");return t}return t}();function TextAnimatorProperty(t,e,r){this.mdf=false;this._firstFrame=true;this._hasMaskedPath=false;this._frameId=-1;this._dynamicProperties=[];this._textData=t;this._renderType=e;this._elem=r;this._animatorsData=Array.apply(null,{length:this._textData.a.length});this._pathData={};this._moreOptions={alignment:{}};this.renderedLetters=[];this.lettersChangedFlag=false}TextAnimatorProperty.prototype.searchProperties=function(t){var e,r=this._textData.a.length,s,i;var a=PropertyFactory.getProp;for(e=0;e<r;e+=1){i=this._textData.a[e];s={a:{},s:{}};"r"in i.a&&(s.a.r=a(this._elem,i.a.r,0,degToRads,this._dynamicProperties));"rx"in i.a&&(s.a.rx=a(this._elem,i.a.rx,0,degToRads,this._dynamicProperties));"ry"in i.a&&(s.a.ry=a(this._elem,i.a.ry,0,degToRads,this._dynamicProperties));"sk"in i.a&&(s.a.sk=a(this._elem,i.a.sk,0,degToRads,this._dynamicProperties));"sa"in i.a&&(s.a.sa=a(this._elem,i.a.sa,0,degToRads,this._dynamicProperties));"s"in i.a&&(s.a.s=a(this._elem,i.a.s,1,.01,this._dynamicProperties));"a"in i.a&&(s.a.a=a(this._elem,i.a.a,1,0,this._dynamicProperties));"o"in i.a&&(s.a.o=a(this._elem,i.a.o,0,.01,this._dynamicProperties));"p"in i.a&&(s.a.p=a(this._elem,i.a.p,1,0,this._dynamicProperties));"sw"in i.a&&(s.a.sw=a(this._elem,i.a.sw,0,0,this._dynamicProperties));"sc"in i.a&&(s.a.sc=a(this._elem,i.a.sc,1,0,this._dynamicProperties));"fc"in i.a&&(s.a.fc=a(this._elem,i.a.fc,1,0,this._dynamicProperties));"fh"in i.a&&(s.a.fh=a(this._elem,i.a.fh,0,0,this._dynamicProperties));"fs"in i.a&&(s.a.fs=a(this._elem,i.a.fs,0,.01,this._dynamicProperties));"fb"in i.a&&(s.a.fb=a(this._elem,i.a.fb,0,.01,this._dynamicProperties));"t"in i.a&&(s.a.t=a(this._elem,i.a.t,0,0,this._dynamicProperties));s.s=PropertyFactory.getTextSelectorProp(this._elem,i.s,this._dynamicProperties);s.s.t=i.s.t;this._animatorsData[e]=s}if(this._textData.p&&"m"in this._textData.p){this._pathData={f:a(this._elem,this._textData.p.f,0,0,this._dynamicProperties),l:a(this._elem,this._textData.p.l,0,0,this._dynamicProperties),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)};this._hasMaskedPath=true}else this._hasMaskedPath=false;this._moreOptions.alignment=a(this._elem,this._textData.m.a,1,0,this._dynamicProperties);this._dynamicProperties.length&&t.push(this)};TextAnimatorProperty.prototype.getMeasures=function(t,e){this.lettersChangedFlag=e;if(!this.mdf&&!this._firstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m.mdf))return;this._firstFrame=false;var r=this._moreOptions.alignment.v;var s=this._animatorsData;var i=this._textData;var a=this.mHelper;var n=this._renderType;var o=this.renderedLetters.length;var h=this.data;var l,p;var m,f;var c=t.l;if(this._hasMaskedPath){var d=this._pathData.m;if(!this._pathData.n||this._pathData.mdf){var u=d.v;this._pathData.r&&(u=reversePath(u));var v={tLength:0,segments:[]};f=u._length-1;var y;var g=0;for(m=0;m<f;m+=1){y={s:u.v[m],e:u.v[m+1],to:[u.o[m][0]-u.v[m][0],u.o[m][1]-u.v[m][1]],ti:[u.i[m+1][0]-u.v[m+1][0],u.i[m+1][1]-u.v[m+1][1]]};bez.buildBezierData(y);v.tLength+=y.bezierData.segmentLength;v.segments.push(y);g+=y.bezierData.segmentLength}m=f;if(d.v.c){y={s:u.v[m],e:u.v[0],to:[u.o[m][0]-u.v[m][0],u.o[m][1]-u.v[m][1]],ti:[u.i[0][0]-u.v[0][0],u.i[0][1]-u.v[0][1]]};bez.buildBezierData(y);v.tLength+=y.bezierData.segmentLength;v.segments.push(y);g+=y.bezierData.segmentLength}this._pathData.pi=v}var v=this._pathData.pi;var b=this._pathData.f.v,E=0,P=1,x,S,C;var k=0,A=true;var M=v.segments;if(b<0&&d.v.c){v.tLength<Math.abs(b)&&(b=-Math.abs(b)%v.tLength);E=M.length-1;C=M[E].bezierData.points;P=C.length-1;while(b<0){b+=C[P].partialLength;P-=1;if(P<0){E-=1;C=M[E].bezierData.points;P=C.length-1}}}C=M[E].bezierData.points;S=C[P-1];x=C[P];var w=x.partialLength;var D,T}f=c.length;l=0;p=0;var _=1.2*t.s*.714;var I=true;var F,V;var R,N;var B;N=s.length;if(e)for(R=0;R<N;R+=1){V=s[R].s;V.getValue(true)}var L;var O,G=-1,j,H,z;var W=b,q=E,Y=P,X=-1;var K;var U,J,Z,Q;var $=0;var tt,et,rt,st="",it=this.defaultPropsArray,at;for(m=0;m<f;m+=1){a.reset();K=1;if(c[m].n){l=0;p+=t.yOffset;p+=I?1:0;b=W;I=false;$=0;if(this._hasMaskedPath){E=q;P=Y;C=M[E].bezierData.points;S=C[P-1];x=C[P];w=x.partialLength;k=0}at=tt=rt=st="";it=this.defaultPropsArray}else{if(this._hasMaskedPath){if(X!==c[m].line){switch(t.j){case 1:b+=g-t.lineWidths[c[m].line];break;case 2:b+=(g-t.lineWidths[c[m].line])/2;break}X=c[m].line}if(G!==c[m].ind){c[G]&&(b+=c[G].extra);b+=c[m].an/2;G=c[m].ind}b+=r[0]*c[m].an/200;var nt=0;for(R=0;R<N;R+=1){F=s[R].a;if("p"in F){V=s[R].s;O=V.getMult(c[m].anIndexes[R],i.a[R].s.totalChars);O.length?nt+=F.p.v[0]*O[0]:nt+=F.p.v[0]*O}if("a"in F){V=s[R].s;O=V.getMult(c[m].anIndexes[R],i.a[R].s.totalChars);O.length?nt+=F.a.v[0]*O[0]:nt+=F.a.v[0]*O}}A=true;while(A)if(k+w>=b+nt||!C){D=(b+nt-k)/x.partialLength;H=S.point[0]+(x.point[0]-S.point[0])*D;z=S.point[1]+(x.point[1]-S.point[1])*D;a.translate(-r[0]*c[m].an/200,-r[1]*_/100);A=false}else if(C){k+=x.partialLength;P+=1;if(P>=C.length){P=0;E+=1;if(M[E])C=M[E].bezierData.points;else if(d.v.c){P=0;E=0;C=M[E].bezierData.points}else{k-=x.partialLength;C=null}}if(C){S=x;x=C[P];w=x.partialLength}}j=c[m].an/2-c[m].add;a.translate(-j,0,0)}else{j=c[m].an/2-c[m].add;a.translate(-j,0,0);a.translate(-r[0]*c[m].an/200,-r[1]*_/100,0)}$+=c[m].l/2;for(R=0;R<N;R+=1){F=s[R].a;if("t"in F){V=s[R].s;O=V.getMult(c[m].anIndexes[R],i.a[R].s.totalChars);this._hasMaskedPath?O.length?b+=F.t*O[0]:b+=F.t*O:O.length?l+=F.t.v*O[0]:l+=F.t.v*O}}$+=c[m].l/2;t.strokeWidthAnim&&(J=t.sw||0);t.strokeColorAnim&&(U=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]);t.fillColorAnim&&t.fc&&(Z=[t.fc[0],t.fc[1],t.fc[2]]);for(R=0;R<N;R+=1){F=s[R].a;if("a"in F){V=s[R].s;O=V.getMult(c[m].anIndexes[R],i.a[R].s.totalChars);O.length?a.translate(-F.a.v[0]*O[0],-F.a.v[1]*O[1],F.a.v[2]*O[2]):a.translate(-F.a.v[0]*O,-F.a.v[1]*O,F.a.v[2]*O)}}for(R=0;R<N;R+=1){F=s[R].a;if("s"in F){V=s[R].s;O=V.getMult(c[m].anIndexes[R],i.a[R].s.totalChars);O.length?a.scale(1+(F.s.v[0]-1)*O[0],1+(F.s.v[1]-1)*O[1],1):a.scale(1+(F.s.v[0]-1)*O,1+(F.s.v[1]-1)*O,1)}}for(R=0;R<N;R+=1){F=s[R].a;V=s[R].s;O=V.getMult(c[m].anIndexes[R],i.a[R].s.totalChars);"sk"in F&&(O.length?a.skewFromAxis(-F.sk.v*O[0],F.sa.v*O[1]):a.skewFromAxis(-F.sk.v*O,F.sa.v*O));"r"in F&&(O.length?a.rotateZ(-F.r.v*O[2]):a.rotateZ(-F.r.v*O));"ry"in F&&(O.length?a.rotateY(F.ry.v*O[1]):a.rotateY(F.ry.v*O));"rx"in F&&(O.length?a.rotateX(F.rx.v*O[0]):a.rotateX(F.rx.v*O));"o"in F&&(O.length?K+=(F.o.v*O[0]-K)*O[0]:K+=(F.o.v*O-K)*O);t.strokeWidthAnim&&"sw"in F&&(O.length?J+=F.sw.v*O[0]:J+=F.sw.v*O);if(t.strokeColorAnim&&"sc"in F)for(Q=0;Q<3;Q+=1)O.length?U[Q]=U[Q]+(F.sc.v[Q]-U[Q])*O[0]:U[Q]=U[Q]+(F.sc.v[Q]-U[Q])*O;if(t.fillColorAnim&&t.fc){if("fc"in F)for(Q=0;Q<3;Q+=1)O.length?Z[Q]=Z[Q]+(F.fc.v[Q]-Z[Q])*O[0]:Z[Q]=Z[Q]+(F.fc.v[Q]-Z[Q])*O;"fh"in F&&(Z=O.length?addHueToRGB(Z,F.fh.v*O[0]):addHueToRGB(Z,F.fh.v*O));"fs"in F&&(Z=O.length?addSaturationToRGB(Z,F.fs.v*O[0]):addSaturationToRGB(Z,F.fs.v*O));"fb"in F&&(Z=O.length?addBrightnessToRGB(Z,F.fb.v*O[0]):addBrightnessToRGB(Z,F.fb.v*O))}}for(R=0;R<N;R+=1){F=s[R].a;if("p"in F){V=s[R].s;O=V.getMult(c[m].anIndexes[R],i.a[R].s.totalChars);this._hasMaskedPath?O.length?a.translate(0,F.p.v[1]*O[0],-F.p.v[2]*O[1]):a.translate(0,F.p.v[1]*O,-F.p.v[2]*O):O.length?a.translate(F.p.v[0]*O[0],F.p.v[1]*O[1],-F.p.v[2]*O[2]):a.translate(F.p.v[0]*O,F.p.v[1]*O,-F.p.v[2]*O)}}t.strokeWidthAnim&&(tt=J<0?0:J);t.strokeColorAnim&&(et="rgb("+Math.round(255*U[0])+","+Math.round(255*U[1])+","+Math.round(255*U[2])+")");t.fillColorAnim&&t.fc&&(rt="rgb("+Math.round(255*Z[0])+","+Math.round(255*Z[1])+","+Math.round(255*Z[2])+")");if(this._hasMaskedPath){a.translate(0,-t.ls);a.translate(0,r[1]*_/100+p,0);if(i.p.p){T=(x.point[1]-S.point[1])/(x.point[0]-S.point[0]);var ot=180*Math.atan(T)/Math.PI;x.point[0]<S.point[0]&&(ot+=180);a.rotate(-ot*Math.PI/180)}a.translate(H,z,0);b-=r[0]*c[m].an/200;if(c[m+1]&&G!==c[m+1].ind){b+=c[m].an/2;b+=t.tr/1e3*t.s}}else{a.translate(l,p,0);t.ps&&a.translate(t.ps[0],t.ps[1]+t.ascent,0);switch(t.j){case 1:a.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[c[m].line]),0,0);break;case 2:a.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[c[m].line])/2,0,0);break}a.translate(0,-t.ls);a.translate(j,0,0);a.translate(r[0]*c[m].an/200,r[1]*_/100,0);l+=c[m].l+t.tr/1e3*t.s}"html"===n?st=a.toCSS():"svg"===n?st=a.to2dCSS():it=[a.props[0],a.props[1],a.props[2],a.props[3],a.props[4],a.props[5],a.props[6],a.props[7],a.props[8],a.props[9],a.props[10],a.props[11],a.props[12],a.props[13],a.props[14],a.props[15]];at=K}if(o<=m){B=new LetterProps(at,tt,et,rt,st,it);this.renderedLetters.push(B);o+=1;this.lettersChangedFlag=true}else{B=this.renderedLetters[m];this.lettersChangedFlag=B.update(at,tt,et,rt,st,it)||this.lettersChangedFlag}}};TextAnimatorProperty.prototype.getValue=function(){if(this._elem.globalData.frameId===this._frameId)return;this._frameId=this._elem.globalData.frameId;var t,e=this._dynamicProperties.length;this.mdf=false;for(t=0;t<e;t+=1){this._dynamicProperties[t].getValue();this.mdf=this._dynamicProperties[t].mdf||this.mdf}};TextAnimatorProperty.prototype.mHelper=new Matrix;TextAnimatorProperty.prototype.defaultPropsArray=[];function LetterProps(t,e,r,s,i,a){this.o=t;this.sw=e;this.sc=r;this.fc=s;this.m=i;this.p=a;this.mdf={o:true,sw:!!e,sc:!!r,fc:!!s,m:true,p:true}}LetterProps.prototype.update=function(t,e,r,s,i,a){this.mdf.o=false;this.mdf.sw=false;this.mdf.sc=false;this.mdf.fc=false;this.mdf.m=false;this.mdf.p=false;var n=false;if(this.o!==t){this.o=t;this.mdf.o=true;n=true}if(this.sw!==e){this.sw=e;this.mdf.sw=true;n=true}if(this.sc!==r){this.sc=r;this.mdf.sc=true;n=true}if(this.fc!==s){this.fc=s;this.mdf.fc=true;n=true}if(this.m!==i){this.m=i;this.mdf.m=true;n=true}if(a.length&&(this.p[0]!==a[0]||this.p[1]!==a[1]||this.p[4]!==a[4]||this.p[5]!==a[5]||this.p[12]!==a[12]||this.p[13]!==a[13])){this.p=a;this.mdf.p=true;n=true}return n};function TextProperty(t,e,r){this._frameId=-99999;this.pv="";this.v="";this.kf=false;this.firstFrame=true;this.mdf=true;this.data=e;this.elem=t;this.keysIndex=-1;this.currentData={ascent:0,boxWidth:[0,0],f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,fillColorAnim:false,strokeColorAnim:false,strokeWidthAnim:false,yOffset:0,__complete:false};this.searchProperty()?r.push(this):this.getValue(true)}TextProperty.prototype.setCurrentData=function(t){var e=this.currentData;e.ascent=t.ascent;e.boxWidth=t.boxWidth?t.boxWidth:e.boxWidth;e.f=t.f;e.fStyle=t.fStyle;e.fWeight=t.fWeight;e.fc=t.fc;e.j=t.j;e.justifyOffset=t.justifyOffset;e.l=t.l;e.lh=t.lh;e.lineWidths=t.lineWidths;e.ls=t.ls;e.of=t.of;e.s=t.s;e.sc=t.sc;e.sw=t.sw;e.t=t.t;e.tr=t.tr;e.fillColorAnim=t.fillColorAnim||e.fillColorAnim;e.strokeColorAnim=t.strokeColorAnim||e.strokeColorAnim;e.strokeWidthAnim=t.strokeWidthAnim||e.strokeWidthAnim;e.yOffset=t.yOffset;e.__complete=false};TextProperty.prototype.searchProperty=function(){this.kf=this.data.d.k.length>1;return this.kf};TextProperty.prototype.getValue=function(){this.mdf=false;var t=this.elem.globalData.frameId;if((t===this._frameId||!this.kf)&&!this.firstFrame)return;var e=this.data.d.k,r;var s=0,i=e.length;while(s<=i-1){r=e[s].s;if(s===i-1||e[s+1].t>t)break;s+=1}if(this.keysIndex!==s){r.__complete||this.completeTextData(r);this.setCurrentData(r);this.mdf=!this.firstFrame;this.pv=this.v=this.currentData.t;this.keysIndex=s}this._frameId=t};TextProperty.prototype.completeTextData=function(t){t.__complete=true;var e=this.elem.globalData.fontManager;var r=this.data;var s=[];var i,a;var n,o=0,h;var l=r.m.g;var p=0,m=0,f=0,c=[];var d=0;var u=0;var v,y;var g=e.getFontByName(t.f);var b,E=0;var P=g.fStyle.split(" ");var x="normal",S="normal";a=P.length;var C;for(i=0;i<a;i+=1){C=P[i].toLowerCase();switch(C){case"italic":S="italic";break;case"bold":x="700";break;case"black":x="900";break;case"medium":x="500";break;case"regular":case"normal":x="400";case"light":case"thin":x="200";break}}t.fWeight=x;t.fStyle=S;a=t.t.length;var k=t.tr/1e3*t.s;if(t.sz){var A=t.sz[0];var M=-1;for(i=0;i<a;i+=1){n=false;if(" "===t.t.charAt(i))M=i;else if(13===t.t.charCodeAt(i)){d=0;n=true}if(e.chars){b=e.getCharData(t.t.charAt(i),g.fStyle,g.fFamily);E=n?0:b.w*t.s/100}else E=e.measureText(t.t.charAt(i),t.f,t.s);if(d+E>A&&" "!==t.t.charAt(i)){-1===M?a+=1:i=M;t.t=t.t.substr(0,i)+"\r"+t.t.substr(i===M?i+1:i);M=-1;d=0}else{d+=E;d+=k}}a=t.t.length}d=-k;E=0;var w=0;var D;for(i=0;i<a;i+=1){n=false;D=t.t.charAt(i);if(" "===D)h=" ";else if(13===D.charCodeAt(0)){w=0;c.push(d);u=d>u?d:u;d=-2*k;h="";n=true;f+=1}else h=t.t.charAt(i);if(e.chars){b=e.getCharData(D,g.fStyle,e.getFontByName(t.f).fFamily);E=n?0:b.w*t.s/100}else E=e.measureText(h,t.f,t.s);if(" "===D)w+=E+k;else{d+=E+k+w;w=0}s.push({l:E,an:E,add:p,n:n,anIndexes:[],val:h,line:f});if(2==l){p+=E;if(""==h||" "==h||i==a-1){""!=h&&" "!=h||(p-=E);while(m<=i){s[m].an=p;s[m].ind=o;s[m].extra=E;m+=1}o+=1;p=0}}else if(3==l){p+=E;if(""==h||i==a-1){""==h&&(p-=E);while(m<=i){s[m].an=p;s[m].ind=o;s[m].extra=E;m+=1}p=0;o+=1}}else{s[o].ind=o;s[o].extra=0;o+=1}}t.l=s;u=d>u?d:u;c.push(d);if(t.sz){t.boxWidth=t.sz[0];t.justifyOffset=0}else{t.boxWidth=u;switch(t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}}t.lineWidths=c;var T=r.a,_,I;y=T.length;var F,V,R=[];for(v=0;v<y;v+=1){_=T[v];_.a.sc&&(t.strokeColorAnim=true);_.a.sw&&(t.strokeWidthAnim=true);(_.a.fc||_.a.fh||_.a.fs||_.a.fb)&&(t.fillColorAnim=true);V=0;F=_.s.b;for(i=0;i<a;i+=1){I=s[i];I.anIndexes[v]=V;if(1==F&&""!=I.val||2==F&&""!=I.val&&" "!=I.val||3==F&&(I.n||" "==I.val||i==a-1)||4==F&&(I.n||i==a-1)){1===_.s.rn&&R.push(V);V+=1}}r.a[v].s.totalChars=V;var N=-1,B;if(1===_.s.rn)for(i=0;i<a;i+=1){I=s[i];if(N!=I.anIndexes[v]){N=I.anIndexes[v];B=R.splice(Math.floor(Math.random()*R.length),1)[0]}I.anIndexes[v]=B}}t.yOffset=t.lh||1.2*t.s;t.ls=t.ls||0;t.ascent=g.ascent*t.s/100};TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var r=this.data.d.k[e].s;r.__complete=false;r.t=t.t;this.keysIndex=-1;this.firstFrame=true;this.getValue()};var pooling=function(){function t(t){return t.concat(Array.apply(null,{length:t.length}))}return{double:t}}();var point_pool=function(){var t={newPoint:i,release:a};var e=0;var r=8;var s=Array.apply(null,{length:r});function i(){var t;if(e){e-=1;t=s[e]}else t=[.1,.1];return t}function a(t){if(e===r){s=pooling.double(s);r*=2}s[e]=t;e+=1}return t}();var shape_pool=function(){var t={clone:o,newShape:i,release:a,releaseArray:n};var e=0;var r=4;var s=Array.apply(null,{length:r});function i(){var t;if(e){e-=1;t=s[e]}else t=new ShapePath;return t}function a(t){if(e===r){s=pooling.double(s);r*=2}var i=t._length,a;for(a=0;a<i;a+=1){point_pool.release(t.v[a]);point_pool.release(t.i[a]);point_pool.release(t.o[a]);t.v[a]=null;t.i[a]=null;t.o[a]=null}t._length=0;t.c=false;s[e]=t;e+=1}function n(t,e){while(e--)a(t[e])}function o(t,e){var r,s=void 0===t._length?t.v.length:t._length;var a=i();a.setLength(s);a.c=t.c;var n;for(r=0;r<s;r+=1)if(e){n=e.applyToPointArray(t.v[r][0],t.v[r][1],0,2);a.setXYAt(n[0],n[1],"v",r);point_pool.release(n);n=e.applyToPointArray(t.o[r][0],t.o[r][1],0,2);a.setXYAt(n[0],n[1],"o",r);point_pool.release(n);n=e.applyToPointArray(t.i[r][0],t.i[r][1],0,2);a.setXYAt(n[0],n[1],"i",r);point_pool.release(n)}else a.setTripleAt(t.v[r][0],t.v[r][1],t.o[r][0],t.o[r][1],t.i[r][0],t.i[r][1],r);return a}return t}();var shapeCollection_pool=function(){var t={newShapeCollection:a,release:n,clone:o};var e=0;var r=4;var s=Array.apply(null,{length:r});var i=0;function a(){var t;if(e){e-=1;t=s[e]}else t=new ShapeCollection;return t}function n(t){var i,a=t._length;for(i=0;i<a;i+=1)shape_pool.release(t.shapes[i]);t._length=0;if(e===r){s=pooling.double(s);r*=2}s[e]=t;e+=1}function o(t,i){n(t);if(e===r){s=pooling.double(s);r*=2}s[e]=t;e+=1}return t}();function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(t){var e,r=this.layers.length,s;this.completeLayers=true;for(e=r-1;e>=0;e--){if(!this.elements[e]){s=this.layers[e];s.ip-s.st<=t-this.layers[e].st&&s.op-s.st>t-this.layers[e].st&&this.buildItem(e)}this.completeLayers=!!this.elements[e]&&this.completeLayers}this.checkPendingElements()};BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 13:return this.createCamera(t);case 99:return null}return this.createBase(t)};BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")};BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()};BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=false;var e,r=t.length;var s,i=this.layers.length;for(e=0;e<r;e+=1){s=0;while(s<i){if(this.layers[s].id==t[e].id){this.layers[s]=t[e];break}s+=1}}};BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t};BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()};BaseRenderer.prototype.buildElementParenting=function(t,e,r){r=r||[];var s=this.elements;var i=this.layers;var a=0,n=i.length;while(a<n){if(i[a].ind==e)if(s[a]&&true!==s[a])if(void 0!==i[a].parent){r.push(s[a]);s[a]._isParent=true;this.buildElementParenting(t,i[a].parent,r)}else{r.push(s[a]);s[a]._isParent=true;t.setHierarchy(r)}else{this.buildItem(a);this.addPendingElement(t)}a+=1}};BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)};function SVGRenderer(t,e){this.animationItem=t;this.layers=null;this.renderedFrame=-1;this.globalData={frameNum:-1};this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",progressiveLoad:e&&e.progressiveLoad||false,hideOnTransparent:!e||false!==e.hideOnTransparent,viewBoxOnly:e&&e.viewBoxOnly||false,className:e&&e.className||""};this.globalData.renderConfig=this.renderConfig;this.elements=[];this.pendingElements=[];this.destroyed=false}extendPrototype(BaseRenderer,SVGRenderer);SVGRenderer.prototype.createBase=function(t){return new SVGBaseElement(t,this.layerElement,this.globalData,this)};SVGRenderer.prototype.createShape=function(t){return new IShapeElement(t,this.layerElement,this.globalData,this)};SVGRenderer.prototype.createText=function(t){return new SVGTextElement(t,this.layerElement,this.globalData,this)};SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.layerElement,this.globalData,this)};SVGRenderer.prototype.createComp=function(t){return new ICompElement(t,this.layerElement,this.globalData,this)};SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.layerElement,this.globalData,this)};SVGRenderer.prototype.configAnimation=function(t){this.layerElement=document.createElementNS(svgNS,"svg");this.layerElement.setAttribute("xmlns","http://www.w3.org/2000/svg");this.layerElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h);if(!this.renderConfig.viewBoxOnly){this.layerElement.setAttribute("width",t.w);this.layerElement.setAttribute("height",t.h);this.layerElement.style.width="100%";this.layerElement.style.height="100%"}this.renderConfig.className&&this.layerElement.setAttribute("class",this.renderConfig.className);this.layerElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio);this.animationItem.wrapper.appendChild(this.layerElement);var e=document.createElementNS(svgNS,"defs");this.globalData.defs=e;this.layerElement.appendChild(e);this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem);this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem);this.globalData.progressiveLoad=this.renderConfig.progressiveLoad;this.globalData.frameId=0;this.globalData.nm=t.nm;this.globalData.compSize={w:t.w,h:t.h};this.data=t;this.globalData.frameRate=t.fr;var r=document.createElementNS(svgNS,"clipPath");var s=document.createElementNS(svgNS,"rect");s.setAttribute("width",t.w);s.setAttribute("height",t.h);s.setAttribute("x",0);s.setAttribute("y",0);var i="animationMask_"+randomString(10);r.setAttribute("id",i);r.appendChild(s);var a=document.createElementNS(svgNS,"g");a.setAttribute("clip-path","url("+locationHref+"#"+i+")");this.layerElement.appendChild(a);e.appendChild(r);this.layerElement=a;this.layers=t.layers;this.globalData.fontManager=new FontManager;this.globalData.fontManager.addChars(t.chars);this.globalData.fontManager.addFonts(t.fonts,e);this.elements=Array.apply(null,{length:t.layers.length})};SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="";this.layerElement=null;this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0;this.destroyed=true;this.animationItem=null};SVGRenderer.prototype.updateContainerSize=function(){};SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(e[t]||99==this.layers[t].ty)return;e[t]=true;var r=this.createItem(this.layers[t]);e[t]=r;if(expressionsPlugin){0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(r);r.initExpressions()}this.appendElementInPos(r,t);if(this.layers[t].tt)if(this.elements[t-1]&&true!==this.elements[t-1])r.setMatte(e[t-1].layerId);else{this.buildItem(t-1);this.addPendingElement(r)}};SVGRenderer.prototype.checkPendingElements=function(){while(this.pendingElements.length){var t=this.pendingElements.pop();t.checkParenting();if(t.data.tt){var e=0,r=this.elements.length;while(e<r){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}}};SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame==t||this.destroyed)return;null===t?t=this.renderedFrame:this.renderedFrame=t;this.globalData.frameNum=t;this.globalData.frameId+=1;this.globalData.projectInterface.currentFrame=t;var e,r=this.layers.length;this.completeLayers||this.checkLayers(t);for(e=r-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);for(e=r-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()};SVGRenderer.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(!r)return;var s=0;var i;while(s<e){this.elements[s]&&true!==this.elements[s]&&this.elements[s].getBaseElement()&&(i=this.elements[s].getBaseElement());s+=1}i?this.layerElement.insertBefore(r,i):this.layerElement.appendChild(r)};SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"};SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"};SVGRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;var s=document.createElementNS(svgNS,"g");for(e=0;e<r;e+=1)if(t[e].xt){var i=this.createComp(t[e],s,this.globalData.comp,null);i.initExpressions();this.globalData.projectInterface.registerComposition(i)}};function MaskElement(t,e,r){this.dynamicProperties=[];this.data=t;this.element=e;this.globalData=r;this.storedData=[];this.masksProperties=this.data.masksProperties;this.viewData=Array.apply(null,{length:this.masksProperties.length});this.maskElement=null;this.firstFrame=true;var s=this.globalData.defs;var i,a=this.masksProperties.length;var n,o=this.masksProperties;var h=0;var l=[];var p,m;var f=randomString(10);var c,d,u,v;var y="clipPath",g="clip-path";for(i=0;i<a;i++){if("a"!==o[i].mode&&"n"!==o[i].mode||o[i].inv||100!==o[i].o.k){y="mask";g="mask"}if("s"!=o[i].mode&&"i"!=o[i].mode||0!=h)c=null;else{c=document.createElementNS(svgNS,"rect");c.setAttribute("fill","#ffffff");c.setAttribute("width",this.element.comp.data.w);c.setAttribute("height",this.element.comp.data.h);l.push(c)}n=document.createElementNS(svgNS,"path");if("n"==o[i].mode){this.viewData[i]={op:PropertyFactory.getProp(this.element,o[i].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,o[i],3,this.dynamicProperties,null),elem:n};s.appendChild(n);continue}h+=1;"s"==o[i].mode?n.setAttribute("fill","#000000"):n.setAttribute("fill","#ffffff");n.setAttribute("clip-rule","nonzero");if(0!==o[i].x.k){y="mask";g="mask";v=PropertyFactory.getProp(this.element,o[i].x,0,null,this.dynamicProperties);var b="fi_"+randomString(10);d=document.createElementNS(svgNS,"filter");d.setAttribute("id",b);u=document.createElementNS(svgNS,"feMorphology");u.setAttribute("operator","dilate");u.setAttribute("in","SourceGraphic");u.setAttribute("radius","0");d.appendChild(u);s.appendChild(d);"s"==o[i].mode?n.setAttribute("stroke","#000000"):n.setAttribute("stroke","#ffffff")}else{u=null;v=null}this.storedData[i]={elem:n,x:v,expan:u,lastPath:"",lastOperator:"",filterId:b,lastRadius:0};if("i"==o[i].mode){m=l.length;var E=document.createElementNS(svgNS,"g");for(p=0;p<m;p+=1)E.appendChild(l[p]);var P=document.createElementNS(svgNS,"mask");P.setAttribute("mask-type","alpha");P.setAttribute("id",f+"_"+h);P.appendChild(n);s.appendChild(P);E.setAttribute("mask","url("+locationHref+"#"+f+"_"+h+")");l.length=0;l.push(E)}else l.push(n);o[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath());this.viewData[i]={elem:n,lastPath:"",op:PropertyFactory.getProp(this.element,o[i].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,o[i],3,this.dynamicProperties,null)};c&&(this.viewData[i].invRect=c);this.viewData[i].prop.k||this.drawPath(o[i],this.viewData[i].prop.v,this.viewData[i])}this.maskElement=document.createElementNS(svgNS,y);a=l.length;for(i=0;i<a;i+=1)this.maskElement.appendChild(l[i]);this.maskElement.setAttribute("id",f);h>0&&this.element.maskedElement.setAttribute(g,"url("+locationHref+"#"+f+")");s.appendChild(this.maskElement)}MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop};MaskElement.prototype.prepareFrame=function(){var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue()};MaskElement.prototype.renderFrame=function(t){var e,r=this.masksProperties.length;for(e=0;e<r;e++){(this.viewData[e].prop.mdf||this.firstFrame)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]);(this.viewData[e].op.mdf||this.firstFrame)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v);if("n"!==this.masksProperties[e].mode){if(this.viewData[e].invRect&&(this.element.finalTransform.mProp.mdf||this.firstFrame)){this.viewData[e].invRect.setAttribute("x",-t.props[12]);this.viewData[e].invRect.setAttribute("y",-t.props[13])}if(this.storedData[e].x&&(this.storedData[e].x.mdf||this.firstFrame)){var s=this.storedData[e].expan;if(this.storedData[e].x.v<0){if("erode"!==this.storedData[e].lastOperator){this.storedData[e].lastOperator="erode";this.storedData[e].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[e].filterId+")")}s.setAttribute("radius",-this.storedData[e].x.v)}else{if("dilate"!==this.storedData[e].lastOperator){this.storedData[e].lastOperator="dilate";this.storedData[e].elem.setAttribute("filter",null)}this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v)}}}}this.firstFrame=false};MaskElement.prototype.getMaskelement=function(){return this.maskElement};MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";t+=" h"+this.globalData.compSize.w;t+=" v"+this.globalData.compSize.h;t+=" h-"+this.globalData.compSize.w;t+=" v-"+this.globalData.compSize.h+" ";return t};MaskElement.prototype.drawPath=function(t,e,r){var s=" M"+e.v[0][0]+","+e.v[0][1];var i,a;a=e._length;for(i=1;i<a;i+=1)s+=" C"+bm_rnd(e.o[i-1][0])+","+bm_rnd(e.o[i-1][1])+" "+bm_rnd(e.i[i][0])+","+bm_rnd(e.i[i][1])+" "+bm_rnd(e.v[i][0])+","+bm_rnd(e.v[i][1]);e.c&&a>1&&(s+=" C"+bm_rnd(e.o[i-1][0])+","+bm_rnd(e.o[i-1][1])+" "+bm_rnd(e.i[0][0])+","+bm_rnd(e.i[0][1])+" "+bm_rnd(e.v[0][0])+","+bm_rnd(e.v[0][1]));if(r.lastPath!==s){r.elem&&(e.c?t.inv?r.elem.setAttribute("d",this.solidPath+s):r.elem.setAttribute("d",s):r.elem.setAttribute("d",""));r.lastPath=s}};MaskElement.prototype.destroy=function(){this.element=null;this.globalData=null;this.maskElement=null;this.data=null;this.masksProperties=null};function BaseElement(){}BaseElement.prototype.checkMasks=function(){if(!this.data.hasMask)return false;var t=0,e=this.data.masksProperties.length;while(t<e){if("n"!==this.data.masksProperties[t].mode&&false!==this.data.masksProperties[t].cl)return true;t+=1}return false};BaseElement.prototype.checkParenting=function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent)};BaseElement.prototype.prepareFrame=function(t){if(this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t){if(true!==this.isVisible){this.elemMdf=true;this.globalData.mdf=true;this.isVisible=true;this.firstFrame=true;this.data.hasMask&&(this.maskManager.firstFrame=true)}}else if(false!==this.isVisible){this.elemMdf=true;this.globalData.mdf=true;this.isVisible=false}var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1)if(this.isVisible||this._isParent&&"transform"===this.dynamicProperties[e].type){this.dynamicProperties[e].getValue();if(this.dynamicProperties[e].mdf){this.elemMdf=true;this.globalData.mdf=true}}this.data.hasMask&&this.isVisible&&this.maskManager.prepareFrame(t*this.data.sr);this.currentFrameNum=t*this.data.sr;return this.isVisible};BaseElement.prototype.globalToLocal=function(t){var e=[];e.push(this.finalTransform);var r=true;var s=this.comp;while(r)if(s.finalTransform){s.data.hasMask&&e.splice(0,0,s.finalTransform);s=s.comp}else r=false;var i,a=e.length,n;for(i=0;i<a;i+=1){n=e[i].mat.applyToPointArray(0,0,0);t=[t[0]-n[0],t[1]-n[1],0]}return t};BaseElement.prototype.initExpressions=function(){this.layerInterface=LayerExpressionInterface(this);this.data.hasMask&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t);0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?this.layerInterface.shapeInterface=ShapeExpressionInterface.createShapeInterface(this.shapesData,this.itemsData,this.layerInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this))};BaseElement.prototype.setBlendMode=function(){var t="";switch(this.data.bm){case 1:t="multiply";break;case 2:t="screen";break;case 3:t="overlay";break;case 4:t="darken";break;case 5:t="lighten";break;case 6:t="color-dodge";break;case 7:t="color-burn";break;case 8:t="hard-light";break;case 9:t="soft-light";break;case 10:t="difference";break;case 11:t="exclusion";break;case 12:t="hue";break;case 13:t="saturation";break;case 14:t="color";break;case 15:t="luminosity";break}var e=this.baseElement||this.layerElement;e.style["mix-blend-mode"]=t};BaseElement.prototype.init=function(){this.data.sr||(this.data.sr=1);this.dynamicProperties=this.dynamicProperties||[];this.data.ef&&(this.effects=new EffectsManager(this.data,this,this.dynamicProperties));this.hidden=false;this.firstFrame=true;this.isVisible=false;this._isParent=false;this.currentFrameNum=-99999;this.lastNum=-99999;if(this.data.ks){this.finalTransform={mProp:PropertyFactory.getProp(this,this.data.ks,2,null,this.dynamicProperties),matMdf:false,opMdf:false,mat:new Matrix,opacity:1};this.data.ao&&(this.finalTransform.mProp.autoOriented=true);this.finalTransform.op=this.finalTransform.mProp.o;this.transform=this.finalTransform.mProp;11!==this.data.ty&&this.createElements();this.data.hasMask&&this.addMasks(this.data)}this.elemMdf=false};BaseElement.prototype.getType=function(){return this.type};BaseElement.prototype.resetHierarchy=function(){this.hierarchy?this.hierarchy.length=0:this.hierarchy=[]};BaseElement.prototype.getHierarchy=function(){this.hierarchy||(this.hierarchy=[]);return this.hierarchy};BaseElement.prototype.setHierarchy=function(t){this.hierarchy=t};BaseElement.prototype.getLayerSize=function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}};BaseElement.prototype.hide=function(){};BaseElement.prototype.sourceRectAtTime=function(){return{top:0,left:0,width:100,height:100}};BaseElement.prototype.mHelper=new Matrix;function SVGBaseElement(t,e,r,s,i){this.globalData=r;this.comp=s;this.data=t;this.matteElement=null;this.transformedElement=null;this.isTransparent=false;this.parentContainer=e;this.layerId=i?i.layerId:"ly_"+randomString(10);this.placeholder=i;this._sizeChanged=false;this.init()}createElement(BaseElement,SVGBaseElement);SVGBaseElement.prototype.createElements=function(){this.layerElement=document.createElementNS(svgNS,"g");this.transformedElement=this.layerElement;this.data.hasMask&&(this.maskedElement=this.layerElement);var t=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var e=document.createElementNS(svgNS,"mask");e.setAttribute("id",this.layerId);e.setAttribute("mask-type",3==this.data.td?"luminance":"alpha");e.appendChild(this.layerElement);t=e;this.globalData.defs.appendChild(e);if(!featureSupport.maskType&&1==this.data.td){e.setAttribute("mask-type","luminance");var r=randomString(10);var s=filtersFactory.createFilter(r);this.globalData.defs.appendChild(s);s.appendChild(filtersFactory.createAlphaToLuminanceFilter());var i=document.createElementNS(svgNS,"g");i.appendChild(this.layerElement);t=i;e.appendChild(i);i.setAttribute("filter","url("+locationHref+"#"+r+")")}}else if(2==this.data.td){var a=document.createElementNS(svgNS,"mask");a.setAttribute("id",this.layerId);a.setAttribute("mask-type","alpha");var n=document.createElementNS(svgNS,"g");a.appendChild(n);var r=randomString(10);var s=filtersFactory.createFilter(r);var o=document.createElementNS(svgNS,"feColorMatrix");o.setAttribute("type","matrix");o.setAttribute("color-interpolation-filters","sRGB");o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1");s.appendChild(o);this.globalData.defs.appendChild(s);var h=document.createElementNS(svgNS,"rect");h.setAttribute("width",this.comp.data.w);h.setAttribute("height",this.comp.data.h);h.setAttribute("x","0");h.setAttribute("y","0");h.setAttribute("fill","#ffffff");h.setAttribute("opacity","0");n.setAttribute("filter","url("+locationHref+"#"+r+")");n.appendChild(h);n.appendChild(this.layerElement);t=n;if(!featureSupport.maskType){a.setAttribute("mask-type","luminance");s.appendChild(filtersFactory.createAlphaToLuminanceFilter());var i=document.createElementNS(svgNS,"g");n.appendChild(h);i.appendChild(this.layerElement);t=i;n.appendChild(i)}this.globalData.defs.appendChild(a)}}else if(this.data.hasMask||this.data.tt)if(this.data.tt){this.matteElement=document.createElementNS(svgNS,"g");this.matteElement.appendChild(this.layerElement);t=this.matteElement;this.baseElement=this.matteElement}else this.baseElement=this.layerElement;else this.baseElement=this.layerElement;if((this.data.ln||this.data.cl)&&(4===this.data.ty||0===this.data.ty)){this.data.ln&&this.layerElement.setAttribute("id",this.data.ln);this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)}if(0===this.data.ty){var l=document.createElementNS(svgNS,"clipPath");var p=document.createElementNS(svgNS,"path");p.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var m="cp_"+randomString(8);l.setAttribute("id",m);l.appendChild(p);this.globalData.defs.appendChild(l);if(this.checkMasks()){var f=document.createElementNS(svgNS,"g");f.setAttribute("clip-path","url("+locationHref+"#"+m+")");f.appendChild(this.layerElement);this.transformedElement=f;t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+m+")")}0!==this.data.bm&&this.setBlendMode();this.layerElement!==this.parentContainer&&(this.placeholder=null);this.data.ef&&(this.effectsManager=new SVGEffects(this));this.checkParenting()};SVGBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode;SVGBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty||this.data.hd||!this.isVisible)return false;this.lastNum=this.currentFrameNum;this.finalTransform.opMdf=this.firstFrame||this.finalTransform.op.mdf;this.finalTransform.matMdf=this.firstFrame||this.finalTransform.mProp.mdf;this.finalTransform.opacity=this.finalTransform.op.v;var e;var r=this.finalTransform.mat;if(this.hierarchy){var s=0,i=this.hierarchy.length;if(!this.finalTransform.matMdf)while(s<i){if(this.hierarchy[s].finalTransform.mProp.mdf){this.finalTransform.matMdf=true;break}s+=1}if(this.finalTransform.matMdf){e=this.finalTransform.mProp.v.props;r.cloneFromProps(e);for(s=0;s<i;s+=1){e=this.hierarchy[s].finalTransform.mProp.v.props;r.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}}}else this.isVisible&&(r=this.finalTransform.mProp.v);this.finalTransform.matMdf&&this.layerElement&&this.transformedElement.setAttribute("transform",r.to2dCSS());if(this.finalTransform.opMdf&&this.layerElement){if(this.finalTransform.op.v<=0){if(!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent){this.isTransparent=true;this.hide()}}else if(this.hidden&&this.isTransparent){this.isTransparent=false;this.show()}this.transformedElement.setAttribute("opacity",this.finalTransform.op.v)}this.data.hasMask&&this.maskManager.renderFrame(r);this.effectsManager&&this.effectsManager.renderFrame(this.firstFrame);return this.isVisible};SVGBaseElement.prototype.destroy=function(){this.layerElement=null;this.parentContainer=null;this.matteElement&&(this.matteElement=null);this.maskManager&&this.maskManager.destroy()};SVGBaseElement.prototype.getBaseElement=function(){return this.baseElement};SVGBaseElement.prototype.addMasks=function(t){this.maskManager=new MaskElement(t,this,this.globalData)};SVGBaseElement.prototype.setMatte=function(t){if(!this.matteElement)return;this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")};SVGBaseElement.prototype.hide=function(){if(!this.hidden){this.layerElement.style.display="none";this.hidden=true}};SVGBaseElement.prototype.show=function(){if(this.isVisible&&!this.isTransparent){this.hidden=false;this.layerElement.style.display="block"}};function IShapeElement(t,e,r,s,i){this.shapes=[];this.shapesData=t.shapes;this.stylesList=[];this.itemsData=[];this.prevViewData=[];this.shapeModifiers=[];this.processedElements=[];this._parent.constructor.call(this,t,e,r,s,i)}createElement(SVGBaseElement,IShapeElement);IShapeElement.prototype.identityMatrix=new Matrix;IShapeElement.prototype.lcEnum={1:"butt",2:"round",3:"square"};IShapeElement.prototype.ljEnum={1:"miter",2:"round",3:"butt"};IShapeElement.prototype.searchProcessedElement=function(t){var e=this.processedElements.length;while(e){e-=1;if(this.processedElements[e].elem===t)return this.processedElements[e].pos}return 0};IShapeElement.prototype.addProcessedElement=function(t,e){var r=this.processedElements.length;while(r){r-=1;if(this.processedElements[r].elem===t){this.processedElements[r].pos=e;break}}0===r&&this.processedElements.push({elem:t,pos:e})};IShapeElement.prototype.buildExpressionInterface=function(){};IShapeElement.prototype.createElements=function(){this._parent.createElements.call(this);this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],true);this.data.hd&&!this.data.td||styleUnselectableDiv(this.layerElement)};IShapeElement.prototype.setGradientData=function(t,e,r){var s="gr_"+randomString(10);var i;i=1===e.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient");i.setAttribute("id",s);i.setAttribute("spreadMethod","pad");i.setAttribute("gradientUnits","userSpaceOnUse");var a=[];var n,o,h;h=4*e.g.p;for(o=0;o<h;o+=4){n=document.createElementNS(svgNS,"stop");i.appendChild(n);a.push(n)}t.setAttribute("gf"===e.ty?"fill":"stroke","url(#"+s+")");this.globalData.defs.appendChild(i);r.gf=i;r.cst=a};IShapeElement.prototype.setGradientOpacity=function(t,e,r){if(t.g.k.k[0].s&&t.g.k.k[0].s.length>4*t.g.p||t.g.k.k.length>4*t.g.p){var s;var i,a,n;var o=document.createElementNS(svgNS,"mask");var h=document.createElementNS(svgNS,"path");o.appendChild(h);var l="op_"+randomString(10);var p="mk_"+randomString(10);o.setAttribute("id",p);s=1===t.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient");s.setAttribute("id",l);s.setAttribute("spreadMethod","pad");s.setAttribute("gradientUnits","userSpaceOnUse");n=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var m=[];for(a=4*t.g.p;a<n;a+=2){i=document.createElementNS(svgNS,"stop");i.setAttribute("stop-color","rgb(255,255,255)");s.appendChild(i);m.push(i)}h.setAttribute("gf"===t.ty?"fill":"stroke","url(#"+l+")");this.globalData.defs.appendChild(s);this.globalData.defs.appendChild(o);e.of=s;e.ost=m;r.msElem=h;return p}};IShapeElement.prototype.createStyleElement=function(t,e,r){var s={};var i={data:t,type:t.ty,d:"",ld:"",lvl:e,mdf:false,closed:false};var a=document.createElementNS(svgNS,"path");s.o=PropertyFactory.getProp(this,t.o,0,.01,r);if("st"==t.ty||"gs"==t.ty){a.setAttribute("stroke-linecap",this.lcEnum[t.lc]||"round");a.setAttribute("stroke-linejoin",this.ljEnum[t.lj]||"round");a.setAttribute("fill-opacity","0");1==t.lj&&a.setAttribute("stroke-miterlimit",t.ml);s.w=PropertyFactory.getProp(this,t.w,0,null,r);if(t.d){var n=PropertyFactory.getDashProp(this,t.d,"svg",r);if(!n.k){a.setAttribute("stroke-dasharray",n.dasharray);a.setAttribute("stroke-dashoffset",n.dashoffset)}s.d=n}}if("fl"==t.ty||"st"==t.ty)s.c=PropertyFactory.getProp(this,t.c,1,255,r);else{s.g=PropertyFactory.getGradientProp(this,t.g,r);if(2==t.t){s.h=PropertyFactory.getProp(this,t.h,0,.01,r);s.a=PropertyFactory.getProp(this,t.a,0,degToRads,r)}s.s=PropertyFactory.getProp(this,t.s,1,null,r);s.e=PropertyFactory.getProp(this,t.e,1,null,r);this.setGradientData(a,t,s,i);var o=this.setGradientOpacity(t,s,i);o&&a.setAttribute("mask","url(#"+o+")")}s.elem=a;2===t.r&&a.setAttribute("fill-rule","evenodd");t.ln&&a.setAttribute("id",t.ln);t.cl&&a.setAttribute("class",t.cl);i.pElem=a;this.stylesList.push(i);s.style=i;return s};IShapeElement.prototype.createGroupElement=function(t){var e={it:[],prevViewData:[]};var r=document.createElementNS(svgNS,"g");e.gr=r;t.ln&&e.gr.setAttribute("id",t.ln);return e};IShapeElement.prototype.createTransformElement=function(t,e){var r={transform:{op:PropertyFactory.getProp(this,t.o,0,.01,e),mProps:PropertyFactory.getProp(this,t,2,null,e)},elements:[]};return r};IShapeElement.prototype.createShapeElement=function(t,e,r,s){var i={elements:[],caches:[],styles:[],transformers:e,lStr:""};var a=4;"rc"==t.ty?a=5:"el"==t.ty?a=6:"sr"==t.ty&&(a=7);i.sh=ShapePropertyFactory.getShapeProp(this,t,a,s);i.lvl=r;this.shapes.push(i.sh);this.addShapeToModifiers(i);return i};var cont=0;IShapeElement.prototype.setElementStyles=function(){var t,e=this.stylesList.length;var r=[];for(t=0;t<e;t+=1)this.stylesList[t].closed||r.push(this.stylesList[t]);return r};IShapeElement.prototype.reloadShapes=function(){this.firstFrame=true;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],true);var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()};IShapeElement.prototype.searchShapes=function(t,e,r,s,i,a,n,o){var h=[].concat(n);var l,p=t.length-1;var m,f;var c=[],d=[],u,v,y,g;for(l=p;l>=0;l-=1){g=this.searchProcessedElement(t[l]);g?e[l]=r[g-1]:t[l]._render=o;if("fl"==t[l].ty||"st"==t[l].ty||"gf"==t[l].ty||"gs"==t[l].ty){g?e[l].style.closed=false:e[l]=this.createStyleElement(t[l],a,i);t[l]._render&&s.appendChild(e[l].elem);c.push(e[l].style)}else if("gr"==t[l].ty){if(g){f=e[l].it.length;for(m=0;m<f;m+=1)e[l].prevViewData[m]=e[l].it[m]}else e[l]=this.createGroupElement(t[l]);this.searchShapes(t[l].it,e[l].it,e[l].prevViewData,e[l].gr,i,a+1,h,o);t[l]._render&&s.appendChild(e[l].gr)}else if("tr"==t[l].ty){g||(e[l]=this.createTransformElement(t[l],i));v=e[l].transform;h.push(v)}else if("sh"==t[l].ty||"rc"==t[l].ty||"el"==t[l].ty||"sr"==t[l].ty){g||(e[l]=this.createShapeElement(t[l],h,a,i));e[l].elements=this.setElementStyles()}else if("tm"==t[l].ty||"rd"==t[l].ty||"ms"==t[l].ty){if(g){y=e[l];y.closed=false}else{y=ShapeModifiers.getModifier(t[l].ty);y.init(this,t[l],i);e[l]=y;this.shapeModifiers.push(y)}d.push(y)}else if("rp"==t[l].ty){if(g){y=e[l];y.closed=true}else{y=ShapeModifiers.getModifier(t[l].ty);e[l]=y;y.init(this,t,l,e,i);this.shapeModifiers.push(y);o=false}d.push(y)}this.addProcessedElement(t[l],l+1)}p=c.length;for(l=0;l<p;l+=1)c[l].closed=true;p=d.length;for(l=0;l<p;l+=1)d[l].closed=true};IShapeElement.prototype.addShapeToModifiers=function(t){var e,r=this.shapeModifiers.length;for(e=0;e<r;e+=1)this.shapeModifiers[e].addShape(t)};IShapeElement.prototype.renderModifiers=function(){if(!this.shapeModifiers.length)return;var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].reset();e=this.shapeModifiers.length;for(t=e-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this.firstFrame)};IShapeElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(false===e){this.hide();return}if(this.hidden){this.layerElement.style.display="block";this.hidden=false}this.renderModifiers();var r,s=this.stylesList.length;for(r=0;r<s;r+=1){this.stylesList[r].d="";this.stylesList[r].mdf=false}this.renderShape(this.shapesData,this.itemsData,null);for(r=0;r<s;r+=1){if("0"===this.stylesList[r].ld){this.stylesList[r].ld="1";this.stylesList[r].pElem.style.display="block"}if(this.stylesList[r].mdf||this.firstFrame){this.stylesList[r].pElem.setAttribute("d",this.stylesList[r].d);this.stylesList[r].msElem&&this.stylesList[r].msElem.setAttribute("d",this.stylesList[r].d)}}this.firstFrame&&(this.firstFrame=false)};IShapeElement.prototype.hide=function(){if(!this.hidden){this.layerElement.style.display="none";var t,e=this.stylesList.length;for(t=e-1;t>=0;t-=1)if("0"!==this.stylesList[t].ld){this.stylesList[t].ld="0";this.stylesList[t].pElem.style.display="none";this.stylesList[t].pElem.parentNode&&(this.stylesList[t].parent=this.stylesList[t].pElem.parentNode)}this.hidden=true}};IShapeElement.prototype.renderShape=function(t,e,r){var s,i=t.length-1;var a;for(s=i;s>=0;s-=1){a=t[s].ty;if("tr"==a){(this.firstFrame||e[s].transform.op.mdf&&r)&&r.setAttribute("opacity",e[s].transform.op.v);(this.firstFrame||e[s].transform.mProps.mdf&&r)&&r.setAttribute("transform",e[s].transform.mProps.v.to2dCSS())}else if("sh"==a||"el"==a||"rc"==a||"sr"==a)this.renderPath(t[s],e[s]);else if("fl"==a)this.renderFill(t[s],e[s]);else if("gf"==a)this.renderGradient(t[s],e[s]);else if("gs"==a){this.renderGradient(t[s],e[s]);this.renderStroke(t[s],e[s])}else"st"==a?this.renderStroke(t[s],e[s]):"gr"==a?this.renderShape(t[s].it,e[s].it,e[s].gr):"tm"==a}};IShapeElement.prototype.buildShapeString=function(t,e,r,s){var i,a="";for(i=1;i<e;i+=1){1===i&&(a+=" M"+s.applyToPointStringified(t.v[0][0],t.v[0][1]));a+=" C"+s.applyToPointStringified(t.o[i-1][0],t.o[i-1][1])+" "+s.applyToPointStringified(t.i[i][0],t.i[i][1])+" "+s.applyToPointStringified(t.v[i][0],t.v[i][1])}1===e&&(a+=" M"+s.applyToPointStringified(t.v[0][0],t.v[0][1]));if(r&&e){a+=" C"+s.applyToPointStringified(t.o[i-1][0],t.o[i-1][1])+" "+s.applyToPointStringified(t.i[0][0],t.i[0][1])+" "+s.applyToPointStringified(t.v[0][0],t.v[0][1]);a+="z"}return a};IShapeElement.prototype.renderPath=function(t,e){var r,s,i,a,n,o,h,l,p=e.elements.length;var m=e.lvl;if(!t._render)return;for(l=0;l<p;l+=1)if(e.elements[l].data._render){o=e.sh.mdf||this.firstFrame;n="M0 0";var f=e.sh.paths;a=f._length;if(e.elements[l].lvl<m){var c=this.mHelper.reset(),d;var u=m-e.elements[l].lvl;var v=e.transformers.length-1;while(u>0){o=e.transformers[v].mProps.mdf||o;d=e.transformers[v].mProps.v.props;c.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]);u--;v--}if(o){for(i=0;i<a;i+=1){h=f.shapes[i];h&&h._length&&(n+=this.buildShapeString(h,h._length,h.c,c))}e.caches[l]=n}else n=e.caches[l]}else if(o){for(i=0;i<a;i+=1){h=f.shapes[i];h&&h._length&&(n+=this.buildShapeString(h,h._length,h.c,this.identityMatrix))}e.caches[l]=n}else n=e.caches[l];e.elements[l].d+=n;e.elements[l].mdf=o||e.elements[l].mdf}else e.elements[l].mdf=true};IShapeElement.prototype.renderFill=function(t,e){var r=e.style;(e.c.mdf||this.firstFrame)&&r.pElem.setAttribute("fill","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")");(e.o.mdf||this.firstFrame)&&r.pElem.setAttribute("fill-opacity",e.o.v)};IShapeElement.prototype.renderGradient=function(t,e){var r=e.gf;var s=e.of;var i=e.s.v,a=e.e.v;if(e.o.mdf||this.firstFrame){var n="gf"===t.ty?"fill-opacity":"stroke-opacity";e.elem.setAttribute(n,e.o.v)}if(e.s.mdf||this.firstFrame){var o=1===t.t?"x1":"cx";var h="x1"===o?"y1":"cy";r.setAttribute(o,i[0]);r.setAttribute(h,i[1]);if(s){s.setAttribute(o,i[0]);s.setAttribute(h,i[1])}}var l,p,m,f;if(e.g.cmdf||this.firstFrame){l=e.cst;var c=e.g.c;m=l.length;for(p=0;p<m;p+=1){f=l[p];f.setAttribute("offset",c[4*p]+"%");f.setAttribute("stop-color","rgb("+c[4*p+1]+","+c[4*p+2]+","+c[4*p+3]+")")}}if(s&&(e.g.omdf||this.firstFrame)){l=e.ost;var d=e.g.o;m=l.length;for(p=0;p<m;p+=1){f=l[p];f.setAttribute("offset",d[2*p]+"%");f.setAttribute("stop-opacity",d[2*p+1])}}if(1===t.t){if(e.e.mdf||this.firstFrame){r.setAttribute("x2",a[0]);r.setAttribute("y2",a[1]);if(s){s.setAttribute("x2",a[0]);s.setAttribute("y2",a[1])}}}else{var u;if(e.s.mdf||e.e.mdf||this.firstFrame){u=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2));r.setAttribute("r",u);s&&s.setAttribute("r",u)}if(e.e.mdf||e.h.mdf||e.a.mdf||this.firstFrame){u||(u=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)));var v=Math.atan2(a[1]-i[1],a[0]-i[0]);var y=e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v;var g=u*y;var b=Math.cos(v+e.a.v)*g+i[0];var E=Math.sin(v+e.a.v)*g+i[1];r.setAttribute("fx",b);r.setAttribute("fy",E);if(s){s.setAttribute("fx",b);s.setAttribute("fy",E)}}}};IShapeElement.prototype.renderStroke=function(t,e){var r=e.style;var s=e.d;var i,a;if(s&&s.k&&(s.mdf||this.firstFrame)){r.pElem.setAttribute("stroke-dasharray",s.dasharray);r.pElem.setAttribute("stroke-dashoffset",s.dashoffset)}e.c&&(e.c.mdf||this.firstFrame)&&r.pElem.setAttribute("stroke","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")");(e.o.mdf||this.firstFrame)&&r.pElem.setAttribute("stroke-opacity",e.o.v);if(e.w.mdf||this.firstFrame){r.pElem.setAttribute("stroke-width",e.w.v);r.msElem&&r.msElem.setAttribute("stroke-width",e.w.v)}};IShapeElement.prototype.destroy=function(){this._parent.destroy.call(this._parent);this.shapeData=null;this.itemsData=null;this.parentContainer=null;this.placeholder=null};function ITextElement(t,e,r,s){}ITextElement.prototype.init=function(){this.lettersChangedFlag=true;this.dynamicProperties=this.dynamicProperties||[];this.textAnimator=new TextAnimatorProperty(this.data.t,this.renderType,this);this.textProperty=new TextProperty(this,this.data.t,this.dynamicProperties);this._parent.init.call(this);this.textAnimator.searchProperties(this.dynamicProperties)};ITextElement.prototype.prepareFrame=function(t){this._parent.prepareFrame.call(this,t);if(this.textProperty.mdf||this.textProperty.firstFrame){this.buildNewText();this.textProperty.firstFrame=false}};ITextElement.prototype.createPathShape=function(t,e){var r,s=e.length;var i,a,n;var o="";for(r=0;r<s;r+=1){n=e[r].ks.k;o+=this.buildShapeString(n,n.i.length,true,t)}return o};ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)};ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,r,s,i){t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0);e.translate(0,-t.ls,0);switch(t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r])/2,0,0);break}e.translate(s,i,0)};ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"};ITextElement.prototype.buildShapeString=IShapeElement.prototype.buildShapeString;ITextElement.prototype.emptyProp=new LetterProps;ITextElement.prototype.destroy=function(){this._parent.destroy.call(this._parent)};function SVGTextElement(t,e,r,s,i){this.textSpans=[];this.renderType="svg";this._parent.constructor.call(this,t,e,r,s,i)}createElement(SVGBaseElement,SVGTextElement);extendPrototype(ITextElement,SVGTextElement);SVGTextElement.prototype.createElements=function(){this._parent.createElements.call(this);this.data.ln&&this.layerElement.setAttribute("id",this.data.ln);this.data.cl&&this.layerElement.setAttribute("class",this.data.cl);this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=document.createElementNS(svgNS,"text"))};SVGTextElement.prototype.buildNewText=function(){var t,e;var r=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:r?r.l.length:0});r.fc?this.layerElement.setAttribute("fill",this.buildColor(r.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)");if(r.sc){this.layerElement.setAttribute("stroke",this.buildColor(r.sc));this.layerElement.setAttribute("stroke-width",r.sw)}this.layerElement.setAttribute("font-size",r.s);var s=this.globalData.fontManager.getFontByName(r.f);if(s.fClass)this.layerElement.setAttribute("class",s.fClass);else{this.layerElement.setAttribute("font-family",s.fFamily);var i=r.fWeight,a=r.fStyle;this.layerElement.setAttribute("font-style",a);this.layerElement.setAttribute("font-weight",i)}var n=r.l||[];var o=this.globalData.fontManager.chars;e=n.length;if(!e)return;var h;var l=this.mHelper;var p,m="",f=this.data.singleShape;var c=0,d=0,u=true;var v=r.tr/1e3*r.s;if(f&&!o){var y=this.textContainer;var g="";switch(r.j){case 1:g="end";break;case 2:g="middle";break;case 2:g="start";break}y.setAttribute("text-anchor",g);y.setAttribute("letter-spacing",v);var b=r.t.split(String.fromCharCode(13));e=b.length;var d=r.ps?r.ps[1]+r.ascent:0;for(t=0;t<e;t+=1){h=this.textSpans[t]||document.createElementNS(svgNS,"tspan");h.textContent=b[t];h.setAttribute("x",0);h.setAttribute("y",d);h.style.display="inherit";y.appendChild(h);this.textSpans[t]=h;d+=r.lh}this.layerElement.appendChild(y)}else{var E=this.textSpans.length;var P,x;for(t=0;t<e;t+=1){if(!o||!f||0===t){h=E>t?this.textSpans[t]:document.createElementNS(svgNS,o?"path":"text");if(E<=t){h.setAttribute("stroke-linecap","butt");h.setAttribute("stroke-linejoin","round");h.setAttribute("stroke-miterlimit","4");this.textSpans[t]=h;this.layerElement.appendChild(h)}h.style.display="inherit"}l.reset();if(o){l.scale(r.s/100,r.s/100);if(f){if(n[t].n){c=-v;d+=r.yOffset;d+=u?1:0;u=false}this.applyTextPropertiesToMatrix(r,l,n[t].line,c,d);c+=n[t].l||0;c+=v}x=this.globalData.fontManager.getCharData(r.t.charAt(t),s.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily);P=x&&x.data||{};p=P.shapes?P.shapes[0].it:[];f?m+=this.createPathShape(l,p):h.setAttribute("d",this.createPathShape(l,p))}else{h.textContent=n[t].val;h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}}f&&h.setAttribute("d",m)}while(t<this.textSpans.length){this.textSpans[t].style.display="none";t+=1}this._sizeChanged=true};SVGTextElement.prototype.sourceRectAtTime=function(t){this.prepareFrame(this.comp.renderedFrame-this.data.st);this.renderLetters();if(this._sizeChanged){this._sizeChanged=false;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox};SVGTextElement.prototype.renderLetters=function(){if(!this.data.singleShape){this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);if(this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){this._sizeChanged=true;var t,e;var r=this.textAnimator.renderedLetters;var s=this.textProperty.currentData.l;e=s.length;var i,a;for(t=0;t<e;t+=1){if(s[t].n)continue;i=r[t];a=this.textSpans[t];i.mdf.m&&a.setAttribute("transform",i.m);i.mdf.o&&a.setAttribute("opacity",i.o);i.mdf.sw&&a.setAttribute("stroke-width",i.sw);i.mdf.sc&&a.setAttribute("stroke",i.sc);i.mdf.fc&&a.setAttribute("fill",i.fc)}}}};SVGTextElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(false===e){this.hide();return}this.hidden&&this.show();this.firstFrame&&(this.firstFrame=false);this.renderLetters()};function SVGTintFilter(t,e){this.filterManager=e;var r=document.createElementNS(svgNS,"feColorMatrix");r.setAttribute("type","matrix");r.setAttribute("color-interpolation-filters","linearRGB");r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0");r.setAttribute("result","f1");t.appendChild(r);r=document.createElementNS(svgNS,"feColorMatrix");r.setAttribute("type","matrix");r.setAttribute("color-interpolation-filters","sRGB");r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0");r.setAttribute("result","f2");t.appendChild(r);this.matrixFilter=r;if(100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var s=document.createElementNS(svgNS,"feMerge");t.appendChild(s);var i;i=document.createElementNS(svgNS,"feMergeNode");i.setAttribute("in","SourceGraphic");s.appendChild(i);i=document.createElementNS(svgNS,"feMergeNode");i.setAttribute("in","f2");s.appendChild(i)}}SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[0].p.v;var r=this.filterManager.effectElements[1].p.v;var s=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",r[0]-e[0]+" 0 0 0 "+e[0]+" "+(r[1]-e[1])+" 0 0 0 "+e[1]+" "+(r[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+s+" 0")}};function SVGFillFilter(t,e){this.filterManager=e;var r=document.createElementNS(svgNS,"feColorMatrix");r.setAttribute("type","matrix");r.setAttribute("color-interpolation-filters","sRGB");r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0");t.appendChild(r);this.matrixFilter=r}SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[2].p.v;var r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}};function SVGStrokeEffect(t,e){this.initialized=false;this.filterManager=e;this.elem=t;this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var t=this.elem.layerElement.children||this.elem.layerElement.childNodes;var e,r,s,i;if(1===this.filterManager.effectElements[1].p.v){i=this.elem.maskManager.masksProperties.length;s=0}else{s=this.filterManager.effectElements[0].p.v-1;i=s+1}r=document.createElementNS(svgNS,"g");r.setAttribute("fill","none");r.setAttribute("stroke-linecap","round");r.setAttribute("stroke-dashoffset",1);for(s;s<i;s+=1){e=document.createElementNS(svgNS,"path");r.appendChild(e);this.paths.push({p:e,m:s})}if(3===this.filterManager.effectElements[10].p.v){var a=document.createElementNS(svgNS,"mask");var n="stms_"+randomString(10);a.setAttribute("id",n);a.setAttribute("mask-type","alpha");a.appendChild(r);this.elem.globalData.defs.appendChild(a);var o=document.createElementNS(svgNS,"g");o.setAttribute("mask","url("+locationHref+"#"+n+")");t[0]&&o.appendChild(t[0]);this.elem.layerElement.appendChild(o);this.masker=a;r.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v){var t=this.elem.layerElement.children||this.elem.layerElement.childNodes;while(t.length)this.elem.layerElement.removeChild(t[0])}this.elem.layerElement.appendChild(r);this.elem.layerElement.removeAttribute("mask");r.setAttribute("stroke","#fff")}this.initialized=true;this.pathMasker=r};SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,r=this.paths.length;var s,i;for(e=0;e<r;e+=1){s=this.elem.maskManager.viewData[this.paths[e].m];i=this.paths[e].p;(t||this.filterManager.mdf||s.prop.mdf)&&i.setAttribute("d",s.lastPath);if(t||this.filterManager.effectElements[9].p.mdf||this.filterManager.effectElements[4].p.mdf||this.filterManager.effectElements[7].p.mdf||this.filterManager.effectElements[8].p.mdf||s.prop.mdf){var a;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var n=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;var o=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;var h=i.getTotalLength();a="0 0 0 "+h*n+" ";var l=h*(o-n);var p=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;var m=Math.floor(l/p);var f;for(f=0;f<m;f+=1)a+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";a+="0 "+10*h+" 0 0"}else a="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;i.setAttribute("stroke-dasharray",a)}}(t||this.filterManager.effectElements[4].p.mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v);(t||this.filterManager.effectElements[6].p.mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v);if((1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p.mdf)){var c=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*c[0])+","+bm_floor(255*c[1])+","+bm_floor(255*c[2])+")")}};function SVGTritoneFilter(t,e){this.filterManager=e;var r=document.createElementNS(svgNS,"feColorMatrix");r.setAttribute("type","matrix");r.setAttribute("color-interpolation-filters","linearRGB");r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0");r.setAttribute("result","f1");t.appendChild(r);var s=document.createElementNS(svgNS,"feComponentTransfer");s.setAttribute("color-interpolation-filters","sRGB");t.appendChild(s);this.matrixFilter=s;var i=document.createElementNS(svgNS,"feFuncR");i.setAttribute("type","table");s.appendChild(i);this.feFuncR=i;var a=document.createElementNS(svgNS,"feFuncG");a.setAttribute("type","table");s.appendChild(a);this.feFuncG=a;var n=document.createElementNS(svgNS,"feFuncB");n.setAttribute("type","table");s.appendChild(n);this.feFuncB=n}SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[0].p.v;var r=this.filterManager.effectElements[1].p.v;var s=this.filterManager.effectElements[2].p.v;var i=s[0]+" "+r[0]+" "+e[0];var a=s[1]+" "+r[1]+" "+e[1];var n=s[2]+" "+r[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",i);this.feFuncG.setAttribute("tableValues",a);this.feFuncB.setAttribute("tableValues",n)}};function SVGProLevelsFilter(t,e){this.filterManager=e;var r=this.filterManager.effectElements;var s=document.createElementNS(svgNS,"feComponentTransfer");var i,a,n;(r[9].p.k||0!==r[9].p.v||r[10].p.k||1!==r[10].p.v||r[11].p.k||1!==r[11].p.v||r[12].p.k||0!==r[12].p.v||r[13].p.k||1!==r[13].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",s));(r[16].p.k||0!==r[16].p.v||r[17].p.k||1!==r[17].p.v||r[18].p.k||1!==r[18].p.v||r[19].p.k||0!==r[19].p.v||r[20].p.k||1!==r[20].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",s));(r[23].p.k||0!==r[23].p.v||r[24].p.k||1!==r[24].p.v||r[25].p.k||1!==r[25].p.v||r[26].p.k||0!==r[26].p.v||r[27].p.k||1!==r[27].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",s));(r[30].p.k||0!==r[30].p.v||r[31].p.k||1!==r[31].p.v||r[32].p.k||1!==r[32].p.v||r[33].p.k||0!==r[33].p.v||r[34].p.k||1!==r[34].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",s));if(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA){s.setAttribute("color-interpolation-filters","sRGB");t.appendChild(s);s=document.createElementNS(svgNS,"feComponentTransfer")}if(r[2].p.k||0!==r[2].p.v||r[3].p.k||1!==r[3].p.v||r[4].p.k||1!==r[4].p.v||r[5].p.k||0!==r[5].p.v||r[6].p.k||1!==r[6].p.v){s.setAttribute("color-interpolation-filters","sRGB");t.appendChild(s);this.feFuncRComposed=this.createFeFunc("feFuncR",s);this.feFuncGComposed=this.createFeFunc("feFuncG",s);this.feFuncBComposed=this.createFeFunc("feFuncB",s)}}SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var r=document.createElementNS(svgNS,t);r.setAttribute("type","table");e.appendChild(r);return r};SVGProLevelsFilter.prototype.getTableValue=function(t,e,r,s,i){var a=0;var n=256;var o;var h=Math.min(t,e);var l=Math.max(t,e);var p=Array.call(null,{length:n});var m;var f=0;var c=i-s;var d=e-t;while(a<=256){o=a/256;m=o<=h?d<0?i:s:o>=l?d<0?s:i:s+c*Math.pow((o-t)/d,1/r);p[f++]=m;a+=256/(n-1)}return p.join(" ")};SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e,r,s,i;var a=this.filterManager.effectElements;if(this.feFuncRComposed&&(t||a[2].p.mdf||a[3].p.mdf||a[4].p.mdf||a[5].p.mdf||a[6].p.mdf)){e=this.getTableValue(a[2].p.v,a[3].p.v,a[4].p.v,a[5].p.v,a[6].p.v);this.feFuncRComposed.setAttribute("tableValues",e);this.feFuncGComposed.setAttribute("tableValues",e);this.feFuncBComposed.setAttribute("tableValues",e)}if(this.feFuncR&&(t||a[9].p.mdf||a[10].p.mdf||a[11].p.mdf||a[12].p.mdf||a[13].p.mdf)){e=this.getTableValue(a[9].p.v,a[10].p.v,a[11].p.v,a[12].p.v,a[13].p.v);this.feFuncR.setAttribute("tableValues",e)}if(this.feFuncG&&(t||a[16].p.mdf||a[17].p.mdf||a[18].p.mdf||a[19].p.mdf||a[20].p.mdf)){e=this.getTableValue(a[16].p.v,a[17].p.v,a[18].p.v,a[19].p.v,a[20].p.v);this.feFuncG.setAttribute("tableValues",e)}if(this.feFuncB&&(t||a[23].p.mdf||a[24].p.mdf||a[25].p.mdf||a[26].p.mdf||a[27].p.mdf)){e=this.getTableValue(a[23].p.v,a[24].p.v,a[25].p.v,a[26].p.v,a[27].p.v);this.feFuncB.setAttribute("tableValues",e)}if(this.feFuncA&&(t||a[30].p.mdf||a[31].p.mdf||a[32].p.mdf||a[33].p.mdf||a[34].p.mdf)){e=this.getTableValue(a[30].p.v,a[31].p.v,a[32].p.v,a[33].p.v,a[34].p.v);this.feFuncA.setAttribute("tableValues",e)}}};function SVGDropShadowEffect(t,e){t.setAttribute("x","-100%");t.setAttribute("y","-100%");t.setAttribute("width","400%");t.setAttribute("height","400%");this.filterManager=e;var r=document.createElementNS(svgNS,"feGaussianBlur");r.setAttribute("in","SourceAlpha");r.setAttribute("result","drop_shadow_1");r.setAttribute("stdDeviation","0");this.feGaussianBlur=r;t.appendChild(r);var s=document.createElementNS(svgNS,"feOffset");s.setAttribute("dx","25");s.setAttribute("dy","0");s.setAttribute("in","drop_shadow_1");s.setAttribute("result","drop_shadow_2");this.feOffset=s;t.appendChild(s);var i=document.createElementNS(svgNS,"feFlood");i.setAttribute("flood-color","#00ff00");i.setAttribute("flood-opacity","1");i.setAttribute("result","drop_shadow_3");this.feFlood=i;t.appendChild(i);var a=document.createElementNS(svgNS,"feComposite");a.setAttribute("in","drop_shadow_3");a.setAttribute("in2","drop_shadow_2");a.setAttribute("operator","in");a.setAttribute("result","drop_shadow_4");t.appendChild(a);var n=document.createElementNS(svgNS,"feMerge");t.appendChild(n);var o;o=document.createElementNS(svgNS,"feMergeNode");n.appendChild(o);o=document.createElementNS(svgNS,"feMergeNode");o.setAttribute("in","SourceGraphic");this.feMergeNode=o;this.feMerge=n;this.originalNodeAdded=false;n.appendChild(o)}SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){(t||this.filterManager.effectElements[4].p.mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4);if(t||this.filterManager.effectElements[0].p.mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}(t||this.filterManager.effectElements[1].p.mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255);if(t||this.filterManager.effectElements[2].p.mdf||this.filterManager.effectElements[3].p.mdf){var r=this.filterManager.effectElements[3].p.v;var s=(this.filterManager.effectElements[2].p.v-90)*degToRads;var i=r*Math.cos(s);var a=r*Math.sin(s);this.feOffset.setAttribute("dx",i);this.feOffset.setAttribute("dy",a)}}};function SVGMatte3Effect(t,e,r){this.initialized=false;this.filterManager=e;this.filterElem=t;this.elem=r;r.matteElement=document.createElementNS(svgNS,"g");r.matteElement.appendChild(r.layerElement);r.matteElement.appendChild(r.transformedElement);r.baseElement=r.matteElement}SVGMatte3Effect.prototype.setElementAsMask=function(t,e){var r=document.createElementNS(svgNS,"mask");r.setAttribute("id",e.layerId);r.setAttribute("mask-type","alpha");r.appendChild(e.layerElement);t.setMatte(e.layerId);e.data.hd=false;var s=t.globalData.defs;s.appendChild(r)};SVGMatte3Effect.prototype.initialize=function(){var t=this.filterManager.effectElements[0].p.v;var e=0,r=this.elem.comp.elements.length;while(e<r){this.elem.comp.elements[e].data.ind===t&&this.setElementAsMask(this.elem,this.elem.comp.elements[e]);e+=1}this.initialized=true};SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGEffects(t){var e,r=t.data.ef.length;var s=randomString(10);var i=filtersFactory.createFilter(s);var a=0;this.filters=[];var n;for(e=0;e<r;e+=1)if(20===t.data.ef[e].ty){a+=1;n=new SVGTintFilter(i,t.effects.effectElements[e]);this.filters.push(n)}else if(21===t.data.ef[e].ty){a+=1;n=new SVGFillFilter(i,t.effects.effectElements[e]);this.filters.push(n)}else if(22===t.data.ef[e].ty){n=new SVGStrokeEffect(t,t.effects.effectElements[e]);this.filters.push(n)}else if(23===t.data.ef[e].ty){a+=1;n=new SVGTritoneFilter(i,t.effects.effectElements[e]);this.filters.push(n)}else if(24===t.data.ef[e].ty){a+=1;n=new SVGProLevelsFilter(i,t.effects.effectElements[e]);this.filters.push(n)}else if(25===t.data.ef[e].ty){a+=1;n=new SVGDropShadowEffect(i,t.effects.effectElements[e]);this.filters.push(n)}else if(28===t.data.ef[e].ty){n=new SVGMatte3Effect(i,t.effects.effectElements[e],t);this.filters.push(n)}if(a){t.globalData.defs.appendChild(i);t.layerElement.setAttribute("filter","url("+locationHref+"#"+s+")")}}SVGEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)};function ICompElement(t,e,r,s,i){this._parent.constructor.call(this,t,e,r,s,i);this.layers=t.layers;this.supports3d=true;this.completeLayers=false;this.pendingElements=[];this.elements=this.layers?Array.apply(null,{length:this.layers.length}):[];this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,r.frameRate,this.dynamicProperties));if(this.data.xt){this.layerElement=document.createElementNS(svgNS,"g");this.buildAllItems()}else r.progressiveLoad||this.buildAllItems()}createElement(SVGBaseElement,ICompElement);ICompElement.prototype.hide=function(){if(!this.hidden){this._parent.hide.call(this);var t,e=this.elements.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].hide()}};ICompElement.prototype.prepareFrame=function(t){this._parent.prepareFrame.call(this,t);if(false===this.isVisible&&!this.data.xt)return;if(this.tm){var e=this.tm.v;e===this.data.op&&(e=this.data.op-1);this.renderedFrame=e}else this.renderedFrame=t/this.data.sr;var r,s=this.elements.length;this.completeLayers||this.checkLayers(this.renderedFrame);for(r=0;r<s;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st)};ICompElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);var r,s=this.layers.length;if(false===e){this.hide();return}this.hidden&&this.show();for(r=0;r<s;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();this.firstFrame&&(this.firstFrame=false)};ICompElement.prototype.setElements=function(t){this.elements=t};ICompElement.prototype.getElements=function(){return this.elements};ICompElement.prototype.destroy=function(){this._parent.destroy.call(this._parent);var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()};ICompElement.prototype.checkLayers=SVGRenderer.prototype.checkLayers;ICompElement.prototype.buildItem=SVGRenderer.prototype.buildItem;ICompElement.prototype.buildAllItems=SVGRenderer.prototype.buildAllItems;ICompElement.prototype.buildElementParenting=SVGRenderer.prototype.buildElementParenting;ICompElement.prototype.createItem=SVGRenderer.prototype.createItem;ICompElement.prototype.createImage=SVGRenderer.prototype.createImage;ICompElement.prototype.createComp=SVGRenderer.prototype.createComp;ICompElement.prototype.createSolid=SVGRenderer.prototype.createSolid;ICompElement.prototype.createShape=SVGRenderer.prototype.createShape;ICompElement.prototype.createText=SVGRenderer.prototype.createText;ICompElement.prototype.createBase=SVGRenderer.prototype.createBase;ICompElement.prototype.appendElementInPos=SVGRenderer.prototype.appendElementInPos;ICompElement.prototype.checkPendingElements=SVGRenderer.prototype.checkPendingElements;ICompElement.prototype.addPendingElement=SVGRenderer.prototype.addPendingElement;function IImageElement(t,e,r,s,i){this.assetData=r.getAssetData(t.refId);this._parent.constructor.call(this,t,e,r,s,i)}createElement(SVGBaseElement,IImageElement);IImageElement.prototype.createElements=function(){var t=this.globalData.getAssetsPath(this.assetData);this._parent.createElements.call(this);this.innerElem=document.createElementNS(svgNS,"image");this.innerElem.setAttribute("width",this.assetData.w+"px");this.innerElem.setAttribute("height",this.assetData.h+"px");this.innerElem.setAttribute("preserveAspectRatio","xMidYMid slice");this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t);this.maskedElement=this.innerElem;this.layerElement.appendChild(this.innerElem);this.data.ln&&this.layerElement.setAttribute("id",this.data.ln);this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)};IImageElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(false===e){this.hide();return}this.hidden&&this.show();this.firstFrame&&(this.firstFrame=false)};IImageElement.prototype.destroy=function(){this._parent.destroy.call(this._parent);this.innerElem=null};function ISolidElement(t,e,r,s,i){this._parent.constructor.call(this,t,e,r,s,i)}createElement(SVGBaseElement,ISolidElement);ISolidElement.prototype.createElements=function(){this._parent.createElements.call(this);var t=document.createElementNS(svgNS,"rect");t.setAttribute("width",this.data.sw);t.setAttribute("height",this.data.sh);t.setAttribute("fill",this.data.sc);this.layerElement.appendChild(t);this.innerElem=t;this.data.ln&&this.layerElement.setAttribute("id",this.data.ln);this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)};ISolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame;ISolidElement.prototype.destroy=IImageElement.prototype.destroy;var animationManager=function(){var t={};var e=[];var r=0;var s=0;var i=true;var a=0;function n(t){var r=0;var i=t.target;while(r<s){if(e[r].animation===i){e.splice(r,1);r-=1;s-=1;i.isPaused||l()}r+=1}}function o(t,r){if(!t)return null;var i=0;while(i<s){if(e[i].elem==t&&null!==e[i].elem)return e[i].animation;i+=1}var a=new AnimationItem;p(a,t);a.setData(t,r);return a}function h(){a+=1;A()}function l(){a-=1;0===a&&(i=true)}function p(t,r){t.addEventListener("destroy",n);t.addEventListener("_active",h);t.addEventListener("_idle",l);e.push({elem:r,animation:t});s+=1}function m(t){var e=new AnimationItem;p(e,null);e.setParams(t);return e}function f(t,r){var i;for(i=0;i<s;i+=1)e[i].animation.setSpeed(t,r)}function c(t,r){var i;for(i=0;i<s;i+=1)e[i].animation.setDirection(t,r)}function d(t){var r;for(r=0;r<s;r+=1)e[r].animation.play(t)}function u(t,i){r=Date.now();var a;for(a=0;a<s;a+=1)e[a].animation.moveFrame(t,i)}function v(t){var a=t-r;var n;for(n=0;n<s;n+=1)e[n].animation.advanceTime(a);r=t;i||window.requestAnimationFrame(v)}function y(t){r=t;window.requestAnimationFrame(v)}function g(t){var r;for(r=0;r<s;r+=1)e[r].animation.pause(t)}function b(t,r,i){var a;for(a=0;a<s;a+=1)e[a].animation.goToAndStop(t,r,i)}function E(t){var r;for(r=0;r<s;r+=1)e[r].animation.stop(t)}function P(t){var r;for(r=0;r<s;r+=1)e[r].animation.togglePause(t)}function x(t){var r;for(r=s-1;r>=0;r-=1)e[r].animation.destroy(t)}function S(t,e,r){var s=document.getElementsByClassName("bodymovin");var i,a=s.length;for(i=0;i<a;i+=1){r&&s[i].setAttribute("data-bm-type",r);o(s[i],t)}if(e&&0===a){r||(r="svg");var n=document.getElementsByTagName("body")[0];n.innerHTML="";var h=document.createElement("div");h.style.width="100%";h.style.height="100%";h.setAttribute("data-bm-type",r);n.appendChild(h);o(h,t)}}function C(){var t;for(t=0;t<s;t+=1)e[t].animation.resize()}function k(){window.requestAnimationFrame(y)}function A(){if(i){i=false;window.requestAnimationFrame(y)}}setTimeout(k,0);t.registerAnimation=o;t.loadAnimation=m;t.setSpeed=f;t.setDirection=c;t.play=d;t.moveFrame=u;t.pause=g;t.stop=E;t.togglePause=P;t.searchAnimations=S;t.resize=C;t.start=k;t.goToAndStop=b;t.destroy=x;return t}();var AnimationItem=function(){this._cbs=[];this.name="";this.path="";this.isLoaded=false;this.currentFrame=0;this.currentRawFrame=0;this.totalFrames=0;this.frameRate=0;this.frameMult=0;this.playSpeed=1;this.playDirection=1;this.pendingElements=0;this.playCount=0;this.prerenderFramesFlag=true;this.animationData={};this.layers=[];this.assets=[];this.isPaused=true;this.autoplay=false;this.loop=true;this.renderer=null;this.animationID=randomString(10);this.scaleMode="fit";this.assetsPath="";this.timeCompleted=0;this.segmentPos=0;this.subframeEnabled=subframeEnabled;this.segments=[];this.pendingSegment=false;this._idle=true;this.projectInterface=ProjectInterface()};AnimationItem.prototype.setParams=function(t){var e=this;t.context&&(this.context=t.context);(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var r=t.animType?t.animType:t.renderer?t.renderer:"svg";switch(r){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;case"hybrid":case"html":default:this.renderer=new HybridRenderer(this,t.rendererSettings);break}this.renderer.setProjectInterface(this.projectInterface);this.animType=r;""===t.loop||null===t.loop||(false===t.loop?this.loop=false:true===t.loop?this.loop=true:this.loop=parseInt(t.loop));this.autoplay=!("autoplay"in t)||t.autoplay;this.name=t.name?t.name:"";this.prerenderFramesFlag=!("prerender"in t)||t.prerender;this.autoloadSegments=!t.hasOwnProperty("autoloadSegments")||t.autoloadSegments;if(t.animationData)e.configAnimation(t.animationData);else if(t.path){if("json"!=t.path.substr(-4)){"/"!=t.path.substr(-1,1)&&(t.path+="/");t.path+="data.json"}var s=new XMLHttpRequest;-1!=t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1);this.assetsPath=t.assetsPath;this.fileName=t.path.substr(t.path.lastIndexOf("/")+1);this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json"));s.open("GET",t.path,true);s.send();s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status)e.configAnimation(JSON.parse(s.responseText));else try{var t=JSON.parse(s.responseText);e.configAnimation(t)}catch(t){}}}};AnimationItem.prototype.setData=function(t,e){var r={wrapper:t,animationData:e?"object"===typeof e?e:JSON.parse(e):null};var s=t.attributes;r.path=s.getNamedItem("data-animation-path")?s.getNamedItem("data-animation-path").value:s.getNamedItem("data-bm-path")?s.getNamedItem("data-bm-path").value:s.getNamedItem("bm-path")?s.getNamedItem("bm-path").value:"";r.animType=s.getNamedItem("data-anim-type")?s.getNamedItem("data-anim-type").value:s.getNamedItem("data-bm-type")?s.getNamedItem("data-bm-type").value:s.getNamedItem("bm-type")?s.getNamedItem("bm-type").value:s.getNamedItem("data-bm-renderer")?s.getNamedItem("data-bm-renderer").value:s.getNamedItem("bm-renderer")?s.getNamedItem("bm-renderer").value:"canvas";var i=s.getNamedItem("data-anim-loop")?s.getNamedItem("data-anim-loop").value:s.getNamedItem("data-bm-loop")?s.getNamedItem("data-bm-loop").value:s.getNamedItem("bm-loop")?s.getNamedItem("bm-loop").value:"";""===i||(r.loop="false"!==i&&("true"===i||parseInt(i)));var a=s.getNamedItem("data-anim-autoplay")?s.getNamedItem("data-anim-autoplay").value:s.getNamedItem("data-bm-autoplay")?s.getNamedItem("data-bm-autoplay").value:!s.getNamedItem("bm-autoplay")||s.getNamedItem("bm-autoplay").value;r.autoplay="false"!==a;r.name=s.getNamedItem("data-name")?s.getNamedItem("data-name").value:s.getNamedItem("data-bm-name")?s.getNamedItem("data-bm-name").value:s.getNamedItem("bm-name")?s.getNamedItem("bm-name").value:"";var n=s.getNamedItem("data-anim-prerender")?s.getNamedItem("data-anim-prerender").value:s.getNamedItem("data-bm-prerender")?s.getNamedItem("data-bm-prerender").value:s.getNamedItem("bm-prerender")?s.getNamedItem("bm-prerender").value:"";"false"===n&&(r.prerender=false);this.setParams(r)};AnimationItem.prototype.includeLayers=function(t){if(t.op>this.animationData.op){this.animationData.op=t.op;this.totalFrames=Math.floor(t.op-this.animationData.ip);this.animationData.tf=this.totalFrames}var e=this.animationData.layers;var r,s=e.length;var i=t.layers;var a,n=i.length;for(a=0;a<n;a+=1){r=0;while(r<s){if(e[r].id==i[a].id){e[r]=i[a];break}r+=1}}if(t.chars||t.fonts){this.renderer.globalData.fontManager.addChars(t.chars);this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)}if(t.assets){s=t.assets.length;for(r=0;r<s;r+=1)this.animationData.assets.push(t.assets[r])}this.animationData.__complete=false;dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);this.renderer.includeLayers(t.layers);expressionsPlugin&&expressionsPlugin.initExpressions(this);this.renderer.renderFrame(null);this.loadNextSegment()};AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments){this.trigger("data_ready");this.timeCompleted=this.animationData.tf;return}var e=t.shift();this.timeCompleted=e.time*this.frameRate;var r=new XMLHttpRequest;var s=this;var i=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1;r.open("GET",i,true);r.send();r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status)s.includeLayers(JSON.parse(r.responseText));else try{var t=JSON.parse(r.responseText);s.includeLayers(t)}catch(t){}}};AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.animationData.tf);this.loadNextSegment()};AnimationItem.prototype.configAnimation=function(t){var e=this;if(this.renderer&&this.renderer.destroyed)return;this.animationData=t;this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip);this.animationData.tf=this.totalFrames;this.renderer.configAnimation(t);t.assets||(t.assets=[]);if(t.comps){t.assets=t.assets.concat(t.comps);t.comps=null}this.renderer.searchExtraCompositions(t.assets);this.layers=this.animationData.layers;this.assets=this.animationData.assets;this.frameRate=this.animationData.fr;this.firstFrame=Math.round(this.animationData.ip);this.frameMult=this.animationData.fr/1e3;this.trigger("config_ready");this.imagePreloader=new ImagePreloader;this.imagePreloader.setAssetsPath(this.assetsPath);this.imagePreloader.setPath(this.path);this.imagePreloader.loadAssets(t.assets,function(t){t||e.trigger("loaded_images")});this.loadSegments();this.updaFrameModifier();if(this.renderer.globalData.fontManager)this.waitForFontsLoaded();else{dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);this.checkLoaded()}};AnimationItem.prototype.waitForFontsLoaded=function(){function t(){if(this.renderer.globalData.fontManager.loaded){dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);this.checkLoaded()}else setTimeout(t.bind(this),20)}return function(){t.bind(this)()}}();AnimationItem.prototype.addPendingElement=function(){this.pendingElements+=1};AnimationItem.prototype.elementLoaded=function(){this.pendingElements--;this.checkLoaded()};AnimationItem.prototype.checkLoaded=function(){if(0===this.pendingElements){expressionsPlugin&&expressionsPlugin.initExpressions(this);this.renderer.initItems();setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0);this.isLoaded=true;this.gotoFrame();this.autoplay&&this.play()}};AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()};AnimationItem.prototype.setSubframe=function(t){this.subframeEnabled=!!t};AnimationItem.prototype.gotoFrame=function(){this.subframeEnabled?this.currentFrame=this.currentRawFrame:this.currentFrame=Math.floor(this.currentRawFrame);this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted);this.trigger("enterFrame");this.renderFrame()};AnimationItem.prototype.renderFrame=function(){if(false===this.isLoaded)return;this.renderer.renderFrame(this.currentFrame+this.firstFrame)};AnimationItem.prototype.play=function(t){if(t&&this.name!=t)return;if(true===this.isPaused){this.isPaused=false;if(this._idle){this._idle=false;this.trigger("_active")}}};AnimationItem.prototype.pause=function(t){if(t&&this.name!=t)return;if(false===this.isPaused){this.isPaused=true;if(!this.pendingSegment){this._idle=true;this.trigger("_idle")}}};AnimationItem.prototype.togglePause=function(t){if(t&&this.name!=t)return;true===this.isPaused?this.play():this.pause()};AnimationItem.prototype.stop=function(t){if(t&&this.name!=t)return;this.pause();this.currentFrame=this.currentRawFrame=0;this.playCount=0;this.gotoFrame()};AnimationItem.prototype.goToAndStop=function(t,e,r){if(r&&this.name!=r)return;e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()};AnimationItem.prototype.goToAndPlay=function(t,e,r){this.goToAndStop(t,e,r);this.play()};AnimationItem.prototype.advanceTime=function(t){if(this.pendingSegment){this.pendingSegment=false;this.adjustSegment(this.segments.shift());this.isPaused&&this.play();return}if(true===this.isPaused||false===this.isLoaded)return;this.setCurrentRawFrameValue(this.currentRawFrame+t*this.frameModifier)};AnimationItem.prototype.updateAnimation=function(t){this.setCurrentRawFrameValue(this.totalFrames*t)};AnimationItem.prototype.moveFrame=function(t,e){if(e&&this.name!=e)return;this.setCurrentRawFrameValue(this.currentRawFrame+t)};AnimationItem.prototype.adjustSegment=function(t){this.playCount=0;if(t[1]<t[0]){this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1));this.totalFrames=t[0]-t[1];this.firstFrame=t[1];this.setCurrentRawFrameValue(this.totalFrames-.01)}else if(t[1]>t[0]){this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1));this.totalFrames=t[1]-t[0];this.firstFrame=t[0];this.setCurrentRawFrameValue(0)}this.trigger("segmentStart")};AnimationItem.prototype.setSegment=function(t,e){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?r=t:this.currentRawFrame+this.firstFrame>e&&(r=e-t-.01));this.firstFrame=t;this.totalFrames=e-t;-1!==r&&this.goToAndStop(r,true)};AnimationItem.prototype.playSegments=function(t,e){if("object"===typeof t[0]){var r,s=t.length;for(r=0;r<s;r+=1)this.segments.push(t[r])}else this.segments.push(t);e&&this.adjustSegment(this.segments.shift());this.isPaused&&this.play()};AnimationItem.prototype.resetSegments=function(t){this.segments.length=0;this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op-this.animationData.ip+this.animationData.ip*this.frameRate)]);t&&this.adjustSegment(this.segments.shift())};AnimationItem.prototype.checkSegments=function(){this.segments.length&&(this.pendingSegment=true)};AnimationItem.prototype.remove=function(t){if(t&&this.name!=t)return;this.renderer.destroy()};AnimationItem.prototype.destroy=function(t){if(t&&this.name!=t||this.renderer&&this.renderer.destroyed)return;this.renderer.destroy();this.trigger("destroy");this._cbs=null;this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null};AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t;if(this.currentRawFrame>=this.totalFrames){this.checkSegments();if(false===this.loop){this.currentRawFrame=this.totalFrames-.01;this.gotoFrame();this.pause();this.trigger("complete");return}this.trigger("loopComplete");this.playCount+=1;if(true!==this.loop&&this.playCount==this.loop||this.pendingSegment){this.currentRawFrame=this.totalFrames-.01;this.gotoFrame();this.pause();this.trigger("complete");return}this.currentRawFrame=this.currentRawFrame%this.totalFrames}else if(this.currentRawFrame<0){this.checkSegments();this.playCount-=1;this.playCount<0&&(this.playCount=0);if(false===this.loop||this.pendingSegment){this.currentRawFrame=0;this.gotoFrame();this.pause();this.trigger("complete");return}this.trigger("loopComplete");this.currentRawFrame=(this.totalFrames+this.currentRawFrame)%this.totalFrames;this.gotoFrame();return}this.gotoFrame()};AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t;this.updaFrameModifier()};AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1;this.updaFrameModifier()};AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection};AnimationItem.prototype.getPath=function(){return this.path};AnimationItem.prototype.getAssetsPath=function(t){var e="";if(this.assetsPath){var r=t.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]);e=this.assetsPath+r}else{e=this.path;e+=t.u?t.u:"";e+=t.p}return e};AnimationItem.prototype.getAssetData=function(t){var e=0,r=this.assets.length;while(e<r){if(t==this.assets[e].id)return this.assets[e];e+=1}};AnimationItem.prototype.hide=function(){this.renderer.hide()};AnimationItem.prototype.show=function(){this.renderer.show()};AnimationItem.prototype.getAssets=function(){return this.assets};AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult));"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult));"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))};AnimationItem.prototype.addEventListener=_addEventListener;AnimationItem.prototype.removeEventListener=_removeEventListener;AnimationItem.prototype.triggerEvent=_triggerEvent;function CanvasRenderer(t,e){this.animationItem=t;this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||false,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",className:e&&e.className||""};this.renderConfig.dpr=e&&e.dpr||1;this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1);this.renderedFrame=-1;this.globalData={frameNum:-1};this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1};var r,s=15;for(r=0;r<s;r+=1)this.contextData.saved[r]=Array.apply(null,{length:16});this.elements=[];this.pendingElements=[];this.transformMat=new Matrix;this.completeLayers=false}extendPrototype(BaseRenderer,CanvasRenderer);CanvasRenderer.prototype.createBase=function(t){return new CVBaseElement(t,this,this.globalData)};CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this,this.globalData)};CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this,this.globalData)};CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this,this.globalData)};CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this,this.globalData)};CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this,this.globalData)};CanvasRenderer.prototype.ctxTransform=function(t){if(1===t[0]&&0===t[1]&&0===t[4]&&1===t[5]&&0===t[12]&&0===t[13])return;if(!this.renderConfig.clearCanvas){this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13]);return}this.transformMat.cloneFromProps(t);this.transformMat.transform(this.contextData.cTr.props[0],this.contextData.cTr.props[1],this.contextData.cTr.props[2],this.contextData.cTr.props[3],this.contextData.cTr.props[4],this.contextData.cTr.props[5],this.contextData.cTr.props[6],this.contextData.cTr.props[7],this.contextData.cTr.props[8],this.contextData.cTr.props[9],this.contextData.cTr.props[10],this.contextData.cTr.props[11],this.contextData.cTr.props[12],this.contextData.cTr.props[13],this.contextData.cTr.props[14],this.contextData.cTr.props[15]);this.contextData.cTr.cloneFromProps(this.transformMat.props);var e=this.contextData.cTr.props;this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])};CanvasRenderer.prototype.ctxOpacity=function(t){if(1===t)return;if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=t<0?0:t;return}this.contextData.cO*=t<0?0:t;this.canvasContext.globalAlpha=this.contextData.cO};CanvasRenderer.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.cArrPos=0;this.contextData.cTr.reset();this.contextData.cO=1};CanvasRenderer.prototype.save=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}t&&this.canvasContext.save();var e=this.contextData.cTr.props;null!==this.contextData.saved[this.contextData.cArrPos]&&void 0!==this.contextData.saved[this.contextData.cArrPos]||(this.contextData.saved[this.contextData.cArrPos]=new Array(16));var r,s=this.contextData.saved[this.contextData.cArrPos];for(r=0;r<16;r+=1)s[r]=e[r];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO;this.contextData.cArrPos+=1};CanvasRenderer.prototype.restore=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}t&&this.canvasContext.restore();this.contextData.cArrPos-=1;var e=this.contextData.saved[this.contextData.cArrPos];var r,s=this.contextData.cTr.props;for(r=0;r<16;r+=1)s[r]=e[r];this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13]);e=this.contextData.savedOp[this.contextData.cArrPos];this.contextData.cO=e;this.canvasContext.globalAlpha=e};CanvasRenderer.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=document.createElement("canvas");this.animationItem.container.style.width="100%";this.animationItem.container.style.height="100%";this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px";this.animationItem.wrapper.appendChild(this.animationItem.container);this.canvasContext=this.animationItem.container.getContext("2d");this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className)}else this.canvasContext=this.renderConfig.context;this.data=t;this.globalData.canvasContext=this.canvasContext;this.globalData.renderer=this;this.globalData.isDashed=false;this.globalData.totalFrames=Math.floor(t.tf);this.globalData.compWidth=t.w;this.globalData.compHeight=t.h;this.globalData.frameRate=t.fr;this.globalData.frameId=0;this.globalData.compSize={w:t.w,h:t.h};this.globalData.progressiveLoad=this.renderConfig.progressiveLoad;this.layers=t.layers;this.transformCanvas={};this.transformCanvas.w=t.w;this.transformCanvas.h=t.h;this.globalData.fontManager=new FontManager;this.globalData.fontManager.addChars(t.chars);this.globalData.fontManager.addFonts(t.fonts,document.body);this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem);this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem);this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem);this.globalData.addPendingElement=this.animationItem.addPendingElement.bind(this.animationItem);this.globalData.transformCanvas=this.transformCanvas;this.elements=Array.apply(null,{length:t.layers.length});this.updateContainerSize()};CanvasRenderer.prototype.updateContainerSize=function(){var t,e;if(this.animationItem.wrapper&&this.animationItem.container){t=this.animationItem.wrapper.offsetWidth;e=this.animationItem.wrapper.offsetHeight;this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr);this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)}else{t=this.canvasContext.canvas.width*this.renderConfig.dpr;e=this.canvasContext.canvas.height*this.renderConfig.dpr}var r,s;if(-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var i=this.renderConfig.preserveAspectRatio.split(" ");var a=i[1]||"meet";var n=i[0]||"xMidYMid";var o=n.substr(0,4);var h=n.substr(4);r=t/e;s=this.transformCanvas.w/this.transformCanvas.h;if(s>r&&"meet"===a||s<r&&"slice"===a){this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr);this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)}else{this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr);this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)}this.transformCanvas.tx="xMid"===o&&(s<r&&"meet"===a||s>r&&"slice"===a)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===o&&(s<r&&"meet"===a||s>r&&"slice"===a)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:0;this.transformCanvas.ty="YMid"===h&&(s>r&&"meet"===a||s<r&&"slice"===a)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===h&&(s>r&&"meet"===a||s<r&&"slice"===a)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:0}else if("none"==this.renderConfig.preserveAspectRatio){this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr);this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr);this.transformCanvas.tx=0;this.transformCanvas.ty=0}else{this.transformCanvas.sx=this.renderConfig.dpr;this.transformCanvas.sy=this.renderConfig.dpr;this.transformCanvas.tx=0;this.transformCanvas.ty=0}this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];var l,p=this.elements.length;for(l=0;l<p;l+=1)this.elements[l]&&0===this.elements[l].data.ty&&this.elements[l].resize(this.globalData.transformCanvas)};CanvasRenderer.prototype.destroy=function(){this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0;this.globalData.canvasContext=null;this.animationItem.container=null;this.destroyed=true};CanvasRenderer.prototype.renderFrame=function(t){if(this.renderedFrame==t&&true===this.renderConfig.clearCanvas||this.destroyed||null===t)return;this.renderedFrame=t;this.globalData.frameNum=t-this.animationItem.firstFrame;this.globalData.frameId+=1;this.globalData.projectInterface.currentFrame=t;if(true===this.renderConfig.clearCanvas){this.reset();this.canvasContext.save();this.canvasContext.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)}else this.save();this.ctxTransform(this.transformCanvas.props);this.canvasContext.beginPath();this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h);this.canvasContext.closePath();this.canvasContext.clip();var e,r=this.layers.length;this.completeLayers||this.checkLayers(t);for(e=0;e<r;e++)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);for(e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();true!==this.renderConfig.clearCanvas?this.restore():this.canvasContext.restore()};CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(e[t]||99==this.layers[t].ty)return;var r=this.createItem(this.layers[t],this,this.globalData);e[t]=r;r.initExpressions();0===this.layers[t].ty&&r.resize(this.globalData.transformCanvas)};CanvasRenderer.prototype.checkPendingElements=function(){while(this.pendingElements.length){var t=this.pendingElements.pop();t.checkParenting()}};CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"};CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"};CanvasRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;var s=document.createElementNS(svgNS,"g");for(e=0;e<r;e+=1)if(t[e].xt){var i=this.createComp(t[e],this.globalData.comp,this.globalData);i.initExpressions();this.globalData.projectInterface.registerComposition(i)}};function HybridRenderer(t,e){this.animationItem=t;this.layers=null;this.renderedFrame=-1;this.globalData={frameNum:-1};this.renderConfig={className:e&&e.className||""};this.pendingElements=[];this.elements=[];this.threeDElements=[];this.destroyed=false;this.camera=null;this.supports3d=true}extendPrototype(BaseRenderer,HybridRenderer);HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem;HybridRenderer.prototype.checkPendingElements=function(){while(this.pendingElements.length){var t=this.pendingElements.pop();t.checkParenting()}};HybridRenderer.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(!r)return;var s=this.layers[e];if(s.ddd&&this.supports3d)this.addTo3dContainer(r,e);else{var i=0;var a,n;while(i<e){if(this.elements[i]&&true!==this.elements[i]&&this.elements[i].getBaseElement){n=this.elements[i];a=this.layers[i].ddd?this.getThreeDContainerByPos(i):n.getBaseElement()}i+=1}a?s.ddd&&this.supports3d||this.layerElement.insertBefore(r,a):s.ddd&&this.supports3d||this.layerElement.appendChild(r)}};HybridRenderer.prototype.createBase=function(t){return new SVGBaseElement(t,this.layerElement,this.globalData,this)};HybridRenderer.prototype.createShape=function(t){if(!this.supports3d)return new IShapeElement(t,this.layerElement,this.globalData,this);return new HShapeElement(t,this.layerElement,this.globalData,this)};HybridRenderer.prototype.createText=function(t){if(!this.supports3d)return new SVGTextElement(t,this.layerElement,this.globalData,this);return new HTextElement(t,this.layerElement,this.globalData,this)};HybridRenderer.prototype.createCamera=function(t){this.camera=new HCameraElement(t,this.layerElement,this.globalData,this);return this.camera};HybridRenderer.prototype.createImage=function(t){if(!this.supports3d)return new IImageElement(t,this.layerElement,this.globalData,this);return new HImageElement(t,this.layerElement,this.globalData,this)};HybridRenderer.prototype.createComp=function(t){if(!this.supports3d)return new ICompElement(t,this.layerElement,this.globalData,this);return new HCompElement(t,this.layerElement,this.globalData,this)};HybridRenderer.prototype.createSolid=function(t){if(!this.supports3d)return new ISolidElement(t,this.layerElement,this.globalData,this);return new HSolidElement(t,this.layerElement,this.globalData,this)};HybridRenderer.prototype.getThreeDContainerByPos=function(t){var e=0,r=this.threeDElements.length;while(e<r){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}};HybridRenderer.prototype.createThreeDContainer=function(t){var e=document.createElement("div");styleDiv(e);e.style.width=this.globalData.compSize.w+"px";e.style.height=this.globalData.compSize.h+"px";e.style.transformOrigin=e.style.mozTransformOrigin=e.style.webkitTransformOrigin="50% 50%";var r=document.createElement("div");styleDiv(r);r.style.transform=r.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";e.appendChild(r);this.resizerElem.appendChild(e);var s={container:r,perspectiveElem:e,startPos:t,endPos:t};this.threeDElements.push(s);return s};HybridRenderer.prototype.build3dContainers=function(){var t,e=this.layers.length;var r;for(t=0;t<e;t+=1)if(this.layers[t].ddd){r||(r=this.createThreeDContainer(t));r.endPos=Math.max(r.endPos,t)}else r=null};HybridRenderer.prototype.addTo3dContainer=function(t,e){var r=0,s=this.threeDElements.length;while(r<s){if(e<=this.threeDElements[r].endPos){var i=this.threeDElements[r].startPos;var a;while(i<e){this.elements[i]&&this.elements[i].getBaseElement&&(a=this.elements[i].getBaseElement());i+=1}a?this.threeDElements[r].container.insertBefore(t,a):this.threeDElements[r].container.appendChild(t);break}r+=1}};HybridRenderer.prototype.configAnimation=function(t){var e=document.createElement("div");var r=this.animationItem.wrapper;e.style.width=t.w+"px";e.style.height=t.h+"px";this.resizerElem=e;styleDiv(e);e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="flat";this.renderConfig.className&&r.setAttribute("class",this.renderConfig.className);r.appendChild(e);e.style.overflow="hidden";var s=document.createElementNS(svgNS,"svg");s.setAttribute("width","1");s.setAttribute("height","1");styleDiv(s);this.resizerElem.appendChild(s);var i=document.createElementNS(svgNS,"defs");s.appendChild(i);this.globalData.defs=i;this.data=t;this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem);this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem);this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem);this.globalData.frameId=0;this.globalData.compSize={w:t.w,h:t.h};this.globalData.frameRate=t.fr;this.layers=t.layers;this.globalData.fontManager=new FontManager;this.globalData.fontManager.addChars(t.chars);this.globalData.fontManager.addFonts(t.fonts,s);this.layerElement=this.resizerElem;this.build3dContainers();this.updateContainerSize()};HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="";this.animationItem.container=null;this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t].destroy();this.elements.length=0;this.destroyed=true;this.animationItem=null};HybridRenderer.prototype.updateContainerSize=function(){var t=this.animationItem.wrapper.offsetWidth;var e=this.animationItem.wrapper.offsetHeight;var r=t/e;var s=this.globalData.compSize.w/this.globalData.compSize.h;var i,a,n,o;if(s>r){i=t/this.globalData.compSize.w;a=t/this.globalData.compSize.w;n=0;o=(e-this.globalData.compSize.h*(t/this.globalData.compSize.w))/2}else{i=e/this.globalData.compSize.h;a=e/this.globalData.compSize.h;n=(t-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2;o=0}this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+i+",0,0,0,0,"+a+",0,0,0,0,1,0,"+n+","+o+",0,1)"};HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame;HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"};HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"};HybridRenderer.prototype.initItems=function(){this.buildAllItems();if(this.camera)this.camera.setup();else{var t=this.globalData.compSize.w;var e=this.globalData.compSize.h;var r,s=this.threeDElements.length;for(r=0;r<s;r+=1)this.threeDElements[r].perspectiveElem.style.perspective=this.threeDElements[r].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px"}};HybridRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;var s=document.createElement("div");for(e=0;e<r;e+=1)if(t[e].xt){var i=this.createComp(t[e],s,this.globalData.comp,null);i.initExpressions();this.globalData.projectInterface.registerComposition(i)}};function CVBaseElement(t,e,r){this.globalData=r;this.data=t;this.comp=e;this.canvasContext=r.canvasContext;this.init()}createElement(BaseElement,CVBaseElement);CVBaseElement.prototype.createElements=function(){this.checkParenting()};CVBaseElement.prototype.checkBlendMode=function(t){if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e="";switch(this.data.bm){case 0:e="normal";break;case 1:e="multiply";break;case 2:e="screen";break;case 3:e="overlay";break;case 4:e="darken";break;case 5:e="lighten";break;case 6:e="color-dodge";break;case 7:e="color-burn";break;case 8:e="hard-light";break;case 9:e="soft-light";break;case 10:e="difference";break;case 11:e="exclusion";break;case 12:e="hue";break;case 13:e="saturation";break;case 14:e="color";break;case 15:e="luminosity";break}t.canvasContext.globalCompositeOperation=e}};CVBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty)return false;this.checkBlendMode(0===this.data.ty?this.parentGlobalData:this.globalData);if(!this.isVisible)return this.isVisible;this.finalTransform.opMdf=this.finalTransform.op.mdf;this.finalTransform.matMdf=this.finalTransform.mProp.mdf;this.finalTransform.opacity=this.finalTransform.op.v;var e;var r=this.finalTransform.mat;if(this.hierarchy){var s,i=this.hierarchy.length;e=this.finalTransform.mProp.v.props;r.cloneFromProps(e);for(s=0;s<i;s+=1){this.finalTransform.matMdf=!!this.hierarchy[s].finalTransform.mProp.mdf||this.finalTransform.matMdf;e=this.hierarchy[s].finalTransform.mProp.v.props;r.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}}else if(t){e=this.finalTransform.mProp.v.props;r.cloneFromProps(e)}else r.cloneFromProps(this.finalTransform.mProp.v.props);if(t){e=t.mat.props;r.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);this.finalTransform.opacity*=t.opacity;this.finalTransform.opMdf=!!t.opMdf||this.finalTransform.opMdf;this.finalTransform.matMdf=!!t.matMdf||this.finalTransform.matMdf}if(this.data.hasMask){this.globalData.renderer.save(true);this.maskManager.renderFrame(0===this.data.ty?null:r)}this.data.hd&&(this.isVisible=false);return this.isVisible};CVBaseElement.prototype.addMasks=function(t){this.maskManager=new CVMaskElement(t,this,this.globalData)};CVBaseElement.prototype.destroy=function(){this.canvasContext=null;this.data=null;this.globalData=null;this.maskManager&&this.maskManager.destroy()};CVBaseElement.prototype.mHelper=new Matrix;function CVCompElement(t,e,r){this._parent.constructor.call(this,t,e,r);var s={};for(var i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);s.renderer=this;s.compHeight=this.data.h;s.compWidth=this.data.w;this.renderConfig={clearCanvas:true};this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1};this.completeLayers=false;var a,n=15;for(a=0;a<n;a+=1)this.contextData.saved[a]=Array.apply(null,{length:16});this.transformMat=new Matrix;this.parentGlobalData=this.globalData;var o=document.createElement("canvas");s.canvasContext=o.getContext("2d");this.canvasContext=s.canvasContext;o.width=this.data.w;o.height=this.data.h;this.canvas=o;this.globalData=s;this.layers=t.layers;this.pendingElements=[];this.elements=Array.apply(null,{length:this.layers.length});this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,r.frameRate,this.dynamicProperties));!this.data.xt&&r.progressiveLoad||this.buildAllItems()}createElement(CVBaseElement,CVCompElement);CVCompElement.prototype.ctxTransform=CanvasRenderer.prototype.ctxTransform;CVCompElement.prototype.ctxOpacity=CanvasRenderer.prototype.ctxOpacity;CVCompElement.prototype.save=CanvasRenderer.prototype.save;CVCompElement.prototype.restore=CanvasRenderer.prototype.restore;CVCompElement.prototype.reset=function(){this.contextData.cArrPos=0;this.contextData.cTr.reset();this.contextData.cO=1};CVCompElement.prototype.resize=function(t){var e=Math.max(t.sx,t.sy);this.canvas.width=this.data.w*e;this.canvas.height=this.data.h*e;this.transformCanvas={sc:e,w:this.data.w*e,h:this.data.h*e,props:[e,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1]};var r,s=this.elements.length;for(r=0;r<s;r+=1)this.elements[r]&&0===this.elements[r].data.ty&&this.elements[r].resize(t)};CVCompElement.prototype.prepareFrame=function(t){this.globalData.frameId=this.parentGlobalData.frameId;this.globalData.mdf=false;this._parent.prepareFrame.call(this,t);if(false===this.isVisible&&!this.data.xt)return;var e=t;if(this.tm){e=this.tm.v;e===this.data.op&&(e=this.data.op-1)}this.renderedFrame=e/this.data.sr;var r,s=this.elements.length;this.completeLayers||this.checkLayers(t);for(r=0;r<s;r+=1)if(this.completeLayers||this.elements[r]){this.elements[r].prepareFrame(e/this.data.sr-this.layers[r].st);0===this.elements[r].data.ty&&this.elements[r].globalData.mdf&&(this.globalData.mdf=true)}if(this.globalData.mdf&&!this.data.xt){this.canvasContext.clearRect(0,0,this.data.w,this.data.h);this.ctxTransform(this.transformCanvas.props)}};CVCompElement.prototype.renderFrame=function(t){if(false===this._parent.renderFrame.call(this,t))return;if(this.globalData.mdf){var e,r=this.layers.length;for(e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}this.data.hasMask&&this.globalData.renderer.restore(true);this.firstFrame&&(this.firstFrame=false);this.parentGlobalData.renderer.save();this.parentGlobalData.renderer.ctxTransform(this.finalTransform.mat.props);this.parentGlobalData.renderer.ctxOpacity(this.finalTransform.opacity);this.parentGlobalData.renderer.canvasContext.drawImage(this.canvas,0,0,this.data.w,this.data.h);this.parentGlobalData.renderer.restore();this.globalData.mdf&&this.reset()};CVCompElement.prototype.setElements=function(t){this.elements=t};CVCompElement.prototype.getElements=function(){return this.elements};CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t].destroy();this.layers=null;this.elements=null;this._parent.destroy.call(this._parent)};CVCompElement.prototype.checkLayers=CanvasRenderer.prototype.checkLayers;CVCompElement.prototype.buildItem=CanvasRenderer.prototype.buildItem;CVCompElement.prototype.checkPendingElements=CanvasRenderer.prototype.checkPendingElements;CVCompElement.prototype.addPendingElement=CanvasRenderer.prototype.addPendingElement;CVCompElement.prototype.buildAllItems=CanvasRenderer.prototype.buildAllItems;CVCompElement.prototype.createItem=CanvasRenderer.prototype.createItem;CVCompElement.prototype.createImage=CanvasRenderer.prototype.createImage;CVCompElement.prototype.createComp=CanvasRenderer.prototype.createComp;CVCompElement.prototype.createSolid=CanvasRenderer.prototype.createSolid;CVCompElement.prototype.createShape=CanvasRenderer.prototype.createShape;CVCompElement.prototype.createText=CanvasRenderer.prototype.createText;CVCompElement.prototype.createBase=CanvasRenderer.prototype.createBase;CVCompElement.prototype.buildElementParenting=CanvasRenderer.prototype.buildElementParenting;function CVImageElement(t,e,r){this.assetData=r.getAssetData(t.refId);this._parent.constructor.call(this,t,e,r);this.globalData.addPendingElement()}createElement(CVBaseElement,CVImageElement);CVImageElement.prototype.createElements=function(){var t=function(){this.globalData.elementLoaded();if(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height){var t=document.createElement("canvas");t.width=this.assetData.w;t.height=this.assetData.h;var e=t.getContext("2d");var r=this.img.width;var s=this.img.height;var i=r/s;var a=this.assetData.w/this.assetData.h;var n,o;if(i>a){o=s;n=o*a}else{n=r;o=n/a}e.drawImage(this.img,(r-n)/2,(s-o)/2,n,o,0,0,this.assetData.w,this.assetData.h);this.img=t}}.bind(this);var e=function(){this.failed=true;this.globalData.elementLoaded()}.bind(this);this.img=new Image;this.img.addEventListener("load",t,false);this.img.addEventListener("error",e,false);var r=this.globalData.getAssetsPath(this.assetData);this.img.src=r;this._parent.createElements.call(this)};CVImageElement.prototype.renderFrame=function(t){if(this.failed)return;if(false===this._parent.renderFrame.call(this,t))return;var e=this.canvasContext;this.globalData.renderer.save();var r=this.finalTransform.mat.props;this.globalData.renderer.ctxTransform(r);this.globalData.renderer.ctxOpacity(this.finalTransform.opacity);e.drawImage(this.img,0,0);this.globalData.renderer.restore(this.data.hasMask);this.firstFrame&&(this.firstFrame=false)};CVImageElement.prototype.destroy=function(){this.img=null;this._parent.destroy.call(this._parent)};function CVMaskElement(t,e){this.data=t;this.element=e;this.dynamicProperties=[];this.masksProperties=this.data.masksProperties;this.viewData=Array.apply(null,{length:this.masksProperties.length});var r,s=this.masksProperties.length;for(r=0;r<s;r++)this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3,this.dynamicProperties,null)}CVMaskElement.prototype.prepareFrame=function(t){var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1){this.dynamicProperties[e].getValue(t);this.dynamicProperties[e].mdf&&(this.element.globalData.mdf=true)}};CVMaskElement.prototype.renderFrame=function(t){var e=this.element.canvasContext;var r,s=this.data.masksProperties.length;var i,a,n,o,h=false;for(r=0;r<s;r++){if("n"===this.masksProperties[r].mode)continue;if(false===h){e.beginPath();h=true}if(this.masksProperties[r].inv){e.moveTo(0,0);e.lineTo(this.element.globalData.compWidth,0);e.lineTo(this.element.globalData.compWidth,this.element.globalData.compHeight);e.lineTo(0,this.element.globalData.compHeight);e.lineTo(0,0)}o=this.viewData[r].v;i=t?t.applyToPointArray(o.v[0][0],o.v[0][1],0):o.v[0];e.moveTo(i[0],i[1]);var l,p=o._length;for(l=1;l<p;l++){i=t?t.applyToPointArray(o.o[l-1][0],o.o[l-1][1],0):o.o[l-1];a=t?t.applyToPointArray(o.i[l][0],o.i[l][1],0):o.i[l];n=t?t.applyToPointArray(o.v[l][0],o.v[l][1],0):o.v[l];e.bezierCurveTo(i[0],i[1],a[0],a[1],n[0],n[1])}i=t?t.applyToPointArray(o.o[l-1][0],o.o[l-1][1],0):o.o[l-1];a=t?t.applyToPointArray(o.i[0][0],o.i[0][1],0):o.i[0];n=t?t.applyToPointArray(o.v[0][0],o.v[0][1],0):o.v[0];e.bezierCurveTo(i[0],i[1],a[0],a[1],n[0],n[1])}h&&e.clip()};CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty;CVMaskElement.prototype.destroy=function(){this.element=null};function CVShapeElement(t,e,r){this.shapes=[];this.shapesData=t.shapes;this.stylesList=[];this.itemsData=[];this.prevViewData=[];this.shapeModifiers=[];this.processedElements=[];this._parent.constructor.call(this,t,e,r)}createElement(CVBaseElement,CVShapeElement);CVShapeElement.prototype.transformHelper={opacity:1,mat:new Matrix,matMdf:false,opMdf:false};CVShapeElement.prototype.dashResetter=[];CVShapeElement.prototype.createElements=function(){this._parent.createElements.call(this);this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties,true)};CVShapeElement.prototype.createStyleElement=function(t,e){var r={data:t,type:t.ty,elements:[]};var s={};if("fl"==t.ty||"st"==t.ty){s.c=PropertyFactory.getProp(this,t.c,1,255,e);s.c.k||(r.co="rgb("+bm_floor(s.c.v[0])+","+bm_floor(s.c.v[1])+","+bm_floor(s.c.v[2])+")")}s.o=PropertyFactory.getProp(this,t.o,0,.01,e);if("st"==t.ty){r.lc=this.lcEnum[t.lc]||"round";r.lj=this.ljEnum[t.lj]||"round";1==t.lj&&(r.ml=t.ml);s.w=PropertyFactory.getProp(this,t.w,0,null,e);s.w.k||(r.wi=s.w.v);if(t.d){var i=PropertyFactory.getDashProp(this,t.d,"canvas",e);s.d=i;if(!s.d.k){r.da=s.d.dasharray;r.do=s.d.dashoffset}}}else r.r=2===t.r?"evenodd":"nonzero";this.stylesList.push(r);s.style=r;return s};CVShapeElement.prototype.createGroupElement=function(t){var e={it:[],prevViewData:[]};return e};CVShapeElement.prototype.createTransformElement=function(t,e){var r={transform:{mat:new Matrix,opacity:1,matMdf:false,opMdf:false,op:PropertyFactory.getProp(this,t.o,0,.01,e),mProps:PropertyFactory.getProp(this,t,2,null,e)},elements:[]};return r};CVShapeElement.prototype.createShapeElement=function(t,e){var r={nodes:[],trNodes:[],tr:[0,0,0,0,0,0]};var s=4;"rc"==t.ty?s=5:"el"==t.ty?s=6:"sr"==t.ty&&(s=7);r.sh=ShapePropertyFactory.getShapeProp(this,t,s,e);this.shapes.push(r.sh);this.addShapeToModifiers(r);jLen=this.stylesList.length;var i=false,a=false;for(j=0;j<jLen;j+=1)if(!this.stylesList[j].closed){this.stylesList[j].elements.push(r);"st"===this.stylesList[j].type?i=true:a=true}r.st=i;r.fl=a;return r};CVShapeElement.prototype.reloadShapes=function(){this.firstFrame=true;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties,true);var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()};CVShapeElement.prototype.searchShapes=function(t,e,r,s,i){var a,n=t.length-1;var o,h;var l=[],p=[],m;for(a=n;a>=0;a-=1){m=this.searchProcessedElement(t[a]);m?e[a]=r[m-1]:t[a]._render=i;if("fl"==t[a].ty||"st"==t[a].ty){m?e[a].style.closed=false:e[a]=this.createStyleElement(t[a],s);l.push(e[a].style)}else if("gr"==t[a].ty){if(m){h=e[a].it.length;for(o=0;o<h;o+=1)e[a].prevViewData[o]=e[a].it[o]}else e[a]=this.createGroupElement(t[a]);this.searchShapes(t[a].it,e[a].it,e[a].prevViewData,s,i)}else if("tr"==t[a].ty)m||(e[a]=this.createTransformElement(t[a],s));else if("sh"==t[a].ty||"rc"==t[a].ty||"el"==t[a].ty||"sr"==t[a].ty)m||(e[a]=this.createShapeElement(t[a],s));else if("tm"==t[a].ty||"rd"==t[a].ty){if(m){f=e[a];f.closed=false}else{var f=ShapeModifiers.getModifier(t[a].ty);f.init(this,t[a],s);e[a]=f;this.shapeModifiers.push(f)}p.push(f)}else if("rp"==t[a].ty){if(m){f=e[a];f.closed=true}else{f=ShapeModifiers.getModifier(t[a].ty);e[a]=f;f.init(this,t,a,e,s);this.shapeModifiers.push(f);i=false}p.push(f)}this.addProcessedElement(t[a],a+1)}n=l.length;for(a=0;a<n;a+=1)l[a].closed=true;n=p.length;for(a=0;a<n;a+=1)p[a].closed=true};CVShapeElement.prototype.addShapeToModifiers=IShapeElement.prototype.addShapeToModifiers;CVShapeElement.prototype.renderModifiers=IShapeElement.prototype.renderModifiers;CVShapeElement.prototype.lcEnum=IShapeElement.prototype.lcEnum;CVShapeElement.prototype.ljEnum=IShapeElement.prototype.ljEnum;CVShapeElement.prototype.searchProcessedElement=IShapeElement.prototype.searchProcessedElement;CVShapeElement.prototype.addProcessedElement=IShapeElement.prototype.addProcessedElement;CVShapeElement.prototype.renderFrame=function(t){if(false===this._parent.renderFrame.call(this,t))return;this.transformHelper.mat.reset();this.transformHelper.opacity=this.finalTransform.opacity;this.transformHelper.matMdf=false;this.transformHelper.opMdf=this.finalTransform.opMdf;this.renderModifiers();this.renderShape(this.transformHelper,null,null,true);this.data.hasMask&&this.globalData.renderer.restore(true)};CVShapeElement.prototype.renderShape=function(t,e,r,s){var i,a;if(!e){e=this.shapesData;a=this.stylesList.length;for(i=0;i<a;i+=1){this.stylesList[i].d="";this.stylesList[i].mdf=false}}r||(r=this.itemsData);a=e.length-1;var n,o;n=t;for(i=a;i>=0;i-=1)if("tr"==e[i].ty){n=r[i].transform;var h=r[i].transform.mProps.v.props;n.matMdf=n.mProps.mdf;n.opMdf=n.op.mdf;o=n.mat;o.cloneFromProps(h);if(t){var l=t.mat.props;n.opacity=t.opacity;n.opacity*=r[i].transform.op.v;n.matMdf=!!t.matMdf||n.matMdf;n.opMdf=!!t.opMdf||n.opMdf;o.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])}else n.opacity=n.op.o}else"sh"==e[i].ty||"el"==e[i].ty||"rc"==e[i].ty||"sr"==e[i].ty?this.renderPath(e[i],r[i],n):"fl"==e[i].ty?this.renderFill(e[i],r[i],n):"st"==e[i].ty?this.renderStroke(e[i],r[i],n):"gr"==e[i].ty?this.renderShape(n,e[i].it,r[i].it):"tm"==e[i].ty;if(!s)return;a=this.stylesList.length;var p,m,f,c,d,u,v=this.globalData.renderer,y=this.globalData.canvasContext,g;v.save();v.ctxTransform(this.finalTransform.mat.props);for(i=0;i<a;i+=1){g=this.stylesList[i].type;if("st"===g&&0===this.stylesList[i].wi||!this.stylesList[i].data._render)continue;v.save();d=this.stylesList[i].elements;if("st"===g){y.strokeStyle=this.stylesList[i].co;y.lineWidth=this.stylesList[i].wi;y.lineCap=this.stylesList[i].lc;y.lineJoin=this.stylesList[i].lj;y.miterLimit=this.stylesList[i].ml||0}else y.fillStyle=this.stylesList[i].co;v.ctxOpacity(this.stylesList[i].coOp);"st"!==g&&y.beginPath();m=d.length;for(p=0;p<m;p+=1){if("st"===g){y.beginPath();if(this.stylesList[i].da){y.setLineDash(this.stylesList[i].da);y.lineDashOffset=this.stylesList[i].do;this.globalData.isDashed=true}else if(this.globalData.isDashed){y.setLineDash(this.dashResetter);this.globalData.isDashed=false}}u=d[p].trNodes;c=u.length;for(f=0;f<c;f+=1)"m"==u[f].t?y.moveTo(u[f].p[0],u[f].p[1]):"c"==u[f].t?y.bezierCurveTo(u[f].p1[0],u[f].p1[1],u[f].p2[0],u[f].p2[1],u[f].p3[0],u[f].p3[1]):y.closePath();"st"===g&&y.stroke()}"st"!==g&&y.fill(this.stylesList[i].r);v.restore()}v.restore();this.firstFrame&&(this.firstFrame=false)};CVShapeElement.prototype.renderPath=function(t,e,r){var s,i,a,n;var o=r.matMdf||e.sh.mdf||this.firstFrame;if(o){var h=e.sh.paths,l=r.mat;n=h._length;var p=e.trNodes;p.length=0;for(a=0;a<n;a+=1){var m=h.shapes[a];if(m&&m.v){s=m._length;for(i=1;i<s;i+=1){1==i&&p.push({t:"m",p:l.applyToPointArray(m.v[0][0],m.v[0][1],0)});p.push({t:"c",p1:l.applyToPointArray(m.o[i-1][0],m.o[i-1][1],0),p2:l.applyToPointArray(m.i[i][0],m.i[i][1],0),p3:l.applyToPointArray(m.v[i][0],m.v[i][1],0)})}1==s&&p.push({t:"m",p:l.applyToPointArray(m.v[0][0],m.v[0][1],0)});if(m.c&&s){p.push({t:"c",p1:l.applyToPointArray(m.o[i-1][0],m.o[i-1][1],0),p2:l.applyToPointArray(m.i[0][0],m.i[0][1],0),p3:l.applyToPointArray(m.v[0][0],m.v[0][1],0)});p.push({t:"z"})}e.lStr=p}}if(e.st)for(i=0;i<16;i+=1)e.tr[i]=r.mat.props[i];e.trNodes=p}};CVShapeElement.prototype.renderFill=function(t,e,r){var s=e.style;(e.c.mdf||this.firstFrame)&&(s.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")");(e.o.mdf||r.opMdf||this.firstFrame)&&(s.coOp=e.o.v*r.opacity)};CVShapeElement.prototype.renderStroke=function(t,e,r){var s=e.style;var i=e.d;var a,n;if(i&&(i.mdf||this.firstFrame)){s.da=i.dasharray;s.do=i.dashoffset}(e.c.mdf||this.firstFrame)&&(s.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")");(e.o.mdf||r.opMdf||this.firstFrame)&&(s.coOp=e.o.v*r.opacity);(e.w.mdf||this.firstFrame)&&(s.wi=e.w.v)};CVShapeElement.prototype.destroy=function(){this.shapesData=null;this.globalData=null;this.canvasContext=null;this.stylesList.length=0;this.itemData.length=0;this._parent.destroy.call(this._parent)};function CVSolidElement(t,e,r){this._parent.constructor.call(this,t,e,r)}createElement(CVBaseElement,CVSolidElement);CVSolidElement.prototype.renderFrame=function(t){if(false===this._parent.renderFrame.call(this,t))return;var e=this.canvasContext;this.globalData.renderer.save();this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);this.globalData.renderer.ctxOpacity(this.finalTransform.opacity);e.fillStyle=this.data.sc;e.fillRect(0,0,this.data.sw,this.data.sh);this.globalData.renderer.restore(this.data.hasMask);this.firstFrame&&(this.firstFrame=false)};function CVTextElement(t,e,r){this.textSpans=[];this.yOffset=0;this.fillColorAnim=false;this.strokeColorAnim=false;this.strokeWidthAnim=false;this.stroke=false;this.fill=false;this.justifyOffset=0;this.currentRender=null;this.renderType="canvas";this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""};this._parent.constructor.call(this,t,e,r)}createElement(CVBaseElement,CVTextElement);extendPrototype(ITextElement,CVTextElement);CVTextElement.prototype.tHelper=document.createElement("canvas").getContext("2d");CVTextElement.prototype.createElements=function(){this._parent.createElements.call(this)};CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:t.l?t.l.length:0});var e=false;if(t.fc){e=true;this.values.fill=this.buildColor(t.fc)}else this.values.fill="rgba(0,0,0,0)";this.fill=e;var r=false;if(t.sc){r=true;this.values.stroke=this.buildColor(t.sc);this.values.sWidth=t.sw}var s=this.globalData.fontManager.getFontByName(t.f);var i,a;var n=t.l;var o=this.mHelper;this.stroke=r;this.values.fValue=t.s+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily;a=t.t.length;var h,l,p,m,f,c,d,u,v,y,g=this.data.singleShape;var b=t.tr/1e3*t.s;var E=0,P=0,x=true;var S=0;for(i=0;i<a;i+=1){h=this.globalData.fontManager.getCharData(t.t.charAt(i),s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);l=h&&h.data||{};o.reset();if(g&&n[i].n){E=-b;P+=t.yOffset;P+=x?1:0;x=false}f=l.shapes?l.shapes[0].it:[];d=f.length;o.scale(t.s/100,t.s/100);g&&this.applyTextPropertiesToMatrix(t,o,n[i].line,E,P);v=Array.apply(null,{length:d});for(c=0;c<d;c+=1){m=f[c].ks.k.i.length;u=f[c].ks.k;y=[];for(p=1;p<m;p+=1){1==p&&y.push(o.applyToX(u.v[0][0],u.v[0][1],0),o.applyToY(u.v[0][0],u.v[0][1],0));y.push(o.applyToX(u.o[p-1][0],u.o[p-1][1],0),o.applyToY(u.o[p-1][0],u.o[p-1][1],0),o.applyToX(u.i[p][0],u.i[p][1],0),o.applyToY(u.i[p][0],u.i[p][1],0),o.applyToX(u.v[p][0],u.v[p][1],0),o.applyToY(u.v[p][0],u.v[p][1],0))}y.push(o.applyToX(u.o[p-1][0],u.o[p-1][1],0),o.applyToY(u.o[p-1][0],u.o[p-1][1],0),o.applyToX(u.i[0][0],u.i[0][1],0),o.applyToY(u.i[0][0],u.i[0][1],0),o.applyToX(u.v[0][0],u.v[0][1],0),o.applyToY(u.v[0][0],u.v[0][1],0));v[c]=y}if(g){E+=n[i].l;E+=b}this.textSpans[S]?this.textSpans[S].elem=v:this.textSpans[S]={elem:v};S+=1}};CVTextElement.prototype.renderFrame=function(t){if(false===this._parent.renderFrame.call(this,t))return;var e=this.canvasContext;var r=this.finalTransform.mat.props;this.globalData.renderer.save();this.globalData.renderer.ctxTransform(r);this.globalData.renderer.ctxOpacity(this.finalTransform.opacity);e.font=this.values.fValue;e.lineCap="butt";e.lineJoin="miter";e.miterLimit=4;this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var s,i,a,n,o,h;var l=this.textAnimator.renderedLetters;var p=this.textProperty.currentData.l;i=p.length;var m;var f=null,c=null,d=null,u,v;for(s=0;s<i;s+=1){if(p[s].n)continue;m=l[s];if(m){this.globalData.renderer.save();this.globalData.renderer.ctxTransform(m.p);this.globalData.renderer.ctxOpacity(m.o)}if(this.fill){if(m&&m.fc){if(f!==m.fc){f=m.fc;e.fillStyle=m.fc}}else if(f!==this.values.fill){f=this.values.fill;e.fillStyle=this.values.fill}u=this.textSpans[s].elem;n=u.length;this.globalData.canvasContext.beginPath();for(a=0;a<n;a+=1){v=u[a];h=v.length;this.globalData.canvasContext.moveTo(v[0],v[1]);for(o=2;o<h;o+=6)this.globalData.canvasContext.bezierCurveTo(v[o],v[o+1],v[o+2],v[o+3],v[o+4],v[o+5])}this.globalData.canvasContext.closePath();this.globalData.canvasContext.fill()}if(this.stroke){if(m&&m.sw){if(d!==m.sw){d=m.sw;e.lineWidth=m.sw}}else if(d!==this.values.sWidth){d=this.values.sWidth;e.lineWidth=this.values.sWidth}if(m&&m.sc){if(c!==m.sc){c=m.sc;e.strokeStyle=m.sc}}else if(c!==this.values.stroke){c=this.values.stroke;e.strokeStyle=this.values.stroke}u=this.textSpans[s].elem;n=u.length;this.globalData.canvasContext.beginPath();for(a=0;a<n;a+=1){v=u[a];h=v.length;this.globalData.canvasContext.moveTo(v[0],v[1]);for(o=2;o<h;o+=6)this.globalData.canvasContext.bezierCurveTo(v[o],v[o+1],v[o+2],v[o+3],v[o+4],v[o+5])}this.globalData.canvasContext.closePath();this.globalData.canvasContext.stroke()}m&&this.globalData.renderer.restore()}this.globalData.renderer.restore(this.data.hasMask);this.firstFrame&&(this.firstFrame=false)};function HBaseElement(t,e,r,s,i){this.globalData=r;this.comp=s;this.data=t;this.matteElement=null;this.parentContainer=e;this.layerId=i?i.layerId:"ly_"+randomString(10);this.placeholder=i;this.init()}createElement(BaseElement,HBaseElement);HBaseElement.prototype.checkBlendMode=function(){};HBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode;HBaseElement.prototype.getBaseElement=function(){return this.baseElement};HBaseElement.prototype.createElements=function(){if(this.data.hasMask){this.layerElement=document.createElementNS(svgNS,"svg");styleDiv(this.layerElement);this.baseElement=this.layerElement;this.maskedElement=this.layerElement}else this.layerElement=this.parentContainer;this.transformedElement=this.layerElement;if(this.data.ln&&(4===this.data.ty||0===this.data.ty)){if(this.layerElement===this.parentContainer){this.layerElement=document.createElementNS(svgNS,"g");this.baseElement=this.layerElement}this.layerElement.setAttribute("id",this.data.ln)}this.setBlendMode();this.layerElement!==this.parentContainer&&(this.placeholder=null);this.checkParenting()};HBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty)return false;if(this.currentFrameNum===this.lastNum||!this.isVisible)return this.isVisible;this.lastNum=this.currentFrameNum;this.finalTransform.opMdf=this.finalTransform.op.mdf;this.finalTransform.matMdf=this.finalTransform.mProp.mdf;this.finalTransform.opacity=this.finalTransform.op.v;if(this.firstFrame){this.finalTransform.opMdf=true;this.finalTransform.matMdf=true}var e;var r=this.finalTransform.mat;if(this.hierarchy){var s,i=this.hierarchy.length;e=this.finalTransform.mProp.v.props;r.cloneFromProps(e);for(s=0;s<i;s+=1){this.finalTransform.matMdf=!!this.hierarchy[s].finalTransform.mProp.mdf||this.finalTransform.matMdf;e=this.hierarchy[s].finalTransform.mProp.v.props;r.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}}else if(this.isVisible&&this.finalTransform.matMdf)if(t){e=this.finalTransform.mProp.v.props;r.cloneFromProps(e)}else r.cloneFromProps(this.finalTransform.mProp.v.props);this.data.hasMask&&this.maskManager.renderFrame(r);if(t){e=t.mat.props;r.cloneFromProps(e);this.finalTransform.opacity*=t.opacity;this.finalTransform.opMdf=!!t.opMdf||this.finalTransform.opMdf;this.finalTransform.matMdf=!!t.matMdf||this.finalTransform.matMdf}if(this.finalTransform.matMdf){this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=r.toCSS();this.finalMat=r}this.finalTransform.opMdf&&(this.transformedElement.style.opacity=this.finalTransform.opacity);return this.isVisible};HBaseElement.prototype.destroy=function(){this.layerElement=null;this.transformedElement=null;this.parentContainer=null;this.matteElement&&(this.matteElement=null);if(this.maskManager){this.maskManager.destroy();this.maskManager=null}};HBaseElement.prototype.getDomElement=function(){return this.layerElement};HBaseElement.prototype.addMasks=function(t){this.maskManager=new MaskElement(t,this,this.globalData)};HBaseElement.prototype.hide=function(){};HBaseElement.prototype.setMatte=function(){};HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting;function HSolidElement(t,e,r,s,i){this._parent.constructor.call(this,t,e,r,s,i)}createElement(HBaseElement,HSolidElement);HSolidElement.prototype.createElements=function(){var t=document.createElement("div");styleDiv(t);var e=document.createElementNS(svgNS,"svg");styleDiv(e);e.setAttribute("width",this.data.sw);e.setAttribute("height",this.data.sh);t.appendChild(e);this.layerElement=t;this.transformedElement=t;this.baseElement=t;this.innerElem=t;this.data.ln&&this.innerElem.setAttribute("id",this.data.ln);0!==this.data.bm&&this.setBlendMode();var r=document.createElementNS(svgNS,"rect");r.setAttribute("width",this.data.sw);r.setAttribute("height",this.data.sh);r.setAttribute("fill",this.data.sc);e.appendChild(r);this.data.hasMask&&(this.maskedElement=r);this.checkParenting()};HSolidElement.prototype.hide=SVGBaseElement.prototype.hide;HSolidElement.prototype.show=SVGBaseElement.prototype.show;HSolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame;HSolidElement.prototype.destroy=IImageElement.prototype.destroy;function HCompElement(t,e,r,s,i){this._parent.constructor.call(this,t,e,r,s,i);this.layers=t.layers;this.supports3d=true;this.completeLayers=false;this.pendingElements=[];this.elements=Array.apply(null,{length:this.layers.length});this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,r.frameRate,this.dynamicProperties));this.data.hasMask&&(this.supports3d=false);this.data.xt&&(this.layerElement=document.createElement("div"));this.buildAllItems()}createElement(HBaseElement,HCompElement);HCompElement.prototype.createElements=function(){var t=document.createElement("div");styleDiv(t);this.data.ln&&t.setAttribute("id",this.data.ln);t.style.clip="rect(0px, "+this.data.w+"px, "+this.data.h+"px, 0px)";if(this.data.hasMask){var e=document.createElementNS(svgNS,"svg");styleDiv(e);e.setAttribute("width",this.data.w);e.setAttribute("height",this.data.h);var r=document.createElementNS(svgNS,"g");e.appendChild(r);t.appendChild(e);this.maskedElement=r;this.baseElement=t;this.layerElement=r;this.transformedElement=t}else{this.layerElement=t;this.baseElement=this.layerElement;this.transformedElement=t}this.checkParenting()};HCompElement.prototype.hide=ICompElement.prototype.hide;HCompElement.prototype.prepareFrame=ICompElement.prototype.prepareFrame;HCompElement.prototype.setElements=ICompElement.prototype.setElements;HCompElement.prototype.getElements=ICompElement.prototype.getElements;HCompElement.prototype.destroy=ICompElement.prototype.destroy;HCompElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);var r,s=this.layers.length;if(false===e){this.hide();return}this.hidden=false;for(r=0;r<s;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();this.firstFrame&&(this.firstFrame=false)};HCompElement.prototype.checkLayers=BaseRenderer.prototype.checkLayers;HCompElement.prototype.buildItem=HybridRenderer.prototype.buildItem;HCompElement.prototype.checkPendingElements=HybridRenderer.prototype.checkPendingElements;HCompElement.prototype.addPendingElement=HybridRenderer.prototype.addPendingElement;HCompElement.prototype.buildAllItems=BaseRenderer.prototype.buildAllItems;HCompElement.prototype.createItem=HybridRenderer.prototype.createItem;HCompElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting;HCompElement.prototype.createImage=HybridRenderer.prototype.createImage;HCompElement.prototype.createComp=HybridRenderer.prototype.createComp;HCompElement.prototype.createSolid=HybridRenderer.prototype.createSolid;HCompElement.prototype.createShape=HybridRenderer.prototype.createShape;HCompElement.prototype.createText=HybridRenderer.prototype.createText;HCompElement.prototype.createBase=HybridRenderer.prototype.createBase;HCompElement.prototype.appendElementInPos=HybridRenderer.prototype.appendElementInPos;function HShapeElement(t,e,r,s,i){this.shapes=[];this.shapesData=t.shapes;this.stylesList=[];this.itemsData=[];this.prevViewData=[];this.shapeModifiers=[];this.processedElements=[];this._parent.constructor.call(this,t,e,r,s,i);this.currentBBox={x:999999,y:-999999,h:0,w:0}}createElement(HBaseElement,HShapeElement);var parent=HShapeElement.prototype._parent;extendPrototype(IShapeElement,HShapeElement);HShapeElement.prototype._parent=parent;HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderFrame;HShapeElement.prototype.createElements=function(){var t=document.createElement("div");styleDiv(t);var e=document.createElementNS(svgNS,"svg");styleDiv(e);var r=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",r.w);e.setAttribute("height",r.h);if(this.data.hasMask){var s=document.createElementNS(svgNS,"g");t.appendChild(e);e.appendChild(s);this.maskedElement=s;this.layerElement=s;this.shapesContainer=s}else{t.appendChild(e);this.layerElement=e;this.shapesContainer=document.createElementNS(svgNS,"g");this.layerElement.appendChild(this.shapesContainer)}this.data.hd||(this.baseElement=t);this.innerElem=t;this.data.ln&&this.innerElem.setAttribute("id",this.data.ln);this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],true);this.buildExpressionInterface();this.layerElement=t;this.transformedElement=t;this.shapeCont=e;0!==this.data.bm&&this.setBlendMode();this.checkParenting()};HShapeElement.prototype.renderFrame=function(t){var e=this.firstFrame;this._renderShapeFrame();if(this.isVisible&&(this.elemMdf||e)){var r=this.shapeCont.getBBox();var s=false;if(this.currentBBox.w!==r.width){this.currentBBox.w=r.width;this.shapeCont.setAttribute("width",r.width);s=true}if(this.currentBBox.h!==r.height){this.currentBBox.h=r.height;this.shapeCont.setAttribute("height",r.height);s=true}if(s||this.currentBBox.x!==r.x||this.currentBBox.y!==r.y){this.currentBBox.w=r.width;this.currentBBox.h=r.height;this.currentBBox.x=r.x;this.currentBBox.y=r.y;this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)"}}};function HTextElement(t,e,r,s,i){this.textSpans=[];this.textPaths=[];this.currentBBox={x:999999,y:-999999,h:0,w:0};this.renderType="svg";this.isMasked=false;this._parent.constructor.call(this,t,e,r,s,i)}createElement(HBaseElement,HTextElement);extendPrototype(ITextElement,HTextElement);HTextElement.prototype.createElements=function(){this.isMasked=this.checkMasks();var t=document.createElement("div");styleDiv(t);this.layerElement=t;this.transformedElement=t;if(this.isMasked){this.renderType="svg";var e=document.createElementNS(svgNS,"svg");styleDiv(e);this.cont=e;this.compW=this.comp.data.w;this.compH=this.comp.data.h;e.setAttribute("width",this.compW);e.setAttribute("height",this.compH);var r=document.createElementNS(svgNS,"g");e.appendChild(r);t.appendChild(e);this.maskedElement=r;this.innerElem=r}else{this.renderType="html";this.innerElem=t}this.baseElement=t;this.checkParenting()};HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:this.textProperty.currentData.l?this.textProperty.currentData.l.length:0});var e=this.innerElem.style;e.color=e.fill=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";if(t.sc){e.stroke=this.buildColor(t.sc);e.strokeWidth=t.sw+"px"}var r=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars){e.fontSize=t.s+"px";e.lineHeight=t.s+"px";if(r.fClass)this.innerElem.className=r.fClass;else{e.fontFamily=r.fFamily;var s=t.fWeight,i=t.fStyle;e.fontStyle=i;e.fontWeight=s}}var a,n;var o=t.l;n=o.length;var h,l,p;var m=this.mHelper;var f,c="";var d=0;for(a=0;a<n;a+=1){if(this.globalData.fontManager.chars){if(this.textPaths[d])h=this.textPaths[d];else{h=document.createElementNS(svgNS,"path");h.setAttribute("stroke-linecap","butt");h.setAttribute("stroke-linejoin","round");h.setAttribute("stroke-miterlimit","4")}if(!this.isMasked)if(this.textSpans[d]){l=this.textSpans[d];p=l.children[0]}else{l=document.createElement("div");p=document.createElementNS(svgNS,"svg");p.appendChild(h);styleDiv(l)}}else if(this.isMasked)h=this.textPaths[d]?this.textPaths[d]:document.createElementNS(svgNS,"text");else if(this.textSpans[d]){l=this.textSpans[d];h=this.textPaths[d]}else{l=document.createElement("span");styleDiv(l);h=document.createElement("span");styleDiv(h);l.appendChild(h)}if(this.globalData.fontManager.chars){var u=this.globalData.fontManager.getCharData(t.t.charAt(a),r.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);var v;v=u?u.data:null;m.reset();if(v&&v.shapes){f=v.shapes[0].it;m.scale(t.s/100,t.s/100);c=this.createPathShape(m,f);h.setAttribute("d",c)}if(this.isMasked)this.innerElem.appendChild(h);else{this.innerElem.appendChild(l);if(v&&v.shapes){document.body.appendChild(p);var y=p.getBBox();p.setAttribute("width",y.width+2);p.setAttribute("height",y.height+2);p.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2));p.style.transform=p.style.webkitTransform="translate("+(y.x-1)+"px,"+(y.y-1)+"px)";o[a].yOffset=y.y-1;l.appendChild(p)}else{p.setAttribute("width",1);p.setAttribute("height",1)}}}else{h.textContent=o[a].val;h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");if(this.isMasked)this.innerElem.appendChild(h);else{this.innerElem.appendChild(l);h.style.transform=h.style.webkitTransform="translate3d(0,"+-t.s/1.2+"px,0)"}}this.isMasked?this.textSpans[d]=h:this.textSpans[d]=l;this.textSpans[d].style.display="block";this.textPaths[d]=h;d+=1}while(d<this.textSpans.length){this.textSpans[d].style.display="none";d+=1}};HTextElement.prototype.hide=SVGTextElement.prototype.hide;HTextElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(false===e){this.hide();return}if(this.hidden){this.hidden=false;this.innerElem.style.display="block";this.layerElement.style.display="block"}if(this.data.singleShape){if(!this.firstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform.matMdf){this.cont.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH);this.cont.style.transform=this.cont.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)"}}this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);if(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)return;var r,s,i=0;var a=this.textAnimator.renderedLetters;var n=this.textProperty.currentData.l;s=n.length;var o,h,l;for(r=0;r<s;r+=1){if(n[r].n){i+=1;continue}h=this.textSpans[r];l=this.textPaths[r];o=a[i];i+=1;this.isMasked?h.setAttribute("transform",o.m):h.style.transform=h.style.webkitTransform=o.m;h.style.opacity=o.o;o.sw&&l.setAttribute("stroke-width",o.sw);o.sc&&l.setAttribute("stroke",o.sc);if(o.fc){l.setAttribute("fill",o.fc);l.style.color=o.fc}}if(this.isVisible&&(this.elemMdf||this.firstFrame)&&this.innerElem.getBBox){var p=this.innerElem.getBBox();if(this.currentBBox.w!==p.width){this.currentBBox.w=p.width;this.cont.setAttribute("width",p.width)}if(this.currentBBox.h!==p.height){this.currentBBox.h=p.height;this.cont.setAttribute("height",p.height)}var m=1;if(this.currentBBox.w!==p.width+2*m||this.currentBBox.h!==p.height+2*m||this.currentBBox.x!==p.x-m||this.currentBBox.y!==p.y-m){this.currentBBox.w=p.width+2*m;this.currentBBox.h=p.height+2*m;this.currentBBox.x=p.x-m;this.currentBBox.y=p.y-m;this.cont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);this.cont.style.transform=this.cont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)"}}this.firstFrame&&(this.firstFrame=false)};function HImageElement(t,e,r,s,i){this.assetData=r.getAssetData(t.refId);this._parent.constructor.call(this,t,e,r,s,i)}createElement(HBaseElement,HImageElement);HImageElement.prototype.createElements=function(){var t=this.globalData.getAssetsPath(this.assetData);var e=new Image;if(this.data.hasMask){var r=document.createElement("div");styleDiv(r);var s=document.createElementNS(svgNS,"svg");styleDiv(s);s.setAttribute("width",this.assetData.w);s.setAttribute("height",this.assetData.h);r.appendChild(s);this.imageElem=document.createElementNS(svgNS,"image");this.imageElem.setAttribute("width",this.assetData.w+"px");this.imageElem.setAttribute("height",this.assetData.h+"px");this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t);s.appendChild(this.imageElem);this.layerElement=r;this.transformedElement=r;this.baseElement=r;this.innerElem=r;this.maskedElement=this.imageElem}else{styleDiv(e);this.layerElement=e;this.baseElement=e;this.innerElem=e;this.transformedElement=e}e.src=t;this.data.ln&&this.innerElem.setAttribute("id",this.data.ln);this.checkParenting()};HImageElement.prototype.show=HSolidElement.prototype.show;HImageElement.prototype.hide=HSolidElement.prototype.hide;HImageElement.prototype.renderFrame=HSolidElement.prototype.renderFrame;HImageElement.prototype.destroy=HSolidElement.prototype.destroy;function HCameraElement(t,e,r,s,i){this._parent.constructor.call(this,t,e,r,s,i);var a=PropertyFactory.getProp;this.pe=a(this,t.pe,0,0,this.dynamicProperties);if(t.ks.p.s){this.px=a(this,t.ks.p.x,1,0,this.dynamicProperties);this.py=a(this,t.ks.p.y,1,0,this.dynamicProperties);this.pz=a(this,t.ks.p.z,1,0,this.dynamicProperties)}else this.p=a(this,t.ks.p,1,0,this.dynamicProperties);t.ks.a&&(this.a=a(this,t.ks.a,1,0,this.dynamicProperties));if(t.ks.or.k.length&&t.ks.or.k[0].to){var n,o=t.ks.or.k.length;for(n=0;n<o;n+=1){t.ks.or.k[n].to=null;t.ks.or.k[n].ti=null}}this.or=a(this,t.ks.or,1,degToRads,this.dynamicProperties);this.or.sh=true;this.rx=a(this,t.ks.rx,0,degToRads,this.dynamicProperties);this.ry=a(this,t.ks.ry,0,degToRads,this.dynamicProperties);this.rz=a(this,t.ks.rz,0,degToRads,this.dynamicProperties);this.mat=new Matrix}createElement(HBaseElement,HCameraElement);HCameraElement.prototype.setup=function(){var t,e=this.comp.threeDElements.length,r;for(t=0;t<e;t+=1){r=this.comp.threeDElements[t];r.perspectiveElem.style.perspective=r.perspectiveElem.style.webkitPerspective=this.pe.v+"px";r.container.style.transformOrigin=r.container.style.mozTransformOrigin=r.container.style.webkitTransformOrigin="0px 0px 0px";r.perspectiveElem.style.transform=r.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"}};HCameraElement.prototype.createElements=function(){};HCameraElement.prototype.hide=function(){};HCameraElement.prototype.renderFrame=function(){var t=this.firstFrame;var e,r;if(this.hierarchy){r=this.hierarchy.length;for(e=0;e<r;e+=1)t=!!this.hierarchy[e].finalTransform.mProp.mdf||t}if(t||this.p&&this.p.mdf||this.px&&(this.px.mdf||this.py.mdf||this.pz.mdf)||this.rx.mdf||this.ry.mdf||this.rz.mdf||this.or.mdf||this.a&&this.a.mdf){this.mat.reset();this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v);if(this.a){var s=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]];var i=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)+Math.pow(s[2],2));var a=[s[0]/i,s[1]/i,s[2]/i];var n=Math.sqrt(a[2]*a[2]+a[0]*a[0]);var o=Math.atan2(a[1],n);var h=Math.atan2(a[0],-a[2]);this.mat.rotateY(h).rotateX(-o)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0);this.mat.translate(0,0,this.pe.v);if(this.hierarchy){var l;r=this.hierarchy.length;for(e=0;e<r;e+=1){l=this.hierarchy[e].finalTransform.mProp.iv.props;this.mat.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],-l[12],-l[13],l[14],l[15])}}r=this.comp.threeDElements.length;var p;for(e=0;e<r;e+=1){p=this.comp.threeDElements[e];p.container.style.transform=p.container.style.webkitTransform=this.mat.toCSS()}}this.firstFrame=false};HCameraElement.prototype.destroy=function(){};var Expressions=function(){var t={};t.initExpressions=e;function e(t){t.renderer.compInterface=CompExpressionInterface(t.renderer);t.renderer.globalData.projectInterface.registerComposition(t.renderer)}return t}();expressionsPlugin=Expressions;(function t(){function e(){return this.pv}function r(t,e,r){if(!this.k||!this.keyframes)return this.pv;var s=this.comp.renderedFrame;var i=this.keyframes;var a=i[i.length-1].t;if(s<=a)return this.pv;var n,o;if(r){n=e?Math.abs(a-elem.comp.globalData.frameRate*e):Math.max(0,a-this.elem.data.ip);o=a-n}else{(!e||e>i.length-1)&&(e=i.length-1);o=i[i.length-1-e].t;n=a-o}var h=this.offsetTime||0;var l,p,m;if("pingpong"===t.toLowerCase()){var f=Math.floor((s-o)/n);if(f%2!==0)return this.getValueAtTime((n-(s-o)%n+o-h)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var c=this.getValueAtTime(o/this.comp.globalData.frameRate,0);var d=this.getValueAtTime(a/this.comp.globalData.frameRate,0);var u=this.getValueAtTime(((s-o)%n+o)/this.comp.globalData.frameRate,0);var v=Math.floor((s-o)/n);if(this.pv.length){m=new Array(c.length);p=m.length;for(l=0;l<p;l+=1)m[l]=(d[l]-c[l])*v+u[l];return m}return(d-c)*v+u}if("continue"===t){var y=this.getValueAtTime(a/this.comp.globalData.frameRate,0);var g=this.getValueAtTime((a-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){m=new Array(y.length);p=m.length;for(l=0;l<p;l+=1)m[l]=y[l]+(y[l]-g[l])*((s-a)/this.comp.globalData.frameRate)/5e-4;return m}return y+(s-a)/.001*(y-g)}}return this.getValueAtTime(((s-o)%n+o-h)/this.comp.globalData.frameRate,0)}function s(t,e,r){if(!this.k)return this.pv;var s=time*elem.comp.globalData.frameRate;var i=this.keyframes;var a=i[0].t;var n=this.offsetTime||0;if(s>=a)return this.pv;var o,h;if(r){o=e?Math.abs(elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-a);h=a+o}else{(!e||e>i.length-1)&&(e=i.length-1);h=i[e].t;o=h-a}var l,p,m;if("pingpong"===t){var f=Math.floor((a-s)/o);if(f%2===0)return this.getValueAtTime(((a-s)%o+a-n)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var c=this.getValueAtTime(a/this.comp.globalData.frameRate,0);var d=this.getValueAtTime(h/this.comp.globalData.frameRate,0);var u=this.getValueAtTime((o-(a-s)%o+a)/this.comp.globalData.frameRate,0);var v=Math.floor((a-s)/o)+1;if(this.pv.length){m=new Array(c.length);p=m.length;for(l=0;l<p;l+=1)m[l]=u[l]-(d[l]-c[l])*v;return m}return u-(d-c)*v}if("continue"===t){var y=this.getValueAtTime(a/this.comp.globalData.frameRate,0);var g=this.getValueAtTime((a+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){m=new Array(y.length);p=m.length;for(l=0;l<p;l+=1)m[l]=y[l]+(y[l]-g[l])*(a-s)/.001;return m}return y+(y-g)*(a-s)/.001}}return this.getValueAtTime((o-(a-s)%o+a-n)/this.comp.globalData.frameRate,0)}function i(t){this._cachingAtTime||(this._cachingAtTime={lastValue:-99999,lastIndex:0});if(t!==this._cachingAtTime.lastFrame){t*=this.elem.globalData.frameRate;t-=this.offsetTime;var e=this._caching.lastFrame<t?this._caching.lastIndex:0;var r=this.interpolateValue(t,e,this.pv,this._cachingAtTime);this._cachingAtTime.lastIndex=r.iterationIndex;this._cachingAtTime.value=r.value;this._cachingAtTime.lastFrame=t}return this._cachingAtTime.value}function a(t){if(void 0!==this.vel)return this.vel;var e=-.01;var r=this.getValueAtTime(t);var s=this.getValueAtTime(t+e);var i;if(r.length){i=Array.apply(null,{length:r.length});var a;for(a=0;a<r.length;a+=1)i[a]=(s[a]-r[a])/e}else i=(s-r)/e;return i}function n(t){this.propertyGroup=t}function o(t,e,r){if(e.x){r.k=true;r.x=true;r.getValue&&(r.getPreValue=r.getValue);r.getValue=ExpressionManager.initiateExpression.bind(r)(t,e,r)}}function h(t){console.log("time:",t)}function l(t){}var p=function(){function t(t,e){this.textIndex=t+1;this.textTotal=e;this.getValue();return this.v}return function r(s,h){this.pv=1;this.comp=s.comp;this.elem=s;this.mult=.01;this.type="textSelector";this.textTotal=h.totalChars;this.selectorValue=100;this.lastValue=[1,1,1];o.bind(this)(s,h,this);this.getMult=t;this.getVelocityAtTime=a;this.kf?this.getValueAtTime=i.bind(this):this.getValueAtTime=e.bind(this);this.setGroupProperty=n}}();var m=PropertyFactory.getProp;PropertyFactory.getProp=function(t,p,f,c,d){var u=m(t,p,f,c,d);2===f?u.dynamicProperties.length?u.getValueAtTime=h.bind(u):u.getValueAtTime=l.bind(u):u.kf?u.getValueAtTime=i.bind(u):u.getValueAtTime=e.bind(u);u.setGroupProperty=n;u.loopOut=r;u.loopIn=s;u.getVelocityAtTime=a;u.numKeys=1===p.a?p.k.length:0;var v=u.k;void 0!==p.ix&&Object.defineProperty(u,"propertyIndex",{get:function(){return p.ix}});o(t,p,u);!v&&u.x&&d.push(u);return u};function f(t){if(!this._shapeValueAtTime){this._lastIndexAtTime=0;this._lastTimeAtTime=-999999;this._shapeValueAtTime=shape_pool.clone(this.pv)}if(t!==this._lastTimeAtTime){this._lastTimeAtTime=t;t*=this.elem.globalData.frameRate;var e=this.interpolateShape(t,this._lastIndexAtTime,this._shapeValueAtTime,false);this._lastIndexAtTime=e.iterationIndex}return this._shapeValueAtTime}var c=ShapePropertyFactory.getConstructorFunction();var d=ShapePropertyFactory.getKeyframedConstructorFunction();c.prototype.vertices=function(t,e){var r=this.v;void 0!==e&&(r=this.getValueAtTime(e,0));var s,i=r._length;var a=r[t];var n=r.v;var o=Array.apply(null,{length:i});for(s=0;s<i;s+=1)o[s]="i"===t||"o"===t?[a[s][0]-n[s][0],a[s][1]-n[s][1]]:[a[s][0],a[s][1]];return o};c.prototype.points=function(t){return this.vertices("v",t)};c.prototype.inTangents=function(t){return this.vertices("i",t)};c.prototype.outTangents=function(t){return this.vertices("o",t)};c.prototype.isClosed=function(){return this.v.c};c.prototype.pointOnPath=function(t,e){var r=this.v;void 0!==e&&(r=this.getValueAtTime(e,0));this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(r));var s=this._segmentsLength;var i=s.lengths;var a=s.totalLength*t;var n=0,o=i.length;var h=0,l;var p=0;var m;while(n<o){if(p+i[n].addedLength>a){m=i[n].segments;var f=n;var c=r.c&&n===o-1?0:n+1;var d=(a-p)/i[n].addedLength;var u=bez.getPointInSegment(r.v[f],r.v[c],r.o[f],r.i[c],d,i[n]);break}p+=i[n].addedLength;n+=1}u||(u=r.c?[r.v[0][0],r.v[0][1]]:[r.v[r._length-1][0],r.v[r._length-1][1]]);return u};c.prototype.vectorOnPath=function(t,e,r){t=1==t?this.v.c?0:.999:t;var s=this.pointOnPath(t,e);var i=this.pointOnPath(t+.001,e);var a=i[0]-s[0];var n=i[1]-s[1];var o=Math.sqrt(Math.pow(a,2)+Math.pow(n,2));var h="tangent"===r?[a/o,n/o]:[-n/o,a/o];return h};c.prototype.tangentOnPath=function(t,e){return this.vectorOnPath(t,e,"tangent")};c.prototype.normalOnPath=function(t,e){return this.vectorOnPath(t,e,"normal")};c.prototype.setGroupProperty=n;c.prototype.getValueAtTime=e;d.prototype.vertices=c.prototype.vertices;d.prototype.points=c.prototype.points;d.prototype.inTangents=c.prototype.inTangents;d.prototype.outTangents=c.prototype.outTangents;d.prototype.isClosed=c.prototype.isClosed;d.prototype.pointOnPath=c.prototype.pointOnPath;d.prototype.vectorOnPath=c.prototype.vectorOnPath;d.prototype.tangentOnPath=c.prototype.tangentOnPath;d.prototype.normalOnPath=c.prototype.normalOnPath;d.prototype.setGroupProperty=c.prototype.setGroupProperty;d.prototype.getValueAtTime=f;var u=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,r,s,i){var a=u(t,e,r,s,i);var n=a.k;void 0!==e.ix&&Object.defineProperty(a,"propertyIndex",{get:function(){return e.ix}});3===r?o(t,e.pt,a):4===r&&o(t,e.ks,a);!n&&a.x&&s.push(a);return a};var v=PropertyFactory.getTextSelectorProp;PropertyFactory.getTextSelectorProp=function(t,e,r){return 1===e.t?new p(t,e,r):v(t,e,r)}})();(function t(){function e(){if(this.data.d.x){this.comp=this.elem.comp;this.getValue&&(this.getPreValue=this.getValue);this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this);this.getValue=this.getExpressionValue;return true}return false}TextProperty.prototype.searchProperty=function(){this.kf=this.searchExpressions()||this.data.d.k.length>1;return this.kf};TextProperty.prototype.getExpressionValue=function(t){this.calculateExpression();if(this.mdf){this.currentData.t=this.v.toString();this.completeTextData(this.currentData)}};TextProperty.prototype.searchExpressions=e})();var ExpressionManager=function(){var ob={};var Math=BMMath;var window=null;var document=null;function duplicatePropertyValue(t,e){e=e||1;if("number"===typeof t||t instanceof Number)return t*e;if(t.i)return JSON.parse(JSON.stringify(t));var r=Array.apply(null,{length:t.length});var s,i=t.length;for(s=0;s<i;s+=1)r[s]=t[s]*e;return r}function shapesEqual(t,e){if(t._length!==e._length||t.c!==e.c)return false;var r,s=t._length;for(r=0;r<s;r+=1)if(t.v[r][0]!==e.v[r][0]||t.v[r][1]!==e.v[r][1]||t.o[r][0]!==e.o[r][0]||t.o[r][1]!==e.o[r][1]||t.i[r][0]!==e.i[r][0]||t.i[r][1]!==e.i[r][1])return false;return true}function $bm_neg(t){var e=typeof t;if("number"===e||"boolean"===e||t instanceof Number)return-t;if(t.constructor===Array){var r,s=t.length;var i=[];for(r=0;r<s;r+=1)i[r]=-t[r];return i}}function sum(t,e){var r=typeof t;var s=typeof e;if("string"===r||"string"===s)return t+e;if(("number"===r||"boolean"===r||"string"===r||t instanceof Number)&&("number"===s||"boolean"===s||"string"===s||e instanceof Number))return t+e;if(t.constructor===Array&&("number"===s||"boolean"===s||"string"===s||e instanceof Number)){t[0]=t[0]+e;return t}if(("number"===r||"boolean"===r||"string"===r||t instanceof Number)&&e.constructor===Array){e[0]=t+e[0];return e}if(t.constructor===Array&&e.constructor===Array){var i=0,a=t.length,n=e.length;var o=[];while(i<a||i<n){("number"===typeof t[i]||t[i]instanceof Number)&&("number"===typeof e[i]||e[i]instanceof Number)?o[i]=t[i]+e[i]:o[i]=void 0==e[i]?t[i]:t[i]||e[i];i+=1}return o}return 0}var add=sum;function sub(t,e){var r=typeof t;var s=typeof e;if(("number"===r||"boolean"===r||"string"===r||t instanceof Number)&&("number"===s||"boolean"===s||"string"===s||e instanceof Number)){"string"===r&&(t=parseInt(t));"string"===s&&(e=parseInt(e));return t-e}if(t.constructor===Array&&("number"===s||"boolean"===s||"string"===s||e instanceof Number)){t[0]=t[0]-e;return t}if(("number"===r||"boolean"===r||"string"===r||t instanceof Number)&&e.constructor===Array){e[0]=t-e[0];return e}if(t.constructor===Array&&e.constructor===Array){var i=0,a=t.length,n=e.length;var o=[];while(i<a||i<n){("number"===typeof t[i]||t[i]instanceof Number)&&typeof("number"===typeof e[i]||e[i]instanceof Number)?o[i]=t[i]-e[i]:o[i]=void 0==e[i]?t[i]:t[i]||e[i];i+=1}return o}return 0}function mul(t,e){var r=typeof t;var s=typeof e;var i;if(("number"===r||"boolean"===r||"string"===r||t instanceof Number)&&("number"===s||"boolean"===s||"string"===s||e instanceof Number))return t*e;var a,n;if(t.constructor===Array&&("number"===s||"boolean"===s||"string"===s||e instanceof Number)){n=t.length;i=Array.apply(null,{length:n});for(a=0;a<n;a+=1)i[a]=t[a]*e;return i}if(("number"===r||"boolean"===r||"string"===r||t instanceof Number)&&e.constructor===Array){n=e.length;i=Array.apply(null,{length:n});for(a=0;a<n;a+=1)i[a]=t*e[a];return i}return 0}function div(t,e){var r=typeof t;var s=typeof e;var i;if(("number"===r||"boolean"===r||"string"===r||t instanceof Number)&&("number"===s||"boolean"===s||"string"===s||e instanceof Number))return t/e;var a,n;if(t.constructor===Array&&("number"===s||"boolean"===s||"string"===s||e instanceof Number)){n=t.length;i=Array.apply(null,{length:n});for(a=0;a<n;a+=1)i[a]=t[a]/e;return i}if(("number"===r||"boolean"===r||"string"===r||t instanceof Number)&&e.constructor===Array){n=e.length;i=Array.apply(null,{length:n});for(a=0;a<n;a+=1)i[a]=t/e[a];return i}return 0}function mod(t,e){"string"===typeof t&&(t=parseInt(t));"string"===typeof e&&(e=parseInt(e));return t%e}function clamp(t,e,r){if(e>r){var s=r;r=e;e=s}return Math.min(Math.max(t,e),r)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees;var helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"===typeof t||t instanceof Number){e=e||0;return Math.abs(t-e)}e||(e=helperLengthArray);var r,s=Math.min(t.length,e.length);var i=0;for(r=0;r<s;r+=1)i+=Math.pow(e[r]-t[r],2);return Math.sqrt(i)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0];var r=t[1];var s=t[2];var i=Math.max(e,r,s),a=Math.min(e,r,s);var n,o,h=(i+a)/2;if(i==a)n=o=0;else{var l=i-a;o=h>.5?l/(2-i-a):l/(i+a);switch(i){case e:n=(r-s)/l+(r<s?6:0);break;case r:n=(s-e)/l+2;break;case s:n=(e-r)/l+4;break}n/=6}return[n,o,h,t[3]]}function hslToRgb(t){var e=t[0];var r=t[1];var s=t[2];var i,a,n;if(0==r)i=a=n=s;else{function o(t,e,r){r<0&&(r+=1);r>1&&(r-=1);if(r<1/6)return t+6*(e-t)*r;if(r<.5)return e;if(r<2/3)return t+(e-t)*(2/3-r)*6;return t}var h=s<.5?s*(1+r):s+r-s*r;var l=2*s-h;i=o(l,h,e+1/3);a=o(l,h,e);n=o(l,h,e-1/3)}return[i,a,n,t[3]]}function linear(t,e,r,s,i){if(void 0===s||void 0===i)return linear(t,0,1,e,r);if(t<=e)return s;if(t>=r)return i;var a=r===e?0:(t-e)/(r-e);if(!s.length)return s+(i-s)*a;var n,o=s.length;var h=Array.apply(null,{length:o});for(n=0;n<o;n+=1)h[n]=s[n]+(i[n]-s[n])*a;return h}function random(t,e){if(void 0===e)if(void 0===t){t=0;e=1}else{e=t;t=void 0}if(e.length){var r,s=e.length;t||(t=Array.apply(null,{length:s}));var i=Array.apply(null,{length:s});var a=BMMath.random();for(r=0;r<s;r+=1)i[r]=t[r]+a*(e[r]-t[r]);return i}void 0===t&&(t=0);var n=BMMath.random();return t+n*(e-t)}function createPath(t,e,r,s){e=e&&e.length?e:t;r=r&&r.length?r:t;var a=shape_pool.newShape();var n=t.length;a.setPathData(s,n);for(i=0;i<n;i+=1)a.setTripleAt(t[i][0],t[i][1],r[i][0]+t[i][0],r[i][1]+t[i][1],e[i][0]+t[i][0],e[i][1]+t[i][1],i,true);return a}function initiateExpression(elem,data,property){var val=data.x;var needsVelocity=/velocity(?![\w\d])/.test(val);var _needsRandom=-1!==val.indexOf("random");var elemType=elem.data.ty;var transform,content,effect;var thisComp=elem.comp;var thisProperty=property;elem.comp.frameDuration=1/elem.comp.globalData.frameRate;var inPoint=elem.data.ip/elem.comp.globalData.frameRate;var outPoint=elem.data.op/elem.comp.globalData.frameRate;var width=elem.data.sw?elem.data.sw:0;var height=elem.data.sh?elem.data.sh:0;var loopIn,loop_in,loopOut,loop_out;var toWorld,fromWorld,fromComp,fromCompToSurface,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime;var fn=new Function;var fn=eval("[function(){"+val+";if($bm_rt.__shapeObject){this.v=shape_pool.clone($bm_rt.v);}else{this.v=$bm_rt;}}]")[0];var bindedFn=fn.bind(this);var numKeys=property.kf?data.k.length:0;var wiggle=function t(e,r){var s,i,a=this.pv.length?this.pv.length:1;var n=Array.apply(null,{len:a});for(i=0;i<a;i+=1)n[i]=0;e=5;var o=Math.floor(time*e);s=0;i=0;while(s<o){for(i=0;i<a;i+=1)n[i]+=-r+2*r*BMMath.random();s+=1}var h=time*e;var l=h-Math.floor(h);var p=Array.apply({length:a});if(a>1){for(i=0;i<a;i+=1)p[i]=this.pv[i]+n[i]+(-r+2*r*BMMath.random())*l;return p}return this.pv+n[0]+(-r+2*r*BMMath.random())*l}.bind(this);if(thisProperty.loopIn){loopIn=thisProperty.loopIn.bind(thisProperty);loop_in=loopIn}if(thisProperty.loopOut){loopOut=thisProperty.loopOut.bind(thisProperty);loop_out=loopOut}var loopInDuration=function t(e,r){return loopIn(e,r,true)}.bind(this);var loopOutDuration=function t(e,r){return loopOut(e,r,true)}.bind(this);this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this));this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(t,e){var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]];var s=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads;var i=-Math.atan2(r[1],r[2])/degToRads;return[i,s,0]}function easeOut(t,e,r){return-(r-e)*t*(t-2)+e}function nearestKey(t){var e,r=data.k.length,s,i;if(data.k.length&&"number"!==typeof data.k[0]){s=-1;t*=elem.comp.globalData.frameRate;if(t<data.k[0].t){s=1;i=data.k[0].t}else{for(e=0;e<r-1;e+=1){if(t===data.k[e].t){s=e+1;i=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){if(t-data.k[e].t>data.k[e+1].t-t){s=e+2;i=data.k[e+1].t}else{s=e+1;i=data.k[e].t}break}}if(-1===s){s=e+1;i=data.k[e].t}}}else{s=0;i=0}var a={};a.index=s;a.time=i/elem.comp.globalData.frameRate;return a}function key(t){var e,r,s;if(!data.k.length||"number"===typeof data.k[0])throw new Error("The property has no keyframe at index "+t);t-=1;e={time:data.k[t].t/elem.comp.globalData.frameRate};var i;i=t!==data.k.length-1||data.k[t].h?data.k[t].s:data.k[t-1].e;s=i.length;for(r=0;r<s;r+=1)e[r]=i[r];return e}function framesToTime(t,e){e||(e=elem.comp.globalData.frameRate);return t/e}function timeToFrames(t,e){t||0===t||(t=time);e||(e=elem.comp.globalData.frameRate);return t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}var time,velocity,value,textIndex,textTotal,selectorValue;var index=elem.data.ind;var hasParent=!!(elem.hierarchy&&elem.hierarchy.length);var parent;var randSeed=Math.floor(1e6*Math.random());function executeExpression(){_needsRandom&&seedRandom(randSeed);if(this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.type)return;if(this.lock){this.v=duplicatePropertyValue(this.pv,this.mult);return true}if("textSelector"===this.type){textIndex=this.textIndex;textTotal=this.textTotal;selectorValue=this.selectorValue}if(!thisLayer){thisLayer=elem.layerInterface;thisComp=elem.comp.compInterface;toWorld=thisLayer.toWorld.bind(thisLayer);fromWorld=thisLayer.fromWorld.bind(thisLayer);fromComp=thisLayer.fromComp.bind(thisLayer);mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null;fromCompToSurface=fromComp}if(!transform){transform=elem.layerInterface("ADBE Transform Group");anchorPoint=transform.anchorPoint}4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group"));effect||(effect=thisLayer(4));hasParent=!!(elem.hierarchy&&elem.hierarchy.length);hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface);this.lock=true;this.getPreValue&&this.getPreValue();value=this.pv;time=this.comp.renderedFrame/this.comp.globalData.frameRate;needsVelocity&&(velocity=velocityAtTime(time));bindedFn();this.frameExpressionId=elem.globalData.frameId;var t,e;if(this.mult)if("number"===typeof this.v||this.v instanceof Number||this.v instanceof String||"string"===typeof this.v)this.v*=this.mult;else if(1===this.v.length)this.v=this.v[0]*this.mult;else{e=this.v.length;value===this.v&&(this.v=2===e?[value[0],value[1]]:[value[0],value[1],value[2]]);for(t=0;t<e;t+=1)this.v[t]*=this.mult}1===this.v.length&&(this.v=this.v[0]);if("number"===typeof this.v||this.v instanceof Number||this.v instanceof String||"string"===typeof this.v){if(this.lastValue!==this.v){this.lastValue=this.v;this.mdf=true}}else if(this.v._length){if(!shapesEqual(this.v,this.localShapeCollection.shapes[0])){this.mdf=true;this.localShapeCollection.releaseShapes();this.localShapeCollection.addShape(shape_pool.clone(this.v))}}else{e=this.v.length;for(t=0;t<e;t+=1)if(this.v[t]!==this.lastValue[t]){this.lastValue[t]=this.v[t];this.mdf=true}}this.lock=false}return executeExpression}ob.initiateExpression=initiateExpression;return ob}();var ShapeExpressionInterface=function(){var t={createShapeInterface:e,createGroupInterface:r,createTrimInterface:a,createStrokeInterface:i,createTransformInterface:n,createEllipseInterface:o,createStarInterface:h,createRectInterface:l,createRoundedInterface:p,createRepatearInterface:m,createPathInterface:f,createFillInterface:s};function e(t,e,r){return d(t,e,r)}function r(t,e,r){return v(t,e,r)}function s(t,e,r){return y(t,e,r)}function i(t,e,r){return g(t,e,r)}function a(t,e,r){return b(t,e,r)}function n(t,e,r){return E(t,e,r)}function o(t,e,r){return P(t,e,r)}function h(t,e,r){return x(t,e,r)}function l(t,e,r){return S(t,e,r)}function p(t,e,r){return C(t,e,r)}function m(t,e,r){return k(t,e,r)}function f(t,e,r){return A(t,e,r)}function c(t,e,r){var s=[];var i,a=t?t.length:0;for(i=0;i<a;i+=1)"gr"==t[i].ty?s.push(ShapeExpressionInterface.createGroupInterface(t[i],e[i],r)):"fl"==t[i].ty?s.push(ShapeExpressionInterface.createFillInterface(t[i],e[i],r)):"st"==t[i].ty?s.push(ShapeExpressionInterface.createStrokeInterface(t[i],e[i],r)):"tm"==t[i].ty?s.push(ShapeExpressionInterface.createTrimInterface(t[i],e[i],r)):"tr"==t[i].ty||("el"==t[i].ty?s.push(ShapeExpressionInterface.createEllipseInterface(t[i],e[i],r)):"sr"==t[i].ty?s.push(ShapeExpressionInterface.createStarInterface(t[i],e[i],r)):"sh"==t[i].ty?s.push(ShapeExpressionInterface.createPathInterface(t[i],e[i],r)):"rc"==t[i].ty?s.push(ShapeExpressionInterface.createRectInterface(t[i],e[i],r)):"rd"==t[i].ty?s.push(ShapeExpressionInterface.createRoundedInterface(t[i],e[i],r)):"rp"==t[i].ty&&s.push(ShapeExpressionInterface.createRepatearInterface(t[i],e[i],r)));return s}var d=function(){return function(t,e,r){var s;function i(t){if("number"===typeof t)return s[t-1];var e=0,r=s.length;while(e<r){if(s[e]._name===t)return s[e];e+=1}}i.propertyGroup=r;s=c(t,e,i);return i}}();var u=function(){return function(t,e,r){var s;var i=function t(e){var r=0,i=s.length;while(r<i){if(s[r]._name===e||s[r].mn===e||s[r].propertyIndex===e||s[r].ix===e||s[r].ind===e)return s[r];r+=1}if("number"===typeof e)return s[e-1]};i.propertyGroup=function(t){return 1===t?i:r(t-1)};s=c(t.it,e.it,i.propertyGroup);i.numProperties=s.length;i.propertyIndex=t.cix;return i}}();var v=function(){return function(t,e,r){var s=function t(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return s.content;case"ADBE Vector Transform Group":case 3:default:return s.transform}};s.propertyGroup=function(t){return 1===t?s:r(t-1)};var i=u(t,e,s.propertyGroup);var a=ShapeExpressionInterface.createTransformInterface(t.it[t.it.length-1],e.it[e.it.length-1],s.propertyGroup);s.content=i;s.transform=a;Object.defineProperty(s,"_name",{get:function(){return t.nm}});s.numProperties=t.np;s.propertyIndex=t.ix;s.nm=t.nm;s.mn=t.mn;return s}}();var y=function(){return function(t,e,r){function s(t){if("Color"===t||"color"===t)return s.color;if("Opacity"===t||"opacity"===t)return s.opacity}Object.defineProperty(s,"color",{get:function(){return ExpressionValue(e.c,1/e.c.mult,"color")}});Object.defineProperty(s,"opacity",{get:function(){return ExpressionValue(e.o,100)}});Object.defineProperty(s,"_name",{value:t.nm});Object.defineProperty(s,"mn",{value:t.mn});e.c.setGroupProperty(r);e.o.setGroupProperty(r);return s}}();var g=function(){return function(e,r,s){function i(e){return 1===e?t:s(e-1)}function a(t){return 1===t?l:i(t-1)}function n(t){Object.defineProperty(l,e.d[t].nm,{get:function(){return ExpressionValue(r.d.dataProps[t].p)}})}var o,h=e.d?e.d.length:0;var l={};for(o=0;o<h;o+=1){n(o);r.d.dataProps[o].p.setGroupProperty(a)}function p(t){if("Color"===t||"color"===t)return p.color;if("Opacity"===t||"opacity"===t)return p.opacity;if("Stroke Width"===t||"stroke width"===t)return p.strokeWidth}Object.defineProperty(p,"color",{get:function(){return ExpressionValue(r.c,1/r.c.mult,"color")}});Object.defineProperty(p,"opacity",{get:function(){return ExpressionValue(r.o,100)}});Object.defineProperty(p,"strokeWidth",{get:function(){return ExpressionValue(r.w)}});Object.defineProperty(p,"dash",{get:function(){return l}});Object.defineProperty(p,"_name",{value:e.nm});Object.defineProperty(p,"mn",{value:e.mn});r.c.setGroupProperty(i);r.o.setGroupProperty(i);r.w.setGroupProperty(i);return p}}();var b=function(){return function(t,e,r){function s(t){return 1==t?i:r(--t)}i.propertyIndex=t.ix;e.s.setGroupProperty(s);e.e.setGroupProperty(s);e.o.setGroupProperty(s);function i(e){if(e===t.e.ix||"End"===e||"end"===e)return i.end;if(e===t.s.ix)return i.start;if(e===t.o.ix)return i.offset}i.propertyIndex=t.ix;Object.defineProperty(i,"start",{get:function(){return ExpressionValue(e.s,1/e.s.mult)}});Object.defineProperty(i,"end",{get:function(){return ExpressionValue(e.e,1/e.e.mult)}});Object.defineProperty(i,"offset",{get:function(){return ExpressionValue(e.o)}});Object.defineProperty(i,"_name",{get:function(){return t.nm}});i.mn=t.mn;return i}}();var E=function(){return function(t,e,r){function s(t){return 1==t?i:r(--t)}e.transform.mProps.o.setGroupProperty(s);e.transform.mProps.p.setGroupProperty(s);e.transform.mProps.a.setGroupProperty(s);e.transform.mProps.s.setGroupProperty(s);e.transform.mProps.r.setGroupProperty(s);if(e.transform.mProps.sk){e.transform.mProps.sk.setGroupProperty(s);e.transform.mProps.sa.setGroupProperty(s)}e.transform.op.setGroupProperty(s);function i(e){if(t.a.ix===e)return i.anchorPoint;if(t.o.ix===e)return i.opacity;if(t.p.ix===e)return i.position;if(t.r.ix===e)return i.rotation;if(t.s.ix===e)return i.scale;if(t.sk&&t.sk.ix===e)return i.skew;if(t.sa&&t.sa.ix===e)return i.skewAxis;if("Opacity"===e)return i.opacity;if("Position"===e)return i.position;if("Anchor Point"===e)return i.anchorPoint;if("Scale"===e)return i.scale;if("Rotation"===e||"ADBE Vector Rotation"===e)return i.rotation;if("Skew"===e)return i.skew;if("Skew Axis"===e)return i.skewAxis}Object.defineProperty(i,"opacity",{get:function(){return ExpressionValue(e.transform.mProps.o,1/e.transform.mProps.o.mult)}});Object.defineProperty(i,"position",{get:function(){return ExpressionValue(e.transform.mProps.p)}});Object.defineProperty(i,"anchorPoint",{get:function(){return ExpressionValue(e.transform.mProps.a)}});var a=[];Object.defineProperty(i,"scale",{get:function(){return ExpressionValue(e.transform.mProps.s,1/e.transform.mProps.s.mult)}});Object.defineProperty(i,"rotation",{get:function(){return ExpressionValue(e.transform.mProps.r,1/e.transform.mProps.r.mult)}});Object.defineProperty(i,"skew",{get:function(){return ExpressionValue(e.transform.mProps.sk)}});Object.defineProperty(i,"skewAxis",{get:function(){return ExpressionValue(e.transform.mProps.sa)}});Object.defineProperty(i,"_name",{get:function(){return t.nm}});i.ty="tr";i.mn=t.mn;return i}}();var P=function(){return function(t,e,r){function s(t){return 1==t?a:r(--t)}a.propertyIndex=t.ix;var i="tm"===e.sh.ty?e.sh.prop:e.sh;i.s.setGroupProperty(s);i.p.setGroupProperty(s);function a(e){if(t.p.ix===e)return a.position;if(t.s.ix===e)return a.size}Object.defineProperty(a,"size",{get:function(){return ExpressionValue(i.s)}});Object.defineProperty(a,"position",{get:function(){return ExpressionValue(i.p)}});Object.defineProperty(a,"_name",{get:function(){return t.nm}});a.mn=t.mn;return a}}();var x=function(){return function(t,e,r){function s(t){return 1==t?a:r(--t)}var i="tm"===e.sh.ty?e.sh.prop:e.sh;a.propertyIndex=t.ix;i.or.setGroupProperty(s);i.os.setGroupProperty(s);i.pt.setGroupProperty(s);i.p.setGroupProperty(s);i.r.setGroupProperty(s);if(t.ir){i.ir.setGroupProperty(s);i.is.setGroupProperty(s)}function a(e){if(t.p.ix===e)return a.position;if(t.r.ix===e)return a.rotation;if(t.pt.ix===e)return a.points;if(t.or.ix===e||"ADBE Vector Star Outer Radius"===e)return a.outerRadius;if(t.os.ix===e)return a.outerRoundness;if(t.ir&&(t.ir.ix===e||"ADBE Vector Star Inner Radius"===e))return a.innerRadius;if(t.is&&t.is.ix===e)return a.innerRoundness}Object.defineProperty(a,"position",{get:function(){return ExpressionValue(i.p)}});Object.defineProperty(a,"rotation",{get:function(){return ExpressionValue(i.r,1/i.r.mult)}});Object.defineProperty(a,"points",{get:function(){return ExpressionValue(i.pt)}});Object.defineProperty(a,"outerRadius",{get:function(){return ExpressionValue(i.or)}});Object.defineProperty(a,"outerRoundness",{get:function(){return ExpressionValue(i.os)}});Object.defineProperty(a,"innerRadius",{get:function(){if(!i.ir)return 0;return ExpressionValue(i.ir)}});Object.defineProperty(a,"innerRoundness",{get:function(){if(!i.is)return 0;return ExpressionValue(i.is,1/i.is.mult)}});Object.defineProperty(a,"_name",{get:function(){return t.nm}});a.mn=t.mn;return a}}();var S=function(){return function(t,e,r){function s(t){return 1==t?a:r(--t)}var i="tm"===e.sh.ty?e.sh.prop:e.sh;a.propertyIndex=t.ix;i.p.setGroupProperty(s);i.s.setGroupProperty(s);i.r.setGroupProperty(s);function a(e){if(t.p.ix===e)return a.position;if(t.r.ix===e)return a.roundness;if(t.s.ix===e||"Size"===e)return a.size}Object.defineProperty(a,"position",{get:function(){return ExpressionValue(i.p)}});Object.defineProperty(a,"roundness",{get:function(){return ExpressionValue(i.r)}});Object.defineProperty(a,"size",{get:function(){return ExpressionValue(i.s)}});Object.defineProperty(a,"_name",{get:function(){return t.nm}});a.mn=t.mn;return a}}();var C=function(){return function(t,e,r){function s(t){return 1==t?a:r(--t)}var i=e;a.propertyIndex=t.ix;i.rd.setGroupProperty(s);function a(e){if(t.r.ix===e||"Round Corners 1"===e)return a.radius}Object.defineProperty(a,"radius",{get:function(){return ExpressionValue(i.rd)}});Object.defineProperty(a,"_name",{get:function(){return t.nm}});a.mn=t.mn;return a}}();var k=function(){return function(t,e,r){function s(t){return 1==t?a:r(--t)}var i=e;a.propertyIndex=t.ix;i.c.setGroupProperty(s);i.o.setGroupProperty(s);function a(e){if(t.c.ix===e||"Copies"===e)return a.copies;if(t.o.ix===e||"Offset"===e)return a.offset}Object.defineProperty(a,"copies",{get:function(){return ExpressionValue(i.c)}});Object.defineProperty(a,"offset",{get:function(){return ExpressionValue(i.o)}});Object.defineProperty(a,"_name",{get:function(){return t.nm}});a.mn=t.mn;return a}}();var A=function(){return function(t,e,r){var s=e.sh;function i(t){return 1==t?a:r(--t)}s.setGroupProperty(i);function a(t){if("Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t)return a.path}Object.defineProperty(a,"path",{get:function(){s.k&&s.getValue();return s}});Object.defineProperty(a,"shape",{get:function(){s.k&&s.getValue();return s}});Object.defineProperty(a,"_name",{value:t.nm});Object.defineProperty(a,"ix",{value:t.ix});Object.defineProperty(a,"mn",{value:t.mn});return a}}();return t}();var TextExpressionInterface=function(){return function(t){var e,r;function s(){}Object.defineProperty(s,"sourceText",{get:function(){var s=t.textProperty.currentData.t;if(t.textProperty.currentData.t!==e){t.textProperty.currentData.t=e;r=new String(s);r.value=s||new String(s)}return r}});return s}}();var LayerExpressionInterface=function(){function t(t,e){var r=new Matrix;r.reset();var s;s=(e,this._elem.finalTransform.mProp);s.applyToMatrix(r);if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,a=this._elem.hierarchy.length;for(i=0;i<a;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(r);return r.applyToPointArray(t[0],t[1],t[2]||0)}return r.applyToPointArray(t[0],t[1],t[2]||0)}function e(t,e){var r=new Matrix;r.reset();var s;s=(e,this._elem.finalTransform.mProp);s.applyToMatrix(r);if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,a=this._elem.hierarchy.length;for(i=0;i<a;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(r);return r.inversePoint(t)}return r.inversePoint(t)}function r(t){var e=new Matrix;e.reset();this._elem.finalTransform.mProp.applyToMatrix(e);if(this._elem.hierarchy&&this._elem.hierarchy.length){var r,s=this._elem.hierarchy.length;for(r=0;r<s;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}return function(s){var i=TransformExpressionInterface(s.transform);function a(t){o.mask=new MaskManagerInterface(t,s)}function n(t){o.effect=t}function o(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return o.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return i;case 4:case"ADBE Effect Parade":return o.effect}}o.toWorld=t;o.fromWorld=e;o.toComp=t;o.fromComp=r;o.sourceRectAtTime=s.sourceRectAtTime.bind(s);o._elem=s;Object.defineProperty(o,"hasParent",{get:function(){return!!s.hierarchy}});Object.defineProperty(o,"parent",{get:function(){return s.hierarchy[0].layerInterface}});Object.defineProperty(o,"rotation",{get:function(){return i.rotation}});Object.defineProperty(o,"scale",{get:function(){return i.scale}});Object.defineProperty(o,"position",{get:function(){return i.position}});Object.defineProperty(o,"anchorPoint",{get:function(){return i.anchorPoint}});Object.defineProperty(o,"transform",{get:function(){return i}});Object.defineProperty(o,"width",{get:function(){if(0===s.data.ty)return s.data.w;return 100}});Object.defineProperty(o,"height",{get:function(){if(0===s.data.ty)return s.data.h;return 100}});Object.defineProperty(o,"source",{get:function(){return s.data.refId}});Object.defineProperty(o,"index",{get:function(){return s.data.ind}});Object.defineProperty(o,"_name",{value:s.data.nm});Object.defineProperty(o,"content",{get:function(){return o.shapeInterface}});Object.defineProperty(o,"active",{get:function(){return s.isVisible}});Object.defineProperty(o,"text",{get:function(){return o.textInterface}});o.registerMaskInterface=a;o.registerEffectsInterface=n;return o}}();var CompExpressionInterface=function(){return function(t){function e(e){var r=0,s=t.layers.length;while(r<s){if(t.layers[r].nm===e||t.layers[r].ind===e)return t.elements[r].layerInterface;r+=1}return{active:false}}Object.defineProperty(e,"_name",{value:t.data.nm});e.layer=e;e.pixelAspect=1;e.height=t.globalData.compSize.h;e.width=t.globalData.compSize.w;e.pixelAspect=1;e.frameDuration=1/t.globalData.frameRate;return e}}();var TransformExpressionInterface=function(){return function(t){function e(r){switch(r){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity}}Object.defineProperty(e,"rotation",{get:function(){return t.rotation}});Object.defineProperty(e,"scale",{get:function(){return t.scale}});Object.defineProperty(e,"position",{get:function(){return t.position}});Object.defineProperty(e,"xPosition",{get:function(){return t.xPosition}});Object.defineProperty(e,"yPosition",{get:function(){return t.yPosition}});Object.defineProperty(e,"anchorPoint",{get:function(){return t.anchorPoint}});Object.defineProperty(e,"opacity",{get:function(){return t.opacity}});Object.defineProperty(e,"skew",{get:function(){return t.skew}});Object.defineProperty(e,"skewAxis",{get:function(){return t.skewAxis}});return e}}();var ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){var e=0,r=this.compositions.length;while(e<r){if(this.compositions[e].data&&this.compositions[e].data.nm===t){this.compositions[e].prepareFrame&&this.compositions[e].prepareFrame(this.currentFrame);return this.compositions[e].compInterface}e+=1}}e.compositions=[];e.currentFrame=0;e.registerComposition=t;return e}}();var EffectsExpressionInterface=function(){var t={createEffectsInterface:e};function e(t,e){if(t.effects){var s=[];var i=t.data.ef;var a,n=t.effects.effectElements.length;for(a=0;a<n;a+=1)s.push(r(i[a],t.effects.effectElements[a],e,t));return function(e){var r=t.data.ef,i=0,a=r.length;while(i<a){if(e===r[i].nm||e===r[i].mn||e===r[i].ix)return s[i];i+=1}}}}function r(t,e,i,a){var n=[];var o,h=t.ef.length;for(o=0;o<h;o+=1)5===t.ef[o].ty?n.push(r(t.ef[o],e.effectElements[o],e.effectElements[o].propertyGroup,a)):n.push(s(e.effectElements[o],t.ef[o].ty,a,l));function l(t){return 1===t?p:i(t-1)}var p=function(e){var r=t.ef,s=0,i=r.length;while(s<i){if(e===r[s].nm||e===r[s].mn||e===r[s].ix)return 5===r[s].ty?n[s]:n[s]();s+=1}return n[0]()};p.propertyGroup=l;"ADBE Color Control"===t.mn&&Object.defineProperty(p,"color",{get:function(){return n[0]()}});Object.defineProperty(p,"numProperties",{get:function(){return t.np}});p.active=0!==t.en;return p}function s(t,e,r,s){function i(){if(10===e)return r.comp.compInterface(t.p.v);return ExpressionValue(t.p)}t.p.setGroupProperty&&t.p.setGroupProperty(s);return i}return t}();var MaskManagerInterface=function(){function t(t,e){this._mask=t;this._data=e}Object.defineProperty(t.prototype,"maskPath",{get:function(){this._mask.prop.k&&this._mask.prop.getValue();return this._mask.prop}});var e=function(e,r){var s=e;var i=r;var a=Array.apply(null,{length:e.viewData.length});var n,o=e.viewData.length;for(n=0;n<o;n+=1)a[n]=new t(e.viewData[n],e.masksProperties[n]);var h=function(t){n=0;while(n<o){if(e.masksProperties[n].nm===t)return a[n];n+=1}};return h};return e}();var ExpressionValue=function(){return function(t,e,r){var s,i;t.k&&t.getValue();var a,n,o;if(r){if("color"===r){n=4;s=Array.apply(null,{length:n});o=Array.apply(null,{length:n});for(a=0;a<n;a+=1)s[a]=o[a]=e&&a<3?t.v[a]*e:1;s.value=o}}else if("number"===typeof t.v||t.v instanceof Number){s=e?new Number(t.v*e):new Number(t.v);s.value=e?t.v*e:t.v}else{n=t.v.length;s=Array.apply(null,{length:n});o=Array.apply(null,{length:n});for(a=0;a<n;a+=1)s[a]=o[a]=e?t.v[a]*e:t.v[a];s.value=o}s.numKeys=t.keyframes?t.keyframes.length:0;s.key=function(e){return s.numKeys?t.keyframes[e-1].t:0};s.valueAtTime=t.getValueAtTime;s.propertyGroup=t.propertyGroup;return s}}();function SliderEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function AngleEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function ColorEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function PointEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function LayerIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function MaskIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function CheckboxEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(t,e,r){var s=t.ef;this.effectElements=[];var i,a=s.length;var n;for(i=0;i<a;i++){n=new GroupEffect(s[i],e,r);this.effectElements.push(n)}}function GroupEffect(t,e,r){this.dynamicProperties=[];this.init(t,e,this.dynamicProperties);this.dynamicProperties.length&&r.push(this)}GroupEffect.prototype.getValue=function(){this.mdf=false;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1){this.dynamicProperties[t].getValue();this.mdf=!!this.dynamicProperties[t].mdf||this.mdf}};GroupEffect.prototype.init=function(t,e,r){this.data=t;this.mdf=false;this.effectElements=[];var s,i=this.data.ef.length;var a,n=this.data.ef;for(s=0;s<i;s+=1)switch(n[s].ty){case 0:a=new SliderEffect(n[s],e,r);this.effectElements.push(a);break;case 1:a=new AngleEffect(n[s],e,r);this.effectElements.push(a);break;case 2:a=new ColorEffect(n[s],e,r);this.effectElements.push(a);break;case 3:a=new PointEffect(n[s],e,r);this.effectElements.push(a);break;case 4:case 7:a=new CheckboxEffect(n[s],e,r);this.effectElements.push(a);break;case 10:a=new LayerIndexEffect(n[s],e,r);this.effectElements.push(a);break;case 11:a=new MaskIndexEffect(n[s],e,r);this.effectElements.push(a);break;case 5:a=new EffectsManager(n[s],e,r);this.effectElements.push(a);break;case 6:a=new NoValueEffect(n[s],e,r);this.effectElements.push(a);break}};var bodymovinjs={};function setLocationHref(t){locationHref=t}function play(t){animationManager.play(t)}function pause(t){animationManager.pause(t)}function togglePause(t){animationManager.togglePause(t)}function setSpeed(t,e){animationManager.setSpeed(t,e)}function setDirection(t,e){animationManager.setDirection(t,e)}function stop(t){animationManager.stop(t)}function moveFrame(t){animationManager.moveFrame(t)}function searchAnimations(){true===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function registerAnimation(t){return animationManager.registerAnimation(t)}function resize(){animationManager.resize()}function start(){animationManager.start()}function goToAndStop(t,e,r){animationManager.goToAndStop(t,e,r)}function setSubframeRendering(t){subframeEnabled=t}function loadAnimation(t){true===standalone&&(t.animationData=JSON.parse(animationData));return animationManager.loadAnimation(t)}function destroy(t){return animationManager.destroy(t)}function setQuality(t){if("string"===typeof t)switch(t){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10;break}else!isNaN(t)&&t>1&&(defaultCurveSegments=t);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!==typeof navigator}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}bodymovinjs.play=play;bodymovinjs.pause=pause;bodymovinjs.setLocationHref=setLocationHref;bodymovinjs.togglePause=togglePause;bodymovinjs.setSpeed=setSpeed;bodymovinjs.setDirection=setDirection;bodymovinjs.stop=stop;bodymovinjs.moveFrame=moveFrame;bodymovinjs.searchAnimations=searchAnimations;bodymovinjs.registerAnimation=registerAnimation;bodymovinjs.loadAnimation=loadAnimation;bodymovinjs.setSubframeRendering=setSubframeRendering;bodymovinjs.resize=resize;bodymovinjs.start=start;bodymovinjs.goToAndStop=goToAndStop;bodymovinjs.destroy=destroy;bodymovinjs.setQuality=setQuality;bodymovinjs.inBrowser=inBrowser;bodymovinjs.installPlugin=installPlugin;bodymovinjs.__getFactory=getFactory;bodymovinjs.version="4.13.0";function checkReady(){if("complete"===document.readyState){clearInterval(readyStateCheckInterval);searchAnimations()}}function getQueryVariable(t){var e=queryString.split("&");for(var r=0;r<e.length;r++){var s=e[r].split("=");if(decodeURIComponent(s[0])==t)return decodeURIComponent(s[1])}}var standalone="__[STANDALONE]__";var animationData="__[ANIMATIONDATA]__";var renderer="";if(standalone){var scripts=document.getElementsByTagName("script");var index=scripts.length-1;var myScript=scripts[index]||{src:""};var queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return bodymovinjs})}}]);