/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[52],{1035:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(92),i(101),i(216),i(130),i(160),i(195),i(91),i(1036),i(983)],a=function(t,e,i,n,a,s,o,r,l,h){var c;t.directive("hypercubeDataItem",function(){return{restrict:"A",template:l,replace:true}});c=e.extend({init:function t(e,i,n){this._props=e;this._app=i;this._hyperCubePath=n;this.libraryTitles={};this.cachingAlternativeTitleRetriever=h.create()},setProperties:function t(e){this._props=e;this.cachingAlternativeTitleRetriever.resetTitles()},updateAlternativeItem:function t(e,n,a,r,l){var h=i.getValue(this._props,r,[]),c=i.getValue(this._props,a,[]),u=h[n.index];if(n.selected)return;n.original&&(u=i.getValue(this._props,a,[])[n.index]);u.qAttributeExpressions=s.moveById(e.data.qAttributeExpressions,u.qAttributeExpressions,s.IDMAP.COLOR_BY_EXPRESSION);var d,p,f,m;if(l)for(d=0;d<l.length;d++){m=l[d];p=i.getValue(c[e.index],m.path,[]);f=i.getValue(h[n.index],m.path,[]);p&&p.hasOwnProperty(m.property)&&f&&f.hasOwnProperty(m.property)&&(f[m.property]=p[m.property])}h.splice(n.index,1,c[e.index]);c.splice(e.index,1,u);o.colorByUpdater(this._props,"qHyperCubeDef.")},getDimensionOptions:function t(e,i,a,s,o){var r=this;return e.concat(i).filter(function(t){return t.qDef.cId===a.qDef.cId||!n.getDimensionLayout(t.qDef.cId,s,r._hyperCubePath)}).map(function(t){var n=r.cachingAlternativeTitleRetriever.getCachedDimensionTitle(t);r.cachingAlternativeTitleRetriever.getDimensionTitle(t,r._app).then(function(t){n=t});return{id:t.qDef.cId,index:-1!==e.indexOf(t)?e.indexOf(t):i.indexOf(t),original:-1!==e.indexOf(t),ref:"dimensions",selected:t.qDef.cId===a.qDef.cId,hasIcon:o,title:function t(){return n}}})},getMeasureOptions:function t(e,i,a,s,o){var r=this;return e.concat(i).filter(function(t){return t.qDef.cId===a.qDef.cId||!n.getMeasureLayout(t.qDef.cId,s,r._hyperCubePath)}).map(function(t){var n=r.cachingAlternativeTitleRetriever.getCachedMeasureTitle(t);r.cachingAlternativeTitleRetriever.getMeasureTitle(t,r._app).then(function(t){n=t});return{id:t.qDef.cId,index:-1!==e.indexOf(t)?e.indexOf(t):i.indexOf(t),original:-1!==e.indexOf(t),ref:"measures",selected:t.qDef.cId===a.qDef.cId,hasIcon:o,title:function t(){return n}}})},getTitle:function t(e,i){var n=e.qLibraryId,s=this,o=r.get(i?"Object.ErrorMessage.MissingDimension":"Object.ErrorMessage.MissingMeasure");function l(){return i?s._app.getDimensionList().then(function(t){return a.findLibraryDimension(n,t)}):s._app.getMeasureList().then(function(t){return a.findLibraryMeasure(n,t)})}if(n){if("undefined"!==typeof this.libraryTitles[n])return null===this.libraryTitles[n]?o:"string"!==typeof this.libraryTitles[n]?"":this.libraryTitles[n];this.libraryTitles[n]=l().then(function(t){if(t){s.libraryTitles[n]=t.qData.title;return s.libraryTitles[n]}s.libraryTitles[n]=null;return o});return this.libraryTitles[n]}return i?e.qDef.qFieldLabels[0]||e.qDef.qFieldDefs[0]:e.qDef.qLabel||e.qDef.qDef}});return c}.apply(e,n),void 0!==a&&(t.exports=a))},1036:function(t,e){t.exports='<li class="em-item lui-list__item" qva-activate="alternativeItemClicked($event,item,alternative);">\n\t<i ng-if="alternative.hasIcon" class="em-item-icon lui-icon lui-icon--tick lui-list__aside" ng-class="{\'em-invisible\': !alternative.selected}"></i>\n\t<span class="lui-list__text lui-list__text--ellipsis" qva-direction x-dir-text="{{alternative.title()}}"  title="{{alternative.title()}}">{{alternative.title()}}&nbsp;</span>\n</li>'},1037:function(t,e,i){"use strict";var n,a;!(n=[i(90)],a=function(t){function e(t,e){var i=e.length,n,a,s,o,r;if(t){a=!t.autoMinMax&&("min"===t.minMax||"minMax"===t.minMax)&&null!==t.min&&!Number.isNaN(+t.min);s=!t.autoMinMax&&("max"===t.minMax||"minMax"===t.minMax)&&null!==t.max&&!Number.isNaN(+t.max)}o=Number.MAX_VALUE;r=-Number.MAX_VALUE;for(n=0;n<i;n++){o=Math.min(o,e[n].qMin);r=Math.max(r,e[n].qMax);if(o<=0&&r>=0)return true}o=a?t.min:o;r=s?t.max:r;return o<=0&&r>=0}var i={applyDisclaimerAttributes:function i(n,a,s,o,r){a||(a={});var l=t.extend({limitedData:false,hasNegativeOrZeroData:false,onlyNegativeOrZero:false,onlyNanData:false,onlyNullColor:false,hasDataRangeIncludingZero:false},a);t.extend(a,l);a.noDataExist=r.qHyperCube.qSize.qcy*r.qHyperCube.qSize.qcx===0;if(a.noDataExist){s.toggleClass("qv-viz-with-disclaimer",false);return a}n=n||{};n.overlay=n.overlay||false;n.supportNegative=void 0===n.supportNegative||n.supportNegative;n.supportRangeOverZero=void 0===n.supportRangeOverZero||n.supportRangeOverZero;var h=t.getValue(r,"qHyperCube.qDataPages.0.qArea.qWidth",0)&&t.getValue(r,"qHyperCube.qDataPages.0.qArea.qHeight",0);h&&true!==n.explicitLimitedData?a.limitedData=!n.paging&&r.qHyperCube.qSize.qcy>r.qHyperCube.qDataPages[0].qMatrix.length:a.limitedData=true===n.explicitLimitedData;a.hasNegativeOrZeroData=!n.supportNegative&&r.qHyperCube.qMeasureInfo.some(function(t){return t.qMin<=0});a.onlyNegativeOrZero=!n.supportNegative&&r.qHyperCube.qMeasureInfo.every(function(t){return t.qMax<=0&&t.qMax>=t.qMin})||0===r.qHyperCube.qSize.qcy;a.onlyNanData=r.qHyperCube.qMeasureInfo.every(function(t){return t.qMax<t.qMin||"NaN"===t.qMax});a.hasDataRangeIncludingZero=!n.supportRangeOverZero&&e(r.measureAxis,r.qHyperCube.qMeasureInfo,r.lineType);if(a.onlyNegativeOrZero&&n.overlay||!(a.limitedData||a.hasNegativeOrZeroData&&!n.supportNegative||a.hasDataRangeIncludingZero||a.onlyNullColor)){s.toggleClass("qv-viz-with-disclaimer",false);o.options.showDisclaimerStar=false}else{s.toggleClass("qv-viz-with-disclaimer",n.bottom);o.options.showDisclaimerStar=true}return a}};return i}.apply(e,n),void 0!==a&&(t.exports=a))},1050:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(89),i(1238),i(203),i(1129),i(1130),i(1131),i(1132),i(100),i(1133),i(1136)],a=function(t,e,i,n,a,s,o,r,l,h){var c,u=3;t.directive("qvaSimpleDataTitle",[function(){return{replace:true,template:l,restrict:"E",scope:{label:"=",locked:"=?",options:"="},link:function t(i){i.lockedTooltip=e.get("Tooltip.selections.locked")}}}]);t.directive("qvaDefaultDataTitle",[function(){return{replace:true,template:r,restrict:"E",scope:{data:"=",type:"=?",model:"=?",disabled:"=?",dock:"=?",options:"="}}}]);function d(t){this.relevantSize=this._titleFontHeight+u+(t?this._extraSizeWhenAlternatives:0)}function p(t,e){return"normal "+parseInt(t)*e+"px 'QlikView Sans'"}function f(){this._innerScope.options.parentType=this.options.parentType;var t=h.initializeService("object."+this.options.parentType);var e=t.layoutMap[this._layoutMode]||"medium";var i="full"===e?this._layoutMode:"medium";var n=t.getStyle("axis.title","fontSize");var s=p(t.scaleFontSize(n,i),this._innerScope.fontScale);this._innerScope.fontStyle.font=s;this._innerScope.fontStyle.color=t.getStyle("axis.title","color");this._titleFontHeight=a.getFontHeight(s)}c=n.extend("DataTitle",{init:function t(){var e=Array.prototype.slice.call(arguments),i=this;e.push(o);this._super.apply(this,e);this._showTitle=true;this._innerScope.fontScale=1;this._currentDrillDownLevels=[];this._innerScope.disabled=true;this._selectionsEnabled=true;this._innerScope.fontStyle={font:"12px 'QlikView Sans'"};f.call(this);this._extraSizeWhenAlternatives=10;this.drillUpRef=this._innerScope.$on("drill-up",function(t,e,n){i._currentDrillDownLevels[e]-n>0&&i.fire("drill-up",[t,e,i._currentDrillDownLevels[e]-n])})},calculateRelevantSize:function t(){this._super();f.call(this);d.call(this,this._hasAlternatives)},setShowStrategy:function t(e){this._showTitle=["all","title"].contains(e)},setDock:function t(e){this._super(e);this._innerScope.direction="right"===e?"top-to-bottom":"left"===e?"bottom-to-top":"";this._innerScope.dock=e},setType:function t(e){this._innerScope.type=e},setModel:function t(e){this._innerScope.model=e},setSelectionsEnabled:function t(e){this._selectionsEnabled=e;this._changed=true;this.invalidateProperties("dataTitle.setSelectionsEnabled")},setData:function t(e){this._super(e);if(!e)return;var n=this;var a=this._innerScope.model;if(!a||a.layout&&!!a.layout.snapshotData){n._changed=true;return i.resolve()}return s.modelHasAlternatives(this._innerScope.model,this._innerScope.type).then(function(t){n._hasAlternatives=t;n._changed=true;return n.invalidateProperties("dataTitle.setData")})},_updateProperties:function t(){this._super();if(this._changed&&this._data){var e=this._data;if(e.qHyperCube&&this._innerScope.type){e=s.getTitleDataFromHyperCube(e.qHyperCube,this._innerScope.type,this._selectionsEnabled);this._currentDrillDownLevels=e.map(function(t){return t.currentDrillDownLevels})}if(!this._innerScope)return;e.forEach(function(t){t.hasAlternatives=this._hasAlternatives},this);this._innerScope.titles=e;this._innerScope.$broadcast("datachanged");s.setWrapperStyle(this._innerScope.fontStyle,this._innerContainer,this._innerScope.direction,this._innerScope.titles)}this._changed=false},isVisible:function t(){return this._super.apply(this,arguments)&&this._showTitle},on:function t(){this._innerScope.disabled=false},off:function t(){this._innerScope.disabled=true},paint:function t(){this._innerScope.visible=true;this._innerScope.fontScale=this.chartScale;f.call(this);this._innerScope.$digest();s.setWrapperStyle(this._innerScope.fontStyle,this._innerContainer,this._innerScope.direction,this._innerScope.titles)},release:function t(){this._super();this.drillUpRef()},clear:function t(){this._super();this._innerScope.visible=false}});return c}.apply(e,n),void 0!==a&&(t.exports=a))},1126:function(t,e,i){"use strict";var n,a;!(n=[i(11),i(1127),i(180),i(1171),i(410),i(1050),i(1138)],a=function(t,e,i,n,a,s,o){var r;r=e.extend({init:function e(r,l,h,c,u){var d=t.extend(true,{components:{grid:{show:true,dock:"center",showFlag:i.prototype.ShowFlags.XSMALL,clazz:o},refLines:{clazz:n},colorLegend:{show:true,order:4,reductionOrder:1,dock:"right",relevantSize:126,showFlag:i.prototype.ShowFlags.MEDIUM},xAxis:{show:true,order:1,dock:"bottom",relevantSize:120,showFlag:i.prototype.ShowFlags.XSMALL,clazz:a},yAxis:{show:true,order:1,dock:"left",relevantSize:90,reductionOrder:2,showFlag:i.prototype.ShowFlags.XSMALL,clazz:a},yAxisTitle:{show:true,order:1.1,dock:"left",relevantSize:30,reductionOrder:1,showFlag:i.prototype.ShowFlags.SMALL,clazz:s},xAxisTitle:{show:true,order:1.1,dock:"bottom",relevantSize:30,reductionOrder:1,showFlag:i.prototype.ShowFlags.SMALL,clazz:s}}},h||{});this._super(r,l,d,c,u)},getVerticalComponents:function t(){var e=this._super();if(this._data&&this.components){if(this.components.xAxis&&this.components.xAxis.isVertical()&&this._data.xAxis){e.push({comp:this.components.xAxis,dock:this._data.xAxis.dock});this.components.xAxisTitle&&e.push({comp:this.components.xAxisTitle,dock:this._data.xAxis.dock})}if(this.components.yAxis&&this.components.yAxis.isVertical()&&this._data.yAxis){e.push({comp:this.components.yAxis,dock:this._data.yAxis.dock});this.components.yAxisTitle&&e.push({comp:this.components.yAxisTitle,dock:this._data.yAxis.dock})}}return e},_updateData:function t(e,i){this._super.apply(this,[].slice.call(arguments));this.updateDataArea(e,i);this.updateAxis(e,i);this.updateGrid(e,i);this.updateRefLines(e,i);this.updateVerticalComponentsDock()},updateDataArea:function t(e,i){var n,a;for(n in i.axes){a=i.axes[n];a.component.setDataIndices(a.dataIndices||[a.dataIndex||0]);a.component.setCurrentDataIndices(a.currentDataIndices||a.dataIndices||[a.dataIndex||0])}},setAxisDataRange:function t(e,i,n,a,s,o){var r,l;if(null!==a&&null!==s||null===a&&null===s){r=n;l=i}else if(null!==a&&a<=n){r=a-o;l=i}else if(null!==s&&s>=i){r=n;l=s+o}else{r=n;l=i}e.setDataRange(r,l);this.components.miniChart&&this.components.miniChart.components.measureAxis.setDataRange(r,l)},updateAxis:function t(e,i){var n,a=i.axes,s=this.components.miniChart,o,r;for(n in i.axes){o=a[n];o.component.setTitle(o.title);o.component.setShowStrategy(o.data.show);o.component.setLabelMode(o.data.label);o.component.setLockedInfo&&o.component.setLockedInfo(e.qHyperCube.qDimensionInfo.map(function(t){return true===t.qLocked}));if(o.component.setPlotMin&&!o.component.isDimension){r=this.getAxisOptions(o);o.component.setPlotMin(r.min);o.component.setPlotMax(r.max);o.component.setTickMultiplier(o.data.spacing);o.component.setLogScale(o.data.logarithmic);if(s&&s.components[n]){r=this.getAxisOptions(o);s.components[n].setPlotMin(r.min);s.components[n].setPlotMax(r.max)}}o.component.isVertical()?o.component.setDock("far"===o.data.dock?"right":"left"):o.component.setDock("far"===o.data.dock?"top":"bottom")}for(n in i.axisTitles){o=i.axisTitles[n];o.component.setShowStrategy(o.data.show);o.component.isVertical()?o.component.setDock("far"===o.data.dock?"right":"left"):o.component.setDock("far"===o.data.dock?"top":"bottom")}},getAxisOptions:function t(e){if(!e||!e.data)return;return e.data.autoMinMax?{min:null,max:null}:{min:["min","minMax"].contains(e.data.minMax)?Number(e.data.min):null,max:["max","minMax"].contains(e.data.minMax)?Number(e.data.max):null}},updateGrid:function t(e,i){if(!this.components.grid)return;var n,a;if(e.gridLine&&"number"===typeof e.gridLine.spacing){a=e.gridLine.auto?2:e.gridLine.spacing;for(n in i.axes)i.axes[n].component.setSpacingMode&&i.axes[n].component.setSpacingMode(a)}},updateRefLines:function t(e,i){var n,a=i.refLineLabels,s=[],o=[];for(n in a){if(!a[n].component)continue;a[n].component.setData(a[n].data);a[n].component.setAxis(a[n].axis);a[n].component.setDock(a[n].axis.getOppositeDock());o.push(a[n].axis);s.push(a[n].data)}if(i.refLines&&i.refLines.component){i.refLines.component.setAxes(o);i.refLines.component.setData(s)}}});return r}.apply(e,n),void 0!==a&&(t.exports=a))},1129:function(t,e,i){"use strict";var n,a;!(n=[i(291),i(89)],a=function(t,e){var i={hasAlternatives:s,getTitlesApproxWidth:r};function n(t,e,i){var n=[],a="dimension"===e?t.qDimensionInfo:t.qMeasureInfo,s=false,o,r,l;if(!e)return;for(l=0;l<a.length;l++){o=a[l];s=o.qGroupFallbackTitles&&o.qGroupFallbackTitles.length>1;r=s?o.qGroupFallbackTitles.slice(0,o.qGroupPos+1):[o.qFallbackTitle];n.push({labels:r,label:r[r.length-1],locked:o.qLocked&&i,isDrill:s&&i,currentDrillDownLevels:o.qGroupPos,wrapperStyle:{},index:l})}return n}function a(t,n){if(!(t&&t.getProperties))return e.resolve();var a="dimension"===n?"qDimensions":"qMeasures",s=t.getProperties().then(function(e){if(e.qExtendsId)return t.app.getObject(e.qExtendsId).then(function(t){return t.getProperties()});return e});return s.then(function(t){return i.hasAlternatives(t.qHyperCubeDef&&t.qHyperCubeDef.qLayoutExclude,a)})}function s(t,e){return t&&t.qHyperCubeDef&&t.qHyperCubeDef[e].length>0}function o(t,e,n,a){if(!e.width())return;if("top-to-bottom"===n||"bottom-to-top"===n){t.width=e.height();t.height=e.width();if("top-to-bottom"===n){t.marginTop=-t.width+t.height;t.marginLeft=t.height}else{t.marginTop=t.width+t.height;t.marginLeft=0}}else{t.width=e.width();t.height=e.height();t.marginLeft=0;t.marginTop=0}var s=a?a.map(function(t){return t.label}):[],o=i.getTitlesApproxWidth(s,t.font);if(o>t.width){t.justifyContent="flex-start";t.minWidth=70}else{t.justifyContent="center";t.minWidth="auto"}}function r(e,i){var n=0;e.forEach(function(e){"string"===typeof e&&(n+=t.getTextWidth(e,i))});return n||null}return{getTitleDataFromHyperCube:n,modelHasAlternatives:a,setWrapperStyle:o,getTitlesApproxWidth:r,hasAlternatives:s}}.apply(e,n),void 0!==a&&(t.exports=a))},1130:function(t,e){t.exports='<div ng-show="visible"\n     class="qva-chart-data-title">\n     <div class="qva-chart-data-title-rotate" ng-style="fontStyle" ng-class="direction" qva-direction x-dir-setting="{{options.direction}}">\n          <div class="qva-chart-data-title-align ellips-text">\n               <div class="qva-chart-data-title-wrapper ellips-text" ng-repeat-start="titleData in titles" ng-style="titleData.wrapperStyle" >\n                    <qva-breadcrumb-bar ng-if="titleData.isDrill" data="titleData" model="model" disabled="disabled || object.selectionsApi.active" type="type" dock="dock" column-index="$index" options="options"></qva-breadcrumb-bar>\n                    <qva-default-data-title ng-if="!titleData.isDrill" data="titleData" model="model" disabled="disabled || object.selectionsApi.active" type="type" dock="dock" options="options"></qva-default-data-title>\n               </div>\n               <span ng-repeat-end ng-if="!$last">, &nbsp;</span>\n          </div>\n\n     </div>\n</div>\n'},1131:function(t,e){t.exports='<div class="default-data-title-wrapper ellips-text">\n     <qva-simple-data-title ng-if="!data.hasAlternatives" label="data.label" locked="data.locked" options="options"></qva-simple-data-title>\n     <qva-dropdown-data-title ng-if="data.hasAlternatives" data="data" model="model" disabled="disabled" type="type" dock="dock" options="options"></qva-dropdown-data-title>\n</div>'},1132:function(t,e){t.exports='<div class="chart-data-title ellips-text" qva-direction x-dir-text="{{label}}" x-dir-setting="{{options.direction}}" >\n     <i ng-if="locked" class="lui-icon lui-icon--lock" title="{{lockedTooltip}}"></i>\n     <span class="chart-data-title-label" title="{{label}}" qva-direction x-dir-text="{{label}}" x-dir-setting="{{options.direction}}">{{label}}</span>\n</div>'},1133:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(90),i(1134),i(1135),i(400),i(376),i(1035),i(101),i(89),i(97),i(315)],a=function(t,e,i,n,a,s,o,r,l,h){var c,u;c={template:n,controller:["$scope",function(t){t.position||(t.position="right");var e=new o(t.args.effectiveProperties,t.args.model.app),i=new s(t.args.model);t.alternativeItemClicked=function(n,a,s){n.stopPropagation();e.updateAlternativeItem(a,s,t.definition.items[s.ref].ref,t.definition.items[s.ref].alternativeRef,[{path:"qDef",property:"series"}]);i.saveSoftProperties(t.args.prevEffectiveProperties,t.args.effectiveProperties);t.closePopover()}}],scope:{alignTo:"=",position:"=",args:"=",definition:"=",item:"=",type:"=",closePopover:"=",qvaOutsideIgnoreFor:"=",options:"="}};function d(t){var e={left:"right",right:"left",top:"bottom",bottom:"top"};return e[t]}t.directive("qvaDropdownDataTitle",[function(){return{replace:true,template:i,restrict:"E",scope:{model:"=",type:"=",data:"=",disabled:"=",dock:"=",options:"="},link:function i(n,s){var p=t.getService("$cacheFactory"),f=p.get("em-object");var m={},x=n.model,_=new o(null,x.app);n.closePopover=function(){if(!n.isMenuOpen)return;n.isMenuOpen=false;if(u){u.close();u=null}};n.openAlternativePopover=function(){var e=d(n.dock);if(n.disabled)return;if(n.isMenuOpen){n.closePopover();return}n.isMenuOpen=true;u=t.getService("luiPopover").show({template:c.template,controller:c.controller,input:n.popoverSettings,alignTo:s[0],dock:e,variant:"inverse",closeOnOutside:true,closeOnEscape:true,outsideIgnore:"dataTitle-"+n.$id});u.closed.then(function(){n.isMenuOpen=false})};n.refreshItems=function(){l.all({effectiveProperties:x.getEffectiveProperties(),properties:x.getProperties().then(function(t){if(t.qExtendsId)return x.app.getObject(t.qExtendsId).then(function(t){return t.getProperties()});return t}),layout:x.getLayout()}).then(function(t){if(n.destroyed)return;m.args={layout:t.layout,model:x,properties:t.properties,effectiveProperties:e.extend(true,{},t.effectiveProperties),prevEffectiveProperties:e.extend(true,{},t.effectiveProperties),cache:f};m.data=t.effectiveProperties;m.definition=a.data;m.item=n.getAlternativeItem(m);n.popoverSettings={args:m.args,item:m.item,type:m.type,definition:m.definition,closePopover:n.closePopover,qvaOutsideIgnoreFor:"dataTitle-"+n.$id,options:n.options};n.isMenuOpen&&n.closePopover()})};n.refreshItems();n.$on("datachanged",function(){n.refreshItems()});n.getAlternativeItem=function(t){var e,i,a,s,o=n.data.index,l;if("dimension"===n.type){l=t.data.qHyperCubeDef.qDimensions[o];s=_.getDimensionOptions;a="dimensions"}else{l=t.data.qHyperCubeDef.qMeasures[o];s=_.getMeasureOptions;a="measures"}if(!l)return;e=r.getValue(t.data,t.definition.items[a].alternativeRef,[]);i=r.getValue(t.data,t.definition.items[a].ref,[]);e=s.call(_,i,e,l,t.args.layout,true);return{alternatives:e,index:Number.isNaN(+n.data.index)?0:n.data.index,data:l}};h.on("end",n.closePopover);n.$on("$destroy",function(){h.off("end",n.closePopover);n.destroyed=true;n.closePopover()})}}}])}.apply(e,n),void 0!==a&&(t.exports=a))},1134:function(t,e){t.exports='<div class="qva-dropdown-data-title">\n     <div class="dropdown-data-title-wrapper" ng-class="{\'interactive\' : !disabled, \'active\': isMenuOpen}" qva-activate="openAlternativePopover()" qva-outside-ignore-for="{{\'dataTitle-\' + $id}}">\n          <qva-simple-data-title locked="data.locked" label="data.label" options="options"></qva-simple-data-title>\n          <span class="dropdown-arrow"></span>\n     </div>\n</div>'},1135:function(t,e){t.exports='<lui-popover class="qva-alternative-data-picker"\n\t\t\t\t\t  align-to="alignTo"\n\t\t\t\t\t  position="position"\n\t\t\t\t\t  collision="\'flip fit\'"\n\t\t\t\t\t  height="\'auto\'"\n\t\t\t\t\t  on-close-view="closePopover();"\n\t\t\t\t\t  qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<div class="em-section-content em-alternative-data qva-alternative-data-picker-list" qva-direction x-dir-setting="{{options.direction}}">\n\t\t<div hypercube-data-item ng-repeat="alternative in item.alternatives" item="item"></div>\n\t</div>\n</lui-popover>\n'},1136:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(109),i(1137),i(100),i(91),i(96)],a=function(t,e,i,n,a){var s={};function o(t){var i=n.initializeService("object."+(t.options.parentType||""));var a=i.getStyle("","backgroundColor");var o=i.getStyle("axis.title","color");var r=i.getStyle("axis.title.disabled","color");s.crumbColor={color:o};s.crumbButtonColor={color:r};s.crumbButtonHoverColor={color:o};s.crumbButtonLockedColor={color:o};s.crumbButtonDisabledColor={color:r};var l=e.toRGBA(a,0);var h=e.toRGBA(a,1);t.faderStyle={background:"linear-gradient(to right, "+h+", "+l+")"}}t.directive("qvaBreadcrumbBar",function(){return{template:i,restrict:"E",replace:true,scope:{data:"=",type:"=?",model:"=?",disabled:"=?",dock:"=?",columnIndex:"=",options:"="},link:function t(e,i){e.hoverIndex=-1;e.height=i.width();e.singleLabelMode=true;e.onClick=function(t,i,n){if(!e.disabled&&!n){e.$emit("drill-up",e.columnIndex,i);t.stopImmediatePropagation()}};e.drillDownTooltip=a.get("Tooltip.dimensions.drilldown");e.getCrumbStyle=function(t,e,i){return i?s.crumbButtonDisabledColor:e?{}:t?s.crumbButtonHoverColor:s.crumbButtonColor};o(e)}}})}.apply(e,n),void 0!==a&&(t.exports=a))},1137:function(t,e){t.exports='<div class="qv-breadcrumb">\n\t<div class="qv-breadcrumb-container">\n\t\t<span class="lui-icon lui-icon--drill-down" title="{{drillDownTooltip}}"></span>\n\t\t\t<span class="crumb-item" ng-repeat="label in data.labels track by $index">\n\n\t\t\t\t<div ng-style="getCrumbStyle(hoverIndex === $index, $last, disabled)"\n\t\t\t\t\t ng-mouseover="hoverIndex = $index"\n\t\t\t\t\t ng-mouseout="hoverIndex = -1"\n\t\t\t\t\t ng-class="{\'crumb-button\' : !$last, \'disabled\' : disabled}"\n\t\t\t\t\t qva-activate="onClick($event, $index, $last)">\n\n\t\t\t\t\t<div ng-if="!$last" class="chart-data-title" >\n\t\t\t\t\t\t<span qva-direction x-dir-text="{{label}}" class="chart-data-title-label" title="{{label}}">{{label}}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<qva-default-data-title ng-if="$last" data="data" model="model" disabled="disabled" type="type" direction="direction" dock="dock" options="options"></qva-default-data-title>\n\n\t\t\t\t\t<span class="lui-icon lui-icon--triangle-left" ng-if="!$last"></span>\n\t\t\t\t\t<span class="lui-icon lui-icon--triangle-right" ng-if="!$last"></span>\n\t\t\t\t</div>\n\t\t\t</span>\n\t</div>\n</div>'},1138:function(t,e,i){"use strict";var n,a;!(n=[i(180),i(203),i(100)],a=function(t,e,i){var n,a={NONE:0,SPARSE:1,NORMAL:1,DENSE:3};function s(t,e,i,n,a,s,o){var r,l,h,c;if(o){r=0;l=n;h=t;c=t}else{r=t;l=t;h=0;c=a}return{type:"line",opacity:i,strokeWidth:s,shape:{x1:r,x2:l,y1:h,y2:c},stroke:e}}function o(t,e){var i=t.ticks,n=t.minorTicks,o=i?i.length:0,r=n?n.length:0,l=t.getSpacingMode()===a.DENSE||t.isDimension,h=t.getSpacingMode()===a.SPARSE?2:1,c=e.rect.height,u=e.rect.width,d=e.style,p,f,m,x=[],_;if(t.getSpacingMode()===a.NONE||!i)return[];for(_=0;_<o;_+=1){f=i[_].position;p=i[_].value;m=i[_].opacity;_%h!==0&&0!==p||(0===p?x.push(s(f,d.zero.color,m,u,c,d.zero.width,t.isVertical())):x.push(s(f,d.major.color,m,u,c,d.major.width,t.isVertical())))}if(l&&n)for(_=0;_<r;_+=1){f=n[_].position;x.push(s(f,d.minor.color,1,u,c,d.minor.width,t.isVertical()))}return x}function r(t){return{ticks:{major:{color:t.getStyle("line.major","color")},minor:{color:t.getStyle("line.minor","color")},zero:{color:t.getStyle("line.highContrast","color")}}}}function l(){this.invalidateDisplay("Grid.setAxes")}n=t.extend("Grid",{init:function t(){this._super.apply(this,Array.prototype.slice.call(arguments));this._styleService=i.initializeService("object.grid");this._renderer=new e(this.container);this._renderer.edgeBleed={top:1,left:1,bottom:0,right:0};this._$renderAreaWrap.addClass("qv-chart-component-grid");this.renderers={gridlines:this._renderer}},afterRenderLines:function t(){},setAxes:function t(e,i){if(this._primaryHorizontalAxis!==e){this._primaryHorizontalAxis&&this._primaryHorizontalAxis.stopListen("changed",l,this);this._primaryHorizontalAxis=e;this._primaryHorizontalAxis&&this._primaryHorizontalAxis.listen("changed",l,this)}if(this._primaryVerticalAxis!==i){this._primaryVerticalAxis&&this._primaryVerticalAxis.stopListen("changed",l,this);this._primaryVerticalAxis=i;this._primaryVerticalAxis&&this._primaryVerticalAxis.listen("changed",l,this)}},hasValidData:function t(){return this._super()&&(this._primaryVerticalAxis||this._primaryHorizontalAxis)},paint:function t(e,i){this._super(e,i);var n=[];this._style=r(this._styleService);if(this._primaryVerticalAxis){this._primaryVerticalAxis.updateNow();n=o(this._primaryVerticalAxis,{rect:this.rect,style:this._style.ticks})}if(this._primaryHorizontalAxis){this._primaryHorizontalAxis.updateNow();n=n.concat(o(this._primaryHorizontalAxis,{rect:this.rect,style:this._style.ticks}))}this.afterRenderLines(n);this._renderer.shapes=n;this._renderer.render();return this},release:function t(){this._super();this._styleService=null;this._primaryHorizontalAxis&&this._primaryHorizontalAxis.stopListen("changed",null,this);this._primaryVerticalAxis&&this._primaryVerticalAxis.stopListen("changed",null,this)}});return n}.apply(e,n),void 0!==a&&(t.exports=a))},1139:function(t,e,i){"use strict";var n,a;!(n=[i(92),i(164),i(146),i(104),i(200),i(1140),i(256),i(232),i(96)],a=function(t,e,i,n,a,s,o,r,l){var h=22,c=200,u=1e-6;function d(t){t=Math.min(Math.max(t,this._minZoomLevel),this._maxZoomLevel);this._viewportProjection.setZoomLevel(t)}function p(t,e,i,n){var s,o,r,l,h,c=new a,u=i/n;r=e.x-t.x;l=e.y-t.y;s=this._localMatrix.clone().invert().transformPoint(t);c.translate(s.x,s.y);c.scale(u,u);c.translate(-s.x,-s.y);this._localMatrix=this._localMatrix.multiply(c);h=this._localMatrix.elements;this._localMatrix.translate(r/h[0][0],l/h[1][1]);m.call(this);c.identity();o=this._globalMatrix.clone().invert().transformPoint(t);c.translate(o.x,o.y);c.scale(u,u);c.translate(-o.x,-o.y);this._globalMatrix=this._globalMatrix.multiply(c);h=this._globalMatrix.elements;this._globalMatrix.translate(r/h[0][0],l/h[1][1])}function f(t){if(!this._setTransformOrigin){var e="top left";t.style["-webkit-transform-origin"]=e;t.style["-moz-transform-origin"]=e;t.style["-o-transform-origin"]=e;t.style["-ms-transform-origin"]=e;t.style["transform-origin"]=e;this._setTransformOrigin=true}}function m(){var t=this._localMatrix.elements,e="matrix("+t[0][0]+",0,0,"+t[1][1]+","+t[0][2]+","+t[1][2]+")";this.helpFunctions.setTransform(this._$element[0],e)}function x(t,e){this.helpFunctions.onInteractionStart();_.call(this,t,e)}function _(t,e){if(this._disableZoomOnMouseWheel)return;this._disableZoomOnMouseWheel=true;var i=this,n=new a,s;setTimeout(function(){i._disableZoomOnMouseWheel=false},i._mouseWheelTimeoutPeriod);if(this._zoomPanByWebkitTransform){var o;this._zooming=true;o=this._localMatrix.clone().invert().transformPoint(t);n.translate(o.x,o.y);n.scale(e,e);n.translate(-o.x,-o.y);this._localMatrix=this._localMatrix.multiply(n);m.call(this)}else A.call(this,t,e);if(!this._zoomCancelled){n.identity();s=this._globalMatrix.clone().invert().transformPoint(t);n.translate(s.x,s.y);n.scale(e,e);n.translate(-s.x,-s.y);this._globalMatrix=this._globalMatrix.multiply(n);this._updateCallback()}this._zoomCancelled=false}function v(){this._zooming=false;this.helpFunctions.onInteractionEnd()}function g(t,e){this.helpFunctions.onInteractionStart();y.call(this,t,e)}function y(t,e){var i;if(this._zoomPanByWebkitTransform){this._panning=true;i=this._localMatrix.elements;this._localMatrix.translate(t/i[0][0],e/i[1][1]);m.call(this)}else M.call(this,t,e);i=this._globalMatrix.elements;this._globalMatrix.translate(t/i[0][0],e/i[1][1]);this._updateCallback()}function b(){this._panning=false;this.helpFunctions.onInteractionEnd()}function M(t,e){this._viewportProjection.enabledChangeEvent=false;this.moveViewport(t,e);this._viewportProjection.enabledChangeEvent=true}function A(t,e){this._viewportProjection.enabledChangeEvent=false;this.zoomOnPixel(t,e);this._viewportProjection.enabledChangeEvent=true}var S=t.extend("PanZoomController",{init:function t(c,u,d,m){var M=this;this._minZoomLevel=-3;this._maxZoomLevel=h;this._interactionStarted=false;this._zoomPanByWebkitTransform=false;this._fractionalZoomMode=true;this._defaultScale=Math.pow(2,.5);this._invDefaultScale=1/this._defaultScale;this._mouseWheelTimeoutPeriod=50;this._viewportProjection=m||new s;this._viewportProjection.setMinZoomLevel(this._minZoomLevel);this._viewportProjection.setMaxZoomLevel(this._maxZoomLevel);this._localMatrix=new a;this._$element=c;this._offset=c.offset();this._startCallback=function(){u.start&&u.start(this._viewportProjection._transformMatrix)};this._updateCallback=function(){u.update&&u.update(this._viewportProjection._transformMatrix)};this._endCallback=function(){u.end&&u.end(this._viewportProjection._transformMatrix)};this._resetCallback=function(){u.reset&&u.reset(this._viewportProjection._transformMatrix)};this._enabled=true;this._defaultBounds=this._viewportProjection.getBoundingBox();this._dataBounds=d?new n(d.x,d.y,d.width,d.height):this._defaultBounds;this.helpFunctions={setTransform:function t(e,i){e.style["-webkit-transform"]=i;e.style["-moz-transform"]=i;e.style["-o-transform"]=i;e.style["-ms-transform"]=i;e.style.transform=i},onInteractionStart:function t(){if(M._interactionStarted)return;M._startCallback();M.reset();M._interactionStarted=true},onInteractionEnd:function t(){if(M._zooming||M._panning||M._pinching||!M._interactionStarted)return;M.helpFunctions.setTransform(M._$element[0],"matrix(1,0,0,1,0,0)");M._viewportProjection.enabledChangeEvent=false;M._viewportProjection.setTransformMatrix(M._globalMatrix);M._endCallback();M._viewportProjection.enabledChangeEvent=true;M._interactionStarted=false}};var A,S,w,D,P=false,C=this._$element[0],q=false;this.container=C;f.call(this,this._$element[0]);var L=function t(n){var a=e.getMouseWheelData(n.originalEvent),s,o,r,l;s=a.x-M._offset.left;o=a.y-M._offset.top;r=new i(s,o);l=a.delta>0?M._defaultScale:M._invDefaultScale;q?_.call(M,r,l):x.call(M,r,l);q=true;null!==D&&clearTimeout(D);D=setTimeout(function(){D=null;v.call(M);q=false},250)},T=function t(e,n){if(2===n.pagePoints.length){this.pinch={start:{},current:{}};this.pinch.start.point1=n.pagePoints[0];this.pinch.start.point2=n.pagePoints[1];n.centerPoint=new i((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2);n.scale=1;S={};S.x=(this.pinch.start.point1.x+this.pinch.start.point2.x)/2-M._offset.left;S.y=(this.pinch.start.point1.y+this.pinch.start.point2.y)/2-M._offset.top;w={x:n.centerPoint.x-M._offset.left,y:n.centerPoint.y-M._offset.top};M.helpFunctions.onInteractionStart();A=n.scale;S=w}else M.onPan("start",e,n);l.preventGestures(this.gestureHandler)},I=function t(e,n){if(2===n.pagePoints.length)if(this.pinch.start.point2){n.centerPoint||(n.centerPoint=new i((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2));this.pinch.current.point1=n.pagePoints[0];this.pinch.current.point2=n.pagePoints[1];this.startDistance=this.pinch.start.point2.distanceTo(this.pinch.start.point1);this.lastDistance=this.currentDistance;this.currentDistance=this.pinch.current.point2.distanceTo(this.pinch.current.point1);this.pinchLength=Math.abs(this.startDistance-this.currentDistance);this.scale=this.currentDistance/this.startDistance;n.scale=this.scale;n.delta=this.currentDistance-this.lastDistance;n.centerPoint.x=(this.pinch.current.point1.x+this.pinch.current.point2.x)/2;n.centerPoint.y=(this.pinch.current.point1.y+this.pinch.current.point2.y)/2;w={x:n.centerPoint.x-M._offset.left,y:n.centerPoint.y-M._offset.top};M._pinching=true;if(M._zoomPanByWebkitTransform){p.call(M,S,w,n.scale,A);A=n.scale}else{if(Math.abs(n.scale-A)>.1){_.call(M,w,n.scale-A+1);A=n.scale}y.call(M,w.x-S.x,w.y-S.y)}S=w}else this.pinch.start.point2=n.pagePoints[1];else M.onPan("update",e,n);l.preventGestures(this.gestureHandler)},z=function t(e,i){M._pinching=false;this._zoomPanByWebkitTransform||(this._zooming=false);M.onPan("end",e,i)},N=e.throttle(function(t){L(t)},20);this._eventHandlers=o.extend({preventDefault:true,mousewheel:function t(e){N(e)},swipe:{start:function t(e,i){T.call(this,e,i)},update:function t(e,i){I.call(this,e,i)},end:function t(e,i){z.call(this,e,i)}},swipetwo:{start:function t(e,i){T.call(this,e,i)},update:function t(e,i){I.call(this,e,i)},end:function t(e,i){z.call(this,e,i)}},tapthree:{end:function t(){M.zoomOnDataBounds();r.preventGestures(this)}},wheelswipe:{start:function t(e){M._panX=e.pageX;M._panY=e.pageY;P=false},update:function t(e){var i,n,a,s,o;i=e.pageX;n=e.pageY;a=i-M._panX;s=n-M._panY;o=P;!P&&(Math.abs(a)>3||Math.abs(s)>3)&&(P=true);if(P){M._panX=i;M._panY=n;o?y.call(M,a,s):g.call(M,a,s)}},end:function t(){P?b.call(M):M.zoomOnDataBounds();P=false}},active:function t(){return M._enabled}})},reset:function t(){this._localMatrix.identity();this._globalMatrix=this._viewportProjection.getTransformMatrix().clone();this._zoomPanByWebkitTransform&&this.helpFunctions.setTransform(this._$element[0],"matrix(1,0,0,1,0,0)")},setOffset:function t(e){this._offset=e},navigate:function t(e,i){var n=this,a;switch(e){case"resetZoom":n.zoomOnDataBounds();break;case"zoomIn":a=n.getZoomLevel();if(void 0===a||null===a||a===n._maxZoomLevel)return;x.call(n,{x:this._$element.width()/2,y:this._$element.height()/2},n._defaultScale);v.call(n);break;case"zoomOut":a=n.getZoomLevel();if(void 0===a||null===a||a===n._minZoomLevel)return;x.call(n,{x:this._$element.width()/2,y:this._$element.height()/2},n._invDefaultScale);v.call(n);break;case"navUp":g.call(n,0,c);b.call(n);break;case"navDown":g.call(n,0,-c);b.call(n);break;case"navLeft":g.call(n,c,0);b.call(n);break;case"navRight":g.call(n,-c,0);b.call(n);break;case"jumpTo":g.call(n,i.x,i.y);b.call(n);break;case"startAt":g.call(n,i.x,i.y);break;case"moveTo":y.call(n,i.x,i.y);break;case"endAt":b.call(n);break;default:break}},onPan:function t(e,i,n){var a=this;switch(e){case"start":g.call(a,n.swipe.deltaX,n.swipe.deltaY);break;case"update":y.call(a,n.swipe.curDeltaX,n.swipe.curDeltaY);break;case"end":b.call(a);break}},on:function t(){if(this._on)return;this._on=true;if(arguments.length)throw new Error("PanZoomController.on(): arguments has been deprecated");r.addInteraction(this._eventHandlers,this._$element[0],2,["tapthree","swipe","swipetwo","wheelswipe","mousewheel"])},off:function t(){this._on&&r.removeInteraction(this._eventHandlers);this._on=false},setMaxZoomLevel:function t(e){this._maxZoomLevel=e;this._viewportProjection&&this._viewportProjection.setMaxZoomLevel(e)},setMinZoomLevel:function t(e){this._minZoomLevel=e;this._viewportProjection&&this._viewportProjection.setMinZoomLevel(e)},setCenter:function t(e){this._viewportProjection&&this._viewportProjection.setDataCenter(e)},getCenter:function t(){if(this._viewportProjection)return this._viewportProjection.getDataCenter();return null},setZoomLevel:function t(e){if(Number.isNaN(+e)||!Number.isFinite(+e))return;Math.abs(e-Math.round(e))<u&&(e=Math.round(e));d.call(this,e)},getZoomLevel:function t(){if(this._viewportProjection)return this._viewportProjection.getZoomLevel();return 0},moveViewport:function t(e,n){var a=this._viewportProjection.getSize();this.setCenter(this._viewportProjection.invProject(new i(a.x/2-e,a.y/2-n)))},zoom:function t(e){if(e>0){var i=Math.log(e)/Math.LN2;Math.abs(i-Math.round(i))<u&&(i=Math.round(i));this.setZoomLevel(this.getZoomLevel()+i)}},zoomOnPixel:function t(e,i){var n=this.getZoomLevel(),a,s;if(n<=this._minZoomLevel&&i<=1||n>=this._maxZoomLevel&&i>=1){this._zoomCancelled=true;return}a=Math.pow(2,this._minZoomLevel-n);s=Math.pow(2,this._maxZoomLevel-n);i=Math.min(Math.max(i,a),s);this._viewportProjection.zoomOnPixel(e,i)},zoomOnDataRectangle:function t(e,i){this._viewportProjection.zoomOnDataRectangle(e,i)},zoomOnViewportRectangle:function t(e,i){var n=this._viewportProjection.fromViewportRectToDataRect(e);this.zoomOnDataRectangle(n,i)},setBounds:function t(e,i,a,s){if(Number.isNaN(+e)||Number.isNaN(+i)||Number.isNaN(+a)||Number.isNaN(+s))return;this._dataBounds=new n(e,i,a,s)},setBoundsRect:function t(e){if(!e||this._dataBounds&&this._dataBounds.equal(e))return;this._dataBounds=e.clone()},zoomOnDataBounds:function t(){var e=this._dataBounds&&!this._dataBounds.hasNaN()?this._dataBounds:this._defaultBounds;if(e){this.zoomOnDataRectangle(e,false);this._resetCallback();this._viewportProjection.fire("resetZoomFinished");return true}},setFractionalZoomMode:function t(e){this._fractionalZoomMode=e;this._defaultScale=this._fractionalZoomMode?Math.pow(2,.5):2;this._invDefaultScale=1/this._defaultScale;this._mouseWheelTimeoutPeriod=this._fractionalZoomMode?50:100;this._viewportProjection&&this._viewportProjection.setFractionalZoomMode(e)},getFractionalZoomMode:function t(){return this._fractionalZoomMode},setZoomPanByWebkitTransform:function t(e){this._zoomPanByWebkitTransform=e},getZoomPanByWebkitTransform:function t(){return this._zoomPanByWebkitTransform},release:function t(){this._viewportProjection=null;this._$element=null}});Object.defineProperties(S.prototype,{enabled:{set:function t(e){this._enabled=e},get:function t(){return this._enabled}}});return S}.apply(e,n),void 0!==a&&(t.exports=a))},1140:function(t,e,i){"use strict";var n,a;!(n=[i(1047),i(146),i(104),i(1141),i(200)],a=function(t,e,i,n,a){var s,o=22,r=1e-9,l=.001,h=new e(0,0),c=Math.log(2);function u(t){if(this._originalProjectedDataCenterIsZeroPoint)return t;return new e(t.x-this._originalProjectedDataCenter.x,t.y-this._originalProjectedDataCenter.y)}function d(t){if(this._originalProjectedDataCenterIsZeroPoint)return t;return new e(t.x+this._originalProjectedDataCenter.x,t.y+this._originalProjectedDataCenter.y)}function p(t,i){var n=Math.pow(2,i+8)/this._projectedDataSize;return new e(t.x*n,t.y*n)}function f(t,i){var n=Math.pow(2,i+8)/this._projectedDataSize;return new e(t.x/n,t.y/n)}function m(){if(!this._projection||!this._projectedDataBoundingBox)return;var t,e,i,n,a;(!this._currentProjectedDataDataCenter||this._projectionChanged||this._currentDataCenterChanged)&&(this._currentProjectedDataDataCenter=void 0===this._currentDataCenter?this._originalProjectedDataCenter:this._projection.project(this._currentDataCenter));this._transformMatrixForZoomLevel.identity();this._transformMatrixForZoomLevel.translate(this._viewportSize.x/2,this._viewportSize.y/2);this._mirrorYAxis&&this._transformMatrixForZoomLevel.scale(1,-1);t=Math.pow(2,this._zoomLevel+8)/this._projectedDataSize;this._transformMatrixForZoomLevel.scale(t,t);this._transformMatrixForZoomLevel.translate(-this._originalProjectedDataCenter.x,-this._originalProjectedDataCenter.y);e=this._transformMatrixForZoomLevel.transformPoint(this._originalProjectedDataCenter);i=this._transformMatrixForZoomLevel.transformPoint(this._currentProjectedDataDataCenter);n=e.x-i.x;a=e.y-i.y;this._transformMatrix.identity();this._transformMatrix.translate(n,a);this._transformMatrix.multiply(this._transformMatrixForZoomLevel.elements);this._invTransformMatrix=this._transformMatrix.clone();this._invTransformMatrix.invert();this._projectionChanged=false;this._currentDataCenterChanged=false;this.enabledChangeEvent&&this.fire("changed")}function x(){var t,e,n,a,s,o;t={x:this._boundingBox.x,y:this._boundingBox.y};e={x:this._boundingBox.x+this._boundingBox.width,y:this._boundingBox.y+this._boundingBox.height};n=this._projection.project(t);a=this._projection.project(e);s=Math.min(n.x,a.x);o=Math.min(n.y,a.y);this._projectedDataBoundingBox=new i(s,o,Math.abs(a.x-n.x),Math.abs(a.y-n.y));this._projectedDataSize=Math.max(this._projectedDataBoundingBox.width,this._projectedDataBoundingBox.height);this._originalProjectedDataCenter=this._projectedDataBoundingBox.getCenterPoint();this._originalProjectedDataCenterIsZeroPoint=0===this._originalProjectedDataCenter.x&&0===this._originalProjectedDataCenter.y}s=t.extend("ViewportProjection",{init:function t(){this._super();this._fractionalZoomMode=true;this._viewportSize=new e(256,256);this._zoomLevel=0;this._maxZoomLevel=o;this._minZoomLevel=0;this._translation=new e(0,0);this._unitProjection=new n;this._projection=this._unitProjection;this._originalProjectedDataCenter=new e(0,0);this._boundingBox=new i(0,0,256,256);x.call(this);this._originalProjectedDataCenterIsZeroPoint=true;this._transformMatrixForZoomLevel=new a;this._transformMatrix=new a;this._invTransformMatrix=new a;this.enabledChangeEvent=true;this._mirrorYAxis=false;this.helpFunctions={translateProjectedDataCenterToZeroPoint:u,invTranslateProjectedDataCenterToZeroPoint:d,scaleProjectedDataToZoomLevel:p,invScaleProjectedDataToZoomLevel:f,updateProjectedDataBoundingBox:x}},setProjection:function t(e){if(this._projection&&e&&this._projection.getProjectionType()===e.getProjectionType())return false;this._projection=e;this._projection||(this._projection=this._unitProjection);x.call(this);this._projectionChanged=true;m.call(this);return true},getProjection:function t(){return this._projection},getUnitProjection:function t(){return this._unitProjection},setBoundingBox:function t(e){if(this._boundingBox&&this._boundingBox.equal&&this._boundingBox.equal(e))return;this._boundingBox=new i(e.x,e.y,e.width,e.height);x.call(this);m.call(this)},getBoundingBox:function t(){return this._boundingBox},setSize:function t(i){if(this._viewportSize&&this._viewportSize.equal&&this._viewportSize.equal(i))return false;this._viewportSize=new e(i.x,i.y);m.call(this);return true},getSize:function t(){return this._viewportSize},setZoomLevel:function t(e){if(Number.isNaN(+e))return false;this._fractionalZoomMode||(e=Math.round(e));e=Math.max(Math.min(e,this._maxZoomLevel),this._minZoomLevel);Math.abs(e-this._minZoomLevel)<l?e=this._minZoomLevel:Math.abs(e-this._maxZoomLevel)<l&&(e=this._maxZoomLevel);if(Math.abs(this._zoomLevel-e)<l)return false;this._zoomLevel=e;m.call(this);return true},getZoomLevel:function t(){return this._zoomLevel},setDataCenter:function t(i){if(!i)return false;if(this._currentDataCenter&&this._currentDataCenter.closeTo&&this._currentDataCenter.closeTo(i,r))return false;this._currentDataCenterChanged=true;this._currentDataCenter=new e(i.x,i.y);m.call(this);return true},getDataCenter:function t(){return this._currentDataCenter},setFractionalZoomMode:function t(e){this._fractionalZoomMode=e},getFractionalZoomMode:function t(){return this._fractionalZoomMode},project:function t(e){var i,n;i=this._projection.project(e);n=this.transform(i);return n},fromDataRectToViewportRect:function t(n){var a,s,o;a=this.project(new e(n.x,n.y));s=this.project(new e(n.x+n.width,n.y+n.height));o=new i(a.x,a.y,s.x-a.x,s.y-a.y);return o},invProject:function t(e){var i,n;i=this.invTransform(e);n=this._projection.invProject(i);return n},fromViewportRectToDataRect:function t(n){var a,s,o;a=this.invProject(new e(n.x,n.y));s=this.invProject(new e(n.x+n.width,n.y+n.height));o=new i(a.x,a.y,s.x-a.x,s.y-a.y);return o},getDataRectOfViewport:function t(){var e,n,a;e=this.invProject(h);n=this.invProject(this._viewportSize);a=new i(e.x,e.y,n.x-e.x,n.y-e.y);return a},getDataRectOfViewportIfZoomOnADataRect:function t(e){var i=this.enabledChangeEvent;this.enabledChangeEvent=false;var n=this.getZoomLevel();var a=this.getDataCenter();this.zoomOnDataRectangle(e);var s=this.getDataRectOfViewport();this.setZoomLevel(n);this.setDataCenter(a);this.enabledChangeEvent=i;return s},transform:function t(i){var n=this._transformMatrix.transformPoint(i);return new e(n.x,n.y)},invTransform:function t(i){var n=this._invTransformMatrix.transformPoint(i);return new e(n.x,n.y)},fromDataPointToPixel:function t(i,n){var a=Math.pow(2,n+7),s,o,r,l;s=this._projection.project(i);o=u.call(this,s);r=p.apply(this,[o,n]);l=new e(r.x+a,a-r.y);return l},fromPixelToDataPoint:function t(i,n){var a=Math.pow(2,n+7),s,o,r,l;l=new e(i.x-a,a-i.y);r=f.apply(this,[l,n]);o=d.call(this,r);s=this._projection.invProject(o);return s},calculateZoomLevelForDataRectangle:function t(i){if(!i)return;var n,a,s,o,r,l,h,c,u,d;n=new e(i.x,i.y);a=new e(i.x+i.width,i.y+i.height);s=this.fromDataPointToPixel(n,0);o=this.fromDataPointToPixel(a,0);r=Math.abs(s.x-o.x);l=Math.abs(s.y-o.y);h=0===r?Number.MAX_VALUE:this._viewportSize.x/r;c=0===l?Number.MAX_VALUE:this._viewportSize.y/l;u=Math.min(h,c);if(u===Number.MAX_VALUE)return 20;d=Math.log(u)/Math.LN2;return d},calculateCenterPointForDataRectangle:function t(i){if(!i)return;var n,a,s,o,r,l;n=new e(i.x,i.y);a=new e(i.x+i.width,i.y+i.height);s=this.fromDataPointToPixel(n,0);o=this.fromDataPointToPixel(a,0);r=new e((s.x+o.x)/2,(s.y+o.y)/2);l=this.fromPixelToDataPoint(r,0);return l},moveViewport:function t(i,n){this.setDataCenter(this.invProject(new e(this._viewportSize.x/2-i,this._viewportSize.y/2-n)))},zoom:function t(e){e>0&&this.setZoomLevel(this.getZoomLevel()+Math.log(e)/Math.LN2)},zoomOnPixel:function t(e,i){if(i>0){var n,a,s;n=this.invTransform(e);s=Math.log(i)/Math.LN2;this.setZoomLevel(this.getZoomLevel()+s);a=this.transform(n);this.moveViewport(e.x-a.x,e.y-a.y)}},zoomOnDataRectangle:function t(e,i){if(!e)return;var n,a;n=this.calculateZoomLevelForDataRectangle(e);this._fractionalZoomMode||(n=i?Math.round(n):Math.floor(n));this.setZoomLevel(n);a=this.calculateCenterPointForDataRectangle(e);this.setDataCenter(a)},setMaxZoomLevel:function t(e){this._maxZoomLevel=e},setMinZoomLevel:function t(e){this._minZoomLevel=e},getTransformMatrix:function t(){return this._transformMatrix},setTransformMatrix:function t(i){var n,a,s;this._invTransformMatrix=i.clone().invert();n=Math.abs(i.elements[0][0]);a=Math.log(n*this._projectedDataSize)/c-8;s=this.invProject(new e(this._viewportSize.x/2,this._viewportSize.y/2));this.setZoomLevel(a);this.setDataCenter(s)},getInvTransformMatrix:function t(){return this._invTransformMatrix}});return s}.apply(e,n),void 0!==a&&(t.exports=a))},1141:function(t,e,i){"use strict";var n,a;!(n=[i(92)],a=function(t){var e;e=t.extend("UnitProjection",{init:function t(){},getProjectionType:function t(){return"Unit"},project:function t(e){return e},invProject:function t(e){return e}});return e}.apply(e,n),void 0!==a&&(t.exports=a))},1189:function(t,e,i){"use strict";var n,a;!(n=[i(11),i(89),i(91),i(1126),i(180),i(1172),i(1169),i(2179),i(2182),i(299),i(2183),i(2184),i(1628),i(2185),i(164),i(1037),i(189),i(246),i(1139),i(96),i(201),i(109),i(1323),i(2186)],a=function(t,e,i,n,a,s,o,r,l,h,c,u,d,p,f,m,x,_,v,g,y,b){var M,A=".scatterplot",S=1e3,w=6,D=8,P=1e-9,C=1e-5,q=1e-4;function L(){}function T(t){var e=[],i=t[0].qMatrix,n;e.push(i[0][0]);if(t[0].reformatted)for(n=1;n<i.length;n++)try{e.push(i[n][0])}catch(t){}else{for(n=1;n<i.length;n++)try{i[n][0].qText=JSON.parse(i[n][0].qText);e.push(i[n][0])}catch(t){}t[0].reformatted=true}return[e]}function I(){var t=this.selections&&this.selections.getActiveType();t&&!/^item/.test(t.getActiveMode())&&t.clearSelection();if(this.selections&&this.selections.enabled){this._selectionsOffDuringPanZoom=true;this.selections.enabled=false}if(this.tooltips){this.tooltips.clearSelection();this.tooltips.enabled=false}}function z(){if(this._selectionsOffDuringPanZoom){this._selectionsOffDuringPanZoom=false;this.selections&&(this.selections.enabled=true);this.tooltips&&(this.tooltips.enabled=true)}}function N(t,e,i){void 0===i&&(i=0);if(0===t)return Math.abs(e)<=i;return Math.abs(e/t-1)<=i}function k(t,e,i,n,a){void 0===a&&(a=0);var s=Math.abs(e-t)*a;return Math.abs(i-t)<=s&&Math.abs(n-e)<=s}function R(t,e,i,n,a,s,o){return this._axisInfoAtHomeState&&k(this._axisInfoAtHomeState.x.min,this._axisInfoAtHomeState.x.max,t,e,o)&&k(this._axisInfoAtHomeState.y.min,this._axisInfoAtHomeState.y.max,i,n,o)&&(void 0===a||void 0===s||N(this._axisInfoAtHomeState.x.size,a,o)&&N(this._axisInfoAtHomeState.y.size,s,o))}function H(){var t=this.components.xAxis,e=this.components.yAxis;this._isHomeState=R.call(this,t.getPlotMin(),t.getPlotMax(),e.getPlotMin(),e.getPlotMax(),t.getPlotSize(),e.getPlotSize(),C);if(!this.rect||!this._data)return;var i=this.rect.width>=400&&this.rect.height>=400,n=this._layoutMode>=3,a=this.inAnalysisState()||this.inEditState(),s=this._data.navigation?n&&!i:n,o=this._navigation&&(!this._isHomeState||a&&n&&!!this._data.navigation),r=this;this.$scope.navigationHomeOnly=s;this.$scope.navigationVisible=o;this.$scope.navigationDefaultPosition=this._isHomeState;this.yMirrorMode?this.$scope.navigationStyle={top:this.components.dataArea.rect.y+5+"px",left:this.components.dataArea.rect.x+17+"px"}:this.$scope.navigationStyle={top:this.components.dataArea.rect.y+5+"px",right:this.rect.width-this.components.dataArea.rect.x-this.components.dataArea.rect.width+5+"px"};setTimeout(function(){r.$scope.$apply()})}function j(){var t=this.components.dataArea,e=t._xAxis,i=t._yAxis;this._axisInfo.x.min=!this._data.xAxis.autoMinMax&&["min","minMax"].contains(this._data.xAxis.minMax)?Number(this._data.xAxis.min):null;this._axisInfo.x.max=!this._data.xAxis.autoMinMax&&["max","minMax"].contains(this._data.xAxis.minMax)?Number(this._data.xAxis.max):null;this._axisInfo.y.min=!this._data.yAxis.autoMinMax&&["min","minMax"].contains(this._data.yAxis.minMax)?Number(this._data.yAxis.min):null;this._axisInfo.y.max=!this._data.yAxis.autoMinMax&&["max","minMax"].contains(this._data.yAxis.minMax)?Number(this._data.yAxis.max):null;e.setPlotMin(this._axisInfo.x.min);e.setPlotMax(this._axisInfo.x.max);i.setPlotMin(this._axisInfo.y.min);i.setPlotMax(this._axisInfo.y.max)}function O(){var t=this.components.dataArea,e=t._xAxis,i=t._yAxis;this._axisInfoAtHomeState={x:{size:e.getPlotSize(),max:e.getPlotMax(),min:e.getPlotMin()},y:{size:i.getPlotSize(),max:i.getPlotMax(),min:i.getPlotMin()}}}function B(){this.$scope.navigationDisabled=this.navigationDisabled||this._disabledPanZoom}function Z(t){this._disabledPanZoom=t;this.$scope&&B.call(this)}function V(){if(this._disabledPanZoom)return;var t=this.components.dataArea,e=t._xAxis,i=t._yAxis,n=this;I.call(this);e.setUseTransition(this._oldUseTransition);i.setUseTransition(this._oldUseTransition);j.call(this);this._axisInfoAtHomeStateNeedToUpdate=true;this._isHomeState=true;L.call(this);this._paint();setTimeout(function(){n._debouncedUpdateLayout.call(n);n.$scope.$emit("onResetMiniMapFocus");n.$scope.showMiniMap=false},1e3)}function E(){if(this._disabledPanZoom)return;this._cancelDebounce(this);this._inPanZoom=true;this._axisInfoAtHomeStateNeedToUpdate&&O.call(this);this._axisInfoAtHomeStateNeedToUpdate=false;this.components.xAxis.setUseTransition(false);this.components.yAxis.setUseTransition(false);I.call(this)}function $(t,e){if(this._disabledPanZoom)return;var i=this,n=this.components.xAxis,a=this.components.yAxis,s,o,r,l,h,c,u,d,p,f,m,x,_,v,g;this._isHomeState&&this._needUpdateMiniMap&&tt.call(this);t.identityIfClose(P);if(this._plotMaxMinNeedToUpdate){this._xAxisMin=n.getPlotMin();this._xAxisMax=n.getPlotMax();this._yAxisMin=a.getPlotMin();this._yAxisMax=a.getPlotMax();this._plotMaxMinNeedToUpdate=false}v=n.getPlotSize();g=a.getPlotSize();if(this.yMirrorMode){o={x:v,y:g};r={x:0,y:0}}else{o={x:0,y:g};r={x:v,y:0}}l=t.transformPoint(o);h=t.transformPoint(r);c=h.x-l.x;u=h.y-l.y;d=this._xAxisMax-this._xAxisMin;p=this._yAxisMax-this._yAxisMin;f=this._xAxisMin-l.x/c*d;m=this._xAxisMin+(v-l.x)/c*d;x=this._yAxisMax-(h.y-g)/u*p;_=this._yAxisMax-h.y/u*p;if(e&&this._axisInfoAtHomeState&&R.call(this,f,m,x,_,void 0,void 0,q)){f=this._axisInfoAtHomeState.x.min;m=this._axisInfoAtHomeState.x.max;x=this._axisInfoAtHomeState.y.min;_=this._axisInfoAtHomeState.y.max}n.setPlotMin(f);n.setPlotMax(m);a.setPlotMin(x);a.setPlotMax(_);this.components.dataArea.clearSelection();this.components.dataArea.getIsReduced()&&this.components.dataArea.renderers.heat.transformScene(t);i.$scope.$emit("onUpdateMiniMapFocus",f,m,x,_);for(s in this.components)"dataArea"===s&&this.components.dataArea.getIsReduced()||this.components[s].invalidateDisplay();H.call(this)}function F(){if(this._disabledPanZoom)return;this._inPanZoom=false;this._debouncedUpdateLayout()}function U(){var t=this._panZoomController._viewportProjection.getTransformMatrix();if(t.isIdentity())return;var e=this._xAxisOldSize,i=this._yAxisOldSize;if(!e||!i)return;var n=this.components.xAxis,a=this.components.yAxis,s=n.getPlotSize(),o=a.getPlotSize();if(e===s&&i===o)return;var r,l,h,c;if(this.yMirrorMode){r=this._xAxisMax;l=this._xAxisMin;h=n.getPlotMax();c=n.getPlotMin()}else{r=this._xAxisMin;l=this._xAxisMax;h=n.getPlotMin();c=n.getPlotMax()}var u=this._yAxisMin,d=this._yAxisMax,p=a.getPlotMin(),f=a.getPlotMax(),m=t.clone(),x=t.clone();var _=l-r,v=d-u,g=c-h,y=f-p;m.set([[s/_,0,-s*r/_],[0,-o/v,o*d/v],[0,0,1]]);x.set([[s/g,0,-s*h/g],[0,-o/y,o*f/y],[0,0,1]]);m.invert();t=x.multiply(m);t.identityIfClose(P);this._panZoomController._viewportProjection.setTransformMatrix(t);this._panZoomController.reset()}function W(){this._plotMaxMinNeedToUpdate=true;var t=this._panZoomController._viewportProjection;t.setTransformMatrix(t.getTransformMatrix().identity())}function G(t,n,a,s,o){if(this._destroyed||this._inPanZoom)return;var r=e();this._ready=r.promise;if(!this._data||Number.isNaN(+t)||Number.isNaN(+n)||Number.isNaN(+a)||Number.isNaN(+s)){this._fetchedData=true;this.$scope.throbberApi.hide();return e.resolve()}var l=this,h=this._data.compressionResolution?this._data.compressionResolution:w,c=1e3,u=o?o-1:0,d=Math.min(h+u,D),p=function t(){l._fetchedData=true;l.prePaint(l._data);return e.all([l._updateData(l._data)]).then(function(){r.resolve();if(l._destroyed)return;l.$scope.throbberApi.hide();if(l.backendApi.isSnapshot){l._isBigData=!!l._data.dataPages&&l._data.dataPages.length>0&&l._data.dataPages[0].qMatrix.length>0;l.components.dataArea.setIsBigData(l._isBigData)}})};return this.backendApi.getHyperCubeBinnedData(void 0===l._data?void 0:[{qTop:0,qLeft:0,qWidth:l._data.qHyperCube.qSize.qcx,qHeight:l._data.qHyperCube.qSize.qcy}],[{qLeft:t,qTop:n,qWidth:a,qHeight:s}],c,d).then(function(t){if(l._destroyed||l._inPanZoom)return;if(!l._data||!t||l._destroyed){l._fetchedData=true;l.$scope.throbberApi.hide();return}W.call(l);l.components.dataArea.setIsBigData(true);if(t[0].qMatrix.length>0){l._isReduced=true;l._data.qHyperCube.isReduced=true;var e=T([t[0]]);l.components.dataArea.setHeatMapData(e);l._heatMapData=l.components.dataArea.getHeatMapData();l._heatColorMap.setMaxMin(e[0][0].qNum,0);l._needUpdateMiniMap&&l.$scope.$emit("onUpdateMiniMapData",e);l.components.dataArea.setIsReduced(true);l.$scope.reducedDataNote=i.get("properties.compression.providingOverviewOf",[l._numberFormatter.format(l._data.qHyperCube.qSize.qcy,l._defaultPattern)])}else{l._isReduced=false;l._data.qHyperCube.isReduced=false;l._data.qHyperCube.qDataPages=[t[1]];l.components.dataArea.setIsReduced(false)}return p()})}function Y(){var t=.15,e=10;this._layoutMode<=3?this.$scope.miniMapStyle={display:"none"}:this.$scope.miniMapStyle={display:"block",left:this.yMirrorMode?this.components.dataArea.rect.x+e:this.components.dataArea.rect.x+this.components.dataArea.rect.width*(1-t)-e,top:this.components.dataArea.rect.y+this.components.dataArea.rect.height*(1-t)-e,width:this.components.dataArea.rect.width*t,height:this.components.dataArea.rect.height*t}}function X(){this.$scope.showMiniMap=!(!this._isBigData||this._isHomeState||this.components.xAxis.getPlotMin()<=this._resettedAxisInfo.x.min&&this.components.xAxis.getPlotMax()>=this._resettedAxisInfo.x.max&&this.components.yAxis.getPlotMin()<=this._resettedAxisInfo.y.min&&this.components.yAxis.getPlotMax()>=this._resettedAxisInfo.y.max)}function K(){var t=this.components.dataArea.rect;this._sizeInfo||(this._sizeInfo={});if(this._sizeInfo.yMirrorMode!==this.yMirrorMode||this._sizeInfo.x!==t.x||this._sizeInfo.y!==t.y||this._sizeInfo.width!==t.width||this._sizeInfo.height!==t.height){this._sizeInfo.yMirrorMode=this.yMirrorMode;this._sizeInfo.x=t.x;this._sizeInfo.y=t.y;this._sizeInfo.width=t.width;this._sizeInfo.height=t.height;return true}return false}function Q(){if(K.call(this)){var t=this.components.dataArea.rect.width,e=this.components.dataArea.rect.height;Y.call(this);X.call(this);this.$scope.$emit("onResizeMiniMap",this.$scope.miniMapStyle,{width:t,height:e})}}function J(){var t=y.Theme.dataColors.primaryColor;var e=new b(t);var n=e.toHSVComponents();var a=new b("hsv("+n.h+","+n.s+",20)");var s=new b("hsv("+n.h+","+n.s+",80)");var o={colors:[s,a],limits:[{value:.5,gradient:true}],min:0,max:1};this._heatColorMap=new l(o);this.$scope.colorMap=this._heatColorMap;this.$scope.$emit("onUpdateColorMap");this._heatColorMap.setLegendTitle(i.get("properties.compression.density"));this.components.dataArea&&this.components.dataArea.setHeatColorMap(this._heatColorMap)}function tt(){this._resettedAxisInfo.x.min=this.components.xAxis.getPlotMin();this._resettedAxisInfo.x.max=this.components.xAxis.getPlotMax();this._resettedAxisInfo.y.min=this.components.yAxis.getPlotMin();this._resettedAxisInfo.y.max=this.components.yAxis.getPlotMax();this.$scope.$emit("onUpdateMiniMap",this._resettedAxisInfo);this.$scope.showMiniMap=false;this._needUpdateMiniMap=false}function et(t,e){if(0===t.length)return[];var i=t.length,n=[],a=0,s,o,r,l,h,c,u,d;l="x"===e?"y":"x";h=e+"Min";c=e+"Max";u=l+"Min";d=l+"Max";t.sort(function(t,e){if(t[h]>e[h])return 1;if(t[h]!==e[h])return-1;if(t[h]===e[h])return t[u]-e[u]});s=t[0];o={xMin:s.xMin,xMax:s.xMax,yMin:s.yMin,yMax:s.yMax};n[a]=o;for(r=1;r<i;r++){s=t[r];if(o[h]===s[h]&&o[c]===s[c]&&o[d]===s[u])o[d]=s[d];else{a++;o={xMin:s.xMin,xMax:s.xMax,yMin:s.yMin,yMax:s.yMax};n[a]=o}}return n}function it(t){var e=t?t.length:0,i=new Array(e),n=[],a,s,o,r,l,h,c,u,d,p,f;for(a=0;a<e;a++){s=this._heatMapData[t[a]].qText;o=Math.min(s[0],s[2]);l=Math.min(s[1],s[3]);r=Math.max(s[0],s[2]);h=Math.max(s[1],s[3]);i[a]={xMin:o,xMax:r,yMin:l,yMax:h}}d=et(et(i,"x"),"y");p=et(et(i,"y"),"x");f=d.length>p.length?p:d;e=f.length;for(a=0;a<e;a++){s=f[a];c={idx:0,range:{max:s.xMax,min:s.xMin},type:"measure"};u={idx:1,range:{max:s.yMax,min:s.yMin},type:"measure"};n[a]=[c,u]}return n}function nt(){var t=this.components.dataArea._cacheItems;var e=t.filter(function(t){return t.selected}).map(function(t){return t.row});var i=it.call(this,e);if(i&&0!==i.length){at.call(this,i);Z.call(this,true)}else{this.backendApi.clearSelections();Z.call(this,false)}}function at(t){var e=this;this.backendApi.selectRects(t,false).then(function(t){if(!t){e.backendApi.clearSelections();st.call(e,false)}})}function st(){this.components.dataArea.getIsReduced()&&this.components.dataArea.clearSelection();Z.call(this,false)}M=n.extend("ScatterPlot",{init:function e(i,n,l,h,c){var u=this;l=t.extend(true,l||{},{providers:{colorMap:{autoMode:"primary"}},components:{refLines:{sortKey:5,show:true,dock:"center",showFlag:a.prototype.ShowFlags.SPARK},dataArea:{sortKey:10,show:true,dock:"center",clazz:r,showFlag:a.prototype.ShowFlags.SPARK},grid:{showFlag:a.prototype.ShowFlags.XSMALL},refLineLabelsX:{show:true,dock:"top",order:3,showFlag:a.prototype.ShowFlags.XSMALL,clazz:s},refLineLabelsY:{show:true,dock:"right",order:3,showFlag:a.prototype.ShowFlags.XSMALL,clazz:s}}});this._resettedAxisInfo={x:{min:0,max:0},y:{min:0,max:0}};this._axisInfo={x:{min:null,max:null},y:{min:null,max:null}};this._super(i,n,l,h,c);this.backendApi.setCacheOptions({enabled:false});this._numberFormatter=new _;this._defaultPattern="#.#A";this._oldUseTransition=this.components.xAxis.getUseTransition();this.components.dataArea.setYAxis(this.components.yAxis);this.components.dataArea.setXAxis(this.components.xAxis);this.components.xAxisTitle.setType("measure");this.components.yAxisTitle.setType("measure");this.components.xAxisTitle.setModel(i.ext.model);this.components.yAxisTitle.setModel(i.ext.model);this.components.yAxis.setShowExplicitMinMax(false);this.components.xAxis.setShowExplicitMinMax(false);this.components.grid.setAxes(this.components.xAxis,this.components.yAxis);var d=this.providers.colorMap.getLegendDataProvider();d.setLegendMarker("circle");this.createHeatColorMap=J.bind(this);this.createHeatColorMap();y.Theme.ThemeChanged.bind(this.createHeatColorMap);this.components.xAxis.getTransitionHelper().setTransitionTime(700);this.components.yAxis.getTransitionHelper().setTransitionTime(700);this.components.dataArea.getTransitionHelper().setTransitionTime(700);this._changeWatchers.push(o.bindProperty(this.components.dataArea,"dimensionTree",this._chartContext,"dimensionTree"));this._changeWatchers.push(o.bindProperty(this.providers.colorMap,"dimensionTree",this._chartContext,"dimensionTree"));this._panZoomController=new v(t(this.components.dataArea.container),{start:function t(){E.call(u)},update:function t(e){$.call(u,e)},end:function t(e){$.call(u,e,true);F.call(u)},reset:function t(){V.call(u)}});this._panZoomController.setZoomPanByWebkitTransform(false);this._debouncedUpdateLayout=f.debounce(function(){if(this._inPanZoom)return;var t=this.isBigData(this._data)&&!this.backendApi.isSnapshot,e=this.components.xAxis.getPlotMin(),i=this.components.xAxis.getPlotMax(),n=this.components.yAxis.getPlotMin(),a=this.components.yAxis.getPlotMax(),s=Math.floor(Math.sqrt((this._data.qHyperCube.qMeasureInfo[1].qMax-this._data.qHyperCube.qMeasureInfo[1].qMin)/(a-n)));if(t){this._dataUpdatedOnPanOrZoom=true;G.call(this,e,a,i-e,a-n,s).then(this._paintWithTransition.bind(this))}else this._paintWithTransition.call(this)},400,this);this._cancelDebounce=f.cancelDebounce;this.onNavigationPressed=i.$on("navigationPressed",function(t,e,i){t.preventDefault();!u._disabledPanZoom&&u._panZoomController.navigate(e,i)});this.navigationDisabled=true;B.call(this)},_paintWithTransition:function t(){L.call(this);this._paint().then(function(){this.components.xAxis.setUseTransition(this._oldUseTransition);this.components.yAxis.setUseTransition(this._oldUseTransition)}.bind(this))},getVerticalComponents:function t(){var e=this._super();this.components&&this.components.refLineLabelsY&&this._data&&this._data.yAxis&&e.push({comp:this.components.refLineLabelsY,dock:"far"===this._data.yAxis.dock?"near":"far"});return e},setYMirrorMode:function t(e){if(this.yMirrorMode===e)return;this._super(e);this.$scope.$emit("onYMirrorModeChange",e);this.updateVerticalComponentsDock()},initSelections:function t(){var e=this,i=this.components.dataArea;this.selections._disableSelections=this.options._disableSelections;this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend);this.selections.types.dataArea.setComponent("dataArea",this.components.dataArea);if(!this.options._disableSelections){this.selections.types.range.setComponent("dataArea",this.components.dataArea);this.selections.types.range.setComponent("x",this.components.xAxis);this.selections.types.range.setComponent("y",this.components.yAxis);this.selections.Activated.bind(function(){i.getIsReduced()&&i.copyHeatMap();e._inSelectionMode=true;e.onSelection.Activated.call(e)});this.selections.Deactivated.bind(function(){e._inSelectionMode=false;e.onSelection.Deactivated.call(e)});this.selections.Lasso.bind(this.onToggleLasso.bind(this));this.selections.Select.bind(this.Select.bind(this));this.selections.SelectRange.bind(e.onSelection.SelectRange.bind(this));this.selections.ToggleShape.bind(this.onSelection.ToggleShape.bind(this));this.selections.Confirm.bind(this.Confirm.bind(this));this.selections.Cancel.bind(this.onSelection.Cancel.bind(this));this.selections.Clear.bind(this.Clear.bind(this));this.selections.SelectAttributeDim.bind(this.onSelection.SelectAttributeDim.bind(this));this.selections.SelectWhileLocked.bind(this.selectWhileLocked.bind(this));this.selections.ResetSelections.bind(function(){i.getIsReduced()&&i.clearSelection()})}},initTooltips:function t(){this.tooltips.setComponent("dataArea",this.components.dataArea)},Select:function t(e,i){this._isReduced?nt.call(this,e):this.onSelection.Select.apply(this,[e,i,0,"",this.isBigData(this._data)])},Clear:function t(){this.onSelection.Clear.call(this);st.call(this)},Confirm:function t(){this.onSelection.Confirm.call(this);st.call(this)},_paint:function i(){var n=this;return this._super().then(function(i){if(i&&i.invalid)return;return n._ready.then(function(){if(n._destroyed)return e.resolve();var i,a=[];this.components.dataArea&&(this._offset=t(this.components.dataArea.container).offset());var s=this.components.xAxis,o=this.components.yAxis;this._xAxisOldSize=s?s.getPlotSize():void 0;this._yAxisOldSize=o?o.getPlotSize():void 0;this.layout();this.components.dataArea&&this._panZoomController.setOffset(t(this.components.dataArea.container).offset());for(i in this.components)a.push(this.components[i].invalidateDisplay());this._axisInfoAtHomeStateNeedToUpdate&&O.call(this);H.call(this);U.call(this);Q.call(this);z.call(this);return e.all(a)}.bind(this))}.bind(this))},on:function t(){if(this._on)return;this._super();if(this._navigation){H.call(this);if(this.supressDotRendering){this.selections&&this.selections.off();return}this._panZoomController.on();this.$scope.interactive=true;this.navigationDisabled=false;B.call(this)}},off:function e(){this.navigationDisabled=true;B.call(this);this.$scope.interactive=false;if(!this._on)return;if(this._navigation){H.call(this);this._panZoomController.off();g(this.components.dataArea.container).off("*",A);g(this.container).off("*",A);t(this.components.dataArea.container).off(A);t(this.container).off(A)}this._super()},isValid:function t(e){return this._super(e)&&e.qHyperCube.qMeasureInfo.length>=2&&!this.supressChartRendering},resize:function t(){var i=new e,n=this;if(this._isHomeState&&!this.backendApi.isSnapshot){j.call(this);this._axisInfoAtHomeStateNeedToUpdate=true}this._super().then(function(){n.rect&&L.call(n);i.resolve()});return i.promise},prePaint:function t(e){this._super(e);this.$scope.dataAttributes.limitedData=this.isBigData(e);this.$scope.dataAttributes.reduceDataDisc=this.$scope.dataAttributes.limitedData;m.applyDisclaimerAttributes({title:false,bottom:true,overlay:false,explicitLimitedData:this.$scope.dataAttributes.limitedData,direction:this.$scope.options.direction},this.$scope.dataAttributes,this.$element,this.$scope,e);this.$scope.dataAttributes.noDataExist||(this.$scope.dataAttributes.onlyNanData=e.qHyperCube.qMeasureInfo.slice(0,2).some(function(t){return t.qMax<t.qMin||"NaN"===t.qMax}));this.supressChartRendering=this.$scope.dataAttributes.onlyNanData||this.$scope.dataAttributes.noDataExist;this.supressDotRendering=this.supressChartRendering},setInteractionState:function t(e,i){this._super(e,i);this._oldUseTransition=this.components.xAxis.getUseTransition()},_updateHyperCube:function t(i){var n;var a=[];this._dataUpdatedOnPanOrZoom||(this._isHomeState=true);return this.providers.colorMap.setData(i).then(function(){a.push(this.components.dataArea.setData(i));a.push(this.components.colorLegend.setData(i));a.push(this.components.xAxisTitle.setData([{label:i.qHyperCube.qMeasureInfo[0].qFallbackTitle,index:0}]));a.push(this.components.yAxisTitle.setData([{label:i.qHyperCube.qMeasureInfo[1].qFallbackTitle,index:1}]));n=this.getSnapshotStoredChartData();var t=this.options.viewState;if(this._readStoredData&&n){this.components.xAxis.setPlotMin(n.xAxisMin);this.components.xAxis.setPlotMax(n.xAxisMax);this.components.yAxis.setPlotMin(n.yAxisMin);this.components.yAxis.setPlotMax(n.yAxisMax)}else if(t){this.components.xAxis.setPlotMin(t.xAxisMin);this.components.xAxis.setPlotMax(t.xAxisMax);this.components.yAxis.setPlotMin(t.yAxisMin);this.components.yAxis.setPlotMax(t.yAxisMax)}i.legend&&this.components.colorLegend[(this.supressDotRendering||!i.legend.auto&&!i.legend.show?"hide":"show")+"Component"]();return e.all(a)}.bind(this))},isBigData:function t(e){return e.qHyperCube.qSize.qcy>S},_preUpdateData:function t(i){if(this.providers.colorMap){this._readStoredData?this.providers.colorMap.setSnapshotChartData(i.snapshotData.content.chartData):this.providers.colorMap.setSnapshotChartData();return e.resolve(i)}},_updateData:function t(i){var n=this,a,s;if(n._destroyed)return e.reject();var o=this.options.viewState;this._data=i;var r=this.selectionsCache.getSelectedValuesInColumn(0).slice();if(this._fetchedData){s={axes:{xAxis:{component:this.components.xAxis,data:i.xAxis,title:"",dataIndices:[0]},yAxis:{component:this.components.yAxis,data:i.yAxis,title:"",dataIndices:[1]}},refLineLabels:{x:{axis:this.components.xAxis,data:i.refLine?i.refLine.refLinesX:"",component:this.components.refLineLabelsX},y:{axis:this.components.yAxis,data:i.refLine?i.refLine.refLinesY:"",component:this.components.refLineLabelsY}},axisTitles:{xAxisTitle:{component:this.components.xAxisTitle},yAxisTitle:{component:this.components.yAxisTitle}},refLines:{component:this.components.refLines}};this._super(i,s);r&&this.selectionsCache.setValues(r);this._fetchedData=false;this.components.colorLegend.setColorMap(this._isReduced?this._heatColorMap:this.providers.colorMap);return this._updateHyperCube(i)}this._dataUpdatedOnPanOrZoom=false;this._axisInfoAtHomeStateNeedToUpdate=true;this._isBigData=this.isBigData(i);this._needUpdateMiniMap=true;if(this._isBigData){var l=i.xAxis.autoMinMax||"min"!==i.xAxis.minMax&&"minMax"!==i.xAxis.minMax?i.qHyperCube.qMeasureInfo[0].qMin:i.xAxis.min,h=i.xAxis.autoMinMax||"max"!==i.xAxis.minMax&&"minMax"!==i.xAxis.minMax?i.qHyperCube.qMeasureInfo[0].qMax:i.xAxis.max,c=i.yAxis.autoMinMax||"min"!==i.yAxis.minMax&&"minMax"!==i.yAxis.minMax?i.qHyperCube.qMeasureInfo[1].qMin:i.yAxis.min,u=i.yAxis.autoMinMax||"max"!==i.yAxis.minMax&&"minMax"!==i.yAxis.minMax?i.qHyperCube.qMeasureInfo[1].qMax:i.yAxis.max;if(o){l=o.xAxisMin;h=o.xAxisMax;c=o.yAxisMin;u=o.yAxisMax;a=o.zoomLevel}this.$scope.throbberApi.show();G.call(this,l,u,h-l,u-c,a)}else{var d=e();this._ready=d.promise;this._isReduced=false;i.qHyperCube.isReduced=false;this.backendApi.getData([{qTop:0,qLeft:0,qWidth:i.qHyperCube.qSize.qcx,qHeight:1e3}]).then(function(t){if(n._destroyed)return d.resolve();n._data.qHyperCube.qDataPages=t;n._fetchedData=true;n.components.dataArea.setIsBigData(false);n.components.dataArea.setIsReduced(false);W.call(n);n.prePaint(n._data);e.all([n._updateData(n._data)]).then(function(){d.resolve()})})}return this._ready},updateDataArea:function t(e,i){this._super(e,i);if(e.qHyperCube.qMeasureInfo.length>2&&e.dataPoint.rangeBubbleSizes){if(e.dataPoint.rangeBubbleSizes.length>0){this.components.dataArea.setMinDotSize(e.dataPoint.rangeBubbleSizes[0]);e.dataPoint.rangeBubbleSizes.length>1&&this.components.dataArea.setMaxDotSize(e.dataPoint.rangeBubbleSizes[1])}}else e.dataPoint.bubbleSizes&&this.components.dataArea.setMinDotSize(e.dataPoint.bubbleSizes);null!==e.labels.mode&&this.components.dataArea.setLabelMode(e.labels.mode);this.components.dataArea.setRenderData(!this.supressDotRendering);if(this.supressDotRendering){this.selections&&this.selections.off();this._on&&this.off()}else if(!this.supressDotRendering&&this.isDataSelectable(e)){this.selections&&this.selections.on();this._on||this.on()}},updateAxis:function e(i,n){if(this._dataUpdatedOnPanOrZoom)return;t.extend(n.axisTitles.xAxisTitle,{data:i.xAxis});t.extend(n.axisTitles.yAxisTitle,{data:i.yAxis});this._super(i,n);var a,s,o,r,l,h,c,u,d=0;for(r in n.axes){a=n.axes[r];o=a.dataIndices[0];s=a.component;l=i.qHyperCube.qMeasureInfo[o].qMin;h=i.qHyperCube.qMeasureInfo[o].qMax;c=!a.data.autoMinMax&&["min","minMax"].contains(a.data.minMax)?Number(a.data.min):null;u=!a.data.autoMinMax&&["max","minMax"].contains(a.data.minMax)?Number(a.data.max):null;if(h<l){h=10;l=-10}else if(l===h&&0===h||Number.isNaN(+l)&&Number.isNaN(+h)){h=10;l=-10}else d=Math.abs(h!==l?.02*(h-l):.1*h);this.setAxisDataRange(s,Math.max(l,h+d),l-d,u,c,d)}},updateRefLines:function t(e,i){this._super(e,i);for(var n in i.refLineLabels)i.refLineLabels[n].component.setLabelMargin(10)},toggleCacheItem:function t(e){this.components.dataArea.toggleCacheItem(e);this.components.colorLegend.invalidateDisplay("ScatterPlot#toggleCacheItem")},getSnapshotData:function t(e,i,n,a,s,o){var r=this._data&&this._data.compressionResolution?this._data.compressionResolution:w,l=1e3,h=o?o-1:0;return this.backendApi.getHyperCubeBinnedData([{qTop:0,qLeft:0,qWidth:e.qHyperCube.qSize.qcx,qHeight:e.qHyperCube.qSize.qcy}],[{qLeft:i,qTop:n,qWidth:a,qHeight:s}],l,Math.min(r+h,D)).then(function(t){e.dataPages=t;e.foo="custom"})},setSnapshotData:function t(i){this._super(i);if(!this._data||!this._isReduced&&!this.isBigData(i))return e.resolve();var n=this.components.xAxis.getPlotMin(),a=this.components.xAxis.getPlotMax(),s=this.components.yAxis.getPlotMin(),o=this.components.yAxis.getPlotMax(),r=Math.floor(Math.sqrt((this._data.qHyperCube.qMeasureInfo[1].qMax-this._data.qHyperCube.qMeasureInfo[1].qMin)/(o-s)));return this.getSnapshotData(i,n,o,a-n,o-s,r)},getSnapshotChartData:function e(){return t.extend(true,this._super()||{},{xAxisMin:this.components.xAxis.getPlotMin(),xAxisMax:this.components.xAxis.getPlotMax(),yAxisMin:this.components.yAxis.getPlotMin(),yAxisMax:this.components.yAxis.getPlotMax()})},getViewState:function e(){var i=this.components.yAxis.getPlotMin(),n=this.components.yAxis.getPlotMax();return t.extend(true,this._super()||{},{xAxisMin:this.components.xAxis.getPlotMin(),xAxisMax:this.components.xAxis.getPlotMax(),yAxisMin:i,yAxisMax:n,zoomLevel:Math.floor(Math.sqrt((this._data.qHyperCube.qMeasureInfo[1].qMax-this._data.qHyperCube.qMeasureInfo[1].qMin)/(n-i)))})},getPreferredSize:function t(){return this._super()},clear:function t(){this.$scope.navigationVisible=false;return this._super()},destroy:function t(){this._super();this.onNavigationPressed();this._panZoomController.release();y.Theme.ThemeChanged.unbind(this.createHeatColorMap);this._destroyed=true}});return{type:"scatterplot",BackendApi:h,template:p,View:M,definition:c,softDefinition:u,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qSuppressMissing:true}},data:d,support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:true,viewData:true},options:{selections:{dataArea:{},range:{},colorLegend:{}},tooltips:{}},importProperties:x.colorChart.importProperties.bind(x),exportProperties:x.colorChart.exportProperties.bind(x)}}.apply(e,n),void 0!==a&&(t.exports=a))},1323:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(1602)],a=function(t,e){t.directive("qvaZoomPanNavigation",function(){return{template:e,replace:true,link:function t(e){e.onHomePressed=function(){e.$broadcast("navigationPressed","resetZoom")};e.onNavigationPressed=function(t){e.$broadcast("navigationPressed",t)}}}})}.apply(e,n),void 0!==a&&(t.exports=a))},1602:function(t,e){t.exports='<div class="qv-zoom-pan-nav" ng-style="navigationStyle">\n\t<div ng-show="navigationHomeOnly && navigationVisible" class="qv-zoom-pan-nav-homeonly">\n\t\t<button class="qv-zoom-pan-nav-home  lui-fade-button  lui-fade-button--large" qva-activate="onHomePressed()" ng-disabled="navigationDefaultPosition || navigationDisabled" q-title-translation="Object.Navigation.ResetZoom">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--home"></span>\n\t\t\t</button>\n\t</div>\n\t<div ng-show="!navigationHomeOnly && navigationVisible" class="qv-zoom-pan-nav-fullnav">\n\t\t<div class="qv-zoom-pan-nav-top">\n\t\t\t<button class="qv-zoom-pan-nav-up  lui-fade-button  lui-fade-button--large" qva-activate="onNavigationPressed(\'navUp\')" ng-disabled="navigationDisabled" q-title-translation="Object.Navigation.PanUp">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--triangle-top"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="qv-zoom-pan-nav-middle">\n\t\t\t<button class="qv-zoom-pan-nav-left  lui-fade-button  lui-fade-button--large" qva-activate="onNavigationPressed(\'navLeft\')" ng-disabled="navigationDisabled" q-title-translation="Object.Navigation.PanLeft">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--triangle-left"></span>\n\t\t\t</button>\n\t\t\t<button class="qv-zoom-pan-nav-home  lui-fade-button  lui-fade-button--large" qva-activate="onHomePressed()" ng-disabled="navigationDefaultPosition || navigationDisabled" q-title-translation="Object.Navigation.ResetZoom">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--home"></span>\n\t\t\t</button>\n\t\t\t<button class="qv-zoom-pan-nav-right  lui-fade-button  lui-fade-button--large" qva-activate="onNavigationPressed(\'navRight\')" ng-disabled="navigationDisabled" q-title-translation="Object.Navigation.PanRight">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--triangle-right"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="qv-zoom-pan-nav-bottom">\n\t\t\t<button class="qv-zoom-pan-nav-down  lui-fade-button  lui-fade-button--large" qva-activate="onNavigationPressed(\'navDown\')" ng-disabled="navigationDisabled" q-title-translation="Object.Navigation.PanDown">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--triangle-bottom"></span>\n\t\t\t</button>\n\t\t\t<button class="qv-zoom-pan-nav-in  lui-fade-button  lui-fade-button--large" qva-activate="onNavigationPressed(\'zoomIn\')" ng-disabled="navigationDisabled" q-title-translation="Object.Navigation.ZoomIn">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--zoom-in"></span>\n\t\t\t</button>\n\t\t\t<button class="qv-zoom-pan-nav-out  lui-fade-button  lui-fade-button--large" qva-activate="onNavigationPressed(\'zoomOut\')" ng-disabled="navigationDisabled" q-title-translation="Object.Navigation.ZoomOut">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--zoom-out"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>'},1628:function(t,e,i){"use strict";var n,a;!(n=[i(101),i(91)],a=function(t,e){function i(t){var e=t.getMeasures();2===e.length?t.setSorting([2,1,0]):3===e.length&&t.setSorting([3,2,1,0])}function n(e,i){var n=i.getMeasures(),a=t.getValue(e,"color.mode");"byExpression"===a&&0===n.length&&t.setValue(e,"color.mode","primary")}var a={dimensions:{min:1,max:1,description:function t(){return e.get("Visualizations.Descriptions.Bubble")}},measures:{min:2,max:3,description:function t(i,n){var a;a=0===n?"properties.xAxis":1===n?"properties.yAxis":2===n?"Visualizations.Descriptions.Size":"Visualizations.Descriptions.Color";return e.get(a)},add:function t(e,n,a){i(a);e.qSortBy.qSortByNumeric=-1},remove:function t(e,a,s){i(s);n(a,s)}}};return a}.apply(e,n),void 0!==a&&(t.exports=a))},1762:function(t,e,i){"use strict";var n,a;!(n=[i(92),i(293),i(1032),i(109),i(246),i(291),i(1239),i(91)],a=function(t,e,i,n,a,s,o,r){var l="#333",h=2;function c(t){var e=new i;e.text=this._numberFormatter.format(t.qNum,this._defaultPattern);e.align="center";e.font="11px 'QlikView Sans'";return e}function u(t,e,i){t.x=e.x+e.width/2;t.y=e.y+e.height/2+4;t.fill=i?"#fff":"#444"}function d(t,e){if(!t||!e)return;var i,n,a,s,o,r=this._binGapCompensation,l=this._rtlBinGapCompensation;i=e.qText;n=this._xAxis.getPositionOfValue(i[0]);s=this._yAxis.getPositionOfValue(i[1]);a=this._xAxis.getPositionOfValue(i[2]);o=this._yAxis.getPositionOfValue(i[3]);t.set(n-r,s-r,a-n+l,o-s+r)}function p(t,e,i){d.call(this,t,e);t.fill=i.toRGBA();t.isDark=i.isDark()}function f(t){var i=this._data[t];var a=new n(this._colorMap.getColor(null,i.qNum/this._maxNrInBin));var s;if(!this._rectShapes[t]){this._rectShapes[t]=new e(0,0,0,0);this._heatContainer.addChild(this._rectShapes[t])}s=this._rectShapes[t];p.call(this,s,i,a)}function m(t){var e=this._data[t];var i,n;if(!this._labelShapes[t]){this._labelShapes[t]=c.call(this,e);this._heatContainer.addChild(this._labelShapes[t]);this._labelShapes[t].isRendered=true}if(!this._labelShapes[t].isAddedToRenderer){this._heatContainer.addChild(this._labelShapes[t]);this._labelShapes[t].isAddedToRenderer=true}i=this._rectShapes[t];n=this._labelShapes[t];u.call(this,n,i,i.isDark);n.visible=true}function x(){if(this._binShapes.length!==this._data.length)return;var t,e=this._binShapes.length;for(t=0;t<e;t++)d.call(this,this._binShapes[t],this._data[t])}function _(){var t;for(t=0;t<this._numBins;t++)f.call(this,t);var e=this._rectShapes.every(function(t){return t.width>40&&t.height>15});this._areLabelsAllowed=!this._isMiniMap&&e;if(this._areLabelsAllowed){for(t=0;t<this._numBins;t++)m.call(this,t);this._areLabelsAddedToRenderer=true}else if(this._areLabelsAddedToRenderer&&this._labelShapes){for(t=0;t<this._labelShapes.length;t++)if(this._labelShapes[t]&&this._labelShapes[t].isAddedToRenderer){this._heatContainer.removeChild(this._labelShapes[t]);this._labelShapes[t].isAddedToRenderer=false}this._areLabelsAddedToRenderer=false}}var v=t.extend("HeatMapLight",{init:function t(e,i,n){this._renderer=e;this._heatContainer=i;this._selectedRenderer=n;this._numberFormatter=new a;this._defaultPattern="#.#A";this._binGapCompensation=.5;this._rtlBinGapCompensation=this._binGapCompensation;this._binShapes=[];this._isMiniMap=false},setIsMiniMap:function t(e){this._isMiniMap=e},getIsMiniMap:function t(){return this._isMiniMap},setYMirrorMode:function t(e){this.yMirrorMode=e;this._rtlBinGapCompensation=this.yMirrorMode?-this._binGapCompensation:this._binGapCompensation},setData:function t(e){this._data=e[0].concat();this._metaData=this._data.splice(0,1)[0];this._maxNrInBin=this._metaData.qNum;this._numBins=this._data?this._data.length:0;this._rectShapes=[];this._labelShapes=[];this._selectedShapes={};this._needToClearShapes=true;this._areLabelsAddedToRenderer=false},getData:function t(){return this._data},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},hasValidData:function t(){return this._data&&this._metaData},setXAxis:function t(e){this._xAxis=e},setYAxis:function t(e){this._yAxis=e},setCacheItems:function t(e){this._cacheItems=e},createCacheItems:function t(i){var n,a,s,l,h=[];for(n=0;n<this._numBins;n++){a=this._data[n];if(this._binShapes.length>n)s=this._binShapes[n];else{s=new e(0,0,0,0);this._binShapes[n]=s}l=new o([0],[],[],[],n,0,a.qElemNumber);l._dimensions[0]=r.get("properties.compression.density")+": "+a.qNum;l.addShape(i,s,true);h[h.length]=l}this._binShapes.length>this._numBins&&(this._binShapes=this._binShapes.slice(0,this._numBins));this._cacheItems=h;return h},toggleCacheItem:function t(i){var a=i.row;if(i.selected){var s=this._data[a];var o=new n(this._colorMap.getColor(null,s.qNum/this._maxNrInBin));var r,d;r=new e(0,0,0,0);p.call(this,r,s,o);r.stroke=l;r.strokeWidth=h;this._selectedRenderer.stage.addChild(r);this._selectedShapes[a]={rect:r};r.invalidate();if(!this._isMiniMap&&r.width>40&&r.height>15){d=c.call(this,s);u.call(this,d,r,o.isDark());this._selectedRenderer.stage.addChild(d);this._selectedShapes[a].label=d;d.invalidate()}}else{if(this._selectedShapes[a].rect){this._selectedShapes[a].rect.invalidate();this._selectedRenderer.stage.removeChild(this._selectedShapes[a].rect)}if(this._selectedShapes[a].label){this._selectedShapes[a].label.invalidate();this._selectedRenderer.stage.removeChild(this._selectedShapes[a].label)}this._selectedShapes[a]=void 0}},draw:function t(){if(!this._data||!this._data.length||this._data.length<1)return;this._pixelRatio=s.getDevicePixelToBackingStoreRatio();if(this._needToClearShapes){this._heatContainer.removeChildren();this._needToClearShapes=false}x.call(this);_.call(this);return this._renderer.render()},copyHeatMap:function t(){if(this._renderer._canvas.width&&this._renderer._canvas.height){this._imageData=this._renderer._canvas.getContext("2d").getImageData(0,0,this._renderer._canvas.width,this._renderer._canvas.height);this._selectedRenderer&&this._selectedRenderer._updateSize()}return this._imageData},getHeatMapCanvas:function t(){return this._renderer._canvas},clipSelected:function t(e){if(this._renderer._canvas.width&&this._renderer._canvas.height){this._selectedRenderer.clear();this._selectedRenderer._canvas.getContext("2d").putImageData(this._imageData,0,0,e.x*this._pixelRatio,e.y*this._pixelRatio,e.width*this._pixelRatio,e.height*this._pixelRatio)}},clearSelection:function t(){this._selectedRenderer.stage.removeChildren();this._selectedRenderer.clear()},release:function t(){this._renderer=null;this._heatContainer=null;this._selectedRenderer=null}});return v}.apply(e,n),void 0!==a&&(t.exports=a))},201:function(t,e,i){"use strict";var n,a;!(n=[i(109),i(100),i(100)],a=function(t,e,i){var n={Theme:i,TRANSPARENT_BLACK:"rgba( 0,0,0,0.2 )",TRANSPARENT_WHITE:"rgba( 255,255,255,0.7 )",LIGHT_GREY:"#ccc",DARK_GREY:"#666",BLACK:"#000",WHITE:"#fff",getInverse:function e(i){var n=new t(i);var a=n.getAlpha();return 0===a?this.BLACK:n.isDark()?this.WHITE:this.BLACK},getContrastingGrey:function e(i){var n=new t(i);var o=n.getAlpha();return 0===o?this.DARK_GREY:t.getBestContrast(n,a,s)},getBestContrast:function e(i,n,a){return t.getBestContrast(new t(i),new t(n),new t(a))},getContrastingTransparent:function e(i){var n=new t(i);var a=n.getAlpha();return 0===a||"none"===i?this.TRANSPARENT_BLACK:n.isDark()?this.TRANSPARENT_WHITE:this.TRANSPARENT_BLACK},getStyle:function t(i,n,a){i=i||"";this[i+"StyleService"]||(this[i+"StyleService"]=e.initializeService("object."+i));return this[i+"StyleService"].getStyle(n,a)},getFontSize:function t(i,n,a){i=i||"";this[i+"StyleService"]||(this[i+"StyleService"]=e.initializeService("object."+i));var s=this[i+"StyleService"];return s.scaleFontSize(s.getStyle(n,"fontSize"),a)}};var a=new t(n.LIGHT_GREY);var s=new t(n.DARK_GREY);return n}.apply(e,n),void 0!==a&&(t.exports=a))},2179:function(t,e,i){"use strict";var n,a;!(n=[i(180),i(2180),i(291),i(2181),i(1032),i(293),i(1002),i(344),i(109),i(89),i(1762),i(292),i(100)],a=function(t,e,i,n,a,s,o,r,l,h,c,u,d){var p,f,m=.9;f={NONE:0,AUTO:1,ALL:2};function x(t,e,i,n){t.set(e,i,n);return t}function _(t){var e,i=t.length;for(e=0;e<i;e++)t[e].renderer.setAttribute("style",{opacity:t[e].visible?1:0});setTimeout(function(){for(e=0;e<i;e++)t[e].renderer.setAttribute("style",{visibility:t[e].visible?"":"hidden"})},500)}function v(t){return{backgroundColor:t.getStyle("","backgroundColor"),dataPoint:{label:{color:t.getStyle("label.value","color"),font:"normal "+t.getStyle("label.value","fontSize")+" 'QlikView Sans'",background:t.getStyle("","backgroundColor")}},line:{color:t.getStyle("label.value","color"),width:1},shape:{border:{width:1},selected:{border:{color:"rgba(0,0,0,0.7)",width:2}},outOfBounds:{opacity:.3}}}}function g(t){var i,a,s,o=this._tree,r=this._tree.children.length,l=e.createShape("circle",[0,0,0,0]),c=this.rect.width,u=this.rect.height,d=this._dots,p=this,f,v,g=[],y=[],M,A,S=3,w,D=1,P=3,C,q=this._canvasShapes,L=this._skippedCanvasShapes,T,I=this._data.qHyperCube.qMeasureInfo.length>2&&!this._data.qHyperCube.qIsReduced,z=Math.min(this.rect.height,this.rect.width)/300,N=this.selectionIdentifier?this.selectionIdentifier:"dataArea",k=this._styles,R;if(!r){this.clear();return}this._renderedNodes=e.checkClearNodes(!t,this._renderedNodes);o.children.forEach(function(o){if(!e.checkNodeValid(o))return;M=false;f=e.checkSelected(o);o.selected=f;o.highlighted=o.cacheItem.highlighted;if("dimension"===o.data.type){if(!e.checkShouldRender(o,t)||!p._currentProperties.values)return;C=p._currentProperties.values[o.data.qElemNo];if(!C)return;i=p._xAxis.getPositionOfValue(C.xValue);a=p._yAxis.getPositionOfValue(C.yValue);s=e.getRadius(C.rValue,I,p._currentProperties,z);if(Number.isNaN(+i)||Number.isNaN(+a))return;s=s<.5?.5:s;P=s<P?s:P;A=Number.isNaN(+s)||void 0===s;M=e.outOfBounds(i,a,s,c,u);o.dotData.outOfBounds=M;if(M){s=P;i=e.outOfBoundsPosition(i,c,s);a=e.outOfBoundsPosition(a,u,s)}w=A&&!M;l=x(d[o.dotData.dotIndex],i,a,w?2*S:s);v=o.cacheItem;v.clearShapes(N);v.addShape(N,l,true);o.dotData.color=p._colorMap.getColor(o.data.qElemNo,o._children[0].data.qNum,0,o.data.rowIndex);R=e.checkOverlapping(M?y:g,l,i,a,D);if(-1===R){T=q[o.idx];if(T)T.fill=o.dotData.color.toRGBA();else{T=new n(0,0,0,S,D);T.fill=o.dotData.color.toRGBA();T.strokeWidth=f?k.shape.selected.border.width:k.shape.border.width;T.opacity=f?m:void 0;T.stroke=f?k.shape.selected.border.color:p._sheetBackgroundColor.toRGBA();T.data.label=o.data.qText?o.data.qText.substr(0,128):"";q[o.idx]=T;T.idx=o.idx}if(M){if(!p._isBigData){T.set(l.cx,l.cy,l.r);T.type="circle";y.push(T)}}else{T.set(l.cx,l.cy,l.r);T.type=A?"saltire":"circle";if(!t){g.push(T);p._renderedNodes.push(o)}}}else{var r=M?y[R]:g[R];L[o.idx]={overlappingShape:r,fill:o.dotData.color.toRGBA()};r.overlappingInfo||(r.overlappingInfo={topFill:r.fill,topIndex:r.idx,selectedIndices:[]});b.call(p,r,o.idx,o.selected)}}});if(!t){var H=[];this.renderers.dots.stage.removeChildren();this.renderers.dots.stage.addChildren(g);H.push(this.renderers.dots.render());if(this._isBigData)_.call(this,[{renderer:this.renderers.oob,visible:false}]);else{_.call(this,[{renderer:this.renderers.oob,visible:true}]);this.renderers.oob.stage.removeChildren();this.renderers.oob.stage.addChildren(y);H.push(this.renderers.oob.render())}return h.all(H)}}function y(){var t=this._renderedNodes.length,i,n,r,l=this,h,c=[],u=this._labelShapes,d=this.renderers.labels,p=this._styles,m,x,_,v,g,y,b,M,A,S=this.selectionIdentifier?this.selectionIdentifier:"dataArea";if(t){x=this._renderedNodes.sort(e.sortObjectsForLabels);x.forEach(function(t,d){u[t.data.rowIndex]&&(u[t.data.rowIndex].visible=false);h=t.cacheItem;n=t.dotData.label;i=h.getShapes(S)[0];m=h.toggleShapes[0];y=d-1;_=e.getComparableObject(x,d);n.x=i.cx;n.y=i.cy-i.r-5;if(!n||t.dotData.outOfBounds){m.set(0,0,0,0);return}if(l._labelMode===f.AUTO&&_){v=_.cacheItem.getShapes(S)[0];r=_.dotData.label;g=e.checkLabelInterference(n,r,i,v);if(g.x&&g.y){m.width=0;return}while(g.y&&y>0){y--;_=0!==d?x[y]:null;v=_.cacheItem.getShapes(S)[0];r=_.dotData.label;g=e.checkLabelInterference(n,r,i,v);if(g.x&&g.y){m.width=0;return}}}if(n.y-n.height<0||n.y>l.rect.height){m.set(0,0,0,0);return}n=e.checkEllipsis(n,l.rect.width);m=e.centerLabel(m,n);if(!m.width)return;if(u[t.data.rowIndex]){M=u[t.data.rowIndex].rect;b=u[t.data.rowIndex].text;A=u[t.data.rowIndex].line;u[t.data.rowIndex].visible=true}else{M=new s;b=new a;A=new o;u[t.data.rowIndex]={visible:true,rect:M,text:b,line:A};M.fill=p.dataPoint.label.background;b.fill=p.dataPoint.label.color;b.align="center";b.font=p.dataPoint.label.font;b.baseline="bottom";A.stroke=p.line.color}b.setText(n.text);b.x=n.x;b.y=n.y;b.maxWidth=n.maxWidth;M.x=b.x-b.maxWidth/2-2;M.y=m.y;M.width=m.width+4;M.height=m.height;A.set(n.x,n.y-2,n.x,n.y+3);c.push(M);c.push(b);c.push(A)})}d.stage.removeChildren();d.stage.addChildren(c);return d.render()}function b(t,e,i,n){var a=this._styles;if(t.overlappingInfo){var s;s=t.overlappingInfo.selectedIndices.indexOf(e);s>-1&&!i&&t.overlappingInfo.selectedIndices.splice(s,1);-1===s&&i&&t.overlappingInfo.selectedIndices.push(e);if(t.overlappingInfo.topIndexSelected||0===t.overlappingInfo.selectedIndices.length)t.fill=t.overlappingInfo.topFill;else{var o=t.overlappingInfo.selectedIndices[t.overlappingInfo.selectedIndices.length-1];t.fill=this._skippedCanvasShapes[o].fill}}if(i||t.overlappingInfo&&t.overlappingInfo.selectedIndices.length){t.strokeWidth=a.shape.selected.border.width;t.stroke=a.shape.selected.border.color;t.opacity=m;t.zIndex=1}else{t.strokeWidth=a.shape.border.width;t.stroke=this._sheetBackgroundColor.toRGBA();t.opacity=void 0;t.zIndex=void 0}if(n&&n.visible)if(i){n.text.opacity=1;n.line.opacity=1;n.zIndex=1}else{n.text.opacity=void 0;n.line.opacity=void 0;n.zIndex=void 0}}p=t.extend({init:function t(){this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._dots=[];this._binShapes=[];this._labelRects=[];this._cacheItems=[];this._renderedNodes=[];this._showDataPoints=true;this._colorMap=null;this._navigationVisible=false;this._globalAlpha=1;this._canvasShapes={};this._skippedCanvasShapes={};this._labelMode=f.AUTO;this._transitionProperties._minDotSize=2;this._transitionProperties._maxDotSize=10;this._style={dataPoints:{color:"#666",font:"12px 'QlikView Sans'"}};this._styles={};this._styleService=d.initializeService("object.scatterPlot");this._styles=v(this._styleService);this._sheetBackgroundColor=new l(this._styles.backgroundColor);this._sheetBackgroundColor.setAlpha(.3);this.renderers={heat:new i(this.container,{name:"heat"}),selectedHeat:new i(this.container,{name:"selectedHeat"}),dots:new i(this.container,{name:"dots"}),labels:new i(this.container,{name:"labels"}),oob:new i(this.container,{name:"oob"})};this._heatContainer=new u;this.renderers.heat.stage.addChild(this._heatContainer);this._heatMap=new c(this.renderers.heat,this._heatContainer,this.renderers.selectedHeat);this._heatMap.setColorMap(this._heatColorMap);var e="opacity 0.5s linear";this.renderers.heat.setAttribute("style",{webkitTransition:e,mozTransition:e,transition:e});this.renderers.dots.setAttribute("style",{webkitTransition:e,mozTransition:e,transition:e});this.renderers.labels.setAttribute("style",{webkitTransition:e,mozTransition:e,transition:e});this.perpendicularlyRelevantSpacing={top:10,left:10,right:10,bottom:10};this._transitionHelper.setTransitionTime(500,0)},setYMirrorMode:function t(e){this.yMirrorMode=e;this._heatMap&&this._heatMap.setYMirrorMode(e)},setUseTransition:function t(e){this._savedUseTransition=e;this._super(e&&!this._isBigData)},setIsBigData:function t(e){if(e!==this._isBigData){this._isBigData=e;this.setUseTransition(this._savedUseTransition)}},getIsBigData:function t(){return this._isBigData},setIsReduced:function t(e){if(e!==this._isReduced){this._reducedModeChanged=true;this._isReduced=e}},getIsReduced:function t(){return this._isReduced},setHeatMapData:function t(e){this._heatMap.setData(e)},getHeatMapData:function t(){return this._heatMap.getData()},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},setHeatColorMap:function t(e){this._heatColorMap=e;this._heatMap&&this._heatMap.setColorMap(this._heatColorMap)},getHeatColorMap:function t(){return this._heatColorMap},setXAxis:function t(e){this._xAxis=e;this._heatMap.setXAxis(e);this._xAxis.listen("changed",function(){this.invalidateDisplay()},this)},setYAxis:function t(e){this._yAxis=e;this._heatMap.setYAxis(e);this._yAxis.listen("changed",function(){this.invalidateDisplay()},this)},setDimensionTree:function t(e){this._tree=e;this.invalidateProperties();this.invalidateDisplay()},setMinDotSize:function t(e){this._transitionProperties._minDotSize=e;this.invalidateDisplay()},setMaxDotSize:function t(e){this._transitionProperties._maxDotSize=e;this.invalidateDisplay()},setLabelMode:function t(e){this._labelMode=e;this.invalidateDisplay()},setNavigation:function t(e){this._navigationVisible=e;this.invalidateDisplay()},preRelevantSizeCalculation:function t(){this.perpendicularlyRelevantSpacing={top:10,left:10,right:10,bottom:10}},_updateSize:function t(){this.invalidateDisplay()},setData:function t(e){this._super(e)},_updateProperties:function t(){if(!this._data||!this._isReduced&&!this._tree)return;this._canvasShapes={};this._labelShapes={};this._skippedCanvasShapes={};var i=[],n=this._data.qHyperCube.qDimensionInfo.length,a=this._data.qHyperCube.qMeasureInfo.length,s=this._tree,o=this,l=this._dots,h,c,u=this._labelRects,d,p,m,x,_,v,g=0,y=this._dots.length,b=n+1,M=this.renderers.dots,A=this._style.dataPoints,S=this.selectionIdentifier?this.selectionIdentifier:"dataArea";this._onlySelected=false;o._transitionProperties.values={};o._transitionProperties.nodes={};if(a>2){o._transitionProperties.sizeDataMin=this._data.qHyperCube.qMeasureInfo[2].qMin;o._transitionProperties.sizeDataMax=this._data.qHyperCube.qMeasureInfo[2].qMax}if(!this._isReduced&&this._tree){p=s.children.length;p&&r.each.call(s,function(t,a){v=r.getLevel.call(t);t.idx=a;if(v===b-1){if(n>1&&a>0)return;m=t.children[0].data.qNum;x=t.children[1].data.qNum;_=t.children.length>2?t.children[2].data.qNum:.5;t.dotData={color:null,label:null};if(n<=1){t.dotData.dotIndex=g++;if(y<g){h=e.createShape("circle",[0,0,0,0]);c=e.createShape("rect",[0,0,0,0]);l.push(h);u.push(c)}else{h=o._dots[t.dotData.dotIndex];h.cx=NaN;h.cy=NaN;c=o._labelRects[t.dotData.dotIndex]}if(o._labelMode===f.NONE){c.width=NaN;c.height=NaN}d=t.cacheItem;d.addShape(S,h,true);d.toggleShapes=[c];i.push(d);o._transitionProperties.values[t.data.qElemNo]={xValue:m,yValue:x,rValue:_}}t.dotData.label={x:0,y:0,width:0,height:0,text:t.data.qText};t.dotData.label.width=M.getTextWidth(t.dotData.label.text,A.font);t.dotData.label.height=M.getFontHeight(A.font)}});if(this._dots.length>g){this._dots=this._dots.slice(0,g);this._labelRects=this._labelRects.slice(0,g)}this._heatMap.setCacheItems()}else i=this._heatMap.createCacheItems(S);this._cacheItems=i;this.setSelectableShapes(i);return this._super()},hasValidData:function t(){return this._super()&&this._data&&(this._tree||this._isReduced&&this._heatMap.hasValidData())&&this._xAxis&&this._yAxis},paint:function t(){var e=this;this._super(this._layoutMode,this._data);if(!this._xAxis||!this._yAxis||!this._data||!this.renderers)return;this._xAxis.updateNow();this._yAxis.updateNow();this.renderers.oob.edgeBleed={left:10,right:10,bottom:10,top:10};this._styles=v(this._styleService);if(!this._renderData)return this.clear();this.renderers.dots.stage.opacity=this._globalAlpha||1;this.renderers.labels.stage.opacity=this._globalAlpha||1;this.renderers.heat.setAttribute("style",{opacity:this._globalAlpha||1});if(this._isReduced){if(this._reducedModeChanged){this._reducedModeChanged=false;_.call(this,[{renderer:this.renderers.heat,visible:true},{renderer:this.renderers.selectedHeat,visible:true},{renderer:this.renderers.dots,visible:false},{renderer:this.renderers.labels,visible:false},{renderer:this.renderers.oob,visible:false}]);return this._heatMap.draw()}this.renderers.labels.stage.removeChildren();this.renderers.labels.clear();this.renderers.dots.stage.removeChildren();this.renderers.dots.clear();this.renderers.oob.stage.removeChildren();this.renderers.oob.clear();return this._heatMap.draw()}if(this._tree.children.length>0){var i=function t(){var i=[],n,a;n=g.apply(e,[e._onlySelected]);n&&i.push(n);e._onlySelected=false;if(e._labelMode>f.NONE&&e._layoutMode>e.ShowFlags.XSMALL){a=y.apply(e,[]);a&&i.push(a)}else{e.renderers.labels.stage.removeChildren();i.push(e.renderers.labels.clear())}return h.all(i)};if(this._reducedModeChanged){this._reducedModeChanged=false;_.call(this,[{renderer:this.renderers.heat,visible:false},{renderer:this.renderers.selectedHeat,visible:false},{renderer:this.renderers.dots,visible:true},{renderer:this.renderers.labels,visible:true}]);return i()}this.renderers.selectedHeat.clear();this.renderers.selectedHeat.stage.removeChildren();return i()}},clear:function t(){this._transitionHelper.clear();return this._super()},toggleCacheItem:function t(e){if(this._isReduced)this._heatMap.toggleCacheItem(e);else{var i=true;if(this.renderers.dots.stage.opacity!==this._globalAlpha){i=false;this.renderers.dots.stage.opacity=this._globalAlpha;this.renderers.labels.stage.opacity=this._globalAlpha}var n=this._canvasShapes[e.row];var a=this._labelShapes[e.row];n&&n.overlappingInfo&&(n.overlappingInfo.topIndexSelected=e.selected);!n&&this._skippedCanvasShapes[e.row]&&(n=this._skippedCanvasShapes[e.row]&&this._skippedCanvasShapes[e.row].overlappingShape);if(n){b.call(this,n,e.row,e.selected,a);if(i){n.invalidate();a&&a.visible&&a.text.invalidate()}}if(!i){this.renderers.dots.render();this.renderers.labels.render();this.renderers.oob.render()}}},updateRangeSelection:function t(e){this._heatMap.copyHeatMap(e);this._heatMap.clipSelected(e)},startRangeSelection:function t(e){this._heatMap.copyHeatMap(e)},copyHeatMap:function t(){return this._heatMap.copyHeatMap()},getHeatMapCanvas:function t(){return this._heatMap.getHeatMapCanvas()},clearSelection:function t(){this._heatMap.clearSelection()},setRenderData:function t(e){this._renderData=e},release:function t(){this._super();this._styleService=null;this._styles=null;this._sheetBackgroundColor=null;this._heatMap.release();this._heatContainer.removeChildren();this.renderers=null;this._heatContainer=null;this._heatMap=null}});return p}.apply(e,n),void 0!==a&&(t.exports=a))},2180:function(t,e,i){"use strict";var n,a;!(n=[i(1167),i(104),i(401)],a=function(t,e,i){function n(n,a){var s;switch(n){case"circle":s=new t(a[0],a[1],a[2],a[3]);break;case"rect":s=new e(a[0],a[1],a[2],a[3]);break;case"polygon":s=new i}return s}function a(t,e){if(t)return[];return e}function s(t){if(!t.dotData||"NaN"===t.dotData.xValue||"NaN"===t.dotData.yValue)return false;return true}function o(t){return!!(t&&t.cacheItem&&t.cacheItem.selected)}function r(t,e){return!e||!!t.selected||!!t.highlighted}function l(t,e,i,n){var a;a=e?h(t,i.sizeDataMin,i.sizeDataMax,i._minDotSize,i._maxDotSize):i._minDotSize;return a*n}function h(t,e,i,n,a){var s,o;if(Number.isNaN(+t)||null===t)return NaN;if(e===i)return(n+a)/2;if(t<=e)return n;if(t>=i)return a;s=(t-e)/(i-e);o=n+(a-n)*Math.sqrt(s);return o}function c(t,e,i,n,a){var s=Number.isNaN(+i)||void 0===i,o=s?0:i;return t<-o||t>n+o||e<-o||e>a+o}function u(t,e,i){return t<0?-10+i:t>e?e-i+10:t}function d(t,e,i){var n;for(n=0;n<i.length;n++)if(t[i[n]]!==e[i[n]])return false;return true}function p(t,e,i,n,a){if(13!==t.length)return null;t[0].x=e-n+a/2;t[0].y=i-n-a/2;t[1].x=e-n-a/2;t[1].y=i-n+a/2;t[2].x=e-a;t[2].y=i;t[3].x=e-n-a/2;t[3].y=i+n-a/2;t[4].x=e-n+a/2;t[4].y=i+n+a/2;t[5].x=e;t[5].y=i+a;t[6].x=e+n-a/2;t[6].y=i+n+a/2;t[7].x=e+n+a/2;t[7].y=i+n-a/2;t[8].x=e+a;t[8].y=i;t[9].x=e+n+a/2;t[9].y=i-n+a/2;t[10].x=e+n-a/2;t[10].y=i-n-a/2;t[11].x=e;t[11].y=i-a;t[12].x=e-n+a/2;t[12].y=i-n-a/2;return t}function f(t,e){var i,n;for(n=0;n<t.length;n++){i=t[n];if("circle"===i.type){if(d(i,e,["cx","cy","r"]))return n}else if(d(i,e,["cx","cy"]))return n}return-1}function m(t,e){var i,n;i=t.cacheItem.getShapes("dataArea")[0];n=e.cacheItem.getShapes("dataArea")[0];if(i.cy-i.r>n.cy-n.r)return 1;if(i.cy-i.r<n.cy-n.r)return-1;if(i.cx-i.r>n.cx-n.r)return 1;if(i.cx-i.r<n.cx-n.r)return-1;if(i.r>n.r)return-1;if(i.r<n.r)return 1;return t.cacheItem.id<e.cacheItem.id?-1:1}function x(t,e){return 0===e?t[1]?t[1]:null:t[e-1]}function _(t,e,i,n){var a,s,o={x:false,y:false};if(Number.isNaN(+n.cx)||Number.isNaN(+n.cy)){o.y=true;return o}a=-(e.y-t.y);if(a<0)return o;if(a<2*t.height+n.r+i.r){o.y=true;s=Math.abs(e.x-t.x);s<t.width/2+e.width/2&&(o.x=true)}return o}function v(t,e){var i=t.x-t.width/2;t.maxWidth=t.width;if(i<0){t.maxWidth+=2*i;t.x=t.maxWidth/2}i=t.x+t.width/2-e;i>0&&(t.maxWidth-=2*i);t.maxWidth=Math.max(t.maxWidth,0);return t}function g(t,e){t.x=e.x-e.width/2;t.y=e.y-e.height;t.width=e.maxWidth;t.height=e.height;return t}return{createShape:n,checkClearNodes:a,checkNodeValid:s,checkSelected:o,checkShouldRender:r,getRadius:l,getDotRadius:h,outOfBounds:c,outOfBoundsPosition:u,isSame:d,updateCross:p,checkOverlapping:f,sortObjectsForLabels:m,getComparableObject:x,checkLabelInterference:_,checkEllipsis:v,centerLabel:g}}.apply(e,n),void 0!==a&&(t.exports=a))},2181:function(t,e,i){"use strict";var n,a;!(n=[i(291),i(1737),i(1738),i(1049)],a=function(t,e,i,n){var a=n.extend("ScatterCircle",{init:function t(e,i,n,a,s){this._super(e,i,n);this.type="circle";this.saltireSize=a;this.saltireWidth=s},set:function t(e,i,n,a,s){this.saltireSize=this.saltireSize||a;this.saltireWidth=this.saltireWidth||s;this._saltire=l(this._saltire||o(13),e,i,this.saltireSize,this.saltireWidth);this._polygons=[{points:this._saltire}];this._super(e,i,n)}});function s(t,n,a){"saltire"===this.type?i.render.apply(this,[t,n,a]):e.render.apply(this,[t,n,a])}function o(t){var e=[],i;for(i=0;i<t;i++)e.push(r());return e}function r(){return{x:0,y:0}}function l(t,e,i,n,a){if(13!==t.length)return null;t[0].x=e-n+a/2;t[0].y=i-n-a/2;t[1].x=e-n-a/2;t[1].y=i-n+a/2;t[2].x=e-a;t[2].y=i;t[3].x=e-n-a/2;t[3].y=i+n-a/2;t[4].x=e-n+a/2;t[4].y=i+n+a/2;t[5].x=e;t[5].y=i+a;t[6].x=e+n-a/2;t[6].y=i+n+a/2;t[7].x=e+n+a/2;t[7].y=i+n-a/2;t[8].x=e+a;t[8].y=i;t[9].x=e+n+a/2;t[9].y=i-n+a/2;t[10].x=e+n-a/2;t[10].y=i-n-a/2;t[11].x=e;t[11].y=i-a;t[12].x=e-n+a/2;t[12].y=i-n-a/2;return t}t._registerRenderFn(s,a);return a}.apply(e,n),void 0!==a&&(t.exports=a))},2182:function(t,e,i){"use strict";var n,a;!(n=[i(92),i(252),i(395),i(100)],a=function(t,e,i,n){function a(t,e){return t&&t.length>1&&e&&e.length&&(t.length===e.length+1||t.length/2===e.length+1)}function s(t,i,n){return t.gradient?[e.retriveBlend(i,n,.5),n]:[n,n]}function o(t,i){var n=i.map(function(t){return e.retriveColor(t)});if(void 0!==t[0].value){var a=[];t[0].gradient?Array.prototype.push.apply(a,[n[0],e.retriveBlend(n[0],n[1],.5)]):Array.prototype.push.apply(a,[n[0],n[0]]);for(var o=1;o<n.length;o++)Array.prototype.push.apply(a,s(t[o-1],n[o-1],n[o]));return{colors:a,limits:t.map(function(t){return t.value})}}return{colors:n,limits:t}}var r=t.extend("BasicColorMap",{init:function t(e){this.setColorScheme(e)},setColorScheme:function t(e){this._valid=a(e.colors,e.limits);this._max=Number.isNaN(+e.max)?1:e.max;this._min=e.min||0;if(this._valid){var n=o(e.limits.reverse(),e.colors.reverse());this._colorScale=new i;this._colorScale.setMaxMinValues(this._max,this._min);this._colorScale.setLimits(n.limits);for(var s=0;s<n.colors.length;s+=2)this._colorScale.addColorPart(n.colors[s],n.colors[s+1])}},setMaxMin:function t(e,i){this._max=e;this._min=i},getColor:function t(i,a){if(!this._valid)return e.retriveColor(n.dataColors.nullColor);return this._colorScale.getColor(a)},getColorMapping:function t(){var e=this._colorScale.getLegendParts();var i=this._max-this._min;var n=e.length;var a=i/n;var s=this._max;var o,r,l=[];for(r=0;r<n-1;r++){o=e[r];o.isMax=0===r;o.max=s;o.min=s-a;o.id=[s,s-a];o.type="range";s-=a;l.push(o)}o=e[r];o.max=s;o.min=this._min;o.id=[s,this._min];o.type="range";l.push(o);return l},getSelectionIndices:function t(){return[0]},getValueFormatter:function t(){return null},getColorDataInfo:function t(){return{legendMode:{discrete:false,boxType:null,colorMode:"expression",selectionEnabled:false,altMode:false}}},getColorFromPreScaledValue:function t(e){return this._colorScale.getColor(e)},getLegendDataProvider:function t(){return null},setLegendTitle:function t(e){this._legendTitle=e},getLegendTitle:function t(){return this._legendTitle},getLegendMode:function t(){return["scale",null,"expression",true]}});return r}.apply(e,n),void 0!==a&&(t.exports=a))},2183:function(t,e,i){"use strict";var n,a;!(n=[i(91),i(185)],a=function(t,e){var i,n,a,s=e.getLogicFor("hard","scatterplot");a={component:"text",translation:"properties.compression.willNotAffect",show:function t(e,i){return s.helpers.showCompressionResolution(i.layout)}};i={uses:"settings",items:{presentation:{type:"items",translation:"properties.presentation",grouped:true,items:{showNavigation:{ref:"navigation",type:"boolean",translation:"Common.Navigation",component:"switch",defaultValue:false,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}]},bubbleSizeItems:{type:"items",items:{bubbleSizes:{type:"integer",component:"slider",ref:"dataPoint.bubbleSizes",translation:"properties.dataPoints.bubbleSizes",min:1,max:20,step:1,defaultValue:5,show:function t(e){return e.qHyperCubeDef.qMeasures.length<3}},rangeBubbleSizes:{type:"array",component:"slider",ref:"dataPoint.rangeBubbleSizes",translation:"properties.dataPoints.bubbleSizes",min:1,max:20,step:1,defaultValue:[2,8],show:function t(e){return e.qHyperCubeDef.qMeasures.length>=3}},rangeBubbleCompressionNote:a}},label:{type:"items",items:{labelMode:{ref:"labels.mode",translation:"properties.labels",type:"string",component:"dropdown",defaultValue:1,options:[{value:1,translation:"Common.Auto"},{value:2,translation:"Common.All"},{value:0,translation:"Common.None"}],snapshot:{tid:"property-labels"}},labelModeCompressionNote:a}},queryLevel:{type:"integer",component:"slider",ref:"compressionResolution",translation:"properties.compression.resolution",min:4,max:8,step:1,defaultValue:5,show:function t(e,i){return s.helpers.showCompressionResolution(i.layout)}},gridLines:{type:"items",snapshot:{tid:"property-gridLines"},items:{showGridLines:{ref:"gridLine.auto",type:"boolean",translation:"properties.gridLine.spacing",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},gridSpacing:{ref:"gridLine.spacing",type:"number",component:"dropdown",defaultValue:2,options:[{value:0,translation:"properties.gridLine.noLines"},{value:1,translation:"properties.gridLine.wide"},{value:2,translation:"properties.gridLine.medium"},{value:3,translation:"properties.gridLine.narrow"}],show:function t(e){return!e.gridLine.auto}}}}}},colorsAndLegend:{uses:"colorsAndLegend",items:{colors:{items:{autoColor:{},colorsAnLegendCompressionNote:a,colorMode:{defaultValue:"primary",options:s.color.colorMode.options},persistentColors:{show:s.color.persistentColors.show}}},legend:{show:s.legend.show,items:{show:{snapshot:{tid:"property-legend"}},showTitle:{show:s.legend.showTitle.show},dock:{show:s.legend.dock.show}}}}},xAxis:{type:"items",uses:"axis.measureAxis",label:function e(i,n){var e,a=n.getMeasureLayouts()[0];e=a&&!a.qError?t.get("properties.xAxisWithInfo",[a.qFallbackTitle]):t.get("properties.xAxis");return e},items:{axis:{items:{show:{ref:"xAxis.show",snapshot:{title:"properties.xAxis",tid:"property-xAxis"}},dock:{ref:"xAxis.dock",show:function t(e){return"none"!==e.xAxis.show},options:[{value:"near",translation:"Common.Bottom"},{value:"far",translation:"Common.Top"}]},spacing:{ref:"xAxis.spacing",show:function t(e){return"none"!==e.xAxis.show}}}},minMax:{type:"items",items:{autoMinMax:{ref:"xAxis.autoMinMax"},minMax:{ref:"xAxis.minMax",show:function t(e){return!e.xAxis.autoMinMax}},min:{ref:"xAxis.min",show:function t(e){return["min","minMax"].contains(e.xAxis.minMax)&&!e.xAxis.autoMinMax},invalid:function t(e){if("minMax"===e.xAxis.minMax)return e.xAxis.min>=e.xAxis.max;return false}},max:{ref:"xAxis.max",show:function t(e){return["max","minMax"].contains(e.xAxis.minMax)&&!e.xAxis.autoMinMax},invalid:function t(e){if("minMax"===e.xAxis.minMax)return e.xAxis.min>=e.xAxis.max;return false}}}}}},yAxis:{type:"items",uses:"axis.measureAxis",label:function e(i,n){var e,a=n.getMeasureLayouts()[1];e=a&&!a.qError?t.get("properties.yAxisWithInfo",[a.qFallbackTitle]):t.get("properties.yAxis");return e},items:{axis:{items:{show:{ref:"yAxis.show",snapshot:{title:"properties.yAxis",tid:"property-yAxis"}},dock:{ref:"yAxis.dock",show:function t(e){return"none"!==e.yAxis.show},options:[{value:"near",translation:"properties.dock.left"},{value:"far",translation:"properties.dock.right"}]},spacing:{ref:"yAxis.spacing",show:function t(e){return"none"!==e.yAxis.show}}}},minMax:{type:"items",items:{autoMinMax:{ref:"yAxis.autoMinMax"},minMax:{ref:"yAxis.minMax",show:function t(e){return!e.yAxis.autoMinMax}},min:{ref:"yAxis.min",show:function t(e){return["min","minMax"].contains(e.yAxis.minMax)&&!e.yAxis.autoMinMax},invalid:function t(e){if("minMax"===e.yAxis.minMax)return e.yAxis.min>=e.yAxis.max;return false}},max:{ref:"yAxis.max",show:function t(e){return["max","minMax"].contains(e.yAxis.minMax)&&!e.yAxis.autoMinMax},invalid:function t(e){if("minMax"===e.yAxis.minMax)return e.yAxis.min>=e.yAxis.max;return false}}}}}}}};var o={uses:"data"};n={type:"items",component:"expandable-items",translation:"properties.addons",items:{refLinesX:{uses:"reflines",ref:"refLine.refLinesX",translation:"properties.referenceLinesX"},refLinesY:{uses:"reflines",ref:"refLine.refLinesY",translation:"properties.referenceLinesY"},dataHandling:{uses:"dataHandling",items:{calcCond:{uses:"calcCond"}}}}};return{type:"items",component:"accordion",items:{data:o,addons:n,settings:i}}}.apply(e,n),void 0!==a&&(t.exports=a))},2184:function(t,e,i){"use strict";var n,a;!(n=[i(185),i(216)],a=function(t,e){var i=t.getLogicFor("explore","scatterplot");return{type:"items",component:"accordion",items:{data:{uses:"data"},presentation:{uses:"presentation",items:{showNavigation:{type:"boolean",translation:"Common.Navigation",component:"switch",ref:"navigation",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}]},showLabels:{component:"radio-list",translation:"properties.labels",type:"number",ref:"labels.mode",options:function t(){return[{value:1,translation:"Common.Auto"},{value:2,translation:"Common.All"},{value:0,translation:"Common.None"}]}},bubbleSizes:{type:"integer",component:"slider",ref:"dataPoint.bubbleSizes",translation:"properties.dataPoints.bubbleSizes",min:1,max:20,step:1,show:function t(i){return e.getNumMeasures(i)<3}},rangeBubbleSizes:{type:"array",component:"slider",ref:"dataPoint.rangeBubbleSizes",translation:"properties.dataPoints.bubbleSizes",min:1,max:20,step:1,show:function t(i){return e.getNumMeasures(i)>2}},queryLevel:{type:"integer",component:"slider",ref:"compressionResolution",translation:"properties.compression.resolution",min:4,max:8,step:1,show:function t(e,n){return i.helpers.showCompressionResolution(n)}}}},color:{uses:"color",items:{mode:{options:i.color.colorMode.options},dimension:{items:{colorScheme:{show:function t(n,a){var s=e.getDimensionLayouts(a)[0],o=n.color&&"byDimension"===n.color.mode&&n.color.useDimColVal&&i.color.useDimColVal.show(n);return!(s&&s.qCardinal<=12||o)}},persistentColors:{show:function t(e){return!(e.color&&"byDimension"===e.color.mode&&e.color.useDimColVal&&i.color.useDimColVal.show(e))}}}}}}}}}.apply(e,n),void 0!==a&&(t.exports=a))},2185:function(t,e){t.exports='<div class="qv-viz" style="position: relative;" aria-hidden="true"></div>\n<span class="qv-viz-disclaimer"\n\t  ng-if="dataAttributes.reduceDataDisc  && dataAttributes.layoutMode > 2"\n\t  qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{reducedDataNote}}">\n\t<span class="ltr-star">*</span>\n\t<span>{{ reducedDataNote }}</span>\n\t<span class="rtl-star">*</span>\n</span>\n<span class="qv-viz-center-disclaimer" ng-if="dataAttributes.noDataExist  && dataAttributes.layoutMode > 2" q-translation="Object.Disclaimer.NoDataExist" q-title-translation="Object.Disclaimer.NoDataExist" dir="ltr"></span>\n<span class="qv-viz-center-disclaimer" ng-if="dataAttributes.onlyNanData  && dataAttributes.layoutMode > 2" q-translation="Object.Disclaimer.OnlyNanData" q-title-translation="Object.Disclaimer.OnlyNanData" dir="ltr"></span>\n<div qva-zoom-pan-navigation></div>\n<div qva-scatter-mini-map ng-show="showMiniMap" ng-style="miniMapStyle" colorMap="colorMap"></div>\n'},2186:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(291),i(2187),i(1762),i(2188),i(292),i(96)],a=function(t,e,i,n,a,s,o){t.directive("qvaScatterMiniMap",function(){return{template:a,replace:true,link:function t(a,r){var l=r.find(".scatter-mini-map"),h,c,u,d,p=".scatterplot-mini-map",f=new i,m=new i;var x=new e(l[0],{name:"overview"});var _=new s;x.stage.addChild(_);h=new n(x,_);h.setIsMiniMap(true);h.setXAxis(f);h.setYAxis(m);h.setColorMap(a.colorMap);function v(t){if(!u)return;var e=f.getPositionOfValue(u.xMin),i=m.getPositionOfValue(u.yMax),n=f.getPositionOfValue(u.xMax)-f.getPositionOfValue(u.xMin),s=m.getPositionOfValue(u.yMin)-m.getPositionOfValue(u.yMax),o=t.width-2,r=t.height-2;if(e<0){n+=e;e=0}else if(e>o){e=o;n=0}if(i<0){s+=i;i=0}else if(i>r){i=r;s=0}e+n>o&&(n=o-e);i+s>r&&(s=r-i);s=s>r?r:s;n=n>o?o:n;a.focusStyle={left:e,top:i,width:n,height:s}}function g(t,e){d=r.offset();var i=a.focusStyle.width,n=a.focusStyle.height,s={x:e.pagePoints[0].x-d.left,y:e.pagePoints[0].y-d.top},o={x:a.focusStyle.left+i/2,y:a.focusStyle.top+n/2},l=(s.x-o.x)/(u.scale*r.width()),h=(s.y-o.y)/(u.scale*r.height());a.$broadcast("navigationPressed","jumpTo",{x:-l*c.width,y:-h*c.height})}var y=[];y.push(a.$on("onUpdateMiniMapData",function(t,e){h.setData(e)}));y.push(a.$on("onYMirrorModeChange",function(t,e){h.setYMirrorMode(e);f.setYMirrorMode(e)}));y.push(a.$on("onResizeMiniMap",function(t,e,i){f.setPositions({min:0,max:e.width});m.setPositions({min:e.height,max:0});x.setDimensions(0,0,e.width,e.height);v({width:e.width,height:e.height});c=i;h.draw()}));y.push(a.$on("onUpdateMiniMap",function(t,e){var i=r.width(),n=r.height();f.setValues(e.x);f.setPositions({min:0,max:i});m.setValues(e.y);m.setPositions({min:n,max:0});x.setDimensions(0,0,r.width(),r.height());h.draw()}));y.push(a.$on("onUpdateMiniMapFocus",function(t,e,i,n,a){var s=f.getValues();u={xMin:e,yMin:n,xMax:i,yMax:a,scale:(i-e)/(s.max-s.min)};h.yMirrorMode&&(u.scale=-u.scale);v({width:r.width(),height:r.height()})}));y.push(a.$on("onResetMiniMapFocus",function(){a.focusStyle={left:0,top:0,width:r.width(),height:r.height()}}));y.push(a.$on("onUpdateColorMap",function(){h.setColorMap(a.colorMap)}));function b(){o(r[0]).tap({id:p,end:function t(e,i){g(e,i)}});var t;o(r[0]).swipe({id:p,start:function e(){d=r.offset();var i=a.focusStyle.width,n=a.focusStyle.height;t={x:a.focusStyle.left+i/2,y:a.focusStyle.top+n/2};a.$broadcast("navigationPressed","startAt",{x:0,y:0})},update:function e(i,n){var s={x:n.pagePoints[0].x-d.left,y:n.pagePoints[0].y-d.top},o=(s.x-t.x)/(u.scale*r.width()),l=(s.y-t.y)/(u.scale*r.height());a.$broadcast("navigationPressed","moveTo",{x:-o*c.width,y:-l*c.height});t=s},end:function t(){a.$broadcast("navigationPressed","endAt")}})}function M(){o(r[0]).off("*",p)}a.$on("$destroy",function(){M();while(y.length)y.pop()();_.removeChildren();x.release();h.release();f=null;m=null;p=null;x=null;_=null;h=null});a.$watch("interactive",function(t){t?b():M()})}}})}.apply(e,n),void 0!==a&&(t.exports=a))},2187:function(t,e,i){"use strict";var n,a;!(n=[i(92)],a=function(t){var e=t.extend("AxisLight",{init:function t(e,i,n,a){this._values={min:e,max:i};this._positions={min:n,max:a}},setYMirrorMode:function t(e){this.yMirrorMode=e},setValues:function t(e){this._values=e},getValues:function t(){return this._values},setPositions:function t(e){this._positions=e},getPositions:function t(){return this._positions},getPositionOfValue:function t(e){var i=(e-this._values.min)/(this._values.max-this._values.min),n=this._positions.max-this._positions.min;return this.yMirrorMode?this._positions.max-n*i:this._positions.min+n*i}});return e}.apply(e,n),void 0!==a&&(t.exports=a))},2188:function(t,e){t.exports='<div class="qv-scatter-mini-map">\n\t<div class="scatter-mini-map"></div>\n\t<div class="scatter-mini-map-focus" ng-style="focusStyle"></div>\n</div>'},305:function(t,e,i){"use strict";var n,a;!(n=[],a=function(){var t={SPARK:1,XSMALL:3,SMALL:7,MEDIUM:15,FULL:31},e=[[550,450,t.FULL],[400,220,t.MEDIUM],[300,150,t.SMALL],[150,75,t.XSMALL],[0,0,t.SPARK]],i=[[450,t.FULL],[220,t.MEDIUM],[150,t.SMALL],[75,t.XSMALL],[0,t.SPARK]],n=[[550,t.FULL],[400,t.MEDIUM],[300,t.SMALL],[150,t.XSMALL],[0,t.SPARK]],a=e.length;function s(i,n){var s;for(s=0;s<a;++s)if(i>=e[s][0]&&n>=e[s][1])return e[s][2];return t.SPARK}function o(e){var n;for(n=0;n<a;++n)if(e>=i[n][0])return i[n][1];return t.SPARK}function r(e){var i;for(i=0;i<a;++i)if(e>=n[i][0])return n[i][1];return t.SPARK}function l(e){var i=Object.keys(t).filter(function(i){return t[i]===e})[0];return i&&i.toLowerCase()||""}return{LayoutMode:t,getLayoutMode:s,getLayoutModeKey:l,getHorizontalLayoutMode:r,getVerticalLayoutMode:o}}.apply(e,n),void 0!==a&&(t.exports=a))},376:function(t,e,i){"use strict";var n,a;!(n=[i(92),i(90),i(188),i(89)],a=function(t,e,i,n){var a;a=t.extend({init:function t(e){this._model=e},setModel:function t(e){this._model=e},saveSoftProperties:function t(a,s){if(!this._model)return n.resolve(false);var o=i.generate(a,s);e.extend(true,a,s);if(o&&o.length){o=o.map(function(t){return{qOp:t.op,qValue:JSON.stringify(t.value),qPath:t.path}});return this._model.applyPatches(o,true).then(function(){return true})}return n.resolve(false)},mergeSoftPatches:function t(){if(!this._model)return n.resolve();var e=this;return n.all({properties:this._model.getProperties(),effective:this._model.getEffectiveProperties()}).then(function(t){if(t.properties.qExtendsId)return;var n=i.generate(t.properties,t.effective);i.apply(t.properties,n);e._model.setProperties(t.properties).then(function(){e._model.clearSoftPatches()})})}});return a}.apply(e,n),void 0!==a&&(t.exports=a))},393:function(t,e,i){"use strict";var n,a;!(n=[i(10),i(48)],a=function(t,e){var i=document.createElement("textarea");i.style.position="absolute";i.style.left="-9999px";i.setAttribute("readonly","");function n(t){i.value=t;document.body.appendChild(i);i.select();i.setSelectionRange(0,i.value.length);document.execCommand("copy");document.body.removeChild(i)}e.service("qvCopy",["$window",function(e){var i=t.element(e.document.body);var n=t.element("<textarea/>");n.css({position:"fixed",opacity:"0"});return function(t){n.val(t);i.append(n);n[0].select();try{var e=document.execCommand("copy");if(!e)throw e}catch(e){window.prompt("Copy to clipboard: Ctrl+C, Enter",t)}n.remove()}}]);e.directive("qvClickCopy",["qvCopy",function(t){return{restrict:"A",link:function e(i,n,a){n.bind("click",function(){t(a.qvClickCopy)})}}}]);return{copyToClipboard:n}}.apply(e,n),void 0!==a&&(t.exports=a))},486:function(t,e,i){"use strict";var n,a;!(n=[i(200),i(104)],a=function(t){function e(e,a,h){var c=e.length>0?e[0].positions:[],u=a._style,d=a._radialOptions,p=new t,f=u.ticks.major.length*h,m=u.label.offset*h*20,x,_,v="far"===a.getAlignment()?"left":"right",g=[],y=Math.min(a.rect.height,a.rect.width),b=0,M,A,S,w,D=[],P=a._radius,C;_="left"===v?1:-1;f*=_;x=_>0?0:a.rect.width;a.getShowLine()&&g.push({stroke:u.line.color,shape:{cx:a._centerPoint.x,cy:a._centerPoint.y,radius:P,radianOffset:0,start:d.start,end:d.end},type:"arc"});if(a.getShowLabels())for(C=0;C<c.length;C++){M=(c[C]-b)/(y-b);S=o(M,a);w=r(S);w.r=w.r+m;w=l(w,a._centerPoint);A=s(M,a);w.angle=A;D.push(w);p.save();p.translate(S.x+a._centerPoint.x,S.y+a._centerPoint.y);p.rotate(A);g.push({stroke:u.ticks.major.color,opacity:a.ticks[C].opacity,transform:p.elements,shape:{x1:0,x2:-f,y1:0,y2:0},type:"line"});p.restore()}x+=u.ticks.major.length*_;if(a._showLabels&&a._layoutMode>1)for(C=0;C<e.length;C++){g=g.concat(i(e[C],D,x,a));x+=e[C].labelSpace*_}a._showTitle&&a._layoutMode>1&&(g=g.concat(n(a,u)));a._renderer.shapes=g;a._renderer.render()}function i(t,e,i,n){var a=t.labels,s=e,o=t.opacities,r,l,h=[],c=n._style,u,d,p,f,m,x,_;d=a?a.length:0;if(0===d)return;p=d-1;for(x=0;x<d;x++){f=n.yMirrorMode?a[p-x]:a[x];r=n._renderer.getTextWidth(f,c.label.font);m=s[x];u=m.angle;l=u-.1<3*Math.PI/2&&u+.1>3*Math.PI/2?"center":u<Math.PI/2||u>3*Math.PI/2?"left":"right";h.push({type:"text",fill:c.label.color,opacity:o?o[x]:1,shape:{text:f,x:m.x,y:m.y,maxWidth:m.x-r<0?m.x:m.x+r>n.rect.width?n.rect.width-m.x:r,height:_,maxNumLines:1,font:c.label.font,align:l,baseline:"middle"}})}return h}function n(t,e){var i=[],n=Math.min(t.rect.width,t.rect.height),s=a(t);i.push({type:"text",fill:e.title.color,opacity:1,shape:{text:t._title,x:s.x,y:s.y+n*(.06+Math.min(n-300,0)/-300*.04),maxWidth:1.4*t._radius,maxNumLines:1,font:e.title.font,align:"center",baseline:"middle"}});return i}function a(t){var e={x:t.rect.width/2,y:t.rect.height/2};return e}function s(t,e){var i=e._radialOptions,n=Math.max(Math.min(t,1),0)*(i.end-i.start)+i.start;return n}function o(t,e,i){var n=e._radialOptions,a=t*(n.end-n.start)+n.start,s=e._radius;return l({a:a,r:s},i)}function r(t){return{r:Math.sqrt(t.x*t.x+t.y*t.y),a:Math.atan2(t.y,t.x)}}function l(t,e){e||(e={x:0,y:0});return{x:e.x+t.r*Math.cos(t.a),y:e.y+t.r*Math.sin(t.a)}}return{renderRadial:e,getPointOfValue:o,getPolPos:r,getCartPos:l,getAngleOfNormalizedValue:s}}.apply(e,n),void 0!==a&&(t.exports=a))},487:function(t,e,i){"use strict";var n,a;!(n=[i(985)],a=function(t){var e={create:i};return e;function i(){return new t}}.apply(e,n),void 0!==a&&(t.exports=a))},983:function(t,e,i){"use strict";var n,a;!(n=[i(984)],a=function(t){var e={create:i};return e;function i(){return new t}}.apply(e,n),void 0!==a&&(t.exports=a))},984:function(t,e,i){"use strict";var n,a;!(n=[i(487)],a=function(t){function e(){this.alternativeTitleRetriever=t.create();this.cache={}}e.prototype.getDimensionTitle=i;e.prototype.getCachedDimensionTitle=n;e.prototype.getMeasureTitle=a;e.prototype.getCachedMeasureTitle=s;e.prototype.resetTitles=o;return e;function i(t,e,i){var n=this;return this.alternativeTitleRetriever.getDimensionTitle(t,e,i).then(function(e){l(n.cache,t.qDef.cId,e);return e})}function n(t){return r(this.cache,t.qDef.cId)}function a(t,e,i){var n=this;return this.alternativeTitleRetriever.getMeasureTitle(t,e,i).then(function(e){l(n.cache,t.qDef.cId,e);return e})}function s(t){return r(this.cache,t.qDef.cId)}function o(){this.alternativeTitleRetriever.resetTitles()}function r(t,e){return t[e]||""}function l(t,e,i){t[e]=i}}.apply(e,n),void 0!==a&&(t.exports=a))},985:function(t,e,i){"use strict";var n,a;!(n=[i(89),i(91),i(130)],a=function(t,e,i){function n(){this.titles={}}n.prototype.getDimensionTitle=a;n.prototype.getMeasureTitle=s;n.prototype.resetTitles=o;return n;function a(t,e,i){d(this);return r.call(this,t,e,i,true)}function s(t,e,i){d(this);return r.call(this,t,e,i,false)}function o(){this.titles={}}function r(t,e,i,n){var a=l(t,this.titles);if(a)return a.promise;a=h(t,this.titles);a.promise=c(t,e,i,n);return a.promise}function l(t,e){var i=u(t);return e[i]}function h(t,e){var i=u(t);var n={id:i,promise:null};e[i]=n;return n}function c(n,a,s,o){var r="H"===n.qDef.qGrouping,l=!!n.qLibraryId;if(r)return t.when(n.qData.title);if(l){var h=o?a.getDimensionList:a.getMeasureList;return h.call(a).then(function(t){var a=o?i.findLibraryDimension:i.findLibraryMeasure;var r=a(n.qLibraryId,t),l=r&&r.qData.labelExpression;return r?!s&&l?l:r.qData.title:e.get(o?"Object.ErrorMessage.MissingDimension":"Object.ErrorMessage.MissingMeasure")})}var c=n.qDef.qLabelExpression,u=!!c;if(u)return s?t.when(c):a.evaluate(c);var d;if(o){var p=n.qDef.qFieldLabels[0];d=!p?n.qDef.qFieldDefs[0]:p}else d=n.qDef.qLabel||n.qDef.qDef;return t.when(d)}function u(t){return t.qDef.cId}function d(t){if(!t)throw new Error("AlternativeTitleRetriever: Called without a context")}}.apply(e,n),void 0!==a&&(t.exports=a))}}]);