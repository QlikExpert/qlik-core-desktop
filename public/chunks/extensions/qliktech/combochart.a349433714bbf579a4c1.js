/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[41],{1033:function(e,t,i){"use strict";var s,n;!(s=[i(307),i(293),i(109)],n=function(e,t,i){var s;s=e.extend("SelectionHighlightLayer",{init:function e(){this._super.apply(this,arguments);this.ranges=[];this.color=i.toRGBA("#52cc52",.2)},setRanges:function e(t){this.ranges=t},update:function e(i){var s=this.ranges.map(function(e){var s=i.getPositionOfValue(e.min);var n=i.getPositionOfValue(e.max);var a=new t(s,0,n-s,this.rect.height);a.fill=this.color;return a},this);this.renderer.stage.removeChildren();if(s.length){this.renderer.stage.addChildren(s);this.show()}else this.hide()}});return s}.apply(t,s),void 0!==n&&(e.exports=n))},1035:function(e,t,i){"use strict";var s,n;!(s=[i(48),i(92),i(101),i(216),i(130),i(160),i(195),i(91),i(1036),i(983)],n=function(e,t,i,s,n,a,r,o,l,h){var c;e.directive("hypercubeDataItem",function(){return{restrict:"A",template:l,replace:true}});c=t.extend({init:function e(t,i,s){this._props=t;this._app=i;this._hyperCubePath=s;this.libraryTitles={};this.cachingAlternativeTitleRetriever=h.create()},setProperties:function e(t){this._props=t;this.cachingAlternativeTitleRetriever.resetTitles()},updateAlternativeItem:function e(t,s,n,o,l){var h=i.getValue(this._props,o,[]),c=i.getValue(this._props,n,[]),u=h[s.index];if(s.selected)return;s.original&&(u=i.getValue(this._props,n,[])[s.index]);u.qAttributeExpressions=a.moveById(t.data.qAttributeExpressions,u.qAttributeExpressions,a.IDMAP.COLOR_BY_EXPRESSION);var d,p,f,m;if(l)for(d=0;d<l.length;d++){m=l[d];p=i.getValue(c[t.index],m.path,[]);f=i.getValue(h[s.index],m.path,[]);p&&p.hasOwnProperty(m.property)&&f&&f.hasOwnProperty(m.property)&&(f[m.property]=p[m.property])}h.splice(s.index,1,c[t.index]);c.splice(t.index,1,u);r.colorByUpdater(this._props,"qHyperCubeDef.")},getDimensionOptions:function e(t,i,n,a,r){var o=this;return t.concat(i).filter(function(e){return e.qDef.cId===n.qDef.cId||!s.getDimensionLayout(e.qDef.cId,a,o._hyperCubePath)}).map(function(e){var s=o.cachingAlternativeTitleRetriever.getCachedDimensionTitle(e);o.cachingAlternativeTitleRetriever.getDimensionTitle(e,o._app).then(function(e){s=e});return{id:e.qDef.cId,index:-1!==t.indexOf(e)?t.indexOf(e):i.indexOf(e),original:-1!==t.indexOf(e),ref:"dimensions",selected:e.qDef.cId===n.qDef.cId,hasIcon:r,title:function e(){return s}}})},getMeasureOptions:function e(t,i,n,a,r){var o=this;return t.concat(i).filter(function(e){return e.qDef.cId===n.qDef.cId||!s.getMeasureLayout(e.qDef.cId,a,o._hyperCubePath)}).map(function(e){var s=o.cachingAlternativeTitleRetriever.getCachedMeasureTitle(e);o.cachingAlternativeTitleRetriever.getMeasureTitle(e,o._app).then(function(e){s=e});return{id:e.qDef.cId,index:-1!==t.indexOf(e)?t.indexOf(e):i.indexOf(e),original:-1!==t.indexOf(e),ref:"measures",selected:e.qDef.cId===n.qDef.cId,hasIcon:r,title:function e(){return s}}})},getTitle:function e(t,i){var s=t.qLibraryId,a=this,r=o.get(i?"Object.ErrorMessage.MissingDimension":"Object.ErrorMessage.MissingMeasure");function l(){return i?a._app.getDimensionList().then(function(e){return n.findLibraryDimension(s,e)}):a._app.getMeasureList().then(function(e){return n.findLibraryMeasure(s,e)})}if(s){if("undefined"!==typeof this.libraryTitles[s])return null===this.libraryTitles[s]?r:"string"!==typeof this.libraryTitles[s]?"":this.libraryTitles[s];this.libraryTitles[s]=l().then(function(e){if(e){a.libraryTitles[s]=e.qData.title;return a.libraryTitles[s]}a.libraryTitles[s]=null;return r});return this.libraryTitles[s]}return i?t.qDef.qFieldLabels[0]||t.qDef.qFieldDefs[0]:t.qDef.qLabel||t.qDef.qDef}});return c}.apply(t,s),void 0!==n&&(e.exports=n))},1036:function(e,t){e.exports='<li class="em-item lui-list__item" qva-activate="alternativeItemClicked($event,item,alternative);">\n\t<i ng-if="alternative.hasIcon" class="em-item-icon lui-icon lui-icon--tick lui-list__aside" ng-class="{\'em-invisible\': !alternative.selected}"></i>\n\t<span class="lui-list__text lui-list__text--ellipsis" qva-direction x-dir-text="{{alternative.title()}}"  title="{{alternative.title()}}">{{alternative.title()}}&nbsp;</span>\n</li>'},1037:function(e,t,i){"use strict";var s,n;!(s=[i(90)],n=function(e){function t(e,t){var i=t.length,s,n,a,r,o;if(e){n=!e.autoMinMax&&("min"===e.minMax||"minMax"===e.minMax)&&null!==e.min&&!Number.isNaN(+e.min);a=!e.autoMinMax&&("max"===e.minMax||"minMax"===e.minMax)&&null!==e.max&&!Number.isNaN(+e.max)}r=Number.MAX_VALUE;o=-Number.MAX_VALUE;for(s=0;s<i;s++){r=Math.min(r,t[s].qMin);o=Math.max(o,t[s].qMax);if(r<=0&&o>=0)return true}r=n?e.min:r;o=a?e.max:o;return r<=0&&o>=0}var i={applyDisclaimerAttributes:function i(s,n,a,r,o){n||(n={});var l=e.extend({limitedData:false,hasNegativeOrZeroData:false,onlyNegativeOrZero:false,onlyNanData:false,onlyNullColor:false,hasDataRangeIncludingZero:false},n);e.extend(n,l);n.noDataExist=o.qHyperCube.qSize.qcy*o.qHyperCube.qSize.qcx===0;if(n.noDataExist){a.toggleClass("qv-viz-with-disclaimer",false);return n}s=s||{};s.overlay=s.overlay||false;s.supportNegative=void 0===s.supportNegative||s.supportNegative;s.supportRangeOverZero=void 0===s.supportRangeOverZero||s.supportRangeOverZero;var h=e.getValue(o,"qHyperCube.qDataPages.0.qArea.qWidth",0)&&e.getValue(o,"qHyperCube.qDataPages.0.qArea.qHeight",0);h&&true!==s.explicitLimitedData?n.limitedData=!s.paging&&o.qHyperCube.qSize.qcy>o.qHyperCube.qDataPages[0].qMatrix.length:n.limitedData=true===s.explicitLimitedData;n.hasNegativeOrZeroData=!s.supportNegative&&o.qHyperCube.qMeasureInfo.some(function(e){return e.qMin<=0});n.onlyNegativeOrZero=!s.supportNegative&&o.qHyperCube.qMeasureInfo.every(function(e){return e.qMax<=0&&e.qMax>=e.qMin})||0===o.qHyperCube.qSize.qcy;n.onlyNanData=o.qHyperCube.qMeasureInfo.every(function(e){return e.qMax<e.qMin||"NaN"===e.qMax});n.hasDataRangeIncludingZero=!s.supportRangeOverZero&&t(o.measureAxis,o.qHyperCube.qMeasureInfo,o.lineType);if(n.onlyNegativeOrZero&&s.overlay||!(n.limitedData||n.hasNegativeOrZeroData&&!s.supportNegative||n.hasDataRangeIncludingZero||n.onlyNullColor)){a.toggleClass("qv-viz-with-disclaimer",false);r.options.showDisclaimerStar=false}else{a.toggleClass("qv-viz-with-disclaimer",s.bottom);r.options.showDisclaimerStar=true}return n}};return i}.apply(t,s),void 0!==n&&(e.exports=n))},1050:function(e,t,i){"use strict";var s,n;!(s=[i(48),i(91),i(89),i(1238),i(203),i(1129),i(1130),i(1131),i(1132),i(100),i(1133),i(1136)],n=function(e,t,i,s,n,a,r,o,l,h){var c,u=3;e.directive("qvaSimpleDataTitle",[function(){return{replace:true,template:l,restrict:"E",scope:{label:"=",locked:"=?",options:"="},link:function e(i){i.lockedTooltip=t.get("Tooltip.selections.locked")}}}]);e.directive("qvaDefaultDataTitle",[function(){return{replace:true,template:o,restrict:"E",scope:{data:"=",type:"=?",model:"=?",disabled:"=?",dock:"=?",options:"="}}}]);function d(e){this.relevantSize=this._titleFontHeight+u+(e?this._extraSizeWhenAlternatives:0)}function p(e,t){return"normal "+parseInt(e)*t+"px 'QlikView Sans'"}function f(){this._innerScope.options.parentType=this.options.parentType;var e=h.initializeService("object."+this.options.parentType);var t=e.layoutMap[this._layoutMode]||"medium";var i="full"===t?this._layoutMode:"medium";var s=e.getStyle("axis.title","fontSize");var a=p(e.scaleFontSize(s,i),this._innerScope.fontScale);this._innerScope.fontStyle.font=a;this._innerScope.fontStyle.color=e.getStyle("axis.title","color");this._titleFontHeight=n.getFontHeight(a)}c=s.extend("DataTitle",{init:function e(){var t=Array.prototype.slice.call(arguments),i=this;t.push(r);this._super.apply(this,t);this._showTitle=true;this._innerScope.fontScale=1;this._currentDrillDownLevels=[];this._innerScope.disabled=true;this._selectionsEnabled=true;this._innerScope.fontStyle={font:"12px 'QlikView Sans'"};f.call(this);this._extraSizeWhenAlternatives=10;this.drillUpRef=this._innerScope.$on("drill-up",function(e,t,s){i._currentDrillDownLevels[t]-s>0&&i.fire("drill-up",[e,t,i._currentDrillDownLevels[t]-s])})},calculateRelevantSize:function e(){this._super();f.call(this);d.call(this,this._hasAlternatives)},setShowStrategy:function e(t){this._showTitle=["all","title"].contains(t)},setDock:function e(t){this._super(t);this._innerScope.direction="right"===t?"top-to-bottom":"left"===t?"bottom-to-top":"";this._innerScope.dock=t},setType:function e(t){this._innerScope.type=t},setModel:function e(t){this._innerScope.model=t},setSelectionsEnabled:function e(t){this._selectionsEnabled=t;this._changed=true;this.invalidateProperties("dataTitle.setSelectionsEnabled")},setData:function e(t){this._super(t);if(!t)return;var s=this;var n=this._innerScope.model;if(!n||n.layout&&!!n.layout.snapshotData){s._changed=true;return i.resolve()}return a.modelHasAlternatives(this._innerScope.model,this._innerScope.type).then(function(e){s._hasAlternatives=e;s._changed=true;return s.invalidateProperties("dataTitle.setData")})},_updateProperties:function e(){this._super();if(this._changed&&this._data){var t=this._data;if(t.qHyperCube&&this._innerScope.type){t=a.getTitleDataFromHyperCube(t.qHyperCube,this._innerScope.type,this._selectionsEnabled);this._currentDrillDownLevels=t.map(function(e){return e.currentDrillDownLevels})}if(!this._innerScope)return;t.forEach(function(e){e.hasAlternatives=this._hasAlternatives},this);this._innerScope.titles=t;this._innerScope.$broadcast("datachanged");a.setWrapperStyle(this._innerScope.fontStyle,this._innerContainer,this._innerScope.direction,this._innerScope.titles)}this._changed=false},isVisible:function e(){return this._super.apply(this,arguments)&&this._showTitle},on:function e(){this._innerScope.disabled=false},off:function e(){this._innerScope.disabled=true},paint:function e(){this._innerScope.visible=true;this._innerScope.fontScale=this.chartScale;f.call(this);this._innerScope.$digest();a.setWrapperStyle(this._innerScope.fontStyle,this._innerContainer,this._innerScope.direction,this._innerScope.titles)},release:function e(){this._super();this.drillUpRef()},clear:function e(){this._super();this._innerScope.visible=false}});return c}.apply(t,s),void 0!==n&&(e.exports=n))},1052:function(e,t,i){"use strict";var s,n;!(s=[i(292),i(1253),i(1254),i(1255)],n=function(e,t,i,s){var n;n=e.extend("LineObject",{init:function e(n,a){this._super();this.data.label=n.info.label;if(a.showArea){this._areaLayer=new s;this.addChild(this._areaLayer)}this._lineLayer=new i;this.addChild(this._lineLayer);this._pointLayer=new t("circle");this.addChild(this._pointLayer)},update:function e(t){this._pointLayer.update(t);this._lineLayer.update(t);this.visible=this._pointLayer.visible||this._lineLayer.visible;if(this._areaLayer){this._areaLayer.update(t,this._lineLayer.children);this._areaLayer.visible&&(this.visible=true)}},getLinesInRange:function t(i,s,n){var a=new e;var r=this._lineLayer.getLineInRange(i,s);if(this._areaLayer){var o=this._areaLayer.getAreaFromSegments(r.children);a.addChildren([o])}a.addChildren([r]);a.addChildren(this._pointLayer.getFromRange(i,s,n));return a}});return n}.apply(t,s),void 0!==n&&(e.exports=n))},1126:function(e,t,i){"use strict";var s,n;!(s=[i(11),i(1127),i(180),i(1171),i(410),i(1050),i(1138)],n=function(e,t,i,s,n,a,r){var o;o=t.extend({init:function t(o,l,h,c,u){var d=e.extend(true,{components:{grid:{show:true,dock:"center",showFlag:i.prototype.ShowFlags.XSMALL,clazz:r},refLines:{clazz:s},colorLegend:{show:true,order:4,reductionOrder:1,dock:"right",relevantSize:126,showFlag:i.prototype.ShowFlags.MEDIUM},xAxis:{show:true,order:1,dock:"bottom",relevantSize:120,showFlag:i.prototype.ShowFlags.XSMALL,clazz:n},yAxis:{show:true,order:1,dock:"left",relevantSize:90,reductionOrder:2,showFlag:i.prototype.ShowFlags.XSMALL,clazz:n},yAxisTitle:{show:true,order:1.1,dock:"left",relevantSize:30,reductionOrder:1,showFlag:i.prototype.ShowFlags.SMALL,clazz:a},xAxisTitle:{show:true,order:1.1,dock:"bottom",relevantSize:30,reductionOrder:1,showFlag:i.prototype.ShowFlags.SMALL,clazz:a}}},h||{});this._super(o,l,d,c,u)},getVerticalComponents:function e(){var t=this._super();if(this._data&&this.components){if(this.components.xAxis&&this.components.xAxis.isVertical()&&this._data.xAxis){t.push({comp:this.components.xAxis,dock:this._data.xAxis.dock});this.components.xAxisTitle&&t.push({comp:this.components.xAxisTitle,dock:this._data.xAxis.dock})}if(this.components.yAxis&&this.components.yAxis.isVertical()&&this._data.yAxis){t.push({comp:this.components.yAxis,dock:this._data.yAxis.dock});this.components.yAxisTitle&&t.push({comp:this.components.yAxisTitle,dock:this._data.yAxis.dock})}}return t},_updateData:function e(t,i){this._super.apply(this,[].slice.call(arguments));this.updateDataArea(t,i);this.updateAxis(t,i);this.updateGrid(t,i);this.updateRefLines(t,i);this.updateVerticalComponentsDock()},updateDataArea:function e(t,i){var s,n;for(s in i.axes){n=i.axes[s];n.component.setDataIndices(n.dataIndices||[n.dataIndex||0]);n.component.setCurrentDataIndices(n.currentDataIndices||n.dataIndices||[n.dataIndex||0])}},setAxisDataRange:function e(t,i,s,n,a,r){var o,l;if(null!==n&&null!==a||null===n&&null===a){o=s;l=i}else if(null!==n&&n<=s){o=n-r;l=i}else if(null!==a&&a>=i){o=s;l=a+r}else{o=s;l=i}t.setDataRange(o,l);this.components.miniChart&&this.components.miniChart.components.measureAxis.setDataRange(o,l)},updateAxis:function e(t,i){var s,n=i.axes,a=this.components.miniChart,r,o;for(s in i.axes){r=n[s];r.component.setTitle(r.title);r.component.setShowStrategy(r.data.show);r.component.setLabelMode(r.data.label);r.component.setLockedInfo&&r.component.setLockedInfo(t.qHyperCube.qDimensionInfo.map(function(e){return true===e.qLocked}));if(r.component.setPlotMin&&!r.component.isDimension){o=this.getAxisOptions(r);r.component.setPlotMin(o.min);r.component.setPlotMax(o.max);r.component.setTickMultiplier(r.data.spacing);r.component.setLogScale(r.data.logarithmic);if(a&&a.components[s]){o=this.getAxisOptions(r);a.components[s].setPlotMin(o.min);a.components[s].setPlotMax(o.max)}}r.component.isVertical()?r.component.setDock("far"===r.data.dock?"right":"left"):r.component.setDock("far"===r.data.dock?"top":"bottom")}for(s in i.axisTitles){r=i.axisTitles[s];r.component.setShowStrategy(r.data.show);r.component.isVertical()?r.component.setDock("far"===r.data.dock?"right":"left"):r.component.setDock("far"===r.data.dock?"top":"bottom")}},getAxisOptions:function e(t){if(!t||!t.data)return;return t.data.autoMinMax?{min:null,max:null}:{min:["min","minMax"].contains(t.data.minMax)?Number(t.data.min):null,max:["max","minMax"].contains(t.data.minMax)?Number(t.data.max):null}},updateGrid:function e(t,i){if(!this.components.grid)return;var s,n;if(t.gridLine&&"number"===typeof t.gridLine.spacing){n=t.gridLine.auto?2:t.gridLine.spacing;for(s in i.axes)i.axes[s].component.setSpacingMode&&i.axes[s].component.setSpacingMode(n)}},updateRefLines:function e(t,i){var s,n=i.refLineLabels,a=[],r=[];for(s in n){if(!n[s].component)continue;n[s].component.setData(n[s].data);n[s].component.setAxis(n[s].axis);n[s].component.setDock(n[s].axis.getOppositeDock());r.push(n[s].axis);a.push(n[s].data)}if(i.refLines&&i.refLines.component){i.refLines.component.setAxes(r);i.refLines.component.setData(a)}}});return o}.apply(t,s),void 0!==n&&(e.exports=n))},1129:function(e,t,i){"use strict";var s,n;!(s=[i(291),i(89)],n=function(e,t){var i={hasAlternatives:a,getTitlesApproxWidth:o};function s(e,t,i){var s=[],n="dimension"===t?e.qDimensionInfo:e.qMeasureInfo,a=false,r,o,l;if(!t)return;for(l=0;l<n.length;l++){r=n[l];a=r.qGroupFallbackTitles&&r.qGroupFallbackTitles.length>1;o=a?r.qGroupFallbackTitles.slice(0,r.qGroupPos+1):[r.qFallbackTitle];s.push({labels:o,label:o[o.length-1],locked:r.qLocked&&i,isDrill:a&&i,currentDrillDownLevels:r.qGroupPos,wrapperStyle:{},index:l})}return s}function n(e,s){if(!(e&&e.getProperties))return t.resolve();var n="dimension"===s?"qDimensions":"qMeasures",a=e.getProperties().then(function(t){if(t.qExtendsId)return e.app.getObject(t.qExtendsId).then(function(e){return e.getProperties()});return t});return a.then(function(e){return i.hasAlternatives(e.qHyperCubeDef&&e.qHyperCubeDef.qLayoutExclude,n)})}function a(e,t){return e&&e.qHyperCubeDef&&e.qHyperCubeDef[t].length>0}function r(e,t,s,n){if(!t.width())return;if("top-to-bottom"===s||"bottom-to-top"===s){e.width=t.height();e.height=t.width();if("top-to-bottom"===s){e.marginTop=-e.width+e.height;e.marginLeft=e.height}else{e.marginTop=e.width+e.height;e.marginLeft=0}}else{e.width=t.width();e.height=t.height();e.marginLeft=0;e.marginTop=0}var a=n?n.map(function(e){return e.label}):[],r=i.getTitlesApproxWidth(a,e.font);if(r>e.width){e.justifyContent="flex-start";e.minWidth=70}else{e.justifyContent="center";e.minWidth="auto"}}function o(t,i){var s=0;t.forEach(function(t){"string"===typeof t&&(s+=e.getTextWidth(t,i))});return s||null}return{getTitleDataFromHyperCube:s,modelHasAlternatives:n,setWrapperStyle:r,getTitlesApproxWidth:o,hasAlternatives:a}}.apply(t,s),void 0!==n&&(e.exports=n))},1130:function(e,t){e.exports='<div ng-show="visible"\n     class="qva-chart-data-title">\n     <div class="qva-chart-data-title-rotate" ng-style="fontStyle" ng-class="direction" qva-direction x-dir-setting="{{options.direction}}">\n          <div class="qva-chart-data-title-align ellips-text">\n               <div class="qva-chart-data-title-wrapper ellips-text" ng-repeat-start="titleData in titles" ng-style="titleData.wrapperStyle" >\n                    <qva-breadcrumb-bar ng-if="titleData.isDrill" data="titleData" model="model" disabled="disabled || object.selectionsApi.active" type="type" dock="dock" column-index="$index" options="options"></qva-breadcrumb-bar>\n                    <qva-default-data-title ng-if="!titleData.isDrill" data="titleData" model="model" disabled="disabled || object.selectionsApi.active" type="type" dock="dock" options="options"></qva-default-data-title>\n               </div>\n               <span ng-repeat-end ng-if="!$last">, &nbsp;</span>\n          </div>\n\n     </div>\n</div>\n'},1131:function(e,t){e.exports='<div class="default-data-title-wrapper ellips-text">\n     <qva-simple-data-title ng-if="!data.hasAlternatives" label="data.label" locked="data.locked" options="options"></qva-simple-data-title>\n     <qva-dropdown-data-title ng-if="data.hasAlternatives" data="data" model="model" disabled="disabled" type="type" dock="dock" options="options"></qva-dropdown-data-title>\n</div>'},1132:function(e,t){e.exports='<div class="chart-data-title ellips-text" qva-direction x-dir-text="{{label}}" x-dir-setting="{{options.direction}}" >\n     <i ng-if="locked" class="lui-icon lui-icon--lock" title="{{lockedTooltip}}"></i>\n     <span class="chart-data-title-label" title="{{label}}" qva-direction x-dir-text="{{label}}" x-dir-setting="{{options.direction}}">{{label}}</span>\n</div>'},1133:function(e,t,i){"use strict";var s,n;!(s=[i(48),i(90),i(1134),i(1135),i(400),i(376),i(1035),i(101),i(89),i(97),i(315)],n=function(e,t,i,s,n,a,r,o,l,h){var c,u;c={template:s,controller:["$scope",function(e){e.position||(e.position="right");var t=new r(e.args.effectiveProperties,e.args.model.app),i=new a(e.args.model);e.alternativeItemClicked=function(s,n,a){s.stopPropagation();t.updateAlternativeItem(n,a,e.definition.items[a.ref].ref,e.definition.items[a.ref].alternativeRef,[{path:"qDef",property:"series"}]);i.saveSoftProperties(e.args.prevEffectiveProperties,e.args.effectiveProperties);e.closePopover()}}],scope:{alignTo:"=",position:"=",args:"=",definition:"=",item:"=",type:"=",closePopover:"=",qvaOutsideIgnoreFor:"=",options:"="}};function d(e){var t={left:"right",right:"left",top:"bottom",bottom:"top"};return t[e]}e.directive("qvaDropdownDataTitle",[function(){return{replace:true,template:i,restrict:"E",scope:{model:"=",type:"=",data:"=",disabled:"=",dock:"=",options:"="},link:function i(s,a){var p=e.getService("$cacheFactory"),f=p.get("em-object");var m={},g=s.model,x=new r(null,g.app);s.closePopover=function(){if(!s.isMenuOpen)return;s.isMenuOpen=false;if(u){u.close();u=null}};s.openAlternativePopover=function(){var t=d(s.dock);if(s.disabled)return;if(s.isMenuOpen){s.closePopover();return}s.isMenuOpen=true;u=e.getService("luiPopover").show({template:c.template,controller:c.controller,input:s.popoverSettings,alignTo:a[0],dock:t,variant:"inverse",closeOnOutside:true,closeOnEscape:true,outsideIgnore:"dataTitle-"+s.$id});u.closed.then(function(){s.isMenuOpen=false})};s.refreshItems=function(){l.all({effectiveProperties:g.getEffectiveProperties(),properties:g.getProperties().then(function(e){if(e.qExtendsId)return g.app.getObject(e.qExtendsId).then(function(e){return e.getProperties()});return e}),layout:g.getLayout()}).then(function(e){if(s.destroyed)return;m.args={layout:e.layout,model:g,properties:e.properties,effectiveProperties:t.extend(true,{},e.effectiveProperties),prevEffectiveProperties:t.extend(true,{},e.effectiveProperties),cache:f};m.data=e.effectiveProperties;m.definition=n.data;m.item=s.getAlternativeItem(m);s.popoverSettings={args:m.args,item:m.item,type:m.type,definition:m.definition,closePopover:s.closePopover,qvaOutsideIgnoreFor:"dataTitle-"+s.$id,options:s.options};s.isMenuOpen&&s.closePopover()})};s.refreshItems();s.$on("datachanged",function(){s.refreshItems()});s.getAlternativeItem=function(e){var t,i,n,a,r=s.data.index,l;if("dimension"===s.type){l=e.data.qHyperCubeDef.qDimensions[r];a=x.getDimensionOptions;n="dimensions"}else{l=e.data.qHyperCubeDef.qMeasures[r];a=x.getMeasureOptions;n="measures"}if(!l)return;t=o.getValue(e.data,e.definition.items[n].alternativeRef,[]);i=o.getValue(e.data,e.definition.items[n].ref,[]);t=a.call(x,i,t,l,e.args.layout,true);return{alternatives:t,index:Number.isNaN(+s.data.index)?0:s.data.index,data:l}};h.on("end",s.closePopover);s.$on("$destroy",function(){h.off("end",s.closePopover);s.destroyed=true;s.closePopover()})}}}])}.apply(t,s),void 0!==n&&(e.exports=n))},1134:function(e,t){e.exports='<div class="qva-dropdown-data-title">\n     <div class="dropdown-data-title-wrapper" ng-class="{\'interactive\' : !disabled, \'active\': isMenuOpen}" qva-activate="openAlternativePopover()" qva-outside-ignore-for="{{\'dataTitle-\' + $id}}">\n          <qva-simple-data-title locked="data.locked" label="data.label" options="options"></qva-simple-data-title>\n          <span class="dropdown-arrow"></span>\n     </div>\n</div>'},1135:function(e,t){e.exports='<lui-popover class="qva-alternative-data-picker"\n\t\t\t\t\t  align-to="alignTo"\n\t\t\t\t\t  position="position"\n\t\t\t\t\t  collision="\'flip fit\'"\n\t\t\t\t\t  height="\'auto\'"\n\t\t\t\t\t  on-close-view="closePopover();"\n\t\t\t\t\t  qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<div class="em-section-content em-alternative-data qva-alternative-data-picker-list" qva-direction x-dir-setting="{{options.direction}}">\n\t\t<div hypercube-data-item ng-repeat="alternative in item.alternatives" item="item"></div>\n\t</div>\n</lui-popover>\n'},1136:function(e,t,i){"use strict";var s,n;!(s=[i(48),i(109),i(1137),i(100),i(91),i(96)],n=function(e,t,i,s,n){var a={};function r(e){var i=s.initializeService("object."+(e.options.parentType||""));var n=i.getStyle("","backgroundColor");var r=i.getStyle("axis.title","color");var o=i.getStyle("axis.title.disabled","color");a.crumbColor={color:r};a.crumbButtonColor={color:o};a.crumbButtonHoverColor={color:r};a.crumbButtonLockedColor={color:r};a.crumbButtonDisabledColor={color:o};var l=t.toRGBA(n,0);var h=t.toRGBA(n,1);e.faderStyle={background:"linear-gradient(to right, "+h+", "+l+")"}}e.directive("qvaBreadcrumbBar",function(){return{template:i,restrict:"E",replace:true,scope:{data:"=",type:"=?",model:"=?",disabled:"=?",dock:"=?",columnIndex:"=",options:"="},link:function e(t,i){t.hoverIndex=-1;t.height=i.width();t.singleLabelMode=true;t.onClick=function(e,i,s){if(!t.disabled&&!s){t.$emit("drill-up",t.columnIndex,i);e.stopImmediatePropagation()}};t.drillDownTooltip=n.get("Tooltip.dimensions.drilldown");t.getCrumbStyle=function(e,t,i){return i?a.crumbButtonDisabledColor:t?{}:e?a.crumbButtonHoverColor:a.crumbButtonColor};r(t)}}})}.apply(t,s),void 0!==n&&(e.exports=n))},1137:function(e,t){e.exports='<div class="qv-breadcrumb">\n\t<div class="qv-breadcrumb-container">\n\t\t<span class="lui-icon lui-icon--drill-down" title="{{drillDownTooltip}}"></span>\n\t\t\t<span class="crumb-item" ng-repeat="label in data.labels track by $index">\n\n\t\t\t\t<div ng-style="getCrumbStyle(hoverIndex === $index, $last, disabled)"\n\t\t\t\t\t ng-mouseover="hoverIndex = $index"\n\t\t\t\t\t ng-mouseout="hoverIndex = -1"\n\t\t\t\t\t ng-class="{\'crumb-button\' : !$last, \'disabled\' : disabled}"\n\t\t\t\t\t qva-activate="onClick($event, $index, $last)">\n\n\t\t\t\t\t<div ng-if="!$last" class="chart-data-title" >\n\t\t\t\t\t\t<span qva-direction x-dir-text="{{label}}" class="chart-data-title-label" title="{{label}}">{{label}}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<qva-default-data-title ng-if="$last" data="data" model="model" disabled="disabled" type="type" direction="direction" dock="dock" options="options"></qva-default-data-title>\n\n\t\t\t\t\t<span class="lui-icon lui-icon--triangle-left" ng-if="!$last"></span>\n\t\t\t\t\t<span class="lui-icon lui-icon--triangle-right" ng-if="!$last"></span>\n\t\t\t\t</div>\n\t\t\t</span>\n\t</div>\n</div>'},1138:function(e,t,i){"use strict";var s,n;!(s=[i(180),i(203),i(100)],n=function(e,t,i){var s,n={NONE:0,SPARSE:1,NORMAL:1,DENSE:3};function a(e,t,i,s,n,a,r){var o,l,h,c;if(r){o=0;l=s;h=e;c=e}else{o=e;l=e;h=0;c=n}return{type:"line",opacity:i,strokeWidth:a,shape:{x1:o,x2:l,y1:h,y2:c},stroke:t}}function r(e,t){var i=e.ticks,s=e.minorTicks,r=i?i.length:0,o=s?s.length:0,l=e.getSpacingMode()===n.DENSE||e.isDimension,h=e.getSpacingMode()===n.SPARSE?2:1,c=t.rect.height,u=t.rect.width,d=t.style,p,f,m,g=[],x;if(e.getSpacingMode()===n.NONE||!i)return[];for(x=0;x<r;x+=1){f=i[x].position;p=i[x].value;m=i[x].opacity;x%h!==0&&0!==p||(0===p?g.push(a(f,d.zero.color,m,u,c,d.zero.width,e.isVertical())):g.push(a(f,d.major.color,m,u,c,d.major.width,e.isVertical())))}if(l&&s)for(x=0;x<o;x+=1){f=s[x].position;g.push(a(f,d.minor.color,1,u,c,d.minor.width,e.isVertical()))}return g}function o(e){return{ticks:{major:{color:e.getStyle("line.major","color")},minor:{color:e.getStyle("line.minor","color")},zero:{color:e.getStyle("line.highContrast","color")}}}}function l(){this.invalidateDisplay("Grid.setAxes")}s=e.extend("Grid",{init:function e(){this._super.apply(this,Array.prototype.slice.call(arguments));this._styleService=i.initializeService("object.grid");this._renderer=new t(this.container);this._renderer.edgeBleed={top:1,left:1,bottom:0,right:0};this._$renderAreaWrap.addClass("qv-chart-component-grid");this.renderers={gridlines:this._renderer}},afterRenderLines:function e(){},setAxes:function e(t,i){if(this._primaryHorizontalAxis!==t){this._primaryHorizontalAxis&&this._primaryHorizontalAxis.stopListen("changed",l,this);this._primaryHorizontalAxis=t;this._primaryHorizontalAxis&&this._primaryHorizontalAxis.listen("changed",l,this)}if(this._primaryVerticalAxis!==i){this._primaryVerticalAxis&&this._primaryVerticalAxis.stopListen("changed",l,this);this._primaryVerticalAxis=i;this._primaryVerticalAxis&&this._primaryVerticalAxis.listen("changed",l,this)}},hasValidData:function e(){return this._super()&&(this._primaryVerticalAxis||this._primaryHorizontalAxis)},paint:function e(t,i){this._super(t,i);var s=[];this._style=o(this._styleService);if(this._primaryVerticalAxis){this._primaryVerticalAxis.updateNow();s=r(this._primaryVerticalAxis,{rect:this.rect,style:this._style.ticks})}if(this._primaryHorizontalAxis){this._primaryHorizontalAxis.updateNow();s=s.concat(r(this._primaryHorizontalAxis,{rect:this.rect,style:this._style.ticks}))}this.afterRenderLines(s);this._renderer.shapes=s;this._renderer.render();return this},release:function e(){this._super();this._styleService=null;this._primaryHorizontalAxis&&this._primaryHorizontalAxis.stopListen("changed",null,this);this._primaryVerticalAxis&&this._primaryVerticalAxis.stopListen("changed",null,this)}});return s}.apply(t,s),void 0!==n&&(e.exports=n))},1139:function(e,t,i){"use strict";var s,n;!(s=[i(92),i(164),i(146),i(104),i(200),i(1140),i(256),i(232),i(96)],n=function(e,t,i,s,n,a,r,o,l){var h=22,c=200,u=1e-6;function d(e){e=Math.min(Math.max(e,this._minZoomLevel),this._maxZoomLevel);this._viewportProjection.setZoomLevel(e)}function p(e,t,i,s){var a,r,o,l,h,c=new n,u=i/s;o=t.x-e.x;l=t.y-e.y;a=this._localMatrix.clone().invert().transformPoint(e);c.translate(a.x,a.y);c.scale(u,u);c.translate(-a.x,-a.y);this._localMatrix=this._localMatrix.multiply(c);h=this._localMatrix.elements;this._localMatrix.translate(o/h[0][0],l/h[1][1]);m.call(this);c.identity();r=this._globalMatrix.clone().invert().transformPoint(e);c.translate(r.x,r.y);c.scale(u,u);c.translate(-r.x,-r.y);this._globalMatrix=this._globalMatrix.multiply(c);h=this._globalMatrix.elements;this._globalMatrix.translate(o/h[0][0],l/h[1][1])}function f(e){if(!this._setTransformOrigin){var t="top left";e.style["-webkit-transform-origin"]=t;e.style["-moz-transform-origin"]=t;e.style["-o-transform-origin"]=t;e.style["-ms-transform-origin"]=t;e.style["transform-origin"]=t;this._setTransformOrigin=true}}function m(){var e=this._localMatrix.elements,t="matrix("+e[0][0]+",0,0,"+e[1][1]+","+e[0][2]+","+e[1][2]+")";this.helpFunctions.setTransform(this._$element[0],t)}function g(e,t){this.helpFunctions.onInteractionStart();x.call(this,e,t)}function x(e,t){if(this._disableZoomOnMouseWheel)return;this._disableZoomOnMouseWheel=true;var i=this,s=new n,a;setTimeout(function(){i._disableZoomOnMouseWheel=false},i._mouseWheelTimeoutPeriod);if(this._zoomPanByWebkitTransform){var r;this._zooming=true;r=this._localMatrix.clone().invert().transformPoint(e);s.translate(r.x,r.y);s.scale(t,t);s.translate(-r.x,-r.y);this._localMatrix=this._localMatrix.multiply(s);m.call(this)}else A.call(this,e,t);if(!this._zoomCancelled){s.identity();a=this._globalMatrix.clone().invert().transformPoint(e);s.translate(a.x,a.y);s.scale(t,t);s.translate(-a.x,-a.y);this._globalMatrix=this._globalMatrix.multiply(s);this._updateCallback()}this._zoomCancelled=false}function _(){this._zooming=false;this.helpFunctions.onInteractionEnd()}function y(e,t){this.helpFunctions.onInteractionStart();v.call(this,e,t)}function v(e,t){var i;if(this._zoomPanByWebkitTransform){this._panning=true;i=this._localMatrix.elements;this._localMatrix.translate(e/i[0][0],t/i[1][1]);m.call(this)}else M.call(this,e,t);i=this._globalMatrix.elements;this._globalMatrix.translate(e/i[0][0],t/i[1][1]);this._updateCallback()}function b(){this._panning=false;this.helpFunctions.onInteractionEnd()}function M(e,t){this._viewportProjection.enabledChangeEvent=false;this.moveViewport(e,t);this._viewportProjection.enabledChangeEvent=true}function A(e,t){this._viewportProjection.enabledChangeEvent=false;this.zoomOnPixel(e,t);this._viewportProjection.enabledChangeEvent=true}var D=e.extend("PanZoomController",{init:function e(c,u,d,m){var M=this;this._minZoomLevel=-3;this._maxZoomLevel=h;this._interactionStarted=false;this._zoomPanByWebkitTransform=false;this._fractionalZoomMode=true;this._defaultScale=Math.pow(2,.5);this._invDefaultScale=1/this._defaultScale;this._mouseWheelTimeoutPeriod=50;this._viewportProjection=m||new a;this._viewportProjection.setMinZoomLevel(this._minZoomLevel);this._viewportProjection.setMaxZoomLevel(this._maxZoomLevel);this._localMatrix=new n;this._$element=c;this._offset=c.offset();this._startCallback=function(){u.start&&u.start(this._viewportProjection._transformMatrix)};this._updateCallback=function(){u.update&&u.update(this._viewportProjection._transformMatrix)};this._endCallback=function(){u.end&&u.end(this._viewportProjection._transformMatrix)};this._resetCallback=function(){u.reset&&u.reset(this._viewportProjection._transformMatrix)};this._enabled=true;this._defaultBounds=this._viewportProjection.getBoundingBox();this._dataBounds=d?new s(d.x,d.y,d.width,d.height):this._defaultBounds;this.helpFunctions={setTransform:function e(t,i){t.style["-webkit-transform"]=i;t.style["-moz-transform"]=i;t.style["-o-transform"]=i;t.style["-ms-transform"]=i;t.style.transform=i},onInteractionStart:function e(){if(M._interactionStarted)return;M._startCallback();M.reset();M._interactionStarted=true},onInteractionEnd:function e(){if(M._zooming||M._panning||M._pinching||!M._interactionStarted)return;M.helpFunctions.setTransform(M._$element[0],"matrix(1,0,0,1,0,0)");M._viewportProjection.enabledChangeEvent=false;M._viewportProjection.setTransformMatrix(M._globalMatrix);M._endCallback();M._viewportProjection.enabledChangeEvent=true;M._interactionStarted=false}};var A,D,w,S,C=false,q=this._$element[0],L=false;this.container=q;f.call(this,this._$element[0]);var P=function e(s){var n=t.getMouseWheelData(s.originalEvent),a,r,o,l;a=n.x-M._offset.left;r=n.y-M._offset.top;o=new i(a,r);l=n.delta>0?M._defaultScale:M._invDefaultScale;L?x.call(M,o,l):g.call(M,o,l);L=true;null!==S&&clearTimeout(S);S=setTimeout(function(){S=null;_.call(M);L=false},250)},k=function e(t,s){if(2===s.pagePoints.length){this.pinch={start:{},current:{}};this.pinch.start.point1=s.pagePoints[0];this.pinch.start.point2=s.pagePoints[1];s.centerPoint=new i((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2);s.scale=1;D={};D.x=(this.pinch.start.point1.x+this.pinch.start.point2.x)/2-M._offset.left;D.y=(this.pinch.start.point1.y+this.pinch.start.point2.y)/2-M._offset.top;w={x:s.centerPoint.x-M._offset.left,y:s.centerPoint.y-M._offset.top};M.helpFunctions.onInteractionStart();A=s.scale;D=w}else M.onPan("start",t,s);l.preventGestures(this.gestureHandler)},I=function e(t,s){if(2===s.pagePoints.length)if(this.pinch.start.point2){s.centerPoint||(s.centerPoint=new i((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2));this.pinch.current.point1=s.pagePoints[0];this.pinch.current.point2=s.pagePoints[1];this.startDistance=this.pinch.start.point2.distanceTo(this.pinch.start.point1);this.lastDistance=this.currentDistance;this.currentDistance=this.pinch.current.point2.distanceTo(this.pinch.current.point1);this.pinchLength=Math.abs(this.startDistance-this.currentDistance);this.scale=this.currentDistance/this.startDistance;s.scale=this.scale;s.delta=this.currentDistance-this.lastDistance;s.centerPoint.x=(this.pinch.current.point1.x+this.pinch.current.point2.x)/2;s.centerPoint.y=(this.pinch.current.point1.y+this.pinch.current.point2.y)/2;w={x:s.centerPoint.x-M._offset.left,y:s.centerPoint.y-M._offset.top};M._pinching=true;if(M._zoomPanByWebkitTransform){p.call(M,D,w,s.scale,A);A=s.scale}else{if(Math.abs(s.scale-A)>.1){x.call(M,w,s.scale-A+1);A=s.scale}v.call(M,w.x-D.x,w.y-D.y)}D=w}else this.pinch.start.point2=s.pagePoints[1];else M.onPan("update",t,s);l.preventGestures(this.gestureHandler)},T=function e(t,i){M._pinching=false;this._zoomPanByWebkitTransform||(this._zooming=false);M.onPan("end",t,i)},R=t.throttle(function(e){P(e)},20);this._eventHandlers=r.extend({preventDefault:true,mousewheel:function e(t){R(t)},swipe:{start:function e(t,i){k.call(this,t,i)},update:function e(t,i){I.call(this,t,i)},end:function e(t,i){T.call(this,t,i)}},swipetwo:{start:function e(t,i){k.call(this,t,i)},update:function e(t,i){I.call(this,t,i)},end:function e(t,i){T.call(this,t,i)}},tapthree:{end:function e(){M.zoomOnDataBounds();o.preventGestures(this)}},wheelswipe:{start:function e(t){M._panX=t.pageX;M._panY=t.pageY;C=false},update:function e(t){var i,s,n,a,r;i=t.pageX;s=t.pageY;n=i-M._panX;a=s-M._panY;r=C;!C&&(Math.abs(n)>3||Math.abs(a)>3)&&(C=true);if(C){M._panX=i;M._panY=s;r?v.call(M,n,a):y.call(M,n,a)}},end:function e(){C?b.call(M):M.zoomOnDataBounds();C=false}},active:function e(){return M._enabled}})},reset:function e(){this._localMatrix.identity();this._globalMatrix=this._viewportProjection.getTransformMatrix().clone();this._zoomPanByWebkitTransform&&this.helpFunctions.setTransform(this._$element[0],"matrix(1,0,0,1,0,0)")},setOffset:function e(t){this._offset=t},navigate:function e(t,i){var s=this,n;switch(t){case"resetZoom":s.zoomOnDataBounds();break;case"zoomIn":n=s.getZoomLevel();if(void 0===n||null===n||n===s._maxZoomLevel)return;g.call(s,{x:this._$element.width()/2,y:this._$element.height()/2},s._defaultScale);_.call(s);break;case"zoomOut":n=s.getZoomLevel();if(void 0===n||null===n||n===s._minZoomLevel)return;g.call(s,{x:this._$element.width()/2,y:this._$element.height()/2},s._invDefaultScale);_.call(s);break;case"navUp":y.call(s,0,c);b.call(s);break;case"navDown":y.call(s,0,-c);b.call(s);break;case"navLeft":y.call(s,c,0);b.call(s);break;case"navRight":y.call(s,-c,0);b.call(s);break;case"jumpTo":y.call(s,i.x,i.y);b.call(s);break;case"startAt":y.call(s,i.x,i.y);break;case"moveTo":v.call(s,i.x,i.y);break;case"endAt":b.call(s);break;default:break}},onPan:function e(t,i,s){var n=this;switch(t){case"start":y.call(n,s.swipe.deltaX,s.swipe.deltaY);break;case"update":v.call(n,s.swipe.curDeltaX,s.swipe.curDeltaY);break;case"end":b.call(n);break}},on:function e(){if(this._on)return;this._on=true;if(arguments.length)throw new Error("PanZoomController.on(): arguments has been deprecated");o.addInteraction(this._eventHandlers,this._$element[0],2,["tapthree","swipe","swipetwo","wheelswipe","mousewheel"])},off:function e(){this._on&&o.removeInteraction(this._eventHandlers);this._on=false},setMaxZoomLevel:function e(t){this._maxZoomLevel=t;this._viewportProjection&&this._viewportProjection.setMaxZoomLevel(t)},setMinZoomLevel:function e(t){this._minZoomLevel=t;this._viewportProjection&&this._viewportProjection.setMinZoomLevel(t)},setCenter:function e(t){this._viewportProjection&&this._viewportProjection.setDataCenter(t)},getCenter:function e(){if(this._viewportProjection)return this._viewportProjection.getDataCenter();return null},setZoomLevel:function e(t){if(Number.isNaN(+t)||!Number.isFinite(+t))return;Math.abs(t-Math.round(t))<u&&(t=Math.round(t));d.call(this,t)},getZoomLevel:function e(){if(this._viewportProjection)return this._viewportProjection.getZoomLevel();return 0},moveViewport:function e(t,s){var n=this._viewportProjection.getSize();this.setCenter(this._viewportProjection.invProject(new i(n.x/2-t,n.y/2-s)))},zoom:function e(t){if(t>0){var i=Math.log(t)/Math.LN2;Math.abs(i-Math.round(i))<u&&(i=Math.round(i));this.setZoomLevel(this.getZoomLevel()+i)}},zoomOnPixel:function e(t,i){var s=this.getZoomLevel(),n,a;if(s<=this._minZoomLevel&&i<=1||s>=this._maxZoomLevel&&i>=1){this._zoomCancelled=true;return}n=Math.pow(2,this._minZoomLevel-s);a=Math.pow(2,this._maxZoomLevel-s);i=Math.min(Math.max(i,n),a);this._viewportProjection.zoomOnPixel(t,i)},zoomOnDataRectangle:function e(t,i){this._viewportProjection.zoomOnDataRectangle(t,i)},zoomOnViewportRectangle:function e(t,i){var s=this._viewportProjection.fromViewportRectToDataRect(t);this.zoomOnDataRectangle(s,i)},setBounds:function e(t,i,n,a){if(Number.isNaN(+t)||Number.isNaN(+i)||Number.isNaN(+n)||Number.isNaN(+a))return;this._dataBounds=new s(t,i,n,a)},setBoundsRect:function e(t){if(!t||this._dataBounds&&this._dataBounds.equal(t))return;this._dataBounds=t.clone()},zoomOnDataBounds:function e(){var t=this._dataBounds&&!this._dataBounds.hasNaN()?this._dataBounds:this._defaultBounds;if(t){this.zoomOnDataRectangle(t,false);this._resetCallback();this._viewportProjection.fire("resetZoomFinished");return true}},setFractionalZoomMode:function e(t){this._fractionalZoomMode=t;this._defaultScale=this._fractionalZoomMode?Math.pow(2,.5):2;this._invDefaultScale=1/this._defaultScale;this._mouseWheelTimeoutPeriod=this._fractionalZoomMode?50:100;this._viewportProjection&&this._viewportProjection.setFractionalZoomMode(t)},getFractionalZoomMode:function e(){return this._fractionalZoomMode},setZoomPanByWebkitTransform:function e(t){this._zoomPanByWebkitTransform=t},getZoomPanByWebkitTransform:function e(){return this._zoomPanByWebkitTransform},release:function e(){this._viewportProjection=null;this._$element=null}});Object.defineProperties(D.prototype,{enabled:{set:function e(t){this._enabled=t},get:function e(){return this._enabled}}});return D}.apply(t,s),void 0!==n&&(e.exports=n))},1140:function(e,t,i){"use strict";var s,n;!(s=[i(1047),i(146),i(104),i(1141),i(200)],n=function(e,t,i,s,n){var a,r=22,o=1e-9,l=.001,h=new t(0,0),c=Math.log(2);function u(e){if(this._originalProjectedDataCenterIsZeroPoint)return e;return new t(e.x-this._originalProjectedDataCenter.x,e.y-this._originalProjectedDataCenter.y)}function d(e){if(this._originalProjectedDataCenterIsZeroPoint)return e;return new t(e.x+this._originalProjectedDataCenter.x,e.y+this._originalProjectedDataCenter.y)}function p(e,i){var s=Math.pow(2,i+8)/this._projectedDataSize;return new t(e.x*s,e.y*s)}function f(e,i){var s=Math.pow(2,i+8)/this._projectedDataSize;return new t(e.x/s,e.y/s)}function m(){if(!this._projection||!this._projectedDataBoundingBox)return;var e,t,i,s,n;(!this._currentProjectedDataDataCenter||this._projectionChanged||this._currentDataCenterChanged)&&(this._currentProjectedDataDataCenter=void 0===this._currentDataCenter?this._originalProjectedDataCenter:this._projection.project(this._currentDataCenter));this._transformMatrixForZoomLevel.identity();this._transformMatrixForZoomLevel.translate(this._viewportSize.x/2,this._viewportSize.y/2);this._mirrorYAxis&&this._transformMatrixForZoomLevel.scale(1,-1);e=Math.pow(2,this._zoomLevel+8)/this._projectedDataSize;this._transformMatrixForZoomLevel.scale(e,e);this._transformMatrixForZoomLevel.translate(-this._originalProjectedDataCenter.x,-this._originalProjectedDataCenter.y);t=this._transformMatrixForZoomLevel.transformPoint(this._originalProjectedDataCenter);i=this._transformMatrixForZoomLevel.transformPoint(this._currentProjectedDataDataCenter);s=t.x-i.x;n=t.y-i.y;this._transformMatrix.identity();this._transformMatrix.translate(s,n);this._transformMatrix.multiply(this._transformMatrixForZoomLevel.elements);this._invTransformMatrix=this._transformMatrix.clone();this._invTransformMatrix.invert();this._projectionChanged=false;this._currentDataCenterChanged=false;this.enabledChangeEvent&&this.fire("changed")}function g(){var e,t,s,n,a,r;e={x:this._boundingBox.x,y:this._boundingBox.y};t={x:this._boundingBox.x+this._boundingBox.width,y:this._boundingBox.y+this._boundingBox.height};s=this._projection.project(e);n=this._projection.project(t);a=Math.min(s.x,n.x);r=Math.min(s.y,n.y);this._projectedDataBoundingBox=new i(a,r,Math.abs(n.x-s.x),Math.abs(n.y-s.y));this._projectedDataSize=Math.max(this._projectedDataBoundingBox.width,this._projectedDataBoundingBox.height);this._originalProjectedDataCenter=this._projectedDataBoundingBox.getCenterPoint();this._originalProjectedDataCenterIsZeroPoint=0===this._originalProjectedDataCenter.x&&0===this._originalProjectedDataCenter.y}a=e.extend("ViewportProjection",{init:function e(){this._super();this._fractionalZoomMode=true;this._viewportSize=new t(256,256);this._zoomLevel=0;this._maxZoomLevel=r;this._minZoomLevel=0;this._translation=new t(0,0);this._unitProjection=new s;this._projection=this._unitProjection;this._originalProjectedDataCenter=new t(0,0);this._boundingBox=new i(0,0,256,256);g.call(this);this._originalProjectedDataCenterIsZeroPoint=true;this._transformMatrixForZoomLevel=new n;this._transformMatrix=new n;this._invTransformMatrix=new n;this.enabledChangeEvent=true;this._mirrorYAxis=false;this.helpFunctions={translateProjectedDataCenterToZeroPoint:u,invTranslateProjectedDataCenterToZeroPoint:d,scaleProjectedDataToZoomLevel:p,invScaleProjectedDataToZoomLevel:f,updateProjectedDataBoundingBox:g}},setProjection:function e(t){if(this._projection&&t&&this._projection.getProjectionType()===t.getProjectionType())return false;this._projection=t;this._projection||(this._projection=this._unitProjection);g.call(this);this._projectionChanged=true;m.call(this);return true},getProjection:function e(){return this._projection},getUnitProjection:function e(){return this._unitProjection},setBoundingBox:function e(t){if(this._boundingBox&&this._boundingBox.equal&&this._boundingBox.equal(t))return;this._boundingBox=new i(t.x,t.y,t.width,t.height);g.call(this);m.call(this)},getBoundingBox:function e(){return this._boundingBox},setSize:function e(i){if(this._viewportSize&&this._viewportSize.equal&&this._viewportSize.equal(i))return false;this._viewportSize=new t(i.x,i.y);m.call(this);return true},getSize:function e(){return this._viewportSize},setZoomLevel:function e(t){if(Number.isNaN(+t))return false;this._fractionalZoomMode||(t=Math.round(t));t=Math.max(Math.min(t,this._maxZoomLevel),this._minZoomLevel);Math.abs(t-this._minZoomLevel)<l?t=this._minZoomLevel:Math.abs(t-this._maxZoomLevel)<l&&(t=this._maxZoomLevel);if(Math.abs(this._zoomLevel-t)<l)return false;this._zoomLevel=t;m.call(this);return true},getZoomLevel:function e(){return this._zoomLevel},setDataCenter:function e(i){if(!i)return false;if(this._currentDataCenter&&this._currentDataCenter.closeTo&&this._currentDataCenter.closeTo(i,o))return false;this._currentDataCenterChanged=true;this._currentDataCenter=new t(i.x,i.y);m.call(this);return true},getDataCenter:function e(){return this._currentDataCenter},setFractionalZoomMode:function e(t){this._fractionalZoomMode=t},getFractionalZoomMode:function e(){return this._fractionalZoomMode},project:function e(t){var i,s;i=this._projection.project(t);s=this.transform(i);return s},fromDataRectToViewportRect:function e(s){var n,a,r;n=this.project(new t(s.x,s.y));a=this.project(new t(s.x+s.width,s.y+s.height));r=new i(n.x,n.y,a.x-n.x,a.y-n.y);return r},invProject:function e(t){var i,s;i=this.invTransform(t);s=this._projection.invProject(i);return s},fromViewportRectToDataRect:function e(s){var n,a,r;n=this.invProject(new t(s.x,s.y));a=this.invProject(new t(s.x+s.width,s.y+s.height));r=new i(n.x,n.y,a.x-n.x,a.y-n.y);return r},getDataRectOfViewport:function e(){var t,s,n;t=this.invProject(h);s=this.invProject(this._viewportSize);n=new i(t.x,t.y,s.x-t.x,s.y-t.y);return n},getDataRectOfViewportIfZoomOnADataRect:function e(t){var i=this.enabledChangeEvent;this.enabledChangeEvent=false;var s=this.getZoomLevel();var n=this.getDataCenter();this.zoomOnDataRectangle(t);var a=this.getDataRectOfViewport();this.setZoomLevel(s);this.setDataCenter(n);this.enabledChangeEvent=i;return a},transform:function e(i){var s=this._transformMatrix.transformPoint(i);return new t(s.x,s.y)},invTransform:function e(i){var s=this._invTransformMatrix.transformPoint(i);return new t(s.x,s.y)},fromDataPointToPixel:function e(i,s){var n=Math.pow(2,s+7),a,r,o,l;a=this._projection.project(i);r=u.call(this,a);o=p.apply(this,[r,s]);l=new t(o.x+n,n-o.y);return l},fromPixelToDataPoint:function e(i,s){var n=Math.pow(2,s+7),a,r,o,l;l=new t(i.x-n,n-i.y);o=f.apply(this,[l,s]);r=d.call(this,o);a=this._projection.invProject(r);return a},calculateZoomLevelForDataRectangle:function e(i){if(!i)return;var s,n,a,r,o,l,h,c,u,d;s=new t(i.x,i.y);n=new t(i.x+i.width,i.y+i.height);a=this.fromDataPointToPixel(s,0);r=this.fromDataPointToPixel(n,0);o=Math.abs(a.x-r.x);l=Math.abs(a.y-r.y);h=0===o?Number.MAX_VALUE:this._viewportSize.x/o;c=0===l?Number.MAX_VALUE:this._viewportSize.y/l;u=Math.min(h,c);if(u===Number.MAX_VALUE)return 20;d=Math.log(u)/Math.LN2;return d},calculateCenterPointForDataRectangle:function e(i){if(!i)return;var s,n,a,r,o,l;s=new t(i.x,i.y);n=new t(i.x+i.width,i.y+i.height);a=this.fromDataPointToPixel(s,0);r=this.fromDataPointToPixel(n,0);o=new t((a.x+r.x)/2,(a.y+r.y)/2);l=this.fromPixelToDataPoint(o,0);return l},moveViewport:function e(i,s){this.setDataCenter(this.invProject(new t(this._viewportSize.x/2-i,this._viewportSize.y/2-s)))},zoom:function e(t){t>0&&this.setZoomLevel(this.getZoomLevel()+Math.log(t)/Math.LN2)},zoomOnPixel:function e(t,i){if(i>0){var s,n,a;s=this.invTransform(t);a=Math.log(i)/Math.LN2;this.setZoomLevel(this.getZoomLevel()+a);n=this.transform(s);this.moveViewport(t.x-n.x,t.y-n.y)}},zoomOnDataRectangle:function e(t,i){if(!t)return;var s,n;s=this.calculateZoomLevelForDataRectangle(t);this._fractionalZoomMode||(s=i?Math.round(s):Math.floor(s));this.setZoomLevel(s);n=this.calculateCenterPointForDataRectangle(t);this.setDataCenter(n)},setMaxZoomLevel:function e(t){this._maxZoomLevel=t},setMinZoomLevel:function e(t){this._minZoomLevel=t},getTransformMatrix:function e(){return this._transformMatrix},setTransformMatrix:function e(i){var s,n,a;this._invTransformMatrix=i.clone().invert();s=Math.abs(i.elements[0][0]);n=Math.log(s*this._projectedDataSize)/c-8;a=this.invProject(new t(this._viewportSize.x/2,this._viewportSize.y/2));this.setZoomLevel(n);this.setDataCenter(a)},getInvTransformMatrix:function e(){return this._invTransformMatrix}});return a}.apply(t,s),void 0!==n&&(e.exports=n))},1141:function(e,t,i){"use strict";var s,n;!(s=[i(92)],n=function(e){var t;t=e.extend("UnitProjection",{init:function e(){},getProjectionType:function e(){return"Unit"},project:function e(t){return t},invProject:function e(t){return t}});return t}.apply(t,s),void 0!==n&&(e.exports=n))},1166:function(e,t,i){"use strict";var s,n;!(s=[i(180),i(1233),i(1235),i(109),i(104),i(292),i(278),i(293),i(100),i(89),i(1033),i(1236)],n=function(e,t,i,s,n,a,r,o,l,h,c){var u,d="stacked",p="grouped";var f=document.createElement("canvas"),m=f.getContext("2d");function g(e){var t=1;f.width=5*t;f.height=5*t;m.save();m.fillStyle=s.toRGBA(e,.8);m.scale(t,t);m.fillRect(0,0,1,1);m.fillRect(0,1,1,1);m.fillRect(1,0,1,1);m.fillRect(4,1,1,1);m.fillRect(4,2,1,1);m.fillRect(3,2,1,1);m.fillRect(3,3,1,1);m.fillRect(2,3,1,1);m.fillRect(2,4,1,1);m.fillRect(1,4,1,1);m.restore();return m.createPattern(f,"repeat")}u=e.extend("BarArea",{init:function e(){this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._shapes=[];this._barData=[];this._showDataPoints=true;this._colorMap=null;this._groupingMode=p;this._globalAlpha=1;this._styleService=l.initializeService("object.barChart");this._edgeBleed=0;this._barLayer=new t(this.container);this._barLayer.isMini=this.isMini;this.layers=[this._barLayer];if(this.isMini){this._rangeSelectionLayer=new c(this.container);this.layers.push(this._rangeSelectionLayer)}else{this._labelLayer=new i(this.container);this.layers.push(this._labelLayer)}},setYMirrorMode:function e(t){this._super(t);this._labelLayer&&this._labelLayer.setYMirrorMode(t)},beforeBarsAddedToRenderer:function e(){},barsAddedToRenderer:function e(){},labelAddedToRenderer:function e(){},afterPaint:function e(){return h.resolve()},setColorMap:function e(t){this._colorMap=t},getColorMap:function e(){return this._colorMap},setShowDataPoints:function e(t){this._showDataPoints=t;this.invalidateDisplay("BarArea.setShowDataPoints")},getShowDataPoints:function e(){return this._showDataPoints},getMeasureIndices:function e(){return this._measureIndices},setMeasureIndices:function e(t){this._measureIndices=t},setMajorAxis:function e(t){this._majorAxis=t;this._majorAxis.listen("changed",function(){this.invalidateDisplay("BarArea.setMajorAxis")},this)},setMinorAxis:function e(t){this._minorAxis=t;this._minorAxis.listen("changed",function(){this._localFormatting&&(this._areLabelsFormatted=false);this.invalidateDisplay("BarArea.setMinorAxis")},this)},setTimeAxis:function e(t){this.timeAxis=t;this.timeAxis.listen("changed",function(){this.invalidateDisplay()},this)},setContinuousAxis:function e(t){this.continuousAxis=t;this.continuousAxis.listen("changed",function(){this.invalidateDisplay()},this)},setActiveDimensionAxis:function e(t){this._activeDimAxis=t},setIsDimensionContinuous:function e(t){this.isDimensionContinuous=t;this._edgeBleed=this.isDimensionContinuous?5:0},setDimensionTree:function e(t){this._tree=t},setGroupingMode:function e(t){this._groupingMode=t},_updateSize:function e(){this.invalidateDisplay("BarArea._updateSize")},insertAdjacentTo:function e(t,i){this._super(t,i);if(this._minorAxis&&this._minorAxis.isHorizontal())switch(this._minorAxis.dock){case"bottom":this.rect.height-=1;break}},getMajorAxisData:function e(){return this._majorAxisData},getMinorAxisData:function e(){return this._minorAxisData},setCacheItems:function e(t){this._cacheItems=t},getCacheItems:function e(){return this._cacheItems},createAxisData:function e(t,i,s,n){if(!n){this._cacheIndex=0;this._outerCacheIndex=0}var a=i.stackLevel===n+1,r,o=t.children,l=i.numLevels-i.numMeasures;"measure"===i.types[n]&&this._measureIndices&&(o=o.filter(function(e,t){return this._measureIndices.indexOf(t)>=0},this));return o.map(function(e){var t;if("dimension"===i.types[n]){t={label:e.data.qText,group:"dimension"===i.types[n+1]||"measure"===i.types[n+1]&&i.numMeasures>1,id:e.data.id,cacheIndex:[]};if("measure"===i.types[n+1])for(r=0;r<i.numMeasures;r++)t.cacheIndex.push(this._cacheIndex++);else l>1&&0===n&&e.children.forEach(function(e){if(e.children[0].isBranch){-2!==e.data.qElemNo&&t.cacheIndex.push(this._outerCacheIndex);this._outerCacheIndex++}},this);!a&&("dimension"===i.types[n+1]||"measure"===i.types[n+1]&&i.numMeasures>1)&&(t.children=this.createAxisData(e,i,s,n+1))}else"measure"===i.types[n]&&(t={label:e.data.qText,id:e.data.id});return t},this)},_createMeasureDisplayNode:function e(t,i){if(!t.isBranch)return;var s=true===this.isMini||this._isStacked?new o:new r,a=t.children,l=a[0].data,h=t.parent.cacheItem,c=new n(0,0,0,0),u=this.measureFormatters[i],d="undefined"!==typeof l.qValue?l.qValue:l.qNum,p=t.ancestors.filter(function(e){return"qElemNo"in e.data}).map(function(e){return e.data.qElemNo}).reverse();s.data={qText:t.data.qText,measureIndex:i,value:d,start:0,end:d,valueLabel:t.children[0].data.qText,formatted:!u||"U"!==u.type,hitRect:c,cacheItem:h,color:this._colorMap.getColor(p,d,i,t.data.rowIndex)};h.addShape("dataArea",c,true);h.calculateTooltipPosition=true;s.data.fill=s.data.color.toRGBA();s.fill=s.data.fill;s.data.isFillColorDark=s.data.color.isDark();return s},_createDimensionDisplayNode:function e(t){var i=new a;i.data={qText:t.data.qText,qElemNo:t.data.qElemNo,qMaxPos:t.data.qMaxPos,qMinNeg:t.data.qMinNeg,qType:t.data.qType};return i},_createStackNode:function e(){var t=new a;t.data={stack:true};return t},_createOtherNode:function e(t,i){var s=new o,a=new n(0,0,0,0),r=this.measureFormatters[0];s.data={measureIndex:0,value:i-t,start:t,end:i,isFakeOtherCell:true,highlightOnGroupSelect:0===this._selectionIndices[0],valueLabel:"valueLabel",formatted:!r||"U"!==r.type,hitRect:a,cacheItem:{},color:this._colorMap.getColor([-3],i-t,0,0)};s.data.fill=s.data.color.toRGBA();s.fill=s.data.fill;s.data.isFillColorDark=s.data.color.isDark();return s},_addOtherNode:function e(t,i,s){var n=this._createDimensionDisplayNode({data:{qMaxPos:0,qMinNeg:0,qElemNo:-3,qType:"O"}}),a=this._createOtherNode(t.data.sum,i);a.data.axisId=s.data.id;a.data.cacheItem=s.cacheItem;n.addChild(a);t.data.sum=i;t.addChild(n);return a},_stackNodes:function e(t,i,s,n){var a,r,o,l=this._createStackNode(),h=this._createStackNode(),c=false,u=false,d,p,f=0,m=0;l.data.isStack=true;h.data.isStack=true;t.forEach(function(e){a=i;o=e.children&&e.children[0]?e.children[0].data:e.data;if(o.value>=0){a=l;o.start=f;f+=o.value;o.end=f;r=f;d=true;a.addChild(e);"O"===e.data.qType&&(c=true)}else if(!Number.isNaN(+o.value)){a=h;o.start=m;m+=o.value;o.end=m;r=m;p=true;a.addChild(e);"O"===e.data.qType&&(u=true)}a.data.sum=r});if("undefined"!==typeof i.data.qMaxPos&&!c&&f!==i.data.qMaxPos){n.push(this._addOtherNode(l,i.data.qMaxPos,s));f=l.data.sum;d=f>0}if("undefined"!==typeof i.data.qMinNeg&&!u&&m!==i.data.qMinNeg){n.push(this._addOtherNode(h,i.data.qMinNeg,s));m=h.data.sum;p=m<0}if(d){l.data.valueLabel=this.combinedMeasuresFormatter?this.combinedMeasuresFormatter.formatValue(l.data.sum):l.data.sum+"";i.addChild(l)}if(p){h.data.valueLabel=this.combinedMeasuresFormatter?this.combinedMeasuresFormatter.formatValue(h.data.sum):h.data.sum+"";i.addChild(h)}i.data.sum={positive:f,negative:m}},getRenderTree:function e(t,i,s,n){var a=i.stackLevel===n+1,r=[],o,l,h,c,u,d,p;h=t.children;"measure"===i.types[n]&&this._measureIndices&&(h=h.filter(function(e,t){return this._measureIndices.indexOf(t)>=0},this));u=h.length;for(c=0;c<u;c++){p=h[c];if("dimension"===i.types[n]){d=this._createDimensionDisplayNode(p);l=this.getRenderTree(p,i,s,n+1);if(a){this._stackNodes(l,d,p,s.otherShapes);s.globalPositiveSum=Math.max(s.globalPositiveSum,d.data.sum.positive);s.globalNegativeSum=Math.min(s.globalNegativeSum,d.data.sum.negative)}else d.addChildren(l);d.isBranch&&r.push(d)}else if("measure"===i.types[n]){d=this._createMeasureDisplayNode(p,this._measureIndices?this._measureIndices[c]:c);if(!d)continue;o=p;i.numMeasures<=1&&(o=o.parent);i.stackLevel===n&&(o=o.parent);d.data.axisId=o.data.id;d.data.axisNum=1===n?o.data.qNum:o._parent.data.qNum;s.shapes.push(d);r.push(d)}}return r},_applyIds:function e(t,i,s,n){var a;t.children.forEach(function(e,r){a=t.data.id?t.data.id+";"||false:"";if("dimension"===s[n]){e.data.id=a+i[n]+":"+e.data.qElemNo;this._applyIds(e,i,s,n+1)}else"measure"===s[n]&&(e.data.id=a+i[n+r])}.bind(this))},renderRangeSelections:function e(){this._rangeSelectionLayer.update(this._activeDimAxis);return this._rangeSelectionLayer.render()},updateRangeSelection:function e(t){if(this._rangeSelectionLayer){this._rangeSelectionLayer.setRanges(t);this.renderRangeSelections()}this.isMini||(this._barLayer.selectedRanges=t)},_updateProperties:function e(){if(!this._data||!this._tree)return;this._barLayer.renderer.stage.removeChildren();var t=this._data.qHyperCube.qDimensionInfo.length,i=this._measureIndices?this._measureIndices.length:this._data.qHyperCube.qMeasureInfo.length,s=this._groupingMode===d&&(t>1||i>1),n=t+1,a=-2,r=[],o=new Array(t).join(",").split(",").map(function(){return"dimension"}),l=this._data.qHyperCube.qDimensionInfo.concat(this._data.qHyperCube.qMeasureInfo).map(function(e){return e.cId}),h=this._data.qHyperCube.qDimensionInfo.map(function(e){return e.qApprMaxGlyphCount});o.push("measure");h.push(this._data.qHyperCube.qMeasureInfo.reduce(function(e,t){return Math.max(e,t.qApprMaxGlyphCount)},0));if(s)a=i>1?t:t-1;else if(t>1){var c=this._data.qHyperCube.qDimensionInfo[0].qStateCounts.qOption+this._data.qHyperCube.qDimensionInfo[0].qStateCounts.qSelected;var u=this._data.qHyperCube.qSize.qcy/c;r.push(u);r.push(i)}else{r.push(i);r.push(1)}this._isStacked=s;var p={columns:[],shapes:[],shapesToLabel:[],otherShapes:[],globalPositiveSum:0,globalNegativeSum:0};var f={colIds:l,types:o,numLevels:n,numMeasures:i,stackLevel:a};if(t>1&&this._allowInnerSelection&&!this._data.qHyperCube.qDimensionInfo[1].qLocked){this.setSelectionIndices([1]);this._majorAxis.setSelectionIndices([1]);this._majorAxis.setCurrentDataIndices([1])}else{this.setSelectionIndices([0]);this._majorAxis.setSelectionIndices([0]);this._majorAxis.setCurrentDataIndices([0])}this._applyIds(this._tree,l,o,0);var m=this.getRenderTree(this._tree,f,p,0);this._objects=m;this._formatted=this._isStacked||this.measureFormatters.every(function(e,t){var i=!this._measureIndices||this._measureIndices.indexOf(t)>=0;return!i||e&&"U"!==e.type},this);this._shapes=p.shapes;var g=p.shapes.map(function(e){return e.data.cacheItem});this._shapes=this._shapes.concat(p.otherShapes);m.forEach(function(e){this._barLayer.renderer.stage.addChild(e)}.bind(this));var x=this.createAxisData(this._tree,f,p,0);var _=o.map(function(e,t){return{qApprMaxGlyphCount:h[t],show:t<o.length-1,groupSize:r[t]}});this._majorAxisData={data:x,info:_};this._numDimensions=t;this._numMeasures=i;this._minorAxisData=s?{min:p.globalNegativeSum,max:p.globalPositiveSum}:null;this.setSelectableShapes(g)},hasValidData:function e(){return this._super()&&this._majorAxis&&this._minorAxis&&this._data&&this._tree&&(this._data.qHyperCube.qStackedDataPages.length>0||this._data.qHyperCube.qDataPages.length>0)},updateSize:function e(){this._super();this.layers.forEach(function(e){e.rect=this.rect;e.renderer.setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y);e.renderer.setDimensions(0,0,this.rect.width,this.rect.height)},this)},paint:function e(){this._super(this._layoutMode,this._data);this._majorAxis.updateNow();this._minorAxis.updateNow();this._activeDimAxis&&this._activeDimAxis.updateNow();var t=this._minorAxis.getPadding(),i=new n,s=this;this._style=x(this._styleService);i.set(t.left,t.top,this.rect.width-t.left-t.right,this.rect.height-t.top-t.bottom);this.layers.forEach(function(e){e.minorAxis=this._minorAxis;e.majorAxis=this.isDimensionContinuous?this._activeDimAxis:this._majorAxis;e.isNumeric=this.isDimensionContinuous;e.shapes=this._shapes;e.othersFillPattern=g(this._colorMap.getColor([-3]));e.groupingMode=this._groupingMode;e.widthRatio=this._numDimensions<=1&&this._numMeasures<=1||this._groupingMode===d?.7:.95;e.isSpikingEnabled=!this.isMini&&!(this._groupingMode===d&&(this._numDimensions>1||this._numMeasures>1));e.isHintingEnabled=!this.isMini&&(this._groupingMode===p||this._groupingMode===d&&this._numDimensions+this._numMeasures<=2);e.style=this._style;e._globalAlpha=this._globalAlpha},this);this._barLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0};this._barLayer.colorMap=this._colorMap;this._barLayer.update();this.nodesInView=this._barLayer.nodesInView;this.barsAddedToRenderer();if(this._labelLayer){this._labelLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0};this._labelLayer.setShapes(this._objects);this._labelLayer.bounds=i;this._labelLayer._longestLabel=20;if(this._layoutMode>this.ShowFlags.XSMALL&&this._showDataPoints){this._formatLabels();this._labelLayer.show();this._labelLayer.render()}else this._labelLayer.hide()}var a=[this._barLayer.render()];this._rangeSelectionLayer&&a.push(this.renderRangeSelections());return h.all(a).then(function(){return s.afterPaint()})},_formatLabels:function e(){if(this._isStacked||this._formatted)return;var t,i,s=this.nodesInView?this.nodesInView.length:0;for(t=0;t<s;t++){i=this.nodesInView[t].data;if(!i.formatted){i.formatted=true;i.valueLabel=this.measureFormatters[i.measureIndex]?this.measureFormatters[i.measureIndex].formatValue(i.value):i.valueLabel}}},preRelevantSizeCalculation:function e(){this.perpendicularlyRelevantSpacing={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0}},clear:function e(){this._super();this.layers.forEach(function(e){e.clear()})},release:function e(){this.layers.forEach(function(e){e.release()});this._super();this._majorAxis&&this._majorAxis.stopListen("changed",null,this);this._minorAxis&&this._minorAxis.stopListen("changed",null,this);this.timeAxis&&this.timeAxis.stopListen("changed",null,this);this.continuousAxis&&this.continuousAxis.stopListen("changed",null,this)}});function x(e){return{shape:{selected:{border:{color:"#333333",width:2}},outOfRange:{color:e.getStyle("outOfRange","color")}},dataPoints:{label:{font:"normal "+e.getStyle("label.value","fontSize")+" 'QlikView Sans'",color:e.getStyle("label.value","color"),dark:{color:"#595959"},light:{color:"#E6E6E6"}},backgroundColor:e.getStyle("","backgroundColor")},backgroundColor:e.getStyle("","backgroundColor")}}return u}.apply(t,s),void 0!==n&&(e.exports=n))},1175:function(e,t,i){"use strict";var s,n;!(s=[i(11),i(90),i(48),i(89),i(1237),i(180),i(410),i(1050),i(2108),i(2110),i(2111),i(1533),i(1037),i(1034),i(299),i(445),i(189),i(2112),i(237),i(195),i(986)],n=function(e,t,i,s,n,a,r,o,l,h,c,u,d,p,f,m,g,x,_,y,v){var b,M={NONE:0,ONE_DIM:1,TWO_DIM:2};function A(e){var t=[],i=[];e.qHyperCube.qMeasureInfo.forEach(function(e){e.series&&"bar"!==e.series.type&&1===e.series.axis?i.push(e):t.push(e)});return{primaryMeasures:t,secondaryMeasures:i}}function D(e,i,s,n,a,r){if(!i.length)return;var o,l,h;if(a){o=a.min;l=a.max}else{o=Math.min.apply(this,i.filter(function(e){return!Number.isNaN(+e.qMin)}).map(function(e){return e.qMin}));l=Math.max.apply(this,i.filter(function(e){return!Number.isNaN(+e.qMax)}).map(function(e){return e.qMax}))}t.isNumeric(o)||(o=-1);t.isNumeric(l)||(l=1);h=this.getAxisOptions(s);if(n){l=Math.max(0,l);o=Math.min(0,o)}if(r){r.min=o;r.max=l;if(r.minMeasure&&r.maxMeasure){this._cutMode=this.getSpikeSettings(r,h);o=this._cutMode.min;l=this._cutMode.max}else this._cutMode={positive:false,negative:false}}e.setRealDataRange(void 0,void 0);this.setAxisDataRange(e,l,o,h.max,h.min,1)}b=n.extend("ComboChart",{namespace:".combochart",init:function t(i,s,n,h,c){n=e.extend(true,{components:{dataArea:{clazz:l},miniChart:{components:{dataArea:{clazz:l},secondaryMeasureAxis:{show:false,dock:"right",clazz:r}}},axis:{show:true,order:1.1,reductionOrder:2.1,dock:"right",relevantSize:90,showFlag:a.prototype.ShowFlags.XSMALL,clazz:r},secondaryMeasureAxisTitle:{show:true,order:1.2,dock:"right",relevantSize:30,reductionOrder:1,showFlag:a.prototype.ShowFlags.SMALL,clazz:o}}},n||{});this._super(i,s,n,h,c);this.components.scrollArea.setUseMiniChart(false);this.components.axis.setShowStrategy("all");this.components.dataArea.setSecondaryMinorAxis(this.components.axis);this.components.secondaryMeasureAxisTitle.setType("measure");this.components.secondaryMeasureAxisTitle.setModel(i.ext.model);if(this.components.miniChart){var u=this.components.miniChart;this.components.miniChart.setBackendApi(this.backendApi);this.components.scrollArea.setMiniChart(u);u.setColorMap(this.providers.colorMap);u.components.measureAxis.setDock("left");u.components.dimensionAxis.setDock("bottom");u.components.dataArea.setMinorAxis(u.components.measureAxis);u.components.dataArea.setMajorAxis(u.components.dimensionAxis);u.components.dataArea.setSecondaryMinorAxis(u.components.secondaryMeasureAxis)}},getVerticalComponents:function e(){var t=this._super(),i;if(this._data&&this.components){if(this.components.measureAxis&&this.components.measureAxis.isVertical()&&this._data.measureAxes){i=this._data.measureAxes[0].dock;t.push({comp:this.components.measureAxis,dock:i});this.components.measureAxisTitle&&t.push({comp:this.components.measureAxisTitle,dock:i})}if(this.components.axis&&this.components.axis.isVertical()&&this._data.measureAxes&&this._data.measureAxes.length>1){i=this._data.measureAxes[1].dock;t.push({comp:this.components.axis,dock:i});this.components.secondaryMeasureAxisTitle&&t.push({comp:this.components.secondaryMeasureAxisTitle,dock:i})}}return t},partialUpdate:function e(t){var i,n,a,r=[],o=this._dataOptions.primary.indexOf(this._dataOptions.barSeries[0])>=0;this._enablePagingTransitions();n=t.qHyperCube.qStackedDataPages.length>0?this._pagingInfo.y:t.qHyperCube.qDataPages[0].qArea.qTop;this.components.dimensionAxis.setInnerOffset(n*this.scrollMultiplicator);return this.providers.colorMap.setData(t).then(function(){this._chartContext.refresh(t);this.components.colorLegend.updateNow(["properties"]);r.push(this.components.colorLegend.invalidateDisplay("ScrollableChart.partialUpdate"));for(i in this.components)"miniChart"!==i&&this.components[i].invalidateProperties("ScrollableChart.partialUpdate");this.components.dataArea.updateNow(["properties"]);a=this.components.dataArea.barArea.getMeasureIndices().length?this.components.dataArea.barArea.getMajorAxisData():this.components.dataArea.markerArea.getMeasureIndices().length?this.components.dataArea.markerArea.getMajorAxisData():this.components.dataArea.lineArea.getMajorAxisData();this.components.dimensionAxis.setDataRange(a.data,a.info);var e=this.components.dataArea.barArea.getMinorAxisData();e&&this._dataOptions.primary.forEach(function(t){if(this._dataOptions.barSeries.indexOf(t)<0&&!Number.isNaN(+t.qMin)){e.min=Math.min(t.qMin,e.min);e.max=Math.max(t.qMax,e.max)}},this);D.apply(this,[this.components.measureAxis,this._dataOptions.primary,this._dataOptions.axes.measureAxis,o,e,e?this.getPrimaryMeasureSettings(t,this._dataOptions):null]);this.components.dimensionAxis.updateNow(["properties"]);this.components.dimensionAxis.updateLevels();r.push(this.components.dimensionAxis.invalidateDisplay("ScrollableChart.partialUpdate"));r.push(this.components.dataArea.invalidateDisplay("ScrollableChart.partialUpdate"));return s.all(r)}.bind(this))},isValid:function e(t){return this._super(t)&&!this.supressChartRendering},_paint:function e(){if(!this.isValid(this._data))return this.clear();this._super();var t,i=this.components.scrollArea,n=this.rect.height,a=this.getSnapshotStoredChartData(),r=0,o=[];if(this._cutMode.positive||this._cutMode.negative){this._layoutMode>=31&&(r=48);r=this._layoutMode>=15?32:this._layoutMode>=7?16:8}this.components.measureAxis.setPadding(this._cutMode.positive?r:0,0,this._cutMode.negative?r:0,0);this.components.axis.setPadding(this._cutMode.positive?r:0,0,this._cutMode.negative?r:0,0);this.components.dimensionAxis.setMaxDiscreteUnitSize(Math.max(1,Math.ceil(n/4)));this.components.dataArea.updateNow(["properties"]);this.components.dimensionAxis.updateNow(["properties"]);this.layout();if(this._readStoredData){this.components.dimensionAxis.setInnerOffset(a.axisInnerOffset);this.components.scrollArea.setOffset(a.scrollOffset);this.components.scrollArea.setViewRange(a.viewRange)}else if(this.options.viewState){this.components.dimensionAxis.setInnerOffset(this.options.viewState.axisInnerOffset);this.components.scrollArea.setOffset(this.options.viewState.scrollOffset);this.components.scrollArea.setViewRange(this.options.viewState.viewRange)}var l=this.checkPage();if(l)o.push(l);else{for(t in this.components)o.push(this.components[t].invalidateDisplay("ComboChart.paint"));i.viewState.min+i.viewState.range>i.fullState.max&&i.setOffset(i.fullState.max-i.viewState.range)}return s.all(o)},prePaint:function e(t){this._super(t);d.applyDisclaimerAttributes({paging:true},this.$scope.dataAttributes,this.$element,this.$scope,t);this.supressChartRendering=this.$scope.dataAttributes.noDataExist},updateData:function e(t){if(this._destroyed)return s.reject();this.setIsDimensionContinuous(_.isContinuousChart(t));this._setActiveDimensionAxis(t);return this._super(t)},_updateData:function t(i){var n=[];this._checkPage=false;var r,o,l,h,c,u,d,p,f,m,g=this.getSnapshotStoredChartData();this.components.scrollArea.setUseMiniChart(this.isDimensionContinuous);r=i.qHyperCube.qMeasureInfo.filter(function(e){return e.series&&"line"===e.series.type});o=i.qHyperCube.qMeasureInfo.filter(function(e){return!e.series||"bar"===e.series.type});l=i.qHyperCube.qMeasureInfo.filter(function(e){return e.series&&"marker"===e.series.type});h=A(i);c=h.primaryMeasures;u=h.secondaryMeasures;this.isStacked=false;this.components.measureAxis.isStacked=("stacked"===i.barGrouping.grouping||this.isDimensionContinuous)&&o.length>1;this.components.axis.isStacked=false;this._pagingMode=M.NONE;this.scrollMultiplicator="grouped"===i.barGrouping.grouping&&o.length>1?o.length+1:1;this.components.dataArea.setIsDimensionContinuous(this.isDimensionContinuous);if(this.isDimensionContinuous)this._pagingMode=M.NONE;else{if(i.qHyperCube.qSize.qcy>i.qHyperCube.qDataPages[0].qArea.qHeight){this._pagingMode=M.ONE_DIM;var x=i.qHyperCube.qSize.qcy;if("grouped"===i.barGrouping.grouping&&o.length>1){this.scrollMultiplicator=o.length+1;x*=this.scrollMultiplicator}this.components.dimensionAxis.setNumDiscreteUnits(x)}else this.components.dimensionAxis.setNumDiscreteUnits(null);this.components.dimensionAxis.isDiscrete()||(this._pagingMode=M.NONE)}var _=e.extend(true,{},i.measureAxes[0],{show:c.length?i.measureAxes[0].show:"none"}),y=e.extend(true,{},i.measureAxes[1],{show:u.length?i.measureAxes[1].show:"none",dock_:["near","far"].contains(i.measureAxes[0].dock)?"near"===i.measureAxes[0].dock?"far":"near":a.prototype.getOppositeDock.call({options:{dock:i.measureAxes[0].dock}})});d={primary:c,secondary:u,lineSeries:r,markerSeries:l,barSeries:o,axes:{measureAxis:{component:this.components.measureAxis,data:_,dataIndices:c.map(function(e){return i.qHyperCube.qMeasureInfo.indexOf(e)})},secondaryMeasureAxis:{component:this.components.axis,data:y,dataIndices:u.map(function(e){return i.qHyperCube.qMeasureInfo.indexOf(e)})},dimensionAxis:{component:this.components.dimensionAxis,data:i.dimensionAxis,dataIndices:i.qHyperCube.qDimensionInfo.map(function(e,t){return t})},timeAxis:{component:this.components.timeAxis,data:i.dimensionAxis},continuousAxis:{component:this.components.continuousAxis,data:i.dimensionAxis}},axisTitles:{dimensionAxisTitle:{component:this.components.dimensionAxisTitle,data:i.dimensionAxis},measureAxisTitle:{component:this.components.measureAxisTitle,data:_},secondaryMeasureAxisTitle:{component:this.components.secondaryMeasureAxisTitle,data:y}}};p=this.components.dimensionAxisTitle;f=this.components.measureAxisTitle;m=this.components.secondaryMeasureAxisTitle;this._dataOptions=d;var v=[],b=[];c.forEach(function(e){v.push({label:e.qFallbackTitle,index:i.qHyperCube.qMeasureInfo.indexOf(e)})});u.forEach(function(e){b.push({label:e.qFallbackTitle,index:i.qHyperCube.qMeasureInfo.indexOf(e)})});this._data=i;n.push(p.setData(i));n.push(f.setData(v));n.push(m.setData(b));n.push(this.components.dataArea.setData(i));n.push(this.components.colorLegend.setData(i));var D=this.providers.colorMap.getLegendDataProvider();D.setMeasureLegendTypes(i.qHyperCube.qMeasureInfo.map(function(e){return e.series&&e.series.type?"line"===e.series.type?i.dataPoint.show?["line","circle"]:["line"]:"marker"===e.series.type?[(false===e.series.markerFill?"!":"")+(e.series.marker||"circle")]:["rect"]:["rect"]}));this._super(i,d);if(this._readStoredData){this.components.dimensionAxis.setInnerOffset(g.axisInnerOffset);this.components.scrollArea.setOffset(g.scrollOffset);this.components.scrollArea.setViewRange(g.viewRange)}else if(this.options.viewState){this._checkPage=true;this.components.dimensionAxis.setInnerOffset(this.options.viewState.axisInnerOffset);this.components.scrollArea.setOffset(this.options.viewState.scrollOffset);this.components.scrollArea.setViewRange(this.options.viewState.viewRange)}else if(Number.isNaN(+i.scrollStartPos)){if(!this.isDimensionContinuous){this.components.dimensionAxis.setInnerOffset(0);this.components.scrollArea.setOffset(0)}}else this.components.scrollArea.setRelativeOffset(i.scrollStartPos);this.isDimensionContinuous||(this._checkPage=true);return s.all(n)},initSelections:function e(){this._super();if(!this.options._disableSelections){this.selections.types.range.addComponent("y",this.components.axis);this.selections.Select.bind(function(e,t){var i,s=this.selections.getActiveType().activeComponent;i=s.subComponents?this.components.dimensionAxis.getType().current:s.getSelectionIndices();this.onSelection.Select.apply(this,[e,t,i])}.bind(this));var t=function e(t){this.onSelection.scheduleInvalidation.call(this);this.components.timeAxis.setSelectedRanges(t);this.components.dataArea.updateRangeSelection(t);this.components.miniChart.components.dataArea.updateRangeSelection(t)};this.selections.UpdateRanges.bind(t.bind(this));this.selections.Clear.bind(t.bind(this,[]));this.selections.Deactivated.bind(t.bind(this,[]))}},updateDataArea:function e(t,i){this._super.apply(this,[].slice.call(arguments));"byExpression"===t.color.mode?this.components.dataArea.lineArea.interpolateVaryingColors=!t.color.expressionIsColor&&-1!==["sg","dg"].indexOf(t.color.measureScheme):this.components.dataArea.lineArea.interpolateVaryingColors=false;var s="area"===t.lineType&&t.stackedArea?"stackedArea":t.lineType;this.components.dataArea.lineArea.setShowDataPoints(t.dataPoint.show);this.components.dataArea.lineArea.setLineType(s);this.components.dataArea.lineArea.setNullMode(t.nullMode);this.components.dataArea.lineArea.setShowDataPointLabels(t.dataPoint.showLineLabels);this.components.dataArea.barArea.setShowDataPoints(t.dataPoint.showBarLabels);var n=this.isDimensionContinuous?"stacked":t.barGrouping.grouping;this.components.dataArea.barArea.setGroupingMode(n);if(this.components.miniChart){this.components.miniChart.components.dataArea.lineArea.setLineType(s);this.components.miniChart.components.dataArea.lineArea.setNullMode(t.nullMode);this.components.miniChart.components.dataArea.barArea.setGroupingMode(n);var a,r;for(a in i.axes){var o=i.axes[a];r=this.components.miniChart.components[a];if(r){r.setDataIndices(o.dataIndices||[o.dataIndex||0]);r.setCurrentDataIndices(o.currentDataIndices||o.dataIndices||[o.dataIndex||0])}}}this.components.dataArea.updateNow(["properties"])},getMinDiscreteUnitSize:function e(){return this._minDiscreteUnitSize},updateAxis:function t(i,s){var n,r,o,l=s.primary.indexOf(s.barSeries[0])>=0,h=this.getSnapshotStoredChartData(),c=A(i),u=e.extend(true,{},i.measureAxes[0],{show:c.primaryMeasures.length?i.measureAxes[0].show:"none"}),d=e.extend(true,{},i.measureAxes[1],{show:c.secondaryMeasures.length?i.measureAxes[1].show:"none",dock_:["near","far"].contains(i.measureAxes[0].dock)?"near"===i.measureAxes[0].dock?"far":"near":a.prototype.getOppositeDock.call({options:{dock:i.measureAxes[0].dock}})});this._super(i,s);this.components.timeAxis.setData(i);this._cutMode={positive:false,negative:false};var f=this.components.dataArea.barArea.getMinorAxisData();f&&s.primary.forEach(function(e){if(s.barSeries.indexOf(e)<0&&!Number.isNaN(+e.qMin)){f.min=Math.min(e.qMin,f.min);f.max=Math.max(e.qMax,f.max)}});if(this._readStoredData&&h.dataRanges){f.min=h.dataRanges[0].min;f.max=h.dataRanges[0].max}D.apply(this,[this.components.measureAxis,s.primary,s.axes.measureAxis,l,f,l?this.getPrimaryMeasureSettings(i,s):null]);D.apply(this,[this.components.axis,s.secondary,s.axes.secondaryMeasureAxis,"zero"===i.nullMode,null]);r=this.chartFormatter.getFormattersForMeasures(i.qHyperCube.qMeasureInfo,s.primary.map(function(e){return i.qHyperCube.qMeasureInfo.indexOf(e)}));o=this.chartFormatter.getFormattersForMeasures(i.qHyperCube.qMeasureInfo,s.secondary.map(function(e){return i.qHyperCube.qMeasureInfo.indexOf(e)}));this.components.measureAxis.combinedMeasuresFormatter=this.chartFormatter.getFormatterFromFormatters(r);this.components.axis.combinedMeasuresFormatter=this.chartFormatter.getFormatterFromFormatters(o);if(s.barSeries.length)n=this.components.dataArea.barArea.getMajorAxisData();else if(s.markerSeries.length){n=this.components.dataArea.markerArea.getMajorAxisData();s.lineSeries.length||n.data.forEach(function(e){var t=[];for(var i=0;i<s.markerSeries.length;i++)t.push(e.cacheIndex[0]*s.markerSeries.length+i);e.cacheIndex=t})}else n=s.lineSeries.length?this.components.dataArea.lineArea.getMajorAxisData():{data:[],info:[],groupSize:null};this.components.dimensionAxis.setDataRange(n.data,n.info);this._updateMinDiscreteUnitSize(this.components.dimensionAxis);var m=this.components.dimensionAxisTitle,g=this.components.measureAxisTitle,x=this.components.secondaryMeasureAxisTitle;m.setDock("far"===i.dimensionAxis.dock?"top":"bottom");g.setDock("far"===u.dock?"right":"left");x.setDock("far"===d.dock?"right":"left");m.setSelectionsEnabled(!!this.selections);g.setSelectionsEnabled(!!this.selections);x.setSelectionsEnabled(!!this.selections);if(s.primary.length&&s.secondary.length||i.measureAxes.every(function(e){return"none"===e.show}))this.components.dimensionAxis.setUnitAlignment("center");else{var _=s.primary.length?i.measureAxes[0]:i.measureAxes[1];this.components.dimensionAxis.setUnitAlignment(p.getAxisUnitAlignment(_.dock,this.components.dimensionAxis.isHorizontal()))}this.updateTimeAxis()},updateGrid:function e(t,i){this._super(t,i);!i.primary.length&&i.secondary.length||["all","labels"].indexOf(i.axes.measureAxis.data.show)<0&&i.secondary.length&&["all","labels"].indexOf(i.axes.secondaryMeasureAxis.data.show)>=0?this.components.grid.setAxes(this._activeDimAxis,this.components.axis):this.components.grid.setAxes(this._activeDimAxis,this.components.measureAxis)},_updateMinDiscreteUnitSize:function e(t){this._super(t)},getPrimaryMeasureSettings:function e(i,s){var n=s.primary.filter(function(e){return!Number.isNaN(+e.qMin)}).map(function(e){return{min:e.qMin,max:e.qMax,index:i.qHyperCube.qMeasureInfo.indexOf(e),isBarSeries:s.barSeries.indexOf(e)>=0}}),a=s.primary.filter(function(e){return!Number.isNaN(+e.qMin)&&s.barSeries.indexOf(e)<0}),r,o,l,h;if(n.length){r=n.reduce(function(e,t){return e.min<t.min?e:t},n[0]);o=n.reduce(function(e,t){return e.max>t.max?e:t},n[0]);o&&(h=r.max);r&&(l=r.min);t.isNumeric(l)||(l=0);t.isNumeric(h)||(h=1)}return{minMeasure:r,maxMeasure:o,nonBarSeriesMax:Math.max.apply(null,a.map(function(e){return e.qMax})),nonBarSeriesMin:Math.min.apply(null,a.map(function(e){return e.qMin})),min:l,max:h,data:i,options:s}},getSpikeSettings:function e(t,i){var s=t.data,n=t.minMeasure,a=t.maxMeasure,r=t.min,o=t.max,l=0,h=0,c=0,u=0,d=false,p=false,f,m,g=a.index+s.qHyperCube.qDimensionInfo.length,x=n.index+s.qHyperCube.qDimensionInfo.length,_=s.qHyperCube.qDataPages[0]?s.qHyperCube.qDataPages[0].qMatrix:[];!Number.isNaN(+t.nonBarSeriesMax)&&t.nonBarSeriesMax>0&&(l=t.nonBarSeriesMax);!Number.isNaN(+t.nonBarSeriesMin)&&t.nonBarSeriesMin<0&&(h=t.nonBarSeriesMin);if(!this.components.measureAxis.isStacked){for(var y=0;y<_.length;y++){f=_[y];m=f[g].qNum;m>0&&!Number.isNaN(+m)&&(f[0].qIsOtherCell||f[1].qIsOtherCell?c=Math.max(m,c):l=Math.max(m,l));m=f[x].qNum;m<0&&!Number.isNaN(+m)&&(f[0].qIsOtherCell||f[1].qIsOtherCell?u=Math.min(m,u):h=Math.min(m,h))}if(null!==i.max&&i.max<a.max)d=i.max>0;else if(l>0&&c/l>5){o=l;d=o>=0}if(null!==i.min&&i.min>n.min)p=i.min<0;else if(h<0&&u/h>5){r=h;p=r<0}}return{max:o,min:r,positive:d,negative:p}},getPreferredSize:function e(){return this._super()}});function w(e,t){var s=this.item,n,a=["contextMenu.add",s.name];if(t.canAddMeasure()){n=this.menu.addItem({translation:a,tid:"add-as"});n.addItem({translation:"contextMenu.asBar",tid:"as-bar",icon:"bar-chart",select:function n(){t.addLibraryMeasure(s.id).then(function(s){s.qDef.series.type="bar";t.updateGlobalChangeListeners();e.setProperties(t.properties);i.$rootScope.$broadcast("pp-open-path","data."+s.qDef.cId)})}});n.addItem({translation:"contextMenu.asLine",tid:"as-line",icon:"line-chart",select:function n(){t.addLibraryMeasure(s.id).then(function(s){s.qDef.series.type="line";s.qDef.series.axis=1;t.updateGlobalChangeListeners();e.setProperties(t.properties);i.$rootScope.$broadcast("pp-open-path","data."+s.qDef.cId)})}});n.addItem({translation:"contextMenu.asMarker",tid:"as-marker",icon:"shapes",select:function i(){t.addLibraryMeasure(s.id).then(function(i){i.qDef.series.type="marker";i.qDef.series.axis=1;t.updateGlobalChangeListeners();e.setProperties(t.properties)})}})}t.canColorBy().byMeasure&&this.menu.addItem({translation:["contextMenu.colorBy",s.name],tid:"colorby",select:function i(){y.setColorByPropertyDef(t.properties,s);t.updateGlobalChangeListeners();e.setProperties(t.properties)}})}return{type:"ComboChart",BackendApi:f,template:x,View:b,definition:h,softDefinition:c,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qInitialDataFetch:[{qWidth:17,qHeight:500}],qSuppressMissing:true},measureAxes:[{autoMinMax:true,dock:"near",max:10,min:0,minMax:"min",show:"all",spacing:1},{autoMinMax:true,dock:"far",max:10,min:0,minMax:"min",show:"all",spacing:1}]},data:u,support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:true,viewData:true},migrate:{properties:function e(t){return v.migrateProperties(t)}},options:{selections:{dataArea:{},range:{},colorLegend:{}},tooltips:{}},getDropMeasureOptions:function e(t,i,s,n,a){if("measure"===t.item.type){w.call(t,s,i,a);i.getMeasures().length>=i.minMeasures()&&t.ReplaceMeasures(s,i,a);n()}else m.getDropMeasureOptions(t,i,s,n,a)},importProperties:function e(i,s,n){var a=g.axisChart.importProperties.apply(g,[i,s,n]),r="linechart"===i.properties.visualization,o,l=[];a.qProperty.qHyperCubeDef.qMeasures.forEach(function(e){e.qDef.series||(e.qDef.series={type:r?"line":"bar",axis:0,marker:"circle",markerFill:true});l.indexOf(e.qDef.series.axis)<0&&l.push(e.qDef.series.axis)});o=l.sort().shift();a.qProperty.measureAxes[o]&&i.properties.measureAxis&&"undefined"!==typeof i.properties.measureAxis.autoMinMax&&t.extend(true,a.qProperty.measureAxes[o],i.properties.measureAxis,{logarithmic:false});return a},exportProperties:g.axisChart.exportProperties.bind(g)}}.apply(t,s),void 0!==n&&(e.exports=n))},1176:function(e,t,i){"use strict";var s,n;!(s=[i(180),i(1167),i(1251),i(1252),i(1177),i(1256),i(1257),i(1033),i(100),i(89)],n=function(e,t,i,s,n,a,r,o,l,h){var c,u={LINE:"line",AREA:"area",STACKED:"stackedArea"},d={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function p(e){return!!e}function f(e,t){var i=Object.keys(e);var s=i.length;var n=i.map(function(t){return e[t].points});var a=Math.max.apply(null,n.map(function(e){return e.length}));var r;for(var o=0;o<a;++o){var l=false;var h=false;for(r=0;r<s;++r){l=l||n[r][o];h=h||!n[r][o]}if(!l||!h)continue;for(r=0;r<s;++r)n[r][o]||(n[r][o]={idx:l.idx,dimValue:l.dimValue,measureIdx:l.measureIdx,aggregated:{start:0,end:0},hasLeftNeighbour:!!n[r][o-1]&&!n[r][o-1].isNaN,hasRightNeighbour:!!n[r][o+1]&&!n[r][o+1].isNaN,isNaN:!t,value:t?0:NaN,text:t?"0":"",hidePoint:true,color:null,label:""})}}function m(e){var t,i,s,n,a,r=e?e.length:0;for(t=0;t<r;t++){a=e[t];if(a&&!a.hasRightNeighbour){for(i=t+1;i<r;i++)if(e[i]&&!e[i].isNaN){a.nearestRightNeighbour=i;break}if(!a.isNaN){if(!Number.isNaN(+a.nearestRightNeighbour)){n=i-t;for(s=1;s<n;s++)if(e[t+s]){e[t+s].nearestRightNeighbour=a.nearestRightNeighbour;e[t+s].nearestLeftNeighbour=t}}t=i-1}}}}function g(e){var t,i,s,n,a,r,o,l,h,c=e?e.length:0,u=this.isDimensionContinuous;for(t=0;t<c;t++){h=e[t];if(h&&!h.hasRightNeighbour&&!h.isNaN&&!Number.isNaN(+h.nearestRightNeighbour)){i=h.nearestRightNeighbour;a=h.value;r=e[i].value;l=i-t;o=u?e[i].dimValue-h.dimValue:i-t;for(s=1;s<l;s++){n=(u?e[t+s].dimValue-h.dimValue:s)/o;e[t+s]&&(e[t+s].interpolatedValue=a*(1-n)+r*n)}}}}function x(e,t){var i,s=[],n,a,r,o,l=e?e.length:0;for(i=0;i<l;i++){n=e[i].points;Object.keys(n).forEach(function(e){var i=false;o=n[e].idx;s[o]||(s[o]={pos:0,neg:0,total:0});r=n[e];if(!r)return;a=r.isNaN?Number.isNaN(+r.interpolatedValue)?0:r.interpolatedValue:r.value;if(!Number.isNaN(+a)){if(t){0===a?r.hasLeftNeighbour&&n[e-1]?i=n[e-1].aggregated.end<0:r.hasRightNeighbour&&n[e+1]&&(i=n[e+1].aggregated.end<0):i=a<0;if(i){r.aggregated.start=s[o].neg;s[o].neg+=a;r.aggregated.end=s[o].neg}else{r.aggregated.start=s[o].pos;s[o].pos+=a;r.aggregated.end=s[o].pos}}else{r.aggregated.start=s[o].total;s[o].total+=a;s[o].pos=Math.max(s[o].pos,s[o].total);s[o].neg=Math.min(s[o].neg,s[o].total);r.aggregated.end=s[o].total}if("number"===typeof r.interpolatedValue){r.interpolatedValue=r.aggregated.end;r.isInterpolationOffset=true}}})}return{pos:Math.max.apply(null,s.filter(function(e){return!!e}).map(function(e){return e.pos})),neg:Math.min.apply(null,s.filter(function(e){return!!e}).map(function(e){return e.neg}))}}c=e.extend("LineArea",{init:function e(){this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._shapes=[];this._generatedCacheItems=[];this._showDataPoints=true;this._colorMap=null;this._showDataPoints=false;this._lineType=u.LINE;this._nullMode=d.GAP;this._separateStacking=true;this._globalAlpha=1;this._dataLabelMargin=6;this._maxDataLabelMargin=12;this._dataLabelHorizontalGap=6;this._dataLabelVerticalGap=3;this._horizontalDistanceFromLine=2;this.interpolateVaryingColors=true;this._styleService=l.initializeService("object.lineChart");this._lineObjectsModel=new i;this._edgeBleed=0;this._lineLayer=new s(this.container);this.layers=[this._lineLayer];if(this.isMini){this._rangeSelectionLayer=new o(this.container);this.layers.push(this._rangeSelectionLayer)}else{this._oobLayer=new n(this.container);this.layers.push(this._oobLayer);this._labelLayer=new a(this.container);this.layers.push(this._labelLayer);this._rangeSelectionLayer=new r(this.container);this.layers.push(this._rangeSelectionLayer)}},setYMirrorMode:function e(t){this.yMirrorMode=t;this._labelLayer&&this._labelLayer.setYMirrorMode(t)},preRender:function e(){},afterPaint:function e(){return h.resolve()},setColorMap:function e(t){this._colorMap=t},getColorMap:function e(){return this._colorMap},setShowDataPoints:function e(t){this._showDataPoints=t},getShowDataPoints:function e(){return this._showDataPoints},setMajorAxis:function e(t){this._majorAxis=t;this._majorAxis.listen("changed",function(){this.invalidateDisplay()},this)},setMinorAxis:function e(t){this._minorAxis=t;this._minorAxis.listen("changed",function(){this.invalidateDisplay()},this)},setTimeAxis:function e(t){this.timeAxis=t;this.timeAxis.listen("changed",function(){this.invalidateDisplay()},this)},setContinuousAxis:function e(t){this.continuousAxis=t;this.continuousAxis.listen("changed",function(){this.invalidateDisplay()},this)},setActiveDimensionAxis:function e(t){this._activeDimAxis=t},setSecondaryMinorAxis:function e(t){this._secondaryMinorAxis=t;this._secondaryMinorAxis.listen("changed",function(){this.invalidateDisplay()},this)},setIsDimensionContinuous:function e(t){this.isDimensionContinuous=t;this._edgeBleed=this.isDimensionContinuous?5:0},setDimensionTree:function e(t){this._tree=t;this.invalidateProperties("linearea: setDimensionTree")},setLineType:function e(t){this._lineType=t},setNullMode:function e(t){this._nullMode=t},setSeparateStacking:function e(t){this._separateStacking=t},setShowDataPointLabels:function e(t){this._showDataPointLabels=t},getShowDataPointLabels:function e(){return this._showDataPointLabels},freezeZOrdering:function e(){this._zOrderFreezed=true},unFreezeZOrdering:function e(){this._zOrderFreezed=false},setColorMappings:function e(t){this._colorMappings=t},_updateSize:function e(){this.invalidateDisplay()},getCacheItems:function e(){return this._cacheItems},setCacheItems:function e(t){this._cacheItems=t},getGeneratedCacheItems:function e(){return this._generatedCacheItems||[]},setMeasureIndices:function e(t){this._measureIndices=t},getMajorAxisData:function e(){return this._majorAxisData},getMinorAxisData:function e(){return this._minorAxisData},renderRangeSelections:function e(){this._rangeSelectionLayer.update(this._activeDimAxis,this._lineLayer);return this._rangeSelectionLayer.render()},updateRangeSelection:function e(t){this._rangeSelectionLayer.setRanges(t);this.renderRangeSelections()},_updateProperties:function e(){if(!this._data||!this._tree)return;this._minorAxes=[this._minorAxis];this._secondaryMinorAxis&&this._minorAxes.push(this._secondaryMinorAxis);this._majorAxisData=y.call(this);this._minorAxisData=null;var i=[],s=this._data.qHyperCube.qDimensionInfo,n=s.length,a=this._measureIndices?this._measureIndices.length:this._data.qHyperCube.qMeasureInfo.length,r=this._data.qHyperCube.qMeasureInfo,o=this._tree,l,h=this._shapes,c=o.children.length,_,v,b,M,A=0,D=this._shapes.length,w={},S=this.measureFormatters,C,q,L=this.selectionIdentifier?this.selectionIdentifier:"dataArea";var P=this._minorAxes;var k=[];var I=[];if(this._measureIndices)I=this._measureIndices;else if(a>0&&a<20)while(I.length<a)I.push(I.slice(-1)[0]+1||0);I.forEach(function(e){k[e]=P.filter(function(t){return!t._dataIndices||t._dataIndices.indexOf(e)>=0})[0]});this._measureToAxis=k;this._measureToAxisIndex=k.map(function(e){return P.indexOf(e)});this._polysData=[];if(c&&I||I.length){o.children.forEach(function(e,a){e.id=s[0].cId+"_"+e.data.qElemNo;e.children.forEach(function(o,c){if(n>1){l=e.id+";"+s[1].cId+"_"+o.data.qElemNo;var u="X"+o.data.qElemNo;q=w[u];if(!q){w[u]={info:{label:o.data.qText},points:[],values:[],measureIdx:n>1?0:c};q=w[u]}o=o.children[0];C=S[0]}else{if(this._measureIndices&&this._measureIndices.indexOf(c)<0)return;l=e.id;q=w[c];if(!q){w[c]={info:{label:r[c].qFallbackTitle},measureIdx:c,points:[],values:[]};q=w[c]}C=S[c]}v=o?o.children[0]:void 0;if(!v)return;_=void 0!==v.data.qValue?v.data.qValue:v.data.qNum;M=Number.isNaN(+_);if(this._nullMode===d.ZERO&&M){_=0;M=false}o.chartData={value:_,isNaN:M,idx:a,measureIdx:n>1?0:c,hasLeftNeighbour:!!q.points[a-1]&&!q.points[a-1].isNaN,hasRightNeighbour:false,color:null,text:v.data.qText,label:v.data.qText?C&&("U"===C.type||Number.isNaN(+v.data.qNum))?C.formatValue(_):v.data.qText:"",rowIndex:o.data.rowIndex,dimValue:e.data.qNum,id:l,aggregated:{}};if(!o.chartData.isNaN){o.chartData.aggregated.start=0;o.chartData.aggregated.end=_;q.values.push(_)}q.points[a]=o.chartData;q.points[a-1]&&(q.points[a-1].hasRightNeighbour=!o.chartData.isNaN);o.chartData.shapeIndex=A++;D<A&&h.push(new t(NaN,NaN,NaN));o.chartData.cacheCircle=h[o.chartData.shapeIndex];b=o.parent;if(b.cacheItem){i.indexOf(b.cacheItem)<0&&i.push(b.cacheItem);o.chartData.cacheItem=b.cacheItem;b.cacheItem.addShape(L,o.chartData.cacheCircle,true);b.cacheItem.calculateTooltipPosition=true}},this)},this);var T=[];var R=a>1||n>1;var N=(this._nullMode===d.CONNECT||this.isDimensionContinuous)&&this._lineType===u.STACKED&&R;var O=this._nullMode===d.ZERO&&R&&!this.isDimensionContinuous;(N||O)&&f.call(this,w,O);Object.keys(w).forEach(function(e){(N||this._nullMode!==d.ZERO)&&m.call(this,w[e].points);N&&g.call(this,w[e].points);this.isDimensionContinuous||(w[e].points=w[e].points.filter(p));T.push(w[e])},this);this._polysData=T;if(this._zOrderFreezed){var z=this._sortedOrder;this._polysData.forEach(function(e,t){e.idx=t});this._polysData.sort(function(e,t){return z.indexOf(e.idx)-z.indexOf(t.idx)})}else{if(this._lineType===u.AREA){this._polysData.forEach(function(e,t){e.idx=t;e.values.sort(function(e,t){return t-e});e.absMedian=Math.abs(e.values[Math.floor(e.values.length/2)])});this._polysData.sort(function(e,t){return t.absMedian-e.absMedian})}else this._polysData.forEach(function(e,t){e.idx=t});this._sortedOrder=this._polysData.map(function(e){return e.idx})}if(this._lineType===u.STACKED&&(a>1||n>1)){var V=x.apply(this,[T,this._separateStacking]);this._minorAxisData={min:V.neg>=0?0:V.neg,max:V.pos<0?0:V.pos}}}this._shapes.length>A&&(this._shapes=this._shapes.slice(0,A));this.setSelectableShapes(i);this._lineLayer.updateInstances(this._polysData,{showArea:[u.AREA,u.STACKED].contains(this._lineType)})},hasValidData:function e(){return this._super()&&this._majorAxis&&this._minorAxis&&this._data&&this._tree},updateSize:function e(){this._super();this.layers.forEach(function(e){e.rect=this.rect;e.renderer.setDimensions(0,-1,this.rect.width,this.rect.height+1);e.renderer.setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y)},this);this._style=_(this._styleService,this._layoutMode)},preRelevantSizeCalculation:function e(){this.perpendicularlyRelevantSpacing={left:this._edgeBleed,right:this._edgeBleed,top:1,bottom:this._edgeBleed}},release:function e(){this.layers.forEach(function(e){e.release()});this._super();this._majorAxis&&this._majorAxis.stopListen("changed",null,this);this._minorAxis&&this._minorAxis.stopListen("changed",null,this);this._secondaryMinorAxis&&this._secondaryMinorAxis.stopListen("changed",null,this);this.timeAxis&&this.timeAxis.stopListen("changed",null,this);this.continuousAxis&&this.continuousAxis.stopListen("changed",null,this)},beforeLayerUpdates:function e(){},paint:function e(){this._majorAxis.updateNow();this._minorAxis.updateNow();this._activeDimAxis&&this._activeDimAxis.updateNow();var t={numDimensions:this._data.qHyperCube.qDimensionInfo.length,showDataPoints:this._showDataPoints&&this._layoutMode>this.ShowFlags.SPARK,nullMode:this._nullMode,globalAlpha:this._globalAlpha,majorAxis:this._majorAxis,minorAxes:this._minorAxes,numericAxis:this._activeDimAxis,isNumeric:this.isDimensionContinuous,measureToAxisIndex:this._measureToAxisIndex,axesSettings:this._minorAxes.map(this._getAxisDetails),combinedMeasuresFormatter:this.combinedMeasuresFormatter,interpolateVaryingColors:this.interpolateVaryingColors,colorMap:this._colorMap,rect:this.rect,style:this._style,markerSize:Math.min(8,this._majorAxis.getDiscreteSpacing()/2),yMirrorMode:this.yMirrorMode},i=this,s=[];this._lineObjectsModel.update(this._polysData,t);this.beforeLayerUpdates(this._lineObjectsModel.getLineObjectsSettings());this._lineLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:1,bottom:this._edgeBleed};this._lineLayer.update(this._lineObjectsModel.getLineObjectsSettings());this.preRender(this._lineLayer._lineObjects);s.push(this._lineLayer.render());if(this._oobLayer){this._oobLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:this._edgeBleed};this._oobLayer.update(this._lineObjectsModel.getPointsOutOfRange(),t);s.push(this._oobLayer.render())}if(this._labelLayer)if(this._layoutMode>this.ShowFlags.XSMALL&&this._showDataPointLabels&&this._showDataPoints){this._labelLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:this._edgeBleed};this._labelLayer.update(this._lineLayer.getLineObjects(),t);this._labelLayer.show();s.push(this._labelLayer.render())}else this._labelLayer.hide();this._rangeSelectionLayer&&s.push(this.renderRangeSelections());return h.all(s).then(function(){return i.afterPaint(t.axesSettings[0].topCutoff,t.axesSettings[0].bottomCutoff)})},clear:function e(){this._super();this.layers.forEach(function(e){e.clear()})},_getAxisDetails:function e(t){var i=t.getPlotMin(),s=t.getPlotMax(),n=s-i,a=t.getPadding(),r=a.top,o=t.rect.height-a.bottom,l=0;l=i>0?o:s<0?r:Math.ceil(t.getPositionOfValue(0)+1e-5);return{plotMin:i,plotMax:s,posMin:t.getPositionOfValue(i),posMax:t.getPositionOfValue(s),plotRange:n,topCutoff:r,bottomCutoff:o,areaStartBase:l,zeroPos:Math.floor(t.getPositionOfValue(0))-.5}}});function _(e,t){var i=e.layoutMap[t]||"medium";return{dataPoints:{color:e.getStyle("label.value","color"),font:"normal "+e.getStyle("label.value","fontSize")+" 'QlikView Sans'",size:{normal:6,selected:10}},outOfRange:{color:e.getStyle("outOfRange","color")},line:{width:"full"===i?2:1}}}function y(){if(!this._data||!this._tree)return[];var e=this._data.qHyperCube.qDimensionInfo,t=e.length,i=[],s,n=0;this._tree.children.forEach(function(a){a.id=e[0].cId+"_"+a.data.qElemNo;s={label:a.data.qText||"",cacheIndex:[],id:a.id};i.push(s);1===t&&(s.cacheIndex[0]=n++);t>1&&a.children.forEach(function(e){if(e.children[0]&&e.children[0].isBranch){-2!==e.data.qElemNo&&s.cacheIndex.push(n);n++}},this)},this);return{data:i,info:[{qApprMaxGlyphCount:this._tree.data.qApprMaxGlyphCount}],groupSize:null}}return c}.apply(t,s),void 0!==n&&(e.exports=n))},1177:function(e,t,i){"use strict";var s,n;!(s=[i(307),i(278)],n=function(e,t){var i;function s(e,t,i,s,n){var a=[];if("left"===n){a.push({x:e,y:t+i/2});a.push({x:e,y:t-i/2});a.push({x:e-s,y:t})}else if("right"===n){a.push({x:e,y:t+i/2});a.push({x:e,y:t-i/2});a.push({x:e+s,y:t})}else if("up"===n){a.push({x:e-i/2,y:t});a.push({x:e+i/2,y:t});a.push({x:e,y:t-s})}else if("down"===n){a.push({x:e-i/2,y:t});a.push({x:e+i/2,y:t});a.push({x:e,y:t+s})}return a}i=e.extend("OutOfBoundsLayer",{init:function e(t){this._super(t,{name:"out-of-bounds-layer"});this._markerSize=8},update:function e(i,n){var a=this.renderer.stage,r=a.children,o=n.markerSize||this._markerSize,l,h,c,u,d,p,f=i?i.length:0;for(p=0;p<f;p++){l=r[p];h=i[p];u=h;h.data&&(u=h.data);d=n.axesSettings[n.measureToAxisIndex[u.measureIdx]];c=s(u.x,u.outOfRangeUp?d.topCutoff+o:d.bottomCutoff-o,o,o,u.outOfRangeUp?"up":"down");if(l)l.set(c);else{l=new t(c);a.addChild(l)}l.fill=n.style.outOfRange.color;l.opacity=u.selected?1:n.globalAlpha}f<r.length&&a.removeChildren(r.slice(f-r.length))}});return i}.apply(t,s),void 0!==n&&(e.exports=n))},1233:function(e,t,i){"use strict";var s,n;!(s=[i(92),i(104),i(278),i(291),i(101),i(1234)],n=function(e,t,i,s,n,a){var r;function o(){var e,s,n,r,o=this.style.shape,l=new t(0,0,0,0),h=this.widthRatio,c,u,d,p,f,m=this.isSpikingEnabled,g=this.isHintingEnabled,x,_,y,v=[],b=this.majorAxis.isDiscrete(),M=this.majorAxis.getDiscreteSpacing()*h,A,D=this.minorAxis.getPlotMax(),w=this.minorAxis.getPlotMin(),S=!this.majorAxis.isVertical(),C=this.minorAxis.getPadding(),q=this.minorAxis.getPositionOfValue(0)-1,L={pad:S?C.top:C.right},P={pad:S?C.bottom:C.left},k=new t;L.gap=.3*L.pad;L.sharpness=.3*L.pad;P.gap=.3*P.pad;P.sharpness=.3*P.pad;k.set(C.left,C.top,this.rect.width-C.left-C.right,this.rect.height-C.top-C.bottom);this._bounds=k;var I=0,T=S?this.rect.width:this.rect.height,R=-1,N=S?this.rect.height:this.rect.width;p=this.shapes?this.shapes.length:0;if(this.isNumeric){b=false;var O=this.majorAxis._scale.plotRange/(this.majorAxis._scale._dataMax-this.majorAxis._scale._dataMin),z=90,V=.25,j=2,E=this.majorAxis._scale._plotSize/z;A=Math.max(E-Math.pow(O,V)*E,j);Number.isNaN(+A)&&(A=j)}for(f=0;f<p;f++){u=this.shapes[f];y=u instanceof i||"Polygon"===u.type;d=this.isNumeric?this.majorAxis.getPositionOfValue(u.data.axisNum):this.majorAxis.getPositionOfId(u.data.axisId);c=b?M:A||this.majorAxis.getWidthOfId(u.data.axisId)*h;if(u.data.isNaN||Number.isNaN(+u.data.value)){u.data.isNaN=true;n=q;r=q}else{n=this.minorAxis.getPositionOfValue(u.data.start)-1;r=this.minorAxis.getPositionOfValue(u.data.end)-1}e=d-c/2;s=d+c/2;a.updateRectangle(u.data.hitRect,e,s,n,r,!S,k);delete u.data.labelRect;delete u.data.isCutOff;delete u.data.hintDirection;if(s<I||e>T)u.data.isVisible=false;else{u.data.isVisible=true;y?u.set(u.data.hitRect.getPoints()):u.set(u.data.hitRect.x,u.data.hitRect.y,u.data.hitRect.width,u.data.hitRect.height);l.set(u.data.hitRect.x,u.data.hitRect.y,u.data.hitRect.width,u.data.hitRect.height);v.push(u);x=u.data.cacheItem;var F=x.selected;if(u.data.isFakeOtherCell&&u.data.highlightOnGroupSelect&&x.children[0].selected){F=true;for(var H=0;H<x.children.length;H++)if(!x.children[H].selected){F=false;break}}this.isNumeric&&this.selectedRanges&&!F&&(F=this.selectedRanges.some(function(e){return u.data.axisNum>=e.min&&(e.maxIncluded?u.data.axisNum<=e.max:u.data.axisNum<e.max)}));_=F&&c>6?o.selected:{border:{color:0,width:0}};u.stroke=_.border.color;u.fill=u.data.isFakeOtherCell?this.othersFillPattern:u.data.fill;u.strokeWidth=_.border.width;u.opacity=F?1:this._globalAlpha;var B=!!g&&this._getHint(n,r,k,S);var Z=!(!y||B||!m)&&this._getSpike(u.data.end,n,r,k,S,w,D);if(Z){u.data.labelRect=l.clone();a.updateSpike(u,S?u.data.end>=0?"up":"down":u.data.end>=0?"right":"left",u.data.end>=0?L:P);u.data.isCutOff=true}else if(B){u.fill=o.outOfRange.color;a.updateHint(u,B,k);u.data.hintDirection=B}else(n<R&&r<R||n>N&&r>N)&&(u.data.isVisible=false)}}this.nodesInView=v}r=e.extend("BarLayer",{init:function e(t){this.renderer=new s(t,{name:"bar-layer"});this.widthRatio=.7;this.isSpikingEnabled=false;this.isHintingEnabled=false;this.shapes=[];this._globalAlpha=1},release:function e(){this.renderer.release();this.shapes=null;this.minorAxis=null;this.majorAxis=null},update:function e(){o.call(this)},render:function e(){return this.renderer.render()},clear:function e(){this.renderer.clear()},_getStyle:function e(t){return{selected:{border:{color:n.getValue(t,"shape.selected.border.color","rgba(0,0,0,0.25)"),width:n.getValue(t,"shape.selected.border.width",1)}}}},_getHint:function e(t,i,s,n){if(n){if(i+1<s.y&&t+1<=s.y)return"up";if(i+1>s.y+s.height&&t+1>=s.y+s.height)return"down"}else{if(i+1<s.x&&t+1<=s.x)return"left";if(i+1>s.x+s.width&&t+1>=s.x+s.width)return"right"}return false},_getSpike:function e(t,i,s,n,a,r,o){var l=t>o,h=t<r;if(a){l=l&&s<n.y&&i>n.y;h=h&&s>n.y+n.height&&i<n.y+n.height}else{l=l&&s>n.x+n.width&&i<n.x+n.width;h=h&&s<n.x&&i>n.x}return l||h}});return r}.apply(t,s),void 0!==n&&(e.exports=n))},1234:function(e,t,i){"use strict";var s,n;!(s=[i(293)],n=function(e){function t(e,t,i,s,n,a,r){var o,l;if(a){o=t;l=i;i=n;t=s;n=o;s=l;if(i<t){o=i;i=t;t=o}t=Math.max(r.x,Math.min(r.x+r.width,t));i=Math.max(r.x,Math.min(r.x+r.width,i))}else{if(s<n){o=n;n=s;s=o}s=Math.max(r.y,Math.min(r.y+r.height,s));n=Math.max(r.y,Math.min(r.y+r.height,n))}e.set(t,n,i-t,s-n);return e}function i(e,t,i,s){var n=[{x:e.x,y:e.y},{x:e.x,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height},{x:e.x+e.width,y:e.y}];switch(t){case"left":s?n[0].x-=i:n[1].x+=i;break;case"right":s?n[2].x+=i:n[3].x-=i;break;case"top":s?n[3].y-=i:n[0].y+=i;break;case"bottom":s?n[1].y+=i:n[2].y-=i;break}return n}function s(t,s,n){var a,r=n.pad,o=n.gap,l=n.sharpness,h=t.clone(),c=i,u=[];if("right"===s){a=new e(h.x+h.width+o,h.y,r-o,h.height);u.push(c(h,"right",l,true));u.push(c(a,"left",l,false,true));t.width+=a.width+o}else if("left"===s){a=new e(0,h.y,r-o,h.height);u.push(c(h,"left",l,true));u.push(c(a,"right",l,false,true));t.x=a.x;t.width+=a.width+o}else if("down"===s){a=new e(h.x,h.y+h.height+o,h.width,r-o);u.push(c(h,"bottom",l,true));u.push(c(a,"top",l,false,true));t.height+=a.height+o}else if("up"===s){a=new e(h.x,0,h.width,r-o);u.push(c(h,"top",l,true));u.push(c(a,"bottom",l,false,true));t.y=a.y;t.height+=a.height+o}return u}function n(e,t,i){e.set(s(e.data.hitRect,t,i))}function a(e,t,i){e.set(o(e.data.hitRect,t,i))}function r(e,t,i,s,n){var a=[];if("left"===n){a.push({x:e,y:t+i/2});a.push({x:e,y:t-i/2});a.push({x:e-s,y:t})}else if("right"===n){a.push({x:e,y:t+i/2});a.push({x:e,y:t-i/2});a.push({x:e+s,y:t})}else if("up"===n){a.push({x:e-i/2,y:t});a.push({x:e+i/2,y:t});a.push({x:e,y:t-s})}else if("down"===n){a.push({x:e-i/2,y:t});a.push({x:e+i/2,y:t});a.push({x:e,y:t+s})}return a}function o(e,t,i){var s,n,a;a=Math.min(e[["left","right"].contains(t)?"height":"width"]/2,8);n=Math.min(a,8);if("left"===t){s=r(i.x+n,e.y+e.height/2,a,n,t);e.width+=n}else if("right"===t){s=r(i.x+i.width-n-1,e.y+e.height/2,a,n,t);e.width+=n;e.x-=n}else if("up"===t){s=r(e.x+e.width/2,i.y+n,a,n,t);e.height+=n}else if("down"===t){s=r(e.x+e.width/2,i.y+i.height-n-1,a,n,t);e.height+=n;e.y-=n}return s}return{updateRectangle:t,getSpike:s,getSlicedPolygon:i,getHint:o,updateSpike:n,updateHint:a}}.apply(t,s),void 0!==n&&(e.exports=n))},1235:function(e,t,i){"use strict";var s,n;!(s=[i(92),i(203),i(200),i(109),i(344)],n=function(e,t,i,s){var n,a,r,o,l;function h(e,t){return e?s.useDarkLabel(t,l)?a.label.dark.color:a.label.light.color:a.label.color}function c(e,t,i,s,n,r,o){return{type:"text",fill:a.label.dark.color,opacity:s||1,data:{value:t,rect:i,labelRect:r,hintDirection:o,color:n},shape:{text:e,maxNumLines:1,align:"center",baseline:"middle"}}}function u(e){var t,i,s,n;t=e.descendants.filter(function(e){return!e.isBranch&&false!==e.data.isVisible});i=t.map(function(e){return e.data.hitRect});if(i.length){s=i[0];i.length>1&&(s=s.combineWith(i.slice(-1)[0]));n=c(e.data.valueLabel,e.data.sum,s,t[t.length-1].opacity,t[t.length-1].data.color,null,null);n.data.isFillPattern=window.CanvasPattern&&t[t.length-1].fill instanceof window.CanvasPattern;n.data.lastRect=i[i.length-1];return n}}function d(e,t){var i,s;e.forEach(function(e){i=e.children;if(e.data.isStack){s=u(e);if(s){s.data.isStack=true;s.targetShape=e;t.push(s)}}else if(i&&i.length)d(i,t);else if(false!==e.data.isVisible){s=c(e.data.valueLabel,e.data.value,e.data.hitRect,e.opacity,e.data.color,e.data.labelRect,e.data.hintDirection);s.targetShape=e;t.push(s)}})}function p(e,t){var i;e.forEach(function(e){i=e.children;i&&i.length?p(i,t):false!==e.data.isVisible&&t.push(e)})}function f(e,t){Object.keys(t).forEach(function(i){e[i]=t[i]})}function m(e){return e.filter(function(e){return!!e.labelBounds})}function g(e,t,i){return e.filter(function(e){return e.labelBounds.x>=t&&e.labelBounds.x+e.labelBounds.width<=i})}function x(e,t){var i=t?t.length:0,s,n,a;n=e.labelBounds;for(s=0;s<i;s++){a=t[s].data.hitRect;if(e.targetShape===t[s]){if(n.y+n.height/2>a.y&&n.width>a.width+8)return true}else if(a&&n.x<=a.x+a.width&&a.x<=n.x+n.width&&n.y<=a.y+a.height&&a.y<=n.y+n.height)return true}return false}function _(e,t){return e.filter(function(e){return!x(e,t)})}function y(e){return e.filter(function(e){return e.data.value<0})}function v(e){return e.filter(function(e){return e.data.value>=0})}function b(e,t){var i=t?t.length:0,s,n,a;n=e.labelBounds;for(s=0;s<i;s++){a=t[s].labelBounds;if(n.x<=a.x+a.width&&a.x<=n.x+n.width&&n.y<=a.y+a.height&&a.y<=n.y+n.height)return true}return false}function M(e){var t=e?e.length:0,i=[],s,n,a,r,o;for(s=0;s<t;s++){o=e[s];n=o.data.value;a=0===s?n:e[s-1].data.value;r=s===t-1?n:e[s+1].data.value;o.priority=n>a&&n>r?6:n<a&&n<r?5:n>a&&n===r||n===a&&n>r?4:n<a&&n===r||n===a&&n<r?3:n===a&&n===r?2:1}e.sort(function(e,t){return e.priority-t.priority});for(s=0;s<t;s++)b(e[s],i)||(i[i.length]=e[s]);return i}function A(){var e=[],i=[],s=this.minorAxis.getPlotMin(),n=this.minorAxis.getPlotMax(),o,h,c,u=a.label.font,f=this.bounds,x;d(this._shapes,e);t.setFont(u);this.renderer.setFont(u);e=e.filter(function(e){if("NaN"===e.data.value)return true;if(e.data.labelRect||e.data.showHintLabel)return true;if(e.data.value>=0&&n>=e.data.value&&s<=e.data.value)return true;if(e.data.value<0&&s<=e.data.value&&n>=e.data.value)return true;if(e.data.rect.width&&e.data.rect.height&&f.intersectsWith(e.data.rect))return true;return false});var b,A,S;if(this._shapes&&this._shapes.length){A=this._shapes[0].descendants.filter(function(e){return!e.isBranch})[0];S=A?A.data.hitRect.width:this.majorAxis._discreteSpacing}else S=0;b=0;o=e?e.length:0;for(c=0;c<o;c++){h=e[c];if(h.shape){h.shape.font=u;h.data.labelWidth=t.getTextWidth(h.shape.text);b=Math.max(b,h.data.labelWidth)}}this._longestLabel=b;x=this._longestLabel<S;var q;q=this.minorAxis.isVertical()?x?D:w:C;for(c=0;c<o;c++)q.call(this,e[c],S);if(this.isNumeric){var L=4,P,k;p(this._shapes,i);e=m(e);e=g(e,this.bounds.x-L,this.bounds.x+this.bounds.width+L);e=_(e,i);P=y(e);k=v(e);P=M(P);k=M(k);e=k.concat(P)}e.slice().forEach(function(t){if(t.fill&&t.backdrop){e.unshift({opacity:t.opacity||1,type:"roundRect",fill:r,shape:t.backdrop});t.fill=l?a.label.light.color:a.label.dark.color}});this.renderer.shapes=e;this.renderer.render()}function D(e,t){var i,s=this.renderer.getFontHeight(a.label.font);var n=S.apply(this,[e,false,t]);for(var r=0;r<n.length;r++){f(e.shape,n[r].rect);if(s<n[r].rect.height){i=n[r];break}}if(i){var o=i.rect.width-e.data.labelWidth;f(e.shape,i.rect);e.shape.baseline=i.baseline;e.shape.align=i.align;e.labelBounds={x:i.rect.x+Math.min(o/2,4),y:"top"===i.baseline?i.rect.y:i.rect.y+i.rect.height-16,width:Math.max(i.rect.width-Math.min(o,8)),height:16,containingRect:i.inline?e.shape:void 0};if(e.data.isStack&&i.inline&&(e.data.lastRect.height<20||e.data.isFillPattern))e.backdrop={x:e.labelBounds.x,y:e.labelBounds.y,width:e.labelBounds.width,height:e.labelBounds.height,radius:4};else{e.fill=h(i.inline,e.data.color);e.backdrop=false}}else e.fill=false}function w(e,s){var n,a,r,o;var l=S.apply(this,[e,true,s]);o=this.bounds.x+this.bounds.width;n="labelWidth"in e.data?e.data.labelWidth:t.getTextWidth(e.shape.text);for(a=0;a<l.length;a++)if(l[a].rect.height>=n){r=l[a];break}if(!r){l.sort(function(e,t){return.8*t.rect.height-e.rect.height});l[0].rect.height>=8&&(r=l[0])}if(r){var c=new i;c.translate(r.rect.x,r.rect.y+r.rect.height);c.rotate(-Math.PI/2);f(e.shape,{width:r.rect.height,height:r.rect.width,baseline:r.baseline,align:r.align,x:0,y:0});e.transform=c.elements;e.labelBounds={x:r.rect.x+r.rect.width/2-8,y:"right"===r.align?r.rect.y-4:r.rect.y+r.rect.height-n-4,width:16,height:n+8};r.rect.x<0&&r.rect.x+r.rect.width>0&&(e.labelBounds.x=Math.max(e.labelBounds.x,this.bounds.x-4));r.rect.x<o&&r.rect.x+r.rect.width>o&&(e.labelBounds.x=Math.min(e.labelBounds.x,o-e.labelBounds.width));if(e.data.isStack&&r.inline&&(e.data.lastRect.height<n+4||e.data.isFillPattern))e.backdrop={x:e.labelBounds.x,y:e.labelBounds.y,width:e.labelBounds.width,height:e.labelBounds.height,radius:4};else{e.fill=h(r.inline,e.data.color);e.backdrop=false}}else e.fill=false}function S(e,t,i){var s,n,a,r,o=t&&e.data.isStack?8:4,l=[];s=e.data.rect.width;n=e.data.rect.height;a=e.data.rect.x;r=e.data.rect.y;if("up"!==e.data.hintDirection&&e.data.value>=0||"down"===e.data.hintDirection){r-this.bounds.y-2*o>4&&l.push({align:t?"left":"center",baseline:t?"middle":"bottom",rect:{x:a-.5*(i-s),y:this.bounds.y+o,width:i,height:r-this.bounds.y-2*o}});if(e.data.labelRect){s=e.data.labelRect.width;n=e.data.labelRect.height;a=e.data.labelRect.x;r=e.data.labelRect.y}e.data.hintDirection||l.push({align:t?"right":"center",baseline:t?"middle":"top",inline:true,rect:{x:a,y:r+o,width:s,height:n-2*o}})}else{this.bounds.height-r-n-2*o>0&&l.push({align:t?"right":"center",baseline:t?"middle":"top",rect:{x:a-.5*(i-s),y:r+n+o,width:i,height:this.bounds.height-r-n-2*o}});if(e.data.labelRect){s=e.data.labelRect.width;n=e.data.labelRect.height;a=e.data.labelRect.x;r=e.data.labelRect.y}e.data.hintDirection||l.push({align:t?"left":"center",baseline:t?"middle":"bottom",inline:true,rect:{x:a,y:r+o,width:s,height:n-2*o}})}return l}function C(e,i){var s,n,a,r;a=q.apply(this,[e,i]);s="labelWidth"in e.data?e.data.labelWidth:t.getTextWidth(e.shape.text);for(n=0;n<a.length;n++)if(a[n].rect.width>=s){r=a[n];break}if(!r&&a.length){a.sort(function(e,t){return.8*t.rect.width-e.rect.width});a[0].rect.width>=8&&(r=a[0])}if(r){e.shape.baseline="middle";e.shape.align=r.align;f(e.shape,r.rect);e.labelBounds={x:("right"===r.align?r.rect.x+r.rect.width-s:r.rect.x)-4,y:r.rect.y+r.rect.height/2-8,width:s+8,height:16};if(e.data.isStack&&r.inline&&(e.data.lastRect.width<s+8||e.data.isFillPattern))e.backdrop={x:e.labelBounds.x,y:e.labelBounds.y,width:e.labelBounds.width,height:e.labelBounds.height,radius:4};else{e.fill=h(r.inline,e.data.color);e.backdrop=false}}else e.fill=false}function q(e){var t,i,s,n,a=e.data.isStack?8:4,r=[];t=e.data.rect.width;i=e.data.rect.height;s=e.data.rect.x;n=e.data.rect.y;if("right"!==e.data.hintDirection&&(this.yMirrorMode?e.data.value<0:e.data.value>=0)||"left"===e.data.hintDirection){this.bounds.width-s-t-2*a>0&&r.push({align:"left",rect:{x:s+t+a,y:n,width:this.bounds.width-s-t-2*a,height:i}});if(e.data.labelRect){t=e.data.labelRect.width;i=e.data.labelRect.height;s=e.data.labelRect.x;n=e.data.labelRect.y}e.data.hintDirection||r.push({align:"right",inline:true,rect:{x:s+a,y:n,width:t-2*a,height:i}})}else{s-this.bounds.x-2*a&&r.push({align:"right",rect:{x:this.bounds.x+a,y:n,width:s-this.bounds.x-2*a,height:i}});if(e.data.labelRect){t=e.data.labelRect.width;i=e.data.labelRect.height;s=e.data.labelRect.x;n=e.data.labelRect.y}e.data.hintDirection||r.push({align:"left",inline:true,rect:{x:s+a,y:n,width:t-2*a,height:i}})}return r}n=e.extend("LabelLayer",{init:function e(i){this.renderer=new t(i)},setYMirrorMode:function e(t){this.yMirrorMode=t},setData:function e(t){this._data=t},setMeasureIndices:function e(){},setBarData:function e(t){this._barData=t},setShapes:function e(t){this._shapes=t},show:function e(){this.renderer.show()},hide:function e(){this.renderer.hide()},clear:function e(){this.renderer.clear()},release:function e(){this.renderer.release()},render:function e(){a=this.style.dataPoints;o=new s(this.style.backgroundColor);l=o.isDark();r=s.toRGBA(o,.75);A.call(this)}});return n}.apply(t,s),void 0!==n&&(e.exports=n))},1236:function(e,t,i){"use strict";var s,n;!(s=[],n=function(){return{dataPoint:{label:{dark:{color:"#666"},light:{color:"#eee"},font:"11px 'QlikView Sans'"}},shape:{selected:{border:{color:"#333",width:2}},unselected:{opacity:.5},highlighted:{border:{dark:{color:"rgba( 26, 26, 26, 0.75 )"},light:{color:"rgba( 230, 230, 230, 0.75)"},width:1}}}}}.apply(t,s),void 0!==n&&(e.exports=n))},1237:function(e,t,i){"use strict";var s,n;!(s=[i(11),i(90),i(1126),i(1303),i(410),i(1240),i(180),i(1243),i(1306),i(1172),i(512),i(1169),i(1244),i(384),i(104),i(164),i(511),i(89),i(418),i(1245),i(1139),i(281),i(110)],n=function(e,t,i,s,n,a,r,o,l,h,c,u,d,p,f,m,g,x,_,y,v,b,M){var A,D={NONE:0,ONE_DIM:1,TWO_DIM:2};var w=1e-6;function S(e){var t=this.components.scrollArea.getOffset()-e/(this.components.dimensionAxis._discreteSpacing||28);t=t<0?0:t;this.components.scrollArea.setOffset(t)}function C(){if(this._disableZoom)return;var e=this._panZoomController._viewportProjection;var t=this._activeDimAxis.getDataMin();var i=this._activeDimAxis.getDataMax();var s=i-t;var n=this._activeDimAxis.getPlotSize();e.setSize({x:n,y:1});e.setBoundingBox(new f(t,0,i-t,1));this._panZoomController.setOffset(this._panZoomController._$element.offset());var a=this.components.scrollArea.getOffset();var r=this.components.scrollArea.getViewRange();this.yMirrorMode&&(a=s-r-a);var o=e.getTransformMatrix();o.identity();o.scale(n/r,1);o.translate(-a,0);e.setTransformMatrix(o);k(this.selections)}function q(e,t){var i=this.components.scrollArea.getOffset();var s=this.components.scrollArea.getViewRange();var n=Math.abs(e-i)>w||Math.abs(t-s)>w;if(n){this.components.scrollArea.setViewRange(t);this.components.scrollArea.setOffset(e);this.components.scrollArea.fire("offsetChanged")}}function L(){if(this._disableZoom)return;var e=this._panZoomController._viewportProjection;var t=this._activeDimAxis.getPlotSize();var i=this._activeDimAxis.getDataMin();var s=this._activeDimAxis.getDataMax();var n=s-i;var a=e.invTransform({x:0,y:0}).x;var r=e.invTransform({x:t,y:0}).x;var o=Math.min(r-a,n);var l=Math.min(Math.max(a,0),n-o);this.yMirrorMode&&(l=n-o-l);q.call(this,l,o)}function P(){var e=this._activeDimAxis.getDataMin();var t=this._activeDimAxis.getDataMax();q.call(this,0,t-e)}function k(e,t){var i=e&&e.getActiveType();i&&"range.discrete"===i.getActiveMode()&&i.cancel(true);t&&t.clearSelection()}function I(e,t,i,a){var r=[],o=[],l,h;Object.keys(this.components).forEach(function(e){this.components[e]instanceof s||this.components[e].isDimension?r.push(this.components[e]):this.components[e]instanceof n&&!this.components[e].isStacked&&o.push(this.components[e])}.bind(this));l=["top","bottom"].contains(this._activeDimAxis.dock)?"x":"y";h="x"===l?"y":"x";this.selections.types.range.setComponent(l,r);this.tooltips.setComponent(l,r);this.selections.types.range.setComponent(h,o);if(i&&(e>1||t>1)){this.selections.types.range.setComponent(h,[]);"byMeasure"===a?this.selections.types.colorLegend.removeComponent("colorLegend",this.components.colorLegend):this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend)}else this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend)}function T(){if(!this._isPagingTransitionEnabled)return;this.components.measureAxis.setDataRangeTransition(false);this.components.measureAxis.stopListen("endTransition",R,this);this.components.measureAxis.stopListen("startTransition",N,this);clearTimeout(this._pagingTransitionTimer);delete this.components.measureAxis.setDataRange;this._isPagingTransitionEnabled=false}function R(){this.components.refLineLabels&&this.layout();for(var e in this.components)this.components[e].invalidateDisplay("ScrollableChart.onAxisTransitionEnded")}function N(){this._visibleRefLines=this.components.refLineLabels.isVisible()}function O(){if(this._isPagingTransitionEnabled||this.isDimensionContinuous)return;this._isPagingTransitionEnabled=true;var e=this,t=this.components.measureAxis,i=t.setDataRange;t.listen("endTransition",R,this);t.listen("startTransition",N,this);this._pagingTransitionTimer=null;this.components.measureAxis.setDataRange=function(s,n){clearTimeout(e._pagingTransitionTimer);e._pagingTransitionTimer=setTimeout(function(){var a;t.setDataRangeTransition(true);i.apply(t,[s,n]);e.layout();for(a in e.components)e.components[a].invalidateDisplay()},500)}}function z(){var e=this.components.scrollArea,t,i,s=this.yMirrorMode,n=this._scrollableHint,a,r,o,l=[];this._scrollAffordance||(this._scrollAffordance={canIncrease:false,canDecrease:false,yMirrorMode:s});a=e.getOffset();o=e.getViewRange();r=e.fullState.max;i=a>w;t=a+o<r-w;if(i===this._scrollAffordance.canDecrease&&t===this._scrollAffordance.canIncrease&&s===this._scrollAffordance.yMirrorMode)return;this._scrollAffordance.canIncrease=t;this._scrollAffordance.canDecrease=i;this._scrollAffordance.yMirrorMode=s;i&&l.push(e.isVertical()?"up":this.yMirrorMode?"right":"left");t&&l.push(e.isVertical()?"down":this.yMirrorMode?"left":"right");this.yMirrorMode&&l.reverse();n.attr("class",function(e,t){return t.replace(/\bqv-chart-scrollable-\S+/g,"")});n.addClass("qv-chart-scrollable-"+l.join("-"))}function V(){var e=this;this._debounceUpdateHandle={};this._debouncedUpdate=m.debounce(function(){var t=this._activeDimAxis.getPlotMin();var i=this._activeDimAxis.getPlotMax();e.updateFocusedContinuousData(t,i).then(function(){e.partialUpdate(e._data)})},400,this._debounceUpdateHandle);this._changeWatchers.push(u.bindSetter(function(){if(e.isDimensionContinuous){var t=e._activeDimAxis.getDataMin()+e.components.scrollArea.getOffset();var i=t+e.components.scrollArea.getViewRange();e._activeDimAxis.setPlotMin(t);e._activeDimAxis.setPlotMax(i);e._activeDimAxis.invalidateDisplay();e.components.dataArea.invalidateDisplay();e.components.grid.invalidateDisplay();e._debouncedUpdate()}},this.components.scrollArea,"offset"))}function j(e,t,i,s){var n,a;for(var r=0;r<i.length;r++)for(var o=0;o<s.length;o++)if(i[r].qName===s[o].qName){n=s[o].qTicks.filter(function(t){return t.qEnd+1<e});a=s[o].qTicks.filter(function(e){return e.qStart+1>t});i[r].qTicks=n.concat(i[r].qTicks,a);break}}function E(e,t){return e&&t.length>1?b.getDimensionSize(t[1]):p.maxNumberOfLines}A=i.extend("ScrollableChart",{init:function t(i,d,p,m,g){var x=this,_=e.extend(true,{providers:{colorMap:{clazz:c,multiDimScheme:"last"}},components:{refLines:{sortKey:5,show:true,dock:"center",showFlag:r.prototype.ShowFlags.SPARK},dataArea:{sortKey:10,show:true,dock:"center",showFlag:r.prototype.ShowFlags.SPARK},miniChart:{show:true,clazz:l,components:{dimensionAxis:{show:false,clazz:s},measureAxis:{show:false},dataArea:{isMini:true,show:true},continuousAxis:{show:false,clazz:n,dock:"bottom"}}},xAxis:{clazz:s,reductionOrder:10,shrinkToFitThreshold:.85,showFlag:{whenVertical:{vertical:r.prototype.ShowFlags.XSMALL,horizontal:r.prototype.ShowFlags.SMALL},whenHorizontal:{vertical:r.prototype.ShowFlags.SMALL,horizontal:r.prototype.ShowFlags.XSMALL}},titleShowFlag:{whenVertical:{vertical:r.prototype.ShowFlags.XSMALL,horizontal:r.prototype.ShowFlags.MEDIUM},whenHorizontal:{vertical:r.prototype.ShowFlags.MEDIUM,horizontal:r.prototype.ShowFlags.XSMALL}}},xAxisTitle:{showFlag:{whenVertical:{vertical:r.prototype.ShowFlags.XSMALL,horizontal:r.prototype.ShowFlags.MEDIUM},whenHorizontal:{vertical:r.prototype.ShowFlags.MEDIUM,horizontal:r.prototype.ShowFlags.XSMALL}},reductionOrder:1},timeAxis:{show:true,isDimension:true,order:1,dock:"bottom",relevantSize:90,reductionOrder:2,clazz:a,showFlag:{whenHorizontal:{vertical:r.prototype.ShowFlags.SMALL,horizontal:r.prototype.ShowFlags.XSMALL},whenVertical:{vertical:r.prototype.ShowFlags.XSMALL,horizontal:r.prototype.ShowFlags.SMALL}}},continuousAxis:{show:true,isDimension:true,order:1,dock:"bottom",relevantSize:90,reductionOrder:2,clazz:n,showFlag:{whenHorizontal:{vertical:r.prototype.ShowFlags.SMALL,horizontal:r.prototype.ShowFlags.XSMALL},whenVertical:{vertical:r.prototype.ShowFlags.XSMALL,horizontal:r.prototype.ShowFlags.SMALL}}},scrollArea:{sortKey:2,show:true,dock:"bottom",order:2,relevantSize:20,reductionOrder:10.1,showFlag:r.prototype.ShowFlags.XSMALL,clazz:o},refLineLabels:{show:true,dock:"right",order:3,reductionOrder:3,showFlag:{whenVertical:{vertical:r.prototype.ShowFlags.XSMALL,horizontal:r.prototype.ShowFlags.SMALL},whenHorizontal:{vertical:r.prototype.ShowFlags.MEDIUM,horizontal:r.prototype.ShowFlags.XSMALL}},clazz:h}}},p||{});this._super(i,d,_,m,g);this._scrollableHint=e("<div class='qv-chart-scrollable'>").appendTo(this.components.dataArea.container);this._changeWatchers=this._changeWatchers||[];this._pagingInfo=new f(0,0,0,0);this.components.measureAxis=this.components.yAxis;this.components.dimensionAxis=this.components.xAxis;this.components.dimensionAxisTitle=this.components.xAxisTitle;this.components.measureAxisTitle=this.components.yAxisTitle;delete this.components.xAxisTitle;delete this.components.yAxisTitle;delete this.components.xAxis;delete this.components.yAxis;this.components.dimensionAxisTitle.setType("dimension");this.components.dimensionAxisTitle.listen("drill-up",function(e,t,i){x.backendApi.drillUp(t,i)});this.components.dimensionAxisTitle.setModel(i.ext.model);this.components.measureAxisTitle.setType("measure");this.components.measureAxisTitle.setModel(i.ext.model);this.components.scrollArea.listen("scrollStart",function(){k(this.selections,this.tooltips)}.bind(this));this._showLegend=false;this.scrollMultiplicator=1;this.components.dataArea.setMinorAxis(this.components.measureAxis);this.components.dataArea.setMajorAxis(this.components.dimensionAxis);this.components.dataArea.setTimeAxis(this.components.timeAxis);this.components.dataArea.setContinuousAxis(this.components.continuousAxis);this._setActiveDimensionAxis(i.layout);this.components.grid.setAxes(this.components.dimensionAxis,this.components.measureAxis);this.components.dimensionAxis.setMinDiscreteUnitSize(28);this._changeWatchers.push(u.bindProperty(this.components.dataArea,"dimensionTree",this._chartContext,"dimensionTree"));this._changeWatchers.push(u.bindProperty(this.providers.colorMap,"dimensionTree",this._chartContext,"dimensionTree"));this._changeWatchers.push(u.bindSetter(function(){x.isDimensionContinuous||x.components.dimensionAxis.setOffset(x.components.scrollArea.getOffset());x.moreData=x.components.scrollArea.viewState.range<x.components.scrollArea.fullState.max;x.checkScrollToggle()},this.components.scrollArea,"offset"));this._changeWatchers.push(u.bindSetter(function(e){x.isDimensionContinuous||null===e||x.components.scrollArea.setFullRange(e)},this.components.dimensionAxis,"numDiscreteUnits"));this._changeWatchers.push(u.bindSetter(function(e){x.isDimensionContinuous||x.components.scrollArea.setViewRange(x._pagingMode===D.TWO_DIM?e/2:e)},this.components.dimensionAxis,"numDiscreteUnitsInView"));[this.components.timeAxis,this.components.continuousAxis].forEach(function(e){e&&e.listen("rendered",function(){var e=x.selections&&x.selections.getActiveType&&x.selections.getActiveType();if(e&&"range.dimension"===e.getActiveMode()){e.refreshContainer();e.updateRangeProjection();e.updateRangeDisplay()}})});(this.components.timeAxis||this.components.continuousAxis)&&V.call(this,this.components.continuousAxis);this._changeWatchers.push(u.bindSetter(function(){false!==x._checkPage&&x.checkPage();z.call(x)},this.components.dimensionAxis,"offset"));this._scrollController=new y(this.components.dataArea.container,this.container,this.components.scrollArea);this.panStartFn=function(){k(x.selections)};this.panUpdateFn=function(e){var t=x.components.scrollArea.isHorizontal()?"x":"y";x.yMirrorMode&&(e.x=-e.x);S.call(x,e[t])};this.panWheelFn=function(e){k(x.selections);S.call(x,e*x.components.dimensionAxis._discreteSpacing)};this._scrollController.PanStart.bind(this.panStartFn);this._scrollController.PanUpdate.bind(this.panUpdateFn);this._scrollController.PanWheel.bind(this.panWheelFn);this._panZoomController=new v(e(this.components.dataArea.container),{start:function e(){C.call(x)},update:function e(){L.call(x)},end:function e(){L.call(x)},reset:function e(){P.call(x)}});this._panZoomController.setZoomPanByWebkitTransform(false);this.isDimensionContinuous&&this._panZoomController.setMaxZoomLevel(27)},setYMirrorMode:function e(t){this._super(t);this.updateVerticalComponentsDock()},getVerticalComponents:function e(){var t=this._super(),i;if(this._data&&this.components){if(this.components.dimensionAxis&&this.components.dimensionAxis.isVertical()&&this._data.dimensionAxis){t.push({comp:this.components.dimensionAxis,dock:this._data.dimensionAxis.dock});this.components.dimensionAxisTitle&&t.push({comp:this.components.dimensionAxisTitle,dock:this._data.dimensionAxis.dock})}if(this.components.measureAxis&&this.components.measureAxis.isVertical()&&this._data.measureAxis){i=this._data.measureAxes&&this._data.measureAxes[0]?this._data.measureAxes[0].dock:this._data.measureAxis.dock;t.push({comp:this.components.measureAxis,dock:i});this.components.measureAxisTitle&&t.push({comp:this.components.measureAxisTitle,dock:i})}this.components.refLineLabels&&this.components.refLineLabels.isVertical()&&this._data.measureAxis&&t.push({comp:this.components.refLineLabels,dock:"far"===this._data.measureAxis.dock?"near":"far"});this.components.scrollArea&&this.components.scrollArea.isVertical()&&t.push({comp:this.components.scrollArea,dock:"far"})}return t},initSelections:function e(){this.selections._disableSelections=this.options._disableSelections;this.selections.types.dataArea.setComponent("dataArea",this.components.dataArea);this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend);if(!this.options._disableSelections){this.selections.types.range.setComponent("dataArea",this.components.dataArea);this.selections.Activated.bind(this.onSelection.Activated.bind(this));this.selections.Lasso.bind(this.onToggleLasso.bind(this));this.selections.Deactivated.bind(this.onSelection.Deactivated.bind(this));this.selections.SelectRange.bind(this.onSelection.SelectRange.bind(this));this.selections.SelectAttributeDim.bind(this.onSelection.SelectAttributeDim.bind(this));this.selections.ToggleShape.bind(this.onSelection.ToggleShape.bind(this));this.selections.Confirm.bind(this.onSelection.Confirm.bind(this));this.selections.Cancel.bind(this.onSelection.Cancel.bind(this));this.selections.Clear.bind(this.onSelection.Clear.bind(this));this.selections.SelectWhileLocked.bind(this.selectWhileLocked.bind(this));this.selections.SelectWhileSingleSelect.bind(this.selectWhileSingleSelect.bind(this))}},initTooltips:function e(){this.tooltips.setComponent("dataArea",this.components.dataArea)},getSnapshotSize:function e(){var t=0,i=0;if(this.rect){t=this.rect.width;i=this.rect.height}var s=this.getSnapshotChartData();!s.hasMiniChart&&this.components.scrollArea.isVisible()&&(this.components.scrollArea.isVertical()?t-=this.components.scrollArea.rect.width:i-=this.components.scrollArea.rect.height);return{w:t,h:i}},getSnapshotChartData:function t(i){var s=e.extend(true,this._super()||{},{scrollOffset:i&&i.ignoreReducedData?0:this.components.scrollArea.getOffset(),discreteSpacing:this.components.dimensionAxis.getDiscreteSpacing(),axisInnerOffset:i&&i.ignoreReducedData?0:this.components.dimensionAxis.getInnerOffset(),hasMiniChart:this.components.miniChart&&!!this.components.miniChart.isVisible(),viewRange:this.components.scrollArea.getViewRange()});i&&i.ignoreReducedData&&this.components.measureAxis.isStacked&&(s.dataRanges=[{min:this.components.measureAxis.getPlotMin(),max:this.components.measureAxis.getPlotMax()}]);return s},setSnapshotData:function t(i,s){this._super(i,s);var n=x();var a;if(!s||!s.ignoreReducedData){if(this.isDimensionContinuous){i.qHyperCube.qDataPages=this._data.qHyperCube.qDataPages;i.qHyperCube.qAxisData=this._data.qHyperCube.qAxisData}if(this.components.miniChart.isVisible())this.components.miniChart.getReducedDataHypercube().then(function(e){i.reducedHyperCube=e;n.resolve(i)});else{delete i.reducedHyperCube;n.resolve(i)}return n.promise}delete i.reducedHyperCube;if(this.isDimensionContinuous){a=i.qHyperCube;a.qDataPages=[e.extend(true,{},this._data.qHyperCube.qDataPages[0])];this._upperFocusIndex?a.qDataPages[0].qMatrix=a.qDataPages[0].qMatrix.slice(this._lowerFocusIndex,this._upperFocusIndex+1):a.qDataPages[0].qMatrix=a.qDataPages[0].qMatrix;a.qAxisData=this._cachedFocusAxisData;a.qDimensionInfo[0].qMin=this._activeDimAxis.getPlotMin();a.qDimensionInfo[0].qMax=this._activeDimAxis.getPlotMax();n.resolve(i);return n.promise}function r(){var e=this.components.scrollArea;var t=e.getOffset()/this.scrollMultiplicator,s=Math.round(t),n=this.components.dimensionAxis._discreteSpacing,a=e.getViewRange()/this.scrollMultiplicator,r=Math.round(a-(s-t)),o=Math.min(8,n/2),l=this._pagingInfo.y;Number.isNaN(+r)&&(r=10);if(this._data.barGrouping&&"grouped"===this._data.barGrouping.grouping&&this._data.qHyperCube.qMeasureInfo.length>1){s=Math.floor(t);r=Math.ceil(a-(s-t));i.snapshotData.content.chartData.scrollOffset=e.getOffset()%this.scrollMultiplicator;var h=(Math.ceil(t)-t)*n*this.scrollMultiplicator-n/2;s=h<o?Math.ceil(t):Math.floor(t);r=Math.round(t+a);var c=t+a;var u=(c-Math.floor(c))*n*this.scrollMultiplicator-n/2;c=u<o?Math.floor(c):Math.ceil(c);r=c-s}else if(this._data.barGrouping&&"grouped"===this._data.barGrouping.grouping&&this._data.qHyperCube.qDimensionInfo.length>1){var d=this.components.dataArea._tree;s=Math.max(Math.round(t-.5),l);r=Math.round(this.components.dimensionAxis.getNumDiscreteUnitsInView()-(s-(t-.5)));if(d){var p=0,f=0,m=0,g=l,x;if(l!==s){for(p=0;p<d.children.length&&g<s;p++,g++){x=d.children[p];for(f=0;f<x.children.length&&g<s;f++,++g)m++}s=l+m;p=Math.max(0,p-1);f=Math.max(0,f-1)}m=0;g=0;for(;p<d.children.length&&g<r;p++,g++){x=d.children[p];for(f;f<x.children.length&&g<r;f++,++g)m++;f=0}r=m}else r*=2}return{qTop:s,qLeft:0,qWidth:this._data.qHyperCube.qSize.qcx,qHeight:r||0}}a=i.qHyperCube;this.providers.colorMap&&this.providers.colorMap.getColorDataInfo()&&(i.color.persistent=!!this.providers.colorMap.getColorDataInfo().persistentColors);if("K"===a.qMode){var o=new _;o.store(a.qStackedDataPages);var l=o.get([r.call(this)]);a.qSize.qcy=l[0].qArea.qHeight;if(l[0]&&l[0].qData[0]){l[0].qData[0].qDown=0;l[0].qData[0].qUp=0}a.qStackedDataPages=l;n.resolve(i)}else this.backendApi.getData([r.call(this)]).then(function(e){"S"===a.qMode?a.qDataPages=e:a.qStackedDataPages=e;a.qSize.qcy=e[0].qArea.qHeight;if(a.qDimensionInfo[0].qStateCounts){a.qDimensionInfo[0].qStateCounts.qOption=a.qSize.qcy;a.qDimensionInfo[0].qStateCounts.qSelected=0}n.resolve(i)});return n.promise},getViewState:function t(){return e.extend(true,this._super()||{},{scrollOffset:this.components.scrollArea.getOffset(),axisInnerOffset:this.components.dimensionAxis.getInnerOffset(),viewRange:this.components.scrollArea.getViewRange()})},checkPage:function e(t){if(!this.isValid(this._data)||!this._pagingMode)return false;var i=this.components.scrollArea;var s=Math.floor(i.getOffset()/this.scrollMultiplicator),n=this._pagingInfo.y,a=this._pagingInfo.height,r=this._pagingMode===D.TWO_DIM?0:20,o=Math.ceil(i.getViewRange()/this.scrollMultiplicator);Number.isNaN(+o)&&(o=500);this._pagingMode===D.TWO_DIM&&(o*=2);if(s+o>n+a||Math.max(0,s)<n)return this.pageData(Math.floor(Math.max(0,s-r)),o+2*r,t)},pageData:function e(t,i,s){if("function"!==typeof this.backendApi.getReducedData)return false;var n=x();if(this._data.qHyperCube){var a=this,r;r="K"===this._data.qHyperCube.qMode?this._data.qHyperCube.qStackedDataPages[0]&&this._data.qHyperCube.qStackedDataPages[0].qData&&this._data.qHyperCube.qStackedDataPages[0].qData.length>0:this._data.qHyperCube.qDataPages[0]&&this._data.qHyperCube.qDataPages[0].qMatrix.length>0;if(i<=0){"S"===a._data.qHyperCube.qMode?a._data.qHyperCube.qDataPages=[]:a._data.qHyperCube.qStackedDataPages=[];a._pagingInfo.set(t,0,this._data.qHyperCube.qSize.qcx,i)}else this.backendApi.getData([{qTop:t,qLeft:0,qWidth:this._data.qHyperCube.qSize.qcx,qHeight:i}]).then(function(e){if("S"===a._data.qHyperCube.qMode){a._data.qHyperCube.qDataPages=e;var o=e[0].qArea;a._pagingInfo.set(o.qLeft,o.qTop,o.qWidth,o.qHeight)}else{a._data.qHyperCube.qStackedDataPages=e;a._pagingInfo.set(0,t,a._data.qHyperCube.qSize.qcx,i)}if(s||!r){a._chartContext.refresh(a._data);a.paint(a._data).then(function(){n.resolve()})}else a.partialUpdate(a._data).then(function(){n.resolve()})}).catch(function(e){false})}else n.resolve();return n.promise},partialUpdate:function e(t){var i,s,n,a,r=[];O.call(this);s=t.qHyperCube.qStackedDataPages.length>0?this._pagingInfo.y:t.qHyperCube.qDataPages[0].qArea.qTop;this.components.dimensionAxis.setInnerOffset(s*this.scrollMultiplicator);return this.providers.colorMap.setData(t).then(function(){this._chartContext.refresh(t);for(i in this.components)"miniChart"!==i&&i.indexOf("AxisTitle")<0&&this.components[i].invalidateProperties("ScrollableChart.partialUpdate");this.components.dataArea.updateNow(["properties"]);n=this.components.dataArea.getMajorAxisData();a=this.components.dataArea.getMinorAxisData();!a||this._readStoredData&&this.getSnapshotStoredChartData().dataRanges||this.components.measureAxis.setDataRange(a.min,a.max);this.components.dimensionAxis.setDataRange(n.data,n.info);this.components.dimensionAxis.updateLevels();this.components.colorLegend.invalidateProperties("ScrollableChart.partialUpdate");this.components.colorLegend.updateNow(["properties"]);this.isDimensionContinuous&&this.layout();r.push(this.components.colorLegend.invalidateDisplay("ScrollableChart.partialUpdate"));r.push(this.components.dataArea.invalidateDisplay("ScrollableChart.partialUpdate"));if(this.isDimensionContinuous){r.push(this.components.timeAxis.invalidateDisplay("ScrollableChart.partialUpdate"));r.push(this.components.continuousAxis.invalidateDisplay("ScrollableChart.partialUpdate"));r.push(this.components.measureAxis.invalidateDisplay("ScrollableChart.partialUpdate"))}else r.push(this.components.dimensionAxis.invalidateDisplay("ScrollableChart.partialUpdate"));return x.all(r)}.bind(this))},getApproriateNrOfBins:function e(t,i){var s=4,n=t.qHyperCube.qMeasureInfo.length,a=n||1,r=s+2*(a-1);if(i)return Math.ceil(p.maxNumberOfDataPoints);if(t.qHyperCube.qDimensionInfo.length>1){a=Math.max(1,Math.min(p.maxNumberOfLines,b.getDimensionSize(t.qHyperCube.qDimensionInfo[1])));r=4}return Math.ceil(p.maxNumberOfDataPoints/(a*r))},getHyperCubeContinousData:function e(t){if(t.qStart>t.qEnd||Number.isNaN(+t.qStart)||Number.isNaN(+t.qEnd))return x.resolve({qAxisData:{qAxis:[]},qDataPages:[{qMatrix:[],qTails:false,qArea:{qLeft:0,qTop:0,qRight:0,qBottom:0}}]});var i=this;return this.backendApi.getHyperCubeContinousData(t,false).then(function(e){if(i.cancelPromises)return x.reject();return e})},getFullContinousData:function e(i,s,n){var a=i.qHyperCube.qSize.qcy*i.qHyperCube.qMeasureInfo.length,r=a<p.maxNumberOfDataPoints,o=i.qHyperCube.qDimensionInfo,l=E(r,o);return this.getHyperCubeContinousData({qStart:s,qEnd:n,qNbrPoints:this.getApproriateNrOfBins(i,r),qMaxNbrTicks:300,qMaxNumberLines:l}).then(function(e){this._cachedContinousMatrix=e.qDataPages[0].qMatrix;i.qHyperCube.qDimensionInfo[0].qIsCyclic||(this._cachedContinousAxisData=e.qAxisData);this._cachedFocusAxisData=t.extend(true,{},e.qAxisData);this._lowerFocusIndex=null;this._upperFocusIndex=null;return e}.bind(this)).catch(function(e){e.code===M.LocalizedErrorCode.LOCERR_GENERIC_INVALID_PARAMETERS&&"Start and End are outside data range"===e.parameter&&(e.isHandled=true);throw e})},getFocusedContinousData:function e(i,s,n){var a=n.qHyperCube.qSize.qcy*n.qHyperCube.qMeasureInfo.length,r=a<p.maxNumberOfDataPoints,o=n.qHyperCube.qDimensionInfo,l=E(r,o);return this.getHyperCubeContinousData({qStart:i,qEnd:s,qNbrPoints:this.getApproriateNrOfBins(n,r),qMaxNbrTicks:300,qMaxNumberLines:l}).then(function(e){if(this._cachedContinousMatrix&&!this._readStoredData){if(e.qDataPages[0]&&e.qDataPages[0].qMatrix.length){i=Math.min(i,e.qDataPages[0].qMatrix[0][0].qNum);s=Math.max(s,e.qDataPages[0].qMatrix[e.qDataPages[0].qMatrix.length-1][0].qNum)}var n=this._cachedContinousMatrix.filter(function(e){return e[0].qNum<i});var a=this._cachedContinousMatrix.filter(function(e){return e[0].qNum>s});e.qDataPages[0].qMatrix=n.concat(e.qDataPages[0].qMatrix,a);var r=d.getFocusRange(e.qDataPages[0].qMatrix,n.length,a.length,this._data.qHyperCube.qDimensionInfo.length);this._lowerFocusIndex=r.lower;this._upperFocusIndex=r.upper}if(this._cachedContinousAxisData&&!this._readStoredData){this._cachedFocusAxisData=t.extend(true,{},e.qAxisData);j(i,s,e.qAxisData.qAxis,this._cachedContinousAxisData.qAxis)}return e}.bind(this))},updateFocusedContinuousData:function e(t,i){var s=this;var n=this._data;return this.getFocusedContinousData(t,i,n).then(function(e){n.qHyperCube.qDataPages=e.qDataPages;n.qHyperCube.qAxisData=e.qAxisData;var t=0===n.qHyperCube.qDataPages[0].qMatrix.length;s._activeDimAxis.setLabels(t?[]:n.qHyperCube.qAxisData.qAxis);var i=s._activeDimAxis.getUseTransition();s._activeDimAxis.setUseTransition(false);s._activeDimAxis.updateSize();s._activeDimAxis.setUseTransition(i)})},_preUpdateData:function t(i){var s=this;var n=this._super;var a=d.getFullContinuousRange(i);var r=a.min;var o=a.max;return s.isDimensionContinuous?s.getFullContinousData(i,r,o).then(function(t){if(!s.isDimensionContinuous)return i;i=d.addContinuousDataToLayout(i,t);s._activeDimAxis.setDataRange(r,o);s.components.scrollArea.setFullRange(o-r);s.components.scrollArea.setViewRange(o-r);s._activeDimAxis.setPlotMin(r);s._activeDimAxis.setPlotMax(o);m.cancelDebounce(s._debounceUpdateHandle);return n.call(s,i).then(function(t){var i=e.extend(true,{},t);s.components.miniChart.setData(i,true);return t})}):this._super(i)},_updateData:function e(t){this._super.apply(this,[].slice.call(arguments));this._pagingInfo.set(0,0,0,0);if(this.isValid(t)){var i,s=t.qHyperCube.qStackedDataPages[t.qHyperCube.qStackedDataPages.length-1];i=s&&s.qData?s.qData.length?{qLeft:0,qTop:0,qWidth:t.qHyperCube.qSize.qcx,qHeight:s.qData[0].qSubNodes.length}:s.qArea:t.qHyperCube.qDataPages[0].qArea;this._pagingInfo.set(i.qLeft,i.qTop,i.qWidth,i.qHeight);this.components.dimensionAxis.setInnerOffset(i.qTop*this.scrollMultiplicator)}},updateGrid:function e(t,i){this._super(t,i);this.components.grid.setAxes(this._activeDimAxis,this.components.measureAxis)},_setActiveDimensionAxis:function e(t){var i=this.isDimensionContinuous,s=p.isTimeDimension(i,t.qHyperCube.qDimensionInfo[0]),n;if(s){this._activeDimAxis=this.components.timeAxis;n="continuousAxis"}else if(i){this._activeDimAxis=this.components.continuousAxis;n="continuousAxis"}else{this._activeDimAxis=this.components.dimensionAxis;n="dimensionAxis"}this.components.miniChart&&this.components.miniChart.setActiveDimensionAxis(n);this.components.dataArea&&this.components.dataArea.setActiveDimensionAxis(this._activeDimAxis)},updateAxis:function e(t){this._super.apply(this,[].slice.call(arguments));this._readStoredData&&this.options.hideChartScrollWithoutMiniChart&&!this.components.scrollArea.getUseMiniChart()?this.components.scrollArea.hideComponent():this.components.scrollArea.showComponent();if(this.selections){var i="S"!==t.qHyperCube.qMode||this.isDimensionContinuous&&t.qHyperCube.qDimensionInfo.length>1;I.apply(this,[t.qHyperCube.qDimensionInfo.length,t.qHyperCube.qMeasureInfo.length,i,t.color?t.color.mode:null])}this.tooltips&&this.tooltips.setComponent(["top","bottom"].contains(this.components.dimensionAxis.dock)?"y":"x",this.components.dimensionAxis);this._updateMinDiscreteUnitSize(this.components.dimensionAxis)},shouldShowMiniChart:function e(){return b.getDimensionSize(this._data.qHyperCube.qDimensionInfo[0])>1&&false!==this._data.showMiniChartForContinuousAxis},shouldDisableZoom:function e(){return b.getDimensionSize(this._data.qHyperCube.qDimensionInfo[0])<=1},updateTimeAxis:function e(){if(this.isDimensionContinuous){this._disableZoom=this.shouldDisableZoom();if(p.isTimeDimension(true,this._data.qHyperCube.qDimensionInfo[0])){this.components.timeAxis.showComponent();this.components.continuousAxis.hideComponent();this.components.timeAxis.setLabels(this._data.qHyperCube.qAxisData?this._data.qHyperCube.qAxisData.qAxis:null)}else{this.components.continuousAxis.showComponent();this.components.timeAxis.hideComponent()}p.hasTimeTag(this._data.qHyperCube.qDimensionInfo[0])?this._activeDimAxis.dimensionFormatter=new g(this.backendApi.localeInfo,this.backendApi.localeInfo.qDateFmt,null,null,"TS"):this._activeDimAxis.dimensionFormatter=this.chartFormatter.getFormattersForMeasures(this._data.qHyperCube.qDimensionInfo,[0])[0];this.shouldShowMiniChart()?this.components.scrollArea.showComponent():this.components.scrollArea.hideComponent();this.components.dimensionAxis.hideComponent()}else{this.components.dimensionAxis.showComponent();this.components.dimensionAxis.setOffset(this.components.scrollArea.getOffset());this.components.timeAxis.hideComponent();this.components.continuousAxis.hideComponent()}},_disablePagingTransitions:function e(){T.call(this)},_enablePagingTransitions:function e(){O.call(this)},_postResize:function e(){this._super();if(!this.components.dimensionAxis)return;this._updateMinDiscreteUnitSize(this.components.dimensionAxis)},_updateMinDiscreteUnitSize:function e(t){var i=this._data.qHyperCube.qSize.qcy,s=this._data.qHyperCube,n="S"===s.qMode?"qDataPages":"qStackedDataPages",a=s[n]&&s[n][0]?s[n][0].qArea.qHeight:0;if(a>=i&&false===this.options.components.scrollArea.show){t.setMinDiscreteUnitSize(null);return}!t.isVisible(this._layoutMode)||"title"===this._data.dimensionAxis.show||"all"===this._data.dimensionAxis.show&&"none"===this._data.dimensionAxis.label?this._layoutMode===r.prototype.ShowFlags.SPARK?t.setMinDiscreteUnitSize(7):t.setMinDiscreteUnitSize(20):t.setMinDiscreteUnitSize(28)},layout:function e(){var t;if(false===this.options.components.scrollArea.show){var i=this.components.dimensionAxis;i._hideMyLabels=false;t=function e(){if(i._discreteSpacing*(i._groupSize||1)<20){i._hideMyLabels=true;return true}}}this._super(this.components.dimensionAxis.isVertical()?"vertical":"horizontal",t);z.call(this)},setIsDimensionContinuous:function e(t){if(this.isDimensionContinuous===t)return;this.isDimensionContinuous=t;this.components.scrollArea.setAllowResize(t);this.checkScrollToggle()},checkScrollToggle:function e(){if(this._navigation&&this._on)if(this.isDimensionContinuous){this._scrollController.off();this._panZoomController.on()}else{this._panZoomController.off();this.moreData?this._scrollController.on():this._scrollController.off()}},on:function e(){if(this._on)return;this._super();this.checkScrollToggle()},off:function e(){if(!this._on)return;if(this._navigation){this._scrollController.off();this._panZoomController.off()}this._super()},destroy:function e(){this._super();this.cancelPromises=true;this._disablePagingTransitions();this.components.scrollArea.stopListen("scrollStart");this.components.dimensionAxisTitle.stopListen("drill-up");this._panZoomController.release();this.components.timeAxis&&this.components.timeAxis.stopListen("rendered");this.components.continuousAxis&&this.components.continuousAxis.stopListen("rendered");this._scrollController.PanStart.unbind(this.panStartFn);this._scrollController.PanUpdate.unbind(this.panUpdateFn);this._scrollController.PanWheel.unbind(this.panWheelFn)}});return A}.apply(t,s),void 0!==n&&(e.exports=n))},1240:function(e,t,i){"use strict";var s,n;!(s=[i(410),i(1241),i(90),i(1034)],n=function(e,t,i,s){var n,a=1,r=30,o=150,l=5,h=80,c=60,u={YEAR:1,DATE:2,MINUTE:3,SECOND:4};function d(){var e=this._scale.getValues(),t=e.secondaryValues,i=e.secondaryDates,s=[],n;for(n=0;n<t.length;n++)s.push({position:0,value:t[n],opacity:1,label:t[n]});var a=this._getLabels(s,true);a.labelsBetweenTicks=true;a.align=this.yMirrorMode?"right":"left";a.dates=i;this._levels.splice(1);this._levels.unshift(a)}function p(e,t,i,s){var n=i.length*s,a=0,l=e._formatter,h=e._renderer,c=e._style.label.font,u=0;for(var d=0;d<i.length;d++){if(t[d]<r)a++;else if(t[d]<o&&l){u=h.getTextWidth(l.formatValue(i[d]),c);u>t[d]-2*e._labelPadding&&a++}if(a>n)return false}return true}function f(e,t){var i;for(i=0;i<e.length;++i){var n=e[i];var a=p(t,n.widths,n.labels,.1);if(a)break;var r=1.1;var o=n.widths.map(function(e){return e*r});var c=p(t,o,n.labels,.1);if(c){++i;break}}t.indicators=i>0&&i<e.length?e[i-1]:null;if(t.indicators){var u=s.getAvgTickWidth(t.indicators.positions)||t._plotSize;var d=s.getAvgTickWidth(e[i].positions)||t._plotSize;u<l||d<h?t.indicators=null:t._snapTicksAvgWidth=u}return e.slice(i,i+2)}function m(e,t){var i=e.map(function(e){var i=e.qTicks,n=[],r=[],o=[],l=[],h=[],c=[],u,d,p=true;i.forEach(function(e){u=e.qStart;n.push(u);l.push(t.isLabelSelected(e.qStart,e.qEnd)?1:t._globalAlpha);h.push(e.qText);c.push(e.qualifiedText);d=t.getPositionOfValue(u);r.push(Math.abs(d-t.getPositionOfValue(e.qEnd)));d=s.roundToHalf(d);o.push(d);e.qStart!==e.qEnd-1&&(p=false)});if(i.length>0){u=i[i.length-1].qEnd;n.push(u);d=t.getPositionOfValue(u);d=s.roundToHalf(d);o.push(d)}return{align:t.yMirrorMode?"right":"left",labelsBetweenTicks:true,values:n,widths:r,positions:o,opacities:l,labels:h,qualifiedLabels:c[0]?c:null,labelMode:a,labelSpace:t._wantedLabelSpacePerLevel,dayLevel:p,rangeLabels:true,explicitLabels:true}});i=f(i,t);return i}function g(e){var t,i,s=[],n,a,r;for(t=0;t<e.length;t++){a=e[t].qTicks;for(i=0;i<e.length;i++){r=e[i].qTicks;if(t===i||!a[0]||!r[0]||"string"===typeof a[0].qualifiedText||"string"===typeof r[0].qualifiedText)continue;if(a.length===r.length){n=a.every(function(e,t){return e.qStart===r[t].qStart&&e.qEnd===r[t].qEnd});if(n)if(e[t].qTags.contains("$qualified")){r.forEach(function(e,t){e.qualifiedText=a[t].qText});s.push(t)}else{a.forEach(function(e,t){e.qualifiedText=r[t].qText});s.push(i)}}}}s.sort(function(e,t){return t-e});s.forEach(function(t){e.splice(t,1)})}function x(){for(var e=0;e<this._levels.length;++e){var t=this._levels[e];for(var i=0;i<t.values.length;++i){var n=t.values[i];var a=this.getPositionOfValue(n);t.positions[i]=s.roundToHalf(a);if(i<t.values.length-1){var r=this.isLabelSelected(n,t.values[i+1]);t.opacities[i]=r?1:this._globalAlpha}}}}function _(){if(!this._formatter.localeInfo)return;this._levelFormattingPatterns=[];this._labelGranularity===u.YEAR?this._levelFormattingPatterns.push("YYYY"):this._labelGranularity===u.DATE?this._levelFormattingPatterns.push(this._formatter.localeInfo.qDateFmt):this._labelGranularity===u.MINUTE?this._levelFormattingPatterns.push(this._timeformatPatterns.minuteLevel):this._labelGranularity===u.SECOND&&this._levelFormattingPatterns.push(this._timeformatPatterns.secondLevel);this._levelFormattingPatterns.push(this._formatter.localeInfo.qDateFmt)}function y(e,t){var i=t/e,s=3*i*30,n=i/2,a=i/24/60/2;a>this._approxLabelWidths.second?this._labelGranularity=u.SECOND:n>this._approxLabelWidths.minute?this._labelGranularity=u.MINUTE:s>this._approxLabelWidths.date?this._labelGranularity=u.DATE:this._labelGranularity=u.YEAR}n=e.extend("TimeAxis",{init:function e(){this._super.apply(this,[].slice.call(arguments));this._approxLabelWidths={year:c,date:c,minute:c,second:c};this._levelFormattingPatterns=["YYYY","YYYY-mm-yy"];this._labelGranularity=u.YEAR;this._timeformatPatterns={minuteLevel:"hh:mm",secondLevel:"hh:mm:ss"}},_initScales:function e(){this._scale=new t},_generateExplicitLabels:function e(){var t=false;if(this._explicitLabels.length){this._levels=m(this._explicitLabels,this);if(this._levels.length){this._calculationSize/(this._scaleDetails.explicitPlotMax-this._scaleDetails.explicitPlotMin)/2>this._approxLabelWidths.minute&&d.call(this);t=true;if(this._levels.length>1){this._levels[1].qualifiedLabels&&(this._levels[1].labels=this._levels[1].qualifiedLabels);this._levels[1].outOfSyncWithLevelBelow=!this._levels[1].dayLevel&&!this._levels[1].values.every(function(e){return e<this._scale._dataMin||e>this._scale._dataMax||this._levels[0].values.indexOf(e)>-1}.bind(this))}this.ticks=s.getTicks(this._levels[0].values,this._padding,this._plotSize);this.minorTicks=[];if(this._levels.length>1){this.minorTicks=this.ticks.filter(function(e){return-1===this._levels[1].values.indexOf(e.value)},this);this.ticks=this.ticks.filter(function(e){return-1!==this._levels[1].values.indexOf(e.value)},this)}}}return t},calculatePreliminaryLabelSpace:function e(){var t=this._super.apply(this,arguments);t.relevantLabelSize*=2;return t},calculateLabelSpace:function e(){var t=this._super.apply(this,arguments);t.relevantLabelSize*=2;return t},_initLevels:function e(){if(this.useExplicitLabels){x.call(this);this._levels[0].formatPattern=this._levelFormattingPatterns[0]}else{this._levels=[this._getLabels(this.minorTicks,true)];this._levels[0].labelsBetweenTicks=true;this._levels[0].align=this.yMirrorMode?"right":"left";this._levels[0].dates=this._minorTickDates;this._levels[0].formatPattern=this._levelFormattingPatterns[0];if(this.ticks.length){this._levels.push(this._getLabels(this.ticks,true));this._levels[1].labelsBetweenTicks=true;this._levels[1].align=this.yMirrorMode?"right":"left";this._levels[1].dates=this._tickDates;this._levels[1].formatPattern=this._levelFormattingPatterns[1]}}},_calculateScale:function e(t){if(0===t)return;var i=this._scaleDetails,s=Number.isNaN(+i.realDataMin)?i.dataMin:i.realDataMin,n=Number.isNaN(+i.realDataMax)?i.dataMax:i.realDataMax,a=Number.isNaN(+i.explicitPlotMin)||null===i.explicitPlotMin?s:i.explicitPlotMin,r=Number.isNaN(+i.explicitPlotMax)||null===i.explicitPlotMax?n:i.explicitPlotMax,o;o=this.isRadial()?96:Math.max(c,this._getApproximateLabelWidth(a,r,this._levelFormattingPatterns[0])+this._labelPadding);var l=this.isVertical()?4*this._fontHeight:o,h=Math.max(2,t/l/i.tickMultiplier+1);l=t/(h-1);i.usedDataMin=s;i.usedDataMax=n;i.minTickSpacingInPixel=l;i.plotSize=this._plotSize;i.calculationSize="undefined"!==typeof t?t:this._calculationSize;i.fontHeight=this._fontHeight;i.showExplicitMinMax=false;Object.keys(i).forEach(function(e){this._scale["_"+e]=i[e]},this);this._scale.calculateTicks(this._approxLabelWidths,"T"===this._formatter.type)},_generateTickObjects:function e(t,i){this.useExplicitLabels=this._generateExplicitLabels();if(!this.useExplicitLabels){var n=t.getValues();this.ticks=s.getTicks(n.mainValues,this._padding,i);this.minorTicks=s.getTicks(n.secondaryValues,this._padding,i);this._tickDates=n.mainDates;this._minorTickDates=n.secondaryDates}},_updateTickFormatting:function e(t,i){var s,n,a,r;for(s=0;s<t.length;s++)if(!t[s].explicitLabels){a=t[s].dates&&t[s].values.length!==t[s].dates.length;r=i._dateFormatter&&t[s].dates&&t[s].dates.length&&!a;for(n=0;n<t[s].values.length;n++)t[s].labels[n]=r?i._dateFormatter.format(t[s].dates[n],t[s].formatPattern):i.formatValue(t[s].values[n])}},formatValue:function e(t){if(this._discrete||!this._formatter)return t+"";var i="YYYY"===this._levels[0].formatPattern?void 0:this._levels[0].formatPattern;return this._formatter.formatValue(t,i)},setLabels:function e(t){this._explicitLabels=i.extend(true,[],t).reverse();g(this._explicitLabels)},updateFormatter:function e(){this._super();if(!this._formatter.localeInfo)return;var t=/t+/gi.test(this._formatter.localeInfo.qTimestampFmt);this._timeformatPatterns.minuteLevel=t?"h:mm tt":"hh:mm";this._timeformatPatterns.secondLevel=t?"h:mm:ss tt":"hh:mm:ss";var i=41000.2343433;this._approxLabelWidths={year:Math.max(c,this._renderer.getTextWidth(this._formatter.formatValue(i,"YYYY"),this._style.label.font)+this._labelPadding+20),date:Math.max(c,this._renderer.getTextWidth(this._formatter.formatValue(i,this._formatter.localeInfo.qDateFmt),this._style.label.font)+this._labelPadding+20),minute:Math.max(c,this._renderer.getTextWidth(this._formatter.formatValue(i,this._timeformatPatterns.minuteLevel),this._style.label.font)+this._labelPadding+20),second:Math.max(c,this._renderer.getTextWidth(this._formatter.formatValue(i,this._timeformatPatterns.secondLevel),this._style.label.font)+this._labelPadding+20)}},_updateScaleAndTicks:function e(){if(this._scaleDetails.calculationSize){y.call(this,this._scaleDetails.explicitPlotMax-this._scaleDetails.explicitPlotMin,this._scaleDetails.calculationSize);_.call(this)}this._super()}});return n}.apply(t,s),void 0!==n&&(e.exports=n))},1241:function(e,t,i){"use strict";var s,n;!(s=[i(1304),i(1242)],n=function(e,t){var i=e.extend("TimeScale",{init:function e(){this._super.apply(this,arguments);this.mainDates=[];this.secondaryDates=[]},calculateTicks:function e(i,s){var n,a,r,o,l;a=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;n=t.calculateTicks(this._calculationSize,a,this._explicitPlotMin,this._explicitPlotMax,i,s);this._mergeResult(n);if(0===this.secondaryValues.length&&!Number.isNaN(+this.plotMin)){this.secondaryValues=[this.plotMin];this.secondaryDates=[t.getUnixDate(this.plotMin)]}0===this._tickSpacing&&(this._tickSpacing=1);if(this._showExplicitMinMax){o=this.secondaryValues[0];l=this.secondaryDates[0];this.secondaryValues[0]=n.plotMin;this.secondaryDates[0]=t.getUnixDate(n.plotMin);if(o-n.plotMin>=n.tickSpacing/2){this.secondaryValues.splice(1,0,o);this.secondaryDates.splice(1,0,l)}r=n.mainTickValues[n.mainTickValues.length-1];if(n.plotMax-r<=n.tickSpacing/2){this.secondaryValues[n.mainTickValues.length-1]=n.plotMax;this.secondaryDates[n.secondaryDates.length-1]=t.getUnixDate(n.plotMax)}else{this.secondaryValues.push(n.plotMax);this.secondaryDates.push(t.getUnixDate(n.plotMax))}}},_mergeResult:function e(t){this._tickSpacing=t.tickSpacing;this.plotMin=t.plotMin;this.plotMax=t.plotMax;this.plotRange=this.plotMax-this.plotMin;this.tickMin=t.tickMinValue;this.tickMax=t.tickMaxValue;this.mainValues=t.mainTickValues;this.mainDates=t.mainDates;this.secondaryValues=t.secondaryTickValues;this.secondaryDates=t.secondaryDates},getValues:function e(){return{mainValues:this.mainValues,mainDates:this.mainDates,secondaryValues:this.secondaryValues,secondaryDates:this.secondaryDates}}});return i}.apply(t,s),void 0!==n&&(e.exports=n))},1242:function(e,t,i){"use strict";var s,n;!(s=[],n=function(){var e=25569,t=86400,i=1440;var s={dateToQlikTimestamp:function t(i){return i.getTime()/1e3/86400-i.getTimezoneOffset()/60/24+e},getUnixDate:function e(t){return new Date(1899,11,30+t)},calculateTicks:function e(s,n,a,r,o,l){var h=this.getUnixDate(n),c=h.getFullYear(),u=h.getMonth(),d=h.getDate(),p=a-n,f=r-a,m=s/f,g=m/1440,x=m/t,_=366*m,y=3*m*30,v=o.second/x,b=o.minute/g,M=o.date/y,A=o.year/_,D,w=0,S,C=0,q=null,L=null,P=null,k=null,I=null,T=null,R={plotMin:a,plotMax:r,tickMin:0,tickMax:0,mainTickValues:[],mainDates:[],secondaryTickValues:[],secondaryDates:[]};if(v<1){q=1;C=1/t}else if(v<2){q=2;C=1/t*2}else if(v<5){q=5;C=1/t*5}else if(v<10){q=10;C=1/t*10}else if(v<30){q=30;C=1/t*30}else if(b<1){L=1;C=1/i}else if(b<2){L=2;C=1/i*2}else if(b<5){L=5;C=1/i*5}else if(b<10){L=10;C=1/i*10}else if(b<30){L=30;C=1/i*30}else if(b<60){P=1;C=1/24}else if(b<120){P=2;C=2/24}else if(b<360){P=6;C=.25}else if(b<720){P=12;C=.5}else if(M<1/90){k=1;C=1}else if(M<2/90){k=2;C=2}else if(M<7/90){k=7;C=7}else if(M<31/90){I=1;C=31}else if(M<1){I=3;C=90}else if(A<1){T=1;C=366}else if(A<2){T=2;C=732}else if(A<5){T=5;C=1826.25}else{T=10;C=3652.5}S=Math.floor((p+n%1)/C);while(w<r){D=T?new Date(c+S*T,0,1):I?new Date(c,u+S*I,1):k?new Date(c,u,d+S*k):P?new Date(c,u,d,0+S*P):L?new Date(c,u,d,0,0+S*L):new Date(c,u,d,0,0,0+S*q);w=this.dateToQlikTimestamp(D);R.secondaryDates.push(D);R.secondaryTickValues.push(w);var N=Math.floor(w);if(!l&&!T&&!I&&!k&&R.mainTickValues[R.mainTickValues.length-1]!==N){R.mainDates.push(this.getUnixDate(N));R.mainTickValues.push(N)}S++}R.tickSpacing=C;R.tickMinValue=R.secondaryTickValues[0];R.tickMaxValue=R.secondaryTickValues[R.secondaryTickValues.length-1];return R}};return s}.apply(t,s),void 0!==n&&(e.exports=n))},1243:function(e,t,i){"use strict";var s,n;!(s=[i(180),i(104),i(11),i(96),i(109),i(100)],n=function(e,t,i,s,n,a){var r,o=".scrollarea";function l(e){var i=this,s=this.isVertical(),n,a={size:s?"height":"width",pos:s?"y":"x",coord:s?"pageY":"pageX"},r=new t(0,0,0,0),o=i._$renderAreaWrap.offset(),l,h;r.x=o.left;r.y=o.top;r.width=i._$renderAreaWrap.width();r.height=i._$renderAreaWrap.height();this.fire("scrollStart");h=i.scrollRect[a.size]*r[a.size];l=e.points[0][a.pos]-r[a.pos];this.yMirrorMode&&!s&&(l=r.width-l);n=l-h/2;i.scrollRect[a.pos]=Math.max(0,Math.min(r[a.size]*(1-i.scrollRect[a.size]),n))/r[a.size];i.setOffset(i.scrollRect[a.pos]*i.fullState.max)}function h(e){var i=this,s=this.isVertical(),n={size:s?"height":"width",pos:s?"y":"x",coord:s?"pageY":"pageX"},a=this.yMirrorMode&&!s,r=i._$renderAreaWrap.offset();this._containerRect=new t(0,0,0,0);this._containerRect.x=r.left;this._containerRect.y=r.top;this._containerRect.width=i._$renderAreaWrap.width();this._containerRect.height=i._$renderAreaWrap.height();i.scrollRect[n.size]=i.viewState.range/i.fullState.max;this._rp=e.points[0][n.pos]-this._containerRect[n.pos]-i.scrollRect[n.pos]*this._containerRect[n.size];a&&(this._rp=i.scrollRect[n.size]*this._containerRect[n.size]-this._rp);i.startScrollPos=i.scrollRect[n.pos];i.startScrollSize=i.scrollRect[n.size];if(this._rp<0){i.scrollRect[n.pos]=Math.max(0,i.scrollRect[n.pos]-this._rp/this._containerRect[n.size]);this._rp=0}else if(this._rp/this._containerRect[n.size]>i.scrollRect[n.size]){i.scrollRect[n.pos]=Math.min(1,this._rp/this._containerRect[n.size])-i.scrollRect[n.size];this._rp=i.scrollRect[n.size]*this._containerRect[n.size]}this.fire("scrollStart")}function c(e){var t=this,i=this.options,s=this.isVertical(),n="function"===typeof i.onScroll?i.onScroll:function(){},a={size:s?"height":"width",pos:s?"y":"x",coord:s?"pageY":"pageX"},r=e.points[0][a.pos]-this._containerRect[a.pos],o=this.yMirrorMode&&!s,l=1e-5;if(this.allowResize){var h=(r-this._rp)/this._containerRect[a.size]-t.startScrollPos;var c=t.startScrollPos;var u=c+t.startScrollSize;if(/start/.test(e.relatedTarget.className)){e.relatedTarget.classList.add("active");c=Math.max(0,Math.min(u-l,c+h))}else if(/end/.test(e.relatedTarget.className)){e.relatedTarget.classList.add("active");u=Math.min(1,Math.max(c+l,u+h))}else{c=Math.min(1-t.startScrollSize,Math.max(0,c+h));u=Math.min(1,Math.max(0+t.startScrollSize,u+h))}t.setViewRange((u-c)*t.fullState.max);o?t.setOffset((1-u)*t.fullState.max):t.setOffset(c*t.fullState.max);t.fire("offsetChanged")}else{o&&(r=this.rect.width-r);t.scrollRect[a.pos]=Math.max(0,Math.min(this._containerRect[a.size]*(1-t.scrollRect[a.size]),r-this._rp))/this._containerRect[a.size];t.setOffset(t.scrollRect[a.pos]*t.fullState.max)}n()}function u(){if(!this.miniChart)return;var e=this;s(this.miniChart.container).tap({id:o,end:function t(i,s){l.call(e,s)}});s(this.miniChart.container).swipe({id:o,options:{radiusThreshold:1},start:function t(i,s){h.call(e,s)},update:function t(i,s){c.call(e,s)},end:function e(t,i){i.relatedTarget.classList.remove("active")}})}function d(){if(!this.miniChart)return;i(this.miniChart.container).off(o);s(this.miniChart.container).off("*",o)}function p(){this.miniChart&&(this._internalUseMiniChart?this.miniChart.showComponent():this.miniChart.hideComponent())}function f(e,t){var i=this.viewState.min;var s=this._relativeOffset?this._explicitOffset*(this.fullState.max-this.viewState.range):this._explicitOffset||0;this.viewState.min=Math.max(0,Math.min(s||0,(this.fullState.max||0)-(this.viewState.range||0)));if(this.viewState.min!==i){this.invalidateDisplay(e);t&&this.fire("offsetChanged")}}function m(e,t,i){var s=Array.isArray(e)?e:[e];s.forEach(function(e){i.forEach(function(t){e.style[t]=""});e.className=t})}r=e.extend("ScrollArea",{init:function e(){this._super.apply(this,Array.prototype.slice.call(arguments));this._useMiniChart=true;this._internalUseMiniChart=true;this._miniChartThreshold=.5;this._miniChartMinimunNumberOfBars=3;this.scrollRect=new t(0,0,0,0);this.fullState={min:0,max:20};this.viewState={min:0,range:10};this.allowResize=false;this._$renderAreaWrap.addClass("qv-chart-component-scroll-area");this.before=document.createElement("div");this.bar=document.createElement("div");this.after=document.createElement("div");this.before.style.position="absolute";this.bar.style.position="absolute";this.after.style.position="absolute";this.before.style.backgroundColor="rgba(0,0,0,0.1)";this.after.style.backgroundColor="rgba(0,0,0,0.1)";this.bar.style.marginTop="-1px";i(this.before).attr("tid","component.scrollArea.before");i(this.bar).attr("tid","component.scrollArea.bar");i(this.after).attr("tid","component.scrollArea.after");i(this.bar).append('<div class="q-resize-handle q-resize-handle-start">');i(this.bar).append('<div class="q-resize-handle q-resize-handle-end">');this.container.appendChild(this.before);this.container.appendChild(this.after);this.container.appendChild(this.bar);this._styleService=a.initializeService("object."+this.options.parentType);this.before.style.backgroundColor=this._styleService.getStyle("","color");this.after.style.backgroundColor=this._styleService.getStyle("","color");this.before.style.opacity=.1;this.after.style.opacity=.1},on:function e(){var t=this;this._super();s(this.container).tap({id:o,end:function e(i,s){l.call(t,s)}});s(this.container).swipe({id:o,options:{radiusThreshold:1},start:function e(i,s){h.call(t,s)},update:function e(i,s){c.call(t,s)},end:function e(t,i){i.relatedTarget.classList.remove("active")}});u.call(this);this._on&&this.allowResize&&this.container.classList.add("q-allow-resize")},off:function e(){this._super();i(this.container).off(o);s(this.container).off("*",o);d.call(this);this.container.classList.remove("q-allow-resize")},setAllowResize:function e(t){this.allowResize=t;this.container.classList[t&&this._on?"add":"remove"]("q-allow-resize")},calculateRelevantSize:function e(){var t=s.utils.touch?32:16,i;if(this.miniChart&&this._useMiniChart){this.miniChart.calculateRelevantSize();i=this.miniChart.relevantSize;this._internalUseMiniChart=true;p.apply(this)}this.relevantSize=this._internalUseMiniChart?i||16:t},insertAdjacentTo:function e(){this._super.apply(this,[].slice.apply(arguments));this.miniChart&&this.miniChart.setRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height)},setRect:function e(){this._super.apply(this,[].slice.apply(arguments));this.miniChart&&this.miniChart.setRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height)},setDock:function e(t){this._super(t);this.miniChart&&this.miniChart.setDock(t)},getOffset:function e(){return this.viewState.min},setRelativeOffset:function e(t){this._explicitOffset=t;this._relativeOffset=true;f.call(this,"ScrollArea.setOffset",true)},setOffset:function e(t){this._explicitOffset=t;this._relativeOffset=false;f.call(this,"ScrollArea.setOffset")},setMiniChart:function e(t){this.miniChart&&d.call(this);this.miniChart=t;this.miniChart.setDock(this.options.dock);p.apply(this);this._on&&u.call(this);this.invalidateDisplay("ScrollArea.setMiniChart")},setUseMiniChart:function e(t){this._useMiniChart=t;this._internalUseMiniChart=t;p.apply(this);this.invalidateDisplay("ScrollArea.setUseMiniChart")},getUseMiniChart:function e(){return this._useMiniChart},setViewRange:function e(t){this.viewState.range=t;f.call(this,"ScrollArea.setViewRange",true);this.invalidateDisplay("ScrollArea.setViewRange")},getViewRange:function e(){return this.viewState.range},setSpaces:function e(t){this._spaces=t},setDataRange:function e(t){this.dataRange=t;this.invalidateDisplay("ScrollArea.setDataRange")},getDataRange:function e(){return this.dataRange},setFullRange:function e(t){this.fullState.max=t;f.apply(this,["ScrollArea.setFullRange",true]);this.invalidateDisplay("ScrollArea.setFullRange")},getFullRange:function e(){return this.fullState.max},isVisible:function e(t){return this._super(t)&&(this.viewState.range<this.fullState.max||this.allowResize)},setOuterRect:function e(t,i,s,n){this._super(t,i,s,n);this.miniChart&&this.miniChart.setOuterRect(t,i,s,n)},setLayoutToContainerRatios:function e(t,i){this._super(t,i);this.miniChart&&this.miniChart.setLayoutToContainerRatios(t,i)},setContainerRect:function e(t,i,s,n){this._super(t,i,s,n);this.miniChart&&this.miniChart.setContainerRect(t,i,s,n)},updateSize:function e(){this._super();var t=this._styleService.getStyle("","color");if(this.miniChart&&this._internalUseMiniChart&&this.miniChart.isVisible()){this.before.style.display="block";this.bar.style.border="1px solid "+n.toRGBA(t,.4);this.bar.style.backgroundColor="transparent";this.after.style.display="block";if(this.isVertical())m.apply(this,[[this.before,this.bar,this.after],"qv-chart-scrollable-mini-chart-vertical",["width","left"]]);else{m.apply(this,[[this.before,this.after],"qv-chart-scrollable-mini-chart-horizontal",["height","top"]]);m.apply(this,[this.bar,"qv-chart-scrollable-mini-chart-bar-horizontal",["height","top"]])}}else{this.before.style.display="none";this.bar.style.backgroundColor=n.toRGBA(t,.2);this.bar.style.boxShadow="none";this.bar.style.border="none";this.after.style.display="none";this.isVertical()?m.apply(this,[this.bar,"qv-chart-scrollable-vertical",["width","left"]]):m.apply(this,[this.bar,"qv-chart-scrollable-horizontal",["height","top"]])}},paint:function e(t,s){var n;this.before.style.backgroundColor=this._styleService.getStyle("","color");this.after.style.backgroundColor=this._styleService.getStyle("","color");this.before.style.opacity=.1;this.after.style.opacity=.1;this.container.style.display="block";this._super(t,s);this.scrollRect[this.isVertical()?"height":"width"]=this.viewState.range/this.fullState.max;this.scrollRect[this.isVertical()?"y":"x"]=this.viewState.min/this.fullState.max;this.yMirrorMode&&!this.isVertical()&&(this.scrollRect.x=1-this.scrollRect.width-this.scrollRect.x);n=this.scrollRect[this.isVertical()?"height":"width"]*this.rect[this.isVertical()?"height":"width"];n=n<1?1:n;n=100*n/this.rect[this.isVertical()?"height":"width"];if(this.isVertical()){i(this.before).css({height:100*this.scrollRect.y+"%",top:"0%"});i(this.bar).css({top:100*this.scrollRect.y+"%",height:n+"%"});i(this.after).css({top:100*this.scrollRect.y+n+"%",height:100-(100*this.scrollRect.y+n)+"%"})}else{i(this.before).css({width:100*this.scrollRect.x+"%",left:"0%"});i(this.bar).css({left:100*this.scrollRect.x+"%",width:n+"%"});i(this.after).css({left:100*this.scrollRect.x+n+"%",width:100-(100*this.scrollRect.x+n)+"%"})}},clear:function e(){this.container.style.display="none"}});Object.defineProperty(r.prototype,"className",{value:"ScrollArea"});return r}.apply(t,s),void 0!==n&&(e.exports=n))},1244:function(e,t,i){"use strict";var s,n;!(s=[i(90)],n=function(e){return{getFocusRange:function e(t,i,s,n){var a={},r,o,l=i<1?0:i-1,h=t.length-s-1;if(n<2)a[t[0][1].qElemNumber]={lower:null,upper:null};else for(o=0;o<t.length;o++)a[t[o][1]]||(a[t[o][1].qElemNumber]={lower:null,upper:null});for(o=i-1;o>=0;o--){r=a[t[o][1].qElemNumber];r&&!r.lower&&(r.lower=o)}for(o=t.length-s;o<t.length;o++){r=a[t[o][1].qElemNumber];r&&!r.upper&&(r.upper=o)}Object.keys(a).forEach(function(e){a[e].lower<l&&(l=a[e].lower);a[e].upper>h&&(h=a[e].upper)});return{lower:l,upper:h}},getFullContinuousRange:function e(t){var i=t.qHyperCube.qDimensionInfo[0].qMin;var s=t.qHyperCube.qDimensionInfo[0].qMax;if(s<i||"NaN"===s){i="NaN";s="NaN"}else if(i===s){i-=.5;s+=.5}return{min:i,max:s}},addContinuousDataToLayout:function t(i,s){i=e.extend({},i);i.qHyperCube=e.extend({},i.qHyperCube,{qMode:"S"});i.qHyperCube.qDataPages=s.qDataPages;i.qHyperCube.qAxisData=s.qAxisData;return i}}}.apply(t,s),void 0!==n&&(e.exports=n))},1245:function(e,t,i){"use strict";var s,n;!(s=[i(11),i(102),i(164),i(146),i(232),i(256)],n=function(e,t,i,s,n,a){var r=3;var o=a.extend("PanScrollController",{init:function n(a,o,l){t.mixin(this);this.notification("PanStart");this.notification("PanUpdate");this.notification("PanWheel");this.notification("PanEnd");this._$dataAreaContainer=a;this._$fullContainer=o;var h=this;this._options=e.extend(true,{preventDefault:true},l);function c(e,t){h._panning=true;h._panX=t.points[0].x;h._panY=t.points[0].y;h.PanStart.emit()}function u(e){h._panning=true;h._panX=e.pageX;h._panY=e.pageY;h.PanStart.emit()}function d(e,t){if(!h._panning){h._panning=true;h._panX=t.points[0].x;h._panY=t.points[0].y}var i=t.swipe&&t.swipe.currentPoint?t.swipe.currentPoint:new s(e.pageX,e.pageY);var n=new s(i.x-h._panX,i.y-h._panY);h._panX=i.x;h._panY=i.y;h.PanUpdate.emit(n)}function p(){h._panning=false;h.PanEnd.emit()}function f(e){var t=i.getMouseWheelData(e.originalEvent);if(!t.delta)return;var s=t.delta>0?r:-r;h.PanWheel.emit(s)}this._eventHandlers={preventDefault:true,swipe:{start:c,update:d,end:p},swipetwo:{start:c,update:d,end:p},mousewheel:i.throttle(f,20),wheelswipe:{start:u,update:d,end:p},exclusive:function e(){return false},active:function e(){return true}}},on:function e(){if(this._isOn)return;n.addInteraction(this._eventHandlers,this._$dataAreaContainer,2,["swipe","swipetwo","mousewheel","wheelswipe"]);this._isOn=true},off:function e(){if(!this._isOn)return;n.removeInteraction(this._eventHandlers);this._isOn=false}});return o}.apply(t,s),void 0!==n&&(e.exports=n))},1251:function(e,t,i){"use strict";var s,n;!(s=[i(92),i(90),i(1034)],n=function(e,t,i){var s,n={LINE:"line",AREA:"area",STACKED:"stackedArea"},a={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function r(e,t,i,s){return i<e||s>t}function o(e){return e.color.byMeasureDef&&e.color.byMeasureDef.activeMeasureIndex>=0&&1===e.qHyperCube.qMeasureInfo.length}s=e.extend("LineObjectsModel",{init:function e(){this._lineObjectSettings=[]},update:function e(i,s){this._updateLineObjectsSettings(i,t.extend({selections:this._getSelected(i,s.numDimensions)},s))},getLineObjectsSettings:function e(){return this._lineObjectSettings},getPointsOutOfRange:function e(){return this._outOfRange.points},_updateLineObjectsSettings:function e(i,s){var n,a=i?i.length:0,r,o,l,h,c,u;this._outOfRange={up:{},down:{},points:[]};this._lineObjectSettings=[];for(n=0;n<a;n++){r=i[n];o=s.minorAxes[s.measureToAxisIndex[r.measureIdx]];l=s.axesSettings[s.measureToAxisIndex[r.measureIdx]];h=this._getColorSettings(s.colorMap,l,o);c=[];this._updateLinePoints(i[n].points,c,this._outOfRange,t.extend({majorAxis:s.majorAxis,minorAxis:o,measureIdx:r.measureIdx,axisSettings:l,isLineSelected:s.selections.lines.indexOf(n)>=0},s));u=t.extend({info:i.info,colors:h,clippings:this._getClippings(o,s.rect),idx:i.idx,points:c},s);this._lineObjectSettings.push(u)}},_updateLinePoints:function e(t,s,o,l){var h,c,u,d,p,f,m,g,x=.5,_,y,v,b,M,A=t?t.length:0,D=1===A,w=l.yMirrorMode,S=l.rect.width,C=l.rect.height;m=0;for(c=0;c<A;c++){if(!t[c])continue;h=t[c];u=h.idx;d={x:l.isNumeric?l.numericAxis.getPositionOfValue(h.dimValue):l.majorAxis.getPositionOfValue(u,0),y:l.minorAxis.zeroPos};p=h.cacheCircle;if(p){p.cx=d.x;p.cy=d.y}if(D&&(d.x<0||d.x>S))continue;if(h.isNaN&&!h.hasRightNeighbour&&"number"!==typeof h.nearestRightNeighbour)break;if(h.isNaN&&l.lineType===n.STACKED&&l.nullMode===a.CONNECT&&true!==h.isInterpolationOffset);else if(h.isNaN&&true!==h.isInterpolationOffset){s.push(false);continue}g=h.hasRightNeighbour?t[c+1].idx:h.nearestRightNeighbour;f="undefined"!==typeof g?l.isNumeric?t[g]?l.numericAxis.getPositionOfValue(t[g].dimValue):NaN:l.majorAxis.getPositionOfValue(g,0):NaN;if(!w&&r(0,S,f,m)||w&&r(0,S,m,f)){s.push(false);continue}_=h.cacheItem&&h.cacheItem.selected;var q=!_&&l.isLineSelected&&l.selections.synqronize&&this._isSelectedIndirectly(u,l.selections.lines,l.selections.points);var L=l.minorAxis.getPositionOfValue(h.aggregated.end);d.y=i.roundToHalf(L)+x;d.y<-1e5&&(d.y=-1e5);d.y>C+1e5&&(d.y=C+1e5);if(p){p.r=Math.max(l.style.dataPoints.size.normal/2,8);p.cy=Math.max(l.axisSettings.topCutoff,Math.min(l.axisSettings.bottomCutoff,d.y))}h.isNaN||(m=d.x);y=h.cacheItem&&(h.cacheItem.parent?[h.cacheItem.parent.id,h.cacheItem.id]:h.cacheItem.id);v=l.colorMap.getColor(y,h.aggregated.end,l.measureIdx,h.rowIndex).toRGBA();if(D)M=true;else{M=!h.hasLeftNeighbour&&!h.hasRightNeighbour&&l.nullMode===a.GAP;M&&l.isNumeric&&(M=(0==c||t[c-1])&&(c===A-1||t[c+1]))}b={size:_?l.style.dataPoints.size.selected:l.style.dataPoints.size.normal,selected:_||q,selectedIndirectly:q,text:h.cacheItem?h.cacheItem.getDimensions()[0]:"",measureIdx:h.measureIdx,label:h.label,value:h.aggregated.end,isNaN:h.isNaN,isInterpolationOffset:h.isInterpolationOffset,color:v,outOfRangeUp:L<l.axisSettings.topCutoff,outOfRangeDown:L>l.axisSettings.bottomCutoff,outOfDimensionBounds:d.x<0||d.x>S,outOfBounds:d.x<0||d.x>S||h.aggregated.end>l.axisSettings.plotMax||h.aggregated.end<l.axisSettings.plotMin,dataIndex:u,isSingle:M,hidden:h.hidePoint,x:d.x,y:d.y,y1:0===h.aggregated.start?l.axisSettings.areaStartBase:l.minorAxis.getPositionOfValue(h.aggregated.start),cacheItem:h.cacheItem,isNull:h.cacheItem&&-2===h.cacheItem.id};if(b.outOfRangeUp||b.outOfRangeDown)if(b.outOfRangeUp&&!o.up[b.x]){o.points.push(b);o.up[b.x]=true}else if(b.outOfRangeDown&&!o.down[b.x]){o.points.push(b);o.down[b.x]=true}s[u]=b}},_getSelected:function e(t,i){var s,n,a,r=[],o=[],l=t.length;if(i)for(s=0;s<l;s++){a=t[s].points;for(n=0;n<a.length;n++){if(!a[n])continue;if(a[n].cacheItem&&a[n].cacheItem.selected)if(-1===r.indexOf(s)){r.push(s);o[s]=[a[n].idx]}else o[s].push(a[n].idx)}}return{lines:r,points:o,synqronize:r.length>1}},_isSelectedIndirectly:function e(t,i,s){var n,a,r,o=i?i.length:0,l=false;for(n=0;n<o;n++){r=s[i[n]];for(a=0;a<r.length;a++)if(t===r[a]){l=true;break}}return l},_getMeasureGradient:function e(t,i,s){var n={gradient:{colors:[],limits:[],x0:0,x1:0,y0:t.posMin,y1:t.posMax}};i.getColorMapping().slice().reverse().forEach(function(e){n.gradient.colors.push(e.grad[1].toRGBA());n.gradient.colors.push(e.grad[0].toRGBA());n.gradient.limits.push(Math.min(1,Math.max(0,s.getNormalizedValue(e.id[1]))));n.gradient.limits.push(Math.min(1,Math.max(0,s.getNormalizedValue(e.id[0]))))});return n},_getClippings:function e(t,i){var s=t.getPadding(),n=s.top-1,a=t.rect.height-s.top-s.bottom+2;return{areaClip:{x:0,y:n,width:i.width,height:a},lineClip:{x:0,y:n,width:i.width,height:a}}},_getColorSettings:function e(t,i,s){var n=.3,a=false,r=false;if(t.mode&&t.mode===t.MEASURE&&!Number.isNaN(+i.posMin)&&o(t._data)){n=.6;r=this._getMeasureGradient(i,t,s)}else if(t.mode&&t.mode===t.EXPRESSION||t.mode===t.MEASURE&&!Number.isNaN(+i.posMin)){a=true;n=.6}return{isExpression:a,areaAlpha:n,varyingPointColors:a,gradient:r}}});return s}.apply(t,s),void 0!==n&&(e.exports=n))},1252:function(e,t,i){"use strict";var s,n;!(s=[i(307),i(1052)],n=function(e,t){var i;i=e.extend("LineObjectLayer",{init:function e(t){this._super(t,{name:"line-objects-layer"})},updateInstances:function e(i,s){var n=i?i.length:0,a,r=[];this.renderer.stage.removeChildren();for(a=0;a<n;a++)r.push(new t(i[a],{showArea:s.showArea}));this.renderer.stage.addChildren(r);this._lineObjects=r},getLineObjects:function e(){return this._lineObjects},getPolyLinesInRange:function e(t,i,s){return this._lineObjects.map(function(e){return e.getLinesInRange(t,i,s)})},update:function e(t){var i,s=this._lineObjects?this._lineObjects.length:0;for(i=0;i<s;i++)this._lineObjects[i].update(t[i])}});return i}.apply(t,s),void 0!==n&&(e.exports=n))},1253:function(e,t,i){"use strict";var s,n;!(s=[i(292),i(1049),i(278),i(293)],n=function(e,t,i,s){var n;function a(e){switch(e){case"diamond":case"triangle":return new i;case"circle":return new t;case"line":return new s;default:return new s}}function r(e,t,i,s,n){var a=s;switch(n){case"circle":e.set(t,i,.5*a);break;case"diamond":e.set([{x:t,y:i-a/2},{x:t-a/2,y:i},{x:t,y:i+a/2},{x:t+a/2,y:i}]);break;case"triangle":e.set([{x:t,y:i-a/2},{x:t-a/2,y:i+a/2},{x:t+a/2,y:i+a/2}]);break;default:a=s;e.set(t-a/2,i-a/2,a,a)}}n=e.extend("Points",{init:function e(t){this._super();this._symbol=t||"circle"},update:function e(t){var i,s,n,o=t.points?t.points:[],l=0,h=false,c=o?o.length:0;for(s=0;s<c;s++){n=o[s];if(!n||n.outOfDimensionBounds||n.isNaN)continue;i=this._children[l++];if(!i){i=a(this._symbol);this.addChild(i)}r(i,n.x,n.y,n.size,this._symbol);i.fill=n.selectedIndirectly?"white":n.color;i.stroke=n.selectedIndirectly?n.color:!!n.selected&&"white";i.opacity=n.selected||n.selectedIndirectly?1:t.globalAlpha;i.strokeWidth=1.5;i.visible=!n.outOfBounds&&!n.isNaN&&!n.hidden&&(t.showDataPoints||n.isSingle||n.keep||n.selected);i.visible&&!h&&(h=i.true);i.data.outOfBounds=n.outOfBounds;i.data.value=n.value;i.data.label=n.label;i.data.dataIndex=n.dataIndex;i.data.text=n.text}l<this._children.length&&this.removeChildren(this._children.slice(l-this._children.length));this.visible=h;this._selectedSize=t.style.dataPoints.size.selected;return this},getFromRange:function e(i,s,n){return this.children.filter(function(e){return n?e.cx>=i&&e.cx<=s&&e.visible:e.cx>=i&&e.cx<s&&e.visible}).map(function(e){var i=new t(e.cx,e.cy,.5*this._selectedSize);i.fill=e.fill;i.stroke="white";i.opacity=1;i.strokeWidth=1.5;return i},this)}});return n}.apply(t,s),void 0!==n&&(e.exports=n))},1254:function(e,t,i){"use strict";var s,n;!(s=[i(292),i(278),i(1002)],n=function(e,t,i){var s,n={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function a(e){var t,i=[];for(t=0;t<e.length;t++)i=i.concat(r(e[t]));return i}function r(e){var t=[],i,s,n,a,l,h,c,u=e._polygons[0].points;if(!u||u.length<2)return t;e.data.selected=u[0].selected&&u[1].selected;h=null;c=u.length-1;for(l=1;l<u.length;l++)if(u[l-1].selected&&u[l].selected){h=l-1;break}if(null!==h){for(l=h;l<u.length;l++)if(!u[l].selected){c=l-1;break}s=u.slice(0,h+1);n=u.slice(h,c+1);a=u.slice(c);if(s&&s.length>1){i=o(s,e);t.push(i)}if(n&&n.length>1){i=o(n,e);i.data.selected=true;t.push(i)}if(a&&a.length>1){i=o(a,e);t=t.concat(r(i))}}else t.push(e);return t}function o(e,i){var s=new t(e);s.opacity=i.opacity;s.close=false;s.stroke=i.stroke;s.strokeWidth=i.strokeWidth;s.lineJoin=i.lineJoin;s.lineCap=i.lineCap;return s}function l(e,i,s,r){var o,l,h,c,u,d,p=[];c=i?i.length:0;u=[];for(o=0;o<c;o++){d=i[o];if(!d||d.isNaN&&true!==d.isInterpolationOffset){if((void 0!==d||!e.isNumeric)&&s===n.GAP&&h&&p.length){h.set(p);u.push(h);h=null;p=[]}continue}if(!h){h=new t;h.close=false;h.stroke=r||d.color||"#333333";h.lineJoin="round";h.lineCap="round";h.opacity=1;p=[];d.isNull&&!r&&i[o+1]&&(h.stroke=i[o+1].color||"#333333");if(d.hidden&&!r)for(l=1;l<c-o;++l)if(i[o+l]&&!i[o+l].hidden){h.stroke=i[o+l].color||"#333333";break}}p.push({x:d.x,y:d.y,selected:d.selected,dataIndex:d.dataIndex,y_:d.y1})}if(h&&p.length>1){h.set(p);u.push(h)}u=a(u);c=u.length;for(o=0;o<c;o++){u[o].strokeWidth=e.style.line.width*(u[o].data.selected?2:1);u[o].opacity=u[o].data.selected?1:e.globalAlpha}return u}function h(e,t,i,s){var a=t?t.length:0,r=e.interpolateVaryingColors,o=[],l,h,c=null,u,d,p,f;for(l=0;l<a;l++){u=t[l];if(!u||u.isNaN&&true!==u.isInterpolationOffset){void 0===u&&e.isNumeric||i!==n.GAP||(d=null);continue}if(d){c=new s(d.x,d.y,u.x,u.y);c.data.selected=d.selected&&u.selected;c.data.y1_=d.y1;c.data.y2_=u.y1;if(u.hidden||d.hidden){for(h=l;h>=0;h--)if(!t[h].hidden){p=t[h].color;break}if(void 0===p)for(h=l;h<a;h++)if(!t[h].hidden){p=t[h].color;break}f=p}else{p=d.color;f=u.color}d.color!==u.color?c.stroke={gradient:{x0:d.x,y0:0,x1:u.x,y1:0,limits:r?[0,1]:[0,.5,.5,1],colors:r?[p||"#333333",f||"#333333"]:[p||"#333333",p||"#333333",f||"#333333",f||"#333333"]}}:c.stroke=f||"#333333";c.opacity=c.data.selected?1:e.globalAlpha;c.strokeWidth=e.style.line.width*(c.data.selected?2:1);o.push(c);d=u}else d=u}return o}s=e.extend("PolyLine",{init:function e(){this._super();this.lineJoin="round";this.lineCap="round"},update:function e(t){this.clip=t.clippings.lineClip;this.removeChildren();t.colors.varyingPointColors?this.addChildren(s.getLines(t,t.points,t.nullMode,i)):this.addChildren(l.call(this,t,t.points,t.nullMode,t.colors.gradient))},getLineInRange:function e(t,i){var n=new s;this.children.forEach(function(e){var s=e.getPartialFromRange(t,i);if(!s)return;s.stroke=e.stroke;s.strokeWidth=3;s.close=e.close;n.addChildren([s])});return n}});s.getLines=h;return s}.apply(t,s),void 0!==n&&(e.exports=n))},1255:function(e,t,i){"use strict";var s,n;!(s=[i(292),i(278),i(1002)],n=function(e,t,i){var s;function n(e){return{x:e.x,y:e.y_}}function a(e,s){var a,r,o=[],l,h,c,u=s?s.length:0;for(a=0;a<u;a++){if(s[a]instanceof t){l=s[a]._polygons[0].points;r=new t(l.concat(l.map(n).reverse()));r.fill=e.colors.gradient||s[a].stroke;r.opacity=e.colors.areaAlpha*(s[a].data.selected?1:e.globalAlpha)}else if(s[a]instanceof i){h=Math.floor(s[a].x1);c=Math.floor(s[a].x2);l=[{x:h,y:s[a].y1},{x:h,y:s[a].data.y1_},{x:c,y:s[a].data.y2_},{x:c,y:s[a].y2}];r=new t(l);s[a].stroke.gradient?r.fill={gradient:{colors:s[a].stroke.gradient.colors,limits:s[a].stroke.gradient.limits,x0:s[a].stroke.gradient.x0,x1:s[a].stroke.gradient.x1,y0:0,y1:0}}:s[a].stroke?r.fill=s[a].stroke||"#eeeeee":r.fill=e.colors.gradient||"#eeeeee";r.opacity=e.colors.areaAlpha*(s[a].data.selected?1:e.globalAlpha)}r&&o.push(r)}return o}s=e.extend("PolyArea",{getAreaFromSegments:function t(i){var s=new e;s.addChildren(a(this.__data,i));return s},update:function e(t,i){this.__data=t;this.clip=t.clippings.areaClip;this.removeChildren();this.addChildren(a(t,i))}});return s}.apply(t,s),void 0!==n&&(e.exports=n))},1256:function(e,t,i){"use strict";var s,n;!(s=[i(307),i(203),i(413)],n=function(e,t,i){var s,n={LINE:"line",AREA:"area",STACKED:"stackedArea"};function a(){var e,t,i,s,a,r,o,l,h,c={},u,d=this.combinedMeasuresFormatter;this._allDataLineObjectsLength=this._allDataLineObjects?this._allDataLineObjects.length:0;this._dataLabelsOfLines=new Array(this._allDataLineObjectsLength);this._allDataPointLabels=[];for(e=0;e<this._allDataLineObjectsLength;e++){this._dataLabelsOfLines[e]=[];i=this._allDataLineObjects[e];r=i.find("Points [visible='true']");a=r?r.length:0;for(t=0;t<a;t++){o=r[t].getLocalBoundingRect();l=o.x+o.width/2;h=o.y+o.height/2;u=l+";"+h;if(u in c)continue;c[u]=true;s={text:this._lineType===n.STACKED&&this._allDataLineObjectsLength>1?d.formatValue(r[t].value):r[t].data.label,x0:l,y0:h,align:"center",font:this._style.dataPoints.font,maxWidth:512,maxNumLines:1,line:e};this._dataLabelsOfLines[e].push(s);this._allDataPointLabels.push(s)}}this._numAllDataPointLabels=this._allDataPointLabels.length}function r(){var e;for(e=0;e<this._numAllDataPointLabels;e++)this._allDataPointLabels[e].size=t.measureTextObject({type:"text",shape:this._allDataPointLabels[e]})}function o(){r.call(this);var e,t,i,s,n,a,o,l=this._discreteSpacing/2;var h="leftDx",c="leftDy",u="rightDx",d="rightDy",p=1;if(this.yMirrorMode){h="rightDx";c="rightDy";u="leftDx";d="leftDy";p=-1}for(e=0;e<this._allDataLineObjectsLength;e++){s=this._dataLabelsOfLines[e];i=s.length;if(0===i)continue;if(1===i){n=s[0];n[h]=l;n[c]=0;n[u]=l;n[d]=0;continue}n=s[0];n.priority=6;o=s[1];n[h]=l;n[c]=0;n[u]=(o.x0-n.x0)*p;n[d]=n.y0-o.y0;for(t=1;t<i-1;t++){n=s[t];a=s[t-1];o=s[t+1];n[h]=a[u];n[c]=-a[d];n[u]=(o.x0-n.x0)*p;n[d]=n.y0-o.y0;a.y0<n.y0?n.y0<o.y0?n.priority=1:n.y0===o.y0?n.priority=2:n.priority=3:a.y0===n.y0?n.y0<o.y0?n.priority=2:n.y0===o.y0?n.priority=0:n.priority=2:n.y0<o.y0?n.priority=4:n.y0===o.y0?n.priority=2:n.priority=1}n=s[i-1];a=s[i-2];n[h]=a[u];n[c]=-a[d];n[u]=l;n[d]=0;n.priority=5}}function l(){void 0!==this._usedDataMax&&this._usedDataMax===this._usedDataMin?this._allDataPointLabels.sort(function(e,t){return e.x0<t.x0?-1:1}):this._allDataPointLabels.sort(function(e,t){if(e.priority>t.priority)return-1;if(e.priority===t.priority){if(6===e.priority)return e.x0===t.x0?e.y0>t.y0?1:-1:e.x0>t.x0?1:-1;if(5===e.priority)return e.x0===t.x0?e.y0>t.y0?1:-1:e.x0>t.x0?-1:1;if(4===e.priority)return e.y0>t.y0?1:-1;if(3===e.priority)return e.y0>t.y0?-1:1;if(e.y0===t.y0)return e.x0>t.x0?-1:1;return e.y0<t.y0?-1:1}return 1})}function h(){var e,t,i,s,n,a,r=[],o;for(e=0;e<this._allDataLineObjectsLength;e++){i=this._allDataLineObjects[e];s=i.find("PolyLine [stroke]");n=s?s.length:0;for(t=0;t<n;t++){a=s[t];o=a.getLocalPoints();r.push(o)}}return r}function c(e,t){if(e.minX2>t.maxX2||e.maxX2<t.minX2||e.minY2>t.maxY2||e.maxY2<t.minY2)return false;return true}function u(e){var t=this._allDataPointLabels[e],i=0,s=this.rect.width,n=0,a=this.rect.height;return t.x0>=i&&t.x0<=s&&t.minX>=i&&t.maxX<=s&&t.minY>=n&&t.maxY<=a}function d(e){return!i.checkPolylinesIntersectingRectDefinedByMaxMin(this._polylines,this._allDataPointLabels[e])}function p(e){var t=this._allDataPointLabels[e],i=(t.minX+t.maxX)/2,s=(t.minY+t.maxY)/2,n=Math.pow(i-t.x0,2)+Math.pow(s-t.y0,2),a,r;for(r=0;r<this._numAllDataPointLabels;r++){a=this._allDataPointLabels[r];if(r!==e&&n>=Math.pow(i-a.x0,2)+Math.pow(s-a.y0,2))return false}return true}function f(e){var t,i=this._allDataPointLabels[e];for(t=0;t<e;t++)if(this._allDataPointLabels[t].status&&c(i,this._allDataPointLabels[t]))return false;return true}function m(e){if(!u.call(this,e))return false;if(!p.call(this,e))return false;if(!d.call(this,e))return false;return f.call(this,e)}function g(e){var t,i,s,n=this._dataLabelHorizontalGap/2,a=this._dataLabelVerticalGap/2;t=e.size.width/2;i=t+n;e.minX=e.x-t;e.maxX=e.x+t;e.minX2=e.x-i;e.maxX2=e.x+i;s=e.size.height;if("top"===e.baseline){e.minY=e.y;e.maxY=e.y+s;e.maxY2=e.maxY+a;e.minY2=e.minY-a}if("bottom"===e.baseline){e.maxY=e.y;e.minY=e.y-s;e.maxY2=e.maxY+a;e.minY2=e.minY-a}if("middle"===e.baseline){e.maxY=e.y+s/2;e.minY=e.y-s/2;e.maxY2=e.maxY+a;e.minY2=e.minY-a}}function x(e){6===e.priority&&e.x-e.size.width/2<0&&(e.x=e.size.width/2+1);5===e.priority&&e.x+e.size.width/2>this.rect.width&&(e.x=this.rect.width-e.size.width/2-1)}function _(e){e.baseline="middle";e.x=e.x0-e.size.width/2-this._dataLabelHorizontalGap;e.y=e.y0;return true}function y(e){e.baseline="middle";e.x=e.x0+e.size.width/2+this._dataLabelHorizontalGap;e.y=e.y0;return true}function v(e){e.baseline="bottom";e.x=e.x0;e.y=e.y0-this._dataLabelMargin;x.call(this,e);return true}function b(e){e.baseline="top";e.x=e.x0;e.y=e.y0+this._dataLabelMargin;x.call(this,e);return true}function M(e){var t,i,s,n,a,r=e.leftDx,o=e.rightDx,l=e.leftDy,h=e.rightDy,c=1e-9;if(l>0||h>0){l=Math.max(l,c);h=Math.max(h,c);t=e.size.width+2*this._horizontalDistanceFromLine;s=t/(r/l+o/h);if(s<=this._maxDataLabelMargin){e.baseline="bottom";s=Math.max(s,this._dataLabelMargin);e.y=e.y0-s;n=s*r/l;a=s*o/h;i=t/2;n<i?e.x=e.x0+(i-n):a<i&&(e.x=e.x0-(i-a));return true}}return false}function A(e){var t,i,s,n,a,r=e.leftDx,o=e.rightDx,l=-e.leftDy,h=-e.rightDy,c=1e-9;if(l>0||h>0){l=Math.max(l,c);h=Math.max(h,c);t=e.size.width+2*this._horizontalDistanceFromLine;s=t/(r/l+o/h);if(s<=this._maxDataLabelMargin){e.baseline="top";s=Math.max(s,this._dataLabelMargin);e.y=e.y0+s;n=s*r/l;a=s*o/h;i=t/2;n<i?e.x=e.x0+(i-n):a<i&&(e.x=e.x0-(i-a));return true}}return false}function D(e){var t,i,s=e.leftDx,n=e.leftDy;e.baseline="middle";t=e.size.height/2+this._horizontalDistanceFromLine;i=Math.abs(this._dataLabelHorizontalGap*n/s);e.x=e.x0-e.size.width/2-this._dataLabelHorizontalGap;e.y=e.y0+(i>=t?0:n>0?t-i:i-t);return true}function w(e){var t,i,s=e.rightDx,n=e.rightDy;e.baseline="middle";t=e.size.height/2+this._horizontalDistanceFromLine;i=Math.abs(this._dataLabelHorizontalGap*n/s);e.x=e.x0+e.size.width/2+this._dataLabelHorizontalGap;e.y=e.y0+(i>=t?0:n>0?t-i:i-t);return true}function S(e){var t=0,i=this.rect.width,s,n,a=9,r,o;if(e.priority>3){e.baseline="middle";if(e.x0-t<=i-e.x0){e.x=e.x0+a+e.size.width/2;e.y=e.y0}else{e.x=e.x0-a-e.size.width/2;e.y=e.y0}}else if(3===e.priority){s=e.leftDy/e.leftDx;n=e.rightDy/e.rightDx;if(n>=s){r=(e.size.height/2+1)/n;if(r<=2*a){e.baseline="middle";e.y=e.y0;e.x=e.x0+Math.max(r,a)+e.size.width/2}else{o=2*a*n-1;e.baseline="top";e.y=e.y0-o;e.x=e.x0+2*a+e.size.width/2}}else{r=(e.size.height/2+1)/s;if(r<=2*a){e.baseline="middle";e.y=e.y0;e.x=e.x0-Math.max(r,a)-e.size.width/2}else{o=2*a*s-1;e.baseline="top";e.y=e.y0-o;e.x=e.x0-2*a-e.size.width/2}}}return true}function C(e){var t;if(e.rightDy<=0){e.baseline="bottom";e.x=e.x0+e.size.width/2;e.y=e.y0+1}else if(e.rightDy<=e.rightDx){e.baseline="bottom";e.x=e.x0+e.size.width/2;e.y=e.y0-e.size.width*Math.abs(e.rightDy/e.rightDx)-1}else{e.baseline="top";t=Math.max(0,e.size.height+1-this.rect.height+e.y0);e.x=e.x0+e.size.width/2+t*Math.abs(e.rightDx/e.rightDy);e.y=e.y0-t+1}return true}function q(e){var t;if(e.leftDy<=0){e.baseline="bottom";e.x=e.x0-e.size.width/2;e.y=e.y0+1}else if(e.leftDy<=e.leftDx){e.baseline="bottom";e.x=e.x0-e.size.width/2;e.y=e.y0-e.size.width*Math.abs(e.leftDy/e.leftDx)-1}else{e.baseline="top";t=Math.max(0,e.size.height+1-this.rect.height+e.y0);e.x=e.x0-e.size.width/2-t*Math.abs(e.leftDx/e.leftDy);e.y=e.y0-t+1}return true}function L(e,t){var i=this._allDataPointLabels[t];if(!i.status&&e.call(this,i)){g.call(this,i);i.status=m.call(this,t)}}function P(e){var t=this._allDataPointLabels[e];if(this._allDataLineObjectsLength>1){6===t.priority&&L.apply(this,[_,e]);5===t.priority&&L.apply(this,[y,e]);L.apply(this,[v,e]);L.apply(this,[b,e])}else{L.apply(this,[v,e]);L.apply(this,[b,e]);6===t.priority&&L.apply(this,[_,e]);5===t.priority&&L.apply(this,[y,e])}if(!t.status)if(t.rightDy+Math.abs(t.rightDx)*t.leftDy/Math.abs(t.leftDx)>=0){L.apply(this,[A,e]);L.apply(this,[M,e])}else{L.apply(this,[M,e]);L.apply(this,[A,e])}if(!t.status)if(t.rightDy+Math.abs(t.rightDx)*t.leftDy/Math.abs(t.leftDx)>=0){L.apply(this,[D,e]);L.apply(this,[w,e])}else{L.apply(this,[w,e]);L.apply(this,[D,e])}L.apply(this,[S,e]);t.status||6!==t.priority||L.apply(this,[C,e]);t.status||5!==t.priority||L.apply(this,[q,e])}function k(){var e;for(e=0;e<this._numAllDataPointLabels;e++)P.call(this,e)}function I(){var e,t,i,s=[];for(e=0;e<this._numAllDataPointLabels;e++){t=this._allDataPointLabels[e];if(t.status){i={type:"text",fill:this._style.dataPoints.color,shape:t};s.push(i)}}this.renderer.shapes=s}s=e.extend("LabelLayer",{init:function e(i){this.wrapper=document.createElement("div");this.wrapper.style.position="absolute";this.renderer=new t(this.wrapper);this.minorAxis=null;this.majorAxis=null;i.appendChild(this.wrapper);this._dataLabelMargin=6;this._maxDataLabelMargin=12;this._dataLabelHorizontalGap=6;this._dataLabelVerticalGap=3;this._horizontalDistanceFromLine=2},setYMirrorMode:function e(t){this.yMirrorMode=t},update:function e(t,i){this.combinedMeasuresFormatter=i.combinedMeasuresFormatter;this._allDataLineObjects=t;this._lineType=i.lineType;this._discreteSpacing=i.majorAxis.getDiscreteSpacing();this._style=i.style;this.rect=i.rect;this.renderer.shapes=[];a.call(this);o.call(this);l.call(this);this._polylines=h.call(this);k.call(this);I.call(this)}});return s}.apply(t,s),void 0!==n&&(e.exports=n))},1257:function(e,t,i){"use strict";var s,n;!(s=[i(307),i(1052)],n=function(e){var t;t=e.extend("LineHighlightLayer",{init:function e(){this._super.apply(this,arguments);this.ranges=[]},getLineObjects:function e(){return this._lineObjects},setRanges:function e(t){this.ranges=t},update:function e(t,i){var s=[];this.ranges.forEach(function(e){var n=t.getPositionOfValue(e.min);var a=t.getPositionOfValue(e.max);s=s.concat(i.getPolyLinesInRange(n,a,e.maxIncluded))},this);this.renderer.stage.removeChildren();if(s.length){this.renderer.stage.addChildren(s);this.show()}else this.hide()}});return t}.apply(t,s),void 0!==n&&(e.exports=n))},1533:function(e,t,i){"use strict";var s,n;!(s=[i(101),i(91)],n=function(e,t){function i(t,i){var s=i.getMeasures(),n=e.getValue(t,"color.mode");"byDimension"===n&&1===s.length&&"line"===e.getValue(s[0].qDef,"series.type")?e.setValue(t,"color.mode","primary"):"byDimension"===n&&s.length>1&&e.setValue(t,"color.mode","byMultiple")}function s(e,t){var i=0===t.indexOf(e);i||(e.qDef.series={axis:1,type:"line"})}return{dimensions:{min:1,max:1,description:function e(i){var s=i.qHyperCubeDef.qMeasures,n=[0,0,0],a,r=["Visualizations.Descriptions.Marker","Visualizations.Descriptions.Line","Visualizations.Descriptions.ComboChart.Dimension.LineMarker","Visualizations.Descriptions.Bar","Visualizations.Descriptions.ComboChart.Dimension.BarMarker","Visualizations.Descriptions.ComboChart.Dimension.BarLine","Visualizations.Descriptions.ComboChart.Dimension.BarLineMarker"];if(!s.length)return t.get("Visualizations.Descriptions.Bar");for(var o=0;o<s.length;++o){a=s[o].qDef.series.type;"bar"===a?n[0]=1:"line"===a?n[1]=1:n[2]=1}var l=r[parseInt(n.join(""),2)-1];return t.get(l)},add:function e(t,s,n){i(s,n)},move:function e(t,s,n){i(s,n)}},measures:{min:1,max:15,description:function e(i,s){var n,a=i.qHyperCubeDef.qMeasures[s];if(a){var r=a.qDef.series.type;n="line"===r?"Visualizations.Descriptions.ComboChart.Measure.HeightLine":"bar"===r?"Visualizations.Descriptions.ComboChart.Measure.HeightBar":"Visualizations.Descriptions.ComboChart.Measure.HeightMarker"}else n="Visualizations.Descriptions.Height";return t.get(n)},add:function e(t,n,a){i(n,a);s(t,n.qHyperCubeDef.qMeasures)},move:function e(t,s,n){i(s,n)},replace:function e(t,i){i.qDef.series&&(t.qDef.series.type=i.qDef.series.type||"bar")}}}}.apply(t,s),void 0!==n&&(e.exports=n))},2108:function(e,t,i){"use strict";var s,n;!(s=[i(180),i(1176),i(1166),i(2109),i(89)],n=function(e,t,i,s,n){var a;a=e.extend("ComboArea",{init:function e(){var n=new(Function.prototype.bind.apply(i,[null].concat([].slice.call(arguments))));var a=new(Function.prototype.bind.apply(t,[null].concat([].slice.call(arguments))));var r=new(Function.prototype.bind.apply(s,[null].concat([].slice.call(arguments))));this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._shapes=[];this._cacheItems=[];this._colorMap=null;a.setShowDataPoints(!this.isMini);a.setShowDataPointLabels(false);n.setShowDataPoints(false);this.subComponents=[n,a,r];this.lineArea=a;this.barArea=n;this.markerArea=r},setYMirrorMode:function e(t){this.yMirrorMode=t;this.subComponents.forEach(function(e){e.setYMirrorMode(t)})},setColorMap:function e(t){this._colorMap=t;this.subComponents.forEach(function(e){e.setColorMap(t)})},getColorMap:function e(){return this._colorMap},setShowDataPoints:function e(){},setMajorAxis:function e(t){this.subComponents.forEach(function(e){e.setMajorAxis(t)});this._majorAxis=t},setMinorAxis:function e(t){this._minorAxis=t;this.subComponents[0].setMinorAxis(this._minorAxis);this.subComponents[2].setMinorAxis(this._minorAxis)},setTimeAxis:function e(t){this.timeAxis=t;this.subComponents.forEach(function(e){e.setTimeAxis(t)})},setContinuousAxis:function e(t){this.continuousAxis=t;this.subComponents.forEach(function(e){e.setContinuousAxis(t)})},setActiveDimensionAxis:function e(t){this._activeDimAxis=t;this.subComponents.forEach(function(e){e.setActiveDimensionAxis(t)})},setIsDimensionContinuous:function e(t){this.isDimensionContinuous=t;this.subComponents.forEach(function(e){e.setIsDimensionContinuous(t)})},getMinorAxisData:function e(){return this.barArea.getMinorAxisData()},setSecondaryMinorAxis:function e(t){this._secondaryMinorAxis=t},setDimensionTree:function e(t){this._tree=t;this.subComponents.forEach(function(e){e.setDimensionTree(t)})},setData:function e(t){this._super(t);var i=[];var s=[];var n=[];for(var a=0;a<t.qHyperCube.qMeasureInfo.length;a++)t.qHyperCube.qMeasureInfo[a].series&&"line"===t.qHyperCube.qMeasureInfo[a].series.type?i.push(a):t.qHyperCube.qMeasureInfo[a].series&&"marker"===t.qHyperCube.qMeasureInfo[a].series.type?n.push(a):s.push(a);this.subComponents[0].setHasValidData(s.length>0);this.subComponents[1].setHasValidData(i.length>0);this.subComponents[2].setHasValidData(n.length>0);this.lineArea.setMeasureIndices(i);this.barArea.setMeasureIndices(s);this.markerArea.setMeasureIndices(n);this.subComponents.forEach(function(e){e.setData(t)});this.barArea.setMinorAxis(this._minorAxis);this.lineArea.setMinorAxis(this._secondaryMinorAxis);this.lineArea.setSecondaryMinorAxis(this._minorAxis);this.markerArea.setMinorAxis(this._minorAxis);this.markerArea.setSecondaryMinorAxis(this._secondaryMinorAxis);this.invalidateProperties()},setHasValidData:function e(t){this.subComponents.forEach(function(e){e.setHasValidData(t)})},setLayoutMode:function e(t){this._super(t);this.subComponents.forEach(function(e){e.setLayoutMode(t)})},setRect:function e(t,i,s,n){this._super(t,i,s,n);this.subComponents.forEach(function(e){e.setRect(t,i,s,n)})},setOuterRect:function e(t,i,s,n){this._super(t,i,s,n);this.subComponents.forEach(function(e){e.setOuterRect(t,i,s,n)})},setLayoutToContainerRatios:function e(t,i){this._super(t,i);this.subComponents.forEach(function(e){e.setLayoutToContainerRatios(t,i)})},setContainerRect:function e(t,i,s,n){this._super(t,i,s,n);this.subComponents.forEach(function(e){e.setContainerRect(t,i,s,n)})},insertAdjacentTo:function e(){this._super.apply(this,[].slice.call(arguments));this.subComponents.forEach(function(e){e.setRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height)},this)},setGlobalOpacity:function e(t,i){this._super(t,i);this.subComponents.forEach(function(e){e.setGlobalOpacity(t,i)},this)},setLineType:function e(){},updateSize:function e(){this._super();this.subComponents.forEach(function(e){e.updateSize()},this)},_updateDisplay:function e(){var t=[];this.subComponents.forEach(function(e){t.push(e.invalidateDisplay())});return n.all(t)},_updateSize:function e(){},updateRangeSelection:function e(t){this.isMini?this.lineArea.updateRangeSelection(t):this.subComponents.forEach(function(e){e.updateRangeSelection(t)})},_updateProperties:function e(){if(!this._data||!this._tree)return;this.barArea.measureFormatters=this.measureFormatters;this.lineArea.measureFormatters=this.measureFormatters;this.markerArea.measureFormatters=this.measureFormatters;this.barArea.combinedMeasuresFormatter=this.combinedMeasuresFormatter;this.lineArea.combinedMeasuresFormatter=this.combinedMeasuresFormatter;this.markerArea.combinedMeasuresFormatter=this.combinedMeasuresFormatter;this.subComponents[0].updateNow(["properties"]);this.subComponents[1].updateNow(["properties"]);this.subComponents[2].updateNow(["properties"]);var t=this.subComponents[0].getSelectableShapes();t&&t.length||(t=this.subComponents[1].getSelectableShapes());t&&t.length||(t=this.subComponents[2].getSelectableShapes());this.setSelectableShapes(t)},invalidateProperties:function e(){this._super.apply(this,Array.prototype.slice.call(arguments));this.subComponents.forEach(function(e){e.invalidateProperties("ComboArea.invalidateProperties")})},hasValidData:function e(){return this._super()&&this._majorAxis&&this._minorAxis&&this._data},paint:function e(){this._majorAxis.updateNow();this._minorAxis.updateNow();this._activeDimAxis&&this._activeDimAxis.updateNow()},clear:function e(){this._super();this.subComponents.forEach(function(e){e.clear()})},release:function e(){this.subComponents.forEach(function(e){e.release()})}});return a}.apply(t,s),void 0!==n&&(e.exports=n))},2109:function(e,t,i){"use strict";var s,n;!(s=[i(89),i(180),i(291),i(292),i(1049),i(278),i(293),i(1177)],n=function(e,t,i,s,n,a,r,o){var l;function h(e){switch(e){case"diamond":case"triangle":return new a;case"circle":return new n;case"line":return new r;default:return new r}}function c(e,t,i,s,n,a){var r=n.type,o=n.rgb,l=n.shiftedRgb,h=.5,c=n.isFilled,u,d=true;switch(r){case"circle":e.set(t,i,Math.max(2,Math.min(6,.125*s)));break;case"diamond":u=Math.max(4,Math.min(12,.25*s));e.set([{x:t,y:i-u/2},{x:t-u/2,y:i},{x:t,y:i+u/2},{x:t+u/2,y:i}]);break;case"triangle":u=Math.max(4,Math.min(12,.25*s));e.set([{x:t,y:i-u/2},{x:t-u/2,y:i+u/2},{x:t+u/2,y:i+u/2}]);break;case"line":u=Math.max(4,.5*s);u<24?e.set(t-u/2,Math.floor(i)-h,u,Math.min(3,Math.max(2,Math.round(u/4)))):e.set(Math.floor(t-u/2)-h,Math.floor(i)-h,Math.ceil(u),Math.min(3,Math.max(2,Math.round(u/4))));c=true;break;default:u=Math.max(4,Math.min(12,.25*s));e.set(t-u/2,i-u/2,u,u)}if(d&&false!==c){e.fill=o;e.stroke=l}else{e.stroke=o;delete e.fill}a&&(e.stroke="#000000")}function u(e){var t,i=this._shapes?this._shapes.length:0,s,n,a=this.rect.width,r=this._majorAxis,o,l,h,u;this._outOfRange={up:{},down:{},points:[]};for(t=0;t<i;t++){u=this._shapes[t];o=this._minorAxes[u.data.axisIdx];l=e[this._measureToAxisIndex[u.data.measureIdx]];h=this.isDimensionContinuous?2:r.getWidthOfId(u.data.axisId);s=this.isDimensionContinuous?this._activeDimAxis.getPositionOfValue(u.data.axisNum):r.getPositionOfId(u.data.axisId);n=o.getPositionOfValue(u.data.end);u.data.x=s;u.data.y=n;u.data.outOfRangeUp=n<l.topCutoff;u.data.outOfRangeDown=n>l.bottomCutoff;u.data.selected=u.data.cacheItem&&u.data.cacheItem.selected;u.opacity=u.data.outOfRangeUp||u.data.outOfRangeDown?0:u.data.selected?1:this._globalAlpha;n=u.data.outOfRangeUp?l.topCutoff+4:u.data.outOfRangeDown?l.bottomCutoff-4:Math.floor(n);var d=u.data.cacheItem&&u.data.cacheItem.selected;this.isDimensionContinuous&&this.selectedRanges&&!d&&(d=this.selectedRanges.some(function(e){return u.data.axisNum>=e.min&&(e.maxIncluded?u.data.axisNum<=e.max:u.data.axisNum<e.max)}));c(u,s,n,h,u.data,d);u.data.isVisible=s>=0&&s<=a;if(u.data.isVisible&&(u.data.outOfRangeUp||u.data.outOfRangeDown))if(u.data.outOfRangeUp&&!this._outOfRange.up[s]){this._outOfRange.points.push(u);this._outOfRange.up[s]=true}else if(u.data.outOfRangeDown&&!this._outOfRange.down[s]){this._outOfRange.points.push(u);this._outOfRange.down[s]=true}}}l=t.extend("MarkerArea",{init:function e(){this._super.apply(this,arguments);this.renderers={markers:new i(this.container,{name:"marker-layer"})};this._edgeBleed=0;this._oobLayer=new o(this.container);this.layers=[this._oobLayer];this._markerRenderer=this.renderers.markers},setColorMap:function e(t){this._colorMap=t},getColorMap:function e(){return this._colorMap},getMeasureIndices:function e(){return this._measureIndices},setMeasureIndices:function e(t){this._measureIndices=t},setMajorAxis:function e(t){this._majorAxis=t;this._majorAxis.listen("changed",function(){this.invalidateDisplay("MarkerArea.setMajorAxis")},this)},setMinorAxis:function e(t){this._minorAxis=t;this._minorAxis.listen("changed",function(){this.invalidateDisplay("MarkerArea.setMinorAxis")},this)},setSecondaryMinorAxis:function e(t){this._secondaryMinorAxis=t;this._secondaryMinorAxis.listen("changed",function(){this.invalidateDisplay("MarkerArea.setSecondaryMinorAxis")},this)},setTimeAxis:function e(t){this.timeAxis=t;this.timeAxis.listen("changed",function(){this.invalidateDisplay()},this)},setContinuousAxis:function e(t){this.continuousAxis=t;this.continuousAxis.listen("changed",function(){this.invalidateDisplay()},this)},setActiveDimensionAxis:function e(t){this._activeDimAxis=t},setIsDimensionContinuous:function e(t){this.isDimensionContinuous=t;this._edgeBleed=this.isDimensionContinuous?5:0},setDimensionTree:function e(t){this._tree=t;this.invalidateProperties()},hasValidData:function e(){return this._super()&&this._data},getMajorAxisData:function e(){return this._majorAxisData},createAxisData:function e(t,i,s,n){n||(this._cacheIndex=0);var a=t.children;return a.map(function(e){var t;if("dimension"===i.types[n]){t={label:e.data.qText,group:false,id:e.data.id,cacheIndex:[]};"measure"===i.types[n+1]&&t.cacheIndex.push(this._cacheIndex++)}return t},this)},_createMeasureDisplayNode:function e(t,i,s,n){var a=h(s),r=t.children[0].data,o=t.parent.cacheItem,l=this.measureFormatters[i],c="undefined"!==typeof r.qValue?r.qValue:r.qNum,u=t.ancestors.filter(function(e){return"qElemNo"in e.data}).map(function(e){return e.data.qElemNo}).reverse();a.data={qText:t.data.qText,qNum:c,start:0,end:c,valueLabel:l&&"U"===l.type?l.formatValue(c):t.data.qText,cacheItem:o,type:s,isFilled:n,measureIdx:i,color:this._colorMap.getColor(u,c,i,t.data.rowIndex)};o.addShape("dataArea",a,true);a.fill=a.data.color.toHex();a.data.rgb=a.data.color.toRGBA();a.data.shiftedRgb=a.data.color.createShiftedColor().toRGBA();return a},_createDimensionDisplayNode:function e(t){var i=new s;i.data={qText:t.data.qText};return i},_applyIds:function e(t,i,s,n){var a;t.children.forEach(function(e,r){a=t.data.id?t.data.id+";"||false:"";if("dimension"===s[n]){e.data.id=a+i[n]+":"+e.data.qElemNo;this._applyIds(e,i,s,n+1)}else"measure"===s[n]&&(e.data.id=a+i[n+r])},this)},getRenderTree:function e(t,i,s,n){var a,r,o;r=t.children;"measure"===i.types[n]&&this._measureIndices&&(r=r.filter(function(e,t){return this._measureIndices.indexOf(t)>=0},this));return r.map(function(e,t){var r;if("dimension"===i.types[n]){r=this._createDimensionDisplayNode(e);a=this.getRenderTree(e,i,s,n+1);a.forEach(function(e){r.addChild(e)})}else if("measure"===i.types[n]){o=this._measureIndices?this._measureIndices[t]:t;r=this._createMeasureDisplayNode(e,o,this._data.qHyperCube.qMeasureInfo[o].series.marker||"circle",this._data.qHyperCube.qMeasureInfo[o].series.markerFill);r.data.axisId=e.parent.data.id;r.data.axisNum=e.parent.data.qNum;r.data.axisIdx=i.measureToAxisIndex[o];s.shapes.push(r)}return r},this)},updateRangeSelection:function e(t){this.isMini||(this.selectedRanges=t)},_updateProperties:function e(){this._markerRenderer.stage.removeChildren();if(!this._data||!this._tree)return;var t=this._data.qHyperCube.qDimensionInfo.length,i=this._measureIndices?this._measureIndices.length:this._data.qHyperCube.qMeasureInfo.length,s=t+1,n=new Array(t).join(",").split(",").map(function(){return"dimension"}),a=this._data.qHyperCube.qDimensionInfo.concat(this._data.qHyperCube.qMeasureInfo).map(function(e){return e.cId}),r=this._data.qHyperCube.qDimensionInfo.map(function(e){return e.qApprMaxGlyphCount}),o,l;r.push(this._data.qHyperCube.qMeasureInfo.reduce(function(e,t){return Math.max(e,t.qApprMaxGlyphCount)},0));this._minorAxes=[this._minorAxis];this._secondaryMinorAxis&&this._minorAxes.push(this._secondaryMinorAxis);var h=this._minorAxes;var c=[];var u=[];if(this._measureIndices)u=this._measureIndices;else if(i>0&&i<20)while(u.length<i)u.push(u.slice(-1)[0]+1||0);u.forEach(function(e){c[e]=h.filter(function(t){return!t._dataIndices||t._dataIndices.indexOf(e)>=0})[0]});this._measureToAxis=c;this._measureToAxisIndex=c.map(function(e){return h.indexOf(e)});n.push("measure");o={shapes:[],shapesToLabel:[],globalPositiveSum:0,globalNegativeSum:0};l={colIds:a,types:n,numLevels:s,numMeasures:i,measureToAxisIndex:this._measureToAxisIndex,axesSettings:this._minorAxes.map(this._getAxisDetails)};this._applyIds(this._tree,a,n,0);var d=this.getRenderTree(this._tree,l,o,0);this._objects=d;this._shapes=o.shapes;d.forEach(function(e){this._markerRenderer.stage.addChild(e)},this);var p=this.createAxisData(this._tree,l,o,0);var f=n.map(function(e,t){return{qApprMaxGlyphCount:r[t],show:t<n.length-1}});this._majorAxisData={data:p,info:f};this.setSelectableShapes(o.shapes.map(function(e){return e.data.cacheItem}))},paint:function t(){this._super(this._layoutMode,this._data);var i=this._minorAxes.map(this._getAxisDetails),s=[];u.call(this,i);if(this._oobLayer){this._oobLayer.update(this._outOfRange.points,{measureToAxisIndex:this._measureToAxisIndex,axesSettings:i,style:{outOfRange:"#999999"},globalAlpha:this._globalAlpha,markerSize:Math.min(8,this._majorAxis.getDiscreteSpacing()/2)});this._oobLayer.renderer.edgeBleed={left:0,right:this._edgeBleed,top:0,bottom:0};s.push(this._oobLayer.render())}this._markerRenderer.edgeBleed={left:0,right:this._edgeBleed,top:0,bottom:0};s.push(this._markerRenderer.render());return e.all(s)},updateSize:function e(){this._super();this.renderers.markers.setDimensions(0,-1,this.rect.width,this.rect.height);this.layers.forEach(function(e){e.rect=this.rect;e.renderer.setDimensions(0,0,this.rect.width,this.rect.height);e.renderer.setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y)},this)},release:function e(){this.layers.forEach(function(e){e.release()});this._super();this._majorAxis&&this._majorAxis.stopListen("changed",null,this);this._minorAxis&&this._minorAxis.stopListen("changed",null,this);this._secondaryMinorAxis&&this._secondaryMinorAxis.stopListen("changed",null,this);this.timeAxis&&this.timeAxis.stopListen("changed",null,this);this.continuousAxis&&this.continuousAxis.stopListen("changed",null,this)},clear:function e(){this._super();this.layers.forEach(function(e){e.clear()})},_getAxisDetails:function e(t){var i=t.getPlotMin(),s=t.getPlotMax(),n=s-i,a=t.getPadding(),r=a.top-1,o=t.rect.height-a.bottom,l=0;l=i>0?o:s<0?r:Math.floor(t.getPositionOfValue(0))-.5;return{plotMin:i,plotMax:s,posMin:t.getPositionOfValue(i),posMax:t.getPositionOfValue(s),plotRange:n,topCutoff:r,bottomCutoff:o,areaStartBase:l,zeroPos:Math.floor(t.getPositionOfValue(0))-.5}}});return l}.apply(t,s),void 0!==n&&(e.exports=n))},2110:function(e,t,i){"use strict";var s,n;!(s=[i(91),i(101),i(237),i(417)],n=function(e,t,i,s){var n,a,r,o;function l(e,i,s){var n,a=s||0;n=i?i.getMeasureLayouts():t.getValue(e,"qHyperCubeDef.qMeasures",[]).map(function(e){return e.qDef});var r=n.filter(function(e){return t.getValue(e,"series.axis",0)===a||0===a&&"bar"===t.getValue(e,"series.type","bar")});return r}function h(e,t){return t?t.getDimensionLayouts():e.qHyperCubeDef.qDimensions.map(function(e){return e.qDef})}function c(e,t){return t.getMeasures().filter(function(e){return e.qDef.series&&"line"===e.qDef.series.type}).length>0}function u(e,t,i){return t.getMeasures().filter(function(e){return!e.qDef.series||"bar"===e.qDef.series.type}).length>i}n={uses:"settings",items:{presentation:{type:"items",translation:"properties.presentation",grouped:true,show:function e(t,i){return c(t,i)||u(t,i,0)},items:{grouping:{ref:"barGrouping.grouping",type:"string",component:"item-selection-list",defaultValue:"grouped",horizontal:true,items:[{icon:"grouped",component:"icon-item",labelPlacement:"bottom",translation:"properties.grouping.grouped",value:"grouped"},{icon:"stacked",component:"icon-item",labelPlacement:"bottom",translation:"properties.grouping.stacked",value:"stacked"}],show:function e(t,s,n){return u(t,s,1)&&!i.isContinuousChart(n.layout)}},orientation:{ref:"orientation",type:"string",component:"item-selection-list",defaultValue:"vertical",horizontal:true,show:false,items:[{component:"icon-item",icon:"bar_vertical",labelPlacement:"bottom",translation:"properties.orientation.vertical",value:"vertical"},{icon:"bar_horizontal",component:"icon-item",labelPlacement:"bottom",translation:"Common.Horizontal",value:"horizontal"}]},scrollStartPos:{ref:"scrollStartPos",type:"number",translation:"properties.ScrollAlignment",component:"dropdown",defaultValue:0,options:[{value:0,translation:"properties.ScrollAlignStart"},{value:1,translation:"properties.ScrollAlignEnd"}],show:function e(t,s,n){return!i.isContinuousChart(n.layout)}},nullMode:{type:"string",component:"dropdown",ref:"nullMode",translation:"properties.nullMode",options:[{value:"gap",translation:"properties.nullMode.gap"},{value:"connect",translation:"properties.nullMode.connect"},{value:"zero",translation:"properties.nullMode.zero"}],defaultValue:"gap",show:function e(t,i){return c(t,i)&&i.getMeasures().length>1}},dataPointSettings:{type:"items",grouped:false,snapshot:{tid:"property-dataPoint"},show:function e(t,i){return c(t,i)},items:{dataPoints:{ref:"dataPoint.show",translation:"properties.dataPoints.showDataPoints",type:"boolean",defaultValue:false},showLineDataPointLabels:{ref:"dataPoint.showLineLabels",translation:"properties.dataPoints.linelabelmode",type:"boolean",component:"switch",defaultValue:false,show:function e(t){return t.dataPoint&&t.dataPoint.show},options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}]}}},showBarLabels:{ref:"dataPoint.showBarLabels",type:"boolean",translation:"properties.dataPoints.barlabelmode",component:"switch",show:function e(t,i){return u(t,i,0)},defaultValue:false,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}]}}},colorsAndLegend:{uses:"colorsAndLegend",items:{legend:{items:{show:{snapshot:{tid:"property-legend"}}}}}},dimensionAxis:{uses:"axis.dimensionAxis",label:function t(i,s){var t,n="x",a=h(i,s).map(function(e){return e.qFallbackTitle||""}).join(", ");t=a?e.get("properties."+n+"AxisWithInfo",[a]):e.get("properties."+n+"Axis");return t},items:{othersGroup:{items:{dock:{options:[{value:"near",translation:"Common.Bottom"},{value:"far",translation:"Common.Top"}]}}}}},measureAxis:{uses:"axis.measureAxis",label:function t(i,s){var t,n=l(i,s,0).map(function(e){return e.qFallbackTitle});t=n.length?e.get("properties.yAxisWithInfo",[n.join(",")]):e.get("properties.yAxis");return t},show:function e(t){return l(t,null,0).length>0},items:{axis:{items:{show:{ref:"measureAxes.0.show",snapshot:{title:"properties.yAxis",tid:"property-yAxis"}},dock:{ref:"measureAxes.0.dock",show:function e(t){return"none"!==t.measureAxes[0].show},options:[{value:"near",translation:"properties.dock.left"},{value:"far",translation:"properties.dock.right"}]},spacing:{ref:"measureAxes.0.spacing",show:function e(t){return t.measureAxes[0]&&"none"!==t.measureAxes[0].show}}}},minMax:{items:{autoMinMax:{ref:"measureAxes.0.autoMinMax"},minMax:{ref:"measureAxes.0.minMax",defaultValue:"min",show:function e(t){return!t.measureAxes[0].autoMinMax}},min:{ref:"measureAxes.0.min",show:function e(t){return["min","minMax"].contains(t.measureAxes[0].minMax)&&!t.measureAxes[0].autoMinMax},invalid:function e(t){if("minMax"===t.measureAxes[0].minMax)return t.measureAxes[0].min>=t.measureAxes[0].max;return false}},max:{ref:"measureAxes.0.max",show:function e(t){return["max","minMax"].contains(t.measureAxes[0].minMax)&&!t.measureAxes[0].autoMinMax},invalid:function e(t){if("minMax"===t.measureAxes[0].minMax)return t.measureAxes[0].min>=t.measureAxes[0].max;return false}}}}}},secondaryMeasureAxis:{uses:"axis.measureAxis",label:function t(i,s){var t,n=l(i,s,1).map(function(e){return e.qFallbackTitle});t=n.length?e.get("properties.yAxisWithInfo",[n.join(",")]):e.get("properties.yAxis");return t},show:function e(t){return l(t,null,1).length>0},items:{axis:{items:{show:{ref:"measureAxes.1.show"},dock:{ref:"measureAxes.1.dock",defaultValue:"far",show:function e(t){return"none"!==t.measureAxes[1].show},options:[{value:"near",translation:"properties.dock.left"},{value:"far",translation:"properties.dock.right"}]},spacing:{ref:"measureAxes.1.spacing",show:function e(t){return t.measureAxes[1]&&"none"!==t.measureAxes[1].show}}}},minMax:{type:"items",items:{autoMinMax:{ref:"measureAxes.1.autoMinMax"},minMax:{ref:"measureAxes.1.minMax",defaultValue:"min",show:function e(t){return!t.measureAxes[1].autoMinMax}},min:{ref:"measureAxes.1.min",show:function e(t){return["min","minMax"].contains(t.measureAxes[1].minMax)&&!t.measureAxes[1].autoMinMax},invalid:function e(t){if("minMax"===t.measureAxes[1].minMax)return t.measureAxes[1].min>=t.measureAxes[1].max;return false}},max:{ref:"measureAxes.1.max",show:function e(t){return["max","minMax"].contains(t.measureAxes[1].minMax)&&!t.measureAxes[1].autoMinMax},invalid:function e(t){if("minMax"===t.measureAxes[1].minMax)return t.measureAxes[1].min>=t.measureAxes[1].max;return false}}}}}}}};a={uses:"data",items:{dimensions:{items:{nullSuppression:{show:function e(t,n,a){var r=s.isFirstDimension(t,n),o=i.isContinuousChart(a.layout),l=!(r&&o);return l}}}},measures:{items:{series:{type:"items",items:{seriesType:{ref:"qDef.series.type",type:"string",component:"item-selection-list",defaultValue:"bar",horizontal:true,items:[{icon:function e(t){return"stacked"===t.barGrouping.grouping||i.isContinuousChart(t)?"stacked":"grouped"},component:"icon-item",labelPlacement:"bottom",translation:"properties.style.bar",value:"bar"},{icon:"line_chart_line",component:"icon-item",labelPlacement:"bottom",translation:"properties.style.line",value:"line"},{icon:"shapes",component:"icon-item",labelPlacement:"bottom",translation:"properties.style.marker",value:"marker"}],change:function e(){}},seriesAxis:{ref:"qDef.series.axis",type:"integer",component:"dropdown",defaultValue:0,options:[{translation:"properties.axis.primary",value:0},{translation:"properties.axis.secondary",value:1}],show:function e(t){return t.qDef&&t.qDef.series&&t.qDef.series.type&&"bar"!==t.qDef.series.type}},seriesMarker:{ref:"qDef.series.marker",type:"string",component:"dropdown",defaultValue:"circle",options:[{translation:"properties.marker.circle",value:"circle"},{translation:"properties.marker.rect",value:"rect"},{translation:"properties.marker.diamond",value:"diamond"},{translation:"properties.marker.triangle",value:"triangle"},{translation:"properties.marker.line",value:"line"}],show:function e(t){return t.qDef&&t.qDef.series&&"marker"===t.qDef.series.type}},seriesMarkerFill:{ref:"qDef.series.markerFill",translation:"properties.series.fill",type:"boolean",defaultValue:true,show:function e(t){return t.qDef&&t.qDef.series&&"marker"===t.qDef.series.type&&!["line"].contains(t.qDef.series.marker)}}}}}}}};o={type:"items",translation:"properties.sorting",items:{noContinuousSortingMessage:{component:"text",translation:"properties.sorting.noContinuousSortingMessage",show:function e(t,s,n){return i.isContinuousChart(n.layout)}},defaultSorting:{uses:"sorting",show:function e(t,s,n){return!i.isContinuousChart(n.layout)}}}};r={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{calcCond:{uses:"calcCond"}}}}};return{type:"items",component:"accordion",items:{data:a,sorting:o,addons:r,settings:n}}}.apply(t,s),void 0!==n&&(e.exports=n))},2111:function(e,t,i){"use strict";var s,n;!(s=[i(237)],n=function(e){function t(e){return e.qHyperCubeDef.qMeasures.filter(function(e){return e.qDef.series&&"line"===e.qDef.series.type}).length>0}function i(e){return e.qHyperCubeDef.qMeasures.filter(function(e){return!e.qDef.series||"bar"===e.qDef.series.type}).length>1}return{type:"items",component:"accordion",items:{data:{uses:"data"},sort:{uses:"sort",show:function t(i,s){return!e.isContinuousChart(s)}},presentation:{uses:"presentation",type:"items",translation:"properties.presentation",grouped:true,show:function s(n,a){return t(n,a)||i(n,a)&&!e.isContinuousChart(a)},items:{grouping:{ref:"barGrouping.grouping",type:"string",component:"item-selection-list",horizontal:true,items:[{icon:"grouped",component:"icon-item",labelPlacement:"bottom",translation:"properties.grouping.grouped",value:"grouped"},{icon:"stacked",component:"icon-item",labelPlacement:"bottom",translation:"properties.grouping.stacked",value:"stacked"}],show:function e(t,s){return i(t,s)}},nullMode:{type:"string",component:"radio-list",ref:"nullMode",translation:"properties.nullMode",options:function e(){return[{value:"gap",translation:"properties.nullMode.gap"},{value:"connect",translation:"properties.nullMode.connect"},{value:"zero",translation:"properties.nullMode.zero"}]},show:function e(i){return t(i)&&i.qHyperCubeDef.qMeasures.length>1}},dataPoints:{ref:"dataPoint.show",translation:"properties.dataPoints.showDataPoints",type:"boolean",show:function e(i){return t(i)}}}},color:{uses:"color"}}}}.apply(t,s),void 0!==n&&(e.exports=n))},2112:function(e,t){e.exports='<div class="qv-viz" aria-hidden="true"></div>\n<span class="qv-viz-center-disclaimer" ng-if="dataAttributes.noDataExist && dataAttributes.layoutMode > 2" q-translation="Object.Disclaimer.NoDataExist" q-title-translation="Object.Disclaimer.NoDataExist" dir="ltr"></span>\n<div qva-chart-disclaimer attributes="dataAttributes" visible="!dataAttributes.noDataExist" direction="options.direction"></div>'},305:function(e,t,i){"use strict";var s,n;!(s=[],n=function(){var e={SPARK:1,XSMALL:3,SMALL:7,MEDIUM:15,FULL:31},t=[[550,450,e.FULL],[400,220,e.MEDIUM],[300,150,e.SMALL],[150,75,e.XSMALL],[0,0,e.SPARK]],i=[[450,e.FULL],[220,e.MEDIUM],[150,e.SMALL],[75,e.XSMALL],[0,e.SPARK]],s=[[550,e.FULL],[400,e.MEDIUM],[300,e.SMALL],[150,e.XSMALL],[0,e.SPARK]],n=t.length;function a(i,s){var a;for(a=0;a<n;++a)if(i>=t[a][0]&&s>=t[a][1])return t[a][2];return e.SPARK}function r(t){var s;for(s=0;s<n;++s)if(t>=i[s][0])return i[s][1];return e.SPARK}function o(t){var i;for(i=0;i<n;++i)if(t>=s[i][0])return s[i][1];return e.SPARK}function l(t){var i=Object.keys(e).filter(function(i){return e[i]===t})[0];return i&&i.toLowerCase()||""}return{LayoutMode:e,getLayoutMode:a,getLayoutModeKey:l,getHorizontalLayoutMode:o,getVerticalLayoutMode:r}}.apply(t,s),void 0!==n&&(e.exports=n))},307:function(e,t,i){"use strict";var s,n;!(s=[i(92),i(291),i(89)],n=function(e,t,i){var s;s=e.extend("layer",{init:function e(i,s){this.wrapper=document.createElement("div");this.wrapper.style.position="absolute";this.renderer=new t(this.wrapper,s);this.minorAxis=null;this.majorAxis=null;i.appendChild(this.wrapper)},update:function e(){},release:function e(){this.wrapper&&this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper);this.wrapper=null;this.renderer.release();this.minorAxis=null;this.majorAxis=null},show:function e(){this.wrapper.style.display="block"},hide:function e(){this.wrapper.style.display="none"},render:function e(){if("none"!==this.wrapper.style.display)return this.renderer.render();return i.resolve()},clear:function e(){this.renderer.clear()}});return s}.apply(t,s),void 0!==n&&(e.exports=n))},376:function(e,t,i){"use strict";var s,n;!(s=[i(92),i(90),i(188),i(89)],n=function(e,t,i,s){var n;n=e.extend({init:function e(t){this._model=t},setModel:function e(t){this._model=t},saveSoftProperties:function e(n,a){if(!this._model)return s.resolve(false);var r=i.generate(n,a);t.extend(true,n,a);if(r&&r.length){r=r.map(function(e){return{qOp:e.op,qValue:JSON.stringify(e.value),qPath:e.path}});return this._model.applyPatches(r,true).then(function(){return true})}return s.resolve(false)},mergeSoftPatches:function e(){if(!this._model)return s.resolve();var t=this;return s.all({properties:this._model.getProperties(),effective:this._model.getEffectiveProperties()}).then(function(e){if(e.properties.qExtendsId)return;var s=i.generate(e.properties,e.effective);i.apply(e.properties,s);t._model.setProperties(e.properties).then(function(){t._model.clearSoftPatches()})})}});return n}.apply(t,s),void 0!==n&&(e.exports=n))},393:function(e,t,i){"use strict";var s,n;!(s=[i(10),i(48)],n=function(e,t){var i=document.createElement("textarea");i.style.position="absolute";i.style.left="-9999px";i.setAttribute("readonly","");function s(e){i.value=e;document.body.appendChild(i);i.select();i.setSelectionRange(0,i.value.length);document.execCommand("copy");document.body.removeChild(i)}t.service("qvCopy",["$window",function(t){var i=e.element(t.document.body);var s=e.element("<textarea/>");s.css({position:"fixed",opacity:"0"});return function(e){s.val(e);i.append(s);s[0].select();try{var t=document.execCommand("copy");if(!t)throw t}catch(t){window.prompt("Copy to clipboard: Ctrl+C, Enter",e)}s.remove()}}]);t.directive("qvClickCopy",["qvCopy",function(e){return{restrict:"A",link:function t(i,s,n){s.bind("click",function(){e(n.qvClickCopy)})}}}]);return{copyToClipboard:s}}.apply(t,s),void 0!==n&&(e.exports=n))},486:function(e,t,i){"use strict";var s,n;!(s=[i(200),i(104)],n=function(e){function t(t,n,h){var c=t.length>0?t[0].positions:[],u=n._style,d=n._radialOptions,p=new e,f=u.ticks.major.length*h,m=u.label.offset*h*20,g,x,_="far"===n.getAlignment()?"left":"right",y=[],v=Math.min(n.rect.height,n.rect.width),b=0,M,A,D,w,S=[],C=n._radius,q;x="left"===_?1:-1;f*=x;g=x>0?0:n.rect.width;n.getShowLine()&&y.push({stroke:u.line.color,shape:{cx:n._centerPoint.x,cy:n._centerPoint.y,radius:C,radianOffset:0,start:d.start,end:d.end},type:"arc"});if(n.getShowLabels())for(q=0;q<c.length;q++){M=(c[q]-b)/(v-b);D=r(M,n);w=o(D);w.r=w.r+m;w=l(w,n._centerPoint);A=a(M,n);w.angle=A;S.push(w);p.save();p.translate(D.x+n._centerPoint.x,D.y+n._centerPoint.y);p.rotate(A);y.push({stroke:u.ticks.major.color,opacity:n.ticks[q].opacity,transform:p.elements,shape:{x1:0,x2:-f,y1:0,y2:0},type:"line"});p.restore()}g+=u.ticks.major.length*x;if(n._showLabels&&n._layoutMode>1)for(q=0;q<t.length;q++){y=y.concat(i(t[q],S,g,n));g+=t[q].labelSpace*x}n._showTitle&&n._layoutMode>1&&(y=y.concat(s(n,u)));n._renderer.shapes=y;n._renderer.render()}function i(e,t,i,s){var n=e.labels,a=t,r=e.opacities,o,l,h=[],c=s._style,u,d,p,f,m,g,x;d=n?n.length:0;if(0===d)return;p=d-1;for(g=0;g<d;g++){f=s.yMirrorMode?n[p-g]:n[g];o=s._renderer.getTextWidth(f,c.label.font);m=a[g];u=m.angle;l=u-.1<3*Math.PI/2&&u+.1>3*Math.PI/2?"center":u<Math.PI/2||u>3*Math.PI/2?"left":"right";h.push({type:"text",fill:c.label.color,opacity:r?r[g]:1,shape:{text:f,x:m.x,y:m.y,maxWidth:m.x-o<0?m.x:m.x+o>s.rect.width?s.rect.width-m.x:o,height:x,maxNumLines:1,font:c.label.font,align:l,baseline:"middle"}})}return h}function s(e,t){var i=[],s=Math.min(e.rect.width,e.rect.height),a=n(e);i.push({type:"text",fill:t.title.color,opacity:1,shape:{text:e._title,x:a.x,y:a.y+s*(.06+Math.min(s-300,0)/-300*.04),maxWidth:1.4*e._radius,maxNumLines:1,font:t.title.font,align:"center",baseline:"middle"}});return i}function n(e){var t={x:e.rect.width/2,y:e.rect.height/2};return t}function a(e,t){var i=t._radialOptions,s=Math.max(Math.min(e,1),0)*(i.end-i.start)+i.start;return s}function r(e,t,i){var s=t._radialOptions,n=e*(s.end-s.start)+s.start,a=t._radius;return l({a:n,r:a},i)}function o(e){return{r:Math.sqrt(e.x*e.x+e.y*e.y),a:Math.atan2(e.y,e.x)}}function l(e,t){t||(t={x:0,y:0});return{x:t.x+e.r*Math.cos(e.a),y:t.y+e.r*Math.sin(e.a)}}return{renderRadial:t,getPointOfValue:r,getPolPos:o,getCartPos:l,getAngleOfNormalizedValue:a}}.apply(t,s),void 0!==n&&(e.exports=n))},487:function(e,t,i){"use strict";var s,n;!(s=[i(985)],n=function(e){var t={create:i};return t;function i(){return new e}}.apply(t,s),void 0!==n&&(e.exports=n))},983:function(e,t,i){"use strict";var s,n;!(s=[i(984)],n=function(e){var t={create:i};return t;function i(){return new e}}.apply(t,s),void 0!==n&&(e.exports=n))},984:function(e,t,i){"use strict";var s,n;!(s=[i(487)],n=function(e){function t(){this.alternativeTitleRetriever=e.create();this.cache={}}t.prototype.getDimensionTitle=i;t.prototype.getCachedDimensionTitle=s;t.prototype.getMeasureTitle=n;t.prototype.getCachedMeasureTitle=a;t.prototype.resetTitles=r;return t;function i(e,t,i){var s=this;return this.alternativeTitleRetriever.getDimensionTitle(e,t,i).then(function(t){l(s.cache,e.qDef.cId,t);return t})}function s(e){return o(this.cache,e.qDef.cId)}function n(e,t,i){var s=this;return this.alternativeTitleRetriever.getMeasureTitle(e,t,i).then(function(t){l(s.cache,e.qDef.cId,t);return t})}function a(e){return o(this.cache,e.qDef.cId)}function r(){this.alternativeTitleRetriever.resetTitles()}function o(e,t){return e[t]||""}function l(e,t,i){e[t]=i}}.apply(t,s),void 0!==n&&(e.exports=n))},985:function(e,t,i){"use strict";var s,n;!(s=[i(89),i(91),i(130)],n=function(e,t,i){function s(){this.titles={}}s.prototype.getDimensionTitle=n;s.prototype.getMeasureTitle=a;s.prototype.resetTitles=r;return s;function n(e,t,i){d(this);return o.call(this,e,t,i,true)}function a(e,t,i){d(this);return o.call(this,e,t,i,false)}function r(){this.titles={}}function o(e,t,i,s){var n=l(e,this.titles);if(n)return n.promise;n=h(e,this.titles);n.promise=c(e,t,i,s);return n.promise}function l(e,t){var i=u(e);return t[i]}function h(e,t){var i=u(e);var s={id:i,promise:null};t[i]=s;return s}function c(s,n,a,r){var o="H"===s.qDef.qGrouping,l=!!s.qLibraryId;if(o)return e.when(s.qData.title);if(l){var h=r?n.getDimensionList:n.getMeasureList;return h.call(n).then(function(e){var n=r?i.findLibraryDimension:i.findLibraryMeasure;var o=n(s.qLibraryId,e),l=o&&o.qData.labelExpression;return o?!a&&l?l:o.qData.title:t.get(r?"Object.ErrorMessage.MissingDimension":"Object.ErrorMessage.MissingMeasure")})}var c=s.qDef.qLabelExpression,u=!!c;if(u)return a?e.when(c):n.evaluate(c);var d;if(r){var p=s.qDef.qFieldLabels[0];d=!p?s.qDef.qFieldDefs[0]:p}else d=s.qDef.qLabel||s.qDef.qDef;return e.when(d)}function u(e){return e.qDef.cId}function d(e){if(!e)throw new Error("AlternativeTitleRetriever: Called without a context")}}.apply(t,s),void 0!==n&&(e.exports=n))},986:function(e,t,i){"use strict";var s,n;!(s=[i(90)],n=function(e){return{migrateProperties:t,needToMigrateProperties:i};function t(t){var i=e.findValuesOfQProperty(t,"qHyperCubeDef");i.forEach(function(e){var t=e.qDimensions;t.forEach(function(e){var t=e.qDef;true===t.autoSort&&t.qSortCriterias.forEach(function(e){e.qSortByNumeric=1;e.qSortByAscii=1})})});return t}function i(t){var i=e.findValuesOfQProperty(t,"qHyperCubeDef");return i.some(function(e){var t=e.qDimensions;return t.some(function(e){var t=e.qDef;return true===t.autoSort&&t.qSortCriterias.some(function(e){return 1!==e.qSortByNumeric||1!==e.qSortByAscii})})})}}.apply(t,s),void 0!==n&&(e.exports=n))}}]);