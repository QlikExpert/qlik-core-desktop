/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[49],{1030:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(13),i(1031),i(145)],o=function(t,e,i){t.service("$exportDialog",["luiDialog",function(t){return{show:function n(o,s,l){return t.show({controller:["$scope",function(t){t.states={FAILED:-1,IDLE:0,PENDING:1,COMPLETED:2};t.state=t.states.PENDING;o.getLayout().then(function(i){var n=o.exportData(null,s,i.title||null);t.rpcId=n.requestId;n.then(function(i){t.exportUrl=e.rootPath+i.qUrl.substring(1);t.state=t.states.COMPLETED;i.qWarnings&&1e3===i.qWarnings[0]&&(t.dataIsTruncated=true)},function(e){t.state=t.states.FAILED;t.errorTranslation="ErrorCode."+e.code;e.isHandled=true})});t.openExportWindow=function(){window.open(t.exportUrl)};t.cancel=function(){t.rpcId?o.app.global.cancelRequest(t.rpcId).finally(t.close):t.close()};t.close=function(){t.destroyComponent();l&&l()}}],template:i})}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},1031:function(t,e){t.exports='<lui-dialog id="export-dialog">\n\t<div ng-if="state === states.PENDING">\n\t\t<lui-dialog-header q-translation="Export.Exporting"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<div class="qv-loader pb-10"></div>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="cancel()" q-translation="Common.Cancel"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n\t<div ng-if="state === states.COMPLETED">\n\t\t<lui-dialog-header q-translation="Export.Completed"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<p class="pb-10">\n\t\t\t\t<span q-translation="Export.CompletedDescription"></span>\n\t\t\t\t<span q-translation="Export.WarningDataTruncated" ng-if="dataIsTruncated"></span>\n\t\t\t</p>\n\t\t\t<p class="pb-10">\n\t\t\t\t<a class="export-url" ng-href="{{exportUrl}}" target="_blank" q-translation="Export.CompletedLink"></a>\n\t\t\t</p>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="close()" q-translation="Common.Close"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n\t<div ng-if="state === states.FAILED">\n\t\t<lui-dialog-header q-translation="Export.Failed"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<p class="pb-10" q-translation="{{errorTranslation}}"></p>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="close()" q-translation="Common.Close"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n</lui-dialog>\n'},1128:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(11),i(96),i(99)],o=function(t,e,i,n){t.directive("qvSelectionsToggleValue",["$parse",function(t){return{restrict:"A",link:function i(n,o,s){var l=t(s.qvSelectionsToggleValue)(),a=l.selector,c="."+n.$id+"-toggle-value",r=l.itemKey||"cell";o.on("qv-activate"+c,a,function(t){var i=e(t.target).closest(a),o=i.scope()[r];if(!i.length||!o)return;n.$apply(function(){var e={$event:t};e[r]=o;n.$eval(s.qvSelectionsOnToggleValue,e)})});n.$on("$destroy",function(){o.off(c)})}}}]);t.directive("qvSelectionsToggleDimensionValue",["$parse",function(t){return{restrict:"A",link:function i(n,o,s){var l=t(s.qvSelectionsToggleDimensionValue)(),a=l.selector,c="."+n.$id+"-toggle-dimension-value",r=l.itemKey||"cell";o.on("qv-activate"+c,a,function(t){var i=e(t.target).closest(a),o=i.scope()[r];if(n.$eval(s.qvSelectionsExcludeToggleDimensionValue,{$event:t}))return;if(!o||!o.isDimensionValue)return;if(o.locked){n.$eval(s.qvSelectionsSelectWhileLocked);return}n.$apply(function(){var e={$event:t};e[r]=o;n.$eval(s.qvSelectionsOnToggleDimensionValue,e)})});n.$on("$destroy",function(){o.off(c)})}}}]);t.directive("qvSelectionsMultiselect",["$parse",function(t){return{restrict:"A",controller:function t(){},link:function o(s,l,a,c){var r=t(a.qvSelectionsMultiselect)(),u=r.selector,f=r.itemKey||"cell",d=s.$id+"-multiselect",p=s.$id+"-2finger-multiselect",h,v,g,m;function b(){i(l[0]).tap({id:d,options:{preventDefault:false},start:function t(i){g=e(i.target).closest(u)}});i(l[0]).swipe({id:d,options:{radiusThreshold:4,preventDefault:false},start:function t(e){var i,o;if(!n.isMouse(e)||!g.length){this.cancel();return}i=g.scope()[f];if(!i.isDimensionValue){this.cancel();return}if(i.locked){s.$eval(a.qvSelectionsSelectWhileLocked);this.cancel();return}m=i;o={$event:e};o[f]=i;s.$apply(s.$eval(a.qvSelectionsStartMultiselect,o))},update:function t(i){var n=e(i.target).closest(u),o;if(!n.length)return;o=n.scope()[f];s.$apply(s.$eval(a.qvSelectionsUpdateMultiselect,{start:m,current:o,dataColIx:o.dataColIx}))},end:function t(e){s.$apply(s.$eval(a.qvSelectionsEndMultiselect,{$event:e}))}});return function(){i(l[0]).off("*",d)}}function q(){i(l[0]).tap({id:p,options:{touches:2,preventDefault:false},end:function t(i,n){var o=n.pagePoints[0],l=n.pagePoints[1],c,r,d,p,h,v,g;c=o?e(document.elementFromPoint(o.x,o.y)):void 0;r=l?e(document.elementFromPoint(l.x,l.y)):void 0;d=c?c.closest(u).scope():void 0;p=r?r.closest(u).scope():void 0;h=d?d[f]:void 0;v=p?p[f]:void 0;if(!(h&&v&&h.isDimensionValue&&v.isDimensionValue))return;if(h.locked||v.locked){s.$eval(a.qvSelectionsSelectWhileLocked);return}s.$apply(function(){g={offsetLeft:c[0].offsetLeft,width:c[0].clientWidth,$event:i};g[f]=h;s.$eval(a.qvSelectionsStartMultiselect,g);s.$eval(a.qvSelectionsUpdateMultiselect,{start:h,current:v,dataColIx:h.dataColIx});s.$eval(a.qvSelectionsEndMultiselect,{$event:i})})}});return function(){i(l[0]).off("*",p)}}c.on=function(){h||(h=b());v||(v=q())};c.off=function(){if(h){h();h=void 0}if(v){v();v=void 0}};s.$watch("interactive",function(t){if(void 0===t)return;t?c.on():c.off()});s.$on("$destroy",function(){c.off()})}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},1184:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(288),i(2147),i(156),i(2148),i(419),i(189),i(206),i(179),i(243),i(205),i(225),i(164),i(159),i(100),i(89),i(2149),i(91),i(101),i(1030),i(244),i(1128),i(2150)],o=function(t,e,i,n,o,s,l,a,c,r,u,f,d,p,h,v,g,m,b){var q,S,x;var A=1024;x=c.extend({getBoundingBox:function t(){return this.$scrollArea[0].getBoundingClientRect()}});S=r.extend({init:function t(e){this.visualizationCtrl=e},getRows:function t(){return this.visualizationCtrl.getRows()},getRowCount:function t(){return this.visualizationCtrl.getRowCount()},getFirstElementIndex:function t(){return this.visualizationCtrl.getFirstElementIndex()},getLastElementIndex:function t(){return this.visualizationCtrl.getLastElementIndex()},onVirtualScroll:function t(e,i){return this.visualizationCtrl.onVirtualScroll(e,i)},onInitialNativeScroll:function t(e,i){return this.visualizationCtrl.onInitialNativeScroll(e,i)},onGotoNextBlock:function t(e,i){return this.visualizationCtrl.onGotoNextBlock(e,i)},onGotoPreviousBlock:function t(e,i){return this.visualizationCtrl.onGotoPreviousBlock(e,i)}});function y(t,e){t.listStyle={color:e.getStyle("content","color"),"font-size":e.getStyle("content","fontSize")}}function D(t){return b.getValue(t,"layout.qListObject.qDimensionInfo.qIsOneAndOnlyOne",false)}q=u.extend({init:function t(e,i,n,o){this._super.apply(this,arguments);this.$timeout=n;this.styleService=h.initializeService("object.listBox");this._pendingUpdate=null;var s=this;e.focusedLi=0;e.itemStates={};e.selectedValues=[];e.ignoreSelectionState=false;function l(){e.getItemElements()[e.focusedLi].focus()}var a={S:m.get("Object.Listbox.Selected"),A:m.get("Object.Listbox.Alternative"),O:m.get("Object.Listbox.Optional"),XS:m.get("Object.Listbox.SelectedExcluded"),L:m.get("Object.Listbox.Locked"),X:m.get("Object.Listbox.Excluded"),XL:m.get("Object.Listbox.ExcludedLock")};e.setFocus=l;e.object.setOnFocusHandler(l);e.getSRlabel=function(t){return t.text+" "+a[t.state]};e.getItemElements=function(){return o.find(".qv-listbox-item")};e.selectionsApi.watchDeactivated(function(){e.$emit("childSelectionActive",false);e.clearItemStates(false);e.options.search&&(e.options.search.show=false)});e.selectionsApi.watchActivated(function(){e.$emit("childSelectionActive",true)});e.selectionsApi.clear=function(){this.selectionsMade=true;e.removeAllSelections();return e.backendApi.clearSelections()};e.activateSelections=function(){e.selectionsApi.active||e.clearItemStates(false);e.selectionsApi.activate()};e.clearItemStates=function(t){e.itemStates={};e.ignoreSelectionState=t};e.handleKeyUp=function(t){g.handleKeyUp(t,e)};e.handleKeyDown=function(t){return g.handleKeyDown(t,e,s)};e.removeAllSelections=function(t){e.clearItemStates(true);e.items.forEach(function(e){e!==t&&(e.classNames="serverOptional")})};function c(t,i){var n=s.isSelected(t);if(n&&!i){e.itemStates[t.dataValue]=false;t.classNames="serverAlternative"}else if(!n){e.selectedValues.push(t.dataValue);e.itemStates[t.dataValue]=true;t.classNames="selected"}}e.selectValues=function(t,i){e.selectionsApi.selectionsMade=true;e.backendApi.select(0,t,i).then(function(t){t||(D(e)?e.selectionsApi.cancel():e.selectionsApi.clear())})};e.select=function(t,i){var n=!D(e)&&e.selectionsApi.getKeyAsToggleSelected(t);e.activateSelections();"keydown"!==t.type&&(e.focusedLi=e.items.indexOf(i));n||e.removeAllSelections(i);c(i,false);e.selectValues([i.dataValue],n)};e.multiselectStart=function(t){var i=e.selectionsApi.getKeyAsToggleSelected(t);e.activateSelections();e.selectedValues=[];i||e.removeAllSelections()};e.multiselectUpdate=function(t,i){var n,o,s,l;if(-1===e.items.indexOf(i))return;s=e.items.indexOf(t);l=e.items.indexOf(i);if(s<=l)for(n=s;n<=l;++n){o=e.items[n];c(o,true)}else if(s>l)for(n=s;n>=l;--n){o=e.items[n];c(o,true)}};e.multiselectEnd=function(t){e.selectedValues.length&&e.selectValues(e.selectedValues,e.selectionsApi.getKeyAsToggleSelected(t))};e.selectWhileLocked=function(){d.showLockedFeedback([e.layout.qListObject.qDimensionInfo])}},realignFocus:function t(){var e=this.$scope,i=e.items.length-1;if(e.focusedLi>i){e.focusedLi=i;e.getItemElements()[e.focusedLi].focus();return}if(e.forceRealign){for(var n=0;n<i;++n)if(e.items[n].dataValue===e.forceRealign){e.getItemElements()[n].focus();e.focusedLi=n;e.forceRealign=false;return}e.getItemElements()[i].focus();e.forceRealign=false}},update:function t(e,i,n,o){y(this.$scope,this.styleService);var s=this.getDataInfo(e,i);var l=this;this._pendingUpdate=this.$scope.backendApi.getData(s.rects).then(function(t){return l.onUpdateData(t,n,o).then(function(){if(l.$scope.focusedLi){l.$scope.getItemElements()[l.$scope.focusedLi].blur();l.$scope.setFocus()}l.realignFocus();l._pendingUpdate=null})}).catch(function(){});return this._pendingUpdate},whenUpdated:function t(){if(this._pendingUpdate)return this._pendingUpdate;return v.resolve()},getDataInfo:function t(e,i){e=e||0;return{rects:[{qTop:e,qLeft:0,qWidth:1,qHeight:i}]}},stateMap:{S:"Selected",A:"Alternative",O:"Optional",XS:"SelectedExcluded",L:"Locked",X:"Excluded",XL:"ExcludedLock"},getState:function t(e){return this.stateMap[e]},getItemClassNames:function t(e,i){var n=this.getState(i),o;o=this.useClientItemState(e)?this.$scope.itemStates[e]?"XS"===i?"server"+n:"selected server"+n:"Selected"===n?"serverOptional":"server"+n:"server"+n;return o},useClientItemState:function t(e){return this.$scope.ignoreSelectionState||e in this.$scope.itemStates},isSelected:function t(e){return this.useClientItemState(e.dataValue)?!!this.$scope.itemStates[e.dataValue]:"S"===e.state||"XS"===e.state},updateTextItem:function t(e,i){var n,o=i.qHighlightRanges&&i.qHighlightRanges.qRanges.length||0,s,l,a=i.qText&&i.qText.split("")||[],c=0,r;e.textItems=[];a.length||e.textItems.push({isHighlighted:false,text:""});if(!o){e.textItems.push({isHighlighted:false,text:(i.qText||"").substring(0,A)});return}l=i.qHighlightRanges.qRanges.sort(function(t,e){return t.qCharPos-e.qCharPos});for(n=0;n<o;++n){s=l[n];r=s.qCharPos;r!==c&&e.textItems.push({isHighlighted:false,text:a.splice(0,r-c).join("")});e.textItems.push({isHighlighted:true,text:a.splice(0,s.qCharCount).join("")});c=s.qCharPos+s.qCharCount}a.length&&A-c>0&&e.textItems.push({isHighlighted:false,text:a.splice(0,A-c).join("")})},updateItems:function t(e,i,n){var o,s=0,l=e[0].qArea.qTop,a=e[0].qArea.qHeight,c,r=this.$scope.items,u=e[0].qMatrix,f,d,h=p.supportDirAuto(),v={rtl:"right",ltr:"left"},g,m,b;n&&u.reverse();i&&(s=r.length);g=this.$scope.backendApi.isLocked();for(o=0,c=u.length;o<c;++o){r[s+o]||(r[s+o]={style:{}});d=r[s+o];f=u[o][0];m="NaN"!==f.qNum;b=p.detectTextDirection(f.qText);d.locked=g;d.dataValue=f.qElemNumber;d.dataColIx=0;d.dataRowIx=n?l+a-o-1:l+o;d.state=f.qState;d.classNames=this.getItemClassNames(f.qElemNumber,f.qState);d.isDimensionValue=true;d.text=f.qText;d.tipText=(f.qText||"").substring(0,A);d.dir=h?"auto":b;d.style.textAlign=m?"right":v[b];this.updateTextItem(d,f)}i||r.splice(o);n&&r.reverse()},onUpdateData:function t(e,i,n){this.updateItems(e,i,n);return this.$timeout(function(){},0,false)},process:function t(e,i,n){return this.update(e,i,false,false).then(function(){this.$scope.scrollApi.setTotalRows(this.$scope.layout.qListObject.qSize.qcy);return this.$scope.scrollApi.setVirtualSize(n)}.bind(this))},processPaint:function t(){var e=0,i,n;i=this.$scope.scrollApi.settings.viewportRowCount;n=this.$scope.scrollApi.resetNativeScroll();return this.process(e,i,false).then(function(){n()})},processResize:function t(){var e=this.$scope.items.length,i=e?this.$scope.items[0].dataRowIx:0,n=this.$scope.scrollApi.settings.viewportRowCount;n<e&&(n=e);return this.process(i,n,true)},onVirtualScroll:function t(e,i){var n=this.update(e,i,false,false);return n},gotoBlock:function t(e,i,n){var o=this.$scope.scrollApi.getSpliceArgs(),s=this.$scope.items;n&&s.reverse();s.splice.apply(s,o);return this.update(e,i,true,n)},onGotoNextBlock:function t(e,i){return this.gotoBlock(e,i,false)},onGotoPreviousBlock:function t(e,i){return this.gotoBlock(e,i,true)},getRows:function t(){return this.$scope.items},getRowCount:function t(){return this.$scope.items.length},getFirstElementIndex:function t(){return this.$scope.items[0].dataRowIx},getLastElementIndex:function t(){return this.$scope.items[this.$scope.items.length-1].dataRowIx},_getSelectionToolbar:function t(){var e=this.$scope;var i=[];var n=[];if(!D(e)){n.push({name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:true,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function t(){this.selectionsApi.clear()},isDisabled:function t(){return!this.selectionsApi.selectionsMade}});i=[{name:"Selections.All",tid:"selection-toolbar-menu.selectAll",iconClass:"lui-icon--select-all",buttonClass:"",action:function t(){e.clearItemStates(false);this.selectionsApi.selectionsMade=true;this.backendApi.selectAll()},isDisabled:function t(){return!this.hasState(["qOption","qAlternative","qExcluded","qDeselected"])}},{name:"Selections.Possible",tid:"selection-toolbar-menu.selectPossible",iconClass:"lui-icon--select-possible",buttonClass:"",action:function t(){e.clearItemStates(false);this.selectionsApi.selectionsMade=true;this.backendApi.selectPossible()},isDisabled:function t(){return!this.hasState(["qOption"])}},{name:"Selections.Alternative",tid:"selection-toolbar-menu.selectAlternative",iconClass:"lui-icon--select-alternative",buttonClass:"",action:function t(){e.clearItemStates(false);this.selectionsApi.selectionsMade=true;this.backendApi.selectAlternative()},isDisabled:function t(){return!this.hasState(["qAlternative"])}},{name:"Selections.Excluded",tid:"selection-toolbar-menu.selectExcluded",iconClass:"lui-icon--select-excluded",buttonClass:"",action:function t(){e.clearItemStates(false);this.selectionsApi.selectionsMade=true;this.backendApi.selectExcluded()},isDisabled:function t(){return!this.hasState(["qExcluded","qAlternative"])}}]}var o=new f(e.backendApi,e.selectionsApi,false,false,n,i);o.buttons[0].isDisabled=function(){return!e.backendApi.hasSelections()};return o},getSelectionToolbar:function t(){return v.resolve(this._getSelectionToolbar())}});q.$inject=["$scope","$document","$timeout","$element"];t.directive("qvListbox",["$timeout",function(t){return{restrict:"E",replace:true,template:o,require:"^qvObjectContent",link:function e(i,n,o,s){var l=n.find(".qv-listbox-scroll-area"),c=l.controller("qvScrollArea"),r=n.find(".qv-scroll-loader:not(.qv-scroll-row-loader)").controller("qvScrollLoader"),u=l.find(".qv-scroll-row-loader").controller("qvScrollLoader"),f="."+i.id+"-listbox",d={blockSize:200,minRowHeight:30,maxRowHeight:30},p=new a(t,d),h=new S(s),v=new x(n,l,"li:not(.qv-listbox-load-buttons)","li:not(.qv-listbox-load-buttons):first","li:not(.qv-listbox-load-buttons):not(.qv-scroll-row-loader):last");i.scrollApi=p;i.items=[];i.$on("$destroy",function(){p.destroy();n.off(f)});n.on("contextmenu"+f,function(t){i.object.selectionsApi.active&&t.preventDefault()});var g=p.initialize(v,h,c,r).then(function(){i.options.isPopover&&i.activateSelections();i.$watch("options.search.show",function(t,e){var n=t===e;i.options.isPopover||n||i.scrollApi.setVirtualSize(true)});s.setInteractionState=function(){var t=this.$scope.object&&this.$scope.object.inAnalysisState(),e=t&&false!==i.options.navigation,n=t&&false!==i.options.selections;i.interactive=n;if(e&&!i.navigatable){i.navigatable=true;i.scrollApi.activate()}else if(!e&&i.navigatable){i.navigatable=false;i.scrollApi.deactivate()}};s.setDirection=function(t){i.options.direction=t};s.onPaint=function(){var t=i.scrollApi.totalRows===this.$scope.layout.qListObject.qSize.qcy,e=i.selectionsApi.active;if(e&&t)return s.processResize();if(!e&&!t){i.scrollApi.updateViewport();return s.processResize()}return s.processPaint()};s.onResize=function(){i.scrollApi.updateViewport();return s.processResize()};s.onInitialNativeScroll=function(t,e){return u.fadeIn(0,0,{width:"100%",height:"30px"}).then(function(){return s.update(t,e,true,false).then(function(){return u.fadeOut()})})}});s.onInit=function(){return g}}}}]);return{type:"listbox",template:"<qv-listbox></qv-listbox>",controller:q,initialProperties:{qListObjectDef:{qShowAlternatives:true,qInitialDataFetch:[{qTop:0,qLeft:0,qWidth:0,qHeight:0}],qDef:{qSortCriterias:[{qSortByState:1,qSortByAscii:1,qSortByNumeric:1,qSortByLoadOrder:1}]}}},data:{dimensions:{min:1,max:1}},mapProperties:function t(){this.mappedDefinition=n.mapDefinition(this.definition,this.type);this.dimensionDefinition=n.findDefinition(this.mappedDefinition,"qListObjectDef",true)},getCreatePropertyHandler:function t(e){return new s({app:e,dimensionDefinition:this.dimensionDefinition})},showRequirements:function t(e){var i=e.layout;return!i.qListObject||!i.qListObject.qDimensionInfo||!!i.qListObject.qDimensionInfo.qError},BackendApi:e,definition:i,options:{search:{},selections:{}},getDropFieldOptions:function t(e,i,n,o){e.Add(n,i);e.ReplaceDimensions(n,i);o()},getDropMeasureOptions:function t(e,i,n,o){o()},importProperties:l.listbox.importProperties,exportProperties:l.listbox.exportProperties}}.apply(e,n),void 0!==o&&(t.exports=o))},167:function(t,e,i){"use strict";var n,o;!(n=[],o=function(){var t={};Object.defineProperties(t,{ENTER:{value:13},ESCAPE:{value:27},SPACE:{value:32},TAB:{value:9},BACKSPACE:{value:8},DELETE:{value:46},ALT:{value:18},CTRL:{value:17},SHIFT:{value:16},ARROW_UP:{value:38},ARROW_DOWN:{value:40},ARROW_LEFT:{value:37},ARROW_RIGHT:{value:39},PAGE_DOWN:{value:34},PAGE_UP:{value:33},HOME:{value:36},END:{value:35},F10:{value:121},A:{value:65},F:{value:70}});t.isArrow=function(e){return e===t.ARROW_UP||e===t.ARROW_DOWN||e===t.ARROW_LEFT||e===t.ARROW_RIGHT};return t}.apply(e,n),void 0!==o&&(t.exports=o))},2147:function(t,e,i){"use strict";var n,o;!(n=[],o=function(){var t,e,i;t={uses:"settings",items:{}};e={type:"items",translation:"Common.Dimension",ref:"qListObjectDef",min:1,max:1,items:{label:{type:"string",ref:"qListObjectDef.qDef.qFieldLabels.0",translation:"Common.Label",show:false},libraryId:{type:"string",component:"library-item",libraryItemType:"dimension",ref:"qListObjectDef.qLibraryId",translation:"Common.Dimension",show:function t(e){return e.qListObjectDef&&e.qListObjectDef.qLibraryId}},field:{type:"string",expressionType:"dimension",ref:"qListObjectDef.qDef.qFieldDefs.0",translation:"Common.Field",change:function t(e){var i=e.qListObjectDef.qDef;i.qFieldLabels||(i.qFieldLabels=[]);i.qFieldLabels[0]=i.qFieldDefs[0]},show:function t(e){return e.qListObjectDef&&!e.qListObjectDef.qLibraryId}},autoSort:{ref:"qListObjectDef.qDef.autoSort",type:"boolean",defaultValue:true,show:false},cId:{ref:"qListObjectDef.qDef.cId",type:"string",show:false}}};i={type:"items",translation:"properties.sorting",schemaIgnore:true,items:{autoSort:{ref:"qListObjectDef.qDef.autoSort",type:"boolean",translation:"properties.sorting",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],change:function t(e,i){if(e.qListObjectDef.qDef.autoSort)return i.autoSortDimension(e.qListObjectDef)}},dimension:{component:"sorting-dimension",ref:"qListObjectDef",show:function t(e){return!e.qListObjectDef.qDef.autoSort},sortingItems:{expression:true,frequency:true,numeric:true,ascii:true}}}};return{type:"items",component:"accordion",items:{dimension:e,sorting:i,settings:t}}}.apply(e,n),void 0!==o&&(t.exports=o))},2148:function(t,e){t.exports='<div class="qv-listbox-container" ng-focus="setFocus()" ng-class="{ \'qv-listbox-interactive\': navigatable }" tid="qv-listbox-container">\n\t<div qva-direction x-dir-setting="{{options.direction}}" qv-listbox-search ng-show="options.search.show" class="qv-listbox-search">\n\t\t<lui-search query="query" is-focused="focusedSearch" on-escape="onEscape($event);" auto-focus="autoFocus" placeholder="Object.Listbox.Search" ng-class="{\'search-focused\': focusedSearch}"/>\n\t</div>\n\t<div class="qv-listbox-wrapper" ng-class="{ \'searchActive\': options.search.show }">\n\t\t<qv-rain ng-if="showSearchThrobber" show="showSearchThrobber"></qv-rain>\n\t\t<div ng-if="options.search.show && query && !showSearchThrobber && items.length == 0" class="qv-listbox-search-message" q-translation="Object.Listbox.NoMatchesForYourTerms"></div>\n\t\t<qv-scroll-area class="qv-listbox-scroll-area qv-animate"\n\t\t\t\t\t\tng-class="{ \'qv-listbox-virtual-scroll-enabled\': scrollApi.virtualScrollEnabled }"\n\t\t\t\t\t\tx-direction="options.direction">\n\t\t\t<ul class="qv-listbox"\n\t\t\t\tng-class="{ \'align-bottom\': scrollApi.alignBottomAbsolute }"\n\t\t\t\tng-style="listStyle"\n\t\t\t\tqva-direction x-dir-setting="{{options.direction}}"\n\t\t\t\tqv-selections-select-while-locked="selectWhileLocked()"\n\t\t\t\tqv-selections-toggle-dimension-value="{ selector: \'li\', itemKey: \'item\' }"\n\t\t\t\tqv-selections-on-toggle-dimension-value="interactive && select($event, item)"\n\t\t\t\tqv-selections-multiselect="{ selector: \'li\', itemKey: \'item\' }"\n\t\t\t\tqv-selections-start-multiselect="interactive && multiselectStart($event)"\n\t\t\t\tqv-selections-update-multiselect="interactive && multiselectUpdate(start, current)"\n\t\t\t\tqv-selections-end-multiselect="interactive && multiselectEnd($event)"\n\t\t\t\tng-keydown="handleKeyDown($event)"\n\t\t\t\tng-keyup="handleKeyUp($event)"\n\t\t\t\trole="listbox"\n\t\t\t\t>\n\t\t\t\t<qv-scroll-load-button tag="li" class="qv-listbox-load-buttons" ng-if="navigatable && scrollApi.loadPrevious" on-load="scrollApi.gotoPreviousBlock()" text="Object.Listbox.LoadPrevious" previous="true">\n\t\t\t\t</qv-scroll-load-button>\n\t\t\t\t<li tabindex="-1" role="option" ng-repeat="item in items" class="qv-listbox-item" ng-class="item.classNames" tid="listbox.item">\n\t\t\t\t\t<div aria-hidden="true" class="qv-listbox-tick"><i class="lui-icon tick-icon" ng-class="{\'lui-icon--tick\': !item.locked, \'lui-icon--lock\': item.locked, }"></i></div>\n\t\t\t\t\t<div class="qv-listbox-text" ng-style="item.style" dir="{{item.dir}}">\n\t\t\t\t\t\t<span aria-label="{{getSRlabel(item)}}" ng-attr-title="{{item.tipText}}">\n\t\t\t\t\t\t\t<span ng-repeat="textItem in item.textItems" ng-class="{ highlighted: textItem.isHighlighted }" ng-bind="textItem.text"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<qv-scroll-loader tag="li" class="qv-scroll-row-loader"></qv-scroll-loader>\n\t\t\t\t<qv-scroll-load-button tag="li" class="qv-listbox-load-buttons" ng-if="navigatable && scrollApi.loadNext" on-load="scrollApi.gotoNextBlock()" text="Object.Listbox.LoadMore"></qv-scroll-load-button>\n\t\t\t</ul>\n\t\t</qv-scroll-area>\n\t\t<qv-scroll-loader></qv-scroll-loader>\n\t</div>\n</div>\n'},2149:function(t,e,i){"use strict";var n,o;!(n=[i(167),i(89)],o=function(t,e){function i(i,n,o){var s=0;var r;function u(){n.clearItemStates(false);n.selectionsApi.selectionsMade=true;n.backendApi.selectAll()}function f(t){n.getItemElements()[n.focusedLi].focus();if(i.shiftKey)return o.whenUpdated().then(function(){if(!n.shiftStartItem){n.shiftStartItem=n.items[t];n.multiselectStart(i)}n.multiselectUpdate(n.shiftStartItem,n.items[n.focusedLi])})}n.shiftSelectEnd=function(t,e){e&&n.shiftStartItem&&n.multiselectEnd(t);n.shiftStartItem=null};try{switch(i.which){case t.ESCAPE:i.preventDefault();i.stopPropagation();if(!n.selectionsApi.active){c(n);n.$emit("listboxBlur");break}n.selectionsApi.cancel();n.shiftSelectEnd(i,false);break;case t.TAB:if(i.shiftKey){if(n.options.search.show){i.preventDefault();i.stopPropagation();n.shiftSelectEnd(i,true);n.options.search.focus();break}i.preventDefault();n.selectionsApi.cancel();n.$emit("listboxBlur");break}n.$emit("listTab");if(n.selectionsApi.active&&!n.focusedSearch){n.selectionsApi.confirm();n.shiftSelectEnd(i,false)}break;case t.SPACE:case t.ENTER:if(n.selectionsApi.active&&i.which!==t.SPACE){n.forceRealign=n.items[n.focusedLi].dataValue;n.selectionsApi.confirm();n.shiftSelectEnd(i,true)}else{n.select(i,n.items[n.focusedLi]);n.shiftSelectEnd(i,true)}break;case t.A:if(i.metaKey||i.ctrlKey){i.preventDefault();n.shiftSelectEnd(i,false);u()}break;case t.F:if(i.metaKey||i.ctrlKey){i.preventDefault();i.stopPropagation();n.options.isPopover?n.options.search.focus():n.options.search.toggle();n.shiftSelectEnd(i,true)}break;case t.ARROW_UP:i.preventDefault();i.stopPropagation();r=n.focusedLi;n.focusedLi=l(n.focusedLi,n.scrollApi);f(r);break;case t.ARROW_DOWN:r=n.focusedLi;n.focusedLi=a(n.focusedLi,n.scrollApi,n.items);f(r);i.preventDefault();i.stopPropagation();break;case t.HOME:i.preventDefault();i.stopPropagation();s=-n.scrollApi.getPage().top;n.scrollApi.scroll(0,s,n.scrollApi.DELTA_MODE.LINE);n.focusedLi=0;n.getItemElements()[n.focusedLi].focus();n.shiftSelectEnd(i,true);break;case t.END:i.preventDefault();i.stopPropagation();s=n.layout.qListObject.qSize.qcy-n.scrollApi.getPage().top-1;n.scrollApi.scroll(0,s,n.scrollApi.DELTA_MODE.LINE);n.focusedLi=n.items.length-1;n.getItemElements()[n.focusedLi].focus();n.shiftSelectEnd(i,true);break}}catch(t){}return e.resolve()}function n(e,i){e.which===t.SHIFT&&i.shiftSelectEnd(e,true)}function o(t){var e=t.getPage();return e.top>0}function s(t){var e=t.getPage();var i=t.domApi.getVisibleRowCount();return e.top+i<t.totalRows}function l(t,e){t>0?t--:o(e)&&e.scroll(0,-1,e.DELTA_MODE.LINE);return t}function a(t,e,i){var n=i.length-2;t===n&&s(e)?e.scroll(0,1,e.DELTA_MODE.LINE):t<=n&&t++;return t}function c(t){t.getItemElements()[t.focusedLi].blur()}return{handleKeyDown:i,handleKeyUp:n}}.apply(e,n),void 0!==o&&(t.exports=o))},2150:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(90),i(99),i(106),i(167)],o=function(t,e,i,n,o){var s=document.createElement("input");s.type="text";t.directive("qvListboxSearch",["$document","$timeout",function(l,a){return{link:function c(r,u){var f,d;r.autoFocus=false;r.selectionsApi.deactivateSearch=function(){f&&f();d&&d();t.$apply(r,function(){r.options.search&&p(false)})};r.onEscape=function(t){if(r.query&&r.query.length)r.query="";else{A();r.selectionsApi.cancel()}t.preventDefault()};function p(t,e){r.options.search.show=void 0!==t?t:!r.options.search.show;if(r.options.search.show){f=L();if(e&&e.length>0){r.query=e;S(e)}}else{f&&f();A();r.query=""}}function h(){u.find("input").focus()}function v(){u.find("input").blur()}function g(){r.getItemElements()[0].focus();r.focusedLi=0}function m(){r.$emit("listboxBlur");r.focusedLi=0;r.selectionsApi.active&&r.selectionsApi.cancel()}r.options.search=e.extend(true,{show:r.options.isPopover,toggle:p,focus:h,blur:v},r.options.search);r.options.showSearch=true;r.$watch("options.search.show",function(t){r.autoFocus=t&&i.treatAsDesktop();t||v()});r.$watch("selectionsApi.active && !focusedSearch",function(t){t?d=D():void 0!==t&&d&&d()});var b;var q=n(r,"object.model",function(){x(true)});function S(t){x();b=a(function(){r.showSearchThrobber=true},1e3);r.backendApi.search(t)}function x(t){if(b){a.cancel(b);b=null}t&&(r.showSearchThrobber=false)}function A(){x(true);r.backendApi.abortSearch()}function y(t){x(true);r.backendApi.confirmSearch(t)}function D(){l.on("keypress.watchKeyChars"+r.$id,function(t){if(t.which===o.ESCAPE||t.which===o.ENTER||t.which===o.SPACE||r.options.search.show)return;s.value=String.fromCharCode(t.which);s.value.length&&r.$apply(function(){p(true,s.value)})});return function(){l.off(".watchKeyChars"+r.$id)}}function L(){var t;function e(){return r.$watch("query",function(t,e){if(void 0===t||t===e)return;t.length>0?S(t):A()})}function i(){t&&t();r.query="";t=e()}function n(t){var e=t.split(" ");return e.some(function(t){var e=t.trim()[0];return"<"===e||">"===e})}i();u.find("input").on("paste.listboxSearch"+r.$id,function(t){if(!window.clipboardData)return;var e=window.clipboardData.getData("Text"),i=t.target,n=i.value,o;o=n.slice(0,i.selectionStart);o+=e.replace(/(\r\n|\n|\r)/gm," ");o+=n.slice(i.selectionEnd);t.preventDefault();i.value=o});l.on("keydown.listboxSearch"+r.$id,function(t){t.which===o.F&&(t.ctrlKey||t.metaKey)&&t.preventDefault();if(true!==r.focusedSearch)return;r.clearItemStates(false);switch(t.which){case o.ENTER:var e=r.backendApi.getSize(),s;if(r.backendApi.isLocked()||false===r.options.selections)r.selectWhileLocked();else if(e.qcy>0&&r.query.length>0){s=r.selectionsApi.getKeyAsToggleSelected(t);s=n(r.query)?!s:s;y(s);r.confirmedSearch=true;r.selectionsApi.selectionsMade=true;i()}break;case o.ESCAPE:t.preventDefault();A();i();r.focusedLi=0;break;case o.F:if(r.options.isPopover)return;if(t.metaKey||t.ctrlKey){A();p();i();r.getItemElements().length?g():m()}break;case o.TAB:t.preventDefault();t.stopPropagation();if(t.shiftKey){A();p();i();m();break}r.getItemElements().length&&g();break}});return function(){t();l.off(".listboxSearch"+r.$id)}}r.$on("$destroy",function(){l.off(".listboxSearch"+r.$id);l.off(".watchKeyChars"+r.$id);q();delete r.options.search});r.options.isPopover&&p(true,r.options.search.defaultStr)}}}])}.apply(e,n),void 0!==o&&(t.exports=o))}}]);