/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[55],{1037:function(e,t,a){"use strict";var i,n;!(i=[a(90)],n=function(e){function t(e,t){var a=t.length,i,n,r,s,o;if(e){n=!e.autoMinMax&&("min"===e.minMax||"minMax"===e.minMax)&&null!==e.min&&!Number.isNaN(+e.min);r=!e.autoMinMax&&("max"===e.minMax||"minMax"===e.minMax)&&null!==e.max&&!Number.isNaN(+e.max)}s=Number.MAX_VALUE;o=-Number.MAX_VALUE;for(i=0;i<a;i++){s=Math.min(s,t[i].qMin);o=Math.max(o,t[i].qMax);if(s<=0&&o>=0)return true}s=n?e.min:s;o=r?e.max:o;return s<=0&&o>=0}var a={applyDisclaimerAttributes:function a(i,n,r,s,o){n||(n={});var l=e.extend({limitedData:false,hasNegativeOrZeroData:false,onlyNegativeOrZero:false,onlyNanData:false,onlyNullColor:false,hasDataRangeIncludingZero:false},n);e.extend(n,l);n.noDataExist=o.qHyperCube.qSize.qcy*o.qHyperCube.qSize.qcx===0;if(n.noDataExist){r.toggleClass("qv-viz-with-disclaimer",false);return n}i=i||{};i.overlay=i.overlay||false;i.supportNegative=void 0===i.supportNegative||i.supportNegative;i.supportRangeOverZero=void 0===i.supportRangeOverZero||i.supportRangeOverZero;var h=e.getValue(o,"qHyperCube.qDataPages.0.qArea.qWidth",0)&&e.getValue(o,"qHyperCube.qDataPages.0.qArea.qHeight",0);h&&true!==i.explicitLimitedData?n.limitedData=!i.paging&&o.qHyperCube.qSize.qcy>o.qHyperCube.qDataPages[0].qMatrix.length:n.limitedData=true===i.explicitLimitedData;n.hasNegativeOrZeroData=!i.supportNegative&&o.qHyperCube.qMeasureInfo.some(function(e){return e.qMin<=0});n.onlyNegativeOrZero=!i.supportNegative&&o.qHyperCube.qMeasureInfo.every(function(e){return e.qMax<=0&&e.qMax>=e.qMin})||0===o.qHyperCube.qSize.qcy;n.onlyNanData=o.qHyperCube.qMeasureInfo.every(function(e){return e.qMax<e.qMin||"NaN"===e.qMax});n.hasDataRangeIncludingZero=!i.supportRangeOverZero&&t(o.measureAxis,o.qHyperCube.qMeasureInfo,o.lineType);if(n.onlyNegativeOrZero&&i.overlay||!(n.limitedData||n.hasNegativeOrZeroData&&!i.supportNegative||n.hasDataRangeIncludingZero||n.onlyNullColor)){r.toggleClass("qv-viz-with-disclaimer",false);s.options.showDisclaimerStar=false}else{r.toggleClass("qv-viz-with-disclaimer",i.bottom);s.options.showDisclaimerStar=true}return n}};return a}.apply(t,i),void 0!==n&&(e.exports=n))},1051:function(e,t,a){"use strict";var i,n;!(i=[a(299)],n=function(e){var t;function a(e,t,a){var i,n,r,s=[];for(n=0;n<t.length;n++)for(i=0;i<e.length;i++){r={qType:a,qCol:t[n],qRow:e[i]};s.push(r)}return s}t=e.extend("StackedApi",{init:function e(){this._super.apply(this,arguments);this.backendStackThrottle.setMethodName("getHyperCubeStackData")},updateCache:function e(t){if(t&&t.qHyperCube&&"S"===t.qHyperCube.qMode){this.cacheCube.set(t.qHyperCube.qDataPages);this.cacheCube.setCubeSize(t.qHyperCube.qSize)}else this.cacheCube.clear();this.backendStackThrottle.clear()},getData:function e(t,a,i){var n=i||this.model.layout.qHyperCube;switch(n.qMode){case"P":return this.model.getHyperCubePivotData(this.path,t);case"S":return this._super(t,a);case"K":return a?this._super(t,a):this.backendStackThrottle.getData(t);default:return this._super(t,a)}},getReducedData:function e(t,a,i){i=void 0!==i?i:"D1";return this.model.getHyperCubeReducedData(this.path,t,a,i)},select:function e(t,i,n){switch(this.model.layout.qHyperCube.qMode){case"P":case"K":return this.model.selectPivotCells(this.path,a(t,i,n));default:return this.model.selectHyperCubeCells(this.path,t,i)}}});return t}.apply(t,i),void 0!==n&&(e.exports=n))},1190:function(e,t,a){"use strict";var i,n;!(i=[a(11),a(2189),a(2193),a(1127),a(1051),a(1037),a(2194),a(2195),a(1661),a(180),a(512),a(89),a(189),a(1168),a(96)],n=function(e,t,a,i,n,r,s,o,l,h,d,c,u,p,f){var g,m=".treemap";function b(e){return e&&!(e.qHyperCube.qMeasureInfo.every(function(e){return e.qMax<=0&&e.qMax>=e.qMin})||0===e.qHyperCube.qSize.qcy)}function y(e){if(e&&e.length){var t=0;while(t<=e.length)if(e[t]&&0===e[t].data.qMaxPos&&0===e[t].data.qMinNeg&&"N"===e[t].data.qType){e.splice(t,1);t--}else t++}if(1===e.length){if("undefined"===e||!e.length||"undefined"===e[0]._children||"_M"===e[0].data.qType)return}else if("undefined"===e||!e.length||"undefined"===e[0]||"undefined"===e[0]._children||0===e[0]._children.length||"undefined"===e[0]._children[0]||"undefined"===e[0].data||"undefined"===e[0]._children[0].data||"_M"===e[0].data.qType)return;for(var a=0;a<e.length;a++)1===e.length?y(e[0]._children):y(e[a]._children)}g=i.extend("Treemap",{init:function a(i,n,r,s,o){this._data={};r=e.extend(true,r||{},{debug:true,providers:{colorMap:{clazz:d,multiDimScheme:"first"}},components:{dataArea:{clazz:t,show:true,dock:"center",showFlag:h.prototype.ShowFlags.SPARK},colorLegend:{show:true,dock:"right",relevantSize:126,label:"colorLegend",showFlag:h.prototype.ShowFlags.MEDIUM}}});this._super(i,n,r,s,o)},off:function e(){f(this.container).off("*",m);this._super()},initSelections:function e(){this.selections._disableSelections=this.options._disableSelections;this.selections.types.dataArea.setComponent("dataArea",this.components.dataArea);this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend);if(!this.options._disableSelections){this.selections.Activated.bind(this.onSelection.Activated.bind(this));this.selections.Deactivated.bind(this.onSelection.Deactivated.bind(this));this.selections.Lasso.bind(this.onToggleLasso.bind(this));this.selections.Select.bind(function(e){var t=this.components.dataArea.getSelectionIndices();var a=this.selections.getActiveType();a.components.colorLegend&&(t=t.concat(this.components.colorLegend.getSelectionIndices()));this.selectionsCache.hasSelections()?this.onSelection.Select.apply(this,[e,true,t,"L"]):e.length&&e.every(function(e){return!e.selected})&&this.selectionsApi.clear()}.bind(this));this.selections.SelectRange.bind(this.onSelection.SelectRange.bind(this));this.selections.SelectAttributeDim.bind(this.onSelection.SelectAttributeDim.bind(this));this.selections.ToggleShape.bind(this.onSelection.ToggleShape.bind(this));this.selections.Confirm.bind(this.onSelection.Confirm.bind(this));this.selections.Cancel.bind(this.onSelection.Cancel.bind(this));this.selections.SelectWhileLocked.bind(this.selectWhileLocked.bind(this))}},initTooltips:function e(){this.tooltips.setComponent("dataArea",this.components.dataArea)},_updateSelectionCache:function e(t){this._super(t);t=t||this.components.dataArea.getSelectableShapes();var a=[];var i=this.providers.colorMap.getDimensionIndex()[0];var n=this.providers.colorMap.getColorDataInfo().attrIndex>=0;if(i>0&&n)while(i>0){for(var r=0;r<t.length;r++)a=a.concat(t[r].children);t=a;i--}this.components.colorLegend.setSelectableShapes(t)},_paint:function e(){var t=this;return this._super().then(function(e){if(e&&e.invalid)return;t.layout();var a,i=[];for(a in t.components)i.push(t.components[a].invalidateDisplay("Treemap.paint"));return c.all(i)})},isValid:function e(t){return this._super(t)&&!this.supressChartRendering},prePaint:function e(t){this._super(t);r.applyDisclaimerAttributes({title:true,bottom:true,overlay:true,supportNegative:false},this.$scope.dataAttributes,this.$element,this.$scope,t);this.supressChartRendering=this.$scope.dataAttributes.onlyNanData||this.$scope.dataAttributes.noDataExist||this.$scope.dataAttributes.onlyNegativeOrZero},_updateData:function t(a){this._data=a;this._super(a);this.components.dataArea.setData(a);this.components.colorLegend.setData(a);a.color&&"byMeasure"!==a.color.mode?this.selections&&this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend):this.selections&&this.selections.types.colorLegend.removeComponent("colorLegend",this.components.colorLegend);var i=e.extend(true,{},this._chartContext.getDimensionTree());var n=new p;while(i._children&&i._children.length)n._children.push(i._children.shift());y(n._children);this.providers.colorMap.setDimensionTree(n);this.components.dataArea.setDimensionTree(n);this.components.dataArea.cellPadding=2;this.components.dataArea.setPseudoDimPos(0)},toggleCacheItem:function e(t){for(var a in this.components)this.components[a].toggleCacheItem?this.components[a].toggleCacheItem(t):this.components[a].invalidateDisplay("Treemap#toggleCacheItem")},getPreferredSize:function e(){return this._super()}});return{type:"treemap",BackendApi:n,template:a,View:g,definition:s,softDefinition:o,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qMode:"K",qNoOfLeftDims:-1,qSortbyYValue:-1,qIndentMode:true,qShowTotalsAbove:true,qMaxStackedCells:3e3,qAlwaysFullyExpanded:true,qInitialDataFetch:[{qTop:0,qHeight:3e3,qLeft:0,qWidth:30}],qSuppressZero:false,qSuppressMissing:true}},data:l,support:{cssScaling:false,snapshot:b,export:b,exportData:true,sharing:b,viewData:true},options:{selections:{dataArea:{},colorLegend:{}},tooltips:{}},importProperties:u.colorChart.importProperties.bind(u),exportProperties:u.colorChart.exportProperties.bind(u)}}.apply(t,i),void 0!==n&&(e.exports=n))},1661:function(e,t,a){"use strict";var i,n;!(i=[a(91),a(101)],n=function(e,t){function a(e,a){var i=a.getDimensions(),n=a.getMeasures(),r=t.getValue(e,"color.mode");i.length>1&&e.color?e.color.persistent=true:"byExpression"===r&&0===n.length&&t.setValue(e,"color.mode","primary")}function i(e){var t;if(e.getDimensions().length>1){t=e.getSorting().indexOf(0);0!==t&&e.changeSorting(t,0)}}function n(e,a){t.setValue(a,"color.dimensionId",void 0)}var r={dimensions:{min:1,max:15,description:function t(a,i){var n=a.qHyperCubeDef.qDimensions.length,r=i>=n-1?"Visualizations.Descriptions.Rectangle":"Visualizations.Descriptions.Group";return e.get(r)},add:function e(t,i,n){a(i,n)},move:function e(t,n,r){i(r);a(n,r)},remove:function e(t,i,r){n(t,i,r);a(i,r)},replace:function e(a,i,n,r){t.getValue(r,"color.dimensionId")===i.qDef.cId&&t.setValue(r,"color.dimensionId",a.qDef.cId)}},measures:{min:1,max:1,description:function t(a,i){var n=0===i?"Visualizations.Descriptions.Size":"Visualizations.Descriptions.Color";return e.get(n)},add:function e(t,i,n){a(i,n)},move:function e(t,i,n){a(i,n)},remove:function e(t,i,n){a(i,n)}}};return r}.apply(t,i),void 0!==n&&(e.exports=n))},1763:function(e,t,a){"use strict";var i,n;!(i=[a(292),a(1048),a(291),a(1736),a(293),a(104)],n=function(e,t,a,i,n,r){var s=e.extend("TreemapNode",{init:function e(t,a,i){this._super();this.x=0;this.y=0;this.width=0;this.height=0;this.data.area=0;this.data.value=a||0;this.data.label=t||"";this.data.valueLabel=i||"";r.apply(this,[0,0,0,0])},pointInside:t.prototype.pointInside,containsPoint:n.prototype.containsPoint,intersectsLocalLine:n.prototype.intersectsLocalLine,getLocalPoints:n.prototype.getLocalPoints,getLocalBoundingRect:n.prototype.getLocalBoundingRect,_calculateBounds:t.prototype._calculateBounds});Object.keys(n.prototype).forEach(function(e){!s.prototype.hasOwnProperty(e)&&["pointInside","intersectsLine","getBoundingRect","getPoints"].indexOf(e)<0&&(s.prototype[e]=n.prototype[e])});a._registerRenderFn(i.render,s);return s}.apply(t,i),void 0!==n&&(e.exports=n))},2189:function(e,t,a){"use strict";var i,n;!(i=[a(109),a(2190),a(2192),a(101),a(291),a(293),a(292),a(1032),a(180),a(89),a(100)],n=function(e,t,a,i,n,r,s,o,l,h,d){var c,u="treemap",p=24,f={NONE:"none",STATIC:"static",DYNAMIC:"dynamic"},g=new e("#eee"),m=new e("#666");var b=document.createElement("canvas"),y=b.getContext("2d");function v(t,a){var i=1;b.width=8*i;b.height=8*i;y.save();y.fillStyle=e.toRGBA(t);y.strokeStyle=e.toRGBA(t,a);y.lineWidth=2;y.scale(i,i);y.beginPath();y.moveTo(5,-1);y.lineTo(-1,5);y.moveTo(9,3);y.lineTo(3,9);y.stroke();y.restore();return y.createPattern(b,"repeat")}function _(t,a){var i,n,r=t?t.length:0,s,l="leaf",h,d,c,g=new e(this._style.overlay.label.color.light),m=new e(this._style.overlay.label.color.dark),b,y=function e(t,a){return a.data.isColorDark?t+a.data.value:t};for(i=0;i<r;i++){n=t[i];l=n.data.labelType;if(n.isBranch){_.apply(this,[t[i].children,a+1]);c=this._branchLabelContainer}else c=this._leafLabelContainer;if(!n.data.labelType){n.data.labelShape&&n.data.labelShape.detach();continue}h=n.data.label;h&&h.length>512&&(h=h.substr(0,256));this.labeling.values.show&&1===l&&n.data.valueLabel&&(h=[h,n.data.valueLabel]);if(n.data.labelShape)n.data.labelShape.parent||c.addChild(n.data.labelShape);else{n.data.labelShape=new o;n.data.labelShape.setText(h);c.addChild(n.data.labelShape)}d={x:n.x,y:n.y,width:n.width,height:n.height,maxHeight:n.height-4,maxWidth:n.width-8,align:this.yMirrorMode?"right":"left",baseline:"top"};switch(l){case 3:if(!n.data.labelFill){b=n.descendants;n.data.labelFill=b.reduce(y,0)>n.data.value/2?g:m;n.data.labelStroke=n.data.labelFill===g?"rgba(33, 33, 33, 0.4)":"rgba(230, 230, 230, 0.4)";n.data.labelFill=n.data.labelFill.toRGBA();n.data.labelShape.strokeFirst=true}d.fill=n.data.labelFill;d.stroke=n.data.labelStroke;d.maxNumLines=/\s+/.test(n.data.label)?2:1;s=Math.round(.1*Math.sqrt(2*n.data.area));d.font="bold "+s+"px 'QlikView Sans'";d.strokeWidth=s>64?2:1;d.align="center";d.baseline="middle";break;case 2:d.fill=this._style.branch.label.color;d.stroke=void 0;d.x+=4;d.width-=8;d.font=this._style.branch.label.font;d.baseline="middle";d.maxNumLines=1;d.height=p;break;default:d.fill=n.data.isColorDark?this._style.leaf.label.color.light:this._style.leaf.label.color.dark;d.x+=4;d.y+=4;d.width-=8;d.height-=8;d.font=this.labeling.leaves.type===f.DYNAMIC?this._styleService.getFont(u,"leaf.label",null,null,Math.round(.1*Math.sqrt(2*n.area))):this._style.leaf.label.font;d.baseline="top";d.maxNumLines=this.labeling.values.show?[-1,1]:[-1]}n.data.labelShape.attrs(d)}}function q(t){var a,i=t?t.length:0,n,r=this._colorMap,s;for(a=0;a<i;a++)if(t[a].isBranch){t[a].fill=this._style.branch.fill;t[a].stroke=null;q.call(this,t[a].children)}else if(!t[a].data.isInitiated){s=[];"P"!==t[a].data.qType&&"undefined"!==typeof t[a].data.qElemNo&&s.push(t[a].data.qElemNo);t[a].ancestors.forEach(function(e){["A","N","O"].contains(e.data.qType)&&s.push(e.data.qElemNo)});s.reverse();t[a].data.isInitiated=true;t[a].data.color=r.getColor(s,t[a].data.value,t[a].data.measureIndex||0,t[a].data.row);n=t[a].data.isFakeOthers?this._branchColorAtDepth[t[a].data.depth]:t[a].data.color;t[a].data.isColorDark=e.getBestContrast(n,g,m)===g;t[a].fill=t[a].data.isFakeOthers?this._fakeOthersPatternAtDepth[t[a].data.depth]:t[a].data.color.toRGBA();t[a].stroke=this._sheetBackgroundStroke;t[a].strokeWidth=1}}function S(e){return{backgroundColor:e.getStyle("","backgroundColor"),branch:{fill:e.getStyle("branch","backgroundColor"),label:{color:e.getStyle("branch.label","color"),font:"normal "+e.getStyle("branch.label","fontSize")+" 'QlikView Sans'"}},leaf:{border:{width:{selected:2},color:{selected:"#000000"}},label:{font:"normal "+e.getStyle("leaf.label","fontSize")+" 'QlikView Sans'",color:{light:"#E6E6E6",dark:"#595959"}}},overlay:{label:{color:{light:"rgba(222,222,222,0.4)",dark:"rgba(33,33,33,0.4)"}}}}}function C(t,a){var i=t._a+a._a*(1-t._a),n=(t._r*t._a+a._r*a._a*(1-t._a))/i,r=(t._g*t._a+a._g*a._a*(1-t._a))/i,s=(t._b*t._a+a._b*a._a*(1-t._a))/i;if(0===i){n=0;r=0;s=0}return new e(n,r,s,1)}c=l.extend("TreeMapArea",{init:function i(){this._super.apply(this,arguments);this.renderers={cells:new n(this.container,{name:"cell-layer"}),labels:new n(this.container,{name:"label-layer"}),selections:new n(this.container,{name:"selection-layer"})};this._layout=new t;this._hierarchy=new a(this.renderers.cells.stage);this._pseudoDimPos=0;this._labelSettings={values:{show:false},headers:{show:true,numLevels:1},overlay:{show:true},leaves:{show:true,type:"static"}};this._styleService=d.initializeService("object.treemap");this._style=S(this._styleService);this._sheetBackgroundColor=new e(this._style.backgroundColor);this._sheetBackgroundStroke=e.toRGBA(this._sheetBackgroundColor,.5);this.labeling=this._labelSettings},cellPadding:2,setYMirrorMode:function e(t){if(this.yMirrorMode!==t){this.yMirrorMode=t;this._yMirrorModeChanged=true}},setColorMap:function e(t){this._colorMap=t},getColorMap:function e(){return this._colorMap},setPseudoDimPos:function e(t){this._pseudoDimPos=t},setGlobalOpacity:function e(t,a){if(t<1){this._globalAlpha=t;this.toggleCacheItem()}else this._super(t,a)},setDimensionTree:function e(t){this._tree=t;this.invalidateProperties();this.invalidateDisplay()},_updateSize:function e(){this.invalidateDisplay()},_updateProperties:function t(){if(!this._data)return;this._style=S(this._styleService);this._sheetBackgroundColor=new e(this._style.backgroundColor);this._sheetBackgroundStroke=e.toRGBA(this._sheetBackgroundColor,.5);if(i.getValue(this._data,"labels.auto")){this.labeling.overlay.show=true;this.labeling.headers.numLevels=0;this.labeling.leaves.type=f.STATIC}else{this.labeling.overlay.show=i.getValue(this._data,"labels.overlay",true);this.labeling.headers.numLevels=i.getValue(this._data,"labels.headers")&&this._layoutMode>3?1:0;this.labeling.leaves.type=i.getValue(this._data,"labels.leaves")?f.STATIC:f.NONE}this.labeling.values.show=i.getValue(this._data,"labels.values",false);this._layout.labeling=this.labeling;this._hierarchy.measureFormatters=this.measureFormatters;var a=this._hierarchy.root.children;this._hierarchy.labeling=this.labeling;this._hierarchy.setData(this._data,this._tree);this._dimension=0;var n=this.renderers.labels.stage;n.removeChildren();var r=new s;n.addChild(r);var o=new s;n.addChild(o);var l=this._data.qHyperCube.qDimensionInfo.map(function(e){return e.supressOthers});this._layout.othersLabelByDimension=this._data.qHyperCube.qDimensionInfo.map(function(e){return e.othersLabel});this._layout.weigh(a,l).sort(a);this._leafLabelContainer=r;this._branchLabelContainer=o;var h=this._hierarchy.getSelectableCacheItems(a);var d=this.selectionIdentifier?this.selectionIdentifier:"dataArea";var c=0;var u=0;var p=h[0]?h[0].getShapes(d)[0]:null;p&&p.ancestors.forEach(function(e){if(!e.parent)return;"N"===e.data.qType&&c++;u++});this.setSelectionIndices([c]);this._dimension=u;this.setSelectableShapes(h);var g=new e(this._style.branch.fill),m=this._data.qHyperCube.qDimensionInfo.length+1;this._branchColorAtDepth=[C(g,this._sheetBackgroundColor)];this._fakeOthersPatternAtDepth=[];var b;for(b=1;b<m;b++)this._branchColorAtDepth.push(C(g,this._branchColorAtDepth[b-1]));for(b=0;b<m;b++)this._fakeOthersPatternAtDepth.push(v(this._colorMap.getColor([-3]),.1));this._dataChanged=true;q.call(this,a);this.renderers.selections.stage.doInvalidate=false;this.renderers.selections.stage.removeChildren()},hasValidData:function e(){return this._super()&&this._data},paint:function e(){this._super(this._layoutMode,this._data);var t=this._hierarchy.root.children;this.renderers.cells.stage.opacity=this._globalAlpha||1;this.renderers.labels.stage.opacity=this._globalAlpha||1;this.renderers.selections.stage.opacity=1;this._layout.cellPadding=this.cellPadding*Math.sqrt(this.rect.width*this.rect.height)/500;this.labeling.headers.numLevels=(i.getValue(this._data,"labels.auto",true)||i.getValue(this._data,"labels.headers"))&&this._layoutMode>3?1:0;if(t.length&&(this._dataChanged||this._yMirrorModeChanged||this._oldW!==this.rect.width||this._oldH!==this.rect.height)){this._layout.arrange(t,this.rect.width-4,this.rect.height-4,this.yMirrorMode?-2:2,2,0,this.yMirrorMode?1:0);_.apply(this,[t,0])}this._dataChanged=false;this._yMirrorModeChanged=false;this._oldW=this.rect.width;this._oldH=this.rect.height;return h.all([this.renderers.cells.render(true),this.renderers.labels.render(true),this.renderers.selections.render(true)])},release:function e(){for(var t in this.renderers)this.renderers[t].release();this._selectableShapes=[];this.renderers={};this._hierarchy=null;this._layout=null;this._super()},toggleCacheItem:function e(t){var a=true;if(this.renderers.cells.stage.opacity!==this._globalAlpha){a=false;this.renderers.cells.stage.opacity=this._globalAlpha;this.renderers.labels.stage.opacity=this._globalAlpha;this.renderers.selections.stage.doInvalidate=false}else this.renderers.selections.stage.doInvalidate=true;t&&t.getShapes(this.selectionIdentifier?this.selectionIdentifier:"dataArea").forEach(function(e){if(t.selected){if(!e.data.borderShape){e.data.borderShape=new r(e.x,e.y,e.width,e.height);e.data.borderShape.strokeWidth=this._style.leaf.border.width.selected;e.data.borderShape.stroke=this._style.leaf.border.color.selected;this.renderers.selections.stage.addChild(e.data.borderShape)}e.opacity=1;e.find("[data.labelShape]").forEach(function(e){e.data.labelShape.opacity=1;a&&e.data.labelShape.invalidate()});if(e.data.labelShape){e.data.labelShape.opacity=1;a&&e.data.labelShape.invalidate()}}else{if(e.data.borderShape){e.data.borderShape.detach();e.data.borderShape=null}e.opacity=void 0;if(e.data.labelShape){e.data.labelShape.opacity=void 0;a&&e.data.labelShape.invalidate()}e.find("[data.labelShape]").forEach(function(e){e.data.labelShape.opacity=void 0;a&&e.data.labelShape.invalidate()})}a&&e.invalidate()},this);if(!a){this.renderers.cells.render();this.renderers.labels.render();this.renderers.selections.render()}}});return c}.apply(t,i),void 0!==n&&(e.exports=n))},2190:function(e,t,a){"use strict";var i,n;!(i=[a(2191)],n=function(e){var t=0,a=1,i;function n(e,a,i){var n=i.x,r=i.y,s=i.shortSide,o,l,h,d=e.length,c=0;if(i.direction===t){for(;c<d;c++){h=e[c];if(h.data.area<=0){l=0;o=s}else{l=s*h.data.area/a;o=h.data.area/l}h.x=Number(n.toFixed(5));h.y=Number(r.toFixed(5));h.width=Number(o.toFixed(5));h.height=Number(l.toFixed(5));r+=l}i.x+=o;i.width-=o}else{for(;c<d;c++){h=e[c];if(h.data.area<=0){o=0;l=s}else{o=s*h.data.area/a;l=h.data.area/o}h.x=Number(n.toFixed(5));h.y=Number(r.toFixed(5));h.width=Number(o.toFixed(5));h.height=Number(l.toFixed(5));n+=o}i.y+=l;i.height-=l}}function r(e,t,a,i){var n=Number.MAX_VALUE,r=0,s=t*t,o=a*a,l,h,d=e.length;while(d){e[--d].data.area<n&&(n=e[d].data.area);e[d].data.area>r&&(r=e[d].data.area)}l=Math.max(s*r/o,o/(s*n));i.data.area<n&&(n=i.data.area);i.data.area>r&&(r=i.data.area);o=(a+i.data.area)*(a+i.data.area);h=Math.max(s*r/o,o/(s*n));return h<=l}i=e.extend({init:function e(){this._super()},sort:function e(t){var a,i;if(!t||!t.length)return this;t.sort(function(e,t){return"O"===t.data.qType?-1:"O"===e.data.qType?1:t.data.weight-e.data.weight});i=t.length;for(a=0;a<i;a++)t[a].isBranch&&this.sort(t[a].children);return this},layout:function e(i,s,o,l,h){if(!i||!i.length)return this;var d={x:l,y:h,width:s,height:o,direction:o<=s?t:a,shortSide:Math.min(o,s)};var c=0,u=[],p=s*o,f,g,m,b;g=i.length;while(g)i[--g].data.area=p*i[g].data.weight;for(g=0;g<i.length;){f=i[g];if(d.direction===t){b=d.height*f.data.area/(c+f.data.area);m=f.data.area/b}else{m=d.width*f.data.area/(c+f.data.area);b=f.data.area/m}if(!u.length||r(u,d.shortSide,c,f)){c+=f.data.area;u.push(f);g++}else{n(u,c,d);c=0;u=[];d.shortSide=Math.min(d.width,d.height);d.direction=d.height<=d.width?t:a}}u.length&&n(u,c,d);return this}});return i}.apply(t,i),void 0!==n&&(e.exports=n))},2191:function(e,t,a){"use strict";var i,n;!(i=[a(92),a(1763),a(91)],n=function(e,t,a){var i,n=24,r=4,s=8e3,o=4e3,l={NONE:0,NONE_COLLAPSED:.1,LEAF:1,HEADER:2,OVERLAY:3};function h(e,t){var a,i;for(a=0;a<e.length;a++){i=e[a];i.x=t-i.x-i.width;i._children&&i._children.length&&h(i._children,t)}}function d(e,t){var a,i;for(a=0;a<e.length;a++){i=e[a];i.y=t-i.y-i.height;i._children&&i._children.length&&d(i._children,t)}}i=e.extend("TreemapLayout",{init:function e(){this.cellPadding=2;this.collapseHeadersOnSmallBranches=true;this.labeling={};this.othersLabel=a.get("properties.dimensionLimits.others")},sort:function e(){return this},weigh:function e(a,i,n){if(!a||!a.length)return this;n=n||0;var r=a.length,s=0,o=0,l,h,d=a[0].parent.data.value;while(r)s+=a[--r].data.value;r=a.length;l=Math.max(s,d);while(r){a[--r].data.weight=l?a[r].data.value/l:0;o+=a[r].data.weight;a[r].isBranch&&this.weigh(a[r].children,i,n+1)}if(1-o>1e-5){h=new t;h.data.label="";h.data.weight=1-o;h.x=0;h.y=0;h.width=0;h.height=0;h.data.qElemNo=-3;h.data.qType="O";h.data.isFakeOthers=true;h.data.value=d-s;h.data.depth=(a[0].parent.data.depth||0)+1;a[0].parent.addChild(h);a[0].parent.children!==a&&a.push(h)}return this},layout:function e(){return this},arrange:function e(t,a,i,s,o,c,u,p){if(!t||!t.length)return this;this.layout(t,a,i,s,o);var f=this.cellPadding,g,m,b;for(b=0;b<t.length;b++){g=t[b];g.visible=g.width>0&&g.height>0;if(g.isBranch){g.width=Math.max(0,g.width-f);g.height=Math.max(0,g.height-f);g.x+=.5*f;g.y+=.5*f;g.visible=g.width>0&&g.height>0;g.data.labelType=this._getLabelType(c,true,g.data.area);m=g.data.labelType!==l.HEADER?0:n;if(g.data.labelType===l.NONE_COLLAPSED){m=r;g.data.labelType=l.NONE}this.arrange(g.children,g.width,g.height-m,g.x,g.y+m,c+1)}else g.data.labelType=this._getLabelType(c,false,g.data.area)}if(0===c){1===u&&h(t,a);1===p&&d(t,i)}return this},_getLabelType:function e(t,a,i){if(a){if(t>this.labeling.headers.numLevels)return l.NONE;if(t===this.labeling.headers.numLevels)return this.labeling.overlay.show&&i>=o?l.OVERLAY:l.NONE;if(this.collapseHeadersOnSmallBranches&&i<s)return l.NONE_COLLAPSED;if(i<o)return l.NONE;return l.HEADER}return i<o||"none"===this.labeling.leaves.type?l.NONE:l.LEAF}});i.LABEL=l;return i}.apply(t,i),void 0!==n&&(e.exports=n))},2192:function(e,t,a){"use strict";var i,n;!(i=[a(92),a(1763)],n=function(e,t){var a,i={PSEUDO:"P",TOTAL:"T",VALUE:"V",NORMAL:"N",OTHERS:"O",ROOT:"R",_MEASURE:"_M"};function n(e,a,r,s,o,l,h){var d,c,u,p,f,g=a?a.length:0;s=s||0;h=h||0;for(f=0;f<g;f++){d=null;u=a[f];c=u.children;u.data.qType===i.PSEUDO&&(h=f);if(u.data.qType===i.TOTAL)continue;if(c.length||"N"===u.data.qType){if(1===c.length&&c[0].data.qType===i._MEASURE){p=c[0].children;p=p?p[0]:null;if(p&&!Number.isNaN(+p.data.qValue)&&p.data.qValue>0){d=new t(u.data.qText,p.data.qValue,l?l.formatValue(p.data.qValue):p.data.qText);d.data.row=u.data.rowIndex;d.data.qType=u.data.qType;d.data.qElemNo=u.data.qElemNo;u.cacheItem&&u.cacheItem.addShape("dataArea",d);d.data.cacheItem=u.cacheItem}}else if(1===c.length&&c[0].data.qType===i.VALUE){if(!Number.isNaN(+c[0].data.qValue)&&c[0].data.qValue>0){d=new t(u.data.qText,c[0].data.qValue,l?l.formatValue(c[0].data.qValue):c[0].data.qText);d.data.row=u.data.rowIndex;d.data.qType=u.data.qType;d.data.qElemNo=u.data.qElemNo;u.cacheItem&&u.cacheItem.addShape("dataArea",d);d.data.cacheItem=u.cacheItem}}else if(u.data.qMaxPos>0){d=new t(u.data.qText,u.data.qMaxPos);d.data.qElemNo=u.data.qElemNo;d.data.row=u.data.rowIndex;d.data.qType=u.data.qType;d.data.cacheItem=u.cacheItem;d.data.addMeasures=true;u.cacheItem&&u.cacheItem.addShape("dataArea",d);c.length&&n(d,c,r,s+1,o,l,h)}}else if(!Number.isNaN(+u.data.qValue)&&u.data.qValue>0){d=new t(u.data.qText,u.data.qValue,u.data.qText);d.data.qType=u.data.qType;d.data.qElemNo=u.data.qElemNo;d.data.row=u.data.rowIndex;d.data.isMeasure=s===r;u.cacheItem&&u.cacheItem.addShape("dataArea",d);d.data.cacheItem=u.cacheItem}if(d){d.data.depth=s;Number.isNaN(+h)||(d.data.measureIndex=h);e.addChild(d)}}}a=e.extend("TreemapHierarchy",{init:function e(a){this.root=a||new t;this._pseudoDimPos=0;this.labeling={values:{show:false}}},setData:function e(t,a){this._pseudoDimPos=t.pseudoDimPos||0;this._numMeasures=t.qHyperCube.qMeasureInfo.length;this._numDimensions=t.qHyperCube.qDimensionInfo.length;this._dimensionLocks=t.qHyperCube.qDimensionInfo.map(function(e){return e.qLocked});this._selectionStates=t.qHyperCube.qDimensionInfo.map(function(e){return e.qStateCounts});var r=this.labeling.values.show&&this.measureFormatters&&this.measureFormatters[0]&&"U"===this.measureFormatters[0].type?this.measureFormatters[0]:null;var s=t.qHyperCube.qStackedDataPages[0].qData,o=t.qHyperCube.qMeasureInfo.map(function(e){return e.qFallbackTitle}),l=t.qHyperCube.qMeasureInfo.length>1?this._pseudoDimPos:-1;this.root.removeChildren();if(s&&s.length){this.root.data.value=s[0].qMaxPos;this.root.data.qType=i.ROOT;n(this.root,a.children,l,0,o,r)}},getDimensionIndexFromNode:function e(t){var a=0,n,r;if(!t)return-2;if(t.data.qType===i.PSEUDO)return-1;n=t;r=n.parent;while(n&&r&&r!==this.root){n=r;r=n.parent;n.data.qType!==i.PSEUDO&&a++}return a},getSelectableCacheItems:function e(t){if(!t||!t.length)return[];var a=t[0],n=a.children,s=this.getDimensionIndexFromNode(a),o;if(a.data.qType===i.PSEUDO)return n.length?this.getSelectableCacheItems(r(t)):[];if(this._dimensionLocks[s])return n.length?this.getSelectableCacheItems(r(t)):[];o=this.getCacheItemsFromNodes(t);if(o.length<=1&&this._selectionStates[s].qSelected&&!this._selectionStates[s].qOption)return n.length?this.getSelectableCacheItems(r(t)):o;return o},getCacheItemsFromNodes:function e(t){var a,i=t?t.length:0,n=[];for(a=0;a<i;a++)t[a].data.cacheItem&&n.indexOf(t[a].data.cacheItem)<0&&n.push(t[a].data.cacheItem);return n}});function r(e){var t=[];e.forEach(function(e){t=t.concat(e.children)});return t}return a}.apply(t,i),void 0!==n&&(e.exports=n))},2193:function(e,t){e.exports='<div class="qv-viz" aria-hidden="true"></div>\n<span class="qv-viz-center-disclaimer" ng-if="dataAttributes.onlyNegativeOrZero && dataAttributes.layoutMode > 2" q-translation="Object.Disclaimer.OnlyNegativeOrZeroValues" q-title-translation="Object.Disclaimer.OnlyNegativeOrZeroValues" dir="ltr"></span>\n<span class="qv-viz-center-disclaimer" ng-if="dataAttributes.noDataExist && dataAttributes.layoutMode > 2" q-translation="Object.Disclaimer.NoDataExist" q-title-translation="Object.Disclaimer.NoDataExist" dir="ltr"></span>\n<span class="qv-viz-center-disclaimer" ng-if="dataAttributes.onlyNanData && dataAttributes.layoutMode > 2" q-translation="Object.Disclaimer.OnlyNanData" q-title-translation="Object.Disclaimer.OnlyNanData" dir="ltr"></span>\n<div qva-chart-disclaimer attributes="dataAttributes" visible="!dataAttributes.onlyNegativeOrZero" direction="options.direction"></div>'},2194:function(e,t,a){"use strict";var i,n;!(i=[a(101)],n=function(e){var t;function a(e,t){var a=t.getDimensions(),i=t.getMeasures();return i.length+a.length>2}t={uses:"settings",items:{presentation:{type:"items",translation:"properties.presentation",grouped:false,items:{labels:{type:"items",items:{auto:{ref:"labels.auto",type:"boolean",translation:"properties.dataPoints.headersAndLabels",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],snapshot:{tid:"property-dataPoints"}},headers:{ref:"labels.headers",translation:"properties.dataPoints.headers",type:"boolean",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(i,n){return!e.getValue(i,"labels.auto")&&a(i,n)}},overlay:{ref:"labels.overlay",type:"boolean",component:"switch",translation:"properties.dataPoints.overlayLabels",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(a,i){return!e.getValue(a,"labels.auto")&&i.getDimensions().length-(e.getValue(a,"labels.headers")?1:0)>1}},leaves:{ref:"labels.leaves",type:"string",translation:"properties.dataPoints.leafLabels",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(a){return!e.getValue(a,"labels.auto")},snapshot:{tid:"property-leafLabels"}},values:{ref:"labels.values",type:"boolean",component:"switch",translation:"properties.dataPoints.labelmode",defaultValue:false,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(a){return e.getValue(a,"labels.auto")||e.getValue(a,"labels.leaves")}}}}}},colorsAndLegend:{uses:"colorsAndLegend",items:{legend:{items:{show:{defaultValue:false}}}}}}};var i={uses:"data",items:{dimensions:{},measures:{}}};var n={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{suppressZero:null,calcCond:{uses:"calcCond"}}}}};return{type:"items",component:"accordion",items:{data:i,addons:n,settings:t}}}.apply(t,i),void 0!==n&&(e.exports=n))},2195:function(e,t,a){"use strict";var i,n;!(i=[a(101)],n=function(e){return{type:"items",component:"accordion",items:{data:{uses:"data"},presentation:{uses:"presentation",type:"items",translation:"properties.presentation",grouped:false,items:{labels:{type:"items",items:{auto:{ref:"labels.auto",type:"boolean",translation:"properties.dataPoints.headersAndLabels",component:"switch",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},headers:{ref:"labels.headers",translation:"properties.dataPoints.headers",type:"boolean",component:"switch",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(a,i){return!e.getValue(a,"labels.auto")&&i.qHyperCube.qMeasureInfo.length+i.qHyperCube.qDimensionInfo.length>2}},overlay:{ref:"labels.overlay",type:"boolean",component:"switch",translation:"properties.dataPoints.overlayLabels",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(a,i){return!e.getValue(a,"labels.auto")&&i.qHyperCube.qDimensionInfo.length-(e.getValue(a,"labels.headers")?1:0)>1}},leaves:{ref:"labels.leaves",type:"string",translation:"properties.dataPoints.leafLabels",component:"switch",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(a){return!e.getValue(a,"labels.auto")}},values:{ref:"labels.values",type:"boolean",component:"switch",translation:"properties.dataPoints.labelmode",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function t(a){return e.getValue(a,"labels.auto")||e.getValue(a,"labels.leaves")}}}}}}}}}.apply(t,i),void 0!==n&&(e.exports=n))},305:function(e,t,a){"use strict";var i,n;!(i=[],n=function(){var e={SPARK:1,XSMALL:3,SMALL:7,MEDIUM:15,FULL:31},t=[[550,450,e.FULL],[400,220,e.MEDIUM],[300,150,e.SMALL],[150,75,e.XSMALL],[0,0,e.SPARK]],a=[[450,e.FULL],[220,e.MEDIUM],[150,e.SMALL],[75,e.XSMALL],[0,e.SPARK]],i=[[550,e.FULL],[400,e.MEDIUM],[300,e.SMALL],[150,e.XSMALL],[0,e.SPARK]],n=t.length;function r(a,i){var r;for(r=0;r<n;++r)if(a>=t[r][0]&&i>=t[r][1])return t[r][2];return e.SPARK}function s(t){var i;for(i=0;i<n;++i)if(t>=a[i][0])return a[i][1];return e.SPARK}function o(t){var a;for(a=0;a<n;++a)if(t>=i[a][0])return i[a][1];return e.SPARK}function l(t){var a=Object.keys(e).filter(function(a){return e[a]===t})[0];return a&&a.toLowerCase()||""}return{LayoutMode:e,getLayoutMode:r,getLayoutModeKey:l,getHorizontalLayoutMode:o,getVerticalLayoutMode:s}}.apply(t,i),void 0!==n&&(e.exports=n))},393:function(e,t,a){"use strict";var i,n;!(i=[a(10),a(48)],n=function(e,t){var a=document.createElement("textarea");a.style.position="absolute";a.style.left="-9999px";a.setAttribute("readonly","");function i(e){a.value=e;document.body.appendChild(a);a.select();a.setSelectionRange(0,a.value.length);document.execCommand("copy");document.body.removeChild(a)}t.service("qvCopy",["$window",function(t){var a=e.element(t.document.body);var i=e.element("<textarea/>");i.css({position:"fixed",opacity:"0"});return function(e){i.val(e);a.append(i);i[0].select();try{var t=document.execCommand("copy");if(!t)throw t}catch(t){window.prompt("Copy to clipboard: Ctrl+C, Enter",e)}i.remove()}}]);t.directive("qvClickCopy",["qvCopy",function(e){return{restrict:"A",link:function t(a,i,n){i.bind("click",function(){e(n.qvClickCopy)})}}}]);return{copyToClipboard:i}}.apply(t,i),void 0!==n&&(e.exports=n))},486:function(e,t,a){"use strict";var i,n;!(i=[a(200),a(104)],n=function(e){function t(t,n,h){var d=t.length>0?t[0].positions:[],c=n._style,u=n._radialOptions,p=new e,f=c.ticks.major.length*h,g=c.label.offset*h*20,m,b,y="far"===n.getAlignment()?"left":"right",v=[],_=Math.min(n.rect.height,n.rect.width),q=0,S,C,x,w,M=[],D=n._radius,A;b="left"===y?1:-1;f*=b;m=b>0?0:n.rect.width;n.getShowLine()&&v.push({stroke:c.line.color,shape:{cx:n._centerPoint.x,cy:n._centerPoint.y,radius:D,radianOffset:0,start:u.start,end:u.end},type:"arc"});if(n.getShowLabels())for(A=0;A<d.length;A++){S=(d[A]-q)/(_-q);x=s(S,n);w=o(x);w.r=w.r+g;w=l(w,n._centerPoint);C=r(S,n);w.angle=C;M.push(w);p.save();p.translate(x.x+n._centerPoint.x,x.y+n._centerPoint.y);p.rotate(C);v.push({stroke:c.ticks.major.color,opacity:n.ticks[A].opacity,transform:p.elements,shape:{x1:0,x2:-f,y1:0,y2:0},type:"line"});p.restore()}m+=c.ticks.major.length*b;if(n._showLabels&&n._layoutMode>1)for(A=0;A<t.length;A++){v=v.concat(a(t[A],M,m,n));m+=t[A].labelSpace*b}n._showTitle&&n._layoutMode>1&&(v=v.concat(i(n,c)));n._renderer.shapes=v;n._renderer.render()}function a(e,t,a,i){var n=e.labels,r=t,s=e.opacities,o,l,h=[],d=i._style,c,u,p,f,g,m,b;u=n?n.length:0;if(0===u)return;p=u-1;for(m=0;m<u;m++){f=i.yMirrorMode?n[p-m]:n[m];o=i._renderer.getTextWidth(f,d.label.font);g=r[m];c=g.angle;l=c-.1<3*Math.PI/2&&c+.1>3*Math.PI/2?"center":c<Math.PI/2||c>3*Math.PI/2?"left":"right";h.push({type:"text",fill:d.label.color,opacity:s?s[m]:1,shape:{text:f,x:g.x,y:g.y,maxWidth:g.x-o<0?g.x:g.x+o>i.rect.width?i.rect.width-g.x:o,height:b,maxNumLines:1,font:d.label.font,align:l,baseline:"middle"}})}return h}function i(e,t){var a=[],i=Math.min(e.rect.width,e.rect.height),r=n(e);a.push({type:"text",fill:t.title.color,opacity:1,shape:{text:e._title,x:r.x,y:r.y+i*(.06+Math.min(i-300,0)/-300*.04),maxWidth:1.4*e._radius,maxNumLines:1,font:t.title.font,align:"center",baseline:"middle"}});return a}function n(e){var t={x:e.rect.width/2,y:e.rect.height/2};return t}function r(e,t){var a=t._radialOptions,i=Math.max(Math.min(e,1),0)*(a.end-a.start)+a.start;return i}function s(e,t,a){var i=t._radialOptions,n=e*(i.end-i.start)+i.start,r=t._radius;return l({a:n,r:r},a)}function o(e){return{r:Math.sqrt(e.x*e.x+e.y*e.y),a:Math.atan2(e.y,e.x)}}function l(e,t){t||(t={x:0,y:0});return{x:t.x+e.r*Math.cos(e.a),y:t.y+e.r*Math.sin(e.a)}}return{renderRadial:t,getPointOfValue:s,getPolPos:o,getCartPos:l,getAngleOfNormalizedValue:r}}.apply(t,i),void 0!==n&&(e.exports=n))}}]);