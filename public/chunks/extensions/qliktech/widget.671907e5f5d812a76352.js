/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[57],{105:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={Precedents:{PrecedentTypes:{Like:"like",Dislike:"dislike"}},Visualization:{ChartTypes:{Custom:"custom",Kpi:"kpi",Gauge:"gauge",BarChart:"barchart",ValueRange:"ValueRange",Table:"table",Mapping:"Mapping"},CustomVisualizations:{CountFact:"countFact",Ordinal:"Ordinal",NullFacts:"nullFacts",RangeFacts:"rangeFacts",UniValueFrequency:"uniValueFrequency",DTypeFacts:"dTypeFacts",ValueFrequency:"valueFrequency",TemporalFacts:"temporalFacts",MixedTypeValues:"mixedTypeValues"},Actions:{Bucketing:"bucket",Ordinal:"ordinal",SplitValuesDef:"splitValuesDef",SplitValues:"splitValues",SplitEmail:"splitEmail",SplitAddress:"splitAddress",SplitField:"splitField",MapValues:"mapValues",MixedTypeValues:"mixedTypeValues",RenameMapping:"rename",MapNulls:"mapNulls",MappingLimit:99,SplitLimit:9},Size:{Auto:"auto",Small:"small",Medium:"medium",Large:"large"},Layout:{Cellspan:{Small:1,Medium:2,Large:3}},ValueRangeDisplayModes:{Text:"text",RangeLine:"rangeLine"}},Events:{Associations:{ApplyRecommendation:"ApplyRecommendation",ToggleAssociationsRecommendationsPanel:"ToggleAssociationsRecommendationsPanel",UpdateAssociationsRecommendationsToolbarButtonState:"UpdateAssociationsRecommendationsToolbarButtonState"},TablePreview:{UpdateTablePreview:"UpdateTablePreview"},SplitAction:{Reset:"SpitActionReset",Validate:"SpitActionValidate",LoadComplete:"CardLoadComplete"},EditorDetailsPane:{CardsResize:"cardsResize",ResizeChart:"resizeChart",BucketingChange:"bucketingChange",BucketingReset:"bucketingReset",OrderingChange:"orderingChange",FieldCreated:"fieldCreated",MappingCreated:"MappingCreated",MappingReset:"MappingReset",DisableMappingActionButtons:"DisableMappingActionButtons"},PubSub:{ForceReloadComplete:"/datamanager/forcereloadcomplete",StartSpinInvalidation:"/spin/start/invalidation",StopSpinInvalidation:"/spin/stop/invalidation",StartSpin:"/spin/start",StopSpin:"/spin/stop",ConnectionDeleted:"/connection/deleted",ConnectionCreated:"/connection/created",AppDetailsViewChange:"/datamanager/appdetailsviewchange",ExpandSmartSearchSuggestedChart:"expandSmartSearchSuggestedChart",RestoreSearchState:"restoreSearchState"}},KeyCodes:{Enter:13,Esc:27,Up:38,Down:40,Tab:9,SpaceBar:32,Delete:8},AddData:{Folder:"folder",InlineData:"inlinedata"},Tags:{Hidden:"$hidden"},JoinTables:{joinTypes:{join:"Join",innerJoin:"Inner Join",outerJoin:"Outer Join",leftJoin:"Left Join",rightJoin:"Right Join"}},Toolbar:{height:42}};return t}.apply(e,i),void 0!==s&&(t.exports=s))},1192:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(91),n(284),n(2200),n(445),n(189),n(318),n(2205),n(504)],s=function(t,e,n,i,s,a,r,o,l,c){function u(e,n,i,s){s=s&&"hard"===s?" hard-error":" soft-error";e.$scope.error={title:n,message:i};e.htmlElement.innerHTML='<div qv-errorhandler class="object-error'+s+'" ng-class="hard-error" tid="widget.Error"><div class="object-error-content"><div class="object-error-title"><span>{{error.title}}</span>\t</div>\t<div ng-if="error.message" class="object-error-message">{{error.message}}</div></div></div>';t.getService("$compile")(e.htmlElement)(e.$scope)}function d(i,s,a){var r=a.templateId,c=new e;if(!i.htmlElement){i.styleElement=document.createElement("style");s.appendChild(i.styleElement);i.htmlElement=document.createElement("div");i.htmlElement.id="widget"+a.qInfo.qId;i.htmlElement.style.height="100%";i.htmlElement.style.overflow="auto";s.appendChild(i.htmlElement)}if(!r){u(i,n.get("Widget.NoTemplate"),r);c.resolve();return c.promise()}o.get(r).then(function(e){i.template=e;function s(){function s(t){return l.updateLess(i,t,a.qInfo.qId).then(c.resolve).catch(function(t){u(i,n.get("Widget.InvalidCss"," "),t.message);c.resolve()})}l.hasAngularBindings(e.css)?t.getService("$compile")("<style>"+e.css+"</style>")(i.$scope,function(e){t.getService("$timeout")(function(){s(e[0].innerHTML)})}):s(e.css)}if(r!==i.templateId||i.version!==e.version){i.templateId=r;i.version=e.version;i.htmlElement.innerHTML=e.html;a.dependencies=e.dependencies;t.getService("$compile")(i.htmlElement)(i.$scope);s()}else s()},function(t){u(i,n.get(t||"Widget.TemplateNotFound",[r]),n.get(t||"Widget.TemplateNotFound",[r]));c.resolve()});return c.promise}return{initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qInitialDataFetch:[{qWidth:10,qHeight:100}]},templateId:""},init:function t(i,a){var r=function t(){return o.get(a.templateId).then(function(t){return s.init(t.dependencies)},function(){return e.reject(n.get("Widget.TemplateNotFound",[a.widgetMeta&&a.widgetMeta.name||a.templateId,a.widgetMeta&&a.widgetMeta.libid]))})};return a.widgetMeta&&a.widgetMeta.libid?o.getTemplateListFromLibrary(a.widgetMeta.libid).then(function(){return r()}):r()},mapProperties:function t(n){var i=this,s=new e;var r=o.getLoaded(n.layout.templateId);var l={};if(r&&r.properties){r.properties.measures&&(l.measures=JSON.parse(JSON.stringify(r.properties.measures)));r.properties.dimensions&&(l.dimensions=JSON.parse(JSON.stringify(r.properties.dimensions)))}i.data=c.getData(r);i.definition=c.getDefinition(r);a.mapProperties.apply(i);s.resolve(l);return s.promise},support:{cssScaling:false,snapshot:true,export:true,exportData:function t(e){if(e.qHyperCube)return e.qHyperCube.qDimensionInfo.length>0||e.qHyperCube.qMeasureInfo.length>0;return false},sharing:false,viewData:function t(e){if(e.qHyperCube)return e.qHyperCube.qDimensionInfo.length>0||e.qHyperCube.qMeasureInfo.length>0;return false}},importProperties:function t(e,n,i){var s=o.getLoaded(n.templateId);i.data=c.getData(s);i.definition=c.getDefinition(s);var a=r.hypercube.importProperties(e,n,i);if(n.templateId){a.qProperty.templateId=n.templateId;a.qProperty.widgetMeta={libid:s.libid,name:s.name}}i.overrideHasNewType(i);return a},paint:function t(e,n){this.$scope.ext.overrideHasNewType(this.$scope.ext);this.$scope.ext.templateId=n.templateId;this.$scope.app||(this.$scope.app=i.currApp(this));this.$scope.data||(this.$scope.data=i.table(this));this.$scope.navigation||(this.$scope.navigation=i.navigation);this.$scope.layout=n;this.$scope.settings=n.settings||{};this.$scope.settings.title=n.title;this.$scope.settings.subtitle=n.subtitle;this.$scope.settings.footnote=n.footnote;return d(this,e[0],n)},overrideHasNewType:function t(e){e.hasNewType=function(t,e,n){return t.ext.templateId!==n.templateId}},controller:[function(){}]}}.apply(e,i),void 0!==s&&(t.exports=s))},122:function(t,e,n){"use strict";var i,s;!(i=[n(135),n(177),n(90)],s=function(t,e,n){var i={getUrlForHub:function e(){return t.buildHubUrl().replace("/noData/true","")},getUrlForSheet:function i(s,a,r){var o=n.getParameterByName("app");a||(a=e.analysis(o).state);if(r)return t.buildUrl(true,"sense","app",o,"sheet",s,"state",a,"overlay",r);return t.buildUrl(true,"sense","app",o,"sheet",s,"state",a)},getUrlForStory:function i(s,a,r){var o=n.getParameterByName("app");"undefined"===typeof a&&(a=e.story(o).state||"editstory");return r?t.buildUrl(true,"sense","app",o,"story",s,"state",a,"slide",r):t.buildUrl(true,"sense","app",o,"story",s,"state",a)},getUrlForOverview:function e(){var i=n.getParameterByName("app");return t.buildUrl(true,"sense","app",i)},getUrlForDataModelViewer:function e(){var i=n.getParameterByName("app");return t.buildUrl(true,"datamodelviewer","app",i)},getUrlForDataLoadEditor:function e(){var i=n.getParameterByName("app");return t.buildUrl(true,"dataloadeditor","app",i)},getUrlForDataManager:function e(){var i=n.getParameterByName("app");return t.buildUrl(true,"sense","app",i,"datamanager","datamanager")},goToHub:function e(){t.setUrl(i.getUrlForHub(),false,false,true)},goToOverview:function e(){t.setUrl(i.getUrlForOverview())},goToDataManager:function e(){t.setUrl(i.getUrlForDataManager())},goToDataModelViewer:function e(){t.setUrl(i.getUrlForDataModelViewer())},goToDataLoadEditor:function e(){t.setUrl(i.getUrlForDataLoadEditor())},goToSheet:function e(n,s,a){t.setUrl(i.getUrlForSheet(n,s,a))},goToStory:function e(n,s,a){t.setUrl(i.getUrlForStory(n,s,a))}};return i}.apply(e,i),void 0!==s&&(t.exports=s))},155:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(95),n(92),n(89),n(90),n(183),n(396),n(105),n(182)],s=function(t,e,i,s,a,r,o,l,c){var u;var d=i.extend("DataPrepRestService",{init:function t(){},_getAPI:function t(){u||(u=r.getApi("api/dataprepservice/v1","openapi",void 0,void 0,void 0,void 0,c.getServerNodeId()));return u},_handleRestResponse:function t(i,s,a){if(a.body&&a.body.notification&&1005===a.body.notification.data.code){e.publish(l.Events.PubSub.StartSpin,{method:i});return this.executeAfterReload({apiFunc:this[i],initialParams:s}).finally(function(){e.publish(l.Events.PubSub.StopSpin,{method:i})})}a.body.response&&a.body.response.loadModel&&Promise.all([n.e(22),n.e(93)]).then(function(){var t=[n(253)];(function(t){t.updateProperties(a.body.response.loadModel)}).apply(null,t)}).catch(n.oe);return a.body.response},executeAfterReload:function t(e){var n=new s;this.waitForReload(n);return n.promise.then(function(){return e.apiFunc.apply(this,e.initialParams)}.bind(this))},waitForReload:function t(e){this.getProgress().then(function(t){this._checkProgress(t.result)?e.resolve(true):setTimeout(function(){this.waitForReload(e)}.bind(this),1e3)}.bind(this),function(t){e.reject(t)})},_checkProgress:function t(e){var n=false;e.engine&&e.engine.qProgressData&&e.engine.qProgressData.qFinished&&true===e.dps.dataLoad.complete&&true===e.dps.profiling.complete&&(n=true);return n},_getAppName:function t(){return a.getParameterByName("app")},getRestResponseHandler:function t(e,n){return function(){return this[e].bind(this,n)}.bind(this)},getSerializedLoadModel:function t(){var e=this;var n=arguments;return this._getAPI().then(function(t){return t.apis.model.getCurrentLoadModel({appId:e._getAppName()}).then(e._handleRestResponse.bind(e,"getSerializedLoadModel",n))})},_addTables:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){return t.apis.table.addTables({appId:n._getAppName(),body:e}).then(n._handleRestResponse.bind(n,"_addTables",i))})},_getDesiredTransforms:function t(){var e=[];e.push("makeGeoPoint");e.push("lookupGeoInfo");return e},isRunning:function t(){return this._getAPI()},getForcedConcatRecommendations:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){var s={type:"concatenate",queries:e};return t.apis.table.recommendTableTransformation({appId:n._getAppName(),body:s}).then(n._handleRestResponse.bind(n,"getForcedConcatRecommendations",i))})},getTargetTables:function t(e,n){var i=this;var s=arguments;return this._getAPI().then(function(t){return t.apis.table.getCurrentTables({appId:i._getAppName(),forceReload:e,noData:n}).then(i._handleRestResponse.bind(i,"getTargetTables",s))})},getRecommendations:function t(){var e=this;var n=arguments;return this._getAPI().then(function(t){return t.apis.model.getRecommendations({appId:e._getAppName()}).then(e._handleRestResponse.bind(e,"getRecommendations",n))})},getCurrentClassification:function t(){var e=this;var n=arguments;return this._getAPI().then(function(t){return t.apis.model.getCurrentClassification({appId:e._getAppName()}).then(e._handleRestResponse.bind(e,"getCurrentClassification",n))})},getTableRecommendations:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){return t.apis.table.getTableRecommendations({appId:n._getAppName(),tableId:e}).then(n._handleRestResponse.bind(n,"getTableRecommendations",i))})},getTargetTablePreview:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){return t.apis.table.getPreviewData({appId:n._getAppName(),tableId:e}).then(n._handleRestResponse.bind(n,"getTargetTablePreview",i))})},getTableFields:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){return t.apis.field.getFieldExpressions({appId:n._getAppName(),tableId:e}).then(n._handleRestResponse.bind(n,"getTableFields",i))})},getLoadScript:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){return t.apis.model.getCurrentScript({appId:n._getAppName(),useCache:e}).then(n._handleRestResponse.bind(n,"getLoadScript",i))})},invokeWithPolling:function t(n,i,s){i&&e.publish(l.Events.PubSub.StartSpin,{method:s});var a=true;var r=void 0;r=setInterval(function(){a&&this.getProgress().then(function(){})}.bind(this),15e3);var o=function t(){a=false;void 0!==r&&clearInterval(r);r=void 0};return n().then(function(t){o();i&&e.publish(l.Events.PubSub.StopSpin,{method:s});return t},function(t){o();i&&e.publish(l.Events.PubSub.StopSpin);throw t})},invokeWithGlobalSpinnerSupport:function t(n){e.publish(l.Events.PubSub.StartSpinInvalidation);return n().catch(function(){e.publish(l.Events.PubSub.StopSpinInvalidation)})},createConcatenatedQuery:function t(e,n,i){var s=this;var a=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return s._getAPI().then(function(t){var r={type:"forceConcatenate",payload:{name:e,queries:n,mappings:i}};return t.apis.table.applyTransformation({appId:s._getAppName(),body:r}).then(s._handleRestResponse.bind(s,"createConcatenatedQuery",a))})})},createJoinedQuery:function t(e,n,i,s){var a=this;var r=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return a._getAPI().then(function(t){var o={type:"join",payload:{name:e,joinType:n,queries:i,mappings:s}};return t.apis.table.applyTransformation({appId:a._getAppName(),body:o}).then(a._handleRestResponse.bind(a,"createJoinedQuery",r))})})},splitQuery:function t(e,n){var i=this;var s=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return i._getAPI().then(function(t){var a={type:"split",payload:{queries:[e],queryProperties:[{sourceQueries:n}]}};return t.apis.table.applyTransformation({appId:i._getAppName(),body:a}).then(i._handleRestResponse.bind(i,"splitQuery",s))})})},synchronizeScriptedTables:function t(){return this.invokeWithPolling(function(){return this.addTables([],true).then(function(t){return t})}.bind(this),true,"synchronize")},getProgress:function t(){var e=this;var n=arguments;return this._getAPI().then(function(t){var i={appId:e._getAppName()};return t.apis.session.getProgress(i).then(e._handleRestResponse.bind(e,"getProgress",n))})},addTables:function e(n,i){var s={data:[],applyTransformations:this._getDesiredTransforms(),defaults:{},scriptedSources:i};for(var a=0;a<n.length;a++){var r=n[a];var l={tables:[]};l.connectionInfo=t.extend(true,{},r.connectionInfo,{dbInfo:r.dbInfo});s.data.push(l);var c=l.tables;r.tablesAndFields.map(function(t){var e={databaseName:r.databaseName,ownerName:r.ownerName,tableName:t.table.qName,formatSpec:t.table.qFormatSpec,fileFormatSettings:t.table.fileFormatSettings};e.fields=[];t.fields.forEach(function(t){e.fields.push({name:t.qName,selected:true})});c.push(e)})}var u=new o;return u.get().then(function(t){s.defaults.enableQVDCaching=t.enableQVDCaching;return this._addTables(s)}.bind(this))},getVisRecommendations:function t(e,n,i,s,a){var r=this;var o=arguments;return this._getAPI().then(function(t){var l={appId:r._getAppName()};if(e){var c=["fields","libItems","expressions"];c.forEach(function(t){e[t]&&e[t].length&&(l[t]=JSON.stringify(e[t]))});e["table"]&&(l["table"]=e["table"])}i&&(l.bundleOverride=JSON.stringify(i));s&&(l.detailLevel=JSON.stringify([]));a&&(l.options=JSON.stringify(a));var u=t.apis.visualization;var d=n?u.getVisualizationsForLoaded(l):u.getVisualizationsForCurrent(l);return d.then(r._handleRestResponse.bind(r,"getVisRecommendations",o))})},getInsightRecommendations:function t(e,n,i,s,a){var r=this;var o=arguments;i||(i=true);return this._getAPI().then(function(t){var l={appId:r._getAppName()};e&&(l["sp"]=e);n&&(l.bundleOverride=JSON.stringify(n));s&&(l.detailLevel=JSON.stringify([]));a&&(l.options=JSON.stringify(a));var c=t.apis.visualization;var u=i?c.getVisualizationsForLoaded(l):c.getVisualizationsForCurrent(l);return u.then(r._handleRestResponse.bind(r,"getVisRecommendations",o))})},bucketField:function t(e,n,i){var s=this;var a=arguments;return this._getAPI().then(function(t){var r={type:"bucket",bucketing:i};r.bucketing.fieldId=n;var o={appId:s._getAppName(),tableId:e,body:r};return t.apis.table.applyTableTransformation(o).then(s._handleRestResponse.bind(s,"bucketField",a))})},applyOrdinal:function t(e,n,i){var s=this;var a=arguments;return this._getAPI().then(function(t){var r={type:"ordinal",ordinals:i};var o={appId:s._getAppName(),tableId:e,fieldId:n,body:r};return t.apis.field.addFieldTransformation(o).then(s._handleRestResponse.bind(s,"applyOrdinal",a))})},applyFieldMapping:function t(e,n,i){var s=this;var a=arguments;return this._getAPI().then(function(t){var r={type:"mapping",mappings:i};var o={appId:s._getAppName(),tableId:e,fieldId:n,body:r};return t.apis.field.addFieldTransformation(o).then(s._handleRestResponse.bind(s,"applyFieldMapping",a))})},splitField:function t(e,n,i){var s=this;var a=arguments;return this._getAPI().then(function(t){var r={type:"splitField",splitDef:{fieldId:n,splitInfo:i}};var o={appId:s._getAppName(),tableId:e,body:r};return t.apis.table.applyTableTransformation(o).then(s._handleRestResponse.bind(s,"splitField",a))})},adaptVisualization:function t(e,n,i,s,a,r){var o=this;var l=arguments;return this._getAPI().then(function(t){var c={action:e,datasetName:n,analysisType:s,dims:a,msrs:r,visType:i};return t.apis.visualization.createVisRecommendationForCurrent({appId:o._getAppName(),body:c}).then(o._handleRestResponse.bind(o,"adaptVisualization",l))})},adaptMatchRecord:function t(e,n,i){var s=this;var a=arguments;return this._getAPI().then(function(t){var r={action:e,matchRecord:n,analysisType:i,detailLevel:[]};return t.apis.visualization.createVisRecommendationForLoaded({appId:s._getAppName(),body:r}).then(s._handleRestResponse.bind(s,"adaptVisualization",a))})},getExcludedCompareVisualizations:function t(e,n,i){var s=this;var a=arguments;return this._getAPI().then(function(t){var r={appId:s._getAppName(),detailLevel:"complete",analysisTypes:JSON.stringify(["excludedCompare","excludedCompareMsrSelector"]),bundleOverride:JSON.stringify({explore:"grayInsight"})};if(e.length>0)if(i){var o=[];e.forEach(function(t){o.push({libId:t})});r["libItems"]=JSON.stringify(o)}else{var l=[];e.forEach(function(t){l.push({name:t,overrides:{classifications:["measure"],defaultAggregation:"sum"}})});r["fields"]=JSON.stringify(l)}n&&(r.options=JSON.stringify(n));return t.apis.visualization.getVisualizationsForLoaded(r).then(s._handleRestResponse.bind(s,"getVisRecommendations",a))})},adaptAggregationForExcludedCompareVisualization:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){var s={action:"update",analysisType:"excludedCompare",matchRecord:e};return t.apis.visualization.createVisRecommendationForLoaded({appId:n._getAppName(),body:s}).then(n._handleRestResponse.bind(n,"adaptVisualization",i))})}});return d}.apply(e,i),void 0!==s&&(t.exports=s))},1664:function(t,e,n){"use strict";var i,s;!(i=[n(108)],s=function(t){var e={ERROR:{value:0,name:"Error"},WARNING:{value:1,name:"Warning"},INFO:{value:2,name:"Information"}};var n=false;function i(t,e,n){this.message=t;this.source=e;this.type=n}function s(i){var s;switch(i.type){case e.ERROR:s=console.error;break;case e.WARNING:s=console.warn;break;case e.INFO:s=console.info;break;default:break}n||t.inClient()||s(i.type.name," ",i.message)}function a(t,n){var a=new i(t,n,e.ERROR);s(a)}function r(t,n){var a=new i(t,n,e.WARNING);s(a)}function o(t,n){var a=new i(t,n,e.INFO);s(a)}function l(t){n=t}return{error:a,warn:r,info:o,suppress:l}}.apply(e,i),void 0!==s&&(t.exports=s))},167:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};Object.defineProperties(t,{ENTER:{value:13},ESCAPE:{value:27},SPACE:{value:32},TAB:{value:9},BACKSPACE:{value:8},DELETE:{value:46},ALT:{value:18},CTRL:{value:17},SHIFT:{value:16},ARROW_UP:{value:38},ARROW_DOWN:{value:40},ARROW_LEFT:{value:37},ARROW_RIGHT:{value:39},PAGE_DOWN:{value:34},PAGE_UP:{value:33},HOME:{value:36},END:{value:35},F10:{value:121},A:{value:65},F:{value:70}});t.isArrow=function(e){return e===t.ARROW_UP||e===t.ARROW_DOWN||e===t.ARROW_LEFT||e===t.ARROW_RIGHT};return t}.apply(e,i),void 0!==s&&(t.exports=s))},168:function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(183)],s=function(t,e,n){var i;var s;var a;var r=t.extend("PrecedentsService",{init:function t(){},_getAPI:function t(){i||(i=n.getApi("api/precedent/v1","openapi"));return i},_handleRestResponse:function t(e,n,i){return i.body.response},_getAppName:function t(){return e.getParameterByName("app")},defineDimension:function t(e){var n=this;var i=arguments;var s={};s.targets=[{type:"dimension",dimension:e}];s.source={type:"user"};s.relation={relation:"define"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:s,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"defineDimension",i))})},defineMeasure:function t(e){var n=this;var i=arguments;var s={};s.targets=[{type:"measure",measure:e}];s.source={type:"user"};s.relation={relation:"define"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:s,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"defineMeasure",i))})},dislikeField:function t(e){var n=this;var i=arguments;s=void 0;var a={};a.targets=[{type:"field",field:e}];a.source={type:"user"};a.relation={relation:"dislike"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:a,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeField",i))})},removeDefinedItem:function t(e){var n=this;var i=arguments;a=void 0;return this._getAPI().then(function(t){return t.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"define",targetNodeId:e}).then(n._handleRestResponse.bind(n,"removeDefinedItem",i))})},getLearnedItems:function t(){var e=this;var n=arguments;if(a&&a.pending)return a;var i={};i.targets=[{type:"field"},{type:"libItem"},{type:"dimension"},{type:"measure"}];i.source={type:"user"};i.relations=[{relation:"define"},{relation:"dislike"}];a=this._getAPI().then(function(t){return t.apis.precedents.getRelationships({appId:e._getAppName()},{requestBody:i,server:t.spec.servers[0].url}).then(e._handleRestResponse.bind(e,"getDefinedItems",n))});return a},undislikeItem:function t(e){var n=this;var i=arguments;s=void 0;return this._getAPI().then(function(t){return t.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"dislike",targetNodeId:e}).then(n._handleRestResponse.bind(n,"undislikeItem",i))})},getDislikedItems:function t(){var e=this;var n=arguments;if(s)return s;var i={};i.targets=[{type:"field"},{type:"libItem"}];i.source={type:"user"};i.relations=[{relation:"dislike"}];s=this._getAPI().then(function(t){return t.apis.precedents.getRelationships({appId:e._getAppName()},{requestBody:i,server:t.spec.servers[0].url}).then(e._handleRestResponse.bind(e,"getDislikedItems",n))});return s},dislikeLibItem:function t(e){var n=this;var i=arguments;s=void 0;var a={};a.targets=[{type:"libItem",libItem:e}];a.source={type:"user"};a.relation={relation:"dislike"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:a,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeLibItem",i))})},likeAnalysis:function t(e){var n=this;var i=arguments;var s={};s.targets=[{type:"analysis",analysis:e}];s.source={type:"user"};s.relation={relation:"like"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:s,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"likeAnalysis",i))})},dislikeAnalysis:function t(e){var n=this;var i=arguments;var s={};s.targets=[{type:"analysis",analysis:e}];s.source={type:"user"};s.relation={relation:"dislike"};return this._getAPI().then(function(t){return t.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:s,server:t.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeAnalysis",i))})},undislikeAnalysis:function t(e){var n=this;var i=arguments;return this._getAPI().then(function(t){return t.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"dislike",targetNodeId:e.precedents.id}).then(n._handleRestResponse.bind(n,"undislikeAnalysis",i))})},scrapeApp:function t(){var e=this;var n=arguments;s=void 0;return this._getAPI().then(function(t){return t.apis.precedents.scrapeApp({appId:e._getAppName()}).then(e._handleRestResponse.bind(e,"scrapeApp",n))})}});return r}.apply(e,i),void 0!==s&&(t.exports=s))},169:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91)],s=function(t,e){var n=0;var i=6;var s=1;function a(t,e,a,o){var l;if(0===e.length)return;t[a]||(t[a]={});l=t[a];l.string=e;l.isWhitespace=o||e.length<s&&!r(e)||'"'===e;l.colorIx=l.isWhitespace?-1:n;n=l.isWhitespace?n:(n+1)%i}function r(t){return t.match(/[\u3040-\u9FBF]/)||t.match(/[\uFF65-\uFF9F]/)}function o(t,e,n,i){if(e.length<s&&!r(e))return;t.push({string:e,startQuote:n,endQuote:i})}t.service("qvGlobalSearchDataService",function(){this.transformResult=function(t,n){var i=n;t.matches=t.matches||[];t.searchTermGroups=t.searchTermGroups||[];t.searchVisualsGroups=t.searchVisualsGroups||[];for(var s=0;s<i.qSearchGroupArray.length;++s)if("DatasetType"===i.qSearchGroupArray[s].qGroupType){t.searchTermGroups.push(i.qSearchGroupArray[s]);var a=i.qSearchGroupArray[s];-1===t.matches.indexOf(a.qSearchTermsMatched.length)&&t.matches.push(a.qSearchTermsMatched.length)}else t.searchVisualsGroups.push(i.qSearchGroupArray[s]);t.displayResult.data=t.searchTermGroups.length>0;t.displayResult.visuals=t.searchVisualsGroups.length>0;t.searchVisualsGroups.length>0&&(t.existingChartGroupTitle=e.get("GlobalSearch.Existing.ChartsTitle",[t.searchVisualsGroups[0].qItems.length]))};this.showMore=function(t,e){if(!e||!t||1!==t.qSearchGroupArray.length)return;var n=t.qSearchGroupArray[0],i;for(var s=0;s<n.qItems.length;s++)if(n.qItems[s].qIdentifier===e.qIdentifier){i=n.qItems[s].qItemMatches;break}i&&(e.qItemMatches=i)};this.setHeaders=function(t){var e,n=0;for(e=0;e<t.searchTermGroups.length;e++)t.searchTermGroups[e].qTotalNumberOfItems>n&&(n=t.searchTermGroups[e].qTotalNumberOfItems);t.columnCount=n;t.columnWidth=Math.floor(100/n)+"%";t.shadowHeaders=t.shadowHeaders||[];t.shadowHeaders.splice(0,t.shadowHeaders.length-n);for(e=t.shadowHeaders.length;e<n;e++)t.shadowHeaders[e]={}};this.transformSuggest=function(t,e,n){var i,s=0,a,r=[];this.getUnderlinersAndSearchTerms(t.query,r,[]);n=void 0!==n?n:25;n=Math.min(n,e.qSuggestions.length);for(i=0;i<n;++i){a={value:e.qSuggestions[i].qValue,term:e.qSuggestions[i].qTerm};if(t.query===this.getResultingQueryFromSuggestion(r,a))continue;t.suggestions[s]=a;s++}t.suggestions.splice(s,t.suggestions.length-s)};this._whitespaces=[" ","\t","\n","\r","\r\n","　"];this.isWhiteSpaceAt=function(t,e){var n=this._whitespaces;var i=t.charAt(e),s;for(s=0;s<n.length;++s)if(i===n[s])return true;return false};this.getUnderlinersAndSearchTerms=function(t,e,i){var s=0,r=0,l=t.length,c=0,u,d=this._whitespaces,p=this;i.length=0;n=0;function h(t,e){var n,i,s;for(i=0;i<d.length;++i){n=t.indexOf(d[i],e);n>=0&&(!s||n<s)&&(s=n)}return s||-1}function f(t,e){var n;do{n=t.indexOf('"',e);e=n+1}while(n>=0&&e<l&&!p.isWhiteSpaceAt(t,e));return n}function g(){while(r<l&&p.isWhiteSpaceAt(t,r))r++;r>s&&a(e,t.substring(s,r),c++,true);s=r}g();while(s<l){if('"'===t.charAt(s)){a(e,t.substring(s,s+1),c++);r=f(t,++s);u=r>=0?t.substring(s,r):t.substring(s);a(e,u,c++);o(i,u,true,r>0);if(r<0)break;a(e,t.substring(r,r+1),c++);r+=1;s=r;g();continue}r=h(t,s);u=r>=0?t.substring(s,r):t.substring(s);a(e,u,c++);o(i,u,false,false);if(r<0)break;s=r;g()}e.splice(c,e.length-c)};this.getSuggestTerms=function(t,e){var n=this,i,s;function a(t){var e,i,s;t=t.trim();if(0===t.length)return null;e=t.length;i=e-1;s=-1;while(i>-1){if(n.isWhiteSpaceAt(t,i)){s=i+1;break}i--}s=Math.max(s,0);return t.substring(s,e)}s=a(t);i=e.map(function(t){return t.string});s&&2===s.length&&'"'===s.charAt(0)&&i.push(s.charAt(1));return i};this.getUnderlineLengthFromTermIx=function(t,e){var n=0,i,s=0;while(n<t.length){i=t[n];if(!(s<e||i.isWhitespace))break;if(n===t.length-1&&1===i.string.length&&!this.isWhiteSpaceAt(i.string,0)&&'"'!==i.string)break;i.isWhitespace||s++;n++}return n>0?n:0};this.getResultingQueryFromSuggestion=function(t,e){var n,i,s,a,r=this.getUnderlineLengthFromTermIx(t,e.term);n=t.slice(0,r).reduce(function(t,e){return t+e.string},"");i='"'===n.charAt(n.length-1);s=!i&&e.value.indexOf(" ")>=0;a=s||i;return n+(s?'"':"")+e.value+(a?'"':"")};this.getMinQueryLength=function(){return s};this.getMaxColorsNum=function(){return i}})}.apply(e,i),void 0!==s&&(t.exports=s))},175:function(t,e,n){"use strict";var i,s;!(i=[n(95),n(11),n(10),n(48),n(833),n(839),n(94),n(50),n(202)],s=function(t,e,n,i,s,a,r,o,l){i.service("qvGlobalSelectionsService",["$document","$timeout",function(i,c){var u={},d,p=false,h=null,f=[];function g(t){if(!t)return u[0];return u[m(t)]}function v(t,e){u[m(t)]=e}function m(t){return t&&t.id?t.id.toUpperCase():""}function b(t){function e(){var e=g(t);S(e)}function n(){var e=g(t);S(e);y(e)}return{$container:void 0,$app:t,$selectionCount:false,$showFields:false,getComponent:function t(){return o.isSmallDevice?a:s},setup:function t(){o.ViewChanged.bind(n);r.StateChanged.bind(e)},destroy:function t(){o.ViewChanged.unbind(n);r.StateChanged.unbind(e)}}}function y(t){t.$container=n.element("<div>");i.find("#global-selections-container").length>0?i.find("#global-selections-container").append(t.$container):i.find("body").append(t.$container);t.$container.showComponent(t.getComponent(),["$scope",function(e){e.app=t.$app}]);t.setup()}function S(t){if(t.$container){t.$container.remove();t.$container=void 0}f.forEach(function(t){t()});t.destroy()}function I(t){var e=g(t);if(!e){e=new b(t.enigmaModel);v(t,e)}return e}function x(t){return t&&void 0!==t.$container}function w(){t.publish("/toolbar/setContextItemsVisibility",d.getCaoActive()||d.isSelectActive())}function q(t){var n=l.getCurrentSheetInfo();if(x(t)){l.closeAnalysisOverlay(n.sheetId,n.appId);S(t);e("body").removeClass("qv-global-selections-enabled")}else{l.openAnalysisOverlay(n.sheetId,n.appId,r.States.selections);e("body").addClass("qv-global-selections-enabled");y(t)}w()}d={toggleGlobalSelection:function t(e){q(I(e))},off:function t(){Object.keys(u).forEach(function(t){S(u[t])})},isSelectActive:function t(e){var n=g(e);return!!(void 0!==e&&x(n))},getCaoActive:function t(){return p},setCaoActive:function t(e){c(function(){p=e;w()})},setCsShowCallback:function t(e){h=e},setCsShow:function t(e){h&&h(e)},setSelectionCount:function e(n,i){var s=I(i);s.$selectionCount=n;t.publish("/toolbar/invalidateMobileToolbar",n)},getSelectionCount:function t(e){var n=g(e)||{};return n.$selectionCount},setShowFields:function t(e,n){var i=I(n);i.$showFields=e},getShowFields:function t(e){var n=g(e)||{};return!!n.$showFields},onClose:function t(e){"function"===typeof e&&f.push(e)}};return d}])}.apply(e,i),void 0!==s&&(t.exports=s))},177:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t="q3TnObj";function e(){var e=JSON.parse(sessionStorage.getItem(t));null===e&&(e=JSON.parse(localStorage.getItem(t))||{});return e}function n(){return e()}function i(n){var i=e();if(!i[n]){i[n]={data:{view:"",scriptTabIndex:0},tab:"",analysis:{sheetId:"",state:""},story:{storyId:"",slideId:"",state:""}};sessionStorage.setItem(t,JSON.stringify(i));localStorage.setItem(t,JSON.stringify(i));return i[n]}return i[n]}function s(n,s,a,r){var o=i(n);var l=e();void 0===a&&(a=l[n].data.scriptTabIndex);r||(o.tab="data");o.data={view:s,scriptTabIndex:a};l[n]=o;localStorage.setItem(t,JSON.stringify(l));sessionStorage.setItem(t,JSON.stringify(l));return l[n]}function a(t){var n=e();if(n[t])return n[t].data;return"not_found"}function r(n,s,a,r){var o=i(a);var l=e();o.tab="analysis";o.analysis={sheetId:n,state:s,overlay:r};l[a]=o;localStorage.setItem(t,JSON.stringify(l));sessionStorage.setItem(t,JSON.stringify(l));return l[a]}function o(t){var n=e();if(n[t])return n[t].analysis;return"not_found"}function l(n,s,a,r){var o=i(r);var l=e();o.tab="story";o.story={slideId:n,storyId:a,state:s};l[r]=o;localStorage.setItem(t,JSON.stringify(l));sessionStorage.setItem(t,JSON.stringify(l));return l[r]}function c(t){var n=e();if(n[t])return n[t].story;return"not_found"}function u(n,s){var a=i(s);var r=e();a.tab=n;r[s]=a;localStorage.setItem(t,JSON.stringify(r));sessionStorage.setItem(t,JSON.stringify(r));return r[s]}function d(t){var n=e();if(n[t])return n[t].tab;return"not_found"}return{isInSession:n,setData:s,data:a,setSheet:r,analysis:o,setStory:l,story:c,setTab:u,tab:d}}.apply(e,i),void 0!==s&&(t.exports=s))},184:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(127)],s=function(t,e){var n={a:65,alt:18,b:66,backspace:8,c:67,ctrl:17,d:68,del:46,down:40,e:69,end:35,f:70,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,g:71,h:72,home:36,i:73,insert:45,j:74,k:75,l:76,left:37,m:77,n:78,o:79,p:80,pagedown:34,pageup:33,q:81,r:82,right:39,s:83,shift:16,space:32,t:84,tab:9,u:85,up:38,v:86,w:87,win:224,x:88,y:89,z:90,cmd:91,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"*":106},i="qvKeyboardShortcuts",s=false,a;function r(){this.groups=[];this.shortcuts=[];this.timer={id:null};this.isReleased=true;this.currentEvent=void 0}r.prototype.createGroup=function(t,e){var n=this,i,s;for(s=0;s<this.groups.length;s++)if(this.groups[s].name===t){i=this.groups[s];break}if(!i){i={name:t,priority:e,active:false,shortcuts:[]};this.groups.push(i);this.groups.sort(function(t,e){return t.priority-e.priority})}return{registerKeys:function t(e,s,a){n.registerKeys(i,e,s,a)},unregisterKeys:function t(e,n){var s=i.shortcuts;for(var a=0;a<s.length;a++)if(s[a].keyCombo===e&&s[a].callback===n){s.splice(a,1);break}},on:function t(){n.activateGroup(i)},off:function t(){n.deactivateGroup(i)},delete:function t(){n.deactivateGroup(i);n.deleteGroup(i)}}};r.prototype.activateGroup=function(e){var n=this;e.active=true;if(!s){s=true;t(document).on("keydown."+i,function(t){n.handleEvent(t)})}};r.prototype.deactivateGroup=function(e){var n;e.active=false;n=this.groups.reduce(function(t,e){e.active&&t++;return t},0);if(0===n&&s){s=false;t(document).off("keydown."+i)}};r.prototype.deleteGroup=function(t){this.groups=this.groups.filter(function(e){return e!==t})};r.prototype.registerKeys=function(t,e,i,s){var a=e.toLowerCase().split("+"),r={keyCombo:e,ctrlKey:false,shiftKey:false,altKey:false,keyCode:null,name:"",callback:null,allowInAllContexts:!!(s&&"allowInInput"in s)&&s.allowInInput,preventDefault:!(s&&"preventDefault"in s)||s.preventDefault,delay:s&&"delay"in s?s.delay:250};for(var o in n)for(var l=0;l<a.length;l++){r.name=e.toLowerCase();r.callback=i;"ctrl"!==a[l]&&"cmd"!==a[l]||(r.ctrlKey=true);"alt"===a[l]&&(r.altKey=true);"shift"===a[l]&&(r.shiftKey=true);a[l]===o&&17!==n[o]&&16!==n[o]&&91!==n[o]&&18!==n[o]&&(r.keyCode=n[o])}t.shortcuts.push(r)};r.prototype.preventDefault=function(){this.currentEvent&&this.currentEvent.preventDefault()};r.prototype.handleEvent=function(t){var i=this;this.currentEvent=t;function s(e,s,r,o){var l,c;for(var u=0;u<i.groups.length;u++){l=i.groups[u];if(l.active)for(var d=l.shortcuts.length-1;d>=0;d--){c=l.shortcuts[d];if((c.keyCode===n["*"]||c.keyCode===o&&c.ctrlKey===e&&c.shiftKey===s&&c.altKey===r)&&!a(t,c))break}}}function a(t,n){var i=e.isInput(document.activeElement);return!(i&&!n.allowInAllContexts)&&r(t,n)}function r(t,e){e.preventDefault&&t.preventDefault();if("number"!==typeof i.timer.id){e.delay>0&&(i.timer.id=setTimeout(function(){o()},e.delay));if(true===e.callback(e,t)){o();return true}}}function o(){clearTimeout(i.timer.id);delete i.timer.id}t.shiftKey?!t.ctrlKey&&!t.metaKey||t.altKey?t.ctrlKey||t.metaKey||!t.altKey?s(false,true,false,t.which):s(false,true,true,t.which):s(true,true,false,t.which):!t.ctrlKey&&!t.metaKey||t.altKey?t.ctrlKey||t.metaKey||!t.altKey?s(false,false,false,t.which):s(false,false,true,t.which):s(true,false,false,t.which)};a=new r;return a}.apply(e,i),void 0!==s&&(t.exports=s))},196:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){return{MEASURE:"measure",DIMENSION:"dimension",FIELD:"field",PUBSUB_TOPIC:"/cao/light-editing/swap"}}.apply(e,i),void 0!==s&&(t.exports=s))},202:function(t,e,n){"use strict";var i,s;!(i=[n(90),n(89),n(122),n(177),n(94),n(93),n(49),n(108),n(50)],s=function(t,e,n,i,s,a,r,o,l){function c(){var e=t.getParameterByName("app");var n=t.getParameterByName("sheet");var s=i.analysis(e);var a=s&&s.sheetId?s.sheetId:n;return{appId:e,sheetId:a}}function u(t){if(!o.inClient()||!r.getFlag("SSA_IN_EDIT")||l.isSmallDevice||t)return e.resolve("analysis");return a.getApp().then(function(t){return t.getLayout().then(function(t){var e=t&&t.permissions&&t.permissions.update;var n=e?s.States.edit:s.States.analysis;return s.getAllStateKeys()[n]})}).catch(function(){return e.resolve("analysis")})}function d(n,s){var a=i.analysis(t.getParameterByName("app"));if(o.inClient()&&a&&a.state&&!s)return e.resolve(a.state);return u(n)}function p(t,e,s,a){i.setSheet(t,e,s,a);n.goToSheet(t,e,a)}function h(e){var n=t.getParameterByName("app");var a=i.analysis(n).overlay;return a===s.getAllStateKeys()[e]}function f(){return r.getFlag("SSA_IN_EDIT")||s.state!==s.States.edit}function g(){return h(s.States.insight)}function v(){return h(s.States.selections)}function m(t,e,n){if(o.inClient()){var a=i.analysis(e).state;var r=s.getAllStateKeys()[n];a||u().then(function(n){p(t,n,e,r)});p(t,a,e,r)}}function b(t,e){if(o.inClient()){var n=i.analysis(e).state;n?p(t,n,e,null):u().then(function(n){p(t,n,e,null)})}}return{getCurrentSheetInfo:c,closeAnalysisOverlay:b,openAnalysisOverlay:m,getDefaultSheetViewState:u,getCurrentSheetViewState:d,shouldShowOverlay:f,isInInsightMode:g,isInSelectionsMode:v}}.apply(e,i),void 0!==s&&(t.exports=s))},207:function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(249),n(303)],s=function(t,e,n,i){var s=t.extend("SortableItemList",{init:function t(e,n){this.items=[];this.disabled=false;this.typeFlag=e||1;this.locked=false;Object.keys(n||{}).forEach(function(t){this[t]=n[t]},this)},addSortableItem:function t(e,n){Object.defineProperty(e,"__sortableItem__",{configurable:false,enumerable:true,writable:true,value:{typeFlag:n||1}});this.items.push(e)},moveItem:function t(e,n){this.items.splice(n,0,this.items.splice(e,1)[0])},getIndexByItem:function t(e){return this.items.indexOf(e)},get:function t(e){return this.items.filter(e||function(){return true})},getLockedIndices:function t(){return this.get(function(t){return!!(t.__sortableItem__.typeFlag&i.TYPEFLAG_LOCKED)}).map(function(t){return this.getIndexByItem(t)},this)},reset:function t(){this.items.length=0;this.disabled=false},isEmpty:function t(){return 0===this.items.length},setLocked:function t(e){this.locked=e}});Object.defineProperties(s.prototype,{length:{get:function t(){return this.items.length}}});var a=n.extend("SortableItemLists",{init:function t(){this._super.apply(this,arguments);this.lists=[];this.dragPlaceholder=null},addPlaceholder:function t(n){var s=this.getList(n),a=s?s.items.indexOf(n):-1;this.dragPlaceholder=e.extend(true,{},n);this.dragPlaceholder.id="placeholder";this.dragPlaceholder.__sortableItem__.typeFlag=i.TYPEFLAG_PLACEHOLDER;this.dragPlaceholder.style={opacity:"0.3"};s&&s.items.splice(a,0,this.dragPlaceholder);return this.dragPlaceholder},removePlaceholder:function t(){if(!this.dragPlaceholder)return;var e=this.getList(this.dragPlaceholder),n=e?e.items.indexOf(this.dragPlaceholder):-1;if(-1!==n){e.items.splice(n,1);this.dragPlaceholder=null}},getPlaceholder:function t(){return this.dragPlaceholder},createList:function t(e,n){var i=new s(e,n);this.lists.push(i);return i},reset:function t(){this.lists.forEach(function(t){t.reset()})},getList:function t(e){return this.lists.filter(function(t){return-1!==t.items.indexOf(e)})[0]},disable:function t(e){this.lists.forEach(function(t){t.disabled=!(e.__sortableItem__.typeFlag&t.typeFlag)})},enable:function t(){this.lists.forEach(function(t){t.disabled=false})},getIndexOfItem:function t(e){var n=this.getList(e);var i=n?n.items.indexOf(e):-1;return i},moveItem:function t(e,n){var i=this.getList(e),s=this.getList(n),a,r;if(!i||!s)return;r=s.items.indexOf(n);a=i.items.indexOf(e);i.items.splice(a,1);s.items.splice(r,0,e)},onBegin:function t(e,n){this.addPlaceholder(e,n);this.disable(e)},onEnter:function t(e,n){var s=this.getList(e),a=s.getLockedIndices();if(e===this.dragPlaceholder)return;if(n===i.ENTER_BEFORE||n===i.ENTER_AFTER){var r=this.getList(this.dragPlaceholder),o,l;if(!r||!s)return;o=r.getIndexByItem(this.dragPlaceholder);r.items.splice(o,1);l=s.getIndexByItem(e);l+=n===i.ENTER_AFTER?1:0;s.items.splice(l,0,this.dragPlaceholder)}else this.moveItem(this.dragPlaceholder,e);var c=s.getLockedIndices();a.forEach(function(t,e){s.moveItem(c[e],t)})},onEnterList:function t(e){if(e.disabled||e.locked)return;var n=this.getList(this.dragPlaceholder);if(!n)return;var i=n.getIndexByItem(this.dragPlaceholder);n.items.splice(i,1);e.items.push(this.dragPlaceholder)},onMove:function t(e){if(-1===this.getIndexOfItem(e)){this.onCancel();return false}var n=this.dragPlaceholder;this.moveItem(e,n);this.removePlaceholder();this.enable();return true},onMoveToList:function t(e,n){var i=this.getList(e);if(i&&!(n.disabled||n.locked)){var s=i.items.indexOf(e);if(i===n){this.onMove(e,this.dragPlaceholder);return true}i.items.splice(s,1);n.items.push(e)}this.removePlaceholder();this.enable();return!!i},onCancel:function t(){this.removePlaceholder();this.enable()},allowEnter:function t(e,n){var i=this.getList(e);return void 0!==i&&!i.disabled&&!i.locked&&!!(n.__sortableItem__.typeFlag&i.typeFlag)},allowEnterList:function t(e,n){return!e.disabled&&!e.locked&&!!(n.__sortableItem__.typeFlag&e.typeFlag)}});a.create=function(t){var e=a.extend(t||{});t=new e(t&&t.options);return t};return a}.apply(e,i),void 0!==s&&(t.exports=s))},212:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(10),n(95),n(48),n(909),n(94),n(140),n(184),n(103),n(168),n(155),n(49),n(89),n(202),n(223),n(176),n(175)],s=function(t,e,n,i,s,a,r,o,l,c,u,d,p,h,f){i.service("qvCaoService",["$document","qvSelectionToolbarService","qvGlobalSelectionsService","qvCaoSelectionService",function(i,g,v,m){var b,y,S;var I=300;var x=new c;var w=new u;var q=false;var C=d.getFlag("CE_PRECEDENTS");var P,k;S=o.createGroup("cao",1);S.registerKeys("ctrl+left",o.preventDefault);S.registerKeys("ctrl+home",o.preventDefault);S.registerKeys("ctrl+right",o.preventDefault);S.registerKeys("ctrl+end",o.preventDefault);S.registerKeys("ctrl+e",o.preventDefault);S.registerKeys("ctrl+c",o.preventDefault);S.registerKeys("ctrl+x",o.preventDefault);S.registerKeys("ctrl+v",o.preventDefault);S.registerKeys("ctrl+z",o.preventDefault);S.registerKeys("ctrl+y",o.preventDefault);S.registerKeys("cmd+shift+z",o.preventDefault);S.registerKeys("del",o.preventDefault);S.registerKeys("ctrl+f",o.preventDefault);S.registerKeys("backspace",o.preventDefault);S.registerKeys("esc",o.preventDefault);S.registerKeys("ctrl+shift+left",E);S.registerKeys("ctrl+shift+right",$);function A(){return{$container:void 0,$containerId:".qv-cao-container",getComponent:function t(){return s},setup:function t(){r.get().then(function(t){a.StateChanged.bind(T);t.enigmaModel.isInModalSelection()&&g.confirm()})},destroy:function t(){a.StateChanged.unbind(T)}}}function T(){(a.isInEditMode()||a.isInAnalysisMode()||a.inObjectView())&&O()}function E(){r.get().then(function(t){f.toggleAssetsPanel(t.id);n.publish("cao/insight/assetsPanelToggled",f.storageObj(t.id).assetsPanel)})}function $(){r.get().then(function(t){f.toggleContextPanel(t.id);n.publish("cao/insight/contextPanelToggled",f.storageObj(t.id).contextPanel)})}function M(n){S.on();y.$container=e.element("<div>");n=n||i;n.find(y.$containerId).append(y.$container);y.$container.showComponent(y.getComponent());y.setup();v.setCaoActive(true);t(".qv-cao").slideDown(I)}function F(){return!(!y||void 0===y.$container)}function O(){S.off();if(!y)return;t(".qv-cao").slideUp(I,function(){if(y.$container){y.$container.remove();y.$container=void 0}y.destroy();y=null;v.setCaoActive(false)})}b={isCaoOpen:F,toggleCao:function t(e){var n=h.getCurrentSheetInfo();m.clearSelection();y||(y=new A);if(F()){O();h.closeAnalysisOverlay(n.sheetId,n.appId);l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"close"});return false}h.openAnalysisOverlay(n.sheetId,n.appId,a.States.insight);M(e);q=false;l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"open"});return true},off:function t(){l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"off"});O()},scrapeApp:function t(){if(C){if(P)return k;P=true;k=x.scrapeApp().then(function(){P=false});return k}return(new p).resolve()},setRefreshIndicatorVisibility:function t(e){q=e},getRefreshIndicatorVisibility:function t(){return q},isInsightsAvailable:function t(){var e=new p;w.isRunning().then(function(){e.resolve(true)},function(){e.resolve(false)});return e.promise}};return b}])}.apply(e,i),void 0!==s&&(t.exports=s))},220:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(155),n(89),n(94),n(91),n(54),n(154),n(147),n(246),n(363),n(273),n(142),n(93),n(275),n(271)],s=function(t,e,n,i,s,a,r,o,l,c,u,d,p){t.service("qvSelectionInsightsService",["qvCaoSearchService","qvCurrentSelectionsService",function(t,h){var f;var g=new e;var v=new l(s.localeDetected,"","","","numeric");var m={};var b=2e4;var y="$";function S(t){return v.format(t,"#.#A")}function I(t){var e=parseFloat(t.toFixed(3));return new Intl.NumberFormat(s.localeDetected,{style:"percent",maximumSignificantDigits:3,minimumSignificantDigits:1}).format(parseFloat(e))}function x(t){var e="";var n=t.measureAggregation;if("avg"==n){var i=S(t.excludedMeasure.qNumber);e=s.get("SelectionInsights.CardSummaryAvg",[i])}else e=Number.isNaN(+t.excludedMeasurePercentage.toFixed(1))?"NaN":s.get("SelectionInsights.CardSummarySum",[I(t.excludedMeasurePercentage.toFixed(1)/100)]);return e}function w(t){var e=t.counts.excluded+t.counts.included;var n=t.counts.excluded;var i=t.measureBreakdown.excluded.num;return n>1?s.get("SelectionInsights.InsightSummaryExcludedLongMulti",[n,e,"<span class='dimLabelDesc'>"+t.dimension+"</span>","<span>"+i+"</span>","<span>"+t.measure+"</span>","<span>"+(t.measureAggregation[0].toUpperCase()+t.measureAggregation.slice(1))+"</span>"]):s.get("SelectionInsights.InsightSummaryExcludedLongSingle",[n,e,"<span class='dimLabelDesc'>"+t.dimension+"</span>","<span>"+i+"</span>","<span>"+t.measure+"</span>","<span>"+(t.measureAggregation[0].toUpperCase()+t.measureAggregation.slice(1))+"</span>"])}function q(t,e){var i=new n;var a={};var r=true;a.counts={};a.counts.excluded=parseFloat(e.analysis.numExcluded);a.counts.included=parseFloat(e.analysis.distinctCount)-parseFloat(e.analysis.numExcluded);a.counts.summary=s.get("SelectionInsights.CardCountsSummary",[a.counts.excluded,a.counts.excluded+a.counts.included,I(a.counts.excluded/(a.counts.excluded+a.counts.included))]);var o="";var l="";var c="";var u="";for(var d in e.analysis.matchRecord.matches){var p=e.analysis.matchRecord.matches[d];if("dimension"==p.slotRole){c=p.field||p.libIdLabel;u=p.libId}else{o=p.field||p.libIdLabel;l=Array.isArray(p.aggr)?p.aggr[0]:p.aggr}}a.dimension=c;a.measure=o;a.measureAggregation=l;a.dimensionId=u;var h=[];var f=t.evaluateEx(e.analysis.aggrMrsExcluded);h.push(f);var g=t.evaluateEx(e.analysis.aggrMrsTotal);h.push(g);var v=t.evaluateEx(e.analysis.aggrMrsIncluded);h.push(v);var y=t.evaluateEx(e.analysis.aggrMrs);h.push(y);var q=setTimeout(function(){var e=false;h.forEach(function(n){if(-1===n.$$state.status){e=true;t.global.cancelRequest(n.requestId).then(function(){})}});e&&i.reject()},b);n.all(h).then(function(t){var n=t[0];var s=t[1];var o=t[2];var l=t[3];a.excludedMeasurePercentage=n.qNumber/s.qNumber*100;a.includedMeasurePercentage=o.qNumber/s.qNumber*100;a.excludedMeasure=n;a.totalMeasure=s;a.includedMeasure=o;a.summaryString=x(a);a.excludedVis={dimension:e.analysis.dim,measure:e.analysis.aggrMrsExcluded};a.includedVis={dimension:e.analysis.dim,measure:e.analysis.aggrMrsIncluded};a.measureBreakdown={};a.measureBreakdown.excluded={num:S(n.qNumber),percentage:a.excludedMeasurePercentage.toFixed(1)};a.measureBreakdown.included={num:S(o.qNumber),percentage:a.includedMeasurePercentage.toFixed(1)};a.selectedMeasure={total:S(s.qNumber),selected:{num:S(l.qNumber),percentage:l.qNumber/s.qNumber*100,qNum:l.qNumber},excluded:{num:S(s.qNumber-l.qNumber),percentage:(s.qNumber-l.qNumber)/s.qNumber*100,qNum:s.qNumber-l.qNumber}};a.summaryStringLong=w(a);m[a.dimension].insight=a;clearTimeout(q);r=a.excludedMeasurePercentage+a.includedMeasurePercentage<100.01&&a.counts.included>=0&&a.counts.excluded>=0&&a.excludedMeasurePercentage+a.includedMeasurePercentage>99.9;a.show=r;i.resolve({show:r,summary:a.summaryString})}).catch(function(t){i.reject(t)});return i.promise}function C(t){return t.getObject(i.model.id).then(function(t){return t.getLayout().then(function(t){return t.qMeta.title})})}function P(t){var e=void 0;t||(e={scope:["libItems"]});return e}function k(t){b=t.runtimeSettings.suggestedTimeout;var e={};var n=null;if(!a.isEmpty(t.appRecommendations)){var i=t.appRecommendations[0].visualizations;var s=[];i.forEach(function(t){if("excludedCompareMsrSelector"!=t.analysis.analysis){var i=parseFloat(t.analysis.numExcluded)/parseFloat(t.analysis.distinctCount);var a=(parseFloat(t.analysis.distinctCount)-parseFloat(t.analysis.numExcluded))/parseFloat(t.analysis.distinctCount);var r="";var o="";var l="";for(var c in t.analysis.matchRecord.matches){var u=t.analysis.matchRecord.matches[c];if("dimension"==u.slotRole)l=u.field||u.libIdLabel;else{r=u.field||u.libIdLabel;o=u.aggr}}var d=true;(0===i||0===a||"avg"!=o&&"sum"!=o)&&(d=false);s.indexOf(l)>-1&&(d=false);if(d){s.push(l);e[l]={vis:t,measure:r,measureAggregation:o}}else;}else for(var p in t.analysis.matchRecord.matches){var h=t.analysis.matchRecord.matches[p];"measure"==h.slotRole&&(n=h.field||h.libIdLabel)}})}return{insights:e,measure:n}}function A(t,e){var n=P(t);var i=[];var a=false;if(void 0!=e)if(e.masterItem){i.push(e.libId);a=true}else i.push(e.qName);return g.getExcludedCompareVisualizations(i,n,a).then(function(t){if(t.__report.appDataModel.memberSelectionDone)return k(t);throw{error:s.get("SelectionInsights.Unsupported")}})}function T(e){var n=[];return e?r.getList().then(function(t){return t.getLayout()}).then(function(t){var e=t.filter(function(t){return t.qTags&&(-1===t.qTags.indexOf("$date")||-1===t.qTags.indexOf("$timestamp"))&&-1===t.qTags.indexOf("$geopoint")&&(t.qTags.indexOf("$numeric")>-1||t.qTags.indexOf("$integer")>-1)});n=n.concat(e);return E()}).then(function(e){n=n.concat(e);var i=t.sortFields(n);return i}):E().then(function(e){var n=t.sortFields(e);return n})}function E(){return o.getList().then(function(t){return t.getLayout().then(function(t){var e=t.map(function(t){return{qName:t.qData.title,classifications:["measure"],masterItem:true,libId:t.qInfo.qId,libIdLabel:t.qMeta.title}});return e})})}function $(t){if(t&&t.selectionsInStates){var e=[];t.selectionsInStates.forEach(function(t){t.qSelectionObject.qSelections.forEach(function(e){e.stateName=t.stateName});e=e.concat(t.qSelectionObject.qSelections)});var n=e.filter(function(t){return!t.qIsHidden});n.forEach(function(t){t.translation=h.translate(t);t.screenReaderLabel=h.translatedScreenReaderLabel(t);t.name=t.qReadableName||t.qField;t.displayStateName=t.stateName===y?s.get(u.DEFAULT_STATE_TRANSLATION):t.stateName});var i=c.groupSelectionsByField(n);var a=i.filter(function(t){return!t.isSingleState});a.forEach(function(t){t.translation=h.translate(t);t.screenReaderLabel=h.translatedScreenReaderLabel(t)});i=i.sort(d.sortSelections);return i}}function M(t,e){var n={qHyperCubeDef:{qDimensions:[{qDef:{qFieldDefs:[e?t.excludedVis.dimension:t.includedVis.dimension],qFieldLabels:[t.dimension]},qNullSuppression:true}],qMeasures:[{qDef:{qDef:e?t.excludedVis.measure:t.includedVis.measure,qLabel:t.measureAggregation[0].toUpperCase()+t.measureAggregation.slice(1)+"("+t.measure+")",qNumFormat:{qType:"F",qnDec:2,qUseThou:0,qFmt:"#,##0.00",qDec:".",qThou:","}},qSortBy:{qSortByAscii:-1}}],qInterColumnSortOrder:[1,0],qInitialDataFetch:[{qTop:0,qHeight:500,qLeft:0,qWidth:2}],columnOrder:[0,1],columnWidths:[197,230],qSuppressMissing:true,qReductionMode:"N",qMode:"S",qPseudoDimPos:-1,qNoOfLeftDims:-1,qMaxStackedCells:5e3},qInfo:{qId:"",qType:"visualization"},visualization:"table"};return p.getApp().then(function(t){return t.enigmaModel.createSessionObject(n).then(function(t){return t})})}function F(t){if(t&&t.selectionsInStates){var e=c.getAllSelectionsInStates(t);var n=e.filter(function(t){return true===t.qOneAndOnlyOne}).map(function(t,e){return"<strong>"+(e?" ":"")+t.name+"</strong>"});if(n.length>0)return{isOneAndOnlyOne:true,items:n};return false}return false}function O(t){if(t&&t.selectionsInStates){var e=c.getAllSelectionsInStates(t);if(e.filter(function(t){return true===t.qLocked}).length>0)return true;return false}return false}f={getSheet:function t(e){return C(e).then(function(t){return t})},getInsightDimensions:function t(e,n){return A(e,n).then(function(t){m={};m=t.insights;var e=[];for(var n in m){var i={};i.excluded=parseFloat(m[n].vis.analysis.numExcluded);i.included=parseFloat(m[n].vis.analysis.distinctCount)-parseFloat(m[n].vis.analysis.numExcluded);i.summary=s.get("SelectionInsights.CardCountsSummary",[i.excluded,i.excluded+i.included,I(i.excluded/(i.excluded+i.included))]);e.push({dimension:n,counts:i,measure:m[n].measure,measureAggregation:m[n].measureAggregation,show:true})}return{insights:e,measure:t.measure}}).catch(function(t){throw t})},getInsightSummary:function t(e,n){var i=m[e].vis;return q(n,i).then(function(t){return t})},getInsightDetails:function t(e){return m[e].insight},clearInsights:function t(){m={}},getMeasures:function t(e){return T(e).then(function(t){return t})},getLocalizedPercentage:function t(e){return I(e)},getSelectionItems:function t(e){return $(e)},getTableVis:function t(e,n){return M(e,n).then(function(t){return t})},isOneAndOnlyOne:function t(e){return F(e)},isHasLockedSelections:function t(e){return O(e)}};return f}])}.apply(e,i),void 0!==s&&(t.exports=s))},2200:function(t,e,n){"use strict";var i,s;!(i=[n(89),n(2201),n(210),n(1664),n(2203)],s=function(t,e,n,i){function s(t){var n=this;return this.getList().then(function(i){return n._filterListByDependencies(i,t).then(function(t){return e.load(t)})})}function a(){var t=[];var e=this;return e._getExternalComponents().then(function(e){t=t.concat(e);return t})}function r(){var t=[];return n.getList().then(function(e){e.forEach(function(e){if(e.data&&"component"===e.data.type){e.path="extensions/"+e.id+"/"+e.id;t.push(e)}});return t})}function o(e,n){var s=new t;var a=[];for(var r in n){var o=n[r];var l=false;var c=r.toLowerCase();e.forEach(function(t){if(t.data.name.toLowerCase()===c&&t.data.version===o){a.push(t);l=true;return}});if(!l){var u="No matching component found for "+r+" (version: "+o+")";i.error(u,"custom components")}}s.resolve(a);return s.promise}return{init:s,getList:a,validateComponent:e.validateComponent,_getExternalComponents:r,_filterListByDependencies:o}}.apply(e,i),void 0!==s&&(t.exports=s))},2201:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(505),n(2202),n(1664),n(498)],s=function(t,e,n,i,s,a){var r={};function o(t){var n=new e;var i=this;var s=[];t.forEach(function(t){s.push(i._requireComponent(t))});e.all(s,function(){n.resolve(r)}).catch(function(){n.resolve()}).finally(function(){n.resolve(r)});return n.promise}function l(n,a){var o=new e;var l=t.getService("$injector");if(a){Array.isArray(a)||(a=[a]);a.forEach(function(e){var s=e;var a=e.componentName;l.has(a+"Directive")||t.directive(a,function(){return i.getComponentWrapper(e.componentName,n)});var o=e.componentName+"."+n.data.version;if(!l.has(o+"Directive")){t.directive(o,function(){return s});r[e.path]=e}});o.resolve(a)}else{var c="Plugin is invalid or missing, '"+JSON.stringify(a)+"'";s.warning(c,"custom component loader");o.resolve({success:false,error:"plugin is invalid or missing"})}return o.promise}function c(t){var n=new e;r[t.path]?n.resolve(r[t.path]):a.loadExtension({path:t.path,libraryInfo:{isThirdParty:true}}).then(function(e){u(e).then(function(i){if(i.success){e.path=t.path;n.resolve(l(t,e))}else{var a=i.error+": '"+t.data.name+"' - "+i.reason;s.error(a,"Custom component loader");n.resolve(i)}})}).catch(function(){n.resolve({success:false,error:"Require failed while loading the custom component: '"+t.data.name+"'."})});return n.promise}function u(t){var i=new e;var s={success:false,error:"Validation for the custom component failed"};t&&t.componentName?n.hasInvalidCharacters(t.componentName)?s.reason="The name must not contain white-spaces or special characters: "+t.componentName:n.isValidCamelCase(t.componentName)?s={success:true,error:void 0}:s.reason="Invalid component name:"+t.componentName+". Only lower camel case is allowed.":s.reason="The property componentName is undefined.";i.resolve(s);return i.promise}return{load:o,validateComponent:u,loadedCustomComponents:r,_requireComponent:c,_registerComponent:l}}.apply(e,i),void 0!==s&&(t.exports=s))},2202:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(1664)],s=function(t,e){function n(t,n){for(var i in n)if(i===t.data.name)return n[i];var s="Component "+t.data.name+" not found in the dependency.";e.warn(s,"custom component wrapper");return}function i(t){var e=t;while(t.length>1&&/[A-Z]/.test(e))e=e.replace(/([a-z\d])([A-Z])/g,function(t,e,n){return e+"-"+n.toLowerCase()});return e}function s(e,s){return{restrict:"E",scope:{},priority:1001,compile:function a(r){var o=r[0].outerHTML;return{pre:function a(r,l){var c,u=r;while(u.$parent){if(u.layout){c=u.layout.dependencies;break}u=u.$parent}var d=c?n(s,c):s.data.version;var p=i(e);var h=o.replace(p,p+"."+d);var f=t.getService("$compile")(h)(r.$parent);l.replaceWith(f)}}}}}return{getComponentWrapper:s,__onlytest__:{_getAppropriateVersion:n,_camelCaseToDash:i}}}.apply(e,i),void 0!==s&&(t.exports=s))},2203:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(2204)],s=function(t){var e=t.getService("qwSysInfoService");var n={restrict:"E",replace:true,componentName:"qwSysInfo",controller:["$scope",function(t){this.sysinfo=function(n){e.loadSysInfos(t,n.content)}}],link:function t(e,n,i,s){s.sysinfo(i)}};t.directive("qwSysInfo",function(){return n})}.apply(e,i),void 0!==s&&(t.exports=s))},2204:function(t,e,n){"use strict";var i,s;!(i=[n(10),n(48),n(284),n(158)],s=function(t,e,n,i){e.service("qwSysInfoService",function(){var e={apps:{scopeName:"apps",api:"qlik",func:"getAppList",resultKeys:[]},sheets:{scopeName:"sheets",api:"app",func:"getList",types:"sheet",resultKeys:["qAppObjectList","qItems"]},fields:{scopeName:"fields",api:"app",func:"getList",types:"FieldList",resultKeys:["qFieldList","qItems"]},masterobjects:{scopeName:"masterobjects",api:"app",func:"getList",types:"masterobject",resultKeys:["qAppObjectList","qItems"]},measures:{scopeName:"measures",api:"app",func:"getList",types:"MeasureList",resultKeys:["qMeasureList","qItems"]},dimensions:{scopeName:"dimensions",api:"app",func:"getList",types:"DimensionList",resultKeys:["qDimensionList","qItems"]},extensions:{scopeName:"extensions:",api:"qUtil",func:"getExtensionList",resultKeys:[]},bookmarks:{scopeName:"bookmarks",api:"app",func:"getList",types:"BookmarkList",resultKeys:["qBookmarkList","qItems"]},currentselections:{scopeName:"currentselections",api:"app",func:"getList",types:"CurrentSelections",resultKeys:["qSelectionObject","qSelections"]},visualizations:{scopeName:"visualizations",api:"app",func:"getList",types:"sheet[sheets]>o_qData>a_cells>f_app.getObject_name[viz]",resultKeys:["qAppObjectList","qItems"],properties:{sheets:{as:"usedOnSheet",values:["qData.title","qData.labelExpression","qInfo","qMeta"]},viz:{values:["footnote","metadata","showTitles","qInfo","subtitle","title","version","visualization","visualizationType","qExtendsId","visualizationTypeIcon[icons:qInfo.qType]"]}}},variables:{scopeName:"variables",api:"app",func:"getList",types:"VariableList",resultKeys:["qVariableList","qItems"]}};e.sheet=e.sheets;e.field=e.fields;e.masterobject=e.masterobjects;e.measure=e.measures;e.dimension=e.dimensions;e.extension=e.extensions;e.bookmark=e.bookmarks;e.currentselection=e.currentselections;e.visualization=e.visualizations;e.variable=e.variables;var s={icons:{chart:"icon-line-chart",table:"icon-table",kpi:"icon-kpi",navigation:"icon-navigation",other:"icon-widget",barchart:"icon-bar-chart","bar-chart-vertical":"icon-bar-chart",linechart:"icon-line-chart",pivottable:"icon-table",components:"icon-components","pie-chart":"icon-pie-chart",filterpane:"icon-filterpane",list:"icon-list","gauge-chart":"icon-gauge-chart","scatter-chart":"icon-scatter-chart","text-image":"icon-text",text:"icon-titletext",map:"icon-map","combo-chart":"icon-combo-chart",extension:"icon-puzzle"}};function a(t){var e="";switch(t){case"app":e=n.currApp();break;case"qUtil":e=i;break;case"qlik":e=n;break}return e}function r(t,e){if(e){e=Array.isArray(e)?e:e.split(",");e.forEach(function(e){o(t,e.trim())})}}function o(t,e,n){if(!e)return;e=e.toLowerCase();var i=l(e);if(!i)return;i.api=a(i.api);t[e]=t[e]||[];if(i.types){var s=i.types.split(">");s.length>0&&(t[e]=[]);var r=s[0];var o="";if(-1!==s[0].indexOf("[")){var u=s[0].indexOf("[")+1;var d=s[0].indexOf("]");r=s[0].substr(0,u-1);o=s[0].substr(u,d-u)}i.api&&i.api[i.func]&&i.api[i.func](r,function(s){c(t,s,e,n||i.resultKeys,i.types.split(">"),i.properties,o)})}else i.api[i.func](function(n){c(t,n,e,i.resultKeys)})}function l(n){var i=void 0;e[n]&&(i=t.copy(e[n]));return i}function c(t,e,n,i,s,a){i.forEach(function(t){e=e[t]});if(s&&s.length>1){u(t,e,n,s,a);return}Object.keys(e).length>0&&(t[n]=e)}function u(e,n,i,s,r,o,l){var c=!l;var h=s[0].substr(0,2);var f="";var g="";var v={};var m="";switch(h){case"o_":f=s[0].substr(2);s=t.copy(s).splice(1);g=n;v=d(f,r,g,n);m=v.props;g=v.newData;l=p(m,g,l);s.length>0?u(e,g,i,s,r,o,l):e[i].push(g);break;case"f_":f=s[0].substr(2);var b=f.indexOf("_");var y=f.substr(0,b).split(".");var S=f.substr(b+1);m="";if(-1!==S.indexOf("[")){var I=S.indexOf("[")+1;var x=S.indexOf("]");m=r[S.substr(I,x-I)];S=S.substr(0,S.indexOf("["))}var w=t.copy(l||{});a(y[0])[y[1]](n[S]).then(function(n){if(m&&m.values){m.as&&(w[m.as]=w[m.as]||{});w=p(m,n,w)}var a=t.copy(s).splice(1);0===a.length?Object.keys(w).length>0&&e[i].push(w):u(e,n,i,a,r,o,w)});break;default:g=n;f="a_"===h?s[0].substr(2):s[0];v=d(f,r,g,n);m=v.props;g=v.newData;g.forEach(function(n){l=l||{};if(m&&m.values){m.as&&(l[m.as]=l[m.as]||{});l=p(m,n,l)}var a=t.copy(s).splice(1);0===a.length?Object.keys(l).length>0&&e[i].push(l):u(e,n,i,a,r,o,c?t.copy(l):l)})}}function d(t,e,n,i){var s;if(-1!==t.indexOf("[")){var a=t.indexOf("[")+1;var r=t.indexOf("]");s=e[t.substr(a,r-a)];var o=t.substr(0,t.indexOf("["));n=i[o]||i}else n=i[t]||i;return{props:s,newData:n}}function p(e,n,i){if(!e)return i;e.values.forEach(function(a){if(-1===a.indexOf(".")&&-1===a.indexOf("["))(n[a]||n.layout&&n.layout[a])&&(e.as?i[e.as][a]=t.copy(n[a]||n.layout[a]):i[a]=t.copy(n[a]||n.layout[a]));else if(-1!==a.indexOf("[")){var r=void 0;var o=a.indexOf("[")+1;var l=a.indexOf("]");var c=a.substr(o,l-o).split(":");var u=a.substr(0,a.indexOf("["));if(c.length>1){var d=c[1].split(".");var p=t.copy(n);d.forEach(function(t){p&&(p=p[t]||p.layout[t])});p&&(r=s[c[0]][p]||s[c[0]]["other"]);e.as?i[e.as][u]=r:i[u]=r}else"self"===c[0]&&(e.as?i[e.as][u]=n:i[u]=n)}else{var h=a.split(".");var f=t.copy(n);var g=1;var v=i[e.as||i];v&&h.forEach(function(t){f=f&&(f[t]||f.layout&&f.layout[t])?f[t]||f.layout[t]:void 0;if(h.length>g){v[t]=v[t]||{};v=v[t];g+=1}else v[t]=f})}});return i}return{loadSysInfos:r}})}.apply(e,i),void 0!==s&&(t.exports=s))},2205:function(t,e,n){"use strict";var i,s;!(i=[n(2206),n(2209),n(89)],s=function(t,e,n){var i=[];var s=new RegExp("(?:min|max)-(?:width|height)");function a(t){return s.test(t)}function r(t){return/\{{[^}]*}}/im.test(t)}function o(t){e.detach(t);for(var n=0;n<t.children.length;++n)o(t.children[n])}function l(t){if(-1===i.indexOf(t.htmlElement.id)||t.template.isDirty&&t.template.isDirty()){e.init();-1===i.indexOf(t.htmlElement.id)&&i.push(t.htmlElement.id)}t.$scope.$on("$destroy",function(){i=i.splice(i.indexOf(t.htmlElement.id),1);o(t.$element[0])})}function c(e,n){var i="#widget"+n+" {"+e+"}";return t.render(i)}function u(t,e,i){if(!e){t.styleElement.innerHTML="";return n.resolve()}return c(e,i).then(function(e){t.styleElement.innerHTML=e.css;a(e.css)&&l(t)})}return{hasAngularBindings:r,updateLess:u,processLess:c,hasElementQuery:a,enableElementQueries:l}}.apply(e,i),void 0!==s&&(t.exports=s))},2206:function(t,e,n){(function(e){var n;var n;(function(e){var n;true;t.exports=e()})(function(){var t,i,s;return function t(e,i,s){function a(o,l){if(!i[o]){if(!e[o]){var c="function"==typeof n&&n;if(!l&&c)return n(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[o]={exports:{}};e[o][0].call(d.exports,function(t){var n=e[o][1][t];return a(n||t)},d,d.exports,t,e,i,s)}return i[o].exports}var r="function"==typeof n&&n;for(var o=0;o<s.length;o++)a(s[o]);return a}({1:[function(t,e,n){var i=t("./utils").addDataAttr,s=t("./browser");e.exports=function(t,e){i(e,s.currentScript(t));void 0===e.isFileProtocol&&(e.isFileProtocol=/^(file|(chrome|safari)(-extension)?|resource|qrc|app):/.test(t.location.protocol));e.async=e.async||false;e.fileAsync=e.fileAsync||false;e.poll=e.poll||(e.isFileProtocol?1e3:1500);e.env=e.env||("127.0.0.1"==t.location.hostname||"0.0.0.0"==t.location.hostname||"localhost"==t.location.hostname||t.location.port&&t.location.port.length>0||e.isFileProtocol?"development":"production");var n=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(t.location.hash);n&&(e.dumpLineNumbers=n[1]);void 0===e.useFileCache&&(e.useFileCache=true);void 0===e.onReady&&(e.onReady=true)}},{"./browser":3,"./utils":9}],2:[function(t,e,n){t("promise/polyfill.js");var i=window.less||{};t("./add-default-options")(window,i);var s=e.exports=t("./index")(window,i);window.less=s;if(i.onReady){/!watch/.test(window.location.hash)&&s.watch();s.registerStylesheetsImmediately();s.pageLoadFinished=s.refresh("development"===s.env)}},{"./add-default-options":1,"./index":7,"promise/polyfill.js":95}],3:[function(t,e,n){var i=t("./utils");e.exports={createCSS:function(t,e,n){var s=n.href||"";var a="less:"+(n.title||i.extractId(s));var r=t.getElementById(a);var o=false;var l=t.createElement("style");l.setAttribute("type","text/css");n.media&&l.setAttribute("media",n.media);l.id=a;if(!l.styleSheet){l.appendChild(t.createTextNode(e));o=null!==r&&r.childNodes.length>0&&l.childNodes.length>0&&r.firstChild.nodeValue===l.firstChild.nodeValue}var c=t.getElementsByTagName("head")[0];if(null===r||false===o){var u=n&&n.nextSibling||null;u?u.parentNode.insertBefore(l,u):c.appendChild(l)}r&&false===o&&r.parentNode.removeChild(r);if(l.styleSheet)try{l.styleSheet.cssText=e}catch(t){throw new Error("Couldn't reassign styleSheet.cssText.")}},currentScript:function(t){var e=t.document;return e.currentScript||function(){var t=e.getElementsByTagName("script");return t[t.length-1]}()}}},{"./utils":9}],4:[function(t,e,n){e.exports=function(t,e,n){var i=null;if("development"!==e.env)try{i="undefined"===typeof t.localStorage?null:t.localStorage}catch(t){}return{setCSS:function(t,e,s){if(i){n.info("saving "+t+" to cache.");try{i.setItem(t,s);i.setItem(t+":timestamp",e)}catch(e){n.error('failed to save "'+t+'" to local storage for caching.')}}},getCSS:function(t,e){var n=i&&i.getItem(t),s=i&&i.getItem(t+":timestamp");if(s&&e.lastModified&&new Date(e.lastModified).valueOf()===new Date(s).valueOf())return n}}}},{}],5:[function(t,e,n){var i=t("./utils"),s=t("./browser");e.exports=function(t,e,n){function a(e,a){var r="less-error-message:"+i.extractId(a||"");var o='<li><label>{line}</label><pre class="{class}">{content}</pre></li>';var l=t.document.createElement("div"),c,u,d=[];var p=e.filename||a;var h=p.match(/([^\/]+(\?.*)?)$/)[1];l.id=r;l.className="less-error-message";u="<h3>"+(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+'</h3><p>in <a href="'+p+'">'+h+"</a> ";var f=function(t,e,n){void 0!==t.extract[e]&&d.push(o.replace(/\{line\}/,(parseInt(t.line,10)||0)+(e-1)).replace(/\{class\}/,n).replace(/\{content\}/,t.extract[e]))};if(e.extract){f(e,0,"");f(e,1,"line");f(e,2,"");u+="on line "+e.line+", column "+(e.column+1)+":</p><ul>"+d.join("")+"</ul>"}e.stack&&(e.extract||n.logLevel>=4)&&(u+="<br/>Stack Trace</br />"+e.stack.split("\n").slice(1).join("<br/>"));l.innerHTML=u;s.createCSS(t.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"});l.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";");"development"===n.env&&(c=setInterval(function(){var e=t.document,n=e.body;if(n){e.getElementById(r)?n.replaceChild(l,e.getElementById(r)):n.insertBefore(l,n.firstChild);clearInterval(c)}},10))}function r(t,e){n.errorReporting&&"html"!==n.errorReporting?"console"===n.errorReporting?u(t,e):"function"===typeof n.errorReporting&&n.errorReporting("add",t,e):a(t,e)}function o(e){var n=t.document.getElementById("less-error-message:"+i.extractId(e));n&&n.parentNode.removeChild(n)}function l(t){}function c(t){n.errorReporting&&"html"!==n.errorReporting?"console"===n.errorReporting?l(t):"function"===typeof n.errorReporting&&n.errorReporting("remove",t):o(t)}function u(t,i){var s="{line} {content}";var a=t.filename||i;var r=[];var o=(t.type||"Syntax")+"Error: "+(t.message||"There is an error in your .less file")+" in "+a+" ";var l=function(t,e,n){void 0!==t.extract[e]&&r.push(s.replace(/\{line\}/,(parseInt(t.line,10)||0)+(e-1)).replace(/\{class\}/,n).replace(/\{content\}/,t.extract[e]))};if(t.extract){l(t,0,"");l(t,1,"line");l(t,2,"");o+="on line "+t.line+", column "+(t.column+1)+":\n"+r.join("\n")}t.stack&&(t.extract||n.logLevel>=4)&&(o+="\nStack Trace\n"+t.stack);e.logger.error(o)}return{add:r,remove:c}}},{"./browser":3,"./utils":9}],6:[function(t,e,n){e.exports=function(e,n){var i=t("../less/environment/abstract-file-manager.js");var s={};function a(){if(window.XMLHttpRequest&&!("file:"===window.location.protocol&&"ActiveXObject"in window))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){n.error("browser doesn't support AJAX.");return null}}var r=function(){};r.prototype=new i;r.prototype.alwaysMakePathsAbsolute=function t(){return true};r.prototype.join=function t(e,n){if(!e)return n;return this.extractUrlParts(n,e).path};r.prototype.doXHR=function t(i,s,r,o){var l=a();var c=e.isFileProtocol?e.fileAsync:e.async;"function"===typeof l.overrideMimeType&&l.overrideMimeType("text/css");n.debug("XHR: Getting '"+i+"'");l.open("GET",i,c);l.setRequestHeader("Accept",s||"text/x-less, text/css; q=0.9, */*; q=0.5");l.send(null);function u(t,e,n){t.status>=200&&t.status<300?e(t.responseText,t.getResponseHeader("Last-Modified")):"function"===typeof n&&n(t.status,i)}e.isFileProtocol&&!e.fileAsync?0===l.status||l.status>=200&&l.status<300?r(l.responseText):o(l.status,i):c?l.onreadystatechange=function(){4==l.readyState&&u(l,r,o)}:u(l,r,o)};r.prototype.supports=function(t,e,n,i){return true};r.prototype.clearFileCache=function(){s={}};r.prototype.loadFile=function t(e,n,i,a,r){n&&!this.isPathAbsolute(e)&&(e=n+e);i=i||{};var o=this.extractUrlParts(e,window.location.href);var l=o.url;if(i.useFileCache&&s[l]){try{var c=s[l];r(null,{contents:c,filename:l,webInfo:{lastModified:new Date}})}catch(t){r({filename:l,message:"Error loading file "+l+" error was "+t.message})}return}this.doXHR(l,i.mime,function t(e,n){s[l]=e;r(null,{contents:e,filename:l,webInfo:{lastModified:n}})},function t(e,n){r({type:"File",message:"'"+n+"' wasn't found ("+e+")",href:l})})};return r}},{"../less/environment/abstract-file-manager.js":14}],7:[function(t,e,n){var i=t("./utils").addDataAttr,s=t("./browser");e.exports=function(e,n){var a=e.document;var r=t("../less")();r.options=n;var o=r.environment,l=t("./file-manager")(n,r.logger),c=new l;o.addFileManager(c);r.FileManager=l;t("./log-listener")(r,n);var u=t("./error-reporting")(e,r,n);var d=r.cache=n.cache||t("./cache")(e,n,r.logger);n.functions&&r.functions.functionRegistry.addMultiple(n.functions);var p=/^text\/(x-)?less$/;function h(t){n.postProcessor&&"function"===typeof n.postProcessor&&(t=n.postProcessor.call(t,t)||t);return t}function f(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function g(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return t.apply(e,i)}}function v(t){var e=a.getElementsByTagName("style"),i;for(var s=0;s<e.length;s++){i=e[s];if(i.type.match(p)){var o=f(n);o.modifyVars=t;var l=i.innerHTML||"";o.filename=a.location.href.replace(/#.*$/,"");r.render(l,o,g(function(t,e,n){if(e)u.add(e,"inline");else{t.type="text/css";t.styleSheet?t.styleSheet.cssText=n.css:t.innerHTML=n.css}},null,i))}}}function m(t,e,s,a,l){var p=f(n);i(p,t);p.mime=t.type;l&&(p.modifyVars=l);function g(n){var i=n.contents,o=n.filename,l=n.webInfo;var f={currentDirectory:c.getPath(o),filename:o,rootFilename:o,relativeUrls:p.relativeUrls};f.entryPath=f.currentDirectory;f.rootpath=p.rootpath||f.currentDirectory;if(l){l.remaining=a;if(!p.modifyVars){var g=d.getCSS(o,l);if(!s&&g){l.local=true;e(null,g,i,t,l,o);return}}}u.remove(o);p.rootFileInfo=f;r.render(i,p,function(n,s){if(n){n.href=o;e(n)}else{s.css=h(s.css);p.modifyVars||d.setCSS(t.href,l.lastModified,s.css);e(null,s.css,i,t,l,o)}})}c.loadFile(t.href,null,p,o,function(t,n){if(t){e(t);return}g(n)})}function b(t,e,n){for(var i=0;i<r.sheets.length;i++)m(r.sheets[i],t,e,r.sheets.length-(i+1),n)}function y(){"development"===r.env&&(r.watchTimer=setInterval(function(){if(r.watchMode){c.clearFileCache();b(function(t,n,i,a,r){t?u.add(t,t.href||a.href):n&&s.createCSS(e.document,n,a)})}},n.poll))}r.watch=function(){if(!r.watchMode){r.env="development";y()}this.watchMode=true;return true};r.unwatch=function(){clearInterval(r.watchTimer);this.watchMode=false;return false};r.registerStylesheetsImmediately=function(){var t=a.getElementsByTagName("link");r.sheets=[];for(var e=0;e<t.length;e++)("stylesheet/less"===t[e].rel||t[e].rel.match(/stylesheet/)&&t[e].type.match(p))&&r.sheets.push(t[e])};r.registerStylesheets=function(){return new Promise(function(t,e){r.registerStylesheetsImmediately();t()})};r.modifyVars=function(t){return r.refresh(true,t,false)};r.refresh=function(t,n,i){(t||i)&&false!==i&&c.clearFileCache();return new Promise(function(i,a){var o,l,c;o=l=new Date;b(function(t,n,d,p,h){if(t){u.add(t,t.href||p.href);a(t);return}h.local?r.logger.info("loading "+p.href+" from cache."):r.logger.info("rendered "+p.href+" successfully.");s.createCSS(e.document,n,p);r.logger.info("css for "+p.href+" generated in "+(new Date-l)+"ms");if(0===h.remaining){c=new Date-o;r.logger.info("less has finished. css generated in "+c+"ms");i({startTime:o,endTime:l,totalMilliseconds:c,sheets:r.sheets.length})}l=new Date},t,n);v(n)})};r.refreshStyles=v;return r}},{"../less":30,"./browser":3,"./cache":4,"./error-reporting":5,"./file-manager":6,"./log-listener":8,"./utils":9}],8:[function(t,e,n){e.exports=function(t,e){var n=4,i=3,s=2,a=1;e.logLevel="undefined"!==typeof e.logLevel?e.logLevel:"development"===e.env?i:a;e.loggers||(e.loggers=[{debug:function(t){e.logLevel>=n&&console.log(t)},info:function(t){e.logLevel>=i&&console.log(t)},warn:function(t){e.logLevel>=s&&console.warn(t)},error:function(t){e.logLevel>=a&&console.error(t)}}]);for(var r=0;r<e.loggers.length;r++)t.logger.addListener(e.loggers[r])}},{}],9:[function(t,e,n){e.exports={extractId:function(t){return t.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/[\?\&]livereload=\w+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")},addDataAttr:function(t,e){for(var n in e.dataset)if(e.dataset.hasOwnProperty(n))if("env"===n||"dumpLineNumbers"===n||"rootpath"===n||"errorReporting"===n)t[n]=e.dataset[n];else try{t[n]=JSON.parse(e.dataset[n])}catch(t){}}}},{}],10:[function(t,e,n){var i={};e.exports=i;var s=function t(e,n,i){if(!e)return;for(var s=0;s<i.length;s++)e.hasOwnProperty(i[s])&&(n[i[s]]=e[i[s]])};var a=["paths","relativeUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","reference","pluginManager"];i.Parse=function(t){s(t,this,a);"string"===typeof this.paths&&(this.paths=[this.paths])};var r=["paths","compress","ieCompat","strictMath","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope"];i.Eval=function(t,e){s(t,this,r);"string"===typeof this.paths&&(this.paths=[this.paths]);this.frames=e||[];this.importantScope=this.importantScope||[]};i.Eval.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]);this.parensStack.push(true)};i.Eval.prototype.outOfParenthesis=function(){this.parensStack.pop()};i.Eval.prototype.isMathOn=function(){return!this.strictMath||this.parensStack&&this.parensStack.length};i.Eval.prototype.isPathRelative=function(t){return!/^(?:[a-z-]+:|\/|#)/i.test(t)};i.Eval.prototype.normalizePath=function(t){var e=t.split("/").reverse(),n;t=[];while(0!==e.length){n=e.pop();switch(n){case".":break;case"..":0===t.length||".."===t[t.length-1]?t.push(n):t.pop();break;default:t.push(n);break}}return t.join("/")}},{}],11:[function(t,e,n){e.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],12:[function(t,e,n){e.exports={colors:t("./colors"),unitConversions:t("./unit-conversions")}},{"./colors":11,"./unit-conversions":13}],13:[function(t,e,n){e.exports={length:{m:1,cm:.01,mm:.001,in:.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}}},{}],14:[function(t,e,n){var i=function(){};i.prototype.getPath=function(t){var e=t.lastIndexOf("?");e>0&&(t=t.slice(0,e));e=t.lastIndexOf("/");e<0&&(e=t.lastIndexOf("\\"));if(e<0)return"";return t.slice(0,e+1)};i.prototype.tryAppendExtension=function(t,e){return/(\.[a-z]*$)|([\?;].*)$/.test(t)?t:t+e};i.prototype.tryAppendLessExtension=function(t){return this.tryAppendExtension(t,".less")};i.prototype.supportsSync=function(){return false};i.prototype.alwaysMakePathsAbsolute=function(){return false};i.prototype.isPathAbsolute=function(t){return/^(?:[a-z-]+:|\/|\\|#)/i.test(t)};i.prototype.join=function(t,e){if(!t)return e;return t+e};i.prototype.pathDiff=function t(e,n){var i=this.extractUrlParts(e),s=this.extractUrlParts(n),a,r,o,l,c="";if(i.hostPart!==s.hostPart)return"";r=Math.max(s.directories.length,i.directories.length);for(a=0;a<r;a++)if(s.directories[a]!==i.directories[a])break;l=s.directories.slice(a);o=i.directories.slice(a);for(a=0;a<l.length-1;a++)c+="../";for(a=0;a<o.length-1;a++)c+=o[a]+"/";return c};i.prototype.extractUrlParts=function t(e,n){var i=/^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,s=e.match(i),a={},r=[],o,l;if(!s)throw new Error("Could not parse sheet href - '"+e+"'");if(n&&(!s[1]||s[2])){l=n.match(i);if(!l)throw new Error("Could not parse page url - '"+n+"'");s[1]=s[1]||l[1]||"";s[2]||(s[3]=l[3]+s[3])}if(s[3]){r=s[3].replace(/\\/g,"/").split("/");for(o=0;o<r.length;o++)if("."===r[o]){r.splice(o,1);o-=1}for(o=0;o<r.length;o++)if(".."===r[o]&&o>0){r.splice(o-1,2);o-=2}}a.hostPart=s[1];a.directories=r;a.path=(s[1]||"")+r.join("/");a.fileUrl=a.path+(s[4]||"");a.url=a.fileUrl+(s[5]||"");return a};e.exports=i},{}],15:[function(t,e,n){var i=t("../logger");var s=function(t,e){this.fileManagers=e||[];t=t||{};var n=["encodeBase64","mimeLookup","charsetLookup","getSourceMapGenerator"],i=[],s=i.concat(n);for(var a=0;a<s.length;a++){var r=s[a],o=t[r];o?this[r]=o.bind(t):a<i.length&&this.warn("missing required function in environment - "+r)}};s.prototype.getFileManager=function(t,e,n,s,a){t||i.warn("getFileManager called with no filename.. Please report this issue. continuing.");null==e&&i.warn("getFileManager called with null directory.. Please report this issue. continuing.");var r=this.fileManagers;n.pluginManager&&(r=[].concat(r).concat(n.pluginManager.getFileManagers()));for(var o=r.length-1;o>=0;o--){var l=r[o];if(l[a?"supportsSync":"supports"](t,e,n,s))return l}return null};s.prototype.addFileManager=function(t){this.fileManagers.push(t)};s.prototype.clearFileManagers=function(){this.fileManagers=[]};e.exports=s},{"../logger":32}],16:[function(t,e,n){var i=t("../tree/color"),s=t("./function-registry");function a(t,e,n){var s=e.alpha,a,r=n.alpha,o,l,c,u=[];l=r+s*(1-r);for(var d=0;d<3;d++){a=e.rgb[d]/255;o=n.rgb[d]/255;c=t(a,o);l&&(c=(r*o+s*(a-r*(a+o-c)))/l);u[d]=255*c}return new i(u,l)}var r={multiply:function(t,e){return t*e},screen:function(t,e){return t+e-t*e},overlay:function(t,e){t*=2;return t<=1?r.multiply(t,e):r.screen(t-1,e)},softlight:function(t,e){var n=1,i=t;if(e>.5){i=1;n=t>.25?Math.sqrt(t):((16*t-12)*t+4)*t}return t-(1-2*e)*i*(n-t)},hardlight:function(t,e){return r.overlay(e,t)},difference:function(t,e){return Math.abs(t-e)},exclusion:function(t,e){return t+e-2*t*e},average:function(t,e){return(t+e)/2},negation:function(t,e){return 1-Math.abs(t+e-1)}};for(var o in r)r.hasOwnProperty(o)&&(a[o]=a.bind(null,r[o]));s.addMultiple(a)},{"../tree/color":49,"./function-registry":21}],17:[function(t,e,n){var i=t("../tree/dimension"),s=t("../tree/color"),a=t("../tree/quoted"),r=t("../tree/anonymous"),o=t("./function-registry"),l;function c(t){return Math.min(1,Math.max(0,t))}function u(t){return l.hsla(t.h,t.s,t.l,t.a)}function d(t){if(t instanceof i)return parseFloat(t.unit.is("%")?t.value/100:t.value);if("number"===typeof t)return t;throw{type:"Argument",message:"color functions take numbers as parameters"}}function p(t,e){return t instanceof i&&t.unit.is("%")?parseFloat(t.value*e/100):d(t)}l={rgb:function(t,e,n){return l.rgba(t,e,n,1)},rgba:function(t,e,n,i){var a=[t,e,n].map(function(t){return p(t,255)});i=d(i);return new s(a,i)},hsl:function(t,e,n){return l.hsla(t,e,n,1)},hsla:function(t,e,n,i){function s(t){t=t<0?t+1:t>1?t-1:t;return 6*t<1?r+(a-r)*t*6:2*t<1?a:3*t<2?r+(a-r)*(2/3-t)*6:r}t=d(t)%360/360;e=c(d(e));n=c(d(n));i=c(d(i));var a=n<=.5?n*(e+1):n+e-n*e;var r=2*n-a;return l.rgba(255*s(t+1/3),255*s(t),255*s(t-1/3),i)},hsv:function(t,e,n){return l.hsva(t,e,n,1)},hsva:function(t,e,n,i){t=d(t)%360/360*360;e=d(e);n=d(n);i=d(i);var s,a;s=Math.floor(t/60%6);a=t/60-s;var r=[n,n*(1-e),n*(1-a*e),n*(1-(1-a)*e)];var o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return l.rgba(255*r[o[s][0]],255*r[o[s][1]],255*r[o[s][2]],i)},hue:function(t){return new i(t.toHSL().h)},saturation:function(t){return new i(100*t.toHSL().s,"%")},lightness:function(t){return new i(100*t.toHSL().l,"%")},hsvhue:function(t){return new i(t.toHSV().h)},hsvsaturation:function(t){return new i(100*t.toHSV().s,"%")},hsvvalue:function(t){return new i(100*t.toHSV().v,"%")},red:function(t){return new i(t.rgb[0])},green:function(t){return new i(t.rgb[1])},blue:function(t){return new i(t.rgb[2])},alpha:function(t){return new i(t.toHSL().a)},luma:function(t){return new i(t.luma()*t.alpha*100,"%")},luminance:function(t){var e=.2126*t.rgb[0]/255+.7152*t.rgb[1]/255+.0722*t.rgb[2]/255;return new i(e*t.alpha*100,"%")},saturate:function(t,e,n){if(!t.rgb)return null;var i=t.toHSL();"undefined"!==typeof n&&"relative"===n.value?i.s+=i.s*e.value/100:i.s+=e.value/100;i.s=c(i.s);return u(i)},desaturate:function(t,e,n){var i=t.toHSL();"undefined"!==typeof n&&"relative"===n.value?i.s-=i.s*e.value/100:i.s-=e.value/100;i.s=c(i.s);return u(i)},lighten:function(t,e,n){var i=t.toHSL();"undefined"!==typeof n&&"relative"===n.value?i.l+=i.l*e.value/100:i.l+=e.value/100;i.l=c(i.l);return u(i)},darken:function(t,e,n){var i=t.toHSL();"undefined"!==typeof n&&"relative"===n.value?i.l-=i.l*e.value/100:i.l-=e.value/100;i.l=c(i.l);return u(i)},fadein:function(t,e,n){var i=t.toHSL();"undefined"!==typeof n&&"relative"===n.value?i.a+=i.a*e.value/100:i.a+=e.value/100;i.a=c(i.a);return u(i)},fadeout:function(t,e,n){var i=t.toHSL();"undefined"!==typeof n&&"relative"===n.value?i.a-=i.a*e.value/100:i.a-=e.value/100;i.a=c(i.a);return u(i)},fade:function(t,e){var n=t.toHSL();n.a=e.value/100;n.a=c(n.a);return u(n)},spin:function(t,e){var n=t.toHSL();var i=(n.h+e.value)%360;n.h=i<0?360+i:i;return u(n)},mix:function(t,e,n){if(!t.toHSL||!e.toHSL){console.log(e.type);console.dir(e)}n||(n=new i(50));var a=n.value/100;var r=2*a-1;var o=t.toHSL().a-e.toHSL().a;var l=((r*o==-1?r:(r+o)/(1+r*o))+1)/2;var c=1-l;var u=[t.rgb[0]*l+e.rgb[0]*c,t.rgb[1]*l+e.rgb[1]*c,t.rgb[2]*l+e.rgb[2]*c];var d=t.alpha*a+e.alpha*(1-a);return new s(u,d)},greyscale:function(t){return l.desaturate(t,new i(100))},contrast:function(t,e,n,i){if(!t.rgb)return null;"undefined"===typeof n&&(n=l.rgba(255,255,255,1));"undefined"===typeof e&&(e=l.rgba(0,0,0,1));if(e.luma()>n.luma()){var s=n;n=e;e=s}i="undefined"===typeof i?.43:d(i);return t.luma()<i?n:e},argb:function(t){return new r(t.toARGB())},color:function(t){if(t instanceof a&&/^#([a-f0-9]{6}|[a-f0-9]{3})$/i.test(t.value))return new s(t.value.slice(1));if(t instanceof s||(t=s.fromKeyword(t.value))){t.value=void 0;return t}throw{type:"Argument",message:"argument must be a color keyword or 3/6 digit hex e.g. #FFF"}},tint:function(t,e){return l.mix(l.rgb(255,255,255),t,e)},shade:function(t,e){return l.mix(l.rgb(0,0,0),t,e)}};o.addMultiple(l)},{"../tree/anonymous":45,"../tree/color":49,"../tree/dimension":55,"../tree/quoted":72,"./function-registry":21}],18:[function(t,e,n){e.exports=function(e){var n=t("../tree/quoted"),i=t("../tree/url"),s=t("./function-registry"),a=function(t,e){return new i(e,t.index,t.currentFileInfo).eval(t.context)},r=t("../logger");s.add("data-uri",function(t,s){if(!s){s=t;t=null}var o=t&&t.value;var l=s.value;var c=this.currentFileInfo;var u=c.relativeUrls?c.currentDirectory:c.entryPath;var d=l.indexOf("#");var p="";if(-1!==d){p=l.slice(d);l=l.slice(0,d)}var h=e.getFileManager(l,u,this.context,e,true);if(!h)return a(this,s);var f=false;if(t)f=/;base64$/.test(o);else{o=e.mimeLookup(l);if("image/svg+xml"===o)f=false;else{var g=e.charsetLookup(o);f=["US-ASCII","UTF-8"].indexOf(g)<0}f&&(o+=";base64")}var v=h.loadFileSync(l,u,this.context,e);if(!v.contents){r.warn("Skipped data-uri embedding of "+l+" because file not found");return a(this,s||t)}var m=v.contents;if(f&&!e.encodeBase64)return a(this,s);m=f?e.encodeBase64(m):encodeURIComponent(m);var b="data:"+o+","+m+p;var y=32768;if(b.length>=y&&false!==this.context.ieCompat){r.warn("Skipped data-uri embedding of "+l+" because its size ("+b.length+" characters) exceeds IE8-safe "+y+" characters!");return a(this,s||t)}return new i(new n('"'+b+'"',b,false,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../logger":32,"../tree/quoted":72,"../tree/url":79,"./function-registry":21}],19:[function(t,e,n){var i=t("../tree/keyword"),s=t("./function-registry");var a={eval:function(){var t=this.value_,e=this.error_;if(e)throw e;if(null!=t)return t?i.True:i.False},value:function(t){this.value_=t},error:function(t){this.error_=t},reset:function(){this.value_=this.error_=null}};s.add("default",a.eval.bind(a));e.exports=a},{"../tree/keyword":64,"./function-registry":21}],20:[function(t,e,n){var i=t("../tree/expression");var s=function(t,e,n,i){this.name=t.toLowerCase();this.index=n;this.context=e;this.currentFileInfo=i;this.func=e.frames[0].functionRegistry.get(this.name)};s.prototype.isValid=function(){return Boolean(this.func)};s.prototype.call=function(t){Array.isArray(t)&&(t=t.filter(function(t){if("Comment"===t.type)return false;return true}).map(function(t){if("Expression"===t.type){var e=t.value.filter(function(t){if("Comment"===t.type)return false;return true});return 1===e.length?e[0]:new i(e)}return t}));return this.func.apply(this,t)};e.exports=s},{"../tree/expression":58}],21:[function(t,e,n){function i(t){return{_data:{},add:function(t,e){t=t.toLowerCase();this._data.hasOwnProperty(t);this._data[t]=e},addMultiple:function(t){Object.keys(t).forEach(function(e){this.add(e,t[e])}.bind(this))},get:function(e){return this._data[e]||t&&t.get(e)},inherit:function(){return i(this)}}}e.exports=i(null)},{}],22:[function(t,e,n){e.exports=function(e){var n={functionRegistry:t("./function-registry"),functionCaller:t("./function-caller")};t("./default");t("./color");t("./color-blending");t("./data-uri")(e);t("./math");t("./number");t("./string");t("./svg")(e);t("./types");return n}},{"./color":17,"./color-blending":16,"./data-uri":18,"./default":19,"./function-caller":20,"./function-registry":21,"./math":24,"./number":25,"./string":26,"./svg":27,"./types":28}],23:[function(t,e,n){var i=t("../tree/dimension");var s=function(){};s._math=function(t,e,n){if(!(n instanceof i))throw{type:"Argument",message:"argument must be a number"};null==e?e=n.unit:n=n.unify();return new i(t(parseFloat(n.value)),e)};e.exports=s},{"../tree/dimension":55}],24:[function(t,e,n){var i=t("./function-registry"),s=t("./math-helper.js");var a={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var r in a)a.hasOwnProperty(r)&&(a[r]=s._math.bind(null,Math[r],a[r]));a.round=function(t,e){var n="undefined"===typeof e?0:e.value;return s._math(function(t){return t.toFixed(n)},null,t)};i.addMultiple(a)},{"./function-registry":21,"./math-helper.js":23}],25:[function(t,e,n){var i=t("../tree/dimension"),s=t("../tree/anonymous"),a=t("./function-registry"),r=t("./math-helper.js");var o=function(t,e){e=Array.prototype.slice.call(e);switch(e.length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var n,a,r,o,l,c,u,d,p=[],h={};for(n=0;n<e.length;n++){r=e[n];if(!(r instanceof i)){Array.isArray(e[n].value)&&Array.prototype.push.apply(e,Array.prototype.slice.call(e[n].value));continue}o=""===r.unit.toString()&&void 0!==d?new i(r.value,d).unify():r.unify();c=""===o.unit.toString()&&void 0!==u?u:o.unit.toString();u=""!==c&&void 0===u||""!==c&&""===p[0].unify().unit.toString()?c:u;d=""!==c&&void 0===d?r.unit.toString():d;a=void 0!==h[""]&&""!==c&&c===u?h[""]:h[c];if(void 0===a){if(void 0!==u&&c!==u)throw{type:"Argument",message:"incompatible types"};h[c]=p.length;p.push(r);continue}l=""===p[a].unit.toString()&&void 0!==d?new i(p[a].value,d).unify():p[a].unify();(t&&o.value<l.value||!t&&o.value>l.value)&&(p[a]=r)}if(1==p.length)return p[0];e=p.map(function(t){return t.toCSS(this.context)}).join(this.context.compress?",":", ");return new s((t?"min":"max")+"("+e+")")};a.addMultiple({min:function(){return o(true,arguments)},max:function(){return o(false,arguments)},convert:function(t,e){return t.convertTo(e.value)},pi:function(){return new i(Math.PI)},mod:function(t,e){return new i(t.value%e.value,t.unit)},pow:function(t,e){if("number"===typeof t&&"number"===typeof e){t=new i(t);e=new i(e)}else if(!(t instanceof i)||!(e instanceof i))throw{type:"Argument",message:"arguments must be numbers"};return new i(Math.pow(t.value,e.value),t.unit)},percentage:function(t){var e=r._math(function(t){return 100*t},"%",t);return e}})},{"../tree/anonymous":45,"../tree/dimension":55,"./function-registry":21,"./math-helper.js":23}],26:[function(t,e,n){var i=t("../tree/quoted"),s=t("../tree/anonymous"),a=t("../tree/javascript"),r=t("./function-registry");r.addMultiple({e:function(t){return new s(t instanceof a?t.evaluated:t.value)},escape:function(t){return new s(encodeURI(t.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(t,e,n,s){var a=t.value;n="Quoted"===n.type?n.value:n.toCSS();a=a.replace(new RegExp(e.value,s?s.value:""),n);return new i(t.quote||"",a,t.escaped)},"%":function(t){var e=Array.prototype.slice.call(arguments,1),n=t.value;for(var s=0;s<e.length;s++)n=n.replace(/%[sda]/i,function(t){var n="Quoted"===e[s].type&&t.match(/s/i)?e[s].value:e[s].toCSS();return t.match(/[A-Z]$/)?encodeURIComponent(n):n});n=n.replace(/%%/g,"%");return new i(t.quote||"",n,t.escaped)}})},{"../tree/anonymous":45,"../tree/javascript":62,"../tree/quoted":72,"./function-registry":21}],27:[function(t,e,n){e.exports=function(e){var n=t("../tree/dimension"),i=t("../tree/color"),s=t("../tree/expression"),a=t("../tree/quoted"),r=t("../tree/url"),o=t("./function-registry");o.add("svg-gradient",function(t){var e,o,l="linear",c='x="0" y="0" width="1" height="1"',u={compress:false},d,p=t.toCSS(u),h,f,g,v,m;function b(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position] or direction, color list"}}if(2==arguments.length){arguments[1].value.length<2&&b();e=arguments[1].value}else arguments.length<3?b():e=Array.prototype.slice.call(arguments,1);switch(p){case"to bottom":o='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":o='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":o='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":o='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":l="radial";o='cx="50%" cy="50%" r="75%"';c='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}d='<?xml version="1.0" ?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><'+l+'Gradient id="gradient" gradientUnits="userSpaceOnUse" '+o+">";for(h=0;h<e.length;h+=1){if(e[h]instanceof s){f=e[h].value[0];g=e[h].value[1]}else{f=e[h];g=void 0}f instanceof i&&((0===h||h+1===e.length)&&void 0===g||g instanceof n)||b();v=g?g.toCSS(u):0===h?"0%":"100%";m=f.alpha;d+='<stop offset="'+v+'" stop-color="'+f.toRGB()+'"'+(m<1?' stop-opacity="'+m+'"':"")+"/>"}d+="</"+l+"Gradient><rect "+c+' fill="url(#gradient)" /></svg>';d=encodeURIComponent(d);d="data:image/svg+xml,"+d;return new r(new a("'"+d+"'",d,false,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../tree/color":49,"../tree/dimension":55,"../tree/expression":58,"../tree/quoted":72,"../tree/url":79,"./function-registry":21}],28:[function(t,e,n){var i=t("../tree/keyword"),s=t("../tree/detached-ruleset"),a=t("../tree/dimension"),r=t("../tree/color"),o=t("../tree/quoted"),l=t("../tree/anonymous"),c=t("../tree/url"),u=t("../tree/operation"),d=t("./function-registry");var p=function(t,e){return t instanceof e?i.True:i.False},h=function(t,e){if(void 0===e)throw{type:"Argument",message:"missing the required second argument to isunit."};e="string"===typeof e.value?e.value:e;if("string"!==typeof e)throw{type:"Argument",message:"Second argument to isunit should be a unit or a string."};return t instanceof a&&t.unit.is(e)?i.True:i.False},f=function(t){var e=Array.isArray(t.value)?t.value:Array(t);return e};d.addMultiple({isruleset:function(t){return p(t,s)},iscolor:function(t){return p(t,r)},isnumber:function(t){return p(t,a)},isstring:function(t){return p(t,o)},iskeyword:function(t){return p(t,i)},isurl:function(t){return p(t,c)},ispixel:function(t){return h(t,"px")},ispercentage:function(t){return h(t,"%")},isem:function(t){return h(t,"em")},isunit:h,unit:function(t,e){if(!(t instanceof a))throw{type:"Argument",message:"the first argument to unit must be a number"+(t instanceof u?". Have you forgotten parenthesis?":"")};e=e?e instanceof i?e.value:e.toCSS():"";return new a(t.value,e)},"get-unit":function(t){return new l(t.unit)},extract:function(t,e){e=e.value-1;return f(t)[e]},length:function(t){return new a(f(t).length)}})},{"../tree/anonymous":45,"../tree/color":49,"../tree/detached-ruleset":54,"../tree/dimension":55,"../tree/keyword":64,"../tree/operation":70,"../tree/quoted":72,"../tree/url":79,"./function-registry":21}],29:[function(t,e,n){var i=t("./contexts"),s=t("./parser/parser"),a=t("./plugins/function-importer");e.exports=function(t){var e=function(t,e){this.rootFilename=e.filename;this.paths=t.paths||[];this.contents={};this.contentsIgnoredChars={};this.mime=t.mime;this.error=null;this.context=t;this.queue=[];this.files={}};e.prototype.push=function(e,n,r,o,l){var c=this;this.queue.push(e);var u=function(t,n,i){c.queue.splice(c.queue.indexOf(e),1);var s=i===c.rootFilename;if(o.optional&&t)l(null,{rules:[]},false,null);else{c.files[i]=n;t&&!c.error&&(c.error=t);l(t,n,s,i)}};var d={relativeUrls:this.context.relativeUrls,entryPath:r.entryPath,rootpath:r.rootpath,rootFilename:r.rootFilename};var p=t.getFileManager(e,r.currentDirectory,this.context,t);if(!p){u({message:"Could not find a file-manager for "+e});return}n&&(e=p.tryAppendExtension(e,o.plugin?".js":".less"));var h=function(t){var e=t.filename,n=t.contents.replace(/^\uFEFF/,"");d.currentDirectory=p.getPath(e);if(d.relativeUrls){d.rootpath=p.join(c.context.rootpath||"",p.pathDiff(d.currentDirectory,d.entryPath));!p.isPathAbsolute(d.rootpath)&&p.alwaysMakePathsAbsolute()&&(d.rootpath=p.join(d.entryPath,d.rootpath))}d.filename=e;var l=new i.Parse(c.context);l.processImports=false;c.contents[e]=n;(r.reference||o.reference)&&(d.reference=true);o.plugin?new a(l,d).eval(n,function(t,n){u(t,n,e)}):o.inline?u(null,n,e):new s(l,c,d).parse(n,function(t,n){u(t,n,e)})};var f=p.loadFile(e,r.currentDirectory,this.context,t,function(t,e){t?u(t):h(e)});f&&f.then(h,u)};return e}},{"./contexts":10,"./parser/parser":37,"./plugins/function-importer":39}],30:[function(t,e,n){e.exports=function(e,n){var i,s,a,r,o;var l={version:[2,5,3],data:t("./data"),tree:t("./tree"),Environment:o=t("./environment/environment"),AbstractFileManager:t("./environment/abstract-file-manager"),environment:e=new o(e,n),visitors:t("./visitors"),Parser:t("./parser/parser"),functions:t("./functions")(e),contexts:t("./contexts"),SourceMapOutput:i=t("./source-map-output")(e),SourceMapBuilder:s=t("./source-map-builder")(i,e),ParseTree:a=t("./parse-tree")(s),ImportManager:r=t("./import-manager")(e),render:t("./render")(e,a,r),parse:t("./parse")(e,a,r),LessError:t("./less-error"),transformTree:t("./transform-tree"),utils:t("./utils"),PluginManager:t("./plugin-manager"),logger:t("./logger")};return l}},{"./contexts":10,"./data":12,"./environment/abstract-file-manager":14,"./environment/environment":15,"./functions":22,"./import-manager":29,"./less-error":31,"./logger":32,"./parse":34,"./parse-tree":33,"./parser/parser":37,"./plugin-manager":38,"./render":40,"./source-map-builder":41,"./source-map-output":42,"./transform-tree":43,"./tree":61,"./utils":82,"./visitors":86}],31:[function(t,e,n){var i=t("./utils");var s=e.exports=function t(e,n,s){Error.call(this);var a=e.filename||s;if(n&&a){var r=n.contents[a],o=i.getLocation(e.index,r),l=o.line,c=o.column,u=e.call&&i.getLocation(e.call,r).line,d=r.split("\n");this.type=e.type||"Syntax";this.filename=a;this.index=e.index;this.line="number"===typeof l?l+1:null;this.callLine=u+1;this.callExtract=d[u];this.column=c;this.extract=[d[l-1],d[l],d[l+1]]}this.message=e.message;this.stack=e.stack};if("undefined"===typeof Object.create){var a=function(){};a.prototype=Error.prototype;s.prototype=new a}else s.prototype=Object.create(Error.prototype);s.prototype.constructor=s},{"./utils":82}],32:[function(t,e,n){e.exports={error:function(t){this._fireEvent("error",t)},warn:function(t){this._fireEvent("warn",t)},info:function(t){this._fireEvent("info",t)},debug:function(t){this._fireEvent("debug",t)},addListener:function(t){this._listeners.push(t)},removeListener:function(t){for(var e=0;e<this._listeners.length;e++)if(this._listeners[e]===t){this._listeners.splice(e,1);return}},_fireEvent:function(t,e){for(var n=0;n<this._listeners.length;n++){var i=this._listeners[n][t];i&&i(e)}},_listeners:[]}},{}],33:[function(t,e,n){var i=t("./less-error"),s=t("./transform-tree"),a=t("./logger");e.exports=function(t){var e=function(t,e){this.root=t;this.imports=e};e.prototype.toCSS=function(e){var n,r={},o;try{n=s(this.root,e)}catch(t){throw new i(t,this.imports)}try{var l=Boolean(e.compress);l&&a.warn("The compress option has been deprecated. We recommend you use a dedicated css minifier, for instance see less-plugin-clean-css.");var c={compress:l,dumpLineNumbers:e.dumpLineNumbers,strictUnits:Boolean(e.strictUnits),numPrecision:8};if(e.sourceMap){o=new t(e.sourceMap);r.css=o.toCSS(n,c,this.imports)}else r.css=n.toCSS(c)}catch(t){throw new i(t,this.imports)}if(e.pluginManager){var u=e.pluginManager.getPostProcessors();for(var d=0;d<u.length;d++)r.css=u[d].process(r.css,{sourceMap:o,options:e,imports:this.imports})}e.sourceMap&&(r.map=o.getExternalSourceMap());r.imports=[];for(var p in this.imports.files)this.imports.files.hasOwnProperty(p)&&p!==this.imports.rootFilename&&r.imports.push(p);return r};return e}},{"./less-error":31,"./logger":32,"./transform-tree":43}],34:[function(t,e,n){var i,s=t("./contexts"),a=t("./parser/parser"),r=t("./plugin-manager");e.exports=function(e,n,o){var l=function(e,n,c){n=n||{};if("function"===typeof n){c=n;n={}}if(!c){i||(i="undefined"===typeof Promise?t("promise"):Promise);var u=this;return new i(function(t,i){l.call(u,e,n,function(e,n){e?i(e):t(n)})})}var d,p,h=new r(this);h.addPlugins(n.plugins);n.pluginManager=h;d=new s.Parse(n);if(n.rootFileInfo)p=n.rootFileInfo;else{var f=n.filename||"input";var g=f.replace(/[^\/\\]*$/,"");p={filename:f,relativeUrls:d.relativeUrls,rootpath:d.rootpath||"",currentDirectory:g,entryPath:g,rootFilename:f};p.rootpath&&"/"!==p.rootpath.slice(-1)&&(p.rootpath+="/")}var v=new o(d,p);new a(d,v,p).parse(e,function(t,e){if(t)return c(t);c(null,e,v,n)},n)};return l}},{"./contexts":10,"./parser/parser":37,"./plugin-manager":38,promise:void 0}],35:[function(t,e,n){e.exports=function(t,e){var n=t.length,i=0,s=0,a,r,o,l,c=[],u=0,d,p,h,f,g;function v(e){var n=d-u;if(n<512&&!e||!n)return;c.push(t.slice(u,d+1));u=d+1}for(d=0;d<n;d++){h=t.charCodeAt(d);if(h>=97&&h<=122||h<34)continue;switch(h){case 40:s++;r=d;continue;case 41:if(--s<0)return e("missing opening `(`",d);continue;case 59:s||v();continue;case 123:i++;a=d;continue;case 125:if(--i<0)return e("missing opening `{`",d);i||s||v();continue;case 92:if(d<n-1){d++;continue}return e("unescaped `\\`",d);case 34:case 39:case 96:g=0;p=d;for(d+=1;d<n;d++){f=t.charCodeAt(d);if(f>96)continue;if(f==h){g=1;break}if(92==f){if(d==n-1)return e("unescaped `\\`",d);d++}}if(g)continue;return e("unmatched `"+String.fromCharCode(h)+"`",p);case 47:if(s||d==n-1)continue;f=t.charCodeAt(d+1);if(47==f)for(d+=2;d<n;d++){f=t.charCodeAt(d);if(f<=13&&(10==f||13==f))break}else if(42==f){o=p=d;for(d+=2;d<n-1;d++){f=t.charCodeAt(d);125==f&&(l=d);if(42!=f)continue;if(47==t.charCodeAt(d+1))break}if(d==n-1)return e("missing closing `*/`",p);d++}continue;case 42:if(d<n-1&&47==t.charCodeAt(d+1))return e("unmatched `/*`",d);continue}}if(0!==i)return e(o>a&&l>o?"missing closing `}` or `*/`":"missing closing `}`",a);if(0!==s)return e("missing closing `)`",r);v(true);return c}},{}],36:[function(t,e,n){var i=t("./chunker");e.exports=function(){var t,e,n=[],s,a,r,o,l,c={};c.save=function(){l=c.i;n.push({current:o,i:c.i,j:e})};c.restore=function(t){if(c.i>s||c.i===s&&t&&!a){s=c.i;a=t}var i=n.pop();o=i.current;l=c.i=i.i;e=i.j};c.forget=function(){n.pop()};c.isWhitespace=function(e){var n=c.i+(e||0),i=t.charCodeAt(n);return i===u||i===h||i===d||i===p};c.$re=function(t){if(c.i>l){o=o.slice(c.i-l);l=c.i}var e=t.exec(o);if(!e)return null;b(e[0].length);if("string"===typeof e)return e;return 1===e.length?e[0]:e};c.$char=function(e){if(t.charAt(c.i)!==e)return null;b(1);return e};c.$str=function(e){var n=e.length;for(var i=0;i<n;i++)if(t.charAt(c.i+i)!==e.charAt(i))return null;b(n);return e};c.$quoted=function(){var e=t.charAt(c.i);if("'"!==e&&'"'!==e)return;var n=t.length,i=c.i;for(var s=1;s+i<n;s++){var a=t.charAt(s+i);switch(a){case"\\":s++;continue;case"\r":case"\n":break;case e:var r=t.substr(i,s+1);b(s+1);return r;default:}}return null};var u=32,d=9,p=10,h=13,f=43,g=44,v=47,m=57;c.autoCommentAbsorb=true;c.commentStore=[];c.finished=false;var b=function(n){var i=c.i,s=e,a=c.i-l,f=c.i+o.length-a,g=c.i+=n,m=t,y,S,I;for(;c.i<f;c.i++){y=m.charCodeAt(c.i);if(c.autoCommentAbsorb&&y===v){S=m.charAt(c.i+1);if("/"===S){I={index:c.i,isLineComment:true};var x=m.indexOf("\n",c.i+2);x<0&&(x=f);c.i=x;I.text=m.substr(I.i,c.i-I.i);c.commentStore.push(I);continue}if("*"===S){var w=m.indexOf("*/",c.i+2);if(w>=0){I={index:c.i,text:m.substr(c.i,w+2-c.i),isLineComment:false};c.i+=I.text.length-1;c.commentStore.push(I);continue}}break}if(y!==u&&y!==p&&y!==d&&y!==h)break}o=o.slice(n+c.i-g+a);l=c.i;if(!o.length){if(e<r.length-1){o=r[++e];b(0);return true}c.finished=true}return i!==c.i||s!==e};c.peek=function(e){if("string"===typeof e){for(var n=0;n<e.length;n++)if(t.charAt(c.i+n)!==e.charAt(n))return false;return true}return e.test(o)};c.peekChar=function(e){return t.charAt(c.i)===e};c.currentChar=function(){return t.charAt(c.i)};c.getInput=function(){return t};c.peekNotNumeric=function(){var e=t.charCodeAt(c.i);return e>m||e<f||e===v||e===g};c.start=function(n,a,u){t=n;c.i=e=l=s=0;r=a?i(n,u):[n];o=r[0];b(0)};c.end=function(){var e,n=c.i>=t.length;if(c.i<s){e=a;c.i=s}return{isFinished:n,furthest:c.i,furthestPossibleErrorMessage:e,furthestReachedEnd:c.i>=t.length-1,furthestChar:t[c.i]}};return c}},{"./chunker":35}],37:[function(t,e,n){var i=t("../less-error"),s=t("../tree"),a=t("../visitors"),r=t("./parser-input"),o=t("../utils");var l=function t(e,n,l){var c,u=r();function d(t,e,n){var i="[object Function]"===Object.prototype.toString.call(t)?t.call(c):u.$re(t);if(i)return i;h(e||("string"===typeof t?"expected '"+t+"' got '"+u.currentChar()+"'":"unexpected token"))}function p(t,e){if(u.$char(t))return t;h(e||"expected '"+t+"' got '"+u.currentChar()+"'")}function h(t,e){throw new i({index:u.i,filename:l.filename,type:e||"Syntax",message:t},n)}function f(t){var e=l.filename;return{lineNumber:o.getLocation(t,u.getInput()).line+1,fileName:e}}return{parse:function(r,o,c){var d,p=null,h,f,g,v="";h=c&&c.globalVars?t.serializeVars(c.globalVars)+"\n":"";f=c&&c.modifyVars?"\n"+t.serializeVars(c.modifyVars):"";if(e.pluginManager){var m=e.pluginManager.getPreProcessors();for(var b=0;b<m.length;b++)r=m[b].process(r,{context:e,imports:n,fileInfo:l})}if(h||c&&c.banner){v=(c&&c.banner?c.banner:"")+h;g=n.contentsIgnoredChars;g[l.filename]=g[l.filename]||0;g[l.filename]+=v.length}r=r.replace(/\r\n?/g,"\n");r=v+r.replace(/^\uFEFF/,"")+f;n.contents[l.filename]=r;try{u.start(r,e.chunkInput,function t(e,s){throw new i({index:s,type:"Parse",message:e,filename:l.filename},n)});d=new s.Ruleset(null,this.parsers.primary());d.root=true;d.firstRoot=true}catch(t){return o(new i(t,n,l.filename))}var y=u.end();if(!y.isFinished){var S=y.furthestPossibleErrorMessage;if(!S){S="Unrecognised input";"}"===y.furthestChar?S+=". Possibly missing opening '{'":")"===y.furthestChar?S+=". Possibly missing opening '('":y.furthestReachedEnd&&(S+=". Possibly missing something")}p=new i({type:"Parse",message:S,index:y.furthest,filename:l.filename},n)}var I=function(t){t=p||t||n.error;if(t){t instanceof i||(t=new i(t,n,l.filename));return o(t)}return o(null,d)};if(false===e.processImports)return I();new a.ImportVisitor(n,I).run(d)},parsers:c={primary:function(){var t=this.mixin,e=[],n;while(true){while(true){n=this.comment();if(!n)break;e.push(n)}if(u.finished)break;if(u.peek("}"))break;n=this.extendRule();if(n){e=e.concat(n);continue}n=t.definition()||this.rule()||this.ruleset()||t.call()||this.rulesetCall()||this.directive();if(n)e.push(n);else{var i=false;while(u.$char(";"))i=true;if(!i)break}}return e},comment:function(){if(u.commentStore.length){var t=u.commentStore.shift();return new s.Comment(t.text,t.isLineComment,t.index,l)}},entities:{quoted:function(){var t,e=u.i,n=false;u.save();u.$char("~")&&(n=true);t=u.$quoted();if(!t){u.restore();return}u.forget();return new s.Quoted(t.charAt(0),t.substr(1,t.length-2),n,e,l)},keyword:function(){var t=u.$char("%")||u.$re(/^[_A-Za-z-][_A-Za-z0-9-]*/);if(t)return s.Color.fromKeyword(t)||new s.Keyword(t)},call:function(){var t,e,n,i,a=u.i;if(u.peek(/^url\(/i))return;u.save();t=u.$re(/^([\w-]+|%|progid:[\w\.]+)\(/);if(!t){u.forget();return}t=t[1];e=t.toLowerCase();if("alpha"===e){i=c.alpha();if(i){u.forget();return i}}n=this.arguments();if(!u.$char(")")){u.restore("Could not parse call arguments or missing ')'");return}u.forget();return new s.Call(t,n,a,l)},arguments:function(){var t=[],e;while(true){e=this.assignment()||c.expression();if(!e)break;t.push(e);if(!u.$char(","))break}return t},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var t,e;u.save();t=u.$re(/^\w+(?=\s?=)/i);if(!t){u.restore();return}if(!u.$char("=")){u.restore();return}e=c.entity();if(e){u.forget();return new s.Assignment(t,e)}u.restore()},url:function(){var t,e=u.i;u.autoCommentAbsorb=false;if(!u.$str("url(")){u.autoCommentAbsorb=true;return}t=this.quoted()||this.variable()||u.$re(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"";u.autoCommentAbsorb=true;p(")");return new s.URL(null!=t.value||t instanceof s.Variable?t:new s.Anonymous(t),e,l)},variable:function(){var t,e=u.i;if("@"===u.currentChar()&&(t=u.$re(/^@@?[\w-]+/)))return new s.Variable(t,e,l)},variableCurly:function(){var t,e=u.i;if("@"===u.currentChar()&&(t=u.$re(/^@\{([\w-]+)\}/)))return new s.Variable("@"+t[1],e,l)},color:function(){var t;if("#"===u.currentChar()&&(t=u.$re(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))){var e=t.input.match(/^#([\w]+).*/);e=e[1];e.match(/^[A-Fa-f0-9]+$/)||h("Invalid HEX color code");return new s.Color(t[1],void 0,"#"+e)}},dimension:function(){if(u.peekNotNumeric())return;var t=u.$re(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/i);if(t)return new s.Dimension(t[1],t[2])},unicodeDescriptor:function(){var t;t=u.$re(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/);if(t)return new s.UnicodeDescriptor(t[0])},javascript:function(){var t,e=u.i;u.save();var n=u.$char("~");var i=u.$char("`");if(!i){u.restore();return}t=u.$re(/^[^`]*`/);if(t){u.forget();return new s.JavaScript(t.substr(0,t.length-1),Boolean(n),e,l)}u.restore("invalid javascript definition")}},variable:function(){var t;if("@"===u.currentChar()&&(t=u.$re(/^(@[\w-]+)\s*:/)))return t[1]},rulesetCall:function(){var t;if("@"===u.currentChar()&&(t=u.$re(/^(@[\w-]+)\s*\(\s*\)\s*;/)))return new s.RulesetCall(t[1])},extend:function(t){var e,n,i=u.i,a,r,o;if(!u.$str(t?"&:extend(":":extend("))return;do{a=null;e=null;while(!(a=u.$re(/^(all)(?=\s*(\)|,))/))){n=this.element();if(!n)break;e?e.push(n):e=[n]}a=a&&a[1];e||h("Missing target selector for :extend().");o=new s.Extend(new s.Selector(e),a,i);r?r.push(o):r=[o]}while(u.$char(","));d(/^\)/);t&&d(/^;/);return r},extendRule:function(){return this.extend(true)},mixin:{call:function(){var t=u.currentChar(),e=false,n=u.i,i,a,r,o,d,h;if("."!==t&&"#"!==t)return;u.save();while(true){i=u.i;o=u.$re(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/);if(!o)break;r=new s.Element(d,o,i,l);a?a.push(r):a=[r];d=u.$char(">")}if(a){if(u.$char("(")){h=this.args(true).args;p(")")}c.important()&&(e=true);if(c.end()){u.forget();return new s.mixin.Call(a,h,n,l,e)}}u.restore()},args:function(t){var e=c.entities,n={args:null,variadic:false},i=[],a=[],r=[],o,l,d,p,f,g,v;u.save();while(true){if(t)g=c.detachedRuleset()||c.expression();else{u.commentStore.length=0;if(u.$str("...")){n.variadic=true;u.$char(";")&&!o&&(o=true);(o?a:r).push({variadic:true});break}g=e.variable()||e.literal()||e.keyword()}if(!g)break;p=null;g.throwAwayComments&&g.throwAwayComments();f=g;var m=null;t?g.value&&1==g.value.length&&(m=g.value[0]):m=g;if(m&&m instanceof s.Variable)if(u.$char(":")){if(i.length>0){o&&h("Cannot mix ; and , as delimiter types");l=true}f=c.detachedRuleset()||c.expression();if(!f){if(!t){u.restore();n.args=[];return n}h("could not understand value for named argument")}p=d=m.name}else if(u.$str("...")){if(!t){n.variadic=true;u.$char(";")&&!o&&(o=true);(o?a:r).push({name:g.name,variadic:true});break}v=true}else if(!t){d=p=m.name;f=null}f&&i.push(f);r.push({name:p,value:f,expand:v});if(u.$char(","))continue;if(u.$char(";")||o){l&&h("Cannot mix ; and , as delimiter types");o=true;i.length>1&&(f=new s.Value(i));a.push({name:d,value:f,expand:v});d=null;i=[];l=false}}u.forget();n.args=o?a:r;return n},definition:function(){var t,e=[],n,i,a,r=false;if("."!==u.currentChar()&&"#"!==u.currentChar()||u.peek(/^[^{]*\}/))return;u.save();n=u.$re(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/);if(n){t=n[1];var o=this.args(false);e=o.args;r=o.variadic;if(!u.$char(")")){u.restore("Missing closing ')'");return}u.commentStore.length=0;u.$str("when")&&(a=d(c.conditions,"expected condition"));i=c.block();if(i){u.forget();return new s.mixin.Definition(t,e,i,a,r)}u.restore()}else u.forget()}},entity:function(){var t=this.entities;return this.comment()||t.literal()||t.variable()||t.url()||t.call()||t.keyword()||t.javascript()},end:function(){return u.$char(";")||u.peek("}")},alpha:function(){var t;if(!u.$re(/^opacity=/i))return;t=u.$re(/^\d+/);t||(t=d(this.entities.variable,"Could not parse alpha"));p(")");return new s.Alpha(t)},element:function(){var t,e,n,i=u.i;e=this.combinator();t=u.$re(/^(?:\d+\.\d+|\d+)%/)||u.$re(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||u.$char("*")||u.$char("&")||this.attribute()||u.$re(/^\([^&()@]+\)/)||u.$re(/^[\.#:](?=@)/)||this.entities.variableCurly();if(!t){u.save();if(u.$char("("))if((n=this.selector())&&u.$char(")")){t=new s.Paren(n);u.forget()}else u.restore("Missing closing ')'");else u.forget()}if(t)return new s.Element(e,t,i,l)},combinator:function(){var t=u.currentChar();if("/"===t){u.save();var e=u.$re(/^\/[a-z]+\//i);if(e){u.forget();return new s.Combinator(e)}u.restore()}if(">"===t||"+"===t||"~"===t||"|"===t||"^"===t){u.i++;if("^"===t&&"^"===u.currentChar()){t="^^";u.i++}while(u.isWhitespace())u.i++;return new s.Combinator(t)}return u.isWhitespace(-1)?new s.Combinator(" "):new s.Combinator(null)},lessSelector:function(){return this.selector(true)},selector:function(t){var e=u.i,n,i,a,r,o,c,p;while(t&&(i=this.extend())||t&&(c=u.$str("when"))||(r=this.element())){if(c)p=d(this.conditions,"expected condition");else if(p)h("CSS guard can only be used at the end of selector");else if(i)o=o?o.concat(i):i;else{o&&h("Extend can only be used at the end of selector");a=u.currentChar();n?n.push(r):n=[r];r=null}if("{"===a||"}"===a||";"===a||","===a||")"===a)break}if(n)return new s.Selector(n,o,p,e,l);o&&h("Extend must be used to extend a selector, it cannot be used on its own")},attribute:function(){if(!u.$char("["))return;var t=this.entities,e,n,i;(e=t.variableCurly())||(e=d(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/));i=u.$re(/^[|~*$^]?=/);i&&(n=t.quoted()||u.$re(/^[0-9]+%/)||u.$re(/^[\w-]+/)||t.variableCurly());p("]");return new s.Attribute(e,i,n)},block:function(){var t;if(u.$char("{")&&(t=this.primary())&&u.$char("}"))return t},blockRuleset:function(){var t=this.block();t&&(t=new s.Ruleset(null,t));return t},detachedRuleset:function(){var t=this.blockRuleset();if(t)return new s.DetachedRuleset(t)},ruleset:function(){var t,n,i,a;u.save();e.dumpLineNumbers&&(a=f(u.i));while(true){n=this.lessSelector();if(!n)break;t?t.push(n):t=[n];u.commentStore.length=0;n.condition&&t.length>1&&h("Guards are only currently allowed on a single selector.");if(!u.$char(","))break;n.condition&&h("Guards are only currently allowed on a single selector.");u.commentStore.length=0}if(t&&(i=this.block())){u.forget();var r=new s.Ruleset(t,i,e.strictImports);e.dumpLineNumbers&&(r.debugInfo=a);return r}u.restore()},rule:function(t){var n,i,a=u.i,r=u.currentChar(),o,c,d;if("."===r||"#"===r||"&"===r||":"===r)return;u.save();n=this.variable()||this.ruleProperty();if(n){d="string"===typeof n;d&&(i=this.detachedRuleset());u.commentStore.length=0;if(!i){c=!d&&n.length>1&&n.pop().value;var p=!t&&(e.compress||d);p&&(i=this.value());if(!i){i=this.anonymousValue();if(i){u.forget();return new s.Rule(n,i,false,c,a,l)}}p||i||(i=this.value());o=this.important()}if(i&&this.end()){u.forget();return new s.Rule(n,i,o,c,a,l)}u.restore();if(i&&!t)return this.rule(true)}else u.forget()},anonymousValue:function(){var t=u.$re(/^([^@+\/'"*`(;{}-]*);/);if(t)return new s.Anonymous(t[1])},import:function(){var t,e,n=u.i;var i=u.$re(/^@import?\s+/);if(i){var a=(i?this.importOptions():null)||{};if(t=this.entities.quoted()||this.entities.url()){e=this.mediaFeatures();if(!u.$char(";")){u.i=n;h("missing semi-colon or unrecognised media features on import")}e=e&&new s.Value(e);return new s.Import(t,e,a,n,l)}u.i=n;h("malformed import statement")}},importOptions:function(){var t,e={},n,i;if(!u.$char("("))return null;do{t=this.importOption();if(t){n=t;i=true;switch(n){case"css":n="less";i=false;break;case"once":n="multiple";i=false;break}e[n]=i;if(!u.$char(","))break}}while(t);p(")");return e},importOption:function(){var t=u.$re(/^(less|css|multiple|once|inline|reference|optional)/);if(t)return t[1]},mediaFeature:function(){var t=this.entities,e=[],n,i;u.save();do{n=t.keyword()||t.variable();if(n)e.push(n);else if(u.$char("(")){i=this.property();n=this.value();if(!u.$char(")")){u.restore("Missing closing ')'");return null}if(i&&n)e.push(new s.Paren(new s.Rule(i,n,null,null,u.i,l,true)));else{if(!n){u.restore("badly formed media feature definition");return null}e.push(new s.Paren(n))}}}while(n);u.forget();if(e.length>0)return new s.Expression(e)},mediaFeatures:function(){var t=this.entities,e=[],n;do{n=this.mediaFeature();if(n){e.push(n);if(!u.$char(","))break}else{n=t.variable();if(n){e.push(n);if(!u.$char(","))break}}}while(n);return e.length>0?e:null},media:function(){var t,n,i,a;e.dumpLineNumbers&&(a=f(u.i));u.save();if(u.$str("@media")){t=this.mediaFeatures();n=this.block();if(!n){u.restore("media definitions require block statements after any features");return}u.forget();i=new s.Media(n,t,u.i,l);e.dumpLineNumbers&&(i.debugInfo=a);return i}u.restore()},plugin:function(){var t,e=u.i,n=u.$re(/^@plugin?\s+/);if(n){var i={plugin:true};if(t=this.entities.quoted()||this.entities.url()){if(!u.$char(";")){u.i=e;h("missing semi-colon on plugin")}return new s.Import(t,null,i,e,l)}u.i=e;h("malformed plugin statement")}},directive:function(){var t=u.i,n,i,a,r,o,c,d,p=true,g=true;if("@"!==u.currentChar())return;i=this["import"]()||this.plugin()||this.media();if(i)return i;u.save();n=u.$re(/^@[a-z-]+/);if(!n)return;r=n;"-"==n.charAt(1)&&n.indexOf("-",2)>0&&(r="@"+n.slice(n.indexOf("-",2)+1));switch(r){case"@counter-style":o=true;p=true;break;case"@charset":o=true;p=false;break;case"@namespace":c=true;p=false;break;case"@keyframes":o=true;break;case"@host":case"@page":d=true;break;case"@document":case"@supports":d=true;g=false;break}u.commentStore.length=0;if(o){i=this.entity();i||h("expected "+n+" identifier")}else if(c){i=this.expression();i||h("expected "+n+" expression")}else if(d){i=(u.$re(/^[^{;]+/)||"").trim();i&&(i=new s.Anonymous(i))}p&&(a=this.blockRuleset());if(a||!p&&i&&u.$char(";")){u.forget();return new s.Directive(n,i,a,t,l,e.dumpLineNumbers?f(t):null,false,g)}u.restore("directive options not recognised")},value:function(){var t,e=[];do{t=this.expression();if(t){e.push(t);if(!u.$char(","))break}}while(t);if(e.length>0)return new s.Value(e)},important:function(){if("!"===u.currentChar())return u.$re(/^! *important/)},sub:function(){var t,e;u.save();if(u.$char("(")){t=this.addition();if(t&&u.$char(")")){u.forget();e=new s.Expression([t]);e.parens=true;return e}u.restore("Expected ')'");return}u.restore()},multiplication:function(){var t,e,n,i,a;t=this.operand();if(t){a=u.isWhitespace(-1);while(true){if(u.peek(/^\/[*\/]/))break;u.save();n=u.$char("/")||u.$char("*");if(!n){u.forget();break}e=this.operand();if(!e){u.restore();break}u.forget();t.parensInOp=true;e.parensInOp=true;i=new s.Operation(n,[i||t,e],a);a=u.isWhitespace(-1)}return i||t}},addition:function(){var t,e,n,i,a;t=this.multiplication();if(t){a=u.isWhitespace(-1);while(true){n=u.$re(/^[-+]\s+/)||!a&&(u.$char("+")||u.$char("-"));if(!n)break;e=this.multiplication();if(!e)break;t.parensInOp=true;e.parensInOp=true;i=new s.Operation(n,[i||t,e],a);a=u.isWhitespace(-1)}return i||t}},conditions:function(){var t,e,n=u.i,i;t=this.condition();if(t){while(true){if(!u.peek(/^,\s*(not\s*)?\(/)||!u.$char(","))break;e=this.condition();if(!e)break;i=new s.Condition("or",i||t,e,n)}return i||t}},condition:function(){var t=this.entities,e=u.i,n=false,i,a,r,o;u.$str("not")&&(n=true);p("(");i=this.addition()||t.keyword()||t.quoted();if(i){u.$char(">")?o=u.$char("=")?">=":">":u.$char("<")?o=u.$char("=")?"<=":"<":u.$char("=")&&(o=u.$char(">")?"=>":u.$char("<")?"=<":"=");if(o){a=this.addition()||t.keyword()||t.quoted();a?r=new s.Condition(o,i,a,e,n):h("expected expression")}else r=new s.Condition("=",i,new s.Keyword("true"),e,n);p(")");return u.$str("and")?new s.Condition("and",r,this.condition()):r}},operand:function(){var t=this.entities,e;u.peek(/^-[@\(]/)&&(e=u.$char("-"));var n=this.sub()||t.dimension()||t.color()||t.variable()||t.call();if(e){n.parensInOp=true;n=new s.Negative(n)}return n},expression:function(){var t=[],e,n;do{e=this.comment();if(e){t.push(e);continue}e=this.addition()||this.entity();if(e){t.push(e);if(!u.peek(/^\/[\/*]/)){n=u.$char("/");n&&t.push(new s.Anonymous(n))}}}while(e);if(t.length>0)return new s.Expression(t)},property:function(){var t=u.$re(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);if(t)return t[1]},ruleProperty:function(){var t=[],e=[],n,i;u.save();var a=u.$re(/^([_a-zA-Z0-9-]+)\s*:/);if(a){t=[new s.Keyword(a[1])];u.forget();return t}function r(n){var i=u.i,s=u.$re(n);if(s){e.push(i);return t.push(s[1])}}r(/^(\*?)/);while(true)if(!r(/^((?:[\w-]+)|(?:@\{[\w-]+\}))/))break;if(t.length>1&&r(/^((?:\+_|\+)?)\s*:/)){u.forget();if(""===t[0]){t.shift();e.shift()}for(i=0;i<t.length;i++){n=t[i];t[i]="@"!==n.charAt(0)?new s.Keyword(n):new s.Variable("@"+n.slice(2,-1),e[i],l)}return t}u.restore()}}}};l.serializeVars=function(t){var e="";for(var n in t)if(Object.hasOwnProperty.call(t,n)){var i=t[n];e+=("@"===n[0]?"":"@")+n+": "+i+(";"===String(i).slice(-1)?"":";")}return e};e.exports=l},{"../less-error":31,"../tree":61,"../utils":82,"../visitors":86,"./parser-input":36}],38:[function(t,e,n){var i=function(t){this.less=t;this.visitors=[];this.preProcessors=[];this.postProcessors=[];this.installedPlugins=[];this.fileManagers=[]};i.prototype.addPlugins=function(t){if(t)for(var e=0;e<t.length;e++)this.addPlugin(t[e])};i.prototype.addPlugin=function(t){this.installedPlugins.push(t);t.install(this.less,this)};i.prototype.addVisitor=function(t){this.visitors.push(t)};i.prototype.addPreProcessor=function(t,e){var n;for(n=0;n<this.preProcessors.length;n++)if(this.preProcessors[n].priority>=e)break;this.preProcessors.splice(n,0,{preProcessor:t,priority:e})};i.prototype.addPostProcessor=function(t,e){var n;for(n=0;n<this.postProcessors.length;n++)if(this.postProcessors[n].priority>=e)break;this.postProcessors.splice(n,0,{postProcessor:t,priority:e})};i.prototype.addFileManager=function(t){this.fileManagers.push(t)};i.prototype.getPreProcessors=function(){var t=[];for(var e=0;e<this.preProcessors.length;e++)t.push(this.preProcessors[e].preProcessor);return t};i.prototype.getPostProcessors=function(){var t=[];for(var e=0;e<this.postProcessors.length;e++)t.push(this.postProcessors[e].postProcessor);return t};i.prototype.getVisitors=function(){return this.visitors};i.prototype.getFileManagers=function(){return this.fileManagers};e.exports=i},{}],39:[function(t,e,n){var i=t("../less-error"),s=t("../tree");var a=e.exports=function t(e,n){this.fileInfo=n};a.prototype.eval=function(t,e){var n={},a,r;r={add:function(t,e){n[t]=e},addMultiple:function(t){Object.keys(t).forEach(function(e){n[e]=t[e]})}};try{a=new Function("functions","tree","fileInfo",t);a(r,s,this.fileInfo)}catch(t){e(new i({message:"Plugin evaluation error: '"+t.name+": "+t.message.replace(/["]/g,"'")+"'",filename:this.fileInfo.filename}),null)}e(null,{functions:n})}},{"../less-error":31,"../tree":61}],40:[function(t,e,n){var i;e.exports=function(e,n,s){var a=function(e,s,r){if("function"===typeof s){r=s;s={}}if(!r){i||(i="undefined"===typeof Promise?t("promise"):Promise);var o=this;return new i(function(t,n){a.call(o,e,s,function(e,i){e?n(e):t(i)})})}this.parse(e,s,function(t,e,i,s){if(t)return r(t);var a;try{var o=new n(e,i);a=o.toCSS(s)}catch(t){return r(t)}r(null,a)})};return a}},{promise:void 0}],41:[function(t,e,n){e.exports=function(t,e){var n=function(t){this.options=t};n.prototype.toCSS=function(e,n,i){var s=new t({contentsIgnoredCharsMap:i.contentsIgnoredChars,rootNode:e,contentsMap:i.contents,sourceMapFilename:this.options.sourceMapFilename,sourceMapURL:this.options.sourceMapURL,outputFilename:this.options.sourceMapOutputFilename,sourceMapBasepath:this.options.sourceMapBasepath,sourceMapRootpath:this.options.sourceMapRootpath,outputSourceFiles:this.options.outputSourceFiles,sourceMapGenerator:this.options.sourceMapGenerator,sourceMapFileInline:this.options.sourceMapFileInline});var a=s.toCSS(n);this.sourceMap=s.sourceMap;this.sourceMapURL=s.sourceMapURL;this.options.sourceMapInputFilename&&(this.sourceMapInputFilename=s.normalizeFilename(this.options.sourceMapInputFilename));return a+this.getCSSAppendage()};n.prototype.getCSSAppendage=function(){var t=this.sourceMapURL;if(this.options.sourceMapFileInline){if(void 0===this.sourceMap)return"";t="data:application/json;base64,"+e.encodeBase64(this.sourceMap)}if(t)return"/*# sourceMappingURL="+t+" */";return""};n.prototype.getExternalSourceMap=function(){return this.sourceMap};n.prototype.setExternalSourceMap=function(t){this.sourceMap=t};n.prototype.isInline=function(){return this.options.sourceMapFileInline};n.prototype.getSourceMapURL=function(){return this.sourceMapURL};n.prototype.getOutputFilename=function(){return this.options.sourceMapOutputFilename};n.prototype.getInputFilename=function(){return this.sourceMapInputFilename};return n}},{}],42:[function(t,e,n){e.exports=function(t){var e=function(e){this._css=[];this._rootNode=e.rootNode;this._contentsMap=e.contentsMap;this._contentsIgnoredCharsMap=e.contentsIgnoredCharsMap;e.sourceMapFilename&&(this._sourceMapFilename=e.sourceMapFilename.replace(/\\/g,"/"));this._outputFilename=e.outputFilename;this.sourceMapURL=e.sourceMapURL;e.sourceMapBasepath&&(this._sourceMapBasepath=e.sourceMapBasepath.replace(/\\/g,"/"));if(e.sourceMapRootpath){this._sourceMapRootpath=e.sourceMapRootpath.replace(/\\/g,"/");"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/")}else this._sourceMapRootpath="";this._outputSourceFiles=e.outputSourceFiles;this._sourceMapGeneratorConstructor=t.getSourceMapGenerator();this._lineNumber=0;this._column=0};e.prototype.normalizeFilename=function(t){t=t.replace(/\\/g,"/");if(this._sourceMapBasepath&&0===t.indexOf(this._sourceMapBasepath)){t=t.substring(this._sourceMapBasepath.length);"\\"!==t.charAt(0)&&"/"!==t.charAt(0)||(t=t.substring(1))}return(this._sourceMapRootpath||"")+t};e.prototype.add=function(t,e,n,i){if(!t)return;var s,a,r,o,l;if(e){var c=this._contentsMap[e.filename];if(this._contentsIgnoredCharsMap[e.filename]){n-=this._contentsIgnoredCharsMap[e.filename];n<0&&(n=0);c=c.slice(this._contentsIgnoredCharsMap[e.filename])}c=c.substring(0,n);a=c.split("\n");o=a[a.length-1]}s=t.split("\n");r=s[s.length-1];if(e)if(i)for(l=0;l<s.length;l++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+l+1,column:0===l?this._column:0},original:{line:a.length+l,column:0===l?o.length:0},source:this.normalizeFilename(e.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:a.length,column:o.length},source:this.normalizeFilename(e.filename)});if(1===s.length)this._column+=r.length;else{this._lineNumber+=s.length-1;this._column=r.length}this._css.push(t)};e.prototype.isEmpty=function(){return 0===this._css.length};e.prototype.toCSS=function(t){this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null});if(this._outputSourceFiles)for(var e in this._contentsMap)if(this._contentsMap.hasOwnProperty(e)){var n=this._contentsMap[e];this._contentsIgnoredCharsMap[e]&&(n=n.slice(this._contentsIgnoredCharsMap[e]));this._sourceMapGenerator.setSourceContent(this.normalizeFilename(e),n)}this._rootNode.genCSS(t,this);if(this._css.length>0){var i,s=JSON.stringify(this._sourceMapGenerator.toJSON());this.sourceMapURL?i=this.sourceMapURL:this._sourceMapFilename&&(i=this._sourceMapFilename);this.sourceMapURL=i;this.sourceMap=s}return this._css.join("")};return e}},{}],43:[function(t,e,n){var i=t("./contexts"),s=t("./visitors"),a=t("./tree");e.exports=function(t,e){e=e||{};var n,r=e.variables,o=new i.Eval(e);if("object"===typeof r&&!Array.isArray(r)){r=Object.keys(r).map(function(t){var e=r[t];if(!(e instanceof a.Value)){e instanceof a.Expression||(e=new a.Expression([e]));e=new a.Value([e])}return new a.Rule("@"+t,e,false,null,0)});o.frames=[new a.Ruleset(null,r)]}var l=[],c=[new s.JoinSelectorVisitor,new s.ExtendVisitor,new s.ToCSSVisitor({compress:Boolean(e.compress)})],u;if(e.pluginManager){var d=e.pluginManager.getVisitors();for(u=0;u<d.length;u++){var p=d[u];p.isPreEvalVisitor?l.push(p):p.isPreVisitor?c.splice(0,0,p):c.push(p)}}for(u=0;u<l.length;u++)l[u].run(t);n=t.eval(o);for(u=0;u<c.length;u++)c[u].run(n);return n}},{"./contexts":10,"./tree":61,"./visitors":86}],44:[function(t,e,n){var i=t("./node");var s=function(t){this.value=t};s.prototype=new i;s.prototype.type="Alpha";s.prototype.accept=function(t){this.value=t.visit(this.value)};s.prototype.eval=function(t){if(this.value.eval)return new s(this.value.eval(t));return this};s.prototype.genCSS=function(t,e){e.add("alpha(opacity=");this.value.genCSS?this.value.genCSS(t,e):e.add(this.value);e.add(")")};e.exports=s},{"./node":69}],45:[function(t,e,n){var i=t("./node");var s=function(t,e,n,i,s,a){this.value=t;this.index=e;this.mapLines=i;this.currentFileInfo=n;this.rulesetLike="undefined"!==typeof s&&s;this.isReferenced=a||false};s.prototype=new i;s.prototype.type="Anonymous";s.prototype.eval=function(){return new s(this.value,this.index,this.currentFileInfo,this.mapLines,this.rulesetLike,this.isReferenced)};s.prototype.compare=function(t){return t.toCSS&&this.toCSS()===t.toCSS()?0:void 0};s.prototype.isRulesetLike=function(){return this.rulesetLike};s.prototype.genCSS=function(t,e){e.add(this.value,this.currentFileInfo,this.index,this.mapLines)};s.prototype.markReferenced=function(){this.isReferenced=true};s.prototype.getIsReferenced=function(){return!this.currentFileInfo||!this.currentFileInfo.reference||this.isReferenced};e.exports=s},{"./node":69}],46:[function(t,e,n){var i=t("./node");var s=function(t,e){this.key=t;this.value=e};s.prototype=new i;s.prototype.type="Assignment";s.prototype.accept=function(t){this.value=t.visit(this.value)};s.prototype.eval=function(t){if(this.value.eval)return new s(this.key,this.value.eval(t));return this};s.prototype.genCSS=function(t,e){e.add(this.key+"=");this.value.genCSS?this.value.genCSS(t,e):e.add(this.value)};e.exports=s},{"./node":69}],47:[function(t,e,n){var i=t("./node");var s=function(t,e,n){this.key=t;this.op=e;this.value=n};s.prototype=new i;s.prototype.type="Attribute";s.prototype.eval=function(t){return new s(this.key.eval?this.key.eval(t):this.key,this.op,this.value&&this.value.eval?this.value.eval(t):this.value)};s.prototype.genCSS=function(t,e){e.add(this.toCSS(t))};s.prototype.toCSS=function(t){var e=this.key.toCSS?this.key.toCSS(t):this.key;if(this.op){e+=this.op;e+=this.value.toCSS?this.value.toCSS(t):this.value}return"["+e+"]"};e.exports=s},{"./node":69}],48:[function(t,e,n){var i=t("./node"),s=t("../functions/function-caller");var a=function(t,e,n,i){this.name=t;this.args=e;this.index=n;this.currentFileInfo=i};a.prototype=new i;a.prototype.type="Call";a.prototype.accept=function(t){this.args&&(this.args=t.visitArray(this.args))};a.prototype.eval=function(t){var e=this.args.map(function(e){return e.eval(t)}),n,i=new s(this.name,t,this.index,this.currentFileInfo);if(i.isValid())try{n=i.call(e);if(null!=n)return n}catch(t){throw{type:t.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(t.message?": "+t.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new a(this.name,e,this.index,this.currentFileInfo)};a.prototype.genCSS=function(t,e){e.add(this.name+"(",this.currentFileInfo,this.index);for(var n=0;n<this.args.length;n++){this.args[n].genCSS(t,e);n+1<this.args.length&&e.add(", ")}e.add(")")};e.exports=a},{"../functions/function-caller":20,"./node":69}],49:[function(t,e,n){var i=t("./node"),s=t("../data/colors");var a=function(t,e,n){Array.isArray(t)?this.rgb=t:6==t.length?this.rgb=t.match(/.{2}/g).map(function(t){return parseInt(t,16)}):this.rgb=t.split("").map(function(t){return parseInt(t+t,16)});this.alpha="number"===typeof e?e:1;"undefined"!==typeof n&&(this.value=n)};a.prototype=new i;a.prototype.type="Color";function r(t,e){return Math.min(Math.max(t,0),e)}function o(t){return"#"+t.map(function(t){t=r(Math.round(t),255);return(t<16?"0":"")+t.toString(16)}).join("")}a.prototype.luma=function(){var t=this.rgb[0]/255,e=this.rgb[1]/255,n=this.rgb[2]/255;t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4);e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4);n=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4);return.2126*t+.7152*e+.0722*n};a.prototype.genCSS=function(t,e){e.add(this.toCSS(t))};a.prototype.toCSS=function(t,e){var n=t&&t.compress&&!e,i,s;if(this.value)return this.value;s=this.fround(t,this.alpha);if(s<1)return"rgba("+this.rgb.map(function(t){return r(Math.round(t),255)}).concat(r(s,1)).join(","+(n?"":" "))+")";i=this.toRGB();if(n){var a=i.split("");a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]&&(i="#"+a[1]+a[3]+a[5])}return i};a.prototype.operate=function(t,e,n){var i=[];var s=this.alpha*(1-n.alpha)+n.alpha;for(var r=0;r<3;r++)i[r]=this._operate(t,e,this.rgb[r],n.rgb[r]);return new a(i,s)};a.prototype.toRGB=function(){return o(this.rgb)};a.prototype.toHSL=function(){var t=this.rgb[0]/255,e=this.rgb[1]/255,n=this.rgb[2]/255,i=this.alpha;var s=Math.max(t,e,n),a=Math.min(t,e,n);var r,o,l=(s+a)/2,c=s-a;if(s===a)r=o=0;else{o=l>.5?c/(2-s-a):c/(s+a);switch(s){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4;break}r/=6}return{h:360*r,s:o,l:l,a:i}};a.prototype.toHSV=function(){var t=this.rgb[0]/255,e=this.rgb[1]/255,n=this.rgb[2]/255,i=this.alpha;var s=Math.max(t,e,n),a=Math.min(t,e,n);var r,o,l=s;var c=s-a;o=0===s?0:c/s;if(s===a)r=0;else{switch(s){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4;break}r/=6}return{h:360*r,s:o,v:l,a:i}};a.prototype.toARGB=function(){return o([255*this.alpha].concat(this.rgb))};a.prototype.compare=function(t){return t.rgb&&t.rgb[0]===this.rgb[0]&&t.rgb[1]===this.rgb[1]&&t.rgb[2]===this.rgb[2]&&t.alpha===this.alpha?0:void 0};a.fromKeyword=function(t){var e,n=t.toLowerCase();s.hasOwnProperty(n)?e=new a(s[n].slice(1)):"transparent"===n&&(e=new a([0,0,0],0));if(e){e.value=t;return e}};e.exports=a},{"../data/colors":11,"./node":69}],50:[function(t,e,n){var i=t("./node");var s=function(t){if(" "===t){this.value=" ";this.emptyOrWhitespace=true}else{this.value=t?t.trim():"";this.emptyOrWhitespace=""===this.value}};s.prototype=new i;s.prototype.type="Combinator";var a={"":true," ":true,"|":true};s.prototype.genCSS=function(t,e){var n=t.compress||a[this.value]?"":" ";e.add(n+this.value+n)};e.exports=s},{"./node":69}],51:[function(t,e,n){var i=t("./node"),s=t("./debug-info");var a=function(t,e,n,i){this.value=t;this.isLineComment=e;this.currentFileInfo=i};a.prototype=new i;a.prototype.type="Comment";a.prototype.genCSS=function(t,e){this.debugInfo&&e.add(s(t,this),this.currentFileInfo,this.index);e.add(this.value)};a.prototype.isSilent=function(t){var e=this.currentFileInfo&&this.currentFileInfo.reference&&!this.isReferenced,n=t.compress&&"!"!==this.value[2];return this.isLineComment||e||n};a.prototype.markReferenced=function(){this.isReferenced=true};e.exports=a},{"./debug-info":53,"./node":69}],52:[function(t,e,n){var i=t("./node");var s=function(t,e,n,i,s){this.op=t.trim();this.lvalue=e;this.rvalue=n;this.index=i;this.negate=s};s.prototype=new i;s.prototype.type="Condition";s.prototype.accept=function(t){this.lvalue=t.visit(this.lvalue);this.rvalue=t.visit(this.rvalue)};s.prototype.eval=function(t){var e=function(t,e,n){switch(t){case"and":return e&&n;case"or":return e||n;default:switch(i.compare(e,n)){case-1:return"<"===t||"=<"===t||"<="===t;case 0:return"="===t||">="===t||"=<"===t||"<="===t;case 1:return">"===t||">="===t;default:return false}}}(this.op,this.lvalue.eval(t),this.rvalue.eval(t));return this.negate?!e:e};e.exports=s},{"./node":69}],53:[function(t,e,n){var i=function(t,e,n){var s="";if(t.dumpLineNumbers&&!t.compress)switch(t.dumpLineNumbers){case"comments":s=i.asComment(e);break;case"mediaquery":s=i.asMediaQuery(e);break;case"all":s=i.asComment(e)+(n||"")+i.asMediaQuery(e);break}return s};i.asComment=function(t){return"/* line "+t.debugInfo.lineNumber+", "+t.debugInfo.fileName+" */\n"};i.asMediaQuery=function(t){var e=t.debugInfo.fileName;/^[a-z]+:\/\//i.test(e)||(e="file://"+e);return"@media -sass-debug-info{filename{font-family:"+e.replace(/([.:\/\\])/g,function(t){"\\"==t&&(t="/");return"\\"+t})+"}line{font-family:\\00003"+t.debugInfo.lineNumber+"}}\n"};e.exports=i},{}],54:[function(t,e,n){var i=t("./node"),s=t("../contexts");var a=function(t,e){this.ruleset=t;this.frames=e};a.prototype=new i;a.prototype.type="DetachedRuleset";a.prototype.evalFirst=true;a.prototype.accept=function(t){this.ruleset=t.visit(this.ruleset)};a.prototype.eval=function(t){var e=this.frames||t.frames.slice(0);return new a(this.ruleset,e)};a.prototype.callEval=function(t){return this.ruleset.eval(this.frames?new s.Eval(t,this.frames.concat(t.frames)):t)};e.exports=a},{"../contexts":10,"./node":69}],55:[function(t,e,n){var i=t("./node"),s=t("../data/unit-conversions"),a=t("./unit"),r=t("./color");var o=function(t,e){this.value=parseFloat(t);this.unit=e&&e instanceof a?e:new a(e?[e]:void 0)};o.prototype=new i;o.prototype.type="Dimension";o.prototype.accept=function(t){this.unit=t.visit(this.unit)};o.prototype.eval=function(t){return this};o.prototype.toColor=function(){return new r([this.value,this.value,this.value])};o.prototype.genCSS=function(t,e){if(t&&t.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var n=this.fround(t,this.value),i=String(n);0!==n&&n<1e-6&&n>-1e-6&&(i=n.toFixed(20).replace(/0+$/,""));if(t&&t.compress){if(0===n&&this.unit.isLength()){e.add(i);return}n>0&&n<1&&(i=i.substr(1))}e.add(i);this.unit.genCSS(t,e)};o.prototype.operate=function(t,e,n){var i=this._operate(t,e,this.value,n.value),s=this.unit.clone();if("+"===e||"-"===e)if(0===s.numerator.length&&0===s.denominator.length){s=n.unit.clone();this.unit.backupUnit&&(s.backupUnit=this.unit.backupUnit)}else if(0===n.unit.numerator.length&&0===s.denominator.length);else{n=n.convertTo(this.unit.usedUnits());if(t.strictUnits&&n.unit.toString()!==s.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+s.toString()+"' and '"+n.unit.toString()+"'.");i=this._operate(t,e,this.value,n.value)}else if("*"===e){s.numerator=s.numerator.concat(n.unit.numerator).sort();s.denominator=s.denominator.concat(n.unit.denominator).sort();s.cancel()}else if("/"===e){s.numerator=s.numerator.concat(n.unit.denominator).sort();s.denominator=s.denominator.concat(n.unit.numerator).sort();s.cancel()}return new o(i,s)};o.prototype.compare=function(t){var e,n;if(!(t instanceof o))return;if(this.unit.isEmpty()||t.unit.isEmpty()){e=this;n=t}else{e=this.unify();n=t.unify();if(0!==e.unit.compare(n.unit))return}return i.numericCompare(e.value,n.value)};o.prototype.unify=function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})};o.prototype.convertTo=function(t){var e=this.value,n=this.unit.clone(),i,a,r,l,c={},u;if("string"===typeof t){for(i in s)if(s[i].hasOwnProperty(t)){c={};c[i]=t}t=c}u=function(t,n){if(r.hasOwnProperty(t)){n?e/=r[t]/r[l]:e*=r[t]/r[l];return l}return t};for(a in t)if(t.hasOwnProperty(a)){l=t[a];r=s[a];n.map(u)}n.cancel();return new o(e,n)};e.exports=o},{"../data/unit-conversions":13,"./color":49,"./node":69,"./unit":78}],56:[function(t,e,n){var i=t("./node"),s=t("./selector"),a=t("./ruleset");var r=function(t,e,n,i,a,r,o,l){var c;this.name=t;this.value=e;if(n){if(Array.isArray(n))this.rules=n;else{this.rules=[n];this.rules[0].selectors=new s([],null,null,this.index,a).createEmptySelectors()}for(c=0;c<this.rules.length;c++)this.rules[c].allowImports=true}this.index=i;this.currentFileInfo=a;this.debugInfo=r;this.isReferenced=o;this.isRooted=l||false};r.prototype=new i;r.prototype.type="Directive";r.prototype.accept=function(t){var e=this.value,n=this.rules;n&&(this.rules=t.visitArray(n));e&&(this.value=t.visit(e))};r.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()};r.prototype.isCharset=function(){return"@charset"===this.name};r.prototype.genCSS=function(t,e){var n=this.value,i=this.rules;e.add(this.name,this.currentFileInfo,this.index);if(n){e.add(" ");n.genCSS(t,e)}i?this.outputRuleset(t,e,i):e.add(";")};r.prototype.eval=function(t){var e,n,i=this.value,s=this.rules;e=t.mediaPath;n=t.mediaBlocks;t.mediaPath=[];t.mediaBlocks=[];i&&(i=i.eval(t));if(s){s=[s[0].eval(t)];s[0].root=true}t.mediaPath=e;t.mediaBlocks=n;return new r(this.name,i,s,this.index,this.currentFileInfo,this.debugInfo,this.isReferenced,this.isRooted)};r.prototype.variable=function(t){if(this.rules)return a.prototype.variable.call(this.rules[0],t)};r.prototype.find=function(){if(this.rules)return a.prototype.find.apply(this.rules[0],arguments)};r.prototype.rulesets=function(){if(this.rules)return a.prototype.rulesets.apply(this.rules[0])};r.prototype.markReferenced=function(){var t,e;this.isReferenced=true;if(this.rules){e=this.rules;for(t=0;t<e.length;t++)e[t].markReferenced&&e[t].markReferenced()}};r.prototype.getIsReferenced=function(){return!this.currentFileInfo||!this.currentFileInfo.reference||this.isReferenced};r.prototype.outputRuleset=function(t,e,n){var i=n.length,s;t.tabLevel=1+(0|t.tabLevel);if(t.compress){e.add("{");for(s=0;s<i;s++)n[s].genCSS(t,e);e.add("}");t.tabLevel--;return}var a="\n"+Array(t.tabLevel).join("  "),r=a+"  ";if(i){e.add(" {"+r);n[0].genCSS(t,e);for(s=1;s<i;s++){e.add(r);n[s].genCSS(t,e)}e.add(a+"}")}else e.add(" {"+a+"}");t.tabLevel--};e.exports=r},{"./node":69,"./ruleset":75,"./selector":76}],57:[function(t,e,n){var i=t("./node"),s=t("./paren"),a=t("./combinator");var r=function(t,e,n,i){this.combinator=t instanceof a?t:new a(t);this.value="string"===typeof e?e.trim():e||"";this.index=n;this.currentFileInfo=i};r.prototype=new i;r.prototype.type="Element";r.prototype.accept=function(t){var e=this.value;this.combinator=t.visit(this.combinator);"object"===typeof e&&(this.value=t.visit(e))};r.prototype.eval=function(t){return new r(this.combinator,this.value.eval?this.value.eval(t):this.value,this.index,this.currentFileInfo)};r.prototype.genCSS=function(t,e){e.add(this.toCSS(t),this.currentFileInfo,this.index)};r.prototype.toCSS=function(t){t=t||{};var e=this.value,n=t.firstSelector;e instanceof s&&(t.firstSelector=true);e=e.toCSS?e.toCSS(t):e;t.firstSelector=n;return""===e&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(t)+e};e.exports=r},{"./combinator":50,"./node":69,"./paren":71}],58:[function(t,e,n){var i=t("./node"),s=t("./paren"),a=t("./comment");var r=function(t){this.value=t;if(!t)throw new Error("Expression requires an array parameter")};r.prototype=new i;r.prototype.type="Expression";r.prototype.accept=function(t){this.value=t.visitArray(this.value)};r.prototype.eval=function(t){var e,n=this.parens&&!this.parensInOp,i=false;n&&t.inParenthesis();if(this.value.length>1)e=new r(this.value.map(function(e){return e.eval(t)}));else if(1===this.value.length){this.value[0].parens&&!this.value[0].parensInOp&&(i=true);e=this.value[0].eval(t)}else e=this;n&&t.outOfParenthesis();this.parens&&this.parensInOp&&!t.isMathOn()&&!i&&(e=new s(e));return e};r.prototype.genCSS=function(t,e){for(var n=0;n<this.value.length;n++){this.value[n].genCSS(t,e);n+1<this.value.length&&e.add(" ")}};r.prototype.throwAwayComments=function(){this.value=this.value.filter(function(t){return!(t instanceof a)})};r.prototype.markReferenced=function(){this.value.forEach(function(t){t.markReferenced&&t.markReferenced()})};e.exports=r},{"./comment":51,"./node":69,"./paren":71}],59:[function(t,e,n){var i=t("./node");var s=function t(e,n,i){this.selector=e;this.option=n;this.index=i;this.object_id=t.next_id++;this.parent_ids=[this.object_id];switch(n){case"all":this.allowBefore=true;this.allowAfter=true;break;default:this.allowBefore=false;this.allowAfter=false;break}};s.next_id=0;s.prototype=new i;s.prototype.type="Extend";s.prototype.accept=function(t){this.selector=t.visit(this.selector)};s.prototype.eval=function(t){return new s(this.selector.eval(t),this.option,this.index)};s.prototype.clone=function(t){return new s(this.selector,this.option,this.index)};s.prototype.findSelfSelectors=function(t){var e=[],n,i;for(n=0;n<t.length;n++){i=t[n].elements;n>0&&i.length&&""===i[0].combinator.value&&(i[0].combinator.value=" ");e=e.concat(t[n].elements)}this.selfSelectors=[{elements:e}]};e.exports=s},{"./node":69}],60:[function(t,e,n){var i=t("./node"),s=t("./media"),a=t("./url"),r=t("./quoted"),o=t("./ruleset"),l=t("./anonymous");var c=function(t,e,n,i,s){this.options=n;this.index=i;this.path=t;this.features=e;this.currentFileInfo=s;if(void 0!==this.options.less||this.options.inline)this.css=!this.options.less||this.options.inline;else{var a=this.getPath();a&&/[#\.\&\?\/]css([\?;].*)?$/.test(a)&&(this.css=true)}};c.prototype=new i;c.prototype.type="Import";c.prototype.accept=function(t){this.features&&(this.features=t.visit(this.features));this.path=t.visit(this.path);this.options.plugin||this.options.inline||!this.root||(this.root=t.visit(this.root))};c.prototype.genCSS=function(t,e){if(this.css&&void 0===this.path.currentFileInfo.reference){e.add("@import ",this.currentFileInfo,this.index);this.path.genCSS(t,e);if(this.features){e.add(" ");this.features.genCSS(t,e)}e.add(";")}};c.prototype.getPath=function(){return this.path instanceof a?this.path.value.value:this.path.value};c.prototype.isVariableImport=function(){var t=this.path;t instanceof a&&(t=t.value);if(t instanceof r)return t.containsVariables();return true};c.prototype.evalForImport=function(t){var e=this.path;e instanceof a&&(e=e.value);return new c(e.eval(t),this.features,this.options,this.index,this.currentFileInfo)};c.prototype.evalPath=function(t){var e=this.path.eval(t);var n=this.currentFileInfo&&this.currentFileInfo.rootpath;if(!(e instanceof a)){if(n){var i=e.value;i&&t.isPathRelative(i)&&(e.value=n+i)}e.value=t.normalizePath(e.value)}return e};c.prototype.eval=function(t){var e,n,i=this.features&&this.features.eval(t);if(this.options.plugin){n=t.frames[0]&&t.frames[0].functionRegistry;n&&this.root&&this.root.functions&&n.addMultiple(this.root.functions);return[]}if(this.skip){"function"===typeof this.skip&&(this.skip=this.skip());if(this.skip)return[]}if(this.options.inline){var a=new l(this.root,0,{filename:this.importedFilename,reference:this.path.currentFileInfo&&this.path.currentFileInfo.reference},true,true,false);return this.features?new s([a],this.features.value):[a]}if(this.css){var r=new c(this.evalPath(t),i,this.options,this.index);if(!r.css&&this.error)throw this.error;return r}e=new o(null,this.root.rules.slice(0));e.evalImports(t);return this.features?new s(e.rules,this.features.value):e.rules};e.exports=c},{"./anonymous":45,"./media":65,"./node":69,"./quoted":72,"./ruleset":75,"./url":79}],61:[function(t,e,n){var i={};i.Node=t("./node");i.Alpha=t("./alpha");i.Color=t("./color");i.Directive=t("./directive");i.DetachedRuleset=t("./detached-ruleset");i.Operation=t("./operation");i.Dimension=t("./dimension");i.Unit=t("./unit");i.Keyword=t("./keyword");i.Variable=t("./variable");i.Ruleset=t("./ruleset");i.Element=t("./element");i.Attribute=t("./attribute");i.Combinator=t("./combinator");i.Selector=t("./selector");i.Quoted=t("./quoted");i.Expression=t("./expression");i.Rule=t("./rule");i.Call=t("./call");i.URL=t("./url");i.Import=t("./import");i.mixin={Call:t("./mixin-call"),Definition:t("./mixin-definition")};i.Comment=t("./comment");i.Anonymous=t("./anonymous");i.Value=t("./value");i.JavaScript=t("./javascript");i.Assignment=t("./assignment");i.Condition=t("./condition");i.Paren=t("./paren");i.Media=t("./media");i.UnicodeDescriptor=t("./unicode-descriptor");i.Negative=t("./negative");i.Extend=t("./extend");i.RulesetCall=t("./ruleset-call");e.exports=i},{"./alpha":44,"./anonymous":45,"./assignment":46,"./attribute":47,"./call":48,"./color":49,"./combinator":50,"./comment":51,"./condition":52,"./detached-ruleset":54,"./dimension":55,"./directive":56,"./element":57,"./expression":58,"./extend":59,"./import":60,"./javascript":62,"./keyword":64,"./media":65,"./mixin-call":66,"./mixin-definition":67,"./negative":68,"./node":69,"./operation":70,"./paren":71,"./quoted":72,"./rule":73,"./ruleset":75,"./ruleset-call":74,"./selector":76,"./unicode-descriptor":77,"./unit":78,"./url":79,"./value":80,"./variable":81}],62:[function(t,e,n){var i=t("./js-eval-node"),s=t("./dimension"),a=t("./quoted"),r=t("./anonymous");var o=function(t,e,n,i){this.escaped=e;this.expression=t;this.index=n;this.currentFileInfo=i};o.prototype=new i;o.prototype.type="JavaScript";o.prototype.eval=function(t){var e=this.evaluateJavaScript(this.expression,t);return"number"===typeof e?new s(e):"string"===typeof e?new a('"'+e+'"',e,this.escaped,this.index):Array.isArray(e)?new r(e.join(", ")):new r(e)};e.exports=o},{"./anonymous":45,"./dimension":55,"./js-eval-node":63,"./quoted":72}],63:[function(t,e,n){var i=t("./node"),s=t("./variable");var a=function(){};a.prototype=new i;a.prototype.evaluateJavaScript=function(t,e){var n,i=this,a={};if(void 0!==e.javascriptEnabled&&!e.javascriptEnabled)throw{message:"You are using JavaScript, which has been disabled.",filename:this.currentFileInfo.filename,index:this.index};t=t.replace(/@\{([\w-]+)\}/g,function(t,n){return i.jsify(new s("@"+n,i.index,i.currentFileInfo).eval(e))});try{t=new Function("return ("+t+")")}catch(e){throw{message:"JavaScript evaluation error: "+e.message+" from `"+t+"`",filename:this.currentFileInfo.filename,index:this.index}}var r=e.frames[0].variables();for(var o in r)r.hasOwnProperty(o)&&(a[o.slice(1)]={value:r[o].value,toJS:function(){return this.value.eval(e).toCSS()}});try{n=t.call(a)}catch(t){throw{message:"JavaScript evaluation error: '"+t.name+": "+t.message.replace(/["]/g,"'")+"'",filename:this.currentFileInfo.filename,index:this.index}}return n};a.prototype.jsify=function(t){return Array.isArray(t.value)&&t.value.length>1?"["+t.value.map(function(t){return t.toCSS()}).join(", ")+"]":t.toCSS()};e.exports=a},{"./node":69,"./variable":81}],64:[function(t,e,n){var i=t("./node");var s=function(t){this.value=t};s.prototype=new i;s.prototype.type="Keyword";s.prototype.genCSS=function(t,e){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};e.add(this.value)};s.True=new s("true");s.False=new s("false");e.exports=s},{"./node":69}],65:[function(t,e,n){var i=t("./ruleset"),s=t("./value"),a=t("./selector"),r=t("./anonymous"),o=t("./expression"),l=t("./directive");var c=function(t,e,n,r){this.index=n;this.currentFileInfo=r;var o=new a([],null,null,this.index,this.currentFileInfo).createEmptySelectors();this.features=new s(e);this.rules=[new i(o,t)];this.rules[0].allowImports=true};c.prototype=new l;c.prototype.type="Media";c.prototype.isRulesetLike=true;c.prototype.accept=function(t){this.features&&(this.features=t.visit(this.features));this.rules&&(this.rules=t.visitArray(this.rules))};c.prototype.genCSS=function(t,e){e.add("@media ",this.currentFileInfo,this.index);this.features.genCSS(t,e);this.outputRuleset(t,e,this.rules)};c.prototype.eval=function(t){if(!t.mediaBlocks){t.mediaBlocks=[];t.mediaPath=[]}var e=new c(null,[],this.index,this.currentFileInfo);if(this.debugInfo){this.rules[0].debugInfo=this.debugInfo;e.debugInfo=this.debugInfo}var n=false;if(!t.strictMath){n=true;t.strictMath=true}try{e.features=this.features.eval(t)}finally{n&&(t.strictMath=false)}t.mediaPath.push(e);t.mediaBlocks.push(e);this.rules[0].functionRegistry=t.frames[0].functionRegistry.inherit();t.frames.unshift(this.rules[0]);e.rules=[this.rules[0].eval(t)];t.frames.shift();t.mediaPath.pop();return 0===t.mediaPath.length?e.evalTop(t):e.evalNested(t)};c.prototype.evalTop=function(t){var e=this;if(t.mediaBlocks.length>1){var n=new a([],null,null,this.index,this.currentFileInfo).createEmptySelectors();e=new i(n,t.mediaBlocks);e.multiMedia=true}delete t.mediaBlocks;delete t.mediaPath;return e};c.prototype.evalNested=function(t){var e,n,a=t.mediaPath.concat([this]);for(e=0;e<a.length;e++){n=a[e].features instanceof s?a[e].features.value:a[e].features;a[e]=Array.isArray(n)?n:[n]}this.features=new s(this.permute(a).map(function(t){t=t.map(function(t){return t.toCSS?t:new r(t)});for(e=t.length-1;e>0;e--)t.splice(e,0,new r("and"));return new o(t)}));return new i([],[])};c.prototype.permute=function(t){if(0===t.length)return[];if(1===t.length)return t[0];var e=[];var n=this.permute(t.slice(1));for(var i=0;i<n.length;i++)for(var s=0;s<t[0].length;s++)e.push([t[0][s]].concat(n[i]));return e};c.prototype.bubbleSelectors=function(t){if(!t)return;this.rules=[new i(t.slice(0),[this.rules[0]])]};e.exports=c},{"./anonymous":45,"./directive":56,"./expression":58,"./ruleset":75,"./selector":76,"./value":80}],66:[function(t,e,n){var i=t("./node"),s=t("./selector"),a=t("./mixin-definition"),r=t("../functions/default");var o=function(t,e,n,i,a){this.selector=new s(t);this.arguments=e||[];this.index=n;this.currentFileInfo=i;this.important=a};o.prototype=new i;o.prototype.type="MixinCall";o.prototype.accept=function(t){this.selector&&(this.selector=t.visit(this.selector));this.arguments.length&&(this.arguments=t.visitArray(this.arguments))};o.prototype.eval=function(t){var e,n,i,s=[],o,l,c=[],u,d=false,p,h,f,g,v,m=[],b,y=[],S,I=-1,x=0,w=1,q=2,C,P,k;function A(e,n){var i,a,o;for(i=0;i<2;i++){y[i]=true;r.value(i);for(a=0;a<n.length&&y[i];a++){o=n[a];o.matchCondition&&(y[i]=y[i]&&o.matchCondition(null,t))}e.matchCondition&&(y[i]=y[i]&&e.matchCondition(s,t))}if(y[0]||y[1]){if(y[0]!=y[1])return y[1]?w:q;return x}return I}for(p=0;p<this.arguments.length;p++){o=this.arguments[p];l=o.value.eval(t);if(o.expand&&Array.isArray(l.value)){l=l.value;for(h=0;h<l.length;h++)s.push({value:l[h]})}else s.push({name:o.name,value:l})}k=function(e){return e.matchArgs(null,t)};for(p=0;p<t.frames.length;p++)if((e=t.frames[p].find(this.selector,null,k)).length>0){v=true;for(h=0;h<e.length;h++){n=e[h].rule;i=e[h].path;g=false;for(f=0;f<t.frames.length;f++)if(!(n instanceof a)&&n===(t.frames[f].originalRuleset||t.frames[f])){g=true;break}if(g)continue;if(n.matchArgs(s,t)){b={mixin:n,group:A(n,i)};b.group!==I&&m.push(b);d=true}}r.reset();C=[0,0,0];for(h=0;h<m.length;h++)C[m[h].group]++;if(C[x]>0)S=q;else{S=w;if(C[w]+C[q]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(s)+"`",index:this.index,filename:this.currentFileInfo.filename}}for(h=0;h<m.length;h++){b=m[h].group;if(b===x||b===S)try{n=m[h].mixin;if(!(n instanceof a)){P=n.originalRuleset||n;n=new a("",[],n.rules,null,false);n.originalRuleset=P}Array.prototype.push.apply(c,n.evalCall(t,s,this.important).rules)}catch(t){throw{message:t.message,index:this.index,filename:this.currentFileInfo.filename,stack:t.stack}}}if(d){if(!this.currentFileInfo||!this.currentFileInfo.reference)for(p=0;p<c.length;p++){u=c[p];u.markReferenced&&u.markReferenced()}return c}}throw v?{type:"Runtime",message:"No matching definition was found for `"+this.format(s)+"`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}};o.prototype.format=function(t){return this.selector.toCSS().trim()+"("+(t?t.map(function(t){var e="";t.name&&(e+=t.name+":");t.value.toCSS?e+=t.value.toCSS():e+="???";return e}).join(", "):"")+")"};e.exports=o},{"../functions/default":19,"./mixin-definition":67,"./node":69,"./selector":76}],67:[function(t,e,n){var i=t("./selector"),s=t("./element"),a=t("./ruleset"),r=t("./rule"),o=t("./expression"),l=t("../contexts");var c=function(t,e,n,a,r,o){this.name=t;this.selectors=[new i([new s(null,t,this.index,this.currentFileInfo)])];this.params=e;this.condition=a;this.variadic=r;this.arity=e.length;this.rules=n;this._lookups={};var l=[];this.required=e.reduce(function(t,e){if(!e.name||e.name&&!e.value)return t+1;l.push(e.name);return t},0);this.optionalParameters=l;this.frames=o};c.prototype=new a;c.prototype.type="MixinDefinition";c.prototype.evalFirst=true;c.prototype.accept=function(t){this.params&&this.params.length&&(this.params=t.visitArray(this.params));this.rules=t.visitArray(this.rules);this.condition&&(this.condition=t.visit(this.condition))};c.prototype.evalParams=function(t,e,n,i){var s=new a(null,null),c,u,d=this.params.slice(0),p,h,f,g,v,m,b=0;e.frames&&e.frames[0]&&e.frames[0].functionRegistry&&(s.functionRegistry=e.frames[0].functionRegistry.inherit());e=new l.Eval(e,[s].concat(e.frames));if(n){n=n.slice(0);b=n.length;for(p=0;p<b;p++){u=n[p];if(g=u&&u.name){v=false;for(h=0;h<d.length;h++)if(!i[h]&&g===d[h].name){i[h]=u.value.eval(t);s.prependRule(new r(g,u.value.eval(t)));v=true;break}if(v){n.splice(p,1);p--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+n[p].name+" not found"}}}}m=0;for(p=0;p<d.length;p++){if(i[p])continue;u=n&&n[m];if(g=d[p].name)if(d[p].variadic){c=[];for(h=m;h<b;h++)c.push(n[h].value.eval(t));s.prependRule(new r(g,new o(c).eval(t)))}else{f=u&&u.value;if(f)f=f.eval(t);else{if(!d[p].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+b+" for "+this.arity+")"};f=d[p].value.eval(e);s.resetCache()}s.prependRule(new r(g,f));i[p]=f}if(d[p].variadic&&n)for(h=m;h<b;h++)i[h]=n[h].value.eval(t);m++}return s};c.prototype.makeImportant=function(){var t=this.rules?this.rules.map(function(t){return t.makeImportant?t.makeImportant(true):t}):this.rules;var e=new c(this.name,this.params,t,this.condition,this.variadic,this.frames);return e};c.prototype.eval=function(t){return new c(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||t.frames.slice(0))};c.prototype.evalCall=function(t,e,n){var i=[],s=this.frames?this.frames.concat(t.frames):t.frames,c=this.evalParams(t,new l.Eval(t,s),e,i),u,d;c.prependRule(new r("@arguments",new o(i).eval(t)));u=this.rules.slice(0);d=new a(null,u);d.originalRuleset=this;d=d.eval(new l.Eval(t,[this,c].concat(s)));n&&(d=d.makeImportant());return d};c.prototype.matchCondition=function(t,e){if(this.condition&&!this.condition.eval(new l.Eval(e,[this.evalParams(e,new l.Eval(e,this.frames?this.frames.concat(e.frames):e.frames),t,[])].concat(this.frames||[]).concat(e.frames))))return false;return true};c.prototype.matchArgs=function(t,e){var n=t&&t.length||0,i,s=this.optionalParameters;var a=t?t.reduce(function(t,e){return s.indexOf(e.name)<0?t+1:t},0):0;if(this.variadic){if(a<this.required-1)return false}else{if(a<this.required)return false;if(n>this.params.length)return false}i=Math.min(a,this.arity);for(var r=0;r<i;r++)if(!this.params[r].name&&!this.params[r].variadic&&t[r].value.eval(e).toCSS()!=this.params[r].value.eval(e).toCSS())return false;return true};e.exports=c},{"../contexts":10,"./element":57,"./expression":58,"./rule":73,"./ruleset":75,"./selector":76}],68:[function(t,e,n){var i=t("./node"),s=t("./operation"),a=t("./dimension");var r=function(t){this.value=t};r.prototype=new i;r.prototype.type="Negative";r.prototype.genCSS=function(t,e){e.add("-");this.value.genCSS(t,e)};r.prototype.eval=function(t){if(t.isMathOn())return new s("*",[new a(-1),this.value]).eval(t);return new r(this.value.eval(t))};e.exports=r},{"./dimension":55,"./node":69,"./operation":70}],69:[function(t,e,n){var i=function(){};i.prototype.toCSS=function(t){var e=[];this.genCSS(t,{add:function(t,n,i){e.push(t)},isEmpty:function(){return 0===e.length}});return e.join("")};i.prototype.genCSS=function(t,e){e.add(this.value)};i.prototype.accept=function(t){this.value=t.visit(this.value)};i.prototype.eval=function(){return this};i.prototype._operate=function(t,e,n,i){switch(e){case"+":return n+i;case"-":return n-i;case"*":return n*i;case"/":return n/i}};i.prototype.fround=function(t,e){var n=t&&t.numPrecision;return null==n?e:Number((e+2e-16).toFixed(n))};i.compare=function(t,e){if(t.compare&&!("Quoted"===e.type||"Anonymous"===e.type))return t.compare(e);if(e.compare)return-e.compare(t);if(t.type!==e.type)return;t=t.value;e=e.value;if(!Array.isArray(t))return t===e?0:void 0;if(t.length!==e.length)return;for(var n=0;n<t.length;n++)if(0!==i.compare(t[n],e[n]))return;return 0};i.numericCompare=function(t,e){return t<e?-1:t===e?0:t>e?1:void 0};e.exports=i},{}],70:[function(t,e,n){var i=t("./node"),s=t("./color"),a=t("./dimension");var r=function(t,e,n){this.op=t.trim();this.operands=e;this.isSpaced=n};r.prototype=new i;r.prototype.type="Operation";r.prototype.accept=function(t){this.operands=t.visit(this.operands)};r.prototype.eval=function(t){var e=this.operands[0].eval(t),n=this.operands[1].eval(t);if(t.isMathOn()){e instanceof a&&n instanceof s&&(e=e.toColor());n instanceof a&&e instanceof s&&(n=n.toColor());if(!e.operate)throw{type:"Operation",message:"Operation on an invalid type"};return e.operate(t,this.op,n)}return new r(this.op,[e,n],this.isSpaced)};r.prototype.genCSS=function(t,e){this.operands[0].genCSS(t,e);this.isSpaced&&e.add(" ");e.add(this.op);this.isSpaced&&e.add(" ");this.operands[1].genCSS(t,e)};e.exports=r},{"./color":49,"./dimension":55,"./node":69}],71:[function(t,e,n){var i=t("./node");var s=function(t){this.value=t};s.prototype=new i;s.prototype.type="Paren";s.prototype.genCSS=function(t,e){e.add("(");this.value.genCSS(t,e);e.add(")")};s.prototype.eval=function(t){return new s(this.value.eval(t))};e.exports=s},{"./node":69}],72:[function(t,e,n){var i=t("./node"),s=t("./js-eval-node"),a=t("./variable");var r=function(t,e,n,i,s){this.escaped=null==n||n;this.value=e||"";this.quote=t.charAt(0);this.index=i;this.currentFileInfo=s};r.prototype=new s;r.prototype.type="Quoted";r.prototype.genCSS=function(t,e){this.escaped||e.add(this.quote,this.currentFileInfo,this.index);e.add(this.value);this.escaped||e.add(this.quote)};r.prototype.containsVariables=function(){return this.value.match(/(`([^`]+)`)|@\{([\w-]+)\}/)};r.prototype.eval=function(t){var e=this,n=this.value;var i=function(n,i){return String(e.evaluateJavaScript(i,t))};var s=function(n,i){var s=new a("@"+i,e.index,e.currentFileInfo).eval(t,true);return s instanceof r?s.value:s.toCSS()};function o(t,e,n){var i=t;do{t=i;i=t.replace(e,n)}while(t!==i);return i}n=o(n,/`([^`]+)`/g,i);n=o(n,/@\{([\w-]+)\}/g,s);return new r(this.quote+n+this.quote,n,this.escaped,this.index,this.currentFileInfo)};r.prototype.compare=function(t){return"Quoted"!==t.type||this.escaped||t.escaped?t.toCSS&&this.toCSS()===t.toCSS()?0:void 0:i.numericCompare(this.value,t.value)};e.exports=r},{"./js-eval-node":63,"./node":69,"./variable":81}],73:[function(t,e,n){var i=t("./node"),s=t("./value"),a=t("./keyword");var r=function(t,e,n,a,r,o,l,c){this.name=t;this.value=e instanceof i?e:new s([e]);this.important=n?" "+n.trim():"";this.merge=a;this.index=r;this.currentFileInfo=o;this.inline=l||false;this.variable=void 0!==c?c:t.charAt&&"@"===t.charAt(0)};function o(t,e){var n="",i,s=e.length,a={add:function(t){n+=t}};for(i=0;i<s;i++)e[i].eval(t).genCSS(t,a);return n}r.prototype=new i;r.prototype.type="Rule";r.prototype.genCSS=function(t,e){e.add(this.name+(t.compress?":":": "),this.currentFileInfo,this.index);try{this.value.genCSS(t,e)}catch(t){t.index=this.index;t.filename=this.currentFileInfo.filename;throw t}e.add(this.important+(this.inline||t.lastRule&&t.compress?"":";"),this.currentFileInfo,this.index)};r.prototype.eval=function(t){var e=false,n=this.name,i,s=this.variable;if("string"!==typeof n){n=1===n.length&&n[0]instanceof a?n[0].value:o(t,n);s=false}if("font"===n&&!t.strictMath){e=true;t.strictMath=true}try{t.importantScope.push({});i=this.value.eval(t);if(!this.variable&&"DetachedRuleset"===i.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.index,filename:this.currentFileInfo.filename};var l=this.important,c=t.importantScope.pop();!l&&c.important&&(l=c.important);return new r(n,i,l,this.merge,this.index,this.currentFileInfo,this.inline,s)}catch(t){if("number"!==typeof t.index){t.index=this.index;t.filename=this.currentFileInfo.filename}throw t}finally{e&&(t.strictMath=false)}};r.prototype.makeImportant=function(){return new r(this.name,this.value,"!important",this.merge,this.index,this.currentFileInfo,this.inline)};var l=function(t){Array.isArray(t)?t.forEach(function(t){l(t)}):t.markReferenced&&t.markReferenced()};r.prototype.markReferenced=function(){this.value&&l(this.value)};e.exports=r},{"./keyword":64,"./node":69,"./value":80}],74:[function(t,e,n){var i=t("./node"),s=t("./variable");var a=function(t){this.variable=t};a.prototype=new i;a.prototype.type="RulesetCall";a.prototype.eval=function(t){var e=new s(this.variable).eval(t);return e.callEval(t)};e.exports=a},{"./node":69,"./variable":81}],75:[function(t,e,n){var i=t("./node"),s=t("./rule"),a=t("./selector"),r=t("./element"),o=t("./paren"),l=t("../contexts"),c=t("../functions/function-registry"),u=t("../functions/default"),d=t("./debug-info");var p=function(t,e,n){this.selectors=t;this.rules=e;this._lookups={};this.strictImports=n};p.prototype=new i;p.prototype.type="Ruleset";p.prototype.isRuleset=true;p.prototype.isRulesetLike=true;p.prototype.accept=function(t){this.paths?t.visitArray(this.paths,true):this.selectors&&(this.selectors=t.visitArray(this.selectors));this.rules&&this.rules.length&&(this.rules=t.visitArray(this.rules))};p.prototype.eval=function(t){var e=this.selectors,n,i,a,r,o=false;if(e&&(i=e.length)){n=[];u.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"});for(r=0;r<i;r++){a=e[r].eval(t);n.push(a);a.evaldCondition&&(o=true)}u.reset()}else o=true;var l=this.rules?this.rules.slice(0):null,d=new p(n,l,this.strictImports),h,f;d.originalRuleset=this;d.root=this.root;d.firstRoot=this.firstRoot;d.allowImports=this.allowImports;this.debugInfo&&(d.debugInfo=this.debugInfo);o||(l.length=0);d.functionRegistry=function(t){var e=0,n=t.length,i;for(;e!==n;++e){i=t[e].functionRegistry;if(i)return i}return c}(t.frames).inherit();var g=t.frames;g.unshift(d);var v=t.selectors;v||(t.selectors=v=[]);v.unshift(this.selectors);(d.root||d.allowImports||!d.strictImports)&&d.evalImports(t);var m=d.rules,b=m?m.length:0;for(r=0;r<b;r++)m[r].evalFirst&&(m[r]=m[r].eval(t));var y=t.mediaBlocks&&t.mediaBlocks.length||0;for(r=0;r<b;r++)if("MixinCall"===m[r].type){l=m[r].eval(t).filter(function(t){if(t instanceof s&&t.variable)return!d.variable(t.name);return true});m.splice.apply(m,[r,1].concat(l));b+=l.length-1;r+=l.length-1;d.resetCache()}else if("RulesetCall"===m[r].type){l=m[r].eval(t).rules.filter(function(t){if(t instanceof s&&t.variable)return false;return true});m.splice.apply(m,[r,1].concat(l));b+=l.length-1;r+=l.length-1;d.resetCache()}for(r=0;r<m.length;r++){h=m[r];h.evalFirst||(m[r]=h=h.eval?h.eval(t):h)}for(r=0;r<m.length;r++){h=m[r];if(h instanceof p&&h.selectors&&1===h.selectors.length&&h.selectors[0].isJustParentSelector()){m.splice(r--,1);for(var S=0;S<h.rules.length;S++){f=h.rules[S];f instanceof s&&f.variable||m.splice(++r,0,f)}}}g.shift();v.shift();if(t.mediaBlocks)for(r=y;r<t.mediaBlocks.length;r++)t.mediaBlocks[r].bubbleSelectors(n);return d};p.prototype.evalImports=function(t){var e=this.rules,n,i;if(!e)return;for(n=0;n<e.length;n++)if("Import"===e[n].type){i=e[n].eval(t);if(i&&i.length){e.splice.apply(e,[n,1].concat(i));n+=i.length-1}else e.splice(n,1,i);this.resetCache()}};p.prototype.makeImportant=function(){var t=new p(this.selectors,this.rules.map(function(t){return t.makeImportant?t.makeImportant():t}),this.strictImports);return t};p.prototype.matchArgs=function(t){return!t||0===t.length};p.prototype.matchCondition=function(t,e){var n=this.selectors[this.selectors.length-1];if(!n.evaldCondition)return false;if(n.condition&&!n.condition.eval(new l.Eval(e,e.frames)))return false;return true};p.prototype.resetCache=function(){this._rulesets=null;this._variables=null;this._lookups={}};p.prototype.variables=function(){this._variables||(this._variables=this.rules?this.rules.reduce(function(t,e){e instanceof s&&true===e.variable&&(t[e.name]=e);if("Import"===e.type&&e.root&&e.root.variables){var n=e.root.variables();for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t},{}):{});return this._variables};p.prototype.variable=function(t){return this.variables()[t]};p.prototype.rulesets=function(){if(!this.rules)return[];var t=[],e=this.rules,n=e.length,i,s;for(i=0;i<n;i++){s=e[i];s.isRuleset&&t.push(s)}return t};p.prototype.prependRule=function(t){var e=this.rules;e?e.unshift(t):this.rules=[t]};p.prototype.find=function(t,e,n){e=e||this;var i=[],s,r,o=t.toCSS();if(o in this._lookups)return this._lookups[o];this.rulesets().forEach(function(o){if(o!==e)for(var l=0;l<o.selectors.length;l++){s=t.match(o.selectors[l]);if(s){if(t.elements.length>s){if(!n||n(o)){r=o.find(new a(t.elements.slice(s)),e,n);for(var c=0;c<r.length;++c)r[c].path.push(o);Array.prototype.push.apply(i,r)}}else i.push({rule:o,path:[]});break}}});this._lookups[o]=i;return i};p.prototype.genCSS=function(t,e){var n,i,s=[],a=[],r,o,l;t.tabLevel=t.tabLevel||0;this.root||t.tabLevel++;var c=t.compress?"":Array(t.tabLevel+1).join("  "),u=t.compress?"":Array(t.tabLevel).join("  "),p;function h(t){if("boolean"===typeof t.isRulesetLike)return t.isRulesetLike;if("function"===typeof t.isRulesetLike)return t.isRulesetLike();return false}var f=0;var g=0;for(n=0;n<this.rules.length;n++){o=this.rules[n];if("Comment"===o.type){g===n&&g++;a.push(o)}else if(o.isCharset&&o.isCharset()){a.splice(f,0,o);f++;g++}else if("Import"===o.type){a.splice(g,0,o);g++}else a.push(o)}a=s.concat(a);if(!this.root){r=d(t,this,u);if(r){e.add(r);e.add(u)}var v=this.paths,m=v.length,b;p=t.compress?",":",\n"+u;for(n=0;n<m;n++){l=v[n];if(!(b=l.length))continue;n>0&&e.add(p);t.firstSelector=true;l[0].genCSS(t,e);t.firstSelector=false;for(i=1;i<b;i++)l[i].genCSS(t,e)}e.add((t.compress?"{":" {\n")+c)}for(n=0;n<a.length;n++){o=a[n];n+1===a.length&&(t.lastRule=true);var y=t.lastRule;h(o)&&(t.lastRule=false);o.genCSS?o.genCSS(t,e):o.value&&e.add(o.value.toString());t.lastRule=y;t.lastRule?t.lastRule=false:e.add(t.compress?"":"\n"+c)}if(!this.root){e.add(t.compress?"}":"\n"+u+"}");t.tabLevel--}e.isEmpty()||t.compress||!this.firstRoot||e.add("\n")};p.prototype.markReferenced=function(){var t;if(this.selectors)for(t=0;t<this.selectors.length;t++)this.selectors[t].markReferenced();if(this.rules)for(t=0;t<this.rules.length;t++)this.rules[t].markReferenced&&this.rules[t].markReferenced()};p.prototype.getIsReferenced=function(){var t,e,n,i;if(this.paths)for(t=0;t<this.paths.length;t++){n=this.paths[t];for(e=0;e<n.length;e++)if(n[e].getIsReferenced&&n[e].getIsReferenced())return true}if(this.selectors)for(t=0;t<this.selectors.length;t++){i=this.selectors[t];if(i.getIsReferenced&&i.getIsReferenced())return true}return false};p.prototype.joinSelectors=function(t,e,n){for(var i=0;i<n.length;i++)this.joinSelector(t,e,n[i])};p.prototype.joinSelector=function(t,e,n){function i(t,e){var n,i;if(0===t.length)n=new o(t[0]);else{var s=[];for(i=0;i<t.length;i++)s.push(new r(null,t[i],e.index,e.currentFileInfo));n=new o(new a(s))}return n}function s(t,e){var n,i;n=new r(null,t,e.index,e.currentFileInfo);i=new a([n]);return i}function l(t,e,n){var a,o,p,h,f,g,v,m,b=false,y,S;function I(t){var e;if("Paren"!==t.value.type)return null;e=t.value.value;if("Selector"!==e.type)return null;return e}h=[];f=[[]];for(a=0;a<n.elements.length;a++){m=n.elements[a];if("&"!==m.value){var x=I(m);if(null!=x){d(h,f);var w=[],q,C=[];q=l(w,e,x);b=b||q;for(p=0;p<w.length;p++){var P=s(i(w[p],m),m);u(f,[P],m,n,C)}f=C;h=[]}else h.push(m)}else{b=true;g=[];d(h,f);for(o=0;o<f.length;o++){v=f[o];if(0===e.length){v.length>0&&v[0].elements.push(new r(m.combinator,"",m.index,m.currentFileInfo));g.push(v)}else for(p=0;p<e.length;p++){var k=c(v,e[p],m,n);g.push(k)}}f=g;h=[]}}d(h,f);for(a=0;a<f.length;a++){y=f[a].length;if(y>0){t.push(f[a]);S=f[a][y-1];f[a][y-1]=S.createDerived(S.elements,n.extendList)}}return b}function c(t,e,n,i){var s,a,o;s=[];if(t.length>0){s=t.slice(0);a=s.pop();o=i.createDerived(a.elements.slice(0))}else o=i.createDerived([]);if(e.length>0){var l=n.combinator,c=e[0].elements[0];l.emptyOrWhitespace&&!c.combinator.emptyOrWhitespace&&(l=c.combinator);o.elements.push(new r(l,c.value,n.index,n.currentFileInfo));o.elements=o.elements.concat(e[0].elements.slice(1))}0!==o.elements.length&&s.push(o);e.length>1&&(s=s.concat(e.slice(1)));return s}function u(t,e,n,i,s){var a;for(a=0;a<t.length;a++){var r=c(t[a],e,n,i);s.push(r)}return s}function d(t,e){var n,i;if(0===t.length)return;if(0===e.length){e.push([new a(t)]);return}for(n=0;n<e.length;n++){i=e[n];i.length>0?i[i.length-1]=i[i.length-1].createDerived(i[i.length-1].elements.concat(t)):i.push(new a(t))}}var p,h,f;h=[];f=l(h,e,n);if(!f)if(e.length>0){h=[];for(p=0;p<e.length;p++)h.push(e[p].concat(n))}else h=[[n]];for(p=0;p<h.length;p++)t.push(h[p])};e.exports=p},{"../contexts":10,"../functions/default":19,"../functions/function-registry":21,"./debug-info":53,"./element":57,"./node":69,"./paren":71,"./rule":73,"./selector":76}],76:[function(t,e,n){var i=t("./node"),s=t("./element");var a=function(t,e,n,i,s,a){this.elements=t;this.extendList=e;this.condition=n;this.currentFileInfo=s||{};this.isReferenced=a;n||(this.evaldCondition=true)};a.prototype=new i;a.prototype.type="Selector";a.prototype.accept=function(t){this.elements&&(this.elements=t.visitArray(this.elements));this.extendList&&(this.extendList=t.visitArray(this.extendList));this.condition&&(this.condition=t.visit(this.condition))};a.prototype.createDerived=function(t,e,n){n=null!=n?n:this.evaldCondition;var i=new a(t,e||this.extendList,null,this.index,this.currentFileInfo,this.isReferenced);i.evaldCondition=n;i.mediaEmpty=this.mediaEmpty;return i};a.prototype.createEmptySelectors=function(){var t=new s("","&",this.index,this.currentFileInfo),e=[new a([t],null,null,this.index,this.currentFileInfo)];e[0].mediaEmpty=true;return e};a.prototype.match=function(t){var e=this.elements,n=e.length,i,s;t.CacheElements();i=t._elements.length;if(0===i||n<i)return 0;for(s=0;s<i;s++)if(e[s].value!==t._elements[s])return 0;return i};a.prototype.CacheElements=function(){if(this._elements)return;var t=this.elements.map(function(t){return t.combinator.value+(t.value.value||t.value)}).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);t?"&"===t[0]&&t.shift():t=[];this._elements=t};a.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)};a.prototype.eval=function(t){var e=this.condition&&this.condition.eval(t),n=this.elements,i=this.extendList;n=n&&n.map(function(e){return e.eval(t)});i=i&&i.map(function(e){return e.eval(t)});return this.createDerived(n,i,e)};a.prototype.genCSS=function(t,e){var n,i;t&&t.firstSelector||""!==this.elements[0].combinator.value||e.add(" ",this.currentFileInfo,this.index);if(!this._css)for(n=0;n<this.elements.length;n++){i=this.elements[n];i.genCSS(t,e)}};a.prototype.markReferenced=function(){this.isReferenced=true};a.prototype.getIsReferenced=function(){return!this.currentFileInfo.reference||this.isReferenced};a.prototype.getIsOutput=function(){return this.evaldCondition};e.exports=a},{"./element":57,"./node":69}],77:[function(t,e,n){var i=t("./node");var s=function(t){this.value=t};s.prototype=new i;s.prototype.type="UnicodeDescriptor";e.exports=s},{"./node":69}],78:[function(t,e,n){var i=t("./node"),s=t("../data/unit-conversions");var a=function(t,e,n){this.numerator=t?t.slice(0).sort():[];this.denominator=e?e.slice(0).sort():[];n?this.backupUnit=n:t&&t.length&&(this.backupUnit=t[0])};a.prototype=new i;a.prototype.type="Unit";a.prototype.clone=function(){return new a(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)};a.prototype.genCSS=function(t,e){var n=t&&t.strictUnits;1===this.numerator.length?e.add(this.numerator[0]):!n&&this.backupUnit?e.add(this.backupUnit):!n&&this.denominator.length&&e.add(this.denominator[0])};a.prototype.toString=function(){var t,e=this.numerator.join("*");for(t=0;t<this.denominator.length;t++)e+="/"+this.denominator[t];return e};a.prototype.compare=function(t){return this.is(t.toString())?0:void 0};a.prototype.is=function(t){return this.toString().toUpperCase()===t.toUpperCase()};a.prototype.isLength=function(){return Boolean(this.toCSS().match(/px|em|%|in|cm|mm|pc|pt|ex/))};a.prototype.isEmpty=function(){return 0===this.numerator.length&&0===this.denominator.length};a.prototype.isSingular=function(){return this.numerator.length<=1&&0===this.denominator.length};a.prototype.map=function(t){var e;for(e=0;e<this.numerator.length;e++)this.numerator[e]=t(this.numerator[e],false);for(e=0;e<this.denominator.length;e++)this.denominator[e]=t(this.denominator[e],true)};a.prototype.usedUnits=function(){var t,e={},n;n=function(n){t.hasOwnProperty(n)&&!e[i]&&(e[i]=n);return n};for(var i in s)if(s.hasOwnProperty(i)){t=s[i];this.map(n)}return e};a.prototype.cancel=function(){var t={},e,n;for(n=0;n<this.numerator.length;n++){e=this.numerator[n];t[e]=(t[e]||0)+1}for(n=0;n<this.denominator.length;n++){e=this.denominator[n];t[e]=(t[e]||0)-1}this.numerator=[];this.denominator=[];for(e in t)if(t.hasOwnProperty(e)){var i=t[e];if(i>0)for(n=0;n<i;n++)this.numerator.push(e);else if(i<0)for(n=0;n<-i;n++)this.denominator.push(e)}this.numerator.sort();this.denominator.sort()};e.exports=a},{"../data/unit-conversions":13,"./node":69}],79:[function(t,e,n){var i=t("./node");var s=function(t,e,n,i){this.value=t;this.currentFileInfo=n;this.index=e;this.isEvald=i};s.prototype=new i;s.prototype.type="Url";s.prototype.accept=function(t){this.value=t.visit(this.value)};s.prototype.genCSS=function(t,e){e.add("url(");this.value.genCSS(t,e);e.add(")")};s.prototype.eval=function(t){var e=this.value.eval(t),n;if(!this.isEvald){n=this.currentFileInfo&&this.currentFileInfo.rootpath;if(n&&"string"===typeof e.value&&t.isPathRelative(e.value)){e.quote||(n=n.replace(/[\(\)'"\s]/g,function(t){return"\\"+t}));e.value=n+e.value}e.value=t.normalizePath(e.value);if(t.urlArgs&&!e.value.match(/^\s*data:/)){var i=-1===e.value.indexOf("?")?"?":"&";var a=i+t.urlArgs;-1!==e.value.indexOf("#")?e.value=e.value.replace("#",a+"#"):e.value+=a}}return new s(e,this.index,this.currentFileInfo,true)};e.exports=s},{"./node":69}],80:[function(t,e,n){var i=t("./node");var s=function(t){this.value=t;if(!t)throw new Error("Value requires an array argument")};s.prototype=new i;s.prototype.type="Value";s.prototype.accept=function(t){this.value&&(this.value=t.visitArray(this.value))};s.prototype.eval=function(t){return 1===this.value.length?this.value[0].eval(t):new s(this.value.map(function(e){return e.eval(t)}))};s.prototype.genCSS=function(t,e){var n;for(n=0;n<this.value.length;n++){this.value[n].genCSS(t,e);n+1<this.value.length&&e.add(t&&t.compress?",":", ")}};e.exports=s},{"./node":69}],81:[function(t,e,n){var i=t("./node");var s=function(t,e,n){this.name=t;this.index=e;this.currentFileInfo=n||{}};s.prototype=new i;s.prototype.type="Variable";s.prototype.eval=function(t){var e,n=this.name;0===n.indexOf("@@")&&(n="@"+new s(n.slice(1),this.index,this.currentFileInfo).eval(t).value);if(this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+n,filename:this.currentFileInfo.filename,index:this.index};this.evaluating=true;e=this.find(t.frames,function(e){var i=e.variable(n);if(i){if(i.important){var s=t.importantScope[t.importantScope.length-1];s.important=i.important}return i.value.eval(t)}});if(e){this.evaluating=false;return e}throw{type:"Name",message:"variable "+n+" is undefined",filename:this.currentFileInfo.filename,index:this.index}};s.prototype.find=function(t,e){for(var n=0,i;n<t.length;n++){i=e.call(t,t[n]);if(i)return i}return null};e.exports=s},{"./node":69}],82:[function(t,e,n){e.exports={getLocation:function(t,e){var n=t+1,i=null,s=-1;while(--n>=0&&"\n"!==e.charAt(n))s++;"number"===typeof t&&(i=(e.slice(0,t).match(/\n/g)||"").length);return{line:i,column:s}}}},{}],83:[function(t,e,n){var i=t("../tree"),s=t("./visitor"),a=t("../logger");var r=function(){this._visitor=new s(this);this.contexts=[];this.allExtendsStack=[[]]};r.prototype={run:function(t){t=this._visitor.visit(t);t.allExtends=this.allExtendsStack[0];return t},visitRule:function(t,e){e.visitDeeper=false},visitMixinDefinition:function(t,e){e.visitDeeper=false},visitRuleset:function(t,e){if(t.root)return;var n,s,a,r=[],o;var l=t.rules,c=l?l.length:0;for(n=0;n<c;n++)if(t.rules[n]instanceof i.Extend){r.push(l[n]);t.extendOnEveryPath=true}var u=t.paths;for(n=0;n<u.length;n++){var d=u[n],p=d[d.length-1],h=p.extendList;o=h?h.slice(0).concat(r):r;o&&(o=o.map(function(t){return t.clone()}));for(s=0;s<o.length;s++){this.foundExtends=true;a=o[s];a.findSelfSelectors(d);a.ruleset=t;0===s&&(a.firstExtendOnThisSelectorPath=true);this.allExtendsStack[this.allExtendsStack.length-1].push(a)}}this.contexts.push(t.selectors)},visitRulesetOut:function(t){t.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(t,e){t.allExtends=[];this.allExtendsStack.push(t.allExtends)},visitMediaOut:function(t){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(t,e){t.allExtends=[];this.allExtendsStack.push(t.allExtends)},visitDirectiveOut:function(t){this.allExtendsStack.length=this.allExtendsStack.length-1}};var o=function(){this._visitor=new s(this)};o.prototype={run:function(t){var e=new r;this.extendIndicies={};e.run(t);if(!e.foundExtends)return t;t.allExtends=t.allExtends.concat(this.doExtendChaining(t.allExtends,t.allExtends));this.allExtendsStack=[t.allExtends];var n=this._visitor.visit(t);this.checkExtendsForNonMatched(t.allExtends);return n},checkExtendsForNonMatched:function(t){var e=this.extendIndicies;t.filter(function(t){return!t.hasFoundMatches&&1==t.parent_ids.length}).forEach(function(t){var n="_unknown_";try{n=t.selector.toCSS({})}catch(t){}if(!e[t.index+" "+n]){e[t.index+" "+n]=true;a.warn("extend '"+n+"' has no matches")}})},doExtendChaining:function(t,e,n){var s,a,r,o=[],l,c=this,u,d,p,h;n=n||0;for(s=0;s<t.length;s++)for(a=0;a<e.length;a++){d=t[s];p=e[a];if(d.parent_ids.indexOf(p.object_id)>=0)continue;u=[p.selfSelectors[0]];r=c.findMatch(d,u);if(r.length){d.hasFoundMatches=true;d.selfSelectors.forEach(function(t){l=c.extendSelector(r,u,t);h=new i.Extend(p.selector,p.option,0);h.selfSelectors=l;l[l.length-1].extendList=[h];o.push(h);h.ruleset=p.ruleset;h.parent_ids=h.parent_ids.concat(p.parent_ids,d.parent_ids);if(p.firstExtendOnThisSelectorPath){h.firstExtendOnThisSelectorPath=true;p.ruleset.paths.push(l)}})}}if(o.length){this.extendChainCount++;if(n>100){var f="{unable to calculate}";var g="{unable to calculate}";try{f=o[0].selfSelectors[0].toCSS();g=o[0].selector.toCSS()}catch(t){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+f+":extend("+g+")"}}return o.concat(c.doExtendChaining(o,e,n+1))}return o},visitRule:function(t,e){e.visitDeeper=false},visitMixinDefinition:function(t,e){e.visitDeeper=false},visitSelector:function(t,e){e.visitDeeper=false},visitRuleset:function(t,e){if(t.root)return;var n,i,s,a=this.allExtendsStack[this.allExtendsStack.length-1],r=[],o=this,l;for(s=0;s<a.length;s++)for(i=0;i<t.paths.length;i++){l=t.paths[i];if(t.extendOnEveryPath)continue;var c=l[l.length-1].extendList;if(c&&c.length)continue;n=this.findMatch(a[s],l);if(n.length){a[s].hasFoundMatches=true;a[s].selfSelectors.forEach(function(t){r.push(o.extendSelector(n,l,t))})}}t.paths=t.paths.concat(r)},findMatch:function(t,e){var n,i,s,a,r,o,l=this,c=t.selector.elements,u=[],d,p=[];for(n=0;n<e.length;n++){i=e[n];for(s=0;s<i.elements.length;s++){a=i.elements[s];(t.allowBefore||0===n&&0===s)&&u.push({pathIndex:n,index:s,matched:0,initialCombinator:a.combinator});for(o=0;o<u.length;o++){d=u[o];r=a.combinator.value;""===r&&0===s&&(r=" ");!l.isElementValuesEqual(c[d.matched].value,a.value)||d.matched>0&&c[d.matched].combinator.value!==r?d=null:d.matched++;if(d){d.finished=d.matched===c.length;d.finished&&!t.allowAfter&&(s+1<i.elements.length||n+1<e.length)&&(d=null)}if(d){if(d.finished){d.length=c.length;d.endPathIndex=n;d.endPathElementIndex=s+1;u.length=0;p.push(d)}}else{u.splice(o,1);o--}}}}return p},isElementValuesEqual:function(t,e){if("string"===typeof t||"string"===typeof e)return t===e;if(t instanceof i.Attribute){if(t.op!==e.op||t.key!==e.key)return false;if(!t.value||!e.value){if(t.value||e.value)return false;return true}t=t.value.value||t.value;e=e.value.value||e.value;return t===e}t=t.value;e=e.value;if(t instanceof i.Selector){if(!(e instanceof i.Selector)||t.elements.length!==e.elements.length)return false;for(var n=0;n<t.elements.length;n++){if(t.elements[n].combinator.value!==e.elements[n].combinator.value&&(0!==n||(t.elements[n].combinator.value||" ")!==(e.elements[n].combinator.value||" ")))return false;if(!this.isElementValuesEqual(t.elements[n].value,e.elements[n].value))return false}return true}return false},extendSelector:function(t,e,n){var s=0,a=0,r=[],o,l,c,u,d;for(o=0;o<t.length;o++){u=t[o];l=e[u.pathIndex];c=new i.Element(u.initialCombinator,n.elements[0].value,n.elements[0].index,n.elements[0].currentFileInfo);if(u.pathIndex>s&&a>0){r[r.length-1].elements=r[r.length-1].elements.concat(e[s].elements.slice(a));a=0;s++}d=l.elements.slice(a,u.index).concat([c]).concat(n.elements.slice(1));if(s===u.pathIndex&&o>0)r[r.length-1].elements=r[r.length-1].elements.concat(d);else{r=r.concat(e.slice(s,u.pathIndex));r.push(new i.Selector(d))}s=u.endPathIndex;a=u.endPathElementIndex;if(a>=e[s].elements.length){a=0;s++}}if(s<e.length&&a>0){r[r.length-1].elements=r[r.length-1].elements.concat(e[s].elements.slice(a));s++}r=r.concat(e.slice(s,e.length));return r},visitRulesetOut:function(t){},visitMedia:function(t,e){var n=t.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,t.allExtends));this.allExtendsStack.push(n)},visitMediaOut:function(t){var e=this.allExtendsStack.length-1;this.allExtendsStack.length=e},visitDirective:function(t,e){var n=t.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,t.allExtends));this.allExtendsStack.push(n)},visitDirectiveOut:function(t){var e=this.allExtendsStack.length-1;this.allExtendsStack.length=e}};e.exports=o},{"../logger":32,"../tree":61,"./visitor":89}],84:[function(t,e,n){function i(t){this.imports=[];this.variableImports=[];this._onSequencerEmpty=t;this._currentDepth=0}i.prototype.addImport=function(t){var e=this,n={callback:t,args:null,isReady:false};this.imports.push(n);return function(){n.args=Array.prototype.slice.call(arguments,0);n.isReady=true;e.tryRun()}};i.prototype.addVariableImport=function(t){this.variableImports.push(t)};i.prototype.tryRun=function(){this._currentDepth++;try{while(true){while(this.imports.length>0){var t=this.imports[0];if(!t.isReady)return;this.imports=this.imports.slice(1);t.callback.apply(null,t.args)}if(0===this.variableImports.length)break;var e=this.variableImports[0];this.variableImports=this.variableImports.slice(1);e()}}finally{this._currentDepth--}0===this._currentDepth&&this._onSequencerEmpty&&this._onSequencerEmpty()};e.exports=i},{}],85:[function(t,e,n){var i=t("../contexts"),s=t("./visitor"),a=t("./import-sequencer");var r=function(t,e){this._visitor=new s(this);this._importer=t;this._finish=e;this.context=new i.Eval;this.importCount=0;this.onceFileDetectionMap={};this.recursionDetector={};this._sequencer=new a(this._onSequencerEmpty.bind(this))};r.prototype={isReplacing:false,run:function(t){try{this._visitor.visit(t)}catch(t){this.error=t}this.isFinished=true;this._sequencer.tryRun()},_onSequencerEmpty:function(){if(!this.isFinished)return;this._finish(this.error)},visitImport:function(t,e){var n=t.options.inline;if(!t.css||n){var s=new i.Eval(this.context,this.context.frames.slice(0));var a=s.frames[0];this.importCount++;t.isVariableImport()?this._sequencer.addVariableImport(this.processImportNode.bind(this,t,s,a)):this.processImportNode(t,s,a)}e.visitDeeper=false},processImportNode:function(t,e,n){var i,s=t.options.inline;try{i=t.evalForImport(e)}catch(e){if(!e.filename){e.index=t.index;e.filename=t.currentFileInfo.filename}t.css=true;t.error=e}if(!i||i.css&&!s){this.importCount--;this.isFinished&&this._sequencer.tryRun()}else{i.options.multiple&&(e.importMultiple=true);var a=void 0===i.css;for(var r=0;r<n.rules.length;r++)if(n.rules[r]===t){n.rules[r]=i;break}var o=this.onImported.bind(this,i,e),l=this._sequencer.addImport(o);this._importer.push(i.getPath(),a,i.currentFileInfo,i.options,l)}},onImported:function(t,e,n,i,s,a){if(n){if(!n.filename){n.index=t.index;n.filename=t.currentFileInfo.filename}this.error=n}var r=this,o=t.options.inline,l=t.options.plugin,c=t.options.optional,u=s||a in r.recursionDetector;e.importMultiple||(t.skip=!!u||function(){if(a in r.onceFileDetectionMap)return true;r.onceFileDetectionMap[a]=true;return false});!a&&c&&(t.skip=true);if(i){t.root=i;t.importedFilename=a;if(!o&&!l&&(e.importMultiple||!u)){r.recursionDetector[a]=true;var d=this.context;this.context=e;try{this._visitor.visit(i)}catch(n){this.error=n}this.context=d}}r.importCount--;r.isFinished&&r._sequencer.tryRun()},visitRule:function(t,e){"DetachedRuleset"===t.value.type?this.context.frames.unshift(t):e.visitDeeper=false},visitRuleOut:function(t){"DetachedRuleset"===t.value.type&&this.context.frames.shift()},visitDirective:function(t,e){this.context.frames.unshift(t)},visitDirectiveOut:function(t){this.context.frames.shift()},visitMixinDefinition:function(t,e){this.context.frames.unshift(t)},visitMixinDefinitionOut:function(t){this.context.frames.shift()},visitRuleset:function(t,e){this.context.frames.unshift(t)},visitRulesetOut:function(t){this.context.frames.shift()},visitMedia:function(t,e){this.context.frames.unshift(t.rules[0])},visitMediaOut:function(t){this.context.frames.shift()}};e.exports=r},{"../contexts":10,"./import-sequencer":84,"./visitor":89}],86:[function(t,e,n){var i={Visitor:t("./visitor"),ImportVisitor:t("./import-visitor"),ExtendVisitor:t("./extend-visitor"),JoinSelectorVisitor:t("./join-selector-visitor"),ToCSSVisitor:t("./to-css-visitor")};e.exports=i},{"./extend-visitor":83,"./import-visitor":85,"./join-selector-visitor":87,"./to-css-visitor":88,"./visitor":89}],87:[function(t,e,n){var i=t("./visitor");var s=function(){this.contexts=[[]];this._visitor=new i(this)};s.prototype={run:function(t){return this._visitor.visit(t)},visitRule:function(t,e){e.visitDeeper=false},visitMixinDefinition:function(t,e){e.visitDeeper=false},visitRuleset:function(t,e){var n=this.contexts[this.contexts.length-1],i=[],s;this.contexts.push(i);if(!t.root){s=t.selectors;if(s){s=s.filter(function(t){return t.getIsOutput()});t.selectors=s.length?s:s=null;s&&t.joinSelectors(i,n,s)}s||(t.rules=null);t.paths=i}},visitRulesetOut:function(t){this.contexts.length=this.contexts.length-1},visitMedia:function(t,e){var n=this.contexts[this.contexts.length-1];t.rules[0].root=0===n.length||n[0].multiMedia},visitDirective:function(t,e){var n=this.contexts[this.contexts.length-1];t.rules&&t.rules.length&&(t.rules[0].root=t.isRooted||0===n.length||null)}};e.exports=s},{"./visitor":89}],88:[function(t,e,n){var i=t("../tree"),s=t("./visitor");var a=function(t){this._visitor=new s(this);this._context=t};a.prototype={isReplacing:true,run:function(t){return this._visitor.visit(t)},visitRule:function(t,e){if(t.variable)return;return t},visitMixinDefinition:function(t,e){t.frames=[]},visitExtend:function(t,e){},visitComment:function(t,e){if(t.isSilent(this._context))return;return t},visitMedia:function(t,e){t.accept(this._visitor);e.visitDeeper=false;if(!t.rules.length)return;return t},visitImport:function(t,e){if(void 0!==t.path.currentFileInfo.reference&&t.css)return;return t},visitDirective:function(t,e){if("@charset"===t.name){if(!t.getIsReferenced())return;if(this.charset){if(t.debugInfo){var n=new i.Comment("/* "+t.toCSS(this._context).replace(/\n/g,"")+" */\n");n.debugInfo=t.debugInfo;return this._visitor.visit(n)}return}this.charset=true}function s(t){var e,n=t.rules;1!==n.length||n[0].paths&&0!==n[0].paths.length||(n=n[0].rules);for(var i=0;i<n.length;i++){e=n[i];if(e.getIsReferenced&&e.getIsReferenced())return true}return false}if(t.rules&&t.rules.length){this._mergeRules(t.rules[0].rules);t.accept(this._visitor);e.visitDeeper=false;if(t.getIsReferenced())return t;if(!t.rules||!t.rules.length)return;if(s(t)){t.markReferenced();return t}return}if(!t.getIsReferenced())return;return t},checkPropertiesInRoot:function(t){var e;for(var n=0;n<t.length;n++){e=t[n];if(e instanceof i.Rule&&!e.variable)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:e.index,filename:e.currentFileInfo?e.currentFileInfo.filename:null}}},visitRuleset:function(t,e){var n,s=[];t.firstRoot&&this.checkPropertiesInRoot(t.rules);if(t.root){t.accept(this._visitor);e.visitDeeper=false;(t.firstRoot||t.rules&&t.rules.length>0)&&s.splice(0,0,t)}else{t.paths&&(t.paths=t.paths.filter(function(t){var e;" "===t[0].elements[0].combinator.value&&(t[0].elements[0].combinator=new i.Combinator(""));for(e=0;e<t.length;e++)if(t[e].getIsReferenced()&&t[e].getIsOutput())return true;return false}));var a=t.rules,r=a?a.length:0;for(var o=0;o<r;){n=a[o];if(n&&n.rules){s.push(this._visitor.visit(n));a.splice(o,1);r--;continue}o++}r>0?t.accept(this._visitor):t.rules=null;e.visitDeeper=false;a=t.rules;if(a){this._mergeRules(a);a=t.rules}if(a){this._removeDuplicateRules(a);a=t.rules}a&&a.length>0&&t.paths.length>0&&s.splice(0,0,t)}if(1===s.length)return s[0];return s},_removeDuplicateRules:function(t){if(!t)return;var e={},n,s,a;for(a=t.length-1;a>=0;a--){s=t[a];if(s instanceof i.Rule)if(e[s.name]){n=e[s.name];n instanceof i.Rule&&(n=e[s.name]=[e[s.name].toCSS(this._context)]);var r=s.toCSS(this._context);-1!==n.indexOf(r)?t.splice(a,1):n.push(r)}else e[s.name]=s}},_mergeRules:function(t){if(!t)return;var e={},n,s,a;for(var r=0;r<t.length;r++){s=t[r];if(s instanceof i.Rule&&s.merge){a=[s.name,s.important?"!":""].join(",");e[a]?t.splice(r--,1):e[a]=[];e[a].push(s)}}Object.keys(e).map(function(t){function a(t){return new i.Expression(t.map(function(t){return t.value}))}function r(t){return new i.Value(t.map(function(t){return t}))}n=e[t];if(n.length>1){s=n[0];var o=[];var l=[];n.map(function(t){if("+"===t.merge){l.length>0&&o.push(a(l));l=[]}l.push(t)});o.push(a(l));s.value=r(o)}})},visitAnonymous:function(t,e){if(!t.getIsReferenced())return;t.accept(this._visitor);return t}};e.exports=a},{"../tree":61,"./visitor":89}],89:[function(t,e,n){var i=t("../tree");var s={visitDeeper:true},a=false;function r(t){return t}function o(t,e){var n,i;for(n in t)if(t.hasOwnProperty(n)){i=t[n];switch(typeof i){case"function":i.prototype&&i.prototype.type&&(i.prototype.typeIndex=e++);break;case"object":e=o(i,e);break}}return e}var l=function(t){this._implementation=t;this._visitFnCache=[];if(!a){o(i,1);a=true}};l.prototype={visit:function(t){if(!t)return t;var e=t.typeIndex;if(!e)return t;var n=this._visitFnCache,i=this._implementation,a=e<<1,o=1|a,l=n[a],c=n[o],u=s,d;u.visitDeeper=true;if(!l){d="visit"+t.type;l=i[d]||r;c=i[d+"Out"]||r;n[a]=l;n[o]=c}if(l!==r){var p=l.call(i,t,u);i.isReplacing&&(t=p)}u.visitDeeper&&t&&t.accept&&t.accept(this);c!=r&&c.call(i,t);return t},visitArray:function(t,e){if(!t)return t;var n=t.length,i;if(e||!this._implementation.isReplacing){for(i=0;i<n;i++)this.visit(t[i]);return t}var s=[];for(i=0;i<n;i++){var a=this.visit(t[i]);if(void 0===a)continue;a.splice?a.length&&this.flatten(a,s):s.push(a)}return s},flatten:function(t,e){e||(e=[]);var n,i,s,a,r,o;for(i=0,n=t.length;i<n;i++){s=t[i];if(void 0===s)continue;if(!s.splice){e.push(s);continue}for(r=0,a=s.length;r<a;r++){o=s[r];if(void 0===o)continue;o.splice?o.length&&this.flatten(o,e):e.push(o)}}return e}};e.exports=l},{"../tree":61}],90:[function(t,e,n){var i=e.exports={};var s=[];var a=false;function r(){if(a)return;a=true;var t;var e=s.length;while(e){t=s;s=[];var n=-1;while(++n<e)t[n]();e=s.length}a=false}i.nextTick=function(t){s.push(t);a||setTimeout(r,0)};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function o(){}i.on=o;i.addListener=o;i.once=o;i.off=o;i.removeListener=o;i.removeAllListeners=o;i.emit=o;i.binding=function(t){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(t){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}],91:[function(t,e,n){"use strict";var i=t("asap");e.exports=s;function s(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");var e=null;var n=null;var s=[];var o=this;this.then=function(t,e){return new o.constructor(function(n,i){l(new a(t,e,n,i))})};function l(t){if(null===e){s.push(t);return}i(function(){var i=e?t.onFulfilled:t.onRejected;if(null===i){(e?t.resolve:t.reject)(n);return}var s;try{s=i(n)}catch(e){t.reject(e);return}t.resolve(s)})}function c(t){try{if(t===o)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var i=t.then;if("function"===typeof i){r(i.bind(t),c,u);return}}e=true;n=t;d()}catch(t){u(t)}}function u(t){e=false;n=t;d()}function d(){for(var t=0,e=s.length;t<e;t++)l(s[t]);s=null}r(t,c,u)}function a(t,e,n,i){this.onFulfilled="function"===typeof t?t:null;this.onRejected="function"===typeof e?e:null;this.resolve=n;this.reject=i}function r(t,e,n){var i=false;try{t(function(t){if(i)return;i=true;e(t)},function(t){if(i)return;i=true;n(t)})}catch(t){if(i)return;i=true;n(t)}}},{asap:93}],92:[function(t,e,n){"use strict";var i=t("./core.js");var s=t("asap");e.exports=i;function a(t){this.then=function(e){if("function"!==typeof e)return this;return new i(function(n,i){s(function(){try{n(e(t))}catch(t){i(t)}})})}}a.prototype=i.prototype;var r=new a(true);var o=new a(false);var l=new a(null);var c=new a(void 0);var u=new a(0);var d=new a("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return l;if(void 0===t)return c;if(true===t)return r;if(false===t)return o;if(0===t)return u;if(""===t)return d;if("object"===typeof t||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new i(e.bind(t))}catch(t){return new i(function(e,n){n(t)})}return new a(t)};i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){if(0===e.length)return t([]);var i=e.length;function s(a,r){try{if(r&&("object"===typeof r||"function"===typeof r)){var o=r.then;if("function"===typeof o){o.call(r,function(t){s(a,t)},n);return}}e[a]=r;0===--i&&t(e)}catch(t){n(t)}}for(var a=0;a<e.length;a++)s(a,e[a])})};i.reject=function(t){return new i(function(e,n){n(t)})};i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})};i.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":91,asap:93}],93:[function(t,n,i){(function(t){var i={task:void 0,next:null};var s=i;var a=false;var r=void 0;var o=false;function l(){while(i.next){i=i.next;var t=i.task;i.task=void 0;var e=i.domain;if(e){i.domain=void 0;e.enter()}try{t()}catch(t){if(o){e&&e.exit();setTimeout(l,0);e&&e.enter();throw t}setTimeout(function(){throw t},0)}e&&e.exit()}a=false}if("undefined"!==typeof t&&t.nextTick){o=true;r=function(){t.nextTick(l)}}else if("function"===typeof e)r="undefined"!==typeof window?e.bind(window,l):function(){e(l)};else if("undefined"!==typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=l;r=function(){c.port2.postMessage(0)}}else r=function(){setTimeout(l,0)};function u(e){s=s.next={task:e,domain:o&&t.domain,next:null};if(!a){a=true;r()}}n.exports=u}).call(this,t("_process"))},{_process:90}],94:[function(t,e,n){"function"!==typeof Promise.prototype.done&&(Promise.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){setTimeout(function(){throw t},0)})})},{}],95:[function(t,e,n){var i=t("asap");if("undefined"===typeof Promise){Promise=t("./lib/core.js");t("./lib/es6-extensions.js")}t("./polyfill-done.js")},{"./lib/core.js":91,"./lib/es6-extensions.js":92,"./polyfill-done.js":94,asap:93}]},{},[2])(2)})}).call(this,n(2207).setImmediate)},2207:function(t,e,n){(function(t){var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window;var s=Function.prototype.apply;e.setTimeout=function(){return new a(s.call(setTimeout,i,arguments),clearTimeout)};e.setInterval=function(){return new a(s.call(setInterval,i,arguments),clearInterval)};e.clearTimeout=e.clearInterval=function(t){t&&t.close()};function a(t,e){this._id=t;this._clearFn=e}a.prototype.unref=a.prototype.ref=function(){};a.prototype.close=function(){this._clearFn.call(i,this._id)};e.enroll=function(t,e){clearTimeout(t._idleTimeoutId);t._idleTimeout=e};e.unenroll=function(t){clearTimeout(t._idleTimeoutId);t._idleTimeout=-1};e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function e(){t._onTimeout&&t._onTimeout()},e))};n(2208);e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate;e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(15))},2208:function(t,e,n){(function(t,e){(function(t,n){"use strict";if(t.setImmediate)return;var i=1;var s={};var a=false;var r=t.document;var o;function l(t){"function"!==typeof t&&(t=new Function(""+t));var e=new Array(arguments.length-1);for(var n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};s[i]=a;o(i);return i++}function c(t){delete s[t]}function u(t){var e=t.callback;var i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i);break}}function d(t){if(a)setTimeout(d,0,t);else{var e=s[t];if(e){a=true;try{u(e)}finally{c(t);a=false}}}}function p(){o=function(t){e.nextTick(function(){d(t)})}}function h(){if(t.postMessage&&!t.importScripts){var e=true;var n=t.onmessage;t.onmessage=function(){e=false};t.postMessage("","*");t.onmessage=n;return e}}function f(){var e="setImmediate$"+Math.random()+"$";var n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&d(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,false):t.attachEvent("onmessage",n);o=function(n){t.postMessage(e+n,"*")}}function g(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;d(e)};o=function(e){t.port2.postMessage(e)}}function v(){var t=r.documentElement;o=function(e){var n=r.createElement("script");n.onreadystatechange=function(){d(e);n.onreadystatechange=null;t.removeChild(n);n=null};t.appendChild(n)}}function m(){o=function(t){setTimeout(d,0,t)}}var b=Object.getPrototypeOf&&Object.getPrototypeOf(t);b=b&&b.setTimeout?b:t;"[object process]"==={}.toString.call(t.process)?p():h()?f():t.MessageChannel?g():r&&"onreadystatechange"in r.createElement("script")?v():m();b.setImmediate=l;b.clearImmediate=c})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n(15),n(4))},2209:function(t,e,n){(function(e){(function(){var i=window.ResizeSensor;(true,"undefined"!==typeof t.exports)&&(i=n(2210));var s=this.ElementQueries=function(){var t=false;var n=[];function a(t){t||(t=document.documentElement);var e=getComputedStyle(t,"fontSize");return parseFloat(e)||16}function r(t,e){var n=e.replace(/[0-9]*/,"");e=parseFloat(e);switch(n){case"px":return e;case"em":return e*a(t);case"rem":return e*a();case"vw":return e*document.documentElement.clientWidth/100;case"vh":return e*document.documentElement.clientHeight/100;case"vmin":case"vmax":var i=document.documentElement.clientWidth/100;var s=document.documentElement.clientHeight/100;var r=Math["vmin"===n?"min":"max"];return e*r(i,s);default:return e}}function o(t){this.element=t;this.options={};var e,n,i=0,s=0,a,o,l,c,u;this.addOption=function(t){var e=[t.mode,t.property,t.value].join(",");this.options[e]=t};var d=["min-width","min-height","max-width","max-height"];this.call=function(){i=this.element.offsetWidth;s=this.element.offsetHeight;l={};for(e in this.options){if(!this.options.hasOwnProperty(e))continue;n=this.options[e];a=r(this.element,n.value);o="width"==n.property?i:s;u=n.mode+"-"+n.property;c="";"min"==n.mode&&o>=a&&(c+=n.value);"max"==n.mode&&o<=a&&(c+=n.value);l[u]||(l[u]="");c&&-1===(" "+l[u]+" ").indexOf(" "+c+" ")&&(l[u]+=" "+c)}for(var t in d){if(!d.hasOwnProperty(t))continue;l[d[t]]?this.element.setAttribute(d[t],l[d[t]].substr(1)):this.element.removeAttribute(d[t])}}}function l(e,s){if(e.elementQueriesSetupInformation)e.elementQueriesSetupInformation.addOption(s);else{e.elementQueriesSetupInformation=new o(e);e.elementQueriesSetupInformation.addOption(s);e.elementQueriesSensor=new i(e,function(){e.elementQueriesSetupInformation.call()})}e.elementQueriesSetupInformation.call();t&&n.indexOf(e)<0&&n.push(e)}var c={};function u(t,e,n,i){"undefined"==typeof c[e]&&(c[e]={});"undefined"==typeof c[e][n]&&(c[e][n]={});"undefined"==typeof c[e][n][i]?c[e][n][i]=t:c[e][n][i]+=","+t}function d(){var t;document.querySelectorAll&&(t=document.querySelectorAll.bind(document));t||"undefined"===typeof $$||(t=$$);t||"undefined"===typeof e||(t=e);if(!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function p(){var t=d();for(var e in c)if(c.hasOwnProperty(e))for(var n in c[e])if(c[e].hasOwnProperty(n))for(var i in c[e][n])if(c[e][n].hasOwnProperty(i)){var s=t(c[e][n][i]);for(var a=0,r=s.length;a<r;a++)l(s[a],{mode:e,property:n,value:i})}}function h(e){var s=[];var a=[];var r=[];var o=0;var l=-1;var c=[];for(var u in e.children){if(!e.children.hasOwnProperty(u))continue;if(e.children[u].tagName&&"img"===e.children[u].tagName.toLowerCase()){s.push(e.children[u]);var d=e.children[u].getAttribute("min-width")||e.children[u].getAttribute("data-min-width");var p=e.children[u].getAttribute("data-src")||e.children[u].getAttribute("url");r.push(p);var h={minWidth:d};a.push(h);if(d)e.children[u].style.display="none";else{o=s.length-1;e.children[u].style.display="block"}}}l=o;function f(){var t=false,n;for(n in s){if(!s.hasOwnProperty(n))continue;a[n].minWidth&&e.offsetWidth>a[n].minWidth&&(t=n)}t||(t=o);if(l!=t)if(c[t]){s[l].style.display="none";s[t].style.display="block";l=t}else{var i=new Image;i.onload=function(){s[t].src=r[t];s[l].style.display="none";s[t].style.display="block";c[t]=true;l=t};i.src=r[t]}else s[t].src=r[t]}e.resizeSensor=new i(e,f);f();t&&n.push(e)}function f(){var t=d();var e=t("[data-responsive-image],[responsive-image]");for(var n=0,i=e.length;n<i;n++)h(e[n])}var g=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim;var v=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function m(t){var e;var n;t=t.replace(/'/g,'"');while(null!==(e=g.exec(t))){n=e[1]+e[3];attrs=e[2];while(null!==(attrMatch=v.exec(attrs)))u(n,attrMatch[1],attrMatch[2],attrMatch[3])}}function b(t){var e="";if(!t)return;if("string"===typeof t){t=t.toLowerCase();-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||m(t)}else for(var n=0,i=t.length;n<i;n++)if(1===t[n].type){e=t[n].selectorText||t[n].cssText;-1!==e.indexOf("min-height")||-1!==e.indexOf("max-height")?m(e):-1===e.indexOf("min-width")&&-1===e.indexOf("max-width")||m(e)}else 4===t[n].type&&b(t[n].cssRules||t[n].rules)}var y=false;this.init=function(e){t="undefined"!==typeof e&&e;for(var n=0,i=document.styleSheets.length;n<i;n++)try{b(document.styleSheets[n].cssRules||document.styleSheets[n].rules||document.styleSheets[n].cssText)}catch(t){if("SecurityError"!==t.name)throw t}if(!y){var s=document.createElement("style");s.type="text/css";s.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img { width: 100%;}";document.getElementsByTagName("head")[0].appendChild(s);y=true}p();f()};this.update=function(t){this.init(t)};this.detach=function(){if(!this.withTracking)throw"withTracking is not enabled. We can not detach elements since we don not store it.Use ElementQueries.withTracking = true; before domready or call ElementQueryes.update(true).";var t;while(t=n.pop())s.detach(t);n=[]}};s.update=function(t){s.instance.update(t)};s.detach=function(t){if(t.elementQueriesSetupInformation){t.elementQueriesSensor.detach();delete t.elementQueriesSetupInformation;delete t.elementQueriesSensor}else if(t.resizeSensor){t.resizeSensor.detach();delete t.resizeSensor}};s.withTracking=false;s.init=function(){s.instance||(s.instance=new s);s.instance.init(s.withTracking)};var a=function(t){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,false);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var e=setInterval(function(){if(/loaded|complete/i.test(document.readyState)){t();clearInterval(e)}},10);else window.onload=t};s.listen=function(){a(s.init)};if(true,"undefined"!==typeof t.exports)t.exports=s;else{window.ElementQueries=s;s.listen()}})()}).call(this,n(11))},221:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(155),n(406),n(367),n(876),n(877),n(880),n(368)],s=function(t,e,n,i,s,a,r,o){t.service("qvCaoChartService",["qvCaoComplexityEstimatorService",function(t){var l;var c;var u=new n;function d(t,e,n){n.title=t;return i.createChart(n,e,false).then(function(t){return{model:t}})}function p(t){if(c)return g(c.app,c.searchPhrase,c.libItems,t);return e.reject({norefresh:true})}function h(t,e,n){var i=[];e.forEach(function(e){i.push(r.generateChartPropertiesForRecommendation(e.visualization,n).then(function(n){e.visualization=new s(e.visualization,t.__report,n);return e}))});return i}function f(n,i){var s=[];var r=3e3;n.runtimeSettings&&n.runtimeSettings.suggestedTimeout&&(r=n.runtimeSettings.suggestedTimeout);n.appRecommendations.forEach(function(e){e.recAnalyses.forEach(function(e){if("fact"===e.analysis.analysis&&1!==e.relevance)return;var n={relevance:e.relevance,suggestedTimeout:r,visualization:e,complexity:t.estimateComplexity(e,i)};s.push(n)})});return e.all(h(n,s,i)).then(function(t){var e=[];n.appCharts&&n.appCharts.forEach(function(t){t.appearsOnSheets.length>0&&e.push({relevance:t.relevance,suggestedTimeout:r,visualization:new a(t.id,t.appearsOnSheets,n.__report,i),complexity:-1})});return{recommendations:t.map(function(t){return new o(t,i)}),chartMatches:e.map(function(t){return new o(t,i)})}})}function g(t,e,n,i){c={app:t,searchPhrase:e,libItems:n};var s={exploreSupplemental:["appInsights"]};var a={};n&&(a={scope:["libItems"]});"boolean"===typeof i&&false===i&&(a.appPrecedents="skip");return u.getInsightRecommendations(e,s,true,[],a).then(function(e){return f(e,t)})}function v(t,e,n){c={app:t,searchPhrase:"",libItems:n};var i={exploreSupplemental:["appInsights"]};var s;n&&(s={scope:["libItems"]});return u.getVisRecommendations(e,true,i,[],s).then(function(e){return f(e,t)})}function m(t,e,n){return d(t,e,n)}function b(t,e){var n=t.matchRecord;var i=t.analysis.analysis;return u.adaptMatchRecord("update",n,i).then(function(n){n[0].analysis={analysis:n[0].analysis,analysisGroup:n[0].analysisGroup,dims:n[0].dims,msrs:n[0].msrs,titleTemplate:n[0].titleTemplate};return r.generateChartPropertiesForRecommendation(n[0],e).then(function(e){return{properties:e,analysis:n[0].analysis,matchRecord:t.matchRecord}})})}l={getInsights:g,getVisualRecommendations:v,refreshInsights:p,buildInsightChart:m,adaptRecommendation:b};return l}])}.apply(e,i),void 0!==s&&(t.exports=s))},2210:function(t,e,n){(function(e){(function(){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)};var i=function(t,s){function a(){this.q=[];this.add=function(t){this.q.push(t)};var t,e;this.call=function(){for(t=0,e=this.q.length;t<e;t++)this.q[t].call()}}function r(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}function o(t,e){if(t.resizedAttached){if(t.resizedAttached){t.resizedAttached.add(e);return}}else{t.resizedAttached=new a;t.resizedAttached.add(e)}t.resizeSensor=document.createElement("div");t.resizeSensor.className="resize-sensor";var i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";var s="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=i;t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+s+' width: 200%; height: 200%"></div></div>';t.appendChild(t.resizeSensor);"static"==r(t,"position")&&(t.style.position="relative");var o=t.resizeSensor.childNodes[0];var l=o.childNodes[0];var c=t.resizeSensor.childNodes[1];var u=function(){l.style.width=1e5+"px";l.style.height=1e5+"px";o.scrollLeft=1e5;o.scrollTop=1e5;c.scrollLeft=1e5;c.scrollTop=1e5};u();var d=false;var p=function(){if(!t.resizedAttached)return;if(d){t.resizedAttached.call();d=false}n(p)};n(p);var h,f;var g,v;var m=function(){if((g=t.offsetWidth)!=h||(v=t.offsetHeight)!=f){d=true;h=g;f=v}u()};var b=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)};b(o,"scroll",m);b(c,"scroll",m)}var l=Object.prototype.toString.call(t);var c="[object Array]"===l||"[object NodeList]"===l||"[object HTMLCollection]"===l||"undefined"!==typeof e&&t instanceof e||"undefined"!==typeof Elements&&t instanceof Elements;if(c){var u=0,d=t.length;for(;u<d;u++)o(t[u],s)}else o(t,s);this.detach=function(){if(c){var e=0,n=t.length;for(;e<n;e++)i.detach(t[e])}else i.detach(t)}};i.detach=function(t){if(t.resizeSensor){t.removeChild(t.resizeSensor);delete t.resizeSensor;delete t.resizedAttached}};true,"undefined"!==typeof t.exports?t.exports=i:window.ResizeSensor=i})()}).call(this,n(11))},222:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={resizeCharts:function t(e){if("function"===typeof Event)e.dispatchEvent(new Event("resize"));else{var n=e.document.createEvent("UIEvents");n.initUIEvent("resize",true,false,e,0);e.dispatchEvent(n)}}};return t}.apply(e,i),void 0!==s&&(t.exports=s))},223:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t="qCaoStorageObj";function e(){var e=JSON.parse(sessionStorage.getItem(t));null===e&&(e=JSON.parse(localStorage.getItem(t))||{});return e}function n(e){var n=JSON.parse(localStorage.getItem(t))||{};if(!n||!n[e]){n[e]={contextPanel:true,assetsPanel:true};sessionStorage.setItem(t,JSON.stringify(n));localStorage.setItem(t,JSON.stringify(n));return n[e]}return n[e]}var i={storageObj:function t(e){return n(e)},toggleContextPanel:function n(i){var s=e(i);s[i].contextPanel=!s[i].contextPanel;localStorage.setItem(t,JSON.stringify(s));sessionStorage.setItem(t,JSON.stringify(s));return s},toggleAssetsPanel:function n(i){var s=e(i);s[i].assetsPanel=!s[i].assetsPanel;localStorage.setItem(t,JSON.stringify(s));sessionStorage.setItem(t,JSON.stringify(s));return s}};return i}.apply(e,i),void 0!==s&&(t.exports=s))},246:function(t,e,n){"use strict";var i,s;!(i=[n(92),n(90),n(405)],s=function(t,e,n){var i,s={3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y","-3":"m","-6":"μ","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},a=/%$/,r=/^\(r(0[2-9]|[12]\d|3[0-6])\)/i,o=/^\(oct\)/i,l=/^\(dec\)/i,c=/^\(hex\)/i,u=/^\(bin\)/i,d=/^\(rom\)/i,p=/^(\(rom\)|\(bin\)|\(hex\)|\(dec\)|\(oct\)|\(r(0[2-9]|[12]\d|3[0-6])\))/i;function h(t,e,n,i){t=t.toString(e);n[1]===n[1].toUpperCase()&&(t=t.toUpperCase());t.length-t.indexOf(".")>10&&(t=t.slice(0,t.indexOf(".")+11));return t.replace(".",i||".")}function f(t,e,n){var i;if(r.test(e))t=h(t,Number(/\d{2}/.exec(e)[0]),e,n);else if(o.test(e))t=h(t,8,e,n);else if(l.test(e))t=h(t,10,e,n);else if(c.test(e))t=h(t,16,e,n);else if(u.test(e))t=h(t,2,e,n);else if(d.test(e)){i="";if(t<0){i="-";t=-t}t=Math.floor(t);if(0===t)t="0";else if(t<=5e5){t=g(t,e);t=i+t}else t=e+i+t.toExponential(0)}return t}function g(t,e){var n,i="",s=Number(String(t).slice(-3)),a=(t-s)/1e3,r=[0,1,4,5,9,10,40,50,90,100,400,500,900].reverse(),o=["0","I","IV","V","IX","X","XL","L","XC","C","CD","D","CM"].reverse();while(s>0)for(n=0;n<r.length;n++)if(r[n]<=s){i+=o[n];s-=r[n];break}for(n=0;n<a;n++)i="M"+i;e[1]!==e[1].toUpperCase()&&(i=i.toLowerCase());return i}function v(t){if(!t||!t.qNumericalAbbreviation)return s;var e={};var n=t.qNumericalAbbreviation.split(";");n.forEach(function(t){var n=t.split(":");2===n.length&&(e[n[0]]=n[1])});return e}i=t.extend("NumberFormatter",{init:function t(e,n,i,s,a){this.localeInfo=e;this.pattern=n;this.thousandDelimiter=i||",";this.decimalDelimiter=s||".";this.type=a||"numeric";this.abbreviations=v(e);this.prepare()},clone:function t(){var e=new i(this.localeInfo,this.pattern,this.thousandDelimiter,this.decimalDelimiter,this.type);e.subtype=this.subtype;return e},format:function t(e,n,i,s){this.prepare(n,i,s);return this.formatValue(e)},prepare:function t(e,n,i){var s,a;"undefined"===typeof e&&(e=this.pattern);"undefined"===typeof n&&(n=this.thousandDelimiter);"undefined"===typeof i&&(i=this.decimalDelimiter);if(!e){this._prepared={pattern:false};return}this._prepared={positive:{d:i,t:n,abbreviate:false,isFunctional:false,prefix:"",postfix:""},negative:{d:i,t:n,abbreviate:false,isFunctional:false,prefix:"",postfix:""}};s=this._prepared;e=e.split(";");s.positive.pattern=e[0];s.negative.pattern=e[1];p.test(e[0])&&(s.positive.isFunctional=true);e[1]?p.test(e[1])&&(s.negative.isFunctional=true):s.negative=false;a=s.positive.isFunctional&&(!s.negative||s.negative&&s.negative.isFunctional);if(!a){m(s.positive,n,i);s.negative&&m(s.negative,n,i)}},formatValue:function t(e){var i=this._prepared,s,a,r="",o,l,c="",u,d,p,h,g;if(Number.isNaN(+e))return e;if(false===i.pattern)return e.toString();if(e<0&&i.negative){i=i.negative;e=-e}else i=i.positive;u=i.d;d=i.t;if(i.isFunctional)e=f(e,i.pattern,u);else{i.percentage&&(e*=100);if(i.abbreviate){var v=this.abbreviations;var m=Object.keys(v).map(function(t){return parseInt(t)}).sort(function(t,e){return t>e?1:-1});var b;var y=m[0];p=0;a=Number(Number(e).toExponential().split("e")[1]);while(y<=a&&p<m.length){p++;y=m[p]}p>0&&(b=m[p-1]);var S;b&&a>0&&b>0?S=b:(a<0&&b<0||!b)&&(y<0&&y-a<=i.maxPrecision?S=y:b<=a&&!(y>0&&-a<=i.maxPrecision)&&(S=b));if(S){r=v[S];e/=Math.pow(10,S)}}o=Math.abs(e);s=i.temp;h=i.numericPattern;g=h.split(u)[1];"I"===this.type&&(e=Math.round(e));l=e;if(g||"#"!==h.slice(-1)[0])if(o>=1e15||o>0&&o<=1e-14)e=o?o.toExponential(15).replace(/\.?0+(?=e)/,""):"0";else{var I=Number(e.toFixed(Math.min(20,g?g.length:0)).split(".")[0]);var x=h.split(u)[0];x+=u;e=n(x,I)||"0";if(g){var w=Math.max(0,Math.min(14,g.length));var q=g.replace(/#+$/,"").length;var C=Number((o%1).toPrecision(w)).toFixed(w);C=C.slice(2).replace(/0+$/,"");for(p=C.length;p<q;p++)C+="0";C&&(e+=u+C)}else 0===I&&(l=0)}else if(o>=Math.pow(10,s)||o<1||o<1e-4)if(0===e)e="0";else if(o<1e-4||o>=1e20){e=l.toExponential(Math.max(1,Math.min(14,s))-1);e=e.replace(/\.?0+(?=e)/,"");c=""}else{e=e.toPrecision(Math.max(1,Math.min(14,s)));if(e.indexOf(".")>=0){e=e.replace(e.indexOf("e")<0?/0+$/:/\.?0+(?=e)/,"");e=e.replace(".",u)}}else{h+=u;s=Math.max(0,Math.min(20,s-Math.ceil(Math.log(o)/Math.log(10))));for(p=0;p<s;p++)h+="#";e=n(h,e)}e=e.replace(i.numericRegex,function(t){if(t===d)return i.groupTemp;if(t===u)return i.decTemp;return""});l<0&&!/^-/.test(e)&&(e="-"+e)}return i.prefix+e+c+r+i.postfix}});function m(t,e,n){var i,s,r=t.pattern,o,l,c,u,d,p,h;if(r.indexOf("A")>=0){r=r.replace("A","");t.abbreviate=true}h=y(e,n);o=r.match(h);o=o?o[0]:"";l=o?r.substr(0,r.indexOf(o)):r;c=o?r.substring(r.indexOf(o)+o.length):"";o||(o=r?"#":"##########");if(e&&e===n){i=o.split(n);s=i.pop();o=i.join("")+n+s;e=""}u=e;e=/,/.test(n)?"¤":",";u&&(o=o.replace(b(u,"g"),e));d=n;n=".";d&&(o=o.replace(b(d,"g"),n));p=o.match(/#/g);p=p?p.length:0;var f=r.split(d);var g;f[1]&&(g=f[1].match(/#|0/g));t.prefix=l||"";t.postfix=c||"";t.pattern=r;t.maxPrecision=g?g.length:2;t.percentage=a.test(r);t.numericPattern=o||"";t.numericRegex=new RegExp(b(e,null,true)+"|"+b(n,null,true),"g");t.groupTemp=u;t.decTemp=d;t.t=e;t.d=n;t.temp=p}function b(t,n,i){var s=e.escapeRegExp(t);if(i)return s;return new RegExp(s||"",n)}function y(t,n){n&&(n=e.escapeRegExp(n));t&&(t=e.escapeRegExp(t));return new RegExp("(?:[#0]+"+t+")?[#0]+(?:"+n+"[#0]+)?")}window.NumberFormatter=i;i.getStaticFormatter=function(){return{prepare:function t(){},formatValue:function t(e){return e+""}}};return i}.apply(e,i),void 0!==s&&(t.exports=s))},257:function(t,e,n){"use strict";var i,s;!(i=[n(10),n(48),n(871),n(94),n(102),n(169),n(176)],s=function(t,e,n,i,s){e.service("qvGlobalSearchService",["$document","qvSelectionToolbarService",function(e,a){var r,o={};function l(t){return o[u(t)]}function c(t,e){o[u(t)]=e}function u(t){if(t.id)return t.id.toUpperCase();return t.id}function d(t){return{$container:void 0,$containerId:".qv-global-search-container",$app:t,$lastKnownIndexProgress:void 0,$haveQuery:false,getComponent:function t(){return n},setup:function e(){i.StateChanged.bind(p.bind(null,t));t.isInModalSelection()&&a.confirm()},destroy:function t(){i.StateChanged.unbind(p)}}}function p(t){(i.isInEditMode()||!i.isInAnalysisMode||i.inObjectView())&&g(l(t))}function h(n,i,s){n.$container=t.element("<div>");i=i||e;i.find(n.$containerId).append(n.$container);n.$container.showComponent(n.getComponent(),["$scope",function(t){t.app=n.$app;t.options={objectSearchIsOn:s}}]);n.setup()}function f(t){return!(!t||void 0===t.$container)}function g(t){if(t.$container){t.$container.remove();t.$container=void 0}t.destroy()}function v(t){var e=l(t);if(!e){e=new d(t);c(t,e)}return e}function m(t,e){try{var n=e.qTransientProgressMessage.qMessageParameters[0],i=new Number(n),s=v(t);!Number.isNaN(+i)&&n&&(s.$lastKnownIndexProgress=i);r.IndexProgressUpdate.emit(u(t),i)}catch(t){return}}r={toggleGlobalSearch:function t(e,n,i){var s=v(e);f(s)?g(s):h(s,n,i)},openGlobalSearch:function t(e,n){var i=v(e);if(!f(i)){g(i);h(i,n)}},closeGlobalSearchIfNoQuery:function t(e){var n=l(e);n&&n.$haveQuery||this.off()},off:function t(){Object.keys(o).forEach(function(t){g(o[t])})},isSearchOpen:function t(e){return f(l(e))},setLastKnownIndexProgress:function t(e,n){var i=l(e)||{};i.$lastKnownIndexProgress=n},getLastKnownIndexProgress:function t(e){var n=l(e)||{};return n.$lastKnownIndexProgress},couldEngineBeIndexing:function t(e){var n=l(e)||{},i=n.$lastKnownIndexProgress;return void 0!==i&&i<100},requestIndexProgressUpdate:function t(e){e.global.getProgress(0).then(m.bind(null,e))},setHaveQuery:function t(e,n){var i=v(e);i.$haveQuery=n}};s.mixin(r);r.notification("IndexProgressUpdate");return r}])}.apply(e,i),void 0!==s&&(t.exports=s))},264:function(t,e,n){"use strict";var i,s;!(i=[n(612)],s=function(t){return{template:t,controller:[function(){}],scope:{item:"=",style:"="}}}.apply(e,i),void 0!==s&&(t.exports=s))},271:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91)],s=function(t,e){t.service("qvCurrentSelectionsService",[function(){function t(t){return t.qStateCounts.qSelected+t.qStateCounts.qSelectedExcluded+t.qStateCounts.qLocked+t.qStateCounts.qLockedExcluded}function n(t){var n=t.states.length;return e.get("CurrentSelections.SelectionsInStates",n)}function i(n){var i=t(n),s=n.qTotal,a;a=s===i&&s>1?e.get("CurrentSelections.All"):i>1&&s>1?e.get("CurrentSelections.Of",[i,s]):n.qSelectedFieldSelectionInfo.map(function(t){return t.qName}).join(", ").toString();return a}return{translate:function t(e){return e.states?n(e):i(e)},translatedScreenReaderLabel:function i(s){var a;if(s.states)a=n(s);else{var r=t(s),o=s.qTotal,l=s.qField,c=s.qSelected;a=o===r&&o>1?e.get("CurrentSelections.AllSelections",[l]):r>1&&o>1?e.get("CurrentSelections.MultipleSelections",[l,r,o]):e.get("CurrentSelections.SingleSelection",[l,c])}return a}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},273:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){return{DEFAULT_STATE_TRANSLATION:"AlternateState.DefaultState",DEFAULT_STATE_NAME:"$"}}.apply(e,i),void 0!==s&&(t.exports=s))},274:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(97),n(99),n(854)],s=function(t,e,n){t.directive("qvPager",["$timeout",function(t){return{restrict:"A",priority:0,link:function i(s,a){n.treatAsDesktop()||a.css("overflow-x","auto");s.pagerData=a.find("ul").pager().data("qv-pager");a.addClass("qv-pager");s.nextPage=function(){t(function(){s.pagerData.goToNextPage();s.refreshPager(true)})};s.prevPage=function(){t(function(){s.pagerData.goToPreviousPage();s.refreshPager(true)})};s.goToPage=function(t){s.pagerData.goToPage(t);s.refreshPager(true)};s.refreshPager=function(t){var e="";t||s.pagerData.refresh();a.removeClass("qv-pager-back qv-pager-forward");if(1!==s.pagerData.currentPage){s.showShadow=true;e+="qv-pager-back "}else s.showShadow=false;s.pagerData.currentPage!==s.pagerData.maxPages&&(e+="qv-pager-forward ");a.addClass(e)};function r(){s.refreshPager()}s.$on("refreshPager",r);s.$on("$destroy",function(){e.off("end",r)})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},275:function(t,e,n){"use strict";var i,s;!(i=[n(54),n(91),n(48),n(89),n(105),n(147),n(154),n(134),n(112),n(233),n(366)],s=function(t,e,n,i,s,a,r,o,l){n.service("qvCaoSearchService",["qvCaoSelectionService",function(n){var c;function u(){c=this;this.fieldList=[];this.queryString=[];this.queryTokens=[];this.caoSearchQueryHandlers=[]}u.prototype.createFieldList=function(){var t=[];return r.getList().then(function(t){return t.getLayout()}).then(function(e){t=t.concat(e);return c.getMasterItems()}).then(function(e){t=t.concat(e);c.fieldList=c.sortFields(t);return c.fieldList})};u.prototype.getFields=function(){return this.fieldList};u.prototype.getSelectedFields=function(t){return this.getFields().filter(function(t){return t.selected}).filter(function(e){var n=t.indexOf(e.qName);return n>-1})};u.prototype.syncFieldsInQueryWithFieldPicker=function(e){var n=this.getSelectedFields(e);this.fieldList=this.fieldList.map(function(e){var i=t.find(n,function(t){return t.caoFieldId===e.caoFieldId});e.selected=!!i;return e})};u.prototype.getMeasureMasterItems=function(){var t=this;return a.getList().then(function(e){return e.getLayout().then(function(e){t.measureMasterItems=e.map(function(t){return{qName:t.qData.title,classifications:["measure"],masterItem:true,libId:t.qInfo.qId,libIdLabel:t.qMeta.title}});return t.measureMasterItems})})};u.prototype.getDimensionMasterItems=function(){var t=this;return o.getList().then(function(e){return e.getLayout().then(function(e){t.dimensionMasterItems=e.map(function(t){return{qName:t.qData.title,classifications:["dimension"],masterItem:true,libId:t.qInfo.qId,libIdLabel:t.qMeta.title}});return t.dimensionMasterItems})})};u.prototype.getMasterItems=function(){var t=[];return i.all({measureItems:this.getMeasureMasterItems(),dimItems:this.getDimensionMasterItems()}).then(function(e){t=e.measureItems.concat(e.dimItems);return t})};u.prototype.sortFields=function(t){t=t.map(function(t){var n="cao_field_"+t.qName;n=n.split(" ").join("_");t.masterItem||(1===t.qSrcTables.length?t.tablesAssociated=t.qSrcTables[0]+" "+e.get("cao.search.field.table"):t.tablesAssociated=e.get("cao.search.field.table.title",t.qSrcTables.length));t.qSrcTables&&(t.tablesTooltip=t.qSrcTables.join(", "));t.name=t.qName;t.caoFieldId=t.masterItem?n+"masterItem_"+t.classifications[0]:n;t.highlight=false;t.classificationIcon=c.getFieldClassificationIcon(t);t.displayNameTokens=[{text:t.qName,matching:false}];if(t.classifications&&t.classifications.length>0){t.masterItemDimension="dimension"===t.classifications[0]&&t.masterItem;t.masterItemMeasures="measure"===t.classifications[0]&&t.masterItem}t.masterItem&&(t.masterItemTitle=t.masterItemDimension?e.get("cao.fieldPicker.masterItem.dimension"):e.get("cao.fieldPicker.masterItem.measure"));return t});return l.localeOrderBy(t,function(t){return t.qName})};u.prototype.getFieldClassificationIcon=function(e){var n;var i=t.find(e.qTags,function(t){return"$date"===t});var s=t.find(e.qTags,function(t){return"$geoname"===t});i?n="lui-icon--calendar":s&&(n="lui-icon--map");return n};u.prototype.indexesOfWordInString=function(t,e){t=t.toLowerCase();e=e.toLowerCase();var n=[];var i=t.indexOf(e);i>-1&&n.push(i);while(i>-1){i=t.indexOf(e,++i);i>-1&&n.push(i)}return n};u.prototype.getQueryTokensBasedOnQuotes=function(t){var e=[];if(t&&t.length>0){var n=t.split(" ");var i=0;var s=null;var a=null;var r=null;var o=false;n.forEach(function(l,u){s='"'===l.charAt(0);a='"'===l.charAt(l.length-1);u<n.length-1&&(r='"'===n[u+1].charAt(0));if(s){i=u;o=true;if(1===n.length&&s){l=l.substr(1);e.push(c.createToken(l,e,t,false));o=false}else if(u===n.length-1&&n.length>1){l=n.slice(i,u+1).join(" ").substr(1);e.push(c.createToken(l,e,t,false));o=false}if(o&&r&&!a){l=n.slice(i,u+1).join(" ").substr(1);e.push(c.createToken(l,e,t,false));o=false}}else if(o&&r&&!a){l=n.slice(i,u+1).join(" ").substr(1);e.push(c.createToken(l,e,t,false));o=false}else if(a){l=n.slice(i,u+1).join(" ");e.push(c.createToken(l,e,t,true));o=false}else if(o&&u===n.length-1){l=n.slice(i,u+1).join(" ").substr(1);e.push(c.createToken(l,e,t,false));o=false}else o||e.push(c.createToken(l,e,t,false))})}this.queryTokens=e;return this.queryTokens};u.prototype.createToken=function(t,e,n,i){var s;var a=t.length;if(e&&e.length>0){var r=e[e.length-1];s=n.indexOf(t,r.indexEnd)}else s=n.indexOf(t);""===t&&(a=1);return{word:i?t.substr(1).slice(0,-1):t,indexStart:""===t?s+1:s,indexEnd:s+a}};u.prototype.addStringToQueryAtIndex=function(t,e,n){var i="";if(e&&e.length>0){var s=e;var a=e.slice(0,n).trim();var r=s.slice(n).trim();i=a+t+r}return i};u.prototype.getCurrentToken=function(t,e){var n={index:null,token:null};var i=this.getQueryTokensBasedOnQuotes(t);i.some(function(t,i){if(e>=t.indexStart&&e<=t.indexEnd){n.index=i;n.token=t;return e>=t.indexStart&&e<=t.indexEnd}});return n};u.prototype.replaceTwoOrMoreSpacesWithOne=function(t){return t.replace(/\s\s+/g," ")};u.prototype.removeFieldFromQuery=function(t,e,n){var i=this.indexesOfWordInString(e,t.qName);if(i.length>1){n=n.filter(function(e){return e.caoFieldId!==t.caoFieldId}).map(function(t){t.indexStartOfFieldInQuery=e.indexOf(t.qName);t.indexEndOfFieldInQuery=e.indexOf(t.qName)+t.qName.length;return t});var s=-1;i.forEach(function(i){n.forEach(function(n){s=i!==n.indexStartOfFieldInQuery?i:e.indexOf(t.qName)})});if(-1===s)e=e.replace(t.qName,"");else{var a=e.split("");a.splice(s,t.qName.length);e=a.join("")}}else e=e.replace(t.qName,"");return e.replace(/^\s+/g,"")};u.prototype.addFieldToQuery=function(t,e,n,i,s){e=e||"";var a=t.qName.match(" ")||t.qName.match(String.fromCharCode(160));var r=a?'"'+t.qName+'"':t.qName;var o=this.getQueryTokensBasedOnQuotes(e);var l=0;var c=s-i>0;if(c){var u=e.split("");u.splice(i,s-i,r);e=u.join("");l=i+r.length+1}else if(""===e){e=r;l=n+r.length+1}else if(o.length>0&&t){var d=this.getCurrentToken(e,n);if(null!==d.index){o[d.index]={word:t.qName};e=o.map(function(t,e){if(e===d.index&&e<o.length-1&&o[e+1].word)return t.word.match(" ")?'"'+t.word+'" ':t.word+" ";return t.word.match(" ")?'"'+t.word+'"':t.word}).join(" ");l=d.token.indexStart+r.length+1}else{var p=" "+r;e=this.addStringToQueryAtIndex(p,e,n);l=n+r.length+1}}e=e.replace(/^\s+/g,"");return{query:e,cursorPosition:l}};u.prototype.searchResultPositionRelativeToQuery=function(t,e){var n=7.5;var i=.7;var s=0;if(t&&t.length>0){var a=t.slice(0,e).split("");var r=a.filter(function(t){return" "!==t});var o=a.filter(function(t){return" "===t});s+=r.length*n;s+=o.length*i}return s};u.prototype.registerForCaoSearchQuery=function(t){this.caoSearchQueryHandlers.push(t)};u.prototype.unRegisterFromCaoSearchQuery=function(){this.caoSearchQueryHandlers=[]};u.prototype.getMatchingFields=function(e,n){var i=[];var s=this.fieldList;var a;e?e=e?e.toLowerCase():"":e&&""!==e||(a=true);i=s.filter(function(t){var i=t.qName.toLowerCase();if(a||i.indexOf(e)>-1)return!n||n&&t.masterItem;return false});i=t.uniq(i).filter(function(t){return l.librarySearchFn(t,e)});return l.localeOrderBy(i,function(t){return t.qName})};u.prototype.clearSelectedFields=function(){this.fieldList.forEach(function(t){t.selected=false});n.clearSelection()};u.prototype.selectField=function(t,e){this.fieldList=this.fieldList.map(function(n){n.caoFieldId===t.caoFieldId&&(n.selected=e);return n})};u.prototype.updateInsights=function(t){this.caoSearchQueryHandlers.forEach(function(e){e&&e({query:t,fields:c.getFields().filter(function(t){return t.selected})})});n.clearSelection()};u.prototype.showIntro=function(t){this.caoSearchQueryHandlers.forEach(function(e){e&&e({showIntro:t})})};u.prototype.matchingField=function(t,e,n){var i=e>0&&e<=n.length-1;var a=e>=-1&&e<n.length-1;switch(t){case s.KeyCodes.Up:i&&e--;break;case s.KeyCodes.Down:a&&e++;break;case s.KeyCodes.Tab:break}return n[e]};return new u}])}.apply(e,i),void 0!==s&&(t.exports=s))},276:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(907)],s=function(t,e){t.directive("qvProgressBar",["$interval",function(t){return{replace:true,template:e,restrict:"E",scope:{percentDone:"=",onCompleted:"&",options:"="},link:function e(n){var i,s=true;n.display="0%";n.showPercent=0;function a(){if(n.showPercent>=100){t.cancel(i);n.onCompleted();return}if(n.showPercent>=n.percentDone){t.cancel(i);return}r(n.showPercent+1)}n.$watch("percentDone",function(e){if(void 0!==e)if(s){r(e);s=false}else{t.cancel(i);i=t(a,10)}});function r(t){n.showPercent=t;n.display=t+"%"}n.$on("$destroy",function(){t.cancel(i)})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},277:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(968)],s=function(t,e){var n={bindings:{currentSelectionDisabled:"<"},template:e};t.directive("qvCurrentSelectionsItem",function(){return n});return n}.apply(e,i),void 0!==s&&(t.exports=s))},280:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(89),n(48),n(397),n(10)],s=function(t,e,n,i){var s=window.angular,a={"max-height":"90%","max-width":"90%","min-height":"180px",width:"400px"},r,o=false,l=false;n.directive("qvDelayedDialogButton",function(){return{replace:true,restrict:"A",link:function t(e){e.button&&e.button.defaultEscButton&&(r=e);e.closeModal=function(t,n){if(t){t.preventDefault();t.stopPropagation()}e.button&&e.button.callback&&("undefined"===typeof e.button.expression||e.button.expression)&&e.button.callback();(n||e.autoClose||e.button&&!e.button.callback)&&e.destroyModal();return}}}});n.service("$delayedModal",["$compile","$rootScope","$document",function(n,c,u){var d={},p,h,f,g,v=i,m;var b={open:function t(i){var b=new e,y;if(p){h=p;g=f}p=c.$new();f=s.element('<div class="qv-modal-container qui-modalbackground-centered" qva-outside-ignore-for="allOutside" ng-style="containerStyle" ng-class="classes"></div>');p.containerStyle={content:" "};p.classes={};p.modalStyle={};var S;for(S in a)p.modalStyle[S]=a[S];p.wasDisabled=[];p.showDefaultButton=true;o=true;l=false;d=i;p.failed=false;p.autoClose=true;for(S in d)p[S]=d[S];f.html(v).appendTo(u.find("body"));p.html&&f.find("main").append(p.html);y=p.$watch("element",function(){b.resolve();y()});m=n(f)(p);p.destroyModal=this.close.bind(this);p.handleEscButton=function(t){if(t){t.preventDefault();t.stopPropagation()}p.buttons&&r?r&&r.closeModal():p.destroyModal()};p.$broadcast("delayed-modal-opened");p.$watchCollection("[width, height]",function(){p.width&&(p.modalStyle.width=p.width);p.height&&(p.modalStyle.height=p.height)});return b.promise},update:function t(e){if(!o)return;for(var i in e){p[i]=e[i];d[i]=e[i]}if(e.html||e.buttons){f.html(v);f.find("main").html(e.html);u.find("body").find(".qui-delayedModal").replaceWith(f.html());m=n(f)(p)}},close:function t(){if(p&&f){p.$broadcast("delayed-modal-closed");f.remove();p.$destroy();p=h||null;f=g||null;g=null;h=null}o=false;l=false},lock:function e(){l=true;p.wasDisabled.length=0;m.find("button, input, textarea, select").each(function(){var e=t(this);e.prop("disabled")?p.wasDisabled.push(this):e.prop("disabled",true)})},unlock:function e(){l=false;m.find("button, input, textarea, select").each(function(){-1===p.wasDisabled.indexOf(this)&&t(this).prop("disabled",false)});p.wasDisabled.length=0}};Object.defineProperty(b,"isOpened",{get:function t(){return o}});Object.defineProperty(b,"isLocked",{get:function t(){return l}});Object.defineProperty(b,"scope",{get:function t(){return p}});return b}])}.apply(e,i),void 0!==s&&(t.exports=s))},284:function(t,e,n){"use strict";var i,s;!(i=[n(94),n(158),n(334),n(239),n(848),n(849),n(341),n(335),n(427),n(320),n(360),n(361),n(245),n(306),n(508),n(428)],s=function(t,e,n,i,s,a,r,o){var l=e.inClient(),c,u;var d=new o;d.scope="root";if(!l){t.setState(t.States.analysis);t.setView(t.Views.sheet)}if(p()){document.body.classList.add("absolute-position-mashup");document.documentElement.classList.add("absolute-position-mashup")}c=new s(l);u=new r;a.init();function p(){var t=Array.prototype.slice.call(document.querySelectorAll("body > .qvobject, body > .qvplaceholder"));if(0===t.length)return false;return!t.some(function(t){return"absolute"!==t.style.position})}function h(t,e){i.setErrorCallback(t,e);n.setErrorCallback(t,e)}function f(t,e){d.register({scope:"root",name:t,callback:e})}function g(t){d.clear(t)}var v={openApp:i.openApp.bind({_qEvent:d}),currApp:i.currApp,getGlobal:n.get.bind({_qEvent:d}),setOnError:h,on:f,off:g,setLanguage:e.setLanguage,setDeviceType:e.setDeviceType,table:i.table,getAppList:n.getAppList,resize:e.resize,getExtensionList:e.getExtensionList,callRepository:e.callRepository,registerExtension:e.registerExtension,navigation:c,sessionApp:i.sessionApp,sessionAppFromApp:i.sessionAppFromApp,getThemeList:r.getThemeList,theme:u};Object.defineProperty(v,"Promise",{get:function t(){return e.Promise}});return v}.apply(e,i),void 0!==s&&(t.exports=s))},290:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(90),n(89),n(141),n(283),n(364),n(50),n(365),n(245)],s=function(t,e,n,i,s,a,r,o){t.service("qvListboxPopoverService",["luiPopover",function(t){var l;var c;var u={showDelayed:function i(u,d,p,h){var f=n();if(l){c.selectionsActivated=function(){};c.selectionsDeactivated=function(){};l.close()}c={getVisualization:function t(){return f.promise},onPopoverClose:this.onPopoverClose,options:{setController:f.resolve,isPopover:true,showLock:d.showLock,search:d.search||{},smallDevice:r.isSmallDevice,direction:d.direction},selectionToolbarComponent:s,onClose:a};l=t.show({template:o,controller:a.controller,alignTo:d.$alignToElement[0],input:c,closeOnResize:false,dock:"top"});u.then(function(t){c.model=t}).catch(function(t){false});c.selectionsActivated=function(){e.isFunction(h)&&h()};c.selectionsDeactivated=function(){e.isFunction(p)&&p();p=null;h=null};return l},show:function t(e,i,s,a){return this.showDelayed(n.when(e),i,s,a)},showField:function t(e,s,a,r,o,l){return i.createTransientField(s,e,r).then(function(t){return n.resolve(this.show(t,a,o,l))}.bind(this)).catch(function(t){false})},showDimension:function t(e,n,s,a,r,o){i.createTransientDimension(n,e,a).then(function(t){this.show(t,s,r,o)}.bind(this)).catch(function(t){false})},close:function t(){l&&l.close();l=null},onPopoverClose:function t(){},getPopover:function t(){return l},onClosing:function t(){}};return u}])}.apply(e,i),void 0!==s&&(t.exports=s))},306:function(t,e,n){"use strict";var i,s;function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}!(i=[n(10),n(48),n(96),n(850),n(851),n(132),n(106),n(97),n(50),n(94),n(202),n(90),n(114),n(113),n(852),n(853),n(363),n(273),n(142),n(95),n(105),n(89),n(167),n(103),n(290),n(274),n(175),n(855),n(257),n(212),n(392),n(240),n(271),n(289),n(276),n(965),n(277)],s=function(t,e,n,i,s,r,o,l,c,u,d,p,h,f,g,v,m,b,y,S,I,x,w,q){var C=b.DEFAULT_STATE_TRANSLATION;var P=b.DEFAULT_STATE_NAME;e.directive("qvSelectionPager",["qvGlobalSelectionsService","$timeout",function(t,n){var i=e.getService("$templateCache");i.put("current-selections-tooltip-template.ng.html",s);return{restrict:"A",priority:1,link:function e(i){var s=i.$watch(function(){return t.isSelectActive(i.app)},function(t){i.$emit("globalSelectionActive",t);n(function(){i.refreshPager(false)})});function a(){i.refreshPager(false)}l.on("end",a);i.$on("$destroy",function(){s();l.off("end",a)})}}}]);var k={template:i,replace:true,restrict:"E",scope:{app:"=",options:"=",expandSmartSearchSuggestedChart:"=?"},link:function t(n,i){var s=e.getService("$timeout"),a=e.getService("qvGlobalSelectionsService"),l=e.getService("qvExploreSelectionsService"),p=e.getService("qvGlobalSearchService"),h=e.getService("qvCaoService"),b=i.parent(),y,x,w;var k=new v(n,c,a,l,p,h);w=new g(n);n.isCaoActive=d.isInInsightMode();n.isExploreSelectionsActive=false;n.nbrSelection=0;n.haveHiddenSelections=false;n.isSmallDevice=c.isSmallDevice;n.cachedPlaceHolders=[];n.isGlobalSearchIndexing=false;n.progressBarOptions={hideText:true};n.setSearchIndexingDone=function(){n.isGlobalSearchIndexing=false};function A(t,e){if(t!==(n.app.enigmaModel.id||"").toUpperCase())return;var i=new Number(e);if(!n.isGlobalSearchIndexing&&i<100){n.indexPercentDone=i;n.isGlobalSearchIndexing=true;E(500)}else if(n.isGlobalSearchIndexing){n.indexPercentDone=i;i<100&&E(500)}else T()}function T(){s.cancel(x);if(y){p.IndexProgressUpdate.unbind(A);y=false}}function E(t){if(!y){p.IndexProgressUpdate.bind(A);y=true}s.cancel(x);x=s(function(){p.requestIndexProgressUpdate(n.app.enigmaModel)},t||0)}function $(){s(function(){n.isSmallDevice=c.isSmallDevice;if(f["SMARTSEARCH_INDEX_CLOSE"])if(n.isSmallDevice){T();n.setSearchIndexingDone()}else!p.isSearchOpen(n.app.enigmaModel)&&p.couldEngineBeIndexing(n.app.enigmaModel)&&E(0);n.isSmallDevice&&n.isCaoActive&&(n.isCaoActive=false)})}function M(){if(!w)return;u.isInAnalysisMode()?w.on():w.off()}function F(){u.inSheetView()&&c.isSmallDevice&&p.openGlobalSearch(n.app.enigmaModel,b);M();var t=d.isInInsightMode();t?t&&!n.isCaoActive&&(n.isCaoActive=true):n.isCaoActive=false}M();c.ViewChanged.bind($);n.$watch("isSmallDevice",function(t){true!==t||u.inObjectView()?p.closeGlobalSearchIfNoQuery(n.app.enigmaModel):p.openGlobalSearch(n.app.enigmaModel,b)});u.StateChanged.bind(F);n.mobileIndicatorTop=false;n.mobileIndicatorShow=false;a.setCsShowCallback(function(t){n.mobileIndicatorShow=t});a.onClose(function(){document.activeElement!==i.find('[tid="toggleCaoButton"]')[0]&&document.activeElement!==i.find('[tid="currentSelections.toggleExploreSelection"]')[0]&&i.find('[tid="currentSelections.toggleGlobalSelections"]').focus()});n.$on("globalSelectionActive",function(t,e){n.isGlobalSelectionsActive=e});n.$on("exploreSelectionActive",function(t,e){n.isExploreSelectionsActive=e});function O(t){r.get(t).then(function(t){n.model=t;o(n,"app",L)}).catch(function(t){false});n.$watch(t.isInModalSelection.bind(t),function(t){n.inSelection=t;if(n.inSelection&&n.activeFieldName&&n.activeFieldName.length>0)n.cachedPlaceHolders=n.items.map(function(t){return m.createPlaceHolder({},t.qField,t.qReadableName||t.qField)});else{n.cachedPlaceHolders=[];n.items=n.items.filter(function(t){return!t.isPlaceHolder})}});n.app=t;o(n,"app",L)}var D=[];var N;function L(t){var e=false;var i;if(D.length!==t.qStateNames.length||!D.every(function(e,n){return e===t.qStateNames[n]})){i=[C].concat(t.qStateNames);e=true;D=t.qStateNames.concat()}if(n.model&&(!N||e)){i=[P].concat(t.qStateNames);n.model.getProperties().then(function(t){t.selectionsInStates=i.map(function(t){return{stateName:t,qSelectionObjectDef:{qStateName:t}}});n.model.setProperties(t)})}N=n.model}var R=n.$watch("app",function(t){O(t.enigmaModel);R()});n.$watch(function(){return p.isSearchOpen(n.app.enigmaModel)},function(t){n.isGlobalSearchActive=t;if(f["SMARTSEARCH_INDEX_CLOSE"])if(n.isSmallDevice||t){T();n.isGlobalSearchIndexing=false}else if(p.couldEngineBeIndexing(n.app.enigmaModel)){var e=p.getLastKnownIndexProgress(n.app.enigmaModel);n.isGlobalSearchIndexing=true;n.indexPercentDone=e;E(500)}});n.toggleGlobalSelection=function(t){t.preventDefault();k.toggleGlobalSelection(n.app);n.currentSelectionDisabled=false;n.expandSmartSearchSuggestedChart=false;S.publish(I.Events.PubSub.ExpandSmartSearchSuggestedChart,null);q.trackEvent(q.customEvents.GLOBAL_SELECTIONS_CLICKED,{type:"clicked"})};n.toggleGlobalSearch=function(){k.toggleGlobalSearch(b)};n.toggleExploreSelection=function(){k.toggleExploreSelection(b);n.expandSmartSearchSuggestedChart=false;S.publish(I.Events.PubSub.ExpandSmartSearchSuggestedChart,null);n.currentSelectionDisabled=false};n.toggleCao=function(){n.currentSelectionDisabled=false;k.toggleCao(b)};n.$watch("isCaoActive",function(t){false===t&&h.off()});n.$on("$destroy",function(){c.ViewChanged.unbind($);p.off();h.off();n.isCaoActive=false;a.off();l.off();n.isExploreSelectionsActive=false;u.StateChanged.unbind(F);a.setCsShowCallback(null);s.cancel(x);p.IndexProgressUpdate.unbind(A);w&&w.delete()})},controller:["$scope","$element","$timeout","qvChartTooltipService","qvGlobalSelectionsService","qvCurrentSelectionsService",function(i,s,r,l,d,f){var g,v=false,b,I,q=e.getService("qvListboxPopoverService"),C=e.getService("qvListboxPopoverServiceMobile"),P=e.getService("qvMultiStatePopoverService");i.items=[];i.disable={clear:true,back:true,forward:true};i.brightCurSel=i.options&&"bright"===i.options.variant;i.hideUndoRedo=i.options&&true===i.options.hideUndoRedo;i.hideSelectionsTool=i.options&&true===i.options.hideSelectionsTool;i.hideSearch=i.options&&true===i.options.hideSearch;i.hideClearSelections=i.options&&true===i.options.hideClearSelections;i.currentSelectionDisabled=false;function k(){d.setCsShow(c.isSmallDevice&&i.items.length>0&&u.view!==u.Views.object)}function A(e){i.currentSelectionDisabled=false;i.disable.clear=0===y.getClearableStates(e.selectionsInStates).length;i.disable.back=0===e.qSelectionObject.qBackCount;i.disable.forward=0===e.qSelectionObject.qForwardCount;var n=m.getAllSelectionsInStates(e);i.haveHiddenSelections=n.some(function(t){return t.qIsHidden});var s=n.filter(function(t){return!t.qIsHidden});s.forEach(function(t){t.translation=f.translate(t);t.screenReaderLabel=f.translatedScreenReaderLabel(t);t.name=t.qReadableName||t.qField;t.displayStateName=m.getDisplayStateName(t.stateName);t.currentSelectionDisabled=i.currentSelectionDisabled});i.nbrSelections=s.length;d.setSelectionCount(s.length,i.app);k();var a=m.groupSelectionsByField(s);var o=a.filter(function(t){return!t.isSingleState});o.forEach(function(t){t.translation=f.translate(t);t.screenReaderLabel=f.translatedScreenReaderLabel(t)});a=a.sort(y.sortSelections);if(i.cachedPlaceHolders.length>0&&i.activeFieldName&&i.activeFieldName.length>0){i.cachedPlaceHolders.forEach(function(t){m.createPlaceHolder(t)});s.forEach(function(t){i.cachedPlaceHolders.forEach(function(e,n){t.qField===e.qField&&(i.cachedPlaceHolders[n]=p.extend(true,{},t))})});s=i.cachedPlaceHolders}if(i.multiPopover){var l=m.getIndexByKey(a,"name",i.multiPopover.fieldName);var c=m.getIndexByKey(i.items,"name",i.multiPopover.fieldName);var u=l>-1;if(u){var h=a.splice(l,1)[0];a.splice(c,0,h);var g=m.getAllStatesFromSelections(a,i.multiPopover.fieldName);if(g.length<=1&&i.activeFieldName.length){t.element('.item[data-csid="'+i.activeFieldName+'"]').focus();i.multiPopover.close()}}else i.multiPopover.close()}i.items=a;k();r(function(){i.$broadcast("refreshPager")})}o(i,"model",function(){I&&I.dispose();I=i.model.layoutSubscribe(A)});i.$watch(u.inObjectView,k);i.$watch("isSmallDevice",k);i.clear=function(t,e,n){var s=e?[e]:m.getAllStatesFromSelections(i.items);i.$parent.itemSelected&&(i.$parent.itemSelected=false);n&&n.stopPropagation();var a=s.map(function(e){return i.model.clearField(t,e)});return x.all(a)};i.clearAllFields=function(){return i.model.clearAll()};i.back=function(){return i.model.back()};i.forward=function(){return i.model.forward()};function T(e){var n=t.element(e).next("li");if(t.element(e).parent().find("li").length<=1)return null;return t.element(e).parent().find("li").length>1&&n.length>0?n:null}function E(e){var n=t.element(e).prev("li");if(t.element(e).parent().find("li").length<=1)return null;return n.length>0?n:null}function $(e,n){var s;var a=e.which;a=e.shiftKey&&w.TAB===a?"SHIFT_TAB":a;var o=document.activeElement&&"qv-multi-state-popover-btn-clear"===t.element(document.activeElement).attr("tid");var l=".item-multi-state[data-csid="+i.multiPopover.fieldName+"]";switch(a){case w.ESCAPE:i.multiPopover.close();s=t.element(l);break;case w.DELETE:s=T(e.target)||E(e.target);i.clear(n.qField,n.stateName);break;case w.SPACE:case w.ENTER:r(function(){e.target.click()});break;case w.ARROW_RIGHT:case w.ARROW_DOWN:case w.TAB:if(o)s=t.element('[tid="qv-multi-state-popover"] li.item:first');else{s=T(e.target);if(null===s&&a===w.TAB){i.multiPopover.close();s=t.element(l)}}break;case w.ARROW_LEFT:case w.ARROW_UP:case"SHIFT_TAB":if(o){s=t.element(l);i.multiPopover.close()}else s=E(e.target);break}if(s){s.focus();e.preventDefault()}}i.showPopover=function(e){var n=t.element(e.target).closest(".item"),s=n.scope().item.qField,a=n.scope().item.isPlaceHolder,o={qvaOutsideIgnoreFor:"currentSelectionsItems",$alignToElement:n,showLock:true,direction:h.direction};if(i.isClearSelectionIcon(e.target)){if(i.activeFieldName){c.isSmallDevice?q.close():C.close();i.activeFieldName=""}return}if(!n.hasClass("item-multi-state")&&(s===i.activeFieldName||a)){c.isSmallDevice?q.close():C.close();i.activeFieldName="";return}r(function(){i.closeTooltip()},100);i.activeFieldName=s;var l={listboxPopoverService:q,listboxPopoverServiceMobile:C,$timeout:r};var u=m.getAllStatesFromSelections(i.items,s);if(u.length>1){if(i.multiPopover)return;var d=function t(){return m.getMultiPopoverItems(i.items,s)};i.multiPopover=m.openMultiStatePopover(P,d,n[0],i.brightCurSel,{onClose:function t(){i.multiPopover=null;i.activeFieldName=""},clear:i.clear,click:function e(n){var s=t.element(n.target).closest(".item");var a=s.scope().item.qField;var r=s.scope().item.displayStateName;i.multiPopover.close();i.closeTooltip();i.onCloseFocusSelector='.item[data-csid="'+a+'"]';m.openListboxPopover(m.activatePopover,i,c.isSmallDevice,r,a,o,l)},openTooltip:i.openTooltip,closeTooltip:i.closeTooltip,direction:h.direction,handleKeyDown:$});i.multiPopover.fieldName=s}else m.openListboxPopover(m.activatePopover,i,c.isSmallDevice,u[0],s,o,l)};i.openTooltip=function(t,e){if(i.isClearSelectionIcon(t.target)){i.closeTooltip();return}if(v||n.utils.touch)return;var s=i.multiPopover&&i.multiPopover.fieldName===e.qField;if(e.states&&s)return;i.cancelTooltip();g=r(function(){var n=e.qStateCounts,i="object"===a(n),r=i?" ("+(n.qSelected+n.qSelectedExcluded+n.qLocked+n.qLockedExcluded)+"/"+e.qTotal+")":"";var o=e.states||!s&&"$"===e.stateName?e.translation:[m.getDisplayStateName(e.stateName),": ",e.translation].join("");v=true;l.open({content:[{header:(e.qReadableName||e.qField)+r,rows:[{content:o}]}],position:{x:t.clientX,y:t.clientY},alwaysOnTop:true,direction:"bottom",template:"current-selections-tooltip-template.ng.html"})},500)};i.closeTooltip=function(){v=false;i.cancelTooltip();l.close()};i.cancelTooltip=function(){r.cancel(g)};i.isClearSelectionIcon=function(e){return t.element(e).closest(".remove").is(".remove")};i.handleKeyDown=function(e,n){var a;var r=e.which;r=e.shiftKey&&w.TAB===r?"SHIFT_TAB":r;switch(e.which){case w.DELETE:a=i.items&&i.items.length>1?T(e.target):s.find('[data-tid="current-selections-back"]');i.clear(n.qField);break;case w.ESCAPE:if(i.multiPopover){i.multiPopover.close();a=t.element('.item[data-csid="'+i.multiPopover.fieldName+'"]')}break}if(n.isSingleState)switch(e.which){case w.SPACE:case w.ENTER:case w.ARROW_DOWN:i.showPopover(e);break}else switch(r){case w.SPACE:case w.ENTER:i.multiPopover?i.multiPopover.close():i.showPopover(e);a=t.element('.item[data-csid="'+i.multiPopover.fieldName+'"]');break;case w.ARROW_DOWN:i.multiPopover||i.showPopover(e);a=t.element('.item[data-csid="'+i.multiPopover.fieldName+'"]');break;case w.TAB:if(i.multiPopover){a=t.element('[tid="qv-multi-state-popover-btn-clear"]');e.preventDefault()}break;case"SHIFT_TAB":i.multiPopover&&i.multiPopover.close();break}a&&a.focus()};function M(t,n){i.items.forEach(function(t){if(-1!==n[0].indexOf(t.qField)){n[1]?t.feedbackActive=false:t.feedbackActive=true;e.$apply(i)}})}b=e.$rootScope.$on("locked-feedback",M);var F=function t(){var n=e.getService("qvExploreSelectionsService");n.off();i.isExploreSelectionsActive=false;i.currentSelectionDisabled=false};S.subscribe("selection/insights/close",F);S.subscribe("cao/insights/close",function(){i.isCaoActive=false});S.subscribe("selections/insights/details/close",function(){i.currentSelectionDisabled=false});S.subscribe("selections/insights/details/open",function(){i.currentSelectionDisabled=true});i.$on("$destroy",function(){b();I&&I.dispose();S.unsubscribe("cao/insights/close");S.unsubscribe("selection/insights/close",F);S.unsubscribe("selections/insights/details/close");S.unsubscribe("selections/insights/details/open")})}]};e.directive("qvStageCurrentSelections",function(){return k});return k}.apply(e,i),void 0!==s&&(t.exports=s))},322:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(429),n(224),n(430),n(478),n(479),n(480),n(481),n(482)],s=function(t,e,n,i,s,a,r,o,l,c){function u(t,e){t=t.toLowerCase()||"image";e=e.toLowerCase();var u=e+"-"+t;function d(){var t;switch(u){case"sheet-pdf":case"object-pdf":t=o;break;case"sheet-image":case"object-image":t=r;break;case"story-ppt":t=l;break;case"story-pdf":t=c;break;default:t=r}return t}var p={template:d(),controller:["$scope","$timeout",function(e,r){e.exportType=t;e.states=i.getStates();e.state=e.states.IDLE;var o={CurrentSize:"0",BestFitPreserveAspectRatio:"1",BestFitNoPreserveAspectRatio:"2"};e.print={fitCriteria:o.CurrentSize};if(e.input.object){var l=e.input.object.model.id;var c={id:l,model:e.input.object.model,options:{id:l,isVisible:true,isOnGrid:false,isZoomed:false}};e.obj=c}switch(u){case"sheet-pdf":case"object-pdf":case"story-pdf":e.sizes=s.sizes;e.layouts=s.layouts;e.selectedSize=e.sizes[1];e.print.dpi=200;e.selectedLayout=e.layouts[1];e.minDpi=72;e.maxDpi=300;r(function(){e.onPrintLayout(e.selectedLayout)});break;case"sheet-image":case"object-image":e.availableFormats=["Jpeg","Png"];e.print.width=e.input.currentWidth;e.print.height=e.input.currentHeight;e.print.dpi=e.input.currentDpi;e.print.format="Png";e.imageCustomSize=false;break;case"story-ppt":e.availablePptDpi=[96,150,220];e.print.dpi=e.availablePptDpi[2];e.print.currentWidth=e.input.currentWidth;e.print.currentHeight=e.input.currentHeight;e.print.currentDpi=e.input.currentDpi;e.formats=a.formats;e.selectedFormat=e.formats[3];r(function(){e.onPptFormatChange(e.selectedFormat)});break}var d=n.create(e);e.confirm=d.confirm;e.onImageCustomSize=d.onImageCustomSize;e.onSizeChange=d.onSizeChange;e.onPrintLayout=d.onPrintLayout;e.onPptFormatChange=d.onPptFormatChange}]};return p}function d(){var t=document.createElement("div");t.style.width="1in";var e=document.getElementsByTagName("body")[0];e.appendChild(t);var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("width");e.removeChild(t);var i=n&&Math.round(parseFloat(n));i=i||96;return i>300?300:i}function p(t,n,s,a,r,o){var l="Print."+n+".Title";var c=d();var p=u(n,s);var h=e.getService("luiDialog").show({controller:p.controller,template:p.template,input:{title:l,object:t,sourceType:"object",exportType:n,currentWidth:a,currentHeight:r,currentDpi:c}});h.closed.then(function(){i.cancel();o&&o()});return h}function h(n,s,a){var r="Print."+s+".Title";var o;o="story"===a.toLowerCase()?n&&n.inStoryPlayState()?t("#qv-storytelling .qv-story-slide-active"):t("#qv-storytelling .qv-grid-story"):n.model&&n.model.isCustomSize()?t("#grid"):t(".qvt-sheet > .sheet-grid");var l=Math.round(o.width()||960);var c=Math.round(o.height()||720);var p=d();var h=u(s,a);var f=e.getService("luiDialog").show({controller:h.controller,template:h.template,input:{title:r,object:n,exportType:s,currentWidth:l,currentHeight:c,currentDpi:p}});f.closed.then(function(){i.cancel()})}return{showForObject:p,showForGlobalMenu:h,getScreenDpi:d}}.apply(e,i),void 0!==s&&(t.exports=s))},323:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(54),n(89),n(91),n(133),n(975),n(280)],s=function(t,e,i,s,a){t.service("odagNavpointService",["$timeout","$delayedModal","odagNavpointServiceUI",function(t,r,o){var l;var c={};var u={SUCCEEDED:"succeeded",FAILED:"failed",VALIDATING:"validating",QUEUED:"queued",LOADING:"loading",CANCELING:"canceling",CANCELED:"canceled"};var d=[u.SUCCEEDED,u.FAILED,u.CANCELED];function p(t,e){o.updateImageOnItemHeader(e);return t.getLoadedLinkInfo(t).then(function(t){if(t.templateApp){e.templateName=t.templateApp.name;e.templateDescription=t.templateApp.description;if(t.templateApp.thumbnail){"/"===t.templateApp.thumbnail.substr(0,1)&&(t.templateApp.thumbnail=t.templateApp.thumbnail.substr(1));e.templateThumbnail=n.p+t.templateApp.thumbnail}o.updateImageOnItemHeader(e)}else{e.invalid=true;e.templateName=s.get("odag.toolbar.navpoint.popup.noTemplate");e.templateDescription=""}})}function h(t){switch(t.state){case u.SUCCEEDED:var e=s.get("odag.toolbar.navpoint.popup.delete.confirmation",[t.name]);var n=new i;r.open({title:s.get("odag.toolbar.navpoint.popup.delete.confirmation.title"),content:e,buttons:[{name:"Common.Cancel",tid:"odag-applist-modal-cancelBtn",callback:function t(){n.resolve()}},{name:"Common.Delete",tid:"odag-applist-modal-deleteBtn",defaultButton:true,callback:function e(){return a.deleteGenApp(t.parentContext.app,t.requestId).then(function(){n.resolve()})}}]});return n.promise;case u.FAILED:return a.requestAction(t.parentContext.app,t.requestId,a.ODAGRequestActionConst.FAIL_ACK,true,true);case u.VALIDATING:case u.QUEUED:case u.LOADING:case u.CANCELING:var o=true;var l=true;if(t.lastLoadedTime){o=false;l=false}return a.requestAction(t.parentContext.app,t.requestId,a.ODAGRequestActionConst.CANCEL,o,l);case u.CANCELED:return a.requestAction(t.parentContext.app,t.requestId,a.ODAGRequestActionConst.CANCEL_ACK,true,true)}}function f(t,e,n){return t.getLoadedLinkInfo(t).then(function(i){return a.reloadApp(t.model.parent.app,i,e,n,t.actualRowEst)})}function g(t,e){return a.getSelections(t,e)}function v(t,e){return o.getSelectedValuesDisplayString(t,e)}function m(t){return t.getLoadedLinkInfo(t).then(function(e){return a.generateApp(t.model.parent.app,t.model.parent.id,e,t.id,t.actualRowEst)})}function b(t){delete c[t.id]}function y(n,s,r,l){if(!r){l=Date.now();c[n.id]=l}return c[n.id]&&l>=c[n.id]?a.getGeneratedAppsForLink(n.model.parent.app,n.model.parent.id,n.data.odagLinkRefID,n.id).then(function(i){i.forEach(function(t){var i=o.createGeneratedAppWrapper(t,n.model.parent);var a=s.map(function(t){return t.requestId}).indexOf(t.id);if(a>-1){var r=s[a];var l=e.chain(i).keys().every(function(t){return e.has(r,t)&&e.isEqual(i[t],r[t])}).value();l||s.splice(a,1,i)}else s.push(i)});for(var a=s.length-1;a>-1;a--){var r=s[a];i.some(function(t){return t.id===r.requestId})||s.splice(a,1)}s.sort(function(t,e){var n=new Date(t.createdDate);var i=new Date(e.createdDate);return i-n});if(s.some(function(t){return t.loading}))return t(function(){y(n,s,true,l)},3e3);delete c[n.id]}):i.resolve()}function S(t){var e=s.get("Common.None");t.range&&(t.range.lowerBound&&t.range.lowerBound===t.range.upperBound?e=t.range.lowerBound:void 0===t.range.lowerBound||t.range.upperBound?void 0===t.range.upperBound||t.range.lowerBound?void 0!==t.range.lowerBound&&void 0!==t.range.upperBound&&(e="["+t.range.lowerBound+" - "+t.range.upperBound+"]"):e="<="+t.range.upperBound:e=">="+t.range.lowerBound);return e}function I(t,e){var n=true;t.range&&(t.range.lowerBound&&t.range.lowerBound===t.range.upperBound?n=t.range.lowerBound===e.length:void 0===t.range.lowerBound||t.range.upperBound?void 0===t.range.upperBound||t.range.lowerBound?void 0!==t.range.lowerBound&&void 0!==t.range.upperBound&&(n=e.length>=t.range.lowerBound&&e.length<=t.range.upperBound):n=e.length<=t.range.upperBound:n=e.length>=t.range.lowerBound);return n}function x(t,e){e.length=0;t.getLoadedLinkInfo(t).then(function(n){a.getConstraintFieldBindingValues(t.model.parent.app,n.bindings).then(function(t){for(var i=0;i<n.bindings.length;i++){var s=t[i];var a={fieldName:n.bindings[i].selectAppParamName,values:s.fieldValues,hasConstraint:!s.noConstraint,constraint:S(n.bindings[i]),bindingPassesConstraint:I(n.bindings[i],s.fieldValues)};e.push(a)}})})}function w(t,e,n){return a.renameGenApp(t,e,n)}function q(t){var e=t.parentContext.app;return a.clearSelections(e).then(function(){var n=[];for(var s=0;s<t.selectionsState.length;s++){var r=t.selectionsState[s];var o=r.selectionAppParamName;var l=r.values;n.push(a.selectFieldValuesForField(e,o,l))}return i.all(n)})}l={ODAG_STATE:u,ODAG_TERMINAL_STATES:d,updateItemHeader:p,loadGeneratedApps:y,stopLoadGeneratedApps:b,deleteGeneratedApp:h,reloadApp:f,getSelections:g,getSelectedValuesDisplayString:v,generateApp:m,renameGenApp:w,applySelections:q,initializeBindings:x};return l}])}.apply(e,i),void 0!==s&&(t.exports=s))},362:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(95),n(93),n(122),n(94),n(120),n(215),n(301),n(143)],s=function(t,e,n,i,s,a,r,o,l,c){var u=false;var d=false;var p={userId:void 0,userDirectory:void 0};function h(t){var n=e.getService("qvAppViewService");n.blockScrollIntoView=true;n.activeId=t.qInfo.qId;n.lastActiveId=t.qInfo.qId;n=null}function f(t){u=t}var g={update:function t(){return o.getList().then(function(t){return t.getLayout().then(function(t){g.all.approvedStories=t.filter(l.filterApproved).sort(l.sortByRank);g.all.publishedStories=t.filter(l.filterMyPublishedCommunity(p)).sort(l.sortPublishedTime);g.all.privateStories=t.filter(l.filterPrivate).sort(l.sortByRank);g.all.communityStories=t.filter(l.filterCommunity(p)).sort(l.sortCommunity(1));g.all.mashed=[];if(g.current)for(var e=0;e<Object.keys(g.all).length;e++){var i=g.all[Object.keys(g.all)[e]];for(var s=0;s<i.length;s++)g.all.mashed.push(i[s])}n.publish("/data/story-list-layout-changed")})})},all:{mashed:[],approvedStories:[],publishedStories:[],privateStories:[],communityStories:[]},privateStories:[],current:{},currentIndex:function t(){for(var e=0;e<g.all.mashed.length;e++)if(g.current.id===g.all.mashed[e].qInfo.qId)return e;return 0},hasPrevious:function t(){return g.currentIndex()>0},hasNext:function t(){return g.currentIndex()<g.all.mashed.length-1},getPrevious:function t(){if(g.hasPrevious())return g.all.mashed[g.currentIndex()-1];return null},getNext:function t(){if(g.hasNext())return g.all.mashed[g.currentIndex()+1];return null},getFirst:function t(){return g.all.mashed[g.currentIndex()]},getLast:function t(){return g.all.mashed[g.all.mashed.length-1]},navigate:function e(){if(u)return;var n=g.all.mashed.length-g.all.communityStories.length-1;var i=g.current===g.getFirst()?g.getNext():g.currentIndex()<n?g.getNext():g.currentIndex()===n?g.getPrevious():null;var r=a.view===a.Views.story;if(i){if(r){h(i);o.get(i.qInfo.qId).then(function(t){s.goToStory(t.id,Object.keys(a.States)[a.state])})}}else{var l=t(".qv-pop-appview").scope();l&&l.closeView();l=null;r&&s.goToOverview()}},communitySort:function t(e,n){var i=g.all.communitySheets.sort(l.sortCommunity(e));n&&i.reverse();g.all.communitySheets=i}};var v={update:function t(){return r.getList().then(function(t){return t.getLayout().then(function(t){v.all.approvedSheets=t.filter(l.filterApproved).sort(l.sortByRank);v.all.publishedSheets=t.filter(l.filterMyPublishedCommunity(p)).sort(l.sortPublishedTime);v.all.privateSheets=t.filter(l.filterPrivate).sort(l.sortByRank);v.all.communitySheets=t.filter(l.filterCommunity(p)).sort(l.sortCommunity(1));v.all.mashed=[];if(v.current)for(var e=0;e<Object.keys(v.all).length;e++){var i=v.all[Object.keys(v.all)[e]];for(var s=0;s<i.length;s++)v.all.mashed.push(i[s])}n.publish("/data/sheet-list-layout-changed",v.all.mashed)})})},all:{mashed:[],approvedSheets:[],publishedSheets:[],privateSheets:[],communitySheets:[]},privateSheets:[],current:{},getNumberOfSheets:function t(){return v.all.mashed.length},currentIndex:function t(){for(var e=0;e<v.all.mashed.length;e++)if(v.current.id===v.all.mashed[e].qInfo.qId)return e;return 0},hasPrevious:function t(){return v.currentIndex()>0},hasNext:function t(){return v.currentIndex()<v.all.mashed.length-1},getPrevious:function t(){if(v.hasPrevious())return v.all.mashed[v.currentIndex()-1];return null},getNext:function t(){if(v.hasNext())return v.all.mashed[v.currentIndex()+1];return null},getFirst:function t(){return v.all.mashed[0]},getLast:function t(){return v.all.mashed[v.all.mashed.length-1]},getById:function t(e){for(var n=0;n<v.all.mashed.length;n++)if(v.all.mashed[n].qInfo.qId===e)return v.all.mashed[n];return null},navigate:function e(){if(u)return;var n=v.all.mashed.length-v.all.communitySheets.length-1;var i=v.current===v.getFirst()?v.getNext():v.currentIndex()<n?v.getNext():v.currentIndex()===n?v.getPrevious():null;var o=a.view===a.Views.sheet||a.view===a.Views.object||a.view===a.Views.masterObject;if(i){if(o){h(i);r.get(i.qInfo.qId).then(function(t){s.goToSheet(t.id,Object.keys(a.States)[a.state])})}}else{var l=t(".qv-pop-appview").scope();l&&l.closeView();l=null;o&&s.goToOverview()}},navigateToSheet:function t(e){if(e){h(e);r.get(e.qInfo.qId).then(function(t){s.goToSheet(t.id,Object.keys(a.States)[a.state])})}},communitySort:function t(e,n){var i=v.all.communitySheets.sort(l.sortCommunity(e));n&&(i=i.reverse());v.all.communitySheets=i}};function m(){if(d)return Promise.resolve();a.SheetChanged.bind(function(t){v.current=t});a.StoryChanged.bind(function(t){g.current=t});c.onDataReceived.then(function(t){if("NONE"!==t.userDirectory){p.userId=t.userId;p.userDirectory=t.userDirectory}});return i.getApp().then(function(){return Promise.all([v.update(),g.update()]).then(function(){return Promise.all([r.getList(),o.getList()]).then(function(t){var e=t[0];e.Invalidated.bind(v.update);var n=t[1];n.Invalidated.bind(g.update);d=true;return d})})})}var b={isInitialized:function t(){return d},init:m,Sheets:v,Stories:g,suspendNavigation:f};e.service("$navigationService",function(){return b});return b}.apply(e,i),void 0!==s&&(t.exports=s))},363:function(t,e,n){"use strict";var i,s;!(i=[n(91),n(273),n(90),n(11)],s=function(t,e,n,i){return{activatePopover:s,createPlaceHolder:r,getMultiPopoverItems:o,openMultiStatePopover:l,getAllStatesFromSelections:c,getAllSelectionsInStates:u,groupSelectionsByField:d,openListboxPopover:p,getIndexByKey:h,getDisplayStateName:a};function s(t,e,n,i,s,a){return t.showField(e,i.model.app.enigmaModel,n,{qStateName:a},function(){i.activeFieldName="";s(function(){i.closeTooltip()},100)})}function a(n){return n===e.DEFAULT_STATE_NAME?t.get(e.DEFAULT_STATE_TRANSLATION):n}function r(t,e,n){t.isPlaceHolder=true;t.active=false;t.qLocked=false;t.feedbackActive=false;t.translation="";t.qTotal=0;t.qStateCounts=0;e&&(t.qField=e);n&&(t.name=n);return t}function o(t,e){t=t||[];var n=t.filter(function(t){return t.qField===e})[0];var i=[];n&&n.states&&(i=n.states.map(function(t){t.isSingleState=true;t.displayStateName=a(t.stateName);return t}));return i}function l(t,e,n,i,s){var a=t.show({alignToElement:n,clear:s.clear,click:s.click,onClose:s.onClose,openTooltip:s.openTooltip,closeTooltip:s.closeTooltip,handleKeyDown:s.handleKeyDown,getItems:e,brightCurSel:i});return a}function c(t,e){e=e||null;var i=[];e&&(t=t.filter(function(t){return t.qField===e}));t.forEach(function(t){t.states?t.states.forEach(function(t){i.push(t.stateName)}):i.push(t.stateName)});i=n.getUnique(i);return i}function u(t){var e=[];(t.selectionsInStates||[]).forEach(function(t){t.qSelectionObject.qSelections.forEach(function(e){e.stateName=t.stateName});e=e.concat(t.qSelectionObject.qSelections)});return e}function d(t){var e={};t.forEach(function(t){var n=e[t.qField];n=n||{states:[],qField:t.qField};n.states.push(t);e[t.qField]=n});var n=Object.keys(e).map(function(t){var n=e[t];var i=n.states;if(1===i.length){n=n.states[0];n.isSingleState=true;n.isDefaultState="$"===i[0].stateName}else n.name=i[0].name;return n});return n}function p(t,e,n,s,a,r,o){if(n)return t(o.listboxPopoverServiceMobile,a,r,e,o.$timeout,s).catch(function(t){false});return t(o.listboxPopoverService,a,r,e,o.$timeout,s).then(function(t){var n;t.closing.then(function(t){t&&!i(t.target).closest(".current-selections-item").length>0&&(e.activeFieldName="");n=t}).catch(function(t){false});t.closed.then(function(){if(e.onCloseFocusSelector){i(e.onCloseFocusSelector).focus();e.onCloseFocusSelector=null}else e.activeFieldName&&i('.item[data-csid="'+e.activeFieldName+'"]').focus();t=null;n||(e.activeFieldName="")}).catch(function(t){false});t.opened.catch(function(t){false})}).catch(function(t){false})}function h(t,e,n){if([void 0,null].contains(e)||[void 0,null].contains(n))throw new Error("unaccepted key or val ( key: "+e+", val: "+n+")");var i=t.map(function(t){return t[e]});return i.indexOf(n)}}.apply(e,i),void 0!==s&&(t.exports=s))},364:function(t,e,n){"use strict";var i,s;!(i=[n(89),n(97)],s=function(t,e){var n={template:null,controller:["$scope","$element","$timeout",function(n,i,s){var a=this;n.input.selectionsActivated=function(){};n.input.selectionsDeactivated=function(){};a.close=function(){r()};function r(){s(function(){n.destroyComponent();i.remove()});e.off("start.listbox-popover-error",r)}function o(){return s(function(){return i.find(".toolbar-wrapper").outerWidth()})}var l=n.input.onPopoverClose;var c=null;n.closingDeferred.promise.then(function(t){c&&c();l(t);r()});t.all({object:n.input.getVisualization(),width:o()}).then(function(t){var i=t.object,s=t.width;i.getSelectionToolbar().then(function(t){n.toolbar=t;n.toolbar.showLock=n.input.options.showLock;n.toolbar.position={width:s};i.activateSelections()});i.loaded.then(function(){i.ext.hasError(i)&&e.on("start.listbox-popover-error",r)});i.selectionsApi.watchActivated(function(){n.input.selectionsActivated()});i.selectionsApi.watchDeactivated(function(){n.input.selectionsDeactivated();r()});c=function t(){i.selectionsApi.confirm()}})}]};return n}.apply(e,i),void 0!==s&&(t.exports=s))},365:function(t,e){t.exports='<lui-popover\n\t\tclass="qv-listbox-popover"\n\t\tstyle="min-width: 200px;width: 234px;height: 332px"\n\t\ton-close-view="closeView(event)"\n\t\tqva-outside-ignore-for="{{input.qvaOutsideIgnoreFor}}"\n\t\tqva-mouse-wheel-outside="close()">\n\t<lui-popover-body style="height: 332px" class="lui-nopad">\n\t\t<qv-spinner show="!input.model" spinner-height="100px" spinner-width="100px" show-Delay="300" center-in-parent="true"></qv-spinner>\n\t\t<div class="toolbar-wrapper"\n\t\t\t qva-include-selection-toolbar\n\t\t\t component="input.selectionToolbarComponent"\n\t\t\t toolbar="toolbar"\n\t\t\t options="input.options"></div>\n\t\t<div class="listbox-wrapper">\n\t\t\t<qv-object object="object" model="input.model" options="input.options"></qv-object>\n\t\t</div>\n\t</lui-popover-body>\n</lui-popover>\n'},366:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95)],s=function(t,e){t.service("qvCaoSelectionService",[function(){var t={sendSelectedChartChangeEvent:function t(){e.publish("cao/insight/selectedChartChanged",this.selectedChart)},getSelectedChart:function t(){return this.selectedChart},selectChart:function t(e){this.selectedChart=e;this.sendSelectedChartChangeEvent()},clearSelection:function t(){if(this.selectedChart){this.selectedChart=void 0;this.sendSelectedChartChangeEvent()}}};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},367:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(875)],s=function(t,e,n){function i(t,e,n){this.visualization=t;this.searchReport=e;this.options=t.options;this.type="generated";this.analysisPrecedentId=t.matchRecord.analysisPrecedentId;this.appearsOnSheets=[];this.properties=n}i.prototype.getTitle=function(){var t=this.visualization.analysis.titleTemplate;var i=this.visualization.matchRecord.matches;return e.resolve(n.findTitleForChart(t,i))};i.prototype.getMatchDetails=function(){var t=[];if(this.searchReport.search){var e=this.searchReport.search.fieldLibItemFinder.searchHits;this.visualization.matchRecord.matches.forEach(function(n){var i=n.field;n.libId&&(i=n.libId+"- "+n.libIdLabel);var s=e[i];s&&t.push({matchedOn:s.matchingTypes[0],matchedField:n.field||n.libIdLabel})})}return t};i.prototype.getChartType=function(){return e.resolve(this.properties.visualization)};i.prototype.loadChart=function(n){var i=new e;var s=t.getService("qvCaoChartService");var a=this;a.getTitle().then(function(t){s.buildInsightChart(t,n,a.properties).then(function(t){i.resolve(t)})});return i.promise};return i}.apply(e,i),void 0!==s&&(t.exports=s))},368:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(369)],s=function(t,e){t.service("qvCaoComplexityEstimatorService",[function(){var t;var n=[];var i=/aggr|rangeSum|FirstSortedValue/gi;function s(t){t.getFieldList().then(function(t){n=t})}function a(t){var e=n.filter(function(e){return e.qName===t});return e[0]&&e[0].qCardinal?e[0].qCardinal:0}function r(t){var n=e.classify(t);var s=0;var a=false;n.results.forEach(function(t){(-1!=t.content.search(i)||t.remainder&&-1!=t.remainder.content.search(i))&&(a=true);(t.function&&""!=t.function.content||t.isOperator)&&s++});return s*(a?3:1)}function o(t){var e=r(t.expr);var n=a(t.field,t)*e;return n*(e+1)}var l=function t(e){var n=0;e.analysis.dims&&e.analysis.dims.forEach(function(t){n+=o(t)});e.analysis.msrs&&e.analysis.msrs.forEach(function(t){n+=o(t)});return n};t={init:s,estimateComplexity:l};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},369:function(t,e,n){"use strict";var i,s;!(i=[n(54),n(407),n(187),n(178),n(408)],s=function(t,e,n,i,s){var a={};var r={classify:o};return r;function o(n){if(!t.isString(n))throw new Error("Expression-classifier: Expression must be a string");var i=n;if(a[i])return a[i];var r={content:n,count:0,result:{},results:[]};if(""===n){a[i]=r;return r}"="===n.charAt(0)&&(n=n.substr(1));var o=s.stripComments(n);var c=e.tokenize(o);r.count=c.length;c.forEach(function(t,e){var n;if(t.isOperator)r.results.push(t);else{n=l(t.content);r.results.push(n)}0===e&&(r.result=n)});a[i]=r;return r}function l(t){var e={content:t,function:{content:"",isCommon:false},remainder:{content:"",isFunction:false,isCommonFunction:false,isCommaSeparated:false,isFieldlike:false,isString:false,isNumber:false,isQualifier:false,qualified:{qualifier:"",content:"",isFieldlike:false}}};var n=c(t);if(n.hasAggregation){e.function.content=u(t,n);e.function.isCommon=v(e.function.content);e.remainder.content=d(t,n);var i=c(e.remainder.content);e.remainder.isFunction=b(i);e.remainder.isCommonFunction=y(e.remainder.content,i);e.remainder.isQualifier=h(e.remainder.content);e.remainder.isCommaSeparated=m(e.remainder.content);if(e.remainder.isQualifier){var s=f(e.remainder.content),a=g(e.remainder.content,s),r=c(a);e.remainder.qualified={qualifier:s,content:a,isFieldlike:S(r)}}n=i}else e.remainder.content=e.content;e.remainder.isFieldlike=S(n);e.remainder.isString=I(e.remainder.content);e.remainder.isNumber=x(e.remainder.content);return e}function c(t){var e={};e.expression=t;e.hasPrefix="="===t.charAt(0);e.leftSymbolIndex=t.indexOf(n.SYMBOLS.FUNCTION.LEFT);e.hasAggregation=e.leftSymbolIndex>0;e.isRightSymbolLast=t.substring(t.length-1)===n.SYMBOLS.FUNCTION.RIGHT;e.isEncapsulated=e.hasAggregation&&e.isRightSymbolLast;e.hasOperator=p(t);return e}function u(t,e){var n=e.hasPrefix?1:0,i=e.hasPrefix?e.leftSymbolIndex+1:e.leftSymbolIndex;return t.substr(n,i).trim()}function d(t,e){var n=t.substr(e.leftSymbolIndex),i=n.substr(1,n.length-2);return i.trim()}function p(t){var e=n.OPERATORS,i=e.SINGLES,s=e.MULTIPLES,a=e.WORDS;var r=i.some(function(e){return t.indexOf(e)>-1});if(r)return true;var o=s.some(function(e){return t.indexOf(e)>-1});if(o)return true;var l=a.some(function(e){return t.indexOf(" "+e+" ")>-1});return l}function h(t){return n.QUALIFIERS.some(function(e){return 0===t.toLowerCase().indexOf(e)})}function f(t){var e=n.QUALIFIERS.filter(function(e){return 0===t.toLowerCase().indexOf(e)}).shift();return e}function g(t,e){return t.slice(e.length).trim()}function v(t){return n.COMMON_FUNCTIONS.some(function(e){return t.toLowerCase()===e})}function m(t){var e=i.getCharacterIndexes(t,",");return e.some(function(e){return!P(t,e)})}function b(t){return t.isEncapsulated&&!t.isBleedingOperator}function y(t,e){if(!e.isEncapsulated)return false;var n=t.substr(0,e.leftSymbolIndex);return v(n)}function S(t){var e=t.expression;if(I(t.expression))return false;var s=w(e,n.SYMBOLS.FIELD.LEFT),a=q(e,n.SYMBOLS.FIELD.RIGHT),r=i.getCharacterCount(e,n.SYMBOLS.FIELD.LEFT),o=i.getCharacterCount(e,n.SYMBOLS.FIELD.RIGHT);if(s&&a&&1===r&&1===o)return true;return C(t)}function I(t){var e=w(t,n.SYMBOLS.STRING.LEFT),s=q(t,n.SYMBOLS.STRING.RIGHT),a=n.SYMBOLS.STRING.LEFT===n.SYMBOLS.STRING.RIGHT,r=i.getCharacterCount(t,n.SYMBOLS.STRING.LEFT),o;if(a)o=2===r;else{var l=i.getCharacterCount(t,n.SYMBOLS.STRING.RIGHT);o=1===r&&1===l}return e&&s&&o}function x(t){return!Number.isNaN(+t)}function w(t,e){return t.charAt(0)===e}function q(t,e){return t.charAt(t.length-1)===e}function C(t){if(t.hasAggregation)return false;var e=t.expression,i=e.indexOf(" ")>-1;if(i)return false;var s=n.OPERATORS.SINGLES.concat(n.OPERATORS.MULTIPLES).some(function(t){return e.indexOf(t)>-1});return!s}function P(t,e){return Object.keys(n.SYMBOLS).some(function(s){var a=n.SYMBOLS[s];return i.getIsCharacterEncapsulated(t,e,a.LEFT,a.RIGHT)})}}.apply(e,i),void 0!==s&&(t.exports=s))},370:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(894),n(169)],s=function(t,e){t.directive("qvGlobalSearchHighlights",function(){return{restrict:"E",template:e,replace:true,scope:{qText:"=",qRanges:"="},link:function e(n){var i=t.getService("qvGlobalSearchDataService").getMaxColorsNum();n.slices=null;n.$watch("qRanges",function(t){if(t){var e=0,a=[],r=t.sort(function(t,e){return t.qCharPos-e.qCharPos});for(var o=0;o<r.length;o++){var l=r[o];l.qCharPos>e&&a.push({qTerm:-1,qSliceText:n.qText.slice(e,l.qCharPos),highlight:false,iStart:e,iEnd:l.qCharPos});e=l.qCharPos+l.qCharCount;var c={qTerm:l.qTerm%i,highlight:true,qSliceText:n.qText.slice(l.qCharPos,e),iStart:l.qCharPos,iEnd:e};s(a,c);o===t.length-1&&e<n.qText.length&&a.push({qTerm:-1,qSliceText:n.qText.slice(e,n.qText.length),highlight:false,iStart:e,iEnd:n.qText.length})}n.slices=a}});function s(t,e){var n=null;for(var i=0;i<t.length;i++)if(t[i].iStart===e.iStart){n=t.splice(i,1,e);break}n||t.push(e)}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},371:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(99),n(96)],s=function(t,e,n){t.directive("qvaSmartSearchSwipeHorizontal",["$parse",function(t){var i={up:false,down:false,right:true,left:true};return{restrict:"A",link:function s(a,r,o){var l=t(o.qvaSmartSearchSwipeHorizontal);function c(t,e){if(i[e.swipe.direction]){var s=e.swipe.curDeltaX>0?-1:0===e.swipe.curDeltaX?0:1;l(a,{delta:s});n.preventGestures(this.gestureHandler)}}e.treatAsDesktop()||n(r[0]).swipe({options:{radiusThreshold:50,preventDefault:false,useMomentum:true},start:c});a.$on("$destroy",function(){n(r[0]).off()})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},372:function(t,e,n){"use strict";var i,s;!(i=[n(2)],s=function(t){var e=function t(){};e.parseQuery=function(e,n){var i={text:e,appId:n};var s={method:"POST",url:"/api/v1/sentences",data:i};return t.request(s).then(function(t){var e=t.data;return e}).catch(function(t){throw t})};e.getQueries=function(e,n){var i="?limit="+e+"&appId="+n;var s={method:"GET",url:"/api/v1/sentences"+i};return t.request(s).then(function(t){var e=t.data.data;return e}).catch(function(t){throw t})};return e}.apply(e,i),void 0!==s&&(t.exports=s))},373:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91)],s=function(t,e){t.service("qvCaoLearningConfidenceService",[function(){var t;var n={HIGH:{value:10,text:"high"},MEDIUM:{value:5,text:"medium"},LOW:{value:2,text:"low"},EMPTY:{value:0,text:"empty"}};function i(t){var e=t.getRelevance();var i=t.getMatchRecord();var s=n.EMPTY;if(t.isModified()){s=n.EMPTY;return s.text}1===e?s=n.HIGH:e>=.5?s=n.HIGH:e>0&&(s=n.HIGH);i.precedentStats&&(i.precedentStats.matchedFields===i.matches.length?s=n.HIGH:i.precedentStats.matchedFields>0&&s.value<n.MEDIUM.value&&(s=n.HIGH));return s.text}function s(t,n,i,s){var a={search:[],learned:[]};var r=t.field||t.libIdLabel;var o="";var l=i.filter(function(t){return t.matchedField===r})[0];var c=!!t.libIdLabel;var u=c?t.libId:null;if(l){switch(l.matchedOn){case"absoluteExactMatchCaseSensitive":o=e.get("cao.search.generated.absoluteExactMatchCaseSensitive");break;case"absoluteExactMatch":o=e.get("cao.search.generated.absoluteExactMatch");break;case"exactMatch":o=e.get("cao.search.generated.exactMatch");break;case"literalMatch":o=e.get("cao.search.generated.literalMatch");break;case"headMatch":o=e.get("cao.search.generated.headMatch");break;case"headSynonymMatch":o=e.get("cao.search.generated.headSynonymMatch");break;case"headStemMatch":o=e.get("cao.search.generated.headStemMatch");break;case"headStemSynonymMatch":o=e.get("cao.search.generated.headStemSynonymMatch");break;case"partialTokenMatch":o=e.get("cao.search.generated.partialTokenMatch");break;case"substrPartialMatch":o=e.get("cao.search.generated.substrPartialMatch");break;case"semanticMatch":o=e.get("cao.search.generated.semanticMatch");break;case"valueMatch":o=e.get("cao.search.generated.valueMatch");break;default:break}if(o){o=o.replace(/\{1\}/g,function(t){return"<b>"+t+"</b>"});var d=e.get(o,[n.search.searchPhrase.text,l.matchedField]);a.search.push({text:d,field:l.matchedField,priority:1,type:t.slotRole,isLibItem:c,libItemId:u,searchMatch:true})}}if(t.appPrecedent&&t.appPrecedent.appPrecedent){var p=false;if(t.appPrecedent.userDefined&&t.appPrecedent.userDefined.isUserDefined&&t.appPrecedent.userDefined.relations.indexOf("define")>-1){p=true;o=t.aggr||"measure"===t.slotRole?e.get("cao.confidence.reason.defined_measure"):e.get("cao.confidence.reason.defined_dimension")}else o=t.aggr||"measure"===t.slotRole?e.get("cao.confidence.reason.learned_measure"):e.get("cao.confidence.reason.learned_dimension");o=o.replace(/\{0\}/g,function(t){return"<b>"+t+"</b>"});a.learned.push({text:e.get(o,r),field:r,priority:1,type:t.slotRole,isLibItem:c,libItemId:u,userMatch:p})}if(0===a.learned.length&&s){o=t.aggr||"measure"===t.slotRole?e.get("cao.confidence.reason.assumed_measure"):e.get("cao.confidence.reason.assumed_dimension");o=o.replace(/\{0\}/g,function(t){return"<b>"+t+"</b>"});a.learned.push({text:e.get(o,r),field:r,priority:0,type:t.slotRole,isLibItem:c,libItemId:u})}return a}t={getReasonForSelectingField:s,determineConfidence:i,confidenceLevels:n};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},374:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(936),n(103)],s=function(t,e,n,i){t.nativeComponent("qvCaoRefreshIndicator",{bindings:{},controller:[function(){this.refresh=function(){i.trackEvent(i.customEvents.INSIGHTS_REFRESH_CLICKED);e.publish("cao/insight/refresh")}}],template:n})}.apply(e,i),void 0!==s&&(t.exports=s))},375:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(971)],s=function(t,e,n){var i=null;var s=null;function a(a){var r={id:a.id,type:a.type,canCopy:function t(){return false},canCut:function t(){return false},canRemove:function t(){return true},remove:function t(){a.model.removeObject()},getAllPropertyPanelContent:function r(){if(!i){i=t.getService("$cacheFactory");s=i("pp-navPoint")}return e.all({properties:a.model.getProperties(),layout:a.model.getLayout()}).then(function(t){var e={definition:n,iconClass:"lui-icon lui-icon--sign-post",titleRef:"qMeta.title",properties:t.properties,layout:t.layout,model:a.model,cache:s,type:a.invalid?"invalid":"odagNavPoint"};return e})}};return r}return{createSelectedObjFromNavPoint:a}}.apply(e,i),void 0!==s&&(t.exports=s))},379:function(t,e,n){"use strict";var i,s;!(i=[n(95),n(92),n(117),n(254),n(89),n(108),n(90),n(91),n(11),n(155),n(105),n(182)],s=function(t,e,n,i,s,a,r,o,l,c,u,d){var p={};var h=e.extend("DataPrepService",{init:function t(e,n){e=e||r.getParameterByName("app");n=n||h.connectOptions;n.route="app/"+encodeURIComponent(e).toLowerCase();n.responseInterceptors=[{onRejected:function t(e,n,i){i.isHandled=true;return s.reject(i)}}];this.session=i.get(null,n);var a=this;this._callbacks=l.Callbacks();this.waitForOpen=new s;this.waitForResume=new s;this.waitForResume.resolve(a);this.restService=new c;document.addEventListener("onAppStateChanged",function(t){if(t.detail&&t.detail.inForegroundNow)a.session.resume(false).then(function(){a.waitForResume.resolve(a)});else if(t.detail&&!t.detail.inForegroundNow){a.session.suspend();a.waitForResume=new s}});function u(t){t=t||{};t.isHandled=true;t.message=o.get("DataPrep.Recommendations.ConnectionLostToDPS");a.waitForOpen.reject(t)}function d(){a.waitForOpen.resolve(a)}function p(t){var e=t.error;if(e){e.isHandled=true;-32e3!==e.code&&(e.dpsError=true)}}this.session.Error.bind(p);this.session.Close.bind(u);this.session.Open.bind(d);a.waitForResume.promise.then(function(){if(n.serverNodeId){var t=[];t.push(n.serverNodeId);a.rpc("setServerNodeId",t)}});this.session.enigmaPromise.then(d).catch(u)},rpc:function e(n,i){var s={method:n,params:i||[]};var a=this;return a.waitForResume.promise.then(function(){return a.session.rpc(s).then(function(e){if(e.result&&e.result.notification&&1005===e.result.notification.data.code){t.publish(u.Events.PubSub.StartSpin,{method:n});var s=i.length&&i.length>1&&i[1].forceReload;true===s&&(i[1].forceReload=false);return a.executeAfterReload(n,i).finally(function(){t.publish(u.Events.PubSub.StopSpin,{method:n})})}return e})})},rpcWithPolling:function e(n,i,s){s&&t.publish(u.Events.PubSub.StartSpin,{method:n});var a=true;var r=void 0;var o=function e(){s&&t.publish(u.Events.PubSub.StopSpin,{method:n})};r=setInterval(function(){a&&this.getProgress().then(function(){})}.bind(this),15e3);var l=function t(){a=false;void 0!==r&&clearInterval(r);r=void 0};return this.rpc(n,i).then(function(t){l();o();return t},function(t){l();o();throw t})},executeAfterReload:function t(e,n){var i=new s;this.waitForReload(i);return i.promise.then(function(){return this.rpc(e,n)}.bind(this))},_checkProgress:function t(e){var n=false;e.engine&&e.engine.qProgressData&&e.engine.qProgressData.qFinished&&true===e.dps.dataLoad.complete&&true===e.dps.profiling.complete&&(n=true);return n},waitForReload:function t(e){this.getProgress().then(function(t){this._checkProgress(t.result)?e.resolve(true):setTimeout(function(){this.waitForReload(e)}.bind(this),1e3)}.bind(this),function(t){e.reject(t)})},augmentOptions:function t(e){e["throwOnReload"]=true;return e},getProgress:function t(){return this.rpc("getProgress",[0])},getModel:function t(e){return this.rpc("getModel",[e||{}])},setModel:function t(e,n){return this.rpc("setModel",[e,n||{}])},initModel:function t(e,n){return this.rpc("initModel",[e,n||{}])},analyzeModel:function t(e,n){return this.rpc("analyzeModel",[e,n||{}])},getTargetTables:function t(e,n){return this.rpc("getTargetTables",[e,this.augmentOptions(n)||{}])},warmUpDPS:function t(e,n){return this.rpc("getTargetTables",[e,this.augmentOptions(n)||{}]).catch(function(t){t.error.dpsHandled=true;console.log("Warming up DPS ignored this error: ");console.log(t);throw t})},getTablePreview:function t(e,n,i){return this.rpc("getTablePreview",[e,n,this.augmentOptions(i)||{}])},getTableFields:function t(e,n,i){return this.rpc("getTableFields",[e,n,this.augmentOptions(i)||{}])},getLoadScript:function t(e,n){return this.rpc("getLoadScript",[e,n||{}])},getClassifications:function t(e){return this.rpc("getClassifications",[e])},getRestService:function t(){return this.restService},getVisRecommendations:function t(e,n){return this.rpc("getVisRecommendations",[e,n])},adaptVisualization:function t(e,n){return this.rpc("adaptVisualization",[e,n])},syncLoadModel:function t(e){return this.rpc("syncLoadModel",[e])},getRecommendations:function t(e,n){return this.rpcWithPolling("getRecommendations",[e,this.augmentOptions(n)||{}],true)},getDataPreview:function t(e){return this.rpc("getDataPreview",[e])},updateSources:function t(e,n,i){return this.rpcWithPolling("updateSources",[e,n,i||{}])}});h.getConnectOptions=function(){if(h.connectOptions){var t=new s;t.resolve(h.connectOptions);return t.promise}return n.global.getConfiguration().then(function(){h.connectOptions={host:r.hostname,isSecure:r.isSecure,prefix:r.basePath,port:r.port,subpath:"dataprepservice",reloadURI:r.reloadURI,serverNodeId:d.getServerNodeId()};return h.connectOptions})};h.isRunning=function(){var t=new c;return t.isRunning()};h.get=function(t,e){return h.getConnectOptions(e).then(function(e){t=t||r.getParameterByName("app");t=g(t);var n=p[t.toLowerCase()]||new h(t,e);p[t.toLowerCase()]=n;return n.waitForOpen.promise})};var f=".qvw";function g(t){if(a.isPersonalModeSync()&&-1!==t.indexOf(f,t.length-f.length))return t.substr(0,t.length-1)+"f";return t}return h}.apply(e,i),void 0!==s&&(t.exports=s))},380:function(t,e,n){"use strict";var i,s;!(i=[n(91)],s=function(t){function e(t){return"MessageCode."+(t||0)}function n(n){var i=t.get(e(n.qMessageCode),n.qMessageParameters);return i}function i(t){var e="";if(t)for(var i in t){e+=n(t[i]);i<t.length-1&&(e+="\n")}return e}function s(t){t=Math.floor(t);return t>9?""+t:"0"+t}function a(t){var e,n;var i=[];var s=[];for(e in t){n=t[e];!n.qErrorString||!n.qLine||(s[n.qLine]=true)}for(e in t){n=t[e];!n.qErrorString&&s[n.qLine]||i.push(n)}return i}return{translateMessage:n,translateMessageArray:i,formatNum:s,filterOutDuplicates:a}}.apply(e,i),void 0!==s&&(t.exports=s))},392:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(409)],s=function(t,e){t.directive("qvStateCountBar",function(){return{restrict:"E",template:e,replace:true,scope:{stateCounts:"=",options:"="},link:function t(e){e.percents=[];e.$watchCollection("stateCounts",function(){n()});function n(){var t=e.stateCounts,n;if(!t)return;n=s(t);e.percents=a(n)}function i(t){return Object.keys(t).reduce(function(e,n){return e+t[n]},0)}function s(t){var e=i(t),n={};["qSelected","qLocked","qOption","qAlternative"].forEach(function(i){var s=t[i]||0,a=Math.round(s/e*100);s>0&&0===a&&(a=1);n[i]=a});return n}function a(t){var e={},n,i,s=0;for(n in t){e[n]=t[n];(!i||t[n]>t[i])&&(i=n);s+=t[n]}s>100&&(e[i]=t[i]-(s-100));return e}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},396:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(414)],s=function(t){var e=function t(){this.globalDefaults={enableQVDCaching:true}};e.prototype.get=function(){var e=this;return t.getService("qvDataManagerAppStorageService").get("globalDefaults").then(function(t){return t||e.set().then(function(){return e.globalDefaults})})};e.prototype.set=function(e){return t.getService("qvDataManagerAppStorageService").set("globalDefaults",e||this.globalDefaults)};return e}.apply(e,i),void 0!==s&&(t.exports=s))},397:function(t,e){t.exports='<div class="lui-dialog error-dialog" on-close-view="closeView( $event )" qv-escape="handleEscButton( $event )" ng-style="modalStyle" tid="errorDialog">\n\t<div class="lui-dialog__header">\n\t\t<div class="lui-dialog__title" ng-if="title" q-translation="{{title}}"></div>\n\t</div>\n\t<div class="lui-dialog__body dm-main">\n\n\t\t<main ng-if="!html">{{content | translate}}</main>\n\t\t<main ng-if="html" class="qv-appname"></main>\n\n\t</div>\n\n\t<div class="lui-dialog__footer">\n\t\t<lui-button qv-delayed-dialog-button ng-if="!buttons.length && showDefaultButton" ng-click="closeModal( $event, true );" qva-focus="true"\n\t\t\t\t\tq-translation="Common.OK" tid="confirm"></lui-button>\n\t\t<lui-button qv-delayed-dialog-button ng-repeat="button in buttons" qva-focus="button.defaultButton" ng-click="closeModal( $event );" ng-disabled="button.expression === false"\n\t\t\t\t\tq-translation="{{button.name}}" tid="{{button.tid}}"></lui-button>\n\t</div>\n</div>'},405:function(t,e,n){var i;!(i=function(){return function(t,e){if(!t||isNaN(+e))return e;var e="-"==t.charAt(0)?-e:+e;var n=e<0?e=-e:0;var i=t.match(/[^\d\-\+#]/g);var s=i&&i[i.length-1]||".";var a=i&&i[1]&&i[0]||",";var t=t.split(s);e=e.toFixed(t[1]&&t[1].length);e=+e+"";var r=t[1]&&t[1].lastIndexOf("0");var o=e.split(".");(!o[1]||o[1]&&o[1].length<=r)&&(e=(+e).toFixed(r+1));var l=t[0].split(a);t[0]=l.join("");var c=t[0]&&t[0].indexOf("0");if(c>-1)while(o[0].length<t[0].length-c)o[0]="0"+o[0];else 0==+o[0]&&(o[0]="");e=e.split(".");e[0]=o[0];var u=l[1]&&l[l.length-1].length;if(u){var d=e[0];var p="";var h=d.length%u;for(var f=0,g=d.length;f<g;f++){p+=d.charAt(f);!((f-h+1)%u)&&f<g-u&&(p+=a)}e[0]=p}e[1]=t[1]&&e[1]?s+e[1]:"";return(n?"-":"")+e[0]+e[1]}}.call(e,n,e,t),void 0!==i&&(t.exports=i))},407:function(t,e,n){"use strict";var i,s;!(i=[n(54),n(187)],s=function(t,e){var n=a();var i={tokenize:s};return i;function s(e){if(!t.isString(e))throw new Error("Expression-tokenizer: Expression must be a string");e=e.trim();"="===e.charAt(0)&&(e=e.substr(1));var n=[],i=0,s=r(e);s.forEach(function(t){var s=e.substr(i,t.start-i).trim();s&&n.push({content:s,isOperator:false});n.push({content:t.content,isOperator:true});i=t.end});var a=e.substr(i,e.length);n.push({content:a.trim(),isOperator:false});return n}function a(){var t={};for(var n in e.SYMBOLS)if(e.SYMBOLS.hasOwnProperty(n)){var i=e.SYMBOLS[n];t[i.LEFT]=i.RIGHT}return t}function r(t){var e=[];for(var n=0;n<t.length;n++){var i=t.charAt(n);if(o(i)){n=l(t,i,n);continue}var s=[],a=false,r=c(i);s=u(i);if(s.length){var p=t.substr(n).toLowerCase();for(var h=0;h<s.length;h++){var f=s[h],g=d(p,f);if(g){e.push({content:f,start:n,end:n+f.length});a=true;n+=f.length-1;break}}}!a&&r&&e.push({content:i,start:n,end:n+1})}return e}function o(t){return n.hasOwnProperty(t)}function l(t,i,s){var a=i,r=n[a],o=t.substring(s).split(""),l=0,c=false;for(var u=0;u<o.length;u++){var d=o[u];d===e.SYMBOLS.STRING.LEFT&&(c=!c);if(c)continue;d===a&&l++;d===r&&l--;if(!l)return u+s}return s}function c(t){return e.OPERATORS.SINGLES.indexOf(t.toLowerCase())>-1}function u(t){var n=[];var i=e.OPERATORS.MULTIPLES.concat(e.OPERATORS.WORDS).filter(function(t){return t.length>1}).map(function(t){return t.toLowerCase()});i.forEach(function(e){0===e.indexOf(t.toLowerCase())&&n.push(e)});return n}function d(t,n){var i=0===t.indexOf(n+" "),s=e.OPERATORS.SINGLES.some(function(e){return 0===t.indexOf(n+e)});return i||s}}.apply(e,i),void 0!==s&&(t.exports=s))},408:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={stripComments:e};return t;function e(t){if(!t)return"";t=n(t);t=i(t);return t.trim()}function n(t){return t.replace(/\/\/(.*)$/gm,"")}function i(t){return t.replace(/\/\*[^]*?\*\//g,"")}}.apply(e,i),void 0!==s&&(t.exports=s))},409:function(t,e){t.exports='<div class="qv-state-count-bar" tid="stateCount" qva-direction x-dir-setting="{{options.direction}}">\n\t<div class="state selected" ng-style="{\'width\': percents.qSelected + \'%\'}"></div>\n\t<div class="state locked" ng-style="{\'width\': percents.qLocked + \'%\'}"></div>\n\t<div class="state optional" ng-style="{\'width\':  percents.qOption + \'%\'}"></div>\n\t<div class="state alternative" ng-style="{\'width\':  percents.qAlternative + \'%\'}"></div>\n</div>'},414:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(93),n(440)],s=function(t,e){function n(t){return e.getApp().then(function(e){return e.id+"."+t})}function i(t){this.localStorageService=t}i.prototype.get=function(t){var e=this;return n(t).then(function(t){return e.localStorageService.get(t)})};i.prototype.set=function(t,e){var i=this;return n(t).then(function(t){i.localStorageService.set(t,e)})};i.prototype.remove=function(t){var e=this;return n(t).then(function(t){e.localStorageService.remove(t)})};t.service("qvDataManagerAppStorageService",["qvDataManagerLocalStorageService",function(t){return new i(t)}])}.apply(e,i),void 0!==s&&(t.exports=s))},415:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(93),n(89),n(108),n(50)],s=function(t,e,n,i,s){t.service("qvAppDetailsService",["$q",function(t){var s;return{get:function r(){if(!s){s=t.defer();e.getApp().then(function(t){t.global.allowCreateApp().then(function(e){var r;t.getScriptEx().then(function(t){r=t.qMeta.privileges}).catch(function(t){r=false;t.isHandled=true}).then(function(){n.all([t.getLayout()]).then(function(n){var o=n[0];var l={app:{id:t.id,appTitle:o.qTitle,readOnly:o.qReadOnly,hasData:!!o.qHasData,hasScript:!!o.qHasScript,published:o.published},permissions:{createSheet:!o.qReadOnly&&o.permissions.createSheet,createApp:e,update:o.permissions.update,createBookmark:o.permissions.createBookmark,updateScript:i.isPersonalModeSync()&&!r||r&&-1!==r.indexOf("update")}};s.resolve(new a(l))})})})})}return s.promise}}}]);function a(t){this.model=t;this.events={onModelChanged:[]};var n=this;e.getApp().then(function(t){t.Invalidated.bind(function(){t.getLayout().then(function(t){n.model.app.appTitle=t.qTitle;n.model.app.readOnly=t.qReadOnly;n.model.app.hasData=t.qHasData;n.model.app.published=t.published;n.model.permissions.createSheet=!t.qReadOnly&&t.permissions.createSheet;n.model.permissions.update=t.permissions.update;n.events.onModelChanged.forEach(function(e){e&&e(n.model,t)})}).catch(function(t){var e=11e3;t.code===e&&(t.isHandled=true)})})})}a.prototype.appHasData=function(){return this.model.app.hasData};a.prototype.isDataManagerHidden=function(){return s.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update||!this.model.permissions.createApp||!this.model.permissions.updateScript};a.prototype.isScriptEditorHidden=function(){return s.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update||!this.model.permissions.updateScript};a.prototype.isDataModelViewerHidden=function(){return s.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update};a.prototype.isQDLEnabled=function(){return this.model.permissions.update&&this.model.permissions.updateScript&&!s.isSmallDevice&&this.model.permissions.createApp};a.prototype.bindOnModelChanged=function(t){this.events.onModelChanged.push(t)};a.prototype.unbindOnModelChanged=function(t){var e=this.events.onModelChanged.indexOf(t);e>=0&&this.events.onModelChanged.splice(e,1)}}.apply(e,i),void 0!==s&&(t.exports=s))},427:function(t,e,n){"use strict";var i,s;!(i=[n(462),n(464),n(467),n(472),n(475)],s=function(){}.apply(e,i),void 0!==s&&(t.exports=s))},428:function(t,e,n){"use strict";"undefined"===typeof Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{enumerable:false,get:function t(){var e=this.toString().match(/^function( (.*?))?\(/);return e&&e.length>=3?e[2]:"anonymous function"}});Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function t(){},s=function s(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};i.prototype=this.prototype;s.prototype=new i;return s});Array.prototype.contains||Object.defineProperty(Array.prototype,"contains",{enumerable:false,value:function t(e){return-1!==this.indexOf(e)}});"scrollX"in window.constructor.prototype||Object.defineProperties(window.constructor.prototype,{scrollX:{get:function t(){return this.pageXOffset}},scrollY:{get:function t(){return this.pageYOffset}}})},429:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(224)],s=function(t,e){function n(n){function i(t){n.imageCustomSize=t}function s(t){n.selectedSize=t}function a(t){if(!t||!t.orientation)return;n.selectedLayout=t;n.sizes.forEach(function(e){e.setLabel(t.orientation)})}function r(t){n.export=t;n.print.format=t.format}function o(t){var e=l();if(t.isCustom){n.print.width=Math.round(e.width);n.print.height=Math.round(e.height);return}var i=t.toPixels(e.width);n.print.width=i.w;n.print.height=i.h}function l(){return{width:t("#qv-story-play").is(":visible")?t("#qv-story-play").find(".qv-story-play-slide").first().width():n.input.currentWidth,height:t("#qv-story-play").is(":visible")?t("#qv-story-play").find(".qv-story-play-slide").first().height():n.input.currentHeight,dpi:n.input.currentDpi}}function c(t){if(n.obj&&n.input.object){var i,s,a,r,o;n.print.width<8&&(n.print.width=8);n.print.height<8&&(n.print.height=8);n.print.dpi<n.minDpi&&(n.print.dpi=n.minDpi);n.print.dpi>n.maxDpi&&(n.print.dpi=n.maxDpi);var c=Math.round(n.print.width),p=Math.round(n.print.height);var h=l();o={width:Math.round(h.width),height:Math.round(h.height),dpi:h.dpi};var f=n.imageCustomSize?{width:n.print.width,height:n.print.height,dpi:n.print.dpi}:{width:n.input.currentWidth,height:n.input.currentHeight,dpi:n.input.currentDpi};s={width:Math.round(f.width*(n.input.currentDpi/f.dpi)),height:Math.round(f.height*(n.input.currentDpi/f.dpi))};"image"===t&&(i={imageType:n.print.format,captureSize:f});if("pdf"===t){a=n.selectedSize.toMillimeters();r={right:10,left:10,top:10,bottom:10};i={width:a["portrait"===n.selectedLayout.orientation?"w":"h"],height:a["portrait"===n.selectedLayout.orientation?"h":"w"],dpi:n.print.dpi,fitCriteria:n.print.fitCriteria,margin:r,sourceSize:o}}"ppt"===t&&(i={width:c,height:p,dpi:n.print.dpi,sourceSize:o});n.state=n.states.PENDING;return e.printTree(n.input.object,o,s,i,t).then(function(e){u(e,t)},d)}n.destroyComponent()}function u(t,e){n.printUrl=t.qUrl;n.printFileName=t.fileName;var i=e.charAt(0).toUpperCase()+e.slice(1);n.printUrlTranslationKey="Print."+i+".CompletedLink";n.state=n.states.COMPLETED}function d(t){n.statusCode=t.httpStatusCode;var e=t&&t.status;switch(e){case n.states.CANCELED:case n.states.TIMEOUT:n.state=e;break;default:n.state=n.states.FAILED;break}}return{onImageCustomSize:i,onSizeChange:s,onPrintLayout:a,onFormatChange:r,confirm:c,onPptFormatChange:o}}return{create:n}}.apply(e,i),void 0!==s&&(t.exports=s))},430:function(t,e,n){"use strict";var i,s;!(i=[n(91)],s=function(t){var e="landscape";var n={w:33.1,h:46.8};var i=function t(e,n,i){this.name=e;this.unit=i||"in";this.dimensions=n};i.prototype={toPixels:function t(e){var n,i,s=0;switch(this.unit){case"in":s=e;break;case"pi":s=1;break;case"cm":s=.393701*e;break}n=this.dimensions.w*s;i=this.dimensions.h*s;return{w:Math.round(n),h:Math.round(i)}},toMillimeters:function t(){var e,n,i=0;switch(this.unit){case"in":i=1/.0393701;break;case"cm":i=10;break}e=this.dimensions.w*i;n=this.dimensions.h*i;return{w:Math.floor(e),h:Math.floor(n)}},setLabel:function e(n){var i=this;var s;var a=t.localeDetected&&"en"===t.localeDetected.substring(0,2);var r=a?i.dimensions:i.toMillimeters();var o=r["portrait"===n?"w":"h"],l=r["portrait"===n?"h":"w"];"Print.PaperSize.Letter"===i.name&&(i.name=t.get(i.name));s=a?" ("+o+'" x '+l+'")':" ("+o+" mm x "+l+" mm)";i.label=i.name+s}};function s(t,e){var n,i;if(t<e){n=t;i=e/2}else{n=t/2;i=e}return{w:n>i?i:n,h:i>n?i:n}}var a=[new i("A0",{w:n.w,h:n.h})];for(var r=1;r<8;r++)a.push(new i("A"+r,s(a[r-1].dimensions.w,a[r-1].dimensions.h)));a.push(new i("Print.PaperSize.Letter",{w:8.5,h:11}));for(var o=0;o<3;o++)a.shift();a.forEach(function(t){t.setLabel(e)});var l=[{orientation:"portrait",translationKey:"Print.Portrait"},{orientation:"landscape",translationKey:"Print.Landscape"}];l.forEach(function(e){t.ready.then(function(){e.label=t.get(e.translationKey)})});var c=[{type:"pdf",format:"pdf",label:"PDF"},{type:"image",format:"png",label:"PNG"},{type:"image",format:"jpeg",label:"JPEG"}];return{sizes:a,layouts:l,outputs:c}}.apply(e,i),void 0!==s&&(t.exports=s))},440:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(54),n(113)],s=function(t,e,n){var i="DataManager";var s=1;var a=2592e6;function r(t){if(!n["DISABLE_DM_LOCAL_STORAGE"]&&c()){var e=new o(localStorage,true);this.storage=e;t(function(){u(e)})}else this.storage=new o({},false)}r.prototype.get=function(t){var e=this.storage.get(l(t));var n=p(e);return n?n.value:void 0};r.prototype.set=function(t,e){var n=(new Date).getTime();var i={created:n,version:s,value:e};var a=d(i);this.storage.set(l(t),a)};r.prototype.remove=function(t){this.storage.remove(l(t))};function o(t,e){this.storage=t;this.supportsLocalStorage=e}o.prototype.get=function(t){var e=this.supportsLocalStorage?this.storage.getItem(t):this.storage[t];return e};o.prototype.set=function(t,e){this.supportsLocalStorage?this.storage.setItem(t,e):this.storage[t]=e};o.prototype.remove=function(t){this.supportsLocalStorage?this.storage.removeItem(t):delete this.storage[t]};o.prototype.keys=function(){var t=[];var e;if(this.supportsLocalStorage)for(var n=0;n<this.storage.length;n++){e=this.storage.key(n);t.push(e)}else for(e in this.storage)t.push(e);return t};function l(t){return i+"."+t}function c(){try{localStorage.setItem(i,i);localStorage.removeItem(i);return true}catch(t){return false}}function u(t){var n=i+".";var s=(new Date).getTime();t.keys().forEach(function(i){if(0===i.lastIndexOf(n,0)){var r=t.get(i);var o=p(r);o&&o.created&&e.isNumber(o.created)&&s-o.created>a&&t.remove(i)}})}function d(t){return JSON.stringify(t)}function p(t){if(!t)return;try{return JSON.parse(t)}catch(t){return}}t.service("qvDataManagerLocalStorageService",["$timeout",function(t){return new r(t)}])}.apply(e,i),void 0!==s&&(t.exports=s))},460:function(t,e,n){"use strict";var i,s;!(i=[n(115),n(89)],s=function(t,e){var i={width:144,height:96},s=2;function a(t){var e={};e.width=t.width-t.numCols*t.spacing;e.height=t.height-t.numRows*t.spacing;e.columnWidth=e.width/t.numCols;e.rowHeight=e.height/t.numRows;e.cols=t.numCols;e.rows=t.numRows;e.spacing=t.spacing;return e}function r(e,n,i,s){var a=i.colspan/n.cols*n.width+(i.colspan-2)*n.spacing,r=i.rowspan/n.rows*n.height+(i.rowspan-2)*n.spacing,o=n.spacing+n.columnWidth*i.col+n.spacing*i.col,l=n.spacing+n.rowHeight*i.row+n.spacing*i.row,c=t.getIconPath(i.type),u=a>=r?r:a;e.fillStyle="rgb(242, 242, 242)";e.fillRect(o,l,a,r);u=Math.max(8,Math.min(u,24))/16;e.fillStyle=s?"rgba(0, 152, 69,.6)":"rgba(89, 89, 89,0.6)";e.text="center";e.textAlign="center";e.textBaseline="middle";e.save();e.translate(Math.round(o+a/2-8*u),Math.round(l+r/2-8*u));e.scale(u,u);e.fill(new Path2D(c));e.restore()}var o={staticSrc:function t(){return{staticPublishedSheet:function t(){return n.p+"img/core/static/Default-sheet-published.png"},staticUnPublishedSheet:function t(){return n.p+"img/core/static/Default-sheet-unpublished.png"},staticPublishedStory:function t(){return n.p+"img/core/static/Default-story-published.png"},staticUnPublishedStory:function t(){return n.p+"img/core/static/Default-story-unpublished.png"},staticApp:function t(){return n.p+"img/core/static/Default_thumbnail_app.png"},brokenImage:function t(){return n.p+"img/core/static/Ic_BrokenBig@2x.png"}}},dimensions:{original:i,width:i.width-2,height:i.height-2,spacing:2},getSrc:function t(e,n){var i=n?"Sheet":"Story",s=e?"staticPublished":"staticUnPublished";return o.staticSrc()[s+i]()},generateImageForStory:function t(n,i){var s=new e;i.get(n.item.qInfo.qId).then(function(t){t.getLayout().then(function(e){if(e.qChildList&&e.qChildList.qItems.length){n.slide=e.qChildList.qItems.slice().sort(function(t,e){if(t.qData.rank===e.qData.rank)return 0;return t.qData.rank<e.qData.rank?-1:1})[0];n.slide?t.app.getObject(n.slide.qInfo.qId).then(function(t){t.getLayout().then(function(t){t.qChildList.qItems.length>0?s.resolve():s.reject()},s.reject)}):s.reject()}else s.reject()})});return s.promise},paintCanvas:function t(e){var n=document.createElement("canvas"),i,l,c;i=a({width:o.dimensions.width*s,height:o.dimensions.height*s,spacing:o.dimensions.spacing,numRows:e.qData.rows,numCols:e.qData.columns});n.width=o.dimensions.width*s;n.height=o.dimensions.height*s;l=n.getContext("2d");function u(t){t.forEach(function(t){var n=e.qMeta.published;r(l,i,t,n)})}l.clearRect(0,0,n.width,n.height);u(e.qData.cells);c=n.toDataURL();l=null;i=null;n.remove&&n.remove();n=null;return c}};return o}.apply(e,i),void 0!==s&&(t.exports=s))},462:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(463)],s=function(t,e){t.component("quiFloat",{transclude:true,template:e,scope:{quiOffset:"=",quiResizeOnChange:"="},controller:["$scope","$element","$timeout",function(t,e,n){function i(){if(!t.quiOffset||!t.reportedSize||!t.reportedWindowSize)t.visible=false;else{t.quiOffset.left+t.reportedSize.width<t.reportedWindowSize.width?t.left=t.quiOffset.left:t.left=t.reportedWindowSize.width-t.reportedSize.width;t.quiOffset.top+t.reportedSize.height<t.reportedWindowSize.height?t.top=t.quiOffset.top:t.top=t.reportedWindowSize.height-t.reportedSize.height;t.visible=true}}function s(){n(function(){t.reportedSize={width:e.outerWidth(),height:e.outerHeight()}})}t.$watch("quiResizeOnChange",s,true);t.$watch("[quiOffset, reportedSize, reportedWindowSize]",i,true)}]})}.apply(e,i),void 0!==s&&(t.exports=s))},463:function(t,e){t.exports='<div class="qui-float" ng-style="{top:top, left:left}" ng-show="visible" qva-reported-window-size="reportedWindowSize">\n\t<div ng-transclude></div>\n</div>\n'},464:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(465),n(466)],s=function(t,e,n){t.component("quiInputNumber",{template:n,scope:{quiModel:"=",quiDisabled:"=",quiTitle:"@",quiMin:"@",quiMax:"@",quiClass:"@",quiSelectTextOnFocus:"@",quiWithButtons:"@",quiTid:"@"},controller:["$scope","$element",function(t,n){if(t.quiSelectTextOnFocus){t.selected=false;n.click(function(){if(false===t.selected){n.select();t.selected=true}});n.blur(function(){t.selected=false})}t.onChange=function(i){var s=parseInt(i)||0;t.quiModel=e.getNumerical(parseInt(n.find(".lui-input").val())+s,t.quiMin,t.quiMax)}}]})}.apply(e,i),void 0!==s&&(t.exports=s))},465:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t){return Number(String(t).replace(/[^-\d]/g,""))}return{getNumerical:function e(n,i,s){n=t(n);i=Number(i);s=Number(s);if(n<i)return i;if(0!==s&&n>s)return s;return n}}}.apply(e,i),void 0!==s&&(t.exports=s))},466:function(t,e){t.exports='<span class="qui-input-number lui-input-group">\n\t<button class="lui-input-group__item  lui-input-group__button  lui-button" qva-activate="onChange(-1)" ng-disabled="quiDisabled" ng-if="quiWithButtons">\n\t\t<span class="lui-button__icon">-</span>\n\t</button>\n\t<input type="tel" class="lui-input-group__item  lui-input-group__input  lui-input {{quiClass}}" tid="{{quiTid}}" title="{{quiTitle}}" ng-model="quiModel" ng-model-options="{ updateOn: \'blur\' }" ng-change="onChange()" ng-disabled="quiDisabled"/>\n\t<button class="lui-input-group__item  lui-input-group__button  lui-button" qva-activate="onChange(1)" ng-disabled="quiDisabled" ng-if="quiWithButtons">\n\t\t<span class="lui-button__icon">+</span>\n\t</button>\n</span>\n'},467:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(119),n(468),n(469),n(470)],s=function(t,e,n,i){var s={TAB:9};function a(t){return t.parents(".popover-container").length?t.parents(".popover-container")[0]:null}function r(e,n,i){return e.which===s.TAB&&e.target!==n.alignTo&&t(e.target).closest(".lui-popover-container")[0]!==i[0]}var o={template:i,scope:{quiModel:"=",shared:"=",close:"="},controller:["$scope","$element","$document",function(t,e,n){t.menuClasses=t.quiModel.menuOptions.content.menuClasses?t.quiModel.menuOptions.content.menuClasses:"qui-textlist";t.quiModel.menuOptions.content.createMenuItems().then(function(e){t.menuItems=e});t.selectMenuItem=function(e,n,i){n&&n.preventDefault&&n.preventDefault();if(!e.disable){t.close&&t.close();e.selected(n,i)}};n.on("keyup.qv-popover",function(n){a(e)&&r(n,t,e)&&t.close&&t.close()});t.$on("$destroy",function(){n.off("keyup.qv-popover")})}]};e.directive("qvPopoverButton",function(){return{template:n,transclude:true,replace:true,restrict:"E",scope:{quiModel:"=",quiPopoverContainer:"=?"},controller:["$scope","$element","luiPopover","qvMobileMenu",function(t,e,n,i){var s;t.shared={pressed:false};t.onClick=function(){if(t.shared.pressed&&s){s.close();return}t.shared.pressed=!t.shared.pressed;var r=t.quiModel.menuOptions||{};s=r.smallview?i.show({controller:o.controller,template:o.template,autoFocus:false,closeOnResize:true,outsideIgnore:t.quiModel.tid,input:{quiModel:t.quiModel,shared:t.shared,close:function t(){s.close()}}}):n.show({controller:o.controller,template:o.template,dock:"bottom",alignTo:e[0],autoFocus:false,closeOnResize:true,outsideIgnore:t.quiModel.tid,container:a(e),input:{quiModel:t.quiModel,shared:t.shared,close:function t(){s.close()}}});s.closed.then(function(){t.shared.pressed=false})};t.$watch("shared.pressed",function(e){t.currentTitle=e&&t.quiModel.tooltipActive?t.quiModel.tooltipActive:t.quiModel.tooltipInactive})}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},468:function(t,e){t.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant, {\'lui-active\': shared.pressed }]"\n\t\tq-title-translation="{{currentTitle}}"\n\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\tng-click="onClick()">\n\t<span class="{{quiModel.buttonClass}}__icon lui-icon  lui-icon--{{quiModel.icon}}  {{quiModel.menuOptions.smallview ? \'lui-icon--large\' : \'\'}}"></span>\n\t<span class="{{quiModel.buttonClass}}__text" ng-if="quiModel.buttonText">\n\t\t{{quiModel.buttonText}}\n\t</span>\n\t<span ng-if="!quiModel.hideCaret" class="{{quiModel.buttonClass}}__caret  lui-caret"></span>\n</button>\n'},469:function(t,e){t.exports='<lui-popover ng-style="{ width: quiModel.menuOptions.width }">\n\t<ul ng-class="menuClasses" tid="{{quiModel.menuOptions.content.tid}}">\n\t\t<li class="lui-list__item"\n\t\t\tng-repeat="menuItem in menuItems"\n\t\t\tng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\', \'lui-disabled\': menuItem.disable, \'header-item\': menuItem.headerItem, \'last-menu-item\' : menuItem.last}"\n\t\t\tng-hide="menuItem.hide">\n\n\t\t\t<qv-menu-switch tid="{{menuItem.tid}}" x-model="menuItem" callback="selectMenuItem(menuItem, $event)" ng-if="menuItem.showSwitch"/>\n\n\t\t\t<button tid="{{menuItem.tid}}"\n\t\t\t\t class="action-item"\n\t\t\t\t ng-class="[quiModel.buttonClass, quiModel.buttonVariant]"\n\t\t\t\t ng-click="selectMenuItem(menuItem, $event)"\n\t\t\t\t q-title-translation="{{ menuItem.title || menuItem.text}}"\n\t\t\t\t ng-disabled="menuItem.disable"\n\t\t\t\t ng-if="!menuItem.showSwitch">\n\t\t\t\t<span ng-if="menuItem.icon"\tclass="lui-list__aside">\n\t\t\t\t\t<span class="lui-icon  lui-icon--{{menuItem.icon}}" ng-disabled="menuItem.disable"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="lui-list__text menu-item-text"\n\t\t\t\t\t  q-translation="{{menuItem.text}}"\n\t\t\t\t\t  ng-class="{\'open-in-new-tab-text-optional\': menuItem.openInNewTab == \'optional\', \'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" aria-hidden="true">\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t\t<div class="list-divider" ng-if="menuItem.openInNewTab === \'optional\'"></div>\n\t\t\t<button ng-if="menuItem.openInNewTab" class="lui-fade-button"\n\t\t\t\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant]"\n\t\t\t\t\tq-title-translation="{{ menuItem.title || \'Tooltip.OpenInNewTab\'}}"\n\t\t\t\t\tng-click="selectMenuItem(menuItem, $event, \'true\')"\n\t\t\t\t\tng-disabled="menuItem.disable" tabindex="-1">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--new-tab"></span>\n\t\t\t</button>\n\t\t</li>\n\t</ul>\n</lui-popover>\n'},470:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(471)],s=function(t,e){t.directive("qvMenuSwitch",function(){return{template:e,scope:{model:"=",callback:"&"},link:function t(e){e.switchValue=e.model.value;e.$watch("switchValue",function(t,n){void 0!==t&&t!==n&&e.callback()})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},471:function(t,e){t.exports='<div class="menu-switch-component" tcl="switch" q-title-translation="{{ model.text }}">\n    <span ng-if="model.icon" class="lui-list__aside switch_icon">\n        <span class="lui-icon  lui-icon--{{model.icon}}" ng-disabled="model.disable"></span>\n    </span>\n    <span class="label" ng-disabled="readOnly">\n        <div class="title" q-translation="{{ model.text }}"></div>\n        <div class="value" q-translation="{{ model.label() }}"></div>\n    </span>\n    <lui-switch x-model="switchValue"/>\n</div>'},472:function(t,e,n){"use strict";var i,s;!(i=[n(119),n(11),n(473),n(474),n(51),n(97)],s=function(t,e,n,i,s,a){var r={template:i,scope:{quiModel:"=",alignTo:"=",shared:"="},controller:["$scope",function(t){t.shared.destroyComponent=t.destroyComponent;t.menuClasses=t.quiModel.menuOptions.content.menuClasses?t.quiModel.menuOptions.content.menuClasses:"qui-textlist";t.quiModel.menuOptions.content.createMenuItems().then(function(e){t.menuItems=e});t.selectMenuItem=function(e,n,i){n&&n.preventDefault&&n.preventDefault();if(!e.disable){t.onClose&&t.onClose(n);e.selected(n,i)}};t.onClose=function(n){if(!e(n.target).hasClass("qui-popover-button")||t.quiModel.tid!==e(n.target).attr("tid")){t.destroyComponent();t.shared.pressed=false}};t.closeFromContent=function(){t.destroyComponent();t.shared.pressed=false};t.$on("$destroy",function(){a.off("start",t.onClose)});a.on("start",t.onClose)}]};t.directive("quiPopoverButton",function(){return{template:n,transclude:true,replace:true,restrict:"E",scope:{quiModel:"=",quiPopoverContainer:"=?"},controller:["$scope","$element",function(t,e){var n={ENTER:13,SPACE:32};t.shared={};t.shared.pressed=false;t.$watch("shared.pressed",function(e){t.currentTitle=e&&t.quiModel.tooltipActive?t.quiModel.tooltipActive:t.quiModel.tooltipInactive});e.on("keypress",function(e){e.keyCode!==n.ENTER&&e.keyCode!==n.SPACE||t.onClick()});t.onClick=function(){if(t.shared.pressed){if(t.shared.destroyComponent){t.shared.destroyComponent();t.shared.pressed=false}}else{t.shared.pressed=true;s.show(t.quiPopoverContainer||r,{quiModel:t.quiModel,alignTo:e,shared:t.shared})}};t.quiModel&&(t.quiModel.forceClick=t.onClick)}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},473:function(t,e){t.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant, {\'lui-active\': shared.pressed }]"\n\t\tq-title-translation="{{currentTitle}}"\n\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\tng-click="onClick()">\n\t<span ng-if="!quiModel.hideIcon" class="{{quiModel.buttonClass}}__icon lui-icon  lui-icon--{{quiModel.icon}}  {{quiModel.menuOptions.smallview ? \'lui-icon--large\' : \'\'}}"></span>\n\t<span class="{{quiModel.buttonClass}}__text" ng-if="quiModel.buttonText">\n\t\t{{quiModel.buttonText}}\n\t</span>\n\t<span ng-if="!quiModel.hideCaret" class="{{quiModel.buttonClass}}__caret  lui-caret"></span>\n</button>\n'},474:function(t,e){t.exports='<immidiate-contextual align-to="alignTo"\n\t\t\t\t\t  smallview="quiModel.menuOptions.smallview"\n\t\t\t\t\t  position="quiModel.menuOptions.position"\n\t\t\t\t\t  width="quiModel.menuOptions.width"\n\t\t\t\t\t  top="quiModel.menuOptions.top"\n\t\t\t\t\t  lui-style="true"\n\t\t\t\t\t  no-padding="true"\n\t\t\t\t\t  hidepointer="quiModel.menuOptions.hidepointer"\n\t\t\t\t\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\t\t\t\t  on-close-view="onClose(event)">\n\t<ul ng-class="menuClasses" tid="{{quiModel.menuOptions.content.tid}}">\n\t\t<li class="lui-list__item" ng-repeat="menuItem in menuItems" ng-disabled="menuItem.disable" qui-click=\'menuItem.fn()\'\n\t\t\tng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" ng-hide="menuItem.hide">\n\t\t\t<span ng-if="menuItem.icon" class="lui-list__aside">\n\t\t\t\t<span class="lui-icon  lui-icon--{{menuItem.icon}}"></span>\n\t\t\t</span>\n\t\t\t<span class="lui-list__text menu-item-text"\n\t\t\t\t  tid="{{menuItem.tid}}"\n\t\t\t\t  q-title-translation="{{ menuItem.title || menuItem.text}}"\n\t\t\t\t  ng-class="{\'open-in-new-tab-text-optional\': menuItem.openInNewTab == \'optional\', \'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}"\n\t\t\t\t  qva-activate="selectMenuItem(menuItem, $event)" q-translation="{{menuItem.text}}" ng-disabled="menuItem.disable">\n\t\t\t</span>\n\t\t\t<div class="list-divider" ng-if="menuItem.openInNewTab === \'optional\'"></div>\n\t\t\t<button ng-if="menuItem.openInNewTab" class="lui-fade-button  open-in-new-tab" ng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" q-title-translation="{{ menuItem.title || \'Tooltip.OpenInNewTab\'}}" qva-activate="selectMenuItem(menuItem, $event, \'true\')" ng-disabled="menuItem.disable">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--new-tab"></span>\n\t\t\t</button>\n\t\t</li>\n\t</ul>\n</immidiate-contextual>\n'},475:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(49),n(476),n(477)],s=function(t,e,n,i,s){e.component("quiToolbar",{template:"<div class='qui-toolbar' ng-transclude />"});e.component("quiToolbarLeft",{template:"<div class='qui-buttonset-left' ng-transclude />"});e.component("quiToolbarRight",{template:"<div class='qui-buttonset-right' ng-transclude />"});e.component("quiToolbarButtonGroup",{template:"<div class='lui-buttongroup' ng-transclude />"});e.component("quiToolbarButton",{template:i,scope:{quiModel:"="},controller:["$scope",function(e){e.isMouseDown=false;e.onMouseDown=function(){e.isMouseDown=true};e.clientTabNavigation=n.getFlag("CLIENT_TAB_NAVIGATION");e.onButton=function(n){t.support.touch&&n.target.focus();e.quiModel.isToggleButton&&(e.quiModel.pressed=!e.quiModel.pressed);e.quiModel.isOpenedByClick=e.isMouseDown;e.isMouseDown=false;e.quiModel.onButtonClicked(e.quiModel,n)};function i(){var t=[];var n=e.quiModel;n.pressed?n.activeVariant?t.push(n.activeVariant):t.push("lui-active"):n.variant?t.push(n.variant):e.clientTabNavigation||t.push("lui-button--toolbar");e.classList=t}e.$watch("quiModel.pressed",i);e.$watch("quiModel.variant",i);e.$watch("quiModel.activeVariant",i);i()}]});e.component("quiToolbarMobileButton",{template:s,scope:{quiModel:"="},controller:["$scope",function(e){e.onButton=function(n){t.support.touch&&n.target.focus();e.quiModel.isToggleButton&&(e.quiModel.pressed=!e.quiModel.pressed);e.quiModel.onButtonClicked(e.quiModel,n)}}]})}.apply(e,i),void 0!==s&&(t.exports=s))},476:function(t,e){t.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-click="onButton($event)"\n\t\tng-mousedown="onMouseDown()"\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tq-title-translation="{{(quiModel.pressed && quiModel.tooltipActive ? quiModel.tooltipActive : quiModel.tooltipInactive)}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-hide="quiModel.isHidden()"\n\t\tclass="lui-button"\n\t\ttext-inactive="{{quiModel.textInactive ? quiModel.textInactive : \'\'}}"\n\t\tng-class="classList">\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="quiModel.icon && quiModel.iconToTheLeft"\n\t\tclass="lui-button__icon  lui-icon  lui-icon--{{quiModel.icon}} center"\n\t></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && quiModel.showText()"\n\t\tclass="lui-button__text  item-title"\n\t\tqva-direction\n\t\tx-dir-text="{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}"\n\t>\n\t\t{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}\n\t</span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="quiModel.icon && !quiModel.iconToTheLeft"\n\t\tclass="lui-button__icon  lui-icon  lui-icon--{{quiModel.icon}} center"\n\t></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && !quiModel.textOnly && quiModel.isDropdownButton"\n\t\tclass="lui-button__caret  lui-caret"\n\t></span>\n\t<span class="lui-button__text" qva-outside-ignore-for="{{quiModel.name}}" ng-if="quiModel.dynamicText">\n\t\t{{ quiModel.dynamicText() }}\n\t</span>\n</button>\n'},477:function(t,e){t.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-click="onButton($event)"\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tq-title-translation="{{(quiModel.pressed && quiModel.tooltipActive ? quiModel.tooltipActive : quiModel.tooltipInactive)}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-hide="quiModel.isHidden()"\n\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse"\n\t\tng-class="{ \'lui-active\': quiModel.pressed }">\n\t<span qva-outside-ignore-for="{{quiModel.name}}" ng-if="!quiModel.dynamicText && quiModel.showText()"\n\t\tclass="lui-fade-button__text  item-title"\n\t\tqva-direction\n\t\tx-dir-text="{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}">\n\t\t{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}\n\t</span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && !quiModel.textOnly"\n\t\tclass="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--{{quiModel.icon}}"></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tclass="lui-fade-button__text"\n\t\tng-if="quiModel.dynamicText">{{ quiModel.dynamicText() }}</span>\n</button>\n'},478:function(t,e,n){"use strict";var i,s;!(i=[n(91)],s=function(t){var e=[],n=[{tid:"Print.Ppt.Format.Standard",w:4,h:3},{tid:"Print.Ppt.Format.Widescreen",w:16,h:9},{tid:"Print.Ppt.Format.Widescreen",w:16,h:10},{tid:"Print.Ppt.Format.Custom"}];var i=function t(e,n){this.ratio=e||{};this.isCustom=n||false};i.prototype={toPixels:function t(e){var n=parseInt(e)||960;var i=n/this.ratio.w*this.ratio.h;return{w:Math.round(n),h:Math.round(i)}},setLabel:function e(){var n=this;t.ready.then(function(){var e=t.get(n.ratio.tid);n.label=e;n.ratio.w&&n.ratio.h&&(n.label+=" "+n.ratio.w+":"+n.ratio.h)})}};var s=n.length;for(var a=0;a<s;a++){var r=new i(n[a]);3===a&&(r.isCustom=true);e.push(r)}e.forEach(function(t){t.setLabel("portrait")});return{formats:e}}.apply(e,i),void 0!==s&&(t.exports=s))},479:function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-image-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button" tid="print-current-size" ng-class="{ \'lui-active\': ! imageCustomSize }" q-translation="Print.Image.CurrentSize" ng-click="onImageCustomSize(false)" ng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button" tid="print-custom-size"  ng-class="{ \'lui-active\': imageCustomSize }" q-translation="Common.Custom" ng-click="onImageCustomSize(true)" ng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="! imageCustomSize">\n\t\t\t{{input.currentWidth}} x {{input.currentHeight}} px @ 96 dpi</span>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-width"\n\t\t\t\t\t\tqui-model="print.width" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-height"\n\t\t\t\t\t\tqui-model="print.height" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-dpi"\n\t\t\t\t\t\tqui-model="print.dpi" qui-disabled="state === states.PENDING" qui-min="0" qui-max="300" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Format"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\t\tx-model="print.format"\n\t\t\t\t\t\t\tx-options="f as f for f in availableFormats"\n\t\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\t\ttid="print-image-selected-format"></lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-if="!usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink"></a>\n\t\t\t\t<a ng-if="usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink" download="{{printFileName}}"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},480:function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="{{minDpi}}"\n\t\t\t\t\t\tqui-max="{{maxDpi}}"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},481:function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-ppt-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.Format"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\ttid="print-ppt-selected-size"\n\t\t\t\t\tx-model="selectedFormat"\n\t\t\t\t\tx-options="f.label for f in formats"\n\t\t\t\t\tx-change="onPptFormatChange(selectedFormat)">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-width"\n\t\t\t\tqui-model="print.width" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-height"\n\t\t\t\tqui-model="print.height" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-ppt-dpi">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-ppt-dpi"\n\t\t\t\t\t\tx-model="print.dpi"\n\t\t\t\t\t\tx-options="d as d for d in availablePptDpi">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t{{print.width}} x {{print.height}} px @ {{print.dpi}} dpi\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.CurrentSlideSize"></div>\n\t\t\t<p>\n\t\t\t{{print.currentWidth}} x {{print.currentHeight}} px @ {{print.currentDpi}} dpi\n\t\t\t</p>\n\t\t</div>\n\t\t--\x3e\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Ppt.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},482:function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="0"\n\t\t\t\t\t\tqui-max="300"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},484:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(138),n(485),n(105),n(91)],s=function(t,e,n,i,s){t.directive("circleChart",function(){return{scope:{model:"="},restrict:"E",replace:true,template:n,controller:["$scope","$element","$timeout",function(t,n,a){var r=n.find(".circular-bar");t.radius=50;t.arcValue="M50 0 A 50 50, 0, 0, 1, 0 0, L 50 50 z";function o(){if(p()){var e=r.height();var n=r.width();if(e<n){t.radius=e/2;t.svgPos={height:e,width:e,top:0,left:n/2-e/2}}else{t.radius=n/2;t.svgPos={height:n,width:n,top:e/2-n/2,left:0}}}d()}function l(t,e,n,i){var s=(i-90)*Math.PI/180;return{x:t+n*Math.cos(s),y:e+n*Math.sin(s)}}function c(t,e,n,i,s){var a=l(t,e,n,s);var r=l(t,e,n,i);var o=s-i<=180?"0":"1";var c=["M",a.x,a.y,"A",n,n,0,o,0,r.x,r.y].join(" ");return c}function u(t){return 3.6*t}function d(){var n=0;if(t.model.chartValue)n=t.model.chartValue;else if(t.model.numerator&&t.model.denominator){n=0===t.model.denominator?0:t.model.numerator/t.model.denominator;n*=100}if(n>0&&n<1){var i=e.format.number(0,{style:"percent"});t.chartPercentageValue=s.get("CircleChart.ChartPercentageValue.LessThanOne",i)}else t.chartPercentageValue=e.format.number(Math.round(n)/100,{style:"percent"});var a=t.radius;var r=8;var o=0;if(t.model.chartValueSubText){r=-3;o=17}t.percentagePos={x:a,y:a+r};t.subtextPos={x:a,y:a+o};var l=100===n?99.99:n,d=l;d||(d=0);t.arcValue=c(a,a,a-5,0,u(d))}function p(){return r.height()>0||r.width()>0}t.$on(i.Events.EditorDetailsPane.ResizeChart,function(){o()});t.$watch("model",function(){d()});p()?o():a(function(){o()})}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},485:function(t,e){t.exports='<div class="ds-visualization-circle-chart">\n\t<div class="chart-heading">{{ model.header }}</div>\n\n\t<div class="circular-bar">\n\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" ng-style="svgPos">\n\t\t\t<g class="arcs">\n\t\t\t\t<circle ng-attr-cx="{{radius}}" ng-attr-cy="{{radius}}" ng-attr-r="{{radius}}" class="outer-circle" />\n\t\t\t\t <path ng-attr-d="{{arcValue}}" class="outer-arc" tid="circle-chart-arc1" /> \n\t\t\t\t<circle ng-attr-cx="{{radius}}" ng-attr-cy="{{radius}}" ng-attr-r="{{radius - 10}}" class="inner-circle"  />\n\t\t\t</g>\n\t\t\t<text ng-attr-x="{{percentagePos.x}}" ng-attr-y="{{percentagePos.y}}" class="percentage-label">{{ chartPercentageValue }}</text>\n\t\t\t<text ng-attr-x="{{subtextPos.x}}" ng-attr-y="{{subtextPos.y}}" class="percentage-subtext-label">{{ model.chartValueSubText }}</text>\n\t\t</svg>\n\t</div>\n\n\t<div class="chart-footer">{{ model.footer }}</div>\n</div>\n\n'},508:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(91),n(94),n(969),n(207),n(99),n(97),n(133),n(236),n(509),n(192),n(287),n(510),n(274)],s=function(t,e,n,i,s,a,r,o,l,c,u,d){function p(t){return{odagLinkItem:function e(n){var s=n.item.getDropOption();var a={insertBeforeItem:t,title:s.args.init.linkRef.name,odagLinkRefID:s.args.init.linkRef.id};var r=i.model;l.addODAGNavPoint(r,a)}}}function h(e,n){function i(t,e,n){var i=p(e);var s={targetRect:n,drawRect:n,drop:i,dropShadePercentage:10};t.registerDropRect(s)}var s;var a={accept:{odagLinkItem:function t(){return true}},end:function t(){n.removeClass(s);e.dragging=false},start:function a(r){e.dragging=true;var o;try{o=n[0].getBoundingClientRect()}catch(t){return}var l={left:o.left+2,right:o.right-2,top:o.top+2,bottom:o.bottom-2};s="odagLinkItem"===r.info.type?"dragging library-dragging":"dragging";n.addClass(s);var c=n.find(".dropArea");for(var u=0;u<c.length;u++){var d=t(c[u]);var p=d[0].getBoundingClientRect();var h={left:p.left+2,right:p.right-2,top:p.top+2,bottom:p.bottom-2};var f=null;var g=e.odagNavPoints;u<g.items.length&&(f=g.items[u]);i(r,f,h)}var v=n.find(".odag-nav-point-cell:last");var m={left:0,right:0,top:0,bottom:0};var b=l.left;if(v.length){m=v[0].getBoundingClientRect();b=m.right}var y={left:b,top:l.top,right:l.right,bottom:l.bottom};i(r,null,y)}};c.registerDropTarget(a);e.$on("$destroy",function(){c.unregisterDropTarget(a)})}var f={template:s,restrict:"E",scope:{model:"=",inEditMode:"=",standAlone:"="},link:function t(e,n){h(e,n)},controller:["$scope","$timeout","$element","qvSheetService",function(t,e,s,c){t.sortableNavPoints=null;var p=t.standAlone?null:c;t.odagToolbarService=new u(p);t.dragging=false;t.waterMarkText="";var h=null;l.isODAGAvailable(t.model.app).then(function(e){e&&d.getList().then(function(e){e.layout&&e.layout.qAppObjectList&&e.layout.qAppObjectList.qItems.length>0&&l.getODAGLinks(t.model.app)})});t.sortableNavPoints=a.create({options:{direction:"horizontal",listKey:"list",listSelector:".list",itemKey:"item",itemSelector:".drag-odag-navpoint",itemDragSelector:".drag-odag-navpoint",gesture:{name:"swipe",options:{radiusThreshold:r.treatAsDesktop()?4:0,preventDefault:false}}},allowDrag:function e(){var e=this._super.apply(this,arguments);return e&&t.inEditMode},addPlaceholder:function t(){this._super.apply(this,arguments)},onBegin:function t(e){this._super.apply(this,arguments);h=e;h.classList=["reordering"];var n=s.find(".list");n.css("height",n.innerHeight())},removePlaceholder:function t(){this._super.apply(this,arguments);var e=s.find(".list");e.css("height","");h.classList=""},onMove:function e(){this._super.apply(this,arguments);var n=t.odagNavPoints.get().map(function(t){return t.data});var s=i.model;l.reorderNavPoints(s,n)}});t.odagNavPoints=t.sortableNavPoints.createList(1,{tid:"odagNavPoints"});t.$watchCollection("odagToolbarService.getOdagNavPoints()",function(n){t.odagNavPoints.reset();for(var i=0;i<n.length;i++)t.odagNavPoints.addSortableItem(n[i]);e(function(){t.$broadcast("refreshPager")})});t.$watch("model.sheetId",function(e){t.odagToolbarService.sheetChanged(e)});t.$watch("dragging",function(e){t.waterMarkText=e?n.get("odag.toolbar.help.dragging"):n.get("odag.toolbar.help.watermark")});t.odagToolbarService.init(t.model.app,t.model.openAppCallback).then(function(){t.waterMarkText=n.get("odag.toolbar.help.watermark")});o.on("end",function(){t.refreshPager(false)});t.$on("$destroy",function(){t.odagToolbarService.destroy()})}]};e.directive("qvOdagToolbar",function(){return f});return f}.apply(e,i),void 0!==s&&(t.exports=s))},509:function(t,e,n){"use strict";var i,s;!(i=[n(89),n(49),n(970),n(131),n(120),n(375),n(133),n(192),n(219)],s=function(t,e,n,i,s,a,r,o,l){function c(t){this.qvSheetService=t;this.currentApp=null;this.currentSheet=null;this.odagNavPoints=null;this.appLinkModelList=null;this.openAppCallback=null}c.prototype.init=function(t,e){var n=this;this.odagNavPoints=[];this.currentApp=t;this.openAppCallback=e;return o.getList(t).then(function(t){n.appLinkModelList=t;return t.getLayout().then(function(){n.updateNavPoints();t.Invalidated.bind(n.updateNavPoints.bind(n))})})};c.prototype.sheetChanged=function(t){var e=this;this.currentSheet&&this.currentSheet.Invalidated.unbind(this.updateNavPoints);t&&s.get(t,this.currentApp).then(function(t){e.currentSheet=t;if(e.currentSheet){e.updateNavPoints();e.currentSheet.Invalidated.bind(e.updateNavPoints.bind(e))}})};c.prototype.getODAGLinkInfo=function(n){var i=new t;if(n._cachedLinkProps)i.resolve(n._cachedLinkProps);else if(n.data.odagLinkRefID)l.getList(n.model.parent.app).then(function(t){if(t.filter(function(t){return t.properties.data.id===n.data.odagLinkRefID}).length>0)r.loadODAGLink(n.model.parent.app,n.data.odagLinkRefID).then(function(t){var s=e.getFlag("ODAG_SAAS_ENABLED")?t:t.objectDef;if(!t||"decommissioned"!==s){n.invalid=false;n.maxNumberOfApps=s.properties.genAppLimit[0].limit;n.maxRowExpressionCount=s.properties.rowEstRange[0].highBound;n._cachedLinkProps=s;return i.resolve(s)}n.invalid=true;i.resolve(null)},function t(){n.invalid=true;i.resolve(null)});else{n.invalid=true;i.resolve(null)}});else{n.invalid=true;i.resolve(null)}return i.promise};c.prototype.createODAGNavPointsList=function(e){var s=i.selectedObject?i.selectedObject:null;var o=null;var l=this;if(void 0!==e){this.odagNavPoints.splice(0,this.odagNavPoints.length);e.forEach(function(e){var c={id:e.info.id,type:"ODAGNavPoint",object:{isInvalid:true},data:e,openAppCallback:l.openAppCallback,model:null,maxRowExpressionCount:null,maxNumberOfApps:null,_cachedLinkProps:null,invalid:false,initialized:null};var u={parent:l.currentSheet,properties:e};c.model=new n(u);c.getLoadedLinkInfo=l.getODAGLinkInfo;c.getCurrentCountSessionObjectForLink=function(){return this.getLoadedLinkInfo(c).then(function(e){return e?r.getOrCreateSessionObjectsForLink(l.currentApp,e).then(function(t){return t}):t.resolve(null)})};l.odagNavPoints.push(c);if(s&&s.id===e.info.id&&!r.addingNewNavPointID[l.currentSheet.id]){o=c;i.setSelectedObject(a.createSelectedObjFromNavPoint(c))}});if(r.addingNewNavPointID[this.currentSheet.id]){var c=this.odagNavPoints.filter(function(t){return t.data.info.id===r.addingNewNavPointID[l.currentSheet.id]});if(c.length){i.setSelectedObject(a.createSelectedObjFromNavPoint(c[0]));o=c[0]}r.addingNewNavPointID[this.currentSheet.id]=null}this.qvSheetService&&s&&"ODAGNavPoint"===s.type&&!o&&this.qvSheetService.setSheetAsSelectedObj()}};c.prototype.updateNavPoints=function(){var t=this;if(this.currentApp&&this.currentSheet)return r.clearCachedSessionObjects(this.currentApp).then(function(){t.currentSheet.getNavPoints().then(function(e){t.createODAGNavPointsList(e)})})};c.prototype.hasODAGNavPoints=function(){return this.odagNavPoints.length>0};c.prototype.destroy=function(){this.odagNavPoints=[];this.appLinkModelList.Invalidated.unbind(this.updateNavPoints);this.currentSheet.Invalidated.unbind(this.updateNavPoints)};c.prototype.getOdagNavPoints=function(){return this.odagNavPoints};return c}.apply(e,i),void 0!==s&&(t.exports=s))},510:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(89),n(131),n(135),n(972),n(97),n(973),n(90),n(375),n(274),n(980)],s=function(t,e,n,i,s,a,r,o,l){var c={template:s,restrict:"E",replace:true,scope:{inEditMode:"=",inMobileMode:"=",item:"="},controller:["$scope","$timeout","$element","luiPopover",function(t,s,c,u){t.popover=null;t.stageState=n;t.$watch("stageState.selectedObject",function(e){t.selObject=e});var d=null;t.rowCountPercentage=0;function p(){if(t.popover){t.popover.close();return}var e={item:t.item};if(e.item.openAppCallback){var n=e.item.openAppCallback;e.item.openAppCallback=function(e,i){t.popover.close();n(e,i)}}var i=r;var s={input:e,dock:"top",alignTo:c[0],closeOnResize:true};i=o.extend(true,s,i);t.popover=u.show(i);t.popover.closed.then(function(){t.popover=null})}function h(){t.popover&&t.popover.close();return}function f(){var n=new e;if(d){var a=t.item;d.getLayout().then(function(e){a.actualRowEst=e.MaxRowCountExpression;i.isSuffixInUse("noData")&&(a.actualRowEst="NaN");var n=a.maxRowExpressionCount;var r=100*Math.min(n/a.actualRowEst,1);if(r>=100)if(100!==t.rowCountPercentage){t.rowCountPercentage=99;s(function(){t.rowCountPercentage=100;a.rowCountPercentage=100;a.rowCountPercentageNumber=100},300)}else a.rowCountPercentage=100;else{a.rowCountPercentage=r;t.rowCountPercentage=r}"number"===typeof a.rowCountPercentage&&Number.isNaN(+a.rowCountPercentage)?a.rowCountPercentageNumber=-1:a.rowCountPercentageNumber=a.rowCountPercentage}).finally(function(){n.resolve()})}else n.reject();return n.promise}function g(){t.item.getCurrentCountSessionObjectForLink().then(function(e){d=e;d&&d.Invalidated.bind(f);f().finally(function(){t.item.initialized.resolve()})})}t.$watchCollection("item",function(t,n){if(null!==n&&null===t.initialized){t.initialized=new e;g()}});a.on("end",h);t.onODAGNavPointClicked=function(e){if(t.inMobileMode)return;t.inEditMode?n.setSelectedObject(l.createSelectedObjFromNavPoint(e)):t.item.invalid||p(e)};t.deleteInvalidNavPoint=function(t,e){e.model.removeObject()};s(function(){t.$broadcast("refreshPager")});t.$on("$destroy",function(){d&&d.Invalidated.unbind(f)})}]};t.directive("qvOdagToolbarNavpoint",function(){return c});return c}.apply(e,i),void 0!==s&&(t.exports=s))},612:function(t,e){t.exports='<lui-tooltip ng-style="style">\n\t{{item}}\n</lui-tooltip>'},833:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(834),n(99),n(112),n(92),n(144),n(89),n(97),n(148),n(124),n(96),n(142),n(49),n(157),n(95),n(93),n(108),n(155),n(176),n(835),n(837),n(175)],s=function(t,e,n,i,s,a,r,o,l,c,u,d,p,h,f,g,v,m,b){var y=".globalSelections",S=a.extend({init:function e(n,s){var a=this;var r=m.inClient();this.$scope=n;this.callbacks=[];this.ignoreUpdates=false;this.hasLoaded=false;n.dimensions=[];n.dimensionsFields=[];n.selectedFields=[];n.fields=[];n.dimAvailable=false;n.showFields=s.getShowFields(n.app);n.showFieldsCheckbox=true;n.filter="";n.autoFocus=i.treatAsDesktop();n.selectionToolbarOpen=false;n.showNoMatches=false;n.disableSelectionInsights=false;n.selInsightsEnabled=h.getFlag("SELECTION_INSIGHTS")&&r;function l(){var t=new o;c.isRunning().then(function(){t.resolve(true)},function(){t.resolve(false)});return t.promise}var c;if(r){c=new b;var u=localStorage.getItem("qv-global-selections-settings");v.getApp().then(function(t){l().then(function(e){f.load(t).then(function(){!f.isVariableDefined("DISABLE_SELECTION_INSIGHTS")&&e||(n.disableSelectionInsights=true);u&&!JSON.parse(u).open?n.showInsights=false:n.showInsights=true})})})}n.handleEscape=function(t){if(n.filter&&n.filter.length>0){n.filter="";t.stopImmediatePropagation();t.preventDefault()}else s.off()};function d(){localStorage.setItem("qv-global-selections-settings",JSON.stringify({open:n.showInsights}))}n.showInsightsPanel=function(){n.showInsights=true;d();g.publish("selection/insights/show")};var p=function t(){n.showInsights=false;d();localStorage.setItem("qv-global-selections-settings",JSON.stringify({open:n.showInsights}))};g.subscribe("selection/insights/close",p);n.$on("$destroy",function(){g.unsubscribe("selection/insights/close",p)});o.all({fields:this.getFields(),select:this.bindCurrentSelections(),dim:this.getLibraryDimensions(),reg:this.registerExtensions()}).then(function(){a.hasLoaded=true;n.showFieldsCheckbox=n.fields.length>0;n.dimAvailable=n.dimensions.length>0;if(!n.dimAvailable&&n.showFieldsCheckbox){n.showFields=true;s.setShowFields(n.showFields,n.app)}n.$watch("filter",function(){a.filterShown(a,a.$scope)});n.$watch("showFields",function(){s.setShowFields(n.showFields,n.app);a.filterShown(a,a.$scope)});t(".qv-gs-section .qv-gs-header")[1].style.display="none";t(".qv-gs-section .qv-gs-header")[1].offsetHeight;t(".qv-gs-section .qv-gs-header")[1].style.display="block"})},registerExtensions:function t(){var e=new o;u.load().then(function(){e.resolve()});return e.promise},getFields:function t(){var e=this.$scope;return e.app.getFieldList().then(function(t){e.fields=r.expand(t).map(function(t){return{title:t.qName,qField:t.qName,qTags:t.qTags}})})},_updateCurrentSelectionFields:function t(e){var n=this,i=this.$scope;i.selectedFields=e.qSelectionObject.qSelections.filter(function(t){return!t.qIsHidden}).sort(p.sortSelections).map(function(t){return{title:t.qReadableName||t.qField,qField:t.qField,enableBadge:true}});n.hasLoaded&&n.filterShown(n,i)},handleCurrentSelectionFields:function t(){var e=this;this.$scope.currentSelectionsModel.getLayout().then(function(t){e._updateCurrentSelectionFields(t)})},bindCurrentSelections:function t(){var e=this.$scope,n=this;return n.$scope.app.getCurrentSelectionObject().then(function(t){e.currentSelectionsModel=t;n.subscription=t.layoutSubscribe(function(t){if(e.app.isInModalSelection())return;n._updateCurrentSelectionFields(t)})})},getLibraryDimensions:function t(){var e=this.isCalculatedField,n=this.$scope;return n.app.getDimensionList().then(function(t){n.dimensions=t.filter(function(t){return t.qData.info.length>0&&!t.qData.info.some(e)&&"H"!==t.qData.grouping}).map(function(t){return{title:t.qData.labelExpression||t.qData.title,fieldName:t.qData.info[0].qName,qId:t.qInfo.qId}})})},isCalculatedField:function t(e){return"="===e.qName[0]},filterShown:function t(n,i){var a="",r=[];i.dimensionsFields=i.dimensions.filter(function(t){return!i.selectedFields.some(function(e){return t.fieldName===e.qField})});if(i.showFields){r=i.fields.filter(function(t){return!i.selectedFields.some(function(e){return e.qField===t.qField})});r=c.removeMeasureAndDetailsFields(r);i.dimensionsFields=i.dimensionsFields.concat(r.filter(function(t){return!i.dimensions.some(function(e){return t.qField===e.fieldName})}))}if(i.filter.length>0){a=i.filter.toLowerCase();r=i.dimensionsFields.filter(function(t){return-1!==t.title.toLowerCase().indexOf(a)});i.dimensionsFields=r}s.localeOrderBy(i.dimensionsFields,function(t){return t.title});i.showNoMatches=0===i.dimensionsFields.length&&!this.ignoreUpdates&&i.filter.length>0;e.$apply(i,function(){n.notifyCallbacks(n)})},addCallback:function t(e,n){this.callbacks.push({type:e,fn:n})},notifyCallbacks:function t(e){if(!e.hasLoaded)return;if(e.ignoreUpdates)return;e.callbacks.forEach(function(t){"fields"!==t.type&&"dimensions"!==t.type||t.fn()})},setIgnoreUpdates:function t(e){this.ignoreUpdates=e}});S.$inject=["$scope","qvGlobalSelectionsService"];e.directive("qvGlobalSelections",["$document","qvSelectionToolbarService","$timeout",function(e,i,s){return{restrict:"E",template:n,controller:S,require:["qvGlobalSelections"],scope:{app:"="},replace:true,link:function n(a,r,o,c){a.toolbar=!!e.find(".qui-toolbar,.qs-toolbar")[0];var u=c[0],f=function t(){u.ignoreUpdates=false},g=function t(){a.selectionToolbarOpen=false;s(function(){u.handleCurrentSelectionFields()})},v=function t(){a.selectionToolbarOpen=true};i.Closed.bind(g);i.Opened.bind(v);e.on("keyup"+y,function(t){27===t.which?u.ignoreUpdates=false:13===t.which&&(u.ignoreUpdates=false)});h.getFlag("ALT_STATE_ONE")&&p.getSelectionStates(a.app).then(function(t){t.splice("$",1);a.hasStatesOtherThanDefault=t.length>0});d(e[0].body).tap({id:y,options:{preventDefault:false},start:function e(n){var i=t(n.target).closest(".qv-gs-badge").length>0,s=t(n.target).closest(".qv-gs-listbox").length>0,a=t(n.target).closest(".qv-selection-toolbar").length>0;u.ignoreUpdates=s&&!i&&!a}});l.on("start",f);a.$on("$destroy",function(){u.callbacks=[];i.Closed.unbind(g);i.Opened.unbind(v);d(e[0].body).off("*",y);e.off(y);l.off("start",f);u.subscription&&u.subscription.dispose()});a.onEnter=function(t){t.stopPropagation();t.target.blur()}}}}]);return'<qv-global-selections app="app"></qv-global-selections>'}.apply(e,i),void 0!==s&&(t.exports=s))},834:function(t,e){t.exports='<div class="qv-global-selections" ng-class="{\'toolbar\': toolbar, \'selection-toolbar-open\': selectionToolbarOpen, \'insights-active\': showInsights && selInsightsEnabled }">\n\t<div class="qv-gs-sections">\n\t<section class="qv-gs-section qv-gs-top" tid="globalSelections.topSection" ng-class="{\'qv-gs-section-margin\' : showInsights && !disableSelectionInsights}">\n\t\t<header class="qv-gs-header">\n\t\t\t<h2 ng-if="!hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections"></h2>\n\t\t\t<h2 ng-if="hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections.Default"></h2>\n\t\t\t<div class="show-insights-btn" ng-show="selInsightsEnabled && !showInsights && !disableSelectionInsights">\n\t\t\t\t<button tid="explore-selections-button" class="lui-button show-insights--button" ng-click="showInsightsPanel()">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--lightbulb"></span><span class="lui-button__text"  q-translation="ExploreSelections.ExploreSelectionsBtn"></span>\n\t\t\t\t</button></div>\n\t\t</header>\n\t\t<div class="qv-gs-no-selections" ng-if="selectedFields.length == 0">\n\t\t\t<div class="qv-gs-no-selections-content">\n\t\t\t\t<div class="qv-qs-no-selections-image"></div>\n\t\t\t\t<div class="qv-qs-no-selections-title" q-translation="GlobalSelections.NoSelections"></div>\n\t\t\t\t<div class="qv-qs-no-selections-body" q-translation="GlobalSelections.NoSelectionsBody"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div qv-global-select-section="{ itemSize: 220, itemSpacing: 20, type: \'fields\' }" all-items="selectedFields" app="app"></div>\n\t</section>\n\n\t<section class="qv-gs-section" tid="globalSelections.bottomSection" ng-class="{\'qv-gs-section-margin\' : showInsights && !disableSelectionInsights}">\n\t\t<header class="qv-gs-header">\n\t\t\t<h2 q-translation="GlobalSelections.AppDimensions"></h2>\n\t\t\t<lui-checkbox class="global-show-fields-checkbox" x-model="showFields" title="{{\'GlobalSelections.ShowFields\'|translate}}" tid="globalSelections.showFields">{{\'GlobalSelections.ShowFields\'|translate}}</lui-checkbox>\n\t\t\t<lui-search  class="qv-gs-searchfield" placeholder="{{showFields ? \'GlobalSelections.FilterDimensionsAndFields\' : \'GlobalSelections.FilterDimensions\'}}" query="filter" maxlength="255"\n\t\t\t\t\t\t\t tid="globalSelections.searchField" on-escape="handleEscape($event)" auto-focus="autoFocus" on-enter="onEnter($event)"></lui-search>\n\t\t</header>\n\n\t\t<div class="qv-gs-info" ng-if="!dimAvailable && !showFields">\n\t\t\t<h2 q-translation="GlobalSelections.DimensionsWarning"></h2>\n\t\t</div>\n\t\t<div class="qv-gs-info" ng-if="showNoMatches">\n\t\t\t<h2 q-translation="GlobalSelections.NoMatchesForSearch"></h2>\n\t\t</div>\n\t\t<div qv-global-select-section="{ itemSize: 220, itemSpacing: 20, type: \'dimensions\'}" all-items="dimensionsFields" filter="filter" app="app"></div>\n\n\t</section>\n\t</div>\n\n\t<div tid="selection-insights-container" class="qv-insights-container" ng-if="selInsightsEnabled && showInsights && !disableSelectionInsights">\n\t\t<qv-selection-insights show-fields="showFields"></qv-selection-insights>\n\t</div>\n</div>\n'},835:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(836),n(92),n(141),n(153),n(97),n(89),n(206),n(179),n(270),n(11),n(90),n(104),n(251),n(114),n(99),n(176),n(244)],s=function(t,e,n,i,s,a,r,o,l,c,u,d,p,h,f,g){function v(t,e){while(t.length>e)t.pop()}var m=c.extend({init:function t(){this.resetColumnIndex();this._super.apply(this,arguments)},resetColumnIndex:function t(){this.columnIndex=0},setList:function t(e){this.list=e;this.scrollApi.setTotalRows(this.list.length);this.setItems(this.columnIndex,this.scrollApi.settings.blockSize);this.scrollApi.updateLoadingButtons()},onInitialNativeScroll:function t(){return r.resolve()},onGotoNextBlock:function t(){var e=this._super.apply(this,arguments).then(function(){this.columnIndex=this.getFirstElementIndex()}.bind(this));return e},onGotoPreviousBlock:function t(){var e=this._super.apply(this,arguments).then(function(){this.columnIndex=this.getFirstElementIndex()}.bind(this));return e}}),b=l.extend({resetNativeScroll:function t(){this.$scrollArea.scrollLeft(0)},alignToFirstRow:function t(){var e=this.getFirstRow(),n=e.children(".qv-object-wrapper").attr("id"),i=260;return function(){var t=u(this.$scrollArea.find("#"+n)),e;if(t.length>0){e=t.offset().left-i;this.$scrollArea.scrollLeft(e)}}.bind(this)},alignToLastRow:function t(){var e=this.getLastRow(),n=e.children(".qv-object-wrapper").attr("id"),i=250;return function(){var t=u(this.$scrollArea.find("#"+n)),e;if(t.length>0){this.$scrollArea.scrollLeft(0);e=t.parent().position().left-this.getScrollAreaBoundingBox().width+t[0].getBoundingClientRect().width+i;this.$scrollArea.scrollLeft(e)}}.bind(this)},getBoundingBox:function t(){var e=this._super.apply(this,arguments);return new p(e.top,e.left,e.height,e.width)}}),y=n.extend({size:{width:0,height:0},itemSize:0,itemSpacing:0,$element:void 0,init:function t(e,n,i){this.$scope=e;this.$timeout=n;this.selectionToolbarService=i;this.$scope.items=[];this.$scope.options={direction:f.direction}},initialize:function t(e,n,i){this.setSize(n);this.setItemSize(i.itemSize);this.setItemSpacing(i.itemSpacing);this.setElement(e.find(".qv-gs-scroll-area"));this.setItems();this.initialized=true},updateVisible:function t(){var e=this.offsetX-(this.$scope.scrollApi.loadPrevious?1:0),n=this.visibleItemsCount;this.$scope.items.forEach(function(t,i){var s=i>=e&&i<e+n;!t.visible&&s&&(t.options={isPopOver:false,highlightTitle:true,direction:f.direction});s&&!t.model&&this.getModel(t).then(function(t,e){t.model=e}.bind(null,t));t.visible=s},this)},getModel:function t(e){var n=this.getInitProps(e.title),s;e.qField?s=i.createTransientField(this.$scope.app,e.qField,n):e.qId&&(s=i.createTransientDimension(this.$scope.app,e.qId,n));return s},onScroll:function t(){this.qvGlobalSelectionsCtrl.setIgnoreUpdates(false);this.selectionToolbarService.confirm();this.updateHighlights();this.$timeout.cancel(this.scrollTimeout);this.scrollTimeout=this.$timeout(function(){this.updateVisible();this.updateHighlights()}.bind(this),100)},onResize:function t(e){this.setSize(e);this.updateVisible()},updateHighlights:function t(){this.$scope.items.forEach(function(t){t.options.highlightQuery=this.$scope.filter},this)},setItems:function t(){var e,n,i,s=this.$scope,a=this.totalItemsCount;s.items.length!==a&&v(s.items,a);for(e=0;e<a;e++){n=s.items[e]||{};i=s.scrollApi.items[e];i.enableBadge&&(n.enableBadge=i.enableBadge);n.model||(n.options={isPopOver:false,highlightTitle:true,direction:f.direction});if(i.qField){delete n.qId;if(!n.model||n.qField!==i.qField){if(n.visible){s.items[e]=d.extend(true,{},n);n=s.items[e];delete n.$$hashKey;delete n.options.search}n.title=i.title;n.qField=i.qField;n.id=h.sha256(n.qField);delete n.model}}else if(i.qId){delete n.qField;if(!n.model||n.qId!==i.qId){if(n.visible){s.items[e]=d.extend(true,{},n);n=s.items[e];delete n.$$hashKey;delete n.options.search}n.title=i.title;n.qId=i.qId;n.id=h.sha256(n.qId);delete n.model}}s.items[e]||(s.items[e]=n)}this.updateVisible()},getInitProps:function t(e){var n={title:e,qListObjectDef:{qDef:{}}};s.autoSortDimension(n.qListObjectDef);return n},getWidthOf:function t(e){return this.totalItemSize*e-this.itemSpacing},setItemSize:function t(e){this.itemSize=e||220},setItemSpacing:function t(e){this.itemSpacing=e||20},setSize:function t(e){this.size=e},setElement:function t(e){this.$element=e;this.$element.on("scroll",this.onScroll.bind(this))}});Object.defineProperties(y.prototype,{vPosX:{get:function t(){return this.$element.scrollLeft()}},totalItemSize:{get:function t(){return this.itemSize+this.itemSpacing}},visibleItemsCount:{get:function t(){var e=Math.ceil(((this.vPosX+(this.previousBtnVisible?240:0))%this.totalItemSize+this.size.width)/this.totalItemSize);return Math.min(e,this.totalItemsCount+(this.previousBtnVisible?1:0))}},totalItemsCount:{get:function t(){return(this.$scope.scrollApi.items||[]).length}},offsetX:{get:function t(){return Math.floor(this.vPosX/this.totalItemSize)}},previousBtnVisible:{get:function t(){return!!this.$scope.scrollApi.loadPrevious}}});y.$inject=["$scope","$timeout","qvSelectionToolbarService"];t.directive("qvGlobalSelectSection",["$parse","$timeout",function(t,n){return{controller:y,require:["qvGlobalSelectSection","^qvGlobalSelections"],template:e,replace:true,scope:{allItems:"=",filter:"=",app:"="},link:function e(i,s,r,l){var c=l[0],u=l[1],d=t(r.qvGlobalSelectSection)(),p={},h=s.find(".qv-gs-scroll-area"),f=h.controller("qvScrollArea"),v=s.find(".qv-scroll-loader").controller("qvScrollLoader"),y={blockSize:24,minRowHeight:240,maxRowHeight:240,keepItemsCount:4,virtualScrollEnabled:false},S=new o(n,y),I=new m(S),x=new b(s,h,".qv-gs-listbox",".qv-gs-listbox:first",".qv-gs-listbox:last"),w=null,q=function t(){p.width=s.innerWidth();p.height=s.innerHeight();c.onResize(p)};i.scrollApi=S;c.qvGlobalSelectionsCtrl=u;S.initialize(x,I,f,v).then(function(){S.activate();S.updateViewport();i.$watch("filter",function(){I.resetColumnIndex();S.resetNativeScroll()});i.$watch("allItems",function(t){if(!t)return;I.setList(t);w&&w();w=i.$watch("scrollApi.items",function(){var e=!g.treatAsDesktop();if(u.ignoreUpdates&&!e)return;if(0===S.items.length&&i.allItems.length>0){S.resetNativeScroll();I.resetColumnIndex();I.setList(t)}c.initialized&&c.setItems()})})}).catch(function(t){false});n(function(){p.width=s.innerWidth();p.height=s.innerHeight();c.initialize(s,p,d)});a.on("end",q);i.$on("$destroy",function(){a.off("end",q);S.destroy()});u.addCallback(d.type,function(){c.$timeout(function(){c.setItems();c.$timeout(function(){c.updateHighlights()})})})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},836:function(t,e){t.exports='<div class="qv-gs-scroll-container">\n\t<qv-scroll-area class="qv-gs-scroll-area">\n\t\t<div ng-if="scrollApi.loadPrevious" class="qv-gs-scroll-btn qv-gs-scroll-btn-previous" tid="globalSelections.loadPrevious">\n\t\t\t<qv-scroll-load-button tag="div" class="qv-listbox-load-buttons" on-load="scrollApi.gotoPreviousBlock()" text="Object.Listbox.LoadPrevious" previous="true"></qv-scroll-load-button>\n\t\t</div>\n\t\t<div ng-repeat="item in items" class="qv-gs-listbox">\n\t\t\t<qv-object ng-if="item.visible" model="item.model" options="item.options" object="item.object" class="qv-object-listbox" id="{{item.id}}"></qv-object>\n\t\t\t<div ng-if="!item.visible" class="qv-object qv-object-listbox qv-gs-placeholder" id="{{item.id}}">\n\t\t\t\t<h1 class="qv-object-title" qva-direction x-dir-text="{{item.title}}">\n\t\t\t\t\t<span class="qv-object-title-text" qva-direction x-dir-text="{{item.title}}">{{item.title}}</span>\n\t\t\t\t</h1>\n\t\t\t\t<div class="progress">\n\t\t\t\t\t<qv-rain></qv-rain>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<p ng-if="item.qField" q-title-translation="Common.Field" tid="globalSelections.fieldIndicator" class="qv-gs-field-indicator" qva-direction>\n\t\t\t\t<span class="lui-icon  lui-icon--field"></span>\n\t\t\t</p>\n\t\t\t<qv-gs-badge></qv-gs-badge>\n\t\t</div>\n\t\t<div ng-if="scrollApi.loadNext" class="qv-gs-scroll-btn" tid="globalSelections.loadNext">\n\t\t\t<qv-scroll-load-button tag="div" class="qv-listbox-load-buttons" on-load="scrollApi.gotoNextBlock()" text="Object.Listbox.LoadMore"></qv-scroll-load-button>\n\t\t</div>\n\t</qv-scroll-area>\n\t<qv-scroll-loader tag="li" class="qv-scroll-row-loader"></qv-scroll-loader>\n</div>\n'},837:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(838),n(288)],s=function(t,e,n){function i(e,n){var i=n[2];t.$apply(t.$rootScope,function(){e.item.showBadge=(void 0===n[0]||false===n[0])&&false===n[1]&&!i})}t.directive("qvGsBadge",function(){return{restrict:"E",template:e,replace:true,link:function t(e){if(e.item.enableBadge){e.item.object||(e.item.object={});e.$watchCollection("[item.model.layout.qListObject.qDimensionInfo.qLocked, item.object.selectionsApi.active, item.object.model.layout.qListObject.qDimensionInfo.qIsOneAndOnlyOne]",function(t){i(e,t)});e.badgeClick=function(t){var e=new n(t.model);return e.beginSelections().then(function(){return e.clearSelections().then(function(){return e.endSelections(true)})})}}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},838:function(t,e){t.exports='<div class="qv-gs-badge" ng-if="item.showBadge" q-title-translation="Tooltip.clearSelection" tid="globalSelections.badge" ng-click="badgeClick(item)">\n\t<span class="lui-icon lui-icon--remove"></span>\n</div>\n'},839:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(840),n(132),n(134),n(154),n(112),n(89),n(93),n(106),n(141),n(148),n(184),n(142),n(95),n(105),n(49),n(175),n(841),n(843),n(271),n(240),n(289)],s=function(t,e,n,i,s,a,r,o,l,c,u,d,p,h,f,g){function v(e,n){var i="",s=[];e.selectables=n.dimensions.filter(function(t){return!e.selectedFields.some(function(e){return t.qField===e.qField})});if(true===e.filter.showFields){s=n.fields.filter(function(t){return!e.selectedFields.some(function(e){return e.qField===t.qField})});s=u.removeMeasureAndDetailsFields(s);e.selectables=e.selectables.concat(s.filter(function(t){return!n.dimensions.some(function(e){return t.qField===e.qField})}))}if(e.filter.filter.length>0){i=e.filter.filter.toLowerCase();s=e.selectables.filter(function(t){return-1!==t.title.toLowerCase().indexOf(i)});e.selectables=s}a.localeOrderBy(e.selectables,function(t){return t.title});t.$apply(e)}function m(t){return t.every(function(t){return t.qLocked})}function b(e,i){var s=new r,a=t.getService("qvCurrentSelectionsService");n.get().then(function(t){e.currentSelectionsModel=t;l(e,"currentSelectionsModel",function(t){e.disable={clear:0===t.qSelectionObject.qSelections.length||m(t.qSelectionObject.qSelections),back:0===t.qSelectionObject.qBackCount,forward:0===t.qSelectionObject.qForwardCount};e.selectedFields=t.qSelectionObject.qSelections.filter(function(t){return!t.qIsHidden}).sort(p.sortSelections);e.selectedFields.forEach(function(t){t.translation=a.translate(t)});i.hasLoaded&&v(e,i)});s.resolve()});return s.promise}function y(t){var e=function t(e){return"="===e.qName[0]},n=new r;i.getList().then(function(i){i.getLayout().then(function(i){t.dimensions=i.filter(function(t){return t.qData.info.length>0&&!t.qData.info.some(e)&&"H"!==t.qData.grouping}).map(function(t){return{title:t.qData.title,qField:t.qData.info[0].qName,qId:t.qInfo.qId}});n.resolve()})});return n.promise}function S(t){var e=new r;s.getList().then(function(t){return t.getLayout()}).then(function(n){t.fields=n.map(function(t){return{title:t.qName,qField:t.qName,qTags:t.qTags,isField:true}});e.resolve()});return e.promise}var I=["$scope","qvGlobalSelectionsService",function(e,n){var i={hasLoaded:false,dimensions:[],fields:[]};e.filter={};o.getApp().then(function(s){e.app=s;e.selectedFields=[];e.filter.filter="";e.filter.showFields=n.getShowFields(s);e.filter.onEnter=function(t){t.stopPropagation();t.target.blur()};e.selectables=[];e.enableMenu=true;e.disable={clear:false,back:false,forward:false};t.getService("qvChartTooltipService").close();r.all({selectionsDfd:b(e,i),dimensionsDfd:y(i),fieldsDfd:S(i)}).then(function(){i.hasLoaded=true;e.enableMenu=i.fields.length>0;if(i.dimensions.length<=0&&e.enableMenu){e.filter.showFields=true;n.setShowFields(e.filter.showFields,s)}e.$watch("filter",function(){v(e,i)},true)})})}];t.directive("qvMobileSelections",["qvGlobalSelectionsService","qvListboxPopoverServiceMobile",function(t,n){return{restrict:"E",template:e,controller:I,replace:true,require:["qvMobileSelections"],scope:{},link:function e(i,s){var a,l=function t(){s.find(".qv-ms-scroll-area").animate({scrollTop:0})},u=d.createGroup("mobile-selections",0);u.registerKeys("enter",function(){});u.on();document.activeElement&&document.activeElement.blur();g.getFlag("ALT_STATE_ONE")&&o.getApp().then(function(t){p.getSelectionStates(t).then(function(t){t.splice("$",1);i.hasStatesOtherThanDefault=t.length>0})});i.close=function(e){e.preventDefault();t.toggleGlobalSelection(i.app);h.publish(f.Events.PubSub.RestoreSearchState)};i.selectionsBack=function(){i.disable.back||i.currentSelectionsModel.back()};i.selectionsForward=function(){i.disable.forward||i.currentSelectionsModel.forward()};i.selectionsClear=function(){i.disable.clear||i.currentSelectionsModel.clearAll()};i.toggleTooltip=i.filter.showFields?"GlobalSelections.HideFields":"GlobalSelections.ShowFields";i.toggleMenu=function(){i.filter.showFields=!i.filter.showFields;i.toggleTooltip=i.filter.showFields?"GlobalSelections.HideFields":"GlobalSelections.ShowFields";o.getApp().then(function(e){t.setShowFields(i.filter.showFields,e)})};i.$on("showListbox",function(t,e){var u={title:e.qReadableName||e.title,qListObjectDef:{qDef:{}}},d=-1!==i.selectedFields.indexOf(e),p=function t(){i.currentSelectionsModel.getLayout().then(function(t){var n;if(!d){n=t.qSelectionObject.qSelections.some(function(t){return e.qField===t.qField});if(n){a.resolve();return}}a.reject()})},h=function t(e){a&&a.reject();a=new r;a.promise.then(l);s.children(".qv-ms-searchbox").find("input").blur();n.show(e,{showLock:true},p)};o.getApp().then(function(t){e.qField?c.createTransientField(t,e.qField,u).then(h):c.createTransientDimension(t,e.qId,u).then(h)})});i.$on("$destroy",function(){a&&a.reject();u.delete()})}}}]);return"<qv-mobile-selections></qv-mobile-selections>"}.apply(e,i),void 0!==s&&(t.exports=s))},840:function(t,e){t.exports='<div class="qv-mobile-selections" tid="{{\'mobileSelections.showFields.\' + filter.showFields}}">\n\t<div class="qv-ms-toolbar">\n\t\t<p ng-click="selectionsBack()" ng-class="{\'qv-ms-button-disabled\' : disable.back, \'qv-ms-button-enabled\': !disable.back}" class="lui-icon lui-icon--selections-back qv-ms-toolbar-buttons" tid="mobileSelections.back" q-title-translation="Tooltip.NavigateBack"></p>\n\t\t<p ng-click="selectionsForward()" ng-class="{\'qv-ms-button-disabled\' : disable.forward, \'qv-ms-button-enabled\': !disable.forward}" class="qv-ms-toolbar-buttons lui-icon lui-icon--selections-forward" tid="mobileSelections.forward" q-title-translation="Tooltip.NavigateForward"></p>\n\t\t<p ng-click="selectionsClear()" ng-class="{\'qv-ms-button-disabled\' : disable.clear, \'qv-ms-button-enabled\': !disable.clear}" class="qv-ms-toolbar-buttons lui-icon lui-icon--clear-selections" tid="mobileSelections.clear" q-title-translation="Tooltip.ClearSelections"></p>\n\t\t<p ng-click="toggleMenu()" ng-class="{\'qv-ms-button-disabled\' : !enableMenu, \'qv-ms-button-enabled\': enableMenu, \'qv-ms-button-menu-active\': filter.showFields }" class="qv-ms-toolbar-buttons lui-icon\tlui-icon--settings" id="mobileSelectionsToggle" tid="mobileSelections.toggleFields" q-title-translation="{{toggleTooltip}}"></p>\n\n\t\t<qui-toolbarbutton ng-click="close($event)" name="close" class="qv-ms-toolbar-close" tid="mobileSelections.close">\n\t\t\t<span q-translation="Common.Close" class="qv-ms-toolbar-close-text"></span>\n\t\t</qui-toolbarbutton>\n\t</div>\n\t<header class="qv-ms-header">\n\t\t<h2 ng-if="!hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections"></h2>\n\t\t<h2 ng-if="hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections.Default"></h2>\n\t</header>\n\t<lui-search x-variant="inverse" class="qv-ms-searchbox" placeholder="{{filter.showFields ? \'GlobalSelections.FilterDimensionsAndFields\' : \'GlobalSelections.FilterDimensions\'}}" query="filter.filter" maxlength="255"\n\t\ton-enter="filter.onEnter($event)" tid="mobileSelections.searchfield">\n\t</lui-search>\n\t<div class="qv-ms-scroll-area">\n\t\t<qv-ms-selected ng-repeat="item in selectedFields"></qv-ms-selected>\n\t\t<div class="qv-ms-selectable" ng-if="filter.filter.length && (!selectables || selectables.length === 0)">\n\t\t\t<span q-translation="GlobalSelections.NoMatchesForSearch"></span>\n\t\t</div>\n\t\t<qv-ms-selectable ng-repeat="item in selectables"></qv-ms-selectable>\n\t</div>\n</div>\n'},841:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(842)],s=function(t,e){t.directive("qvMsSelectable",["$timeout",function(t){return{restrict:"E",replace:true,template:e,link:function e(n){n.showSelectable=function(){n.item.flash=true;t(function(){n.$emit("showListbox",n.item);n.item.flash=false},20)}}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},842:function(t,e){t.exports='<div ng-click="showSelectable()" ng-class="{\'qv-ms-touch-flash\' : item.flash}" class="qv-ms-selectable" tid="mobileSelections.selectable">\n\t<span ng-if="item.isField" class="lui-icon  lui-icon--field"></span>\n\t<div class="qv-ms-highlight">\n\t\t<span qve-highlight text="{{item.title}}" query="filter.filter"></span>\n\t</div>\n</div>\n'},843:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(844)],s=function(t,e){t.directive("qvMsSelected",function(){return{restrict:"E",replace:true,template:e,link:function t(e){e.showSelected=function(){e.$emit("showListbox",e.item)};e.clear=function(t){e.currentSelectionsModel.clearField(t)}}}})}.apply(e,i),void 0!==s&&(t.exports=s))},844:function(t,e){t.exports='<div class="qv-ms-selected" tid="mobileSelections.selected">\n\t<div class="qv-ms-selected-icon">\n\t\t<a ng-show="!item.qLocked && !item.qOneAndOnlyOne" ng-click="clear(item.qField)">\n\t\t\t<i class="lui-icon  lui-icon--remove"></i>\n\t\t</a>\n\t\t<a ng-show="item.qLocked" ng-click="showSelected(item.qField)">\n\t\t\t<i class="lui-icon lui-icon--lock"></i>\n\t\t</a>\n\t</div>\n\t<div ng-click="showSelected(item.qField)" class="qv-ms-selected-info" ng-class="{ \'no-icon\': item.qOneAndOnlyOne }">\n\t\t<h1 class="qv-object-title">{{item.qReadableName || item.qField}}</h1>\n\t\t<span>{{item.translation}}</span>\n\t\t<qv-state-count-bar state-counts="item.qStateCounts"></qv-state-count-bar>\n\t</div>\n</div>\n'},848:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(94),n(122),n(362)],s=function(t,e,n){var i;function s(){i||(i=t.getService("$navigationService"));return i}function a(){return s().Sheets.all.mashed}function r(){return s().Stories.all.mashed}function o(t){var n=e.model.id;var i=-1;t.forEach(function(t,e){t.qInfo.qId===n&&(i=e)});return i}function l(t,e){var n;e.forEach(function(e){e.qInfo.qId===t&&(n=e)});return n}function c(t,e){var n;e.forEach(function(e){e.qInfo.qId===t&&(n=e)});return n}function u(t){n.goToSheet(t,Object.keys(e.States)[e.state]);return{success:true,sheetId:t}}function d(t){n.goToStory(t,Object.keys(e.States)[e.States.play]);return{success:true,storyId:t}}function p(t,e,n){this.inClient=t;Object.defineProperties(this,{ANALYSIS:{get:function t(){return"analysis"}},EDIT:{get:function t(){return"edit"}},SNAPSHOT:{get:function t(){return"snapshot"}},sheets:{get:function n(){return t?a(this):e||[]}},stories:{get:function e(){return t?r(this):n||[]}}})}p.prototype.gotoSheet=function(t){var e=l(t,this.sheets);if(e)return u(t);return{success:false,error:"NOSUCHSHEET",errorMsg:"No such sheet"}};p.prototype.nextSheet=function(){if((e.view===e.Views.sheet||e.view===e.Views.object)&&e.model){var t=o(this.sheets)+1;var n=this.sheets[t===this.sheets.length?0:t].qInfo.qId;return u(n)}return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};p.prototype.prevSheet=function(){if((e.view===e.Views.sheet||e.view===e.Views.object)&&e.model){var t=o(this.sheets)-1;var n=this.sheets[t<0?this.sheets.length-1:t].qInfo.qId;return u(n)}return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};p.prototype.getCurrentSheetId=function(){if(e.view===e.Views.sheet&&e.model)return{success:true,sheetId:e.model.id};return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};p.prototype.getMode=function(){return Object.keys(e.States)[e.state]};p.prototype.setMode=function(t){if(!this.isModeAllowed(t))return{success:false,error:"MODENOTALLOWED",errorMsg:"Mode not allowed"};e.setState(e.States[t]);return{success:true,mode:t}};p.prototype.isModeAllowed=function(t){switch(t){case this.ANALYSIS:return true;case this.EDIT:return this.inClient&&e.model.layout&&e.model.layout.permissions&&e.model.layout.permissions.update;case this.SNAPSHOT:return this.inClient}return false};p.prototype.gotoStory=function(t){var e=c(t,this.stories);if(e)return d(t);return{success:false,error:"NOSUCHSTORY",errorMsg:"No such story"}};return p}.apply(e,i),void 0!==s&&(t.exports=s))},849:function(t,e,n){"use strict";var i,s;!(i=[n(239)],s=function(t){function e(){this._options=null;this._appid=null;this._type=null;this._cols=null;return window.Reflect?window.Reflect.construct(HTMLElement,[],this.constructor):null}e.prototype=Object.create(HTMLElement.prototype);e.prototype.constructor=e;Object.setPrototypeOf(e,HTMLElement);e.prototype.connectedCallback=function(){i(this)};Object.defineProperty(e.prototype,"options",{get:function t(){return this._options},set:function t(e){this.setAttribute("options",e)}});e.observedAttributes=["options","appid","config"];e.prototype.attributeChangedCallback=function(t,e,a){if("options"===t&&this.vis){var r=JSON.parse(a);this.vis.setOptions(r)}else{s(this);"appid"!==t&&"config"!==t||n(this);i(this)}};e.prototype.disconnectedCallback=function(){s(this)};e.init=function(){window.customElements&&window.customElements.define&&customElements.define("qlik-visual",e)};return e;function n(e){var n=e.getAttribute("appid");if(n){var i=JSON.parse(e.getAttribute("config"));e.app=t.openApp(n,i)}else e.app=t.currApp()}function i(t){var e=t.getAttribute("visid"),i=JSON.parse(t.getAttribute("options"));t.app||n(t);if(t.app&&e)t.app.visualization.get(e).then(function(e){t.vis=e;i&&e.setOptions(i);e.show(t)});else if(t.app){var s=JSON.parse(t.getAttribute("cols")),a=t.getAttribute("type")||"barchart";t.app.visualization.create(a,s,i).then(function(e){t.vis=e;e.show(t)})}}function s(t){if(t.vis){t.vis.close();delete t.vis}}}.apply(e,i),void 0!==s&&(t.exports=s))},850:function(t,e){t.exports='<div class="qv-panel-subtoolbar qv-panel-current-selections" ng-class="{smallDevice: isSmallDevice, bright: brightCurSel, \'expand-smart-search-suggested-chart\': expandSmartSearchSuggestedChart}">\n\t<div ng-if="!isSmallDevice">\n\t\t<div class="qv-selections-pager" ng-class="{\'client-tab-navigation--bright\' : clientTabNavigation }">\n\t\t\t<div class="buttons borderbox border-bottom border-right" aria-hidden="true">\n\n\t\t\t\t<div tid="toggleGlobalSearchButton" tabindex="0" class="qv-subtoolbar-button toggle-button borderbox" ng-hide="hideSearch" ng-class="{active: isGlobalSearchActive, indexing: isGlobalSearchIndexing}" ng-click="toggleGlobalSearch()" q-title-translation="{{isGlobalSearchActive ? \'Tooltip.CloseGlobalSearch\' : \'Tooltip.GlobalSearch\'}}">\n\t\t\t\t\t<i class="lui-icon lui-icon--selection-search icon"></i>\n\t\t\t\t\t<div class="label" q-translation="GlobalSearch.Preparing" q-title-translation="GlobalSearch.Preparing.Tooltip"></div>\n\t\t\t\t\t<qv-progress-bar ng-if="isGlobalSearchIndexing" percent-done="indexPercentDone" on-completed="setSearchIndexingDone()" options="progressBarOptions"></qv-progress-bar>\n\t\t\t\t</div>\n\n\t\t\t\t<button class="qv-subtoolbar-button borderbox" ng-hide="hideUndoRedo" ng-click="back()" ng-disabled="disable.back" q-title-translation="Tooltip.NavigateBack" data-tid="current-selections-back">\n\t\t\t\t\t<i class="lui-icon lui-icon--selections-back"></i>\n\t\t\t\t</button>\n\n\t\t\t\t<button class="qv-subtoolbar-button borderbox" ng-hide="hideUndoRedo" ng-click="forward()" ng-disabled="disable.forward" q-title-translation="Tooltip.NavigateForward" data-tid="current-selections-forward">\n\t\t\t\t\t<i class="lui-icon lui-icon--selections-forward"></i>\n\t\t\t\t</button>\n\n\t\t\t\t<button id="clearselections" class="qv-subtoolbar-button borderbox" ng-disabled="disable.clear" ng-hide="hideClearSelections" ng-click="clearAllFields()" q-title-translation="Tooltip.ClearSelections" data-tid="current-selections-clear">\n\t\t\t\t\t<i class="lui-icon lui-icon--clear-selections"></i>\n\t\t\t\t</button>\n\n\t\t\t</div>\n\t\t\t<div class="selections-shadow" ng-if="showShadow"></div>\n\t\t\t<div class="wrap borderbox" style="height: 100%;" qv-pager qv-selection-pager>\n\t\t\t\t<ul class="list" ng-show="!isGlobalSelectionsActive || (items.length > 0 && currentSelectionDisabled) || (items.length > 0 && !isGlobalSelectionsActive)" qva-delegated-activate=".item#showPopover($event)" qva-outside-ignore-for="currentSelectionsItems">\n\t\t\t\t\t<li class="item" ng-class="{\'item-multi-state\': !item.isSingleState, \'multi-active\': multiPopoverFieldName && multiPopoverFieldName === item.qField, \'selection-insights-disabled\': currentSelectionDisabled}" ng-repeat="item in items track by item.qField" data-csid="{{item.qField}}" tabindex="0"\n\t\t\t\t\t ng-keydown="handleKeyDown($event, item)" aria-label="{{item.screenReaderLabel}}">\n\t\t\t\t\t\t<qv-current-selections-item ng-if="item.isSingleState" item="item" current-selection-disabled="currentSelectionDisabled"></qv-current-selections-item>\n\t\t\t\t\t\t<div ng-if="!item.isSingleState" class="current-selections-item" ng-mousemove="openTooltip($event, item)" ng-mouseleave="closeTooltip()">\n\t\t\t\t\t\t\t<div class="item-component label">\n\t\t\t\t\t\t\t\t<span ng-class="{ \'lui-icon lui-icon--lock\': item.qLocked }"></span><span class="name">{{item.name}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-component count" title="">\n\t\t\t\t\t\t\t\t<span class="field-states-indicator">{{ item.states.length }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-component caret">\n\t\t\t\t\t\t\t\t<span class="lui-icon lui-icon--arrow-down"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="currentSelectionDisabled" class="current-selections-disabled"></div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\n\t\t\t\t<div ng-if="!items.length && !haveHiddenSelections" class="empty-text no-selection borderbox" q-translation="CurrentSelections.NoSelections"></div>\n\t\t\t\t<div ng-if="!items.length && haveHiddenSelections" class="empty-text no-selection borderbox" q-translation="CurrentSelections.OnlyHiddenSelections"></div>\n\t\t\t\t<a class="qv-pager-nav qv-pager-previous" ng-class="{inverted: brightCurSel}" ng-click="prevPage()" q-title-translation="Tooltip.Previous"><i class="lui-icon lui-icon--arrow-left"></i></a>\n\t\t\t\t<a class="qv-pager-nav qv-pager-next" ng-class="{inverted: brightCurSel}" ng-click="nextPage()" q-title-translation="Tooltip.Next"><i class="lui-icon lui-icon--arrow-right"></i></a>\n\t\t\t</div>\n\t\t\t<div class="buttons-end borderbox border-left">\n\t\t\t\t<div aria-hidden="true" class="qv-subtoolbar-button qv-explore-selections-btn toggle-button borderbox" tabindex="0" ng-class="{active: isGlobalSelectionsActive}" ng-hide="hideSelectionsTool" ng-click="toggleGlobalSelection($event)" q-title-translation="{{isGlobalSelectionsActive ? \'Tooltip.CloseGlobalSelector\' : \'Tooltip.GlobalSelector\'}}"\n\t\t\t\t tid="currentSelections.toggleGlobalSelections">\n\t\t\t\t\t<i class="lui-icon lui-icon--global-selector icon"></i>\n\t\t\t\t\t<span id="explore-selections-label" q-translation="CurrentSelections.ExploreSelectionsBtn"></span>\n\t\t\t\t</div>\n\n\t\t\t\t<div aria-labelledby="insights-label" tid="toggleCaoButton" id="toggle-insights" tabindex="0" class="qv-subtoolbar-button toggle-button borderbox qv-insight-toggle-button" ng-if="options && options.enableCao" ng-class="{active: isCaoActive, bright: brightCurSel}" ng-click="toggleCao()"\n\t\t\t\t q-title-translation="{{isCaoActive ? \'cao.CloseCognitiveAssociativeOverlay\' : \'cao.CognitiveAssociativeOverlay\'}}">\n\t\t\t\t\t<i class="lui-icon lui-icon--analyze icon" aria-hidden="true"></i>\n\t\t\t\t\t<span id="insights-label" q-translation="cao.CognitiveAssociativeOverlayToggleButton"></span>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n\t<div ng-if="isSmallDevice && mobileIndicatorShow && !inSelection " ng-click="toggleGlobalSelection($event)" ng-class="{\'expand-smart-search-suggested-chart\': expandSmartSearchSuggestedChart}" class="qv-current-selections-mobile-wrapper" tid="currentSelections.toggleMobileSelections"\n\t q-title-translation="GlobalSelections.CurrentSelections">\n\t\t<div class="qv-current-selections-mobile-background">\n\t\t\t<p class="qv-current-selections-mobile-nbr" ng-class="{selections: nbrSelections > 0}">{{nbrSelections}}</p>\n\t\t</div>\n\t</div>\n</div>'},851:function(t,e){t.exports='<div qva-direction x-dir-setting={{options.direction}}" class="qv-tooltip qvt-generic-tooltip" ng-class="{\'above\':alwaysOnTop}">\n\t<div ng-repeat="item in content">\n\t\t<div qva-direction x-dir-text="{{item.header}}" x-dir-setting="{{options.direction}}" class="qv-tp-header">\n\t\t\t<strong>{{item.header}}</strong>\n\t\t</div>\n\t\t<table>\n\t\t\t<tr ng-repeat="row in item.rows" class="qv-tp-row">\n\t\t\t\t<td class=\'qv-tp-item\'>\n\t\t\t\t\t<div qva-direction x-dir-text="{{row.content}}" class="qv-tp-rowContent fade-out">{{row.content}}</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</div>'},852:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(184)],s=function(t,e,n){function i(i){var s={preventDefault:false,allowInInput:false};function a(){n.preventDefault();e.$rootScope.$apply()}function r(){i.inSelection&&t(document).trigger("qv-press");i.forward();a()}function o(){i.inSelection&&t(document).trigger("qv-press");i.back();a()}this.keyboardShortcutsGroup=n.createGroup("current-selection-"+i.app.id,1);this.keyboardShortcutsGroup.registerKeys("ctrl+shift+y",r,s);this.keyboardShortcutsGroup.registerKeys("ctrl+shift+z",o,s);this.keyboardShortcutsGroup.on();this.on=function(){if(!this._isOn){this.keyboardShortcutsGroup.on();this._isOn=true}};this.off=function(){if(this._isOn){this.keyboardShortcutsGroup.off();this._isOn=false}};this.delete=function(){this.keyboardShortcutsGroup.delete()}}return i}.apply(e,i),void 0!==s&&(t.exports=s))},853:function(t,e,n){"use strict";var i,s;!(i=[n(92)],s=function(t){var e=t.extend("CurrentSelectionsViewHelper",{init:function t(e,n,i,s,a,r){this.scope=e;this.responsiveState=n;this.globalSelectionService=i;this.exploreSelectionsService=s;this.globalSearchService=a;this.caoService=r},toggleGlobalSelection:function t(e){this.globalSelectionService.toggleGlobalSelection(e);this.responsiveState.isSmallDevice||this.globalSearchService.off();this.scope.isCaoActive=false;this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false},toggleExploreSelection:function t(e){this.globalSelectionService.off();this.scope.isExploreSelectionsActive=this.exploreSelectionsService.toggleExploreSelection(e);this.globalSearchService.off();this.scope.isCaoActive=false},toggleGlobalSearch:function t(e){this.globalSearchService.toggleGlobalSearch(this.scope.app.enigmaModel,e,this.scope.options.objectSearch);this.scope.isCaoActive=false;this.globalSelectionService.off();this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false},toggleCao:function t(e){this.scope.isCaoActive=this.caoService.toggleCao(e);this.globalSearchService.off();this.globalSelectionService.off();this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false}});return e}.apply(e,i),void 0!==s&&(t.exports=s))},854:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(242)],s=function(t){t.widget("qv.pager",{options:{itemSelector:">li",orientation:"horizontal",pageSize:"auto",startPage:1,animationDuration:300},_create:function e(){var n=this.options;t.extend(this,{positionProperty:"horizontal"===n.orientation?"left":"top",sizeProperty:"horizontal"===n.orientation?"outerWidth":"outerHeight"});this.refresh();this.goToPage(n.startPage)},isItemInsidePage:function e(n){var i=t(n),s=i.position()[this.positionProperty]+i[this.sizeProperty](),a=Math.abs(parseFloat(i.parent().css("margin-"+this.positionProperty))),r=a+this.containerSize;return s>a&&s<r},calculatePageSize:function t(){return Math.floor(this.containerSize/this.calculateItemSize())},calculateItemSize:function t(){return this.element.find(this.options.itemSelector).eq(0)[this.sizeProperty]()},refresh:function t(){var e=this.currentPage||1;this.containerSize=this.element.parent()[this.sizeProperty]();this.pageSize="auto"===this.options.pageSize?this.calculatePageSize():this.options.pageSize;this.itemSize=this.calculateItemSize();this.maxPages=Math.ceil(this.element.find(this.options.itemSelector).length/this.pageSize||1);this.currentPage=Math.min(e,this.maxPages);this.goToPage(this.currentPage)},goToPage:function t(e){this.currentPage=Math.min(Math.max(1,e),this.maxPages);var n=(this.currentPage-1)*this.itemSize*this.pageSize,i={};i[this.positionProperty]=-n+"px";this.element.stop(true).animate(i,this.options.animationDuration)},goToPreviousPage:function t(){this.goToPage(this.currentPage-1)},goToNextPage:function t(){this.goToPage(this.currentPage+1)},goToPageContaining:function t(e){var n=Math.ceil(this.element.find(e).index()+1/this.pageSize);this.goToPage(n)},_destroy:function t(){this.element.off(this.eventNamespace)}});return t}.apply(e,i),void 0!==s&&(t.exports=s))},855:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(10),n(48),n(856),n(94),n(140),n(103),n(168),n(155),n(49),n(89),n(176)],s=function(t,e,n,i,s,a){n.service("qvExploreSelectionsService",["$document","qvSelectionToolbarService",function(n,r){var o,l;var c=300;function u(){return{$container:void 0,$containerId:".qv-explore-selections-container",getComponent:function t(){return i},setup:function t(){a.get().then(function(t){s.StateChanged.bind(d.bind(null,d));t.enigmaModel.isInModalSelection()&&r.confirm()})},destroy:function t(){s.StateChanged.unbind(d)}}}function d(){(s.isInEditMode()||!s.isInAnalysisMode||s.inObjectView())&&f()}function p(i){s.setState(s.States.analysis);l.$container=e.element("<div>");i=i||n;i.find(l.$containerId).append(l.$container);l.$container.showComponent(l.getComponent());l.setup();t(".qv-explore-selections").slideDown(c)}function h(){return!(!l||void 0===l.$container)}function f(){if(!l)return;t(".qv-explore-selections").slideUp(c,function(){if(l.$container){l.$container.remove();l.$container=void 0}l.destroy()})}o={toggleExploreSelection:function t(e){l||(l=new u);if(h()){f();return false}p(e);return true},off:function t(){f()}};return o}])}.apply(e,i),void 0!==s&&(t.exports=s))},856:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(857),n(858)],s=function(t,e){var n=["$scope",function(t){t.showFullModel=false;t.$on("$destroy",function(){})}];t.directive("qvExploreSelectionsComponent",function(){return{restrict:"E",template:e,controller:n,scope:true,replace:true,link:function t(e){e.target=null}}});return"<qv-explore-selections-component></qv-explore-selections-component>"}.apply(e,i),void 0!==s&&(t.exports=s))},857:function(t,e){t.exports='<div class="qv-explore-selections overlay" id="qv-explore-selections-overlay" style="display:none;">\n\t<qv-selection-insights full="showFullModel"></qv-selection-insights>\n</div>'},858:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(284),n(859),n(860),n(93),n(234),n(95),n(91),n(106),n(103),n(220),n(861),n(863),n(867)],s=function(t,e,n,i,s,a,r,o,l,c){var u={NO_SELECTIONS:0,GENERATE_INSIGHTS:1,INSIGHTS_FOUND:2,NO_INSIGHTS:3,UNSUPPORTED:4};var d={restrict:"E",bindings:{showFields:"<"},template:n,controller:["$scope","$timeout","qvSelectionInsightsService",function(n,d,p){var h=this;var f=null;this.showLoading=true;this.insights=[];this.activeCard=1e3;this.showInsightDetails=false;this.selectedInsight=null;this.hasSelection=false;this.measure="";this.newMeasureChosen=false;this.newSelection=false;this.isRefreshing=false;this.app=null;this.layout=null;this.selectionInsightsState=u.NO_SELECTIONS;this.states=u;this.measureError=false;this.loadingCards=false;this.cardIsInsight=true;this.selectionContribution="";this.isOneAndOnlyOneField=null;this.showing={table:false,excluded:false};this.$onInit=function(){g().then(function(t){if(t)s.getApp().then(function(t){h.app=t;t.enigmaModel.getCurrentSelectionObject().then(function(t){n.currentSelModel=t;l(n,"currentSelModel",function(){v()})});b(t);c.trackEvent(c.customEvents.EXPLORE_SELECTIONS_OPENED,{type:"clicked"})});else{m();h.showLoading=false}})};function g(){return p.getInsightDimensions(h.showFields).then(function(){return true}).catch(function(){return false})}this.generateInsights=function(){h.showLoading=true;h.newMeasureChosen=false;h.newSelection=false;y();c.trackEvent(c.customEvents.ASSOCIATIVE_INSIGHTS_GENERATED,{type:"clicked"})};function v(){if(h.selectionInsightsState!=u.UNSUPPORTED){h.hasSelection=n.currentSelModel.layout.qSelectionObject.qSelections.length>0;h.showLoading=false;h.isOneAndOnlyOneField=p.isOneAndOnlyOne(n.currentSelModel.layout);if(h.isOneAndOnlyOneField.isOneAndOnlyOne){h.selectionInsightsState=u.UNSUPPORTED;h.errorMsg=o.get("ExploreSelections.SingleSelectField",[h.isOneAndOnlyOneField.items])}else h.hasSelection||(h.selectionInsightsState=u.NO_SELECTIONS);h.hasSelection&&h.selectionInsightsState===u.NO_SELECTIONS&&(h.selectionInsightsState=u.GENERATE_INSIGHTS);h.layout=n.currentSelModel.layout;r.publish("selection/insights/current-selection",n.currentSelModel.layout)}}this.$onChanges=function(t){void 0===t.showFields||t.showFields.isFirstChange()||h.selectionInsightsState===u.NO_INSIGHTS&&(h.selectionInsightsState=u.GENERATE_INSIGHTS)};function m(){h.selectionInsightsState=u.UNSUPPORTED;h.errorMsg=o.get("ExploreSelections.NoSelectionInsights")}function b(t){return t.getCurrentSelectionObject().then(function(t){t.layoutSubscribe(function(){if(h.selectionInsightsState!=u.UNSUPPORTED){h.showInsightDetails=false;if(!h.newMeasureChosen){h.isRefreshing=true;r.publish("selection/insights/selection/changed")}if(h.selectionInsightsState!==u.NO_SELECTIONS&&h.selectionInsightsState!==u.NO_INSIGHTS){h.newSelection=true;h.newMeasureChosen=false}else h.selectionInsightsState===u.NO_INSIGHTS&&(h.selectionInsightsState=u.GENERATE_INSIGHTS)}c.trackEvent(c.customEvents.NEW_SELECTION_MADE,{type:"clicked"})})})}function y(){h.insights=[];return p.getInsightDimensions(h.showFields).then(function(t){r.publish("selection/insights/refreshed");h.showLoading=false;h.selectionInsightsState=u.INSIGHTS_FOUND;if(0!==t.insights.length){h.measure=t.insights[0].measure;h.loadingCards=true;S(t.insights)}else{r.publish("selection/insights/updated");t.measure?h.measure=t.measure:h.selectionInsightsState=u.NO_INSIGHTS}h.isRefreshing=false}).catch(function(){h.showLoading=false;m()})}function S(e){var n=t.getService("$q");function i(t){var s=e[t];if(!s)return n.resolve(true);return p.getInsightSummary(s.dimension,h.app).then(function(t){h.measureError="NaN"==t.summary;s.summaryNaN=h.measureError;s.summaryString=t.summary;if(t.show){h.insights.push(s);r.publish("selection/insight/draw",{insight:s,index:h.insights.length-1})}}).catch(function(){s.summaryError=true;h.insights.push(s)}).then(function(){t+=1;if(t<e.length)return i(t);h.loadingCards=false;r.publish("selection/insights/updated");return true})}return i(0)}this.openCardSummaryDialog=function(){f=t.getService("luiDialog").show({template:i,input:{title:"SelectionInsights.SummarySelection.HelpTitle",html:i,closeDialog:function t(){f.close();f=null}}})};this.backToSelections=function(){h.showInsightDetails=false;h.newMeasureChosen=false;r.publish("selections/insights/details/close")};this.closeInsights=function(){h.showInsightDetails=false;h.newMeasureChosen=false;p.clearInsights();r.publish("selection/insights/close")};this.openCard=function(t){r.publish("selections/insights/details/close");if(t>=0)h.newMeasureChosen||h.isRefreshing||h.insights[t].summaryNaN||!h.insights[t].show||d(function(){if(h.activeCard==t)h.closeCard();else{r.publish("selections/insights/details/open");h.activeCard=t;t=t>0?t:0;var n=p.getInsightDetails(h.insights[t].dimension,h.app);n.isMeasureNegative=n.includedMeasure.qNumber<0||n.excludedMeasure.qNumber<0;h.showInsightDetails=true;h.cardIsInsight=true;h.insights[t]=n;h.selectedInsight=h.insights[t];p.getTableVis(h.selectedInsight,h.showing.excluded).then(function(t){h.selectedInsight.table=t});n.isMeasureNegative?r.publish("selection/insights/details/negative",h.selectedInsight):r.publish("selection/insights/details/updated",{measure:h.selectedInsight.measure,aggr:h.selectedInsight.measureAggregation,dimension:h.selectedInsight.dimension,contribution:h.selectedInsight.selectedMeasure.selected.percentage.toFixed(1)});var i=e.openApp(h.app.qDocId);i.visualization.create("listbox",[h.selectedInsight.dimension],{showTitles:true,title:h.selectedInsight.dimension}).then(function(t){h.listbox=t.model.enigmaModel;I()})}});else if(!h.newMeasureChosen&&!h.isRefreshing)if(h.activeCard==t&&h.showInsightDetails)h.closeCard();else{h.activeCard=t;var n=p.getInsightDetails(h.insights[0].dimension,h.app);h.showInsightDetails=true;h.cardIsInsight=false;n.isSelectionNegative=n.selectedMeasure.selected.percentage<0||n.selectedMeasure.excluded.percentage<0;h.insights[0]=n;h.selectedInsight=h.insights[0];r.publish("selection/insights/current/open",{insight:h.selectedInsight});r.publish("selections/insights/details/open")}c.trackEvent(c.customEvents.ASSOCIATIVE_INSIGHTS_CARD_CLICKED,{type:"clicked"})};this.closeCard=function(){h.showInsightDetails=!h.showInsightDetails;h.cardIsInsight=true;h.activeCard=null};r.subscribe("selection/insights/details/close",function(){h.showInsightDetails=false});r.subscribe("selection/insights/new",function(t){h.isRefreshing=false;h.insights=[];h.activeCard=1e3;if(0===t.insights.length){h.measureError=false;r.publish("selection/insights/updated")}else{h.loadingCards=true;S(t.insights)}t.measure&&(h.measure=t.measure);h.showInsightDetails=false});r.subscribe("selection/insights/error",m);function I(){a.selectAll(".gwBar g").remove();var t=a.select(".gwBar svg");var e=t.append("g");var n=h.selectedInsight.counts.excluded/(h.selectedInsight.counts.excluded+h.selectedInsight.counts.included)*100/100*427;var i=h.selectedInsight.counts.included/(h.selectedInsight.counts.excluded+h.selectedInsight.counts.included)*100/100*427;e.append("rect").style("fill","#A9A9A9").attr("width",35).attr("height",Math.ceil(n)).attr("y",Math.ceil(i)).attr("x",0);e.append("rect").style("fill","white").attr("width",35).attr("height",Math.ceil(i)).attr("y",0).attr("x",0);var s=[];s.push([{x:35,y:Math.ceil(i)+Math.ceil(n)/2},{x:65,y:322}]);s.push([{x:65,y:322},{x:95,y:322}]);s.push([{x:35,y:Math.ceil(i)/2},{x:65,y:107}]);s.push([{x:65,y:107},{x:95,y:107}]);var r=a.svg.line().x(function(t){return t.x}).y(function(t){return t.y});var o=t.append("g").attr("class","lines");o.selectAll("path").data(s).enter().append("path").attr({d:r,"stroke-dasharray":"790 790","stroke-dashoffset":0}).style("stroke",function(t,e){return e>1?"white":"#A9A9A9"}).style("stroke-width","2").attr("opacity",1)}this.$onDestroy=function(){r.unsubscribe("selection/insights/show");r.unsubscribe("selection/insights/new");r.unsubscribe("selection/insights/error")}}]};t.nativeComponent("qvSelectionInsights",d)}.apply(e,i),void 0!==s&&(t.exports=s))},859:function(t,e){t.exports='<div class="qv-selections-insights-container">\n\t\x3c!-- Insights found --\x3e\n\t<div class="qv-selections-insights-header">\n\t\t<h2\n\t\t\tq-translation="SelectionInsights.AssociativeInsights"\n\t\t\tclass="qv-selections-insights-title"\n\t\t></h2>\n\t\t<span\n\t\t\tclass="lui-icon lui-icon--help lui-icon--small"\n\t\t\tng-click="$ctrl.openCardSummaryDialog()"\n\t\t></span>\n\t\t<div class="qv-insight-summary-close">\n\t\t\t<span\n\t\t\t\tclass="lui-icon lui-icon--close"\n\t\t\t\tng-click="$ctrl.closeInsights()"\n\t\t\t></span>\n\t\t</div>\n\t\t<qv-selection-insights-summary\n\t\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\t\tstates="$ctrl.states"\n\t\t\tselection-insights-state="$ctrl.selectionInsightsState"\n\t\t\tnew-measure-chosen="$ctrl.newMeasureChosen"\n\t\t\tnew-selection="$ctrl.newSelection"\n\t\t\tmeasure="$ctrl.measure"\n\t\t\tshow-loading="$ctrl.showLoading"\n\t\t\thas-selection="$ctrl.hasSelection"\n\t\t\tshow-fields="$ctrl.showFields"\n\t\t\tmeasure-error="$ctrl.measureError"\n\t\t\tselected-insight="$ctrl.selectedInsight"\n\t\t></qv-selection-insights-summary>\n\t</div>\n\t<qv-selection-insights-card-container\n\t\tng-show="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\tnew-measure-chosen="$ctrl.newMeasureChosen"\n\t\tnew-selection="$ctrl.newSelection"\n\t\tmeasure="$ctrl.measure"\n\t\tshow-loading="$ctrl.showLoading"\n\t\tinsights="$ctrl.insights"\n\t\topen-card="$ctrl.openCard"\n\t\tactive-card="$ctrl.activeCard"\n\t\tclass="qv-selection-insights-card-container"\n\t\tshow-fields="$ctrl.showFields"\n\t\tloading-cards="$ctrl.loadingCards"\n\t\tcard-is-insight="$ctrl.cardIsInsight"\n\t></qv-selection-insights-card-container>\n\t\x3c!-- LOADING --\x3e\n\t<div class="qv-selections-insights-loading" ng-if="$ctrl.showLoading">\n\t\t<div class="spinner-container">\n\t\t\t<qv-spinner\n\t\t\t\tshow="$ctrl.showLoading"\n\t\t\t\tcenter-in-parent="true"\n\t\t\t></qv-spinner>\n\t\t</div>\n\t\t<div\n\t\t\tclass="loading-message"\n\t\t\tq-translation="SelectionInsights.Loading"\n\t\t></div>\n\t</div>\n\n\t\x3c!-- No selection has been made --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.NO_SELECTIONS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tclass="qv-selections-insights--p"\n\t\t\tq-translation="ExploreSelections.NoInsights"\n\t\t></p>\n\t</div>\n\n\t\x3c!-- AI is not supported for this app --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.UNSUPPORTED"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p class="qv-selections-insights--p" ng-bind-html="$ctrl.errorMsg"></p>\n\t</div>\n\n\t\x3c!--\n\t\tUser opened the selection insights panel for the first time after making selections\n\t--\x3e\n\t<div\n\t\tclass="qv-selections-generate-insights qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.GENERATE_INSIGHTS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tq-translation="ExploreSelections.GenerateInsights"\n\t\t\tclass="qv-selections-insights--p"\n\t\t></p>\n\t\t<button\n\t\t\ttid="explore-selections-generate-insight-button"\n\t\t\tclass="lui-button lui-button--success"\n\t\t\tq-translation="ExploreSelections.GenerateInsights.Button"\n\t\t\tng-click="$ctrl.generateInsights()"\n\t\t></button>\n\t</div>\n\n\t\x3c!-- User has made a selection but no insights were found --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.NO_INSIGHTS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tclass="qv-selections-insights--p"\n\t\t\tq-translation="ExploreSelections.NoInsightsWithSelection.Paragraph1"\n\t\t></p>\n\t\t\x3c!--\n\t\t\tIf show fields checkbox is unchecked, we tell them to check it since they got no master item insights\n\t\t--\x3e\n\t\t<div\n\t\t\tng-if="!$ctrl.showFields"\n\t\t\tclass="select-fields"\n\t\t\tq-translation="ExploreSelections.NoInsightsWithSelection.Paragraph3"\n\t\t></div>\n\t</div>\n\n\t\x3c!-- Insights details --\x3e\n\t<qv-selection-insights-details\n\t\tng-show="$ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\tshow-insight-details="$ctrl.showInsightDetails"\n\t\tselected-insight="$ctrl.selectedInsight"\n\t\tlistbox="$ctrl.listbox"\n\t\tcard-is-insight="$ctrl.cardIsInsight"\n\t\tback-to-selections="$ctrl.backToSelections()"\n\t\tlayout="$ctrl.layout"\n\t\tshowing="$ctrl.showing"\n\t></qv-selection-insights-details>\n</div>\n'},860:function(t,e){t.exports='<lui-dialog class="selection-insights-dialog" x-variant="{{::variant}}">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title\n\t\t\tq-translation="SelectionInsights.SummarySelection.HelpTitle"\n\t\t></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="q-modal-loading">\n\t\t<p q-translation="SelectionInsights.SummarySelection.HelpText"></p>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button\n\t\t\tclass="lui-button close-button"\n\t\t\tng-click="closeDialog();"\n\t\t\tq-translation="Common.Close"\n\t\t\ttid="selection-insights-dialog-help-button"\n\t\t></button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},861:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(862),n(234),n(95),n(220)],s=function(t,e,n,i){t.nativeComponent("qvSelectionInsightsCardContainer",{bindings:{showLoading:"<",insights:"=",openCard:"<",activeCard:"<",newMeasureChosen:"=",newSelection:"=",showFields:"<",loadingCards:"<",measure:"<",selectedInsight:"=",cardIsInsight:"<"},controller:["$timeout","qvSelectionInsightsService",function(t,e){var s=this;this.showLoading=true;this.insights=[];this.refreshActive=false;this.isRefreshing=false;this.hasInsights=true;this.itemString="";this.selectionContribution="";this.$onInit=function(){n.selectAll(".insight-bar-container svg").remove()};function a(){if(s.insights.length>0){var t=e.getInsightDetails(s.insights[0].dimension,s.app).selectedMeasure.selected.percentage/100;s.selectionContribution=s.getLocalizedPercentage(t)}}i.subscribe("selection/insights/updated",function(){t(function(){s.hasInsights=s.insights.length>0;a()})});i.subscribe("selection/insight/draw",function(e){t(function(){n.select("#insightCard"+e.index+" .insight-bar-container svg").remove();o(e.insight,e.index)})});i.subscribe("selection/insights/refresh",function(){s.isRefreshing=true});i.subscribe("selection/insights/refreshed",function(){s.isRefreshing=false;s.refreshActive=false});i.subscribe("selection/insights/new",function(){s.isRefreshing=false;s.refreshActive=false});i.subscribe("selection/insights/measure/cancel",function(){s.refreshActive=false});i.subscribe("selection/insights/fields/change",function(){s.refreshActive=true});i.subscribe("selection/insights/selection/changed",function(){s.refreshActive=true});i.subscribe("selection/insights/current-selection",function(t){r(e.getSelectionItems(t))});function r(t){if(t){s.itemString="";t.forEach(function(e,n){t.length-1===n?s.itemString+=e.name:s.itemString+=e.name+", "})}}this.getLocalizedPercentage=function(t){return e.getLocalizedPercentage(t)};this.getMeasurePercentage=function(t){var e=t.counts.excluded+t.counts.included;var n=t.counts.excluded<t.counts.included?t.counts.excluded:t.counts.included;var i=n/e*100;var a=Math.round(10*i)/100;a=s.getLocalizedPercentage(a/10);return a};function o(t,e){var i=n.select("#insightCard"+e+" .insight-bar-container").append("svg").attr("width",44).attr("height",125);var s=i.append("g");var a=t.counts.excluded/(t.counts.excluded+t.counts.included)*100/100*124;var r=t.counts.included/(t.counts.excluded+t.counts.included)*100/100*124;s.append("rect").style("fill","#A9A9A9").attr("width",12).attr("height",Math.ceil(a)).attr("y",Math.ceil(r)).attr("x",0);s.append("rect").style("fill","white").style("stroke-width",1).style("stroke","#E6E6E6").attr("width",12).attr("height",Math.ceil(r)).attr("y",0).attr("x",0);var o=[];var l=Math.ceil(r)+Math.ceil(a)/2;o.push([{x:12,y:l},{x:28,y:38}]);var c=n.svg.line().x(function(t){return t.x}).y(function(t){return t.y});var u=i.append("g").attr("class","lines");u.selectAll("path").data(o).enter().append("path").attr({d:c,"stroke-dasharray":"790 790","stroke-dashoffset":0}).style("stroke",function(t,e){return e>1?"white":"#A9A9A9"}).style("stroke-width","1").attr("opacity",1)}this.$onDestroy=function(){i.unsubscribe("selection/insights/updated");i.unsubscribe("selection/insights/fields/change");i.unsubscribe("selection/insights/measure/cancel");i.unsubscribe("selection/insights/selection/changed");i.unsubscribe("selection/insights/refresh");i.unsubscribe("selection/insights/new");i.unsubscribe("selection/insights/refreshed");i.unsubscribe("selection/insight/draw");i.unsubscribe("selection/insights/current-selection")}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},862:function(t,e){t.exports='<div tid="selection-insights-card-container" class="qv-selections-insights-cards-container" ng-show="!$ctrl.isRefreshing && $ctrl.hasInsights">\n\t<div ng-show="!$ctrl.showLoading" class="qv-selections-empty-cards">\n\t\t<div tid="current-selections-card" class="card selection-insights-card selection-insights-card--current-selection" ng-class="{\'active\': $ctrl.activeCard === -1 && !$ctrl.cardIsInsight}" ng-click="$ctrl.openCard(-1)" tabindex="0"> \n\t\t\t<div tid="no-longer-valid-overlay" class="no-longer-valid-overlay" ng-if="$ctrl.refreshActive">\n\t\t\t\t<div class="gray-overlay"></div>\n\t\t\t\t<span class="no-longer-valid-text" q-translation="SelectionInsights.Refresh.NoLongerValid"></span>\n\t\t\t</div>\n\t\t\t<div class="insight-card-content selection-insights-card--current-selection-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="insight-dimension-title">\n\t\t\t\t\t\t<div class="insight-dimension-name" title="{{$ctrl.itemString}}">{{$ctrl.itemString}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-card-body-your-selections" q-translation="SelectionInsights.CardSummaryYourSelections" q-title-translation="SelectionInsights.CardSummaryYourSelections"></div>\n\t\t\t\t\t<div class="insight-card-body-account" q-translation="SelectionInsights.CardSummaryAccountFor"></div>\n\t\t\t\t\t<div class="insight-measure-title">\n\t\t\t\t\t\t<div class="insight-current-selection-value" ng-show="$ctrl.selectionContribution">\n\t\t\t\t\t\t\t{{ $ctrl.selectionContribution }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="insight-measure-name" title="">\n\t\t\t\t\t\t\t{{ $ctrl.measure }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="selection-insights--other-fields" q-translation="SelectionInsights.FoundOtherFields"></div>\n\t\t<div tid="selection-insights-card" ng-repeat="insight in $ctrl.insights track by $index" id="insightCard{{ $index }}" class="card selection-insights-card insight-card" ng-class="{\'active\': $ctrl.activeCard === $index && $ctrl.cardIsInsight, \'disabled\': $ctrl.refreshActive || !insight.show, \'inactive\': insight.summaryNaN }"\n\t\t ng-click="$ctrl.openCard($index)" tabindex="0">\n\t\t\t<div tid="no-longer-valid-overlay" class="no-longer-valid-overlay" ng-if="$ctrl.refreshActive">\n\t\t\t\t<div class="gray-overlay"></div>\n\t\t\t\t<span class="no-longer-valid-text" q-translation="SelectionInsights.Refresh.NoLongerValid"></span>\n\t\t\t</div>\n\t\t\t<div class="insight-bar-container"></div>\n\t\t\t<div class="insight-card-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="insight-dimension-title">\n\t\t\t\t\t\t<div class="insight-dimension-name" title="{{ insight.dimension }}">\n\t\t\t\t\t\t\t{{ insight.dimension }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div tid="insight-counts-summary" class="insight-card-body-your-selections" title="{{insight.counts.summary}}">{{insight.counts.summary}}</div>\n\t\t\t\t\t<div class="insight-card-body-account" q-translation="SelectionInsights.CardSummaryAccountFor"></div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="!insight.summaryError && !insight.summaryNaN && insight.show">\n\t\t\t\t\t\t<div class="insight-measure-value">\n\t\t\t\t\t\t\t{{ insight.summaryString }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="insight-measure-name" title="{{ insight.measure }}">\n\t\t\t\t\t\t\t{{ insight.measure }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="insight.summaryError">\n\t\t\t\t\t\t<span class="timeout-error" q-translation="SelectionInsights.ErrorTimeout"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="!insight.show && !insight.summaryNaN && !insight.summaryError">\n\t\t\t\t\t\t<span tid="selection-insight-error-calculation" class="timeout-error" q-translation="SelectionInsights.ErrorCalculations"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="insight.summaryNaN">\n\t\t\t\t\t\t<span class="invalid-error" q-translation="SelectionInsights.InvalidMeasure"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.showLoading" class="qv-selections-empty-cards">\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id="cardLoading" class="card loading-card selection-insights-card inactive" ng-if="$ctrl.loadingCards">\n\t\t\t<div class="insight-bar-container">\n\t\t\t\t<div class="loading-line bar"></div>\n\t\t\t</div>\n\t\t\t<div class="insight-card-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="loading-line title"></div>\n\t\t\t\t\t<div class="loading-line count"></div>\n\t\t\t\t\t<div class="loading-line contribution"></div>\n\t\t\t\t\t<div class="measure-container">\n\t\t\t\t\t\t<div class="loading-line percent"></div>\n\t\t\t\t\t\t<div class="loading-line measure"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\x3c!-- LOADING --\x3e\n<div class="qv-selections-insights-loading" ng-if="$ctrl.isRefreshing">\n\t<div class="spinner-container">\n\t\t<qv-spinner show="$ctrl.isRefreshing" center-in-parent="true"></qv-spinner>\n\t</div>\n\t<div class="loading-message" q-translation="SelectionInsights.Loading"></div>\n</div>\n\n\x3c!-- NO INSIGHTS FOUND --\x3e\n<div class="qv-selections-no-insights" ng-show="!$ctrl.isRefreshing && !$ctrl.hasInsights">\n\t<div class="no-insights-icon"></div>\n\t<p class="qv-selections-insights--p" q-translation="ExploreSelections.NoInsightsWithSelection.Paragraph1"></p>\n\t<div ng-if="!$ctrl.showFields" class="select-fields" q-translation="ExploreSelections.NoInsightsWithSelection.Paragraph3"></div>\n</div>'},863:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(864),n(284),n(95),n(91),n(234),n(103),n(93),n(865),n(220)],s=function(t,e,n,i,s,a,r,o){t.nativeComponent("qvSelectionInsightsDetails",{bindings:{showInsightDetails:"<",selectedInsight:"<",listbox:"<",layout:"<",cardIsInsight:"<",backToSelections:"&",showing:"="},controller:["$timeout","qvSelectionInsightsService",function(t,e){var l=this;this.detailsTitle="";this.measure="";this.selectionHelp="";this.refreshActive=false;this.selectionInsightsMeasureBarTitle="";this.hasLockedSelections=false;this.selectionsBarTotal="";this.options={isReadonly:true,isPopover:false,selections:false,showSearch:true};this.showExcludedValues=false;this.celloptions={selections:false};l.selectionInsightsMeasureBarTitle=function(){if(l.selectedInsight&&l.selectedInsight.measureAggregation)return s.get("SelectionInsights.MeasureBarTitle",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure])};l.selectionsBarTotal=function(){if(l.selectedInsight&&l.selectedInsight.selectedMeasure.total)return s.get("SelectionInsights.SelectionsBarTotal",[l.selectedInsight.selectedMeasure.total])};l.countBarTotal=function(){if(l.selectedInsight&&l.selectedInsight.counts.excluded&&l.selectedInsight.counts.included)return s.get("SelectionInsights.CountBarTotal",[l.selectedInsight.counts.excluded+l.selectedInsight.counts.included])};i.subscribe("selection/insights/details/negative",function(t){l.showExcludedValues=false;l.measure=t.measure;l.detailsTitle=s.get("SelectionInsights.DimensionContributionsTitle",["<strong>"+t.dimension+"</strong>","<strong>"+t.measure+"</strong>"]);l.selectionHelp=s.get("SelectionInsights.SelectionHelp","<strong>"+t.dimension+"</strong>");c(t)});i.subscribe("selection/insights/details/updated",function(t){l.showExcludedValues=false;l.measure=t.measure;l.hasLockedSelections=e.isHasLockedSelections(l.layout);l.detailsTitle=s.get("SelectionInsights.DimensionContributionsTitle",["<strong>"+t.dimension+"</strong>","<strong>"+t.measure+"</strong>"]);l.selectionHelp=s.get(l.hasLockedSelections?"SelectionInsights.SelectionHelpWithLockedSelections":"SelectionInsights.SelectionHelp","<strong>"+t.dimension+"</strong>");d()});i.subscribe("selection/insights/measure/cancel",function(){l.refreshActive=false});i.subscribe("selection/insights/fields/change",function(){l.refreshActive=true});i.subscribe("selection/insights/updated",function(){l.refreshActive=false});function c(t){a.selectAll(".bars-container svg").remove();var e=[{name:"excluded",value:t.counts.excluded,label:t.counts.excluded},{name:"included",value:t.counts.included,label:t.counts.included}];u(e,"value");var n=[{name:"excluded",value:t.excludedMeasure.qNumber,label:t.measureBreakdown.excluded.num},{name:"included",value:t.includedMeasure.qNumber,label:t.measureBreakdown.included.num}];u(n,"measure")}function u(t,e){var n=431;var i=120;var s=10;var r="";var o=45;var l=30;r="value"==e?" .val-dist":" .measure-dist";var c=a.select(".negative-chart"+r).append("svg").attr("width",i+o).attr("height",n+o);var u=c.append("g").attr("transform","translate("+s/2+",1)");var d=a.scale.ordinal().rangeRoundBands([0,i]);var p=a.scale.linear().range([n,0]);d.domain(t.map(function(t){return t.name}));"value"==e?p.domain([0,a.max(t,function(t){return t.value})]):p.domain(a.extent(t,function(t){return t.value}));var h=u.append("defs");h.append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",5);if("value"==e){u.selectAll("bar").data(t).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return p(t.value)}).attr("height",function(t){return n-p(t.value)}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);u.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"value"==e?"excluded"==t.name?"#A7A7A7":"#FFFFFF":"excluded"==t.name?"blue":"#FFFFFF"}).style("stroke",function(t){return"excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)"}).attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return t.value>0?p(t.value):p(0)}).attr("height",function(t){return"value"==e?n-p(t.value):Math.abs(p(t.value)-p(0))}).attr("rx",3).attr("ry",3);u.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"excluded"==t.name?"#A7A7A7":"#FFFFFF"}).attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",n-3).attr("height",3);var f=c.append("g").attr("class","barLabels").attr("transform","translate("+s/2+",0)");t.forEach(function(t,e){u.append("line").style("stroke","excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(t.name)).attr("y1",n).attr("x2",d(t.name)).attr("y2",n-3);e>0&&u.append("line").style("stroke","excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(t.name)+60).attr("y1",n).attr("x2",d(t.name)+60).attr("y2",n-3);var i=f.append("g");i.append("rect").attr("x",function(){return d(t.name)}).attr("width",d.rangeBand()).attr("height",2).attr("y",function(){return p(t.value)}).attr("opacity",0);i.append("text").attr("x",d(t.name)+l).attr("y",function(){return n-p(t.value)>n-l?p(t.value)+30:p(t.value)-10}).attr("text-anchor","middle").attr("class","grouped-bar-value-label").text(t.label).attr("fill",function(){var e="#404040";"excluded"==t.name&&n-p(t.value)>n-l&&(e="white");return e})})}else{h.append("pattern").attr("id","diagonalStripes").attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).attr("patternTransform","rotate(45)").append("rect").attr("width","2").attr("height","8").attr("fill","#4842b5");u.selectAll("bar").data(t).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return t.value>0?p(t.value):p(0)}).attr("height",function(t){return Math.abs(p(t.value)-p(0))}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);u.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"excluded"==t.name?"#655DC6":"#FFFFFF"}).style("stroke",function(t){return"excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)"}).attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return t.value>0?p(t.value):p(0)+1}).attr("height",function(t){return Math.abs(p(t.value)-p(0))}).attr("rx",3).attr("ry",3);u.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"excluded"==t.name?"#655DC6":"#FFFFFF"}).attr("x",function(t){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(t){return t.value>0?p(t.value)-3:p(0)+1}).attr("height",2);var g=c.append("g").attr("class","barLabels").attr("transform","translate("+s/2+",0)");t.forEach(function(t,e){u.append("line").style("stroke","excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(t.name)).attr("y1",function(){return t.value>0?p(t.value):p(0)}).attr("x2",d(t.name)).attr("y2",function(){return t.value>0?p(t.value)-3:p(0)+3});e>0&&u.append("line").style("stroke","excluded"==t.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(t.name)+60).attr("y1",function(){return t.value>0?p(t.value):p(0)}).attr("x2",d(t.name)+60).attr("y2",function(){return t.value>0?p(t.value)-3:p(0)+3});"excluded"==t.name&&u.append("rect").attr("x",function(){return d(t.name)}).attr("width",d.rangeBand()).attr("y",function(){return t.value>0?p(t.value):p(0)}).attr("height",function(){return Math.abs(p(t.value)-p(0))}).attr("stroke","#504A9E").attr("rx",3).attr("ry",3).attr("fill","url(#diagonalStripes)");var n=g.append("g");n.append("rect").attr("x",function(){return d(t.name)}).attr("width",d.rangeBand()).attr("height",2).attr("y",function(){return t.value>0?p(t.value):p(0)}).attr("opacity",0);n.append("text").attr("x",d(t.name)+l).attr("y",function(){return t.value>0?p(t.value)+20:Math.abs(p(t.value)-p(0))<l?Math.abs(p(t.value)-p(0))+p(0)+20:Math.abs(p(t.value)-p(0))+p(0)-10}).attr("text-anchor","middle").attr("class","grouped-bar-label").text(t.label).attr("fill",function(){var e="#404040";"excluded"==t.name&&(e=Math.abs(p(t.value)-p(0))<l?"#655DC6":"#FFFFFF");return e})})}c.append("g").attr("class","x axis").append("line").attr("y1",p(0)).attr("y2",p(0)).attr("x2",i+s).attr("stroke","#404040").attr("stroke-width","3");var v=c.append("text").attr("x",i+2*s).attr("y",p(0)-28).attr("text-anchor","left").style("font-size","22px").attr("fill","#B3B3B3");v.append("tspan").attr("dx",0).attr("dy",4).text("+");v.append("tspan").attr("dx",-13).attr("dy",30).attr("fill","#404040").text("0");v.append("tspan").attr("dx",-10).attr("dy",30).text("-")}function d(){t(function(){var t=431;var e=213;a.selectAll(".connectors svg").remove();var n=a.select(".connectors .svg-container").append("svg").attr("width",e).attr("height",t);n.append("linearGradient").attr("id","area-gradient").attr("x1",0).attr("y1",0).attr("x2",5).attr("y2",0).selectAll("stop").data([{offset:"0%",color:"#A7A7A7"},{offset:"20%",color:"white"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color});var i=l.getPercentage("excluded")/100*t;var s=l.selectedInsight.measureBreakdown.excluded.percentage/100*t;var r=[{x:0,y:t-i},{x:e,y:t-s}];var o=[{x:0,y:i},{x:e,y:s}];var c=a.scale.linear().domain([0,a.max(o,function(t){return t.x})]).range([0,e]);var u=a.scale.linear().domain([0,t]).range([t,0]);var d=a.svg.area().x(function(t){return c(t.x)}).y0(t).y1(function(t){return u(t.y)});var p=a.svg.line().x(function(t){return t.x}).y(function(t){return t.y});var h=[];h.push(r);var f=n.append("g").attr("class","lines");f.selectAll("path").data(h).enter().append("path").attr({d:p,"stroke-dasharray":"3, 3","stroke-dashoffset":0}).style("stroke","#BEBEBE").style("stroke-width","1").attr("opacity",1);n.append("path").datum(o).attr("class","area").attr("d",d)})}this.getLocalizedPercentage=function(t){return e.getLocalizedPercentage(t)};this.getPercentageLocalized=function(t){if(l.selectedInsight){var e=l.selectedInsight.counts.excluded+l.selectedInsight.counts.included;return l.getLocalizedPercentage(l.selectedInsight.counts[t]/e)}return 0};this.getPercentage=function(t){if(l.selectedInsight){var e=l.selectedInsight.counts.excluded+l.selectedInsight.counts.included;return l.selectedInsight.counts[t]/e*100}return 0};this.showTable=function(t){l.showing={table:t,excluded:true};e.getTableVis(l.selectedInsight,true).then(function(t){l.selectedInsight.table=t})};this.toggleShowTableExcluded=function(t){l.showing={table:true,excluded:t};e.getTableVis(l.selectedInsight,t).then(function(t){l.selectedInsight.table=t})};this.selectExcluded=function(){var t=l.selectedInsight.dimension;var e=this.selectedInsight.dimensionId;l.showing={table:false,excluded:false};var s=l.layout.qSelectionObject.qSelections;if(void 0!==e)return o.getApp().then(function(t){t.getDimension(e).then(function(e){e.getDimension().then(function(e){var i=e.qFieldDefs[0].replace("=","");t.getField(i).then(function(t){return t.selectExcluded().then(function(){s.length>0&&s.forEach(function(t){n.currApp().field(t.qField).clear()})})})})})});n.currApp().field(t).selectExcluded().then(function(){s.length>0&&s.forEach(function(t){n.currApp().field(t.qField).clear()})});i.publish("selection/insights/close");r.trackEvent(r.customEvents.SELECT_POSSIBLE_CLICKED,{type:"clicked"})};this.selectPossible=function(){var t=l.selectedInsight.dimension;var e=this.selectedInsight.dimensionId;l.showing={table:false,excluded:false};var s=l.layout.qSelectionObject.qSelections;if(void 0!==e)return o.getApp().then(function(t){t.getDimension(e).then(function(e){e.getDimension().then(function(e){var i=e.qFieldDefs[0].replace("=","");t.getField(i).then(function(t){return t.selectPossible().then(function(){s.length>0&&s.forEach(function(t){n.currApp().field(t.qField).clear()})})})})})});n.currApp().field(t).selectPossible().then(function(){s.length>0&&s.forEach(function(t){n.currApp().field(t.qField).clear()})});i.publish("selection/insights/close");r.trackEvent(r.customEvents.SELECT_POSSIBLE_CLICKED,{type:"clicked"})};this.isLabelContained=function(t){var e=427;var n=55;var i=t/100*e;return n<i};this.isLabelSmall=function(t){var e=427;var n=65;var i=t/100*e;return n<i};this.getNegativeMeasureText=function(){return s.get("SelectionInsights.MeasureNegative",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension])};this.getNegativeMeasurePossible=function(){return s.get("SelectionInsights.MeasureNegativePossible",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension,"<span>"+l.selectedInsight.measureBreakdown.included.num+"</span>"])};this.getNegativeMeasureExcluded=function(){return s.get("SelectionInsights.MeasureNegativeExcluded",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension,"<span>"+l.selectedInsight.measureBreakdown.excluded.num+"</span>"])};this.$onDestroy=function(){i.unsubscribe("selection/insights/details/updated");i.unsubscribe("selection/insights/measure/cancel");i.unsubscribe("selection/insights/updated");i.unsubscribe("selection/insights/fields/change");i.unsubscribe("selection/insights/details/negative")}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},864:function(t,e){t.exports='<div class="qv-selections-insights-details" ng-show="$ctrl.showInsightDetails">\n\t<div class="main-details-wrapper" ng-class="{\'disabled\': $ctrl.refreshActive}">\n\t\t<div ng-if="$ctrl.refreshActive" class="gray-overlay"></div>\n\t\t<div class="current-selections-container" ng-show="!$ctrl.cardIsInsight">\n\t\t\t<div class="current-selections-container-inner">\n\t\t\t\t<qv-selection-insights-current selected-insight="$ctrl.selectedInsight" back-to-selections="$ctrl.backToSelections()"></qv-selection-insights-current>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="details-container" ng-show="$ctrl.cardIsInsight">\n\t\t\t<div class="details-container-inner">\n\t\t\t\t<div class="closeBtn">\n\t\t\t\t\t<button tid="back-to-selection-button" class="lui-button" ng-click="$ctrl.backToSelections()" q-translation="SelectionInsights.BackToSelections">\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="details-body">\n\t\t\t\t\t<div class="title details-title">\n\t\t\t\t\t\t<span tid="insight-details-title" ng-bind-html="$ctrl.detailsTitle"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div tid="insight-details-summary" class="detail-summary" ng-bind-html="$ctrl.selectedInsight.summaryStringLong"></div>\n\t\t\t\t\t<div class="qv-titles-and-bars">\n\t\t\t\t\t\t<div class="bars-titles">\n\t\t\t\t\t\t\t<div class="title-container longer" q-title-translation="{{ $ctrl.selectedInsight.dimension }}">\n\t\t\t\t\t\t\t\t<div tid="insights-with-selection-title" class="title-longer">\n\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.dimension }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-bar-total" class="bar-total" q-translation="SelectionInsights.CountBarTotal, {{$ctrl.selectedInsight.counts.excluded + $ctrl.selectedInsight.counts.included}}" title="{{$ctrl.countBarTotal()}}"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="title-container">\n\t\t\t\t\t\t\t\t<div tid="insights-without-selection-title" class="title-longer" q-translation="SelectionInsights.MeasureBarTitle, {{$ctrl.selectedInsight.measureAggregation[0].toUpperCase() + $ctrl.selectedInsight.measureAggregation.slice(1)}}, {{$ctrl.selectedInsight.measure}}"\n\t\t\t\t\t\t\t\t\ttitle="{{$ctrl.selectionInsightsMeasureBarTitle()}}"></div>\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-bar-total" class="bar-total" q-translation="SelectionInsights.SelectionsBarTotal, {{$ctrl.selectedInsight.selectedMeasure.total}}" title="{{$ctrl.selectionsBarTotal()}}"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container negative-chart" ng-show="$ctrl.selectedInsight.isMeasureNegative && !$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="val-dist">\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="legend-dist">\n\t\t\t\t\t\t\t\t<div class="possible-legend">\n\t\t\t\t\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t\t\t\t\t<div class="white-square"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="legend-label" tid="possible-chart-legend" q-translation="SelectionInsights.Possible" q-title-translation="{{SelectionInsights.Possible}}"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="excluded-legend">\n\t\t\t\t\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t\t\t\t\t<div class="gray-square"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="purple-square"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="legend-label" tid="excluded-chart-legend" q-translation="SelectionInsights.Excluded" q-title-translation="{{SelectionInsights.Excluded}}"></div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="measure-dist">\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container" ng-show="!$ctrl.selectedInsight.isMeasureNegative && !$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="value-bar" ng-class="{\'negative\': $ctrl.selectedInsight.isMeasureNegative}">\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-bar" class="bar included" ng-style="{height: ($ctrl.getPercentage(\'included\') /100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-measure-value" class="label" ng-style="{top: ($ctrl.getPercentage(\'included\')/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.getPercentage(\'included\')), \'small\': !$ctrl.isLabelSmall($ctrl.getPercentage(\'included\'))}">\n\t\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.counts.included }}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getPercentageLocalized(\n\t\t\t\t\t\t\t\t\t\t\t"included"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-bar" class="bar excluded" ng-style="{height: ($ctrl.getPercentage(\'excluded\') / 100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-measure-value" class="label" ng-style="{bottom: ($ctrl.getPercentage(\'excluded\')/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.getPercentage(\'excluded\')), \'small\': !$ctrl.isLabelSmall($ctrl.getPercentage(\'excluded\'))}">\n\t\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.counts.excluded }}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getPercentageLocalized(\n\t\t\t\t\t\t\t\t\t\t\t"excluded"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="connectors" ng-if="!$ctrl.selectedInsight.isMeasureNegative">\n\t\t\t\t\t\t\t\t<div class="svg-container">\n\t\t\t\t\t\t\t\t\t<svg width="215" height="429"></svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="possible-label" q-translation="SelectionInsights.PossibleValues"></div>\n\t\t\t\t\t\t\t\t<div class="excluded-label" q-translation="SelectionInsights.ExcludedValues"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="measure-bar excluded-insight" ng-if="!$ctrl.selectedInsight.isMeasureNegative">\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-bar" class="bar included" ng-style="{height: ($ctrl.selectedInsight.measureBreakdown.included.percentage/100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-measure-value" class="label" ng-style="{top: ($ctrl.selectedInsight.measureBreakdown.included.percentage/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.selectedInsight.measureBreakdown.included.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.measureBreakdown.included.percentage)}">\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight.measureBreakdown\n\t\t\t\t\t\t\t\t\t\t.included.num\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight\n\t\t\t\t\t\t\t\t\t\t\t.measureBreakdown.included\n\t\t\t\t\t\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-bar" class="bar excluded" ng-style="{height: ($ctrl.selectedInsight.measureBreakdown.excluded.percentage/100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-measure-value" class="label" ng-style="{bottom: ($ctrl.selectedInsight.measureBreakdown.excluded.percentage/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.selectedInsight.measureBreakdown.excluded.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.measureBreakdown.excluded.percentage)}">\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight.measureBreakdown\n\t\t\t\t\t\t\t\t\t\t.excluded.num\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight\n\t\t\t\t\t\t\t\t\t\t\t.measureBreakdown.excluded\n\t\t\t\t\t\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container" style="display: block" ng-show="$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="table-container" ng-class="{\'possible\': !$ctrl.showing.excluded}">\n\t\t\t\t\t\t\t\t<qv-object tabindex="-1" class="cell-content" model="$ctrl.selectedInsight.table" options="$ctrl.celloptions"></qv-object>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="toggle-values" ng-class="{\'show-table\': !$ctrl.showing.table}">\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="!$ctrl.showing.table" class="lui-button show-table--button" ng-click="$ctrl.showTable(true)">\n\t\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--table"></span><span class="lui-button__text" q-translation="SelectionInsights.ShowValues"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="!$ctrl.showing.excluded && $ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.toggleShowTableExcluded(true)">\n\t\t\t\t\t\t\t\t<span class="lui-button__text" q-translation="SelectionInsights.ViewExcluded"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="$ctrl.showing.excluded && $ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.toggleShowTableExcluded(false)">\n\t\t\t\t\t\t\t\t<span class="lui-button__text" q-translation="SelectionInsights.ViewPossible"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="$ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.showTable(false)">\n\t\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--back"></span><span class="lui-button__text" q-translation="SelectionInsights.ShowVisualization"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="insight-summary-footer">\n\t\t\t\t<div class="help-text" ng-bind-html="$ctrl.selectionHelp"></div>\n\t\t\t\t<div class="btns" ng-if="!$ctrl.hasLockedSelections">\n\t\t\t\t\t<button tid="select-possible-button" class="lui-button selection-btn" ng-click="$ctrl.selectPossible()" q-translation="Selections.Possible"></button>\n\t\t\t\t\t<button tid="select-excluded-button" class="lui-button selection-btn" ng-click="$ctrl.selectExcluded()" q-translation="Selections.Excluded"></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},865:function(t,e,n){"use strict";var i,s;function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}!(i=[n(48),n(96),n(866),n(91),n(95),n(234),n(220)],s=function(t,e,n,i,s,r){t.nativeComponent("qvSelectionInsightsCurrent",{bindings:{selectedInsight:"<",backToSelections:"&"},controller:["$scope","qvSelectionInsightsService","qvChartTooltipService","$timeout",function(t,n,o,l){var c=this,u,d=false;this.items=[];this.app=null;this.model=null;this.selectionsTitle="";this.measure="";this.selectionsCaption="";this.selectionsBarTotal="";s.subscribe("selection/insights/current-selection",function(t){c.items=n.getSelectionItems(t)});s.subscribe("selection/insights/current/open",function(t){var e={measure:t.insight.measure,aggr:t.insight.measureAggregation,dimension:t.insight.dimension,contribution:t.insight.selectedMeasure.selected.percentage.toFixed(1)};var n=t.insight.isSelectionNegative?t.insight.selectedMeasure.selected.num:t.insight.selectedMeasure.selected.percentage.toFixed(1)+"%";c.measure=e.measure;c.selectionsTitle=i.get("SelectionInsights.SelectionsContributionsTitle","<strong>"+e.measure.substring(0,40)+"</strong>");c.selectionsCaption=i.get("SelectionInsights.SelectionContributionCaption",["<span>"+e.measure.substring(0,40)+"</span>","<span>"+n+"</span>","<span>"+(e.aggr[0].toUpperCase()+e.aggr.slice(1))+"</span>"]);r.selectAll(".negative-chart.select-measure-dist svg").remove();if(t.insight.isSelectionNegative){var s=[{name:"selected",value:t.insight.selectedMeasure.selected.qNum,label:t.insight.selectedMeasure.selected.num},{name:"excluded",value:t.insight.selectedMeasure.excluded.qNum,label:t.insight.selectedMeasure.excluded.num}];p(s)}});function p(t){var e=431;var n=120;var i=10;var s=".negative-chart.select-measure-dist";var a=45;var o=30;var l=r.select(".negative-chart"+s).append("svg").attr("width",n+a).attr("height",e+a);var c=l.append("g").attr("transform","translate("+i/2+",1)");var u=r.scale.ordinal().rangeRoundBands([0,n]);var d=r.scale.linear().range([e,0]);u.domain(t.map(function(t){return t.name}));d.domain(r.extent(t,function(t){return t.value}));var p=c.append("defs");p.append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",5);p.append("pattern").attr("id","diagonalStripes").attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).attr("patternTransform","rotate(45)").append("rect").attr("width","2").attr("height","8").attr("fill","#4dc753");c.selectAll("bar").data(t).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(t){return u(t.name)}).attr("width",u.rangeBand()).attr("y",function(t){return t.value>0?d(t.value):d(0)}).attr("height",function(t){return Math.abs(d(t.value)-d(0))}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);c.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"selected"==t.name?"#6cd475":"#D8D8D8"}).style("stroke",function(t){return"selected"==t.name?"#37B342":"#959595"}).attr("x",function(t){return u(t.name)}).attr("width",u.rangeBand()).attr("y",function(t){return t.value>0?d(t.value):d(0)+1}).attr("height",function(t){return Math.abs(d(t.value)-d(0))}).attr("rx",3).attr("ry",3);c.selectAll("bar").data(t).enter().append("rect").style("fill",function(t){return"selected"==t.name?"#6cd475":"#D8D8D8"}).attr("x",function(t){return u(t.name)}).attr("width",u.rangeBand()).attr("y",function(t){return t.value>0?d(t.value)-3:d(0)+1}).attr("height",2);var h=l.append("g").attr("class","barLabels").attr("transform","translate("+i/2+",0)");t.forEach(function(t,e){c.append("line").style("stroke","selected"==t.name?"#37B342":"#959595").attr("x1",u(t.name)).attr("y1",function(){return t.value>0?d(t.value):d(0)}).attr("x2",u(t.name)).attr("y2",function(){return t.value>0?d(t.value)-3:d(0)+3});e>0&&c.append("line").style("stroke","selected"==t.name?"#37B342":"#959595").attr("x1",u(t.name)+60).attr("y1",function(){return t.value>0?d(t.value):d(0)}).attr("x2",u(t.name)+60).attr("y2",function(){return t.value>0?d(t.value)-3:d(0)+3});"selected"==t.name&&c.append("rect").attr("x",function(){return u(t.name)}).attr("width",u.rangeBand()).attr("y",function(){return t.value>0?d(t.value):d(0)}).attr("height",function(){return Math.abs(d(t.value)-d(0))}).attr("stroke","#504A9E").attr("stroke-width","0").attr("rx",3).attr("ry",3).attr("fill","url(#diagonalStripes)");var n=h.append("g");n.append("rect").attr("x",function(){return u(t.name)}).attr("width",u.rangeBand()).attr("height",2).attr("y",function(){return t.value>0?d(t.value):d(0)}).attr("opacity",0);n.append("text").attr("x",u(t.name)+o).attr("y",function(){return t.value>0?d(t.value)+20:Math.abs(d(t.value)-d(0))<o?Math.abs(d(t.value)-d(0))+d(0)+20:Math.abs(d(t.value)-d(0))+d(0)-10}).attr("text-anchor","middle").attr("class","grouped-bar-label").text(t.label).attr("fill",function(){var e="#414141";"selected"==t.name&&(e=Math.abs(d(t.value)-d(0))<o?"#2F9938":"#FFFFFF");return e})});l.append("g").attr("class","x axis").append("line").attr("y1",d(0)).attr("y2",d(0)).attr("x2",n+i).attr("stroke","#404040").attr("stroke-width","3");var f=l.append("text").attr("x",n+2*i).attr("y",d(0)-28).attr("text-anchor","left").style("font-size","22px").attr("fill","#B3B3B3");f.append("tspan").attr("dx",0).attr("dy",4).text("+");f.append("tspan").attr("dx",-13).attr("dy",30).attr("fill","#404040").text("0");f.append("tspan").attr("dx",-10).attr("dy",30).text("-")}c.selectionsBarTotal=function(){if(c.selectedInsight&&c.selectedInsight.selectedMeasure.total)return i.get("SelectionInsights.SelectionsBarTotal",[c.selectedInsight.selectedMeasure.total])};this.getLocalizedPercentage=function(t){return n.getLocalizedPercentage(t)};this.getSeparatorPos=function(){if(void 0!==c.items&&null!==c.selectedInsight&&void 0!==c.selectedInsight){var t=56;var e=427;if(c.selectedInsight.isSelectionNegative){var n=c.selectedInsight.selectedMeasure.selected.qNum;var i=c.selectedInsight.selectedMeasure.excluded.qNum;var s=0;e=431;var a=55;s=n<0?e-Math.abs(n)/2/((Math.abs(n)+i)/e):n/2/((Math.abs(i)+n)/e);return s+a}var r=38;var o=10;var l=(c.items.length*r+(c.items.length-1)*o)/2;var u=c.selectedInsight.selectedMeasure.selected.percentage/100*e/2;return t+Math.min(l,u)}};this.isLabelContained=function(t){var e=427;var n=55;var i=t/100*e;return n<i};this.getLabelFontSize=function(t){var e=427;var n=65;var i=t/100*e;return n<i?"24px":"36px"};this.getNegativeMeasureText=function(){return i.get("SelectionInsights.SelectionNegative",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure])};function h(t){var e=t.qStateCounts;var n="";"object"===a(e)&&(n=" ("+(e.qSelected+e.qSelectedExcluded+e.qLocked+e.qLockedExcluded)+"/"+t.qTotal+")");return n}t.openTooltip=function(n,i){if(d||e.utils.touch)return;t.cancelTooltip();u=l(function(){d=true;var t=i.translation;var e=h(i);o.open({content:[{header:(i.qReadableName||i.qField)+e,rows:[{content:t}]}],position:{x:n.clientX,y:n.clientY},alwaysOnTop:true,direction:"bottom",template:"current-selections-tooltip-template.ng.html"})},500)};t.closeTooltip=function(){d=false;t.cancelTooltip();o.close()};t.cancelTooltip=function(){l.cancel(u)};this.getNegativeMeasurePossible=function(){return i.get("SelectionInsights.SelectionNegativePossible",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure,"<span>"+c.selectedInsight.measureBreakdown.included.num+"</span>"])};this.getNegativeMeasureExcluded=function(){return i.get("SelectionInsights.SelectionNegativeExcluded",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure,"<span>"+c.selectedInsight.measureBreakdown.excluded.num+"</span>"])};this.isLabelSmall=function(t){var e=427;var n=65;var i=t/100*e;return n<i};this.getVerticalHeight=function(){if(void 0!==c.items&&null!==c.selectedInsight&&void 0!==c.selectedInsight)return c.selectedInsight.isSelectionNegative?431:40*c.items.length+11*(c.items.length-1)};this.$onDestroy=function(){s.unsubscribe("selection/insights/current-selection");s.unsubscribe("selection/insights/current/open")}}],template:n})}.apply(e,i),void 0!==s&&(t.exports=s))},866:function(t,e){t.exports='<div class="closeBtn">\n\t<button tid="back-to-selection-button" class="lui-button" ng-click="$ctrl.backToSelections()" q-translation="SelectionInsights.BackToSelections"></button>\n</div>\n<div class="details-body">\n\t<div class="title current-selection-title">\n\t\t<span tid="selection-details-title" ng-bind-html="$ctrl.selectionsTitle"></span>\n\t</div>\n\t<div class="current-selection-caption">\n\t\t<div tid="selections-caption" ng-bind-html="$ctrl.selectionsCaption"></div>\n\t</div>\n\t<div class="current-selection-details">\n\t\t<div class="field-list">\n\t\t\t<div tid="selections-fields-title" class="fields-title" q-translation="SelectionInsights.YourSelections" q-title-translation="{{ SelectionInsights.YourSelections }}"></div>\n\t\t\t<div class="fields-items">\n\t\t\t\t<ul class="list" ng-show="$ctrl.items.length > 0">\n\t\t\t\t\t<li class="item" tid="selection-insight-details-user-selections" ng-class="{\'item-multi-state\': !item.isSingleState, \'multi-active\': multiPopoverFieldName && multiPopoverFieldName === item.qField}" ng-repeat="item in $ctrl.items track by item.qField" data-csid="{{ item.qField }}" tabindex="0"\n\t\t\t\t\t ng-keydown="handleKeyDown($event, item)" aria-label="{{ item.screenReaderLabel }}">\n\t\t\t\t\t\t<qv-current-selections-item ng-if="item.isSingleState" item="item"></qv-current-selections-item>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="separator" ng-class="{\'negative\': $ctrl.selectedInsight.isSelectionNegative}">\n\t\t\t<div class="legend-dist" ng-if="$ctrl.selectedInsight.isSelectionNegative">\n\t\t\t\t<div class="selected-legend">\n\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t<div class="green-square"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="legend-label" tid="selected-chart-legend" q-translation="SelectionInsights.Selected" q-title-translation="{{ SelectionInsights.Selected }}"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="excluded-legend">\n\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t<div class="gray-square"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="legend-label" tid="excluded-chart-legend" q-translation="SelectionInsights.Excluded" q-title-translation="{{ SelectionInsights.Excluded }}"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="vertical" ng-style="{height: $ctrl.getVerticalHeight() + \'px\'}"></div>\n\t\t\t<div class="horizontal" ng-style="{\'margin-top\': $ctrl.getSeparatorPos() + \'px\'}"></div>\n\t\t</div>\n\t\t<div class="chart">\n\t\t\t<div tid="selections-bar-title" class="bar-title" q-translation="SelectionInsights.SelectionsBarTitle, {{\n\t\t\t\t\t$ctrl.measure\n\t\t\t\t}}" q-translation-title="SelectionInsights.SelectionsBarTitle, {{\n\t\t\t\t\t$ctrl.measure\n\t\t\t\t}}"></div>\n\t\t\t<div tid="selections-bar-total" class="bar-total" title="{{ $ctrl.selectionsBarTotal() }}">\n\t\t\t\t{{ $ctrl.selectionsBarTotal() }}\n\t\t\t</div>\n\t\t\t<div class="bar selected" ng-if="!$ctrl.selectedInsight.isSelectionNegative" ng-style="{height: ($ctrl.selectedInsight.selectedMeasure.selected.percentage/100) * 427 + \'px\'}">\n\t\t\t\t<div tid="selected-measure-number" class="label" ng-style="{top: ($ctrl.selectedInsight.selectedMeasure.selected.percentage/100) * 427 + 5 + \'px\'}" ng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.selectedInsight.selectedMeasure.selected.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.selectedMeasure.selected.percentage)}">\n\t\t\t\t\t{{ $ctrl.selectedInsight.selectedMeasure.selected.num }}\n\t\t\t\t\t<div tid="selected-measure-percentage" class="percentage">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t$ctrl.selectedInsight.selectedMeasure.selected\n\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="bar excluded" ng-if="!$ctrl.selectedInsight.isSelectionNegative" ng-style="{height: ($ctrl.selectedInsight.selectedMeasure.excluded.percentage/100) * 427 + \'px\'}">\n\t\t\t\t<div tid="excluded-measure-number" class="label" ng-style="{bottom: ($ctrl.selectedInsight.selectedMeasure.excluded.percentage/100) * 427 + 5 + \'px\'}" ng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.selectedInsight.selectedMeasure.excluded.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.selectedMeasure.excluded.percentage)}">\n\t\t\t\t\t{{ $ctrl.selectedInsight.selectedMeasure.excluded.num }}\n\t\t\t\t\t<div tid="excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t$ctrl.selectedInsight.selectedMeasure.excluded\n\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="negative-chart select-measure-dist" ng-show="$ctrl.selectedInsight.isSelectionNegative"></div>\n\t\t</div>\n\t</div>\n</div>'},867:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(868),n(95),n(869),n(147),n(106),n(103),n(870)],s=function(t,e,n,i,s,a,r){t.nativeComponent("qvSelectionInsightsSummary",{bindings:{showLoading:"<",hasSelection:"<",measure:"=",newMeasureChosen:"=",newSelection:"=",showFields:"<",selectionInsightsState:"=",states:"=",measureError:"="},controller:["$scope","$timeout","luiPopover","qvSelectionInsightsService","qvSelectionInsightsSearchService",function(t,e,o,l,c){var u=this;this.showLoading=true;var d=[];this.fieldList=[];this.showFieldsChanged=false;this.currentMeasure=u.measure;function p(){e(function(){var t=document.getElementsByClassName("ai-change-field-input");t[0].focus()},100)}this.showChangeField=function(t){var e=["$scope",function(t){function e(e){var n=t.highlight;var i=c.getMatchingFields(e,n);t.measures=i.filter(function(t){return!t.masterItemMeasures});t.masterMeasures=i.filter(function(t){return t.masterItemMeasures})}function n(n){t.highlight=n;e(u.fieldList)}t.filterFields=n;t.onSelectMeasure=b;t.navigate=y;e(u.fieldList)}];h(i,e,t.currentTarget,"bottom",f)};function h(t,e,n,i,s){var a={template:t,controller:e,dock:i,alignTo:n,showArrow:true,autoFocus:false};var r=o.show(a);d.push(r);r.closed.then(function(){"function"===typeof s&&s()});p()}function f(){d.forEach(function(t,e){t.close();d.splice(e,1)})}function g(){l.getMeasures(u.showFields).then(function(t){u.fieldList=t})}function v(){s.getList().then(function(e){t.masterMeasuresListModel=e});a(t,"masterMeasuresListModel",function(){g()})}v();this.refreshInsights=function(){n.publish("selection/insights/refresh");u.newMeasureChosen=false;u.newSelection=false;u.showFieldsChanged&&m();return l.getInsightDimensions(u.showFields,u.selectedMeasure).then(function(t){n.publish("selection/insights/new",t);u.currentMeasure=u.measure}).catch(function(t){n.publish("selection/insights/error",t.error)})};this.$onChanges=function(t){if(void 0!==t.showFields&&!t.showFields.isFirstChange()){u.showFieldsChanged=true;u.newMeasureChosen=false;n.publish("selection/insights/fields/change")}};function m(){l.getMeasures(u.showFields).then(function(t){u.showFieldsChanged=false;u.fieldList=t})}n.subscribe("selection/insights/show",function(){u.showFieldsChanged&&m()});function b(t){u.newMeasureChosen=true;u.newSelection=false;u.measureError=false;u.selectedMeasure=t;u.measure=t.qName;f();r.trackEvent(r.customEvents.NEW_MEASURE_CHOSEN,{type:"clicked"});u.refreshInsights()}function y(t){b(t)}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},868:function(t,e){t.exports='<div class="qv-selections-insights-cards-summary" ng-class="{\'empty\': $ctrl.showLoading}">\n\t<div ng-if="!$ctrl.showLoading">\n\t\t<div class="summary-text" ng-if="!$ctrl.newMeasureChosen && !$ctrl.newSelection && !$ctrl.showFieldsChanged">\n\t\t\t<span q-translation="SelectionInsights.SummarySelection"> </span>\n\t\t</div>\n\t\t<div class="measure-select">\n\t\t\t<div class="refresh-insights-new-selection" ng-if="!$ctrl.newMeasureChosen && ($ctrl.newSelection || $ctrl.showFieldsChanged) ">\n\t\t\t\t<p class="refresh-insights-paragraph" q-translation="SelectionInsights.Refresh.NewSelection"></p>\n\t\t\t\t<div class="refresh-insights--button-group">\n\t\t\t\t\t<button class="lui-button  lui-button--success refresh-insights--button onlyOne" q-translation="SelectionInsights.Refresh" ng-click="$ctrl.refreshInsights()"></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<h2 q-translation="Common.Measure"></h2>\n\t\t\t<p q-translation="SelectionInsights.CalculatedOn"></p>\n\t\t\t<button tid="ai-measure-picker" class="ai-measure-picker lui-button" id="ai-measure-picker" ng-click="$ctrl.showChangeField($event)" tabindex="0" ng-disabled="$ctrl.showFieldsChanged || $ctrl.newSelection">\n\t\t\t\t<span class="ai-measure-picker-text">{{ $ctrl.measure }}</span><span class="lui-icon lui-button__icon small lui-icon--small" ng-class="{\'lui-icon--arrow-down\' : !match.expanded, \'lui-icon--arrow-up\': match.expanded}"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="measure-error" ng-if="$ctrl.measureError" q-translation="SelectionInsights.ErrorNaN"></div>\n\t</div>\n</div>\n<div class="hr-div">\n\t<hr class="qv-selection-insights-hr" ng-if="$ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND" />\n</div>'},869:function(t,e){t.exports='<lui-popover class="ai-change-field-popover ai-popover">\n\t<object-add-typeahead>\n\t\t<lui-popover-header>\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input lui-input-group__input ai-change-field-input" type="text" autocomplete="off" ng-model="search.term" qva-focus="autoFocus" ng-change="filterFields(search.term)" maxlength="255" object-add-typeahead-input />\n\t\t\t</div>\n\t\t</lui-popover-header>\n\t\t<div class="lui-popover__body lui-nopad popover-body" object-add-typeahead-menu>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<div ng-if="masterMeasures.length > 0" class="object-add-popover-list-header" q-translation="Common.MasterMeasures"></div>\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in masterMeasures" ng-click="onSelectMeasure(field)" on-select="navigate(field)" object-add-typeahead-item="field">\n\t\t\t\t\t<span class="lui-list__text" qve-highlight text="{{ field.qName }}" query="highlight"></span>\n\t\t\t\t</li>\n\n\t\t\t\t<div ng-if="measures.length > 0" class="object-add-popover-list-header" q-translation="Common.Measures"></div>\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in measures" ng-click="onSelectMeasure(field)" on-select="navigate(field)" object-add-typeahead-item="field">\n\t\t\t\t\t<span class="lui-list__text" qve-highlight text="{{ field.qName }}" query="highlight"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\n\t\t\t<div class="no-hits" ng-if="fieldList.length === 0">\n\t\t\t\t<span><i q-translation="Toolbox.Search.Nohits" /></span>\n\t\t\t</div>\n\t\t</div>\n\t</object-add-typeahead>\n</lui-popover>'},870:function(t,e,n){"use strict";var i,s;!(i=[n(54),n(48),n(112)],s=function(t,e,n){e.service("qvSelectionInsightsSearchService",[function(){var e;function i(e,i){var s=[];var a;i?i=i?i.toLowerCase():"":i&&""!==i||(a=true);if(a)return e;s=t.uniq(e).filter(function(t){return n.librarySearchFn(t,i)});return n.localeOrderBy(s,function(t){return t.qName})}e={getMatchingFields:function t(e,n){return i(e,n)}};return e}])}.apply(e,i),void 0!==s&&(t.exports=s))},871:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(872),n(873),n(306)],s=function(t,e,n){t.directive("qvGlobalSearch",function(){return{restrict:"E",template:e,controller:["$scope","$document","$element","$window",n],require:["qvGlobalSearch"],scope:true,replace:true,link:function t(){}}});return"<qv-global-search></qv-global-search>"}.apply(e,i),void 0!==s&&(t.exports=s))},872:function(t,e){t.exports='<div>\n\t<div class="qv-global-search" ng-class="{ \'overlay\': displaySuggestions || displayResult.data || displayResult.visuals }" ng-style="{paddingTop: toolbarHeight}" qva-outside="onOutsideSearch($event)" tid="globalSearch">\n\t\t<div class="zoomed-chart" ng-class="{\'animate-expand \': animateZoomedChart, \'animate-shrink\': !animateZoomedChart}">\n\t\t\t<div class="close-btn" ng-if="zoomedChart" tid="smartsearch-zoomed-chart">\n\t\t\t\t<button class="lui-fade-button" ng-click="minimizeExpandedChart()" tid="smartSearchExitZoomedChart">\n\t\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--close lui-icon--large"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="chart" ng-if="zoomedChart">\n\t\t\t\t<qv-object tid="smartsearch-zoomed-chart-object" model="zoomedChart.model" options="zoomedChart.options"></qv-object>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<qv-global-search-input class="qv-global-search-input"></qv-global-search-input>\n\t\t<div class="qv-global-search-line" ng-if="!showMobileIndexProgressBar"></div>\n\t\t<qv-mobile-index-progress ng-if="isSmallDevice && query.length === 0 && isIndexClosedFeature"></qv-mobile-index-progress>\n\t\t<qv-global-search-history ng-if="isSearchHistoryFeature && searchInputFocused && query.length === 0"></qv-global-search-history>\n\t\t<div class="qv-global-search-dimmer" ng-if="query.length > 0 || forceShowDimmer" ng-style="dimmerStyles">\n\t\t\t<qv-global-search-result tid="globalSearch.ResultList"></qv-global-search-result>\n\t\t\t<div ng-show="scrollShow && !activity.show" class="scroll-affordance scroll-vertical"></div>\n\t\t</div>\n\t</div>\n\t<div class="qv-global-search-glass" ng-if="query.length > 0" qva-activate="close();"></div>\n</div>\n'},873:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(113),n(108),n(97),n(106),n(143),n(874),n(110),n(227),n(50),n(128),n(99),n(881),n(882),n(883),n(884),n(885),n(49),n(89),n(91),n(95),n(105),n(222),n(887),n(890),n(901),n(903),n(905),n(908),n(169),n(175)],s=function(t,e,n,i,s,a,r,o,l,c,u,d,p,h,f,g,v,m,b,y,S,I,x,w){function q(t,e,n,i){var s={qOffset:e,qCount:n,qGroupOptions:[],qGroupItemOptions:[]};if(t===f.data){s.qGroupOptions.push({qGroupType:"DatasetType",qOffset:0,qCount:-1});s.qGroupItemOptions.push({qGroupItemType:"Field",qOffset:0,qCount:i})}else if(t===f.visuals){s.qGroupOptions.push({qGroupType:"GenericObjectsType",qOffset:0,qCount:30});s.qGroupItemOptions.push({qGroupItemType:"GenericObject",qOffset:0,qCount:i})}return s}function C(t){var e={qContext:"CurrentSelections"};t&&(e.qCharEncoding="Utf16");return e}function P(t,e){t.dimmerStyles["max-height"]=e;t.dimmerStyles["height"]=e}function k(t){t.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice}function A(A,T,E,$){var M=e.getService("qvGlobalSearchDataService"),F=e.getService("$timeout"),O=e.getService("qvGlobalSelectionsService"),D=e.getService("qvGlobalSearchService"),N,L={search:{idCounter:0,requestState:h.idle,searchTerms:""},searchVisuals:{idCounter:0,requestState:h.idle,searchTerms:""},result:{requestState:h.idle},suggest:{idCounter:0,requestState:h.idle,suggestTerms:""}},R=function t(){F(function(){A.isSmallDevice=u.isSmallDevice;A.isSmallDevice&&(A.forceShowDimmer=false);k(A);B=H();G()})},_=function t(){A.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice;k(A);B=H();G()},G=function t(){P(A,T.find("body").height()-B)},H=function t(){return E.offset().top+E[0].offsetTop+E.find(".qv-global-search-input").outerHeight()},B=H(),j=E.parent().parent(),z=this;A.inClient=i.inClient();A.zoomedChart=false;A.focusState=new g(new v(g,this,A),g.Input);N=new o(E,A,this);A.forceShowDimmer=false;A.isSmallDevice=u.isSmallDevice;A.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice;A.showMobileIndexProgressBar=false;A.isObjectsFeature=n["SMARTSEARCH_OBJECTS"]&&A.inClient&&(A.isSmallDevice||A.options&&A.options.objectSearchIsOn);A.isSearchHistoryFeature=n["SEARCH_HISTORY"];A.isIndexClosedFeature=n["SMARTSEARCH_INDEX_CLOSE"];A.suggestedChartExpanded=null;I.subscribe(x.Events.PubSub.ExpandSmartSearchSuggestedChart,function(t){A.zoomedChart=t;A.animateZoomedChart=Boolean(t);A.suggestedChartExpanded=Boolean(t);t&&A.isSmallDevice&&w.resizeCharts($)});I.subscribe(x.Events.PubSub.RestoreSearchState,function(){if(A.suggestedChartExpanded){A.query=A.suggestedChartExpanded;z.setQueryFromHistory()}});A.minimizeExpandedChart=function(){A.suggestedChartExpanded=null;I.publish(x.Events.PubSub.ExpandSmartSearchSuggestedChart,null)};if(A.isSearchHistoryFeature){r.userId?A.userID=r.userId:A.userID="DESKTOP";A.searchInputFocused=false;A.activeHistoryIx=-1;A.historyPermission=false;A.searchHistory=m.initHistory(A)}u.ViewChanged.bind(R);u.OrientationChanged.bind(_);s.on("end",G);A.input="input goes here";A.result="result goes here";A.isSelectActiveInSmallDevice=false;A.$on("$destroy",function(){E.off("qv-outside");N.delete();u.ViewChanged.unbind(R);u.OrientationChanged.unbind(_);s.off("end",G);I.unsubscribe(x.Events.PubSub.ExpandSmartSearchSuggestedChart);I.unsubscribe(x.Events.PubSub.RestoreSearchState)});A.$on("updateForceShowDimmer",function(t,e){A.forceShowDimmer=e});A.$watch("throbber.show",function(t){t&&A.focusState.reset()});A.app.getCurrentSelectionObject().then(function(t){A.modelSelections=t});a(A,"modelSelections",function(t){var e=t.qSelectionObject.qSelections,n;n=e.reduce(function(t,e){return t+(true===e.qLocked)?1:0},0);A.currentSelections=e.length>0;A.allSelectionsLocked=e.length===n;A.isObjectsFeature&&z.searchVisuals(A.searchTerms);z.search(A.searchTerms)});A.$watch("app.isModal()",function(t){t&&F(function(){D.toggleGlobalSearch(A.app)})});A.$watch(O.isSelectActive.bind(null,A.app),function(t){A.isSelectActiveInSmallDevice=t&&A.isSmallDevice});A.$watch("query",function(t){D.setHaveQuery(A.app,!!t)});if(A.isIndexClosedFeature&&!A.isSmallDevice&&D.couldEngineBeIndexing(A.app)){A.forceShowDimmer=true;F(function(){A.$broadcast("toggleActivityIndicator",true)})}A.underlines=[];A.query="";A.searchTerms=[];A.searchTermGroups=[];A.matches=[];A.displayResult={data:false,visuals:false};A.activity={show:false};A.throbber={show:false};A.indexProgress={enabled:false,show:false,visible:false};A.indexDone={show:false,visible:false};A.activeSelectIx=-1;A.showMeMoreFocus=false;A.forcePartials=false;A.allSelectionsLocked=false;A.dimmerStyles={};A.error={show:false,message:"",description:""};A.paging={lastRowIx:0,totalRows:0};A.searchOutsideSelections=function(){z.searchOutsideSelections()};A.onShowMoreHits=function(t,e,n){t.stopPropagation();if(e.disableShowMore)return;P(A,E.find(".qv-global-search-dimmer").height());e.disableShowMore=true;e.mobileExpand=true;var i=q(f.data,n,1,e.qItemMatches.length+15);z.callSearch(A.searchTerms,i).then(function(t){M.showMore(t,e)}).finally(function(){e.disableShowMore=false})};A.getSearchTermGroup=function(t){return A.searchTermGroups.filter(function(e){return e.qSearchTermsMatched.length===t})};A.close=function(){z.closeSearch()};E.on("qv-outside",V);function V(e){var n=t(e.target);if(1===n.closest(".qv-selections-pager").length||1===n.closest(".transparent-overlay-scroll").length)return;z.closeSearch()}A.suggestions=[];A.displaySuggestions=false;A.activeSuggestionIx=-1;A.ignoreQueryChange=false;A.onOutsideSearch=function(){A.isSearchHistoryFeature&&z.showHistory(false)};A.onSuggestSelect=function(t,e){var n,i,s=[];if(!e){t=void 0!==t?t:A.activeSuggestionIx;e=A.suggestions[t]}M.getUnderlinersAndSearchTerms(A.query,s,[]);n=M.getResultingQueryFromSuggestion(s,e);if(n.length>255){N.off();c.showDialog({message:"ErrorDialog.SearchStringTooLong"});i=A.$on("errorHandlerClosed",function(){N.on();i()})}else{A.query=n+" ";A.ignoreQueryChange=false}z.hideSuggestions();A.$broadcast("focusInput");A.getInsightsCharts(e.value)};A.haveUnlockedSelections=function(){return A.currentSelections&&!A.allSelectionsLocked};A.getInsightsCharts=function(t){if(b.getFlag("CAO_MOBILE")){var n=e.getService("qvCaoChartService");if(A.query){A.unableTofetchInsightCharts=false;A.fetchingInsightChartsPending=true;n.getInsights(A.app,t).then(function(t){var e=[].concat(t.recommendations).concat(t.chartMatches);var n=e.map(function(t){return t.visualization.loadChart(A.app)});y.all(n).then(function(t){e=e.map(function(e,n){e=Object.assign({},e,{itemIndex:n,load:true,qItemType:"GenericObject",qTotalNumberOfMatches:0,qIdentifier:t[n].model.id,qItemMatches:[],qTermsMatched:[],qSearchTermsMatched:[]});return e});if(e.length>0){A.suggestedChartGroupTitle=S.get("GlobalSearch.Insight.ChartsTitle",[e.length]);A.insightVisualsGroups=[{qGroupType:"GenericObjectsType",qid:0,qItems:e,insightCharts:true,qSearchTermsMatched:[0],qTotalNumberOfItems:e.length}]}A.fetchingInsightChartsPending=false})},function(){A.unableTofetchInsightCharts=true;A.insightVisualsGroups=[];A.fetchingInsightChartsPending=false})}else A.insightCharts=[]}};this.hideSuggestions=function(){if(A.displaySuggestions){A.displaySuggestions=false;this.resetSuggestions()}};this.hideSoftKeyboard=function(){A.$broadcast("blurInput")};this.showNoResultsMessage=function(){return false};this.searchOutsideSelections=function(){A.outsideSelection=true;A.modelSelections.clearAll();A.$broadcast("focusInput")};this.setShowPartialMatches=function(){A.forcePartials=!A.forcePartials;p.treatAsDesktop()&&A.$broadcast("focusInput")};A.isPartials=function(){return A.searchTermGroups.length&&A.searchTerms.length>A.searchTermGroups[0].qSearchTermsMatched.length};this.resetSuggestions=function(){A.activeSuggestionIx=-1;A.activeSelectIx=-1};this.showSuggestions=function(){A.displaySuggestions=true;A.activeSuggestionIx=-1;A.activeSelectIx=-1};this.showError=function(t){A.displayResult={data:false,visuals:false};A.error.show=true;A.error.translation="ErrorCode."+t.code;t.isHandled=true};this.toogleSuggestions=function(t){t?this.showSuggestions():this.hideSuggestions()};this.emptyResult=function(){A.insightVisualsGroups=[];A.displayResult={data:false,visuals:false};A.activeSelectIx=-1;A.error.show=false;L.search.requestState=h.idle;L.searchVisuals.requestState=h.idle;L.suggest.requestState=h.idle;A.searchTerms=[];A.searchTermGroups=[];A.searchVisualsGroups=[];A.matches=[];A.outsideSelection=false;A.$broadcast("toggleActivityIndicator",false);A.forcePartials=false;A.focusState.reset();this.hideSuggestions();j.removeClass("queryon")};this.moveActiveResult=function(t){A.showMeMoreFocus=false;if(0===t)return;if(t>0){A.activeSelectIx=Math.min(A.activeSelectIx+1,A.searchTermGroups.length);A.activeSelectIx=Math.min(A.activeSelectIx,A.paging.totalRows-1);A.activeSelectIx===A.searchTermGroups.length&&(A.showMeMoreFocus=true)}else t<0&&(A.activeSelectIx=Math.max(A.activeSelectIx-1,0))};this.searchVisuals=function(t){if(!A.isObjectsFeature)return;P(A,T.find("body").height()-B);if(0===t.length)return;L.searchVisuals.idCounter=L.searchVisuals.idCounter+1;var e=L.searchVisuals.idCounter,n=this,i={qAttributes:["qProperty"],qCharEncoding:"Utf16"},s=q(f.visuals,0,-1,20);L.searchVisuals.requestState=h.pending;L.searchVisuals.searchTerms=t;function a(t){A.searchVisualsGroups=[];if(e===L.searchVisuals.idCounter&&L.searchVisuals.requestState===h.pending){L.searchVisuals.requestState=h.idle;L.searchVisuals.searchTerms="";M.transformResult(A,t)}}function r(t){if(t.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){n.emptyResult();n.showError(t)}if(t.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;L.searchVisuals.requestState=h.idle;L.searchVisuals.searchTerms="";A.displayResult.visuals=false}A.app[f.visuals](i,t,s).then(a,r)};this.search=function(t){P(A,T.find("body").height()-B);A.focusState.reset();if(0===t.length)return;j.addClass("queryon");L.search.idCounter=L.search.idCounter+1;var e=L.search.idCounter,n=this,i=q(f.data,0,5,5);L.search.requestState=h.pending;L.search.searchTerms=t;A.$broadcast("toggleActivityIndicator",true);A.$broadcast("resultScrollToTop");function s(n){A.searchTermGroups=[];A.matches=[];if(e===L.search.idCounter&&L.search.requestState===h.pending){L.search.requestState=h.idle;L.search.searchTerms="";A.searchTerms=t;A.$broadcast("toggleActivityIndicator",false,true);A.$broadcast("resultScrollToTop");M.transformResult(A,n);A.activeSelectIx=-1;A.paging.lastRowIx=A.searchTermGroups.length;A.paging.totalRows=n.qTotalNumberOfGroups}}function a(t){if(t.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){n.emptyResult();n.showError(t)}if(t.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;L.search.requestState=h.idle;L.search.searchTerms="";A.displayResult.data=false}A.error.show=false;this.callSearch(t,i).then(s,a)};this.loadNextPage=function(){P(A,E.find(".qv-global-search-dimmer").height());var t=q(f.data,A.paging.lastRowIx,5,5),e=this;if(L.result.requestState!==h.idle)return;L.result.requestState=h.pending;A.showMeMoreFocus=false;A.$broadcast("toggleActivityIndicator",true);function n(t){L.result.requestState=h.idle;A.$broadcast("toggleActivityIndicator",false,true);M.transformResult(A,t);A.paging.lastRowIx=A.searchTermGroups.length}function i(){if(i.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){e.emptyResult();e.showError(i)}if(i.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;L.search.requestState=h.idle;L.search.searchTerms="";A.displayResult.data=false}this.callSearch(A.searchTerms,t).then(n,i)};this.callSearch=function(t,e){return A.app[f.data](C(true),t,e)};this.closeSearch=function(){if(A.isSmallDevice){z.emptyResult();A.query="";A.$broadcast("blurInput")}else D.toggleGlobalSearch(A.app)};this.suggest=function(t){if(0===t.length)return;var e=this;L.suggest.idCounter=L.suggest.idCounter+1;var n=L.suggest.idCounter;L.suggest.requestState=h.pending;L.suggest.suggestTerms=t;function i(t){if(b.getFlag("CAO_MOBILE")){var i=t.qFieldNames.map(function(t){return{qValue:t,qTerm:0}});t.qSuggestions=t.qSuggestions.concat(i)}L.suggest.suggestTerms="";if(M.isWhiteSpaceAt(A.query,A.query.length-1)||'"'===A.query.charAt(A.query.length-1))return;if(n===L.suggest.idCounter&&L.suggest.requestState===h.pending){M.transformSuggest(A,t,10);e.toogleSuggestions(A.suggestions.length>0);A.$broadcast("suggestShow",true,true)}L.suggest.requestState=h.idle}function s(t){t.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT&&(t.isHandled=true);if(t.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;L.suggest.requestState=h.idle;L.suggest.suggestTerms=""}A.app.searchSuggest({},t).then(i,s)};this.select=function(t,e){A.$broadcast("blurInput");if(0===t.length||0===A.searchTermGroups.length)return;if(e<0){e=0;A.activeSelectIx=0}var n=[],i=[];M.getUnderlinersAndSearchTerms(A.query,n,i);var s=i;A.app.selectAssociations(C(),t,e).then(function(){A.isSearchHistoryFeature&&A.historyPermission&&m.createEntryInHistory(A,s)});this.emptyResult();A.query="";p.treatAsDesktop()&&!A.isSearchHistoryFeature&&A.$broadcast("focusInput")};this.setTestSearchTermGroups=function(t){A.searchTermGroups=t};this.onNavigateToSheet=function(t){var e=[],n=[];M.getUnderlinersAndSearchTerms(A.query,e,n);A.isSearchHistoryFeature&&A.historyPermission&&""!=A.query&&m.createEntryInHistory(A,n);if(p.treatAsDesktop()){z.emptyResult();A.query="";A.isSearchHistoryFeature?A.$broadcast("blurInput"):A.$broadcast("focusInput")}else F(function(){z.emptyResult();A.query=""},200);d.highlightedCell(t)};this.showMoreHitsForVisual=function(t){var e={qOffset:0,qCount:1,qGroupOptions:[{qGroupType:"GenericObjectsType",qOffset:t.itemIndex,qCount:1}],qGroupItemOptions:[{qGroupItemType:"GenericObject",qOffset:0,qCount:t.qItemMatches.length+15}]};return A.app[f.visuals]({qAttributes:["qProperty"]},A.searchTerms,e).then(function(e){M.showMore(e,t);return t})};this.showHistory=function(t){A.searchInputFocused=t};this.setQueryFromHistory=function(t){A.ignoreQueryChange=false;t>=0&&(A.query=A.searchHistory[t]);this.showHistory(false);A.$broadcast("focusInput");b.getFlag("CAO_MOBILE")&&A.query&&A.getInsightsCharts(A.query)};this.clearHistory=function(){m.clearSearchHistory(A);this.showHistory(false)};this.removeHistory=function(t){m.removeSingleHistory(A,t)}}return A}.apply(e,i),void 0!==s&&(t.exports=s))},874:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(184),n(49),n(221)],s=function(t,e,n){function i(i,s,a){var r,o,l=i.find("input")[0],c=t.getService("$document");r={preventDefault:false,allowInInput:true,delay:0};o={preventDefault:false,allowInInput:true,delay:75};s.focusState.ActiveStateChanged.bind(u);function u(){s.activeSelectIx=s.focusState.activeStateName===s.focusState.Results?0:-1;s.activeHistoryIx=s.focusState.activeStateName===s.focusState.History?0:-1;s.activeSuggestionIx=s.focusState.activeStateName===s.focusState.Suggestions?0:-1;s.activeVisualIx=s.focusState.activeStateName===s.focusState.Visuals?0:-1;s.$broadcast(s.focusState.activeStateName===s.focusState.Visuals?"visualsGroupFocus":"visualsGroupBlur")}function d(){return"INPUT"===c[0].activeElement.tagName}function p(){e.preventDefault();t.$rootScope.$apply()}function h(t){var e,n,i;if(document.selection&&document.selection.createRange){e=document.selection.createRange();n=e.getBookmark();i=n.charCodeAt(2)-2}else t.setSelectionRange&&(i=t.selectionStart);return i===t.value.length}function f(){d()?s.focusState.activeStateName===s.focusState.Suggestions?a.hideSuggestions():s.query?s.query="":s.close():s.close();p()}function g(){if(s.focusState.activeStateName===s.focusState.Suggestions){s.activeSuggestionIx=s.activeSuggestionIx>0?s.activeSuggestionIx-1:s.suggestions.length-1;p()}else if(s.focusState.activeStateName===s.focusState.Visuals){s.$broadcast("visualsGroupMoveActiveVisual",-1);p()}}function v(){if(s.focusState.activeStateName===s.focusState.Suggestions){s.activeSuggestionIx=(s.activeSuggestionIx+1)%s.suggestions.length;p()}else if(s.focusState.activeStateName===s.focusState.Visuals){s.$broadcast("visualsGroupMoveActiveVisual",1);p()}}function m(){var t=s.focusState.activeStateName;s.focusState.previous();if(t===s.focusState.activeStateName)switch(s.focusState.activeStateName){case s.focusState.History:s.activeHistoryIx=Math.max(-1,s.activeHistoryIx-1);break;case s.focusState.Results:a.moveActiveResult(-1);break}p()}function b(){var t=s.focusState.activeStateName;s.focusState.next();if(t===s.focusState.activeStateName)switch(s.focusState.activeStateName){case s.focusState.History:s.activeHistoryIx=Math.min(s.activeHistoryIx+1,s.searchHistory.length-1);break;case s.focusState.Results:a.moveActiveResult(1);break}p()}function y(t){switch(s.focusState.activeStateName){case s.focusState.History:a.setQueryFromHistory(s.activeHistoryIx);break;case s.focusState.Input:s.isPartials()?a.setShowPartialMatches():s.displaySuggestions?S(t,true):s.displayResult.data?n.getFlag("CAO_MOBILE")||a.select(s.searchTerms,0):a.showNoResultsMessage()&&s.haveUnlockedSelections()&&a.searchOutsideSelections();break;case s.focusState.Suggestions:S(t,true);break;case s.focusState.Visuals:s.$broadcast("selectActiveVisualItem");break;case s.focusState.Partials:a.setShowPartialMatches();break;case s.focusState.Results:s.showMeMoreFocus?a.loadNextPage():a.select(s.searchTerms,s.activeSelectIx);break;case s.focusState.StartNewSearch:a.searchOutsideSelections();break}n.getFlag("CAO_MOBILE")&&s.query&&s.getInsightsCharts(s.query);p()}function S(t,e){if(s.displaySuggestions&&(e||h(l))){s.activeSuggestionIx=-1===s.activeSuggestionIx?0:s.activeSuggestionIx;s.onSuggestSelect()}p()}function I(){a.closeSearch();p()}this.keyboardShortcutsGroup=e.createGroup("global-search-"+s.app.id,1);this.keyboardShortcutsGroup.registerKeys("esc",f,r);this.keyboardShortcutsGroup.registerKeys("left",g,o);this.keyboardShortcutsGroup.registerKeys("right",v,o);this.keyboardShortcutsGroup.registerKeys("up",m,o);this.keyboardShortcutsGroup.registerKeys("down",b,o);this.keyboardShortcutsGroup.registerKeys("enter",y,r);this.keyboardShortcutsGroup.registerKeys("tab",S,r);this.keyboardShortcutsGroup.registerKeys("ctrl+f",I,r);this.keyboardShortcutsGroup.on();this.on=function(){this.keyboardShortcutsGroup.on()};this.off=function(){this.keyboardShortcutsGroup.off()};this.delete=function(){this.keyboardShortcutsGroup.delete();s.focusState.ActiveStateChanged.unbind(u)}}return i}.apply(e,i),void 0!==s&&(t.exports=s))},875:function(t,e,n){"use strict";var i,s;!(i=[n(91)],s=function(t){function e(t){return t.libId?t.libIdLabel?t.libIdLabel:"Unknown master item":t.aggr?t.aggr+"("+t.field+")":t.field}function n(n,i){var s=i.filter(function(t){return void 0!==t}).length;var a=n&&n.filter(function(t){return Object.keys(t.msgParams).length===s});var r=null;a&&a.forEach(function(t){if(t.msgParams){var e=t.msgParams;var n=Object.keys(e);var s=true;n.forEach(function(t){var e=i.some(function(e){return e.slot&&e.slot===t});e||(s=false)});s&&(r=t)}});if(!r)return"";var o=[void 0,void 0,void 0,void 0,void 0];Object.keys(r.msgParams).forEach(function(t){var n=i.filter(function(e){return e.slot===t})[0];var s=e(n);o[r.msgParams[t]]=s});return t.get(r.msgId,o)}return{findTitleForChart:n}}.apply(e,i),void 0!==s&&(t.exports=s))},876:function(t,e,n){"use strict";var i,s;!(i=[n(89)],s=function(t){function e(t,e,n,i){this.chartId=t;this.searchReport=n;this.app=i;this.type="found";this.analysisPrecedentId="found";this.appearsOnSheets=e}e.prototype.getTitle=function(){var e=new t;this.app.getObject(this.chartId).then(function(t){t.getLayout().then(function(t){e.resolve(t.title)})});return e.promise};e.prototype.getMatchDetails=function(){var t=[];var e=this.chartId;if(this.searchReport.search){var n=this.searchReport.search["chartFinder-Title"].searchHits;Object.keys(n).forEach(function(i){if(i.includes(e)){var s=n[i].matchingTypes;s.forEach(function(e){t.push({matchedOn:n[i].title,matchedField:e})})}})}return t};e.prototype.getChartType=function(){var e=new t;this.app.getObject(this.chartId).then(function(t){t.getLayout().then(function(t){e.resolve(t.visualization)})});return e.promise};e.prototype.loadChart=function(e){var n=new t;e.getObject(this.chartId).then(function(t){t.getProperties().then(function(e){n.resolve({model:t,options:{interactionState:0,showTitles:false},properties:e})})});return n.promise};return e}.apply(e,i),void 0!==s&&(t.exports=s))},880:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(92),n(404),n(128),n(89),n(367),n(49),n(114),n(123),n(196)],s=function(t,e,n,i,s,a,r,o,l,c){var u=e.extend("CaoChartUiModel",{init:function e(n,i){this.app=i;this.zoomed=false;this.ObjectPlacementService=t.getService("qvObjectPlacementService");this.CaoChartService=t.getService("qvCaoChartService");this.$timeout=t.getService("$timeout");this.chart=n;this.object={};this.zoomedObject={};this.options={};this.zoomedOptions={};this.state="READY";this.modified=false;this.chartTypeImageUrl=void 0;this.chartType=void 0;this.rendered=false;this.renderedCount=0;this.insightFeedback=r.getFlag("CE_PRECEDENTS");this.interaction=true},updateState:function t(e){this.state=e},isHidden:function t(){if(this.isFound())return false;return this.insightFeedback&&this.chart.visualization.visualization.analysis.precedents&&this.chart.visualization.visualization.analysis.precedents.disliked||this.chart.invalidFromLearning},isRendered:function t(){return this.rendered},isFound:function t(){return"found"===this.chart.visualization.type},isGenerated:function t(){return"generated"===this.chart.visualization.type},isModified:function t(){return this.modified},setState:function t(e){this.state=e},setModified:function t(e){this.modified=e},setType:function t(e){this.chart.visualization.type=e},refreshChartType:function t(){var e=this;e.chart.visualization.getChartType().then(function(t){e.chartType=t;e.chartTypeImageUrl=n.getImageNameFromChartType(t)})},getTitle:function t(){return this.chart.visualization.getTitle().then(function(t){return t})},getComplexity:function t(){return this.chart.complexity},getRelevance:function t(){return this.chart.relevance},getMatchRecord:function t(){return this.chart.visualization.visualization.matchRecord},getState:function t(){return this.state},getModel:function t(){return this.chart.model},getObject:function t(){return this.zoomed?this.zoomedObject:this.object},getAnalysisPrecedentId:function t(){return this.chart.visualization.analysisPrecedentId},getMatchDetails:function t(){return this.chart.visualization.getMatchDetails()},getSheetsThisChartAppearsOn:function t(){return this.chart.visualization.appearsOnSheets},getMatches:function t(){return this.chart.visualization.visualization.matchRecord.matches},getFields:function t(){return this.getMatches().filter(function(t){return!t.slotRole})},getMeasures:function t(){return this.getMatches().filter(function(t){return t.slotRole===c.MEASURE})},getDimensions:function t(){return this.getMatches().filter(function(t){return t.slotRole===c.DIMENSION})},getChartType:function t(){return this.chart.visualization.visualization.analysis.analysis},getSearchReport:function t(){return this.chart.visualization.searchReport},getAnalysis:function t(){return this.chart.visualization.visualization.analysis},isObjectInvalid:function t(){return this.zoomed?this.zoomedObject.invalid:this.object.invalid},isViewDataToggled:function t(){return this.zoomed?this.zoomedObject.viewDataToggled:this.object.viewDataToggled},isDataViewSupported:function t(){return this.zoomed?this.zoomedObject.supportViewData&&this.zoomedObject.supportViewData():this.object.supportViewData&&this.object.supportViewData()},toggleDataView:function t(){if(this.zoomed)return this.zoomedObject.toggleDataView();return this.object.toggleDataView()},activateSelectionWatch:function t(e){this.object.selectionsApi.watchActivated(e)},deactivateSelectionWatch:function t(e){this.object.selectionsApi.watchDeactivated(e)},adaptChart:function t(e){var n=this;return this.CaoChartService.adaptRecommendation(n.chart.visualization.visualization,n.app).then(function(t){n.chart.visualization=new a({analysis:t.analysis,matchRecord:t.matchRecord},n.chart.visualization.searchReport,t.properties);delete n.rendered;n.isViewDataToggled()?n.toggleDataView().then(function(){n.shouldRedraw=true}):n.shouldRedraw=true;n.recalculateConfidence=e})},addToNewSheet:function t(){var e=this;return e.chart.model.getProperties().then(function(t){return e.ObjectPlacementService.addToNewSheet(t).then(function(t){e.setType("found");e.chart.visualization.appearsOnSheets.push(t.id);return t})})},addToSheet:function t(e){var n=this;return n.chart.model.getProperties().then(function(t){return n.ObjectPlacementService.addObjectToSheet(t,e,i.getModel()).then(function(t){n.setType("found");n.chart.visualization.appearsOnSheets.push(t.id);return t})})},setChartInteraction:function t(e){if(this.zoomed&&this.zoomedObject&&this.interaction!==e){this.interaction=e;e?this.zoomedObject.on():this.zoomedObject.off()}},setChartInteractionState:function t(e){this.options.interactionState=e},destroyChart:function t(){var e=this;if(e.zoomed){e.zoomed=false;return}if("LOADING"===e.state||"LOADED"===e.state){if(!e.rendered&&e.object&&e.object.subscription){e.rendered=false;e.object.cancel()}e.isGenerated()&&e.chart.model&&e.chart.model.id&&!e.zoomed?e.app.destroySessionObject(e.chart.model.id).then(function(){e.rendered=false;e.state="READY"}):e.state="READY"}},initializeOptions:function t(){this.options={};this.zoomedOptions={};this.options.isReadonly=false;this.options.isPopover=false;this.options.selectionsDisabled=true;this.options.interactionState=l.STATIC;this.options.direction=o.direction;this.zoomedOptions.isReadonly=false;this.zoomedOptions.isPopover=false;this.zoomedOptions.selectionsDisabled=false;this.zoomedOptions.interactionState=l.ANALYSIS;this.zoomedOptions.direction=o.direction},loadChart:function t(e){var n=this;var i=new s;var a;if(n.rendered){n.setState("LOADED");e();i.resolve()}else{n.initializeOptions();var r=n.chart.model?n.app.destroySessionObject(n.chart.model.id):s.when({});r.then(function(){n.chart.visualization.loadChart(n.app).then(function(t){n.object&&n.object.type&&(n.object.type=null);n.zoomedObject&&n.zoomedObject.type&&(n.zoomedObject.type=null);n.chart.model=t.model;n.state="LOADED";function s(){a&&n.$timeout.cancel(a)}var r=function t(){if(n.zoomed){n.renderedCount++;if(n.renderedCount<2)return}n.renderedCount=0;n.rendered=true;e&&e();n.state="LOADED";s();i.resolve()};n.options.onRendered=r;n.zoomedOptions.onRendered=r;var o=function t(){s();i.resolve()};n.options.onCanceled=o;n.zoomedOptions.onCanceled=o;a=n.$timeout(function(){if(!n.allowLongLoad&&!n.rendered&&n.object&&n.object.subscription){n.object.subscription.cancel();n.zoomedObject&&n.zoomedObject.subscription&&n.zoomedObject.subscription.cancel();n.state="MANUAL_LOAD";i.resolve()}},n.chart.suggestedTimeout)},function(){i.resolve()})})}return i.promise}});return u}.apply(e,i),void 0!==s&&(t.exports=s))},881:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};Object.defineProperties(t,{idle:{value:0},pending:{value:1}});return t}.apply(e,i),void 0!==s&&(t.exports=s))},882:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={};Object.defineProperties(t,{data:{value:"searchResults"},visuals:{value:"searchObjects"},indexProgress:{value:"GetProgress"}});return t}.apply(e,i),void 0!==s&&(t.exports=s))},883:function(t,e,n){"use strict";var i,s;!(i=[n(102)],s=function(t){function e(n,i){var s=n[i];if(!(this instanceof e))throw new Error("FocusState needs to be called with the new keyword");if(!s)throw new Error("Invalid initialStateName provided");t.mixin(this);this.notification("ActiveStateChanged");Object.defineProperties(this,{initialState:{value:s},activeState:{configurable:true,value:s},activeStateName:{configurable:true,value:s.name}})}e.prototype.next=function(){var t=this.activeState;if(t.onBeforeNext&&!t.onBeforeNext())return;var e=t.next();while(e){if(!e.onBeforeEnter||e.onBeforeEnter()){n(this,e);return}e=e.next()}};e.prototype.previous=function(){var t=this.activeState;if(t.onBeforePrevious&&!t.onBeforePrevious())return;var e=t.previous();while(e){if(!e.onBeforeEnter||e.onBeforeEnter()){n(this,e);return}e=e.previous()}};e.prototype.reset=function(){n(this,this.initialState)};i(e,"Input");i(e,"Suggestions");i(e,"History");i(e,"Partials");i(e,"Visuals");i(e,"SuggestedCharts");i(e,"Results");i(e,"StartNewSearch");function n(t,e){Object.defineProperties(t,{activeState:{value:e},activeStateName:{value:e.name}});t.ActiveStateChanged.emit()}function i(t,e){var n={value:e};Object.defineProperty(t,e,n);Object.defineProperty(t.prototype,e,n)}return e}.apply(e,i),void 0!==s&&(t.exports=s))},884:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){function t(t,i,s){var a={};n(a,t.Input,{previous:function t(){return false},onBeforeNext:function t(){return!s.throbber.show},next:e.bind(a,t.Suggestions)});n(a,t.Suggestions,{onBeforeEnter:function t(){return!!s.displaySuggestions},previous:e.bind(a,t.Input),next:e.bind(a,t.History)});n(a,t.History,{onBeforeEnter:function t(){return s.isSearchHistoryFeature&&s.searchInputFocused&&0===s.query.length},onBeforeNext:function t(){return false},onBeforePrevious:function t(){return 0===s.activeHistoryIx},previous:e.bind(a,t.Suggestions),next:e.bind(a,t.Visuals)});n(a,t.Visuals,{onBeforeEnter:function t(){return s.isObjectsFeature&&s.displayResult.visuals&&!s.isSmallDeviceLandscape},previous:e.bind(a,t.History),next:e.bind(a,t.Partials)});n(a,t.Partials,{onBeforeEnter:function t(){return!!s.displayResult.data&&s.isPartials()},previous:e.bind(a,t.Visuals),next:e.bind(a,t.Results)});n(a,t.Results,{onBeforeEnter:function t(){return!!s.displayResult.data&&(!s.isPartials()||s.forcePartials)},onBeforeNext:function t(){return false},onBeforePrevious:function t(){return 0===s.activeSelectIx},previous:e.bind(a,t.Partials),next:e.bind(a,t.StartNewSearch)});n(a,t.StartNewSearch,{onBeforeEnter:function t(){return i.showNoResultsMessage()&&s.haveUnlockedSelections()},previous:e.bind(a,t.Results),next:function t(){return false}});return a}function e(t){var e=this[t];if(!e)throw new Error("Invalid stateName provided");return e}function n(t,e,n){if(t[e])throw new Error("State with name '"+e+"' already exists");n.name=e;t[e]=n}return t}.apply(e,i),void 0!==s&&(t.exports=s))},885:function(t,e,n){"use strict";var i,s;!(i=[n(54),n(886)],s=function(t,e){function n(t){return t.app.id+"."+t.userID+".smartSearch.history"}function i(t){t.storage=o(t);if("NONE"==t.storage)return;var e=n(t);if(t.storage.contains(e)){var i=f(t.storage.get(e));return i}}function s(t,e){var i=n(t),s=[],a=[];if(t.storage.contains(i)){s=t.storage.get(i);a=l(e);var r=c(a,s);var o=f(r);t.storage.set(i,r);t.searchHistory=o}else{a=l(e);s.unshift(a);t.storage.set(i,s);var u=f(s);t.searchHistory=u}}function a(t){var e=n(t);if(t.storage.contains(e)){t.searchHistory=[];t.storage.remove(e)}}function r(t,e){var i=n(t);if(t.storage.contains(i)){var s=t.storage.get(i);s.splice(e,1);t.storage.set(i,s);var a=f(s);t.searchHistory=a}}function o(t){if("DESKTOP"==t.userID){t.historyPermission=true;return e}if(t.userID&&"anonymous"!=t.userID.substring(0,9)){t.historyPermission=true;return e}t.historyPermission=false;return"NONE"}function l(t){return t.map(function(t){return t.startQuote&&t.endQuote?t.string='"'+t.string+'"':t.string})}function c(t,e){var n=d(e);var i=p(t);var s=h(n,i);var a=[];if(s>=0){e.splice(s,1);e.unshift(t);a=u(e)}else{e.unshift(t);a=u(e)}return a}function u(t){t.length>4&&(t.length=4);return t}function d(t){function e(t){return t.toLowerCase()}return t.map(function(t){return t.map(e)})}function p(t){return t.map(function(t){return t.toLowerCase()})}function h(e,n){for(var i=0;i<e.length;i++)if(t.isEqual(e[i],n))return i}function f(t){return t.map(function(t){return t.join(" ")})}return{initHistory:i,createEntryInHistory:s,clearSearchHistory:a,removeSingleHistory:r,getStoragePath:n}}.apply(e,i),void 0!==s&&(t.exports=s))},886:function(t,e,n){"use strict";var i,s;!(i=[n(54),n(118)],s=function(t,e){var n="sessionstorageservice";function i(e){if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');return n+"."+e}function s(e,n,s){var a=(new Date).getTime(),r,o;if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');if(!t.isObject(n))throw new Error('The value "'+n+'" for the key "'+e+'" is not valid object.');if(s){if(!t.isNumber(s))throw new Error('The time to live value "'+s+'" is not numeric.');s+=a}o={timeToLive:s,value:n};r=JSON.stringify(o);sessionStorage[i(e)]=r}function a(e){if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');var n=t.isEmpty(sessionStorage[i(e)]);return!n}function r(e,n){if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');if(!a(e)){if(void 0!==n)return n;throw new Error('There is no data set for the key "'+e+'". Please use contains() first to verify you should actually do a get().')}var i=o(e);return i.value}function o(t){var e=JSON.parse(sessionStorage[i(t)]);return e}function l(e){if(!t.isString(e))throw new Error('The key "'+e+'" is not a String.');if(!a(e))throw new Error('There is no data set for the key "'+e+'". Please use contains() first to verify you should actually do a get().');delete sessionStorage[i(e)]}function c(){var i,s,a;for(i in sessionStorage)if(e.startsWith(i,n)){i=i.substring(n.length+1);s=o(i);a=(new Date).getTime();t.isNumber(s.timeToLive&&a>s.timeToLive)&&l(i)}}return{set:s,get:r,contains:a,clean:c,remove:l}}.apply(e,i),void 0!==s&&(t.exports=s))},887:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(91),n(90),n(888),n(889),n(139),n(96),n(99),n(169)],s=function(t,e,n,i,s,a,r,o,l){var c=null;function u(t,e){var n;if(t.length!==e.length)return false;for(n=0;n<t.length;++n)if(t[n]!==e[n])return false;return true}e.directive("qvGlobalSearchInput",["$timeout","qvGlobalSearchDataService",function(a,r){return{restrict:"E",replace:true,template:s,require:"^qvGlobalSearch",link:function s(d,p,h,f){var g=p.find("input"),v=[],m=e.getService("$document");g.on("keydown",function(){d.ignoreQueryChange=false});d.$watch("isSelectActiveInSmallDevice",function(t){d.autoFocus=!i.isIos()&&!i.isAndroid()&&!t});d.placeholder=n.get("GlobalSearch.SearchData");function b(e){if(d.isInputFocused){if(1===t(e.target).closest(".qv-global-search-suggest").length||1===t(e.target).closest(".qv-search-last-history").length)return;e.preventDefault();e.stopPropagation();o.preventGestures(this.gestureHandler);d.$apply(function(){f.hideSuggestions();f.hideSoftKeyboard()})}}d.isObjectsFeature&&!l.treatAsDesktop()&&p.on("qv-outside",b);d.$watch("query",function(t){var e=[],n,i;a.cancel(c);f.showHistory(d.isSearchHistoryFeature&&d.isInputFocused&&0===d.query.length);d.ignoreQueryChange||f.resetSuggestions();if(!t||0===t.length){f.emptyResult();d.underlines.length=0;v=[];return}r.getUnderlinersAndSearchTerms(t,d.underlines,e);if(d.ignoreQueryChange){d.ignoreQueryChange=false;return}c=a(function(){if(r.isWhiteSpaceAt(t,t.length-1)||'"'===t.charAt(t.length-1))f.hideSuggestions();else{i=r.getSuggestTerms(t,e);f.suggest(i)}n=e.map(function(t){return t.string});if(e.length>0&&!u(n,v)){f.searchVisuals(n);f.search(n)}else t.length<r.getMinQueryLength()&&f.emptyResult();v=n;c=null},200)});d.$watch("isInputFocused",function(t){d.isSmallDevice&&(t?m.find("body").animate({scrollTop:p.offset().top},100):d.isObjectsFeature&&o.utils.touch&&f.hideSuggestions());d.isSearchHistoryFeature&&t&&0===d.query.length&&f.showHistory(true)});d.$on("focusInput",function(){g.focus()});d.$on("blurInput",function(){g.blur()});d.$on("$destroy",function(){g.off()})}}}]);e.directive("qvGlobalSearchInputHint",["qvGlobalSearchDataService",function(t){return{restrict:"E",replace:true,template:a,require:"^qvGlobalSearch",link:function e(n){function i(){var e=n.suggestions[-1===n.activeSuggestionIx?0:n.activeSuggestionIx],i=[],s=[],a,o,l,c,u;t.getUnderlinersAndSearchTerms(n.query,i,s);a=t.getSuggestTerms(n.query,s);if(!n.displaySuggestions||n.suggestions.length<=0||0===a.length)return;o=t.getUnderlineLengthFromTermIx(i,e.term);c=i.slice(o).reduce(function(t,e){return t+(e.isWhitespace?" ":e.string)},"");l=r.string(c).length;c=r.string(e.value).slice(0,l);u=r.string(e.value).slice(l);n.ignoreQueryChange=true;n.hintString=u}n.$watch("activeSuggestionIx",function(){i()});n.$watchCollection("suggestions",function(){i()});n.$watch("displaySuggestions",function(){i()})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},888:function(t,e){t.exports='<div class="qv-search-input" ng-class="{\'focus\': isInputFocused}">\n\t<div class="search-field-area">\n\t\t<lui-search class="search-field" query="query" auto-focus="autoFocus" autocomplete="\'off\'" is-focused="isInputFocused" tid="globalSearch.searchField" placeholder="{{placeholder}}" />\n\t</div>\n\t<div class="search-underlines">\n\t\t<span ng-repeat="underline in underlines" class="underline" ng-class="underline.isWhitespace ? \'term-space\' : \'term\' + underline.colorIx">{{underline.string}}</span><qv-global-search-input-hint></qv-global-search-input-hint>\n\t</div>\n</div>\n'},889:function(t,e){t.exports='<span ng-show="displaySuggestions" class="search-suggest" tid="globalSearch.suggestionString">{{hintString}}</span>\n'},890:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(891),n(892),n(893),n(96),n(99),n(49),n(370),n(895)],s=function(t,e,n,i,s,a,r){var o={INITIAL:0,VISUALS_DOCKED:1,DATA_DOCKED:2};t.directive("qvGlobalSearchResult",["$timeout",function(t){return{restrict:"E",template:e,replace:true,require:["^qvGlobalSearch","qvGlobalSearchResult"],controller:function t(){this.getElement=function(){};this.setDockState=function(){}},link:function e(n,i,l,c){var u=c[0],d=c[1],p,h,f=function e(){var s=this,r=0;a.treatAsDesktop()&&!h&&(h=i.find(".qv-smartsearch-visuals-group"));t(function(){if(h&&h.length){r=h[0].offsetTop+h[0].offsetHeight-33;n.fixedbar=s.scrollTop>r}n.scrollShow=s.scrollHeight-s.scrollTop>s.clientHeight})},g=!a.treatAsDesktop()&&n.isObjectsFeature?i.find(".data-container"):i;n.dockState=o.INITIAL;n.caoMobile=r.getFlag("CAO_MOBILE");n.emptyMessageEnabled=false;n.fixedbar=false;n.classes={"qv-global-search-result-throbber-open":n.activity.show,"with-objects":n.isObjectsFeature&&!n.isSmallDeviceLandscape};n.$watch("isObjectsFeature && !isSmallDeviceLandscape",function(t){n.classes["with-objects"]=t});n.$watch("activity.show",function(t){n.classes["qv-global-search-result-throbber-open"]=t});n.$watch(function(){return n.showNoResultsMessage()},function(t){n.classes["noresults"]=t});n.select=function e(i,a){if(s.utils.touch){n.activeResultIx=a;t(function(){u.select(n.searchTerms,i.qId)},100)}else u.select(n.searchTerms,i.qId)};n.loadNextPage=function t(){u.loadNextPage()};d.getElement=function(){return i};d.setDockState=function(e){t(function(){n.dockState=e;n.classes["visuals-docked"]=e===o.VISUALS_DOCKED;n.classes["data-docked"]=e===o.DATA_DOCKED})};n.setShowPartialMatches=function(){u.setShowPartialMatches()};n.showNoResultsMessage=function(){var t;t=n.caoMobile?n.emptyMessageEnabled&&n.searchTerms.length>0&&!n.displayResult.data&&!n.error.show&&!n.activity.show&&0===n.insightVisualsGroups.length&&!n.fetchingInsightChartsPending||n.error.show:n.emptyMessageEnabled&&n.searchTerms.length>0&&!n.displayResult.data&&!n.error.show&&!n.activity.show||n.error.show;return t};u.showNoResultsMessage=function(){return n.showNoResultsMessage()};n.resetDockState=function(){n.dockState=o.INITIAL;a.treatAsDesktop()&&g.animate({scrollTop:0},300,"swing")};p=n.$watch(function(){return g[0]&&g[0].scrollHeight?g[0].scrollHeight:0},function(t){t&&(n.scrollShow=t>g[0].clientHeight)});g.on("scroll",f);n.$on("resultScrollToTop",function(){i[0].scrollTop=0});n.$on("$destroy",function(){p();g.off("scroll",f)})}}}]);t.directive("qvScrollToActive",function(){return{restrict:"A",require:"^qvGlobalSearchResult",link:function t(e,n,i,s){i.$observe("qvScrollToActive",function(t){t=t+""==="true";n.toggleClass("active",t);if(t){var e=s.getElement(),i=n.position();i.top<0?e[0].scrollTop=n[0].offsetTop:i.top+n.height()>e.height()&&n[0].scrollIntoView(false)}})}}});t.directive("qvGlobalSearchResultMsg",function(){return{restrict:"E",template:n,replace:true,require:["^qvGlobalSearch","^qvGlobalSearchResult"],link:function t(e){e.capUnderlineMaxNumber=6}}});t.directive("qvGlobalSearchNoResults",function(){return{restrict:"E",template:i,replace:true,require:["^qvGlobalSearch","^qvGlobalSearchResult"],link:function t(){}}})}.apply(e,i),void 0!==s&&(t.exports=s))},891:function(t,e){t.exports='<div class="qv-global-search-result" ng-class="classes" >\n\n\t<qv-global-search-suggest ng-if="displaySuggestions" class="qv-global-search-suggest" qv-scroll-to-active="{{activeSelectIx === -1 && focusState.activeStateName === focusState.Suggestions}}"></qv-global-search-suggest>\n\n\t<h3 ng-if="isObjectsFeature && ( displayResult.data || showNoResultsMessage() ) && matches.length > 0" class="title-section title-selections" >\n\t\t<span q-translation="GlobalSearch.Selections"></span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-up"></i>\n\t</h3>\n\n\t<qv-global-search-no-results class="search-no-results-message" ng-show="showNoResultsMessage()" ></qv-global-search-no-results>\n\n\t<div ng-if="(outsideSelection || currentSelections) && (!isPartials() || forcePartials)" class="qv-global-search-result-title strong" >\n\t\t<span ng-if="outsideSelection && !currentSelections" tid="globalSearch.matchesWholeDataset" q-translation="GlobalSearch.MatchesWholeDataset"></span>\n\t\t<span ng-if="currentSelections" tid="globalSearch.addToYourSelections" q-translation="GlobalSearch.AddToYourSelections"></span>\n\t</div>\n\n\t<div ng-repeat="m in matches" class="data-matches-group" ng-if="(!isPartials() || forcePartials)">\n\n\t\t<div ng-if="m !== searchTerms.length" class="caption-flex" q-translation="GlobalSearch.MatchedSearchTerms,{{m}}"></div>\n\n\t\t<div class="content-flex" ng-init="parentIndex = $index" ng-class="{ \'touch-off\':!isSmallDevice }" ng-repeat="row in getSearchTermGroup(m)" qv-scroll-to-active="{{( row.qId === activeSelectIx) && focusState.activeStateName === focusState.Results }}" tid="globalSearch.resultGroup" >\n\n\t\t\t<div class="cell" ng-repeat="item in row.qItems" tid="globalSearch.resultField" ng-class="{ \'maxcell\': !$last && !$first, \'maxcellfirst\': ($first && row.qTotalNumberOfItems > 1) }" >\n\t\t\t\t<div class="group-hits" ng-click="select( row, $parentIndex )" ng-class="{ \'shown\': (item.qTotalNumberOfMatches-item.qItemMatches.length) > 0  }">\n\t\t\t\t\t<span class="field-name" tid="globalSearch.resultField.Name">{{item.qIdentifier}}</span>\n\t\t\t\t\t<span ng-repeat="hit in item.qItemMatches" tid="globalSearch.resultField.Hit">\n\t\t\t\t\t\t<qv-global-search-highlights q-text="hit.qText" q-ranges="hit.qRanges"></qv-global-search-highlights >\n\t\t\t\t\t\t<span>{{$last ? \'\' : \', \'}}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div tid="globalSearch.resultField.MoreHits" ng-if="item.qTotalNumberOfMatches-item.qItemMatches.length > 0" ng-click="onShowMoreHits($event, item, row.qId)" class="more-hits"><span class="more-text" q-translation="GlobalSearch.MoreResults,{{(item.qTotalNumberOfMatches-item.qItemMatches.length)}}"></span></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="more-hits-area-mobile" ng-if="item.qTotalNumberOfMatches-item.qItemMatches.length > 0" tid="globalSearch.resultField.MoreHitsMobile" ng-click="onShowMoreHits($event, item, row.qId)">\n\t\t\t\t\t<button class="lui-button lui-button--rounded">\n\t\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--more"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div ng-hide="matches.length === 0" qv-scroll-to-active="{{showMeMoreFocus}}" class="show-me-more"><button ng-if="paging.totalRows > paging.lastRowIx && (!isPartials() || forcePartials)" tid="globalSearch.showmemore" ng-click="loadNextPage($event)" class="lui-button" q-translation="GlobalSearch.ShowMeMore" ng-class="{\'lui-active\': showMeMoreFocus }"></button></div>\n\n\t<h3 class="title-section title-navigation" ng-if="displayResult.visuals && !isSmallDeviceLandscape" qv-scroll-to-active="{{focusState.activeStateName === focusState.Visuals}}">\n\t\t<span ng-if="!caoMobile" q-translation="GlobalSearch.Navigations"></span>\n\t\t<span ng-if="caoMobile">{{existingChartGroupTitle}}</span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-down"></i>\n\t</h3>\n\n\t<h3 class="title-section title-landscape" ng-if="displayResult.visuals && isSmallDeviceLandscape">\n\t\t<span class="lui-icon lui-icon--object"></span>\n\t\t<span q-translation="GlobalSearch.RotateForVisuals"></span>\n  </h3>\n  \n\t<qv-smartsearch-visuals-group tid="smartsearch-visuals-group" items="searchVisualsGroups" app="app" search-terms="searchTerms" options="{\'preload\': false}" ng-if="displayResult.visuals " ng-hide="isSmallDeviceLandscape"></qv-smartsearch-visuals-group>\n\n\t<h3 class="title-section title-navigation"\n\t\tng-if="insightVisualsGroups.length > 0 && caoMobile && !isSmallDeviceLandscape"\n\t\tqv-scroll-to-active="{{focusState.activeStateName === focusState.SuggestedCharts}}">\n\t\t<span tid="global.search.suggested.charts.title">{{suggestedChartGroupTitle}}</span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-down"></i>\n  </h3>\n  \n  <div class="insight-charts-unavailable" ng-if="unableTofetchInsightCharts === true" q-translation="GlobalSearch.SuggestedChartsUnavailable"></div>\n\t\n\t<div ng-if="isPartials()" qv-scroll-to-active="{{ focusState.activeStateName === focusState.Partials }}" class="qv-global-search-result-message search-partials-message">\n\t\t<qv-global-search-result-msg></qv-global-search-result-msg>\n\t\t<div>\n\t\t\t<button class="lui-button" ng-click="setShowPartialMatches($event)" tid="globalSearch.showPartialMatches" q-translation="{{ !forcePartials?\'GlobalSearch.ShowPartialMatches\' : \'GlobalSearch.HidePartialMatches\' }}"\n\t\t\t ng-class="{ \'lui-active\': focusState.activeStateName === focusState.Partials }"></button>\n\t\t</div>\n\t</div>\n\n\t<qv-smartsearch-visuals-group tid="smartsearch-visuals-group" items="insightVisualsGroups" app="app" search-terms="searchTerms" options="{\'preload\': false}" ng-if="insightVisualsGroups.length > 0 && caoMobile" ng-hide="isSmallDeviceLandscape"></qv-smartsearch-visuals-group>\n\n\t<div class="fixed-bar" ng-show="fixedbar">\n\t\t<span ng-click="resetDockState();" class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--arrow-down"></span>\n\t\t</span>\n\t</div>\n\n\t<qv-global-search-throbber></qv-global-search-throbber>\n</div>\n'},892:function(t,e){t.exports='<div class="qv-global-search-result-message-inline">\n    <span ng-if="currentSelections" q-translation="GlobalSearch.NoMatchesWithinCurrentSelection"></span>\n    <span ng-if="!currentSelections" q-translation="GlobalSearch.NoMatchesForYourTerms"></span>\n</div>'},893:function(t,e){t.exports='<div>\n    <div class="qv-global-search-result-groups" ng-if="!error.show">\n\n        <div class="qv-global-search-result-message" >            \n            <qv-global-search-result-msg></qv-global-search-result-msg>\n\n            <div ng-if="haveUnlockedSelections()">\n                <button class="lui-button qv-gs-new-search-button" qva-activate="searchOutsideSelections($event)" tid="globalSearch.newSearchJustFor"\n\t\t\t\t\t\tq-translation="GlobalSearch.ClearSelectionAndSearchAgain" q-title-translation="GlobalSearch.ClearSelectionAndSearchAgain"\n\t\t\t\t\t\tng-class="{ \'lui-active\': focusState.activeStateName === focusState.StartNewSearch }"></button>\n            </div>\n        </div>\n    </div>      \n\n    <div class="qv-global-search-result-error" ng-if="error.show">\n        <span q-translation="{{error.translation}}"></span>\n    </div>\n</div>'},894:function(t,e){t.exports="<span ng-repeat=\"slice in slices track by $index\" ng-class=\"slice.highlight ? 'highlighted' + slice.qTerm : ''\">{{slice.qSliceText}}</span>"},895:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(896),n(50),n(97),n(897),n(899),n(371)],s=function(t,e,n,i){var s={MAX_MOBILE_VISUALS:10,PAGE_VISUALS:3,PAGE_VISUALS_PORTRAIT:2,PADDING_PAGES:15};t.directive("qvSmartsearchVisualsGroup",["$timeout",function(t){return{restrict:"E",template:e,replace:true,scope:{items:"=",searchTerms:"=",options:"=",app:"="},controller:function t(){this.loadPage=function(){};this.preparePages=function(){}},link:function e(a,r,o,l){var c=0;a.pageIndex=0;a.activeVisualIx=-1;a.pages=[];a.objects=null;var u=r.find(".visuals-wrapper"),d=false,p=n.isSmallDevice?400:600,h=function t(){p=n.isSmallDevice?400:600;u[0].scrollLeft=a.pageIndex*(u[0].offsetWidth+s.PADDING_PAGES)},f=function t(){l.preparePages(a.items[0].qItems)};n.OrientationChanged.bind(f);n.ViewChanged.bind(f);a.setPageIndex=function(t){a.pageIndex=t;for(var e=0;e<a.pages.length;e++)a.pages[e].forEach(function(n){a.options.preload?n.load=e===t||e===t+1||e===t-1:n.load=e===t})};i.on("update",h);a.goToPage=function(t){l.loadPage(t)};a.onSwipePage=function(t){l.loadPage(a.pageIndex+t)};a.$watch("items",function(t){t&&t.length&&l.preparePages(t[0].qItems)});a.$on("visualsGroupMoveActiveVisual",function(t,e){if(d)return;var n=a.pages.reduce(function(t,e){return t+e.length},0),i,s;i=a.activeVisualIx>0||e>0?(a.activeVisualIx+e)%n:n-1;s=Math.floor(i/c);s!==a.pageIndex&&l.loadPage(s);a.activeVisualIx=i});a.$on("visualsGroupBlur",function(){a.activeVisualIx=-1});a.$on("visualsGroupFocus",function(){a.activeVisualIx=0;0!==a.pageIndex&&l.loadPage(0)});a.$on("$destroy",function(){i.off("update",h);n.OrientationChanged.unbind(f);n.ViewChanged.unbind(f)});l.loadPage=function(e){if(!d&&e>=0&&e<a.pages.length){d=true;u.animate({scrollLeft:e*(u[0].offsetWidth+s.PADDING_PAGES)},p,"swing",function(){d=false;t(function(){a.setPageIndex(e)})})}};l.preparePages=function(t){if(t){g();var e,i=0,r=[];n.orientation===n.Orientation.landscape?e=n.isSmallDevice?1:s.PAGE_VISUALS:n.orientation===n.Orientation.portrait&&(e=n.isSmallDevice?1:s.PAGE_VISUALS_PORTRAIT);c=e;for(var o=0;o<t.length;o++){if(n.isSmallDevice&&r.length>=s.MAX_MOBILE_VISUALS&&r[i].length>=e)break;if(r[i]){if(r[i].length>=e){i++;r.push([])}}else r.push([]);t[o].itemIndex=o;t[o].load=a.options.preload?0===i||1===i:0===i;r[i].push(t[o])}a.pages=r}};function g(){a.pages=[];u.scrollLeft(0);a.pageIndex=0}}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},896:function(t,e){t.exports='<div class="qv-smartsearch-visuals-group" qva-smart-search-swipe-horizontal="onSwipePage(delta)" >\n\t<div class="nav-visual-arrow left" qva-activate="goToPage( pageIndex - 1 );" ng-show="pageIndex > 0">\n\t\t<span class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--arrow-left"></span>\n\t\t</span>\n\t</div>\n\t<div class="visuals-wrapper" >\n\t\t<div class="page" tid="swipeable-chart-page-container" ng-repeat="p in pages" ng-class="{ \'first\': $first, \'last\': $last }">\n\t\t\t<div class="content" >\n\t\t\t\t<qv-smartsearch-visual-preview\n\t\t\t\t\tng-repeat="visualItem in p"\n\t\t\t\t\tapp="app"\n\t\t\t\t\tactive-visual-ix="activeVisualIx"\n\t\t\t\t\tvisual-object="visualItem"\n\t\t\t\t\tsearch-terms="searchTerms"\n\t\t\t\t\tng-class="{ \'first\': $first && !$last, \'last\': $last, \'active\': focusState.activeStateName === focusState.Suggestions && activeVisualIx === visualItem.itemIndex }">\n\t\t\t\t</qv-smartsearch-visual-preview>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="nav-visual-arrow right" qva-activate="goToPage( pageIndex + 1 );" ng-show="pageIndex < (pages.length - 1)">\n\t\t<span class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--arrow-right"></span>\n\t\t</span>\n\t</div>\n\n\t<qv-global-search-more-indicator pages="pages" active-page-ix="pageIndex" on-page-change="goToPage(index);"></qv-global-search-more-indicator>\n</div>'},897:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(54),n(95),n(105),n(898),n(89),n(114),n(123),n(370),n(169),n(267)],s=function(t,e,n,i,s,a,r,o){t.directive("qvSmartsearchVisualPreview",["$timeout",function(l){var c={TITLE:0,SUBTITLE:1,FOOTNOTE:2,DIMENSION:3,MEASURE:4,ALTERNATIVE_DIMENSION:5,ALTERNATIVE_MEASURE:6,TYPE:7,VALUE:8};function u(t,e){return e.getObject(t.qIdentifier).then(function(t){return{model:t,options:{isReadonly:true,isPopover:false,selectionsDisabled:true,interactionState:o.STATIC,components:{miniChart:{show:false},scrollArea:{showFlag:0}},direction:r.direction}}})}function d(t){var e=t.split("/");e=e.map(function(t){return parseInt(t)}).filter(function(t){return!Number.isNaN(+t)});return e.length?e[0]:-1}function p(t,e){t.id=-1;if(-1!==e.indexOf("qDimensions")||-1!==e.indexOf("qListObjectDef/qDef")){t.id=d(e);t.type=-1===e.indexOf("qLayoutExclude")?c.DIMENSION:c.ALTERNATIVE_DIMENSION;t.isLabel=-1!==e.indexOf("qFieldLabels")}else if(-1!==e.indexOf("qMeasures")){t.id=d(e);t.type=-1===e.indexOf("qLayoutExclude")?c.MEASURE:c.ALTERNATIVE_MEASURE;t.isLabel=-1!==e.indexOf("qLabel")}else{-1!==e.indexOf("subtitle")?t.type=c.SUBTITLE:-1!==e.indexOf("title")?t.type=c.TITLE:-1!==e.indexOf("footnote")?t.type=c.FOOTNOTE:-1!==e.indexOf("type")?t.type=c.TYPE:t.type=c.VALUE;t.isLabel=-1===e.indexOf("qExpr")}t.trans=h(t.type)}function h(t){var e="---";switch(t){case c.TITLE:e="Common.Title";break;case c.DIMENSION:e="Common.Dimensions";break;case c.MEASURE:e="Common.Measures";break;case c.ALTERNATIVE_DIMENSION:e="properties.alternative.dimensions";break;case c.ALTERNATIVE_MEASURE:e="properties.alternative.measures";break;case c.SUBTITLE:e="properties.subtitle";break;case c.FOOTNOTE:e="properties.footnote";break;case c.TYPE:e="properties.type";break;case c.VALUE:e="properties.dataPoints.labelmode.value";break}return e}return{restrict:"E",template:s,replace:true,require:["^qvGlobalSearch"],scope:{visualObject:"=",searchTerms:"=",activeVisualIx:"=",app:"="},link:function s(c,d,h,f){var g=t.getService("$navigationService").Sheets,v=t.getService("qvGlobalSearchDataService").getMaxColorsNum(),m=f[0],b;c.viz=null;c.termsMatched=null;c.extra=false;c.matches=null;c.loadManually=function(t){t.stopPropagation();c.viz.object.retry();c.isManualLoad=false};function y(){c.loadTimer=l(function(){if(c.viz.object){c.viz.object.cancel();c.isManualLoad=true}},c.visualObject.suggestedTimeout);c.viz.options.onRendered=function(){c.loadTimer&&l.cancel(c.loadTimer)}}c.$watch("visualObject.load",function(t){if(true===t){I();if(b)c.viz=b;else{u(c.visualObject,c.app).then(function(t){b=t;c.viz=t;c.viz.object={};c.visualObject.suggestedTimeout&&y()});x(c.visualObject.qItemMatches)}}else c.viz=null});c.$watch("searchTerms",function(t){t&&c.visualObject&&I()});c.$on("selectActiveVisualItem",function(){c.activeVisualIx===c.visualObject.itemIndex&&S()});c.$on("$destroy",function(){b=null});c.showMoreHits=function(t){t.stopPropagation();m.showMoreHitsForVisual(c.visualObject).then(function(t){x(t.qItemMatches)})};function S(t){var e=function t(e){e=e.filter(function(t){return t});return e.length?e[0]:null};q().then(function(s){var a=e(s);if(a){g.navigateToSheet(a.sheet);m.onNavigateToSheet(a.cell.name)}else if(t){var l={isReadonly:true,isPopover:false,selectionsDisabled:true,interactionState:o.ANALYSIS,components:{miniChart:{show:true},scrollArea:{showFlag:1}},direction:r.direction};n.publish(i.Events.PubSub.ExpandSmartSearchSuggestedChart,Object.assign({},t,{options:l}))}})}function I(){c.termsMatched=c.visualObject.qSearchTermsMatched.map(function(t){return{string:c.searchTerms[t],pos:t%v}})}function x(t){c.hitsDisplayed=t.length;var n,i,s;t.forEach(function(t){t.qAttributes&&t.qAttributes.length&&p(t,t.qAttributes[0][1])});n=c.visualObject.qItemMatches.filter(function(e){if(e.isLabel)return true;var n=t.filter(function(t){return t.isLabel&&e.type===t.type&&e.id===t.id&&e!==t});var i=e.qRanges.every(function(t){return n.some(function(e){return e.qRanges.some(function(e){return t.qTerm===e.qTerm})})});return!i});i=e.groupBy(n,function(t){return t.type});s=Object.keys(i).map(function(t){return i[t]});c.matches?s.forEach(function(t,e){if(t.length>c.matches[e].length){var n=c.matches[e].length;for(var i=n;i<t.length;i++)c.matches[e].push(t[i])}}):c.matches=s}function w(t,e,n){var i={sheet:t,cell:e};return e.name===c.visualObject.qIdentifier?a.resolve(i):"filterpane"===e.type?n.getObject(e.name).then(function(t){return t.getLayout().then(function(t){if(t.qChildList&&t.qChildList.qItems.length){var e=t.qChildList.qItems.filter(function(t){return t.qInfo.qId===c.visualObject.qIdentifier});return e.length?i:null}return null})}):a.resolve(null)}function q(){var t,e=[];for(var n=0;n<g.all.mashed.length;n++){t=g.all.mashed[n];for(var i=0;i<t.qData.cells.length;i++)e.push(w(t,t.qData.cells[i],c.app))}return a.all(e)}c.showExtraInfo=function(t){c.extra=!c.extra&&c.matches.length;t.stopPropagation()};c.navigateToSheet=function(t,e){if(!c.isManualLoad){t.stopPropagation();S(e)}}}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},898:function(t,e){t.exports='<div class="visual-item">\n\t<div class="object" qva-activate="navigateToSheet($event, viz)" >\n\t\t<qv-object ng-if="viz && visualObject.load" model="viz.model" options="viz.options" object="viz.object"></qv-object>\n\t\t<div class="transparent-overlay"></div>\n\t\t<div ng-hide="visualObject.load" class="qv-animate progress">\n\t\t\t<div class="progress-loader"></div>\n\t\t</div>\n\t\t<div class="cao-mobile-manual-loader" ng-click="$event.stopPropagation()" ng-if="isManualLoad">\n\t\t\t<ul>\n\t\t\t\t<li class="cao-mobile-loader-text" q-translation="cao.card.complex">\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<lui-button ng-click="loadManually($event)" q-translation="cao.card.complex.load"></lui-button>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="visual-data" qva-activate="showExtraInfo($event);">\n\t\t<div ng-if="visualObject.load" class="keywords">\n\t\t\t<div class="terms">\n\t\t\t\t<span ng-repeat="t in termsMatched"><span ng-if="!$first">&nbsp;</span><span class="highlighted{{t.pos}}">{{t.string}}</span></span>\n\t\t\t</div>\n\t\t\t<div class="lui-fade-button" ng-if="matches.length" tid="swipeableChartPageInfoButton">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--info"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="extra-info" ng-if="visualObject.load" ng-class="{ \'show\': extra }">\n\t\t\t<div ng-if="matches.length" ng-repeat="hits in matches" class="hits">\n\t\t\t\t<div ng-repeat="hit in hits" class="match-hit">\n\t\t\t\t\t<span ng-if="$first"><b q-translation="{{hit.trans}}"></b>: </span><qv-global-search-highlights q-text="hit.qText" q-ranges="hit.qRanges" class="highlights"></qv-global-search-highlights><span ng-if="!$last">,&nbsp;</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="more-hits" qva-activate="showMoreHits($event)" ng-if="$last && (visualObject.qTotalNumberOfMatches-hitsDisplayed) > 0" q-translation="GlobalSearch.MoreResults,{{(visualObject.qTotalNumberOfMatches-hitsDisplayed)}}"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},899:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(99),n(900)],s=function(t,e,n){t.directive("qvGlobalSearchMoreIndicator",function(){return{replace:true,template:n,restrict:"E",scope:{pages:"=",activePageIx:"=",onPageChange:"&"},link:function t(n){n.touchOn=!e.treatAsDesktop();n.pressedPageIx=void 0;n.onPageClick=function(t){n.pressedPageIx=t;n.onPageChange({index:t})};n.$watch("activePageIx",function(){n.pressedPageIx=void 0})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},900:function(t,e){t.exports='<div class="qv-gs-more-indicator" ng-class="{ \'touch-on\': touchOn }">\n\t<div class="hit-area"  qva-activate="onPageClick($index);" ng-repeat="p in pages">\n\t\t<span tid="swipeableChartPageClickDot" class="dot" ng-class="{ \'active\': $index === activePageIx, \'pressed\': $index === pressedPageIx }"></span>\n\t</div>\n</div>'},901:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(902)],s=function(t,e){t.directive("qvGlobalSearchSuggest",[function(){return{restrict:"E",template:e,replace:true,require:["^qvGlobalSearch"],link:function t(){}}}]);t.directive("qvScrollToActiveSuggestion",function(){return{restrict:"A",link:function t(e,n,i){i.$observe("qvScrollToActiveSuggestion",function(t){t=t+""==="true";if(t){var e=n.position(),i=n.parent(),s=n[0].clientWidth>i[0].clientWidth,a=e.left+n[0].clientWidth-i[0].clientWidth;n[0].scrollIntoView(s);e.left<=i[0].offsetLeft?i.scrollLeft(n[0].offsetLeft-i[0].offsetLeft):a>0&&!s&&(i[0].scrollLeft=i[0].scrollLeft+a)}})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},902:function(t,e){t.exports='<div class="qv-search-suggest-wrapper" tid="globalSearch.suggestions">\n\t<span class="hidden">{{query}}</span>\n    <div ng-show="isSmallDevice" ng-if="!isObjectsFeature" class="dym" q-translation="GlobalSearch.DidYouMean"></div>\n\t<ul class="suggest-popup">\n\t\t<li ng-repeat="suggest in suggestions track by $index" qv-scroll-to-active-suggestion="{{$index === activeSuggestionIx && focusState.activeStateName === focusState.Suggestions}}" ng-class="{active: $index === activeSuggestionIx && focusState.activeStateName === focusState.Suggestions }" qva-activate="onSuggestSelect(null, suggest)" tid="globalSearch.suggestion" bold-suggest=\'{{suggest.value}}\'>\n\t\t\t{{suggest.value}}\n\t\t</li>\n\t</ul>\n</div>\n'},903:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(904),n(169)],s=function(t,e){t.directive("qvGlobalSearchHistory",["$timeout",function(n){return{restrict:"E",template:e,replace:true,require:["^qvGlobalSearch"],link:function e(i,s,a,r){var o=r[0],l=s.find(".history-popup")[0];i.colorsLimit=t.getService("qvGlobalSearchDataService").getMaxColorsNum();i.$watch("searchInputFocused",function(t){t&&n(function(){l.scrollTop=0})});i.onSearchHistorySelect=function(t){o.setQueryFromHistory(t)};i.clearSearchHistory=function(){o.clearHistory()};i.removeSelectedHistory=function(t){o.removeHistory(t)}}}}]);t.directive("qvScrollToActiveHistory",function(){return{restrict:"A",link:function t(e,n,i){i.$observe("qvScrollToActiveHistory",function(t){t=t+""==="true";n.toggleClass("active",t);t&&n[0].scrollIntoView(false)})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},904:function(t,e){t.exports='<div class="qv-search-last-history" tid="globalSearch.searchHistory">\n\t<div class="history-header" ng-show="searchHistory.length">\n\t\t<div class="title"  q-translation="GlobalSearch.RecentSearches"></div>\n\t\t<div class="clear-all-button" q-translation="GlobalSearch.ClearAll" qva-activate="clearSearchHistory($index)"></div>\n\t</div>\n\t<ul class="history-popup" ng-show="searchHistory.length">\n\t\t<li ng-repeat="items in searchHistory track by $index" qva-delegated-activate=".history-query#onSearchHistorySelect($index); .lui-icon--close#removeSelectedHistory($index);" tid="globalSearch.searchHistoryItem" ng-class="{active: $index === activeHistoryIx && focusState.activeStateName === focusState.History}" qv-scroll-to-active-history="{{$index === activeHistoryIx && focusState.activeStateName === focusState.History}}">\n\t\t\t<div class="history-query">{{searchHistory[$index]}}</div>\n\t\t\t<div class="lui-icon lui-icon--close" q-title-translation="Common.Delete" title="Delete"></div>\n\t\t</li>\n\t</ul>\n</div>'},905:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(906),n(163),n(89),n(50),n(97),n(276),n(257),n(371)],s=function(t,e,i,s,a,r){var o={};Object.defineProperties(o,{THROBBER:{value:1e3},INDEX_PROGRESS:{value:5e3},NEXT_INDEX_PROGRESS:{value:500},HIDE_INDEX_DONE:{value:1e3}});t.directive("qvGlobalSearchThrobber",["$timeout","$window","$animate",function(l,c,u){return{replace:true,template:e,restrict:"E",link:function e(d,p){var h=t.getService("qvGlobalSearchService"),f,g,v,m,b=p.find(".qv-gs-index-progress .qv-gs-index-group"),y,S;d.asyncHideActivity=false;d.percentDone=void 0;d.imgSrc=n.p+"img/core/static/smart-search.png";d.pages=[{},{}];d.activePageIx=0;y=function t(){l(function(){b[0].scrollLeft=d.activePageIx*b[0].offsetWidth})};a.OrientationChanged.bind(y);r.on("update",y);d.goToPage=function(t){b.animate({scrollLeft:t*b[0].offsetWidth},400,"swing",function(){l(function(){d.activePageIx=t})})};d.onSwipePage=function(t){if(d.isSmallDevice){var e=t>0?1:0;e!==d.activePageIx&&d.goToPage(e)}};d.openHelp=function(){c.open(i.path+"SmartSearch_Intro")};d.$on("$destroy",function(){l.cancel(f);l.cancel(g);l.cancel(v);l.cancel(m);r.off("update",y);a.OrientationChanged.unbind(y);h.IndexProgressUpdate.unbind(M);u.off("removeClass",p[0])});function I(t){var e=s(),n=p.find(t)[0];u.on("removeClass",n,function(t,i){if("close"===i){u.off(n);e.resolve()}});return e.promise}function x(){d.throbber.show=false;d.indexProgress.enabled=false;d.indexProgress.show=false;d.indexProgress.visible=false;d.indexDone.show=false;d.indexDone.visible=false}function w(){if(void 0!==d.percentDone&&d.percentDone<100)return true;return h.couldEngineBeIndexing(d.app)}function q(t){if(!S){h.IndexProgressUpdate.bind(M);S=true}l.cancel(m);m=l(function(){h.requestIndexProgressUpdate(d.app)},t||0)}d.showIndexDone=function(){I(".qv-gs-index-done").then(function(){d.indexProgress.show=false;d.indexProgress.visible=false;d.indexDone.visible=true;d.percentDone=void 0;l.cancel(v);v=l(C,o.HIDE_INDEX_DONE)});d.indexDone.show=true};function C(){d.indexDone.visible=false;d.indexDone.show=false;l.cancel(f);d.$emit("updateForceShowDimmer",false);d.asyncHideActivity?E():f=l(T,o.THROBBER)}function P(t){I(".qv-gs-index-progress").then(function(){d.indexProgress.visible=true;d.isSmallDevice||d.$emit("updateForceShowDimmer",true)});d.percentDone=t;d.indexProgress.show=true;d.activity.show=true;d.throbber.show=false;t<100?q(o.NEXT_INDEX_PROGRESS):A()}function k(t){d.percentDone=t;t<100?q(o.NEXT_INDEX_PROGRESS):A()}function A(){l.cancel(m);if(S){h.IndexProgressUpdate.unbind(M);S=false}}function T(){d.activity.show=true;d.throbber.show=true;d.emptyMessageEnabled=false}function E(){l.cancel(f);l.cancel(g);l.cancel(v);l.cancel(m);A();d.activity.show=false;d.throbber.show=false;d.indexProgress.enabled=false;d.indexProgress.show=false;d.indexProgress.visible=false;d.emptyMessageEnabled=d.searchTerms.length>0}function $(){d.indexProgress.enabled=true;q()}function M(t,e){if(t!==(d.app.id||"").toUpperCase())return;var n=new Number(e);if(Number.isNaN(+n)||!e){d.indexProgress.enabled=true;q(o.INDEX_PROGRESS);return}if(!d.indexProgress.show&&n<100)P(n);else if(d.indexProgress.show)k(n);else{l.cancel(f);f=l(T,o.THROBBER)}}function F(t,e,n){if(e){d.asyncHideActivity=false;if(d.activity.show)return;x();l.cancel(f);l.cancel(g);if(w())$();else{f=l(T,o.THROBBER);g=l($,o.INDEX_PROGRESS)}}else{var i=d.percentDone&&d.percentDone<100;if(i&&n){h.setLastKnownIndexProgress(d.app,100);A();d.percentDone=100;d.asyncHideActivity=true}else if(i&&!n){if(!d.isSmallDevice)return;E()}else if(100==d.percentDone){h.setLastKnownIndexProgress(d.app,100);A();d.asyncHideActivity=true}else E()}}d.$on("toggleActivityIndicator",F)}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},906:function(t,e){t.exports='<div ng-show="activity.show" class="qv-qs-throbber-container qv-animate ng-hide">\n\n\t<div class="qv-gs-throbber-dimmer"></div>\n\n\t<div ng-show="throbber.show" class="qv-gs-throbber ng-hide"></div>\n\n\t<div ng-show="indexProgress.show" class="qv-gs-index qv-gs-index-progress qv-animate ng-hide">\n\n\t\t<div class="qv-gs-index-group" qva-smart-search-swipe-horizontal="onSwipePage(delta)">\n\t\t\t<div class="qv-gs-index-section">\n\t\t\t\t<div class="qv-gs-index-content qv-gs-index-content-shrink">\n\t\t\t\t\t<span class="qv-gs-index-header" q-translation="GlobalSearch.PreparingSmartSearch"></span>\n\n\t\t\t\t\t<qv-progress-bar percent-done="percentDone" on-completed="showIndexDone()"></qv-progress-bar>\n\n\t\t\t\t\t<span class="qv-gs-index-text" q-translation="GlobalSearch.NextTimeFaster"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="qv-gs-index-section">\n\t\t\t\t<div class="qv-gs-index-content qv-gs-index-content-shrink">\n\t\t\t\t\t<div class="qv-gs-index-help" qva-activate="openHelp()">\n\t\t\t\t\t\t<span class="qv-gs-index-header" q-translation="GlobalSearch.LearnHowToUse"></span>\n\t\t\t\t\t\t<img ng-src="{{imgSrc}}" class="qv-gs-index-image" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<qv-global-search-more-indicator pages="pages" active-page-ix="activePageIx" on-page-change="goToPage(index);"></qv-global-search-more-indicator>\n\n\t</div>\n\n\t<div ng-show="indexDone.show" class="qv-gs-index qv-gs-index-done qv-animate ng-hide">\n\t\t<div class="qv-gs-index-section qv-gs-index-section-single">\n\t\t\t<div class="qv-gs-index-content qv-gs-index-shrink">\n\t\t\t\t<span class="qv-gs-index-icon lui-icon lui-icon--tick" aria-hidden="true"></span>\n\t\t\t\t<span class="qv-gs-index-text-big" q-translation="GlobalSearch.Done"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>'},907:function(t,e){t.exports='<div class="qv-progress-bar">\n\t<div class="progress-bar-bg">\n\t\t<div class="progress-bar-fg" ng-style="{ width: display }"></div>\n\t</div>\n\n\t<div class="progress-text" ng-bind="display" ng-hide="options.hideText"></div>\n</div>'},908:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(276),n(257)],s=function(t){t.directive("qvMobileIndexProgress",["$timeout",function(e){return{replace:true,template:'<div class="qv-mobile-index-progress"><qv-progress-bar ng-if="showMobileIndexProgressBar" percent-done="indexPercentDone" on-completed="hideMobileIndexProgressWhenDone()" options="progressBarOptions"></qv-progress-bar></div>',restrict:"E",link:function n(i){var s=t.getService("qvGlobalSearchService"),a,r;i.progressBarOptions={hideText:true};s.couldEngineBeIndexing(i.app)&&c(0);i.$on("$destroy",function(){e.cancel(r);s.IndexProgressUpdate.unbind(o)});i.hideMobileIndexProgressWhenDone=function(){i.showMobileIndexProgressBar=false};function o(t,e){if(t!==(i.app.id||"").toUpperCase())return;if(!i.showMobileIndexProgressBar&&e<100){i.indexPercentDone=e;i.showMobileIndexProgressBar=true;c(500)}else if(i.showMobileIndexProgressBar){i.indexPercentDone=e;e<100&&c(500)}else l()}function l(){e.cancel(r);if(a){s.IndexProgressUpdate.unbind(o);a=false}}function c(t){if(!a){s.IndexProgressUpdate.bind(o);a=true}e.cancel(r);r=e(function(){s.requestIndexProgressUpdate(i.app)},t||0)}}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},909:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(54),n(95),n(186),n(93),n(910),n(124),n(120),n(113),n(49),n(91),n(89),n(103),n(229),n(222),n(99),n(134),n(147),n(154),n(106),n(168),n(114),n(105),n(223),n(372),n(911),n(912),n(937),n(939),n(941),n(374),n(212),n(221),n(275),n(945),n(366),n(946),n(267),n(415),n(233),n(368),n(947),n(963)],s=function(t,e,n,i,s,a,r,o,l,c,u,d,p,h,f,g,v,m,b,y,S,I,x,w,q,C,P){var k=["$scope","$element","$window","$timeout","$q","qvCaoService","qvCaoSearchService","qvCaoChartService","qvAppDetailsService","qvCaoRenderService","qvCaoComplexityEstimatorService","qvCaoSelectionService",function(r,l,k,A,T,E,$,M,F,O,D,N){var L=this;var R=new I;var _=T.defer();var G=T.defer();var H=false;var B=0;L.zoomDeferred=null;L.lightEdits=[];r.loadedCount=0;r.query="";r.charts=[];r.chartMatches=[];r.renderableCharts=[];r.fieldList=[];r.debug=c.CAO_DEBUG;r.syncFieldPicker=u.getFlag("CAO_FIELD_PICKER_SYNC");r.insightFeedback=u.getFlag("CE_PRECEDENTS");r.caoTweakEnabled=u.getFlag("CAO_TWEAK");r.nluEnabled=u.getFlag("NLU_INSIGHTS");r.nluQueryInfoVisible=false;r.nluRawResponse=null;r.learningPerformed=false;r.contextPanelVisible=false;r.assetsPanelVisible=true;r.showHidden=false;r.showFieldPicker=true;r.limitedAccess=null;r.scrollContainer=l.find(".qv-cao-scroll-content")[0];r.mouseUp=function(){r.focusBorder=true};r.resultLabel=d.get("cao.search.title",[0,0,0,0]);r.introHeader=r.nluEnabled?d.get("cao.search.intro.nlu.header"):d.get("cao.search.intro.header");r.introDescriptionSearch=d.get("cao.search.intro.description.search");r.introDescriptionNoFields=d.get("cao.search.intro.description.nofields");r.introDescriptionGenerateInsights=d.get("cao.search.intro.description.generateInsights");r.introButton=d.get("cao.search.intro.button");r.goToSheetButton=d.get("cao.search.gotosheet.button");r.cellStatusElem=l.find("#sr-cell-status-label");r.direction=x.direction;r.appPrecedents={enabled:true};r.state="INIT";r.gridScreenReader=d.get("Cao.Accessibility.Object.Description");r.onGridFocus=function(){r.gridScreenReader=H?"":d.get("Cao.Accessibility.Object.Description")};r.onGridBlur=function(){A(function(){H=!!document.activeElement&&document.activeElement.classList.contains("cao-insight-container");r.gridScreenReader=""},1)};o.load();m.getList().then(function(t){r.masterDimensionsListModel=t});S(r,"masterDimensionsListModel",function(){j()});b.getList().then(function(t){r.masterMeasuresListModel=t});S(r,"masterMeasuresListModel",function(){j()});y.getList().then(function(t){r.fieldsListModel=t});S(r,"fieldsListModel",function(){j()});r.updateDirection=function(t){r.direction!==t&&(r.direction=t)};r.closeAndGoToSheet=function(){E.toggleCao();i.publish("cao/insights/close")};x.DirectionChanged.bind(r.updateDirection);a.getApp().then(function(i){G.resolve();r.app=i;r.contextPanelVisible=q.storageObj(i.id).contextPanel;r.assetsPanelVisible=q.storageObj(i.id).assetsPanel;F.get().then(function(t){r.limitedAccess=Boolean(t.model.app.published||!t.model.permissions.update)}).then(function(){p.all({appFieldList:i.getFieldList(),classificationsResult:e.getService("classificationService").getClassification(),appScrape:E.scrapeApp()}).then(function(e){var a=e.classificationsResult?new f(e.classificationsResult):void 0;s.addClassificationDataToFields(e.appFieldList,a);_.resolve();D.init(i);r.state="INTRO";v.treatAsDesktop()&&A(function(){t("#cao-search-input").focus()});$.getMasterItems().then(function(t){r.limitedAccess&&0===t.length&&(r.state="NO_FIELDS")});r.fieldList=e.fieldList;$.clearSelectedFields();$.registerForCaoSearchQuery(n.debounce(z,300));j()},function(){_.reject();V()})});r.app.getLayout().then(function(t){r.permissions=t.permissions})},function(){G.reject();V()});function j(){$.createFieldList().then(function(t){r.fieldList=t})}function z(t){E.setRefreshIndicatorVisibility(false);if("NO_FIELDS"===r.state)return;if(t.showIntro){r.state="INTRO";r.$apply(function(){r.query="";r.charts=[];r.chartMatches=[];r.selectedFieldNames=[]});return}r.query=t.query?t.query:"";r.loadGraphs(t.query);r.selectedFieldNames=t.selectedFields?t.selectedFields:[]}r.refreshCharts=function(){if("INTRO"===r.state){E.setRefreshIndicatorVisibility(false);return}i.publish("cao/insight/refreshPerformed");r.state="LOADING";E.setRefreshIndicatorVisibility(false);r.clearChartSelection();A(function(){O.clearRenderQueue();r.charts=[];r.chartMatches=[]}).then(function(){M.refreshInsights(r.appPrecedents.enabled).then(function(t){r.state="LOADED";r.loadedCount++;r.charts=t.recommendations;r.chartMatches=t.chartMatches;r.learningPerformed=false}).catch(V)})};r.$watch("appPrecedents.enabled",function(t,e){t!=e&&r.refreshCharts()});r.clearInsightResults=function(){i.publish("cao/insights/clear")};r.isClearResultsVisible=function(){return r.caoTweakEnabled&&(r.charts&&r.charts.length>0||r.chartMatches&&r.chartMatches.length>0)};r.setItemAccFocusVisibility=function(){this.itemAccFocus=true};r.removeItemAccFocusVisibility=function(){this.itemAccFocus=false};r.toggleFieldPicker=function(){r.showFieldPicker=!r.showFieldPicker;h.trackEvent(h.customEvents.INSIGHTS_FIELD_PICKER,{type:r.showFieldPicker?"open":"close"});A(r.resizeCharts)};r.resizeCharts=function(){g.resizeCharts(k)};function V(t){B--;t&&(t.norefresh||t.notFound)?t.notFound&&(r.state="NOT_FOUND"):r.state="ERROR";r.learningPerformed=false}r.loadGraphs=function(t){O.clearRenderQueue();E.setRefreshIndicatorVisibility(false);"LOADED"===r.state&&r.$apply(function(){r.charts=[];r.chartMatches=[]});r.state="LOADING";r.showHidden=false;var e=new Date;G.promise.then(function(){_.promise.then(function(){B++;var n;n=r.nluEnabled&&t&&t.length?C.parseQuery(t,r.app.id).then(function(t){r.nluRawResponse=t;i.publish("cao/nlu/new_queries",t);var e=P.buildDataCollection(t);return M.getVisualRecommendations(r.app,e,r.limitedAccess)}):M.getInsights(r.app,t,r.limitedAccess,r.appPrecedents.enabled);n.then(function(t){B--;if(B>0)return;r.state="LOADED";r.loadedCount++;r.charts=t.recommendations;r.chartMatches=t.chartMatches;var n=new Date;var i=(n-e)/1e3;h.trackEvent(h.customEvents.INSIGHTS_SEARCH,{query:r.query,queryTime:i})},V)},V)},V)};r.selectField=function(t){if(r.syncFieldPicker){r.fieldToAdd=t.selected?null:t;r.fieldToRemove=t.selected?t:null}else{r.fieldToAdd=null;A(function(){r.fieldToAdd=t})}i.publish("cao/insight/contextPanelToggled",!!r.insightFeedback&&q.storageObj(r.app.id).contextPanel);r.clearChartSelection()};r.updateFieldPicker=function(){A(function(){r.fieldList=[];r.fieldList=$.getFields()})};r.zoomChart=function(t){L.zoomDeferred=T.defer();r.zoomOpen=true;t.zoomed=true;A(function(){l.find(".qv-cao-zoomed-anmiation-container").addClass("animate-expand");A(function(){r.zoomedChart=t},400)});return L.zoomDeferred.promise};r.exitZoom=function(){A(function(){l.find(".qv-cao-zoomed-anmiation-container").addClass("animate-shrink");r.zoomedChart=void 0;A(function(){r.zoomOpen=false;L.zoomDeferred.resolve()},400)});return L.zoomDeferred.promise};r.sendFeedback=function(t,e){var n=t.getAnalysis();if(e===w.Precedents.PrecedentTypes.Dislike)return n.precedents&&n.precedents.disliked?R.undislikeAnalysis(n).then(function(){delete n.precedents;return false}):R.dislikeAnalysis(n).then(function(t){n.precedents={id:t.nodes[0].id,disliked:true};return true});if(e===w.Precedents.PrecedentTypes.Like)return R.likeAnalysis(n).then(function(t){n.precedents={id:t.nodes[0].id,liked:true};return true})};function U(e){t(e.currentTarget).blur()}r.showHiddenCharts=function(){r.showHidden=!r.showHidden;r.showHidden&&A(function(){var e=t(".qv-cao-section-hidden")[0];e&&e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"start"})})};r.showFoundInsights=function(t){13===t.which?r.chartsToShow={charts:r.chartMatches,activeTab:"found"}:"click"===t.type&&(r.chartsToShow={charts:r.chartMatches,activeTab:"found"});U(t)};r.showGeneratedInsights=function(t){13===t.which?r.chartsToShow={charts:r.renderableCharts,activeTab:"generated"}:"click"===t.type&&(r.chartsToShow={charts:r.renderableCharts,activeTab:"generated"});U(t)};r.isRefreshIndicatorVisible=function(){return E.getRefreshIndicatorVisibility()};r.isCaoInsightContextPanelVisible=function(){return r.caoTweakEnabled&&r.contextPanelVisible&&"ERROR"!==r.state};r.clearChartSelection=function(){N.clearSelection()};r.isChartSelected=function(){var t=N.getSelectedChart();return t&&r.zoomedChart&&r.zoomedChart===t};r.toggleNluQueryInfo=function(){r.nluQueryInfoVisible=!r.nluQueryInfoVisible};function K(t){r.contextPanelVisible=t}function W(t){r.assetsPanelVisible=t}function Q(t){r.learningPerformed=t}i.subscribe("cao/insight/refresh",r.refreshCharts);i.subscribe("cao/insight/contextPanelToggled",K);i.subscribe("cao/insight/assetsPanelToggled",W);i.subscribe("cao/insight/learningPerformed",Q);r.$watchGroup(["charts","chartMatches"],function(){0===r.charts.length&&"LOADED"===r.state&&V({notFound:true});r.renderableCharts=r.charts.filter(function(t){return!r.insightFeedback||!t.isHidden()});r.chartsToShow={charts:r.renderableCharts,activeTab:"generated"};r.hiddenCharts=r.charts.filter(function(t){return t.isHidden()});r.numberOfGeneratedInsights=d.get("cao.search.info.title.generated.plural",r.renderableCharts.length.toString());r.numberOfFoundInsights=d.get("cao.search.info.title.found.plural",r.chartMatches.length.toString());function t(){var t=[];if(r.charts.length+r.chartMatches.length===0)return null;r.charts.length+r.chartMatches.length>0&&t.push(d.get("cao.search.titleResults",[r.charts.length+r.chartMatches.length]));r.renderableCharts.length>0&&t.push(d.get("cao.search.titleGenerated",[r.renderableCharts.length]));r.hiddenCharts.length>0&&t.push(d.get("cao.search.titleHidden",[r.hiddenCharts.length]));switch(t.length){case 3:return d.get("cao.search.titleLength3",t);case 2:return d.get("cao.search.titleLength2",t);default:break}}r.resultLabel=t()});r.$on("$destroy",function(){$.unRegisterFromCaoSearchQuery(z);O.clearRenderQueue();i.unsubscribe("cao/insight/refresh");i.unsubscribe("cao/insight/contextPanelToggled");i.unsubscribe("cao/insight/assetsPanelToggled");i.unsubscribe("cao/insight/learningPerformed");x.DirectionChanged.unbind(r.updateDirection)})}];e.directive("qvCaoComponent",function(){return{restrict:"E",template:r,controller:k,scope:true,replace:true,link:function t(e){l.getList().then(function(t){t.getLayout().then(function(t){e.sheets=t})});e.target=null}}});return"<qv-cao-component></qv-cao-component>"}.apply(e,i),void 0!==s&&(t.exports=s))},910:function(t,e){t.exports='<div class="qv-cao overlay" id="qv-cao-overlay" style="display:none;" ng-keyup="setItemAccFocusVisibility()" ng-mouseup="removeItemAccFocusVisibility()">\n\t<div class="qv-cao-zoomed-chart" ng-if="zoomOpen" ng-class="{\'cao-tweak-width\' : caoTweakEnabled && isChartSelected() && contextPanelVisible}">\n\t\t<div class="qv-cao-zoomed-anmiation-container" ng-if="zoomOpen">\n\t\t\t<qv-cao-insight class="qv-cao-section-result-item qv-cao-section-result-item-zoomed" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\tng-if="zoomedChart"\n\t\t\t\tchart="zoomedChart"\n\t\t\t\tapp="::app"\n\t\t\t\tdebug="::debug"\n\t\t\t\tsheets="::sheets"\n\t\t\t\tinteractive="::true"\n\t\t\t\talways-show-header="true"\n\t\t\t\theader-icon="lui-icon--arrow-left"\n\t\t\t\theader-action="exitZoom"\n\t\t\t\tpermissions="permissions"\n\t\t\t\tng-keyup="mouseUp"\n\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\tdirection="direction"\n\t\t\t\tis-cao-context-panel-visible="contextPanelVisible"\n\t\t\t>\n\t\t\t</qv-cao-insight>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="assetsPanelVisible" class="qv-cao-field-picker" ng-class="{ \'hide-field-picker\' : !showFieldPicker, \'field-picker-panel-container\': caoTweakEnabled }" tid="cao-assets-panel">\n\t\t<qv-cao-field-picker\n\t\t\tinsights-loaded="state !== \'INIT\'"\n\t\t\tis-limited ="limitedAccess"\n\t\t\tclass ="field-picker"\n\t\t\ttoggle-field-picker="toggleFieldPicker"\n\t\t\tshow-field-picker="showFieldPicker"\n\t\t\titems="fieldList"\n\t\t\tselect-field="selectField">\n\t\t</qv-cao-field-picker>\n\t</div>\n\n\t<div class="qv-cao-search" ng-class="{ \'hide-field-picker\' : !showFieldPicker, \'search-container-with-context-panel\': caoTweakEnabled, \'search-container-nlu\': nluEnabled }">\n\t\t<div class="qv-cao-insights-header" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<h1 q-translation="cao.CognitiveAssociativeOverlay"></h1>\n\t\t\t<button class=\'lui-button\' tid="go-to-sheet-intro-btn" ng-click="closeAndGoToSheet()">\n\t\t\t\t{{ goToSheetButton }}\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="qv-cao-nlu-intro" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t<h1>{{ introHeader }}</h1>\n\t\t</div>\n\t\t<qv-cao-search field-to-remove="fieldToRemove"\n\t\t\t\t\tfield-to-add="fieldToAdd"\n\t\t\t\t\tupdate-field-picker="updateFieldPicker"\n\t\t\t\t\tclear-field-picker="clearFieldPicker"\n\t\t\t\t\tis-limited ="limitedAccess"\n\t\t\t\t\tdirection="direction"\n\t\t\t\t\tdata-disabled="state === \'INIT\'"\n\t\t\t\t\tnlu-query-info-button-visible="state === \'LOADED\'"\n\t\t\t\t\tnlu-query-info-visible="nluQueryInfoVisible"\n\t\t\t\t\ttoggle-nlu-query-info="toggleNluQueryInfo">\n\t\t</qv-cao-search>\n\t\t<div class="qv-cao-search-info" ng-if="nluEnabled && nluQueryInfoVisible">\n\t\t\t<div class="qv-cao-search-info-debug" ng-if="debug">\n\t\t\t\t<h2>Debug Information</h2>\n\t\t\t\t<p class="qv-cao-search-info-response-text">{{ nluRawResponse | json : spacing }}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<p ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')" class="qv-cao-nlu-intro-suggestion-text" q-translation="cao.search.nlu.suggestedQuestionsText"></p>\n\n\t\t<div class="qv-cao-search-line" ng-if="!nluEnabled || (state !== \'INTRO\' && state !== \'INIT\')"></div>\n\n\t\t<div class="qv-cao-scroll-content">\n\t\t\t<div class="qv-cao-scroll-area">\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'INTRO\' || state === \'INIT\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t\t\t\t<h1>{{ introHeader }}</h1>\n\t\t\t\t\t\t<p>{{ introDescriptionSearch }}</p>\n\t\t\t\t\t\t<p ng-if="state === \'INTRO\'">{{ introDescriptionGenerateInsights }}</p>\n\t\t\t\t\t\t<div class="btns">\n\t\t\t\t\t\t\t<button class=\'lui-button lui-button--large\' tid="go-to-sheet-intro-btn" ng-click="closeAndGoToSheet()" ng-if="state === \'INTRO\' ">\n\t\t\t\t\t\t\t\t{{ goToSheetButton }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class=\'lui-button lui-button--success lui-button--large\' tid="generate-insights-intro-btn" ng-click="loadGraphs()" ng-if="state === \'INTRO\' ">\n\t\t\t\t\t\t\t\t{{ introButton }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="state === \'INIT\'">\n\t\t\t\t\t\t\t<div class="loader">\n\t\t\t\t\t\t\t\t<qv-spinner show="state === \'INIT\'" show-delay="300" center-in-parent="true"></qv-spinner>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p q-translation="cao.loading"></p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'NO_FIELDS\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t\t\t\t<h1>{{ introHeader }}</h1>\n\t\t\t\t\t\t<p>{{ introDescriptionNoFields }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'ERROR\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<h1 q-translation="cao.error.header"></h1>\n\t\t\t\t\t\t<p q-translation="cao.error.description"></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'NOT_FOUND\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<h1 q-translation="cao.error.header"></h1>\n\t\t\t\t\t\t<p q-translation="cao.error.description.notfound"></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-section qv-cao-section-insights">\n\t\t\t\t\t<div class="qv-cao-loading" ng-if="state === \'LOADING\'">\n\t\t\t\t\t\t<div class="spinner-container">\n\t\t\t\t\t\t\t<qv-spinner show="state === \'LOADING\'" show-delay="300" center-in-parent="true"></qv-spinner>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-header"\n\t\t\t\t\t\tng-if="state === \'LOADED\'">\n\t\t\t\t\t\t<p class="qv-cao-section-header-text" ng-if="chartMatches.length === 0">{{resultLabel}}</p>\n\t\t\t\t\t\t<span style="display:none;" ng-show="state === \'LOADED\'" tid="cao-last-loaded-query" test-attribute="{{query}}" test-loaded-count="{{loadedCount}}">\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ul class="lui-tabset qv-cao-section-header-text" ng-if="chartMatches.length > 0">\n\t\t\t\t\t\t\t<li class="lui-tab cao-tab qv-cao-section-header-tab1" ng-class="{\'lui-active\' : chartsToShow.activeTab === \'generated\'}" tabindex="0" ng-click="showGeneratedInsights($event)" ng-keypress="showGeneratedInsights($event)">\n\t\t\t\t\t\t\t  <span class="lui-tab__text qv-cao-section-header-tab1-text">{{numberOfGeneratedInsights}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="lui-tab cao-tab qv-cao-section-header-tab2" ng-class="{\'lui-active\' : chartsToShow.activeTab === \'found\'}" tabindex="0" ng-click="showFoundInsights($event)" ng-keypress="showFoundInsights($event)">\n\t\t\t\t\t\t\t  <span class="lui-tab__text qv-cao-section-header-tab2-text">{{numberOfFoundInsights}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="results-action-container" ng-class="{\'results-action-container--tabset\': chartMatches.length > 0}">\n\t\t\t\t\t\t\t<button class="lui-button clear-insights-btn" ng-if="isClearResultsVisible()" tid="clear-insights-btn" ng-click="clearInsightResults()" q-translation="cao.insights.clear"></button>\n\t\t\t\t\t\t\t<button class="lui-button lui-button--success refresh-insights-btn" ng-if="caoTweakEnabled && learningPerformed" tid="refresh-insights-btn" ng-click="refreshCharts()" q-translation="cao.insight.results.refreshButton"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-results" ng-if="state === \'LOADED\'">\n\t\t\t\t\t\t<qv-cao-insight class="qv-cao-section-result-item" ng-class-odd="\'qv-cao-section-result-item-odd\'" ng-focus="onGridFocus()" ng-blur="onGridBlur()" ng-repeat="chart in chartsToShow.charts | orderBy : \'-chart.relevance\'" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\t\t\t\tgrid-screen-reader="gridScreenReader"\n\t\t\t\t\t\t\tindex="$index"\n\t\t\t\t\t\t\tchart="chart"\n\t\t\t\t\t\t\tapp="::app"\n\t\t\t\t\t\t\tsheets="::sheets"\n\t\t\t\t\t\t\tdebug="::debug"\n\t\t\t\t\t\t\tinteractive="::false"\n\t\t\t\t\t\t\tdirection="direction"\n\t\t\t\t\t\t\tscroll-container="scrollContainer"\n\t\t\t\t\t\t\theader-action="zoomChart"\n\t\t\t\t\t\t\theader-icon="lui-icon--expand"\n\t\t\t\t\t\t\tpermissions="permissions"\n\t\t\t\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\t\t\t\ton-insight-focus="onGridFocus()"\n\t\t\t\t\t\t\ton-insight-blur="onGridBlur()">\n\t\t\t\t\t\t</qv-cao-insight>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-footer" ng-if="state === \'LOADED\' && insightFeedback && hiddenCharts.length > 0 && chartsToShow.activeTab !== \'found\' && !caoTweakEnabled">\n\t\t\t\t\t\t<span q-translation="cao.card.section.hidden,{{hiddenCharts.length}}"></span>\n\t\t\t\t\t\t<a class="lui-fade-button show-more-button" ng-click="showHiddenCharts()">\n\t\t\t\t\t\t\t(<span q-translation="{{ showHidden ? \'cao.card.section.hidden.hide\' : \'cao.card.section.hidden.show\' }}"></span>)\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-results qv-cao-section-hidden" ng-if="state === \'LOADED\' && showHidden && chartsToShow.activeTab !== \'found\' && !caoTweakEnabled">\n\t\t\t\t\t\t<qv-cao-insight class="qv-cao-section-result-item" ng-class-odd="\'qv-cao-section-result-item-odd\'" ng-focus="onGridFocus()" ng-blur="onGridBlur()" ng-repeat="chart in hiddenCharts | orderBy : \'-chart.relevance\'" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\t\t\t\tgrid-screen-reader="gridScreenReader"\n\t\t\t\t\t\t\tindex="$index + renderableCharts.length"\n\t\t\t\t\t\t\tchart="chart"\n\t\t\t\t\t\t\tapp="::app"\n\t\t\t\t\t\t\tsheets="::sheets"\n\t\t\t\t\t\t\tdebug="::debug"\n\t\t\t\t\t\t\tinteractive="::false"\n\t\t\t\t\t\t\tdirection="direction"\n\t\t\t\t\t\t\tscroll-container="scrollContainer"\n\t\t\t\t\t\t\theader-action="zoomChart"\n\t\t\t\t\t\t\theader-icon="lui-icon--expand"\n\t\t\t\t\t\t\tpermissions="permissions"\n\t\t\t\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\t\t\t\ton-insight-focus="onGridFocus()"\n\t\t\t\t\t\t\ton-insight-blur="onGridBlur()">\n\t\t\t\t\t\t</qv-cao-insight>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-cao-footer" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<p>{{ introDescriptionGenerateInsights }}</p>\n\t\t\t<button class=\'lui-button lui-button--success\' tid="generate-insights-intro-btn" ng-click="loadGraphs()">\n\t\t\t\t{{ introButton }}\n\t\t\t</button>\n\t\t</div>\n\t\t<qv-cao-refresh-indicator ng-if="isRefreshIndicatorVisible()" />\n\t</div>\n\n\t<qv-cao-insights-context-panel ng-if="isCaoInsightContextPanelVisible()" app="app" hidden-charts="hiddenCharts" class="context-panel cao-height" tid="cao-context-panel" state="state" insight-feedback="insightFeedback" precedents-enabled="appPrecedents.enabled"></qv-cao-insights-context-panel>\n\t<qv-cao-insights-bottom-panel ng-if="caoTweakEnabled" app="app" insight-feedback="insightFeedback"></qv-cao-insights-bottom-panel>\n</div>\n'},911:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t=function t(){};function e(t){if(t){var e=t.filter(function(t){return t.type.startsWith("master_")});var n=t.filter(function(t){return t.type.startsWith("field")});if(e.length)return e[0];if(n.length)return n[0]}}function n(t,e,n){var i=null;if(e.type.startsWith("master_")){i={libId:e.libId};t.libItems.push(i)}else if("field"===e.type){i={name:e.name};t.fields.push(i)}i&&n&&(i.cond=n)}t.buildDataCollection=function(t){var i={fields:[],libItems:[]};if(t.entities){t.entities.filter(function(t){return"model_element"==t.type}).forEach(function(t){var s=e(t.model_elements);null!=s&&n(i,s)});t.entities.filter(function(t){return"data_value"==t.type&&"filter-category"==t.role}).forEach(function(t){if(t.data_values&&t.data_values.length){var e=t.data_values[0];n(i,e.owner,["==",e.value])}})}if(t.intent){var s=t.intent.name.split("-")[1];s&&(i.analysisTypes=[s])}return i};return t}.apply(e,i),void 0!==s&&(t.exports=s))},912:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(54),n(122),n(94),n(322),n(91),n(90),n(128),n(49),n(103),n(97),n(222),n(105),n(95),n(123),n(223),n(913),n(914),n(915),n(916),n(917),n(918),n(919),n(920),n(934),n(374)],s=function(t,e,n,i,s,a,r,o,l,c,u,d,p,h,f,g,v,m,b,y,S,I,x){var w=["$scope","qvCaoService","qvAccessibilityGridService","$element","$timeout","qvContextMenu","$exportDialog","luiPopover","$window","qvCaoSelectionService",function(e,m,w,q,C,P,k,A,T,E){var $=this;var M=null;var F=[];var O;this.id=o.generateId();this.activeSheet=l.getModel();this.viewDataToggled=false;this.chartLoaded=false;this.contextMenuStatus={open:false};this.lightEditing=c.getFlag("INSIGHT_LIGHT_EDITING");this.generatedChartScreenReaderLabel=r.get("generated.insight.card.screen.reader");this.insightFeedback=c.getFlag("CE_PRECEDENTS");this.insightLearning=c.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=c.getFlag("CAO_TWEAK");this.popupOpen=false;this.shouldFadeToast=false;this.onResize=function(){if($.row>=0&&$.col>=0){var t=$.row;var e=$.col;$.setRowAndColumn();var n=t!==$.row;n=n||e!==$.col;n&&w.updateItem($.id,"CaoInsight",$.row,$.col)}};this.resetFocusOnMouseup=function(){$.isFocused=false};this.setFocusOnInsight=function(t){C(function(){$.isFocused=t})};this.setRowAndColumn=function(){var t=3;T.innerWidth<=1024?t=1:T.innerWidth<=1920&&(t=2);$.row=Math.floor($.index/t);$.col=$.index%t;$.hideConfidenceText=q[0].clientWidth<390};var D=q.find("#sr-cell-status-label");e.accCallback=function(t,e){var n=t===this.col&&e===this.row;$.tabIndex=n?0:-1;n||$.onInsightBlur();C(function(){$.isFocused=!!n})};this.getChartAddMenuItems=function(t){var e=$.chart.isFound();if(e&&!$.isHidden()){var n=$.chart.getSheetsThisChartAppearsOn()[0];t.addItem({translation:$.getSheetName(n),icon:"goto",tid:"cao-external-link",select:function t(){$.gotoSheet(n)}})}var i=[];$.sheets.forEach(function(t){t.permissions&&t.permissions.update&&i.push({translation:t.qMeta.title,tid:"cao-add-to-sheet",icon:"sheet",select:function n(){e&&($.isCopyMenuItemSelected=true);$.addChartToSheet(t.qInfo.qId)}})});if($.permissions&&$.permissions.createSheet&&!$.isHidden()){i.push({translation:"cao.search.add.createNewSheet",tid:"cao-add-to-new-sheet",icon:"plus",select:function t(){$.addToNewSheet()}});if(i.length>0){var s=t.addItem({translation:e?"cao.resultitem.contextMenu.copyItem":"cao.resultitem.contextMenu.addItem",icon:e?"copy":"plus",tid:"cao-add"});i.forEach(function(t){s.addItem(t)})}}};this.getChartMenuItems=function(t){var e={translation:"contextMenu.export",tid:"export",icon:"export",select:function t(){$.exportData()}};$.chart.isDataViewSupported()&&$.interactive&&!$.isHidden()&&t.addItem({translation:$.chart.isViewDataToggled()?"contextMenu.viewSource":"contextMenu.viewData",tid:"toggle-flip-to-table",icon:$.chart.isViewDataToggled()?"back":"table",select:function t(){$.flipToTable()}});if($.chart.isViewDataToggled())$.enableShare&&$.chart.getObject().supportExportData()&&t.addItem(e);else if(!$.isHidden()){$.insightLearning?$.insightLearning&&$.chart.isModified()&&!$.interactive&&!$.caoTweakEnabled&&t.addItem({translation:"cao.insight.inlinerefresh.indicator.action",tid:"cao-learn",icon:"lightbulb",select:function t(){$.refreshAndLearn()}}):t.addItem({translation:"cao.resultitem.info",tid:"cao-open-info",icon:"info",select:function t(){$.openInfo()}});this.getChartAddMenuItems(t);if($.enableShare&&($.chart.getObject().supportExport()||$.chart.getObject().supportExportData())){var n=t.addItem({translation:"contextMenu.exportGroup",tid:"cao-share",icon:"export"});if($.chart.getObject().supportExport()){n.addItem({translation:"contextMenu.export.chart.image",tid:"cao-print-object-image",select:function t(){$.exportToImage()}});n.addItem({translation:"contextMenu.export.chart.pdf",tid:"cao-print-object-pdf",select:function t(){$.exportToPdf()}})}$.enableShare&&$.chart.getObject().supportExportData()&&n.addItem({translation:"contextMenu.export",tid:"export",select:function t(){$.exportData()}})}$.caoTweakEnabled&&$.chart.isGenerated()&&t.addItem({translation:$.isSelected()?"cao.resultitem.finishEditInsightProperties":"cao.resultitem.editInsightProperties",tid:"cao-editInsightProperties",icon:$.isSelected()?"tick":"edit",select:function t(){$.editInsightProperties()}})}$.isHidden()||t.addItem({translation:$.interactive?"cao.resultitem.collapse":"cao.resultitem.expand",tid:"cao-expandCollapseChart",icon:$.interactive?"collapse":"expand",select:function t(){$.headerAction($.chart)}});this.insightFeedback&&$.chart.isGenerated()&&t.addItem({translation:this.getFeedbackText(),tid:"cao-hideSuggestedChart",icon:"view",select:function t(){$.sendUserFeedback()}})};this.setChartBlurHandler=function(){this.chart.getObject().setOnBlurHandler(function(){w.setFocus("CaoInsight",$);$.isFocused=true})};this.editorKeyDownHandler=function(t){switch(t.which){case 27:$.headerAction($.chart).then(function(){$.tabIndex=0;$.isFocused=true});D.text(r.get("Accessibility.Object.CloseFullScreenMode"))}};this.keyDownHandler=function(t){switch(t.which){case w.RIGHT_KEY:case w.LEFT_KEY:case w.UP_KEY:case w.DOWN_KEY:this.contextMenuStatus.open&&P.close();if(0===$.tabIndex){t.stopPropagation();t.preventDefault();this.interactive||w.key(t,"CaoInsight")}break;case 9:if(!$.caoTweakEnabled){t.shiftKey&&P.close();$.onInsightBlur();$.isFocused=!$.isFocused}break;case 13:case 32:P.close();t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(!$.chart.isObjectInvalid()&&!$.isHidden()){if(t.shiftKey){$.isFocused=false;$.headerAction($.chart).then(function(){$.tabIndex=0;$.isFocused=true});D.text(r.get("Accessibility.Object.FullScreenMode"))}else if($.viewDataSupported()&&$.interactive)$.chart.toggleDataView().then(function(){$.chart.isViewDataToggled()&&D.text(r.get("Accessibility.Object.ViewDataMode"))});else if($.chart.isViewDataToggled()&&"function"===typeof this.chart.getObject().dataViewObject.focus){$.isFocused=false;this.chart.getObject().dataViewObject.focus()}else if("function"===typeof this.chart.getObject().focus){$.isFocused=false;this.chart.getObject().focus()}else D.text(r.get("Accessibility.Object.CannotViewData"));D.text("")}break;case 27:if(this.contextMenuStatus.open)P.close();else if(this.chart.isViewDataToggled())this.chart.toggleDataView().then(function(){$.chart.isViewDataToggled()||D.text(r.get("Accessibility.Object.ViewChartMode"))});else if(this.interactive){$.headerAction($.chart).then(function(){$.tabIndex=0;$.isFocused=true});D.text(r.get("Accessibility.Object.CloseFullScreenMode"))}$.isFocused=true;break;case 121:if(t.shiftKey&&!this.contextMenuStatus.open){var n=q.offset();t.pageY=n.top+q.height()/2;t.pageX=n.left+q.width()/2;e.$broadcast("cao.openContextMenu",{event:t,closeFn:function t(){$.isFocused=true},element:q.find(".result-item-graph-container")})}break}};this.onBlur=function(){this.isFocused=false;this.onInsightBlur()};this.$onInit=function(){if(this.interactive){this.tabIndex=0;this.isFocused=true}this.initializeState();this.setRowAndColumn();if(this.interactive)this.tabIndex=0;else{M=w.addItem(this.id,e.accCallback,"CaoInsight",this.col,this.row);this.tabIndex=M?0:-1}d.on("end",this.onResize)};this.$onChanges=function(){this.permissions&&(this.enableShare=this.permissions.exportData)};this.$doCheck=function(){$.caoTweakEnabled&&($.isSelected()?$.chart.setChartInteractionState(g.STATIC):$.chart.setChartInteractionState(g.ANALYSIS))};this.$onDestroy=function(){$.interactive||w.removeItem("CaoInsight",$.id);t(".qv-cao-scroll-content").unbind("scroll",$.closePopups);d.off("end",this.onResize);f.unsubscribe("cao/insights/adapt_chart");$.shouldFadeToastTimer&&C.cancel($.shouldFadeToastTimer)};this.isSelected=function(){var t=E.getSelectedChart();return t&&$.chart&&$.chart===t};this.onChartLoaded=function(){this.chartLoaded=true;if($.caoTweakEnabled){$.chart.activateSelectionWatch(function(){$.chart.isInSelectionState=true});$.chart.deactivateSelectionWatch(function(){$.chart.isInSelectionState=false})}};this.initializeState=function(){t(".qv-cao-scroll-content").bind("scroll",$.closePopups);this.chartLoaded="LOADED"===this.chart.getState();this.chart.refreshChartType();this.matchDetails=this.chart.getMatchDetails()};this.chartClick=function(){!$.chartLoaded||$.headerActionInProgress||$.interactive||$.contextMenuStatus.open||$.isHidden()||$.caoTweakEnabled?$.closePopups():$.headerAction($.chart)};this.editInsightProperties=function(e){if(e){e.preventDefault();e.stopPropagation();$.caoTweakEnabled&&C(function(){t("button.cao-edit-field-header-title.lui-button").first().focus()})}if(this.caoTweakEnabled&&this.chartLoaded&&!this.headerActionInProgress){$.closePopups();if(this.isSelected()){E.clearSelection();v.storageObj($.app.id).contextPanel||f.publish("cao/insight/contextPanelToggled",false);f.publish("cao/insight/editInsightProperties",false)}else{$.isCaoContextPanelVisible||f.publish("cao/insight/contextPanelToggled",true);f.publish("cao/insight/editInsightProperties",true);E.selectChart($.chart)}}};this.sendUserFeedback=function(){$.chart.setModified(false);$.feedbackInProgress=true;$.isHidden()||u.trackEvent(u.customEvents.INSIGHTS_HIDE_CHART_CLICKED,{chart:$.chart.getAnalysisPrecedentId()});$.sendFeedback({chart:$.chart,type:h.Precedents.PrecedentTypes.Dislike}).then(function(){$.interactive&&$.headerAction($.chart)}).finally(function(){$.feedbackInProgress=false})};this.adaptChart=function(t){if($.chart===t){$.chart.getTitle().then(function(t){$.dataMode&&($.dataMode=false);$.title=t});$.shouldFadeToast=false;$.shouldFadeToastTimer=C(function(){$.shouldFadeToast=true},5e3)}};f.subscribe("cao/insights/adapt_chart",$.adaptChart);this.refreshAndLearn=function(){$.feedbackInProgress=true;$.sendFeedback({chart:$.chart,type:h.Precedents.PrecedentTypes.Like}).then(function(){$.interactive&&$.headerAction($.chart)}).finally(function(){u.trackEvent(u.customEvents.INSIGHTS_LEARN_CLICKED);$.feedbackInProgress=false;$.chart.setModified(false)})};this.isHidden=function(){return $.chart.isHidden()};this.getFeedbackText=function(){return $.chart.isHidden()?"cao.card.unhide":"cao.card.hide"};this.addChartToSheet=function(t){$.isChartAdded=true;$.chart.addToSheet(t).then(function(t){L(t)})};this.addToNewSheet=function(){$.chart.addToNewSheet().then(function(t){L(t)})};this.exportToPdf=function(){$.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"PDF",chart:$.chart.getAnalysisPrecedentId()});var t=a.showForObject($.chart.getObject(),"Pdf","object",640,480);t.closed.then(function(){$.setFocusOnInsight(true)});$.closePopups()};this.exportToImage=function(){$.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"IMAGE",chart:$.chart.getAnalysisPrecedentId()});var t=a.showForObject($.chart.getObject(),"Image","object",640,480);t.closed.then(function(){$.setFocusOnInsight(true)});$.closePopups()};this.exportData=function(){$.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"DATA",chart:$.chart.getAnalysisPrecedentId()});var t=k.show($.chart.getModel());t.closed.then(function(){$.setFocusOnInsight(true)});$.closePopups()};this.navigateToSheet=function(t){$.closePopups();m.toggleCao();i.goToSheet(t,Object.keys(s.States)[s.state])};this.gotoSheet=function(){if(1===$.chart.getSheetsThisChartAppearsOn().length)$.navigateToSheet($.chart.getSheetsThisChartAppearsOn()[0]);else{var t=["$scope",function(t){t.appearsOnSheets=$.chart.getSheetsThisChartAppearsOn();t.getSheetName=$.getSheetName;t.gotoSheet=$.navigateToSheet}];N(x,t,q.find(".gotoSheet")[0],"top")}};this.confidenceClosed=function(){$.headerActionInProgress=false};this.confidenceOpened=function(){$.headerActionInProgress=true};this.closeConfidenceRegistration=function(t){O=t};this.closePopups=n.throttle(function(){O&&O();F.forEach(function(t,e){C(function(){t.close();F.splice(e,1)})});$.headerActionInProgress=false},200,{trailing:false});this.openAddPopover=function(){var t=["$scope",function(t){t.sheets=$.sheets;t.addChartToSheet=$.addChartToSheet;t.addToNewSheet=$.addToNewSheet;t.permissions=$.permissions}];N(b,t,q.find(".add-to-button")[0],"bottom")};this.openDebugInformation=function(){var t=["$scope",function(t){t.debugInformation=$.chart.getSearchReport();t.visualization=$.chart.chart.visualization;t.complexity=$.chart.chart.complexity}];N(y,t,q.find(".debug-information")[0],"bottom")};this.openShare=function(){if($.popupOpen)$.popupOpen=false;else{$.popupOpen=true;var t=["$scope",function(t){if(!$.chart.isViewDataToggled()&&$.chart.getObject().supportExport()){t.exportToPdf=$.exportToPdf;t.exportToImage=$.exportToImage}$.chart.getObject().supportExportData()&&(t.exportData=$.exportData)}];N(S,t,q.find(".share")[0],"bottom")}};this.openInfo=function(){var t=function t(){C(function(){$.isFocused=true})};C(function(){$.isFocused=false});var e=["$scope",function(t){t.type=$.chart.chart.visualization.type;t.title=$.chart.isGenerated()?"cao.search.info.title.generated":"cao.search.info.title.found";t.matches=[];$.matchDetails&&$.matchDetails.forEach(function(e){var n="";var i="";if($.chart.isGenerated()){switch(e.matchedOn){case"exactMatch":n=r.get("cao.search.generated.exactMatch");break;case"literalMatch":n=r.get("cao.search.generated.literalMatch");break;case"headMatch":n=r.get("cao.search.generated.headMatch");break;case"headSynonymMatch":n=r.get("cao.search.generated.headSynonymMatch");break;case"headStemMatch":n=r.get("cao.search.generated.headStemMatch");break;case"headStemSynonymMatch":n=r.get("cao.search.generated.headStemSynonymMatch");break;case"partialTokenMatch":n=r.get("cao.search.generated.partialTokenMatch");break;case"substrPartialMatch":n=r.get("cao.search.generated.substrPartialMatch");break;case"semanticMatch":n=r.get("cao.search.generated.semanticMatch");break;case"valueMatch":n=r.get("cao.search.generated.valueMatch");break;default:break}n=n.replace(/\{1\}/g,function(t){return"<b>"+t+"</b>"});i=r.get(n,[$.chart.getSearchReport().search.searchPhrase.text,e.matchedField]);t.matches.push(i)}else if($.chart.isFound()){switch(e.matchedField){case"titleMatch":n=r.get("cao.search.titleMatch");break;case"subTitleMatch":n=r.get("cao.search.subTitleMatch");break;case"footnoteMatch":n=r.get("cao.search.footnoteMatch");break;case"basedOnMatch":n=r.get("cao.search.basedOnMatch");break;default:break}n=n.replace(/\{1\}/g,function(t){return"<b>"+t+"</b>"});i=r.get(n,[$.chart.getSearchReport().search.searchPhrase.text,e.matchedOn]);t.matches.push(i)}});t.formattedSheetLinks=[];var e=r.get("cao.search.info.found.match");e=e.replace(/\{0\}/g,function(t){return"<b>"+t+"</b>"});$.chart.getSheetsThisChartAppearsOn().forEach(function(n){var i=$.getSheetName(n);var s=r.get(e,[i]);t.formattedSheetLinks.push({label:s,sheetId:n})});t.gotoSheet=$.navigateToSheet}];N(I,e,q.find(".info")[0],"bottom",t)};this.getSheetName=function(t){var e=$.sheets.filter(function(e){return e.qInfo.qId===t})[0];if(e)return e.qMeta.title};function N(t,e,n,i,s){var a={template:t,controller:e,dock:i,closeOnResize:true,alignTo:n};var r=A.show(a);F.push(r);r.closed.then(function(){$.headerActionInProgress=false;$.popupOpen=false;"function"===typeof s&&s()});$.headerActionInProgress=true}function L(t){m.scrapeApp();u.trackEvent(u.customEvents.INSIGHTS_ADD_CHART,{chart:$.chart.getAnalysisPrecedentId()});$.closePopups();C(function(){q.find(".result-item-buttons").addClass("animate")});C(function(){$.addedToSheet=true;$.chart.getSheetsThisChartAppearsOn().indexOf(t.id)>-1&&($.isCopyMenuItemSelected?$.addOrCopySuccessText="cao.insight.copiedToSheet":$.addOrCopySuccessText="cao.search.addedToSheet");p.resizeCharts(T);C(function(){q.find(".result-item-added").addClass("animate")})},500);C(function(){q.find(".goto-sheet").addClass("animate")},2500);C(function(){$.addedToSheet=false;q.find(".goto-sheet").removeClass("animate");q.find(".result-item-added").removeClass("animate");q.find(".result-item-buttons").removeClass("animate")},4e3)}this.flipToTable=function(){var t=$.chart.isDataViewSupported()&&$.interactive;if(t){u.trackEvent(u.customEvents.INSIGHTS_FLIP_TO_TABLE);$.chart.toggleDataView();$.dataMode=!$.dataMode}};this.viewDataSupported=function(){return $.chart.isDataViewSupported()};e.$watch(function(){return t(".qv-contextmenu").length},function(){if(0===t(".qv-contextmenu").length)C(function(){$.chart.setChartInteraction(true);$.contextMenuStatus={open:0!==t(".qv-contextmenu").length}},300);else{$.chart.setChartInteraction(false);$.contextMenuStatus={open:true}}});e.$watch(function(){return $.chart.shouldRedraw},function(){$.chart.getTitle().then(function(t){$.dataMode&&($.dataMode=false);$.title=t})})}];var q={transclude:true,template:m,bindings:{chart:"<",app:"<",headerAction:"<",headerIcon:"@",interactive:"<",direction:"<",sheets:"<",alwaysShowHeader:"<",scrollContainer:"<",debug:"<",permissions:"<",index:"<",gridScreenReader:"=",onInsightBlur:"&",onInsightFocus:"&",sendFeedback:"&",isCaoContextPanelVisible:"<"},controller:w};return e.nativeComponent("qvCaoInsight",q)}.apply(e,i),void 0!==s&&(t.exports=s))},913:function(t,e){t.exports='<div class="cao-insight">\n\t<div class="cao-insight-in-selection-overlay" ng-if="$ctrl.chart.isInSelectionState && $ctrl.caoTweakEnabled"></div>\n\t<div class="cao-insight-container" ng-class="{\'zoom\': $ctrl.interactive, \'hidden\': $ctrl.isHidden(), \'generated\': $ctrl.chart.isGenerated(), \'lightedit\': $ctrl.lightEditing && !$ctrl.caoTweakEnabled, \'selected\': $ctrl.isSelected()}" tabindex="{{$ctrl.tabIndex}}"\n\t\tng-keydown="$ctrl.keyDownHandler($event)" focus-when="$ctrl.isFocused" ng-focus="$ctrl.onInsightFocus()" dir="{{$ctrl.direction}}" test-chart-loaded="{{$ctrl.chartLoaded}}">\n\t\t<div class="hidden-screen-reader-label" aria-label="{{$ctrl.gridScreenReader}}"></div>\n\t\t<label class="hidden-screen-reader-label" id="sr-cell-status-label" aria-live="assertive"></label>\n\t\t<div class="result-item-title-bar" dir="{{$ctrl.direction}}" ng-class="{ \'interactive\': $ctrl.interactive}">\n\t\t\t<div class="result-item-title" title="{{ $ctrl.title }}" qva-direction x-dir-setting="{{$ctrl.direction}}" x-dir-text="{{$ctrl.title}}" ng-click="$ctrl.editInsightProperties($event)" tid="insight-chart-edit-button">\n\t\t\t\t<span>{{ $ctrl.title }}</span>\n\t\t\t</div>\n\t\t\t<div class="result-item-title-icons" ng-class="{ \'active\': $ctrl.headerActionInProgress || $ctrl.interactive || $ctrl.isSelected() }" q-title-translation="cao.resultitem.info">\n\t\t\t\t<button ng-click="$ctrl.openInfo()" ng-keyup="$event.keyCode == 13 ? $ctrl.openInfo() : null" class="insight-chart-info-button result-item-title-icon" ng-show="!$ctrl.insightLearning && $ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="info lui-icon lui-icon--info"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.caoTweakEnabled && !$ctrl.isSelected() && $ctrl.chart.isGenerated()" class="result-item-title-icon" ng-click="$ctrl.editInsightProperties($event)" ng-keyup="$event.keyCode == 13 ? $ctrl.editInsightProperties($event) : null"\n\t\t\t\t\tq-title-translation="cao.resultitem.editInsightProperties" tid="insight-chart-edit-properties-button" ng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="lui-icon--edit lui-icon"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.caoTweakEnabled && $ctrl.isSelected()" class="result-item-title-icon" ng-click="$ctrl.editInsightProperties($event)" ng-keyup="$event.keyCode == 13 ? $ctrl.editInsightProperties($event) : null" q-title-translation="cao.resultitem.finishEditInsightProperties"\n\t\t\t\t\ttid="insight-chart-finish-edit-properties-button" ng-show="$ctrl.chartLoaded">\n\t\t\t\t\t<span class="lui-icon--tick lui-icon result-item-title-icon-checkmark"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-click="$ctrl.openShare()" ng-keyup="$event.keyCode == 13 ? $ctrl.openShare() : null" class="result-item-title-icon" ng-if="$ctrl.enableShare" q-title-translation="contextMenu.exportGroup" tid="insight-chart-export-button" ng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="share lui-icon lui-icon--export"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-click="$ctrl.openDebugInformation()" ng-keyup="$event.keyCode == 13 ? $ctrl.openDebugInformation() : null" class="result-item-title-icon" ng-if="$ctrl.debug">\n\t\t\t\t\t<span class="debug-information lui-icon lui-icon--cogwheel"></span>\n\t\t\t\t</button>\n\t\t\t\t<button tabindex="0" ng-if="!$ctrl.interactive" class="result-item-title-icon" ng-click="$ctrl.headerAction($ctrl.chart)" ng-keyup="$event.keyCode == 13 ? $ctrl.headerAction($ctrl.chart) : null" q-title-translation="cao.resultitem.expand" tid="insight-chart-expand-button"\n\t\t\t\t\tng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="qv-cao-item-expand-icon lui-icon" ng-class="$ctrl.headerIcon"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.interactive" class="result-item-title-icon" ng-click="$ctrl.headerAction($ctrl.chart)" ng-keyup="$event.keyCode == 13 ? $ctrl.headerAction($ctrl.chart) : null" q-title-translation="cao.resultitem.collapse" tid="zoomed-chart-shrink-button">\n\t\t\t\t\t<span class="lui-icon--remove lui-icon"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="chart-container">\n\t\t\t<div class="insight">\n\t\t\t\t<qv-cao-insight-chart set-blur-handler="$ctrl.setChartBlurHandler()" get-chart-menu-items="$ctrl.getChartMenuItems(menu)" ng-click="$ctrl.chartClick(id)" class="result-item-graph" chart="$ctrl.chart" app="::$ctrl.app" on-chart-loaded="$ctrl.onChartLoaded()"\n\t\t\t\t\tinteractive="$ctrl.interactive" scroll-container="$ctrl.scrollContainer" object="$ctrl.object" ng-class="{\'clickable\': !$ctrl.contextMenuStatus.open}" context-menu-status="$ctrl.contextMenuStatus" index="$ctrl.index" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="result-item-footer" dir="{{$ctrl.direction}}">\n\t\t\t<div ng-if="$ctrl.chart.isGenerated()" aria-hidden="true" class="result-item-buttons" ng-show="!$ctrl.addedToSheet">\n\t\t\t\t<div class="footer-left" ng-if="!$ctrl.interactive">\n\t\t\t\t\t<cao-confidence ng-if="!$ctrl.caoTweakEnabled" class="result-item-title-icon" data-chart="$ctrl.chart" button-id="confidence_{{$parent.$parent.$parent.$parent.$index}}" ng-show="$ctrl.insightLearning" close-notification="$ctrl.closeConfidenceRegistration(handler)"\n\t\t\t\t\t\topened="$ctrl.confidenceOpened()" closed="$ctrl.confidenceClosed()" hide-text="$ctrl.hideConfidenceText"></cao-confidence>\n\t\t\t\t\t<span class="title generated-insight-title" ng-show="!$ctrl.insightLearning" q-translation="cao.search.card.generated" aria-label="{{$ctrl.generatedChartScreenReaderLabel}}"></span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="footer-right">\n\t\t\t\t\t<div class="feedback-button-container" ng-if="$ctrl.insightFeedback && !$ctrl.caoTweakEnabled" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t<lui-button tid="insight-feedback-button" ng-click="$ctrl.sendUserFeedback()" ng-disabled="!$ctrl.chartLoaded || $ctrl.feedbackInProgress" tabindex="-1" q-translation="{{$ctrl.getFeedbackText()}}"\n\t\t\t\t\t\t\tng-class="{\'btn-state-unhide\': $ctrl.chart.isHidden(), \'btn-state-hide\': !$ctrl.chart.isHidden()}">\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="lui-buttongroup" tid="cao-add-to-sheet-button" ng-if="$ctrl.activeSheet.layout.permissions.update && $ctrl.permissions.createSheet">\n\t\t\t\t\t\t<lui-button ng-click="$ctrl.addChartToSheet()" tabindex="-1" ng-disabled="!$ctrl.chartLoaded || $ctrl.isChartAdded" q-translation="cao.search.addToSheet">\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t\t<lui-button class="add-to-button" tabindex="-1" q-title-translation="cao.search.addToSheetOptions" ng-disabled="!$ctrl.chartLoaded" ng-click="$ctrl.openAddPopover()">\n\t\t\t\t\t\t\t<span class="lui-overlay-button__caret lui-caret"></span>\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="lui-buttongroup" ng-if="!$ctrl.activeSheet.layout.permissions.update && $ctrl.permissions.createSheet">\n\t\t\t\t\t\t<lui-button class="add-to-button" tabindex="-1" q-title-translation="cao.search.addToSheetOptions" ng-disabled="!$ctrl.chartLoaded" ng-click="$ctrl.openAddPopover()">\n\t\t\t\t\t\t\t<span q-translation="cao.search.addToSheet"></span>\n\t\t\t\t\t\t\t<span class="lui-overlay-button__caret lui-caret"></span>\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.chart.isFound()" ng-class="{ \'itemAdded\': $ctrl.addedToSheet }" class="result-item-added result-item-buttons">\n\t\t\t\t<span>\n\t\t\t\t\t<div class="goto-sheet" ng-show="$ctrl.addedToSheet">\n\t\t\t\t\t\t<span class="tick-highlight" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t\t<span class="lui-icon lui-icon--tick"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span q-translation="{{$ctrl.addOrCopySuccessText}}"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t\t<a ng-click="$ctrl.gotoSheet($ctrl.chart.getSheetsThisChartAppearsOn()[0])" q-title-translation="Storytelling.Sheet.GoToSheet">\n\t\t\t\t\t<span ng-if="$ctrl.chart.getSheetsThisChartAppearsOn().length === 1" x-dir-text="{{ $ctrl.getSheetName($ctrl.chart.getSheetsThisChartAppearsOn()[0]) }}" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t{{ $ctrl.getSheetName($ctrl.chart.getSheetsThisChartAppearsOn()[0]) }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span ng-if="$ctrl.chart.getSheetsThisChartAppearsOn().length > 1" q-translation="cao.search.multipleSources">\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="gotoSheet lui-icon lui-icon--goto" qva-direction x-dir-setting="{{$ctrl.direction}}"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="editor cao-chart-light-editing" ng-if="$ctrl.lightEditing && $ctrl.interactive && $ctrl.chart.isGenerated() && !$ctrl.caoTweakEnabled" ng-keydown="$ctrl.editorKeyDownHandler($event)">\n\t\t\x3c!-- TODO: move to directive --\x3e\n\t\t<div class=\'qv-panel-properties\' style="overflow: auto;">\n\t\t\t<qv-cao-insight-editor chart="$ctrl.chart" app="$ctrl.app" />\n\t\t</div>\n\t</div>\n\t<div class="cao-chart-refresh-indicator-container" ng-class="{\'visible\': $ctrl.insightLearning && $ctrl.chart.isModified() && !$ctrl.interactive && !$ctrl.shouldFadeToast, \'fade\': $ctrl.shouldFadeToast}" ng-if="$ctrl.insightLearning && $ctrl.chart.isModified() && !$ctrl.interactive" ng-click="$ctrl.adaptChart($ctrl.chart)">\n\t\t<div class="cao-chart-refresh-indicator-content">\n\t\t\t<div class="cao-chart-refresh-top">\n\t\t\t\t<span class="lui-icon lui-icon--close" ng-click="$ctrl.chart.setModified(false)"></span>\n\t\t\t</div>\n\t\t\t<div class="cao-chart-text" ng-class="{\'cao-chart-text-no-refresh\': $ctrl.caoTweakEnabled}">\n\t\t\t\t<div q-translation="cao.insight.inlinerefresh.indicator.body.lineone" />\n\t\t\t\t<div q-translation="cao.insight.inlinerefresh.indicator.body.linetwo" />\n\t\t\t</div>\n\t\t\t<div class="cao-chart-refresh-indicator-action-container">\n\t\t\t\t<div class="cao-chart-refresh-action">\n\t\t\t\t\t<a class="cao-chart-refresh" ng-click="$ctrl.refreshAndLearn()" q-translation="cao.insight.inlinerefresh.indicator.action" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},914:function(t,e){t.exports='<lui-popover class="cao-add-popover">\n\t<div class="lui-popover__body lui-nopad popover-body">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action" ng-click="addChartToSheet(sheet.qInfo.qId)" ng-repeat="sheet in sheets"\n\t\t\t ng-if="sheet.permissions.update">\n\t\t\t\t<span class="lui-list__aside lui-icon lui-icon--sheet"></span>\n\t\t\t\t<span class="lui-list__text">{{ sheet.qMeta.title }}</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-click="addToNewSheet()">\n\t\t\t\t<span class="lui-list__aside lui-icon lui-icon--plus"></span>\n\t\t\t\t<span class="lui-list__text" q-translation="cao.search.add.createNewSheet"></span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},915:function(t,e){t.exports='<lui-popover class="cao-debug-popover">\n\t<lui-popover-body>\n\t\t<div>\n\t\t\t<b>Debug Information</b>\n\t\t\t<pre>{{ debugInformation | json : spacing }}</pre>\n\t\t\t<b ng-if="visualization.type === \'generated\'">Visualization</b>\n\t\t\t<pre ng-if="visualization.type === \'generated\'">{{ visualization | json : spacing }}</pre>\n\t\t\t<b ng-if="visualization.type === \'generated\'">Complexity</b>\n\t\t\t<pre ng-if="visualization.type === \'generated\'">Estimate: {{ complexity }}</pre>\n\n\t\t\t<b ng-if="visualization.type === \'found\'">Chart</b>\n\t\t\t<pre ng-if="visualization.type === \'found\'">\n{\n  chartId: {{ visualization.chartId }},\n  appearsOnSheets: {{ visualization.appearsOnSheets | json : spacing }}}\n\t\t\t</pre>\n\t\t</div>\n\t</lui-popover-body>\n</lui-popover>\n'},916:function(t,e){t.exports='<lui-popover class="cao-share-popover">\n\t<div class="lui-popover__body lui-nopad popover-body">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportToImage" ng-click="exportToImage()" tid="share-popover-export-image">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export.chart.image"></a>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportToPdf" ng-click="exportToPdf()" tid="share-popover-export-pdf">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export.chart.pdf"></a>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportData" ng-click="exportData()" tid="share-popover-export-data">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export"></a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},917:function(t,e){t.exports='<lui-popover class="cao-info-popover">\n    <lui-popover-body>\n        <div>\n            <ul>\n                <li class="cao-popover-title" q-translation="{{ title }}"></li>\n                <li ng-repeat="match in matches" ng-bind-html="match"></li>\n                <li ng-if="matches.length === 0 && type === \'generated\'" q-translation="cao.search.info.body.generated"></li>\n                <li ng-repeat="sheet in formattedSheetLinks">\n                    <a class="gotoSheet" ng-click="gotoSheet(sheet.sheetId)">\n                        <span ng-bind-html="sheet.label"></span>\n                        &nbsp; <span class="lui-icon lui-icon--goto"></span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </lui-popover-body>\n</lui-popover>\n'},918:function(t,e){t.exports='<lui-popover class="cao-goto-sheet-popover">\n    <div class="lui-popover__body lui-nopad popover-body">\n        <ul class="lui-list">\n            <li class="lui-list__item lui-list__action" ng-repeat="sheet in appearsOnSheets track by $index" ng-click="gotoSheet(sheet)">\n                <span class="lui-list__aside lui-icon lui-icon--goto"></span>\n                <span class="lui-list__text">{{ getSheetName(sheet) }}</span>\n            </li>\n        </ul>\n    </div>\n</lui-popover>'},919:function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){var e={restrict:"A",scope:{focusWhen:"="},controller:["$scope","$element",function(t,e){t.$watch("focusWhen",function(t){t?e.focus():false===t&&e.blur()})}]};t.directive("focusWhen",function(){return e})}.apply(e,i),void 0!==s&&(t.exports=s))},920:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(91),n(103),n(49),n(196),n(187),n(178),n(921),n(922),n(923),n(924),n(925),n(926),n(927),n(930),n(218),n(932),n(221)],s=function(t,e,n,i,s,a,r,o,l,c,u,d){var p=["qvCaoSearchService","qvCaoService","qvCaoChartService","qvAppDetailsService","luiPopover",function(t,l,p,h,f){var g=this;var v=[];var m;this.insightLearning=s.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=s.getFlag("CAO_TWEAK");this.$onInit=function(){h.get().then(function(t){m=t.model.app.published||!t.model.permissions.update});e.subscribe(a.PUBSUB_TOPIC,I)};this.$onDestroy=function(){e.unsubscribe(a.PUBSUB_TOPIC)};function b(t){g.chart.setModified(g.chart.isModified()||!t&&g.chart.getMatches().filter(function(t){return t.isDirty}).length>0);g.chart.adaptChart(g.chart.isModified()).then(function(){y()});e.publish("cao/insights/adapt_chart",g.chart)}function y(){v.forEach(function(t,e){t.popup.close();v.splice(e,1)})}function S(t){v.forEach(function(e,n){t===e.id&&v.splice(n,1)})}function I(t){var e=g.chart.getMatches();var n=t.slotA;var s=t.slotB;var a,r;e.forEach(function(t,e){t.slot===n?a=e:t.slot===s&&(r=e)});var o=e[r];e[r]=e[a];e[a]=o;e[r].slot=s;e[a].slot=n;i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_DRAG_AND_DROP,{chart:g.chart.getAnalysisPrecedentId()});b(true)}this.toggleMatchDetails=function(t){t.expanded=!t.expanded};this.getFields=function(){return g.chart.getMatches().filter(function(t){return!t.slotRole})};this.getMeasures=function(){return g.chart.getMatches().filter(function(t){return t.slotRole===a.MEASURE})};this.getDimensions=function(){return g.chart.getMatches().filter(function(t){return t.slotRole===a.DIMENSION})};this.getDimensionCount=function(){return g.getDimensions().length};this.getMeasureCount=function(){return g.getMeasures().length};this.getFieldCount=function(){return g.getFields().length};this.hasMeasures=function(){return g.chart.getMatches().filter(function(t){return t.slotRole===a.MEASURE}).length>0};this.hasDimensions=function(){return g.chart.getMatches().filter(function(t){return t.slotRole===a.DIMENSION}).length>0};this.applyLearning=function(){p.refreshInsights().then(function(t){var n=t.recommendations.filter(function(t){return t.chart.visualization.visualization.analysis.analysis===g.chart.chart.visualization.visualization.analysis.analysis})[0];if(n){g.chart.chart.visualization=n.chart.visualization;delete g.chart.rendered;g.chart.shouldRedraw=true;g.chart.recalculateConfidence=true}else g.chart.invalidFromLearning=true;l.setRefreshIndicatorVisibility(true);e.publish("cao/insight/learning_applied")})};this.changeAggr=function(t,e){g.chart.getMatches().forEach(function(n){if(n.slot===t.slot){n.isDirty=true;n.aggr=e}});i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_AGGREGATION_CHANGE,{chart:g.chart.getAnalysisPrecedentId()});b()};this.changeField=function(t,e){g.lastAggr=t.aggr||g.lastAggr;g.chart.getMatches().forEach(function(n){if(n.slot===t.slot){n.isDirty=true;g.caoTweakEnabled&&g.toggleMatchDetails(n);if(e.libId){n.libId=e.libId;n.libIdLabel=e.libIdLabel;delete n.field;delete n.aggr}else{n.field=e.name;n.slotRole!==a.MEASURE||n.aggr||(n.aggr=g.lastAggr);delete n.libId;delete n.libIdLabel}}});i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_FIELD_CHANGE,{chart:g.chart.getAnalysisPrecedentId()});b()};this.showChangeAggr=function(t,e){var n=["$scope",function(t){t.field=e;t.change=g.changeAggr;t.wrappedAggregations=r.COMMON_FUNCTIONS.map(function(t){return{text:o.getFormattedAggregation(t),action:function n(){g.changeAggr(e,o.getFormattedAggregation(t))}}})}];x(c,n,t.currentTarget,"bottom","cao-changeAggregation_"+e.slot)};this.canChangeAggregation=function(t){if(!t.restrictions)return true;var e=t.restrictions.filter(function(t){return"aggregation"===t.name})[0];return!e};this.showChangeField=function(e,n,i){var s=["$scope",function(e){var s=[];var r=[];var o=[];var l=n.restrictions?n.restrictions.filter(function(t){return"candidates"==t.name})[0]:void 0;function c(t){if(!l)return true;return l.types.indexOf(t)>-1}function u(t){s=c("eField")?t.filter(function(t){return!t.masterItem}):[];r=c("eDimLib")?t.filter(function(t){return t.masterItem&&t.classifications.filter(function(t){return t===a.DIMENSION}).length>0}):[];o=c("eMsrLib")?t.filter(function(t){return t.masterItem&&t.classifications.filter(function(t){return t===a.MEASURE}).length>0}):[];e.field=n;e.fields=s;if(i===a.DIMENSION){e.dimensions=r;e.measures=[]}else if(i===a.MEASURE){e.measures=o;e.dimensions=[]}else{e.dimensions=r;e.measures=o}}function d(n){var i=t.getMatchingFields(n,m);e.highlight=n;u(i)}var p=t.getMatchingFields(void 0,m);u(p);e.change=g.changeField;e.filterFields=d}];x(u,s,e.currentTarget,"bottom","cao-changeField_"+n.slot);g.caoTweakEnabled&&g.toggleMatchDetails(n)};this.showAnalysisInfo=function(t){var e=["$scope",function(t){var e=g.chart.chart.visualization.visualization.analysis.analysis;var i=n.get("cao.insight.analysis."+e);t.analysisTitle=n.get("cao.insight.analysis.popover.title",[i]);t.analysisDescription=n.get("cao.insight.analysis."+e+".description")}];x(d,e,t.currentTarget,"left","cao_analysisPopover")};function x(t,e,n,i,s){if(v.filter(function(t){return t.id===s})[0]){y();return}y();var a={template:t,controller:e,dock:i,alignTo:n,closeOnResize:true,outsideIgnore:s};var r=f.show(a);r.closing.then(function(){S(s)});r.closed.then(function(){n.focus()});v.push({id:s,popup:r})}}];var h={transclude:true,template:l,bindings:{chart:"=",app:"="},controller:p};return t.nativeComponent("qvCaoInsightEditor",h)}.apply(e,i),void 0!==s&&(t.exports=s))},921:function(t,e){t.exports='<div class="title" q-translation="cao.card.title.editor.title" ng-if="!$ctrl.caoTweakEnabled" />\n<div class="cao-editor-field-list">\n    <div class="header">\n        <span q-translation="cao.editor.title" />\n        <a ng-click="$ctrl.showAnalysisInfo($event)" id="cao_analysisPopover" qva-outside-ignore-for="cao_analysisPopover">\n            <span class="lui-icon lui-icon--help" />\n        </a>\n    </div>\n    <div class="analysis-type">\n        <span tid="analyis-type-string" q-translation="{{\'cao.insight.analysis.\' + $ctrl.chart.getChartType()}}" />\n    </div>\n\n    \x3c!--- GENERIC FIELDS --\x3e\n    <div class="header" ng-if="!$ctrl.hasDimensions() && !$ctrl.hasMeasures()">\n        <span q-translation="cao.fieldPicker.tab.fields">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.getFields()">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.fieldCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match)" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getFieldCount() > 1"\n                q-title-translation="Common.Move"></i>\n        </div>\n\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_field_{{$index}}" chart="$ctrl.chart" ng-show="match.expanded" />\n    </div>\n\n\n    \x3c!--- DIMENSIONS--\x3e\n    <div class="header" ng-if="$ctrl.hasDimensions()">\n        <span q-translation="cao.fieldPicker.tab.dimensions">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.getDimensions()">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.dimensionCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match, \'dimension\')" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getDimensionCount() > 1"\n                q-title-translation="Common.Move"></i>\n        </div>\n\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_dimension_{{$index}}" chart="$ctrl.chart"\n            ng-show="match.expanded" />\n    </div>\n\n    \x3c!--- MEASURES --\x3e\n    <div class="header cao-msrs-header" ng-if="$ctrl.hasMeasures()">\n        <span q-translation="cao.fieldPicker.tab.measures">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.chart.getMatches()" ng-if="match.slotRole === \'measure\'">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.measureCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Change aggregation dropdown --\x3e\n            <button ng-if="match.aggr" class="lui-button cao-edit-field-header-aggregation" ng-click="$ctrl.showChangeAggr($event, match)"\n                ng-disabled="!$ctrl.canChangeAggregation( match )" qva-outside-ignore-for="{{\'cao-changeAggregation_\' + match.slot}}" >\n                {{ match.aggr.charAt(0).toUpperCase() + match.aggr.substring(1) }}\n            </button>\n            \x3c!-- Header content --\x3e\n\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match, \'measure\')" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getMeasureCount() > 1"\n                q-title-translation="Common.Move"></i>\n\n        </div>\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_measure_{{$index}}" chart="$ctrl.chart" ng-show="match.expanded" />\n    </div>\n</div>'},922:function(t,e){t.exports='<lui-popover class="cao-change-aggr-popover cao-popover">\n    <div class="lui-popover__body lui-nopad popover-body">\n            <qv-action-list items="wrappedAggregations"></qv-action-list>\n    </div>\n</lui-popover>\n\n'},923:function(t,e){t.exports='<lui-popover class="cao-change-field-popover cao-popover">\n    <object-add-typeahead>\n        <lui-popover-header>\n            <div class="lui-input-group">\n                <input class="lui-input lui-input-group__input" type="text" autocomplete="off"\n                    ng-model="search.term" qva-focus="autoFocus" ng-change="filterFields(search.term)" maxlength="255"\n                    object-add-typeahead-input />\n            </div>\n        </lui-popover-header>\n        <div class="lui-popover__body lui-nopad popover-body" object-add-typeahead-menu>\n\n            <ul class="lui-list">\n                <div ng-if="dimensions.length > 0" class="object-add-popover-list-header" q-translation="Common.Dimensions"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="d in dimensions" on-select="change(field, d)"\n                    object-add-typeahead-item="d">\n                    <span class="lui-list__text" qve-highlight text="{{ d.libIdLabel }}" query="highlight"></span>\n                </li>\n\n                <div ng-if="measures.length > 0" class="object-add-popover-list-header" q-translation="Common.Measures"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="m in measures" on-select="change(field, m)"\n                    object-add-typeahead-item="m">\n                    <span class="lui-list__text" qve-highlight text="{{ m.libIdLabel }}" query="highlight"></span>\n                </li>\n\n                <div ng-if="fields.length > 0" class="object-add-popover-list-header" q-translation="Common.Fields"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="f in fields" on-select="change(field, f)"\n                    object-add-typeahead-item="f">\n                    <span class="lui-list__text" qve-highlight text="{{ f.displayNameTokens[0].text }}" query="highlight"></span>\n                </li>\n            </ul>\n            <div class="no-hits" ng-if="(fields.length === 0) && (measures.length === 0) && (dimensions.length == 0)">\n                <span><i q-translation="Toolbox.Search.Nohits" /></span>\n            </div>\n        </div>\n\n    </object-add-typeahead>\n</lui-popover>'},924:function(t,e){t.exports='<lui-popover class="cao-popover cao-analysis-info-popover">\n    <lui-popover-body>\n        <div class="popover-body cao-analysis-info-popover-body">\n            <div class="analysis-header">\n                {{analysisTitle}}\n            </div>\n            {{analysisDescription}}\n        </div>\n    </lui-popover-body>\n</lui-popover>\n'},925:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(196)],s=function(t,e,n){t.directive("qvCaoFieldDropZone",function(){return{restrict:"A",replace:true,scope:{},link:function t(i,s){function a(t,e){return e===t}s.droppable({accept:function t(e){var n=e[0].getAttribute("data-slot");var i=e[0].getAttribute("data-slot-role");var r=s[0].getAttribute("data-slot");var o=s[0].getAttribute("data-slot-role");if(n===r)return false;if(a(o,i)&&a(i,o))return true;return false},drop:function t(i,a){var r=a.draggable[0].getAttribute("data-slot");var o=s[0].getAttribute("data-slot");e.publish(n.PUBSUB_TOPIC,{slotA:r,slotB:o})}})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},926:function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvCaoFieldDraggable",function(){return{restrict:"A",replace:true,link:function t(e,n){n.draggable({revert:"invalid",axis:"y",handle:".cao-edit-sortable-handle",helper:"clone",revertDuration:250,zIndex:1e3})}}})}.apply(e,i),void 0!==s&&(t.exports=s))},927:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(928),n(929),n(373)],s=function(t,e,n){t.nativeComponent("qvCaoFieldDetails",{bindings:{match:"<",chart:"<",applyCallback:"<",fieldId:"@"},controller:["qvCaoLearningConfidenceService","luiPopover",function(t,e){var i;var s;this.$onInit=function(){this.showExpression=!this.match.libId;this.searchReport=this.chart.getSearchReport();this.matchDetails=this.chart.getMatchDetails()};this.getDisplayExpressionForMatch=function(t){return t.libId?t.libIdLabel:t.aggr?t.aggr+"("+t.field+")":t.field};this.showFieldInfo=function(a){if(i&&s){s.close();return}var r={reasons:t.getReasonForSelectingField(this.match,this.searchReport,this.matchDetails,true)};var o={template:n,input:r,controller:[function(){}],dock:"bottom",alignTo:a.currentTarget,closeOnResize:true,outsideIgnore:this.fieldId+"_why"};i=true;s=e.show(o);s.closed.then(function(){i=false})}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},928:function(t,e){t.exports='<div class="cao-field-details-recommended" ng-hide="$ctrl.match.isDirty">\n    <span q-translation="cao.insight.editor.details.recommendation.why"/>\n    <a tid="{{$ctrl.fieldId}}_why" id="{{$ctrl.fieldId}}_why" ng-click="$ctrl.showFieldInfo($event)" qva-outside-ignore-for="{{$ctrl.fieldId}}_why">\n        <span class="lui-icon lui-icon--help"/>\n    </a>\n</div>\n<div class="cao-field-details-learn">\n    <cao-help-learn data-match="$ctrl.match" data-apply-callback="$ctrl.applyCallback" button-id="{{$ctrl.fieldId}}" chart="$ctrl.chart"></cao-help-learn>\n</div>\n'},929:function(t,e){t.exports='<lui-popover x-arrow="arrow">\n        <div class="cao-confidence-body">\n            <div class="cao-confidence-body-heading" q-translation="cao.confidence.heading"></div>\n            <ul class="cao-confidence-reason-list">\n                <li class="cao-confidence-reason-item" ng-repeat="reason in input.reasons.learned">\n                    <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true" ng-hide="reason.priority === 0"></span>\n                    <div class="cao-confidence-reason-item__text" ng-bind-html="reason.text"></div>\n                </li>\n                <li class="cao-confidence-reason-item" ng-repeat="reason in input.reasons.search">\n                        <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true" ng-hide="reason.priority === 0"></span>\n                        <div class="cao-confidence-reason-item__text" ng-bind-html="reason.text"></div>\n                    </li>\n            </ul>\n        </div>\n</lui-popover>'},930:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(103),n(196),n(931),n(168)],s=function(t,e,n,i,s,a){t.nativeComponent("caoHelpLearn",{bindings:{applyCallback:"<",match:"<",chart:"<",buttonId:"@"},controller:["$element","luiPopover",function(t,r){var o=this;var l;var c=false;var u=false;o.learningOptions=[];var d=new a;var p=void 0;var h=void 0;var f=void 0;o.$onChange=function(){p=void 0;h=void 0;f=void 0};o.$doCheck=function(){if(o.match.field!==p||o.match.libId!==h||o.match.aggr!==f){p=o.match.field;h=o.match.libId;f=o.match.aggr;if(!u){this.searchReport=this.chart.getSearchReport();this.chartType=this.chart.getChartType();u=true}d.getDislikedItems().then(function(t){t&&t.length>0&&(o.dislikedFields=t[0].nodes);o.updateLearningOptions()})}};var g=function t(e){if(o.dislikedFields&&o.dislikedFields.length>0)return o.dislikedFields.filter(function(t){return t.field?t.field.name===e:t.libItem.libId===e})[0]};o.updateLearningOptions=function(){o.learningOptions=[];if(!o.match)return;var t=g(o.match.field||o.match.libId);if(t){o.learningOptions.push({text:e.get("cao.helpuslearn.useagain"),icon:"plus",action:function e(){d.undislikeItem(t.id).then(function(){l.close();o.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED)}});return}o.match.libId||o.match.isDirty||(o.match.slotRole===i.MEASURE?o.learningOptions.push({text:e.get("cao.helpuslearn.not_a_measure"),icon:"unapprove",action:function t(){d.defineDimension({expr:"["+o.match.field+"]"}).then(function(){l.close();o.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_NOT_A_MEASURE_CLICKED)}}):o.match.slotRole===i.DIMENSION&&o.learningOptions.push({text:e.get("cao.helpuslearn.not_a_dimension"),icon:"unapprove",action:function t(){d.defineMeasure({expr:"unknown(["+o.match.field+"])"}).then(function(){l.close();o.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_NOT_A_DIMENSION_CLICKED)}}));o.learningOptions.push({text:e.get("cao.helpuslearn.neveruse"),icon:"minus",action:function t(){if(o.match.field){n.trackEvent(n.customEvents.INSIGHTS_NEVER_PROPOSE_FIELD_CLICKED);d.dislikeField({name:o.match.field}).then(function(){l.close();o.applyCallback()})}else if(o.match.libId){n.trackEvent(n.customEvents.INSIGHTS_NEVER_PROPOSE_LIB_CLICKED);d.dislikeLibItem({name:o.match.libId}).then(function(){l.close();o.applyCallback()})}}});o.isDisabled=0===o.learningOptions.length||o.chart.invalidFromLearning};this.displayHelpUsLearn=function(){if(c&&l){l.close();return}var e={template:s,input:o,controller:[function(){}],dock:"bottom",alignTo:t[0],closeOnResize:true,outsideIgnore:o.buttonId};c=true;l=r.show(e);n.trackEvent(n.customEvents.INSIGHTS_HELP_US_LEARN_CLICKED,{chart:o.chart.getAnalysisPrecedentId()});l.closed.then(function(){document.getElementById(o.buttonId).focus();c=false})}}],template:['<button class="lui-button" ng-click="$ctrl.displayHelpUsLearn()" ng-disabled="$ctrl.isDisabled"  tid="{{$ctrl.buttonId}}" id="{{$ctrl.buttonId}}" qva-outside-ignore-for="{{$ctrl.buttonId}}">','<span class="lui-button__icon  lui-icon  lui-icon--lightbulb" ></span><span class="lui-button__text" q-translation="cao.fieldPicker.helpuslearn.button"></span>',"</button>"].join("")})}.apply(e,i),void 0!==s&&(t.exports=s))},931:function(t,e){t.exports='<lui-popover x-arrow="arrow">\n    <div class="cao-help-learn-body">\n        <qv-action-list items="input.learningOptions"></qv-action-list>\n    </div>\n</lui-popover>'},932:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(933),n(167)],s=function(t,e,n){t.nativeComponent("qvActionList",{bindings:{items:"<"},controller:["$element","$timeout",function(t,e){var i=this;i.selectedIndex=-1;var s;this.$postLink=function(){s=t.find(".lui-list");s.on("keydown",r)};this.$onDestroy=function(){s.off("keydown",r)};this.selectItem=function(t){t.action()};function a(t){e(function(){i.selectedIndex=t})}function r(t){if(t.keyCode===n.ARROW_DOWN){t.preventDefault();i.selectedIndex<i.items.length-1?a(i.selectedIndex+1):a(0)}else if(t.keyCode===n.ARROW_UP){t.preventDefault();0===i.selectedIndex?a(i.items.length-1):a(i.selectedIndex-1)}else if(t.keyCode===n.ENTER||t.keyCode===n.TAB){t.preventDefault();e(function(){i.selectItem(i.items[i.selectedIndex])},0)}}}],template:e})}.apply(e,i),void 0!==s&&(t.exports=s))},933:function(t,e){t.exports='\n    <ul class="lui-list" qva-focus="true" tabindex="0">\n        <li ng-repeat="item in $ctrl.items" class="lui-list__item lui-list__action" ng-class="{ \'lui-disabled\': item.disabled, \'lui-active\': $index === $ctrl.selectedIndex }"\n            ng-click="item.disabled || $ctrl.selectItem(item)">\n            <span class="lui-list__aside  lui-icon lui-icon--{{item.icon}}" ng-if="item.icon"></span>\n            <span class="lui-list__text" tid="{{item.tid}}" q-translation="{{item.text}}"></span>\n        </li>\n    </ul>'},934:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(103),n(935),n(373)],s=function(t,e,n,i){t.nativeComponent("caoConfidence",{bindings:{buttonId:"@",chart:"<",hideText:"<",closeNotification:"&",opened:"&",closed:"&"},controller:["luiPopover","qvCaoLearningConfidenceService",function(t,s){var a=this;var r;var o=false;a.$onInit=function(){l();a.closeNotification({handler:function t(){if(r){r.close();o=false}}})};a.$doCheck=function(){if(a.chart.recalculateConfidence){a.chart.recalculateConfidence=false;l()}};function l(){a.confidenceReasons={learned:[],search:[]};a.confidence=s.determineConfidence(a.chart);a.confidenceTitle=e.get("cao.confidence.title_"+a.confidence);if("empty"===a.confidence)a.emptyConfidence=true;else{var t=a.chart.getMatchDetails();a.chart.getMatches().forEach(function(e){var n=s.getReasonForSelectingField(e,a.chart.getSearchReport(),t,false);a.confidenceReasons.learned=a.confidenceReasons.learned.concat(n.learned);a.confidenceReasons.search=a.confidenceReasons.search.concat(n.search)})}}a.displayConfidenceInfo=function(){var e=this;if(e.emptyConfidence)return;if(o&&r){r.close();return}var s={template:i,input:this,controller:[function(){}],dock:"bottom",alignTo:document.getElementById(e.buttonId),closeOnResize:true,outsideIgnore:this.buttonId};o=true;r=t.show(s);r.opened.then(function(){if(e.opened){n.trackEvent(n.customEvents.INSIGHTS_CONFIDENCE_INDICATOR_CLICKED,{chart:e.chart.getAnalysisPrecedentId()});e.opened()}});r.closed.then(function(){e.closed&&e.closed();o=false})}}],template:['<span class="cao-confidence-container" q-title-translation="cao.confidence.title" aria-label="{{$ctrl.confidenceTitle}}"  >','<span class="cao-confidence-{{$ctrl.confidence}}-icon" ng-class="{\'no-reasons\': $ctrl.emptyConfidence}" ng-click="$ctrl.displayConfidenceInfo()" tid="{{$ctrl.buttonId}}" id="{{$ctrl.buttonId}}" qva-outside-ignore-for="{{$ctrl.buttonId}}"></span>',"</span>"].join("")})}.apply(e,i),void 0!==s&&(t.exports=s))},935:function(t,e){t.exports='<lui-popover x-arrow="arrow">\n    <div class="cao-confidence-body">\n        \x3c!-- <div class="cao-confidence-body-heading" q-translation="cao.confidence.heading"></div> --\x3e\n        <div class="cao-confidence-empty" ng-show="input.emptyConfidence" q-translation="cao.confidence.emptyconfidence"></div>\n\n        <div class="cao-confidence-body-heading-small" q-translation="cao.confidence.learnedbycognitive.title" ng-show="input.confidenceReasons.learned.length > 0"></div>\n        <ul class="cao-confidence-reason-list" ng-hide="input.emptyConfidence">\n            <li class="cao-confidence-reason-item" ng-repeat="reason in input.confidenceReasons.learned">\n                <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true"></span>\n                <div class="cao-confidence-reason-item__text" ng-bind-html="reason.field"></div>\n            </li>\n        </ul>\n\n        <div class="cao-confidence-body-heading-small" q-translation="cao.confidence.relevanttoserach.title" ng-show="input.confidenceReasons.search.length > 0"></div>\n        <ul class="cao-confidence-reason-list" ng-hide="input.emptyConfidence">\n            <li class="cao-confidence-reason-item" ng-repeat="reason in input.confidenceReasons.search">\n                <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true"></span>\n                <div class="cao-confidence-reason-item__text" ng-bind-html="reason.field"></div>\n            </li>\n        </ul>\n\n    </div>\n</lui-popover>'},936:function(t,e){t.exports='<div class="cao-refresh-indicator-container">\n    <div class="cao-refresh-indicator-content">\n        <div q-translation="cao.insight.refresh.indicator.body" />\n        <div class="cao-refresh-action">\n            <a class="cao-refresh" ng-click="$ctrl.refresh()" q-translation="cao.insight.refresh.indicator.action" />\n        </div>\n    </div>\n</div>\n'},937:function(t,e,n){"use strict";var i,s;!(i=[n(10),n(11),n(48),n(54),n(938),n(49),n(111)],s=function(t,e,n,i,s,a){var r={transclude:true,template:s,bindings:{chart:"=",app:"<",interactive:"<",scrollContainer:"<",getChartMenuItems:"&",setBlurHandler:"&",onChartLoaded:"&",contextMenuStatus:"=",index:"<"},controller:["$element","$document","$window","$timeout","$scope","qvCaoRenderService",function(s,r,o,l,c,u){var d=this;d.isLoadingCardImageFlag=a.getFlag("LOADING_CARD_IMAGES");d.caoTweakEnabled=a.getFlag("CAO_TWEAK");function p(){return d.interactive?-99:d.chart.getComplexity()?d.chart.getComplexity():d.index}this.$onInit=function(){this.hasBlurHandler=false;this.isDestroyed=false;this.scrollHander=i.debounce(this.renderChartIfInView,300);this.initializeState()};this.$doCheck=function(){if((this.interactive||this.caoTweakEnabled)&&this.chart.shouldRedraw){delete this.chart.shouldRedraw;d.chart.refreshChartType();d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,p(d.chart.chart.visualization))}if(!this.hasBlurHandler&&this.chart.getObject().setOnBlurHandler){this.setBlurHandler();this.hasBlurHandler=true}};this.$postLink=function(){l(function(){if("READY"===d.chart.getState()&&d.isInView()&&!d.isDestroyed){d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,p(d.chart.chart.visualization))}})};this.$onDestroy=function(){this.isDestroyed=true;u.dequeueRender(d.loadChart);t.element(this.scrollContainer).unbind("scroll",d.scrollHander);t.element(o).unbind("resize",d.renderChartIfInView);this.chart.destroyChart()};this.renderChartIfInView=function(){if(!d.isDestroyed&&d.isInView()&&"READY"===d.chart.getState()){d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,p(d.chart.chart.visualization))}};this.isInView=function(){var t=s[0].getBoundingClientRect();var e=!o.innerHeight||r[0].documentElement.clientHeight;var n=t.top<=e;return n};this.loadManually=function(t){t.stopPropagation();d.chart.setState("LOADING");d.chart.allowLongLoad=true;u.enqueueForRender(d.loadChart,p(d.chart.chart.visualization))};this.loadChart=function(){return d.chart.loadChart(d.onChartLoaded)};this.openContextMenu=function(t,i,s,a){if(!this.contextMenuStatus.open&&this.chart.rendered){var r=n.getService("qvContextMenu").menu();r.onOpen=function(){e(".qv-contextmenu lui-popover").css("max-height",400)};d.getChartMenuItems({menu:r});var o=n.getService("qvContextMenu");o.showInline(r,{position:{x:i.pageX,y:i.pageY},onCloseFn:s},a||i.currentTarget)}};c.$on("cao.openContextMenu",function(t,e){d.openContextMenu(null,e.event,e.closeFn,e.element)});this.initializeState=function(){if(this.scrollContainer){t.element(this.scrollContainer).bind("scroll",this.scrollHander);t.element(o).bind("resize",d.renderChartIfInView)}}}]};n.nativeComponent("qvCaoInsightChart",r)}.apply(e,i),void 0!==s&&(t.exports=s))},938:function(t,e){t.exports='<div class="result-item-graph-container" ng-if="!$ctrl.interactive" qva-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)"\n    qva-radial-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)">\n    <qv-object ng-if="$ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.options"\n        object="$ctrl.chart.object" />\n</div>\n\n<div class="result-item-graph-container" ng-if="$ctrl.interactive" qva-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)"\n    qva-radial-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)">\n    <qv-object ng-if="$ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.zoomedOptions"\n        object="$ctrl.chart.zoomedObject" />\n</div>\n\n<div class="spinner-container" ng-if="($ctrl.chart.getState() === \'LOADING\' && !$ctrl.isLoadingCardImageFlag)">\n    <qv-spinner show="!$ctrl.chartLoaded && !$ctrl.isLoadingCardImageFlag" show-delay="100" center-in-parent="true"></qv-spinner>\n</div>\n<div class="image-container" ng-if="$ctrl.chart.getState() === \'LOADING\' && $ctrl.isLoadingCardImageFlag">\n    <img ng-src="{{$ctrl.chart.chartTypeImageUrl}}" class="loader-image" />\n</div>\n\n<div class="cao-manual-loader" ng-click="$event.stopPropagation()" ng-if="$ctrl.chart.getState() === \'MANUAL_LOAD\'">\n    <ul>\n        <li class="cao-loader-text" q-translation="cao.card.complex">\n        </li>\n        <li>\n            <lui-button ng-click="$ctrl.loadManually($event)" q-translation="cao.card.complex.load"></lui-button>\n        </li>\n    </ul>\n</div>'},939:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(95),n(940),n(105),n(49),n(159),n(91),n(372),n(93),n(103),n(275),n(212)],s=function(t,e,n,i,s,a,r,o,l,c,u){var d={template:i,bindings:{query:"<",disabled:"<",matchingFields:"<",matchingFieldIndex:"<",fieldToRemove:"<",fieldToAdd:"<",updateFieldPicker:"<",isLimited:"<",direction:"<",nluQueryInfoButtonVisible:"<",nluQueryInfoVisible:"<",toggleNluQueryInfo:"<"},controller:["$timeout","qvCaoSearchService","qvCaoService",function(e,i,d){var p=this;this.selectedSuggestion=null;this.nluEnabled=a.getFlag("NLU_INSIGHTS");this.nluQueries=[];this.NLU_QUERIES_LIMIT=10;this.waitingForAppId=false;this.$onInit=function(){this.initializeState()};this.searchInputPlaceHolder=this.nluEnabled?o.get("cao.search.input.nlu.placeHolder")+r.lrm:o.get("cao.search.input.placeHolder")+r.lrm;this.clearSerchButtonIconScreenReader=o.get("clear.serch.button.icon.screen.reader");this.caoSearchInputSearchScreenReader=o.get("cao.search.input.search.reader");this.caoSearchInputScreenReader=o.get("cao.search.input.screen.reader");this.$onChanges=function(t){this.syncFieldPicker=a.getFlag("CAO_FIELD_PICKER_SYNC");this.syncFieldPicker?t.fieldToAdd&&t.fieldToAdd.currentValue?this.toggleFieldPickerField(this.fieldToAdd):t.fieldToRemove&&t.fieldToRemove.currentValue&&this.toggleFieldPickerField(this.fieldToRemove):t.fieldToAdd&&t.fieldToAdd.currentValue&&this.fieldToAdd&&this.addFieldToQuery(this.fieldToAdd,true)};this.$onDestroy=function(){t("#qv-cao-search-container").off("click",p.caoSearchContainerOnclickHandler);t("#cao-search-input").off("click",p.caoSearchInputOnClickHandler);t(window).off("resize",p.searchSuggestionBoxOnResizeHandler);n.unsubscribe("cao/insights/clear");p.nluEnabled&&n.unsubscribe("cao/nlu/new_queries")};this.caoSearchContainerOnclickHandler=function(t){t.stopPropagation()};this.caoSearchInputOnClickHandler=function(t){t.stopPropagation();p.updateCursorPositionState(t)};this.searchSuggestionBoxOnResizeHandler=function(){p.isMatchingFieldPopupVisible&&e(function(){p.updateMatchingFields();p.showMatchingFieldPopup()},300)};this.toggleCao=function(){d.toggleCao()};this.initializeState=function(){this.queryTokens=[];this.cursorPosition=0;t("#qv-cao-search-container").click(p.caoSearchContainerOnclickHandler);t("#cao-search-input").click(p.caoSearchInputOnClickHandler);t(window).on("resize",p.searchSuggestionBoxOnResizeHandler);if(this.nluEnabled){n.subscribe("cao/nlu/new_queries",p.newNluQuery);c.getApp().then(function(t){p.appId=t.id;p.getNluQueries().then(function(){p.waitingForAppId&&e(function(){p.showSearchHistoryPopup()})})})}};this.handleSearchInputBlur=function(){p.matchingField=null;p.hideMatchingFields();p.hideSearchHistoryPopup()};this.updateCursorPositionState=function(t){p.updateCurrentCursorPositionState(t);if(p.query){var n=i.getCurrentToken(p.query,p.cursorPosition).token;p.cursorPosition<p.query.length+1&&n&&n.word?p.showFields(t):p.hideMatchingFields()}else p.nluEnabled&&(p.nluQueries.length||p.appId?p.nluQueries.length&&e(function(){p.positionSearchResultPopup();p.showSearchHistoryPopup()}):p.waitingForAppId=true)};this.showMatchingFieldPopup=function(){this.isMatchingFieldPopupVisible||(this.isMatchingFieldPopupVisible=true)};this.showSearchHistoryPopup=function(){this.isSearchHistoryPopupVisible||(this.isSearchHistoryPopupVisible=true)};this.hideSearchHistoryPopup=function(){this.isSearchHistoryPopupVisible=false};this.setMatchingFieldIndex=function(t){this.matchingFieldIndex=t};this.toggleFieldPickerField=function(t){if(t&&t.selected){this.removeFieldFromQuery(t);this.syncFieldPicker&&i.selectField(t,false)}else if(t&&!t.selected){this.addFieldToQuery(t);this.fieldToAdd=this.syncFieldPicker?this.fieldToAdd:"";this.syncFieldPicker&&i.selectField(t,true)}this.query&&0!==this.query.trim().length?this.updateInsights(this.query):this.clearQuery()};this.updateInsights=function(t){if(t){i.updateInsights(t.trim());this.trimSpacesOnQuery();this.hideMatchingFields();u.trackEvent(u.customEvents.INSIGHTS_TYPED_QUERY,{query:t})}};this.defaultCursorPosition=function(){return this.query?this.query.length+1:0};this.trimSpacesOnQuery=function(){this.query=this.query.trim();this.query+=" "};this.addFieldToQuery=function(e,n,s){s&&s.preventDefault();var a=t("#cao-search-input")[0];var r=this.cursorPosition?this.cursorPosition:this.defaultCursorPosition();var o=i.addFieldToQuery(e,this.query,r,a.selectionStart,a.selectionEnd);this.cursorPosition=o.cursorPosition;this.query=o.query;this.updateMatchingFields();this.positionCursorAtIndex(this.cursorPosition);this.syncFieldsInQueryWithFieldPicker();this.trimSpacesOnQuery();n&&this.updateInsights(this.query)};this.usePreviousQuery=function(t){p.query=t};this.keydown=function(t,e){switch(t.which){case 38:case 40:e&&(this.selectedSuggestion=e.caoFieldId);break;default:this.selectedSuggestion=null}};this.removeFieldFromQuery=function(t){var e=i.getSelectedFields(this.query);var n=this.cursorPosition?this.cursorPosition:this.defaultCursorPosition();this.query=i.removeFieldFromQuery(t,this.query,e);this.positionCursorAtIndex(n);this.syncFieldsInQueryWithFieldPicker()};this.hideMatchingFields=function(){e(function(){p.isMatchingFieldPopupVisible=false;p.navigatingThroughMatchingFields=false;p.matchingFields=[]})};this.clearQuery=function(){p.query="";p.hideMatchingFields();i.clearSelectedFields();p.syncFieldsInQueryWithFieldPicker();i.showIntro(true)};this.showFields=function(t){t&&this.updateCurrentCursorPositionState(t);this.matchingFields=i.getFields();this.clearHighlightedFields();this.updateMatchingFields();this.showMatchingFieldPopup()};this.positionCursorAtIndex=function(n){this.query&&this.query.length>0&&e(function(){var e=document.getElementById("cao-search-input");var i=n;t("#cao-search-input").focus();e.setSelectionRange(i,i)})};this.updateCurrentCursorPositionState=function(t){this.cursorPosition=t.target.selectionStart};this.scrollFieldIntoView=function(t){if(t&&t.caoFieldId){var e=document.getElementById(t.caoFieldId);e&&e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}};this.updateMatchingFields=function(){e(function(){var t=p.cursorPosition?p.cursorPosition:0;var e=i.getCurrentToken(p.query,t);p.currentToken=e;p.setMatchingFieldIndex(-1);if(null!==e.index&&e.token.word){if(e.token){p.matchingFields=i.getMatchingFields(e.token.word,p.isLimited);p.highlightField(p.matchingFieldIndex)}}else p.hideMatchingFields();p.positionSearchResultPopup()})};this.getNluQueries=function(){return l.getQueries(p.NLU_QUERIES_LIMIT,p.appId).then(function(t){p.nluQueries=t})};this.newNluQuery=function(t){p.nluQueries.push(t)};this.positionSearchResultPopup=function(){var e;if(this.query&&this.query.length>0){var n=this.cursorPosition?this.cursorPosition:0;var s=t("#cao-search-input");var a=t("#qv-cao-search-input-container");if(s.position()&&s.position().left){e=s.position().left;p.nluEnabled&&a&&a.position()&&(e+=a.position().left);var r=i.getCurrentToken(this.query,n);r.token&&(n=r.token.indexStart);e+=i.searchResultPositionRelativeToQuery(this.query,n)}}this.searchResultContainerLeft=e+"px"};this.highlightField=function(t){this.clearHighlightedFields();this.matchingFields.length>0&&t>=0&&(this.matchingFields[t].highlight=true)};this.clearHighlightedFields=function(){this.matchingFields=this.matchingFields.map(function(t){t.highlight=false;return t})};this.syncFieldsInQueryWithFieldPicker=function(){if(this.syncFieldPicker){i.syncFieldsInQueryWithFieldPicker(this.query);this.updateFieldPicker()}};this.getMatchingFields=function(t){this.triggerKeyboardBehaviours(t);if(this.query&&this.query.length>0){p.hideSearchHistoryPopup();var e=this.query.replace(/\s{2,}/g," ");var n="keyup"===t.type&&t.which===s.KeyCodes.Enter&&!this.navigatingThroughMatchingFields;if(!this.navigatingThroughMatchingFields){this.updateMatchingFields();t.which!==s.KeyCodes.Enter&&this.showMatchingFieldPopup()}t.which!==s.KeyCodes.Enter&&t.which!==s.KeyCodes.Tab||(this.isMatchingFieldPopupVisible=false);n&&this.updateInsights(e)}};this.navigateMatchingFields=function(t){this.triggerKeyboardBehaviours(t);this.navigatingThroughMatchingFields=t&&t.which===s.KeyCodes.Down||t.which===s.KeyCodes.Up;var e=t&&"keydown"===t.type&&t.keyCode;var n=e&&this.matchingFields&&this.matchingFields.length>0;if(n){this.matchingField=i.matchingField(t.keyCode,this.matchingFieldIndex,this.matchingFields);this.setMatchingFieldIndex(this.matchingFields.indexOf(this.matchingField));this.scrollFieldIntoView(this.matchingField);if(this.matchingFieldIndex>=0){var a=e&&t.keyCode===s.KeyCodes.Tab&&this.matchingField;var r=e&&t.keyCode===s.KeyCodes.Enter&&this.matchingField;if(a){this.addFieldToQuery(this.matchingField);this.hideMatchingFields()}if(r){this.addFieldToQuery(this.matchingField);this.updateInsights(this.query)}this.navigatingThroughMatchingFields&&this.highlightField(this.matchingFieldIndex)}switch(t.which){case 38:case 40:this.matchingField&&(this.selectedSuggestion=this.matchingField.caoFieldId);break}}t&&t.which===s.KeyCodes.Enter&&!this.query&&this.clearQuery()};n.subscribe("cao/insights/clear",p.clearQuery);this.triggerKeyboardBehaviours=function(t){this.updateCurrentCursorPositionState(t);this.syncFieldsInQueryWithFieldPicker();t.which!==s.KeyCodes.Down&&t.which!==s.KeyCodes.Up&&t.which!==s.KeyCodes.Enter||t.preventDefault();e(function(){t.which===s.KeyCodes.Delete&&p.updateMatchingFields();if(t.which===s.KeyCodes.Esc){p.matchingField=null;p.hideMatchingFields()}})}}]};e.nativeComponent("qvCaoSearch",d)}.apply(e,i),void 0!==s&&(t.exports=s))},940:function(t,e){t.exports='<div id="qv-cao-search-container" class="qv-cao-search-container">\n\t<div class="qv-cao-search-input" ng-class="{\'focus\': $ctrl.isInputFocused, \'qv-cao-search-input--nlu\': $ctrl.nluEnabled}" id="qv-cao-search-input-container">\n\t\t<div class="search-cao-field-area">\n\t\t\t<div class="lui-search search-field" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t<span class="lui-search__search-icon"></span>\n\t\t\t\t<input class="lui-search__input"\n\t\t\t\t\t   ng-model="$ctrl.query"\n\t\t\t\t\t   auto-focus="autoFocus"\n\t\t\t\t\t   aria-autocomplete="list"\n\t\t\t\t\t   autocomplete="off"\n\t\t\t\t\t   ng-disabled="$ctrl.disabled"\n\t\t\t\t\t   type="text"\n\t\t\t\t\t   is-focused="isInputFocused"\n\t\t\t\t\t   placeholder="{{$ctrl.searchInputPlaceHolder}}"\n\t\t\t\t\t   ng-keydown="$ctrl.navigateMatchingFields($event)"\n\t\t\t\t\t   ng-keyup="$ctrl.getMatchingFields($event)"\n\t\t\t\t\t   tid="caoSearch.searchField"\n\t\t\t\t\t   tabindex="0"\n             role="combobox"\n\t\t\t\t\t   aria-label="{{$ctrl.caoSearchInputSearchScreenReader}}"\n\t\t\t\t\t   aria-activedescendant="{{$ctrl.selectedSuggestion}}"\n\t\t\t\t\t   aria-owns="cao_search_suggestions cao_search_history"\n\t\t\t\t\t   id="cao-search-input"\n\t\t\t\t\t   ng-blur="$ctrl.handleSearchInputBlur()"\n        />\n\t\t\t\t<button aria-label="{{$ctrl.clearSerchButtonIconScreenReader}}" class="lui-icon  lui-icon--remove" tid="cao-search-clear-btn" ng-if="$ctrl.query" q-title-translation="cao.search.clear.tooltip" ng-click="$ctrl.clearQuery()"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<button class="qv-cao-search-info-button" ng-class="{ \'qv-cao-search-info-button--active\': $ctrl.nluQueryInfoVisible }" ng-if="$ctrl.nluEnabled && $ctrl.nluQueryInfoButtonVisible" ng-click="$ctrl.toggleNluQueryInfo()">\n\t\t\t<i class="lui-icon lui-icon--info"></i>\n\t\t</button>\n\t</div>\n\t<div id="cao_search_suggestions" class="qv-cao-search-suggestions" ng-if="$ctrl.isMatchingFieldPopupVisible"\n\t\t ng-style="{ \'left\': $ctrl.searchResultContainerLeft }">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item fields"\n\t\t\t\ttid="caoSearchSuggestionField"\n\t\t\t\tng-class="{\'highlight\': field.highlight}"\n\t\t\t\tng-repeat="field in $ctrl.matchingFields"\n\t\t\t\tng-mousedown="$ctrl.addFieldToQuery(field, true, $event)"\n\t\t\t\tid="{{field.caoFieldId}}"\n\t\t\t\taria-labelledby="{{field.caoFieldId+\'Name\' + \' \' + field.caoFieldId+\'Origin\'}}"\n\t\t\t\t>\n\t\t\t\t<span aria-hidden="true" class="lui-list__text" q-title-translation={{field.qName}} tid="caoSearchSuggestionFieldName" >\n\t\t\t\t\t<span aria-hidden="true" qve-highlight text="{{ field.qName }}" query="$ctrl.currentToken.token.word" ></span>\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden="true" ng-if="!field.masterItem" class="lui-list__aside field-name" q-title-translation={{field.tablesTooltip}}>{{field.tablesAssociated}}</span></span>\n\t\t\t\t<span aria-hidden="true" ng-if="field.masterItem" class="lui-list__aside field-name">{{field.masterItemTitle}}</span></span>\n\t\t\t\t<p id="{{field.caoFieldId+\'Name\'}}" class="sr-only" >{{ field.qName }}</p>\n\t\t\t\t<p id="{{field.caoFieldId+\'Origin\'}}" class="sr-only" ng-if="!field.masterItem" class="lui-list__aside field-name" q-title-translation={{field.tablesTooltip}}>{{field.tablesAssociated}}</p>\n\t\t\t\t<p id="{{field.caoFieldId+\'Origin\'}}" class="sr-only" ng-if="field.masterItem" class="lui-list__aside field-name">{{field.masterItemTitle}}</p>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<div id="cao_search_history" class="qv-cao-search-history qv-cao-search-suggestions" ng-if="$ctrl.isSearchHistoryPopupVisible"\n\t\tng-style="{ \'left\': $ctrl.searchResultContainerLeft }">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item fields"\n\t\t\t\ttid="caoSearchHistoryField"\n\t\t\t\tng-repeat="query in $ctrl.nluQueries"\n\t\t\t\tng-mousedown="$ctrl.usePreviousQuery(query.text)"\n\t\t\t\tid="{{query.id}}"\n\t\t\t\taria-labelledby="{{query.id}}"\n\t\t\t\t>\n\t\t\t\t<span aria-hidden="true" class="lui-list__text" q-title-translation={{query.text}} tid="caoSearchHistoryFieldName">\n\t\t\t\t\t<span aria-hidden="true" qve-highlight text="{{ query.text }}"></span>\n\t\t\t\t</span>\n\t\t\t\t<p id="{{query.id}}" class="sr-only" >{{ query.text }}</p>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n'},941:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(103),n(95),n(942),n(168),n(49),n(943),n(944)],s=function(t,e,n,i,s,a,r){var o={template:s,bindings:{isLimited:"<",insightsLoaded:"<",items:"<",activeTab:"<",selectField:"<",showFieldPicker:"<",toggleFieldPicker:"&"},controller:["qvCaoService",function(t){var s=this;var o=new a;this.activeTab=null;this.fieldPickerTabDimensions=e.get("cao.fieldPicker.tab.dimensions");this.fieldPickerTabMeasures=e.get("cao.fieldPicker.tab.measures");this.fieldPickerTabFields=e.get("cao.fieldPicker.fields.title");this.fieldPickerTabFieldsScreenReader=e.get("cao.fieldPicker.fields.title");this.fieldPickerTabMasterItemsScreenReader=e.get("cao.fieldPicker.masterItems.title");this.insightLearning=r.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=r.getFlag("CAO_TWEAK");this.useAgainString=e.get("cao.helpuslearn.useagain");this.dislikedFields=[];this.$onInit=function(){this.init()};this.$onDestroy=function(){i.unsubscribe("cao/insight/learning_applied")};this.$onChanges=function(t){if(t.items&&t.items.currentValue){this.items=t.items.currentValue;this.masterItemDimensions=[];this.masterItemMeasures=[];this.fields=[];this.items.forEach(function(t){t.masterItemDimension?s.masterItemDimensions.push(t):t.masterItemMeasures?s.masterItemMeasures.push(t):s.fields.push(t)})}t.isLimited&&t.isLimited.currentValue&&t.isLimited!==t.isLimited.currentValue?this.init():t.isLimited&&false===t.isLimited.currentValue&&this.init();l()};var l=function t(){if(s.insightLearning){if(s.items&&0!==s.items.length)return o.getDislikedItems().then(function(t){t&&t.length>0&&(s.dislikedFields=t[0].nodes)});s.dislikedFields=[]}else s.dislikedFields=[]};this.isDislikedField=function(t){return s.dislikedFields.filter(function(e){return e.field&&e.field.name===t.qName})[0]};this.isDislikedMasterItem=function(t){return s.dislikedFields.filter(function(e){return e.libItem&&e.libItem.libId===t.libId})[0]};this.useFieldAgain=function(e){n.trackEvent(n.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED);o.undislikeItem(e.id).then(function(){t.setRefreshIndicatorVisibility(true);i.publish("cao/insight/learning_applied")})};this.init=function(){true===this.isLimited?this.setActiveTab("masterItems"):false===this.isLimited&&this.setActiveTab("fields");i.subscribe("cao/insight/learning_applied",l)};this.setActiveTab=function(t){if("fields"===t)if("fields"!==this.activeTab){this.activeTab="fields";this.title=e.get("cao.fieldPicker.fields.title");this.showFieldPicker||this.toggleFieldPicker()}else this.toggleFieldPicker();else if("masterItems"===t)if("masterItems"!==this.activeTab){this.activeTab="masterItems";this.title=e.get("cao.fieldPicker.masterItems.title");this.setMasterItemsSection("measures");this.showFieldPicker||this.toggleFieldPicker()}else this.toggleFieldPicker()};this.setMasterItemsSection=function(t){"measures"===t?this.activeMasterItemSection="measures":"dimensions"===t&&"dimensions"===this.activeMasterItemSection?this.activeMasterItemSection="measures":"dimensions"===t&&"dimensions"!==this.activeMasterItemSection&&(this.activeMasterItemSection="dimensions")}}]};t.nativeComponent("qvCaoFieldPicker",o)}.apply(e,i),void 0!==s&&(t.exports=s))},942:function(t,e){t.exports='<div class="field-picker">\n\t<div class="tabs">\n\t\t<div qva-cao-acc-field-items x-items-type="fieldPickerCategories">\n\t\t\t<div tid="caoFieldPickerFieldTabButton" class="tab" cao-acc-field-item="{\'type\': \'fieldPickerCategories\', \'index\': 0}"\n\t\t\t ng-class="{\'hide-tab\': $ctrl.activeTab === null, \'selected\': $ctrl.activeTab === \'fields\', \'cao-acc-focus\': $ctrl.itemAccFocus}"\n\t\t\t ng-show="!$ctrl.isLimited" aria-label="{{$ctrl.fieldPickerTabFieldsScreenReader}}" ng-click="$ctrl.setActiveTab(\'fields\')"\n\t\t\t q-title-translation="cao.fieldPicker.fields.title">\n\t\t\t\t<span class="lui-icon  lui-icon--database"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div qva-cao-acc-field-items x-items-type="fieldPickerCategories">\n\t\t\t<div tid="caoFieldPickerMasterItemsTabButton" class="tab" cao-acc-field-item="{\'type\': \'fieldPickerCategories\', \'index\': 1}"\n\t\t\t ng-class="{\'hide-tab\': $ctrl.activeTab === null, \'selected\': $ctrl.activeTab === \'masterItems\', \'cao-acc-focus\': $ctrl.itemAccFocus}"\n\t\t\t ng-click="$ctrl.setActiveTab(\'masterItems\')" aria-label="{{$ctrl.fieldPickerTabMasterItemsScreenReader}}"\n\t\t\t q-title-translation="cao.fieldPicker.masterItems.title">\n\t\t\t\t<span class="lui-icon  lui-icon--link"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="tab-content" tid="caoFieldPickerContentContainer">\n\t\t<qv-spinner class="spinner" show="!$ctrl.items" show-delay="500" center-in-parent="true"></qv-spinner>\n\n\t\t<div ng-if="$ctrl.activeTab === \'fields\' && !$ctrl.isLimited && $ctrl.insightsLoaded" class="fields">\n\t\t\t<button class="field-item-header" ng-class="{\'selected\': true}" tabindex="0" tid="caoFieldPickerFieldSectionButton"\n\t\t\t\taria-labelledby="{{caoFieldPickerFieldText}}">\n\t\t\t\t   <span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerFieldText" class="group-name">\n\t\t\t\t\t   {{$ctrl.fieldPickerTabFields}}</span>\n\t\t\t  </button>\n\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && !$ctrl.fields.length" q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t<ul class="lui-list" ng-if="$ctrl.fields.length" qva-cao-acc-field-items x-items-type="fieldItem">\n\t\t\t\t<div ng-repeat="field in $ctrl.fields" class="field-container">\n\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerField" cao-acc-field-item="{\'type\': \'fieldItem\', \'index\': $index}"\n\t\t\t\t\t ng-click="$ctrl.selectField(field)" aria-label="{{field.qName}}" q-title-translation={{field.qName}} ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedField(field)}">\n\t\t\t\t\t\t<span class="lui-list__aside  lui-icon {{field.classificationIcon}}" ng-if="field.classificationIcon"></span>\n\t\t\t\t\t\t<span class="lui-list__text">{{field.qName}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedField(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedField(field))"\n\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div ng-if="$ctrl.activeTab === \'masterItems\' && $ctrl.insightsLoaded" class="master-items" tid="caoFieldPickerMasterItemsContainer">\n\t\t\t<div class="dimensions" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'dimensions\'}">\n\t\t\t\t<button class="master-item-header" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'dimensions\'}" ng-keyup="$ctrl.itemAccFocus=true"\n\t\t\t\t ng-mouseup="$ctrl.itemAccFocus=false" tabindex="0" aria-controls="cao-field-picker-dimensions-fields" tid="caoFieldPickerMasterItemsDimensionSectionButton"\n\t\t\t\t ng-click="$ctrl.setMasterItemsSection(\'dimensions\')" aria-labelledby="{{caoFieldPickerMasterItemDimensionText}}">\n\t\t\t\t\t<span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerMasterItemDimensionText" class="group-name">\n\t\t\t\t\t\t{{$ctrl.fieldPickerTabDimensions}}</span>\n\t\t\t\t</button>\n\t\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && !$ctrl.masterItemDimensions.length && $ctrl.activeMasterItemSection === \'dimensions\'"\n\t\t\t\t q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t\t<ul id="cao-field-picker-dimensions-fields" class="lui-list master-item-fields" qva-cao-acc-field-items\n\t\t\t\t x-items-type="masterItemDimension" aria-expanded="$ctrl.activeMasterItemSection === \'dimensions\'">\n\t\t\t\t\t<div ng-repeat="field in $ctrl.masterItemDimensions" class="field-container">\n\t\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerMasterItemDimension" cao-acc-field-item="{\'type\': \'masterItemDimension\', \'index\': $index}"\n\t\t\t\t\t\t aria-label="{{field.qName}}" ng-click="$ctrl.selectField(field)"\n\t\t\t\t\t\t q-title-translation={{field.qName}} ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedMasterItem(field) }">\n\t\t\t\t\t\t\t<span class="lui-list__text caoFieldPickerMasterItemDimensionText">{{field.qName}}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedMasterItem(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedMasterItem(field))"\n\t\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div class="measures">\n\t\t\t\t<button class="master-item-header measures" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'measures\'}"\n\t\t\t\t ng-keyup="$ctrl.itemAccFocus=true" ng-mouseup="$ctrl.itemAccFocus=false" tabindex="0" aria-controls="cao-field-picker-measures-fields"\n\t\t\t\t tid="caoFieldPickerMasterItemsMeasureSectionButton" ng-click="$ctrl.setMasterItemsSection(\'measures\')"\n\t\t\t\t aria-labelledby="{{caoFieldPickerMasterItemMeasuresText}}">\n\t\t\t\t\t<span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerMasterItemMeasuresText" class="group-name">{{$ctrl.fieldPickerTabMeasures}}</span>\n\t\t\t\t</button>\n\t\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && $ctrl.showFieldPicker && !$ctrl.masterItemMeasures.length && $ctrl.activeMasterItemSection === \'measures\'"\n\t\t\t\t q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t\t<ul id="cao-field-picker-measures-fields" class="lui-list master-item-fields" qva-cao-acc-field-items x-items-type="masterItemMeasure"\n\t\t\t\t aria-expanded="$ctrl.activeMasterItemSection === \'measures\'">\n\t\t\t\t\t<div ng-repeat="field in $ctrl.masterItemMeasures" class="field-container">\n\t\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerMasterItemMeasure" cao-acc-field-item="{\'type\': \'masterItemMeasure\', \'index\': $index}"\n\t\t\t\t\t\t ng-click="$ctrl.selectField(field)" q-title-translation={{field.qName}}\n\t\t\t\t\t\t aria-label="{{field.qName}}" ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedMasterItem(field) }">\n\t\t\t\t\t\t\t<span class="lui-list__text">{{field.qName}}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedMasterItem(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedMasterItem(field))"\n\t\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>'},943:function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("qvaCaoAccFieldItems",["qvAccessibilityGridService",function(t){return{restrict:"A",link:function e(n,i,s){n.$on("$destroy",function(){var e=s["itemsType"];t.removeAllItems(e)})}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},944:function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.directive("caoAccFieldItem",["$timeout","qvAccessibilityGridService",function(t,e){return{restrict:"A",scope:{caoAccFieldItem:"="},link:function n(i,s){var a=function e(n,i){var a=n===this.col&&i===this.row;t(function(){s.attr("tabindex",a?0:-1);if(a){s.focus();s.addClass("cao-acc-focus")}else s.removeClass("cao-acc-focus")})};var r=e.addItem(i.caoAccFieldItem.index,a,i.caoAccFieldItem.type,0,i.caoAccFieldItem.index);r&&s.attr("tabindex",0);var o=function t(e){switch(e.which){case 9:case 16:"0"===s.attr("tabindex")&&s.addClass("cao-acc-focus");break}};var l=function n(a){switch(a.which){case e.RIGHT_KEY:case e.LEFT_KEY:case e.UP_KEY:case e.DOWN_KEY:a.stopPropagation();a.preventDefault();t(function(){"0"===s.attr("tabindex")&&e.key(a,i.caoAccFieldItem.type)});break}};s.on("mouseup",function(){s.removeClass("cao-acc-focus")});s.on("keyup",o);s.on("keydown",l)}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},945:function(t,e,n){"use strict";var i,s;!(i=[n(48)],s=function(t){t.service("qvCaoRenderService",[function(){var t;var e=[];var n=false;function i(){e.sort(function(t,e){return t.priority>e.priority});var t=e[0];t.renderFunction().finally(function(){n=false;e.shift();e.length>0&&i()})}var s=function t(s,a){e.push({renderFunction:s,priority:a});if(!n){n=true;i()}};var a=function t(n){e=e.filter(function(t){return t.renderFunction!==n})};var r=function t(){e=[];n=false};t={enqueueForRender:s,dequeueRender:a,clearRenderQueue:r};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},946:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(103),n(168),n(221),n(212)],s=function(t,e,n){t.service("qvCaoLearningService",[function(){var t;var i=new n;function s(t){e.trackEvent(e.customEvents.INSIGHTS_NOT_A_MEASURE_CLICKED);return i.defineDimension({expr:"["+t+"]"})}function a(t){e.trackEvent(e.customEvents.INSIGHTS_NOT_A_DIMENSION_CLICKED);return i.defineMeasure({expr:"["+t+"]"})}function r(t){return i.dislikeLibItem({name:t})}function o(t){return i.dislikeField({name:t})}function l(t){var n=t.getAnalysis();return i.dislikeAnalysis(n).then(function(i){n.precedents={id:i.nodes[0].id,disliked:true};e.trackEvent(e.customEvents.INSIGHTS_HIDE_CHART_CLICKED,{chart:t.getAnalysisPrecedentId()})})}function c(t){var e=t.getAnalysis();return i.undislikeAnalysis(e).then(function(){delete e.precedents})}function u(t,e){return t.filter(function(t){return t.field?t.field.name===e:t.libItem.name===e})[0]}function d(t){return i.getDislikedItems().then(function(n){var s=n[0].nodes;e.trackEvent(e.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED);var a=u(s,t);return i.undislikeItem(a.id)})}function p(t){return i.dislikeAnalysis(t).then(function(e){t.precedents={id:e.nodes[0].id,disliked:true};return true})}function h(t){return i.undislikeAnalysis(t).then(function(){delete t.precedents;return false})}function f(){return i.getLearnedItems()}function g(){return i.getDislikedItems()}function v(t){return i.removeDefinedItem(t)}function m(t){return i.undislikeItem(t)}t={applyDimensionLearning:s,applyMeasureLearning:a,dislikeLibItem:r,dislikeField:o,hideChart:l,unHideChart:c,unDislikeItem:d,dislikeAnalysis:p,unDislikeAnalysis:h,getDislikedItems:g,getLearnedItems:f,removeDefinedItem:v,unDislikeField:m};return t}])}.apply(e,i),void 0!==s&&(t.exports=s))},947:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(91),n(113),n(948),n(949),n(950),n(952),n(954),n(956),n(961)],s=function(t,e,n,i,s,a){var r=["$scope","$timeout","qvCaoSelectionService","qvCaoLearningConfidenceService","qvCaoLearningService",function(s,r,o,l,c){var u=this;var d=null;u.hiddenCharts=[];u.fieldRules=[];u.initState=true;u.isCustomPreferences=true;s.customPreferencesToggleOn=i.CAO_DEBUG;s.customPreferencesToggle={value:true};s.$watch("customPreferencesToggle.value",function(t){u.isCustomPreferences=t;u.precedentsEnabled=t});function p(t){var e=[];var n=u.chart.getSearchReport();var i=u.chart.getMatchDetails();t&&t.forEach(function(t){var s=l.getReasonForSelectingField(t,n,i,true);e=e.concat(s.learned);e=e.concat(s.search)});return e}this.handleHiddenCharts=function(t){if(t){var e=t.getAnalysis();return e.precedents&&e.precedents.disliked?c.unDislikeAnalysis(e):c.dislikeAnalysis(e)}};this.noLearningFound=function(){return!u.isFieldRulesSet()};this.isFieldRulesSet=function(){return u.fieldRules&&u.fieldRules.length>0};this.isFieldRulesEnabled=function(){return u.isFieldRulesSet()&&u.isCustomPreferences};this.viewHiddenCharts=function(){e.publish("cao/insight/open_hidden_charts_panel",u.hiddenCharts)};this.refreshPerformed=function(){u.populateFieldRules()};function h(t){return t.replace(/\{0\}/g,function(t){return"<b>"+t+"</b>"})}function f(t){var e=t.nodes;var i=[];e&&e.length>0&&e.forEach(function(t){var e;e=t&&t.libItem&&t.libItem.name?t.libItem.name:t.field.name;var s=h(n.get("cao.insight.contextPanel.customPreferences.dislikedField"));i.push({label:n.get(s,[e]),field:t,valid:true})});return i}function g(t){var e=t.nodes;var i=[];e&&e.length>0&&e.forEach(function(t){var e=h(n.get("cao.insight.contextPanel.customPreferences.definedItems"));i.push({label:n.get(e,[t[t.type].field,t.type]),field:t,valid:true})});return i}var v=5e3;this.updateListTimer=function(){r.cancel(u.cancelStartTimer);this.cancelStartTimer=r(function(){u.populateFieldRules()},v)};this.populateFieldRules=function(){c.getLearnedItems().then(function(t){var e=[];function n(t){return"define"===t.relation}function i(t){return"dislike"===t.relation}var s=t.filter(i)[0];var a=t.filter(n)[0];s&&(e=e.concat(f(s)));a&&(e=e.concat(g(a)));u.fieldRules=e})};this.removeFieldPreference=function(t){if(t.type)return c.removeDefinedItem(t.id);return c.unDislikeField(t.id)};this.reApplyDefinedField=function(t){if("dimension"===t.type)return c.applyDimensionLearning(t.dimension.field);return c.applyMeasureLearning(t.measure.field)};this.reApplyFieldPreference=function(t){if(t.type)return u.reApplyDefinedField(t);if(t.field)return c.dislikeField(t.field.name);if(t.libId)return c.dislikeLibItem(t.libId.name)};this.openGlobalModeSummaryDialog=function(){d=t.getService("luiDialog").show({template:a,input:{title:"cao.insight.contextPanel.HelpTitle",html:a,closeDialog:function t(){d.close();d=null}}})};this.isHiddenCharts=function(){return u.hiddenCharts&&"INTRO"!==u.state&&"INIT"!==u.state};function m(){return{type:"hide",isHiddenChartLearningOption:true,text:n.get("cao.insight.contextPanel.details.hideChart"),subText:n.get("cao.insight.contextPanel.details.hideChart.subtext"),chart:u.chart}}this.getDetailsForSelectedChart=function(){if(this.chart){var t=[];t=t.concat(p(this.chart.getFields()));t=t.concat(p(this.chart.getMeasures()));t=t.concat(p(this.chart.getDimensions()));t.push(m());u.detailsForChart=t}};this.hiddenChartsTitle=function(){return n.get("cao.insight.contextPanel.hiddenCharts",[u.hiddenCharts.length])};this.updateChart=function(t){u.chart=t;u.initState=true;u.hiddenCharts=[];u.chart?u.getDetailsForSelectedChart():u.populateFieldRules()};u.updateChart(o.getSelectedChart());function b(){u.getDetailsForSelectedChart()}this.openDetailsOption=function(t){u.currentDetailsOption&&u.currentDetailsOption===t?u.currentDetailsOption=null:u.currentDetailsOption=t};e.subscribe("cao/insight/selectedChartChanged",this.updateChart);e.subscribe("cao/insight/light_editing",b);e.subscribe("cao/insight/refreshPerformed",u.refreshPerformed);this.$onDestroy=function(){e.unsubscribe("cao/insight/selectedChartChanged");e.unsubscribe("cao/insight/light_editing");e.unsubscribe("cao/insight/refreshPerformed",u.refreshPerformed);u.cancelStartTimer&&r.cancel(u.cancelStartTimer)}}];var o={transclude:true,template:s,bindings:{app:"<",hiddenCharts:"<",state:"<",insightFeedback:"<",precedentsEnabled:"="},controller:r};return t.nativeComponent("qvCaoInsightsContextPanel",o)}.apply(e,i),void 0!==s&&(t.exports=s))},948:function(t,e){t.exports='<div class="cao-insights-context-panel editor">\n\t<div class="cao-insight-context-panel-header">\n\t\t<div class="title" q-translation="{{ $ctrl.chart ? \'cao.insight.contextPanel.header\' : \'cao.insight.contextPanel.global.header\' }}"></div>\n\t\t<span ng-if="!$ctrl.chart" class="lui-icon lui-icon--help lui-icon--small help-icon" ng-click="$ctrl.openGlobalModeSummaryDialog()"></span>\n\t</div>\n\t\n\t<div class="context-panel-content">\n\t\n\t\t<div ng-if="!$ctrl.chart" class="global-mode">\n\t\t\t<div ng-if="$ctrl.isHiddenCharts()" class="hidden-charts">\n\t\t\t\t<button class="hidden-charts-button" ng-click="$ctrl.viewHiddenCharts()">\n\t\t\t\t\t<span class="lui-list__aside">\n\t\t\t\t\t\t<span class="lui-icon hidden-chart-icon"></span>\t\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="lui-list__aside text-wrapper">\n\t\t\t\t\t\t<span class="lui-list__text title" tid="cao-hidden-charts-title">{{$ctrl.hiddenChartsTitle()}}</span>\t\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="lui-list__aside ng-scope">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--small lui-icon--arrow-right icon-arrow"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t\t<qv-cao-hidden-charts-panel on-panel-hide-action="$ctrl.handleHiddenCharts(chart)" hidden-charts="$ctrl.hiddenCharts" hidden-charts-title="$ctrl.hiddenChartsTitle()" />\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.noLearningFound()" class="global-mode-no-learning-applied">\n\t\t\t\t<div class="no-learning-icon" />\n\t\t\t\t<p q-translation="cao.insight.contextPanel.noLearningApplied" class="no-learning-text"></p>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.isFieldRulesSet()" class="custom-preferences">\n\t\t\t\t<span class="lui-list__aside">\n\t\t\t\t\t<span class="lui-icon lui-icon--approve"></span>\n\t\t\t\t</span>\n\n\t\t\t\t<div class="spacing">\n\t\t\t\t\t<div class="preferences-header-title">\n\t\t\t\t\t\t<div class="title" q-translation="cao.insight.contextPanel.customPreferences.title"></div>\n\t\t\t\t\t\t<div class="sub-title" ng-if="customPreferencesToggleOn" q-translation="{{ $ctrl.isCustomPreferences ? \'properties.on\' : \'properties.off\' }}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="switch-toggle" ng-if="customPreferencesToggleOn">\n\t\t\t\t\t\t<lui-switch x-model="customPreferencesToggle.value" tid="cao-custom-preferences-switch" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.isFieldRulesEnabled()">\n\t\t\t\t<qv-cao-field-preferences ng-repeat="fieldRule in $ctrl.fieldRules" delete-rule="$ctrl.removeFieldPreference(fieldPref)" re-apply-rule="$ctrl.reApplyFieldPreference(fieldPref)" field-rule="fieldRule" update-list="$ctrl.updateListTimer()" />\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div ng-if="$ctrl.chart" class="chart-mode">\n\t\t\t<div class=\'qv-panel-properties\' style="overflow: auto;">\n\t\t\t\t<qv-cao-insight-editor ng-if="$ctrl.chart" chart="$ctrl.chart" app="$ctrl.app" />\n\t\t\t</div>\n\n\t\t\t<div class="cao-accordion-panel">\n\t\t\t\t<cao-accordion-control label="cao.insight.contextPanel.details">\n\t\t\t\t\t<qv-cao-details-option ng-repeat="detail in $ctrl.detailsForChart" detail="detail" open-learning-options="$ctrl.openDetailsOption" is-learning-option-open="detail === $ctrl.currentDetailsOption" insight-feedback="$ctrl.insightFeedback"></qv-cao-details-option>\n\t\t\t\t</cao-accordion-control>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},949:function(t,e){t.exports='<lui-dialog class="selection-insights-dialog" x-variant="{{::variant}}">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title\n\t\t\tq-translation="cao.insight.contextPanel.HelpTitle"\n\t\t></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="q-modal-loading">\n\t\t<p q-translation="cao.insight.contextPanel.HelpText"></p>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button\n\t\t\tclass="lui-button close-button"\n\t\t\tng-click="closeDialog();"\n\t\t\tq-translation="Common.Close"\n\t\t\ttid="selection-insights-dialog-help-button"\n\t\t></button>\n\t</lui-dialog-footer>\n</lui-dialog>'},950:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(951)],s=function(t,e){var n=[function(){var t=this;t.expanded=true;this.toggleExpanded=function(){t.expanded=!t.expanded}}];var i={transclude:true,template:e,bindings:{label:"@"},controller:n};return t.nativeComponent("caoAccordionControl",i)}.apply(e,i),void 0!==s&&(t.exports=s))},951:function(t,e){t.exports='<div ng-click="$ctrl.toggleExpanded()"  class="cao-accordion-control" ng-class="{ \'expanded\': $ctrl.expanded }">\n\t<span class="cao-accordion-control-label" q-title-translation="{{$ctrl.label}}" q-translation="{{$ctrl.label}}" />\n\t<span class="cao-accordion-expander lui-icon lui-icon--small lui-icon--arrow-right" ng-class="{ \'expanded\': $ctrl.expanded }"></span>\n</div>\n<div ng-show="$ctrl.expanded">\n\t<ng-transclude></ng-transclude>\n</div>'},952:function(t,e,n){"use strict";var i,s;!(i=[n(11),n(48),n(953)],s=function(t,e,n){var i=["$element","$timeout",function(e,n){this.$onChanges=function(i){i.isLearningOptionOpen&&i.isLearningOptionOpen.currentValue&&n(function(){var n=t(".context-panel-content");if(n.length){var i=e.offset().top-n.offset().top;var s=e.find(".cao-details-option").height();n.scrollTop(i+s)}})}}];var s={transclude:true,template:n,bindings:{detail:"<",openLearningOptions:"<",isLearningOptionOpen:"<",insightFeedback:"<"},controller:i};return e.nativeComponent("qvCaoDetailsOption",s)}.apply(e,i),void 0!==s&&(t.exports=s))},953:function(t,e){t.exports='<div class="cao-details-option" ng-if="(!$ctrl.detail.searchMatch && $ctrl.insightFeedback) || $ctrl.detail.searchMatch">\n\t<button class="details-option-button" ng-class="{\'cao-learning-option-open\': $ctrl.isLearningOptionOpen}" ng-click="$ctrl.openLearningOptions($ctrl.detail)" ng-if="!$ctrl.detail.searchMatch && $ctrl.insightFeedback">\n\t\t<div class="detail-icon">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon {{ !$ctrl.detail.userMatch ? \'lui-icon--analyze\' : \'lui-icon--approve\' }}"></span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="label-title" ng-bind-html="$ctrl.detail.text"></div>\n\t\t<div class="learning-options-toggle">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon lui-icon--small lui-icon--more more-option" ng-class="{\'panelNotOpened\' : !$ctrl.isLearningOptionOpen}"></span>\n\t\t\t</span>\n\t\t</div>\n\t</button>\n\t<div class="details-option-item no-hover" ng-if="$ctrl.detail.searchMatch">\n\t\t<div class="detail-icon">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon {{ !$ctrl.detail.userMatch ? \'lui-icon--analyze\' : \'lui-icon--approve\' }}"></span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="label-title" ng-bind-html="$ctrl.detail.text"></div>\n\t</div>\n\t<div ng-show="$ctrl.isLearningOptionOpen">\n\t\t<qv-cao-learning-option detail="$ctrl.detail" />\n\t</div>\n</div>'},954:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(196),n(955)],s=function(t,e,n,i){var s=["qvCaoLearningService",function(t){var i=this;i.learningPerformed=false;var s="field";var a="propose";var r="hide";this.getOppositeLearningOptionActionText=function(){if(i.detail&&i.detail.type)return i.detail.type===n.MEASURE?"cao.insight.contextPanel.details.learningOption.dimension":"cao.insight.contextPanel.details.learningOption.measure";return null};function o(){return i.detail.type===n.MEASURE&&!i.learningPerformed||i.detail.type===n.DIMENSION&&i.learningPerformed?t.applyDimensionLearning(i.detail.field):t.applyMeasureLearning(i.detail.field)}function l(){return i.detail.isLibItem?t.dislikeLibItem(i.detail.libItemId):t.dislikeField(i.detail.field)}function c(t){i.learningPerformed=t;e.publish("cao/insight/learningPerformed",!!t)}this.applyLearning=function(){o().then(function(t){t&&t.nodes[0]&&(i.learningQuad=t.nodes[0].id);c(s)})};this.hideChart=function(){t.hideChart(i.detail.chart).then(function(){c(r)})};this.handleNeverPropose=function(){l().then(function(){c(a)})};this.removeFieldPreference=function(e){if(e.type)return t.removeDefinedItem(e.id);return t.unDislikeField(e.id)};this.revertLearningAction=function(){if(i.detail.type&&i.detail.field&&i.learningQuad&&i.learningPerformed==s){t.removeDefinedItem(i.learningQuad);c()}else i.learningPerformed==a?t.unDislikeItem(i.detail.field).then(function(){c()}):t.unHideChart(i.detail.chart).then(function(){c()})}}];var a={template:i,bindings:{detail:"<"},controller:s};return t.nativeComponent("qvCaoLearningOption",a)}.apply(e,i),void 0!==s&&(t.exports=s))},955:function(t,e){t.exports='<div class="cao-learning-option">\n\t<p q-translation="cao.insight.contextPanel.details.learning" />\n\n\t<div ng-if="!$ctrl.detail.isHiddenChartLearningOption && !$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.applyLearning()" \n\t\t\tq-translation="{{$ctrl.getOppositeLearningOptionActionText()}}" ng-if="$ctrl.getOppositeLearningOptionActionText() && !$ctrl.detail.isLibItem"/>\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.handleNeverPropose()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.neverPropose" />\n\t</div>\n\n\t<div ng-if="$ctrl.detail.isHiddenChartLearningOption && !$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.hideChart()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.hidechart" tid="hide-chart-button" />\n\t\t<p class="hide-subtext" q-translation="{{$ctrl.detail.subText}}" />\n\t</div>\n\n\t<div ng-if="$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button undo" ng-click="$ctrl.revertLearningAction()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.undo" />\n\t</div>\n</div>'},956:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(957),n(958)],s=function(t,e,n){var i=[function(){var t=this;this.openPanel=function(){t.isPanelOpened=true};this.closePanel=function(){t.isPanelOpened=false};this.handleHiddenChart=function(n){e.publish("cao/insight/learningPerformed",!!n);return t.onPanelHideAction({chart:n})};e.subscribe("cao/insight/open_hidden_charts_panel",this.openPanel);this.$onDestroy=function(){e.unsubscribe("cao/insight/open_hidden_charts_panel")}}];var s={template:n,controller:i,bindings:{onPanelHideAction:"&",hiddenCharts:"<",hiddenChartsTitle:"<"}};return t.nativeComponent("qvCaoHiddenChartsPanel",s)}.apply(e,i),void 0!==s&&(t.exports=s))},957:function(t,e){t.exports='<div class="hidden-charts-panel" ng-class="{ \'open-panel\': $ctrl.isPanelOpened }">\n\t\t<div class="header" ng-click="$ctrl.closePanel()">\n\t\t\t<div class="header-wrapper">\n\t\t\t\t<div class="back-navigation">\n\t\t\t\t\t<span class="lui-icon back-icon  lui-icon--previous  lui-icon--small" />\n\t\t\t\t</div>\n\t\t\t\t<div class="text-wrapper">\n\t\t\t\t\t<div class="navigation-title" q-translation="cao.insight.hiddenCharts.panel.goBackTitle"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t<div class="hidden-charts-content">\n\t\t\t<div class="spacing title">{{$ctrl.hiddenChartsTitle}}</div>\n\t\t\t<div class="spacing sub-title" q-translation="cao.insight.hiddenCharts.panel.subTitle" ng-if="$ctrl.hiddenCharts.length > 0"></div>\n\t\t\t<div class="spacing sub-title" q-translation="cao.insight.hiddenCharts.panel.subTitleNoHiddenCharts" ng-if="$ctrl.hiddenCharts.length === 0"></div>\n\t\t\t<qv-cao-hidden-charts-view chart="chart" index="$index" ng-repeat="chart in $ctrl.hiddenCharts | orderBy : \'-chart.relevance\'"\n\t\t\t\ton-hide-action="$ctrl.handleHiddenChart(chart)"></cao-hidden-charts-view>\n\t\t</div>\n\t</div>\n</div>'},958:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(959),n(264),n(960)],s=function(t,e,n,i,s){var a=["$element","qvCaoRenderService","luiTooltip","luiPopover",function(t,n,a,r){var o=this;var l=[];o.popupOpen=false;o.actionIcon="view";var c=null;var u={template:i.template,controller:i.controller,input:{item:"",style:{width:"150px"}},alignTo:t.find(".hide-action-button")[0],dock:"left"};var d=500;function p(t){var e=[];t&&t.length>0&&(e=t.map(function(t){return t.field||t.libIdLabel}));return e}this.toTitleCase=function(t){if(t)return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})};this.setFields=function(){if(o.chart){var t=[];var e=[];var n=[];t=t.concat(p(o.chart.getDimensions()));e=e.concat(p(o.chart.getMeasures()));n=n.concat(p(o.chart.getFields()));o.dimensions=t.toString();o.measures=e.toString();o.fields=n.toString()}};function h(){return o.chart.getComplexity()?o.chart.getComplexity():o.index}this.loadChart=function(){return o.chart.loadChart()};function f(t,e,n,i,s){var a={template:t,controller:e,dock:i,closeOnResize:true,alignTo:n};var c=r.show(a);l.push(c);c.closed.then(function(){o.popupOpen=false;"function"===typeof s&&s()})}this.openChartInfoPopover=function(){if(o.popupOpen){o.popupOpen=false;l=[]}else{o.popupOpen=true;var e=["$scope",function(t){t.dimensions=o.dimensions;t.measures=o.measures;t.fields=o.fields}];f(s,e,t.find(".open-chart-info-popover")[0],"bottom")}};this.$onChanges=function(){if(o.chart){n.enqueueForRender(o.loadChart,h());o.chart.refreshChartType();o.setFields()}};this.$onDestroy=function(){o.chart&&this.chart.destroyChart()};this.openTooltip=function(){setTimeout(function(){var t=o.chart.isHidden()?"cao.insight.hiddenCharts.view.unhide":"cao.insight.hiddenCharts.view.hide";u.input.item=e.get(t);c=a.show(u)},d)};this.closeTooltip=function(){setTimeout(function(){c&&c.close()},d)};this.handleHideChartAction=function(){o.closeTooltip();o.onHideAction({chart:o.chart})}}];var r={template:n,bindings:{chart:"<",index:"<",onHideAction:"&"},controller:a};return t.nativeComponent("qvCaoHiddenChartsView",r)}.apply(e,i),void 0!==s&&(t.exports=s))},959:function(t,e){t.exports='<div class="hidden-charts-view" ng-class="{ \'hidden\': !$ctrl.chart.isHidden() }">\n\t\t<div class="title-container spacing">\n\t\t\t<div class="header-title">\n\t\t\t\t<div class="title">\n\t\t\t\t\t{{ $ctrl.toTitleCase($ctrl.chart.chartType) }}\n\t\t\t\t</div>\n\t\t\t\t<div class="open-chart-info-popover" ng-click="$ctrl.openChartInfoPopover()"><span class="lui-icon lui-icon--info" /></div>\n\t\t\t</div>\n\t\t\t<div class="cao-hide-action" >\n\t\t\t\t<span class="lui-list__aside action-button-container">\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass="hide-action-button" \n\t\t\t\t\t\tng-class="$ctrl.chart.isHidden() ? \'icon--view\': \'lui-icon lui-icon--back\'"\n\t\t\t\t\t\tng-click="$ctrl.handleHideChartAction()" \n\t\t\t\t\t\tng-mouseover="$ctrl.openTooltip()" \n\t\t\t\t\t\tng-mouseleave="$ctrl.closeTooltip()"\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t<div class="spacing content-view">\n\t\t\t<div class="wrapper">\n\t\t\t\t<div class="image-container" ng-if="$ctrl.chart && $ctrl.chart.getState() === \'LOADING\'">\n\t\t\t\t\t<img ng-src="{{$ctrl.chart.chartTypeImageUrl}}" class="loader-image" />\n\t\t\t\t</div>\n\t\t\t\t<qv-object ng-if="$ctrl.chart && $ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.options" object="$ctrl.chart.object" />\n\t\t\t</div>\n\t\t</div>\n</div>'},960:function(t,e){t.exports='<lui-popover class="cao-hidden-charts-popover">\n\t<div class="cao-hidden-charts-popover-body">\n\t\t<ul class="lui-list cao-hidden-charts-popover-list">\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="dimensions">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Dimensions"></strong>:<span>&nbsp;{{ dimensions }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="measures">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Measures"></strong>:<span>&nbsp;{{ measures }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="fields">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Fields"></strong>:<span>&nbsp;{{ fields }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},961:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(95),n(91),n(962),n(264)],s=function(t,e,n,i,s){var a=["luiTooltip","$element",function(t,i){var a=this;var r=null;var o={template:s.template,controller:s.controller,input:{item:"",style:{width:"150px"}},alignTo:i.find(".field-rule-action-button")[0],dock:"left"};this.toggleFieldRule=function(){a.fieldRule.valid=!a.fieldRule.valid;e.publish("cao/insight/learningPerformed",true)};this.handleFieldRuleAction=function(){a.closeTooltip();a.fieldRule.valid?a.deleteRule({fieldPref:a.fieldRule.field}).then(function(){a.toggleFieldRule();a.updateList()}):a.reApplyRule({fieldPref:a.fieldRule.field}).then(function(){a.toggleFieldRule()})};this.openTooltip=function(){var e=a.fieldRule.valid?"cao.insight.contextPanel.customPreferences.remove":"cao.insight.contextPanel.customPreferences.restore";o.input.item=n.get(e);r=t.show(o)};this.closeTooltip=function(){r&&r.close()}}];var r={template:i,bindings:{fieldRule:"<",deleteRule:"&",reApplyRule:"&",updateList:"&"},controller:a};return t.nativeComponent("qvCaoFieldPreferences",r)}.apply(e,i),void 0!==s&&(t.exports=s))},962:function(t,e){t.exports='<div class="cao-field-preferences" ng-class="{ \'hidden\': !$ctrl.fieldRule.valid }">\t\n\t<div class="label-title" ng-bind-html="$ctrl.fieldRule.label" />\n\t<div class="field-rule-action-container" >\n\t\t<span class="lui-list__aside action-button-container">\n\t\t\t<span \n\t\t\t\tclass="lui-icon field-rule-action-button" \n\t\t\t\tng-class="$ctrl.fieldRule.valid ? \'lui-icon--bin\': \'lui-icon--back\'"\n\t\t\t\tng-click="$ctrl.handleFieldRuleAction()" \n\t\t\t\tng-mouseover="$ctrl.openTooltip()" \n\t\t\t\tng-mouseleave="$ctrl.closeTooltip()"\n\t\t\t/>\n\t\t</span>\n\t</div>\n</div>'},963:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(10),n(95),n(964),n(223),n(222)],s=function(t,e,n,i,s,a){var r=["$window",function(t){var i=this;i.app=null;i.isToggleContextDisabled=false;this.$onInit=function(){e.element(t).bind("resize",i.autoHidePanels);i.autoHidePanels()};this.$onChanges=function(t){i.app=t.app.currentValue;i.isContextPanelVisible=s.storageObj(i.app.id).contextPanel;i.isAssetsPanelVisible=s.storageObj(i.app.id).assetsPanel};this.autoHidePanels=function(n){var s="string"!==typeof n;var a=e.element(t).innerWidth();a<1200&&(i.isContextPanelVisible&&i.isAssetsPanelVisible&&s?i.toggleContextPanel():i.isAssetsPanelVisible&&i.isContextPanelVisible&&"assets"===n?i.toggleContextPanel():i.isAssetsPanelVisible&&i.isContextPanelVisible&&"context"===n&&i.toggleAssetsPanel())};this.getContextPanelToggleButtonTitle=function(){return i.isContextPanelVisible?"cao.insight.hideContextPanel":"cao.insight.showContextPanel"};this.getHideAssetsButtonTitle=function(){return i.isAssetsPanelVisible?"cao.insight.hideAssetsPanel":"cao.insight.showAssetsPanel"};this.contextPanelToggled=function(){i.autoHidePanels("context");a.resizeCharts(t)};this.toggleContextPanel=function(){if(!i.isToggleContextDisabled){i.isContextPanelVisible=!i.isContextPanelVisible;s.toggleContextPanel(i.app.id);n.publish("cao/insight/contextPanelToggled",i.isContextPanelVisible)}};this.disableToggleContext=function(t){i.isToggleContextDisabled=t};this.assetsPanelToggled=function(e){i.isAssetsPanelVisible=e;i.autoHidePanels("assets");a.resizeCharts(t)};this.toggleAssetsPanel=function(){i.isAssetsPanelVisible=!i.isAssetsPanelVisible;s.toggleAssetsPanel(i.app.id);n.publish("cao/insight/assetsPanelToggled",i.isAssetsPanelVisible)};n.subscribe("cao/insight/contextPanelToggled",this.contextPanelToggled);n.subscribe("cao/insight/assetsPanelToggled",this.assetsPanelToggled);n.subscribe("cao/insight/editInsightProperties",i.disableToggleContext);this.$onDestroy=function(){n.unsubscribe("cao/insight/contextPanelToggled");n.unsubscribe("cao/insight/assetsPanelToggled");n.unsubscribe("cao/insight/editInsightProperties")}}];var o={transclude:true,template:i,bindings:{app:"<",insightFeedback:"<"},controller:r};return t.nativeComponent("qvCaoInsightsBottomPanel",o)}.apply(e,i),void 0!==s&&(t.exports=s))},964:function(t,e){t.exports='\n<div class="cao-insights-bottom-panel">\n\t<div class="hide-assets-panel-container">\n\t\t<button class="bottom-panel-button" ng-class="{ \'lui-active\': $ctrl.isAssetsPanelVisible }" q-title-translation="{{$ctrl.getHideAssetsButtonTitle()}}" tid="bottom-panel-button-left"\n\t\t\tng-click="$ctrl.toggleAssetsPanel()" tabindex="0">\n\t\t\t<span class="lui-icon lui-icon--toggle-left" />\n\t\t\t<span class="label" q-translation="{{$ctrl.getHideAssetsButtonTitle()}}" />\n\t\t</button>\n\t</div>\n\t<div class="hide-insight-properties-container" ng-if="$ctrl.insightFeedback">\n\t\t<button class="bottom-panel-button" ng-class="{ \'lui-active\': $ctrl.isContextPanelVisible, \'disabled\': $ctrl.isToggleContextDisabled }" q-title-translation="{{$ctrl.getContextPanelToggleButtonTitle()}}" tid="bottom-panel-button-right" \n\t\t\tng-click="$ctrl.toggleContextPanel()" tabindex="0" ng-attr-tabindex="{{$ctrl.isToggleContextDisabled ? \'-1\' : \'0\'}}">\n\t\t\t<span class="label" q-translation="{{$ctrl.getContextPanelToggleButtonTitle()}}" />\n\t\t\t<span class="lui-icon lui-icon--toggle-right" />\n\t\t</button>\n\t</div>\n</div>'},965:function(t,e,n){"use strict";var i,s;!(i=[n(966),n(48),n(90),n(967),n(11),n(167),n(277)],s=function(t,e,n,i,s,a){e.service("qvMultiStatePopoverService",["luiPopover",function(e){var r;function o(t,e){var n=t.which;n=t.shiftKey&&a.TAB===n?"SHIFT_TAB":n;switch(n){case a.ARROW_LEFT:case a.ARROW_UP:case"SHIFT_TAB":case a.ESCAPE:s(e).focus();t.preventDefault();break}}return{show:function s(a){var l={handleBtnKeyDown:o,getItems:function t(){return[]},autoFocus:false};a=n.extend(true,{},l,a);r=e.show({template:t,controller:i.controller,alignTo:a.alignToElement,autoFocus:a.autoFocus,input:{title:a.title,getItems:a.getItems,clear:a.clear,click:a.click,onClose:a.onClose,brightCurSel:a.brightCurSel,openTooltip:a.openTooltip,closeTooltip:a.closeTooltip,handleKeyDown:a.handleKeyDown,handleBtnKeyDown:a.handleBtnKeyDown,handlePopoverKeyDown:a.handlePopoverKeyDown,alignToElement:a.alignToElement},closeOnResize:true,dock:"top"});return r},close:function t(){r&&r.close();r=null}}}])}.apply(e,i),void 0!==s&&(t.exports=s))},966:function(t,e){t.exports='<lui-popover class="lui-popover qv-multi-state-popover" ng-class="{ bright: input.brightCurSel }" tid="qv-multi-state-popover">\n\t<lui-popover-header class="lui-popover__header">\n\t\t<div class="lui-popover__title">\n\t\t\t<span ng-if="input.title && input.title.length">{{ input.title }}</span>\n\t\t\t<div class="btn-clearall">\n\t\t\t\t<lui-button \n\t\t\t\t\ttid="qv-multi-state-popover-btn-clear"\n\t\t\t\t\tclass="clear-all-btn lui-button--block"\n\t\t\t\t\tng-keydown="handleBtnKeyDown($event, input.alignToElement)" \n\t\t\t\t\tng-click="input.clear(input.getItems()[0].qField, null, $event)" \n\t\t\t\t\tng-disabled="allItemsNonClearable( input.getItems() )" \n\t\t\t\t\tq-title-translation="AlternateState.Popover.ClearAllStates">\n\t\t\t\t\t<span class="lui-button__text" q-translation="AlternateState.Popover.ClearAllStates"></span>\n\t\t\t\t</lui-button>\n\t\t\t</div>\n\t\t</div>\n\t</lui-popover-header>\t\n\t<lui-popover-body class="lui-popover__body">\n\t\t<ul class="lui-list" qva-direction x-dir-setting="{{input.direction}}">\n\t\t\t<li class="item" ng-repeat="item in input.getItems()" ng-click="input.click($event)" ng-mousemove="input.openTooltip($event, item)" ng-mouseleave="input.closeTooltip()"\n\t\t\t\ttabindex="0" ng-keydown="handleKeyDown($event, item)" aria-label="{{item.screenReaderLabel}}" ng-class="{ \'item-locked\' : item.qLocked }">\n\t\t\t\t<div class="item-container">\n\t\t\t\t\t<div ng-if="item.qLocked" class="icon-lock">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--lock">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="item-component text-container" qva-direction x-dir-text="{{item.displayStateName}}">\n\t\t\t\t\t\t<div class="text">{{ item.displayStateName }}</div>\n\t\t\t\t\t\t<div class="values">{{ item.translation }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="!( item.qLocked || item.qOneAndOnlyOne )" class="item-component remove" ng-click="input.clear(item.qField, item.stateName, $event)" q-title-translation="CurrentSelections.Remove">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<qv-state-count-bar ng-if="!item.isPlaceHolder && item.isSingleState" state-counts="item.qStateCounts"></qv-state-count-bar>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},967:function(t,e,n){"use strict";var i,s;!(i=[n(277)],s=function(){var t={template:null,controller:["$scope","$element","$timeout",function(t,e,n){this.close=function(){i()};function i(){n(function(){t.destroyComponent();e.remove()})}t.closingDeferred.promise.then(function(e){t.input.onClose(e);i()});t.allItemsNonClearable=function(t){return!t.some(function(t){var e=!(t.qLocked||t.qOneAndOnlyOne);return e})}}]};return t}.apply(e,i),void 0!==s&&(t.exports=s))},968:function(t,e){t.exports='<div class="current-selections-item" data-tid="current-selections-item"\n\tng-mousemove="openTooltip($event, item)" ng-mouseleave="closeTooltip()" \n\tng-class="{\n\t\t\'active\' : item.qField === activeFieldName,\n\t\t\'dim\' : $parent.itemSelected && !item.active,\n\t\t\'item-locked\' : item.qLocked,\n\t\t\'locked-feedback item-animate-in\' : item.feedbackActive && item.qLocked,\n\t\t\'item-animate-out\' : (!item.feedbackActive && item.qLocked) || (!item.feedbackActive && item.qOneAndOnlyOne),\n\t\t\'single-select-feedback item-animate-in\' : item.feedbackActive && item.qOneAndOnlyOne,\n\t\t\'single-icon\': item.qOneAndOnlyOne || item.qLocked\n\t}">\n\t<div ng-class="{locked:item.qLocked}" class="text">\n\t\t<div class="text-wrap">\n\t\t\t<span ng-class="{ \'lui-icon lui-icon--lock\': item.qLocked }"></span>\n\t\t\t<span class="name" tid="selection-name">{{item.name}}</span>\n\t\t</div>\n\t\t<span class="values">\n\t\t\t<span ng-if="!item.isDefaultState">{{item.displayStateName}}:</span>\n\t\t\t<span tid="current-selection-item-text">{{item.translation}}</span>\n\t\t</span>\n\t</div>\n\t<div class="options" title=" "> \x3c!-- The empty title attribute is neeeded for screen reader not to read anchor title: \'clear selections\' --\x3e\n\t\t<div ng-if="!item.isDefaultState" class="item-component count" title="">\n\t\t\t<span class="field-states-indicator"></span>\n\t\t</div>\n\t\t<a ng-if="!currentSelectionDisabled && (!item.qLocked && !item.isPlaceHolder && !item.qOneAndOnlyOne)" ng-click="clear(item.qField, item.stateName)" class="remove" q-title-translation="CurrentSelections.Remove">\n\t\t\t<span class="lui-clear-all lui-icon lui-icon--remove"></span>\n\t\t</a>\n\t</div>\n\n\t<qv-state-count-bar ng-if="!item.isPlaceHolder && item.isSingleState" state-counts="item.qStateCounts"></qv-state-count-bar>\n</div>'},969:function(t,e){t.exports='<div class="qv-odag-bar" ng-class="{\'inEditMode\': inEditMode, \'inAnalysisMode\': !inEditMode, \'standAlone\': standAlone }">\n\t<div class="leftOdag" qv-pager qv-sortable-list="sortableNavPoints"> \n\t\t<div ng-if="odagNavPoints.items.length === 0" class="drag-help" ng-class="{\'inEditMode\': inEditMode}">{{waterMarkText}}</div>\n\t\t<ul class="list">\n\t\t\t<li ng-repeat="item in odagNavPoints.items track by item.id" class="odag-nav-point" ng-class="item.classList">\n\t\t\t\t<div class="nav-point-container" ng-class="{\'invalid\': item.invalid }">\n\t\t\t\t\t<div ng-if="inEditMode" class="dropArea"></div>\n\t\t\t\t\t<qv-odag-toolbar-navpoint item="item" in-edit-mode="inEditMode"></qv-odag-toolbar-navpoint>\n\t\t\t\t</div>\n\t\t\t</li> \n\t\t</ul>\n\t\t<a class="qv-pager-nav qv-pager-previous" ng-click="prevPage()" q-title-translation="Tooltip.Previous"><i class="lui-icon lui-icon--arrow-left"></i></a>\n\t\t<a class="qv-pager-nav qv-pager-next" ng-click="nextPage()" q-title-translation="Tooltip.Next"><i class="lui-icon lui-icon--arrow-right"></i></a>\t\t\n\t</div>\n </div>\t\n'},970:function(t,e,n){"use strict";var i,s;!(i=[n(89),n(92),n(54),n(102),n(219),n(90)],s=function(t,e,n,i,s,a){var r=e.extend("ODAGNavPoint",{properties:null,parent:null,init:function t(e){i.mixin(this);this.notification("Invalidated");this.parent=e.parent;this.properties={qInfo:{qType:"odagNavPoint"}};this.properties=a.extend(this.properties,e.properties);var s=this;this._sheetInvalidated=function(){s.parent.getProperties().then(function(t){for(var e=0;e<t.navPoints.length;e++){var i=t.navPoints[e];if(i.info.id===s.properties.info.id){if(!n.isEqual(i,n.omit(s.properties,["qInfo"]))){s.properties=a.extend(s.properties,i);s.Invalidated.emit()}break}}})};this.parent.Invalidated.bind(this._sheetInvalidated)},getLayout:function t(){var e=this;this.properties.odagLinkName=null;return s.getList(this.parent.app).then(function(t){if(t.filter(function(t){return t.properties.data.id===e.properties.odagLinkRefID}).length>0)return s.get(e.properties.odagLinkRefID,e.parent.app).then(function(t){e.properties.odagLinkName=t.properties.data.name;return e.properties});e.properties.odagLinkName="";return e.properties})},getProperties:function e(){return t.resolve(this.properties)},getEffectiveProperties:function e(){return t.resolve(this.properties)},clearSoftPatches:function t(){return},removeObject:function t(){this.parent.removeNavPoint(this.properties.info.id)},setProperties:function t(e){var n=this;this.properties=a.extend(this.properties,e);return this.parent.getProperties().then(function(t){for(var e=0;e<t.navPoints.length;e++){var i=t.navPoints[e];if(i.info.id===n.properties.info.id){var s=a.extend({},n.properties);delete s["qInfo"];t.navPoints[e]=s;break}}return n.parent.setProperties(t)})},destroy:function t(){this.parent.Invalidated.unbind(this._sheetInvalidated)}});return r}.apply(e,i),void 0!==s&&(t.exports=s))},971:function(t,e,n){"use strict";var i,s;!(i=[],s=function(){var t={type:"items",component:"accordion",items:{navPointProps:{type:"items",translation:"properties.odagNavProperties",items:{general:{type:"items",grouped:true,items:{title:{type:"string",ref:"title",translation:"Common.Name",minlength:1,readOnly:function t(e,n,i){var s=i.layout;return s&&(s.permissions&&!s.permissions.update||s.qMeta&&s.qMeta.sourceObject&&s.qMeta.sourceObject.length>0)},rollbackInvalid:true}}},odagLinkInfo:{type:"items",items:{odagLinkName:{type:"string",ref:"odagLinkName",translation:"properties.odag.link.name",minlength:1,readOnly:function t(){return true},rollbackInvalid:true}}}}}}};return t}.apply(e,i),void 0!==s&&(t.exports=s))},972:function(t,e){t.exports='<div class="drag-odag-navpoint">\n\t<div class="odag-nav-point-cell" ng-class="{\'active\': item.id === selObject.id, \'popoverOpen\': popover, \'invalid\': item.invalid }" ng-style="item.style" ng-click="onODAGNavPointClicked(item)">\n\t\t<qv-progress-circle ng-if="!inEditMode && !item.invalid" class=" odag-progress-circle" percentage="rowCountPercentage"></qv-progress-circle>\n\t\t<div class="cell-name" ng-if="inEditMode || !item.invalid" title="{{item.data.title}}">{{item.data.title}}</div>\n\t\t<div class="cell-name" ng-if="!inEditMode && item.invalid " q-title-translation="odag.toolbar.navpoint.invalid" q-translation="odag.toolbar.navpoint.invalid"></div>\n\t\t<div ng-if="!inEditMode && !item.invalid" class="arrow lui-icon lui-icon--triangle-bottom"></div>\n\t\t<button ng-if="inEditMode && item.invalid" class="lui-fade-button delete-invalid-navpoint" ng-click="deleteInvalidNavPoint($event, item)">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--bin"></span>\n\t\t</button>\n\t</div>\n</div>'},973:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(91),n(49),n(135),n(295),n(138),n(974),n(323),n(976),n(484)],s=function(t,e,i,s,a,r,o){var l={template:o,controller:["$scope","$element","$timeout","odagNavpointService",function(o,l,c,u){var d;var p=t.getService("qvLoader");o.odagNavpointService=u;o.loadingContent={value:true};o.showInfoPopup=false;o.generatedApps=[];o.bindings=[];o.expandedItem={item:null};o.generateAppInProgress=false;o.bindingsPass=true;o.maxGeneratedAppLimitReached=false;o.dismissedMaxGenAppMsg=false;o.dismissMaxGenAppMsgClicked=function(){o.dismissedMaxGenAppMsg=true};o.isGenerateBtnDisabled=function(){o.bindingsPass=o.bindings.filter(function(t){return false===t.bindingPassesConstraint}).length>0;return o.header.invalid||o.maxGeneratedAppLimitReached||o.bindingsPass||!o.item.rowCountPercentage||100!==o.item.rowCountPercentage||s.isSuffixInUse("noData")||o.generateAppInProgress};o.canApplySelectionsForReload=function(){o.bindingsFailed=o.bindings.filter(function(t){return false===t.bindingPassesConstraint}).length>0;return!(o.header.invalid||o.bindingsFailed||!o.item.rowCountPercentage||100!==o.item.rowCountPercentage||s.isSuffixInUse("noData")||o.generateAppInProgress)};o.infoHeader=e.get("odag.toolbar.navpoint.popup.info.header");o.circleModel={chartValue:o.item.rowCountPercentage?o.item.rowCountPercentage:0};o.$watchCollection("item.rowCountPercentageNumber",function(t){o.item.rowCountPercentage=-1===t?NaN:t;o.circleModel.chartValue=o.item.rowCountPercentage?o.item.rowCountPercentage:0});o.header={invalid:false,templateThumbnail:n.p+"img/core/static/Default_thumbnail_app.png",templateName:e.get("Common.Loading"),templateDescription:e.get("Common.Loading")};function h(){return u.updateItemHeader(o.item,o.header)}o.setSelectionState=function(){var t=o.expandedItem.item;i.getFlag("ODAG_SAAS_ENABLED")&&t&&u.getSelections(t.parentContext.app,t.requestId).then(function(t){o.expandedItemSelectionState=u.getSelectedValuesDisplayString(t,{value:false})})};o.loadGeneratedApps=function(){u.loadGeneratedApps(o.item,o.generatedApps).then(function(){o.loadingContent.value=false;o.expandedItem.item&&(o.generatedApps.some(function(t){return o.expandedItem.item.requestId===t.requestId})?o.setSelectionState():o.expandedItem.item=null);o.maxGeneratedAppLimitReached=o.generatedApps.length>=o.item.maxNumberOfApps;g()})};u.initializeBindings(o.item,o.bindings);f().then(function(){o.item.initialized.promise.then(function(){o.actualRowEstFormatted="NaN"===o.item.actualRowEst?e.get("odag.toolbar.navpoint.popup.invalid"):r.format.number(o.item.actualRowEst,{});o.maxRowExpressionCountFormatted=r.format.number(o.item.maxRowExpressionCount,{});h().finally(function(){o.loadGeneratedApps()})})});function f(){d=c(function(){p.close(true).then(function(){p.show({template:a,hugeLoader:false,mediumLoader:true,appendTo:l.find(".odag-popup-body")[0]})})},0,false);return d}function g(){c.cancel(d);d=null;p.close()}o.onApplySelections=function(){u.initializeBindings(o.item,o.bindings)};o.onNavPointInfoClicked=function(t){t.preventDefault();t.stopPropagation();o.showInfoPopup=!o.showInfoPopup};o.deleteGenAppClicked=function(t,e){t.preventDefault();t.stopPropagation();o.showInfoPopup&&(o.showInfoPopup=!o.showInfoPopup);if(e.deleteIcon&&!e.actionInProgress){e.actionInProgress=true;u.deleteGeneratedApp(e).then(function(){o.loadGeneratedApps();o.expandedItem.item&&e.requestId===o.expandedItem.item.requestId&&(o.expandedItem.item=null);e.actionInProgress=false}).catch(function(t){e.actionInProgress=false;throw t})}};o.reloadApp=function(t,e){o.generateAppInProgress=true;u.reloadApp(o.item,t.requestId,e).then(function(){2===e&&(o.expandedItem.item=null);o.loadGeneratedApps();o.generateAppInProgress=false}).catch(function(t){o.generateAppInProgress=false;throw t})};o.onGenerateAppClicked=function(){o.generateAppInProgress=true;o.showInfoPopup=false;u.generateApp(o.item).then(function(){o.generateAppInProgress=false;o.loadGeneratedApps()}).catch(function(t){o.generateAppInProgress=false;throw t})};o.$on("$destroy",function(){u.stopLoadGeneratedApps(o.item);g()})}]};return l}.apply(e,i),void 0!==s&&(t.exports=s))},974:function(t,e){t.exports='<lui-popover id="odag-toolbar-navpoint-popover" ng-class="expandedItem.item? \' request-expanded\' : \'\'" class="odag-toolbar-navpoint-popover"\n x-arrow="arrow">\n\t<lui-popover-header ng-class="{\'invalid\': header.invalid}">\n\t\t<img qva-prevent-drag ng-src="{{ header.imgSrc }}" class="app-thumbnail-img" />\n\t\t<div class="title-description-container">\n\t\t\t<lui-popover-title title="{{header.templateName}}">{{header.templateName}}</lui-popover-title>\n\t\t\t<lui-popover-title ng-if="!header.invalid" class="desciption" title="{{header.templateDescription}}">{{header.templateDescription}}</lui-popover-title>\n\t\t</div>\n\t</lui-popover-header>\n\n\t<lui-popover-body class="odag-popup-body" qva-outside-ignore-for="odag-request-menu">\n\t\t<odag-app-list2 class="odag-app-list-container" applist="generatedApps" reload-app="reloadApp" load-generated-apps="loadGeneratedApps" set-selection-state="setSelectionState"\n\t\t generate-app-in-progress="generateAppInProgress" expanded-item="expandedItem" is-header-invalid="header.invalid" is-generate-btn-disabled="isGenerateBtnDisabled"\n\t\t can-apply-selections-for-reload="canApplySelectionsForReload" expanded-item-selection-state="expandedItemSelectionState"\n\t\t loading="loadingContent.value" delete-clicked="deleteGenAppClicked" on-apply-selections-callback="onApplySelections" open-app-callback="item.openAppCallback"></odag-app-list2>\n\t\t<div ng-if="maxGeneratedAppLimitReached && !dismissedMaxGenAppMsg && !expandedItem.item" class="odag-max-app-limit-reached">\n\t\t\t<div class="max-app-text" q-translation="odag.toolbar.napvoint.popup.maxAppLimitReached"></div>\n\t\t\t<button class="lui-fade-button close-button" q-title-translation="Common.Close" ng-click="dismissMaxGenAppMsgClicked()">\n\t\t\t\t<span class="lui-button__icon  lui-icon lui-icon--small  lui-icon--close"></span>\n\t\t\t</button>\n\t\t</div>\n\t</lui-popover-body>\n\t<div ng-if="showInfoPopup" class="infoPopup">\n\t\t<div class="info-constraints-header">{{infoHeader}}</div>\n\t\t<div class="info-row-count-container">\n\t\t\t<div class="info-section" q-translation="odag.toolbar.navpoint.popup.info.row.count.header"></div>\n\t\t\t<div class="info-row-count-content">\n\t\t\t\t<div class="info-row-count-progress-circle">\n\t\t\t\t\t<circle-chart model=\'circleModel\'></circle-chart>\n\t\t\t\t</div>\n\t\t\t\t<div class="info-row-count-current">\n\t\t\t\t\t<div class="info-row-count-header" q-translation="odag.toolbar.navpoint.popup.info.row.count.current.header"></div>\n\t\t\t\t\t<div class="">{{actualRowEstFormatted}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="info-row-count-constraint">\n\t\t\t\t\t<div class="info-row-count-header" q-translation="odag.toolbar.navpoint.popup.info.row.count.constraint.header"></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t< {{maxRowExpressionCountFormatted}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="info-section" q-translation="odag.toolbar.navpoint.popup.info.field.header"></div>\n\t\t\t<div class="info-field-header">\n\t\t\t\t<div class="info-field" q-translation="odag.toolbar.navpoint.popup.info.field.table.header"></div>\n\t\t\t\t<div class="info-value" q-translation="odag.toolbar.navpoint.popup.info.current.table.header"></div>\n\t\t\t\t<div class="info-constraint" q-translation="odag.toolbar.navpoint.popup.info.constraint.table.header"></div>\n\t\t\t</div>\n\t\t\t<div class="info-field-values">\n\t\t\t\t<div ng-repeat="binding in bindings | orderBy: \'-hasConstraint\' " class="info-field-row" ng-if="bindings.length">\n\t\t\t\t\t<div class="info-field-data">{{binding.fieldName}}</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="info-value-data">\n\t\t\t\t\t\t<div class="info-field-checkmark" ng-if="binding.bindingPassesConstraint">\n\t\t\t\t\t\t\t<span class="lui-icon  lui-icon--tick" aria-hidden="true"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-field-warning" ng-if="!binding.bindingPassesConstraint">\n\t\t\t\t\t\t\t<span class="lui-icon  lui-icon--warning-triangle" aria-hidden="true"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="binding.hasConstraint">{{binding.values.length}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="info-constraint-data">{{binding.constraint}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<lui-popover-footer>\n\t\t<lui-button ng-if="!expandedItem.item" class="info-button" ng-class="{\'lui-button--danger\': bindingsPass, \'lui-active\': showInfoPopup}"\n\t\t x-variant="fade" ng-click="onNavPointInfoClicked($event)">\n\t\t\t<span class="lui-icon  lui-button__icon lui-icon--info"></span>\n\t\t</lui-button>\n\t\t<lui-button ng-if="!expandedItem.item" tid="odag-toolbar-navpoint-popover_generate_app_button" ng-disabled="isGenerateBtnDisabled()"\n\t\t ng-click="onGenerateAppClicked()" q-translation="odag.toolbar.navpoint.popup.generate.app"></lui-button>\n\t</lui-popover-footer>\n</lui-popover>'},975:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(380),n(138),n(460),n(91),n(49)],s=function(t,e,n,i,s,a){t.service("odagNavpointServiceUI",["$timeout",function(t){var r;function o(t,e){e.value=true;for(var n=0;n<t.length;n++){var i="";var a=t[n];if(a.selectedSize>1e4){e.value=false;i=s.get("odag.toolbar.navpoint.popup.request.tab.xNumSelectedValues",a.selectedSize);a.valuesDisplayString=i}else{var r=0;for(;r<a.values.length&&r<5;r++){r>0&&(i+=", ");i+=a.values[r].strValue}5===r&&a.values.length>5&&(i+=s.get("odag.toolbar.navpoint.popup.request.tab.moreSelectedValues",[a.values.length-5+""]));a.valuesDisplayString=i}}return t}function l(t,i){var r=new Date(t.modifiedDate);var l=a.getFlag("ODAG_SAAS_ENABLED");function c(t){var e="";if(Intl&&Intl.DateTimeFormat){var i={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};e=Intl.DateTimeFormat(n.locale.get(),i).format(t)}else e=n.format.date(t,{datetime:"medium"});return e}var u=c(r);var d=null;if(t.loadState&&t.loadState.finishedAt&&"pending"!==t.loadState.status){var p=new Date(t.loadState.finishedAt);d=c(p)}var h="";var f=false;var g="";var v="lui-icon--bin";var m=s.get("odag.toolbar.navpoint.popup.tooltip.delete");var b=[];var y=[];var S=[];g=t.generatedAppOrigName?t.generatedAppOrigName:"";t.generatedApp&&t.generatedApp.name&&(g=t.generatedApp.name);t.validation&&t.validation.contents&&t.validation.contents.forEach(function(t){b.push({id:b.length,message:t});y.push({id:y.length,message:t})});if(!l&&t.loadState&&t.loadState.messages&&t.loadState.messages.progressData){t.loadState.messages.progressData.persistentProgressMessages&&t.loadState.messages.progressData.persistentProgressMessages.forEach(function(t){y.push({id:y.length,message:e.translateMessage(t)})});t.loadState.messages.progressData.transientProgressMessage&&y.push({id:y.length,message:e.translateMessage(t.loadState.messages.progressData.transientProgressMessage)});t.loadState.messages.progressData.errorData&&t.loadState.messages.progressData.errorData.forEach(function(t){S.push({id:S.length,message:t.qErrorString})})}l&&S.push({id:y.length,message:t.errorMessage});switch(t.state){case"validating":case"queued":case"loading":case"canceling":f=true;h="";g=g||s.get("odag.toolbar.navpoint.popup.status.generating");v="lui-icon--remove";m=s.get("odag.toolbar.navpoint.popup.tooltip.cancel");if("canceling"==t.state){v="";u=s.get("odag.toolbar.navpoint.popup.status.canceling");d=u;m=""}break;case"failed":h="warning";g=g||s.get("odag.toolbar.navpoint.popup.status.failed");v="lui-icon--remove";m=s.get("odag.toolbar.navpoint.popup.tooltip.remove");break;case"canceled":h="";v="lui-icon--remove";m=s.get("odag.toolbar.navpoint.popup.tooltip.remove");break;case"succeeded":h="";g=t.generatedApp?t.generatedApp.name:"";v="lui-icon--bin";m=s.get("odag.toolbar.navpoint.popup.tooltip.delete");break}var I={value:false};t.selectionState&&o(t.selectionState,I);var x={name:g,createdDate:t.createdDate,requestId:t.id,owner:t.owner,lastLoadedTime:d,generatedAppId:t.generatedApp?t.generatedApp.id:null,published:!!t.generatedApp&&t.generatedApp.published,publishToStreamName:t.publishToStreamName?t.publishToStreamName:s.get("odag.toolbar.navpoint.popup.request.tab.info.notPublished"),targetSheet:t.targetSheet,timestamp:u,status:h,state:t.state,loading:f,parentContext:i,deleteIcon:v,deleteIconTooltip:m,actionInProgress:false,statusMessageArray:y,selectionsState:t.selectionState,canApplySelections:I.value,progressErrors:S};return x}function c(e){var n=new Image;var s=e.templateThumbnail;if(s){n.src=s;n.onerror=function(){e.imgSrc=i.staticSrc().staticApp()};n.onload=function(){t(function(){e.imgSrc=s})}}}r={createGeneratedAppWrapper:l,updateImageOnItemHeader:c,getSelectedValuesDisplayString:o};return r}])}.apply(e,i),void 0!==s&&(t.exports=s))},976:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(11),n(91),n(49),n(13),n(316),n(977),n(978),n(979),n(323)],s=function(t,e,n,i,s,a,r,o,l){t.nativeComponent("odagAppList2",{bindings:{applist:"<",loading:"<",deleteClicked:"<",isGenerateBtnDisabled:"<",canApplySelectionsForReload:"<",isHeaderInvalid:"<",loadGeneratedApps:"<",setSelectionState:"<",expandedItemSelectionState:"<",onApplySelectionsCallback:"<",openAppCallback:"<",reloadApp:"<",generateAppInProgress:"=",expandedItem:"=",variant:"@"},controller:["$element","$timeout","luiPopover","odagNavpointService",function(t,l,c,u){var d=this;d.helpTextNoGeneratedApps=n.get("odag.toolbar.navpoint.popup.noApps");d.selectedTab="info";d.moreMenuPopup=null;d.moreMenuPopupItem=null;d.reloadMenuPopup=null;d.inputName="";d.appNameValid=true;d.applyInProgress=false;d.isOdagSaas=i.getFlag("ODAG_SAAS_ENABLED");d.openAppClicked=function(t,n,i){n.preventDefault();n.stopPropagation();if(t.openAppCallback&&e.isFunction(t.openAppCallback))t.openAppCallback(i.generatedAppId,i.targetSheet?i.targetSheet:null);else if(i.generatedAppId&&u.ODAG_TERMINAL_STATES.indexOf(i.state)>-1){var a;a=i.targetSheet?s.rootPath+"sense/app/"+i.generatedAppId+"/sheet/"+i.targetSheet:s.rootPath+"sense/app/"+i.generatedAppId;window.open(a)}};d.renameGenApp=function(t,e){u.renameGenApp(d.expandedItem.item.parentContext.app,t,e).then(function(){d.loadGeneratedApps()})};d.applySelectionsClicked=function(t){d.applyInProgress=true;u.applySelections(t).then(function(){d.onApplySelectionsCallback&&d.onApplySelectionsCallback();d.applyInProgress=false})};d.$doCheck=function(){var t=this;if(this.applist&&this.expandedItem.item){var e=this.applist.filter(function(e){return e.requestId===t.expandedItem.item.requestId})[0];if(e){this.expandedItem.item=e;if(this.expandedItemSelectionState&&this.isOdagSaas){this.expandedItem.item.selectionsState=this.expandedItemSelectionState;this.expandedItem.item.canApplySelections=true}}else this.expandedItem.item=null}d.expandedItem&&d.expandedItem.item&&d.requestInProgress(this.expandedItem.item)&&d.applist.some(function(t){if(t.requestId===d.expandedItem.item.requestId&&t.name===d.expandedItem.item.name&&d.inputName!==t.name){d.inputName=t.name;return true}return false})};d.moreMenuClicked=function(t,e){t.preventDefault();t.stopPropagation();if(d.moreMenuPopup)d.moreMenuPopup.close();else{d.moreMenuPopupItem=e;d.moreMenuPopup=c.show({template:r,alignTo:t.target,variant:null,controller:["$scope",function(t){t.canOpenApp=function(){return e.generatedAppId&&u.ODAG_TERMINAL_STATES.indexOf(e.state)>-1};t.openApp=function(n){if(t.canOpenApp()){d.moreMenuPopup.close();d.openAppClicked(d,n,e)}};t.canReloadApp=function(){return d.canReloadApp(e)};t.reloadApp=function(n){n.preventDefault();n.stopPropagation();if(t.canReloadApp()){d.moreMenuPopup.close();return d.reloadApp(e)}};t.deleteApp=function(t){t.preventDefault();t.stopPropagation();d.moreMenuPopup.close();d.deleteClicked(t,e)}}],closeOnResize:true,closeOnEscape:true});d.moreMenuPopup.closed.then(function(){d.moreMenuPopup=null;d.moreMenuPopupItem=null})}};d.onOutsideClick=function(){d.expandedItem.item=null};d.rowClicked=function(t){d.moreMenuPopup&&d.moreMenuPopup.close();d.reloadMenuPopup&&d.reloadMenuPopup.close();d.expandedItem.item=t;if(d.expandedItem.item){d.inputName=d.expandedItem.item.name;d.setSelectionState()}};d.reloadClicked=function(t,e){t.preventDefault();t.stopPropagation();d.reloadApp(e)};d.requestInProgress=function(t){var e=false;switch(t.state){case u.ODAG_STATE.VALIDATING:case u.ODAG_STATE.QUEUED:case u.ODAG_STATE.LOADING:case u.ODAG_STATE.CANCELING:e=true;break}return e};d.canReloadApp=function(t){var e=true;e=t&&!d.isHeaderInvalid&&!d.generateAppInProgress&&!d.requestInProgress(t);return e};d.validateAppName=function(){var t=true;d.inputName&&a.allowedChars(d.inputName)||(t=false);d.appNameValid=t};d.statusClicked=function(t,e){t.preventDefault();t.stopPropagation();d.moreMenuPopup&&d.moreMenuPopup.close();d.reloadMenuPopup&&d.reloadMenuPopup.close();if(d.expandedItem.item===e)d.expandedItem.item=null;else{d.selectedTab="status";d.expandedItem.item=e;d.scrollIfNecessary()}};d.selectTab=function(t){d.selectedTab=t;d.scrollIfNecessary()};d.inputKeyEnter=function(t){var e=t.target;e.blur()};d.onBlurGenAppName=function(){if(d.appNameValid)d.renameGenApp(d.expandedItem.item.requestId,d.inputName);else{d.inputName=d.expandedItem.item.name;d.validateAppName()}};d.scrollIfNecessary=function(){"status"===d.selectedTab&&l(function(){var n=e(t.find(".tab-contents"));n.scrollTop(n[0].scrollHeight)})};d.onReloadMenuClicked=function(t,e){t.preventDefault();t.stopPropagation();if(d.reloadMenuPopup)d.reloadMenuPopup.close();else{d.reloadMenuPopup=c.show({template:o,alignTo:t.target,variant:null,controller:["$scope",function(t){t.canReloadApp=function(){return d.canReloadApp(e)};t.reloadApp=function(n){n.preventDefault();n.stopPropagation();if(t.canReloadApp()){d.reloadMenuPopup.close();return d.reloadApp(e)}};t.canApplySelectionsReloadApp=function(){return d.canApplySelectionsForReload()};t.canCopyApplySelectionsReloadApp=function(){return!d.isGenerateBtnDisabled()};t.applySelectionsReloadApp=function(n){n.preventDefault();n.stopPropagation();if(t.canApplySelectionsReloadApp()){d.reloadMenuPopup.close();d.reloadApp(e,1)}};t.copyApplySelectionsReloadApp=function(n){n.preventDefault();n.stopPropagation();if(t.canApplySelectionsReloadApp()){d.reloadMenuPopup.close();d.reloadApp(e,2)}}}],closeOnResize:true,closeOnEscape:true});d.reloadMenuPopup.closed.then(function(){d.reloadMenuPopup=null})}}}],template:l})}.apply(e,i),void 0!==s&&(t.exports=s))},977:function(t,e){t.exports='<lui-popover x-variant="{{::variant}}" x-arrow="arrow" qva-outside-ignore-for="allOutside">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list odag-request-menu" tid="odag-request-menu">\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canOpenApp()" ng-click="openApp( $event )" tid="openAppFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.menu.openApp">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canReloadApp()" ng-click="reloadApp( $event )" tid="reloadFromRequestMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.reload">\n\t\t\t\t</span>\n\t\t\t</li>\t\t\t\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-click="deleteApp( $event )" tid="deleteAppFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.menu.deleteApp">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},978:function(t,e){t.exports='<lui-popover x-variant="{{::variant}}" x-arrow="arrow" qva-outside-ignore-for="allOutside">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list odag-request-menu" tid="odag-request-reload-menu">\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canReloadApp()" ng-click="reloadApp( $event )" tid="reloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canApplySelectionsReloadApp()" ng-click="applySelectionsReloadApp( $event )" tid="applySelectionsReloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.applySelections.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canCopyApplySelectionsReloadApp()" ng-click="copyApplySelectionsReloadApp( $event )" tid="copyApplySelectionsReloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.copyAndApplySelections.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},979:function(t,e){t.exports='<div class="odag-app-list2" ng-class="$ctrl.variant">\n\t<div ng-if="$ctrl.applist.length === 0 && !$ctrl.loading" class="description">{{$ctrl.helpTextNoGeneratedApps}}</div>\n\t<ul ng-if="$ctrl.applist.length && !$ctrl.loading && !$ctrl.expandedItem.item" class="generated-apps-list">\n\t\t<li ng-repeat="genAppitem in $ctrl.applist" class="list-item" ng-click="$ctrl.rowClicked(genAppitem)">\n\t\t\t<div class="generated-app-item request-header">\n\t\t\t\t<div class="request-first">\n\t\t\t\t\t<div class="expander lui-icon lui-icon--triangle-right"></div>\n\t\t\t\t\t<div class="request-name-timestamp-area">\n\t\t\t\t\t\t<div class="request-first-top-line">\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="name" title="{{genAppitem.name}}" ng-class="{\'generating\': genAppitem.state === \'validating\' || genAppitem.state === \'queued\' || genAppitem.state === \'loading\' || genAppitem.state === \'canceling\'}">{{genAppitem.name}}</div>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t<div class="request-first-bottom-line timestamp">{{genAppitem.lastLoadedTime ? genAppitem.lastLoadedTime : genAppitem.timestamp }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="request-second">\n\t\t\t\t\t<button class="status-button lui-fade-button" qva-outside-ignore-for="allOutside" ng-click="$ctrl.statusClicked($event, genAppitem)">\n\t\t\t\t\t\t<span ng-hide="genAppitem.loading" class="lui-fade-button__icon lui-icon lui-icon--{{genAppitem.status}}"></span>\n\t\t\t\t\t\t<div ng-if="genAppitem.loading" class="genAppLoading qv-loader"></div>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="genAppitem.state === \'validating\' || genAppitem.state === \'queued\' || genAppitem.state === \'loading\'" class="lui-fade-button" title={{genAppitem.deleteIconTooltip}} ng-click="$ctrl.deleteClicked($event, genAppitem)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="!$ctrl.requestInProgress( genAppitem )" class="lui-fade-button" q-title-translation="odag.toolbar.navpoint.popup.request.moreMenu.tooltip" ng-click="$ctrl.moreMenuClicked($event, genAppitem)" ng-class="{\'lui-active\': $ctrl.moreMenuPopupItem === genAppitem}">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--more"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="!$ctrl.requestInProgress( genAppitem )" ng-disabled="!(genAppitem.state === \'succeeded\' || genAppitem.state === \'failed\' || genAppitem.state === \'canceled\') || !genAppitem.generatedAppId" class="lui-fade-button" q-title-translation="{{ $ctrl.openAppCallback ? \'odag.toolbar.navpoint.popup.request.openApp.generic.tooltip\' : \'odag.toolbar.navpoint.popup.request.openApp.tooltip\'}}" ng-click="$ctrl.openAppClicked($ctrl, $event, genAppitem)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--new-tab"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t</li>\n\t</ul>\n\t<div ng-if="$ctrl.expandedItem.item" class="gen-item-expand" qva-outside="$ctrl.onOutsideClick( $event )">\n\t\t<div class="details-container">\n\t\t\t<div class="request-header" ng-click="$ctrl.rowClicked(null)">\n\t\t\t\t<div class="request-first">\n\t\t\t\t\t<div class="expander lui-icon lui-icon--triangle-bottom" tid="odag-applist-expand"></div>\n\t\t\t\t\t<div class="request-name-timestamp-area">\n\t\t\t\t\t\t<div class="request-first-top-line">\n\t\t\t\t\t\t\t<div class="name" title="{{$ctrl.expandedItem.item.name}}" ng-class="{\'generating\': $ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\' || $ctrl.expandedItem.item.state === \'canceling\'}">{{$ctrl.expandedItem.item.name}}</div>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="request-first-bottom-line timestamp" >{{$ctrl.expandedItem.item.lastLoadedTime ? $ctrl.expandedItem.item.lastLoadedTime : $ctrl.expandedItem.item.timestamp }}</div>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="request-second">\n\t\t\t\t\t<button class="status-button lui-fade-button" qva-outside-ignore-for="allOutside" ng-click="$ctrl.statusClicked($event, $ctrl.expandedItem.item)">\n\t\t\t\t\t\t<span ng-if="!$ctrl.expandedItem.item.loading" class="lui-fade-button__icon lui-icon lui-icon--{{$ctrl.expandedItem.item.status}}"></span>\n\t\t\t\t\t\t<div ng-if="$ctrl.expandedItem.item.loading" class="genAppLoading qv-loader"></div>\n\t\t\t\t\t</button>\t\t\t\t\t\t\t\t\n\t\t\t\t\t<button ng-if="$ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\'" class="lui-fade-button" title={{$ctrl.expandedItem.item.deleteIconTooltip}} ng-click="$ctrl.deleteClicked($event, $ctrl.expandedItem.item)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="$ctrl.expandedItem.item.state === \'succeeded\' || $ctrl.expandedItem.item.state === \'failed\' || $ctrl.expandedItem.item.state === \'canceled\'" class="lui-fade-button" q-title-translation="{{ $ctrl.openAppCallback ? \'odag.toolbar.navpoint.popup.request.openApp.generic.tooltip\' : \'odag.toolbar.navpoint.popup.request.openApp.tooltip\'}}" ng-disabled="!($ctrl.expandedItem.item.state === \'succeeded\' || $ctrl.expandedItem.item.state === \'failed\' || $ctrl.expandedItem.item.state === \'canceled\') || !$ctrl.expandedItem.item.generatedAppId" ng-click="$ctrl.openAppClicked($ctrl, $event, $ctrl.expandedItem.item)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--new-tab"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t\t<div class="generateAppInput">\n\t\t\t\t<input class="lui-input" ng-disabled="$ctrl.generateAppInProgress || !$ctrl.expandedItem.item.generatedAppId || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\' || $ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'canceling\'" ng-model="$ctrl.inputName" type="text" name="name" maxlength="255" ng-blur="$ctrl.onBlurGenAppName()" ng-change="$ctrl.validateAppName()" qv-enter="$ctrl.inputKeyEnter($event)" ng-class="{ \'lui-invalid\': !$ctrl.appNameValid }"/>\n\t\t\t</div>\n\t\t\t<div class="action-button-section">\n\t\t\t\t<div class="lui-buttongroup reload-button">\n\t\t\t\t\t<lui-button ng-disabled="!$ctrl.canReloadApp( $ctrl.expandedItem.item )" ng-click="$ctrl.reloadClicked($event, $ctrl.expandedItem.item)" q-translation="odag.toolbar.navpoint.popup.request.reload"></lui-button>\n\t\t\t\t\t<lui-button ng-disabled="!$ctrl.canReloadApp( $ctrl.expandedItem.item ) " class= "reload-drop" tid="odag-reload-dropdown"\n ng-click="$ctrl.onReloadMenuClicked( $event, $ctrl.expandedItem.item )">\n\t\t\t\t\t\t<span class="lui-icon lui-caret"></span>\t\t\t\t\t\t\n\t\t\t\t\t</lui-button>\n\t\t\t\t</div>\n\t\t\t\t<lui-button ng-disabled="$ctrl.expandedItem.item.state !== \'succeeded\' && $ctrl.expandedItem.item.state !== \'failed\' && $ctrl.expandedItem.item.state !== \'canceled\' " tid="odag-applist-delete-app" class="delete-button" ng-click="$ctrl.deleteClicked($event, $ctrl.expandedItem.item)" ><span class="lui-icon  lui-button__icon lui-icon--bin"></span></lui-button>\n\t\t\t</div>\n\n\t\t\t<div class="tab-section">\n\t\t\t\t<div class="tab-header">\n\t\t\t\t\t<ul class="lui-tabset lui-tabset--fill">\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'info\' }" ng-click="$ctrl.selectTab(\'info\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'selections\' }" ng-click="$ctrl.selectTab(\'selections\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.selections"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'status\' }" ng-click="$ctrl.selectTab(\'status\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.status"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class="tab-contents">\n\t\t\t\t\t<div class="tab-content selection-tab" ng-if="$ctrl.selectedTab === \'selections\'">\n\t\t\t\t\t\t<div class="info-section selection-tab-top">\n\t\t\t\t\t\t\t<div class="info-text" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.helpText"></div>\n\t\t\t\t\t\t\t<div class="apply-selections-button">\n\t\t\t\t\t\t\t\t<lui-button ng-disabled="($ctrl.expandedItem.item.state !== \'succeeded\' && $ctrl.expandedItem.item.state !== \'failed\' && $ctrl.expandedItem.item.state !== \'canceled\') || $ctrl.applyInProgress" ng-if="$ctrl.expandedItem.item.canApplySelections" ng-click="$ctrl.applySelectionsClicked($ctrl.expandedItem.item)" q-translation="Common.Apply"></lui-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-field-header">\n\t\t\t\t\t\t\t<div class="selections-field" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.field"></div>\n\t\t\t\t\t\t\t<div class="selections-value" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.values"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-field-values">\n\t\t\t\t\t\t\t<div ng-if="$ctrl.expandedItem.item.selectionsState && $ctrl.expandedItem.item.selectionsState.length" ng-repeat="selection in $ctrl.expandedItem.item.selectionsState" class="selections-field-row">\n\t\t\t\t\t\t\t\t<div class="selections-field-data">{{selection.selectionAppParamName}}</div>\n\t\t\t\t\t\t\t\t<div class="selections-value-data">{{selection.valuesDisplayString}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div ng-if="!$ctrl.expandedItem.item.selectionsState" q-translation="odag.toolbar.navpoint.popup.request.tab.noSelectedValues"> </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-no-selections" ng-if="$ctrl.expandedItem.item.selectionsState && $ctrl.expandedItem.item.selectionsState.length === 0" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.noselections" >\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tab-content" ng-if="$ctrl.selectedTab === \'info\'">\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.status"></div>\n\t\t\t\t\t\t\t<div class="info-section-value" q-translation="odag.toolbar.navpoint.popup.request.tab.status.{{$ctrl.expandedItem.item.state}}"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.appOwner"></div>\n\t\t\t\t\t\t\t<div ng-if="!$ctrl.isOdagSaas" class="info-section-value">{{$ctrl.expandedItem.item.owner.userDirectory}}\\{{$ctrl.expandedItem.item.owner.userId}} ({{$ctrl.expandedItem.item.owner.name}})</div>\n\t\t\t\t\t\t\t<div ng-if="$ctrl.isOdagSaas" class="info-section-value">({{$ctrl.expandedItem.item.owner.name}})</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-section" ng-if="!$ctrl.isOdagSaas">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.publishToStream"></div>\n\t\t\t\t\t\t\t<div class="info-section-value"> {{$ctrl.expandedItem.item.publishToStreamName}} </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tab-content odag-request-status-content" ng-if="$ctrl.selectedTab === \'status\'">\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.lastCompletedRun"></div>\n\t\t\t\t\t\t\t<div class="info-section-value">{{$ctrl.expandedItem.item.lastLoadedTime ? $ctrl.expandedItem.item.lastLoadedTime : \'Common.None\' | translate }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-repeat="message in $ctrl.expandedItem.item.statusMessageArray" class="info-field-row" ng-if="$ctrl.expandedItem.item.statusMessageArray.length" ng-bind="message.message"></div>\n\t\t\t\t\t\t<div ng-repeat="error in $ctrl.expandedItem.item.progressErrors" class="info-field-row info-field-row-error" ng-if="$ctrl.expandedItem.item.progressErrors.length" ng-bind="error.message"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},980:function(t,e,n){"use strict";var i,s;!(i=[n(48),n(981)],s=function(t,e){t.directive("qvProgressCircle",function(){return{scope:{percentage:"="},restrict:"E",template:e,link:function t(e,n){function i(){var t=e.percentage;var i=n.find(".progress-circle-svg .bar");var s=i.attr("r");var a=Math.PI*(2*s);if(Number.isNaN(+t)){t=100;i.css({strokeDashoffset:a,fill:"#CCCCCC"})}else{t<0&&(t=0);t>100&&(t=100);var r=(100-t)/100*a;i.css({strokeDashoffset:r});100===e.percentage?i.css({fill:"#61a729"}):i.css({fill:"transparent"})}}e.$watch("percentage",i)},controller:["$scope",function(t){t.$on("$destroy",function(){})}]}})}.apply(e,i),void 0!==s&&(t.exports=s))},981:function(t,e){t.exports='<div class="progress-circle-container" ng-class="{\'full\': percentage === 100}">\n\t<svg class="progress-circle-svg" viewPort="0 0 0 0">\n\t\t<circle class="baseCircle" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t\t<circle class="whiteBar" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t\t<circle class="bar" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t</svg>\n</div>\n'}}]);