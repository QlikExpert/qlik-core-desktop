/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[40],{1173:function(t,e,r){"use strict";var o,n;!(o=[r(48),r(89),r(1307),r(1142),r(1045),r(2090),r(1529),r(2093),r(204),r(1310),r(1311),r(1312),r(1313),r(1309),r(1532),r(2101),r(2102),r(2103),r(156),r(2104),r(90),r(189),r(201),r(113),r(1747),r(2106),r(118),r(252),r(101),r(2107)],n=function(t,e,r,o,n,i,s,a,l,u,p,c,d,f,m,x,v,h,b,q,g,D,y,E,C,S,I,w,O){var M,_="boxPlot",H="qUndoExclude",k=H+"/box/qHyperCube",A=H+"/outliers/qHyperCube",T="boxplotDef",P=20,R=3e3;var U="boxplot-tooltip-picture.ng.html";function B(t){return t.qUndoExclude&&(t.qUndoExclude.box.qHyperCube.qSize.qcy<=1||$(t))&&!$(t,true)}function L(t){return g.getValue(t,"boxplotDef.qHyperCube.qDimensionInfo",[])}function V(t){return L(t).length>1}function F(t){return!t||"horizontal"===t}function N(t){if(Array.isArray(t))return t;return t?[t]:[]}function W(t){return g.getValue(t,"qUndoExclude.box.qHyperCube.qSize.qcy",0)}function X(t,e){return{viewSize:e,max:W(t)}}function z(t){var e=t.boxplotDef.qHyperCube.qDimensionInfo;var r=V(t)?e[1].qApprMaxGlyphCount:0;return Math.min(P,r)}function K(t){var e=L(t);return e.map(function(t){return t.qGroupPos})}function j(t){return{box:t.boxplotDef}}function Y(t,e,r){var o=K(t);return q.generateHyperCubes(e,o,t,r)}function G(){if(this.layout&&V(this.layout)){this._scrollHandler.onResize();this._dataScroller.updateCacheSize()}}function $(t,e){var r;r=e?t.qUndoExclude&&t.qUndoExclude.outliers&&t.qUndoExclude.outliers.qHyperCube&&t.qUndoExclude.outliers.qHyperCube.qDimensionInfo&&t.qUndoExclude.outliers.qHyperCube.qDimensionInfo.length?t.qUndoExclude.outliers.qHyperCube.qDimensionInfo:void 0:t.qUndoExclude&&t.qUndoExclude.box&&t.qUndoExclude.box.qHyperCube&&t.qUndoExclude.box.qHyperCube.qDimensionInfo&&t.qUndoExclude.box.qHyperCube.qDimensionInfo.length?t.qUndoExclude.box.qHyperCube.qDimensionInfo:void 0;if(!r)return false;var o=e?2:0;return!!r[o]&&!!r[o].qLocked}function Z(t){return t.boxplotDef.elements&&t.boxplotDef.elements.outliers&&t.boxplotDef.elements.outliers.include}function J(t,e){var r={};if(!V(e)||t){r.isOpenDim=false;r.isOpenMea=false}else{r.isOpenDim=!tt(e,1);r.isOpenMea=true}return r}function Q(t){var e=w.retriveColor("NaN"===t.qNum?t.qText:t.qNum,"argb");e.isInvalid()&&(e=w.retriveColor(y.Theme.dataColors.nullColor));return e.toRGBA()}function tt(t,e){var r=O.getValue(t,"boxplotDef.qHyperCube.qDimensionInfo."+e+".qIsOneAndOnlyOne")||false;return r}M=r.extend("BoxPlot",{namespace:".boxplot",defaultOptions:{navigation:true,selections:true,tooltips:true},init:function e(r,o,i,s,a,l){this._super(r,o,i,s,a,l);this._derivedProperties=new n;var p=o.find(".picasso-chart")[0];p.__do_not_use_findShapes=this.chartInstance.findShapes.bind(this.chartInstance);var f=g.getValue(r,"layout.boxplotDef.elements.outliers.include");var m=f?[k,A]:[k];this.hasOption("selections")&&(this._selectionHandler=u.create({model:s.model,chartInstance:this.chartInstance,selectionsApi:a,dataPaths:m,isLassoDisabled:this.isLassoDisabled.bind(this)}));if(this.hasOption("tooltips")){var v=t.getService("$templateCache");v.put(U,S);this._tooltipHandler=c.create(this.chartInstance,l,o)}this._scrollHandler=new d(this.chartInstance,o,o[0],this.getSlicedData.bind(this),l,this.updateChart.bind(this));this._dataScroller=new x(s,this.getData,this._scrollHandler);this.backendApi.setCacheOptions({maxStackedValues:R});this._colorCache={};this.setDataPaths(m)},getSlicedData:function t(e,r){return this._dataScroller.getSlicedData(this.layout,e,r)},updateScrollHandlerState:function t(e){void 0!==e&&(this._disableScrolling=!!e);this._scrollHandler.setDisabled(!this.hasOption("navigation")||!V(this.layout)||this._disableScrolling)},on:function t(){this._super();this.hasOption("navigation")&&this._scrollHandler.on();this.hasOption("tooltips")&&this._tooltipHandler.on();this.hasOption("selections")&&this._selectionHandler.on()},off:function t(){this._super();this.hasOption("navigation")&&this._scrollHandler.off();this.hasOption("tooltips")&&this._tooltipHandler.off();this.hasOption("selections")&&this._selectionHandler.off()},_getBoxMarkerSettings:function t(e,r,o){var n=e.boxplotDef.color.auto?y.getStyle(_,"box.box","fill"):y.Theme.resolveColor(e.boxplotDef.color.box.paletteColor);var i=y.getContrastingGrey(n).toHex();var s=B(e)?[]:N(r.trigger);var a=N(r.consume);if(this.hasOption("tooltips")){s.push(o.box.trigger);a.push.apply(a,o.box.consume)}var l={displayOrder:1100,settings:{whisker:{width:.5,stroke:y.getStyle(_,"box.whisker","stroke"),show:e.boxplotDef.presentation.whiskers.show},box:{width:.5,maxWidthPx:30,fill:n,stroke:y.getStyle(_,"box.box","stroke"),strokeWidth:1},median:{strokeWidth:1,stroke:i},minor:{scale:"measure"},line:{strokeWidth:1,stroke:y.getStyle(_,"box.line","stroke")},orientation:e.orientation},brush:{trigger:s,consume:a},data:{source:k,extract:{field:"qMeasureInfo/0",props:{min:{field:"qMeasureInfo/0"},start:{field:"qMeasureInfo/1"},med:{field:"qMeasureInfo/2"},end:{field:"qMeasureInfo/3"},max:{field:"qMeasureInfo/4"},minMeasure:{field:"qMeasureInfo/0",reduce:"first",reduceLabel:"none",value:function t(e){return e}},startMeasure:{field:"qMeasureInfo/1",reduce:"first",reduceLabel:"none",value:function t(e){return e}},medMeasure:{field:"qMeasureInfo/2",reduce:"first",reduceLabel:"none",value:function t(e){return e}},endMeasure:{field:"qMeasureInfo/3",reduce:"first",reduceLabel:"none",value:function t(e){return e}},maxMeasure:{field:"qMeasureInfo/4",reduce:"first",reduceLabel:"none",value:function t(e){return e}},tooltip:""}}}};if(V(e)){l.data.extract.field="qDimensionInfo/0";l.data.extract.props.elemNo={};l.data.extract.props.tooltip={field:"qDimensionInfo/0",value:function t(e){return e}}}if(!e.boxplotDef.color.auto&&"byExpression"===e.boxplotDef.color.mode)if(0===e.qUndoExclude.box.qHyperCube.qMeasureInfo[0].qAttrExprInfo.length)l.settings.box.fill=w.retriveColor(y.Theme.dataColors.nullColor).toRGBA();else{var u=C.mapArrayToObject(e.qUndoExclude.box.qHyperCube.qMeasureInfo[0].qAttrExprInfo,"id",true);var p=u.colorByExpression&&u.colorByExpression.index;if(p>-1){var c="qMeasureInfo/0/qAttrExprInfo/"+p;l.data.extract.props.color={field:c,value:function t(e){if("string"===typeof e.qText){var r=w.retriveColor(e.qText);if(!r.isInvalid())return r.toRGBA()}if("number"===typeof e.qNum)return w.retriveColor(e.qNum,"argb").toRGBA();return w.retriveColor(y.Theme.dataColors.nullColor).toRGBA()}};l.settings.box.fill={ref:"color"}}}return l},_clearColorCache:function t(){this._colorCache={}},_updateColorCache:function t(e){var r=this._colorCache;var o=e.qUndoExclude.box.qHyperCube.qDataPages[0].qMatrix;var n=C.mapArrayToObject(e.qUndoExclude.box.qHyperCube.qMeasureInfo[0].qAttrExprInfo,"id",true);o.forEach(function(t){r[t[0].qElemNumber]=Q(t[1].qAttrExps.qValues[n.colorByExpression.index])})},_getColorFromElemNo:function t(e){return this._colorCache[e]},_useColorCache:function t(e){if(!Z(e))return false;var r=!e.boxplotDef.color.auto&&"byExpression"===e.boxplotDef.color.mode;if(!r)return false;if(0===e.qUndoExclude.box.qHyperCube.qMeasureInfo[0].qAttrExprInfo.length)return false;if(!V(e))return false;return true},_getPointMarkerSettings:function t(e,r,o){var n=e.boxplotDef.color.auto?y.Theme.dataColors.primaryColor:y.Theme.resolveColor(e.boxplotDef.color.point.paletteColor);var i=y.getContrastingTransparent(n);var s=N(r.trigger);var a=N(r.consume);if(this.hasOption("tooltips")){s.push(o.point.trigger);a.push.apply(a,o.point.consume)}var l={displayOrder:1e3,settings:{fill:n,stroke:i,size:.2,strokeWidth:1,sizeLimits:{maxRelExtent:10,maxPx:10}},brush:{trigger:s,consume:a},data:{source:A,extract:{field:"qDimensionInfo/1",props:{elemNo:{field:"qDimensionInfo/1"},inner:{field:"qDimensionInfo/1"},tooltip:{field:"qDimensionInfo/1",value:function t(e){return e}},measure:{field:"qMeasureInfo/0",reduce:"first",reduceLabel:"none",value:function t(e){return e}}}}}};if(V(e)){l.data.extract.field="qDimensionInfo/2";l.data.extract.props.inner.field="qDimensionInfo/2";l.data.extract.props.tooltip.field="qDimensionInfo/2";l.data.extract.props.outer={field:"qDimensionInfo/1",value:function t(e){return e}};B(e)&&(l.data.extract.props.elemNo.field="qDimensionInfo/2")}if(!e.boxplotDef.color.auto&&"byExpression"===e.boxplotDef.color.mode)if(0===e.qUndoExclude.box.qHyperCube.qMeasureInfo[0].qAttrExprInfo.length)l.settings.fill=w.retriveColor(y.Theme.dataColors.nullColor).toRGBA();else{var u=e.qUndoExclude.box.qHyperCube.qDataPages[0].qMatrix;var p=this;this._clearColorCache();if(V(e))l.settings.fill=function(t){return p._getColorFromElemNo(t.datum.outer.value.qElemNo)};else{var c=C.mapArrayToObject(e.qUndoExclude.box.qHyperCube.qMeasureInfo[0].qAttrExprInfo,"id",true);l.settings.fill=Q(u[0][0].qAttrExps.qValues[c.colorByExpression.index])}}return l},_getDimAxisSettings:function t(e,r){var o=B(e)?[]:N(r.trigger);var n=N(r.consume);var i=this.picassoElement.getBoundingClientRect()["vertical"===e.orientation?"height":"width"];var s=i/4;var a=I.getAdjustedMaxGlyphCount(z(this.layout||e),e.qUndoExclude.box.qHyperCube.qDataPages[0].qMatrix,0);return{brush:{trigger:o,consume:n},settings:{labels:{mode:"vertical"===e.orientation?e.dimensionAxis.label:"auto",maxGlyphCount:a,maxLengthPx:s},paddingEnd:4}}},createChartSettings:function t(e){var r=this.options&&"rtl"===this.options.direction;var n=F(e.orientation);var i=V(e);var s=e[T].qHyperCube.qDimensionInfo;var a=n?"x":"y";var l=n?"y":"x";var u=o.create({chartID:_,layoutMode:this.getLayoutMode(e)});var c={};var d={};var f={};if(this.hasOption("selections")){var x=this._selectionHandler.setUp({contexts:["select"],data:["elemNo"],datasets:[k,A],isSingleSelect:tt(e,1)});i?this.chartInstance.brush("select").addKeyAlias(A+"/qDimensionInfo/1",k+"/qDimensionInfo/0"):this.chartInstance.brush("select").removeKeyAlias(A+"/qDimensionInfo/1");c={trigger:g.extend(true,{},x.trigger,{data:[""]}),consume:[g.extend(true,{},x.consume,{data:[""]})]};d={trigger:x.trigger,consume:[x.consume]};f={trigger:x.trigger,consume:[x.consume]}}var v={point:{},box:{}};if(this.hasOption("tooltips")){v.point=this._tooltipHandler.setUp({dataPath:A,data:i?["inner",l]:["inner"],contexts:["pointTip"],componentKey:"point-marker",rowResolver:function t(r,o){return{value:m.formatMeasureValue(r,o),label:e.boxplotDef.qHyperCube.qMeasureInfo[0].qFallbackTitle}},direction:this.options.direction,measureRows:["measure"],labelData:i?["tooltip","outer"]:["tooltip"]});v.box=this._tooltipHandler.setUp({template:U,dataPath:k,data:[""],contexts:["boxTip"],componentKey:"box-marker",headerResolver:function t(r){return(i?r[0]+" - ":"")+e.boxplotDef.qHyperCube.qMeasureInfo[0].qFallbackTitle},rowResolver:function t(r,o){var n=(o.source.key+"/"+o.source.field).replace(/\//g,".");var i=g.getValue(e,n);var s=C.mapArrayToObject(i.qAttrExprInfo,"id",true);var a=s.tooltip;var l;if(a){var u=o.value.qAttrExps.qValues;l=u[a.index]?u[a.index].qText:""}else l=i.qFallbackTitle;return{value:m.formatMeasureValue(r,o),label:l}},direction:this.options.direction,measureRows:["minMeasure","startMeasure","medMeasure","endMeasure","maxMeasure"],labelData:["tooltip"],filterShapes:function t(e){var r=[];if(e.length>0)for(var o=0;o<e.length;o++)if("container"===e[o].type){r.push(e[o]);break}return r}})}var h=$(e);var b=J(h,e);var q={scrollHandler:this.hasOption("navigation")&&this._scrollHandler,selectionHandler:this.hasOption("selections")&&this._selectionHandler};var D={componentKey:B(e)&&Z(e)?"point-marker":"box-marker",lassoBrushKey:"select",dimRangeBrushKey:"select",measureRangeBrushKey:null,areaBrushKey:E.BOX_MEASURE_RANGE?"select":null};this._dependentActions&&this._dependentActions.destroy();this._dependentActions=p.create(q,this.isOn.bind(this),e.orientation,r,D,b);u.addPreset("dimension-measure-chart",{isRtl:r,includeDimensionAxis:i,orientation:e.orientation,selectionsEnabled:this.hasOption("selections"),measureSource:["qMeasureInfo/0","qMeasureInfo/1","qMeasureInfo/2","qMeasureInfo/3","qMeasureInfo/4"],dimensionSource:"qDimensionInfo/0",measureAxisProperties:e.measureAxis,measureTitleText:e[T].qHyperCube.qMeasureInfo[0].qFallbackTitle,dimensionAxisProperties:e.dimensionAxis,dimensionAxisSettings:this._getDimAxisSettings(e,c,v),dimensionTitleText:s&&s[s.length-1]&&s[s.length-1].qFallbackTitle||"",gridlines:e.gridlines,hasNavigation:this.hasOption("navigation"),isNavigationEnabledFn:this.isOn.bind(this),scrollSettings:this.hasOption("navigation")&&X(e,this._scrollHandler.getScrollViewSizeInItem()),enableLasso:true,lasso:{brushKey:"select",brushComponents:B(e)?["point-marker"]:["box-marker","point-marker"]},enableDimRange:true,dimRange:{brushKey:"select",brushAxis:n?"y-axis":"x-axis",brushArea:"box-marker",brushScale:"dimension"},enableAreaRange:!!E.BOX_MEASURE_RANGE,areaRange:{brushKey:"select",brushAxis:n?"x-axis":"y-axis",brushData:["elemNo"],brushArea:"box-marker",brushScale:"measure",brushComponents:["box-marker"]},brushActions:this._dependentActions.gestures,refLines:e.refLine&&e.refLine.refLines});var y=u.getSettings();var S=this._getBoxMarkerSettings(e,d,v);i&&(S.settings.major={scale:"dimension"});u.addComponent("box-marker",S);if(Z(e)){var I=this._getPointMarkerSettings(e,f,v);y.scales.measure.data.fields.push({source:A,field:"qMeasureInfo/0"});I.data.extract.props[a]={field:"qMeasureInfo/0"};I.settings[a]={scale:"measure"};if(i){I.data.extract.props[l]={field:"qDimensionInfo/1"};I.settings[l]={scale:"dimension"}}u.addComponent("point-marker",I)}this.addSnapshotChartSettings(y,e);return y},resize:function t(e,r){if(!this.layout)return;G.call(this);this._super(e,r)},paint:function t(r){this.backendApi.isSnapshot||this.options.viewState||this.updateScrollHandlerState(false);this._orientation||(this._orientation=this.layout.orientation);if(this._orientation!==this.layout.orientation){G.call(this);this._orientation=this.layout.orientation}var o=this.layout;var n=this;var i=o.qUndoExclude;if(!i)return e.resolve();this.hasOption("tooltips")&&this._tooltipHandler.closeTooltip();var s=i.box&&i.box.qHyperCube.qDataPages.length,a=!o.boxplotDef.elements.outliers.include||i.outliers&&i.outliers.qHyperCube.qStackedDataPages.length;if(s&&a){var l;if(!this.backendApi.isSnapshot&&V(o)&&this._scrollHandler.isDataSizeChanged(o.qUndoExclude.box.qHyperCube.qDataPages[0].qMatrix.length,o.qUndoExclude.box.qHyperCube.qSize.qcy)){var u=this._super;l=this._scrollHandler.getViewData().finally(function(){return u.call(n,r)})}else l=this._super(r);return l}return e.resolve()},destroy:function t(){this._super();this._dataScroller.destroy()},setSnapshotData:function t(r){this._super(r);var o=e();r.qUndoExclude.box.qHyperCube.qDataPages=this.layout.qUndoExclude.box.qHyperCube.qDataPages;r.qUndoExclude.outliers.qHyperCube.qStackedDataPages=this.layout.qUndoExclude.outliers.qHyperCube.qStackedDataPages;o.resolve(r);return o.promise},getViewState:function t(){return{scroll:Math.round(this._scrollHandler.getScrollState())}},getDisclaimerAttributes:function t(e){var r=this.hasOption("navigation")&&X(e,this._scrollHandler.getScrollViewSizeInItem());var o;o=!!(!V(e)&&e.boxplotDef.elements.outliers.include&&e.qUndoExclude.outliers.qHyperCube.qSize.qcy>1e4)||f.getLimitedDataAttribute(e&&e.qUndoExclude&&e.qUndoExclude.outliers&&e.qUndoExclude.outliers.qHyperCube,{maxNbrOfDimensions:3});return{data:e.qUndoExclude&&e.qUndoExclude.box,supportedDisclaimers:{LimitedData:true},options:{bottom:true,paddingBottom:r&&r.viewSize<r.max,supportNegative:true,explicitLimitedData:o}}},updateChart:function t(e,r,o){this._useColorCache(e)&&this._updateColorCache(e);this._super(e,r,o)},updateDerivedProperties:function t(e,r){var o=this;var n=o.backendApi.model;return o._derivedProperties.addDefaultHyperCubeHash(e.boxplotDef.qHyperCubeDef,r.boxplotDef.qHyperCube,n.app,j(e)).then(function(t){var i={layout:r,properties:e,model:n,hashData:t,generateDerivedProperties:function t(e,r){return Y(e,r,n.app)}};return o._derivedProperties.updateDerivedProperties(i)})},updateData:function t(r){var o=this;return o._super(r).then(function(){if(o._destroyed)return e.reject();r=o.layout;o._scrollHandler.setOptions({direction:"horizontal"===r.orientation?"vertical":"horizontal"});if(o.backendApi.isSnapshot)return e.resolve();o.updateScrollHandlerState(true);if(o.options.viewState){o._scrollHandler.updateViewState(W(r));o._scrollHandler.setScrollState(o.options.viewState.scroll)}else o._scrollHandler.resetScroll();var t=r.qUndoExclude;var n=g.getValue(r,"boxplotDef.elements.outliers.include");var i=[];var s=[k];o.backendApi.setPath("/qUndoExclude/box/qHyperCubeDef");V(r)&&i.push("/qUndoExclude/box/qHyperCubeDef");if(n){i.push("/qUndoExclude/outliers/qHyperCubeDef");s.push(A);o._dataScroller.updateOutliersCache(r)}o.setDataPaths(s);o.backendApi.setPaths(i);o.backendApi.updateCache(t.box);if(V(r)){var a=o.options.viewState?o.options.viewState.scroll:o._scrollHandler.getScrollState();return o.getSlicedData(a,o._scrollHandler.getScrollViewSizeInItem())}var l=[o.getData(o.backendApi,t.box.qHyperCube,{height:1})];n&&l.push(o.getData(o._dataScroller.getOutliersCache(),t.outliers.qHyperCube,{height:t.outliers.qHyperCube.qSize.qcy}));return e.all(l)})},isLassoDisabled:function t(){var e=this.$scope.layout;var r=O.getValue(e,"boxplotDef.qHyperCube.qDimensionInfo");var o=r.length===r.filter(function(t){return true===t.qIsOneAndOnlyOne}).length;return o}});return{type:"boxplot",BackendApi:v,template:h,View:M,definition:i,softDefinition:a.get(T),initialProperties:{boxplotDef:{sorting:{autoSort:true},qHyperCubeDef:{qDimensions:[],qMeasures:[],qMode:"S",qAlwaysFullyExpanded:true,qSuppressZero:false,qSuppressMissing:true}}},support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:true,viewData:true},options:{hyperCubePath:T,usingDerivedProperties:true},data:s,importProperties:function t(){var e=D.hypercube.importProperties.apply(D.hypercube.importProperties,arguments);var r=e.qProperty;r.boxplotDef.qHyperCubeDef.qDimensions.forEach(function(t){t.qOtherTotalSpec.qOtherMode="OTHER_OFF"});return e},exportProperties:D.hypercube.exportProperties,exportTableProperties:function t(e){var r=H+".box";return D.hypercube.exportProperties(e,r)},getCreatePropertyHandler:function t(e){var r=this.mappedDefinition,o=this.globalChangeListeners,n,i;this.dimensionDefinition&&(n=b.mapProperties(r.items.data.items.innerData.items.dimensions));this.measureDefinition&&(i=b.mapProperties(r.items.data.items.innerData.items.measures));var s=new l({app:e,dimensionDefinition:this.dimensionDefinition,measureDefinition:this.measureDefinition,dimensionProperties:n,measureProperties:i,globalChangeListeners:o,path:T});s.getLabels=function(){return[]};return s}}}.apply(e,o),void 0!==n&&(t.exports=n))},1526:function(t,e,r){"use strict";var o,n;!(o=[r(90),r(2091)],n=function(t,e){var r={getSettings:o};return r;function o(r){var o=t.getValue(r,"boxplotDef.qHyperCube.qDimensionInfo.1.qCardinal",1);if(o>10)return e.BOX_MIDDLE;return e.ASCII}}.apply(e,o),void 0!==n&&(t.exports=n))},1527:function(t,e,r){"use strict";var o,n;!(o=[r(91),r(1528)],n=function(t,e){var r={getElementIds:o,getElements:n};return r;function o(t){var e=t.qUndoExclude.box.qHyperCubeDef.qMeasures;var r=e.map(function(t){return t.boxElement});return r}function n(r,o){var n=r.qUndoExclude.box.qHyperCubeDef.qMeasures;var i=n.map(function(r){var n=e.BOXELEMENTS[r.boxElement].translationKey;var i={id:r.boxElement,label:t.get(n),exp:r.qDef.qDef,isDefault:r.boxElement===o.ELEMENT};return i});return i}}.apply(e,o),void 0!==n&&(t.exports=n))},1528:function(t,e,r){"use strict";var o,n;!(o=[r(91)],n=function(t){var e="total {{<OuterDim>}} Aggr( {{InnerMeasure}}, {{OuterDim,}} {{InnerDim}} ) ";var r="Median( "+e+" )";var o=a(.25);var n=a(.75);var i="Stdev( "+e+" ) ";var s="Avg( "+e+" )";function a(t){var r="Fractile";var o="";0===t?r="Min":1===t?r="Max":o=","+t;return r+"( "+e+o+" )"}function l(t){return"(("+a(.75)+" - "+a(.25)+") * "+t+")"}function u(t){return"Rangemin("+t+", "+a(1)+")"}function p(t){return"Rangemax("+t+", "+a(0)+")"}var c={getFractileFunction:a,BOXELEMENTS:{firstWhisker:{translationKey:"boxplot.firstWhisker"},boxStart:{translationKey:"boxplot.boxStart"},boxMiddle:{translationKey:"boxplot.centerLine"},boxEnd:{translationKey:"boxplot.boxEnd"},lastWhisker:{translationKey:"boxplot.lastWhisker"}},BOXMODES:{TUKEY:{value:"tukey",translation:"properties.boxplot.calculationMode.tukey",calcParameters:[{value:1,label:t.get("properties.boxplot.calculationMode.tukey.short")},{value:1.5,label:t.get("properties.boxplot.calculationMode.tukey.medium")},{value:2,label:t.get("properties.boxplot.calculationMode.tukey.long")}],defaultCalcParam:1.5,getBoxExpressions:function t(e){e=e||this.defaultCalcParam;var i=l(e);var s=o+" - "+i;var a=n+" + "+i;return{firstWhisker:p(s),boxStart:o,boxMiddle:r,boxEnd:n,lastWhisker:u(a),_nonWrapped:{firstWhisker:s,lastWhisker:a}}}},FRACTILES:{value:"fractiles",translation:"properties.boxplot.calculationMode.fractiles",calcParameters:[{value:0,label:t.get("properties.boxplot.calculationMode.fractiles.minmax")},{value:.01,label:t.get("properties.boxplot.calculationMode.fractiles.first")},{value:.05,label:t.get("properties.boxplot.calculationMode.fractiles.fifth")},{value:.1,label:t.get("properties.boxplot.calculationMode.fractiles.tenth")}],defaultCalcParam:.01,getBoxExpressions:function t(e){Number.isNaN(+e)&&(e=this.defaultCalcParam);return{firstWhisker:a(e),boxStart:o,boxMiddle:r,boxEnd:n,lastWhisker:a(1-e)}}},STDDEV:{value:"stdDev",translation:"properties.boxplot.calculationMode.stdDev",calcParameters:[{value:2,label:t.get("properties.boxplot.calculationMode.stdDev.short")},{value:3,label:t.get("properties.boxplot.calculationMode.stdDev.medium")},{value:4,label:t.get("properties.boxplot.calculationMode.stdDev.long")}],defaultCalcParam:3,getBoxExpressions:function t(e){e=e||this.defaultCalcParam;var r=s+" - "+e+" *("+i+")";var o=s+" - "+i;var n=s+" + "+i;var a=s+" + "+e+" *("+i+")";return{firstWhisker:p(r),boxStart:p(o),boxMiddle:s,boxEnd:u(n),lastWhisker:u(a),_nonWrapped:{firstWhisker:r,boxStart:o,boxEnd:n,lastWhisker:a}}}}}};c.getDefaultNameTemplate=function(t,e){var r=e.calculations.mode;var o=e.calculations.parameters[r];var n;n=r===c.BOXMODES.FRACTILES.value?d(t,o,r):m(t,o,r);return n};function d(e,r,o){"firstWhisker"!==e&&"lastWhisker"!==e||(e=f(e,r));var n=t.get("properties.boxplot.calculationMode."+o+".elements."+e,r);return{name:n,type:"string"}}function f(t,e){var r="";var o="firstWhisker"===t;switch(e){case 0:r=o?".min":".max";break;case.01:r=o?".first":".ninetynineth";break;case.05:r=o?".fifth":".ninetyfifth";break;case.1:r=o?".tenth":".ninetieth";break}t+=r;return t}function m(e,r,o){var n=t.get("properties.boxplot.calculationMode."+o+".elements."+e,r);var i;switch(o){case c.BOXMODES.FRACTILES.value:i=c.BOXMODES.FRACTILES;break;case c.BOXMODES.STDDEV.value:i=c.BOXMODES.STDDEV;break;case c.BOXMODES.TUKEY.value:i=c.BOXMODES.TUKEY;break}var s=i.getBoxExpressions(r);var l=s._nonWrapped[e];if(!l)return{name:n,type:"string"};var u;if("firstWhisker"===e||"boxStart"===e){var p=t.get("properties.boxplot.calculationMode.fractiles.elements.firstWhisker.min");var d=a(0);u="if("+l+" < "+d+", '"+p+"', '"+n+"' )"}else{var f=t.get("properties.boxplot.calculationMode.fractiles.elements.lastWhisker.max");var m=a(1);u="if("+l+" > "+m+", '"+f+"', '"+n+"' )"}return{name:u,type:"expression"}}return c}.apply(e,o),void 0!==n&&(t.exports=n))},1529:function(t,e,r){"use strict";var o,n;!(o=[r(91)],n=function(t){var e={measures:{min:1,max:1,description:function e(r){var o="horizontal"===r.orientation?"properties.xAxis":"properties.yAxis";return t.get(o)},add:function t(){},move:function t(){},remove:function t(){}},dimensions:{min:1,max:2,description:function e(r,o){var n;n=0===o?"Visualizations.Descriptions.Box":"horizontal"===r.orientation?"properties.yAxis":"properties.xAxis";return t.get(n)},add:function t(){},move:function t(){},remove:function t(){}}};return e}.apply(e,o),void 0!==n&&(t.exports=n))},1744:function(t,e,r){"use strict";var o,n;!(o=[r(1526),r(1527),r(1745),r(1746)],n=function(t,e,r,o){var n={applySorting:i};return n;function i(n,i){var s=function e(){return t.getSettings(i)};var a=function t(){var r=s();return e.getElements(n,r)};var l=r.create(s,a),u=n.qUndoExclude.box.qHyperCubeDef.qDimensions[0],p=n.boxplotDef.sorting;o.applySorting(l,u,p)}}.apply(e,o),void 0!==n&&(t.exports=n))},1747:function(t,e,r){"use strict";var o,n;!(o=[],n=function(){return{mapArrayToObject:t};function t(t,e){if(!Array.isArray(t))throw TypeError("array parameter must be of type: array");var r={};e=e||"id";t.map(function(t,o){var n=t[e];if("string"!==typeof n)return TypeError("object property value of property:"+e+" is not a string: "+n);r[n]={item:t,index:o}});return r}}.apply(e,o),void 0!==n&&(t.exports=n))},2090:function(t,e,r){"use strict";var o,n;!(o=[r(89),r(101),r(1248),r(1526),r(1527),r(1528),r(201),r(1744),r(1747)],n=function(t,e,r,o,n,i,s,a,l){var u="boxPlot";var p={AUTO_SORT:"boxplotDef.sorting.autoSort",SORT_CRITERIA:"boxplotDef.sorting.sortCriteria",ELEMENT_ID:"boxplotDef.sorting.elementId",EXPRESSION:"boxplotDef.sorting.expression"};var c={translation:"properties.colors",type:"items",items:{colors:{type:"items",items:{autoColor:{ref:"boxplotDef.color.auto",type:"boolean",translation:"properties.colors",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},colorMode:{ref:"boxplotDef.color.mode",type:"string",component:"dropdown",options:function t(){return[{value:"primary",translation:"properties.colorMode.primary"},{value:"byExpression",translation:"properties.colorMode.byExpression"}]},defaultValue:"primary",show:function t(r){return!e.getValue(r,"boxplotDef.color.auto",true)}},boxColor:{ref:"boxplotDef.color.box.paletteColor",translation:"properties.boxplot.boxColor",type:"object",component:"color-picker",dualOutput:true,show:function t(r){return!e.getValue(r,"boxplotDef.color.auto",true)&&"primary"===e.getValue(r,"boxplotDef.color.mode","primary")},defaultValue:function t(){var e=s.getStyle(u,"box.box","fill");var r=s.Theme.currentPalette.indexOf(e);return{index:r,color:e}}},outlierColor:{ref:"boxplotDef.color.point.paletteColor",translation:"properties.boxplot.outlierColor",type:"object",component:"color-picker",dualOutput:true,show:function t(r){return!e.getValue(r,"boxplotDef.color.auto",true)&&"primary"===e.getValue(r,"boxplotDef.color.mode","primary")},defaultValue:function t(){var e=s.Theme.dataColors.primaryColor;var r=s.Theme.currentPalette.indexOf(e);return{index:r,color:e}}},attributeExpression:{type:"string",component:"expression",expressionType:"measure",schemaIgnore:true,ref:"boxplotDef.color.expression.qValueExpression.qExpr",translation:"Common.Expression",show:function t(r){return!e.getValue(r,"boxplotDef.color.auto",true)&&"byExpression"===e.getValue(r,"boxplotDef.color.mode")}},expressionIsColor:{ref:"boxplotDef.color.expressionIsColor",translation:"properties.expressionIsColor",type:"boolean",defaultValue:true,show:false}}}}};var d={type:"items",translation:"properties.presentation",items:{orientation:{ref:"orientation",type:"string",component:"item-selection-list",defaultValue:"vertical",horizontal:true,items:[{component:"icon-item",icon:"direction_up_down",labelPlacement:"bottom",translation:"properties.orientation.vertical",value:"vertical"},{icon:"direction_left_right",component:"icon-item",labelPlacement:"bottom",translation:"Common.Horizontal",value:"horizontal"}]},showWhiskers:{ref:"boxplotDef.presentation.whiskers.show",translation:"properties.boxplot.showWhiskers",type:"boolean",defaultValue:true},gridLines:{type:"items",snapshot:{tid:"property-gridLines"},items:{showGridLines:{ref:"gridlines.auto",type:"boolean",translation:"properties.gridLine.spacing",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},gridSpacing:{ref:"gridlines.spacing",type:"number",component:"dropdown",defaultValue:2,options:[{value:0,translation:"properties.gridLine.noLines"},{value:2,translation:"properties.gridLine.medium"},{value:3,translation:"properties.gridLine.narrow"}],show:function t(e){return e.gridlines&&!e.gridlines.auto}}}}}};var f={uses:"axis.picasso.measureAxis"};var m={uses:"axis.picasso.dimensionAxis",show:function t(r,o,n){var i=e.getValue(n.layout,"boxplotDef.qHyperCube.qDimensionInfo.length")>1;return i}};var x={uses:"settings",items:{presentation:d,colors:c,measureAxis:f,dimensionAxis:m}};var v=r.expression(p.SORT_CRITERIA+".sortByExpression");var h={type:"items",items:{toggled:v.items.toggled,sortByElement:{component:"sort-by-element",expressionRef:p.EXPRESSION,elementRef:p.ELEMENT_ID,show:function t(r){return 0!==e.getValue(r,p.SORT_CRITERIA+".sortByExpression",0)},elements:function e(r){if(!r.properties.qUndoExclude||!r.properties.qUndoExclude.hashCode)return t.reject();var i=o.getSettings(r.layout),e=n.getElements(r.properties,i);return t.resolve(e)}},order:v.items.order}};var b={type:"items",translation:"properties.sorting",sortIndexRef:"boxplotDef.qHyperCubeDef.qInterColumnSortOrder",allowMove:true,schemaIgnore:true,grouped:false,items:{autoSort:{ref:p.AUTO_SORT,type:"boolean",translation:"properties.sorting",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],show:R,change:function t(e,r,o,n){a.applySorting(o,n.layout)}},sortingItems:{component:"items",grouped:true,items:{expression:h,numeric:r.numeric(p.SORT_CRITERIA+".sortByNumeric"),ascii:r.ascii(p.SORT_CRITERIA+".sortByAscii"),defaultSortMessage:{component:"text",translation:"properties.sorting.defaultSortingMessage",show:function t(r){return 0==e.getValue(r,p.SORT_CRITERIA+".sortByExpression",0)&&0==e.getValue(r,p.SORT_CRITERIA+".sortByNumeric",0)&&0==e.getValue(r,p.SORT_CRITERIA+".sortByAscii",0)}}},show:function t(r){return R(r)&&!e.getValue(r,p.AUTO_SORT)}},noData:{component:"no-data",show:function t(e){return!R(e)}}}};var q={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{suppressZero:{ref:"boxplotDef.qHyperCubeDef.qSuppressZero",show:false},calcCond:{uses:"calcCond",ref:"boxplotDef.qHyperCubeDef"}}},refLines:{uses:"reflines"}}};function g(t,e){var r=t.filter(function(t){return t.boxElement===e})[0];return r?r.qDef.qDef:""}function D(t,e){var r=t.filter(function(t){return t.boxElement===e})[0];var o=l.mapArrayToObject(r.qAttributeExpressions,"id",true);return r&&o.tooltip?r.qAttributeExpressions[o.tooltip.index].qExpression:""}function y(t){return{get:function e(r,o,n){var i=n.layout.boxplotDef&&n.layout.boxplotDef.elements[t].expression;if(n.properties.qUndoExclude&&(null===i||"NaN"===i||""===i)){var s=g(n.properties.qUndoExclude.box.qHyperCubeDef.qMeasures,t);return s||""}return r(null)||""},set:function t(e,r,o){r(o.type,e,null)}}}function E(t){return{get:function e(r,o,n){if(n.layout.boxplotDef&&!n.layout.boxplotDef.elements[t].name)return D(n.properties.qUndoExclude.box.qHyperCubeDef.qMeasures,t);return r(o.type)},set:function t(r,o,n){var i=e.getDefaultValue(n.type,n);o(n.type,r,i)}}}function C(t,r){return e.getValue(r.properties,"boxplotDef.qHyperCubeDef.qDimensions",[])[0]!==t}var S={ref:"boxplotDef.qHyperCubeDef.qDimensions",disabledRef:"boxplotDef.qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions",items:{nullSuppression:{show:C},dimensionLimits:{show:false},others:{show:C,items:{suppressOther:{readOnly:true,defaultValue:true}}}}};var I={uses:"measures",ref:"boxplotDef.qHyperCubeDef.qMeasures",disabledRef:"boxplotDef.qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",items:{numberFormatting:{items:{numberFormattingType:{options:[{},{},{},{},{},{},null]}}}}};var w={uses:"data",items:{dimensions:S,measures:I}};var O={ref:"boxplotDef.calculations.mode",translation:"properties.boxplot.preset",type:"string",component:"dropdown",options:[{value:i.BOXMODES.TUKEY.value,translation:i.BOXMODES.TUKEY.translation},{value:i.BOXMODES.FRACTILES.value,translation:i.BOXMODES.FRACTILES.translation},{value:i.BOXMODES.STDDEV.value,translation:i.BOXMODES.STDDEV.translation}],defaultValue:i.BOXMODES.TUKEY.value,show:function t(e){return!k(e)}};var M={ref:"boxplotDef.calculations.parameters.tukey",translation:"properties.boxplot.whiskerLength",type:"number",component:"dropdown",options:i.BOXMODES.TUKEY.calcParameters,defaultValue:i.BOXMODES.TUKEY.defaultCalcParam,show:function t(e){return!k(e)&&e.boxplotDef.calculations.mode===i.BOXMODES.TUKEY.value}};var _={ref:"boxplotDef.calculations.parameters.fractiles",translation:"properties.boxplot.whiskerPosition",type:"number",component:"dropdown",options:i.BOXMODES.FRACTILES.calcParameters,defaultValue:i.BOXMODES.FRACTILES.defaultCalcParam,show:function t(e){return!k(e)&&e.boxplotDef.calculations.mode===i.BOXMODES.FRACTILES.value}};var H={ref:"boxplotDef.calculations.parameters.stdDev",translation:"properties.boxplot.whiskerLength",type:"number",component:"dropdown",options:i.BOXMODES.STDDEV.calcParameters,defaultValue:i.BOXMODES.STDDEV.defaultCalcParam,show:function t(e){return!k(e)&&e.boxplotDef.calculations.mode===i.BOXMODES.STDDEV.value}};function k(t){return!(t.boxplotDef&&t.boxplotDef.calculations.auto)}function A(t){return{type:"items",translation:i.BOXELEMENTS[t].translationKey,items:{name:{ref:"boxplotDef.elements."+t+".name",type:"string",expression:"optional",translation:"Common.Name",convertFunctions:E(t)},expression:{ref:"boxplotDef.elements."+t+".expression",component:"expression",expressionType:"ValueExpression",translation:"Common.Expression",convertFunctions:y(t)}}}}var T={type:"items",translation:"boxplot.boxElements",items:{auto:{ref:"boxplotDef.calculations.auto",translation:"properties.boxplot.usePreset",component:"switch",type:"boolean",defaultValue:true,undefinedValue:false,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}]},mode:O,tukeyCalcParam:M,fractilesCalcParam:_,stddevCalcParam:H,customGroups:{component:"expandable-items",show:k,items:{firstWhisker:A("firstWhisker"),boxStart:A("boxStart"),boxMiddle:A("boxMiddle"),boxEnd:A("boxEnd"),lastWhisker:A("lastWhisker")}},outliers:{ref:"boxplotDef.elements.outliers.include",translation:"properties.boxplot.includeOutliers",type:"boolean",defaultValue:true,show:function t(e){var r=e.boxplotDef.calculations.mode;var o=e.boxplotDef.calculations.parameters[r];return!(!k(e)&&r===i.BOXMODES.FRACTILES.value&&0===o)}}}};var P={translation:"Common.Data",type:"items",items:{innerData:w}};return{type:"items",component:"accordion",items:{data:P,boxDataSettings:T,sorting:b,addons:q,settings:x}};function R(t){var e=t.boxplotDef.qHyperCubeDef&&t.boxplotDef.qHyperCubeDef.qDimensions.length>1;"undefined"===typeof e&&(e=false);return e}}.apply(e,o),void 0!==n&&(t.exports=n))},2091:function(t,e,r){"use strict";var o,n;!(o=[r(90),r(1743)],n=function(t,e){var r=t.extend(true,{BOX_MIDDLE:{ELEMENT:"boxMiddle",SORT_BY_EXPRESSION:1,SORT_BY_ASCII:1,SORT_BY_NUMERIC:1,SORT_BY_LOAD_ORDER:1}},e);return r}.apply(e,o),void 0!==n&&(t.exports=n))},2093:function(t,e,r){"use strict";var o,n;!(o=[r(1748),r(1526),r(1527)],n=function(t,e,r){var o={type:"items",items:{outliers:{ref:"boxplotDef.elements.outliers.include",translation:"properties.boxplot.includeOutliers",type:"boolean"}}};var n={uses:"presentation",items:{orientation:{ref:"orientation",type:"string",component:"item-selection-list",horizontal:true,items:[{component:"icon-item",icon:"direction_up_down",labelPlacement:"bottom",translation:"properties.orientation.vertical",value:"vertical"},{icon:"direction_left_right",component:"icon-item",labelPlacement:"bottom",translation:"Common.Horizontal",value:"horizontal"}]}}};var i=t.buildDefinition("boxplotDef.qHyperCubeDef","boxplotDef.sorting","qUndoExclude.box.qHyperCubeDef.qDimensions.0",e.getSettings,r.getElementIds);var s={get:function t(e){return{type:"items",component:"accordion",items:{data:{translation:"Common.Data",icon:"database",type:"items",items:{innerData:a(e),boxDataSettings:o}},sorting:i,presentation:n}}}};return s;function a(t){return{uses:"data",hyperCubePath:t,items:{dimensions:{ref:"boxplotDef.qHyperCubeDef.qDimensions",alternativeRef:"boxplotDef.qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions",type:"items"},measures:{ref:"boxplotDef.qHyperCubeDef.qMeasures",alternativeRef:"boxplotDef.qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",type:"items"}}}}}.apply(e,o),void 0!==n&&(t.exports=n))},2101:function(t,e,r){"use strict";var o,n;!(o=[r(497),r(89),r(90)],n=function(t,e,r){o.prototype.getOutliersCache=n;o.prototype.updateOutliersCache=i;o.prototype.updateCacheSize=s;o.prototype.getSlicedData=a;o.prototype.destroy=l;return o;function o(t,e,r){this._backendApi=t;this._getDataFn=e;this._scrollHandler=r}function n(){return this._outliersCacheCube}function i(e){if(!this._outliersCacheCube){this._outliersCacheCube=new t(this._backendApi.model,"qDataPages","/qUndoExclude/outliers/qHyperCubeDef",r.extend(true,{},this._backendApi.cacheCube.options,{mode:"K"}));this._outliersCacheCube.setMethodName("getHyperCubeStackData");this._scrollHandler.getScrollViewSizeInItem()&&this._outliersCacheCube.setOptions({height:3*this._scrollHandler.getScrollViewSizeInItem(),width:6})}var o=e.boxplotDef.qHyperCube.qDimensionInfo.length>1;this._outliersCacheCube.setCubeSize(o?e.qUndoExclude.box.qHyperCube.qSize:e.qUndoExclude.outliers.qHyperCube.qSize)}function s(){var t={height:3*this._scrollHandler.getScrollViewSizeInItem(),width:6};this._backendApi.setCacheOptions(t);this._outliersCacheCube&&this._outliersCacheCube.setOptions(t)}function a(t,r,o){var n={top:r,height:o,left:0,width:t.qUndoExclude.box.qHyperCube.qSize.qcx};var i=this._getDataFn(this._backendApi,t.qUndoExclude.box.qHyperCube,n);if(!t.boxplotDef.elements||!t.boxplotDef.elements.outliers.include)return i.then(function(){return t});var s={top:r,height:o,left:0,width:t.qUndoExclude.outliers.qHyperCube.qSize.qcx};var a=this._getDataFn(this._outliersCacheCube,t.qUndoExclude.outliers.qHyperCube,s);return e.all([i,a]).then(function(){return t})}function l(){this._outliersCacheCube&&this._outliersCacheCube.destroy()}}.apply(e,o),void 0!==n&&(t.exports=n))},2102:function(t,e,r){"use strict";var o,n;!(o=[r(1051)],n=function(t){var e=t.extend("BoxPlotApi",{setPaths:function t(e){this._paths=e},beginSelections:function t(){return this.model.app.switchModalSelection(this.model,this._paths)}});return e}.apply(e,o),void 0!==n&&(t.exports=n))},2103:function(t,e){t.exports='<div class="picasso-chart qv-viz" aria-hidden="true"></div>'},2104:function(t,e,r){"use strict";var o,n;function i(t){i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return i(t)}!(o=[r(90),r(89),r(1528),r(1744),r(2105),r(160),r(101),r(91)],n=function(t,e,r,o,n,s,a,l){var u="If( {{InnerMeasure}} < {{FirstWhisker}} or {{InnerMeasure}} > {{LastWhisker}}, {{InnerMeasure}} )";var p="If( {{InnerMeasure}} < {{FirstWhisker}} or {{InnerMeasure}} > {{LastWhisker}} or {{FirstInnerRow}}, {{OuterDim&}} {{InnerDim}} )";var c="If( {{InnerMeasure}} < {{FirstWhisker}} or {{InnerMeasure}} > {{LastWhisker}}, {{OuterDim&}} {{InnerDim}} )";var d="If( {{InnerMeasure}} < {{FirstWhisker}}, {{FirstWhisker}} - {{InnerMeasure}}, {{InnerMeasure}} - {{LastWhisker}} )";var f="Alt( Aggr( RowNo(), {{OuterDim,}} {{InnerDim}} ), 1 ) = 1";function m(t,e,o,i,s,a){if(!a.calculations||!a.calculations.parameters)return;var l;switch(t){case r.BOXMODES.STDDEV.value:l=r.BOXMODES.STDDEV.getBoxExpressions(a.calculations.parameters.stdDev);break;case r.BOXMODES.FRACTILES.value:l=r.BOXMODES.FRACTILES.getBoxExpressions(a.calculations.parameters.fractiles);break;case r.BOXMODES.TUKEY.value:default:l=r.BOXMODES.TUKEY.getBoxExpressions(a.calculations.parameters.tukey);break}if(!l)return"";return n.replaceDefaultExpression(l[e],o,i,s)}function x(t,r,o){var n=[];t.qDimensions.forEach(function(e,i){e.qLibraryId?n.push(v(t,"dimension",i,o,r[i])):n.push(e.qDef.qFieldDefs[0])});t.qMeasures.forEach(function(e,r){e.qLibraryId?n.push(v(t,"measure",r,o)):n.push(e.qDef.qDef)});return e.all(n)}function v(t,e,r,o,n){var i="dimension"===e?"qDimensions":"qMeasures",s=t[i][r].qLibraryId;var a="dimension"===e?"getDimension":"getMeasure";return o[a](s).then(function(t){return t.getProperties().then(function(t){return"dimension"===e?t.qDim.qFieldDefs[n]:t.qMeasure.qDef})})}function h(t,e){return s.create(e,{qExpression:t})}function b(e,v,b,q){e.qUndoExclude=e.qUndoExclude||{};e.qUndoExclude.box=e.qUndoExclude.box||{qHyperCubeDef:{}};var g=e.qUndoExclude.box.qHyperCubeDef;var D=e.boxplotDef;var y=D.qHyperCubeDef;g.qDimensions=[];g.qMeasures=[];g.qCalcCond=y.qCalcCond;var E=D.calculations.mode;var C=t.extend(true,{},y.qDimensions[0]);var S;var I;var w=y.qMeasures[0];var O=y.qDimensions.length;var M;var _;var H=D.elements;var k=2===D.qHyperCubeDef.qDimensions.length;var A=[];var T=!e.boxplotDef.color.auto&&"byExpression"===e.boxplotDef.color.mode;O>0&&T&&(A=[h(t.getValue(e,"boxplotDef.color.expression.qValueExpression.qExpr"),s.IDMAP.COLOR_BY_EXPRESSION)]);if(y.qDimensions[1]){S=t.extend(true,{},y.qDimensions[1]);g.qDimensions.push(S)}return x(D.qHyperCubeDef,v,q).then(function(x){var v=S?x[1]:"";Object.keys(r.BOXELEMENTS).forEach(function(e){var o=a.getValue(D,"elements."+e);var u=!(!o||!o.expression||o.expression.qValueExpression&&(!o.expression.qValueExpression.qExpr||!o.expression.qValueExpression.qExpr.length));if(D.calculations&&D.calculations.auto||!H||!u)M=m(E,e,x[O],x[0],v,D);else{var p=H[e].expression;M="object"===i(p)?p.qValueExpression.qExpr:p}_={qDef:{}};_.qDef.qNumFormat=w.qDef.qNumFormat;_.qDef.isCustomFormatted=w.qDef.isCustomFormatted;_.qDef.qDef=M;_.qDef.cId=t.generateId();_.boxElement=e;var c=!D.calculations.auto&&H&&H[e]&&H[e].name;_.qDef.qLabel=l.get(r.BOXELEMENTS[e].translationKey);var d=function t(o){var i;if(o)i="='"+o+"'";else{var s=r.getDefaultNameTemplate(e,D);i="expression"===s.type?"="+n.replaceDefaultExpression(s.name,x[O],x[0],v):"='"+s.name+"'"}return i};_.qAttributeExpressions=[h(c&&c.qStringExpression?"="+c.qStringExpression.qExpr:d(c),s.IDMAP.TOOLTIP)];delete _.qLibraryId;g.qMeasures.push(_)});g.qMeasures[0].qAttributeExpressions=A.concat(g.qMeasures[0].qAttributeExpressions);k&&o.applySorting(e,b);if(!D.elements||!D.elements.outliers||!D.elements.outliers.include){delete e.qUndoExclude.outliers;return}e.qUndoExclude.outliers=e.qUndoExclude.outliers||{qHyperCubeDef:{}};var q=e.qUndoExclude.outliers.qHyperCubeDef;q.qMode="K";q.qDimensions=[];q.qMeasures=[];q.qCalcCond=y.qCalcCond;var T=g.qMeasures[0].qDef.qDef.replace(/^=/,"");var P=g.qMeasures[4].qDef.qDef.replace(/^=/,"");var R=n.replaceDefaultExpression(f,x[O],x[0],v);M=k?n.replaceDoubleCurlyReferences(n.replaceDefaultExpression(p,x[O],x[0],v),{FirstWhisker:T,LastWhisker:P,FirstInnerRow:R}):n.replaceDoubleCurlyReferences(n.replaceDefaultExpression(c,x[O],x[0],v),{FirstWhisker:T,LastWhisker:P});var U=n.replaceDoubleCurlyReferences(n.replaceDefaultExpression(u,x[O],x[0],v),{FirstWhisker:T,LastWhisker:P});var B=n.replaceDoubleCurlyReferences(n.replaceDefaultExpression(d,x[O],x[0],v),{FirstWhisker:T,LastWhisker:P});var L=n.getOutliersStatement(x[0],B,v);_=t.extend(true,{},w);_.qDef.qDef=n.getOutliersStatement(x[0],U,v);delete _.qLibraryId;q.qMeasures.push(_);q.qDimensions.push(C);I=t.extend(true,{},S?y.qDimensions[1]:y.qDimensions[0]);I.qNullSuppression=true;I.qDef.cId=t.generateId();I.qDef.qFieldDefs=[n.getOutliersStatement(x[0],M,v)];I.qDef.qFieldLabels=[""];I.qDef.qSortCriterias[0].qSortByExpression=1;I.qDef.qSortCriterias[0].qExpression["qv"]=L;delete I.qLibraryId;q.qDimensions.splice(0,0,I);q.qAlwaysFullyExpanded=true;if(S){q.qDimensions.splice(1,0,S);q.qInterColumnSortOrder=[1,0,3,2]}else q.qInterColumnSortOrder=[0,1,2]})}return{generateHyperCubes:b}}.apply(e,o),void 0!==n&&(t.exports=n))},2105:function(t,e,r){"use strict";var o,n;!(o=[r(1250)],n=function(t){return{getOutliersStatement:n,replaceDefaultExpression:r,replaceDoubleCurlyReferences:e};function e(t,e){for(var r in e)t=t.replace(o("{{"+r+"}}"),e[r]);return t}function r(e,r,n,i){n=t.wrapExpression(n);i=t.wrapExpression(i||"");r=r.replace(new RegExp("^="),"");return e.replace(o("{{<OuterDim>}}"),i?"<"+i+">":"").replace(o("{{InnerMeasure}}"),r).replace(o("{{OuterDim,}}"),i?i+",":"").replace(o("{{OuterDim&}}"),i?i+" &":"").replace(o("{{OuterDim}}"),i).replace(o("{{InnerDim}}"),n)}function o(t){return new RegExp(t,"g")}function n(e,r,o){var n;e=t.wrapExpression(e);if(o){o=t.wrapExpression(o);n="=aggr( "+r+", "+e+", "+o+" )"}else n="=aggr( "+r+", "+e+" )";return n}}.apply(e,o),void 0!==n&&(t.exports=n))},2106:function(t,e){t.exports='<div qva-direction x-dir-setting="{{options.direction}}" class="qv-tooltip qvt-chart-tooltip" qva-press="hideTooltip($event)" tid="qv-chart-tooltip" ng-class="{\'above\':alwaysOnTop}" >\n\t<div class="chart-tooltip-arrow"></div>\n\t<div class="qv-chart-tooltip-inner">\n\t\t<div ng-repeat="item in content" class="qv-chart-tooltip-item">\n\t\t\t<div class="qv-chart-tooltip-content">\n\t\t\t\t<div qva-direction x-dir-text="{{item.header}}" x-dir-setting="{{options.direction}}" class=\'qv-tp-header\' ng-if="item.header !== undefined">\n\t\t\t\t\t<strong>{{item.header}}</strong>\n\t\t\t\t</div>\n\t\t\t\t<table>\n\t\t\t\t\t<tr class="qv-tp-row" qv-set-init-height>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 13px; position: relative;">\n\t\t\t\t\t\t\t<div class="partial-box">\n\t\t\t\t\t\t\t\t<div class="whisker">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="line">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="filler">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 25px; position: relative;">\n\t\t\t\t\t\t\t<div class="alignment-line align-box"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1">\n\t\t\t\t\t\t\t<div class="circle"></div>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\'qv-tp-item\'>\n\t\t\t\t\t\t\t<span qva-direction x-dir-text="{{item.rows[4].label}}" class="qv-tp-rowPart" ng-class="{\'single\' : (content.length + item.rows.length) <= 3}">{{item.rows[4].label}}</span>\n\t\t\t\t\t\t\t<span>:&nbsp;</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="!item.rows[4].template" class=\'qv-tp-value\'>\n\t\t\t\t\t\t\t<div class="qv-tp-rowPart" dir="ltr">{{item.rows[4].value}}</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows[4].template" class=\'qv-tp-template qv-tp-value\' ng-bind-html="item.rows[4].template">\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr class="qv-tp-row" qv-set-init-height>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 13px; position: relative;">\n\t\t\t\t\t\t\t<div class="partial-box">\n\t\t\t\t\t\t\t\t<div class="box box-extension">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="end-line">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 25px; position: relative;">\n\t\t\t\t\t\t\t<div class="alignment-line align-box"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1">\n\t\t\t\t\t\t\t<div class="circle"></div>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\'qv-tp-item\'>\n\t\t\t\t\t\t\t<span qva-direction x-dir-text="{{item.rows[3].label}}" class="qv-tp-rowPart" ng-class="{\'single\' : (content.length + item.rows.length) <= 3}">{{item.rows[3].label}}</span>\n\t\t\t\t\t\t\t<span>:&nbsp;</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="!item.rows[3].template" class=\'qv-tp-value\'>\n\t\t\t\t\t\t\t<div class="qv-tp-rowPart" dir="ltr">{{item.rows[3].value}}</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows[3].template" class=\'qv-tp-template qv-tp-value\' ng-bind-html="item.rows[3].template">\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr class="qv-tp-row" qv-set-init-height>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 13px; position: relative;">\n\t\t\t\t\t\t\t<div class="partial-box">\n\t\t\t\t\t\t\t\t<div class="median-line"></div>\n\t\t\t\t\t\t\t\t<div class="box full-box">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="box full-box-reverse">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 25px; position: relative;">\n\t\t\t\t\t\t\t<div class="alignment-line align-box"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1">\n\t\t\t\t\t\t\t<div class="circle"></div>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\'qv-tp-item\'>\n\t\t\t\t\t\t\t<span qva-direction x-dir-text="{{item.rows[2].label}}" class="qv-tp-rowPart" ng-class="{\'single\' : (content.length + item.rows.length) <= 3}">{{item.rows[2].label}}</span>\n\t\t\t\t\t\t\t<span>:&nbsp;</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="!item.rows[2].template" class=\'qv-tp-value\'>\n\t\t\t\t\t\t\t<div class="qv-tp-rowPart" dir="ltr">{{item.rows[2].value}}</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows[2].template" class=\'qv-tp-template qv-tp-value\' ng-bind-html="item.rows[2].template">\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr class="qv-tp-row" qv-set-init-height>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 13px; position: relative;">\n\t\t\t\t\t\t\t<div class="partial-box">\n\t\t\t\t\t\t\t\t<div class="box invert-pos lower-box">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="line">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 25px; position: relative;">\n\t\t\t\t\t\t\t<div class="alignment-line align-box"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1">\n\t\t\t\t\t\t\t<div class="circle"></div>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\'qv-tp-item\'>\n\t\t\t\t\t\t\t<span qva-direction x-dir-text="{{item.rows[1].label}}" class="qv-tp-rowPart" ng-class="{\'single\' : (content.length + item.rows.length) <= 3}">{{item.rows[1].label}}</span>\n\t\t\t\t\t\t\t<span>:&nbsp;</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="!item.rows[1].template" class=\'qv-tp-value\'>\n\t\t\t\t\t\t\t<div class="qv-tp-rowPart" dir="ltr">{{item.rows[1].value}}</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows[1].template" class=\'qv-tp-template qv-tp-value\' ng-bind-html="item.rows[1].template">\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr class="qv-tp-row" qv-set-init-height>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 13px; position: relative;">\n\t\t\t\t\t\t\t<div class="partial-box">\n\t\t\t\t\t\t\t\t<div class="whisker">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="end-line">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="filler">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1" style="width: 25px; position: relative;">\n\t\t\t\t\t\t\t<div class="alignment-line align-box"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows.length > 1">\n\t\t\t\t\t\t\t<div class="circle"></div>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\'qv-tp-item\'>\n\t\t\t\t\t\t\t<span qva-direction x-dir-text="{{item.rows[0].label}}" class="qv-tp-rowPart" ng-class="{\'single\' : (content.length + item.rows.length) <= 3}">{{item.rows[0].label}}</span>\n\t\t\t\t\t\t\t<span>:&nbsp;</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="!item.rows[0].template" class=\'qv-tp-value\'>\n\t\t\t\t\t\t\t<div class="qv-tp-rowPart" dir="ltr">{{item.rows[0].value}}</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="item.rows[0].template" class=\'qv-tp-template qv-tp-value\' ng-bind-html="item.rows[0].template">\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="qv-chart-tooltip-excess" ng-if="numberInExcess > 0" q-translation="Object.ChartTooltip.NMore,{{numberInExcess}}">More</div>\n</div>'},2107:function(t,e,r){"use strict";var o,n;!(o=[r(48)],n=function(t){t.directive("qvSetInitHeight",function(){return{link:function t(e,r){var o=r.find("td.qv-tp-item");var n=e.$watch(function(){return o.height()},function(t){if(!t)return;var e=r.find("td:eq(0)");e.height(t);n()})}}})}.apply(e,o),void 0!==n&&(t.exports=n))}}]);