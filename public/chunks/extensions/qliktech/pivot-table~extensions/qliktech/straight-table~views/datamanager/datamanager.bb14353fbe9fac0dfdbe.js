/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[15],{1003:function(e,t,n){"use strict";var r,l;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(r=[n(48),n(91),n(109),n(208),n(160),n(1264),n(110)],l=function(e,t,n,r,l,a,i){var u=new n(255,255,255,1);function s(e,t,n,r){if(!Array.isArray(e))return false;if(!r)return true;return e.length===t.length+n.length}function d(e){var t=a.getColumnOrder(e),n=e.qDimensionInfo||[],r=e.qMeasureInfo||[];if(s(t,n,r,false))return t;return f(n,r)}function f(e,t){var n,r=[],l=e.length,o=t.length;for(n=0;n<l;++n)r.push(n);for(n=0;n<o;++n)r.push(l+n);return r}function c(e){var t=e.qDimensionInfo,n=e.qMeasureInfo,r=t.concat(n),l=d(e),o=[],a,i;for(a=0;a<l.length;++a){i=l[a];re(r[i])||o.push(i)}return o}function h(e,t){var n=[],r,l,o,a;l=e.rows.length;for(r=0;r<l;++r){a=e.rows[r];o=a.cells.length;t<o&&t>=0&&n.push(a.cells[t])}return n}function p(e,t,n,r){var l=m(e,t,n),o=l.length,a,i=[],u;for(u=0;u<o;++u){a=l[u];a.dataValue===r&&i.push(a)}return i}function m(e,t,n){var r,l,o,a=e.getRowsByCellType(t),i=a.length,u=null,s=[],d;for(r=0;r<i;++r){o=a[r];d=o.cells.length;for(l=0;l<d;++l){u=o.cells[l];u.type===t&&u.dataColIx===n&&s.push(u)}}return s}function g(e,t,n){var r,l,o,a,i=e.getRowsByCellType(t),u=i.length,s,d=[];for(r=0;r<u;++r){o=i[r];s=o.cells.length;for(l=0;l<s;++l){a=o.cells[l];a.type===t&&a.dataRowIx===n&&d.push(a)}}return d}function q(e,t,n,r){var l,o,a,i=e.getRowsByCellType(t),u=i.length,s=null,d;for(l=0;l<u;++l){a=i[l];d=a.cells.length;for(o=0;o<d;++o){s=a.cells[o];if(s.dataColIx===n&&s.dataRowIx===r)return s}}return null}function C(e,t,n){var r=n.isIndentMode?1:e.leftTreeDepth;return e.getHeaderCell(e.topTreeDepth,t+r)}function x(e,t){if(t.type===e.CELL_TYPE_LEFT||t.type===e.CELL_TYPE_DATA)return m(e,t.type,t.dataColIx);return g(e,t.type,t.dataRowIx)}function y(e,t,n){var r=x(e,t),l=r.length,o=[],a,i;for(i=0;i<l;++i){a=r[i];a.dataValue===n&&o.push(a)}return o}function v(e,t){var n=c(t),r=n[e]||0,l=t.qDimensionInfo.concat(t.qMeasureInfo),o=l[r],a=l.filter(le);return{colInfo:o,dataColIx:r,effectiveDataColIx:a.indexOf(o)}}function b(e){return e.qDimensionInfo.filter(le).length}function E(e,t){var n=t.qGrandTotalRow[e-b(t)];n&&n.qText||(n={qText:""});return n}function I(e){if(!e)return;return"qDimensionType"in e}function T(e){return void 0===e.textAlign||e.textAlign.auto}function D(e){return e.textAlign&&e.textAlign.align}function w(e){var t=e&&e.representation;if(!t)return{};if("object"!==o(t))return{type:t};return t}function N(e){return[{qText:e.qFallbackTitle,qSubNodes:[],qType:"P",qUp:0,qDown:0,qElemNo:0,qValue:"NaN"}]}function L(e,t,n,r,l,o,a,i,u){var s,d,f,c,h,p,m,g,q;for(s=0;s<o.length;++s){d=o[s];q=R(d)||!!u;g=i.getDimInfo(i.leftDimCnt,r);f=l.getHeaderRow(e);c=f.getNextCell();c.type=l.CELL_TYPE_TOP;c.locked=!F(d)&&g.qLocked;c.isDimensionValue=!F(d)&&!M(d)&&!q&&!S(d);h=d.qText;if(M(d)){p=i.leftCellCnt+t;p>=i.pseudoDimIndex&&p--;h=i.layout.qHyperCube.qDimensionInfo[p].othersLabel}c.setTopHeader(h,d.qElemNo,1,1,t,a+n,A(d),q);if(q||d.qCanCollapse||d.qCanExpand){c.addClass("bold");c.setCollapseExpandClass(d);f.addClass("bold")}if(d.qSubNodes.length){m=L(e+1,t+1,n,r+1,l,d.qSubNodes,a,i,q);c.colspan=m-n;n=m}else n++}return n}function O(e,t,n,r){if(r.dataColumnsInfo.cnt<=0)return;L(1,0,0,0,e,t,n,r);var l=e.topTreeDepth+1;if(!r.isIndentMode&&0===e.topTreeDepth){l=2;e.headerRows[0].addClass("last-top-row")}e.setNextHeaderIx(l);e.headerRows[l-1].addClass("last-top-row")}function M(e){return-3===e.qElemNo}function A(e){return-2===e.qElemNo}function R(e){return-1===e.qElemNo}function S(e){return-4===e.qElemNo}function H(e){return R(e)||S(e)}function F(e){return"P"===e.qType}function P(e){return e.qCanCollapse||e.qCanExpand||e.qSubNodes.length&&!F(e.qSubNodes[0])}function k(e,t){return 0===e&&(R(t)||F(t))||!H(t)&&!F(t)}function V(e,t,n,r,l,o,a,i){var u,s=0,d=l.getRow(e),f=a.getDimInfo(n),c=!F(r)&&!M(r)&&!R(r)&&!A(r),h=!!f&&f.qLocked,p=R(r);if(n>0){u=d.addEmptyHeaderCell(o+e,t,1,n,"left",A(r));u.type=l.CELL_TYPE_LEFT;u.isDimensionValue=c;u.locked=h;u.dataValue=r.qElemNo}if(r.qCanCollapse||r.qCanExpand){u=d.addLeftCollapseExpandCell(o+e,t,r,A(r),p);u.type=l.CELL_TYPE_LEFT;u.isDimensionValue=c;u.locked=h;u.dataValue=r.qElemNo;s=-1}u=d.getNextCell();u.type=l.CELL_TYPE_LEFT;u.isDimensionValue=c;u.locked=h;i=i||r.qText;M(r)&&(i=f.othersLabel);u.setLeftHeader(i,r.qElemNo,1,a.leftCellCnt-n+s,o+e,t,A(r),p);if(p||P(r)){u.addClass("bold");d.addClass("bold")}return u}function _(e,t,n,r,l,o,a,i,u,s,d){var f,c,h,p;for(f=0;f<l.length;++f){c=l[f];if(k(t,c)){o=c;a=t;i=n}t>0&&F(c)&&(u=c);if(c.qSubNodes.length){p=n+(t>0&&F(c)?0:1);e=_(e,t+1,p,r,c.qSubNodes,o,a,i,u,s,d)}else{h=o.qText;if(u){h+=A(o)?" ":" - "+u.qText;u=null}V(e,a,i,o,r,s,d,h);++e}}return e}function W(e,t,n,r,l,o,a){var i,u,s,d,f,c,h,p=0,m,g,q,C;for(i=0;i<r.length;++i){u=r[i];C=R(u)||!!a;m=o.getDimInfo(t);g=!F(u)&&!M(u)&&!C;q=!!m&&m.qLocked;s=n.getRow(e);if(S(u)){d=s.getNextCell();d.type=n.CELL_TYPE_LEFT;d.dataValue=u.qElemNo;d.isDimensionValue=g;d.locked=q;d.setLeftHeader("",-4,1,2)}else{d=s.getNextCell();d.type=n.CELL_TYPE_LEFT;d.isDimensionValue=g;d.locked=q;if(u.qCanCollapse||u.qCanExpand){f=d;f.setLeftHeader("",u.qElemNo,1,1,l+e,t,A(u),C);f.setCollapseExpandClass(u);d=s.getNextCell();d.type=n.CELL_TYPE_LEFT;d.isDimensionValue=g;d.locked=q;p=1}h=u.qText;M(u)&&(h=m.othersLabel);d.setLeftHeader(h,u.qElemNo,1,2-p,l+e,t,A(u),C);if(C){d.addClass("bold");s.addClass("bold")}}if(u.qSubNodes.length){c=W(e,t+1,n,u.qSubNodes,l,o,C);d.rowspan=c-e;f&&(f.rowspan=d.rowspan);e=c}else{var x=o.leftCellCnt-2*(t+1);if(x>0){d=s.getNextCell();d.type=n.CELL_TYPE_LEFT;d.dataValue=u.qElemNo;d.isDimensionValue=g;d.locked=q;d.setLeftHeader("",-4,1,x)}++e}}return e}function B(e,t,n,r){r.isIndentMode?_(0,0,0,e,t,null,-1,-1,null,n,r):W(0,0,e,t,n,r)}function z(e,t){var r,l;e.style.backgroundColor="";e.color.bgByExpression=false;e.color.bgIsDark=false;if("U"!==t.qType&&t.qAttrExps&&t.qAttrExps.qValues&&t.qAttrExps.qValues.length){e.color.bgByExpression=true;l="NaN"!==t.qAttrExps.qValues[0].qNum?t.qAttrExps.qValues[0].qNum:t.qAttrExps.qValues[0].qText;r=new n(l,"argb");if(!r.isInvalid()){1!==r.getAlpha()&&(r=n.getBlend(u,new n(r._r,r._g,r._b,1),r.getAlpha()));e.style.backgroundColor=r.toHex();e.color.bgIsDark=r.isDark()&&r.getAlpha()>.5;e.addClass(e.color.bgIsDark?"color-light":"color-dark")}}e.style.color="";if(t.qAttrExps&&t.qAttrExps.qValues&&t.qAttrExps.qValues.length>1){l="NaN"!==t.qAttrExps.qValues[1].qNum?t.qAttrExps.qValues[1].qNum:t.qAttrExps.qValues[1].qText;r=new n(l,"argb");r.isInvalid()||(e.style.color=r.toRGBA())}}function Y(e,t,n,r,l){var o,a,i,u,s,d,f;for(o=0,i=t.length;o<i;++o){d=e.getNextRow();0===e.leftTreeDepth&&d.addEmptyHeaderCell(n+o,r,1,1);u=Math.min(l.dataColumnsInfo.cnt,t[o].length);0===u&&0===o&&d.cells[0].addClass("first-data-cell");for(a=0;a<u;++a){f=d.getNextCell();f.type=e.CELL_TYPE_DATA;s=t[o][a];f.setData(s.qText,1,1,n+o,r+a);f.addClass("data");0===o&&0===a&&f.addClass("first-data-cell");"U"===s.qType&&f.setNullClass(true);Number.isNaN(+s.qNum)||f.addClass("numeric");(d.hasClass("bold")||C(e,a,l).isTotal)&&f.addClass("bold");z(f,s)}}}function G(e,t,n,r,l,o,a,i){var u,s,d,f,c,h;for(u=0;u<a;++u){d=t.getRow(n+u);c=o&&o[u]?o[u].length:1;for(s=0;s<c;++s){f=d.getCell(r+s);f.rowspan=1;f.colspan=1;f.style.backgroundColor="";f.style.color="";f.color.bgByExpression=false;f.color.bgIsDark=false;f.isFillColumn=false;h=o&&o[u]&&o[u][s];if(h)J(t,f,h,e,l,u,s,i);else{f.setDefaults();f.isFillColumn=true}}d.setNextCellIx(r+s)}t.setNextRowIx(n+u)}function U(e,t,r,o){var a=l.getIndexById(t.qAttrExprInfo,r);if(-1!==a){var i="NaN"!==e.qAttrExps.qValues[a].qNum?e.qAttrExps.qValues[a].qNum:e.qAttrExps.qValues[a].qText,s=new n(i,"argb");if(o&&1!==s.getAlpha())return n.getBlend(u,new n(s._r,s._g,s._b,1),s.getAlpha());return s}return false}function j(e){return e&&e.length>2048?e.substring(0,2048)+"â€¦":e}function J(e,t,n,o,a,i,u,s){u=a?a.qLeft+u:null;var d=v(u,o.qHyperCube),f=d.colInfo,c=d.dataColIx,h=d.effectiveDataColIx,p,m,g,q=w(f);t.colspan=I(f)?2:1;t.type=e.CELL_TYPE_DATA;t.isOtherCell=n.qIsOtherCell;t.isTotalCell=n.qIsTotalCell;t.representation=t.REPRESENTATION_TEXT;t.isNumeric=!Number.isNaN(+n.qNum);if("url"===q.type){var C=l.getIndexById(f.qAttrExprInfo,l.IDMAP.CELL_URL_LABEL),x;if(C>-1&&n.qAttrExps.qValues){x=n.qAttrExps.qValues;g="NaN"!==x[C].qNum||x[C].qText?x[C].qText||x[C].qNum:" "}else g=""===q.urlLabel?n.qText:q.urlLabel;if(n.qText&&!n.qIsNull)try{t.url=r.encodeForHref(n.qText);t.representation=t.REPRESENTATION_URL}catch(e){t.url=""}}else g=n.qText;var y=j(g);t.setText(y);t.setTextAlign(T(f),D(f));if(t.isOtherCell){t.setText(f.othersLabel);t.setTextAlign(T(f),D(f))}t.locked=f.qLocked;t.dataValue=n.qElemNumber;t.dataColIx=c;t.effectiveDataColIx=h;t.dataRowIx=s?a.qTop+a.qHeight-i-1:a.qTop+i;t.isNumeric=!Number.isNaN(+n.qNum);t.isNullValue=t.isDimensionValue?-2===t.dataValue:n.qIsNull;t.isDimensionValue=!t.isNullValue&&I(f);t.selected=false;t.selectedHighlighted=false;if(!t.isNullValue){p=U(n,f,l.IDMAP.CELL_BACKGROUND_COLOR,true);if(p&&!p.isInvalid()){t.color.bgByExpression=true;t.style.backgroundColor=p.toHex();t.color.bgIsDark=p.isDark()&&p.getAlpha()>.5;if(1===e.headerRows.length){m=e.getHeaderRow(0).cells.filter(function(e){return e.dataColIx===t.dataColIx})[0];m.color.bgIsDark=p.isDark()}}}p=U(n,f,l.IDMAP.CELL_FOREGROUND_COLOR);p&&!p.isInvalid()&&(t.style.color=p.toRGBA())}function K(e,t){var n,r,l,o;n=e.getHeaderRow(0);r=e.getHeaderRow(e.topTreeDepth);var a=0===e.topTreeDepth&&!t.isIndentMode;a&&(r=e.getHeaderRow(1));if(t.dataColumnsInfo.cnt>0&&t.leftCellCnt>0){l=n.addEmptyMetaCell(e.topTreeDepth,t.leftCellCnt,"left-meta");l.templateSrc="pt-meta-left.ng.html";l.addClass("meta");n===r&&l.addClass("bottom-meta")}if(t.dataColumnsInfo.cnt>0){var i=a?2:1;o=n.addEmptyMetaCell(i,t.dataColumnsInfo.cnt);o.addClass("top-meta").addClass("meta");o.templateSrc="pt-meta-top.ng.html"}if(r!==n)for(var u=0;u<t.leftColumns.length;u++){l=r.addEmptyMetaCell(1,t.leftColumns[u].length,"left-meta");l.addClass("bottom-meta");l.text="Â "}}function X(e,t){return t.length?X(e+1,t[0].qSubNodes):e}function Q(e,n){var r,l,o,a,i,u,s=e.headerRows[0].getCellSize();function d(){return n.qHyperCube.qMeasureInfo.length>0&&n.qHyperCube.qGrandTotalRow.length>0}function f(){return 0===n.qHyperCube.qDimensionInfo.length}function c(){return n.totals&&true===n.totals.show}function h(){if(c()&&f())return false;return d()&&n.totals&&(n.totals.show||"noTotals"!==n.totals.position)}function p(){return!(h()&&n.totals&&!n.totals.show&&"bottom"===n.totals.position)}if(h()&&p())l=e.getNextHeaderRow();else{if(!h())return;l=e.getNextFooterRow()}for(r=0;r<s;++r){i=e.getHeaderCell(0,r);if(i.isSearchIcon)continue;a=l.getNextCell();a.type=e.CELL_TYPE_TOP;a.tid=i.isSearchIcon?"st.total.search":"st.total";a.style={};a.colspan=i.isDimension?2:1;a.isDimension=!p()&&i.isDimension;a.isMeasure=i.isMeasure;a.isFillColumn=i.isFillColumn;a.dataColIx=i.dataColIx;if(i.isMeasure){o=E(i.effectiveDataColIx,n.qHyperCube);u=o.qText;a.isNumeric=true}else{u=0===r?void 0!==n.totals.label?n.totals.label:t.get("Object.Table.Totals"):"Â ";a.isNumeric=false}a.setText(u);i.info&&a.setTextAlign(T(i.info),D(i.info));a.isTotal=true}}function Z(e,t){var n,r=t.length,l,o;l=e.getNextHeaderRow();for(n=0;n<r;++n){o=l.getNextCell();o.type=e.CELL_TYPE_TOP;o.setFromMetaHeader(t[n])}}function $(e,t,n){e.tid="st.header";e.qvaOutsideIgnoreFor="";e.isSearchIcon=false;e.open=false;e.canCollapse=false;e.canExpand=false;e.rowspan=1;e.colspan=1;e.color={};if(t){e.isFillColumn=true;e.text="";e.sortable=false;e.isDimension=false;e.isSorted=false;e.reversed=false;e.style={width:"auto"}}else{e.isNumeric="N"===e.info.qDimensionType||void 0===e.info.qDimensionType;e.locked=e.info.qLocked;e.text=e.info.qFallbackTitle;e.sortable=true;e.isDimension=!!e.info.qDimensionType;e.fieldName=e.isDimension?e.info.qGroupFieldDefs[e.info.qGroupPos]:"";e.isMeasure=!e.isDimension;e.isSorted=e.dataColIx===n[0];e.reversed=!!e.info.qReverseSort;e.sortIndicator=e.info.qSortIndicator;e.autoAlignText=T(e.info);e.explicitTextAlign=D(e.info);e.color={}}}function ee(){var e={glyphCntRange:{min:0,ok:0,max:1e5}};$(e,true,[]);return e}function te(e,t,n,r,l){var o=l.column.glyphWidth,a=Math.ceil(l.column.minColWidth/o),i=Math.ceil(l.column.maxColWidth/o),u=n.info,s=[],d=[],f=[],c,h,p,m=Math.ceil(l.column.paddingWidth/o),g=Math.floor(e/o),q=5,C=t>0?Math.round(t/o*10)/10:NaN,x=3,y=Math.max(x,u.qApprMaxGlyphCount),v=Math.max(x,u.qFallbackTitle.length),b=0;s.push(x);if(n.isMeasure){var E=n.grandTotal;d.push(E.qText.length)}else{var I=w(u);"url"===I.type&&I.urlLabel&&(y=I.urlLabel.length);d.push(y);b=Math.ceil(l.column.minSearchWidth/o)}s.push(i);s.push(g-m-b);d.push(v+b);f.push(v+b);c=Math.min.apply(null,s);d.push(c);h=Math.max.apply(null,d);f.push(h);p=Math.max.apply(null,f);return{min:Math.max(a+b,c)+m,ok:Math.min(i,h)+m,optimal:p+m+q,explicit:C,search:b}}function ne(e,t,n,r,l){var o=l.column.glyphWidth,a=Math.floor(e/o),i=4,u=n.info,s=Math.max(i,Math.ceil(l.column.minColWidth/o)),d=Math.min(Math.ceil(l.column.maxColWidth/o),.8*a),f=Math.ceil(l.column.paddingWidth/o),c=5,h=t>0?Math.min(Math.round(t/o*10)/10,.8*a):NaN,p=Math.max(i,u.qApprMaxGlyphCount),m=Math.max(i,u.qFallbackTitle.length),g=Math.ceil(l.column.minSearchWidth/o);var q=s;var C=s;var x=s;if(n.isMeasure){var y=n.grandTotal;x=Math.min(d,Math.max(x,y.qText.length))}else{var v=w(u);"url"===v.type&&v.urlLabel&&(p=v.urlLabel.length);x=Math.min(d,Math.max(x,p));q+=g;m+=g}var b=.4+.6/(1+Math.exp((x-48)/12));return{min:Math.max(q,C,x*b)+f,ok:Math.min(d,Math.max(m,x))+f,optimal:Math.min(d,Math.max(m,x))+f+c,explicit:h,search:n.isMeasure?0:g}}function re(e){return!e||e.qError&&e.qError.qErrorCode===i.NxLocalizedErrorCode.LOCERR_CALC_EVAL_CONDITION_FAILED}function le(e){return!re(e)}function oe(e,t,n,r,l,o){var a,i=e.qDimensionInfo,u=e.qMeasureInfo,s=i.concat(u),d=c(e),f=Math.floor(r/l.column.glyphWidth),h,p;o||(o=[]);o=n.map(function(e){var t,n;for(t=0;t<o.length;++t)if(o[t].dataColIx===e){n=o[t];break}return n||{style:{}}});for(h=0;h<n.length;++h){p=n[h];a=o[h];if(re(s[p])){a.isHidden=true;continue}var m=v(d.indexOf(p),e);a.info=m.colInfo;a.isDimension=p<i.length;a.isMeasure=p>=i.length;a.grandTotal=E(m.effectiveDataColIx,e);a.dataColIx=p;a.effectiveDataColIx=m.effectiveDataColIx;a.qLeft=p;$(a,false,e.qEffectiveInterColumnSortOrder);if(l.horizontalScroll.enabled)a.glyphCntRange=ne(r,t[p],a,e,l);else{a.glyphCntRange=te(r,t[p],a,e,l);f-=a.glyphCntRange.explicit||a.glyphCntRange.min;if(f<0){o.splice(Math.max(1,h));break}}}o=o.filter(function(e){return!e.isHidden});return o}function ae(e,t){var n,r;e=e.slice();for(n=e.length-1;~n;--n){r=e[n];r.isDimension||r.isMeasure||e.splice(n,1)}while(e.length>t)e.pop();return e}function ie(e,t,n,r,l,o){var a=n.horizontalScroll.enabled?n.width:n.width-n.columnPicker.width,i=d(e.qHyperCube),u=c(e.qHyperCube),s=n.column.glyphWidth,f,h,p=s/a,m,g=1,q;l&&(l=ae(l,i.length));n.columnPicker.show=false;l=oe(e.qHyperCube,t,i,a,n,l);n.columnCount=l.length;n.columnPicker.show=!n.horizontalScroll.enabled&&l.length<u.length;h=l.length;for(f=0;f<h;f++){m=l[f];m.widthFactor=m.glyphCntRange.min*s/a;g-=m.widthFactor}if(g>0){var C;q=g;if(n.useAllSpace){var x=(q-.015)/h;l.forEach(function(e){e.widthFactor+=x;g=0})}else{C=l.reduce(function(e,t){return e+Math.max(0,t.glyphCntRange.ok-t.glyphCntRange.min)},0);l.forEach(function(e){var t=Math.max(0,e.glyphCntRange.ok-e.glyphCntRange.min),n=t/C,r=Math.min(t*s/a,n*q);if(t>0)if(r>g){e.widthFactor+=g;g=0}else{e.widthFactor+=r;g-=r}})}}if(g>0){var y;y=l.concat().sort(function(e,t){return e.glyphCntRange.optimal-e.glyphCntRange.ok-(t.glyphCntRange.optimal-t.glyphCntRange.ok)});y.forEach(function(e){var t=e.glyphCntRange.optimal-e.glyphCntRange.ok,n=Math.min(g,t*p);if(t>0)if(n>g){e.widthFactor+=g;g=0}else{e.widthFactor+=n;g-=n}})}g=ce(l,n);se(l,a,n.column.minSearchWidth/a,r);ue(l,a,o,n);return l}function ue(e,t,n,r){var l,o,a,i;var u=de(e,t,r);for(o=0;o<e.length;++o){l=e[o];if(l.isFillColumn)continue;a=r.horizontalScroll.enabled&&r.horizontalScroll.keepFirstColumnInView&&0===o;i=Math.round(t*l.widthFactor);l.isDimension&&!a?i=Math.min(i,u-r.column.minSearchWidth):l.isMeasure&&!a&&(i=Math.min(i,u));l.calculatedWidth=i;r.horizontalScroll.enabled&&l.calculatedWidth<r.column.minColWidth&&(l.calculatedWidth=r.column.minColWidth);n&&l.isSearchIcon&&(l.calculatedWidth=1);l.style.width=l.calculatedWidth+"px"}}function se(e,t,n,r){var l,o,a=0,i,u=Math.round(t*n);for(l=0,o=e.length;l<a+o;++l){i=e[l];if(i.isDimension){e.splice(l+1,0,fe(i,u,n,r));i.widthFactor=Math.max(0,i.widthFactor-n);++a}}}function de(e,t,n){var r=t;if(n.horizontalScroll.enabled&&n.horizontalScroll.keepFirstColumnInView){var l=e[0];var o=0;if(l){o=l.widthFactor*t;o+=l.isDimension?n.column.minSearchWidth:0}r=Math.floor(t-o)}return r}function fe(e,t,n,r){return{isSearchIcon:true,qvaOutsideIgnoreFor:"qv-st-header-cell-search-"+r,tid:"st.header.search",widthFactor:e.shouldBeRemoved?0:n,calculatedWidth:e.shouldBeRemoved?0:t,style:{width:t+"px"},fieldName:e.fieldName,dataColIx:e.dataColIx,colspan:1}}function ce(e,t){var n=1,r,l,o=t.width,a=t.column.glyphWidth,i=t.column.minSearchWidth/o,u=.01,s=false;e.forEach(function(e){e.shouldBeRemoved=false;if(s){e.widthFactor=0;e.shouldBeRemoved=true;return}if(e.glyphCntRange.explicit){r=e.glyphCntRange.explicit*a/o;e.isDimension&&(r+=i);if(n-r>=0||t.horizontalScroll.enabled){e.widthFactor=r;n-=e.widthFactor}else{l=e.glyphCntRange.min*a/o;if(n-l>-u){e.widthFactor=n;n-=e.widthFactor}else{e.widthFactor=n;e.shouldBeRemoved=true;s=true}}}else{l=e.glyphCntRange.min*a/o;if(n>=e.widthFactor||t.horizontalScroll.enabled)n-=e.widthFactor;else if(n-l>-u){e.widthFactor=n;n-=e.widthFactor}else{e.widthFactor=n;e.shouldBeRemoved=true;s=true}}});var d=t.columnCount;e.forEach(function(t,n){if(t.shouldBeRemoved){d--;n>0&&(e[n-1].widthFactor+=t.widthFactor);t.widthFactor=0}});t.horizontalScroll.enabled||t.columnPicker.show||d===t.columnCount||(t.columnPicker.show=true);if(!t.horizontalScroll.enabled&&!t.columnPicker.show){var f=e.reduceRight(function(e,t){return e||t.widthFactor>0&&!t.glyphCntRange.explicit&&t},false);f&&(f.widthFactor+=t.columnPicker.width/o)}t.columnCount=d;e.push(ee());return n}e.service("qvGridObjectDataService",function(){return{getTopTreeDepth:function e(t){return X(0,t.qTop)},getLeftTreeDepth:function e(t){var n=t?t.qLeft:[];return X(0,n)},updatePivotItems:function e(t,n,r,l){var o=t.layout,a=t.grid,i=n[0].qTop,u=n[0].qLeft,s=n[0].qData,d=X(0,i),f=X(0,u),c=r[0],h=t.metaGhostHeaders,p=o.qHyperCube.qIndentMode,m=this.getPseudoDimIndex(o);if(0===i.length){var g=o.qHyperCube.qMeasureInfo.filter(le);if(1===g.length){i=N(g[0]);d=X(0,i)}}a.reset(false,l,m,p);a.setTopTreeDepth(d);a.setLeftTreeDepth(f);K(a,h);O(a,i,c.qLeft,h);B(a,u,c.qTop,h);Y(a,s,c.qTop,c.qLeft,h);a.removeUnused()},updateStraightItems:function e(t,n,r,l,o,a){var i=t.layout,u=t.grid,s,d,f=n.length+1,c,h,p;l||u.reset(a);if(!a){Z(u,r);Q(u,i)}s=u.getNextRowIx();for(p=0;p<f;++p){if(n[p]){c=n[p].qMatrix;h=n[p].qArea;d=c.length}else{c=null;h=null}G(i,u,s,p,h,c,d,o)}l&&u.setNextRowIx(u.rows.length);u.removeUnused()},getPseudoDimIndex:function e(t){var n=t.qHyperCube.qEffectiveInterColumnSortOrder.indexOf(-1);return~n?n:t.qHyperCube.qEffectiveInterColumnSortOrder.length},getColumnInfo:v,getColumnCells:h,getCellsInColumnWithValue:p,getCellsInColumn:m,getCellsInRow:g,getSiblingCells:x,getSiblingCellsWithValue:y,getCellInColumnWithRowIndex:q,columnOrder:{get:d,create:f,isValid:s,getVisible:c},getStraightMetaHeaders:ie}})}.apply(t,r),void 0!==l&&(e.exports=l))},1264:function(e,t,n){"use strict";var r,l;!(r=[n(982),n(94)],l=function(e,t){return{migrateProperties:i,migrateSnapshot:u,getColumnOrder:s,getColumnDataIndex:d,getLeftOfDataArea:f,useNewColumnOrderIdx:c,updatePropertiesOnRefresh:h,findLeftForSnapshots:m};function n(e,t){if(void 0===t&&0===e.length)return false;var n=e.every(function(e,n){return e===t[n]});return n&&e.length===t.length}function r(n,r){return e.canModifyHardProperties(t,n,r)}function l(e,t){return e&&e.length>0&&t&&0===t.length}function o(e,t){return t&&t.length>0&&e&&0===e.length||!n(t,e)}function a(e){return e&&e.qHyperCube&&e.qHyperCube.qColumnOrder&&e.qHyperCube.qColumnOrder.length>0}function i(e){var t=e&&e.qHyperCubeDef;t&&l(t.columnOrder,t.qColumnOrder)?t.qColumnOrder=t.columnOrder.slice():t&&o(t.columnOrder,t.qColumnOrder)&&(t.columnOrder=t.qColumnOrder.slice());return e}function u(e){var t=e.qHyperCube;if(t.columnOrder&&!t.qColumnOrder||0===t.qColumnOrder.length){var n=e.snapshotData.object.origDataPages||t.qDataPages;t.qColumnOrder=n.filter(function(e){return e&&e.qArea}).map(function(e){return e.qArea.qLeft});n.forEach(function(e){e&&e.qArea&&(e.qArea.qLeft=t.qColumnOrder.indexOf(e.qArea.qLeft))});n=n.filter(function(e){return e&&e.qArea&&-1!==t.columnOrder.indexOf(t.qColumnOrder[e.qArea.qLeft])});t.columnOrder=t.qColumnOrder.slice();t.qDataPages=n;e.snapshotData.object.origDataPages=n}else if(t.columnOrder&&t.columnOrder.length!==t.qColumnOrder.length){t.qDataPages=t.qDataPages.filter(function(e){return e&&e.qArea&&-1!==t.qColumnOrder.indexOf(t.columnOrder[e.qArea.qLeft])});t.qColumnOrder=t.columnOrder.slice();e.snapshotData.object.origDataPages=t.qDataPages}else{t.columnOrder=new Array(t.qColumnOrder.length);for(var r=0;r<t.columnOrder.length;r++)t.columnOrder[r]=t.qColumnOrder[r]}return e}function s(e){var t=Array.isArray(e.qColumnOrder)?e.qColumnOrder.slice():e.qColumnOrder;var n=Array.isArray(e.columnOrder)?e.columnOrder.slice():e.columnOrder;return t&&t.length>0?t:n}function d(e,t){var n=e.qHyperCube.columnOrder;var r=e.qHyperCube.qColumnOrder;if(!r||n&&n.length>r.length)return n[t];return r&&r.length>0?r[t]:t}function f(e,t,n,r){var l=m(n,t);return l>=0?l:c(n.qHyperCube,r)?t:e&&e.qLeft}function c(e,t){return p(e)||a(t)}function h(e,t){l(t.columnOrder,t.qColumnOrder)&&e&&e.model&&e.model.getEffectiveProperties&&e.model.getEffectiveProperties().then(function(t){if(r(e.model,t)){t.qHyperCubeDef.qColumnOrder=t.qHyperCubeDef.columnOrder.slice();e.model.setProperties(t);e.model.app.clearUndoBuffer()}else{var n=[{qPath:"/qHyperCubeDef/qColumnOrder",qOp:"add",qValue:JSON.stringify(t.qHyperCubeDef.columnOrder)}];e.applyPatches(n,true)}})}function p(e){return e&&e.qColumnOrder&&e.qColumnOrder.length>0}function m(e,t){var n=e&&e.qHyperCube,r=n&&n.qDataPages,l=s(e.qHyperCube),o;r&&(r=r.filter(function(e){return e}));r&&r.length&&r.forEach(function(n){n&&n.qArea&&n.qArea.qLeft===t&&(o=l.indexOf(e.qHyperCube.qColumnOrder[t]))});r&&r.length&&r.length===l.length&&void 0===o&&(o=r[t].qArea.qLeft);return o}}.apply(t,r),void 0!==l&&(e.exports=l))},982:function(e,t,n){"use strict";var r,l;!(r=[],l=function(){return{canModifyHardProperties:e};function e(e,t,n){var r=e.Views&&e.Views.sheet;if(n.qHasSoftPatches||n.qExtendsId)return false;if(n.qInfo&&"masterobject"===n.qInfo.qType&&n.permissions)return n.permissions.update;if(e.view===r)return e.model&&e.model.layout.permissions.update;return t.app&&t.app.layout.permissions.update}}.apply(t,r),void 0!==l&&(e.exports=l))}}]);