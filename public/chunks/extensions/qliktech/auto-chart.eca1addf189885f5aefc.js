/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[38],{1045:function(e,t,n){"use strict";var r,i;!(r=[n(90),n(94),n(89),n(1121),n(1122),n(1046),n(1123)],i=function(e,t,n,r,i,a,o){function s(){this._generationInProgress=false}s.prototype.isDerivedUpToDate=u;s.prototype.updateDerivedProperties=p;s.prototype.addDefaultHyperCubeHash=c;return s;function u(e){o.validate(e);var t=e.properties,n=r.generateHash(e.hashData);if(!t.qUndoExclude||t.qUndoExclude.hashCode!==n)return false;return true}function p(i){o.validate(i);if(this._generationInProgress)return n.resolve(true);if(u(i)){var s=i.layout.qUndoExclude&&i.layout.qUndoExclude.hashCode===i.properties.qUndoExclude.hashCode;return n.resolve(!s)}var p=this,c=i.model,l=i.layout,d=i.properties,f=e.extend(true,{},d);this._generationInProgress=true;r.updateHash(d,i.hashData);return i.generateDerivedProperties(l,d).then(function(){return a.saveDerivedProperties(c,l,d,f,t).then(function(){p._generationInProgress=false;return n.resolve(true)})})}function c(t,n,r,a){return i.getDefaultHashDataForHyperCube(t,n,r).then(function(t){return e.extend(true,a,t)})}}.apply(t,r),void 0!==i&&(e.exports=i))},1046:function(e,t,n){"use strict";var r,i;!(r=[n(376),n(982)],i=function(e,t){return{saveDerivedProperties:n};function n(n,r,i,a,o){if(t.canModifyHardProperties(o,n,r))return n.setProperties(i);var s=new e(n);return s.saveSoftProperties(a,i)}}.apply(t,r),void 0!==i&&(e.exports=i))},105:function(e,t,n){"use strict";var r,i;!(r=[],i=function(){var e={Precedents:{PrecedentTypes:{Like:"like",Dislike:"dislike"}},Visualization:{ChartTypes:{Custom:"custom",Kpi:"kpi",Gauge:"gauge",BarChart:"barchart",ValueRange:"ValueRange",Table:"table",Mapping:"Mapping"},CustomVisualizations:{CountFact:"countFact",Ordinal:"Ordinal",NullFacts:"nullFacts",RangeFacts:"rangeFacts",UniValueFrequency:"uniValueFrequency",DTypeFacts:"dTypeFacts",ValueFrequency:"valueFrequency",TemporalFacts:"temporalFacts",MixedTypeValues:"mixedTypeValues"},Actions:{Bucketing:"bucket",Ordinal:"ordinal",SplitValuesDef:"splitValuesDef",SplitValues:"splitValues",SplitEmail:"splitEmail",SplitAddress:"splitAddress",SplitField:"splitField",MapValues:"mapValues",MixedTypeValues:"mixedTypeValues",RenameMapping:"rename",MapNulls:"mapNulls",MappingLimit:99,SplitLimit:9},Size:{Auto:"auto",Small:"small",Medium:"medium",Large:"large"},Layout:{Cellspan:{Small:1,Medium:2,Large:3}},ValueRangeDisplayModes:{Text:"text",RangeLine:"rangeLine"}},Events:{Associations:{ApplyRecommendation:"ApplyRecommendation",ToggleAssociationsRecommendationsPanel:"ToggleAssociationsRecommendationsPanel",UpdateAssociationsRecommendationsToolbarButtonState:"UpdateAssociationsRecommendationsToolbarButtonState"},TablePreview:{UpdateTablePreview:"UpdateTablePreview"},SplitAction:{Reset:"SpitActionReset",Validate:"SpitActionValidate",LoadComplete:"CardLoadComplete"},EditorDetailsPane:{CardsResize:"cardsResize",ResizeChart:"resizeChart",BucketingChange:"bucketingChange",BucketingReset:"bucketingReset",OrderingChange:"orderingChange",FieldCreated:"fieldCreated",MappingCreated:"MappingCreated",MappingReset:"MappingReset",DisableMappingActionButtons:"DisableMappingActionButtons"},PubSub:{ForceReloadComplete:"/datamanager/forcereloadcomplete",StartSpinInvalidation:"/spin/start/invalidation",StopSpinInvalidation:"/spin/stop/invalidation",StartSpin:"/spin/start",StopSpin:"/spin/stop",ConnectionDeleted:"/connection/deleted",ConnectionCreated:"/connection/created",AppDetailsViewChange:"/datamanager/appdetailsviewchange",ExpandSmartSearchSuggestedChart:"expandSmartSearchSuggestedChart",RestoreSearchState:"restoreSearchState"}},KeyCodes:{Enter:13,Esc:27,Up:38,Down:40,Tab:9,SpaceBar:32,Delete:8},AddData:{Folder:"folder",InlineData:"inlinedata"},Tags:{Hidden:"$hidden"},JoinTables:{joinTypes:{join:"Join",innerJoin:"Inner Join",outerJoin:"Outer Join",leftJoin:"Left Join",rightJoin:"Right Join"}},Toolbar:{height:42}};return e}.apply(t,r),void 0!==i&&(e.exports=i))},1121:function(e,t,n){"use strict";var r,i;!(r=[n(90)],i=function(e){var t={generateHash:n,updateHash:r};return t;function n(t){return e.hashFromString(JSON.stringify(t))}function r(e,n){e.qUndoExclude||(e.qUndoExclude={});e.qUndoExclude.hashCode=t.generateHash(n)}}.apply(t,r),void 0!==i&&(e.exports=i))},1122:function(e,t,n){"use strict";var r,i;!(r=[n(90),n(89)],i=function(e,t){var n={getDefaultHashDataForHyperCube:r};return n;function r(e,t,n){return i(e,n).then(function(e){return{drillLevel:s(t),dimensionExpressions:o(t),measureExpressions:e}})}function i(e,n){var r=[];if(!e.qMeasures)return t.resolve(r);e.qMeasures.forEach(function(e){e.qLibraryId?r.push(a(e.qLibraryId,n)):r.push(t.resolve())});return t.all(r)}function a(e,t){return t.getMeasure(e).then(function(e){return e.getProperties().then(function(e){return e.qMeasure.qDef})})}function o(e){return e.qDimensionInfo.map(function(e){return e.qGroupFieldDefs})}function s(e){var t=u(e);return t.map(function(e){return e.qGroupPos})}function u(t){return e.getValue(t,"qDimensionInfo",[])}}.apply(t,r),void 0!==i&&(e.exports=i))},1123:function(e,t,n){"use strict";var r,i;!(r=[],i=function(){return{validate:e};function e(e){if(!e||!e.layout||!e.properties||!e.model||!e.hashData||!e.generateDerivedProperties)throw Error("Derived-properties: Missing input")}}.apply(t,r),void 0!==i&&(e.exports=i))},1163:function(e,t,n){"use strict";var r,i;!(r=[n(2051),n(2052),n(2053),n(2054),n(2055),n(2056),n(186),n(399),n(1734),n(156),n(49)],i=function(e,t,n,r,i,a,o,s,u,p,c){function l(e,t){if(t.qUndoExclude&&t.qUndoExclude.generated){var n=t.qUndoExclude.generated.visualization;return u.getSupportForType(n,e,t.qUndoExclude.generated)}return false}return{type:"auto-chart",template:i,View:e,definition:c.getFlag("CHANGE_CHART_TYPE")?t.createEnhancedPropertiesDef():t.createDefaultPropertiesDef(),data:a,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qSuppressMissing:true},qUndoExclude:{}},support:{cssScaling:function e(t){return l("cssScaling",t)},snapshot:function e(t){return l("snapshot",t)},export:function e(t){return l("export",t)},exportData:function e(t){return l("exportData",t)},sharing:function e(t){return l("sharing",t)},viewData:function e(t){return l("viewData",t)}},getCreatePropertyHandler:function e(t){var n=p.mapProperties(this.mappedDefinition.items.data.items.dimensions);var i=p.mapProperties(this.mappedDefinition.items.data.items.measures);return new r({app:t,dimensionDefinition:this.dimensionDefinition,measureDefinition:this.measureDefinition,dimensionProperties:n,measureProperties:i})},getDropFieldOptions:function e(t,n,r,i,a){var u=t.item;if(u.isDerivedFromDate||u.classifications&&0!==u.classifications.length)if(u.isDerivedFromDate)n.addFieldDimension(u.name,u.displayName).then(function(){r.setProperties(n.properties)});else if(o.isMeasure(u.classifications))s.getAggregationForFieldItem(u).then(function(e){var t=o.getMeasureExpression(u.name,e);n.addExpressionMeasure(t,u.displayName).then(function(){r.setProperties(n.properties)})});else{var p=o.getDimensionExpression(u.name);n.addFieldDimension(p,u.displayName).then(function(){r.setProperties(n.properties)})}else{t.Add(r,n,a);t.ReplaceDimensions(r,n,a);t.AddFieldAsMeasure(r,n,a);t.ReplaceMeasures(r,n,a);i()}},getDropDimensionOptions:function e(t,n,r){n.addLibraryDimension(t.item.id).then(function(){r.setProperties(n.properties)})},getDropMeasureOptions:function e(t,n,r){n.addLibraryMeasure(t.item.id).then(function(){r.setProperties(n.properties)})},importProperties:n.importProperties,exportProperties:n.exportProperties}}.apply(t,r),void 0!==i&&(e.exports=i))},122:function(e,t,n){"use strict";var r,i;!(r=[n(135),n(177),n(90)],i=function(e,t,n){var r={getUrlForHub:function t(){return e.buildHubUrl().replace("/noData/true","")},getUrlForSheet:function r(i,a,o){var s=n.getParameterByName("app");a||(a=t.analysis(s).state);if(o)return e.buildUrl(true,"sense","app",s,"sheet",i,"state",a,"overlay",o);return e.buildUrl(true,"sense","app",s,"sheet",i,"state",a)},getUrlForStory:function r(i,a,o){var s=n.getParameterByName("app");"undefined"===typeof a&&(a=t.story(s).state||"editstory");return o?e.buildUrl(true,"sense","app",s,"story",i,"state",a,"slide",o):e.buildUrl(true,"sense","app",s,"story",i,"state",a)},getUrlForOverview:function t(){var r=n.getParameterByName("app");return e.buildUrl(true,"sense","app",r)},getUrlForDataModelViewer:function t(){var r=n.getParameterByName("app");return e.buildUrl(true,"datamodelviewer","app",r)},getUrlForDataLoadEditor:function t(){var r=n.getParameterByName("app");return e.buildUrl(true,"dataloadeditor","app",r)},getUrlForDataManager:function t(){var r=n.getParameterByName("app");return e.buildUrl(true,"sense","app",r,"datamanager","datamanager")},goToHub:function t(){e.setUrl(r.getUrlForHub(),false,false,true)},goToOverview:function t(){e.setUrl(r.getUrlForOverview())},goToDataManager:function t(){e.setUrl(r.getUrlForDataManager())},goToDataModelViewer:function t(){e.setUrl(r.getUrlForDataModelViewer())},goToDataLoadEditor:function t(){e.setUrl(r.getUrlForDataLoadEditor())},goToSheet:function t(n,i,a){e.setUrl(r.getUrlForSheet(n,i,a))},goToStory:function t(n,i,a){e.setUrl(r.getUrlForStory(n,i,a))}};return r}.apply(t,r),void 0!==i&&(e.exports=i))},155:function(e,t,n){"use strict";var r,i;!(r=[n(11),n(95),n(92),n(89),n(90),n(183),n(396),n(105),n(182)],i=function(e,t,r,i,a,o,s,u,p){var c;var l=r.extend("DataPrepRestService",{init:function e(){},_getAPI:function e(){c||(c=o.getApi("api/dataprepservice/v1","openapi",void 0,void 0,void 0,void 0,p.getServerNodeId()));return c},_handleRestResponse:function e(r,i,a){if(a.body&&a.body.notification&&1005===a.body.notification.data.code){t.publish(u.Events.PubSub.StartSpin,{method:r});return this.executeAfterReload({apiFunc:this[r],initialParams:i}).finally(function(){t.publish(u.Events.PubSub.StopSpin,{method:r})})}a.body.response&&a.body.response.loadModel&&Promise.all([n.e(22),n.e(93)]).then(function(){var e=[n(253)];(function(e){e.updateProperties(a.body.response.loadModel)}).apply(null,e)}).catch(n.oe);return a.body.response},executeAfterReload:function e(t){var n=new i;this.waitForReload(n);return n.promise.then(function(){return t.apiFunc.apply(this,t.initialParams)}.bind(this))},waitForReload:function e(t){this.getProgress().then(function(e){this._checkProgress(e.result)?t.resolve(true):setTimeout(function(){this.waitForReload(t)}.bind(this),1e3)}.bind(this),function(e){t.reject(e)})},_checkProgress:function e(t){var n=false;t.engine&&t.engine.qProgressData&&t.engine.qProgressData.qFinished&&true===t.dps.dataLoad.complete&&true===t.dps.profiling.complete&&(n=true);return n},_getAppName:function e(){return a.getParameterByName("app")},getRestResponseHandler:function e(t,n){return function(){return this[t].bind(this,n)}.bind(this)},getSerializedLoadModel:function e(){var t=this;var n=arguments;return this._getAPI().then(function(e){return e.apis.model.getCurrentLoadModel({appId:t._getAppName()}).then(t._handleRestResponse.bind(t,"getSerializedLoadModel",n))})},_addTables:function e(t){var n=this;var r=arguments;return this._getAPI().then(function(e){return e.apis.table.addTables({appId:n._getAppName(),body:t}).then(n._handleRestResponse.bind(n,"_addTables",r))})},_getDesiredTransforms:function e(){var t=[];t.push("makeGeoPoint");t.push("lookupGeoInfo");return t},isRunning:function e(){return this._getAPI()},getForcedConcatRecommendations:function e(t){var n=this;var r=arguments;return this._getAPI().then(function(e){var i={type:"concatenate",queries:t};return e.apis.table.recommendTableTransformation({appId:n._getAppName(),body:i}).then(n._handleRestResponse.bind(n,"getForcedConcatRecommendations",r))})},getTargetTables:function e(t,n){var r=this;var i=arguments;return this._getAPI().then(function(e){return e.apis.table.getCurrentTables({appId:r._getAppName(),forceReload:t,noData:n}).then(r._handleRestResponse.bind(r,"getTargetTables",i))})},getRecommendations:function e(){var t=this;var n=arguments;return this._getAPI().then(function(e){return e.apis.model.getRecommendations({appId:t._getAppName()}).then(t._handleRestResponse.bind(t,"getRecommendations",n))})},getCurrentClassification:function e(){var t=this;var n=arguments;return this._getAPI().then(function(e){return e.apis.model.getCurrentClassification({appId:t._getAppName()}).then(t._handleRestResponse.bind(t,"getCurrentClassification",n))})},getTableRecommendations:function e(t){var n=this;var r=arguments;return this._getAPI().then(function(e){return e.apis.table.getTableRecommendations({appId:n._getAppName(),tableId:t}).then(n._handleRestResponse.bind(n,"getTableRecommendations",r))})},getTargetTablePreview:function e(t){var n=this;var r=arguments;return this._getAPI().then(function(e){return e.apis.table.getPreviewData({appId:n._getAppName(),tableId:t}).then(n._handleRestResponse.bind(n,"getTargetTablePreview",r))})},getTableFields:function e(t){var n=this;var r=arguments;return this._getAPI().then(function(e){return e.apis.field.getFieldExpressions({appId:n._getAppName(),tableId:t}).then(n._handleRestResponse.bind(n,"getTableFields",r))})},getLoadScript:function e(t){var n=this;var r=arguments;return this._getAPI().then(function(e){return e.apis.model.getCurrentScript({appId:n._getAppName(),useCache:t}).then(n._handleRestResponse.bind(n,"getLoadScript",r))})},invokeWithPolling:function e(n,r,i){r&&t.publish(u.Events.PubSub.StartSpin,{method:i});var a=true;var o=void 0;o=setInterval(function(){a&&this.getProgress().then(function(){})}.bind(this),15e3);var s=function e(){a=false;void 0!==o&&clearInterval(o);o=void 0};return n().then(function(e){s();r&&t.publish(u.Events.PubSub.StopSpin,{method:i});return e},function(e){s();r&&t.publish(u.Events.PubSub.StopSpin);throw e})},invokeWithGlobalSpinnerSupport:function e(n){t.publish(u.Events.PubSub.StartSpinInvalidation);return n().catch(function(){t.publish(u.Events.PubSub.StopSpinInvalidation)})},createConcatenatedQuery:function e(t,n,r){var i=this;var a=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return i._getAPI().then(function(e){var o={type:"forceConcatenate",payload:{name:t,queries:n,mappings:r}};return e.apis.table.applyTransformation({appId:i._getAppName(),body:o}).then(i._handleRestResponse.bind(i,"createConcatenatedQuery",a))})})},createJoinedQuery:function e(t,n,r,i){var a=this;var o=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return a._getAPI().then(function(e){var s={type:"join",payload:{name:t,joinType:n,queries:r,mappings:i}};return e.apis.table.applyTransformation({appId:a._getAppName(),body:s}).then(a._handleRestResponse.bind(a,"createJoinedQuery",o))})})},splitQuery:function e(t,n){var r=this;var i=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return r._getAPI().then(function(e){var a={type:"split",payload:{queries:[t],queryProperties:[{sourceQueries:n}]}};return e.apis.table.applyTransformation({appId:r._getAppName(),body:a}).then(r._handleRestResponse.bind(r,"splitQuery",i))})})},synchronizeScriptedTables:function e(){return this.invokeWithPolling(function(){return this.addTables([],true).then(function(e){return e})}.bind(this),true,"synchronize")},getProgress:function e(){var t=this;var n=arguments;return this._getAPI().then(function(e){var r={appId:t._getAppName()};return e.apis.session.getProgress(r).then(t._handleRestResponse.bind(t,"getProgress",n))})},addTables:function t(n,r){var i={data:[],applyTransformations:this._getDesiredTransforms(),defaults:{},scriptedSources:r};for(var a=0;a<n.length;a++){var o=n[a];var u={tables:[]};u.connectionInfo=e.extend(true,{},o.connectionInfo,{dbInfo:o.dbInfo});i.data.push(u);var p=u.tables;o.tablesAndFields.map(function(e){var t={databaseName:o.databaseName,ownerName:o.ownerName,tableName:e.table.qName,formatSpec:e.table.qFormatSpec,fileFormatSettings:e.table.fileFormatSettings};t.fields=[];e.fields.forEach(function(e){t.fields.push({name:e.qName,selected:true})});p.push(t)})}var c=new s;return c.get().then(function(e){i.defaults.enableQVDCaching=e.enableQVDCaching;return this._addTables(i)}.bind(this))},getVisRecommendations:function e(t,n,r,i,a){var o=this;var s=arguments;return this._getAPI().then(function(e){var u={appId:o._getAppName()};if(t){var p=["fields","libItems","expressions"];p.forEach(function(e){t[e]&&t[e].length&&(u[e]=JSON.stringify(t[e]))});t["table"]&&(u["table"]=t["table"])}r&&(u.bundleOverride=JSON.stringify(r));i&&(u.detailLevel=JSON.stringify([]));a&&(u.options=JSON.stringify(a));var c=e.apis.visualization;var l=n?c.getVisualizationsForLoaded(u):c.getVisualizationsForCurrent(u);return l.then(o._handleRestResponse.bind(o,"getVisRecommendations",s))})},getInsightRecommendations:function e(t,n,r,i,a){var o=this;var s=arguments;r||(r=true);return this._getAPI().then(function(e){var u={appId:o._getAppName()};t&&(u["sp"]=t);n&&(u.bundleOverride=JSON.stringify(n));i&&(u.detailLevel=JSON.stringify([]));a&&(u.options=JSON.stringify(a));var p=e.apis.visualization;var c=r?p.getVisualizationsForLoaded(u):p.getVisualizationsForCurrent(u);return c.then(o._handleRestResponse.bind(o,"getVisRecommendations",s))})},bucketField:function e(t,n,r){var i=this;var a=arguments;return this._getAPI().then(function(e){var o={type:"bucket",bucketing:r};o.bucketing.fieldId=n;var s={appId:i._getAppName(),tableId:t,body:o};return e.apis.table.applyTableTransformation(s).then(i._handleRestResponse.bind(i,"bucketField",a))})},applyOrdinal:function e(t,n,r){var i=this;var a=arguments;return this._getAPI().then(function(e){var o={type:"ordinal",ordinals:r};var s={appId:i._getAppName(),tableId:t,fieldId:n,body:o};return e.apis.field.addFieldTransformation(s).then(i._handleRestResponse.bind(i,"applyOrdinal",a))})},applyFieldMapping:function e(t,n,r){var i=this;var a=arguments;return this._getAPI().then(function(e){var o={type:"mapping",mappings:r};var s={appId:i._getAppName(),tableId:t,fieldId:n,body:o};return e.apis.field.addFieldTransformation(s).then(i._handleRestResponse.bind(i,"applyFieldMapping",a))})},splitField:function e(t,n,r){var i=this;var a=arguments;return this._getAPI().then(function(e){var o={type:"splitField",splitDef:{fieldId:n,splitInfo:r}};var s={appId:i._getAppName(),tableId:t,body:o};return e.apis.table.applyTableTransformation(s).then(i._handleRestResponse.bind(i,"splitField",a))})},adaptVisualization:function e(t,n,r,i,a,o){var s=this;var u=arguments;return this._getAPI().then(function(e){var p={action:t,datasetName:n,analysisType:i,dims:a,msrs:o,visType:r};return e.apis.visualization.createVisRecommendationForCurrent({appId:s._getAppName(),body:p}).then(s._handleRestResponse.bind(s,"adaptVisualization",u))})},adaptMatchRecord:function e(t,n,r){var i=this;var a=arguments;return this._getAPI().then(function(e){var o={action:t,matchRecord:n,analysisType:r,detailLevel:[]};return e.apis.visualization.createVisRecommendationForLoaded({appId:i._getAppName(),body:o}).then(i._handleRestResponse.bind(i,"adaptVisualization",a))})},getExcludedCompareVisualizations:function e(t,n,r){var i=this;var a=arguments;return this._getAPI().then(function(e){var o={appId:i._getAppName(),detailLevel:"complete",analysisTypes:JSON.stringify(["excludedCompare","excludedCompareMsrSelector"]),bundleOverride:JSON.stringify({explore:"grayInsight"})};if(t.length>0)if(r){var s=[];t.forEach(function(e){s.push({libId:e})});o["libItems"]=JSON.stringify(s)}else{var u=[];t.forEach(function(e){u.push({name:e,overrides:{classifications:["measure"],defaultAggregation:"sum"}})});o["fields"]=JSON.stringify(u)}n&&(o.options=JSON.stringify(n));return e.apis.visualization.getVisualizationsForLoaded(o).then(i._handleRestResponse.bind(i,"getVisRecommendations",a))})},adaptAggregationForExcludedCompareVisualization:function e(t){var n=this;var r=arguments;return this._getAPI().then(function(e){var i={action:"update",analysisType:"excludedCompare",matchRecord:t};return e.apis.visualization.createVisRecommendationForLoaded({appId:n._getAppName(),body:i}).then(n._handleRestResponse.bind(n,"adaptVisualization",r))})}});return l}.apply(t,r),void 0!==i&&(e.exports=i))},1734:function(e,t,n){"use strict";var r,i;!(r=[n(282),n(89)],i=function(e,t){var n={};function r(r){if(!n[r])return e.getExtensionType(r).then(function(e){n[r]=e});return t.resolve()}function i(e,t,r){if(n[e]){var i=n[e].support;var a=i&&i[t];if("function"===typeof a)return a.call(null,r);if("boolean"===typeof a)return a}return false}var a={addSupportForType:r,getSupportForType:i};return a}.apply(t,r),void 0!==i&&(e.exports=i))},177:function(e,t,n){"use strict";var r,i;!(r=[],i=function(){var e="q3TnObj";function t(){var t=JSON.parse(sessionStorage.getItem(e));null===t&&(t=JSON.parse(localStorage.getItem(e))||{});return t}function n(){return t()}function r(n){var r=t();if(!r[n]){r[n]={data:{view:"",scriptTabIndex:0},tab:"",analysis:{sheetId:"",state:""},story:{storyId:"",slideId:"",state:""}};sessionStorage.setItem(e,JSON.stringify(r));localStorage.setItem(e,JSON.stringify(r));return r[n]}return r[n]}function i(n,i,a,o){var s=r(n);var u=t();void 0===a&&(a=u[n].data.scriptTabIndex);o||(s.tab="data");s.data={view:i,scriptTabIndex:a};u[n]=s;localStorage.setItem(e,JSON.stringify(u));sessionStorage.setItem(e,JSON.stringify(u));return u[n]}function a(e){var n=t();if(n[e])return n[e].data;return"not_found"}function o(n,i,a,o){var s=r(a);var u=t();s.tab="analysis";s.analysis={sheetId:n,state:i,overlay:o};u[a]=s;localStorage.setItem(e,JSON.stringify(u));sessionStorage.setItem(e,JSON.stringify(u));return u[a]}function s(e){var n=t();if(n[e])return n[e].analysis;return"not_found"}function u(n,i,a,o){var s=r(o);var u=t();s.tab="story";s.story={slideId:n,storyId:a,state:i};u[o]=s;localStorage.setItem(e,JSON.stringify(u));sessionStorage.setItem(e,JSON.stringify(u));return u[o]}function p(e){var n=t();if(n[e])return n[e].story;return"not_found"}function c(n,i){var a=r(i);var o=t();a.tab=n;o[i]=a;localStorage.setItem(e,JSON.stringify(o));sessionStorage.setItem(e,JSON.stringify(o));return o[i]}function l(e){var n=t();if(n[e])return n[e].tab;return"not_found"}return{isInSession:n,setData:i,data:a,setSheet:o,analysis:s,setStory:u,story:p,setTab:c,tab:l}}.apply(t,r),void 0!==i&&(e.exports=i))},202:function(e,t,n){"use strict";var r,i;!(r=[n(90),n(89),n(122),n(177),n(94),n(93),n(49),n(108),n(50)],i=function(e,t,n,r,i,a,o,s,u){function p(){var t=e.getParameterByName("app");var n=e.getParameterByName("sheet");var i=r.analysis(t);var a=i&&i.sheetId?i.sheetId:n;return{appId:t,sheetId:a}}function c(e){if(!s.inClient()||!o.getFlag("SSA_IN_EDIT")||u.isSmallDevice||e)return t.resolve("analysis");return a.getApp().then(function(e){return e.getLayout().then(function(e){var t=e&&e.permissions&&e.permissions.update;var n=t?i.States.edit:i.States.analysis;return i.getAllStateKeys()[n]})}).catch(function(){return t.resolve("analysis")})}function l(n,i){var a=r.analysis(e.getParameterByName("app"));if(s.inClient()&&a&&a.state&&!i)return t.resolve(a.state);return c(n)}function d(e,t,i,a){r.setSheet(e,t,i,a);n.goToSheet(e,t,a)}function f(t){var n=e.getParameterByName("app");var a=r.analysis(n).overlay;return a===i.getAllStateKeys()[t]}function h(){return o.getFlag("SSA_IN_EDIT")||i.state!==i.States.edit}function g(){return f(i.States.insight)}function v(){return f(i.States.selections)}function m(e,t,n){if(s.inClient()){var a=r.analysis(t).state;var o=i.getAllStateKeys()[n];a||c().then(function(n){d(e,n,t,o)});d(e,a,t,o)}}function b(e,t){if(s.inClient()){var n=r.analysis(t).state;n?d(e,n,t,null):c().then(function(n){d(e,n,t,null)})}}return{getCurrentSheetInfo:p,closeAnalysisOverlay:b,openAnalysisOverlay:m,getDefaultSheetViewState:c,getCurrentSheetViewState:l,shouldShowOverlay:h,isInInsightMode:g,isInSelectionsMode:v}}.apply(t,r),void 0!==i&&(e.exports=i))},2051:function(e,t,n){"use strict";var r,i;function a(e){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return a(e)}!(r=[n(48),n(421),n(1045),n(406),n(877),n(89),n(90),n(1734),n(94),n(202),n(1046),n(313)],i=function(e,t,n,r,i,o,s,u,p,c,l,d){var f=t.extend("AutoChart",{init:h,updateData:y,initialize:R,suppressOnPaint:x,refreshSelections:T,updateTitlePadding:_,setInteractionState:A,getContextMenu:O,isOn:F,on:w,off:E,setDirection:N,setSnapshotData:M,destroy:v,paint:L,initDataView:U,cancel:m,retry:b,getViewState:V});function h(e,t,r,i,a,o){e.object.setOnFocusHandler(function(){e.innerObject.setOnBlurHandler(function(){e.object.blur()});e.innerObject.focus()});this._super(e,t,r,i,a,o);this._derivedProperties=new n}function g(e,t){var n=s.getValue(e,"qHyperCube.qDimensionInfo",[]);var r=s.getValue(t,"qHyperCubeDef.qDimensions",[]);var i=s.getValue(e,"qHyperCube.qMeasureInfo",[]);var a=s.getValue(t,"qHyperCubeDef.qMeasures",[]);return n.length!==r.length||i.length!==a.length}function v(){this._super();var e=this.$scope;e.isDestroyed=true;if(e.item&&e.item.model){"LOADING"===e.item.state&&e.innerObject&&e.innerObject.subscription&&e.innerObject.subscription.cancel();var t=e.item.model.app;var n=e.item.model.id;t.destroySessionObject(n);e.item={}}}function m(){var e=this.$scope;"LOADING"===e.item.state&&e.innerObject&&e.innerObject.cancel()}function b(){var e=this.$scope;e.innerObject.retry()}function y(t){var n=this;if(this._destroyed)return o.reject();var r=t.qStateName;return this._super(t).then(function(){var a=n.backendApi.model;return a.getEffectiveProperties().then(function(u){var d=s.extend(true,{},t);var f=s.extend(true,{},u);if(g(d,f))return o.resolve();return n._derivedProperties.addDefaultHyperCubeHash(f.qHyperCubeDef,d.qHyperCube,a.app,C(f)).then(function(t){var u={layout:d,properties:f,model:a,hashData:t,generateDerivedProperties:function t(r,o){var s=e.getService("$timeout");n.showThrobberTimeout=s(function(){n.$scope.object.throbberApi.show()},1e3);return i.generateDefaultChartProperties(o,r,a.app,true).then(function(e){s.cancel(n.showThrobberTimeout);n.$scope.object.throbberApi.hide();o.qUndoExclude.generated=e;S(f,f.qUndoExclude);return q(n,a.app,f.qUndoExclude.generated,a,f)})}};f.qUndoExclude||(f.qUndoExclude={});var h=!!f.qUndoExclude.generated;var g=p.isInEditMode();var v=c.isInInsightMode();if(!n._derivedProperties.isDerivedUpToDate(u)&&(g||v||!h))return n._derivedProperties.updateDerivedProperties(u);var m=s.extend(true,{},f);var b=S(f,f.qUndoExclude,r);if(!n.$scope.item||!n.$scope.item.model)return I(f.qUndoExclude.generated,a.app,n,a,f);if(!b)return o.resolve();var y=[];y.push(q(n,a.app,f.qUndoExclude.generated,a,f));y.push(l.saveDerivedProperties(a,d,f,m,p));return o.all(y)})})})}function S(e,t,n){var r=false;if(t.generated){var i=["showTitles","title","subtitle","footnote"];r=D(t.generated,e,i,n)}return r}function D(e,t,n,r){var i=false;if(n&&n.length>0){n.forEach(function(n){if(!s.isEqual(e[n],t[n])){e[n]="object"===a(t[n])?s.extend({},t[n]):t[n];i=true}});var o="qStateName";void 0===e.qStateName&&(e.qStateName="");void 0===r&&(r="");if(!s.isEqual(e.qStateName,r)){e[o]=r;i=true}}return i}function q(e,t,n,r,i){if(e.$scope.item&&e.$scope.item.model)return P(n,t,e,r,i,e.$scope.item.model.id);return I(n,t,e,r,i)}function I(e,t,n,i,a){var p=n.$scope;function c(e,t,n){var r=n||t.qHyperCubeDef;var i=r.qDimensions;var a=r.qMeasures;var o=e.qHyperCubeDef.qDimensions;var s=e.qHyperCubeDef.qMeasures;var u=false;function p(e,t,n){e.forEach(function(r,i){var a=true;var o=-1;var s=t.some(function(e){a=r.qLibraryId?r.qLibraryId===e.qLibraryId:n(r,e);a||(o=i);return a});if(!s){u=true;e.splice(o,1)}})}p(o,i,function(e,t){return!!t.qDef.qFieldDefs&&e.qDef.qFieldDefs[0]===t.qDef.qFieldDefs[0]});i.forEach(function(e,t){var n=false;var r=-1;var i=e;o.some(function(t){n=e.qLibraryId?t.qLibraryId===e.qLibraryId:!!t.qDef.qFieldDefs&&e.qDef.qFieldDefs[0]===t.qDef.qFieldDefs[0];return n});if(!n){r=t;u=true;o.splice(r,0,i)}});p(s,a,function(e,t){return e.qDef.qDef===t.qDef.qDef});u&&(e.qHyperCubeDef.qInterColumnSortOrder=JSON.parse(JSON.stringify(r.qInterColumnSortOrder)));return u}if(p.isDestroyed)return o.resolve();return r.createChart(e,t,false).then(function(r){if(p.isDestroyed)return;p.item={state:"LOADING",paintDeferred:new o,properties:e,model:r};var l=s.extend({},p.options);l.onRendered=function(){if(p.item.model&&"histogram"===p.item.model.layout.visualization&&!p.item.model.layout.qUndoExclude)return;p.item.state&&(p.item.state="LOADED");p.item.paintDeferred&&p.item.paintDeferred.resolve()};p.item.options=l;p.item.model.getProperties=p.item.model.getEffectiveProperties;n&&n._dataView&&(n._dataView=new d(t,r,n.$element));var f=r.setProperties.bind(r);r.setProperties=function(e){var t=false;if(!s.isEqual(a.title,e.title)){D(a,e,["title"]);t=true}var n=false;e.qHyperCubeDef&&(n=c(a,e));t=t||n;if(t)return i.setProperties(a);return f(e)};return u.addSupportForType(e.visualization)})}function P(e,t,n,r,i,a){n.$scope.innerObject.type=null;return t.destroySessionObject(a).then(function(){return I(e,t,n,r,i)})}function C(e){return{qHyperCubeDef:e.qHyperCubeDef,preferredChart:e.preferredChart}}function R(){}function x(){return false}function T(){}function _(){this.$scope.innerObject.updateTitlePadding.apply(this,arguments)}function A(){this.$scope.innerObject.setInteractionState.apply(this,arguments);this.$scope.innerObject.update()}function O(e,t,n){return this.$scope.innerObject.getContextMenu(t,n)}function F(){return this.$scope.innerObject.isOn()}function w(){this.$scope.innerObject.on()}function E(){this.$scope.innerObject.off()}function N(e){e&&this.$scope.options.direction===e&&(this.$scope.options.direction="");this.$scope.innerObject.setDirection.apply(this,arguments)}function M(e){Object.keys(e).forEach(function(t){"snapshotData"!==t&&"qInfo"!==t&&delete e[t]});s.extend(e,this.$scope.innerObject.layout);return this.$scope.innerObject.setSnapshotData.apply(this,arguments)}function L(){if(this.$scope.item.paintDeferred)return this.$scope.item.paintDeferred.promise;return o.resolve()}function U(e){this._dataView||(this._dataView=new d(this.$scope.innerObject.model.app,this.$scope.innerObject.model,e))}function V(){return this.$scope.innerObject.getViewState()}return f}.apply(t,r),void 0!==i&&(e.exports=i))},2052:function(e,t,n){"use strict";var r,i;!(r=[n(877),n(89),n(90),n(115),n(91)],i=function(e,t,n,r,i){var a={uses:"dimensions",disabledRef:"",items:{nullSuppression:{show:false},dimensionLimits:{show:false},others:{show:false}}};var o={uses:"measures",disabledRef:""};function s(e){return e&&e.qDimensions&&e.qMeasures&&(e.qDimensions.length>0||e.qMeasures.length>0)}function u(e){var n=new t,r=e.$watch(function(){return e.args.properties},function(e){var t=!e.qHyperCubeDef||!e.qHyperCubeDef.qMeasures.length&&!e.qHyperCubeDef.qDimensions.length,i=!!e.qUndoExclude&&!!e.qUndoExclude.generated;if(t||i){r();n.resolve()}});return n.promise}function p(){var e={uses:"data",items:{dimensions:a,measures:o}};var t={uses:"settings"};return{type:"items",interceptor:u,component:"accordion",defaultActiveTabIndex:0,items:{data:e,settings:t}}}function c(e){return e.preferredChart&&e.preferredChart===e.qUndoExclude.generated.visualization}function l(){var p=i.get("properties.chartType"),l={component:"icon-button",icon:function e(t){var e;if(t.qUndoExclude&&t.qUndoExclude.generated&&s(t.qHyperCubeDef)){var n=c(t)?t.preferredChart:t.qUndoExclude.generated.visualization;e=r.getType(n).getLibraryInfo().iconChar}return e},title:function e(t){if(s(t.qHyperCubeDef))return i.get(c(t)?"properties.chartType.selected":"Common.Auto")},subTitle:function e(t){var e;if(!s(t.qHyperCubeDef))return i.get("properties.chartType.noSuggestions");if(t.qUndoExclude&&t.qUndoExclude.generated){var n=c(t)?t.preferredChart:t.qUndoExclude.generated.visualization;e=i.get(r.getType(n).getLibraryInfo().translationKey)}return e},disabled:function e(t){return!s(t.qHyperCubeDef)},action:function r(a,o,s,u){e.generateAlternativeChartProperties(s.properties,s.layout,s.model.app,true).then(function(e){t.all(e).then(function(e){var t=[],r=[],o="pp_change_chart_type_"+n.generateId();var c=u.$on("datachanged",function(){u.$root.$emit("hideSubPanel",{id:o})});e.forEach(function(e){var n={component:"chart-type",currentType:a.qUndoExclude.generated.visualization,type:e.qInfo.qType,model:s.model,app:s.model.app,properties:e};e.isRecommended?t.push(n):r.push(n)});var l={component:"items",items:{header:{component:"text",style:"chart-type-header",label:i.get("properties.chartType.selectChartType")},text:{component:"text",label:i.get("properties.chartType.avalibleTypes")},headerRecommended:{component:"text",style:"chart-type-header",label:i.get("properties.chartType.recommendedCharts")},recommendedCharts:{component:"items",items:t}}};if(r.length>0){l.items.headerOther={component:"text",style:"chart-type-header",label:i.get("properties.chartType.otherCharts")};l.items.otherCharts={component:"items",items:r}}u.$root.$emit("showSubPanel",{id:o,triggerId:"propertyPanelAutoChart",title:p,width:"249px",stepOutCallback:function e(){c()},definition:l})})})},label:p};return{component:"items",interceptor:u,items:{changeBtn:l,data:{uses:"data",items:{dimensions:a,measures:o}},settings:{uses:"settings"}}}}return{createEnhancedPropertiesDef:l,createDefaultPropertiesDef:p}}.apply(t,r),void 0!==i&&(e.exports=i))},2053:function(e,t,n){"use strict";var r,i;!(r=[n(189),n(90)],i=function(e,t){return{importProperties:function n(r,i,a,o){var s={layout:{templateId:i.templateId}};a.mapProperties(s);var u=a.getDefaultDimensionProperties();var p=a.getDefaultMeasureProperties();delete u.qDef.cId;delete u.qLibraryId;delete p.qDef.cId;delete p.qLibraryId;r.properties.qHyperCubeDef.qCalcCondition&&delete r.properties.qHyperCubeDef.qCalcCondition;r.properties.qHyperCubeDef.qCalcCond&&delete r.properties.qHyperCubeDef.qCalcCond;var c=r.properties.qHyperCubeDef.qDimensions;c&&c.length>0&&c.forEach(function(e){t.extend(true,e,u);e.qAttributeDimensions.length=0;e.qAttributeExpressions.length=0;if(e.qDef.representation&&e.qDef.representation.urlLabel){e.qDef.representation.type="text";e.qDef.representation.urlLabel=""}});var l=r.properties.qHyperCubeDef.qMeasures;l&&l.length>0&&l.forEach(function(e,n){l[n]=t.extend(true,{},e,p);l[n].qAttributeDimensions.length=0;if(l[n].qAttributeExpressions){delete r.data[0].measures[n].qAttributeExpressions;delete l[n].qAttributeExpressions}});return e.hypercube.importProperties(r,i,a,o)},exportProperties:e.hypercube.exportProperties}}.apply(t,r),void 0!==i&&(e.exports=i))},2054:function(e,t,n){"use strict";var r,i;!(r=[n(204),n(130),n(89)],i=function(e,t,n){var r;r=e.extend({autoSortDimension:function e(n){var r=this;function i(e){e.forEach(function(e,t){var i=e.qTags;var a={qSortByLoadOrder:1};"function"===typeof r.dimensionDefinition.autoSort&&r.dimensionDefinition.autoSort(n,r.properties,i,a,r);n.qDef.qSortCriterias?n.qDef.qSortCriterias[t]=a:n.qDef.qSortCriterias=[a]})}return n.qLibraryId?this.app.getDimensionList().then(function(e){var r=t.findLibraryDimension(n.qLibraryId,e);r&&i(r.qData.info);return n}):this.app.getFieldList().then(function(e){var r=t.findField(n.qDef.qFieldDefs[0],e);r&&i([r]);return n})},autoSortMeasure:function e(t){t.qSortBy={qSortByLoadOrder:1};return n.resolve(t)}});return r}.apply(t,r),void 0!==i&&(e.exports=i))},2055:function(e,t){e.exports='<qv-object model="item.model" options="item.options" object="innerObject" class="qv-object-auto-chart-state-{{item.state}}"></qv-object>\n'},2056:function(e,t,n){"use strict";var r,i;!(r=[],i=function(){var e={dimensions:{min:function e(t){return t>0?0:1},max:1e3},measures:{min:function e(t){return t>0?0:1},max:1e3}};return e}.apply(t,r),void 0!==i&&(e.exports=i))},376:function(e,t,n){"use strict";var r,i;!(r=[n(92),n(90),n(188),n(89)],i=function(e,t,n,r){var i;i=e.extend({init:function e(t){this._model=t},setModel:function e(t){this._model=t},saveSoftProperties:function e(i,a){if(!this._model)return r.resolve(false);var o=n.generate(i,a);t.extend(true,i,a);if(o&&o.length){o=o.map(function(e){return{qOp:e.op,qValue:JSON.stringify(e.value),qPath:e.path}});return this._model.applyPatches(o,true).then(function(){return true})}return r.resolve(false)},mergeSoftPatches:function e(){if(!this._model)return r.resolve();var t=this;return r.all({properties:this._model.getProperties(),effective:this._model.getEffectiveProperties()}).then(function(e){if(e.properties.qExtendsId)return;var r=n.generate(e.properties,e.effective);n.apply(e.properties,r);t._model.setProperties(e.properties).then(function(){t._model.clearSoftPatches()})})}});return i}.apply(t,r),void 0!==i&&(e.exports=i))},379:function(e,t,n){"use strict";var r,i;!(r=[n(95),n(92),n(117),n(254),n(89),n(108),n(90),n(91),n(11),n(155),n(105),n(182)],i=function(e,t,n,r,i,a,o,s,u,p,c,l){var d={};var f=t.extend("DataPrepService",{init:function e(t,n){t=t||o.getParameterByName("app");n=n||f.connectOptions;n.route="app/"+encodeURIComponent(t).toLowerCase();n.responseInterceptors=[{onRejected:function e(t,n,r){r.isHandled=true;return i.reject(r)}}];this.session=r.get(null,n);var a=this;this._callbacks=u.Callbacks();this.waitForOpen=new i;this.waitForResume=new i;this.waitForResume.resolve(a);this.restService=new p;document.addEventListener("onAppStateChanged",function(e){if(e.detail&&e.detail.inForegroundNow)a.session.resume(false).then(function(){a.waitForResume.resolve(a)});else if(e.detail&&!e.detail.inForegroundNow){a.session.suspend();a.waitForResume=new i}});function c(e){e=e||{};e.isHandled=true;e.message=s.get("DataPrep.Recommendations.ConnectionLostToDPS");a.waitForOpen.reject(e)}function l(){a.waitForOpen.resolve(a)}function d(e){var t=e.error;if(t){t.isHandled=true;-32e3!==t.code&&(t.dpsError=true)}}this.session.Error.bind(d);this.session.Close.bind(c);this.session.Open.bind(l);a.waitForResume.promise.then(function(){if(n.serverNodeId){var e=[];e.push(n.serverNodeId);a.rpc("setServerNodeId",e)}});this.session.enigmaPromise.then(l).catch(c)},rpc:function t(n,r){var i={method:n,params:r||[]};var a=this;return a.waitForResume.promise.then(function(){return a.session.rpc(i).then(function(t){if(t.result&&t.result.notification&&1005===t.result.notification.data.code){e.publish(c.Events.PubSub.StartSpin,{method:n});var i=r.length&&r.length>1&&r[1].forceReload;true===i&&(r[1].forceReload=false);return a.executeAfterReload(n,r).finally(function(){e.publish(c.Events.PubSub.StopSpin,{method:n})})}return t})})},rpcWithPolling:function t(n,r,i){i&&e.publish(c.Events.PubSub.StartSpin,{method:n});var a=true;var o=void 0;var s=function t(){i&&e.publish(c.Events.PubSub.StopSpin,{method:n})};o=setInterval(function(){a&&this.getProgress().then(function(){})}.bind(this),15e3);var u=function e(){a=false;void 0!==o&&clearInterval(o);o=void 0};return this.rpc(n,r).then(function(e){u();s();return e},function(e){u();s();throw e})},executeAfterReload:function e(t,n){var r=new i;this.waitForReload(r);return r.promise.then(function(){return this.rpc(t,n)}.bind(this))},_checkProgress:function e(t){var n=false;t.engine&&t.engine.qProgressData&&t.engine.qProgressData.qFinished&&true===t.dps.dataLoad.complete&&true===t.dps.profiling.complete&&(n=true);return n},waitForReload:function e(t){this.getProgress().then(function(e){this._checkProgress(e.result)?t.resolve(true):setTimeout(function(){this.waitForReload(t)}.bind(this),1e3)}.bind(this),function(e){t.reject(e)})},augmentOptions:function e(t){t["throwOnReload"]=true;return t},getProgress:function e(){return this.rpc("getProgress",[0])},getModel:function e(t){return this.rpc("getModel",[t||{}])},setModel:function e(t,n){return this.rpc("setModel",[t,n||{}])},initModel:function e(t,n){return this.rpc("initModel",[t,n||{}])},analyzeModel:function e(t,n){return this.rpc("analyzeModel",[t,n||{}])},getTargetTables:function e(t,n){return this.rpc("getTargetTables",[t,this.augmentOptions(n)||{}])},warmUpDPS:function e(t,n){return this.rpc("getTargetTables",[t,this.augmentOptions(n)||{}]).catch(function(e){e.error.dpsHandled=true;console.log("Warming up DPS ignored this error: ");console.log(e);throw e})},getTablePreview:function e(t,n,r){return this.rpc("getTablePreview",[t,n,this.augmentOptions(r)||{}])},getTableFields:function e(t,n,r){return this.rpc("getTableFields",[t,n,this.augmentOptions(r)||{}])},getLoadScript:function e(t,n){return this.rpc("getLoadScript",[t,n||{}])},getClassifications:function e(t){return this.rpc("getClassifications",[t])},getRestService:function e(){return this.restService},getVisRecommendations:function e(t,n){return this.rpc("getVisRecommendations",[t,n])},adaptVisualization:function e(t,n){return this.rpc("adaptVisualization",[t,n])},syncLoadModel:function e(t){return this.rpc("syncLoadModel",[t])},getRecommendations:function e(t,n){return this.rpcWithPolling("getRecommendations",[t,this.augmentOptions(n)||{}],true)},getDataPreview:function e(t){return this.rpc("getDataPreview",[t])},updateSources:function e(t,n,r){return this.rpcWithPolling("updateSources",[t,n,r||{}])}});f.getConnectOptions=function(){if(f.connectOptions){var e=new i;e.resolve(f.connectOptions);return e.promise}return n.global.getConfiguration().then(function(){f.connectOptions={host:o.hostname,isSecure:o.isSecure,prefix:o.basePath,port:o.port,subpath:"dataprepservice",reloadURI:o.reloadURI,serverNodeId:l.getServerNodeId()};return f.connectOptions})};f.isRunning=function(){var e=new p;return e.isRunning()};f.get=function(e,t){return f.getConnectOptions(t).then(function(t){e=e||o.getParameterByName("app");e=g(e);var n=d[e.toLowerCase()]||new f(e,t);d[e.toLowerCase()]=n;return n.waitForOpen.promise})};var h=".qvw";function g(e){if(a.isPersonalModeSync()&&-1!==e.indexOf(h,e.length-h.length))return e.substr(0,e.length-1)+"f";return e}return f}.apply(t,r),void 0!==i&&(e.exports=i))},396:function(e,t,n){"use strict";var r,i;!(r=[n(48),n(414)],i=function(e){var t=function e(){this.globalDefaults={enableQVDCaching:true}};t.prototype.get=function(){var t=this;return e.getService("qvDataManagerAppStorageService").get("globalDefaults").then(function(e){return e||t.set().then(function(){return t.globalDefaults})})};t.prototype.set=function(t){return e.getService("qvDataManagerAppStorageService").set("globalDefaults",t||this.globalDefaults)};return t}.apply(t,r),void 0!==i&&(e.exports=i))},414:function(e,t,n){"use strict";var r,i;!(r=[n(48),n(93),n(440)],i=function(e,t){function n(e){return t.getApp().then(function(t){return t.id+"."+e})}function r(e){this.localStorageService=e}r.prototype.get=function(e){var t=this;return n(e).then(function(e){return t.localStorageService.get(e)})};r.prototype.set=function(e,t){var r=this;return n(e).then(function(e){r.localStorageService.set(e,t)})};r.prototype.remove=function(e){var t=this;return n(e).then(function(e){t.localStorageService.remove(e)})};e.service("qvDataManagerAppStorageService",["qvDataManagerLocalStorageService",function(e){return new r(e)}])}.apply(t,r),void 0!==i&&(e.exports=i))},440:function(e,t,n){"use strict";var r,i;!(r=[n(48),n(54),n(113)],i=function(e,t,n){var r="DataManager";var i=1;var a=2592e6;function o(e){if(!n["DISABLE_DM_LOCAL_STORAGE"]&&p()){var t=new s(localStorage,true);this.storage=t;e(function(){c(t)})}else this.storage=new s({},false)}o.prototype.get=function(e){var t=this.storage.get(u(e));var n=d(t);return n?n.value:void 0};o.prototype.set=function(e,t){var n=(new Date).getTime();var r={created:n,version:i,value:t};var a=l(r);this.storage.set(u(e),a)};o.prototype.remove=function(e){this.storage.remove(u(e))};function s(e,t){this.storage=e;this.supportsLocalStorage=t}s.prototype.get=function(e){var t=this.supportsLocalStorage?this.storage.getItem(e):this.storage[e];return t};s.prototype.set=function(e,t){this.supportsLocalStorage?this.storage.setItem(e,t):this.storage[e]=t};s.prototype.remove=function(e){this.supportsLocalStorage?this.storage.removeItem(e):delete this.storage[e]};s.prototype.keys=function(){var e=[];var t;if(this.supportsLocalStorage)for(var n=0;n<this.storage.length;n++){t=this.storage.key(n);e.push(t)}else for(t in this.storage)e.push(t);return e};function u(e){return r+"."+e}function p(){try{localStorage.setItem(r,r);localStorage.removeItem(r);return true}catch(e){return false}}function c(e){var n=r+".";var i=(new Date).getTime();e.keys().forEach(function(r){if(0===r.lastIndexOf(n,0)){var o=e.get(r);var s=d(o);s&&s.created&&t.isNumber(s.created)&&i-s.created>a&&e.remove(r)}})}function l(e){return JSON.stringify(e)}function d(e){if(!e)return;try{return JSON.parse(e)}catch(e){return}}e.service("qvDataManagerLocalStorageService",["$timeout",function(e){return new o(e)}])}.apply(t,r),void 0!==i&&(e.exports=i))},982:function(e,t,n){"use strict";var r,i;!(r=[],i=function(){return{canModifyHardProperties:e};function e(e,t,n){var r=e.Views&&e.Views.sheet;if(n.qHasSoftPatches||n.qExtendsId)return false;if(n.qInfo&&"masterobject"===n.qInfo.qType&&n.permissions)return n.permissions.update;if(e.view===r)return e.model&&e.model.layout.permissions.update;return t.app&&t.app.layout.permissions.update}}.apply(t,r),void 0!==i&&(e.exports=i))}}]);