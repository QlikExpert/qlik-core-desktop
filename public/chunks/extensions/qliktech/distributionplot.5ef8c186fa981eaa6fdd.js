/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[42],{1168:function(e,t,n){"use strict";var o,r;!(o=[n(1302)],r=function(e){var t,n;t=e.extend("TreeNode",{addChild:function t(o){if(!o||!(o instanceof e))throw new TypeError("Expecting a Node as argument, but got "+o);if(o===this)throw new Error("Can not add itself as child!");if(o._children&&o._children.length&&this.ancestors.indexOf(o)>=0)throw new Error("Can not add an ancestor as child!");o._parent&&o._parent!==this&&o._parent.removeChild(o);if(o._pushed){n=this._children.indexOf(o);n>=0&&this._children.splice(n,1)}o._pushed=true;this._children.push(o);o._parent=this;o._ancestors=null;return this},addChildren:function e(t){var n,o=t?t.length:0;for(n=0;n<o;n++)this.addChild(t[n]);return this},removeChild:function e(t){n=this._children.indexOf(t);if(n>=0){this._children.splice(n,1);t._parent=null;t._ancestors=null}return this},removeChildren:function e(t){var n,o;if(!this._children)return this;if(t){o=t.length;for(n=0;n<o;n++)this.removeChild(t[n])}else while(this._children.length)this.removeChild(this._children[0]);return this}});return t}.apply(t,o),void 0!==r&&(e.exports=r))},1181:function(e,t,n){"use strict";var o,r;!(o=[n(89),n(1307),n(1142),n(1045),n(2121),n(1566),n(1569),n(2124),n(2125),n(2126),n(1258),n(2127),n(204),n(2128),n(1310),n(1311),n(1312),n(1313),n(1174),n(90),n(281),n(2129),n(156),n(189),n(201),n(118),n(252),n(1297),n(1497),n(2130),n(101)],r=function(e,t,n,o,r,i,a,s,l,u,c,p,d,f,h,m,g,v,b,y,D,x,q,C,_,S,E,I,M,A,T){var P=c.DATA_PATH,O=c.HYPERCUBE_PATH,w=c.HYPERCUBE_DEF_PATH;var H=f.extend("DistributionPlotBackendAPI",{init:function e(){this._super.apply(this,arguments);this.dataPath="/"+P+"/"+w}});function V(e){return{cube:e[w],sorting:e.sorting,color:{point:e.color.point}}}function N(e){if(Array.isArray(e))return e;return e?[e]:[]}function R(e){return Math.min(D.getOuterDimensionSizeOfMax2Dims(e,P),c.MAX_STACKED_VALUES)}function B(e,t){return{viewSize:t,max:R(e)}}function L(e){var t=e[P][O].qDimensionInfo;var n=D.hasSecondDimension(e,P)?t[0].qApprMaxGlyphCount:0;return Math.min(c.MAX_GLYPH_COUNT,n)}function k(){var e=c.MAX_STACKED_VALUES>=this.layout.qUndoExclude.qHyperCube.qSize.qcy?3:1;this.backendApi.setCacheOptions({height:e*this._scrollHandler.getScrollViewSizeInItem(),width:3})}function z(){if(this.layout&&D.hasSecondDimension(this.layout,P)){this._scrollHandler.onResize();this.backendApi&&!this.backendApi.isSnapshot&&k.call(this)}}function U(e){var t=[];var n=e.qUndoExclude&&e.qUndoExclude.qHyperCube&&e.qUndoExclude.qHyperCube.qDimensionInfo?e.qUndoExclude.qHyperCube.qDimensionInfo:void 0;if(!n)return false;for(var o=0;o<n.length;o++)n[o].qLocked?t.push(n[o].qLocked):t.push(false);return t}function G(e,t,n){var o={};if(1===e.length){o.isOpenDim=false;e[0]?o.isOpenMea=false:o.isOpenMea=true}else if(e[0]&&!e[1]){o.isOpenDim=false;o.isOpenMea=true}else if(!e[0]&&e[1]){o.isOpenDim=true;o.isOpenMea=false}else if(e[0]&&e[1]){o.isOpenDim=false;o.isOpenMea=false}else{o.isOpenDim=true;o.isOpenMea=true}t&&(o.isOpenMea=false);n&&(o.isOpenDim=false);return o}function X(e){return e.dataPoint&&e.dataPoint.bubbleScales}function j(){var e=this.chartInstance.component("legend");e&&e.emit&&e.emit("resetindex")}function Y(e,t){return T.getValue(e,"qHyperCube.qDimensionInfo."+t+".qIsOneAndOnlyOne")||false}var K=t.extend("DistributionPlot",{namespace:".distributionPlot",defaultOptions:{navigation:true,selections:true,tooltips:true},init:function e(t,n,i,a,s,l){this._super(t,n,i,a,s);var u=n.find(".picasso-chart")[0];u.__do_not_use_findShapes=this.chartInstance.findShapes.bind(this.chartInstance);this._derivedProperties=new o;this.hasOption("selections")&&(this._selectionHandler=h.create({model:a.model,chartInstance:this.chartInstance,selectionsApi:s,isLassoDisabled:this.isLassoDisabled.bind(this)}));this.hasOption("tooltips")&&(this._tooltipHandler=g.create(this.chartInstance,l,n));this._scrollHandler=new v(this.chartInstance,n,n[0],this.getSlicedData.bind(this),l,this.onScrollCallback.bind(this),"legend");this.backendApi.setPath("/"+P+"/"+w);this.backendApi.setCacheOptions({maxStackedValues:c.MAX_STACKED_VALUES});this._maxBubbleScale=r.items.settings.items.presentation.items.bubbleScaleItems.items.bubbleScales.max;this._jitterTool=new A;this.setDataPaths([P+"/"+O])},onScrollCallback:function e(t,n,o){var r=this;this._updateColorMapData(t).then(function(){r.updateChart(t,n,o)})},getSlicedData:function e(t,n){var o=this;return this.getData(this.backendApi,this.layout[P][O],{top:t,height:n}).then(function(){return o.layout})},updateScrollHandlerState:function e(t){void 0!==t&&(this._disableScrolling=!!t);this._scrollHandler.setDisabled(!this.hasOption("navigation")||!D.hasSecondDimension(this.layout,P)||this._disableScrolling)},on:function e(){this._super();this.hasOption("tooltips")&&this._tooltipHandler.on();this.hasOption("selections")&&this._selectionHandler.on();this.hasOption("navigation")&&this._scrollHandler.on()},off:function e(){this._super();this.hasOption("tooltips")&&this._tooltipHandler.off();this.hasOption("selections")&&this._selectionHandler.off();this.hasOption("navigation")&&this._scrollHandler.off()},_getPointScale:function e(){return X(this.layout)?this.layout.dataPoint.bubbleScales/this._maxBubbleScale:1},_calcBandwidth:function e(t,n){var o=n.scales()["dimension"];this._bandwidthRatio=o?o.pxScale(t).bandwidth():1;this._bandwidthPx=t*this._bandwidthRatio},_calcPointMaxSize:function e(t,n){var o=Math.min(c.MAX_POINT_BASE_SIZE_PX,n*c.POINT_BANDWIDTH_BASE_RATIO)*t;this._pointMaxSizePx=Math.max(c.MIN_POINT_PIXELS,o)},_calcPointSize:function e(t,n){this._pointSize=t/n},_getDimAxisSettings:function e(t,n){var o=N(n.trigger);var r=N(n.consume);var i=this.picassoElement.getBoundingClientRect()["vertical"===t.orientation?"height":"width"];var a=S.getAdjustedMaxGlyphCount(L(this.layout||t),t[P][O].qStackedDataPages[0].qData[0].qSubNodes);var s=i/4;return{brush:{trigger:o,consume:r},settings:{labels:{mode:"vertical"===t.orientation?t.dimensionAxis.label:"auto",maxGlyphCount:a,maxLengthPx:s},paddingEnd:4}}},_getBoxMarkerSettings:function e(t,n){var o=t.color.point.auto?_.getStyle(c.CHART_ID,"box","fill"):_.Theme.resolveColor(t.color.box.paletteColor);var r=N(n.trigger);var i=N(n.consume);var a=this;var s="qMeasureInfo/0";var l="qMeasureInfo/0";if(D.hasSecondDimension(t,P)&&t.qUndoExclude.qHyperCube.qDimensionInfo[0].qAttrExprInfo.length){s="qDimensionInfo/0/qAttrExprInfo/0";l="qDimensionInfo/0/qAttrExprInfo/1"}var u={require:["chart"],displayOrder:1e3,settings:{chart:this,box:{fill:o,stroke:_.getStyle(c.CHART_ID,"box","stroke"),strokeWidth:0,width:c.POINT_BANDWIDTH_BASE_RATIO,maxWidthPx:c.MAX_POINT_BASE_SIZE_PX,minWidthPx:c.MIN_POINT_PIXELS+2*c.BOX_PADDING},minor:{scale:"measure"},orientation:t.orientation},beforeRender:function e(){var t=a.layout.presentation&&a.layout.presentation.visibleComponents;var n=t&&-1!==a.layout.presentation.visibleComponents.indexOf("point");var o="horizontal"===a.layout.orientation?this.rect.height:this.rect.width;a._calcBandwidth(o,this.chart);a._calcPointMaxSize(n?a._getPointScale():1,a._bandwidthPx);var r=0;if(a._jitter){a._calcPointSize(a._pointMaxSizePx,a._bandwidthPx);r=a._pointSize*a._bandwidthPx*c.JITTER_PARAMETER}var i=a._pointMaxSizePx+r+2*c.BOX_PADDING;var s=i/a._bandwidthPx;this.settings.settings.box.maxWidthPx=Math.min(a._bandwidthPx-2,i);this.settings.settings.box.width=s},brush:{trigger:r,consume:i},data:{extract:{field:"qDimensionInfo/0",trackBy:function e(){return-1},props:{start:{field:s,reduce:"min"},end:{field:l,reduce:"max"},elemNo:{field:"qDimensionInfo/0"}}}}};if(D.hasSecondDimension(t,P)){u.data.extract.field="qDimensionInfo/0";u.data.extract.trackBy=function(e){return e.qElemNo};u.settings.major={scale:"dimension"}}return u},_getPointMarkerSettings:function e(t,n,o){var r=_.Theme.resolveColor(t.color.point.paletteColor);var i=_.getContrastingTransparent(r);var a=1;t.dataPoint&&false===t.dataPoint.border&&(a=0);var s=N(n.trigger);var l=N(n.consume);if(this.hasOption("tooltips")){s.push(o.point.trigger);l.push.apply(l,o.point.consume)}var u=this;var p={require:["chart"],displayOrder:1100,settings:{chart:this,fill:function e(t){return-3===t.datum.innerElemNo.value||-3===t.datum.elemNo.value?_.Theme.dataColors.othersColor:r},stroke:i,size:.3,strokeWidth:a,sizeLimits:{maxRelExtent:10,maxPx:c.MAX_POINT_BASE_SIZE_PX,minPx:c.MIN_POINT_PIXELS},orientation:t.orientation},beforeRender:function e(){var t="horizontal"===u.layout.orientation?this.rect.height:this.rect.width;u._calcBandwidth(t,this.chart);u._calcPointMaxSize(u._getPointScale(),u._bandwidthPx);u._calcPointSize(u._pointMaxSizePx,u._bandwidthPx);if(u._jitter){var n=2*c.BOX_PADDING/t;u._jitterTool.calcMaxJitter(u._pointSize*u._bandwidthRatio,c.JITTER_PARAMETER,u._bandwidthRatio-n)}this.settings.settings.sizeLimits.maxPx=u._pointMaxSizePx;this.settings.settings.size=u._pointSize},brush:{trigger:s,consume:l},data:{extract:{field:"qDimensionInfo/0",props:{innerElemNo:{field:"qDimensionInfo/0"},elemNo:{field:"qDimensionInfo/0"},inner:{field:"qDimensionInfo/0",value:function e(t){return t}},row:{field:"qDimensionInfo/0",value:function e(t){return t.qRow}},measure:{field:"qMeasureInfo/0",reduce:"first",value:function e(t){return t},reduceLabel:"none"}}}}};if(D.hasSecondDimension(t,P)){p.data.extract.props.inner.field="qDimensionInfo/1";p.data.extract.props.innerElemNo.field="qDimensionInfo/1";p.data.extract.props.row.field="qDimensionInfo/1";p.data.extract.field="qDimensionInfo/1";p.data.extract.props.outer={field:"qDimensionInfo/0",value:function e(t){return t}}}if(!t.color.point.auto&&"byExpression"===t.color.point.mode){var d="qMeasureInfo/0/qAttrExprInfo/0";p.data.extract.props.pointColorNumeric={field:d,reduce:"first",value:function e(t){if("number"===typeof t.qNum)return E.retriveColor(t.qNum,"argb").toRGBA();return E.retriveColor(_.Theme.dataColors.nullColor).toRGBA()}};p.data.extract.props.pointColorString={field:d,reduce:"first",value:function e(t){return t&&t.qText}};p.settings.fill=function(e){if("string"===typeof e.datum.pointColorString.value){var t=E.retriveColor(e.datum.pointColorString.value);if(!t.isInvalid())return t.toRGBA()}return e.datum.pointColorNumeric.value}}this.setDataPaths([P+"/"+O]);if(!t.color.point.auto&&"byDimension"===t.color.point.mode){var f;if(t[P].legendData){var h=D.hasSecondDimension(t,P)?1:0;var m=t[P][O].qDimensionInfo[h].qAttrDimInfo[0];if(!m.qError){f="qDimensionInfo/"+h+"/qAttrDimInfo/0";p.data.extract.props.colorElemNo={field:f};p.data.extract.props.colorByDim={field:f,value:function e(t){return t}};this.chartInstance.brush("select-color").addKeyAlias(P+"/legendData/qDimensionInfo/0",P+"/"+O+"/"+f);this.setDataPaths([P+"/"+O,P+"/legendData"])}}else{var g=this.getColoringMap().getColorDataInfo();if(g.valid&&!g.altMode){f="qDimensionInfo/"+g.dimIndex;p.data.extract.props.colorElemNo={field:f};p.data.extract.props.colorByDim={field:f,value:function e(t){return t}}}}}var v="horizontal"!==t.orientation?"y":"x";var b=function e(t){var n=[t.elemNo.value,t.innerElemNo.value];var o=0;var r=t[v].value;var i=t.row.value;return u.getColoringMap().getColor(n,r,o,i)};p.settings.fill=function(e){return b(e.datum).toRGBA()};p.settings.stroke=function(e){var t=b(e.datum);return _.getContrastingTransparent(t)};return p},_getPointSelectionLayerSettings:function e(t){var n=y.extend(true,{},t,{key:"selection-point-marker",settings:{opacity:0}});n.brush.consume.pop();n.brush.consume.forEach(function(e){e.style.inactive=void 0;e.style.active.opacity=1});n.brush.trigger=[];return n},_getLegendData:function e(t){var n=this.getColoringMap();var o=n.getColorDataInfo();var r;var i;if(o.altMode){r=P+"/legendData";i=0}else{r=P+"/"+O;i=o.dimIndex}return b.getLegendData({colorMap:n,legendData:this.layout[P].legendData&&this.layout[P].legendData.qDataPages[0].qMatrix,selectionSettings:t,dimIndex:i,source:r})},createChartSettings:function e(t){var o="rtl"===this.options.direction;var r=t.presentation&&t.presentation.visibleComponents;var i=r&&-1!==t.presentation.visibleComponents.indexOf("point");var a=r&&-1!==t.presentation.visibleComponents.indexOf("box");this._jitter=i&&t.dataPoint&&"jitter"===t.dataPoint.displacement;var s=t[P][O];var l=s.qDimensionInfo;var u="horizontal"!==t.orientation?"y":"x";var p="horizontal"!==t.orientation?"x":"y";var d=n.create({chartID:c.CHART_ID,layoutMode:this.getLayoutMode(t),isRtl:o});var f={};var h={};var g={};var v={};if(this.hasOption("selections")){var b=!i&&D.hasSecondDimension(t,P);this._selectionHandler.setUpStart();var x=this._selectionHandler.setUpBrush({contexts:["select-inner"],data:["innerElemNo"],isSingleSelect:Y(t,0)},true);var q=this._selectionHandler.setUpBrush({contexts:["select-outer"],data:["elemNo"],isSingleSelect:Y(t,1)},true);var C=this._selectionHandler.setUpBrush({dataPath:P,contexts:["select-color"],data:["colorElemNo"],startOnEmptySelection:false},true);var _=this._selectionHandler.setUpBrush({contexts:["select-measure"],data:[u]},true);this._selectionHandler.setUpDone();f={trigger:y.extend(true,{},q.trigger,{data:[""]}),consume:[y.extend(true,{},q.consume,{data:[""]})]};h={trigger:b?q.trigger:null,consume:[x.consume,q.consume,_.consume]};g={trigger:x.trigger,consume:[x.consume,q.consume,_.consume,C.consume]};v={trigger:[y.extend(true,{},C.trigger,{data:[""]})],consume:[y.extend(true,{},C.consume,{data:[""]}),x.consume,q.consume]}}var S={point:{},box:{}};var E=this;this.hasOption("tooltips")&&(S.point=this._tooltipHandler.setUp({data:D.hasSecondDimension(t,P)?["innerElemNo","elemNo"]:["innerElemNo"],contexts:["pointTip"],componentKey:"point-marker",direction:this.options.direction,chartView:E,attrDimPath:"/"+O+"/qDimensionInfo/"+(D.hasSecondDimension(t,P)?1:0)+"/qAttrDimInfo/0",measureRows:["measure"],labelData:D.hasSecondDimension(t,P)?["inner","outer"]:["inner"]}));var I=U(t);var M=Y(t,0);var A=Y(t,1);var T=G(I,M,A);var w={scrollHandler:this.hasOption("navigation")&&this._scrollHandler,selectionHandler:this.hasOption("selections")&&this._selectionHandler};var H={componentKey:i?"point-marker":"box-marker",lassoBrushKey:"select-inner",dimRangeBrushKey:"select-outer",measureRangeBrushKey:"select-measure",areaBrushKey:null,legendBrushKey:"legend"};this._dependentActions&&this._dependentActions.destroy();this._dependentActions=m.create(w,this.isOn.bind(this),t.orientation,o,H,T);d.addPreset("dimension-measure-chart",{isRtl:o,includeDimensionAxis:D.hasSecondDimension(t,P),orientation:t.orientation,selectionsEnabled:this.hasOption("selections"),measureSource:["qMeasureInfo/0"],dimensionSource:"qDimensionInfo/0",measureAxisProperties:t.measureAxis,measureTitleText:s.qMeasureInfo[0].qFallbackTitle,dimensionAxisProperties:t.dimensionAxis,dimensionAxisSettings:this._getDimAxisSettings(t,f),dimensionTitleText:l&&l[0]&&l[0].qFallbackTitle||"",gridlines:t.gridlines,hasNavigation:this.hasOption("navigation"),isNavigationEnabledFn:this.isOn.bind(this),scrollSettings:this.hasOption("navigation")&&B(t,this._scrollHandler.getScrollViewSizeInItem()),enableLasso:true,lasso:{brushKey:i?"select-inner":"select-outer",brushComponents:i?["point-marker"]:["box-marker"],brushData:i?["innerElemNo"]:["elemNo"]},enableDimRange:true,dimRange:{brushKey:"select-outer",brushAxis:"horizontal"===t.orientation?"y-axis":"x-axis",brushArea:a?"box-marker":"point-marker",brushScale:"dimension"},enableMeasureRange:i,measureRange:{brushKey:"select-measure",brushAxis:"horizontal"===t.orientation?"x-axis":"y-axis",brushArea:i?"point-marker":"box-marker",brushScale:"measure",multiple:true},brushActions:this._dependentActions.gestures,refLines:t.refLine&&t.refLine.refLines});if(a){var V=this._getBoxMarkerSettings(t,h);d.addComponent("box-marker",V)}if(i){var N=this._getPointMarkerSettings(t,g,S);N.data.extract.props[u]={field:"qMeasureInfo/0"};N.settings[u]={scale:"measure"};if(D.hasSecondDimension(t,P)){N.data.extract.props[p]={field:"qDimensionInfo/0",type:"qual"};N.settings[p]={scale:"dimension"}}if(this._jitter){N.settings[p]=N.settings[p]||{};var R=this._jitterTool;N.settings[p].fn=function(e){var t;t="function"===typeof e.scale?e.scale(e.datum[p].value)+.5*e.scale.bandwidth():.5;return t+R.getJitterValue(e.datum.value,c.JITTER_PARAMETER)}}d.addComponent("point-marker",N);d.addComponent("point-marker",this._getPointSelectionLayerSettings(N));var L=t.legend?false!==t.legend.show:!t.color.point.auto&&"byDimension"===t.color.point.mode;L&&this.addLegend(d,t.legend,o,v)}var k=d.getSettings();this.addSnapshotChartSettings(k,t);return k},addLegend:function e(t,n,o,r){var i=this._getLegendData(r);if(i){var a={dock:n?n.dock:"auto",chartWidth:this.picassoElement.clientWidth,chartHeight:this.picassoElement.clientHeight,show:!n||false!==n.show,showTitle:!n||false!==n.showTitle,type:"circle",tableMode:true};var s=t.addComponent(i.type,i.settings,a);var l=s.dock;if(this.hasOption("navigation")&&this.isOn()){var u="top"===l||"bottom"===l;var c=b.getCategoricalLegendPanGesture("legend",u,o);var p=t.getSettings();p.interactions&&p.interactions.length&&p.interactions[0].gestures?p.interactions[0].gestures=p.interactions[0].gestures.concat(c):t.addInteraction({},{gestures:c})}}},resize:function e(t,n){if(!this.layout)return;z.call(this);this._super(t,n)},hasValidData:function e(){var t=this.layout;return t[P]&&t[P][O]&&t[P][O].qStackedDataPages.length&&t[P][O].qStackedDataPages[0].qData.length},paint:function t(n){this.backendApi.isSnapshot||this.options.viewState||this.updateScrollHandlerState(false);this._orientation||(this._orientation=this.layout.orientation);if(this._orientation!==this.layout.orientation){z.call(this);this._orientation=this.layout.orientation}var o=this.layout;if(!this.hasValidData())return e.resolve();var r=this;var i=this._super;return!this.backendApi.isSnapshot&&D.hasSecondDimension(o,P)&&this._scrollHandler.isDataSizeChanged(y.getValue(o,P+"."+O+".qStackedDataPages.0.qData.0.qSubNodes.length"),D.getOuterDimensionSizeOfMax2Dims(o,P))?this._scrollHandler.getViewData().finally(function(){return r._updateColorMapData(o).then(function(){return i.call(r,n)})}):this._updateColorMapData(o).then(function(){return i.call(r,n)})},setSnapshotData:function t(n){this._super(n);var o=e();var r=n.snapshotData.content.chartData;var i=this.getColoringMap().getSnapshotChartData();i.forEach(function(e){r[e.key]=e.data});n[P][O].qStackedDataPages=this.layout[P][O].qStackedDataPages;n[P].legendData=this.layout[P].legendData;u.toBefore(n);o.resolve(n);return o.promise},getViewState:function e(){return{scroll:Math.round(this._scrollHandler.getScrollState())}},getDisclaimerAttributes:function e(t){var n=this.hasOption("navigation")&&B(t,this._scrollHandler.getScrollViewSizeInItem());var o=void 0;!D.hasSecondDimension(t,P)&&t.qHyperCube.qSize.qcy>1e4&&(o=true);return{data:t&&t.qUndoExclude,supportedDisclaimers:{LimitedData:true},options:{paddingBottom:n&&n.viewSize<n.max,supportNegative:true,explicitLimitedData:o}}},_updateColorMapData:function e(t){var n=y.extend({mode:"primary",auto:false},t.color.point);var o={color:y.extend(true,{},n),visualization:t.visualization,qHyperCube:t.qUndoExclude.qHyperCube};D.hasSecondDimension(this.layout,P)&&I.isByNthDimension(o.color)&&(o.color.byDimDef.activeDimensionIndex=1-o.color.byDimDef.activeDimensionIndex);var r=t.qUndoExclude.qHyperCube;var i=M.prepareData(r.qStackedDataPages[0].qData,r.qMeasureInfo,r.qDimensionInfo,t).dimensionTree;this.getColoringMap().setDimensionTree(i);return this.setColorMapData(o,t.visualization)},_createColorLegendCube:function e(t){var n=D.hasSecondDimension(this.layout,P)?1:0;var o=this.layout[P][O].qDimensionInfo[n].qAttrDimInfo[0];return{qDimensionInfo:[o],qMeasureInfo:[],qDataPages:t,qMode:"S",qSize:{qcx:1,qcy:t[0].qMatrix.length}}},_updateColorData:function e(){var t=this;return t._updateColorMapData(this.layout).then(function(){var e=t.getColoringMap().getColorDataInfo();if(e&&e.legendPath){var n="/"+P+e.legendPath;return t.backendApi.getData(e.legendPages,n).then(function(e){t.layout[P].legendData=t._createColorLegendCube(e)})}t.layout[P].legendData=null})},updateDerivedProperties:function e(t,n){var o=this;var r=o.backendApi.model;return o._derivedProperties.addDefaultHyperCubeHash(t.qHyperCubeDef,n.qHyperCube,r.app,V(t)).then(function(e){var i={layout:n,properties:t,model:r,hashData:e,generateDerivedProperties:function e(t,n){return p.generateHyperCube(t,n,r.app)}};return o._derivedProperties.updateDerivedProperties(i)})},updateData:function t(n){var o=this;return o._super(n).then(function(){if(o._destroyed)return e.reject();n=o.layout;o._scrollHandler.setOptions({direction:"horizontal"===n.orientation?"vertical":"horizontal"});if(o.backendApi.isSnapshot){u.toAfter(n);o.getColoringMap().setSnapshotChartData(n.snapshotData.content.chartData);return o._updateColorMapData(n)}o.updateScrollHandlerState(true);if(o.options.viewState){o._scrollHandler.updateViewState(R(n));o._scrollHandler.setScrollState(o.options.viewState.scroll)}else{o._scrollHandler.resetScroll();j.call(o)}if(o._scrollHandler.getScrollViewSizeInItem()&&!o._cacheSizeInitialized){k.call(o);o._cacheSizeInitialized=true}var t;t=D.hasSecondDimension(n,P)?o.getSlicedData(o._scrollHandler.getScrollState(),o._scrollHandler.getScrollViewSizeInItem()):o.getData(o.backendApi,n[P][O],{height:n[P][O].qSize.qcy});return t.then(function(){if(o._destroyed)return e.reject();return o._updateColorData()})})},isLassoDisabled:function e(){var t=this.$scope.layout;var n=!!(t.qHyperCube.qDimensionInfo&&t.qHyperCube.qDimensionInfo.length>1&&Y(t,0));return n}});return{type:"distributionPlot",BackendApi:H,template:x,View:K,definition:r,softDefinition:s,initialProperties:{sorting:{autoSort:true},qHyperCubeDef:{qDimensions:[],qMeasures:[],qMode:"K",qAlwaysFullyExpanded:true,qSuppressZero:false,qSuppressMissing:true},dataPoint:{bubbleScales:100}},options:{usingDerivedProperties:true,colorByPath:"color.point"},support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:true,viewData:true},data:a,importProperties:function e(t,n,o){var r=C.axisChart.importProperties.call(C,t,n,o),i=r.qProperty;3===i[w].qInterColumnSortOrder.length&&(i[w].qInterColumnSortOrder=[1,2,0]);l.importColors(i);return r},exportProperties:function e(t){l.exportColors(t.qProperty);return C.axisChart.exportProperties.call(C,t)},onSoftPropertyChange:function e(t,n){i.onGlobalChangeColors(n)},getCreatePropertyHandler:function e(t){var n=this.mappedDefinition,o=this.globalChangeListeners,r,i;this.dimensionDefinition&&(r=q.mapProperties(n.items.data.items.innerData.items.dimensions));this.measureDefinition&&(i=q.mapProperties(n.items.data.items.innerData.items.measures));return new d({app:t,dimensionDefinition:this.dimensionDefinition,measureDefinition:this.measureDefinition,dimensionProperties:r,measureProperties:i,globalChangeListeners:o})}}}.apply(t,o),void 0!==r&&(e.exports=r))},1239:function(e,t,n){"use strict";var o,r;!(o=[n(454)],r=function(e){var t=e.extend({addShape:function e(t,n,o,r){this._super(t,n,o);if(void 0!==r){this._shapeMeasures||(this._shapeMeasures=[]);this._shapeMeasures.push(r)}},getMeasuresIndecies:function e(t){if(this._shapeMeasures&&void 0!==this._shapeMeasures[this._shapes.indexOf(t)]){var n=this._shapeMeasures[this._shapes.indexOf(t)];return void 0!==n?[n]:[]}return this._super()}});return t}.apply(t,o),void 0!==r&&(e.exports=r))},1258:function(e,t,n){"use strict";var o,r;!(o=[],r=function(){var e={DATA_PATH:"qUndoExclude",HYPERCUBE_DEF_PATH:"qHyperCubeDef",HYPERCUBE_PATH:"qHyperCube",CHART_ID:"distributionPlot",AUTO_SORT:"sorting.autoSort",SORT_CRITERIA:"sorting.sortCriteria",SORTING_ELEMENT_ID:"sorting.elementId",SORTING_ELEMENT_MIN_ID:"distplot-exp-min",SORTING_ELEMENT_MAX_ID:"distplot-exp-max",SORTING_EXPRESSION:"sorting.expression",MAX_GLYPH_COUNT:20,MAX_STACKED_VALUES:3e3,HORIZONTAL:"horizontal",BOX_PADDING:2,POINT_BANDWIDTH_BASE_RATIO:.35,MAX_POINT_BASE_SIZE_PX:34,MIN_POINT_PIXELS:5,JITTER_PARAMETER:3};Object.freeze(e);return e}.apply(t,o),void 0!==r&&(e.exports=r))},1259:function(e,t,n){"use strict";var o,r;!(o=[n(90),n(1319),n(89)],r=function(e,t,n){var o={generateHyperCubeDef:r,getAllHyperCubeExpressions:i};function r(n,o,r,i,a){return u(n.dimensions.concat(n.measures),o,r,i).then(function(r){var i=e.extend({},r,a);var s=e.extend(true,{},o);s.qDimensions=[];s.qMeasures=[];n.dimensions.forEach(function(e){s.qDimensions.push({qDef:{qFieldDefs:["="+t.generateExpression(e,i)]}})});n.measures.forEach(function(e){s.qMeasures.push({qDef:{qDef:t.generateExpression(e,i)}})});return s})}function i(e,t,o){var r=e.qDimensions.map(function(e,n){return a(e,o,n,t)});var i=e.qMeasures.map(function(e){return s(e,o)});return n.all({dimensions:n.all(r),measures:n.all(i)})}function a(e,t,o,r){if(e.qLibraryId)return l(e.qLibraryId,"dimension",t,o,r);var i=r.qDimensionInfo[o].qGroupPos;return n.resolve(e.qDef.qFieldDefs[i])}function s(e,t){if(e.qLibraryId)return l(e.qLibraryId,"measure",t);return n.resolve(e.qDef.qDef)}function l(e,t,n,o,r){if(!n){console.warn("No app provided, returning library id");return e}var i="dimension"===t?"getDimension":"getMeasure";return n[i](e).then(function(e){return e.getProperties().then(function(e){return"dimension"===t?e.qDim.qFieldDefs[r.qDimensionInfo[o].qGroupPos]:e.qMeasure.qDef})})}function u(e,t,o,r){var i={};var l;var u;var d=[];e.forEach(function(e){l=p(e.match(c("Dim")));l.forEach(function(e){d.push(a(t.qDimensions[e],r,e,o).then(function(t){i["Dim["+e+"]"]={value:t,wrap:true}}))});u=p(e.match(c("Mea")));u.forEach(function(e){d.push(s(t.qMeasures[e],r).then(function(t){i["Mea["+e+"]"]={value:t}}))})});var f;f=d.length?n.all(d).then(function(){return n.resolve(i)}):n.resolve(i);return f}function c(e){return new RegExp("\\{\\{"+e+"\\[\\d\\]\\}\\}","g")}function p(e){if(!e)return[];return e.map(function(e){return e.substr(6,1)})}return o}.apply(t,o),void 0!==r&&(e.exports=r))},1302:function(e,t,n){"use strict";var o,r;!(o=[n(92)],r=function(e){var t;t=e.extend("Node",{init:function e(){this._parent=null;this._children=[];this._ancestors=null;this.data={}},detach:function e(){this._parent&&this._parent.removeChild(this);return this},each:function e(t,n){if("function"!==typeof t||!this._children||!this._children.length)return this;var o,r=this._children.length;for(o=0;o<r;o++){t.call(n,this._children[o],o);this._children[o].isBranch&&this._children[o].each(t,n)}return this}});Object.defineProperties(t.prototype,{parent:{get:function e(){return this._parent}},isBranch:{get:function e(){return this._children&&this._children.length}},children:{get:function e(){return this._children}},siblings:{get:function e(){if(!this._parent)return[];var t=this._parent._children.slice();t.splice(t.indexOf(this),1);return t}},ancestors:{get:function e(){if(!this._ancestors){var t=this._parent;this._ancestors=t?[t].concat(t.ancestors):[]}return this._ancestors}},descendants:{get:function e(){var t=[],n,o,r;for(n=0,o=this._children.length;n<o;n++){r=this._children[n];t.push(r);r._children.length&&(t=t.concat(r.descendants))}return t}},leaves:{get:function e(){var t=[],n,o,r=this._children.length;for(o=0;o<r;o++){n=this._children[o];n._children&&n._children.length?t=t.concat(n.leaves):t.push(n)}return t}}});return t}.apply(t,o),void 0!==r&&(e.exports=r))},1318:function(e,t,n){"use strict";var o,r;!(o=[n(91),n(1258),n(1250)],r=function(e,t,n){var o={getElementIds:r,getElements:i,getFractileExpression:a};return o;function r(){return[t.SORTING_ELEMENT_MIN_ID,t.SORTING_ELEMENT_MAX_ID]}function i(n,o,r){var i=o[0],s=o[1],l=n[0];var u=a(0,i,s,l),c=a(1,i,s,l);return[{id:t.SORTING_ELEMENT_MIN_ID,label:e.get("properties.distributionPlot.min"),exp:u,isDefault:t.SORTING_ELEMENT_MIN_ID===r.ELEMENT},{id:t.SORTING_ELEMENT_MAX_ID,label:e.get("properties.distributionPlot.max"),exp:c,isDefault:t.SORTING_ELEMENT_MAX_ID===r.ELEMENT}]}function a(e,t,o,r){var i="total {{<outerDimString>}} Aggr( {{innerMeasureString}}, {{outerDimString,}} {{innerDimString}} )";var a="Fractile";0===e?a="Min":1===e&&(a="Max");var s=t?n.wrapExpression(t):"";var l=o?n.wrapExpression(o):"";var u=a+"( "+i+", "+e+" )";var c=u.replace(/{{innerDimString}}/g,s).replace(/{{outerDimString}}/g,l).replace(/{{<outerDimString>}}/g,o?"<"+l+">":"").replace(/{{outerDimString,}}/g,o?l+",":"").replace(/{{innerMeasureString}}/g,(r||"").replace(/^=/,""));return c}}.apply(t,o),void 0!==r&&(e.exports=r))},1319:function(e,t,n){"use strict";var o,r;!(o=[n(1250),n(1568)],r=function(e,t){var n={generateExpression:o};function o(n,o){var i={};var a;var s;if(o)for(var l in o){var u=o[l];a=u.wrap?e.wrapExpression(u.value):u.value;i[l]=a;var c=u.variations||[];c.forEach(function(e){s=r(e,a,l);i[e]=s})}return t.replaceExpressionTokens(n,i)}function r(e,n,o){if(""===n)return"";var r=t.createRegExp(o,true,true);var i=e.split(r);var a="";i.forEach(function(e){a+=e!==o?e:n});return a}return n}.apply(t,o),void 0!==r&&(e.exports=r))},1497:function(e,t,n){"use strict";var o,r;!(o=[n(1168),n(1239),n(90)],r=function(e,t,n){var o,r,i,a,s;function l(e,t){var n=e?u(e):null;if(n){var o=n.getDimensions();if(o.length)return t.qText+","+o.join(",")}return t.qText}function u(e){return"P"===e.data.qType&&e.parent?e.parent.cacheItem:e.cacheItem}function c(e,t){return e.labelExpRef?n.getValue(t,e.labelExpRef):e.label}function p(t,n,s,l){var u=new e,c=[],p,f=[];if(t&&t.length){o=0;r=n&&n.length<2;i=n;a=s;u.data.qApprMaxGlyphCount=a[0]?a[0].qApprMaxGlyphCount:0;p=d(l,t[0].qSubNodes,u,c,f,0);return{dimensionTree:p,cacheItems:c}}return{dimensionTree:u,cacheItems:[]}}function d(n,p,f,h,m,g){var v,b,y,D,x,q;m[o]||(m[o]={});for(y=0;y<p.length;y++){var C=[];if("T"===p[y].qType)continue;v=new e;v.data.qType=p[y].qType;v.data.qMaxPos=p[y].qMaxPos;v.data.qMinNeg=p[y].qMinNeg;"P"===p[y].qType&&(s=p[y]);if("V"===p[y].qType||"E"===p[y].qType||"P"===p[y].qType){v.data.qText=p[y].qText;v.data.qNum=Number.isNaN(+p[y].qValue)?p[y].qNum:p[y].qValue;v.data.qValue=p[y].qValue;v.data.rowIndex=0;if(r){b=new e;b.data.qType="_M";b.data.qMaxPos=v.data.qMaxPos;b.data.qMinNeg=v.data.qMinNeg;b.data.qText=i[0].qFallbackTitle;b.data.rowIndex=p[y].qRow;b.addChild(v);v=b}else v.data.rowIndex=p[y].qRow}else{v.data.qText="O"===p[y].qType&&a[g]?a[g].othersLabel||"":p[y].qText;a[g+1]&&(v.data.qApprMaxGlyphCount=a[g+1].qApprMaxGlyphCount);v.data.qElemNo=p[y].qElemNo;v.data.rowIndex=p[y].qRow}f.addChild(v);if("V"!==p[y].qType&&"P"!==p[y].qType){var _=l(f,p[y]);if(m[o][_]&&s){x=m[o][_];v.cacheItem=x}else{x=new t(null,null,null,null,p[y].qRow,o);v.cacheItem=x;x.addDimension(v.data.qText);x.id=p[y].qElemNo;if("U"!==p[y].qType){p[y].qAttrDims&&p[y].qAttrDims.qValues.forEach(function(e,t){x.addAttributeDimension(e.qElemNo,e.qText,c(a[g].qAttrDimInfo[t],n))});p[y].qAttrExps&&p[y].qAttrExps.qValues.forEach(function(e,t){C.push({value:e.qNum,label:c(a[g].qAttrExprInfo[t],n)})})}var S=u(f);if(S){x=v.cacheItem;x.parent=S;S.children.push(x);q=x.parent.getDimensions();for(D in q)x.addDimension(q[D])}m[o][_]=x}}if("V"===p[y].qType){x=u(f);if(x){x.addMeasure(s?s.qText:v.data.qText,p[y].qValue,p[y].qText);h.contains(x)||h.push(x)}}if(p[y].qSubNodes&&p[y].qSubNodes.length>0){o++;v=d(n,p[y].qSubNodes,v,h,m,g+("V"!==p[y].qType?1:0))}C.forEach(function(e){x.addMeasure(e.label,e.value)})}--o;return f}return{prepareData:p}}.apply(t,o),void 0!==r&&(e.exports=r))},1566:function(e,t,n){"use strict";var o,r;!(o=[n(101),n(483)],r=function(e,t){return{measuresHasBaseColors:c,dimensionsHasBaseColors:p,onGlobalChangeColors:d,isColorByDimension:s,isColorByMeasure:l,isColorAuto:i,isColorByExpression:u,isColorBySingle:a,isDimensionLibraryItem:o,isMeasureLibraryItem:r,showLegend:f,showColorByLabel:h};function n(e){if(!e)return false;if(e.coloring&&e.coloring.baseColor&&e.coloring.baseColor.color)return e.coloring.baseColor;if(e.baseColor&&e.baseColor.color)return e.baseColor;return false}function o(t){return"libraryItem"===e.getValue(t,"color.point.byDimDef.type")}function r(t){return"libraryItem"===e.getValue(t,"color.point.byMeasureDef.type")}function i(t){return true===e.getValue(t,"color.point.auto")}function a(t){return!i(t)&&"primary"===e.getValue(t,"color.point.mode","primary")}function s(t){return!i(t)&&"byDimension"===e.getValue(t,"color.point.mode")}function l(t){return!i(t)&&"byMeasure"===e.getValue(t,"color.point.mode")}function u(t){return!i(t)&&"byExpression"===e.getValue(t,"color.point.mode")}function c(t){return e.getValue(t,"layout.qHyperCube.qMeasureInfo",[]).filter(function(e){return!!n(e)}).length>0}function p(t){return e.getValue(t,"layout.qHyperCube.qDimensionInfo",[]).filter(function(e){return!!n(e)}).length>0}function d(e){t.updateColorDef(e,"qHyperCubeDef.",e.color.point)}function f(t){var n=e.getValue(t,"color.point.mode","primary");return"primary"!==n&&"byExpression"!==n&&false===i(t)}function h(t){var n=s(t)&&false===o(t),i=l(t)&&false===r(t),a=e.getValue(t,"color.point.byDimDef.activeDimensionIndex")>-1;return n&&!a||i}}.apply(t,o),void 0!==r&&(e.exports=r))},1567:function(e,t,n){"use strict";var o,r;!(o=[n(90),n(2122)],r=function(e,t){var n={getSettings:o};return n;function o(n){var o=e.getValue(n,"qHyperCube.qDimensionInfo.1.qCardinal",1);if(o>10)return t.DIST_MAX;return t.ASCII}}.apply(t,o),void 0!==r&&(e.exports=r))},1568:function(e,t,n){"use strict";var o,r;!(o=[],r=function(){var e={replaceExpressionTokens:t,createRegExp:n};function t(e,t,o){var r={start:o&&o.start||"{{",end:o&&o.end||"}}"},i=e,a,s;for(var l in t){a=t[l];s=r.start+l+r.end;i=i.replace(n(s,true),a)}return i}function n(e,t,n){var r=o(e);var i=n?"("+r+")":r;return t?new RegExp(i,"g"):new RegExp(i)}function o(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}return e}.apply(t,o),void 0!==r&&(e.exports=r))},1569:function(e,t,n){"use strict";var o,r;!(o=[n(91)],r=function(e){function t(e,t){2===t.qHyperCubeDef.qInterColumnSortOrder.length?t.qHyperCubeDef.qInterColumnSortOrder=[1,0]:3===t.qHyperCubeDef.qInterColumnSortOrder.length&&(t.qHyperCubeDef.qInterColumnSortOrder=[1,2,0])}function n(e,t){var n=t.getDimensions();n.length>1&&e.color&&(e.color.point.persistent=true)}var o={measures:{min:1,max:1,description:function t(n){var o="horizontal"===n.orientation?"properties.xAxis":"properties.yAxis";return e.get(o)},add:function e(){},move:function e(){},remove:function e(){}},dimensions:{min:1,max:2,description:function t(n,o){var r;r=0===o?"Visualizations.Descriptions.Point":"horizontal"===n.orientation?"properties.yAxis":"properties.xAxis";return e.get(r)},add:function e(o,r,i){t(o,r);n(r,i)},move:function e(o,r,i){t(o,r);n(r,i)},remove:function e(o,r,i){t(o,r);n(r,i)}}};return o}.apply(t,o),void 0!==r&&(e.exports=r))},1750:function(e,t,n){"use strict";var o,r;!(o=[n(101),n(1258)],r=function(e,t){var n={hasMultipleDimensions:o,getOuterDimensionCardinality:r,isAutoSort:i,isSortByExpression:a,isSortByNumeric:s,isSortByAscii:l};function o(e){var t=e.qHyperCubeDef&&e.qHyperCubeDef.qDimensions.length>1||e.qHyperCube&&e.qHyperCube.qDimensionInfo&&e.qHyperCube.qDimensionInfo.length>1;return t}function r(n){var r=e.getValue(n,t.HYPERCUBE_PATH);if(!o(n))return 1;return r&&r.qDimensionInfo[1].qCardinal}function i(n){return e.getValue(n,t.AUTO_SORT,false)}function a(n){return 0!==e.getValue(n,t.SORT_CRITERIA+".sortByExpression",0)}function s(n){return 0!==e.getValue(n,t.SORT_CRITERIA+".sortByNumeric",0)}function l(n){return 0!==e.getValue(n,t.SORT_CRITERIA+".sortByAscii",0)}return n}.apply(t,o),void 0!==r&&(e.exports=r))},1751:function(e,t,n){"use strict";var o,r;!(o=[n(1567),n(1318),n(1745),n(1746),n(1259)],r=function(e,t,n,o,r){var i={applySorting:a};return i;function a(e,t,n,o){l(e);if(o)return s(e,t,o);return r.getAllHyperCubeExpressions(e.qHyperCubeDef,t.qHyperCube,n).then(function(n){s(e,t,n)})}function s(r,i,a){if(!r.qUndoExclude)return;r.sorting||(r.sorting={autoSort:true});var s=r.qUndoExclude.qHyperCubeDef.qDimensions;s.length>=2?r.qUndoExclude.qHyperCubeDef.qInterColumnSortOrder=[0,2,1]:r.qUndoExclude.qHyperCubeDef.qInterColumnSortOrder=[1,0];var l=function t(){return e.getSettings(i)};var u=function e(){var n=l();return t.getElements(a.measures,a.dimensions,n)};var c=n.create(l,u),p=s[0],d=r.sorting;o.applySorting(c,p,d)}function l(e){var t=e.qHyperCubeDef;t?t.qDimensions?t.qMeasures?(!t.qDimensions.length||t.qDimensions.length<2)&&u("'qHyperCubeDef.qDimensions' has no outer dimension"):u("no 'qHyperCubeDef.qMeasures' in properties arg"):u("no 'qHyperCubeDef.qDimensions' in properties arg"):u("no 'qHyperCubeDef' in properties arg")}function u(e){throw new Error("distributionplot-sorter.applySorting: "+e)}}.apply(t,o),void 0!==r&&(e.exports=r))},2121:function(e,t,n){"use strict";var o,r;!(o=[n(201),n(101),n(1248),n(1750),n(1566),n(185),n(1751),n(1567),n(1318),n(2123),n(1258),n(1259),n(216)],r=function(e,t,n,o,r,i,a,s,l,u,c,p,d){var f=i.getLogicFor("hard","distributionplot");function h(e){return!t.getValue(e,"color.point.auto")&&"byDimension"===t.getValue(e,"color.point.mode")&&d.getNumMeasures(e)<=1}var m={translation:"properties.colors",type:"items",items:{colors:{type:"items",items:{pointColor:{type:"items",translation:"properties.colorsAndLegend",grouped:true,items:{colors:{type:"items",items:{autoColor:{ref:"color.point.auto",type:"boolean",translation:"properties.colors",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},colorMode:{ref:"color.point.mode",type:"string",component:"dropdown",options:function e(){return[{value:"primary",translation:"properties.colorMode.primary"},{value:"byExpression",translation:"properties.colorMode.byExpression"}]},defaultValue:"primary",show:function e(n){return!t.getValue(n,"color.point.auto",true)}},boxColor:{ref:"color.box.paletteColor",translation:"properties.distributionPlot.boxColor",type:"object",component:"color-picker",dualOutput:true,defaultValue:function t(){var n=e.getStyle(c.CHART_ID,"box","fill");var o=e.Theme.currentPalette.indexOf(n);return{index:o,color:n}}},paletteColor:{ref:"color.point.paletteColor",translation:"properties.distributionPlot.pointColor",type:"object",component:"color-picker",dualOutput:true,show:function e(n){return!t.getValue(n,"color.point.auto",true)&&"primary"===t.getValue(n,"color.point.mode","primary")},defaultValue:function t(){var n=e.Theme.dataColors.primaryColor;var o=e.Theme.currentPalette.indexOf(n);return{index:o,color:n}}},attributeExpression:{type:"string",component:"expression",expressionType:"measure",schemaIgnore:true,ref:"color.point.expression.qValueExpression.qExpr",translation:"Common.Expression",show:function e(n){return!t.getValue(n,"color.point.auto")&&"byExpression"===t.getValue(n,"color.point.mode")}},expressionIsColor:{ref:"color.point.expressionIsColor",translation:"properties.expressionIsColor",type:"boolean",defaultValue:true,show:false}}}}}}}}};var g={type:"items",translation:"properties.presentation",items:{orientation:{ref:"orientation",type:"string",component:"item-selection-list",defaultValue:"horizontal",horizontal:true,items:[{component:"icon-item",icon:"direction_up_down",labelPlacement:"bottom",translation:"properties.orientation.vertical",value:"vertical"},{icon:"direction_left_right",component:"icon-item",labelPlacement:"bottom",translation:"Common.Horizontal",value:"horizontal"}]},showDistBackground:{ref:"presentation.visibleComponents",translation:"properties.show",type:"string",component:"dropdown",defaultValue:"points_box",options:[{value:"points_box",translation:"properties.distributionPlot.pointsAndBox"},{value:"points",translation:"properties.distributionPlot.pointsOnly"},{value:"box",translation:"properties.distributionPlot.boxOnly"}]},gridLines:{type:"items",snapshot:{tid:"property-gridLines"},items:{showGridLines:{ref:"gridlines.auto",type:"boolean",translation:"properties.gridLine.spacing",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},gridSpacing:{ref:"gridlines.spacing",type:"number",component:"dropdown",defaultValue:2,options:[{value:0,translation:"properties.gridLine.noLines"},{value:2,translation:"properties.gridLine.medium"},{value:3,translation:"properties.gridLine.narrow"}],show:function e(t){return t.gridlines&&!t.gridlines.auto}}}}}};g.items.bubbleScaleItems={type:"items",items:{bubbleScales:{type:"integer",component:"slider",ref:"dataPoint.bubbleScales",translation:"properties.dataPoints.bubbleSizes",min:20,max:100,step:5,defaultValue:100,show:function e(t){return t.qHyperCubeDef.qMeasures.length<2&&"box"!==t.presentation.visibleComponents}}}};g.items.jitter={type:"string",component:"switch",ref:"dataPoint.displacement",translation:"properties.distributionPlot.jitter",defaultValue:"none",options:[{value:"none",translation:"properties.off"},{value:"jitter",translation:"properties.on"}],show:function e(t){return"box"!==t.presentation.visibleComponents}};var v={uses:"axis.picasso.measureAxis"};var b={uses:"axis.picasso.dimensionAxis",show:function e(n,o,r){var i=t.getValue(r.layout,c.HYPERCUBE_PATH+".qDimensionInfo.length")>1;return i}};var y;function D(e,n){var o=t.getValue(e,n,void 0);if(!o||"undefined"===typeof o.label)return;"="===o.label.charAt(0)?e.color.point.altLabel={qStringExpression:{qExpr:o.label.substr(1)}}:e.color.point.altLabel=o.label}y={uses:"colorsAndLegend",items:{colors:{globalChange:r.onGlobalChangeColors,items:{autoColor:{ref:"color.point.auto",undefinedValue:false},colorMode:{ref:"color.point.mode",options:f.color.colorMode.options,show:function e(t){return!r.isColorAuto(t)},globalChange:function e(){}},colorByDimension:{ref:"color.point.byDimDef",show:function e(t){var n=r.isColorByDimension(t);return n},change:function e(t){D(t,"color.point.byDimDef")}},colorByMeasure:{ref:"color.point.byMeasureDef",show:function e(t){return r.isColorByMeasure(t)},change:function e(t){D(t,"color.point.byMeasureDef")}},colorByLabel:{ref:"color.point.altLabel",show:r.showColorByLabel,change:function e(n){var o=t.getValue(n,"color.point.mode"),r=t.getValue(n,"color.point.altLabel",""),i;switch(o){case"byMeasure":i=n.color.point.byMeasureDef;break;case"byDimension":i=n.color.point.byDimDef;break}if(!i)return;i.label=r.qStringExpression?"="+r.qStringExpression.qExpr:r}},baseColors:{type:"items",items:{useBaseColor:{ref:"color.point.useBaseColors",show:function e(n,o){var i=t.getValue(n,"color.point.mode","primary");return!r.isColorAuto(n)&&"primary"===i&&(r.measuresHasBaseColors(o)||r.dimensionsHasBaseColors(o))},options:function e(t,n){var o=[{value:"off",translation:"Common.None"}];f.color.baseColor.hasMeasureColor(n)&&o.push({value:"measure",translation:"Common.Measure"});f.color.baseColor.hasDimensionColor(n)&&"byMultiple"!==t.color.mode&&o.push({value:"dimension",translation:"Common.Dimension"});return o}},measureColor:{translation:"properties.libraryColors",component:"measure-color",show:function e(n,o){return!t.getValue(n,"color.point.auto")&&"byMultiple"===t.getValue(n,"color.point.mode")&&"measure"===t.getValue(n,"color.point.useBaseColors")&&o.layout.qHyperCube.qMeasureInfo.length>1&&r.measuresHasBaseColors(o)}}}},paletteColor:{ref:"color.point.paletteColor",translation:"properties.distributionPlot.pointColor",show:function e(n,o){var i="measure"===t.getValue(n,"color.point.useBaseColors")&&r.measuresHasBaseColors(o);var a="dimension"===t.getValue(n,"color.point.useBaseColors")&&r.dimensionsHasBaseColors(o);return r.isColorBySingle(n)&&!i&&!a}},useDimColVal:{ref:"color.point.useDimColVal",show:function e(t){return r.isColorByDimension(t)&&r.isDimensionLibraryItem(t)}},useMeasureGradient:{ref:"color.point.useMeasureGradient",translation:"properties.libraryColors",type:"boolean",component:"switch",schemaIgnore:true,defaultValue:false,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],show:function e(n){var o=t.getValue(n,"color.point.auto"),r=t.getValue(n,"color.point.mode");return!o&&"byMeasure"===r&&"libraryItem"===t.getValue(n,"color.point.byMeasureDef.type")}},persistentColors:{ref:"color.point.persistent",show:function e(n){if(!t.getValue(n,"color.point.auto")&&"byDimension"===t.getValue(n,"color.point.mode")&&"libraryItem"===t.getValue(n,"color.point.byDimDef.type"))return h(n)&&!t.getValue(n,"color.point.useDimColVal");return h(n)}},colorSchemeMeasure:{ref:"color.point.measureScheme",show:function e(t){return!r.isColorAuto(t)&&r.isColorByMeasure(t)}},reverseScheme:{ref:"color.point.reverseScheme",change:function e(t){t.color.reverseScheme=t.color.point.reverseScheme},show:function e(t){return!r.isColorAuto(t)&&r.isColorByMeasure(t)}},colorSchemeDimension:{ref:"color.point.dimensionScheme",show:function e(n){var e=r.isColorByDimension(n)&&(!r.isDimensionLibraryItem(n)||!t.getValue(n,"color.point.useDimColVal"));return e}},customRange:{show:function e(t){return!r.isColorAuto(t)},items:{autoMinMax:{ref:"color.point.autoMinMax",show:function e(t){return r.isColorByMeasure(t)}},min:{ref:"color.point.measureMin",show:function e(n){return r.isColorByMeasure(n)&&false===t.getValue(n,"color.point.autoMinMax")},invalid:function e(n){if("minMax"===t.getValue(n,"color.point.minMax"))return t.getValue(n,"color.point.measureMin")>=t.getValue(n,"color.point.measureMax");return false}},max:{ref:"color.point.measureMax",show:function e(n){return r.isColorByMeasure(n)&&false===t.getValue(n,"color.point.autoMinMax")},invalid:function e(n){if("minMax"===t.getValue(n,"color.point.minMax"))return t.getValue(n,"color.point.measureMin")>=t.getValue(n,"color.point.measureMax");return false}}}},attributeExpression:{ref:"color.point.expression.qValueExpression.qExpr",show:function e(t){return r.isColorByExpression(t)}},expressionIsColor:{ref:"color.point.expressionIsColor",show:false},boxColor:{ref:"color.box.paletteColor",translation:"properties.distributionPlot.boxColor",type:"object",component:"color-picker",dualOutput:true,defaultValue:function t(){var n=e.getStyle(c.CHART_ID,"box","fill");var o=e.Theme.currentPalette.indexOf(n);return{index:o,color:n}},show:function e(n){return!t.getValue(n,"color.point.auto",true)}}}},legend:{show:r.showLegend,type:"items",items:{show:{snapshot:{tid:"property-legend"}},dock:{show:function e(n){var e=r.showLegend(n)&&t.getValue(n,"legend.show",true);return e}},showTitle:{show:function e(n){var e=r.showLegend(n)&&t.getValue(n,"legend.show",true);return e}}}}}};var x={uses:"settings",items:{presentation:g,colors:y||m,measureAxis:v,dimensionAxis:b}};var q={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{calcCond:{uses:"calcCond"}}},refLines:{uses:"reflines"}}};var C=n.expression(c.SORT_CRITERIA+".sortByExpression");var _={type:"items",items:{toggled:C.items.toggled,sortByElement:{component:"sort-by-element",expressionRef:c.SORTING_EXPRESSION,elementRef:c.SORTING_ELEMENT_ID,show:o.isSortByExpression,elements:function e(t){return p.getAllHyperCubeExpressions(t.properties.qHyperCubeDef,t.layout.qHyperCube,t.model.app).then(function(e){var n=s.getSettings(t.layout);return l.getElements(e.measures,e.dimensions,n)})}},order:C.items.order}};var S={type:"items",translation:"properties.sorting",schemaIgnore:true,grouped:false,globalChange:function e(t,n,o){o&&u.updateSortOrder(t,o.prevProperties)},items:{autoSort:{ref:c.AUTO_SORT,type:"boolean",translation:"properties.sorting",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],show:o.hasMultipleDimensions,change:function e(t,n,r,i){if(r&&o.hasMultipleDimensions(r)&&i.layout)return a.applySorting(r,i.layout,i.model.app)}},sortingItems:{type:"items",grouped:true,show:function e(t){return o.hasMultipleDimensions(t)&&!o.isAutoSort(t)},items:{expression:_,numeric:n.numeric(c.SORT_CRITERIA+".sortByNumeric"),ascii:n.ascii(c.SORT_CRITERIA+".sortByAscii"),defaultSortMessage:{component:"text",translation:"properties.sorting.defaultSortingMessage",show:function e(t){return!o.isSortByExpression(t)&&!o.isSortByNumeric(t)&&!o.isSortByAscii(t)}}}},noData:{component:"no-data",show:function e(t){return!o.hasMultipleDimensions(t)}}}};var E={uses:"dimensions"};var I={uses:"measures"};var M={uses:"data",grouped:true,items:{dimensions:E,measures:I}};var A={uses:A,translation:"Common.Data",type:"items",items:{innerData:M}};return{type:"items",component:"accordion",items:{data:A,sorting:S,addons:q,settings:x}}}.apply(t,o),void 0!==r&&(e.exports=r))},2122:function(e,t,n){"use strict";var o,r;!(o=[n(90),n(1743)],r=function(e,t){var n=e.extend(true,{DIST_MAX:{ELEMENT:"distplot-exp-max",SORT_BY_EXPRESSION:-1,SORT_BY_ASCII:1,SORT_BY_NUMERIC:1,SORT_BY_LOAD_ORDER:1}},t);return n}.apply(t,o),void 0!==r&&(e.exports=r))},2123:function(e,t,n){"use strict";var o,r;!(o=[n(101),n(1258)],r=function(e,t){var n=t.SORT_CRITERIA+".sortByExpression";var o={updateSortOrder:r};return o;function r(o,r){if(!r)return;var i=e.getValue(o,n),a=-1===i||1===i;if(!a)return;var s=e.getValue(o,t.SORTING_ELEMENT_ID),l=e.getValue(r,t.SORTING_ELEMENT_ID);var u=!!l;var c=s===t.SORTING_ELEMENT_MIN_ID,p=s===t.SORTING_ELEMENT_MAX_ID;var d=l===t.SORTING_ELEMENT_MIN_ID,f=l===t.SORTING_ELEMENT_MAX_ID;var h=c&&f,m=p&&(!u||d);var g=e.getValue(r,n),v=-1===g||1===g;var b=1===i;var y=p&&!v&&b;h?e.setValue(o,n,1):(m||y)&&e.setValue(o,n,-1)}}.apply(t,o),void 0!==r&&(e.exports=r))},2124:function(e,t,n){"use strict";var o,r;!(o=[n(1748),n(1567),n(1318),n(185),n(90),n(1566)],r=function(e,t,n,o,r,i){var a=o.getLogicFor("explore","distributionplot");var s=e.buildDefinition("qHyperCubeDef","sorting","qUndoExclude.qHyperCubeDef.qDimensions.0",t.getSettings,n.getElementIds);var l={type:"items",component:"accordion",items:{data:{uses:"data"},sorting:s,presentation:{uses:"presentation",items:{orientation:{ref:"orientation",type:"string",component:"item-selection-list",horizontal:true,items:[{component:"icon-item",icon:"direction_up_down",labelPlacement:"bottom",translation:"properties.orientation.vertical",value:"vertical"},{icon:"direction_left_right",component:"icon-item",labelPlacement:"bottom",translation:"Common.Horizontal",value:"horizontal"}]},bubbleScales:{type:"integer",component:"slider",ref:"dataPoint.bubbleScales",translation:"properties.dataPoints.bubbleSizes",min:20,max:100,step:5,defaultValue:100,show:function e(t){return t.qHyperCubeDef.qMeasures.length<2&&"box"!==t.presentation.visibleComponents}},jitter:{type:"string",component:"switch",ref:"dataPoint.displacement",translation:"properties.distributionPlot.jitter",defaultValue:"none",options:[{value:"none",translation:"properties.off"},{value:"jitter",translation:"properties.on"}],show:function e(t){return"box"!==t.presentation.visibleComponents}}}}}};var u={items:{color:{uses:"color",items:{mode:{options:a.color.colorMode.options,diffs:["color.point.mode","color.point.auto"],setPropertyValue:function e(t,n){if("auto"===n)t.color.point.auto=true;else{t.color.point.auto=false;t.color.point.mode=n}},getValue:function e(t){return i.isColorAuto(t)?"auto":t.color.point.mode}},dimension:{show:function e(t){return i.isColorByDimension(t)},items:{colorScheme:{ref:"color.point.dimensionScheme"},persistentColors:{ref:"color.point.persistent"}}},measure:{show:function e(t){return i.isColorByMeasure(t)},items:{sequential:{ref:"color.point.measureScheme"}}},legend:{show:i.showLegend}}}}};r.extend(true,l,u);return l}.apply(t,o),void 0!==r&&(e.exports=r))},2125:function(e,t,n){"use strict";var o,r;!(o=[n(90)],r=function(e){var t=["altLabel","auto","autoMinMax","byDimDef","byMeasureDef","dimensionScheme","expressionIsColor","expressionLabel","measureMax","measureMin","measureScheme","mode","paletteColor","persistent","reverseScheme","useBaseColors","useDimColVal"];return{importColors:n,exportColors:o};function n(e){e.color.point=e.color.point||{};r(e.color,e.color.point,t);if(e.color.colorExpression){e.color.point.expression={qValueExpression:{qExpr:e.color.colorExpression}};delete e.color.colorExpression}e.color.point.expressionIsColor=true}function o(n){r(n.color.point,n.color,t);n.color.colorExpression=e.getValue(n,"color.point.expression.qValueExpression.qExpr","");delete n.color.point.expression}function r(e,t,n){for(var o=0;o<n.length;++o){var r=n[o];if(void 0!==e[r]){t[r]=e[r];delete e[r]}}}}.apply(t,o),void 0!==r&&(e.exports=r))},2126:function(e,t,n){"use strict";var o,r;!(o=[],r=function(){return{toBefore:t,toAfter:e};function e(e){var t=e.qUndoExclude.qHyperCube;if(2===t.qEffectiveInterColumnSortOrder.length&&1===t.qEffectiveInterColumnSortOrder[0]){t.qEffectiveInterColumnSortOrder=[0,1];t.qDimensionInfo.reverse()}}function t(e){var t=e.qUndoExclude.qHyperCube;if(2===t.qEffectiveInterColumnSortOrder.length&&0===t.qEffectiveInterColumnSortOrder[0]){t.qEffectiveInterColumnSortOrder=[1,0];t.qDimensionInfo.reverse()}}}.apply(t,o),void 0!==r&&(e.exports=r))},2127:function(e,t,n){"use strict";var o,r;!(o=[n(89),n(1750),n(1751),n(90),n(160),n(483),n(1259),n(1318)],r=function(e,t,n,o,r,i,a,s){function l(l,u,c){u.qUndoExclude||(u.qUndoExclude={});u.qUndoExclude.qHyperCubeDef=o.extend(true,{},u.qHyperCubeDef);u.qUndoExclude.qHyperCubeDef.qDimensions.reverse();i.updateHypercubeAttributes(u,"qUndoExclude.qHyperCubeDef.",u.color.point);var p=[];var d=u.qUndoExclude.qHyperCubeDef.qDimensions.length;var f=u.color.point&&!u.color.point.auto&&"byExpression"===u.color.point.mode;if(d>0&&f){var h=r.create(r.IDMAP.COLOR_BY_EXPRESSION,{qExpression:o.getValue(u,"color.point.expression.qValueExpression.qExpr")});p=[h]}u.qUndoExclude.qHyperCubeDef.qMeasures[0].qAttributeExpressions=p;if(t.hasMultipleDimensions(u))return a.getAllHyperCubeExpressions(u.qHyperCubeDef,l.qHyperCube,c).then(function(e){n.applySorting(u,l,c,e);var t=e.dimensions[0],o=e.dimensions[1],r=e.measures[0],i=s.getFractileExpression(1,t,o,r),a=s.getFractileExpression(0,t,o,r),p=u.qUndoExclude.qHyperCubeDef.qDimensions[0];p.qAttributeExpressions=[{qExpression:a,id:"minBoxValue"},{qExpression:i,id:"maxBoxValue"}]});u.qUndoExclude.qHyperCubeDef.qInterColumnSortOrder=[1,0];return e.resolve()}return{generateHyperCube:l}}.apply(t,o),void 0!==r&&(e.exports=r))},2128:function(e,t,n){"use strict";var o,r;!(o=[n(1051),n(281)],r=function(e,t){var n;n=e.extend("CachedStackedApi",{init:function e(t){this._super(t,{mode:"K"});this.cacheCube.setMethodName("getHyperCubeStackData")},updateCache:function e(n){var o;var r;if("qHyperCube"===this.dataPath)o=n&&n.qHyperCube;else{r=this.dataPath.slice(0,this.dataPath.indexOf("qHyperCube")-1);o=n&&n[r]&&n[r].qHyperCube}if(o&&"K"===o.qMode){n.qSelectionInfo.qInSelections||this.cacheCube.setCubeSize({qcx:o.qSize.qcx,qcy:t.getStackedCubeSizeOfMax2Dims(n,r)});this.backendStackThrottle.clear()}else this._super(n)},getData:function e(t,n,o){var r=o||this.model.layout.qHyperCube;var i=this.cacheCube;return"K"===r.qMode?n?this.model.getHyperCubeData(n,t):this.cacheCube.getData(t).then(function(e){var t=e[0]&&e[0].qData[0]&&e[0].qData[0].qSubNodes.some(function(e){return e.qDown>0});t&&i.clear();return e}):this._super(t,n,o)}});return n}.apply(t,o),void 0!==r&&(e.exports=r))},2129:function(e,t){e.exports='<div class="picasso-chart qv-viz" aria-hidden="true"></div>'},2130:function(e,t,n){"use strict";var o,r;!(o=[n(90)],r=function(e){var t=10;var n=function e(){this._maxJitter=1};n.prototype.calcMaxJitter=function(e,t,n){this._maxJitter=Math.min(e*t,n-e)};n.prototype.getJitterValue=function(n){var o=Math.abs(e.hashFromString(n+"")%t)/(t-1);return this._maxJitter/2-o*this._maxJitter};return n}.apply(t,o),void 0!==r&&(e.exports=r))},483:function(e,t,n){"use strict";var o,r;!(o=[n(160),n(101),n(385)],r=function(e,t,n){var o=["scatterplot","map"],r=["map"];return{baseColor:{isSupported:function e(t){return t&&t.length&&-1===o.indexOf(t)},isDimSupported:function e(t){return t&&t.length&&-1!==r.indexOf(t)}},colorBy:{},colorByUpdater:function e(t,n,o,r){this.updateColorDef(t,r,o);this.updateHypercubeAttributes(t,n,o)},updateColorDef:function o(r,i,a){var s=t.getValue(a,"mode");var u=t.getValue(a,"auto");var p=t.getValue(r,i+"qDimensions",[]);var d=t.getValue(r,i+"qMeasures",[]);var f,h,m,g;if(!u&&"byDimension"===s&&p.length){f=t.getValue(a,"byDimDef");f&&c(a,f.label);if(f&&f.activeDimensionIndex>-1){f.activeDimensionIndex=Math.min(f.activeDimensionIndex,p.length-1);h=p[f.activeDimensionIndex];g=n.getColorByDefinition("dimension",false,h);g.activeDimensionIndex=f.activeDimensionIndex;l(a,g)}else if(!f||!f.key){h=p[p.length-1];m=e.getById(h.qAttributeDimensions,e.IDMAP.COLOR_BY_ALTERNATIVE);l(a,n.getColorByDefinition("dimension",!!m,m||h))}}else if(!u&&"byMeasure"===s&&p.length){f=t.getValue(a,"byMeasureDef");f&&c(a,f.label);if((!f||!f.key)&&d.length){var v=d[0];h=p[p.length-1];m=e.getById(h.qAttributeExpressions,e.IDMAP.COLOR_BY_ALTERNATIVE);l(a,n.getColorByDefinition("measure",!!m,m||v))}}else"byMultiple"===s&&d.length<2&&t.setValue(a,"mode","primary")},updateHypercubeAttributes:function e(n,o,r){var a=t.getValue(r,"mode");var s=t.getValue(r,"auto");var l=t.getValue(n,o+"qDimensions",[]);var c=t.getValue(n,o+"qMeasures",[]);var p=t.getValue(n,o+"qLayoutExclude.qHyperCubeDef.qDimensions",[]);!s&&"byDimension"===a&&l.length?u(r,true,l,p,c,t.getValue(r,"byDimDef.label")):!s&&"byMeasure"===a&&l.length?u(r,false,l,p,c,t.getValue(r,"byMeasureDef.label")):i(l,p)},setColorByPropertyDef:l,resolveColorByPropertyDef:u,clearColorByItem:i};function i(t,n){t.forEach(function(t){a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")});n.forEach(function(t){a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")})}function a(t,n,o){if(t[o]){var r=e.getIndexById(t[o],n);r>=0&&t[o].splice(r,1)}else t[o]=[]}function s(e){return e.split(" ").length>1&&"="!==e[0]&&"["!==e[0]?"["+e+"]":e}function l(e,t,n,o){var r=n?"expression":t.type,i=e.mode,a=t.label||t.name||"";c(e,a);switch(r){case"field":i="byDimension";e.byDimDef={label:t.label||s(t.name),key:s(t.name),type:"expression",activeDimensionIndex:t.activeDimensionIndex};break;case"expression":i="byMeasure";e.byMeasureDef={label:n||t.label||t.name,key:n||t.name,type:"expression"};break;case"dimension":i="byDimension";e.byDimDef={label:t.name,key:t.id,type:"libraryItem",activeDimensionIndex:t.activeDimensionIndex};break;case"measure":i="byMeasure";e.byMeasureDef={label:t.name,key:t.id,type:"libraryItem"};break}if(!o){e.auto=false;e.mode=i}}function u(n,o,r,a,s,l){i(r,a);var u=r[r.length-1];if(u){var c=o?t.getValue(n,"byDimDef"):t.getValue(n,"byMeasureDef");if(c){var p=e.create(e.IDMAP.COLOR_BY_ALTERNATIVE);switch(c.type){case"expression":p.label=l||c.label;o?p.qDef=c.key:p.qExpression=c.key;break;case"libraryItem":if(!o){var d=-1;s.forEach(function(e,t){c.key===e.qLibraryId&&(d=t)});p.matchMeasure=d}p.qLibraryId=c.key;p.colorMapRef=c.key;break}if(o){p.qSortBy={qSortByAscii:1};u.qAttributeDimensions.push(p)}else u.qAttributeExpressions.push(p)}}}function c(e,t){if(!t)return;var n="="===t.charAt(0);e.altLabel=n?{qStringExpression:{qExpr:t.substr(1)}}:t}}.apply(t,o),void 0!==r&&(e.exports=r))}}]);