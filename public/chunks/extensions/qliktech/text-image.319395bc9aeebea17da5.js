/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[54],{1028:function(t,e,n){"use strict";var i,o;!(i=[],o=function(){var t=["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"];var e={1:"XS",2:"S",3:"M",4:"L",5:"XL"};var n={10:"1",13:"2",16:"3",22:"4",32:"5"};var i={1:1,2:2,3:3,4:4,5:5,6:5};var o={1:1,2:2,3:3,4:4,5:5};return{palette:t,fontSizes:e,fontSizesPx:n,htmlSizeToMarkdownSize:i,markdownSizeToHtmlSize:o}}.apply(e,i),void 0!==o&&(t.exports=o))},1029:function(t,e,n){"use strict";var i,o;!(i=[],o=function(){var t={};function e(){return window.getSelection()}t.createRange=function(t,e,n){var i=document.createRange();e=e||0;n="undefined"===typeof n?t.childNodes.length:n;i.setStart(t,e);i.setEnd(t,n);return i};t.createRangeForElement=function(t){var e=document.createRange();e.selectNode(t);return e};t.addRange=function(t,n){var i=e();n&&i.removeAllRanges();i.addRange(t)};t.getRange=function(t){var n=window.getSelection();t=t||0;return n.rangeCount>t?e().getRangeAt(t):null};t.rangeEquals=function(t,e){if(null===t&&null===e)return true;if(null===t||null===e)return false;return 0===t.compareBoundaryPoints(window.Range.START_TO_START,e)&&0===t.compareBoundaryPoints(window.Range.END_TO_END,e)};return t}.apply(e,i),void 0!==o&&(t.exports=o))},1060:function(t,e,n){"use strict";var i,o;!(i=[n(11),n(48),n(91),n(89),n(381),n(1657),n(1658),n(299),n(1224),n(107),n(1659),n(1660),n(159),n(304),n(97),n(1270)],o=function(t,e,n,i,o,r,a,s,l,u,c,d,f,p,g,m){var v,h;v={auto:"auto auto",alwaysFit:"contain",fitWidth:"100% auto",fitHeight:"auto 100%",fill:"100% 100%"};h={topLeft:"0% 0%",centerLeft:"50% 0%",bottomLeft:"100% 0%",topCenter:"0% 50%",centerCenter:"50% 50%",bottomCenter:"100% 50%",topRight:"0% 100%",centerRight:"50% 100%",bottomRight:"100% 100%"};e.directive("qvTextImageEditor",[function(){return{restrict:"A",scope:{editorOptions:"=",save:"="},link:function e(n,i){l.show(i,n.editorOptions);i.on("qv-outside",function(e){var i=t(e.target);if(i.closest(".qv-texttool-toolbar, .modal-container, .qui-immidiateContextual, .lui-popover, .lui-dialog").length)return;n.save()});n.$on("$destroy",function(){n.save();l.hide()})}}}]);function b(t){return t.background&&t.background.isUsed&&t.background.url&&t.background.url.qStaticContentUrl&&t.background.url.qStaticContentUrl.qUrl||""}function x(n,o){var r=e.getService("$timeout"),a=o.find(".qv-media-tool-html")[0];if("none"===n.responsive||"undefined"===typeof n.responsive)return r(function(){n.sizeClass="";n.sizeStyle={maxWidth:"",maxHeight:""};t(a).find("img").css(n.sizeStyle);n.visibilityClass="";n.responsiveClass=""},0);n.sizeClass="";n.visibilityClass="hidden";"images"===n.responsive?n.responsiveClass="responsive-images":"text"===n.responsive?n.responsiveClass="responsive-text":n.responsiveClass="responsive-images responsive-text";if(!a){n.visibilityClass="";return i.resolve()}return r(function(){if(""===n.visibilityClass)return;n.sizeClass="";n.sizeStyle={maxWidth:"100%",maxHeight:"100%"};t(a).find("img").css(n.sizeStyle);t(a).addClass("default-font-size");var e=a.offsetWidth-a.clientWidth;var i=(a.scrollHeight+e*a.offsetHeight/48)/a.clientHeight;t(a).width("auto");t(a).removeClass("default-font-size");if(i>1){n.sizeStyle={maxWidth:Math.floor(1/i*100)+"%",maxHeight:Math.floor(1/i*100)+"%"};t(a).find("img").css(n.sizeStyle)}n.sizeClass=i>3?"bp-4":i>2?"bp-3":i>1.5?"bp-2":i>1?"bp-1":"";n.visibilityClass=""},10)}function k(t){return!l.hasContent(t)||""===t.trim()}function y(t){var e=0;if(document.createRange){var n=document.createRange();n.selectNodeContents(t);if(n.getBoundingClientRect){var i=n.getBoundingClientRect();i&&(e=i.bottom-i.top)}}return e}function C(t){return!k(t.markdown)||b(t)}return{type:"text-image",BackendApi:s,definition:a,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[]},images:[],markdown:"",background:{url:{},size:"auto"}},data:{measures:{min:0,max:1e3,description:function t(){return n.get("Visualizations.Descriptions.TextImage.Measure")},add:function t(e,n){n.markdown+="=[]("+e.qDef.cId+")"},remove:function t(e,n){n.markdown=c.removeMeasure(e.qDef.cId,n.markdown)},replace:function t(e,n,i,o){o.markdown=c.replaceMeasure(n.qDef.cId,e.qDef.cId,o.markdown)}}},support:{cssScaling:true,snapshot:C,export:C,exportData:true,sharing:false},exportProperties:null,importProperties:null,template:r,showRequirements:function t(){return false},getDropMeasureOptions:function t(e,n,i,o){if(n.getMeasures().length<n.maxMeasures())"expression"===e.item.type?n.addExpressionMeasure(e.item.name,"").then(function(){i.setProperties(n.properties)}):n.addLibraryMeasure(e.item.id).then(function(){i.setProperties(n.properties)});else{e.ReplaceMeasures(i,n);o()}},controller:["$scope","$element","$sce",function(n,r,a){var s=r.find(".qv-ti");n.isSelected=function(){return n.options.isActive||n.options.isZoomed};n.$watch("editing",function(t){n.object.preventDrag=t});n.edit=function(){if(!n.object.inEditState()||n.editing||n.object.isLink)return;if(n.isSelected()){n.saving=false;n.saved=false;n.backendApi.getProperties().then(function(t){var e=n.object.getCreatePropertyHandler();e.setProperties(t);n.editorOptions={markdown:t.markdown,maxlength:u.textImage,toolbar:{style:"popover",buttons:"all",width:561},useMeasures:true,layout:n.backendApi.model.layout,properties:t,propertyHandler:e,copiedMeasures:[],insertedImages:[],onOpen:function t(e){e.saveRange();n.$apply(function(){n.editing=true;n.initializing=false});setTimeout(function(){C()},0)},isActive:function t(){return n.editing||n.initializing}};n.initializing=true})}};function C(){var t=l.getEditorElement();m.enable(t,true)}function q(t){var e=[];t.find(".tokenized-measure").each(function(t,n){var i=n.getAttribute("data-measure");i=o.decompressFromBase64(i);e.push(JSON.parse(i))});return e}function w(t){function e(t){var e=l.getOptions().insertedImages;for(var n=0;n<e.length;n++)if(e[n].url===t)return e[n].urlDef;return null}var n=[];t.find("img:not(.tokenized-measure)").map(function(t,i){var o=i.getAttribute("data-image-id");var r=i.getAttribute("src");var a=e(r);a||(a=i.getAttribute("src"));n.push({id:o,url:a})});return n}n.save=function(){if(n.saving||n.saved)return;l.closing();var t=l.getMarkdown();var e=l.getEditorElement();if(null!==t&&t!==n.markdown){n.saving=true;var i=l.getOptions().properties;i.markdown=t;c.syncMeasures(q(e),i);d.syncImages(w(e),i);n.backendApi.model.setProperties(i);n.saved=true}else n.editing=false};n.clickHtml=function(e){var i=!n.navigation;i&&t(e.target).closest("a").length&&e.preventDefault()};function S(){e.$apply(n,function(){n.editing=false})}this.onPaint=function(t){var o="";var r="";var u="";var c="";var d=[];n.finishRender=false;if(n.saving){n.editing=false;n.saving=false}o=b(t);if(o){p.stripBasePath(o);o=o.replace(/"/g,'\\"');o=o.replace(/'/g,"\\'");r=p.addBasePath(o);u=v[t.background.size]||v.auto;c=h[t.background.position]||h.topLeft;var g=new Image,m=i();d.push(m.promise);g.onload=function(){m.resolve()};g.onerror=function(){m.resolve()};g.src=r;if(g.complete){g.onload=null;g.onerror=null;m.resolve()}}s.css({backgroundImage:"url('"+r+"')",backgroundSize:u,backgroundPosition:c,backgroundRepeat:"no-repeat"});n.empty=k(t.markdown)&&!o;n.html=a.trustAsHtml(l.toHTML(t.markdown,t,true));n.direction=this.view.options.direction;n.textDirection=f.getAutoOrAlternativeDirection(t.markdown);n.markdown=t.markdown;n.responsive=t.responsive;var y=e.getService("$timeout");var C=x(n,s).then(function(){return y(function(){s.find("img").each(function(t,e){e.complete||function(t){var e=i();d.push(e.promise);t.onload=function(){e.resolve()};t.onerror=function(){e.resolve()}}(e)});if(d.length)return i.all(d).then(function(t){return x(n,s).then(function(){n.finishRender=true;return t})});n.finishRender=true},0,false)});return C.then(function(){if(n.backendApi.isSnapshot){t.snapshotData.scrollTopPercent&&s.closest(".qv-object-content").css("top",-t.snapshotData.scrollTopPercent+"%");t.snapshotData.verticalScrollWidth&&s.find(".qv-media-tool-html").css("padding-right",t.snapshotData.verticalScrollWidth+"px")}return y(function(){},500)})};this.onResize=function(){return this.onPaint.apply(this,arguments)};this.setInteractionState=function(t){this._super(t);n.navigation=(n.options.navigation||n.options.limitedInteraction)&&n.object.inAnalysisState();n.editmode=n.object.inEditState();n.editmode||(n.editing=false)};this.getPreferredSize=function(){var t=i();var e=n.$watch("finishRender",function(n){if(true===n){var i=0;s.find(".qv-media-tool-html").contents().each(function(){i+=3===this.nodeType?y(this):this.offsetHeight;"BR"===this.nodeName&&(i+=8)});t.resolve(i?{w:s.width(),h:i}:void 0);e()}});return t.promise};this.setSnapshotData=function(e){if(n.backendApi.isSnapshot)n.object.layout.snapshotData.scrollTopPercent&&(e.snapshotData.scrollTopPercent=n.object.layout.snapshotData.scrollTopPercent);else{var i=s.find(".qv-media-tool-html")[0];e.snapshotData.scrollTopPercent=i.scrollTop/i.clientHeight*100;e.snapshotData.verticalScrollWidth=t(i).innerWidth()-i.clientWidth}};g.on("start",S);n.$on("$destroy",function(){g.off("start",S)})}],getDropFieldOptions:function t(e,n,i,o,r){e.AddFieldAsMeasure(i,n,r);o()},getDropDimensionOptions:function t(e,n,i,o){o()}}}.apply(e,i),void 0!==o&&(t.exports=o))},1220:function(t,e,n){"use strict";var i,o;!(i=[],o=function(){var t=/&|\/|\\|=|\?|\*|<|>|"|:|\|/g;var e=/[!?='()*]/g;return{encodeString:function t(n){return encodeURIComponent(n).replace(e,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})},containsIllegalChars:function e(n){return null!==n.match(t)}}}.apply(e,i),void 0!==o&&(t.exports=o))},1221:function(t,e,n){"use strict";var i,o;!(i=[n(304)],o=function(t){var e={};function n(t,e,n){var i={name:t,type:e};if(n){n.qId&&(i.id=n.qId);i.path=n.qUrl;i.pathDef=n.qUrlDef}"folder"===e&&(i.children=[]);return i}function i(t,e){t=t.substring(1).split("/").reverse().slice(1).reverse();var i=e;t.forEach(function(t){var e=false;i.children.forEach(function(n){if(n.name===t){i=n;e=true;return}});if(!e){var o=n(t,"folder");i.children.push(o);i=o}});return i}function o(t){t.sort(function(t,e){return t.name.localeCompare(e.name)}).reverse();t.sort(function(t,e){if("folder"===t.type&&"folder"!==e.type)return-1;if("folder"===t.type&&"folder"===e.type)return t.name.localeCompare(e.name);if("folder"!==t.type&&"folder"!==e.type)return t.name.localeCompare(e.name);return 1});t.forEach(function(t){"undefined"!==typeof t.children&&o(t.children)})}e.createTree=function(e,r,a){r=(r||[]).join("|")||".+?";var s=n("/","folder");var l=new RegExp("\\.("+r+")$","i");e.forEach(function(e){var o,r=e,u=r.qUrl;u=t.stripBasePath(u);o=decodeURIComponent((u+"").replace(/\+/g,"%20"));o=o.split("/").splice(-1)[0];if(o.match(l)){var c=s;var d;if(!a){d=decodeURIComponent(u).replace(/^(\/content\/default)|(\/content\/Default)/,"").replace(/^(^\/media\/([a-z0-9-])+\/([a-z0-9-])+\/)/,"/media/");c=i(d,s)}c.children.push(n(o,"file",r))}});o(s.children);return s};e.filterList=function t(n){var i=[],o=n.sort(function(t,e){var n=t.qName.toLowerCase(),i=e.qName.toLowerCase();return n.localeCompare(i)}),r,a;for(r=0;r<n.length;r++){a=n[r];if(a.qAppSpecific){i.push(a);a.qMeta&&-1!==a.qMeta.privileges.indexOf("update")&&(e.canUpdate=true);break}}for(r=0;r<o.length;r++){a=n[r];a.qAppSpecific||i.push(a)}return i};e.getRemainingSpace=function t(e){var n=0;for(var i=0;i<e.length;i++)if(e[i].qAppSpecific&&e[i].qMeta){n=parseInt(e[i].qMeta.remainingLibrarySpace||0,10);break}return n};return e}.apply(e,i),void 0!==o&&(t.exports=o))},1224:function(t,e,n){"use strict";var i,o;!(i=[n(48),n(152),n(1437)],o=function(t,e,n){var i=t.service("qvMediaTool",[function(){var i,o,r,a,s={};s.show=function(t,e){a=e;i=t.showComponent(n,{options:e})};s.hide=function(){if(i){i.scope().destroy();i=null;a=null}};s.closing=function(){i&&i.closing()};s.isActive=function(){return a&&"function"===typeof a.isActive?a.isActive():!!i};s.getCurrentLayout=function(){return o};s.useImageArray=function(){return r};s.getOptions=function(){return a||{}};s.getMarkdown=function(){var t=i.scope().getParagraph(),e;if(t){e=t.saveAndGetData();if(e)return e.text}return null};s.hasContent=function(t){return t&&"^[\n](left)"!==t};s.getParagraph=function(){return i.scope().getParagraph()};s.getEditorElement=function(){return i.scope().getEditorElement()};s.getRange=function(){return i.scope().currentRange};s.toHTML=function(n,i,a){var s=t.getService("$sce");o=i;r=a;if(n){var l=e.toHTML(n);n=e.toMarkdown(l);return s.getTrustedHtml(e.toHTML(n))}return""};s.toMarkdown=function(t){if(t)return e.toMarkdown(t);return""};return s}]);return i}.apply(e,i),void 0!==o&&(t.exports=o))},1225:function(t,e,n){"use strict";var i,o;!(i=[n(10),n(1029)],o=function(t,e){var n=t.element("<div contenteditable style='position:absolute;top: -999999px;'>")[0];function i(t,i){var o=document.activeElement;document.body.appendChild(n);n.innerHTML="Feature detection.";n.focus();e.addRange(e.createRange(n),true);document.execCommand(t,false,i);if(o!==document.body)try{document.activeElement=o}catch(t){}document.body.removeChild(n);return n.innerHTML}var o=i("justifyCenter").indexOf(" align=")>-1;return{usesAlign:o}}.apply(e,i),void 0!==o&&(t.exports=o))},1270:function(t,e,n){"use strict";var i,o;!(i=[n(11),n(159),n(114)],o=function(t,e,n){var i={};var o=e.supportDirAuto();function r(t){return t.is("textarea,input")&&0===t.val().length||""===t[0].textContent&&0===t.has("img").length}function a(t,e){r(t)?t.css("direction",e):"rtl"!==t.css("direction")&&"ltr"!==t.css("direction")||t.css("direction","")}function s(n,i,o){n.find("div,p").each(function(n,r){i?"auto"!==r.getAttribute("dir")&&r.setAttribute("dir","auto"):r.setAttribute("dir",e.detectTextDirection(r.innerText));a(t(r),o)})}i.enable=function(i,r){var l=t(i);a(l,n.direction);l.attr("dir",e.getAutoOrAlternativeDirection(l[0].innerText));if(r){l.attr("x-auto-direction-for-paragraphs","");s(l,o,n.direction)}l.on("keyup",function(){o||l.attr("dir",e.detectTextDirection(l[0].innerText));r&&s(l,o,n.direction);a(l,n.direction)})};return i}.apply(e,i),void 0!==o&&(t.exports=o))},1425:function(t,e,n){"use strict";var i,o;!(i=[n(13),n(11),n(48),n(1220),n(49),n(93),n(1221),n(304),n(1426),n(1427),n(295),n(127),n(1428),n(1429),n(111)],o=function(t,e,i,o,r,a,s,l,u,c,d,f){var p={isShown:false};var g=function t(){return r.getFlag("MLREST")};i.directive("qveMediaList",function(){return{replace:true,restrict:"E",template:c}});var m={template:u,controller:["$scope","qvLoader","qvContextMenu","$http",function(i,u,c,m){var v=n.p+"img/medialibrary/thumb.png",h=false,b,x={notReady:0,isLoading:1,isEmpty:2,hasFiles:3};var k=e("#media-library-modal");i.inZoom=false;i.firstTimeRenderCheck=true;i.lists=[];i.selectedFile=null;i.contentState=x;i.state=x.notReady;i.view=null;v=l.stripBasePath(v);v=l.addBasePath(v);i.staticSrc=v;i.updateExp={};function y(t){clearTimeout(b);u.close(t)}function C(t,e){t=t||null;e=e||null;i.selectedFile=t;i.selectedFileDef=e;setTimeout(function(){k.find(".q-media-insbtn").focus()})}function q(t,e){var n=s.createTree(t,i.input.filter,true);i.rootEntry=n;if(e===i.view)if(u.isOpen())u.close().then(function(){i.state=n.children.length>0?x.hasFiles:x.isEmpty});else{clearTimeout(b);i.state=n.children.length>0?x.hasFiles:x.isEmpty}S()}function w(e){var n=t.apiPath+"v1/apps/"+e+"/media/list";return m.get(n,{params:{show:"recursive"}}).then(function(t){return t.data.data.filter(function(t){return"image"===t.type}).map(function(t){var e=o.encodeString(t.name);return{qId:t.id,qUrl:t.link.replace(t.name,e),qUrlDef:t.link,qName:t.name}})})}function S(){i.disableNav=false}function T(t,e,n,o){i.updateExp.deleteFile(t,e,n).then(function(){E(o)})}function M(){i.disableNav=true;a.getApp().then(function(t){var e=t.id;var n=i.view;i.appId=e;g()?w(e).then(function(t){q(t,n)}):t.getLibraryContent(i.view).then(function(t){q(t,n)})})}a.getApp().then(function(t){t.getLayout().then(function(e){t.getContentLibraries().then(function(t){i.lists=s.filterList(t);if(!i.view&&i.lists.length){i.view=i.lists[0].qName;M()}var n=g();var o=r.getFlag("HAS_QRS")&&!!s.canUpdate&&!n;var a=n&&e.permissions.update;i.canUpdate=o||a})})});function I(t){return t.split("/").slice(3).join("\\")}function E(t){M();i.input.selectedFile&&t===i.input.selectedFile&&(h=true)}function A(t,e,n){i.updateExp.deleteInAppFile&&i.updateExp.deleteInAppFile(t,e,i.appId).then(function(){E(n)})}i.getSrc=function t(e){e=l.stripBasePath(e);e=l.addBasePath(e);return e};i.zoomImage=function t(e,n){e.preventDefault();e.stopPropagation();i.zoomSrc=n.path;i.inZoom=true};i.closeZoom=function(){i.inZoom=false;i.zoomSrc=null};i.goTo=function(t,e){var n;c.close();if(i.view===t||i.disableNav)return;C(null,null);y(true);i.state=x.notReady;i.isUpload=e;i.view=t;if(!i.isUpload){b=setTimeout(function(){i.state=x.isLoading;u.show({template:d,messageObj:{task:"MediaLibrary.LoadingFiles"},appendTo:k.find(".medialib")[0],bigLoader:true})},1e3);n=k.find(".q-images-cont");n.length&&(n[0].scrollTop=0);M();i.firstTimeRenderCheck=true;n=null}};i.isSelectedImg=function(t,e,n){e&&i.firstTimeRenderCheck&&n&&setTimeout(function(){var t=k.find(n);i.firstTimeRenderCheck=false;t.length&&f.scrollElmentIntoView(t,".q-images-cont",true);t=null},250);return i.selectedFile===t.path};i.selectFile=function(t,n,o){var r=e(t.target).closest(".q-media-grid, .media-list-cont-item");t.preventDefault();t.stopPropagation();c.close();f.scrollElmentIntoView(r,".q-images-cont",false);if(i.selectedFile===n){n=null;o=null}r=null;C(n,o)};i.confirm=function(){if(i.selectedFile&&!i.updateExp.isUploading){i.input.onConfirm(i.selectedFile,i.selectedFileDef);i.destroyComponent()}};i.inInAppView=function(){return i.view===i.lists[0].qName};i.canDeleteInView=function(){return i.inInAppView()&&i.canUpdate};i.onDelete=function(t){var e=i.selectedFile;if(g()){var n=i.rootEntry.children.filter(function(t){return t.path===e})[0]||{};n.id&&A(t,n,e)}else{var o=I(i.selectedFileDef);t.preventDefault();t.stopPropagation();T(t,o,i.selectedFile,e)}};i.onContextMenu=function(t){t.preventDefault();t.stopPropagation();var n=c.menu();i.updateExp.isUploading||n.addItem({translation:"MediaLibrary.Insert",tid:"insert",select:function n(){var o=e(t.target).closest(".media-list-cont-item").scope().entry;C(o.path,o.pathDef);i.confirm()}});i.canDeleteInView()&&n.addItem({translation:"Common.Delete",tid:"delete",select:function n(){var i=e(t.target).closest(".media-list-cont-item").scope().entry;var o=i.path;if(g())A(t,i,o);else{var r=I(i.pathDef);T(t,r,i.path,o)}}});c.close();c.show(n,{position:{x:t.pageX,y:t.pageY},docking:"BottomRight"})};i.cancel=function(t,e){if(t){t.preventDefault();t.stopPropagation()}if(!e){if(i.inZoom){i.closeZoom();return}if(i.updateExp.deleteDialogShown){i.updateExp.deleteDialogShown=false;return}}if(e||!i.updateExp.isUploading){i.input.onCancel(h);i.destroyComponent()}};i.$watch("updateExp.isUploading",function(t){false===t&&i.inInAppView()&&M()});i.$on("$destroy",function(){p.isShown=false;i.closeZoom();c.close();y(true)})}]};function v(t){var e={onCancel:t.onCancel,onConfirm:t.onConfirm,selectedFile:t.selectedFile,filter:["png","gif","jpg","jpeg"]};var n=i.getService("luiDialog");n.show({template:u,controller:m.controller,input:e});p.isShown=true}function h(){if(p.isShown){var t=e("#media-library-modal");t.length&&t.scope().cancel(null,true)}}function b(){return p.isShown}return{show:v,hide:h,isShown:b}}.apply(e,i),void 0!==o&&(t.exports=o))},1426:function(t,e){t.exports='<lui-dialog id="media-library-modal" tid="media-library" qv-cancel="cancel($event)" qv-confirm="confirm()" qva-outside-ignore-for="allOutside" qva-stop-prop>\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="MediaLibrary.Header"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="dialog-body  medialib  lui-nopad">\n\t\t<div class="q-section-list" ng-if="lists.length">\n\t\t\t<ul class="side-menu lui-list" tid="menu-list">\n\t\t\t\t<li ng-repeat="list in lists track by list.qName"\n\t\t\t\t\tclass="side-menu-item  lui-list__item"\n\t\t\t\t\tng-class="{\'selected\': !isUpload && view === list.qName}"\n\t\t\t\t\tng-click="goTo(list.qName, false)">\n\t\t\t\t\t<span class="lui-list__text  lui-list__text--ellipsis" ng-if="list.qAppSpecific" q-translation="MediaLibrary.InApp" tid="goto-inapp"></span>\n\t\t\t\t\t<span class="lui-list__text  lui-list__text--ellipsis" ng-if="!list.qAppSpecific" tid="goto-library">{{ list.qName }}</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<ul ng-if="canUpdate" class="q-section-upload  upload-menu lui-list">\n\t\t\t\t<li class="upload-menu-item  lui-list__item"\n\t\t\t\t\tng-class="{\'selected\': isUpload}"\n\t\t\t\t\ttid="goto-upload"\n\t\t\t\t\tng-click="goTo(\'\', true)">\n\t\t\t\t\t<div class="q-section-upload-text  lui-list__text  lui-list__text--ellipsis" q-translation="MediaLibrary.UploadMedia"></div>\n\t\t\t\t\t<div class="qv-loader  lui-list__text" ng-if="updateExp.isUploading"></div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="q-empty" ng-if="state === contentState.isEmpty && !isUpload">\n\t\t\t<p q-translation="MediaLibrary.NoFilesFound" class="nff"></p>\n\t\t</div>\n\t\t<qve-media-list ng-if="state === contentState.hasFiles && !isUpload" ng-class="{\'q-image-library\': !isUpload}" class="q-images-cont" tid="media-lib-items-list"></qve-media-list>\n\t\t<div class="q-media-preview" ng-if="selectedFile && !isUpload">\n\t\t\t<div class="q-media-preview-toolbar" ng-if="canDeleteInView()">\n\t\t\t\t<button\n\t\t\t\t\tclass="lui-overlay-button"\n\t\t\t\t\ttid="delete"\n\t\t\t\t\tdata-name="delete"\n\t\t\t\t\tq-title-translation="Common.Delete"\n\t\t\t\t\tng-click="onDelete($event)">\n\t\t\t\t\t<span class="lui-overlay-button__icon  lui-icon  lui-icon--bin"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="q-media-preview-img-wrapper">\n\t\t\t\t<img ng-src="{{ getSrc(selectedFile) }}" class="q-media-img-list"/>\n\t\t\t</div>\n\t\t\t<div class="q-media-preview-bottom-toolbar">\n\t\t\t\t<button class="lui-button q-media-insbtn"\n\t\t\t\t\t\ttid="insert"\n\t\t\t\t\t\tdata-name="insert"\n\t\t\t\t\t\tq-translation="MediaLibrary.Insert"\n\t\t\t\t\t\tq-title-translation="MediaLibrary.Insert"\n\t\t\t\t\t\tng-click="confirm()">\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="q-images-cont" ng-if="canUpdate" ng-show="isUpload">\n\t\t\t<qv-media-update update-exp="updateExp" select-file="selectFile" selected-file="selectedFile" image-list="rootEntry.children" confirm="confirm"></qv-media-update>\n\t\t</div>\n\t</lui-dialog-body>\n\t<div class="q-media-zoomed" ng-if="inZoom">\n\t\t<div class="q-media-z-wrapper">\n\t\t\t<div class="q-media-z-cont">\n\t\t\t\t<img class="q-media-z-img" ng-src="{{ getSrc(zoomSrc) }}">\n\t\t\t</div>\n\n\t\t\t<div class="q-media-zoom-footer">\n\t\t\t\t<qv-confirm-cancel-footer light qv-confirm="confirm()" qv-cancel="closeZoom()" qv-confirm-label="Common.Apply" qv-confirm-disabled="updateExp.isUploading"></qv-confirm-cancel-footer>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<lui-dialog-footer data-tid="media-library-footer">\n\t\t<lui-button ng-click="cancel($event)" q-translation="Common.Close" tid="cancel" ng-disabled="updateExp.isUploading"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},1427:function(t,e){t.exports='<div>\n\t\x3c!--\n\t\t<img ng-src="{{staticSrc}}" class="q-media-img" width="100%" height="100%"/>\n\t--\x3e\n\t<ul class="q-media-list-cont  lui-list" qva-context-menu="onContextMenu($event)">\n\t\t<li ng-repeat="entry in rootEntry.children"\n\t\t\t\tclass="media-list-cont-item  lui-list__item"\n\t\t\t ng-class="{\'selected\': isSelectedImg(entry, $last, \'.selected\')}"\n\t\t\t tid="media-item" title="{{entry.name}}"\n\t\t\t ng-click="selectFile($event, entry.path, entry.pathDef)">\n\t\t\t<span class="list-name  lui-list__text  lui-list__text--ellipsis">{{entry.name}}</span>\n\t\t</li>\n\t</ul>\n</div>'},1428:function(t,e,n){"use strict";var i,o;!(i=[n(11),n(48),n(97)],o=function(t,e,n){function i(t){return parseInt(t||0,10)}e.directive("qvBouncyGrid",[function(){return{restrict:"E",template:'<div class="qv-bouncy" ng-transclude></div>',transclude:true,replace:true,scope:{minWidth:"@",maxWidth:"@",padding:"@",selector:"@",listLen:"="},controller:["$scope","$element",function(e,o){var r=t("<style></style>").appendTo("body"),a=0,s,l=i(e.minWidth),u=i(e.maxWidth);function c(t){clearTimeout(s);s=setTimeout(d,t||50)}function d(){var t=i(e.padding),n,s,d,f;if(u){n=u;s=Math.ceil(o.width()/n);d=Math.floor(o.width()/s);f=(s>e.listLen?n:d)-t+"px!important;"}else{n=l;s=Math.floor(o.width()/n);d=Math.ceil(o.width()/s);f=(s>e.listLen?n:d)-t+"px!important;"}if(Number.isNaN(+d-t)&&a<20){a++;c()}else r&&r.length&&r.text(e.selector+" { width: "+f+"height: "+f+"}")}n.on("end",c);c(0);e.$watch("listLen",c);e.$on("$destroy",function(){clearTimeout(s);r&&r.remove();s=null;r=null;n.off("end",c)})}]}}])}.apply(e,i),void 0!==o&&(t.exports=o))},1429:function(t,e,n){"use strict";var i,o;!(i=[n(11),n(49),n(13),n(48),n(91),n(1220),n(1430),n(1431),n(1221),n(93),n(127),n(227),n(1432),n(89),n(90),n(111)],o=function(t,e,n,i,o,r,a,s,l,u,c,d,f,p,g){var m=g.getRandomString(16);var v=function t(){return e.getFlag("MLREST")};function h(t){return n.apiPath+"v1/apps/"+t+"/media/files/"}function b(t){return n.apiPath+"v1/apps/"+t+"/media/list/"}function x(t,e,n){if(v()){var i=b(e.id);n.get(i,{}).then(function(e){var n=e.data;if(void 0!==n.quota&&void 0!==n.totsize){var i=Math.floor((parseInt(n.quota,10)-parseInt(n.totsize,10))/1024/1024);t.quotaInfo=o.get("MediaLibrary.QuotaInfo",[i])}else t.showQuotaText=false});return}e.getContentLibraries().then(function(e){var n=l.getRemainingSpace(e)/1024/1024;n=n.toString().split("e");n=Math.floor(+(n[0]+"e"+(n[1]?+n[1]+1:1)));n=n.toString().split("e");n=+(n[0]+"e"+(n[1]?+n[1]-1:-1));t.quotaInfo=o.get("MediaLibrary.QuotaInfo",[n])})}function k(t,e,n){return u.getApp().then(function(i){var o={params:{externalpath:n,xrfkey:m},headers:{"X-Qlik-XrfKey":m}};var r=g.basePath+"qrs/appcontent/"+i.id+"/deletecontent";return e.delete(r,o).then(function(){x(t,i,e)}).catch(function(t,e){var n=e;0===e&&(n=500);d.showDialog({code:n})})})}function y(t,e,n){var i=e;if(!i){var o=t.getFilesWithStatus(f.SUCCESS);for(var r=0;r<o.length;r++)if(n===o[r].name){i=o[r];break}}return i}i.directive("qvMediaUpdate",function(){return{restrict:"E",replace:true,scope:{updateExp:"=",selectedFile:"=",selectFile:"&",confirm:"&",imageList:"="},template:a,controller:["$scope","$compile","$timeout","$http","qvContextMenu",function(e,n,a,l,d){var b,C;e.isEmpty=true;e.previewCounter=0;e.showQuotaText=true;f.autoDiscover=false;f.confirm=function(t,e,n){if(null!=n)return n()};function q(i,o){var r=e.$new();r.file=o;n(t(i))(r)}function w(t,n,r,a){var s=new p,u=r.split("\\").splice(-1)[0];e.updateExp.deleteDialogShown=true;C=i.getService("qvConfirmDialog").show({closeOnEscape:true,title:o.get("MediaLibrary.Confirm.Delete.Title"),message:o.get("MediaLibrary.Confirm.Delete.Description",[u]),okLabel:o.get("Common.Delete"),cancelLabel:o.get("Common.Cancel")});C.closed.then(function i(o){o&&k(e,l,r).then(function(){e.selectedFile===a&&e.selectFile()(t,null,null);n&&b.removeFile(n);s.resolve()},function(){s.reject()});e.updateExp.deleteDialogShown=false});return s.promise}function S(t,n,a,s){var u=new p;var c=y(b,s,n.name);e.updateExp.deleteDialogShown=true;C=i.getService("qvConfirmDialog").show({closeOnEscape:true,title:o.get("MediaLibrary.Confirm.Delete.Title"),message:o.get("MediaLibrary.Confirm.Delete.Description",[n.name]),okLabel:o.get("Common.Delete"),cancelLabel:o.get("Common.Cancel")});C.closed.then(function i(o){if(o){var s=h(a)+r.encodeString(n.id);l.delete(s,{}).then(function(){e.selectedFile===n.path&&e.selectFile()(t,null,null);c&&b.removeFile(c);u.resolve()},function(){u.reject()})}e.updateExp.deleteDialogShown=false});return u.promise}e.updateExp.deleteFile=function(t,e,n){var i=y(b,null,e);return w(t,i,e,n)};e.updateExp.deleteInAppFile=S;e.onCancelUpload=function(t,e){t.preventDefault();t.stopPropagation();b.cancelUpload(e)};e.onDelete=function(t,e,n,i){t.preventDefault();t.stopPropagation();v()?u.getApp().then(function(i){var o={id:n,name:n,path:h(i.id)+r.encodeString(n)};S(t,o,i.id,e)}):w(t,e,n,i)};e.onInsert=function(t){t.preventDefault();t.stopPropagation();e.confirm()()};e.onSelectImage=function(n,i){c.scrollElmentIntoView(t(i.previewElement),".media-library-preview-container",false,true);if(i.status!==f.SUCCESS){n.preventDefault();n.stopPropagation();return}e.selectFile()(n,i.qUrl,i.qUrlDef)};e.onContextMenu=function(t,n,i,o){t.preventDefault();t.stopPropagation();if(n.status!==f.SUCCESS)return;var r=d.menu();e.updateExp.isUploading||r.addItem({translation:"MediaLibrary.Insert",tid:"insert",select:function i(){e.selectedFile!==n.qUrl&&e.selectFile()(t,n.qUrl,n.qUrlDef);e.onInsert(t)}});r.addItem({translation:"Common.Delete",tid:"delete",select:function r(){e.onDelete(t,n,i,o)}});d.show(r,{position:{x:t.pageX,y:t.pageY},docking:"BottomRight"})};u.getApp().then(function(n){var i;var u;if(v()){var d=h(n.id);i=d;u=d}else{i=g.basePath+"qrs/appcontent/"+n.id+"/uploadfile?";u="/appcontent/"+n.id+"/"}x(e,n,l);var p={url:i,acceptedFiles:".png,.gif,.jpg,.jpeg",maxFilesize:5,parallelUploads:4,filesizeBase:1024,thumbnailWidth:200,thumbnailHeight:200,previewTemplate:s,previewsContainer:".media-library-preview-container",dictInvalidFileType:o.get("ErrorCode.3004"),dictFileTooBig:o.get("MediaLibrary.Error.MaxFileSizeExceeded"),dictResponseError:o.get("ErrorCode.500")};var k={headers:{"X-Qlik-XrfKey":m}};var y={method:"PUT",sending:function t(e,n){var i=n.send;n.send=function(){i.call(n,e)}}};b=new f("#media-library-dropzone",Object.assign({},p,v()?y:k));b.on("processing",function(t){v()?this.options.url=i+r.encodeString(t.name):this.options.url=i+"externalpath="+encodeURIComponent(t.name)+"&overwrite=false&xrfkey="+m});b.on("addedfile",function(n){q(n.previewElement,n);a(function(){e.isEmpty=false;e.previewCounter++;e.updateExp.isUploading=true;c.scrollElmentIntoView(t(n.previewElement),".media-library-preview-container",false,true);if(r.containsIllegalChars(n.name)){n.qErrorMsg="MediaLibrary.Error.IllegalCharsInFilename";b.cancelUpload(n)}if(v()){var i=(b.files||[]).concat(e.imageList||[]);for(var o=0;o<i.length;o++){var a=i[o];var s=n===a;var l=n.name===a.name;var u="canceled"!==a.status;if(!s&&l&&u){n.qErrorMsg="MediaLibrary.Error.FileAlreadyExists";b.cancelUpload(n);break}}}})});b.on("removedfile",function(){a(function(){e.previewCounter--;0===e.previewCounter&&(e.isEmpty=true)})});b.on("success",function(t){t.qUrl=u+r.encodeString(t.name);t.qUrlDef=u+t.name;x(e,n,l)});b.on("queuecomplete",function(){a(function(){e.updateExp.isUploading=false})});b.on("error",function(e,n,i){var r=t(e.previewElement).scope();r.showError=true;i&&i.status?409===i.status?r.errorMsg=o.get("MediaLibrary.Error.FileAlreadyExists"):413===i.status?r.errorMsg=o.get("MediaLibrary.Error.MaxFileSizeExceeded"):r.errorMsg=o.get("ErrorCode."+i.status):r.errorMsg=o.get(e.qErrorMsg?e.qErrorMsg:n)})});e.$on("$destroy",function(){b.destroy();e.updateExp.deleteDialogShown&&C.close()})}]}})}.apply(e,i),void 0!==o&&(t.exports=o))},1430:function(t,e){t.exports='<div id="media-library-upload">\n\t<div class="bouncy-wrap" ng-class="{\'empty\' : isEmpty}">\n\t\t<qv-bouncy-grid min-width="140" padding="15" selector=".preview-media-grid" list-len="previewCounter">\n\t\t\t<div class="media-library-preview-container" ng-hide="isEmpty"></div>\n\t\t</qv-bouncy-grid>\n\t</div>\n\t<div id="media-library-dropzone" class="dropzone" ng-class="{\'empty\' : isEmpty}">\n\t\t<div class="dz-message">\n\t\t\t<div class="upload-drop-text" q-translation="MediaLibrary.ClickOrDropHere"></div>\n\t\t\t<div class="upload-drop-icon-wrap">\n\t\t\t\t<i class="lui-icon lui-icon--upload"></i>\n\t\t\t</div>\n\t\t\t<div ng-if="showQuotaText" class="upload-drop-quota">{{quotaInfo}}</div>\n\t\t</div>\n\t</div>\n</div>\n'},1431:function(t,e){t.exports='<div tid="preview-item"\n\t class="q-media-grid preview-media-grid"\n\t ng-class="{\'selected-img\': selectedFile === file.qUrl}"\n\t ng-click="onSelectImage( $event, file )"\n\t qva-context-menu="onContextMenu( $event, file, file.name, file.qUrl )">\n\t<div class="q-media-wrap-img">\n\t\t<img class="q-media-img" width="100%" height="100%" data-dz-thumbnail />\n\t\t<div class="overlay"></div>\n\t\t<div class="preview-area">\n\t\t\t<div class="touch-area cancel-upload-area" q-title-translation="Common.Cancel" data-dz-remove ng-click="onCancelUpload( $event, file )">\n\t\t\t\t<button class="lui-overlay-button lui-overlay-button--small cancel-upload">\n\t\t\t\t\t<span class="lui-overlay-button__icon lui-icon lui-icon--small lui-icon--close"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div ng-if="selectedFile === file.qUrl" class="preview-area-edit">\n\t\t\t\t<div class="touch-area delete-image-area" q-title-translation="Common.Delete" ng-click="onDelete( $event, file, file.name, file.qUrl )">\n\t\t\t\t\t<button class="lui-overlay-button lui-overlay-button--small delete-image">\n\t\t\t\t\t\t<span class="lui-overlay-button__icon lui-icon lui-icon--small lui-icon--bin"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\ttid="insert"\n\t\t\t\t\tclass="insert-button lui-overlay-button"\n\t\t\t\t\tdata-name="insert"\n\t\t\t\t\tq-title-translation="MediaLibrary.Insert"\n\t\t\t\t\tng-click="onInsert( $event )">\n\t\t\t\t\t<span class="lui-overlay-button__icon  lui-icon  lui-icon--add"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="error-wrapper" ng-if="showError">\n\t\t\t<div class="error-icon">\n\t\t\t\t<i class="lui-icon lui-icon--warning-triangle"></i>\n\t\t\t</div>\n\t\t\t<div class="error-text">{{errorMsg}}</div>\n\t\t</div>\n\t\t<div class="preview-progress">\n\t\t\t<div class="preview-progressbar-wrapper">\n\t\t\t\t<span class="preview-progressbar" data-dz-uploadprogress></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="q-media-name" q-title-translation="{{file.name}}">{{file.name}}</div>\n</div>\n'},1437:function(t,e,n){"use strict";var i,o;!(i=[n(11),n(54),n(90),n(127),n(48),n(152),n(1438),n(1028),n(1439),n(1446),n(1029),n(107),n(304),n(99),n(1225),n(114),n(159),n(1447)],o=function(t,e,n,i,o,r,a,s,l,u,c,d,f,p,g,m,v){var h;var b={bold:false,italic:false,underline:false,justifyLeft:false,justifyCenter:false,justifyRight:false,link:false,fontSize:false};h={controller:["$scope","$element","$timeout","$sce","luiPopover",function(a,h,x,k,y){var C=k.getTrustedHtml(r.toHTML(a.options.markdown));a.data=JSON.stringify({data:[{type:"paragraph",data:{text:r.toMarkdown(C)}}]});a.states=b;a.cmdQueue=new u;var q;function w(){S();if("inline"===a.options.toolbar.style)q=a.options.target.showComponent(l,{textTool:a,options:a.options.toolbar||{}});else{q=y.show({template:l.template,controller:l.controller,input:{textTool:a,options:a.options.toolbar||{}},alignTo:a.options.target||h[0],dock:"top",variant:"inverse",closeOnOutside:true,outsideIgnore:"media-toolbar",showArrow:false,autoFocus:false});q.closed.then(function(){q=null})}}function S(){if(q){a.editor.formatBar.$el.remove();q=null}}this.scope=function(){return a};this.closing=function(){var t=this.scope().options;q&&("inline"===t.toolbar.style?t.target.empty():q.close())};a.getParagraph=function(){return a.editor.blocks[0]};a.getEditorElement=function(){return a.getParagraph().getTextBlock()};a.destroy=function(){S();a.destroyComponent()};a.calculateUsage=function(){var t=a.getEditorElement()[0];a.usage=Math.min(100,(t.textContent.length/d.textImage*100).toFixed(0));a.showUsage=a.usage>=90};function T(){var t=i.getAncestorsUntil(a.currentRange.startContainer,n),e=i.getAncestorsUntil(a.currentRange.endContainer,n);function n(t){return a.getEditorElement()[0]===t}function o(t,e){return Array.isArray(t)?t.some(function(t){return o(t,e)}):e.some(function(e){return e.nodeName.toLowerCase()===t})}function r(){var t=a.currentRange.startContainer;while(t.parentNode&&"DIV"!==t.tagName&&"P"!==t.tagName)t=t.parentNode;return t}return{rangeCollapsed:a.currentRange.collapsed,hasStartAncestorTag:function e(n){return o(n,t)},hasEndAncestorTag:function t(n){return o(n,e)},getParentParagraph:r}}a.refreshState=function(){if(!a.currentRange)return;o.$apply(a,function(){a.calculateUsage();var t=T();Object.keys(a.states).forEach(function(e){a.states[e]=r.Formatters[e].isActive(t)});var e;if(a.currentRange){e=document.queryCommandValue("foreColor");"undefined"!==typeof e&&(e=n.normalizeToHex(e))}a.color=e||"#545352";var o,l;if(a.currentRange){l=i.getParentElementWithAttribute(a.currentRange.endContainer,"font","size");if(l){o=l.getAttribute("size");o=s.htmlSizeToMarkdownSize[o];o=s.markdownSizeToHtmlSize[o]}"undefined"===o&&(o=null);l||o||"<br>"!==a.currentRange.endContainer.innerHTML&&!a.currentRange.endContainer.textContent||(a.fontSize=3)}o?a.fontSize=o:o||a.fontSize||(a.fontSize=3)})};a.saveRange=function(){var t=c.getRange();a.currentRange=t?t.cloneRange():null};a.restoreRange=function(){if(!a.currentRange)return;var t=c.getRange();t?t&&(c.rangeEquals(t,a.currentRange)||c.addRange(a.currentRange,true)):c.addRange(a.currentRange,true)};a.saveScroll=function(){a.currentScrollTop=a.getEditorElement()[0].scrollTop};a.restoreScroll=function(){a.currentScrollTop&&(a.getEditorElement()[0].scrollTop=a.currentScrollTop)};a.setJustify=function(t){a.focus();a.restoreScroll();a.restoreRange();a.execCustom({cmd:t});a.saveRange();a.refreshState()};a.setBIU=function(t){a.focus();a.restoreScroll();a.restoreRange();a.states[t]=!a.states[t];if(a.currentRange.collapsed){var e=a.cmdQueue.remove(t);e||a.cmdQueue.push({cmd:t})}else a.execCustom({cmd:t});a.saveRange()};a.setFontSize=function(t){a.focus();a.restoreScroll();a.restoreRange();if(a.currentRange.collapsed){a.cmdQueue.remove("fontSize");a.cmdQueue.push({param:t,cmd:"fontSize"})}else a.execCustom({param:t,cmd:"fontSize"});a.saveRange();a.fontSize=t};a.setColor=function(t){a.focus();a.restoreScroll();a.restoreRange();if(a.currentRange.collapsed){a.cmdQueue.remove("foreColor");a.cmdQueue.push({param:t,cmd:"foreColor"})}else a.execCustom({param:t,cmd:"foreColor"});a.saveRange();a.color=t};a.insertImage=function(t,e){t=f.addBasePath(t);e=f.addBasePath(e);a.focus();a.restoreRange();a.execCustom({param:t,cmd:"insertImage"});a.options.insertedImages.push({url:t,urlDef:e});a.saveRange();a.focus()};a.insertLink=function(t,e,n){e?c.addRange(e,true):a.restoreRange();a.focus();a.execCustom({url:t,cmd:n.cmd,formatter:n.formatter});a.saveRange();a.refreshState()};a.removeLink=function(t){c.addRange(t,true);a.execCustom({cmd:"unlink",range:t});a.saveRange();a.refreshState();a.focus()};a.execCustom=function(t){var n=r.Formatters[t.formatter||t.cmd];if(e.isUndefined(n))return;!e.isUndefined(n.onClick)&&e.isFunction(n.onClick)?n.onClick(t):document.execCommand(t.cmd,false,t.param)};a.focus=function(){a.getEditorElement().focus()};function M(e){var n=!p.treatAsDesktop();function o(t){a.saveRange();a.cmdQueue.clear();t&&a.refreshState()}t("body").on("mouseup.texttool",function(e){var r=t(e.target);if(r.closest(".qv-texttool-toolbar, .qui-immidiateContextual, .qv-modal-container-centered, .lui-popover").length){if(!i.isInput(document.activeElement)){a.focus();a.restoreRange()}}else n||document.activeElement===a.getEditorElement()[0]&&x(function(){o(true);a.$apply()})});n&&t(document).on("selectionchange.texttool",function(){if(document.activeElement===a.getEditorElement()[0]){var t=c.getRange();t&&!c.rangeEquals(t,a.currentRange)&&o(true)}});e.on("qv-activate","img",function(t){var e=c.createRangeForElement(t.target);a.focus();c.addRange(e,true);a.saveRange();a.refreshState()});e.on("scroll",function(){a.saveScroll()});e.on("keydown input",function(t){if(13!==t.which){a.cmdQueue.execAll(function(t){a.execCustom(t)});a.cmdQueue.clear()}x(function(){a.$apply()})});n||e.on("keyup",function(){x(o.bind(this,true),0)});e.on("DOMNodeInserted.autoDirection",function(n){var i=t(n.target);if("x-auto-direction-for-paragraphs"in e[0].attributes&&i.is("div,p")&&i[0]!==e[0]){v.supportDirAuto()&&i.attr("dir","auto");if(!i.is("[align],[style]")){g.usesAlign?i.attr("align","inherit"):i.css("text-align","inherit");""===i[0].textContent&&i.css("direction",m.direction)}}})}x(function(){a.editor=new r.Editor({el:h.find("textarea"),defaultType:"paragraph",onEditorRender:function t(){var e=h.find(".st-text-block");M(e);"function"===typeof a.options.onOpen&&a.options.onOpen(a);a.options.toolbar&&w(e);x(function(){a.refreshState()})}})});a.$on("$destroy",function(){S();t(h.find(".st-text-block")).off("DOMNodeInserted.autoDirection");t("body").off(".texttool");t(document).off(".texttool")})}],template:a};return h}.apply(e,i),void 0!==o&&(t.exports=o))},1438:function(t,e){t.exports='<div class="qv-st-container">\n\t<form class="qv-st-form">\n\t\t<textarea class="qv-st-instance">{{data}}</textarea>\n\t</form>\n</div>'},1439:function(t,e,n){"use strict";var i,o;function r(t){r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return r(t)}!(i=[n(11),n(96),n(1440),n(1028),n(1029),n(1441),n(832),n(1443),n(100),n(113),n(1444)],o=function(t,e,n,i,o,a,s,l,u,c){var d=i.palette;var f=i.fontSizes;var p={fontSizes:false,link:false,mediaLibrary:false,colorpicker:false};var g;var m={color:true,fontSize:true,bold:true,italic:true,underline:true,justifyLeft:true,justifyCenter:true,justifyRight:true,link:true,image:true};var v={template:n,scope:{textTool:"=",options:"=",alignTo:"="},controller:["$scope","$timeout","luiPopover",function(n,i,v){n.palette=d;n.fontSizes=Object.keys(f);n.foldouts=p;if("all"===n.options.buttons){n.buttons=m;n.buttonGroup1=true;n.buttonGroup2=true}else if("object"===r(n.options.buttons)){n.buttons=n.options.buttons;n.buttonGroup1=n.buttons.bold||n.buttons.italic||n.buttons.underline;n.buttonGroup2=n.buttons.justifyLeft||n.buttons.justifyCenter||n.buttons.justifyRight}n.exec=function(t,i){t.preventDefault();t.stopPropagation();e.preventGestures();0===i.indexOf("justify")?n.textTool.setJustify(i):n.haveSelection()&&n.textTool.setBIU(i)};n.setActiveFoldout=function(t){Object.keys(n.foldouts).forEach(function(e){e===t&&n.foldouts[e]?n.foldouts[e]=false:n.foldouts[e]=e===t})};n.shortFontSize=function(t){return f[t]||t};n.openMediaLibrary=function(){n.textTool.saveRange();n.setActiveFoldout("mediaLibrary");s.show({onCancel:function t(){n.setActiveFoldout();n.textTool.restoreRange();n.textTool.focus()},onConfirm:function t(e,o){n.setActiveFoldout();i(function(){if(o)n.textTool.insertImage(e,o);else{n.textTool.restoreRange();n.textTool.focus()}},100)},selectedFile:null})};n.closeColorpickerFoldout=function(i){t(i.target).closest("#qv-toolbar-colorpicker").length&&e.preventGestures();n.setActiveFoldout()};n.openFontsizeFoldout=function(){if(n.foldouts["fontSizes"]&&g){g.close();g=null;return}g=v.show({template:l,input:{foldouts:n.foldouts,fontSizes:n.fontSizes,textTool:n.textTool,shortFontSize:n.shortFontSize,setFontSize:n.setFontSize,closeFontsizeFoldout:n.closeFontsizeFoldout},alignTo:t("#qv-toolbar-fontsize")[0],variant:"inverse",closeOnEscape:true,autoFocus:false});n.setActiveFoldout("fontSizes");g.closing.then(function(i){i&&t(i.target).closest("#qv-toolbar-fontsize").length&&e.preventGestures();n.setActiveFoldout()});g.closed.then(function(){g=null})};var h=null;n.openLinkFoldout=function(){var e=n.textTool.currentRange,r,s={};if(e){r=t(e.commonAncestorContainer).closest("a");if(r.length){s.url=r.attr("href");s.bookmark=r.attr("data-bookmark-id");s.$node=r}n.textTool.saveRange();h=v.show({template:a.template,controller:a.controller,alignTo:t("#qv-toolbar-link")[0],input:{options:{toolbarScope:n,link:s,onSave:function t(e,o,r,a){var s;if(r){s=document.createRange();s.setStartBefore(r[0]);s.setEndAfter(r[0]);n.textTool.insertLink(o,s,a)}else i(function(){n.textTool.insertLink(o,null,a)});n.closeLinkFoldout(e)},onCancel:function t(e){n.closeLinkFoldout(e)},onRemove:function t(e,i){if(i){var r=o.createRangeForElement(i[0]);n.textTool.removeLink(r)}n.closeLinkFoldout(e)}}}});n.setActiveFoldout("link")}};n.setFontSize=function(t,e){t.preventDefault();n.setActiveFoldout();n.textTool.setFontSize(e);if(g){g.close();g=null}};n.closeLinkFoldout=function(i){i&&t(i.target).closest("#qv-toolbar-link").length&&e.preventGestures();n.setActiveFoldout();if(h){h.close();h=null}};n.linkDisabled=function(){var t=n.textTool.currentRange,e=!!n.textTool.states.link;return!e&&(!t||t.collapsed)};n.haveSelection=function(){var t=n.textTool.currentRange;return!(!t||t.collapsed)};var b={index:-1,color:"#ffffff"};var x={};n.themeService=u;n.paletteName=c.TI_IMPCP?"currentPalette":"smallPalette";n.allowCustomColors=c.TI_IMPCP;Object.defineProperty(n,"color",{get:function t(){var e=c.TI_IMPCP?u.currentPalette:u.smallPalette;if(!n.haveSelection()){b.index=e.indexOf("#ffffff");return b}x.index=e.indexOf(n.textTool.color);x.color=n.textTool.color;return x},set:function t(e){if(c.TI_IMPCP)n.textTool.setColor(u.resolveColor(e));else{e.index--;n.textTool.setColor(u.resolveColor(e,u.smallPalette))}}});n.$on("$destroy",function(){n.setActiveFoldout();if(h){h.close();h=null}});i(function(){n.textTool.refreshState()})}]};return v}.apply(e,i),void 0!==o&&(t.exports=o))},1440:function(t,e){t.exports='<lui-popover ng-if="options.style === \'popover\'" style="height: 44px;" align-to="alignTo" position="\'top\'" collision="\'collision\'" width="options.width" class="lui-popover qv-texttool-toolbar"\n\t\t\t\t\t  on-close-view="closeToolbar(event)" ondragstart="return false">\n\t<div qv-media-tool-buttons class="qv-texttool-toolbar"></div>\n</lui-popover>\n\n<div ng-if="options.style === \'inline\'" qv-media-tool-buttons class="qv-texttool-toolbar"></div>\n'},1441:function(t,e,n){"use strict";var i,o;!(i=[n(11),n(1442),n(94),n(173)],o=function(t,e,n,i){var o={template:e,scope:{alignTo:"=",options:"="},controller:["$scope","$timeout","$element",function(e,o,r){e.link=e.options.link;e.link.url&&"#"!==e.link.url||(e.link.url="");e.link.url=decodeURIComponent(e.link.url);var a=e.link.url;e.alignTo=e.options.alignTo;e.linkActive=true;e.closeFoldout=function(t){var n=encodeURI(e.link.url),i=e.link.$node;e.closed=true;if(n===a){e.options.onCancel(t);return}if(n&&n.length>0&&-1===n.indexOf("javascript:")){0!==n.search("[a-zA-Z0-9]+:")&&(n="http://"+n);e.options.onSave(t,n,i,{cmd:"createLink",formatter:"link"})}else e.options.onCancel(t)};e.onEnter=function(t){e.closeFoldout(t)};e.showRemove=!!a;e.removeLink=function(t){e.options.onRemove(t,e.link.$node)};e.inStorytelling=function(){return n.state===n.States.editstory};e.insertBookmark=function(t,n){e.options.onSave(t,n,e.link.$node,{cmd:"createLink",formatter:"bookmark"})};e.toggleLink=function(n){e.linkActive=n;n&&setTimeout(function(){t(".link-input").focus()})};e.exposedApi.closing=function(){e.closed||e.closeFoldout()};e.$on("$destroy",function(){e.closed||e.closeFoldout()});function s(){if(!e.link.url&&e.link.bookmark){e.toggleLink(false);l()}else e.toggleLink(true)}function l(){i.getList().then(function(t){t.getLayout().then(function(t){e.bookmarks=t;u()})})}function u(){e.bookmarks.forEach(function(t){t.qInfo.qId===e.link.bookmark?t.active=true:t.active=false})}s();e.$watch("linkActive",function(){e.linkActive&&l()});o(function(){r.find(".link-input").focus()})}]};return o}.apply(e,i),void 0!==o&&(t.exports=o))},1442:function(t,e){t.exports='<lui-popover style="width: 400px" on-close-view="closeFoldout(event)"\n\t\t\t\t\t  class="qv-link-foldout" tid="link-foldout">\n\t<div qva-outside-ignore-for="media-toolbar">\n\t\t<div class="link-header">\n\t\t\t<h1 class="link-header-text" ng-if="linkActive" q-translation="MediaTool.Toolbar.InsertUrlLink.Title"></h1>\n\t\t\t<h1 class="link-header-text" ng-if="!linkActive" q-translation="Common.Bookmarks"></h1>\n\t\t\t<div class="link-submenu" ng-if="inStorytelling()">\n\t\t\t\t<ul>\n\t\t\t\t\t<li class="lui-button" ng-if="!linkActive" qva-activate="toggleLink(true)" q-translation="Common.URL" data-tid="url-link" ></li>\n\t\t\t\t\t<li class="lui-button" ng-if="linkActive" qva-activate="toggleLink(false)" q-translation="Common.Bookmarks" data-tid="bookmark-link" ></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="link-content" ng-if="linkActive">\n\t\t\t<span class="link-label" q-translation="MediaTool.Toolbar.InsertUrlLink.Label"></span>\n\t\t\t<input class="link-input lui-input" maxlength="2000" ng-model="link.url" style="margin-bottom: 10px" qv-enter="onEnter($event)"/>\n\t\t\t<div class="link-remove-container" ng-if="showRemove">\n\t\t\t\t<button class="lui-button" qva-activate="removeLink($event)" q-title-translation="MediaTool.Toolbar.RemoveLink" tid="remove-link-btn">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--bin"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="bookmark-content" ng-if="!linkActive">\n\t\t\t<ul>\n\t\t\t\t<li ng-if="bookmarks.length < 1" class="bookmark-link-row">\n\t\t\t\t\t<span class="bookmark-link-row-content no-bookmarks" q-translation="Bookmarks.NoBookmarks"></span>\n\t\t\t\t</li>\n\t\t\t\t<li class="bookmark-link-row" ng-repeat="bookmark in bookmarks" ng-class="{ active: bookmark.active}">\n\t\t\t\t\t<span class="bookmark-link-row-content" qva-activate="insertBookmark($event, bookmark.qInfo.qId)" data-bookmark-id="{{bookmark.qInfo.qId}}">{{bookmark.qData.title}}</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\x3c!--</div>--\x3e\n</lui-popover>\n'},1443:function(t,e){t.exports='<lui-popover class="qv-toolbar-fontsize-foldout" ng-if="input.foldouts.fontSizes" qva-activate="openFontsizeFoldout" style="min-width: 40px; width: 44px;" qva-outside-ignore-for="media-toolbar">\n\t<lui-popover-body class="lui-nopad" collision="\'flipfit\'">\n\t\t<ul class="lui-list lui-list--inverse qv-media-tool-fontsize">\n\t\t\t<button class="lui-fade-button lui-fade-button--inverse lui-fade-button--large" style="border-bottom: 1px solid rgba(0, 0, 0, 0.3);" ng-repeat="size in input.fontSizes" qva-activate="input.setFontSize($event, size)" ng-class="{\'lui-active\':input.textTool.fontSize == size}">\n\t\t\t\t<span class="lui-list__text lui-list__action" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">{{input.shortFontSize(size)}}</span>\n\t\t\t</button>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n\n\n'},1444:function(t,e,n){"use strict";var i,o;!(i=[n(48),n(1445)],o=function(t,e){t.directive("qvMediaToolButtons",function(){return{restrict:"A",replace:true,template:e}})}.apply(e,i),void 0!==o&&(t.exports=o))},1445:function(t,e){t.exports='<div>\n\t<div ng-if="textTool.showUsage" class="usage"><span q-translation="MediaTool.YouHaveUsed"></span> <span>{{textTool.usage}}%</span></div>\n\n\t<div class="lui-buttongroup" ng-show="buttons.color">\n\t\t<div id="qv-toolbar-colorpicker" tid="colorpicker" q-title-translation="MediaTool.Toolbar.FontColor">\n\t\t\t<button qv-color-picker-button-new palette="themeService[paletteName]" style="width: 66px;" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" ng-click="onClick($event, \'inverse\')" x-variant="inverse" on-close="closecolorpickerfoldout" ng-model="color" ng-disabled="!haveSelection()" disable-none="true" extended="{{allowCustomColors}}"></button>\n\t\t</div>\n\t</div><div class="lui-buttongroup" ng-show="buttons.fontSize">\n\n\t\t<button id="qv-toolbar-fontsize" style="width: 66px" qva-activate="openFontsizeFoldout()" tid="fontSize" ng-disabled="!haveSelection()"\n\t\t\t\tng-class="{\'lui-active\':foldouts.fontSizes}" q-title-translation="MediaTool.Toolbar.FontSize" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse">\n\t\t\t<span class="lui_button__text">{{shortFontSize(textTool.fontSize)}}</span><span class="lui-button__caret  lui-caret"></span>\n\t\t</button>\n\t</div><div class="lui-buttongroup" ng-show="buttonGroup1">\n\t\t<button ng-class="{\'lui-active\':textTool.states.bold}" style="border-right: 1px solid rgba(0, 0, 0, 0.3);" ng-show="buttons.bold" tid="bold" ng-disabled="!haveSelection()"\n\t\t\t q-title-translation="MediaTool.Toolbar.Bold" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" qva-press="exec($event,\'bold\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--bold"></span>\n\t\t</button>\n\t\t<button ng-class="{\'lui-active\':textTool.states.italic}" style="border-right: 1px solid rgba(0, 0, 0, 0.3);"  ng-show="buttons.italic" tid="italic" ng-disabled="!haveSelection()"\n\t\t\t q-title-translation="MediaTool.Toolbar.Italic" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" qva-press="exec($event,\'italic\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--italic"></span>\n\t\t</button>\n\t\t<button ng-class="{\'lui-active\':textTool.states.underline}" ng-show="buttons.underline" tid="underline" ng-disabled="!haveSelection()"\n\t\t\t q-title-translation="MediaTool.Toolbar.Underline" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" qva-press="exec($event,\'underline\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--underline"></span>\n\t\t</button>\n\t</div><div class="lui-buttongroup" ng-show="buttonGroup2">\n\t\t<button ng-class="{\'lui-active\':textTool.states.justifyLeft}" ng-show="buttons.justifyLeft" tid="justifyLeft"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" q-title-translation="Common.Text.AlignLeft" qva-activate="exec($event,\'justifyLeft\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--align-left"></span>\n\t\t</button>\n\t\t<button ng-class="{\'lui-active\':textTool.states.justifyCenter}" ng-show="buttons.justifyCenter" tid="justifyCenter"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" q-title-translation="Common.Text.AlignCenter" qva-activate="exec($event,\'justifyCenter\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--align-center"></span>\n\t\t</button>\n\t\t<button ng-class="{\'lui-active\':textTool.states.justifyRight}" ng-show="buttons.justifyRight" tid="justifyRight"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" q-title-translation="Common.Text.AlignRight" qva-activate="exec($event,\'justifyRight\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--align-right"></span>\n\t\t</button>\n\t</div><div class="lui-buttongroup" ng-show="buttons.link">\n\t\t<button id="qv-toolbar-link" qva-activate="openLinkFoldout($event)" style="width: 66px;" tid="link"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" ng-class="{\'lui-active\':foldouts.link}" q-title-translation="{{ textTool.states.link ? \'MediaTool.Toolbar.EditURLLink\' : \'MediaTool.Toolbar.CreateURLLink\' }}"\n\t\t\t\tng-disabled="linkDisabled()">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--link" ng-class="{\'lui-active\':textTool.states.link}"></span><span class="lui-button__caret  lui-caret"></span>\n\t\t</button>\n\t</div><div class="lui-buttongroup" ng-show="buttons.image">\n\t\t<button id="qv-toolbar-image" qva-activate="openMediaLibrary($event)" ng-class="{\'lui-active\':foldouts.mediaLibrary}" tid="image"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" q-title-translation="MediaTool.Toolbar.InsertImage">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--image"></span>\n\t\t</button>\n\t</div>\n</div>\n'},1446:function(t,e,n){"use strict";var i,o;!(i=[],o=function(){var t=function t(){this.queue=[]};t.prototype.push=function(t){this.queue.push(t)};t.prototype.execAll=function(t){this.queue.forEach(t)};t.prototype.remove=function(t){var e,n,i=false;for(e=this.queue.length-1;e>=0;e--){n=this.queue[e];if(n.cmd===t){i=true;this.queue.splice(e,1)}}return i};t.prototype.clear=function(){this.queue=[]};return t}.apply(e,i),void 0!==o&&(t.exports=o))},1447:function(t,e,n){"use strict";var i,o;!(i=[n(152),n(54),n(1029),n(1448),n(1449),n(1450),n(1451),n(1452),n(1453),n(1454),n(1455),n(1456),n(1457),n(1458),n(107),n(1459)],o=function(t,e,n,i,o,r,a,s,l,u,c,d,f,p,g){delete t.Formatters.Bold;delete t.Formatters.Italic;delete t.Formatters.Link;delete t.Formatters.Unlink;t.Formatters.bold=new a;t.Formatters.italic=new s;t.Formatters.underline=new l;t.Formatters.justifyLeft=new r.Left;t.Formatters.justifyCenter=new r.Center;t.Formatters.justifyRight=new r.Right;t.Formatters.fontSize=new o;t.Formatters.foreColor=new i;t.Formatters.bookmark=new u;t.Formatters.link=new c;t.Formatters.unlink=new d;t.Formatters.measure=new f;t.Formatters.insertImage=new p;function m(t){var e=[];for(var n=0;n<t.childNodes.length;n++)3===t.childNodes[n].nodeType?e.push(t.childNodes[n]):e.push.apply(e,m(t.childNodes[n]));return e}function v(){var t=this;var e=t.textContent.length-g.textImage;if(e>0){var i=n.getRange();var o=i.commonAncestorContainer;if(3===o.nodeType){var r=m(document.activeElement);var a=r.indexOf(o);r=r.splice(0,a+1);r.reverse().forEach(function(t){if(e<=0)return false;if(t.nodeValue.length>e){t.splitText(t.nodeValue.length-e);t.parentNode.removeChild(t.nextSibling);n.addRange(i,true)}else t.parentNode.removeChild(t);e-=t.nodeValue.length})}}}t.Blocks.Paragraph=function(){return t.Block.extend({type:"paragraph",className:"st-block",icon_name:"paragraph",editorHTML:'<div class="st-required st-text-block" contenteditable="true" autocomplete="off" autocorrect="off"></div>',attributes:function n(){return e.extend(t.SimpleBlock.fn.attributes.call(this),{})},title:function t(){return"Paragraph"},loadData:function e(n){this.getTextBlock().html(t.toHTML(n.text,this.type))},focus:function t(){var e=this.getTextBlock();e.focus()},_initTextBlocks:function t(){var e=this.getTextBlock();e.bind("input",v).bind("paste",this._handleContentPaste).bind("keyup",this.getSelectionForFormatter).bind("mouseup",this.getSelectionForFormatter)},_initUIComponents:function t(){this.onFocus();this.onBlur()},_blockPrepare:function t(){this._initUI();this._initMessages();this.checkAndLoadData();this.$el.addClass("st-item-ready")},toData:function e(){t.log("toData for "+this.blockID);var n=this.getTextBlock().html();this.setData({text:t.toMarkdown(n,this.type)})}})}();t.FloatingBlockControls=function(){return t.FloatingBlockControls.extend({className:"",bound:[],initialize:function t(){},attributes:function t(){}})}();t.BlockControls=function(){return t.FloatingBlockControls.extend({className:"",bound:[],html:"",initialize:function t(){},hide:function t(){},show:function t(){},handleControlButtonClick:function t(){}})}();t.FormatBar=function(){return t.FormatBar.extend({className:"",initialize:function t(){}})}()}.apply(e,i),void 0!==o&&(t.exports=o))},1448:function(t,e,n){"use strict";var i,o;!(i=[n(152),n(1028),n(250),n(100),n(113)],o=function(t,e,n,i,o){var r=o.TI_IMPCP?i.currentPalette:i.smallPalette;n.register({name:"font-color",character:"#",toHTML:{callback:function t(e,n){var r=i.resolveColor(JSON.parse(n),o.TI_IMPCP?null:i.smallPalette);return'<font color="'+r+'">'+e+"</font>"}},toMarkdown:{priority:2,regex:/^<font(?: size="([0-7]|undefined)")? color="(#[a-f0-9]{3,6})"(?: size="([0-7]|undefined)")?.*?>([\s\S]+)<\/font>$/,callback:function t(n,i,a,s){if(""===s)return"";var l=n||a;if(null!==l&&void 0!==l){l=e.htmlSizeToMarkdownSize[l];s="%["+s+"]("+l+")"}var u=r.indexOf(i);if(-1===u){if(i)return"#["+s+']({"index":'+u+',"color":"'+i+'"})';return s}if(o.TI_IMPCP)return"#["+s+']({"index":'+u+',"color":"'+i+'"})';return"#["+s+"]("+u+")"},tags:[{name:"font",attr:["color"]}]}});return t.Formatter.extend({title:"color",cmd:"foreColor",text:"color",onClick:function t(e){document.execCommand(e.cmd,false,e.param)}})}.apply(e,i),void 0!==o&&(t.exports=o))},1449:function(t,e,n){"use strict";var i,o;!(i=[n(152),n(1028),n(250)],o=function(t,e,n){n.register({name:"font-size",character:"%",toHTML:{callback:function t(n,i){return"<font size='"+e.markdownSizeToHtmlSize[i]+"'>"+n+"</font>"}},toMarkdown:{regex:/^<font size="([0-7])".*?>([\s\S]+)<\/font>$/,callback:function t(n,i){if(""===i)return"";n>7&&(n=e.fontSizesPx[n]);if(null!==n&&void 0!==n){n=e.htmlSizeToMarkdownSize[n];return"%["+i+"]("+n+")"}return i},tags:[{name:"font",attr:["size"]}]}});return t.Formatter.extend({title:"fontsize",cmd:"fontSize",text:"fontsize"})}.apply(e,i),void 0!==o&&(t.exports=o))},1450:function(t,e,n){"use strict";var i,o;!(i=[n(152),n(48),n(208),n(250),n(1225),n(159)],o=function(t,e,n,i,o,r){var a=o.usesAlign;i.register({name:"justify",character:"^",toHTML:{callback:function t(e,i){var o=r.supportDirAuto()?"auto":r.detectTextDirection(e.replace(/<\/?[^>]+(>|$)/g,""));e||(e="&nbsp;");return a?'<div dir="'+o+'" align="'+n.encodeForAttr2(i)+'">'+e+"</div>":'<div dir="'+o+'" style="text-align: '+n.encodeForAttr2(i)+';">'+e+"</div>"}},toMarkdown:{regex:/^<(?:div|p).*?(?:style="text(?:\\)?-)?align(?:="|: )(left|center|right|justified|inherit)(?:"|;).*?>([\s\S]+)<\/(?:div|p)>$/,callback:function t(e,n){return"^["+n+"]("+e+")"},tags:[{name:"div",attr:["align","style"]},{name:"p",attr:["align"]}]}});var s=t.Formatter.extend({title:"align left",cmd:"justifyLeft",text:"left",isActive:function t(e){var n=e.getParentParagraph(),i=window.getComputedStyle(n);return!!/left/.test(i.textAlign)||!(!i||"ltr"!==i.direction||/right/.test(i.textAlign)||/center/.test(i.textAlign))},onClick:function t(){var n=e.getService("qvMediaTool").getParagraph().el.style;var i=n.direction;if("ltr"===i||!i){i="ltr";n.direction="rtl"}document.execCommand("justifyLeft",false);"ltr"===i&&(n.direction="ltr")}});var l=t.Formatter.extend({title:"align center",cmd:"justifyCenter",text:"center",onClick:function t(){document.execCommand("justifyCenter",false)}});var u=t.Formatter.extend({title:"align right",cmd:"justifyRight",text:"right",isActive:function t(e){var n=e.getParentParagraph(),i=window.getComputedStyle(n);return!!/right/.test(i.textAlign)||!(!i||"rtl"!==i.direction||/left/.test(i.textAlign)||/center/.test(i.textAlign))},toMarkdown:function t(e){return i.toMarkdown(e)},toHTML:function t(e){return i.toHTML(e)},onClick:function t(){var n=e.getService("qvMediaTool").getParagraph().el.style;var i=n.direction;"rtl"===i&&(n.direction="ltr");document.execCommand("justifyRight",false);"rtl"===i&&(n.direction="rtl")}});return{Left:s,Right:u,Center:l}}.apply(e,i),void 0!==o&&(t.exports=o))},1451:function(t,e,n){"use strict";var i,o;!(i=[n(152),n(250)],o=function(t,e){e.register({name:"bold",character:"**",toHTML:{priority:5,regex:/\*\*(?!\\)([\s\S]+?(?!\*\\))\*\*/g,callback:function t(e){return">b/<"+e+">b<"},reverse:true},toMarkdown:{priority:-5,regex:/^<(?:b|strong)>([\s\S]+)<\/(?:b|strong)>$/,callback:function t(e){if(""===e)return"";return"**"+e+"**"},tags:[{name:"b",attr:[]},{name:"strong",attr:[]}]}});return t.Formatter.extend({title:"bold",cmd:"bold",text:"B",isActive:function t(e){return e.rangeCollapsed?e.hasStartAncestorTag(["b","strong"])||e.hasEndAncestorTag(["b","strong"]):e.hasStartAncestorTag(["b","strong"])&&e.hasEndAncestorTag(["b","strong"])},toMarkdown:function t(e){return e},toHTML:function t(e){return e}})}.apply(e,i),void 0!==o&&(t.exports=o))},1452:function(t,e,n){"use strict";var i,o;!(i=[n(152),n(250)],o=function(t,e){e.register({name:"italic",character:"_",toHTML:{priority:5,regex:/_(?!\\)([\s\S]+?(?!_\\))_/g,callback:function t(e){return">i/<"+e+">i<"},reverse:true},toMarkdown:{priority:-5,regex:/^<(?:i|em)>([\s\S]+)<\/(?:i|em)>$/,callback:function t(e){if(""===e)return"";return"_"+e+"_"},tags:[{name:"i",attr:[]},{name:"em",attr:[]}]}});return t.Formatter.extend({title:"italic",cmd:"italic",text:"I",isActive:function t(e){return e.rangeCollapsed?e.hasStartAncestorTag(["i","em"])||e.hasEndAncestorTag(["i","em"]):e.hasStartAncestorTag(["i","em"])&&e.hasEndAncestorTag(["i","em"])},toMarkdown:function t(e){return e},toHTML:function t(e){return e}})}.apply(e,i),void 0!==o&&(t.exports=o))},1453:function(t,e,n){"use strict";var i,o;!(i=[n(152),n(250)],o=function(t,e){e.register({name:"underline",character:"~",toHTML:{priority:5,regex:/~(?!\\)([\s\S]+?(?!~\\))~/g,callback:function t(e){return">u/<"+e+">u<"},reverse:true},toMarkdown:{priority:-5,regex:/^<u>([\s\S]+)<\/u>$/,callback:function t(e){if(""===e)return"";return"~"+e+"~"},tags:[{name:"u",attr:[]}]}});return t.Formatter.extend({title:"underline",cmd:"underline",text:"U",isActive:function t(e){return e.rangeCollapsed?e.hasStartAncestorTag("u")||e.hasEndAncestorTag("u"):e.hasStartAncestorTag("u")&&e.hasEndAncestorTag("u")},toMarkdown:function t(e){return e},toHTML:function t(e){return e}})}.apply(e,i),void 0!==o&&(t.exports=o))},1454:function(t,e,n){"use strict";var i,o;!(i=[n(11),n(48),n(152),n(208),n(250)],o=function(t,e,n,i,o){function r(n,i){var o=e.getService("qvMediaTool"),r=o.getRange().commonAncestorContainer,a=t(r).find("a[href="+i+"]");"#text"===r.nodeName&&(a="A"!==n.nodeName?t(n).find("a[href="+i+"]"):t(n));0===a.length&&(a=t(r).find("a:not([href])"));0===a.length&&(a=t(r));return a}o.register({name:"bookmark",character:"$",toHTML:{callback:function t(e,n){return'<a href="#" class="bookmark-link" data-bookmark-id="'+i.encodeForAttr2(n.replace(/\\/g,""))+'">'+e+"</a>"}},toMarkdown:{regex:/^<a (?=.*data\\-bookmark\\-id="([^"]+)").*?>([\s\S]+?)<\/a>$/,callback:function t(e,n){return"$["+n+"]("+e+")"},tags:[{name:"a",attr:["data\\-bookmark\\-id"]}]}});return n.Formatter.extend({title:"bookmark",cmd:"createLink",text:"Bookmark",isActive:function t(e){return e.rangeCollapsed?e.hasStartAncestorTag("a")||e.hasEndAncestorTag("a"):e.hasStartAncestorTag("a")&&e.hasEndAncestorTag("a")},onClick:function e(n){var i=n.url;t(document).on("DOMNodeInserted.bookmark",function(e){var n=r(e.target,i);t.each(n,function(e,n){t(n).hasClass("bookmark-link")||setTimeout(function(){n.setAttribute("href","#");n.removeAttribute("_moz_dirty");n.className+="bookmark-link";n.setAttribute("data-bookmark-id",i)})});setTimeout(function(){t(document).off("DOMNodeInserted.bookmark")},250)});document.execCommand("unlink",false,false);document.execCommand(this.cmd,false,i)}})}.apply(e,i),void 0!==o&&(t.exports=o))},1455:function(t,e,n){"use strict";var i,o;!(i=[n(152),n(250)],o=function(t,e){e.register({name:"link",character:"@",toHTML:{callback:function t(e,n){0===n.indexOf("javascript:")&&(n="");0!==n.search("[a-zA-Z0-9]+:")&&(n="http://"+n);n=n.replace(/\\(["'])/g,"%5C$1").replace(/'/g,"%27").replace(/"/g,"%22").replace(/\$/g,"%24");n=decodeURI(n).replace(/'/g,"%27");var i="<a href='"+n+"' target='\\_blank' title='"+n+"'>"+e+"</a>";return i}},toMarkdown:{regex:/^<a.*?href="(?!#)([^"]+)".*?>([\s\S]+?)<\/a>$/,callback:function t(e,n){return"@["+n+"]("+e+")"},tags:[{name:"a",attr:["href"]}]}});return t.Formatter.extend({title:"link",cmd:"createLink",text:"Link",isActive:function t(e){return e.rangeCollapsed?e.hasStartAncestorTag("a")||e.hasEndAncestorTag("a"):e.hasStartAncestorTag("a")&&e.hasEndAncestorTag("a")},onClick:function t(e){var n=e.url;document.execCommand(this.cmd,false,n)}})}.apply(e,i),void 0!==o&&(t.exports=o))},1456:function(t,e,n){"use strict";var i,o;!(i=[n(152)],o=function(t){return t.Formatter.extend({title:"unlink",cmd:"unlink",text:"Unlink",onClick:function t(e){var n=e.url;document.execCommand(this.cmd,false,n)}})}.apply(e,i),void 0!==o&&(t.exports=o))},1457:function(t,e,n){"use strict";var i,o;!(i=[n(48),n(152),n(90),n(91),n(381),n(125),n(203),n(250),n(107)],o=function(t,e,n,i,o,r,a,s,l){var u="M8.52173913,6.7974547 L7.2173913,6.7974547 C6.63768116,8.94989566 6.34782609,10.0261161 6.34782609,10.0261161 C6.34782609,10.0261161 5.47826087,12.5566886 4.69565217,13.4292998 C3.91304348,14.301911 2.86956522,15 1.73913043,15 C0.608695652,15 0,14.4764333 0,13.6038221 C0,12.9057331 0.347826087,12.2949053 1.13043478,12.2949053 C1.82608696,12.2949053 2.08695652,12.6439498 2.08695652,13.0802554 C2.08695652,13.6038221 1.82608696,13.8656054 1.82608696,14.0401277 C1.82608696,14.2146499 1.91304348,14.301911 2,14.301911 C2.26086957,14.301911 2.52173913,13.7783443 2.7826087,12.9057331 C3.04347826,12.0331219 3.02736159,12.1999953 3.56521739,10.3751606 C3.92378792,9.15860415 4.27161401,7.93694847 4.60869565,6.71019358 C3.97231956,6.71019358 3.57818933,6.71019358 3.42630497,6.71019358 C3.19728707,6.62505435 3.39757261,5.92484349 3.73913043,5.92484349 L4.86956522,5.92484349 C5.13043478,4.87771005 6,2.69618204 6.86956522,1.91083196 C7.73913043,1.12548188 8.35843467,0.899791884 9.30434783,1.03822076 C10.250261,1.17664964 11.0434783,1.56178748 11.0434783,2.5216598 C11.0434783,3.13248765 10.6956522,3.65605437 10.0869565,3.65605437 C9.47826087,3.65605437 9.2173913,3.30700989 9.13043478,2.78344316 C9.13043478,2.43439868 9.30434783,1.91083196 9.13043478,1.82357084 C8.95652174,1.73630972 8.69565217,2.17261532 8.52173913,2.5216598 C8.4057971,2.75435612 8.02898551,3.88875069 7.39130435,5.92484349 L8.52173913,5.92484349 C8.85454756,5.92484349 8.82013881,6.71019358 8.52173913,6.7974547 Z M15.0434783,5.57579901 C15.7391304,5.57579901 16,5.92484349 16,6.53567134 C16,7.14649918 15.730061,7.6600281 15.0434783,7.75732702 C14.4347826,7.84358819 14.3156572,7.27944592 14.0869565,7.14649918 C13.9424037,7.06246867 13.826087,7.2337603 13.6521739,7.40828254 C13.3913043,7.75732702 13.1304348,8.28089374 13.0434783,8.36815486 C13.0434783,8.5426771 13.2173913,8.89172158 13.3913043,9.58981054 C13.6521739,10.3751606 13.6521739,10.5496829 13.826087,10.5496829 C14.0869565,10.5496829 14.2608696,10.2878995 14.4347826,9.85159391 C14.5217391,9.50254942 14.6086957,9.4152883 14.7826087,9.4152883 C14.8695652,9.4152883 14.9565217,9.50254942 14.9565217,9.76433278 C14.9565217,10.5496829 13.826087,12.7312109 12.4347826,12.7312109 C12,12.7312109 11.7391304,12.3821664 11.4782609,11.9458608 C11.3043478,11.5095552 11.1304348,10.8987273 10.9565217,10.2878995 C10.8695652,10.5496829 10.3478261,11.5095552 9.65217391,12.120383 C9.30434783,12.4694275 8.95652174,12.6439498 8.52173913,12.6439498 C7.82608696,12.6439498 7.56521739,12.2076442 7.56521739,11.5968163 C7.56521739,11.0732496 7.82608696,10.2006384 8.52173913,10.2006384 C8.86956522,10.2006384 9.04347826,10.2878995 9.13043478,10.5496829 C9.30434783,10.9569014 9.44927536,11.1605107 9.56521739,11.1605107 C9.91304348,11.1605107 10.2608696,10.636944 10.8695652,9.67707166 C10.6956522,8.9789827 10.5217391,8.36815486 10.4347826,7.93184926 C10.2608696,7.40828254 10.173913,7.14649918 9.91304348,7.14649918 C9.65217391,7.14649918 9.47826087,7.49554366 9.39130435,7.75732702 C9.2173913,8.1063715 9.2173913,8.45541598 8.95652174,8.45541598 C8.7826087,8.45541598 8.69565217,8.28089374 8.69565217,8.1063715 C8.69565217,7.32102142 9.73913043,5.40127677 11.2173913,5.40127677 C12,5.40127677 12.2314776,5.67252615 12.4347826,6.20012531 L12.8695652,7.58280478 C13.9130435,6.18662685 14.173913,5.57579901 15.0434783,5.57579901 Z";var c=document.createElement("canvas");function d(t,e){var n=t.qHyperCube.qMeasureInfo,i;for(i=0;i<n.length;++i)if(n[i].cId===e)return n[i];return null}function f(t,e){var n=t.qHyperCube.qMeasureInfo,i,o;for(i=0;i<n.length;++i)if(n[i].cId===e){o=t.qHyperCube.qGrandTotalRow[i];if(!o||!o.qText||"NaN"===o.qNum&&"-"===o.qText)return"";return s.escapeMarkdown(o.qText)}return""}function p(t){var e=30,n,i=a.getDevicePixelToBackingStoreRatio(),o=150,r=.35,s="13px 'QlikView Sans'",l=c.getContext("2d"),d=a.measureTextObject({shape:{text:t,width:112,font:s}});n=Math.ceil(Math.min(d.width+50,o));c.height=e*i;c.width=n*i;c.style.height=e+"px";c.style.width=n+"px";l.clearRect(0,0,c.width,c.height);l.save();l.scale(i,i);l.globalAlpha=r;l.translate(6,8);l.fill(new Path2D(u));l.restore();l.globalAlpha=1;l.font="13px 'QlikView Sans'";l.fillText(d.lines[0],32,e/2+5);l.restore();var f=c.toDataURL("image/png");var p=document.createElement("img");p.setAttribute("src",f);p.setAttribute("class","tokenized-measure");p.setAttribute("width",n+"px");p.setAttribute("height",e+"px");return p}s.register({name:"measure",character:"=",toHTML:{callback:function e(n,r){var a=t.getService("qvMediaTool"),s,u;if(a.isActive()){var c=a.getOptions();if(!c.useMeasures)return"";var g=c.propertyHandler.getMeasure(r);var m;var v=false;if(g){var h=d(c.layout,r);if(!h||h.qError){v=true;m=i.get("Object.ErrorMessage.MissingMeasure")}else m=h.qFallbackTitle||""}else m=c.copiedMeasures[r];var b=JSON.stringify(g);u=p(m);u.setAttribute("data-measure-id",r);u.setAttribute("data-measure-name",o.compressToBase64(m));u.setAttribute("data-measure",o.compressToBase64(b));u.setAttribute("data-tid","ti-measure");v&&u.classList.add("invalid-measure")}else{s=a.getCurrentLayout();var x=f(s,r);if(null===x)return"";x.length>l.textImage&&(x=x.substr(0,l.textImage-1)+"…");u=document.createElement("span");u.setAttribute("data-tid","ti-measure");u.appendChild(document.createTextNode(x))}return u.outerHTML}},toMarkdown:{callback:function e(){var i="";var a=this.getAttribute("data\\-measure\\-id");var s=t.getService("qvMediaTool").getOptions();if(!d(s.layout,a)&&!s.copiedMeasures[a]){var l=o.decompressFromBase64(this.getAttribute("data\\-measure"));var u=JSON.parse(l);a=n.generateId();u.qDef.cId=a;var c=s.properties;c.qHyperCubeDef.qMeasures.push(u);r.indexAdded(c.qHyperCubeDef.qInterColumnSortOrder,c.qHyperCubeDef.qDimensions.length+c.qHyperCubeDef.qMeasures.length-1);var f=o.decompressFromBase64(this.getAttribute("data\\-measure\\-name"));s.copiedMeasures[a]=f}return"=["+i+"]("+a+")"},tags:[{name:"img",attr:["data\\-measure\\-id"]}]}});return e.Formatter.extend({title:"measure",cmd:"",text:"measure",toMarkdown:function t(e){return e},toHTML:function t(e){return e}})}.apply(e,i),void 0!==o&&(t.exports=o))},1458:function(t,e,n){"use strict";var i,o;!(i=[n(48),n(152),n(250),n(304)],o=function(t,e,n,i){function o(t,e,n){var i=n?"qStaticContentUrl":"qStaticContentUrlDef";for(var o=0;o<e.length;o++)if(e[o].id===t)return e[o].url[i].qUrl;return""}function r(t){return t.replace(/\\(["'])/g,"%5C$1").replace(/'/g,"%27").replace(/"/g,"%22").replace(/\$/g,"%24")}n.register({name:"image",character:"!",toHTML:{callback:function e(a,s){var l=t.getService("qvMediaTool");if(l.useImageArray()){var u=s;var c;c=l.isActive()?l.getOptions().layout:l.getCurrentLayout();s=o(a,c.images,true);s=s?n.escapeMarkdown(s):u}s=i.stripBasePath(s);s=r(s);s=i.addBasePath(s);a||(a="image");a=r(a);return"<img src='"+s+"' data-image-id='"+a+"'>"}},toMarkdown:{priority:1,regex:/^<img.*?src="([^"]+)".*?>$/,callback:function t(e){var o=this.getAttribute("data\\-image\\-id")||"";o||(o="");e=n.unescapeMarkdown(e);e=i.stripBasePath(e);e=n.escapeMarkdown(e);return"!["+o+"]("+e+")"},tags:[{name:"img",attr:["src"],dontMatchAttr:["data\\-measure\\-id"]}]}});return e.Formatter.extend({title:"image",cmd:"insertImage",text:"image",onClick:function t(e){document.execCommand(e.cmd,false,e.param)}})}.apply(e,i),void 0!==o&&(t.exports=o))},1459:function(t,e,n){"use strict";var i,o;!(i=[n(250),n(90)],o=function(t,e){var n=/color: rgb\\\((\d{1,3}), (\d{1,3}), (\d{1,3})/i;var i=/font\\-size: (\d+)px/i;var o=/text\\-decoration: underline/i;var r=/font\\-weight: bold/i;t.register({name:"paste",character:"`",toMarkdown:{regex:/^<(span|font|i|b|u) style="(.+?)">(.+?)<\/(?:span|font|i|b|u)>$/,callback:function a(s,l,u){var c;if(n.test(l)){l=l.replace(/rgb\\\(/g,"rgb(").replace(/\\\);/g,");");u=t.getFormatter("#").toMarkdown.callback(null,e.normalizeToHex(l),null,u)}c=i.exec(l);c&&(u=t.getFormatter("%").toMarkdown.callback(c[1],u));c=o.exec(l);c&&(u=t.getFormatter("~").toMarkdown.callback(u));c=r.exec(l);c&&(u=t.getFormatter("**").toMarkdown.callback(u));this.innerHTML=u;this.removeAttribute("style");return t.toMarkdown(this.outerHTML.trim())},tags:[{name:"span",attr:["style"]},{name:"font",attr:["style"]},{name:"b",attr:["style"]},{name:"i",attr:["style"]},{name:"u",attr:["style"]}]}});t.register({name:"word",character:"``",toMarkdown:{regex:/^.+$/i,callback:function t(){return" "},tags:[{name:"style",attr:[]},{name:"w:WordDocument",attr:[]}]}})}.apply(e,i),void 0!==o&&(t.exports=o))},1657:function(t,e){t.exports='<div class="qv-ti" style=\'width: 100%; height: 100%;\' qva-activate="edit()">\n\t<div class="media-tool-scrollbar" ng-if="!editing && !initializing && !saving && !empty" dir="{{ direction }}">\n\t\t<div class="qv-media-tool-html" ng-class="[sizeClass, visibilityClass, responsiveClass, {\'qv-interactive\': navigation}]" ng-click="clickHtml($event)" ng-bind-html="html" dir="{{ textDirection }}"></div>\n\t</div>\n\t<div class="text-image-hint" ng-if="empty && !editing" ng-class="{ \'selected\': isSelected() }">\n\t\t<div class="hint-content" ng-show="!isSelected() || !editmode || object.isLink">\n\t\t\t<i class="hint-icon lui-icon lui-icon--text"></i>\n\t\t\t<div class="text" q-translation="Object.TextImage.EmptyHint"></div>\n\t\t</div>\n\t\t<div class="hint-content" ng-show="isSelected() && editmode && !object.isLink">\n\t\t\t<i class="hint-icon lui-icon lui-icon--plus"></i>\n\t\t\t<div class="text" q-translation="Object.TextImage.EmptySelectedHint"></div>\n\t\t</div>\n\t</div>\n\t<div class="qv-media-tool-editor" ng-class="[sizeClass, visibilityClass, responsiveClass]" ng-if="initializing || editing || saving" qv-text-image-editor x-editor-options="editorOptions" x-save="save" dir="{{ direction }}" qva-outside-ignore-for="media-toolbar"></div>\n</div>'},1658:function(t,e,n){"use strict";var i,o;!(i=[n(101)],o=function(t){return{type:"items",component:"accordion",items:{data:{uses:"data",items:{measures:{disabledRef:""},dimensions:{disabledRef:""}}},settings:{uses:"settings",items:{general:{items:{showTitles:{defaultValue:false}}},presentation:{type:"items",translation:"properties.presentation",items:{responsive:{type:"string",component:"dropdown",ref:"responsive",translation:"properties.textImage.responsive",defaultValue:"all",undefinedValue:"none",snapshot:{tid:"property-responsive"},options:[{value:"all",translation:"properties.textImage.responsive.textImages"},{value:"text",translation:"properties.textImage.responsive.text"},{value:"images",translation:"properties.textImage.responsive.images"},{value:"none",translation:"properties.textImage.responsive.none"}]}}},markdown:{type:"string",ref:"markdown",show:false,defaultValue:""},images:{type:"array",ref:"images",show:false,defaultValue:[]},backgroundImage:{type:"items",translation:"properties.backgroundImage",grouped:true,items:{useBackgroundImage:{ref:"background.isUsed",type:"boolean",translation:"properties.backgroundImage.use",component:"switch",defaultValue:false,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}]},backgroundUrl:{ref:"background.url.qStaticContentUrlDef.qUrl",layoutRef:"background.url.qStaticContentUrl.qUrl",schemaIgnore:true,translation:"Common.Image",tooltip:{select:"properties.media.select",remove:"properties.media.removeBackground"},type:"string",component:"media",defaultValue:"",show:function e(n){return t.getValue(n,"background.isUsed")}},backgroundSize:{ref:"background.size",translation:"properties.backgroundImage.size",type:"string",component:"dropdown",defaultValue:"auto",options:[{value:"auto",translation:"properties.backgroundImage.originalSize"},{value:"alwaysFit",translation:"properties.backgroundImage.sizeAlwaysFit"},{value:"fitWidth",translation:"properties.backgroundImage.sizeFitWidth"},{value:"fitHeight",translation:"properties.backgroundImage.sizeFitHeight"},{value:"fill",translation:"properties.backgroundImage.sizeStretch"}],show:function e(n){return t.getValue(n,"background.isUsed")&&t.getValue(n,"background.url.qStaticContentUrlDef.qUrl")}},backgroundPosition:{ref:"background.position",translation:"Common.Position",type:"string",component:"align-matrix",defaultValue:"topLeft",show:function e(n){return t.getValue(n,"background.isUsed")&&t.getValue(n,"background.url.qStaticContentUrlDef.qUrl")&&"fill"!==t.getValue(n,"background.size")},currentSize:function e(n){return t.getValue(n,"background.size")}}}}}}}}}.apply(e,i),void 0!==o&&(t.exports=o))},1659:function(t,e,n){"use strict";var i,o;!(i=[n(125),n(90)],o=function(t,e){function n(t,e){var n=[],i=[],o,r,a;o=t.map(function(t){return t.qDef.cId});r=e.map(function(t){return t.qDef.cId});for(a=r.length-1;a>=0;--a)o.contains(r[a])||n.push({index:a,id:r[a],measure:e[a]});for(a=0;a<o.length;++a)r.contains(o[a])?o.lastIndexOf(o[a])!==a&&i.push({index:a,id:o[a],measure:t[a]}):i.push({index:a,id:o[a],measure:t[a]});return{removed:n,added:i}}function i(t,e){return e.replace(/=\[(\w*?)]\((\w*?)\)/g,function(e,n,i){return t===i?"":e})}function o(t,e,n,i){var o=-1;return n.replace(/=\[(\w*?)]\((\w*?)\)/g,function(n,r,a){if(a===t){++o;var s="undefined"!==typeof i;if(!s||s&&o===i)return"=["+r+"]("+e+")"}return n})}function r(i,r){var a=r.qHyperCubeDef.qMeasures;var s=n(i,a);s.removed.forEach(function(e){var n=e.index;a.splice(n,1);t.indexRemoved(r.qHyperCubeDef.qInterColumnSortOrder,r.qHyperCubeDef.qDimensions.length+n)});s.added.forEach(function(n){var i=n.measure.qDef.cId,s=e.generateId();n.measure.qDef.cId=s;a.push(n.measure);t.indexAdded(r.qHyperCubeDef.qInterColumnSortOrder,r.qHyperCubeDef.qDimensions.length+a.length-1);r.markdown=o(i,s,r.markdown,1)})}return{removeMeasure:i,replaceMeasure:o,syncMeasures:r}}.apply(e,i),void 0!==o&&(t.exports=o))},1660:function(t,e,n){"use strict";var i,o;!(i=[n(250),n(304),n(90)],o=function(t,e,n){function i(t,e){var n=[],i=[],o;var r=t.map(function(t){return t.id||""});var a=e.map(function(t){return t.id});for(o=a.length-1;o>=0;--o)r.contains(a[o])||n.push({index:o,id:a[o],url:e[o].url});function s(t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e[n].url.qStaticContentUrlDef.qUrl;return null}for(o=0;o<r.length;++o)a.contains(r[o])?r.lastIndexOf(r[o])!==o&&i.push({index:o,id:r[o],url:s(r[o])}):i.push({index:o,id:r[o],url:t[o].url});return{removed:n,added:i}}function o(t,e,n,i){var o=-1;return n.replace(/!\[(\w*?)]\((.*?)\)/g,function(n,r,a){if(r===t){++o;var s="undefined"!==typeof i;if(!s||s&&o===i)return"!["+e+"]("+a+")"}return n})}function r(r,a){a.images||(a.images=[]);var s=a.images;var l=i(r,s);l.removed.forEach(function(t){var e=t.index;s.splice(e,1)});l.added.forEach(function(i){var r=i.id,l=n.generateId();var u=t.unescapeMarkdown(i.url);u=e.stripBasePath(u);s.push({id:l,url:{qStaticContentUrlDef:{qUrl:u}}});a.markdown=o(r,l,a.markdown,r?1:0)})}return{syncImages:r}}.apply(e,i),void 0!==o&&(t.exports=o))},250:function(t,e,n){"use strict";var i,o;!(i=[n(90)],o=function(t){var e={};function n(){var n=e.formatters.map(function(e){return e.character?t.escapeRegExp(e.character):""});var i="("+n.join("|")+"){1}\\[";var o="\\]\\(([^\\\\)]*(?:\\\\.[^\\\\)]*)*)\\)";var r="((?![\\s\\S]*?"+i+"[\\s\\S]*?)[\\s\\S]*?)";e.markdownRegex=new RegExp(i+r+o,"mg")}function i(t,e,n){var o=t.exec(e);var r=[];while(o){if(r.indexOf(o.index)>-1)break;r.push(o.index);e=n(e,o);o=t.exec(e)}return r.length?i(t,e,n):e}function o(t){return t.split("").reverse().join("")}e.register=function(t){e.formatters.push(t);n()};e.toHTML=function(t,n){var a=n||r();var s=false;t=t.replace(/\$&amp;/g,"&#36;&amp;");t=i(e.markdownRegex,t,function(t,n){return t.replace(n[0],function(){return e.getFormatter(n[1]).toHTML.callback(n[2],n[4])})});a.forEach(function(e){if(!e.toHTML||!e.toHTML.regex)return;e.toHTML.reverse&&(t=o(t));t=i(e.toHTML.regex,t,function(t,n){var i=n.splice(0,1)[0];s=true;return t.replace(i,e.toHTML.callback.apply(e.toHTML.callback,n))});e.toHTML.reverse&&(t=o(t))});return s?e.toHTML(t,n):t};e.toMarkdown=function(t,e){var n=e||a();var i=new Option;i.innerHTML=t;n.forEach(function(t){t.toMarkdown.tags.forEach(function(e){var n=Array.prototype.slice.call(i.getElementsByTagName(e.name)).reverse();n.forEach(function(n){var i=!e.attr.length||e.attr.some(function(t){return n.hasAttribute(t)});var o=e.dontMatchAttr&&e.dontMatchAttr.some(function(t){return n.hasAttribute(t)});if("img"===e.name&&n.hasAttribute("src")&&!n.hasAttribute("data\\-measure")){var r=n.getAttribute("src");n.setAttribute("src",r.replace(/\\/g,""))}var a;a=t.toMarkdown.regex?i&&!o&&t.toMarkdown.regex.exec(n.outerHTML.trim()):[n.outerHTML.trim()];if(!o&&i&&a){var s=document.createElement("span");s.innerHTML=t.toMarkdown.callback.apply(n,a.slice(1));n.parentNode.replaceChild(s,n)}})})});return i.innerHTML.replace(/<(\/)?span>/g,"")};e.getFormatter=function(t){var n,i=e.formatters;for(n=0;n<i.length;n++)if(i[n].character===t)return i[n];return null};function r(){var t=e.formatters.filter(function(t){return!!t.toHTML});t.sort(function(t,e){var n=t.toHTML.priority||0,i=e.toHTML.priority||0;return i-n});return t}function a(){var t=e.formatters.filter(function(t){return!!t.toMarkdown});t.sort(function(t,e){var n=t.toMarkdown.priority||0,i=e.toMarkdown.priority||0;return i-n});return t}e.escapeMarkdown=function(t){return t.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/~/g,"\\~").replace(/-/g,"\\-")};e.unescapeMarkdown=function(t){return t.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\~/g,"~").replace(/\\-/g,"-")};e.reset=function(){e.formatters=[];e.markdownRegex=null};e.reset();return e}.apply(e,i),void 0!==o&&(t.exports=o))},299:function(t,e,n){"use strict";var i,o;!(i=[n(198)],o=function(t){var e;e=t.extend("HyperCube",{init:function t(e,n){this._super(e,"/qHyperCubeDef",n);this.cacheCube.setMethodName("getHyperCubeData")},updateCache:function t(e){if(e&&e.qHyperCube){this.cacheCube.set(e.qHyperCube.qDataPages);this.cacheCube.setCubeSize(e.qHyperCube.qSize)}else this.cacheCube.clear()},getData:function t(e,n){return n?this.model.getHyperCubeData(n,e):this.cacheCube.getData(e)},getHyperCubeBinnedData:function t(e,n,i,o){return this.model.getHyperCubeBinnedData(this.path,e,{width:0,height:0},n,i,o,0)},getHyperCubeContinousData:function t(e,n){return this.model.getHyperCubeContinuousData(this.path,e,n)},getReducedData:function t(e,n,i){i=void 0!==i?i:"D1";return this.model.getHyperCubeReducedData(this.path,e,n,i)},selectDimensionRange:function t(e){var n=e.map(function(t){return{qDimIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:true,qMaxInclEq:t.range.maxIncluded}}});return this.model.selectHyperCubeContinuousRange(this.path,n)},selectRange:function t(e,n,i){var o;n=!!n;i=i||[];o=e.map(function(t){return{qMeasureIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:false!==t.range.minInclEq,qMaxInclEq:false!==t.range.maxInclEq}}});return this.model.rangeSelectHyperCubeValues(this.path,o,i,n)},selectRects:function t(e,n){var i;n=n||[];i=e.map(function(t){var e=t[0],i=t[1];return{qRanges:[{qMeasureIx:e.idx,qRange:{qMin:e.range.min,qMax:e.range.max,qMinInclEq:false!==e.range.minInclEq,qMaxInclEq:false!==e.range.maxInclEq}},{qMeasureIx:i.idx,qRange:{qMin:i.range.min,qMax:i.range.max,qMinInclEq:false!==i.range.minInclEq,qMaxInclEq:false!==i.range.maxInclEq}}],qColumnToSelect:n}});return this.model.multiRangeSelectHyperCubeValues(this.path,i,false)},select:function t(e,n){return this.model.selectHyperCubeCells(this.path,e,n)},selectValues:function t(e,n,i,o){return this.model.selectHyperCubeValues(o||this.path,e,n,i)},getProperties:function t(){return this.model.getProperties()},getDimensionInfos:function t(){return this.model.layout.qHyperCube.qDimensionInfo},getMeasureInfos:function t(){return this.model.layout.qHyperCube.qMeasureInfo},clearSelections:function t(){return this.model.resetMadeSelections()},hasSelections:function t(){return this.model.layout.qSelectionInfo.qMadeSelections}});return e}.apply(e,i),void 0!==o&&(t.exports=o))},304:function(t,e,n){"use strict";var i,o;!(i=[n(13)],o=function(t){var e={};e.stripBasePath=function(e){return e.replace(t.rootPath,"").replace(/^\.\.\//i,"/")};e.addBasePath=function(e){return t.rootPath+("/"===e[0]?e.substr(1):e)};return e}.apply(e,i),void 0!==o&&(t.exports=o))},832:function(t,e,n){"use strict";var i,o;!(i=[n(1425)],o=function(t){function e(e){t.show(e)}function n(){t.hide()}function i(){return t.isShown()}return{show:e,hide:n,isShown:i}}.apply(e,i),void 0!==o&&(t.exports=o))}}]);