/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[47],{1055:function(e,t,n){"use strict";var i,o;!(i=[n(11),n(48),n(91),n(108),n(420),n(299),n(1591),n(1592),n(1170),n(89),n(1593),n(122),n(94),n(120),n(189),n(106),n(1594),n(1595),n(297)],o=function(e,t,n,i,o,r,a,s,l,u,c,f,p,h,m,d,g){var v;function y(e){var t=this.$scope,i=this;h.get(e).then(function(e){t.sheet=e;d(t,"sheet",function(e){var n=e&&e.labelExpression,o=e&&e.qMeta&&e.qMeta.title;t.sheetLinkTitle=n||o||"";t.sheetIsMissing=false;i.updateStyles()})}).catch(function(){t.sheetLinkTitle=n.get("Bookmarks.SheetMissingDialogTitle");t.sheetIsMissing=true;i.updateStyles()})}v=o.extend("kpi",{namespace:".kpi",init:function e(i,o,r,a){var s=this,l,u=t.getService("$timeout"),h=function e(){t.$apply(i,function(){i.showVerifyDialog=false})};this._super(i,o,r,a);var m=o.find(".qv-viz");this._$element=m;this.$scope.mainValueStyle={};this.$scope.measureTitleStyle={};this.$scope.viz={};this.$scope.secondaryValues=[];this.$scope.secondaryLayouts=[];this.$scope.showSecondaryValues=false;this.$scope.mainValue={formattedValue:"",value:null,style:null};i.showVerifyDialog=false;i.onShowVerifyDialog=function(){if(!i.linkInteractionOn)return;t.$apply(i,function(){i.showVerifyDialog=true;i.updateVerifyDialogFontSize()});l=u(h,3e3)};i.linkToSheet=function(){if(!i.linkInteractionOn||i.sheetIsMissing||!i.showVerifyDialog)return;var e=f.getUrlForSheet(i.layout.sheetLink,"analysis");i.layout.openUrlInNewTab||void 0===i.layout.openUrlInNewTab?window.open(e):f.goToSheet(i.layout.sheetLink,p.States.ANALYSIS);u.cancel(l);h()};i.updateVerifyDialogFontSize=function(){if(i.showVerifyDialog){var e=i.verifyDialogLayoutInfo.components[0];c.checkLayout(i.verifyDialogLayoutInfo);c.sizeComponent(e,i.verifyDialogLayoutInfo,i.verifyDialogLayoutInfo.boundingBox.width,i.verifyDialogLayoutInfo.boundingBox.height,c.TextScaleMode.SCALE,c.ElementScaleMode.NONE);i.verifyDialogStyle={fontSize:e.fontSizes.fontSize}}};this.$scope.baseLayoutInfo={direction:c.Direction.COLUMN,ratio:1e9,boundingBox:{width:m.width(),height:m.height()},components:[{size:{min:.5,treshold:{width:50,height:12}},getText:function e(){return i.measureTitle},fontSizes:{maxNrChars:15,min:{fontSize:10,height:12},max:{fontSize:40,height:80}},isVisible:function e(){return i.showMeasureTitle}},{size:{min:.8,stretch:true},ratio:1,components:[{size:{min:.5,stretch:true},getText:function e(){return s.$scope.mainValue.formattedValue+(s.$scope.mainValue.glyph?s.$scope.mainValue.glyph:"")},fontSizes:{maxNrChars:4,min:{fontSize:10,height:10},max:{fontSize:500,height:500}}},{size:.5,components:this.$scope.secondaryLayouts,isVisible:function e(){return s.$scope.secondaryLayouts.length>0}}]}]};this.$scope.secondaryLayoutInfo={size:{min:1,treshold:{width:50,height:30}},direction:c.Direction.COLUMN,components:[{size:{min:.6,stretch:true},fontSizes:{maxNrChars:8,min:{fontSize:10,height:20},max:{fontSize:500,height:500}}},{size:{min:.4},fontSizes:{maxNrChars:15,min:{fontSize:10,height:20},max:{fontSize:30,height:500}}}]};this.$scope.verifyDialogLayoutInfo={size:{min:1,width:20,height:20},boundingBox:{width:0,height:0},components:[{size:{min:.2,treshold:{width:100,height:100}},getText:function e(){return n.get("properties.kpi.verifyToGoSheet")},fontSizes:{maxNrChars:16,min:{fontSize:10,height:20},max:{fontSize:13,height:50}}}]};i.$on("$destroy",function(){l&&u.cancel(l)})},isValid:function e(t){return!!t&&!!t.qHyperCube&&t.qHyperCube.qMeasureInfo.length&&!t.qHyperCube.qMeasureInfo.some(function(e){return!!e.qError})},updateData:function e(t){if(this._destroyed)return u.reject();if(!this.isValid(t))return u.resolve();this._data=t;var n=t.qHyperCube.qDataPages[0].qMatrix[0],o=t.qHyperCube.qMeasureInfo.length,r=i.inClient(),a=o-1,s=this.getFormatterForMeasures(t.qHyperCube.qMeasureInfo.length),l=this.$scope.secondaryValues,c,f=this.$scope.secondaryLayouts,p,h,m,d,g,v=this.$scope.sheet&&this.$scope.sheet.qMetaDef&&this.$scope.sheet.qMetaDef.title?this.$scope.sheet.qMetaDef.title:null,b=function e(){return m},C=function e(){return g},x;this.$scope.showMeasureTitle=t.showMeasureTitle;this.$scope.textAlign=t.textAlign;this.$scope.baseLayoutInfo.components[1].components[0].fontSizes.maxNrChars=0;var S=7/3;this.$scope.baseLayoutInfo.components[1].components[0].fontSizes.scale="S"===t.fontSize?S:"L"===t.fontSize?1:Math.sqrt(S);this.$scope.baseLayoutInfo.components[1].components[0].fontSizes;this.$scope.useLink=t.useLink;r&&this.$scope.useLink&&t.sheetLink&&(!v||t.sheetLink!==v)&&y.call(this,t.sheetLink);this.$scope.mainValue.value=t.qHyperCube.qDataPages[0].qMatrix[0][0].qNum;this.$scope.mainValue.formattedValue=s[0]&&"U"===s[0].type&&!Number.isNaN(+t.qHyperCube.qDataPages[0].qMatrix[0][0].qNum)?s[0].formatValue(this.$scope.mainValue.value):t.qHyperCube.qDataPages[0].qMatrix[0][0].qText;this.$scope.mainValue.formatter=s[0];for(x=0;x<a;x++){h=n[x+1].qText;d=n[x+1].qNum;m=!s[x+1]||"U"!==s[x+1].type||Number.isNaN(+d)?h:s[x+1].formatValue(d);g=t.qHyperCube.qMeasureInfo[x+1].qFallbackTitle;if(!l[x]){p=this.createSecondaryValue(b,C);c={style:p.layoutInfo.components[0].fontSizes.value,titleStyle:p.layoutInfo.components[1].fontSizes.value};l.push(c);f.push(p.layoutInfo)}c=l[x];c.value=d;c.formattedValue=m;c.formatter=s[x+1];c.measureTitle=g;f[x].components[0].fontSizes.maxNrChars="S"===t.fontSize?14:"L"===t.fontSize?6:8}if(l.length>a){f.splice(a,l.length-a);l.splice(a,l.length-a)}this.$scope.measureTitle=t.qHyperCube.qMeasureInfo[0].qFallbackTitle;this.$scope.showSecondaryValues=l.length>0;return u.resolve()},updateStyles:function e(){if(!this._data)return u.resolve();var n=this,o=this._data,r=i.inClient(),a,s;this.$scope.linkInteractionOn=r&&this._navigation&&this.$scope.layout.useLink&&!!this.$scope.layout.sheetLink;this.$scope.verifyDialogLayoutInfo.boundingBox.width=this._$element.width();this.$scope.verifyDialogLayoutInfo.boundingBox.height=this._$element.height();this.$scope.baseLayoutInfo.boundingBox=this.getBoundingBox();c.checkLayout(this.$scope.baseLayoutInfo);this.$scope.baseLayoutInfo.components.forEach(function(e){var t=n.backendApi.isSnapshot&&n._data&&!n.options.freeResize;var i=t?n._data.snapshotData.isZoomed:n.options.isZoomed;c.sizeComponent(e,n.$scope.baseLayoutInfo,n.$scope.baseLayoutInfo.boundingBox.width,n.$scope.baseLayoutInfo.boundingBox.height,0===n.$scope.secondaryValues.length&&i?c.TextScaleMode.MAX:c.TextScaleMode.SCALE,0===n.$scope.secondaryValues.length&&i?c.ElementScaleMode.ADJUSTTOTEXT:c.ElementScaleMode.NONE)});var l=t.getService("qvGlyphService");s=g.getValueInfo(this.$scope.mainValue.value,0,o);this.$scope.mainValue.cssClass=l.getIconClass(s.icon);this.$scope.mainValue.showGlyph=s.useCondColor&&s.icon&&""!==s.icon;a=this.$scope.baseLayoutInfo.components[1].components[0];var f=a.fontSizes.fontSizeScale;this.$scope.mainValue.style={color:s.color,fontSize:a.fontSizes.fontSize};a=this.$scope.baseLayoutInfo.components[0];this.$scope.measureTitleStyle={fontSize:a.fontSizes.fontSize};for(var p=1;p<o.qHyperCube.qMeasureInfo.length;p++){a=this.$scope.baseLayoutInfo.components[1].components[1].components[p-1].components[0];s=g.getValueInfo(this.$scope.secondaryValues[p-1].value,p,o);this.$scope.secondaryValues[p-1].style={color:s.color,fontSize:10*Math.min(f/2,a.fontSizes.fontSizeScale)+"%"};a=this.$scope.baseLayoutInfo.components[1].components[1].components[p-1].components[1];this.$scope.secondaryValues[p-1].titleStyle={fontSize:10*Math.min(f/2,a.fontSizes.fontSizeScale)+"%"};this.$scope.secondaryValues[p-1].cssClass=l.getIconClass(s.icon);this.$scope.secondaryValues[p-1].showGlyph=s.useCondColor&&s.icon&&""!==s.icon}this.$scope.updateVerifyDialogFontSize();var h=u();var m=t.getService("$timeout");m(function(){h.resolve()},0,false);return h.promise},createSecondaryValue:function t(n,i){var o=e.extend({},this.$scope.secondaryLayoutInfo);o.components[0].getText=n;o.components[1].getText=i;return{layoutInfo:o,text:n()}},paint:function e(){return this.updateStyles()},resize:function e(t,n){return this.paint(t,n)},getFormatterForMeasures:function e(t){var n=this._data,i,o=new l(this.backendApi.localeInfo,n.qHyperCube.qMeasureInfo),r,a=[];for(var s=0;s<t;s++){i=n.qHyperCube.qMeasureInfo[s];r=o.getMeasureFormatter(s);if(r&&"U"===r.type){r.pattern=r.createPatternFromRange(i.qMax,i.qMax,true);if(Math.floor(Math.log(Math.abs(i.qMax))/Math.log(10))%3===2){r.pattern=r.pattern.substr(0,r.pattern.length-2);r.pattern+="A"}r.prepare()}a.push(r)}return a},on:function e(){this.options.navigation&&(this._navigation=true);this._super();this.updateStyles()},off:function e(){this.options.navigation&&(this._navigation=false);this._super();this.updateStyles()},getBoundingBox:function e(){var t=this.backendApi.isSnapshot&&this._data&&!this.options.freeResize;return t&&this._data.snapshotData.elementRatio?{width:this._data.snapshotData.object.size.w,height:this._data.snapshotData.object.size.w*this._data.snapshotData.elementRatio}:{width:this._$element.width(),height:this._$element.height()}},setSnapshotData:function e(t){this._super();t.snapshotData.isZoomed=this.options.isZoomed;t.snapshotData.elementRatio=this._$element.height()/this._$element.width()},getPreferredSize:function e(){var t=u();t.resolve({w:this._$element.width(),h:c.FixedMobileHeight});return t.promise}});return{type:"kpi",BackendApi:r,template:a,View:v,definition:s,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qInitialDataFetch:[{qWidth:500,qHeight:10}],qSuppressMissing:true},showTitles:false},data:{measures:{min:1,max:2,description:function e(t,i){var o=0===i?"Visualizations.Descriptions.KPI.FirstMeasure":"Visualizations.Descriptions.KPI.SecondMeasure";return n.get(o)}}},support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:false},getDropFieldOptions:function e(t,n,i,o,r){t.AddFieldAsMeasure(i,n,r);o()},getDropDimensionOptions:function e(t,n,i,o){o()},importProperties:function e(t,n,i){var o=m.hypercube.importProperties.apply(m,[t,n,i]),r=o.qProperty.qHyperCubeDef.qMeasures,a,s,l;if(r)for(s=0,a=r.length;s<a;s++){l=r[s].qDef;l.conditionalColoring||(l.conditionalColoring={useConditionalColoring:false,singleColor:3,segments:{limits:[],colors:[{color:2}],paletteColors:[{index:6}]}})}return o},exportProperties:m.hypercube.exportProperties.bind(m)}}.apply(t,i),void 0!==o&&(e.exports=o))},1162:function(e,t,n){"use strict";var i,o;!(i=[n(109),n(395)],o=function(e,t){function n(t,n){return e.toHex(e.blend(t,n,.5))}function i(e,t,i){if(e.length!==t.length+1||t.length!==i.length)return false;var o=[e[0]];var r=[];var a=t.length;var s;for(s=0;s<a;s++)if(t[s]){o.push(n(e[s],e[s+1]));o.push(n(e[s],e[s+1]));r.push(i[s]);if(s!==a-1){o.push(e[s+1]);o.push(e[s+1]);r.push((i[s]+i[s+1])/2)}}else{o.push(e[s]);o.push(e[s+1]);r.push(i[s]);if(s!==a-1&&t[s+1]){o.push(e[s+1]);o.push(e[s+1]);r.push((i[s]+i[s+1])/2)}}o.push(e[s]);return{colors:o.reverse(),limits:r}}function o(e,t,n,i){var o=e.getLegendParts(0);var r=[];var a=t.max-t.min;if(Number.isNaN(+a))return r;var s;var l;var u=t.max;var c;for(var f=0;f<o.length;f++){s=o[f];if(i)c=f===o.length-1?t.min:i[o.length-1-f-1];else{l=(s.limits[1]-s.limits[0])*a;c=u-l}s.isMax=0===f;s.max=n.formatValue(s.isMax?t.max:u);s.min=n.formatValue(f+1===o.length?t.min:c);s.id=[];s.id[0]=s.isMax?t.max:u;s.id[1]=f===o.length-1?t.min:c;s.type="range";u=c;r.push(s)}return r}function r(e,n){var i,o,r=new t,a;if(n)for(o=0;o<e.length;o++){a=e[o];if(a)for(i=0;i<a.length;i+=2)r.addColorPart(a[i],a[i+1],o)}else for(i=0;i<e.length;i+=2)r.addColorPart(e[i],e[i+1]);return r}return{setupColors:i,setupLegend:o,createColorScale:r}}.apply(t,i),void 0!==o&&(e.exports=o))},1170:function(e,t,n){"use strict";var i,o;!(i=[n(11),n(92),n(511),n(246)],o=function(e,t,n){function i(e){return!!e.qIsAutoFormat&&["M","D","T","TS","IV"].indexOf(e.qNumFormat.qType)<0}var o=t.extend("ChartFormatting",{init:function t(n,i){this.localeInfo=n;var o=this.getFormattersForMeasures(i);var r=e.extend(true,[],o);if(r&&1===r.length&&i[0].isCustomFormatted)r=null;else{var a=0;for(var s=0;s<r.length;s++)if(i[s].isCustomFormatted){r[s]=null;a++}a===r.length&&(r=null)}this.measureFormatters=r;this.combinedMeasuresFormatter=this.getFormatterFromFormatters(o)},createFormatter:function e(){return new n(this.localeInfo)},getLocaleInfo:function e(){return this.localeInfo||{}},getFormatters:function e(){return this.measureFormatters||[]},getMeasureFormatter:function e(t){if(this.measureFormatters&&this.measureFormatters[t])return this.measureFormatters[t]},getCombinedMeasuresFormatter:function e(){return this.combinedMeasuresFormatter},formatMeasure:function e(t,n){var i=this.measureFormatters[n];if(i)return i.format(t);return t},getFormatterFromFormatters:function e(t){var i=0,o=0,r,a,s,l=0,u=t?t.filter(function(e){return!!e.values&&!Number.isNaN(+e.values.range)}):[],c,f;if(t&&t.length){t.forEach(function(e){"U"===e.type||e.values&&Number.isNaN(+e.values.range)?o++:["D","T","TS","IV"].contains(e.type)?i=1:l=1;e.prepare();return e});if(u.length){r=u.reduce(function(e,t){return Math.min(t.values.min,e)},u[0].values.min);a=u.reduce(function(e,t){return Math.max(t.values.max,e)},u[0].values.max);s=Math.abs(a-r)}if(i+l>1){f=t.filter(function(e){return"datetime"!==e.type})[0]||{};c=new n(this.localeInfo,f.pattern,f.thousandDelimiter,f.decimalDelimiter,"U");Number.isNaN(+s)||(c.pattern=c.createPatternFromRange(r,a,true))}else if(i+l===1&&0===o){f=t[0]||{};c=new n(this.localeInfo,f.pattern,f.thousandDelimiter,f.decimalDelimiter,f.type)}else{f=t.filter(function(e){return"U"!==e.type});f=f.length?f[0]:t[0]||{};c=new n(this.localeInfo,f.pattern,f.thousandDelimiter,f.decimalDelimiter,f.type);Number.isNaN(+s)||"U"!==f.type||(c.pattern=c.createPatternFromRange(r,a,true))}c.prepare()}c||(c=new n(this.localeInfo,"0"));return c},getFormattersForMeasures:function e(t,o){var r=[],a;if(t&&t.length){a=o?t.filter(function(e,t){return o.indexOf(t)>=0}):t;r=a.map(function(e){var t=i(e),o=new n(this.localeInfo,e.qNumFormat.qFmt,e.qNumFormat.qThou,e.qNumFormat.qDec,t?"U":e.qNumFormat.qType),r=Math.abs(e.qMax-e.qMin),a=Number.isNaN(+r);o.values={min:e.qMin,max:e.qMax,range:r};!a&&t&&(o.pattern=o.createPatternFromRange(e.qMin,e.qMax,true));o.prepare();return o},this)}return r}});return o}.apply(t,i),void 0!==o&&(e.exports=o))},122:function(e,t,n){"use strict";var i,o;!(i=[n(135),n(177),n(90)],o=function(e,t,n){var i={getUrlForHub:function t(){return e.buildHubUrl().replace("/noData/true","")},getUrlForSheet:function i(o,r,a){var s=n.getParameterByName("app");r||(r=t.analysis(s).state);if(a)return e.buildUrl(true,"sense","app",s,"sheet",o,"state",r,"overlay",a);return e.buildUrl(true,"sense","app",s,"sheet",o,"state",r)},getUrlForStory:function i(o,r,a){var s=n.getParameterByName("app");"undefined"===typeof r&&(r=t.story(s).state||"editstory");return a?e.buildUrl(true,"sense","app",s,"story",o,"state",r,"slide",a):e.buildUrl(true,"sense","app",s,"story",o,"state",r)},getUrlForOverview:function t(){var i=n.getParameterByName("app");return e.buildUrl(true,"sense","app",i)},getUrlForDataModelViewer:function t(){var i=n.getParameterByName("app");return e.buildUrl(true,"datamodelviewer","app",i)},getUrlForDataLoadEditor:function t(){var i=n.getParameterByName("app");return e.buildUrl(true,"dataloadeditor","app",i)},getUrlForDataManager:function t(){var i=n.getParameterByName("app");return e.buildUrl(true,"sense","app",i,"datamanager","datamanager")},goToHub:function t(){e.setUrl(i.getUrlForHub(),false,false,true)},goToOverview:function t(){e.setUrl(i.getUrlForOverview())},goToDataManager:function t(){e.setUrl(i.getUrlForDataManager())},goToDataModelViewer:function t(){e.setUrl(i.getUrlForDataModelViewer())},goToDataLoadEditor:function t(){e.setUrl(i.getUrlForDataLoadEditor())},goToSheet:function t(n,o,r){e.setUrl(i.getUrlForSheet(n,o,r))},goToStory:function t(n,o,r){e.setUrl(i.getUrlForStory(n,o,r))}};return i}.apply(t,i),void 0!==o&&(e.exports=o))},1305:function(e,t,n){"use strict";var i,o;function r(e){r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return r(e)}!(i=[n(92),n(398)],o=function(e,t){var n,i=null,o=[],a=true,s=Math.PI,l=Math.cos;function u(){n.tick()&&(i=t.request(u))}function c(e){o.push(e);e._isRunning=true;null===i&&(i=t.request(u))}function f(e,t){for(var n in e){this._props[n]||(this._props[n]={});this._props[n][t]=Array.isArray(e[n])?e[n].slice():e[n]}}function p(){var e,t,n,i;for(e in this._props){i=this._props[e];t="from"in i?i.from:this._target[e];n=i.to;i.from=t;if(Array.isArray(t)){var o=t.map(function(e){return e.value});var r=n.map(function(e){return e.value});i.fresh=n.filter(function(e){return o.indexOf(e.value)<0});i.rotten=t.filter(function(e){return r.indexOf(e.value)<0});i.ripe=n.filter(function(e){return o.indexOf(e.value)>=0});i.combined=i.rotten.concat(i.ripe).concat(i.fresh);i.isArray=true}else Number.isNaN(+t)||Number.isNaN(+i.to)||(i.change=i.to-t)}}function h(e){var t;for(t in e)if(e[t].isArray){if(e[t].fresh.length||e[t].rotten.length)return true}else if(e[t].change)return true;return false}n=e.extend("Tween",{init:function e(t,i,o,a){var s,l,u,f={},m=true;this._target=t;this._enabled=true;for(s in i){l=Array.isArray(t[s])?t[s].slice():t[s];u=Array.isArray(i[s])?i[s].slice():i[s];f[s]={from:l,to:u}}this._props=f;p.call(this);if("object"===r(o)){this._duration=o.duration||200;this._easing="function"===typeof o.easing?o.easing:n.easing[o.easing||"linear"];m=false!==o.autoStart}else{this._duration=o||200;this._easing="function"===typeof a?a:n.easing[a||"linear"]}this._dfd=new d;this._pos=0;this._isRunning=false;if(!m)return;if(h(this._props)){this._startTime=Date.now();c(this)}else this._step(true)},from:function e(t){this._isRunning||f.call(this,t,"from");return this},to:function e(t){this._isRunning||f.call(this,t,"to");return this},start:function e(){if(!this._isRunning&&this._enabled&&a){p.call(this);h(this._props)?this._start():this._dfd.resolve()}return this},willStart:function e(){if(!this._isRunning&&this._enabled&&a){p.call(this);if(h(this._props))return true}return false},stop:function e(){if(this._isRunning){this._isRunning=false;o.splice(o.indexOf(this),1)}return this},end:function e(){this._isRunning&&this._step(true);return this},then:function e(){this._dfd.then.apply(this._dfd,[].slice.call(arguments));return this},progress:function e(){this._dfd.progress.apply(this._dfd,[].slice.call(arguments));return this},isRunning:function e(){return this._isRunning},on:function e(){this._enabled=true},off:function e(){this._enabled=false},destroy:function e(){this.stop();this._dfd.destroy()},_update:function e(){var t;for(t in this._props)this._target[t]=this._props[t].value},_step:function e(t){var n=Date.now()-this._startTime,i;if(n>=this._duration||t){this._pos=1;this._isRunning=false;i=o.indexOf(this);i>=0&&o.splice(i,1);m(this._props,this._pos,true);this._update();this._dfd.notify(n,n/this._duration,this._pos);this._dfd.resolve();return}this._pos=this._easing(n/this._duration);m(this._props,this._pos,false);this._update();this._dfd.notify(n,n/this._duration,this._pos)},_start:function e(){this._startTime=Date.now();c(this);this._step()}});function m(e,t,n){var i,o,r,a,s,l,u;for(o in e){r=e[o];a=r.to;s=r.from;if(r.isArray){l=r.fresh;u=r.rotten;r.value=n?r.to:r.combined;for(i=0;i<l.length;i++)l[i].opacity=t;for(i=0;i<u.length;i++)u[i].opacity=1-t;if(n){delete r.combined;delete r.fresh;delete r.rotten;delete r.ripe}}else r.value=!n&&"change"in r?s+r.change*t:a;n&&delete e[o].from}}n.off=function(){a=false};n.on=function(){a=true};n.tick=function(){var e,n,r=o.slice(),a=r.length;for(e=0;e<a;e++){n=r[e];n._step()}if(!o.length){t.cancel(i);i=null;return false}return true};n.clear=function(){};n.easing={linear:function e(t){return t},easeInOut:function e(t){return.5*(1-l(t*s))}};n.tweens=o;var d=function e(){this._onSuccess=[];this._onProgress=[];this._isResolved=false};d.prototype={then:function e(t){this._onSuccess.push(t);this._isResolved&&t.call(null,[].slice.apply(arguments))},progress:function e(t){this._onProgress.push(t)},resolve:function e(){this._isResolved=true;var t,n=this._onSuccess.length;for(t=0;t<n;t++)this._onSuccess[t].apply(null,[].slice.call(arguments))},notify:function e(){var t,n=this._onProgress.length;for(t=0;t<n;t++)this._onProgress[t].apply(null,[].slice.call(arguments))},destroy:function e(){this._onSuccess=[];this._onProgress=[]}};return n}.apply(t,i),void 0!==o&&(e.exports=o))},1320:function(e,t,n){"use strict";var i,o;!(i=[n(100),n(109),n(11)],o=function(e,t,n){var i={blendValue:p,getIcon:r,getSegmentIndex:l,shouldBlend:s,resolveColorSegment:f,resolveColor:c,getAutoMinMax:h,_getBlendInfo:u};function o(e,t){return e.paletteColors?e.paletteColors[t]:e.colors[t].color}function r(e,t){return e.paletteColors?e.paletteColors[t].icon:e.colors[t].icon}function a(e,t,i){var o;o=n.extend(true,{},e);if(o&&o.limits){o.limits=o.limits.concat().sort(function(e,t){return e.value-t.value});o.limits.forEach(function(e){e.value=(e.value-t)/(i-t)})}var r=o.paletteColors||o.colors;o&&r&&(o.localColors=r.concat().map(function(e,t){return{color:f(o,t)}}));return o}function s(e,t){if(0===e.limits.length)return;var n;n=0===t?e.limits[t].gradient:t===e.limits.length?e.limits[t-1].gradient:e.limits[t].gradient||e.limits[t-1].gradient;return n}function l(e,t,n){if(Number.isNaN(+t))return 0;var i=n?Math.min(n,t):0,o=e.segments.limits.concat().sort(function(e,t){return e.value-t.value}),r=e.segments.paletteColors||e.segments.colors,a,s;for(s=0;s<r.length;s++){if(s===r.length-1)return s;a=o[s].value;if(t<a&&t>=i)return s;i=a}return 0}function u(e,t,n){var i,o,r=e.limits.concat().sort(function(e,t){return e.value-t.value}),a=t>0?r[t-1]:{value:0,gradient:false},s=e.localColors[t-(t>0?1:0)],l=r[t]?r[t]:{value:1,gradient:false},u=e.localColors[t+(t<e.localColors.length-1?1:0)],c=n===l.value?1:(n-a.value)/(l.value-a.value);if(a&&a.gradient&&l&&l.gradient)if(n-a.value<l.value-n){i=s.color;o=.5-c}else{i=u.color;o=c-.5}else if(a&&a.gradient){i=s.color;o=1-(.5+c/2)}else if(l&&l.gradient){i=u.color;o=c/2}else{i=e.localColors[t].color;o=n}return{color:i,t:o}}function c(t){return e.resolveColor(t)}function f(e,t){return i.resolveColor(o(e,t))}function p(e,n,i,o){var r,s,l=0,c,f,p=a(e,i,o);if(n<=0)return p.localColors[0].color;if(n>=1)return p.localColors[p.localColors.length-1].color;for(c=0;c<p.localColors.length;c++){s=p.limits[c]?p.limits[c].value:1;if(n>=l&&n<s){r=u(p,c,n,i,o);f=new t(p.localColors[c].color).blend(new t(r.color),r.t);break}l=s}return f}function h(e,t){function n(e){return e.hasOwnProperty("value")?e.value:e}var i=e.map(n);var o,r,a=0;i=i.sort(function(e,t){return e-t});var s=i.some(function(e){return Number.isNaN(+e)});r=Number.isNaN(+t)?Number.isNaN(+i[0])?.5:i[0]:t;if(0===i.length||s)a=0===r?0:.5*r;else{if(1!==i.length){o=i[i.length-1]-i[0];o=o>0?o:1;return{min:Math.min(r,i[0])-o/2,max:Math.max(r,i[i.length-1])+o/2}}o=i[0]-r;if(0!==o&&!Number.isNaN(+o))return o>0?{min:r-.5*Math.abs(r),max:i[0]+2*o}:{min:i[0]+2*o,max:r+.5*Math.abs(r)};a=0===r?.5:Math.abs(.5*r)}return{min:r-a,max:r+a}}return i}.apply(t,i),void 0!==o&&(e.exports=o))},1591:function(e,t){e.exports='<div class="qv-viz" ng-class="{link : linkInteractionOn}">\n\t<div class="kpi-data" qva-activate="onShowVerifyDialog()">\n\t\t<div ng-show="baseLayoutInfo.components[0].show" class="measure-wrapper" ng-class="textAlign" ng-style="measureTitleStyle">\n\t\t\t<div class="measure-title ellips-text" title="{{measureTitle}}">\n\t\t\t\t<span ng-bind="measureTitle"></span>\n\t\t\t\t<i class="info-icon  lui-icon  lui-icon--goto" ng-if="linkInteractionOn" title="{{sheetLinkTitle}}"></i>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="value-wrapper" ng-class="textAlign">\n\t\t\t<div class="ellips-text" ng-class="{ \'no-shrink\' : secondaryValues.length && baseLayoutInfo.components[1].components[1].components[0].show}">\n\t\t\t\t<qv-kpi-value value="mainValue.value" formatted-value="mainValue.formattedValue" value-style="mainValue.style" formatter="mainValue.formatter" css-class="mainValue.cssClass" show-glyph="mainValue.showGlyph" />\n\t\t\t</div>\n\t\t\t<div ng-show="baseLayoutInfo.components[1].components[1].components[0].show" class="secondary-wrapper ellips-text" ng-repeat="secondaryValue in secondaryValues">\n\t\t\t\t<qv-kpi-value value="secondaryValue.value" formatted-value="secondaryValue.formattedValue" value-style="secondaryValue.style" title-style="secondaryValue.titleStyle" formatter="secondaryValue.formatter" css-class="secondaryValue.cssClass" show-glyph="secondaryValue.showGlyph" measure-title="secondaryValue.measureTitle" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\x3c!--\n\t<div ng-show="useViz" class="visualization">\n\t\t<qv-object class="cell-content" model="viz.model" options="viz.options"></qv-object>\n\t</div>\n\t--\x3e\n\t<div class="click-again-overlay" ng-class="{show : showVerifyDialog}" ng-style="verifyDialogStyle" qva-activate="linkToSheet()">\n\t\t<span ng-if="!sheetIsMissing" q-translation="properties.kpi.verifyToGoSheet"></span>\n\t\t<span class="sheetLinkTitle ellips-text" ng-bind="sheetLinkTitle"></span>\n\t</div>\n\n</div>\n'},1592:function(e,t,n){"use strict";var i,o;!(i=[n(100),n(101),n(185)],o=function(e,t,n){var i,o;var r=n.getLogicFor("hard","default");function a(e){return t.getValue(e,"qDef.conditionalColoring.useBaseColors",true)}i={uses:"data",addTranslation:"Properties.AddData",items:{measures:{disabledRef:"",items:{measureAxisMin:{type:"items",ref:"qDef.measureAxis.min",defaultValue:0},measureAxisMax:{type:"items",ref:"qDef.measureAxis.max",defaultValue:100},conditionalColoringUseConditionalColoring:{type:"items",ref:"qDef.conditionalColoring.useConditionalColoring",defaultValue:false},conditionalColoringUseSingleColor:{type:"items",ref:"qDef.conditionalColoring.singleColor",defaultValue:3},conditionalColoringPaletteSingleColor:{type:"items",ref:"qDef.conditionalColoring.paletteSingleColor",defaultValue:r.color.paletteColor.defaultValue},limits:{type:"items",ref:"qDef.conditionalColoring.segments.limits",defaultValue:[]},paletteColors:{type:"items",ref:"qDef.conditionalColoring.segments.paletteColors",defaultValue:[{index:6}]}}}}};o={type:"items",uses:"settings",component:"expandable-items",translation:"Common.Appearance",items:{presentation:{type:"items",grouped:false,translation:"properties.presentation",items:{showMeasureTitle:{ref:"showMeasureTitle",component:"checkbox",translation:"properties.kpi.showTitle",defaultValue:true},textAlign:{ref:"textAlign",type:"string",component:"dropdown",translation:"properties.Alignment",options:[{value:"left",translation:"properties.dock.left"},{value:"center",translation:"Common.Center"},{value:"right",translation:"properties.dock.right"}],defaultValue:"center"},fontSize:{ref:"fontSize",type:"string",component:"dropdown",translation:"MediaTool.Toolbar.FontSize",options:[{value:"S",translation:"Common.Small"},{value:"M",translation:"Common.Medium"},{value:"L",translation:"Common.Large"}],defaultValue:"M"},linkToSheet:{type:"items",items:{useLink:{ref:"useLink",type:"boolean",component:"switch",translation:"properties.kpi.linkToSheet",defaultValue:false,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}]},kpiLink:{ref:"sheetLink",type:"string",component:"sheet-dropdown",show:function e(t){return t.useLink}},openUrlInNewTab:{ref:"openUrlInNewTab",type:"boolean",component:"switch",translation:"properties.kpi.openUrlInNewTab",defaultValue:true,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],show:function e(t){return t.useLink}}}}}},color:{type:"items",grouped:false,translation:"properties.color",items:{conditionalColoring:{type:"array",component:"measures-tab",ref:"qHyperCubeDef.qMeasures",items:{useConditionalColoring:{ref:"qDef.conditionalColoring.useConditionalColoring",component:"switch",type:"boolean",options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],translation:"properties.kpi.conditionalColoring",defaultValue:false,change:function n(i){var o=t.getValue(i,"qDef.conditionalColoring");var r=t.getValue(i,"qDef.conditionalColoring.segments.paletteColors")||t.getValue(i,"qDef.conditionalColoring.segments.colors");o&&o.useConditionalColoring&&1===r.length?i.qDef.conditionalColoring.segments.paletteColors=[{index:-1,color:e.resolveColor(i.qDef.conditionalColoring.paletteSingleColor||i.qDef.conditionalColoring.singleColor)}]:i.qDef.conditionalColoring.paletteSingleColor={index:-1,color:e.resolveColor(r[0].color)}}},useBaseColor:{ref:"qDef.conditionalColoring.useBaseColors",type:"boolean",defaultValue:true,translation:"properties.libraryColors",component:"switch",show:function e(n,i){var o=t.getValue(i.properties,"color.useBaseColors");var r=t.getValue(n,"qDef.conditionalColoring.useBaseColors");if("off"===o){t.setValue(i.properties,"color.useBaseColors");t.setValue(n,"qDef.conditionalColoring.useBaseColors",false)}else void 0===r&&t.setValue(n,"qDef.conditionalColoring.useBaseColors",true);return true},options:[{value:false,translation:"properties.off"},{value:true,translation:"properties.on"}]},percentageWarning:{component:"text",translation:"properties.kpi.librarySegmentWarning",style:"hint",show:function e(n){var i=t.getValue(n,"qDef.conditionalColoring.useBaseColors");var o=t.getValue(n,"qDef.conditionalColoring.useConditionalColoring");return i&&o}},paletteSingleColor:{component:"color-picker",translation:"properties.color",ref:"qDef.conditionalColoring.paletteSingleColor",type:"object",dualOutput:true,defaultValue:r.color.paletteColor.defaultValue,show:function n(i){if(!t.getValue(i,"qDef.conditionalColoring.paletteSingleColor")){var o=e.resolveColor(t.getValue(i,"qDef.conditionalColoring.singleColor"));var r={index:-1,color:o};t.setValue(i,"qDef.conditionalColoring.paletteSingleColor",r)}return!a(i)&&i.qDef.conditionalColoring&&!i.qDef.conditionalColoring.useConditionalColoring}},rangeLimits:{type:"items",items:{min:{ref:"qDef.measureAxis.min",translation:"properties.axis.min",type:"number"},max:{ref:"qDef.measureAxis.max",translation:"Common.Max",type:"number",defaultValue:100}},show:function e(){return false}},segmentInfo:{ref:"qDef.conditionalColoring.segments",type:"items",component:"color-scale-creator",conditionalColoringRef:{props:"qHyperCubeDef.qMeasures",layout:"qHyperCube.qMeasureInfo"},useGlyph:true,useAutoMinMax:true,show:function e(t){return!a(t)&&t.qDef.conditionalColoring.useConditionalColoring},items:{limits:{ref:"qDef.conditionalColoring.segments.limits",type:"array",items:{value:{ref:"value",type:"number",expression:"optional",invalid:function e(t){return Number.isNaN(+t.value)},defaultValue:1},gradient:{translation:"properties.gradient",ref:"gradient",type:"boolean",show:false}}},paletteColors:{type:"array",ref:"qDef.conditionalColoring.segments.paletteColors",defaultValue:[{index:6}],items:{color:{ref:"color",type:"string",defaultValue:""},index:{ref:"index",type:"integer"},icon:{ref:"icon",type:"string",defaultValue:""}}}}}}}}}}};var s={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{suppressZero:null,calcCond:{uses:"calcCond"}}}}};return{type:"items",component:"accordion",items:{data:i,addons:s,settings:o}}}.apply(t,i),void 0!==o&&(e.exports=o))},1593:function(e,t,n){"use strict";var i,o;!(i=[n(203)],o=function(e){var t=new e,n="10px 'QlikView Sans'",i=t.getFontHeight(n)+1,o=t.getTextWidth("M",n),r=10,a={NONE:0,ADJUSTTOTEXT:1},s={NONE:0,SCALE:1,MAX:2},l={ROW:"row",COLUMN:"column"},u={checkLayout:f,getDirection:c,sizeComponent:p,TextScaleMode:s,ElementScaleMode:a,Direction:l,FixedMobileHeight:150};function c(e,t,n){var i,o=e.ratio?e.ratio:1,r=t/n;i=e.direction===l.ROW?o>r?l.COLUMN:l.ROW:o>r?l.ROW:l.COLUMN;return i}function f(e){if(!e.components||0===e.components.length)return e;var t,n,i=0,o=e.boundingBox.height,r=e.boundingBox.width,a,s,u=e.direction,p=c(e,o,r),h;e.components.forEach(function(e){e.direction=e.direction?e.direction:p;t=e.size.min?e.size.min:e.size?e.size:0;if("function"===typeof e.isVisible&&!e.isVisible()||t*o<(e.size.treshold&&e.size.treshold.height?e.size.treshold.height:10)||r<(e.size.treshold&&e.size.treshold.width?e.size.treshold.width:10))e.show=false;else{i+=t;e.show=true}});for(a=e.components.length-1;a>=0;a--){s=e.components[a];i<1?s.size.stretch&&(s.size.value=s.size.min+(1-i)):"number"===typeof s.size||(s.size.value=null)}e.components.forEach(function(e){n=e.size.value?e.size.value:e.size.min?e.size.min:e.size;h={};if(u===l.ROW){h.height=o;h.width=r*n}else{h.width=r;h.height=o*n}e.boundingBox=h});e.components.forEach(function(e){f(e)});return e}function p(e,t,n,i,o,r){var l,u,c;u=e.boundingBox.width;c=e.boundingBox.height;e.components&&e.components.forEach(function(t){p(t,e,u,c,o,r)});if("function"===typeof e.getText){o===s.MAX?l=m(e.getText(),u,c):o===s.SCALE&&(l=h(e,u,c));r===a.ADJUSTTOTEXT&&(e.boundingBox={height:l.height,width:l.width});e.fontSizes||(e.fontSizes={});e.fontSizes.fontSize=10*l.fontSize+"%";e.fontSizes.fontSizeScale=l.fontSize}}function h(e,t,n){if(!e.fontSizes)return{fontSize:"10px"};var i=e.getText(),o=e.fontSizes.min,r=e.fontSizes.max,a=e.fontSizes.maxNrChars,s=m(i,t,n,a,e.fontSizes.scale||1),l=Math.min((n-o.height)/(r.height-o.height),1),u=o.fontSize+l*(r.fontSize-o.fontSize),c=Math.max(Math.min(s.fontSize,u),o.fontSize);return{fontSize:c}}function m(e,a,s,l,u){u=u||1;var c=l?l*o:t.getTextWidth(e,n)*u,f=1.2*i,p=Math.min(a/c,s/f);return{fontSize:Math.max(9*p,r)}}return u}.apply(t,i),void 0!==o&&(e.exports=o))},1594:function(e,t,n){"use strict";var i,o;!(i=[n(1320),n(100),n(1162)],o=function(e,t,n){function i(e,t){var n=e.qHyperCube.qMeasureInfo[t];if(!n)return false;if(n.coloring&&n.coloring.baseColor&&n.coloring.baseColor.color)return n.coloring.baseColor;if(n.baseColor&&n.baseColor.color)return n.baseColor}function o(e,t){if(void 0===t.useBaseColors)return!e.color||"measure"===e.color.useBaseColors;return t.useBaseColors}return{getValueInfo:function r(a,s,l){var u=Math.abs(a);var c=l.qHyperCube.qMeasureInfo[s].conditionalColoring;var f;var p;var h="";var m;var d=l.qHyperCube.qMeasureInfo[s].coloring?l.qHyperCube.qMeasureInfo[s].coloring.gradient:null;var g=i(l,s);if(c.useConditionalColoring&&o(l,c)&&d&&"absolute"===d.limitType){f=e.getAutoMinMax(d.limits,a);var v=d.limits.map(function(e){return(e-f.min)/(f.max-f.min)});var y=d.colors.map(t.resolveColor);var b=n.setupColors(y,d.breakTypes,v);var C=n.createColorScale(b.colors,false);C.setLimits(b.limits);C.setMaxMinValues(f.max,f.min);m=C.getColor(a).toHex()}else if(o(l,c)&&g)m=t.resolveColor(g);else if(c.useConditionalColoring){f=l.qHyperCube.qMeasureInfo[s].measureAxis;var x=f&&!Number.isNaN(+f.min)?f.min:a-u;var S=f&&!Number.isNaN(+f.max)?f.max:a+u;p=(a-x)/(S-x);var q=e.getSegmentIndex(c,a,x);h=e.getIcon(c.segments,q)||"";m=e.shouldBlend(c.segments,q)?e.blendValue(c.segments,p,x,S):e.resolveColorSegment(c.segments,q)}else m=e.resolveColor(c.paletteSingleColor||c.singleColor);return{color:m,icon:h,useCondColor:c.useConditionalColoring}}}}.apply(t,i),void 0!==o&&(e.exports=o))},1595:function(e,t,n){"use strict";var i,o;!(i=[n(48),n(1596),n(90),n(1305)],o=function(e,t,n,i){e.directive("qvKpiValue",[function(){return{replace:true,template:t,restrict:"E",scope:{value:"=",formattedValue:"=",valueStyle:"=",formatter:"=",cssClass:"=",showGlyph:"=",measureTitle:"=",titleStyle:"="},link:function e(t){var o;function r(e,n,r,a){o&&o.destroy();o=new i(e,{currentValue:n},400).progress(function(){e.currentFormattedValue=a?a.formatValue(e.currentValue):e.currentValue;t.$digest()}).then(function(){e.currentFormattedValue="U"!==a.type?r:a.formatValue(e.currentValue)})}function a(){if(Number.isNaN(+t.formattedValue)||!t.formatter)t.currentFormattedValue=t.formattedValue;else if("U"===t.formatter.type){t.tweenFormatter||(t.tweenFormatter=t.formatter.clone());t.tweenFormatter.pattern=s(t.formattedValue,true);t.tweenFormatter.prepare();r(t,t.value,t.formattedValue,t.tweenFormatter)}else r(t,t.value,t.formattedValue,t.formatter)}function s(e,t){var i="0",o,r=e.match(/(?:-?\d+)([^\d](?=\d))/),a=r?r[1]:"",s,l=0;if(a){s=new RegExp("(?:"+n.escapeRegExp(a)+")(\\d+)");r=e.match(s);l=r?r[1].length:0}if(l){i+=a;for(o=0;o<l;o++)i+="0"}t&&(i+="A");return i}t.$watchCollection("[formattedValue,formatter]",function(){a()})}}}])}.apply(t,i),void 0!==o&&(e.exports=o))},1596:function(e,t){e.exports='<div class="ellips-text">\n\t<div class="kpi-value" ng-style="valueStyle">\n\t\t<div class="ellips-text">\n\t\t\t<span ng-bind="currentFormattedValue" title="{{currentFormattedValue}}"></span>\n\t\t</div>\n\t\t<div class="glyph-wrapper" ng-if="showGlyph">\n\t\t\t<span ng-class="cssClass" class="lui-icon"></span>\n\t\t</div>\n\t</div>\n\t<div class="kpi-title ellips-text" ng-style="titleStyle" ng-bind="measureTitle"></div>\n</div>\n'},177:function(e,t,n){"use strict";var i,o;!(i=[],o=function(){var e="q3TnObj";function t(){var t=JSON.parse(sessionStorage.getItem(e));null===t&&(t=JSON.parse(localStorage.getItem(e))||{});return t}function n(){return t()}function i(n){var i=t();if(!i[n]){i[n]={data:{view:"",scriptTabIndex:0},tab:"",analysis:{sheetId:"",state:""},story:{storyId:"",slideId:"",state:""}};sessionStorage.setItem(e,JSON.stringify(i));localStorage.setItem(e,JSON.stringify(i));return i[n]}return i[n]}function o(n,o,r,a){var s=i(n);var l=t();void 0===r&&(r=l[n].data.scriptTabIndex);a||(s.tab="data");s.data={view:o,scriptTabIndex:r};l[n]=s;localStorage.setItem(e,JSON.stringify(l));sessionStorage.setItem(e,JSON.stringify(l));return l[n]}function r(e){var n=t();if(n[e])return n[e].data;return"not_found"}function a(n,o,r,a){var s=i(r);var l=t();s.tab="analysis";s.analysis={sheetId:n,state:o,overlay:a};l[r]=s;localStorage.setItem(e,JSON.stringify(l));sessionStorage.setItem(e,JSON.stringify(l));return l[r]}function s(e){var n=t();if(n[e])return n[e].analysis;return"not_found"}function l(n,o,r,a){var s=i(a);var l=t();s.tab="story";s.story={slideId:n,storyId:r,state:o};l[a]=s;localStorage.setItem(e,JSON.stringify(l));sessionStorage.setItem(e,JSON.stringify(l));return l[a]}function u(e){var n=t();if(n[e])return n[e].story;return"not_found"}function c(n,o){var r=i(o);var a=t();r.tab=n;a[o]=r;localStorage.setItem(e,JSON.stringify(a));sessionStorage.setItem(e,JSON.stringify(a));return a[o]}function f(e){var n=t();if(n[e])return n[e].tab;return"not_found"}return{isInSession:n,setData:o,data:r,setSheet:a,analysis:s,setStory:l,story:u,setTab:c,tab:f}}.apply(t,i),void 0!==o&&(e.exports=o))},246:function(e,t,n){"use strict";var i,o;!(i=[n(92),n(90),n(405)],o=function(e,t,n){var i,o={3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y","-3":"m","-6":"μ","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},r=/%$/,a=/^\(r(0[2-9]|[12]\d|3[0-6])\)/i,s=/^\(oct\)/i,l=/^\(dec\)/i,u=/^\(hex\)/i,c=/^\(bin\)/i,f=/^\(rom\)/i,p=/^(\(rom\)|\(bin\)|\(hex\)|\(dec\)|\(oct\)|\(r(0[2-9]|[12]\d|3[0-6])\))/i;function h(e,t,n,i){e=e.toString(t);n[1]===n[1].toUpperCase()&&(e=e.toUpperCase());e.length-e.indexOf(".")>10&&(e=e.slice(0,e.indexOf(".")+11));return e.replace(".",i||".")}function m(e,t,n){var i;if(a.test(t))e=h(e,Number(/\d{2}/.exec(t)[0]),t,n);else if(s.test(t))e=h(e,8,t,n);else if(l.test(t))e=h(e,10,t,n);else if(u.test(t))e=h(e,16,t,n);else if(c.test(t))e=h(e,2,t,n);else if(f.test(t)){i="";if(e<0){i="-";e=-e}e=Math.floor(e);if(0===e)e="0";else if(e<=5e5){e=d(e,t);e=i+e}else e=t+i+e.toExponential(0)}return e}function d(e,t){var n,i="",o=Number(String(e).slice(-3)),r=(e-o)/1e3,a=[0,1,4,5,9,10,40,50,90,100,400,500,900].reverse(),s=["0","I","IV","V","IX","X","XL","L","XC","C","CD","D","CM"].reverse();while(o>0)for(n=0;n<a.length;n++)if(a[n]<=o){i+=s[n];o-=a[n];break}for(n=0;n<r;n++)i="M"+i;t[1]!==t[1].toUpperCase()&&(i=i.toLowerCase());return i}function g(e){if(!e||!e.qNumericalAbbreviation)return o;var t={};var n=e.qNumericalAbbreviation.split(";");n.forEach(function(e){var n=e.split(":");2===n.length&&(t[n[0]]=n[1])});return t}i=e.extend("NumberFormatter",{init:function e(t,n,i,o,r){this.localeInfo=t;this.pattern=n;this.thousandDelimiter=i||",";this.decimalDelimiter=o||".";this.type=r||"numeric";this.abbreviations=g(t);this.prepare()},clone:function e(){var t=new i(this.localeInfo,this.pattern,this.thousandDelimiter,this.decimalDelimiter,this.type);t.subtype=this.subtype;return t},format:function e(t,n,i,o){this.prepare(n,i,o);return this.formatValue(t)},prepare:function e(t,n,i){var o,r;"undefined"===typeof t&&(t=this.pattern);"undefined"===typeof n&&(n=this.thousandDelimiter);"undefined"===typeof i&&(i=this.decimalDelimiter);if(!t){this._prepared={pattern:false};return}this._prepared={positive:{d:i,t:n,abbreviate:false,isFunctional:false,prefix:"",postfix:""},negative:{d:i,t:n,abbreviate:false,isFunctional:false,prefix:"",postfix:""}};o=this._prepared;t=t.split(";");o.positive.pattern=t[0];o.negative.pattern=t[1];p.test(t[0])&&(o.positive.isFunctional=true);t[1]?p.test(t[1])&&(o.negative.isFunctional=true):o.negative=false;r=o.positive.isFunctional&&(!o.negative||o.negative&&o.negative.isFunctional);if(!r){v(o.positive,n,i);o.negative&&v(o.negative,n,i)}},formatValue:function e(t){var i=this._prepared,o,r,a="",s,l,u="",c,f,p,h,d;if(Number.isNaN(+t))return t;if(false===i.pattern)return t.toString();if(t<0&&i.negative){i=i.negative;t=-t}else i=i.positive;c=i.d;f=i.t;if(i.isFunctional)t=m(t,i.pattern,c);else{i.percentage&&(t*=100);if(i.abbreviate){var g=this.abbreviations;var v=Object.keys(g).map(function(e){return parseInt(e)}).sort(function(e,t){return e>t?1:-1});var y;var b=v[0];p=0;r=Number(Number(t).toExponential().split("e")[1]);while(b<=r&&p<v.length){p++;b=v[p]}p>0&&(y=v[p-1]);var C;y&&r>0&&y>0?C=y:(r<0&&y<0||!y)&&(b<0&&b-r<=i.maxPrecision?C=b:y<=r&&!(b>0&&-r<=i.maxPrecision)&&(C=y));if(C){a=g[C];t/=Math.pow(10,C)}}s=Math.abs(t);o=i.temp;h=i.numericPattern;d=h.split(c)[1];"I"===this.type&&(t=Math.round(t));l=t;if(d||"#"!==h.slice(-1)[0])if(s>=1e15||s>0&&s<=1e-14)t=s?s.toExponential(15).replace(/\.?0+(?=e)/,""):"0";else{var x=Number(t.toFixed(Math.min(20,d?d.length:0)).split(".")[0]);var S=h.split(c)[0];S+=c;t=n(S,x)||"0";if(d){var q=Math.max(0,Math.min(14,d.length));var M=d.replace(/#+$/,"").length;var D=Number((s%1).toPrecision(q)).toFixed(q);D=D.slice(2).replace(/0+$/,"");for(p=D.length;p<M;p++)D+="0";D&&(t+=c+D)}else 0===x&&(l=0)}else if(s>=Math.pow(10,o)||s<1||s<1e-4)if(0===t)t="0";else if(s<1e-4||s>=1e20){t=l.toExponential(Math.max(1,Math.min(14,o))-1);t=t.replace(/\.?0+(?=e)/,"");u=""}else{t=t.toPrecision(Math.max(1,Math.min(14,o)));if(t.indexOf(".")>=0){t=t.replace(t.indexOf("e")<0?/0+$/:/\.?0+(?=e)/,"");t=t.replace(".",c)}}else{h+=c;o=Math.max(0,Math.min(20,o-Math.ceil(Math.log(s)/Math.log(10))));for(p=0;p<o;p++)h+="#";t=n(h,t)}t=t.replace(i.numericRegex,function(e){if(e===f)return i.groupTemp;if(e===c)return i.decTemp;return""});l<0&&!/^-/.test(t)&&(t="-"+t)}return i.prefix+t+u+a+i.postfix}});function v(e,t,n){var i,o,a=e.pattern,s,l,u,c,f,p,h;if(a.indexOf("A")>=0){a=a.replace("A","");e.abbreviate=true}h=b(t,n);s=a.match(h);s=s?s[0]:"";l=s?a.substr(0,a.indexOf(s)):a;u=s?a.substring(a.indexOf(s)+s.length):"";s||(s=a?"#":"##########");if(t&&t===n){i=s.split(n);o=i.pop();s=i.join("")+n+o;t=""}c=t;t=/,/.test(n)?"¤":",";c&&(s=s.replace(y(c,"g"),t));f=n;n=".";f&&(s=s.replace(y(f,"g"),n));p=s.match(/#/g);p=p?p.length:0;var m=a.split(f);var d;m[1]&&(d=m[1].match(/#|0/g));e.prefix=l||"";e.postfix=u||"";e.pattern=a;e.maxPrecision=d?d.length:2;e.percentage=r.test(a);e.numericPattern=s||"";e.numericRegex=new RegExp(y(t,null,true)+"|"+y(n,null,true),"g");e.groupTemp=c;e.decTemp=f;e.t=t;e.d=n;e.temp=p}function y(e,n,i){var o=t.escapeRegExp(e);if(i)return o;return new RegExp(o||"",n)}function b(e,n){n&&(n=t.escapeRegExp(n));e&&(e=t.escapeRegExp(e));return new RegExp("(?:[#0]+"+e+")?[#0]+(?:"+n+"[#0]+)?")}window.NumberFormatter=i;i.getStaticFormatter=function(){return{prepare:function e(){},formatValue:function e(t){return t+""}}};return i}.apply(t,i),void 0!==o&&(e.exports=o))},299:function(e,t,n){"use strict";var i,o;!(i=[n(198)],o=function(e){var t;t=e.extend("HyperCube",{init:function e(t,n){this._super(t,"/qHyperCubeDef",n);this.cacheCube.setMethodName("getHyperCubeData")},updateCache:function e(t){if(t&&t.qHyperCube){this.cacheCube.set(t.qHyperCube.qDataPages);this.cacheCube.setCubeSize(t.qHyperCube.qSize)}else this.cacheCube.clear()},getData:function e(t,n){return n?this.model.getHyperCubeData(n,t):this.cacheCube.getData(t)},getHyperCubeBinnedData:function e(t,n,i,o){return this.model.getHyperCubeBinnedData(this.path,t,{width:0,height:0},n,i,o,0)},getHyperCubeContinousData:function e(t,n){return this.model.getHyperCubeContinuousData(this.path,t,n)},getReducedData:function e(t,n,i){i=void 0!==i?i:"D1";return this.model.getHyperCubeReducedData(this.path,t,n,i)},selectDimensionRange:function e(t){var n=t.map(function(e){return{qDimIx:e.idx,qRange:{qMin:e.range.min,qMax:e.range.max,qMinInclEq:true,qMaxInclEq:e.range.maxIncluded}}});return this.model.selectHyperCubeContinuousRange(this.path,n)},selectRange:function e(t,n,i){var o;n=!!n;i=i||[];o=t.map(function(e){return{qMeasureIx:e.idx,qRange:{qMin:e.range.min,qMax:e.range.max,qMinInclEq:false!==e.range.minInclEq,qMaxInclEq:false!==e.range.maxInclEq}}});return this.model.rangeSelectHyperCubeValues(this.path,o,i,n)},selectRects:function e(t,n){var i;n=n||[];i=t.map(function(e){var t=e[0],i=e[1];return{qRanges:[{qMeasureIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:false!==t.range.minInclEq,qMaxInclEq:false!==t.range.maxInclEq}},{qMeasureIx:i.idx,qRange:{qMin:i.range.min,qMax:i.range.max,qMinInclEq:false!==i.range.minInclEq,qMaxInclEq:false!==i.range.maxInclEq}}],qColumnToSelect:n}});return this.model.multiRangeSelectHyperCubeValues(this.path,i,false)},select:function e(t,n){return this.model.selectHyperCubeCells(this.path,t,n)},selectValues:function e(t,n,i,o){return this.model.selectHyperCubeValues(o||this.path,t,n,i)},getProperties:function e(){return this.model.getProperties()},getDimensionInfos:function e(){return this.model.layout.qHyperCube.qDimensionInfo},getMeasureInfos:function e(){return this.model.layout.qHyperCube.qMeasureInfo},clearSelections:function e(){return this.model.resetMadeSelections()},hasSelections:function e(){return this.model.layout.qSelectionInfo.qMadeSelections}});return t}.apply(t,i),void 0!==o&&(e.exports=o))},405:function(e,t,n){var i;!(i=function(){return function(e,t){if(!e||isNaN(+t))return t;var t="-"==e.charAt(0)?-t:+t;var n=t<0?t=-t:0;var i=e.match(/[^\d\-\+#]/g);var o=i&&i[i.length-1]||".";var r=i&&i[1]&&i[0]||",";var e=e.split(o);t=t.toFixed(e[1]&&e[1].length);t=+t+"";var a=e[1]&&e[1].lastIndexOf("0");var s=t.split(".");(!s[1]||s[1]&&s[1].length<=a)&&(t=(+t).toFixed(a+1));var l=e[0].split(r);e[0]=l.join("");var u=e[0]&&e[0].indexOf("0");if(u>-1)while(s[0].length<e[0].length-u)s[0]="0"+s[0];else 0==+s[0]&&(s[0]="");t=t.split(".");t[0]=s[0];var c=l[1]&&l[l.length-1].length;if(c){var f=t[0];var p="";var h=f.length%c;for(var m=0,d=f.length;m<d;m++){p+=f.charAt(m);!((m-h+1)%c)&&m<d-c&&(p+=r)}t[0]=p}t[1]=e[1]&&t[1]?o+t[1]:"";return(n?"-":"")+t[0]+t[1]}}.call(t,n,t,e),void 0!==i&&(e.exports=i))},511:function(e,t,n){"use strict";var i,o;!(i=[n(246),n(326)],o=function(e,t){var n,i={AUTO:"U",INTEGER:"I",NUMBER:"R",FIXED_TO:"F",MONEY:"M",DATE:"D",TIME:"T",DATE_TIME:"TS",INTERVAL:"IV"};n=e.extend("QFormatter",{init:function n(o,r,a,s,l){var u=o||{};this.localeInfo=u;this.pattern=r||"";this.decimalDelimiter="string"===typeof s?s:"string"===typeof u.qDecimalSep?u.qDecimalSep:".";this.thousandDelimiter="string"===typeof a?a:"string"===typeof u.qThousandSep&&this.decimalDelimiter!==u.qThousandSep?u.qThousandSep:"";this.type=l||i.AUTO;l===i.AUTO&&(this.pattern="#"+this.decimalDelimiter+"##A");this._numberFormatter=new e(o);this._dateFormatter=new t(o);this.prepare()},clone:function e(){return new n(this.localeInfo,this.pattern,this.thousandDelimiter,this.decimalDelimiter,this.type)},prepare:function e(t,n,o){t||(t=this.pattern);if(!t)switch(this.type){case i.INTEGER:t="##############";break;case i.NUMBER:t=Array(this.localeInfo.qnDec||11).join("#");break;case i.FIXED_TO:t="#"+this.localeInfo.qDecimalSep||false;break;case i.MONEY:t=this.localeInfo.qMoneyFmt;o||(o=this.localeInfo.qMoneyDecimalSep||".");n||o===this.localeInfo.qMoneyThousandSep||(n=this.localeInfo.qMoneyThousandSep);break;case i.DATE:t=this.localeInfo.qDateFmt||"YYYY-MM-DD";break;case i.DATE_TIME:t=this.localeInfo.qTimestampFmt||"YYYY-MM-DD hh:mm:ss";break;case i.TIME:case i.INTERVAL:t=this.localeInfo.qTimeFmt||"hh:mm:ss";break;default:t="##########";break}this._numberFormatter.pattern=this.pattern;this._dateFormatter.pattern=this.pattern;this._numberFormatter.thousandDelimiter=this.thousandDelimiter;this._numberFormatter.decimalDelimiter=this.decimalDelimiter;this._numberFormatter.type=this.type;this._numberFormatter.prepare(t,n,o);this._prepared={pattern:t,t:n,d:o}},formatValue:function e(t,n){var o,r=this._prepared;if("NaN"===t||"number"===typeof t&&Number.isNaN(+t))return"-";if(Number.isNaN(+t)||"number"!==typeof t)return t+"";switch(this.type){case i.DATE:case i.TIME:case i.DATE_TIME:o=new Date(1899,11,30+Math.floor(t),0,0,86400*(t-Math.floor(t)));if(Number.isNaN(+o.getTime()))return this._numberFormatter.format(t,"0",r.t,r.d);return this._dateFormatter.format(o,n||r.pattern);case i.INTERVAL:return this._dateFormatter.format(t,r.pattern);default:return this._numberFormatter.formatValue(t)}},format:function e(t,n,i,o){if("NaN"===t||"number"===typeof t&&Number.isNaN(+t))return"-";if(Number.isNaN(+t)||"number"!==typeof t)return t+"";this.prepare(n,i,o);return this.formatValue(t)},createPatternFromRange:function e(t,n,i){var o="",r,a=Number(Number(t).toExponential().split("e")[1]),s=Number(Number(n).toExponential().split("e")[1]),l=Math.min(Math.abs(a),Math.abs(s)),u=Math.abs(n-t),c,f=Number(Number(u/50).toExponential().split("e")[1]),p;p=Math.abs(f);if(0===u)return"0"+this.decimalDelimiter+"##"+(i?"A":"");if(f>=0)p=i?Math.max(2,l-f):0;else{c=(i?l-l%3:0)*(s<0?1:-1);p-=c}this.thousandDelimiter?o+="#"+this.thousandDelimiter+"##0":o+="0";if(p){o+=this.decimalDelimiter;for(r=0;r<p;r++)o+="#"}return o+(i?"A":"")}});n.getSignificantIntegers=function(e){return o(e)};n.getSignificantDecimals=function(e){return r(e)};function o(e){if(Number.isNaN(+e)||!Number.isFinite(+e))return 1;var t=Number(e).toExponential(),n=t.split("e"),i=1;"+"===n[1][0]&&(i+=Number(n[1]));return i}function r(e){if(Number.isNaN(+e)||!Number.isFinite(+e))return 0;var t=Number(e).toExponential(),n=t.split("e"),i=0,o;if("-"===n[1][0]){i=Math.abs(Number(n[1]));n=n[0].split(".");n[1]&&(i+=n[1].length)}else{o=Number(n[1]);n=n[0].split(".");i=n[1]?n[1].length-o:0}return i}return n}.apply(t,i),void 0!==o&&(e.exports=o))}}]);