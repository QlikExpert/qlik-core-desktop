/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[45],{1045:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(94),n(89),n(1121),n(1122),n(1046),n(1123)],r=function(e,t,n,i,r,o,s){function a(){this._generationInProgress=false}a.prototype.isDerivedUpToDate=u;a.prototype.updateDerivedProperties=l;a.prototype.addDefaultHyperCubeHash=c;return a;function u(e){s.validate(e);var t=e.properties,n=i.generateHash(e.hashData);if(!t.qUndoExclude||t.qUndoExclude.hashCode!==n)return false;return true}function l(r){s.validate(r);if(this._generationInProgress)return n.resolve(true);if(u(r)){var a=r.layout.qUndoExclude&&r.layout.qUndoExclude.hashCode===r.properties.qUndoExclude.hashCode;return n.resolve(!a)}var l=this,c=r.model,d=r.layout,p=r.properties,f=e.extend(true,{},p);this._generationInProgress=true;i.updateHash(p,r.hashData);return r.generateDerivedProperties(d,p).then(function(){return o.saveDerivedProperties(c,d,p,f,t).then(function(){l._generationInProgress=false;return n.resolve(true)})})}function c(t,n,i,o){return r.getDefaultHashDataForHyperCube(t,n,i).then(function(t){return e.extend(true,o,t)})}}.apply(t,i),void 0!==r&&(e.exports=r))},1046:function(e,t,n){"use strict";var i,r;!(i=[n(376),n(982)],r=function(e,t){return{saveDerivedProperties:n};function n(n,i,r,o,s){if(t.canModifyHardProperties(s,n,i))return n.setProperties(r);var a=new e(n);return a.saveSoftProperties(o,r)}}.apply(t,i),void 0!==r&&(e.exports=r))},1121:function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t={generateHash:n,updateHash:i};return t;function n(t){return e.hashFromString(JSON.stringify(t))}function i(e,n){e.qUndoExclude||(e.qUndoExclude={});e.qUndoExclude.hashCode=t.generateHash(n)}}.apply(t,i),void 0!==r&&(e.exports=r))},1122:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(89)],r=function(e,t){var n={getDefaultHashDataForHyperCube:i};return n;function i(e,t,n){return r(e,n).then(function(e){return{drillLevel:a(t),dimensionExpressions:s(t),measureExpressions:e}})}function r(e,n){var i=[];if(!e.qMeasures)return t.resolve(i);e.qMeasures.forEach(function(e){e.qLibraryId?i.push(o(e.qLibraryId,n)):i.push(t.resolve())});return t.all(i)}function o(e,t){return t.getMeasure(e).then(function(e){return e.getProperties().then(function(e){return e.qMeasure.qDef})})}function s(e){return e.qDimensionInfo.map(function(e){return e.qGroupFieldDefs})}function a(e){var t=u(e);return t.map(function(e){return e.qGroupPos})}function u(t){return e.getValue(t,"qDimensionInfo",[])}}.apply(t,i),void 0!==r&&(e.exports=r))},1123:function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{validate:e};function e(e){if(!e||!e.layout||!e.properties||!e.model||!e.hashData||!e.generateDerivedProperties)throw Error("Derived-properties: Missing input")}}.apply(t,i),void 0!==r&&(e.exports=r))},1182:function(e,t,n){"use strict";var i,r;!(i=[n(91),n(2131),n(2139),n(1588),n(2140),n(2141),n(2142),n(204),n(299),n(2143),n(156),n(189),n(1753)],r=function(e,t,n,i,r,o,s,a,u,l,c,d,p){return{type:"histogram",BackendApi:u,template:l,View:t,definition:n,softDefinition:r,initialProperties:{sorting:{autoSort:true},qHyperCubeDef:{qDimensions:[],qMeasures:[],qMode:"S",qAlwaysFullyExpanded:true,qSuppressZero:false,qSuppressMissing:true},bins:{auto:p.AUTO,binCount:void 0,binSize:p.BIN_SIZE,offset:p.OFFSET,countDistinct:p.COUNT_DISTINCT,binMode:p.BIN_MODE}},support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:true,viewData:true},data:i,importProperties:null,exportProperties:null,exportTableProperties:function e(t){var n="qUndoExclude.box";return d.hypercube.exportProperties(t,n)},getDropFieldOptions:o.getDropFieldOptions,getDropDimensionOptions:o.getDropDimensionOptions,addDimensionPopoverComponent:o.addDimensionPopoverComponent,getExportRawDataOptions:s.getExportRawDataOptions,getCreatePropertyHandler:function t(n){var i=this.mappedDefinition,r=this.globalChangeListeners,o,s;this.dimensionDefinition&&(o=c.mapProperties(i.items.data.items.innerData.items.dimensions));this.measureDefinition&&(s=c.mapProperties(i.items.data.items.innerData.items.measures));return new a({app:n,dimensionDefinition:this.dimensionDefinition,measureDefinition:this.measureDefinition,dimensionProperties:o,measureProperties:s,globalChangeListeners:r,addDimensionLabel:e.get("Visualization.Requirements.AddField")})}}}.apply(t,i),void 0!==r&&(e.exports=r))},1250:function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={wrapExpression:t};function t(e){var t=e.replace(/\]/g,"]]");return t?"["+t+"]":""}return e}.apply(t,i),void 0!==r&&(e.exports=r))},1259:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(1319),n(89)],r=function(e,t,n){var i={generateHyperCubeDef:r,getAllHyperCubeExpressions:o};function r(n,i,r,o,s){return l(n.dimensions.concat(n.measures),i,r,o).then(function(r){var o=e.extend({},r,s);var a=e.extend(true,{},i);a.qDimensions=[];a.qMeasures=[];n.dimensions.forEach(function(e){a.qDimensions.push({qDef:{qFieldDefs:["="+t.generateExpression(e,o)]}})});n.measures.forEach(function(e){a.qMeasures.push({qDef:{qDef:t.generateExpression(e,o)}})});return a})}function o(e,t,i){var r=e.qDimensions.map(function(e,n){return s(e,i,n,t)});var o=e.qMeasures.map(function(e){return a(e,i)});return n.all({dimensions:n.all(r),measures:n.all(o)})}function s(e,t,i,r){if(e.qLibraryId)return u(e.qLibraryId,"dimension",t,i,r);var o=r.qDimensionInfo[i].qGroupPos;return n.resolve(e.qDef.qFieldDefs[o])}function a(e,t){if(e.qLibraryId)return u(e.qLibraryId,"measure",t);return n.resolve(e.qDef.qDef)}function u(e,t,n,i,r){if(!n){console.warn("No app provided, returning library id");return e}var o="dimension"===t?"getDimension":"getMeasure";return n[o](e).then(function(e){return e.getProperties().then(function(e){return"dimension"===t?e.qDim.qFieldDefs[r.qDimensionInfo[i].qGroupPos]:e.qMeasure.qDef})})}function l(e,t,i,r){var o={};var u;var l;var p=[];e.forEach(function(e){u=d(e.match(c("Dim")));u.forEach(function(e){p.push(s(t.qDimensions[e],r,e,i).then(function(t){o["Dim["+e+"]"]={value:t,wrap:true}}))});l=d(e.match(c("Mea")));l.forEach(function(e){p.push(a(t.qMeasures[e],r).then(function(t){o["Mea["+e+"]"]={value:t}}))})});var f;f=p.length?n.all(p).then(function(){return n.resolve(o)}):n.resolve(o);return f}function c(e){return new RegExp("\\{\\{"+e+"\\[\\d\\]\\}\\}","g")}function d(e){if(!e)return[];return e.map(function(e){return e.substr(6,1)})}return i}.apply(t,i),void 0!==r&&(e.exports=r))},1261:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(1753)],r=function(e,t){var n={getBinSize:r,getDerivedBinSize:o,getDerivedBinOffset:s,getDerivedBinCount:a,getBinCount:u,getBinOffset:l,isAutoBin:c,isCountDistinct:d,getBinMode:i,isEmpty:p};return n;function i(n){return e.getValue(n,"bins.binMode",t.BIN_MODE)}function r(n){return e.getValue(n,"bins.binSize",t.BIN_SIZE)}function o(n){return e.getValue(n,"qUndoExclude.bins.binSize",t.BIN_SIZE)}function s(n){return e.getValue(n,"qUndoExclude.bins.offset",t.OFFSET)}function a(n){var i=e.getValue(n,"qUndoExclude.bins.binCount",t.BIN_COUNT);if(!e.isNumeric(i))return t.BIN_COUNT;if(i<1)return 1;if(!e.isInteger(i))return Math.ceil(i);return i}function u(t){return e.getValue(t,"bins.binCount",void 0)}function l(n){return e.getValue(n,"bins.offset",t.OFFSET)}function c(n){return e.getValue(n,"bins.auto",t.AUTO)}function d(n){return e.getValue(n,"bins.countDistinct",t.COUNT_DISTINCT)}function p(e){return void 0===e||null===e||""===e}}.apply(t,i),void 0!==r&&(e.exports=r))},1310:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(1530),n(232),n(164),n(96)],r=function(e,t,n,i,r){var o={data:["elemNo"],contexts:["select"],startOnEmptySelection:true,style:{active:{strokeWidth:2,stroke:"#333"},inactive:{opacity:.3}}};var s=27,a=13;function u(u){if(!u||!u.model||!u.chartInstance||!u.selectionsApi)throw Error("Selections-handler: Missing input");var c=u.model;var d=u.chartInstance;var p=u.selectionsApi;var f=u.dataPaths||[""];var m=[];var v;var h;var g={propertiesToRestore:{}};var b=false;var x=t(c,d,p);var y={};function D(e){v=e}function q(e){h=e;p.refreshToolbar()}function E(e){e===s?p.cancel():e===a&&p.confirm()}function C(){var e=f.map(function(e){return d.dataset(e).fields().filter(function(e){return"dimension"===e.type()})});e=[].concat.apply([],e);return e.length&&e.every(function(e){return e.raw().qLocked})}function _(){var e=[];var t=f.map(function(e){return d.dataset(e).fields().filter(function(e){return"dimension"===e.type()})});t=[].concat.apply([],t);for(var n=0;n<t.length;n++)t[n].raw().qLocked&&e.push(t[n].raw());return{fields:e,areAllFieldsLocked:e.length&&e.length===t.length}}function S(){return u.isLassoDisabled&&u.isLassoDisabled()}var M=p.clear.bind(p);p.clear=function(){m.forEach(function(e){e.brush.clear();e.dependentComponents.forEach(function(e){var t=d.component(e.id);t&&t.emit(e.clear)})});M()};y.setUp=function(e){y.tearDown();var t=this.setUpBrush(e);b&&I();return t};y.setUpBrush=function(t){var n=e.extend(true,{},o,t);var r={on:"tap",action:function e(){return v||t.isSingleSelect?"set":"toggle"},contexts:n.contexts,data:n.data,globalPropagation:"stop"};var s={context:n.contexts[0],data:n.data,style:n.style};var a=l(n,d);a.listeners.toggle=function(e){if(!b)return[];var t=_();if(n.startOnEmptySelection&&0===e.length&&t.areAllFieldsLocked){i.showLockedFeedback(t.fields);return[]}return x.toggleValues(e,a.brush,n.startOnEmptySelection)};a.brush.intercept("toggle-values",a.listeners.toggle);a.brush.intercept("add-values",a.listeners.toggle);a.brush.intercept("remove-values",a.listeners.toggle);a.brush.intercept("set-values",a.listeners.toggle);a.listeners.start=function(){if(m.length>1){m.forEach(function(e){e!==a&&e.brush.end()});p.selectionsMade&&c.resetMadeSelections()}};m.push(a);return{trigger:r,consume:s}};y.setUpStart=function(){y.tearDown()};y.setUpDone=function(){b&&I()};y.tearDown=function(){b&&O();m.forEach(function(e){e.brush.removeInterceptor("toggle-values",e.listeners.toggle);e.brush.removeInterceptor("add-values",e.listeners.toggle);e.brush.removeInterceptor("remove-values",e.listeners.toggle);e.brush.removeInterceptor("set-values",e.listeners.toggle)});m=[]};function I(){m.forEach(function(e){e.listeners.update=function(t,n){r.preventGestures();!e.sleep&&x.update(t,n,e.brush)};e.brush.on("update",e.listeners.update);e.brush.on("start",e.listeners.start)})}function O(){m.forEach(function(e){e.brush.removeListener("update",e.listeners.update);e.brush.removeListener("start",e.listeners.start)})}y.pauseEngineCalls=function(e){m.forEach(function(t){t.id===e&&(t.sleep=true)})};y.resumeEngineCalls=function(e,t){m.forEach(function(n){if(n.id===e){n.sleep=false;t&&n.listeners.update([],[])}})};y.addComponent=function(e,t){m.forEach(function(n){n.id===e&&n.dependentComponents.push(t)})};y.on=function(){if(b)return;b=true;I();n.CtrlToggle.bind(D);n.ShiftToggle.bind(q);g.unbindDeactivated=p.watchDeactivated(function(){m.forEach(function(e){e.brush.end()});n.KeyPressed.unbind(E);w=false});g.unbindActivated=p.watchActivated(function(){n.KeyPressed.bind(E)})};y.off=function(){if(!b)return;b=false;O();n.CtrlToggle.unbind(D);n.ShiftToggle.unbind(q);n.KeyPressed.unbind(E);g.unbindActivated();g.unbindDeactivated()};var w=false;y.lassoState=function(){return h&&!S()?!w:w};y.toggleLasso=function(){w=!w};y.allFieldsLocked=function(){return C()};return y}return{create:function e(t){return u(t)}};function l(e,t){return{brush:t.brush(e.contexts[0]),listeners:{},dependentComponents:[],id:e.contexts[0]}}}.apply(t,i),void 0!==r&&(e.exports=r))},1319:function(e,t,n){"use strict";var i,r;!(i=[n(1250),n(1568)],r=function(e,t){var n={generateExpression:i};function i(n,i){var o={};var s;var a;if(i)for(var u in i){var l=i[u];s=l.wrap?e.wrapExpression(l.value):l.value;o[u]=s;var c=l.variations||[];c.forEach(function(e){a=r(e,s,u);o[e]=a})}return t.replaceExpressionTokens(n,o)}function r(e,n,i){if(""===n)return"";var r=t.createRegExp(i,true,true);var o=e.split(r);var s="";o.forEach(function(e){s+=e!==i?e:n});return s}return n}.apply(t,i),void 0!==r&&(e.exports=r))},1530:function(e,t,n){"use strict";var i,r;!(i=[n(1531),n(1125),n(164)],r=function(e,t,n){function i(i,r,o){function s(){}function a(e,n,r){var s=t.qBrushHelper(r);if(s.length){if("resetMadeSelections"===s[0].method){i[s[0].method].apply(i).catch(function(e){console.warn("err",e)});return}o.activate();o.selectionsMade=true}s.forEach(function(e){i[e.method].apply(i,e.params).then(function(e){e||i.resetMadeSelections()}).catch(function(e){console.warn("err",e)})})}function u(t,i,s){var a=e.brushInterceptors.filterValues(r,t);var u=a.items;a.itemsAreLocked&&n.showLockedFeedback(a.lockedFields);if(!o.active&&!a.itemsAreLocked&&(s||u.length>0)){o.activate();i.start();i.emit("update",[],[])}return u}s.update=a;s.toggleValues=u;return s}return i}.apply(t,i),void 0!==r&&(e.exports=r))},1531:function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={brushInterceptors:{DIM_VALUE_NULL:-2,DIM_VALUE_TOTAL:-3,brushOnlyOne:t,filterValues:i}};return e;function t(e,t){var n=e.brushes().filter(function(e){return"value"===e.type});var i=[];n.length&&n.forEach(function(e){i=i.concat(e.brush.values().map(function(t){return{key:e.id,value:t}}))});return i.concat(t)}function n(e,t){var n=t.key.indexOf("qHyperCube")+"qHyperCube".length;var i=t.key.substr(0,n);var r=t.key.substr(n+1);return e.dataset(i).field(r)}function i(e,t){var i=this,r,o,s=[],a=0,u=[];t.forEach(function(t){if(t.value===i.DIM_VALUE_NULL||t.value===i.DIM_VALUE_TOTAL)return;o=n(e,t);r=o&&o.raw();if(r.qLocked){s.push(r);a++}else u.push({key:t.key,value:t.value})});return{items:u,itemsAreLocked:a>0&&a===t.length,lockedFields:s}}}.apply(t,i),void 0!==r&&(e.exports=r))},1568:function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={replaceExpressionTokens:t,createRegExp:n};function t(e,t,i){var r={start:i&&i.start||"{{",end:i&&i.end||"}}"},o=e,s,a;for(var u in t){s=t[u];a=r.start+u+r.end;o=o.replace(n(a,true),s)}return o}function n(e,t,n){var r=i(e);var o=n?"("+r+")":r;return t?new RegExp(o,"g"):new RegExp(o)}function i(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}return e}.apply(t,i),void 0!==r&&(e.exports=r))},1588:function(e,t,n){"use strict";var i,r;!(i=[n(91)],r=function(e){var t={dimensions:{min:1,max:1,description:function t(){return e.get("Visualizations.Descriptions.Histogram.Dimension")},add:function e(){},move:function e(){},remove:function e(){}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},1589:function(e,t,n){"use strict";var i,r;!(i=[n(51),n(1590),n(145)],r=function(e,t){var n={template:t,scope:{text:"=",icon:"=",confirmLabel:"="},controller:["$scope",function(e){e.close=function(){e.destroyComponent();e.deferredResult.resolve()}}]};function i(t){var i=t.text;var r=void 0!==t.icon?t.icon:"cogwheel";var o=t.confirm||"Common.OK";var s={text:i,icon:r,confirmLabel:o};return e.show(n,s).resultPromise}return{show:i}}.apply(t,i),void 0!==r&&(e.exports=r))},1590:function(e,t){e.exports='<qv-modal-dialog qv-id="notification-dialog" qv-cancel="close()" qv-confirm="close()">\n    <main class="dm-main">\n        <div class="qv-mvc-dialog-content">\n            <div class="qv-mvc-dialog-icon icon-{{icon}}" ng-show="icon"></div>\n            <p><span q-translation="{{text}}"></span></p>\n        </div>\n    </main>\n    <footer class="dm-footer">\n        <lui-button x-variant="inverse" qva-activate="$event.preventDefault(); close()" name="confirm" autofocus q-translation="{{confirmLabel}}"></lui-button>\n    </footer>\n</qv-modal-dialog>\n'},1752:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(1261),n(2133)],r=function(e,t,n){var i={getMappingValues:s,getMappings:r};return i;function r(e){var t={};t.BinSize={value:","+e.binSize};t.Label={value:0===e.binOffset?"":",'x'"};t.Offset={value:0===e.binOffset?"":","+e.binOffset};t.Distinct={value:e.distinct?"Distinct ":""};return t}function o(i){var r=e.getValue(i,"qHyperCube.qDimensionInfo.0",{}),o=r.qMin,s=r.qMax,a;o=e.isNumeric(o)?o:1;s=e.isNumeric(s)?s:1;a=t.getDerivedBinCount(i);return n.calculateBinSize(o,s,a)}function s(e){var n=t.isAutoBin(e),i=t.getBinMode(e),r,s,a,u,l=t.isCountDistinct(e);if(n||"maxCount"===i){u=o(e);r=u.binSize;s=u.offset;a=u.binCount}else{r=t.getBinSize(e);s=t.getBinOffset(e)}return{binSize:r,binOffset:s,binCount:a,distinct:l}}}.apply(t,i),void 0!==r&&(e.exports=r))},1753:function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={AUTO:true,BIN_COUNT:10,BIN_SIZE:10,LABEL:"x",OFFSET:0,COUNT_DISTINCT:false,BIN_MODE:"maxCount"};Object.freeze(e);return e}.apply(t,i),void 0!==r&&(e.exports=r))},2131:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(89),n(1307),n(1310),n(1312),n(1045),n(2132),n(1752),n(2134)],r=function(e,t,n,i,r,o,s,a,u){var l;var c=".histogram";l=n.extend("Histogram",{namespace:c,defaultOptions:{navigation:false,selections:true,tooltips:true},init:d,on:p,off:f,createChartSettings:function e(t){return u.createChartSettings(this,t)},setSnapshotData:m,getDisclaimerAttributes:v,updateChart:h,updateData:g,paint:b,isLassoDisabled:x});return l;function d(e,t,n,s,a,u){this._super(e,t,n,s,a,u);var l=t.find(".picasso-chart")[0];l.__do_not_use_findShapes=this.chartInstance.findShapes.bind(this.chartInstance);this._derivedProperties=new o;this.hasOption("selections")&&(this._selectionHandler=i.create({model:s.model,chartInstance:this.chartInstance,selectionsApi:a}));this.hasOption("tooltips")&&(this._tooltipHandler=r.create(this.chartInstance,u,t));this.setDataPaths(["qUndoExclude/box/qHyperCube"])}function p(){if(this._on)return;this.hasOption("tooltips")&&this._tooltipHandler.on();this.hasOption("selections")&&this._selectionHandler.on();this.$element.on("touchstart"+c,function(e){e.preventDefault()});this._on=true}function f(){if(!this._on)return;this.hasOption("tooltips")&&this._tooltipHandler.off();this.hasOption("selections")&&this._selectionHandler.off();this.$element.off(c);this._on=false}function m(e){this._super(e);e.qUndoExclude.box.qHyperCube.qDataPages=this.layout.qUndoExclude.box.qHyperCube.qDataPages;return t().resolve(e)}function v(t){function n(){var n=e.getValue(t,"qUndoExclude.box.qHyperCube.qDataPages.0.qMatrix",[]);return 1===n.length&&n[0][0]&&n[0][0].qIsNull}var i=n();return{data:t.qUndoExclude&&t.qUndoExclude.box,supportedDisclaimers:{LimitedData:true,OnlyNanData:true,OnlyNegativeOrZeroValues:!i},options:{bottom:true,supportNegative:false,explicitOnlyNanData:i}}}function h(e,n){if(!e.qUndoExclude)return t.resolve();this._super(e,n)}function g(e){var n=this;return n._super(e).then(function(){if(n._destroyed)return t.reject();e=n.layout;var i={height:Math.min(e.qHyperCube.qSize.qcy,1e3),width:2},r=n.backendApi.model;if(n.backendApi.isSnapshot)return t.resolve();return r.getEffectiveProperties().then(function(o){if(n._destroyed)return t.reject();return n._derivedProperties.addDefaultHyperCubeHash(o.qHyperCubeDef,e.qHyperCube,r.app,y(e,o)).then(function(a){if(n._destroyed)return t.reject();var u={layout:e,properties:o,model:r,hashData:a,generateDerivedProperties:function e(t,n){return s.generateHyperCubes(t,n,r.app)}};if(!n._derivedProperties.isDerivedUpToDate(u))return n._derivedProperties.updateDerivedProperties(u);if(!e.qUndoExclude)return t.resolve();n.backendApi.setPath("/qUndoExclude/box/qHyperCubeDef");n.backendApi.updateCache(e.qUndoExclude.box);return n.getData(n.backendApi,e.qUndoExclude.box.qHyperCube,i)})})})}function b(e){var n=this.layout.qUndoExclude;if(!n)return t.resolve(false);var i=n.box&&n.box.qHyperCube.qDataPages.length;return i?this._super(e):t.resolve(false)}function x(){return false}function y(e,t){return{box:t.qHyperCubeDef,binMappings:a.getMappingValues(e),binProperties:t.bins,measureAxis:t.measureAxis,version:"2.0"}}}.apply(t,i),void 0!==r&&(e.exports=r))},2132:function(e,t,n){"use strict";var i,r;!(i=[n(89),n(90),n(91),n(1259),n(1752),n(1319),n(1261)],r=function(e,t,n,i,r,o,s){var a={generateHyperCubes:u};return a;function u(a,u,l){var c,d,p=r.getMappingValues(a),f=r.getMappings(p);c={dimensions:["Class(aggr({{Dim[0]}},{{Dim[0]}}){{BinSize}}{{Label}}{{Offset}})"],measures:["Count({{Distinct}}{{Dim[0]}})"]};d="=Ceil(Log10(Count({{Dim[0]}})) / Log10(2)) + 1";return e.all({expressions:i.getAllHyperCubeExpressions(u.qHyperCubeDef,a.qHyperCube,l),boxCubeDef:i.generateHyperCubeDef(c,u.qHyperCubeDef,a.qHyperCube,l,f)}).then(function(e){var i=e.expressions,r=e.boxCubeDef,l;l=s.isAutoBin(a)?{qValueExpression:{qExpr:o.generateExpression(d,{"Dim[0]":{value:i.dimensions[0],wrap:true}})}}:"maxCount"===s.getBinMode(a)&&s.isEmpty(u.bins.binCount)?s.getDerivedBinCount(a):u.bins.binCount;t.setValue(r,"qDimensions.0.qDef.qSortCriterias",[{qSortByNumeric:1}]);t.setValue(r,"qDimensions.0.qDef.qFieldLabels",[a.qHyperCube.qDimensionInfo[0].qFallbackTitle]);t.setValue(r,"qMeasures.0.qDef.qLabel",a.measureAxis.label||n.get("Visualization.Histogram.MeasureAxisLabel"));t.setValue(u,"qUndoExclude.box.qHyperCubeDef",r);t.setValue(u,"qUndoExclude.bins.binSize",p.binSize);t.setValue(u,"qUndoExclude.bins.offset",p.binOffset);t.setValue(u,"qUndoExclude.bins.binCount",l)})}}.apply(t,i),void 0!==r&&(e.exports=r))},2133:function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t=Math.log(10);var n=1e-9;var i=[1,1.5,2,3,4,5,6,10];var r=[1,2,4,5,6,8,10];var o=[2,4,5,10];var s={calculateBinSize:a};return s;function a(e,t,n){d(e,t,n);n=p(n);return c(e,t,n)}function u(e,n){var i,r,o;if(0===e)return 0;i=Math.floor(Math.log(Math.abs(e))/t);r=e/Math.pow(10,i);for(var s=0;s<n.length;s++)if(r<=n[s]){o=n[s];break}return(i>=0?o*Math.pow(10,i):o/Math.pow(10,-i))*(e<0?-1:1)}function l(e,t,n,i,r,o){return Math.floor(Math.abs(e-r)/i)+Math.floor(Math.abs(o-t)/i)}function c(e,s,a){var c,d,p,f,m,v,h,g,b=-1,x,y,D,q;var E=i;a=Math.max(1,a);if(s===e)if(0===s){f=1;if(1===a)return{min:e,max:s,nbrOfBins:a,rawBinSize:p/a,offset:-.5,newMax:.5,binSize:1,numEmptyBins:0}}else if(1===a){f=s+n;E=r}else f=Math.abs(s/a);else{s+=n;p=s-e;f=p/a}do{g=1;D=0;if(b>=0){x=1/o[b];y=1;E=[];while(y<=10){E.push(Math.round(1e3*y)/1e3);y+=x}}m=f;do{m=u(m*g,E);v=Math.floor(Math.log(m)/t);h=Math.pow(10,v);d=s===e?(Math.ceil(s/m)+Math.floor(a/2))*m:Math.ceil(s/m)*m;c=d-a*m;var C=0;q=h;while((c>e||d<s)&&C<o.length){c=Math.floor(e/q)*q;d=c+a*m;q=h/o[C++]}if(v<1){h=Math.pow(10,Math.abs(v)+1);d=Math.round(d*h)/h;c=Math.round(c*h)/h}g=1.1;D++}while((c>e||d<s)&&D<10);b++}while(l(e,s,a,f,c,d)>0&&b<o.length);return{binCount:a,offset:c,binSize:m}}function d(t,n,i){if(!e.isNumeric(t)||!e.isNumeric(n)||!e.isNumeric(i))throw Error("binSizeCalculator: One of the inputs is NOT numeric");if(t>n)throw Error("binSizeCalculator: The 'min' parameter is bigger than the 'max' parameter")}function p(t){if(t<1)return 1;if(!e.isInteger(t))return Math.ceil(t);return t}}.apply(t,i),void 0!==r&&(e.exports=r))},2134:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(91),n(1142),n(1311),n(2135),n(2136),n(2137),n(2138),n(101)],r=function(e,t,n,i,r,o,s,a,u){var l,c="histogram";l={createChartSettings:m};return l;function d(e){var t;var n=e.qUndoExclude&&e.qUndoExclude.box&&e.qUndoExclude.box.qHyperCube&&e.qUndoExclude.box.qHyperCube.qDimensionInfo?e.qUndoExclude.box.qHyperCube.qDimensionInfo:void 0;if(!n)return false;t=!!n[0].qLocked;return t}function p(e){var t={};if(e){t.isOpenDim=false;t.isOpenMea=false}else{t.isOpenDim=true;t.isOpenMea=true}return t}function f(e){return u.getValue(e,"qHyperCube.qDimensionInfo.0.qIsOneAndOnlyOne",false)}function m(u,l){var m=u.options&&"rtl"===u.options.direction;var v=e.getValue(l,"qHyperCube.qDimensionInfo.0",{});var h=v.qFallbackTitle||"";var g=n.create({chartID:c,layoutMode:u.getLayoutMode(l)});var b={};var x={};var y={};if(u.hasOption("selections")){u._selectionHandler.setUpStart();b=u._selectionHandler.setUpBrush({contexts:["select"],data:["elemNo"],dataPath:"qUndoExclude/box"});x=u._selectionHandler.setUpBrush({contexts:["select-dimension"],data:["elemNo"],dataPath:"qUndoExclude/box",isSingleSelect:f(l)});y=u._selectionHandler.setUpBrush({dataPath:"qUndoExclude/box",contexts:["select-measure"],data:["end"]});u._selectionHandler.setUpDone()}var D={box:{}};u.hasOption("tooltips")&&(D.box=u._tooltipHandler.setUp({data:[""],contexts:["boxTip"],componentKey:"box-marker",direction:u.options.direction,measureRows:["measure"],labelData:["bin"]}));var q=d(l);var E=p(q);var C={scrollHandler:null,selectionHandler:u._selectionHandler};var _={componentKey:"box-marker",lassoBrushKey:"select",dimRangeBrushKey:null,measureRangeBrushKey:"select-measure",areaBrushKey:"select-dimension"};this._dependentActions&&this._dependentActions.destroy();this._dependentActions=i.create(C,u.isOn.bind(u),"vertical",m,_,E);g.addPreset("dimension-measure-chart",{isRtl:m,includeDimensionAxis:true,orientation:"vertical",selectionsEnabled:u.hasOption("selections"),measureSource:"qMeasureInfo/0",measureScaleSettings:{component:{expand:0,include:[0]}},enableLasso:true,lasso:{brushKey:"select",brushComponents:["box-marker"]},enableMeasureRange:true,measureRange:{brushKey:"select-measure",brushAxis:"y-axis",brushArea:"box-marker",brushScale:"measure"},enableAreaRange:true,areaRange:{brushKey:"select-dimension",brushAxis:"x-axis",brushData:["elemNo"],brushArea:"box-marker",brushScale:"rangeSelSettings",brushComponents:["box-marker"],multiple:true,chartInstance:u.chartInstance},brushActions:this._dependentActions.gestures,dimensionSource:"qDimensionInfo/0",dimensionScaleSettings:o.createSettings(l),measureAxisProperties:l.measureAxis,measureTitleText:l.measureAxis.label||t.get("Visualization.Histogram.MeasureAxisLabel"),dimensionAxisProperties:l.dimensionAxis,dimensionAxisSettings:r.createSettings(l),dimensionTitleText:h,gridlines:l.gridlines,hasNavigation:u.hasOption("navigation"),isNavigationEnabledFn:u.isOn.bind(this),refLines:l.refLine&&l.refLine.refLines});var S=g.getSettings();var M=s.createSettings(u,l,b,x,y,D);g.addComponent("box-marker",M);if(l.dataPoint&&l.dataPoint.showLabels){var I=a.createSettings(l);g.addComponent("labels",I)}u.addSnapshotChartSettings(S,l);S.scales.rangeSelSettings={type:"linear",min:S.scales.dimension.min,max:S.scales.dimension.max,source:"qDimensionInfo/0"};return S}}.apply(t,i),void 0!==r&&(e.exports=r))},2135:function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t=20;var n={createSettings:i};return n;function i(e){return{settings:{labels:{maxGlyphCount:r(e)}}}}function r(n){var i=e.getValue(n,"qUndoExclude.box.qHyperCube.qDimensionInfo.0.qApprMaxGlyphCount",0);return Math.min(t,i)}}.apply(t,i),void 0!==r&&(e.exports=r))},2136:function(e,t,n){"use strict";var i,r;!(i=[n(90),n(1261)],r=function(e,t){var n={createSettings:i};return n;function i(n){var i=t.isAutoBin(n),r=t.getBinMode(n),o=t.getDerivedBinSize(n),s,a;if(i||"maxCount"===r){var u=t.getDerivedBinOffset(n),l=t.getDerivedBinCount(n);s=u;a=u+l*o}else{var c=e.getValue(n,"qUndoExclude.box.qHyperCube.qDimensionInfo.0",{});s=c.qMin||0;a=(c.qMax||0)+o}return{component:{type:"linear",min:s,max:a}}}}.apply(t,i),void 0!==r&&(e.exports=r))},2137:function(e,t,n){"use strict";var i,r;!(i=[n(201),n(1261)],r=function(e,t){var n={createSettings:i};return n;function i(n,i,r,o,s,a){var u=e.Theme.resolveColor(i.color.bar.paletteColor),l=t.getDerivedBinSize(i);var c=[];var d=[r.consume,o.consume,s.consume];if(n.hasOption("tooltips")){c.push(a.box.trigger);d.push.apply(d,a.box.consume)}c.push(r.trigger);return{key:"box-marker",settings:{box:{fill:u,stroke:e.getContrastingGrey(u).toHex(),strokeWidth:1,maxWidthPx:Infinity,minWidthPx:NaN,minWidth:0},major:{scale:"dimension",ref:{start:"binStart",end:"binEnd"}},minor:{scale:"measure"},whiskers:false,orientation:"vertical"},brush:{trigger:c,consume:d},data:{extract:{field:"qDimensionInfo/0",props:{start:0,end:{field:"qMeasureInfo/0"},measure:{field:"qMeasureInfo/0",reduce:"first",value:function e(t){return t},reduceLabel:"none"},binStart:{field:"qDimensionInfo/0",value:function e(t){return t.qNum}},binEnd:{field:"qDimensionInfo/0",value:function e(t){return t.qNum+l}},elemNo:{field:"qDimensionInfo/0"},bin:{field:"qDimensionInfo/0",value:function e(t){return t}}}}}}}}.apply(t,i),void 0!==r&&(e.exports=r))},2138:function(e,t,n){"use strict";var i,r;!(i=[n(201)],r=function(e){var t={createSettings:n};return t;function n(t){var n=e.Theme.resolveColor(t.color.bar.paletteColor);return{settings:{sources:[{strategy:{settings:{labels:[{placements:[{},{fill:e.getInverse(n)}]}]}}}]}}}}.apply(t,i),void 0!==r&&(e.exports=r))},2139:function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(90),n(101),n(185),n(91),n(1261)],r=function(e,t,n,i,r){var s=n.getLogicFor("hard","default"),a="maxCount",u="size";function l(e){return!(e.bins&&e.bins.auto)}function c(e){return l(e)&&e.bins.binMode===a}var d={uses:"axis.picasso.measureAxis",items:{label:{type:"string",expression:"optional",expressionType:"StringExpression",ref:"measureAxis.label",defaultValue:"",translation:"Common.Label",placeholderTranslation:"Visualization.Histogram.MeasureAxisLabel"}}};var p={uses:"axis.picasso.dimensionAxis",items:{othersGroup:{items:{label:{show:false}}}}};var f={translation:"properties.colors",type:"items",items:{colors:{type:"items",items:{barColor:{ref:"color.bar.paletteColor",translation:"properties.histogram.barColor",type:"object",component:"color-picker",dualOutput:true,defaultValue:s.color.paletteColor.defaultValue}}}}};var m={type:"items",translation:"properties.presentation",items:{gridLines:{type:"items",snapshot:{tid:"property-gridLines"},items:{showGridLines:{ref:"gridlines.auto",type:"boolean",translation:"properties.gridLine.spacing",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},gridSpacing:{ref:"gridlines.spacing",type:"number",component:"dropdown",defaultValue:2,options:[{value:0,translation:"properties.gridLine.noLines"},{value:2,translation:"properties.gridLine.medium"},{value:3,translation:"properties.gridLine.narrow"}],show:function e(t){return t.gridlines&&!t.gridlines.auto}}}},showLabels:{ref:"dataPoint.showLabels",type:"boolean",translation:"properties.dataPoints.labelmode",component:"switch",defaultValue:false,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],snapshot:{tid:"property-dataPoints"}}}};var v={uses:"settings",items:{presentation:m,colors:f,measureAxis:d,dimensionAxis:p}};var h={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{calcCond:{uses:"calcCond"}}},refLines:{uses:"reflines"}}};var g={uses:"dimensions",translation:"Common.Fields",alternativeTranslation:"properties.alternative.fields",items:{dimensionLimits:{show:false,items:{otherMode:{readOnly:false},otherSortMode:{show:function e(n){return"OTHER_COUNTED"===t.getValue(n,"qOtherTotalSpec.qOtherMode")}},otherCounted:{show:function e(n){return"OTHER_COUNTED"===t.getValue(n,"qOtherTotalSpec.qOtherMode")}},otherLimitMode:{show:function e(n){var i=t.getValue(n,"qOtherTotalSpec.qOtherMode");return"OTHER_ABS_LIMITED"===i||"OTHER_REL_LIMITED"===i}},otherLimit:{show:function e(n){var i=t.getValue(n,"qOtherTotalSpec.qOtherMode");return"OTHER_ABS_LIMITED"===i||"OTHER_REL_LIMITED"===i}},calculatedAgainstMessage:{show:true,label:function e(){var t=i.get("properties.histogram.staticMeasureName");return i.get("Properties.DimensionLimits.CalculatedAgainst",t)}}}},others:{show:false,items:{suppressOther:{defaultValue:true}}}}};var b={uses:"measures"};var x={uses:"data",items:{dimensions:g,measures:b}};var y={translation:"Common.Data",type:"items",items:{innerData:x}};var D={ref:"bins.binMode",type:"string",component:"dropdown",options:[{value:a,translation:"Visualization.Histogram.Binning.NumberOfBinsOption"},{value:u,translation:"Visualization.Histogram.Binning.BarWidthOption"}],defaultValue:a,show:function e(t){return l(t)}};var q={translation:"Visualization.Histogram.Bins",type:"items",component:"items",items:{auto:{ref:"bins.auto",translation:"Visualization.Histogram.Binning",component:"switch",type:"boolean",defaultValue:true,undefinedValue:false,options:[{value:true,translation:"Visualization.Histogram.Binning.Auto"},{value:false,translation:"Visualization.Histogram.Binning.Custom"}]},autoMessage:{component:"text",translation:"Visualization.Histogram.Binning.AutoDescription",show:function e(t){return!l(t)}},mode:D,binCount:{ref:"bins.binCount",type:"number",expression:"optional",expressionType:"ValueExpression",translation:"Visualization.Histogram.Binning.BinCount",defaultValue:"",convertFunctions:{get:function e(t,n,i){var o=i.properties.bins.binCount;if(r.isEmpty(o))return r.getDerivedBinCount(i.layout);return t(null)||""},set:function e(t,n,i){n(i.type,t,void 0)}},show:c},binMessage:{component:"text",translation:"Visualization.Histogram.Binning.BinCountRounding",show:function n(i){var s=t.getValue(i,"bins.binCount"),a="object"===o(s);return c(i)&&!r.isEmpty(s)&&!a&&!e.isInteger(s)&&s>0}},minBinMessage:{component:"text",translation:"Visualization.Histogram.Binning.BinCountMin",show:function e(n){var i=t.getValue(n,"bins.binCount");return!!(c(n)&&!r.isEmpty(i)&&i<=0)}},binSize:{ref:"bins.binSize",type:"number",expression:"optional",expressionType:"ValueExpression",defaultValue:10,show:function e(t){return l(t)&&t.bins.binMode===u},translation:"Visualization.Histogram.Binning.BinSize"},offset:{ref:"bins.offset",type:"number",expression:"optional",expressionType:"ValueExpression",show:function e(t){return l(t)&&t.bins.binMode===u},translation:"Visualization.Histogram.Binning.Offset"},distinct:{ref:"bins.countDistinct",type:"boolean",defaultValue:false,component:"checkbox",translation:"Visualization.Histogram.CountDistinct"}}};return{type:"items",component:"accordion",items:{data:y,bins:q,addons:h,settings:v}}}.apply(t,i),void 0!==r&&(e.exports=r))},2140:function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{type:"items",component:"accordion",items:{data:{uses:"data",items:{dimensions:{translation:"Common.Fields"}}}}}}.apply(t,i),void 0!==r&&(e.exports=r))},2141:function(e,t,n){"use strict";var i,r;!(i=[n(139),n(125),n(99),n(321),n(130),n(161),n(1589)],r=function(e,t,n,i,r,o,s){var a=100;function u(t,n){if(""===n||void 0===n)return t;return t.filter(function(t){if("undefined"===typeof t.value)return false;return e.string(t.value.toLowerCase()).indexOf(e.string(n.toLowerCase()))>-1})}function l(e,t){return-1!==e.indexOf(t)}function c(e,t){if("field"===e.type)return l(e.tags,t);return false}function d(e,t,n,i){if(!c(e.item,"$numeric")){s.show({text:"Visualization.Histogram.NonNumericalMessage"});return}t.canAddDimension()?e.Add(n,t):e.Replace(n,t);i()}function p(e,t){return e.filter(function(e){return l(e.qTags,t)})}return{getDropFieldOptions:function e(t,n,i,r){d(t,n,i,r)},getDropDimensionOptions:function e(){s.show({text:"Visualization.Histogram.NoDimensionsMessage"})},addDimensionPopoverComponent:{name:"histogram-data",template:i.template,controller:["$scope",function(e){e.search={term:""};e.autoFocus=n.treatAsDesktop();e.getFieldDisplayName=function(t){return""===e.search.term?t.label:o.trimAutoCalendarName(t.value)};var i=null;e.$watch("search.term",function(n){function o(){var r=u(i.fields,n);r.length>a&&(r=t.limit(r,a));e.fields=r;e.dimensions=[]}i?o():r.getSortedFields(e.app).then(function(e){var t=p(e,"$numeric").map(function(e){var t=e.isDerived&&""===n?e.qName.substring(e.qName.lastIndexOf(".")+1,e.qName.length):e.qName;return{toolTip:e.qName,label:t,value:e.qName,trimmedValue:e.displayName,qTags:e.qTags,isDerived:e.isDerived,isDateField:e.isDateField,isGeoField:e.isGeoField}});i={fields:t};o()})})}],scope:{alignTo:"=",app:"=",addFieldDimension:"=",addLibraryDimension:"=",qvaOutsideIgnoreFor:"=",close:"=",position:"=",allowExpressionEditor:"@"}}}}.apply(t,i),void 0!==r&&(e.exports=r))},2142:function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){return{getExportRawDataOptions:t};function t(t,n){t.addItem({translation:"contextMenu.export",tid:"export",select:function t(){e.getService("$exportDialog").show(n.model,"/qUndoExclude/box/qHyperCubeDef")}});return Promise.resolve()}}.apply(t,i),void 0!==r&&(e.exports=r))},2143:function(e,t){e.exports='<div class="picasso-chart qv-viz" aria-hidden="true"></div>'},321:function(e,t,n){"use strict";var i,r;!(i=[n(89),n(139),n(125),n(99),n(130),n(845),n(148),n(161),n(91),n(218)],r=function(e,t,n,i,r,o,s,a,u){var l=100;function c(e,n){if(""===n)return e;return e.filter(function(e){if("undefined"===typeof e.value)return false;return t.string(e.value.toLowerCase()).indexOf(t.string(n.toLowerCase()))>-1})}var d={template:o,controller:["$scope",function(t){t.search={term:""};t.isDirectDiscoveryField=s.isDirectDiscoveryField;t.getDirectDiscoveryTypeTranslationKey=s.getTypeTranslationKey;t.autoFocus=i.treatAsDesktop();t.position||(t.position="right");t.onEscape=function(e){if(""!==t.search.term){e.stopPropagation();t.search.term=""}else t.close()};t.onEnter=function(e){if(""!==t.search.term){e.stopPropagation();t.addFieldDimension({value:t.search.term})}else t.close()};t.getFieldDisplayName=function(e){return""===t.search.term?e.label:a.trimAutoCalendarName(e.value)};var o=null;t.$watch("search.term",function(i){function s(){var e=c(o.fields,i);var r=c(o.dimensions,i);var s=c(o.activeDimensions,i);if(r.length+s.length>l){r=n.limit(r,Math.max(l-s.length,0));e=[]}else e.length+r.length+s.length>l&&(e=n.limit(e,Math.max(l-r.length-s.length,0)));t.fields=e;t.dimensions=r;t.activeDimensions=s}o?s():e.all({fields:r.getSortedFields(t.app),dimensions:r.getSortedDimensions(t.app)}).then(function(e){var n=e.fields.map(function(e){var t=e.isDerived&&""===i?e.qName.substring(e.qName.lastIndexOf(".")+1,e.qName.length):e.qName;return{toolTip:e.qName,label:t,value:e.qName,trimmedValue:e.displayName,qTags:e.qTags,isDerived:e.isDerived,isDateField:e.isDateField,isGeoField:e.isGeoField,activeDimensionIndex:-1}});var r=e.dimensions.map(function(e){return{label:e.qData.title,value:e.qData.title,libraryId:e.qInfo.qId,isDrillDown:"H"===e.qData.grouping,activeDimensionIndex:-1}});var a=[];t.activeDimensions&&t.activeDimensions.length&&t.activeDimensions.forEach(function(e,t){var i={};if(e.qLibraryId){r.forEach(function(t){if(t.libraryId===e.qLibraryId){i.label=t.label;i.value=t.value}});i.libraryId=e.libraryId}else n.forEach(function(t){if(t.value===e.qDef.qFieldDefs[0]){i.label=t.label;i.value=t.value}});i.translatedTitle=u.get("properties.colorBy.currentDimension",t+1);i.activeDimensionIndex=t;a.push(i)});o={fields:n,dimensions:r,activeDimensions:a};s()})})}],scope:{alignTo:"=",app:"=",addFieldDimension:"=",addLibraryDimension:"=",qvaOutsideIgnoreFor:"=",close:"=",position:"=",allowExpressionEditor:"@",selectColorByDimIndex:"="}};return d}.apply(t,i),void 0!==r&&(e.exports=r))},376:function(e,t,n){"use strict";var i,r;!(i=[n(92),n(90),n(188),n(89)],r=function(e,t,n,i){var r;r=e.extend({init:function e(t){this._model=t},setModel:function e(t){this._model=t},saveSoftProperties:function e(r,o){if(!this._model)return i.resolve(false);var s=n.generate(r,o);t.extend(true,r,o);if(s&&s.length){s=s.map(function(e){return{qOp:e.op,qValue:JSON.stringify(e.value),qPath:e.path}});return this._model.applyPatches(s,true).then(function(){return true})}return i.resolve(false)},mergeSoftPatches:function e(){if(!this._model)return i.resolve();var t=this;return i.all({properties:this._model.getProperties(),effective:this._model.getEffectiveProperties()}).then(function(e){if(e.properties.qExtendsId)return;var i=n.generate(e.properties,e.effective);n.apply(e.properties,i);t._model.setProperties(e.properties).then(function(){t._model.clearSoftPatches()})})}});return r}.apply(t,i),void 0!==r&&(e.exports=r))},845:function(e,t){e.exports='<lui-popover style="min-width: 200px;width: 230px;" align-to="alignTo" position="position" collision="\'flipfit\'" on-close-view="closeAddPopover(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<object-add-typeahead>\n\t\t<lui-popover-header>\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" name="new-dimension" autocomplete="off" ng-model="search.term" tid="add-dimension-input" qva-focus="autoFocus"\n\t\t\t\t\t   object-add-typeahead-input on-escape="onEscape($event)" on-enter="onEnter($event)" maxlength="255"/>\n\t\t\t\t<button ng-if="allowExpressionEditor !== false" class="lui-button  lui-input-group__item  lui-input-group__button" qva-activate="close()"\n\t\t\t\t\t\tpp-expression-editor="search.term" pp-expression-editor-on-apply="addFieldDimension({value:value})" expression-type="dimension"\n\t\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor" tid="fx-button">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression  edit-expression"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</lui-popover-header>\n\t\t<div class="object-add-popover-content" object-add-typeahead-menu>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="dimension in activeDimensions" tid="dimension-item"\n\t\t\t\t\tobject-add-typeahead-item="dimension" on-select="addActiveDimension(dimension)">\n\t\t\t\t\t<span qve-highlight text="{{dimension.translatedTitle}}" title="{{dimension.translatedTitle}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-list-header" ng-if="dimensions.length" q-translation="Common.Dimensions"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="dimension in dimensions" tid="dimension-item"\n\t\t\t\t\tobject-add-typeahead-item="dimension" on-select="addLibraryDimension(dimension)">\n\t\t\t\t\t<span ng-if="dimension.isDrillDown" class="lui-icon lui-icon--drill-down lui-list__aside" q-title-translation="Tooltip.dimensions.drilldown"></span>\n\t\t\t\t\t<span qve-highlight text="{{dimension.label}}" title="{{dimension.label}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-list-header" ng-if="fields.length" q-translation="Common.Fields"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in fields" tid="field-item"\n\t\t\t\t\tobject-add-typeahead-item="field" on-select="addFieldDimension(field)"\n\t\t\t\t\tng-class="{\'derived-field\': (field.isDerived && search.term === \'\')}">\n\t\t\t\t\t<i ng-if="isDirectDiscoveryField( field )" class="lui-icon  lui-icon--direct-discovery  lui-list__aside" q-title-translation="{{ getDirectDiscoveryTypeTranslationKey( field.qTags ) }}"></i>\n\t\t\t\t\t<span ng-if="field.isDateField" class="lui-icon lui-list__aside  lui-icon--calendar"></span>\n\t\t\t\t\t<span ng-if="field.isGeoField" class="lui-icon lui-list__aside  lui-icon--map"></span>\n\t\t\t\t\t<span qve-highlight text="{{getFieldDisplayName(field)}}" title="{{field.toolTip}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-nohits" ng-if="!dimensions.length && !fields.length" q-translation="Toolbox.Search.Nohits"></div>\n\t\t</div>\n\t</object-add-typeahead>\n</lui-popover>\n'},982:function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{canModifyHardProperties:e};function e(e,t,n){var i=e.Views&&e.Views.sheet;if(n.qHasSoftPatches||n.qExtendsId)return false;if(n.qInfo&&"masterobject"===n.qInfo.qType&&n.permissions)return n.permissions.update;if(e.view===i)return e.model&&e.model.layout.permissions.update;return t.app&&t.app.layout.permissions.update}}.apply(t,i),void 0!==r&&(e.exports=r))}}]);