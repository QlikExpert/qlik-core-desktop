/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[21],{1030:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(13),n(1031),n(145)],a=function(t,e,n){t.service("$exportDialog",["luiDialog",function(t){return{show:function i(a,o,r){return t.show({controller:["$scope",function(t){t.states={FAILED:-1,IDLE:0,PENDING:1,COMPLETED:2};t.state=t.states.PENDING;a.getLayout().then(function(n){var i=a.exportData(null,o,n.title||null);t.rpcId=i.requestId;i.then(function(n){t.exportUrl=e.rootPath+n.qUrl.substring(1);t.state=t.states.COMPLETED;n.qWarnings&&1e3===n.qWarnings[0]&&(t.dataIsTruncated=true)},function(e){t.state=t.states.FAILED;t.errorTranslation="ErrorCode."+e.code;e.isHandled=true})});t.openExportWindow=function(){window.open(t.exportUrl)};t.cancel=function(){t.rpcId?a.app.global.cancelRequest(t.rpcId).finally(t.close):t.close()};t.close=function(){t.destroyComponent();r&&r()}}],template:n})}}}])}.apply(e,i),void 0!==a&&(t.exports=a))},1031:function(t,e){t.exports='<lui-dialog id="export-dialog">\n\t<div ng-if="state === states.PENDING">\n\t\t<lui-dialog-header q-translation="Export.Exporting"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<div class="qv-loader pb-10"></div>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="cancel()" q-translation="Common.Cancel"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n\t<div ng-if="state === states.COMPLETED">\n\t\t<lui-dialog-header q-translation="Export.Completed"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<p class="pb-10">\n\t\t\t\t<span q-translation="Export.CompletedDescription"></span>\n\t\t\t\t<span q-translation="Export.WarningDataTruncated" ng-if="dataIsTruncated"></span>\n\t\t\t</p>\n\t\t\t<p class="pb-10">\n\t\t\t\t<a class="export-url" ng-href="{{exportUrl}}" target="_blank" q-translation="Export.CompletedLink"></a>\n\t\t\t</p>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="close()" q-translation="Common.Close"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n\t<div ng-if="state === states.FAILED">\n\t\t<lui-dialog-header q-translation="Export.Failed"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<p class="pb-10" q-translation="{{errorTranslation}}"></p>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="close()" q-translation="Common.Close"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n</lui-dialog>\n'},1061:function(t,e,n){"use strict";var i,a;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[],a=function(){var t={};function e(e){var n=e.component;if("string"===typeof n)return t[n];if("object"===o(n))return n;switch(e.type){case"items":return t.items;case"boolean":return t.checkbox;case"array":if(e.items)return t.items;return t.slider;default:throw e.type?new Error('No component found for type" '+e.type+'"'):new Error("Missing component/type in definition")}}function n(e,n){if(t[e])throw new Error("Soft option component already exists: "+e);t[e]=n}return{findComponent:e,addComponent:n,getComponent:function e(n){return t[n]}}}.apply(e,i),void 0!==a&&(t.exports=a))},1145:function(t,e,n){"use strict";var i,a;!(i=[],a=function(){function t(t){var e=t.layout;if(e){var n="auto-chart"===e.visualization?e.qUndoExclude.generated.visualization:e.visualization;return n}return""}return{get:t}}.apply(e,i),void 0!==a&&(t.exports=a))},1179:function(t,e,n){"use strict";var i,a;!(i=[n(89),n(288),n(141)],a=function(t,e,n){function i(i,s,l){var c,d=i.qSelectionObject?i.qSelectionObject.qSelections:null;var u=[];var p=1e4;if(l&&i.selectionsInStates&&i.selectionsInStates.length>0){var g=[];i.selectionsInStates.forEach(function(t){g=g.concat(t.qSelectionObject.qSelections)});d=g}if(d&&d.length>0){var f=function i(l,c){var d=r(c,p);var u=n.createTransientField(s,l.name,{qStateName:l.stateName}).then(function(n){var i=new e(n);var r=[];for(var s=1;s<=d;s++){var u=a(s,d,c,p);r.push(i.getData(u).then(function(t){return o(t,l)}))}return t.all(r).then(function(t){return t[0]})});return u};for(c=0;c<d.length;c++){var v={name:d[c].qField,values:[],isNumeric:false,stateName:d[c].stateName||"$"};var h=f(v,d[c].qSelectedCount);u.push(h)}}return t.all(u)}function a(t,e,n,i){var a;a=1==e?n:t*i<n?i:n%i;var o=[{qTop:(t-1)*i,qLeft:0,qWidth:1,qHeight:a}];return o}function o(t,e){if(t&&t.length){var n=t[0].qMatrix;var i;for(var a=0;a<n.length;a++){i=n[a][0];var o=!Number.isNaN(+i.qNum);e.values.push(o?i.qNum:i.qText);e.isNumeric=e.isNumeric||o}}return e}function r(t,e){return Math.ceil(t/e)}return{get:i,getRects:a,getFieldSelections:o,getCallCount:r}}.apply(e,i),void 0!==a&&(t.exports=a))},1180:function(t,e,n){"use strict";var i,a;!(i=[n(91),n(432),n(1145)],a=function(t,e,n){function i(n){var i={};var a=r(n);i.dataArea={show:true,title:a.title,hint:a.hint,tooltip:a.tooltip,options:[{label:t.get("Download.Image.DataArea.Default"),isDefault:true},{label:t.get("Common.Custom"),isCustom:true}]};i.scale={show:!e.getUsingReportingService(),title:"Download.Image.Scale",tooltip:"Download.Image.Scale.Tooltip",hint:"Download.Image.Scale.CustomHint",options:[{label:t.get("Download.Image.Scale.Default"),isDefault:true},{label:t.get("Common.Custom"),isCustom:true}]};return i}function a(){var n={};n.paperFormat={show:true,title:"Download.PDF.PaperFormat",aria:"Download.Aria.PDF.PaperFormat",options:s().slice()};n.paperFormat.options.splice(4,1);n.size={show:true,title:"Download.PDF.Scale",aria:"Download.Aria.PDF.Size"};var i=e.getUsingReportingService();n.size.options=i?[{label:t.get("Download.PDF.Scale.FitToPage"),value:3},{label:t.get("Download.PDF.Scale.NoScaling"),value:0}]:[{label:t.get("Print.Layout.CurrentSize"),value:"0"},{label:t.get("Print.Layout.BestFitNoPreserveAspectRatio"),value:"2"}];n.orientation={show:true,title:"Download.PDF.Orientation",options:l()};return n}function o(){var t={};t.output={show:true,title:"Print.ChooseFormat",options:[{type:"pdf",format:"pdf",label:"PDF"},{type:"image",format:"png",label:"PNG"}]};t.pdf=a();return t}function r(t){var e=n.get(t);var i=["barchart","linechart","combochart","boxplot","distributionplot","table","pivot-table"];return i.indexOf(e)>-1?{title:"Download.Image.DataArea",hint:"Download.Image.DataArea.CustomHint",tooltip:"Download.Image.DataArea.Tooltip"}:{title:"Tooltip.Details",hint:"Download.Image.DataArea.CustomHintDetails",tooltip:"Download.Image.DataArea.TooltipDetails"}}function s(){var e="landscape";var n={w:33.1,h:46.8};var i=function t(e,n,i){this.name=e;this.unit=i||"in";this.dimensions=n};i.prototype={toPixels:function t(e){var n,i,a=0;switch(this.unit){case"in":a=e;break;case"pi":a=1;break;case"cm":a=.393701*e;break}n=this.dimensions.w*a;i=this.dimensions.h*a;return{w:Math.round(n),h:Math.round(i)}},toMillimeters:function t(){var e,n,i=0;switch(this.unit){case"in":i=1/.0393701;break;case"cm":i=10;break}e=this.dimensions.w*i;n=this.dimensions.h*i;return{w:Math.floor(e),h:Math.floor(n)}},setLabel:function e(n){var i=this;var a;var o=t.localeDetected&&"en"===t.localeDetected.substring(0,2);var r=o?i.dimensions:i.toMillimeters();var s=r["portrait"===n?"w":"h"],l=r["portrait"===n?"h":"w"];a=o?" ("+s+'" x '+l+'")':" ("+s+" mm x "+l+" mm)";"Letter"===i.name?i.label=t.get("Print.PaperSize.Letter")+a:i.label=i.name+a}};function a(t,e){var n,i;if(t<e){n=t;i=e/2}else{n=t/2;i=e}return{w:n>i?i:n,h:i>n?i:n}}var o=[new i("A0",{w:n.w,h:n.h})];for(var r=1;r<8;r++)o.push(new i("A"+r,a(o[r-1].dimensions.w,o[r-1].dimensions.h)));o.push(new i("Letter",{w:8.5,h:11}));for(var s=0;s<3;s++)o.shift();o.forEach(function(t){t.setLabel(e)});return o}function l(){var e=[{orientation:"portrait",translationKey:"Print.Portrait"},{orientation:"landscape",translationKey:"Print.Landscape"}];e.forEach(function(e){t.ready.then(function(){e.label=t.get(e.translationKey)})});return e}return{getForImage:i,getForPdf:a,getForMobile:o}}.apply(e,i),void 0!==a&&(t.exports=a))},1314:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(48),n(89),n(94),n(387),n(388),n(95),n(50),n(1535),n(99),n(96),n(1537),n(1316),n(432),n(322),n(1562),n(51),n(1160),n(49),n(131),n(123),n(1030),n(1564),n(111),n(442)],a=function(t,e,n,i,a,o,r,s,l,c,d,u,p,g,f,v,h,m,b,y){var w=false;function S(e){e.currentTarget=t(".qv-gridcell-empty:not(.qv-gridresize-cell):not(.qv-gridcell-disabled)").first();e.target=e.currentTarget.find(".qv-gridcell-content");var n=t(e.currentTarget),i=n.scope(),a=i.cell,o=i.model;H(e,a,o,i.grid)}function x(t,e,n){var i=b.getFlag("SSA_IN_EDIT")?1:0;i=c.treatAsDesktop()?i:++i;t&&e.addItem({translation:"contextMenu.addToMasterItems",tid:"add-to-master-items",icon:"link",select:function t(){a.addObjectInCellToLibrary(n)}},i)}function C(t,o,r,l,c,d){var u=new n,p=i.view===i.Views.masterObject;if(i.isInEditMode()&&!p){l.object.isLink&&t.addItem({translation:"Visualization.Unlink",icon:"link",tid:"link",select:function t(){l.getVisualization().then(function(t){a.showBreakLinkDialog(t.model)})}});a.canAddToMasterItems(l,c).then(function(e){x(e,t,l)}).then(function(){u.resolve()})}else i.isInEditMode()||i.state===i.States.play?u.resolve():o.app.getLayout().then(function(n){D(l)&&n.permissions.createSnapshot&&t.addItem({translation:"contextMenu.takeSnapshot",icon:"camera",tid:"take-snapshot",select:function t(){if(s.isSmallDevice)l.snapshot.take();else{l.snapshot.isAnnotating=true;l.snapshot.take(true,true)}}});D(l)&&t.addItem({translation:"contextMenu.openSnapshotLibrary",tid:"open-snapshot-library",icon:"photo-library",select:function t(){l.snapshot.openLibrary(d,l.options.isZoomed)}});l.object.supportObjectInfo()&&t.addItem({translation:"contextMenu.showDetails",tid:"object-info",icon:"info",select:function t(){s.isSmallDevice?h.show(v,{object:l.object}):e.getService("objectInfoCard").show(l.object)}});u.resolve()});return u.promise}function D(t){return t.object.supportSnapshot()&&!t.object.ext.showRequirements(t.object)&&!t.object.viewDataToggled}function E(t,o,r,s,l,d,u){var p=[],g=i.view===i.Views.masterObject,f=!c.treatAsDesktop();if(g||!i.isInEditMode()||s.object.viewDataToggled)i.isInEditMode()||i.state===i.States.play||s.object.viewDataToggled?s.object.viewDataToggled&&p.push(o.app.getLayout().then(function(e){_(t,s);if(e.permissions.exportData)return O(t,s,true)})):p.push(o.app.getLayout().then(function(n){s.object.supportObjectInfo()&&!f&&t.addItem({translation:"contextMenu.showDetails",tid:"object-info",icon:"info",select:function t(){e.getService("objectInfoCard").show(s.object)}});f||N(t,n,s,u);s.object.canShowExploreMenu()&&!f&&t.addItem({translation:r.zoomCell&&r.zoomCell.showExploreMenu?"contextMenu.closeVisualExploration":"contextMenu.openVisualExploration",tid:"visual-exploration",icon:"control",select:function t(){r.zoomCell||r.zoom(s);s.toggleExploreMenu(!r.zoomCell.showExploreMenu);s.object.resize()}});s.object.supportViewData()&&!s.options.isActive&&_(t,s);I(t,s);A(t,o,s,f);F(t,s);return q(t,s,u,t.items.length,n.permissions.exportData)}));else{l&&d&&!f&&p.push(a.canAddToMasterItems(s,d).then(function(e){x(e,t,s)}));f||P(t,r,s);l&&s.object.isLink&&t.addItem({translation:"Visualization.Unlink",tid:"unlink",icon:"link",select:function t(){s.getVisualization().then(function(t){a.showBreakLinkDialog(t.model)})}});A(t,o,s,f);R(r,t,s,l);b.getFlag("SSA_IN_EDIT")&&p.push(G(t,o,s,u))}return n.all(p)}function q(t,e,n,i,a){if(s.isSmallDevice||!g.getDownloadObjectFlag()&&!g.getDownloadObjectDataFlag())return k(t,e,n,a);j(t,e,i);if(a)return"filterpane"===e.object.type.type?k(t,e,n,a):O(t,e,true,++i);return Promise.resolve()}function k(t,n,i,a){var o=e.getService("qvContextMenu"),r=o.menu();if(!a||n.object&&"container"===n.object.type.type)return Promise.resolve();L(r,n,i);return O(r,n).then(function(){if(r.items.length){var e;var n;for(var i=0;i<t.items.length;i++)if(t.items[i].divider){n=i;break}void 0===n&&(n=t.items.length);e=t.addItem({translation:"contextMenu.exportGroup",tid:"export-group",icon:"export"},n);r.items.forEach(function(t){e.addItem(t)})}})}function P(t,e,n){if(b.getFlag("SSA_IN_EDIT")&&i.isInEditMode()&&!s.isSmallDevice){var a=e.isActive?e.isActive(n.id):e.activeCell&&e.activeCell.id===n.id;t.addItem({translation:a?"Tooltip.StopEdit":"Tooltip.EditObject",icon:a?"tick":"edit",tid:"edit-properties",select:function t(){if(a){e.toggleActive(null);y.resetPropertyPanelToggle()}else e.toggleActive(n)}})}}function T(t,e){b.getFlag("SSA_IN_EDIT")&&i.isInEditMode()&&!s.isSmallDevice&&t.addItem({translation:"contextMenu.editSheetProperties",icon:"edit",tid:"edit-sheet-properties",select:function t(){e&&e.activeCell&&e.toggleActive(null);y.propertiesOpen=true}})}function I(t,e){if(b.getFlag("CLOUD_SHARING_SERVICE")){t.addItem({translation:"contextMenu.share",tid:"share",icon:"share",select:function t(){u.show(e.object)}});return true}return false}function j(t,e,n){var i=g.getDownloadObjectFlag();var a=g.getDownloadObjectDataFlag();var o=e.object&&"container"!==e.object.type.type&&"filterpane"!==e.object.type.type;if((i||a)&&!s.isSmallDevice&&o){if((!i||!e.object.supportExport())&&(!a||!e.object.supportExportData()))return false;t.addItem({translation:"Download.Title",tid:"download",icon:"download",select:function t(){var n=e.object.objectSize&&e.object.objectSize.w?e.object.objectSize.w:"640";var i=e.object.objectSize&&e.object.objectSize.h?e.object.objectSize.h:"480";p.show(e.object,n,i)}},n);return true}return false}function z(t,e){e.object.supportExport()&&!s.isSmallDevice&&t.addItem({translation:"contextMenu.export.chart.image",tid:"print-object-image",select:function t(n){var i=e.object.objectSize&&e.object.objectSize.w?e.object.objectSize.w:"640";var a=e.object.objectSize&&e.object.objectSize.h?e.object.objectSize.h:"480";var o="Image";f.showForObject(e.object,o,"object",i,a,n)}})}function M(t,e){e.object.supportExport()&&!s.isSmallDevice&&t.addItem({translation:"contextMenu.export.chart.pdf",tid:"print-object-pdf",select:function t(n){var i=e.object.objectSize&&e.object.objectSize.w?e.object.objectSize.w:"640";var a=e.object.objectSize&&e.object.objectSize.h?e.object.objectSize.h:"480";var o="Pdf";f.showForObject(e.object,o,"object",i,a,n)}})}function L(t,e,n){z(t,e,n);M(t,e)}function A(t,n,i,a){var o=m._extractOptions(location.pathname);!a&&o&&o.indexOf("developer")>-1&&t.addItem({translation:"Developer",tid:"object-developer",icon:"debug",select:function t(){e.getService("objectDeveloperDialog").show(n,i.object)}})}function O(t,n,i,a){if(!n.object.supportExportData())return Promise.resolve();if("function"===typeof n.object.ext.getExportRawDataOptions)return n.object.ext.getExportRawDataOptions.call(this,t,n);t.addItem({translation:"contextMenu.export",tid:"export",icon:i?"export":null,select:function t(i){e.getService("$exportDialog").show(n.model,void 0,i)}},a);return Promise.resolve()}function _(t,e,n){t.addItem({translation:e.object.viewDataToggled?"contextMenu.viewSource":"contextMenu.viewData",tid:e.object.viewDataToggled?"1f4b8c":"10093a",icon:e.object.viewDataToggled?"back":"table",select:function t(){e.object.toggleDataView()}},n)}function F(t,e,n){b.getFlag("SINGLE_CONFIG")&&!s.isSmallDevice&&t.addItem({translation:"contextMenu.embed",tid:"79f6",icon:"code",suppressOnCloseCall:true,select:function t(n){r.publish("/embed-dialog/open",{type:"object",objectId:e.id,onClose:n})}},n)}function N(t,e,n,i,a){if(D(n)){e.permissions.createSnapshot&&t.addItem({translation:"contextMenu.takeSnapshot",icon:"camera",tid:"take-snapshot",select:function t(){if(s.isSmallDevice)n.snapshot.take();else{n.snapshot.isAnnotating=true;n.snapshot.take(true,true)}}},a);t.addItem({translation:"contextMenu.openSnapshotLibrary",tid:"open-snapshot-library",icon:"photo-library",select:function t(){n.snapshot.openLibrary(i,n.options.isZoomed)}},++a)}}function R(t,e,n,i){if(i&&!n.object.isInvalid){e.addItem({translation:"contextMenu.cut",divider:b.getFlag("SSA_IN_EDIT"),tid:"cut",icon:"cut",select:function t(){r.publish("/activeSheet/cutObject",n)}});e.addItem({translation:"contextMenu.copy",tid:"copy",icon:"copy",select:function t(){r.publish("/activeSheet/copyObject",n)}})}var a=localStorage["QlikView-clipboard"]&&localStorage["QlikView-clipboard"].length>0;a&&e.addItem({translation:t.canInsert||n.object.ext.addChild?"contextMenu.paste":"contextMenu.pasteAndReplace",tid:"paste-and-replace",icon:"paste",select:function t(){r.publish("/activeSheet/pasteObject",n)}});e.addItem({translation:"Common.Delete",tid:"delete",icon:"bin",select:function e(){t.gridService.removeCell(n)}})}function G(t,e,n,i){return e.app.getLayout().then(function(e){var a;for(var o=0;o<t.items.length;o++)if(t.items[o].divider){a=o;break}void 0===a&&(a=t.items.length);N(t,e,n,i,a);a++;n.object.supportViewData()&&!n.options.isActive&&_(t,n,++a);F(t,n,++a);return q(t,n,i,++a,e.permissions.exportData)})}function $(t,n,i,a,o,r){var s=e.getService("qvContextMenu");var l=s.menu();return o&&o.getContextMenu?o.getContextMenu(l,a).then(function(){return E(l,t,n,i,o,r,a).then(function(){return l})}):E(l,t,n,i,o,r,a).then(function(){return l})}function V(t,n,a,s,c,d){function u(e){g.show(p,{position:{x:t,y:n},component:l,onOpen:function t(){e.showingObjectMenu=true},onClosing:function t(){e.closeMenu();e.showingObjectMenu=false}})}var p;var g=e.getService("qvContextMenu");var f=a.target.classList.contains("lui-icon--draggable")||a.target.classList.contains("qv-gridresize-point");!b.getFlag("SSA_IN_EDIT")&&i.isInEditMode()&&d.gridService.activateCell(s);if(f){a.stopPropagation();return}if(s.isEmpty){d.gridService.activateCell(null);p=g.menu();if(i.isInEditMode){var v=localStorage["QlikView-clipboard"]&&localStorage["QlikView-clipboard"].length>0;v&&p.addItem({translation:"contextMenu.paste",tid:"paste",icon:"paste",select:function t(){r.publish("/activeSheet/pasteObject",s)}})}u(s)}else s.getVisualization().then(function(t){o.load().then(function(n){p=e.getService("qvContextMenu").menu();var o=i.view===i.Views.masterObject,r=function t(){if(!s.object.viewDataToggled){P(p,d,s);d.zoomCell?p.addItem({translation:"Tooltip.ZoomOut",icon:"remove",tid:"zoom-out",select:function t(){d.zoom(null);s.object.selectionsApi&&s.object.selectionsApi.active&&s.object.selectionsApi.cancel()}}):p.addItem({translation:"Tooltip.ZoomIn",icon:"expand",tid:"zoom-in",select:function t(){d.zoom(s);s.object.selectionsApi&&s.object.selectionsApi.active&&s.object.selectionsApi.cancel()}});s.object.canShowExploreMenu()&&!i.isInEditMode()&&p.addItem({translation:d.zoomCell&&d.zoomCell.showExploreMenu?"contextMenu.closeVisualExploration":"contextMenu.openVisualExploration",tid:"visual-exploration",icon:"control",select:function t(){d.zoomCell||d.zoom(s);s.object.selectionsApi&&s.object.selectionsApi.active&&s.object.selectionsApi.cancel();s.toggleExploreMenu(!d.zoomCell.showExploreMenu);s.object.resize()}})}C(p,c,d,s,n,a).then(function(){u(s)})};t.getObjectMenu&&!o&&t.getObjectMenu(p).then(function(){i.state!==i.States.play?$(c,d,s,a,t,n).then(function(t){t.items.length&&p.addItem({translation:"contextMenu.title",tid:"more",icon:"more",select:function e(n,i){g.show(t,{position:{x:i.x,y:i.y}})}});r()}):r()})})})}function H(t,a,s,l,c){var d;var u=e.getService("qvContextMenu");!b.getFlag("SSA_IN_EDIT")&&i.isInEditMode()&&l.gridService.activateCell(a);if(a.isEmpty){d=u.menu();T(d,l);var p=localStorage["QlikView-clipboard"]&&localStorage["QlikView-clipboard"].length>0;i.isInEditMode()&&p&&d.addItem({translation:"contextMenu.paste",tid:"paste",icon:"paste",select:function t(){r.publish("/activeSheet/pasteObject",a)}});u.show(d,{position:{x:t.pageX,y:t.pageY}})}else{d=u.menu();var g=e.getService("$timeout");var f=g(function(){return null},500);var v=function t(){return null};var h=n.Promise.race([a.getVisualization().catch(v),f]);var m=n.Promise.race([o.load().catch(v),f]);n.all({obj:h,assets:m}).then(function(e){var n=e.obj;var i=e.assets;$(s,l,a,t,n,i).then(function(e){"keydown"===t.type?u.showInline(e,{position:{x:t.pageX,y:t.pageY},onCloseFn:c},t.currentTarget):u.show(e,{position:{x:t.pageX,y:t.pageY}})})})}}function U(e,n,a,o){var r;if(s.isSmallDevice&&n!==o.zoomCell||i.inStoryPlayState())return;function l(){var i=".objectmenu",a=[];function o(){n.object&&r&&n.object.on();d(document.body).off("*",i)}n.closeMenu=o;function s(e){var n=document.elementFromPoint(e.pagePoints[0].x,e.pagePoints[0].y);if(t(n).hasClass("touch-object-menu-item-label"))return[];return t(n).closest(".qv-objectmenu-item-container")}function l(){if(n.showingObjectMenu){var e=t(".touch-object-menu");e.trigger("touch-release-outside");o();d.preventGestures(this.gestureHandler);window.event&&window.event.preventDefault()}}function c(t,e){if(n.showingObjectMenu){var i=s(e);if(!i[0]){l.call(this,t);return}i.trigger("touch-release",e.pagePoints[0]);o();d.preventGestures(this.gestureHandler);t.preventDefault()}}t(e.target).trigger("qv-swipecancel");d(document.body).swipe({id:i,options:{preventDefault:true},start:function t(e){d.preventGestures(this.gestureHandler);e.preventDefault()},update:function t(e,n){var i=s(n);if(i[0]){if(i[0]!==a[0]){a[0]&&a.trigger("touch-out");i.trigger("touch-in");a=i}}else if(a[0]){a.trigger("touch-out");a=[]}d.preventGestures(this.gestureHandler);e.preventDefault()},end:function t(e,i){a[0]?c.call(this,e,i,n):l.call(this,e,n)},cancel:function t(e){l.call(this,e,n)}})}function c(){n.object&&n.object.isOn().then(function(t){r=t;n.object.off()});V(e.pageX,e.pageY,e,n,a,o);l()}c()}function B(t,e,n,i,a){if(w){w=false;return}c.treatAsDesktop()?H(t,e,n,i,a):U(t,e,n,i)}function W(t,e,n,i){if(!c.treatAsDesktop()){w=true;U(t,e,n,i)}}function Y(t,i,a,r){var s=e.getService("$timeout");var l=s(function(){return null},500);var c=function t(){return null};var d=n.Promise.race([a.getVisualization().catch(c),l]);var u=n.Promise.race([o.load().catch(c),l]);return n.all({obj:d,assets:u}).then(function(e){return $(t,i,a,r,e.obj,e.assets)})}return{onHintContextMenu:S,onCellContextMenu:B,onCellRadialContextMenu:W,addDownloadOrExport:q,getObjectMenu:Y}}.apply(e,i),void 0!==a&&(t.exports=a))},1315:function(t,e,n){"use strict";var i,a;!(i=[n(89),n(48),n(140),n(132),n(94),n(1179)],a=function(t,e,n,i,a,o){var r=function t(){return n.get().then(function(t){var e=t.layout&&t.layout.qTitle||"";var n=t.id||"";var i={appName:e,appId:n};return i})};var s=function e(s){var l=r();var c=n.get().then(function(t){return i.get().then(function(e){return e.getLayout().then(function(e){return o.get(e,t.enigmaModel)})})});return t.all([l,c]).then(function(e){var n=e[0];var i=e[1];if(!n)return t.reject();var o=a.model&&"sheet"===a.model.genericType?a.model.id:"";var r=s.layout&&s.layout.title?s.layout.title:" ";var l=n.appId.indexOf(".");var c=l>-1?n.appId.substring(0,l):n.appId;var d={appId:c,selections:i,chartId:s.model.id,sheetId:o,chartTitle:r};return{payload:d}})};var l={generateInsights:function t(e){return s(e).then(function(t){return l.postInsights(t.payload)})},postInsights:function n(i,a,o){var r=t();this.cancel();var s=this.getStates();var c="/api/v1/insights";var d=e.getService("$http");var u=e.getService("$interval");a=a||15e3;o=o||3e3;var p=a/o;var g=0;var f=null;var v=function t(){g++;if(g>p){u.cancel(f);r.reject({status:s.TIMEOUT});return}d({url:c,method:"POST",data:i}).then(function t(e){var n=e.data.StaticEndpointURL;var i=e.data.DirectEndpointURL;var a=0;var o={};i&&d({url:i,method:"GET"}).then(function(t){s("direct",t)},function(t){console.log(t)});function s(t,e){a++;switch(t){case"direct":o.directUrl=e.config.url;break}if(a>=1){o.staticUrl=n;u.cancel(f);r.resolve(o)}}},function t(e){if(413==e.status){u.cancel(f);r.reject({status:s.FAILED,data:e.data,httpStatusCode:e.status});return}console.log("No workers available on service - retrying ...")})};v();f=u(v,o);l.poolPromise=f;return r.promise},getInsightDetails:function t(n){var i="/api/v1/insights/"+n+"/details";var a=e.getService("$http");return a.get(i).then(function(t){return t.data})},cancel:function t(){if(this.poolPromise){var n=e.getService("$interval");n.cancel(this.poolPromise);this.poolPromise=null}},getStates:function t(){return{TIMEOUT:-2,FAILED:-1,PENDING:0,COMPLETED:2}}};return l}.apply(e,i),void 0!==a&&(t.exports=a))},1316:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(1543),n(1317),n(1547),n(1548),n(1550),n(1551),n(1554),n(1555),n(91),n(11),n(432),n(103),n(1145),n(1559),n(1560)],a=function(t,e,n,i,a,o,r,s,l,c,d,u,p,g){function f(n,i,a){var o="Download.Title";var r=S();var s=t.getService("luiDialog").show({controller:m,template:e,input:{title:o,object:n,sourceType:"visualization",currentWidth:i,currentHeight:a,currentDpi:r}});s.closed.then(function(){u.cancel()})}function v(n){var i;var a="Download.Title";i=n.model.isCustomSize()?d("#grid"):d(".qvt-sheet > .sheet-grid");var o=Math.round(i.width()||960);var r=Math.round(i.height()||720);var s=S();var l=t.getService("luiDialog").show({controller:m,template:e,input:{title:a,object:n,sourceType:"sheet",currentWidth:o,currentHeight:r,currentDpi:s}});l.closed.then(function(){u.cancel()})}var h;m.$inject=["$scope"];function m(t){h=t;t.states=u.getStates();t.tabS=[];t.getChangedActiveTabAria=s;t.getCurrentlyActiveTabAria=l;t.translate=c.get;t.title=t.input.title;t.selectTab=n;t.tabList=r();var e={sourceType:t.sourceType};"visualization"===t.sourceType&&(e.chartType=g.get(t.object));p.trackEvent(p.customEvents.DOWNLOAD_DIALOG_OPEN,e);t.closingDeferred.promise.then(function(){t.closingDialog=true});function n(e){if(!t.closingDialog){t.activeTab=e;t.tabS[e]&&t.tabS[e].attemptFirstCall&&t.tabS[e].attemptFirstCall()}}t.injectTab=i;function i(e,n){!t.tabList||t.tabList[e].hide||t.tabList[e].disabled?t.tabS[e]={}:t.tabS[e]=n}t.doCall=a;function a(e){var n=t.tabS[e];var i=t.tabList[e].ref;return w(n,i)}function o(){return"sheet"===t.sourceType}function r(){var e=[{ref:"image",index:"0",aria:c.get("Download.Aria.TabCurrentlyOnImage")+" "+c.get("Download.Aria.TabImage"),id:"download-image-tab",tid:"download-image-tab",translationKey:"Download.Image.TabTitle",icon:"image",pendingKey:"Download.Image.Pending"},{ref:"pdf",index:"1",aria:c.get("Download.Aria.TabCurrentlyOnPDF")+" "+c.get("Download.Aria.TabPDF"),id:"download-pdf-tab",tid:"download-pdf-tab",translationKey:"Download.PDF.TabTitle",icon:"file",pendingKey:"Download.PDF.Pending"},{ref:"data",index:"2",aria:c.get("Download.Aria.TabCurrentlyOnData")+" "+c.get("Download.Aria.TabData"),id:"download-data-tab",tid:"download-data-tab",translationKey:"Common.Data",icon:"table",pendingKey:"Download.Data.Pending",disabledTitleKey:"Download.Data.NoData"}];if(o()){e[0].disabled=true;e[2].disabled=true}else{e[0].hide=!u.getDownloadObjectFlag();e[0].disabled=!t.object.supportExport();e[1].hide=!u.getDownloadObjectFlag();e[1].disabled=!t.object.supportExport();e[2].hide=!u.getDownloadObjectDataFlag();e[2].disabled=!t.object.supportExportData()}return e}function s(e){switch(e){case t.tabList[0].ref:return t.translate("Download.Aria.TabChangedToImage");case t.tabList[1].ref:return t.translate("Download.Aria.TabChangedToPDF");case t.tabList[2].ref:return t.translate("Download.Aria.TabChangedToData");default:""}}function l(e){switch(e&&t.tabList){case t.tabList[0].ref:return t.translate("Download.Aria.TabCurrentlyOnImage");case t.tabList[1].ref:return t.translate("Download.Aria.TabCurrentlyOnPDF");case t.tabList[2].ref:return t.translate("Download.Aria.TabCurrentlyOnData");default:return""}}t.downloadFile=d;function d(){var n=t.tabS[t.activeTab].printUrl;var i=t.tabS[t.activeTab].printFileName;var a=t.tabS[t.activeTab].fileType;e.fileType=a;p.trackEvent(p.customEvents.DOWNLOAD_CONFIRMED,e);var o=function e(){t.tabS[t.activeTab].state=t.states.FAILED};u.downloadFile(n,i,a,o)}}var b={pdf:{directive:"qvDownloadPdfTab",template:o,link:r.directiveLinkFunction},image:{directive:"qvDownloadImageTab",template:s,link:l.directiveLinkFunction},data:{directive:"qvDownloadDataTab",template:i,link:a.directiveLinkFunction}};t.directive(b.image.directive,[function(){return y(b.image)}]);t.directive(b.pdf.directive,[function(){return y(b.pdf)}]);t.directive(b.data.directive,[function(){return y(b.data)}]);function y(t){return{restrict:"E",template:t.template,replace:true,scope:{},controller:["$scope","$sce",function(e,n){e.sce=n;e.input=h.input;e.states=h.states;if(e.input.object){var i=e.input.object.model.id;var a={id:i,model:e.input.object.model,options:{id:i,isVisible:true,isOnGrid:false,isZoomed:false}};e.obj=a;e.translate=c.get}e.doCall=h.doCall;e.injectScopeToParent=h.injectTab;t.link(e)}]}}function w(t,e){var i=n.create(t);return i.confirm(e)}function S(){var t=document.createElement("div");t.style.width="1in";var e=document.getElementsByTagName("body")[0];e.appendChild(t);var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("width");e.removeChild(t);var i=n&&Math.round(parseFloat(n));i=i||96;return i>300?300:i}return{show:f,showForGlobalMenu:v}}.apply(e,i),void 0!==a&&(t.exports=a))},1317:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(11),n(432),n(91),n(1145),n(312)],a=function(t,e,n,i,a,o){var r={image:null,pdf:null};function s(i){function a(t){i.statusCode=t?t.httpStatusCode:"";var e=t&&t.status;switch(e){case i.states.CANCELED:case i.states.TIMEOUT:i.state=e;break;default:i.state=i.states.FAILED;break}}function o(){return{width:e("#qv-story-play").is(":visible")?e("#qv-story-play").find(".qv-story-play-slide").first().width():i.input.currentWidth,height:e("#qv-story-play").is(":visible")?e("#qv-story-play").find(".qv-story-play-slide").first().height():i.input.currentHeight,dpi:i.input.currentDpi}}function s(t){if("data"===t&&i.print.hasNoDataToExport){i.state=i.states.NODATA;return false}c(t);return true}function c(e){if(i.obj&&i.input.object){var s,c,d,u,p;var g=i.print.minSize?i.print.minSize:8;i.print.width<g&&(i.print.width=g);i.print.height<g&&(i.print.height=g);i.print.dpi<i.minDpi&&(i.print.dpi=i.minDpi);i.print.dpi>i.maxDpi&&(i.print.dpi=i.maxDpi);var f=o();p={width:Math.round(f.width),height:Math.round(f.height),dpi:f.dpi};var v=i.imageCustomSize?{width:i.print.width,height:i.print.height,dpi:i.print.dpi}:{width:i.input.currentWidth,height:i.input.currentHeight,dpi:i.input.currentDpi};c={width:Math.round(v.width*(i.input.currentDpi/v.dpi)),height:Math.round(v.height*(i.input.currentDpi/v.dpi))};s={};"image"===e&&(s={imageType:i.print.format,captureSize:v});if("pdf"===e){d=i.selectedSize.toMillimeters();u={right:10,left:10,top:10,bottom:10};s={width:d["portrait"===i.selectedLayout.orientation?"w":"h"],height:d["portrait"===i.selectedLayout.orientation?"h":"w"],dpi:i.print.dpi,fitCriteria:i.print.fitCriteria,margin:u,sourceSize:p,size:i.selectedSize,orientation:i.selectedLayout.orientation}}s.timeoutMsec=12e4;s.checkInterval=3e3;i.state=i.states.PENDING;"data"===e&&(s.timeoutMsec=24e4);var h=t.getService("$timeout");switch(e){case"image":h.cancel(r.image);break;case"pdf":h.cancel(r.pdf);break}n.requestDownload(i.input.object,s,e,p,c,i.input.sourceType).then(function(n){i.printUrl=n.qUrl;i.printFileName=l(i.input.object);var a=t.getService("$timeout");var o=a(function(){i.state=i.states.COMPLETED},1e3);switch(e){case"image":r.image=o;break;case"pdf":r.pdf=o}},a)}else i.destroyComponent()}return{confirm:s}}function l(t){var e=50;var n="Qlik Sense";var a=" - ";var o=t.model?t.model.layout.title:"";o.length>e&&(o=o.substring(0,e-3)+"...");return o?n+a+o+d(a):n+a+i.get("Common.Untitled")+u(t,a)+d(a)}function c(){var e=t.getService("$window");var n;n=e.navigator.languages?e.navigator.languages[0]:e.navigator.userLanguage||e.navigator.language;return n}function d(t){var e={year:"numeric",month:"long",day:"numeric"};var n=c();return n?t+(new Date).toLocaleDateString(c(),e):t+(new Date).toLocaleDateString()}function u(t,e){var n=a.get(t);if(n){var r=new o({type:n}).getLibraryInfo().translationKey;var s=i.get(r);return s===r?"":e+s}return""}return{create:s}}.apply(e,i),void 0!==a&&(t.exports=a))},1329:function(t,e,n){"use strict";var i,a;!(i=[n(90),n(48),n(172),n(340),n(426),n(89),n(95)],a=function(t,e,n,i,a,o,r){function s(t,e){e.visualization="text";e.visualizationType=t.textType;e.ratio=t.maintainRatio;e.style={color:"#6E6E6E",text:""}}function l(t,e){e.visualization="shape";e.visualizationType=t.shape;e.ratio=t.maintainRatio;e.dataPath=t.src;e.style={color:"#000000"}}function c(t,e){e.visualization="image";e.ratio=t.maintainRatio;e.srcPath={qStaticContentUrlDef:null}}function d(t,e,n,i){e.ratio=true;e.visualization="snapshot";e.visualizationType=i;e.style={id:t}}function u(t,e){if(t.layout.qChildList&&t.layout.qChildList.qItems.length>n.maxNumberOfSlideItems)return;var s;e.position["z-index"]=t.layout.qChildList.qItems.length+4;if(e.copiedFromSlide&&e.isEmbeddedSnapshot){s=e.position;delete e.position}a.get().then(function(a){a.startGroup().then(function(l){i.create(e,t).then(function(t){var i=[];var c=false;n.lastObjAdded.id=t.id;if("snapshot"===e.visualization)if(e.copiedFromSlide&&e.isEmbeddedSnapshot){i.push(p(t,s,e.id));if("cut"===e.action){var d=function i(o){if(n.lastObjAdded.id===o){g(t.app,e.id,e.copiedFromSlide).then(function(){a.endGroup(l)});r.unsubscribe("/story/snapshotReadyForId",i)}};r.subscribe("/story/snapshotReadyForId",d);c=true}}else{i.push(f(t,e));"cut"===e.action&&i.push(g(t.app,e.id,e.copiedFromSlide))}else"cut"===e.action&&i.push(g(t.app,e.id,e.copiedFromSlide));o.all(i).then(function(){c||a.endGroup(l)})})})})}function p(e,n,i){return e.copyFrom(i).then(function(){return e.getProperties().then(function(i){var a=t.extend(true,i,{position:n});return e.setProperties(a)})})}function g(t,e,n){return t.getObject(n).then(function(t){return t.destroyChild(e)})}function f(t,e){return t.embedSnapshotObject(e.style.id).then(function(){if(e.effectPath)return v(t,e)})}function v(e,n){return e.getSnapshotObject().then(function(e){return e.getProperties().then(function(i){var a=t.extend(true,i,n.layout);return e.setProperties(a)})})}function h(t){var e=t.object.size.w/t.object.size.h,i,a,o,r,s=n.getGridOptions().columns,l=n.getGridOptions().rows;if(t.parent.w>t.parent.h){i=t.object.size.h/t.parent.h;o=l*i;r=o*e;if(r>s){r=s;o=r/e}}else{a=t.object.size.w/t.parent.w;r=s*a;o=r/e;if(o>l){o=l;r=o*e}}return{rows:Math.round(o),cols:Math.round(r)}}function m(t){var e=n.getGridOptions().cellSize;return{width:e.height*t.helperSize.height,height:e.width*t.helperSize.width}}function b(t,e){var i=n.getGridOptions().cellSize;var a=n.getGridOptions().columns*i.width;var o=t;var r=n.getGridOptions().rows*i.height;var s=e;var l=r/2-s/2;var c=a/2-o/2;l=(Math.round(l/i.height)*i.height/r*100).toString()+"%";c=(Math.round(c/i.width)*i.width/a*100).toString()+"%";return{top:l,left:c}}function y(t,e){var n=w().width;var i=w().height;t=(t/n*100).toString()+"%";e=(e/i*100).toString()+"%";return{width:t,height:e}}function w(){var t=n.getGridOptions().cellSize;var e=n.getGridOptions().columns*t.width;var i=n.getGridOptions().rows*t.height;return{width:e,height:i}}function S(t,e,n){t.width=y(e,n).width;t.height=y(e,n).height;t.top=b(e,n).top;t.left=b(e,n).left;return t}e.service("$addSlideItemService",[function(){var t={};var e={position:t};return{addText:function t(i,a,o){if(i.hasOwnProperty("position"))e.position=i.position;else{var r=n.getGridOptions().cellSize;var l=m(i).width;var c=m(i).height;if("title"===a.textType){c=3*r.height;l=19*r.width}e.position=S(e.position,l,c)}s(a,e);u(o,e)},addSnapshot:function t(i,a,o){if(i.hasOwnProperty("position"))e.position=i.position;else{var r=n.getGridOptions().cellSize;var s=a.qData.snapshotData;var l=h(s);var c=n.getGridOptions();var p=l.rows>=c.rows?(c.rows-1)*r.height:r.height*l.rows;var g=l.cols>=c.columns?(c.columns-1)*r.width:r.width*l.cols;e.position=S(e.position,g,p)}d(a.qInfo.qId,e,o,a.qData.visualizationType);u(o,e)},addShape:function t(n,i,a){if(n.hasOwnProperty("position"))e.position=n.position;else{var o=m(n).width;var r=m(n).height;e.position=S(e.position,o,r)}l(i,e);u(a,e)},addMedia:function t(e,n,i){c(n,e);u(i,e)},addItemToSlide:u}}])}.apply(e,i),void 0!==a&&(t.exports=a))},1535:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(48),n(96),n(486),n(97),n(1536)],a=function(t,e,n,i,a,o){var r="objectMenuListView";function s(t,e,n){t.css({display:"block",left:e-100,top:n-100})}function l(t,e,n){var i={start:3*Math.PI/2,end:-Math.PI/2,range:Math.PI,direction:-1,distance:Math.PI/3.5,radius:n},a={x:t.left+t.width/2,y:t.top+t.height/2},o=window.innerWidth,r=window.innerHeight,s={left:-Math.min(a.x-(e+n),0),right:-Math.min(o-(a.x+e+n),0),top:-Math.min(a.y-(e+n),0),bottom:-Math.min(r-(a.y+e+n),0)},l=i.start,c=i.end,d=function e(n){return n<=0?0:2*Math.acos(1+-n/t.height)};if(s.left){i.direction=1;c=l;l+=Math.PI-d(e);s.top?c+=-d(s.top):s.bottom&&(l+=-d(s.bottom))}else if(s.top){l+=d(s.top);s.right&&(c+=-d(s.top))}else if(s.right){c+=Math.PI+d(e);s.bottom&&(c+=d(s.bottom))}else if(s.bottom){c+=Math.PI;c+=d(s.bottom+2*e);l+=Math.PI-d(s.bottom+e)}i.range=l-c;i.start=l;i.end=c;return i}function c(t,e){t.distance=Math.max(Math.min(t.range/e,Math.PI/3.5),Math.PI/5)}function d(t,e){var a=e._items,o=t[0].getBoundingClientRect(),s=a[0].getBoundingClientRect(),l=t.index(),d=a.children().length,u,p=e._rimInfo,g;c(p,d-(d>8?1:2));u=1===p.direction?p.end+l*p.distance:p.start-l*p.distance;g=i.getCartPos({r:p.radius,a:u},{x:s.width/2,y:s.height/2});t.delay(200).animate({top:g.y-o.height/2,left:g.x-o.width/2},350,"easeOutQuint");n(t[0]).tap({id:r,end:function e(i,a){t.find(".qv-objectmenu-item-container").trigger("touch-release",a.pagePoints[0]);n.preventGestures(this.gestureHandler)}})}function u(t,n,i,a,o,r){t.on("touch-release",s);t.on("touch-in",c);t.on("touch-out",l);function s(t,s){var l=300;n.animate({backgroundColor:"#FF9326",color:"#FFF"},50,"easeInCubic");e.$apply(e.$rootScope,function(){o(a.args);i(function(){a.select(a.args,s);r()},l)});t.stopPropagation()}function l(){if(!a.hover)return;var t,i,o=16;n.stop(true,true);t=n.position();i=parseFloat(n.css("fontSize").split("px")[0]);n.toggleClass("big");n.animate({height:n.outerHeight()-o,width:n.outerWidth()-o,fontSize:i-o/2,left:t.left+o/2,top:t.top+o/2},200,"easeInCubic");e.$apply(e.$rootScope,function(){a.hover=false})}function c(){if(a.hover)return;var t,i,o=16;n.stop(true,true);t=n.position();i=parseFloat(n.css("fontSize").split("px")[0]);n.toggleClass("big");n.animate({height:n.outerHeight()+o,width:n.outerWidth()+o,fontSize:i+o/2,left:t.left-o/2,top:t.top-o/2},200,"easeInCubic");e.$apply(e.$rootScope,function(){a.hover=true})}}var p={template:o,scope:{menu:"=",options:"="},controller:["$scope","$element","$timeout",function(e,i,o){function c(){return i.children().first()}function p(){"function"===typeof e.options.onClosing&&e.options.onClosing.call(null)}e.close=function(){"function"===typeof e.options.onClosing&&e.options.onClosing.call(null);var i=c();n(i).off("*",r);g._rimItems.each(function(t,e){n(e).off("*",r)});g=null;a.off("start",e.close);t(document).off("keydown.touch-context-menu");e.destroyComponent()};a.on("start",e.close);c().on("touch-release-outside",e.close);t(document).on("keydown.touch-context-menu",function(t){27===t.keyCode&&e.close()});var g={};o(function(){var n=c();s(n,e.options.position.x,e.options.position.y);var i=n.find(".touch-object-menu-decor");g._rimInfo=l(n[0].getBoundingClientRect(),25,80);g._rimItems=n.find(".touch-object-menu-item");g._items=n.find(".items");o(function(){g._rimItems.each(function(n,i){d(t(i),g);u(t(i).children(),t(i),o,e.menu.items[n],p,e.close)});i.addClass("big")});"function"===typeof e.options.onOpen&&e.options.onOpen.call(null)})}]};return p}.apply(e,i),void 0!==a&&(t.exports=a))},1536:function(t,e){t.exports='<div class="touch-object-menu" qva-outside="close()">\n\t<div class="touch-object-menu-decor"></div>\n\t<div class="items">\n\t\t<div ng-repeat="item in menu.items" class="touch-object-menu-item" tid="{{item.tid}}">\n\t\t\t<div class="qv-objectmenu-item-container">\n\t\t\t\t<div ng-if="item.hover" class="touch-object-menu-item-wrapper top">\n\t\t\t\t\t<span class="touch-object-menu-item-label top">{{item.getLabel()}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="lui-icon  lui-icon--{{item.icon}}"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},1537:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(1315),n(1538),n(1539),n(1540),n(1541),n(1542),n(91),n(49)],a=function(t,e,n,i,a,o,r,s,l){var c;d.$inject=["$scope"];function d(t){c=t;t.translate=s.get;t.getCurrentlyActiveTabAria=a;t.tabList=[{ref:"link"},{ref:"other"}];t.states=e.getStates();t.state=t.states.PENDING;t.enableOther=l.getFlag("CLOUD_SHARING_SERVICE_OTHER");t.enableSnapshot=l.getFlag("CLOUD_SHARING_SERVICE_SNAPSHOT");t.shareUrl="";t.shareUrlList=[];e.generateInsights(t.obj).then(function(e){t.showUrl=true;t.state=t.states.COMPLETED;t.shareUrlList=[e.staticUrl,e.directUrl];i(1)},function(e){t.statusCode=e.httpStatusCode;t.state=e.status});t.modeOptions=[{value:"0",label:s.get("Share.QlikSnapshot"),desc:s.get("Share.QlikSnapshotDesc")},{value:"1",label:s.get("Share.DirectLink"),label2:" ("+s.get("Share.RequiresLogin")+")",desc:s.get("Share.DirectLinkDesc")}];t.currentModeValue=t.enableSnapshot?t.modeOptions[0].value:t.modeOptions[1].value;t.updateLink=i;var n=false;function i(e){if(t.showUrl){var i;if(n)i=e;else{i="0"==e?"1":"0";t.enableSnapshot||(i="1")}n=false;t.shareUrl=t.shareUrlList[i]}else n=0==e}function a(e){switch(e){case t.tabList[0].ref:return t.translate("Share.Aria.TabCurrentlyOnCopyLink");case t.tabList[1].ref:return t.translate("Share.Aria.TabCurrentlyOnOther")}}}var u={link:{directive:"shareLink",template:a,link:i.directiveLinkFunction},other:{directive:"shareOther",template:r,link:o.directiveLinkFunction}};t.directive(u.link.directive,[function(){return p(u.link)}]);t.directive(u.other.directive,[function(){return p(u.other)}]);function p(t){return{restrict:"E",template:t.template,replace:true,scope:{},controller:["$scope",function(e){e.parentScope=c;t.link(e)}]}}function g(i){var a=t.getService("luiDialog").show({controller:d,template:n,input:{obj:i}});a.closed.then(function(){e.cancel()})}return{show:g}}.apply(e,i),void 0!==a&&(t.exports=a))},1538:function(t,e){t.exports='<div>\n\t<lui-dialog id="share-dialog">\n\t\t<lui-tab-view>\n\t\t\t<lui-dialog-header class="sd-header" ng-class="{\'with-tabs\': enableOther}">\n\t\t\t\t<lui-dialog-title class="sd-title" q-translation="contextMenu.share"></lui-dialog-title>\n\t\t\t\t<div class="sd-close" qva-activate="$event.preventDefault(); close()" name="cancel" tid="share-cancel">\n\t\t\t\t\t<i class="lui-icon lui-icon--close lui-icon--small"></i>\n\t\t\t\t</div>\n\t\t\t\t<div ng-show="enableOther" class="sd-tabset-wrap">\n\t\t\t\t\t<lui-tabset class="sd-tabset" active-tab="activeTab">\n\t\t\t\t\t\t<lui-tab ref="{{tabList[0].ref}}" class="sd-tab" tabindex="0" aria-label="{{translate(\'Share.Aria.TabCopyLink\')}}. {{getCurrentlyActiveTabAria(activeTab)}}">\n\t\t\t\t\t\t\t<i class="lui-icon lui-icon--link tab-icon"></i>\n\t\t\t\t\t\t\t<span q-translation="Share.Link.Title"></span>\n\t\t\t\t\t\t</lui-tab>\n\t\t\t\t\t\t<lui-tab ref="{{tabList[1].ref}}" class="sd-tab" tabindex="0" aria-label="{{translate(\'Share.Aria.TabOther\')}}. {{getCurrentlyActiveTabAria(activeTab)}}">\n\t\t\t\t\t\t\t<i class="lui-icon lui-icon--more tab-icon"></i>\n\t\t\t\t\t\t\t<span q-translation="Share.Other.Title"></span>\n\t\t\t\t\t\t</lui-tab>\n\t\t\t\t\t</lui-tabset>\n\t\t\t\t</div>\n\t\t\t</lui-dialog-header>\n\n\t\t\t<lui-dialog-body class="sd-body">\n\t\t\t\t<div ng-show="enableSnapshot" class="modeOptions section" style="padding-top: 0;">\n\t\t\t\t\t<div class="main-label" q-translation="Share.ShareAs"></div>\n\t\t\t\t\t<div class="form-element">\n\t\t\t\t\t\t<lui-radiobutton value="{{modeOptions[0].value}}" x-model="currentModeValue" x-change="updateLink(currentModeValue)" \n\t\t\t\t\t\t\taria-label="{{translate(\'Share.Aria.SharingMode\')}}"\n\t\t\t\t\t\t\t>{{modeOptions[0].label}}</lui-radiobutton>\n\t\t\t\t\t\t<lui-radiobutton value="{{modeOptions[1].value}}" x-model="currentModeValue" x-change="updateLink(currentModeValue)" \n\t\t\t\t\t\t\taria-label="{{translate(\'Share.Aria.SharingMode\')}}">\n\t\t\t\t\t\t\t<span>{{modeOptions[1].label}}<span style="color: rgba(0, 0, 0, 0.4)">{{modeOptions[1].label2}}</span></span>\n\t\t\t\t\t\t</lui-radiobutton>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="section">\n\t\t\t\t\t<span style="font-style: italic; font-size: 12px;">{{modeOptions[currentModeValue].desc}}</span>\n\t\t\t\t</div>\n\t\t\t\t<lui-tab-content ref="{{tabList[0].ref}}"><share-link></share-link></lui-tab-content>\n\t\t\t\t<lui-tab-content ref="{{tabList[1].ref}}"><share-other></share-other></lui-tab-content>\n\t\t\t</lui-dialog-body>\n\t\t</lui-tab-view>\n\n\t</lui-dialog>\n</div>\n'},1539:function(t,e,n){"use strict";var i,a;!(i=[n(393)],a=function(){function t(){}return{directiveLinkFunction:t}}.apply(e,i),void 0!==a&&(t.exports=a))},1540:function(t,e){t.exports='<div>\n\t<div class="section">\n\t\t<div style="font-weight: bold; display: flex;">\n\t\t\t<span style="margin-right: 5px;" q-translation="Common.Link"></span>\n\t\t\t<div ng-if="parentScope.state === parentScope.states.PENDING" class="loading-screen">\n\t\t\t\t\t<div class="spinner">\n\t\t\t\t\t\t<div class="qv-loader"></div>\n\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div style="display: flex" ng-if="parentScope.state === parentScope.states.TIMEOUT">{{parentScope.translate(\'Share.Link.Timeout\')}}</div>\n\t\t<div style="display: flex" ng-if="parentScope.statusCode == 413">{{parentScope.translate(\'Download.Error.Selections\')}}</div>\n\t\t<div class="lui-input-group" style="padding-top: 3px;">\n\t\t\t<input class="lui-input-group__item  lui-input-group__input  lui-input" style="width: auto;" ng-model="parentScope.shareUrl" aria-label="{{parentScope.translate(\'Share.Aria.Link.Url\')}}" readonly/>\n\t\t\t<div class="lui-input-group__item  lui-input-group__button">\n\t\t\t\t<button class="lui-button  lui-button--success" qv-click-copy="{{parentScope.shareUrl}}" q-translation="Common.Copy" aria-label="{{parentScope.translate(\'Share.Aria.Link.Copy\')}}"></button>\n\t\t\t</div>\n\t\t\t<a id="emailBtnInline" \n\t\t\t  style="margin-left: 8px;"\n\t\t\t  ng-href="mailto:?subject={{parentScope.translate(\'Share.Link.EmailText\')}}&body={{parentScope.translate(\'Share.Link.EmailBody\') + \' \' + parentScope.shareUrl}}" \n\t\t\t  class="lui-button" \n\t\t\t  q-translation="Share.Link.Email" \n\t\t\t  ng-class="{\'lui-disabled\': parentScope.shareUrl == \'\'}"\n\t\t\t  aria-label="{{parentScope.translate(\'Share.Aria.Link.Email\')}}"></a>\n\t\t</div>\n\t\t<a id="emailBtnSeparateLine" \n\t\t  ng-href="mailto:?subject={{parentScope.translate(\'Share.Link.EmailText\')}}&body={{parentScope.translate(\'Share.Link.EmailBody\') + \' \' + parentScope.shareUrl}}" \n\t\t  class="lui-button" \n\t\t  q-translation="Share.Link.Email" \n\t\t  ng-class="{\'lui-disabled\': parentScope.shareUrl == \'\'}"\n\t\t  aria-label="{{parentScope.translate(\'Share.Aria.Link.Email\')}}"></a>\n\t\t<div style="display: flex; margin: 8px 0 0 0;">\n\t\t\t<a href="{{parentScope.shareUrl}}" class="link" target="_blank" q-translation="Share.Link.Open" aria-label="{{parentScope.translate(\'Share.Aria.Link.Open\')}}"></a>\n\t\t</div>\n\t</div>\n</div>'},1541:function(t,e,n){"use strict";var i,a;!(i=[],a=function(){function t(t){var e=n.p+"assets/images/ShareIcons_";t.socialList=[{value:0,label:"Facebook",src:e+"FB.png",ariaLabel:t.parentScope.translate("Share.Aria.Other.ShareToFacebook")},{value:1,label:"LinkedIn",src:e+"LI.png",ariaLabel:t.parentScope.translate("Share.Aria.Other.ShareToLinkedIn")},{value:2,label:"Twitter",src:e+"TW.png",ariaLabel:t.parentScope.translate("Share.Aria.Other.ShareToTwitter")}];t.shareOnSocial=i;function i(e){var n;switch(e){case 0:n="http://www.facebook.com/sharer.php?u=";break;case 1:n="http://www.linkedin.com/shareArticle?mini=true&url=";break;case 2:n="http://twitter.com/share?url=";break}n+=t.parentScope.shareUrl;window.open(n)}}return{directiveLinkFunction:t}}.apply(e,i),void 0!==a&&(t.exports=a))},1542:function(t,e){t.exports='<div>\n\t<div class="section" q-translation="Share.Other.WhereToShare"></div>\n\t<div class="section" style="display: inline-flex; text-align: center;">\n\t\t<div class="social-media" ng-repeat="item in socialList" ng-click="shareOnSocial(item.value)" tabindex="0" aria-label="{{item.ariaLabel}}">\n\t\t\t<img ng-src="{{item.src}}" />\n\t\t\t<div>{{item.label}}</div>\n\t\t</div>\n\t</div>\n</div>\n'},1543:function(t,e){t.exports='<lui-tab-view id="download-dialog" aria-label="{{translate(\'Download.Aria.Dialog\')}}" class="lui-dialog">\n\t<div class="lui-dialog__header dd-header with-tabs">\n\t\t<div class="lui-dialog__title dd-title" q-translation="{{title}}"></div>\n\t\t<div class="dd-close" ng-click="$event.preventDefault(); close()" name="cancel" tid="download-cancel">\n\t\t\t<i class="lui-icon lui-icon--close lui-icon--small"></i>\n\t\t</div>\n\t\t<input ng-hide="true" ng-model="activeTab" aria-live="{{getChangedActiveTabAria(activeTab)}}" />\n\t\t<div class="dd-tabset-wrap">\n\t\t\t<lui-tabset class="dd-tabset" active-tab="activeTab">\n\t\t\t\t<span ng-repeat="tab in tabList" q-title-translation="{{tab.disabled ? tab.disabledTitleKey : \'\'}}">\n\t\t\t\t\t<lui-tab \n\t\t\t\t\t\tng-if="!tab.hide && !tab.disabled"\n\t\t\t\t\t\ton-tab-selected="selectTab(tab.index)"\n\t\t\t\t\t\tref="{{tab.index}}"\n\t\t\t\t\t\tclass="dd-tab"\n\t\t\t\t\t\ttabindex="0"\n\t\t\t\t\t\taria-label="{{tab.aria}}"\n\t\t\t\t\t\tid="{{tab.id}}"\n\t\t\t\t\t\ttid="{{tab.tid}}">\n\t\t\t\t\t\t<i class="lui-icon lui-icon--{{tab.icon}} tab-icon"></i>\n\t\t\t\t\t\t<span q-translation="{{tab.translationKey}}"></span>\n\t\t\t\t\t</lui-tab>\n\t\t\t\t\t<div\n\t\t\t\t\t\tng-if="!tab.hide && tab.disabled"\n\t\t\t\t\t\tclass="lui-tab dd-tab lui-disabled"\n\t\t\t\t\t\tid="{{tab.id}}-disabled"\n\t\t\t\t\t\ttid="{{tab.tid}}-disabled">\n\t\t\t\t\t\t<i class="lui-icon lui-icon--{{tab.icon}} tab-icon"></i>\n\t\t\t\t\t\t<span q-translation="{{tab.translationKey}}"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t</lui-tabset>\n\t\t</div>\n\t</div>\n\n\t<div class="lui-dialog__body lui-nopad dd-body">\n\t\t<lui-tab-content ref="{{tabList[0].index}}" tid="{{tabList[0].ref}}" class="download-tab-content"><qv-download-image-tab></qv-download-image-tab></lui-tab-content>\n\t\t<lui-tab-content ref="{{tabList[1].index}}" tid="{{tabList[1].ref}}" class="download-tab-content"><qv-download-pdf-tab></qv-download-pdf-tab></lui-tab-content>\n\t\t<lui-tab-content ref="{{tabList[2].index}}" tid="{{tabList[2].ref}}" class="download-tab-content"><qv-download-data-tab></qv-download-data-tab></lui-tab-content>\n\t</div>\n\n\t<div class="lui-dialog__footer dd-footer">\n\t\t<div ng-hide="tabS[activeTab].state < 0 || !tabS[activeTab].state" class="download-button-wrap">\n\t\t\t<div ng-if="tabS[activeTab].state === states.PENDING" id="pendingText" class="marginRight" q-translation="{{tabList[activeTab].pendingKey}}"></div>\n\t\t\t<div ng-if="tabS[activeTab].state === states.PENDING" id="pendingIcon" class="loading-screen marginRight">\n\t\t\t\t<div class="spinner">\n\t\t\t\t\t<div class="qv-loader"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<lui-button\n\t\t\t\tng-click="downloadFile()" \n\t\t\t\tclass="lui-button lui-button--success dd-button download-button" \n\t\t\t\tng-class="{ \'dd-disabled lui-disabled\': tabS[activeTab].state === states.PENDING || !tabS[activeTab].printUrl || tabS[activeTab].getModifyingCustomSize() }" \n\t\t\t\ttid="download-export"\n\t\t\t\tq-translation="Download.Title" \n\t\t\t\taria-label="{{translate(\'Download.Aria.DownloadButton\')}}">\n\t\t\t</lui-button>\n\t\t</div>\n\t\t<div ng-show="tabS[activeTab].state < 0 || !tabS[activeTab].state" class="download-button-wrap" >\n\t\t\t<div class="lui-text-danger" ng-if="activeTab === \'2\'">\n\t\t\t\t<i class="lui-icon lui-icon--warning lui-icon--large download-warning-icon"></i>\n\t\t\t\t<span ng-show="tabS[activeTab].state === states.FAILED"><span q-translation="Download.Error.Generic_1"></span>.</span>\n\t\t\t\t<span ng-show="tabS[activeTab].state === states.FAILED"><span q-translation="Download.Error.Generic_2"></span>.</span>\n\t\t\t\t<span ng-show="tabS[activeTab].state === states.NODATA"><span q-translation="Download.Data.NoData"></span>.</span>\n\t\t\t</div>\n\t\t\t<lui-button \n\t\t\t\tqva-activate="$event.preventDefault(); tabS[activeTab].printUrl = \'\'; tabS[activeTab].doCallLocal();" \n\t\t\t\tname="confirm" \n\t\t\t\tid="download-try-again" \n\t\t\t\ttid="download-try-again" \n\t\t\t\tclass="lui-button--warning dd-button download-try-again-button" \n\t\t\t\tq-translation="Common.TryAgain" \n\t\t\t\taria-label="{{translate(\'Download.Aria.TryAgainButton\')}}">\n\t\t\t</lui-button>\n\t\t</div>\n\n\t</div>\n</lui-tab-view>\n'},1544:function(t,e,n){"use strict";var i,a;!(i=[n(89),n(48),n(140),n(132),n(91),n(100),n(1179),n(49),n(188),n(308)],a=function(t,e,n,i,a,o,r,s,l,c){var d=function t(){return n.get().then(function(t){var e=t.layout&&t.layout.qTitle||"";var n=t.id||"";var i={appName:e,appId:n};return i})};var u=function t(){return n.get().then(function(t){return i.get().then(function(e){return e.getLayout().then(function(e){return r.get(e,t.enigmaModel)})})})};var p=function t(e){var n=[];if(e&&e.length)for(var i=0;i<e.length;i++)n.push({name:e[i].name,values:e[i].values.map(String),isNumeric:e[i].isNumeric});return n};var g=function t(){var n=e.getService("$window");var i;i=n.navigator.languages?n.navigator.languages[0]:n.navigator.userLanguage||n.navigator.language;return i};var f=function t(){return a.language};function v(e){if(!e.layout||!e.layout.qHasSoftPatches)return t.resolve();return t.all({properties:e.model.getProperties(),effective:e.model.getEffectiveProperties()}).then(function(t){var e=l.generate(t.properties,t.effective);e&&e.length&&(e=e.map(function(t){return{qOp:t.op,qValue:JSON.stringify(t.value),qPath:t.path}}));return e})}var h=function e(n,i,a,r){var l=this;var d=this.getConfig();var u=this.getSelections();var g="visualization"==r?n.getViewState():null;var f=o.getCurrentTheme();var v=this.getAppliedPatches(n);return t.all([d,u,g,v]).then(function(e){var o=e[0];var r=p(e[1]);var d=e[2];var u=e[3]||[];if(!o)return t.reject();var g=[];s.getFlag("VIZ_EXT_BUNDLE")&&g.push("VIZ_EXT_BUNDLE");s.getFlag("VIZBUN_QCS_31")&&g.push("VIZBUN_QCS_31");s.getFlag("VIZBUN_QCS_SMARTPIVOT")&&g.push("VIZBUN_QCS_SMARTPIVOT");s.getFlag("VIZBUN_QCS_TRELLIS")&&g.push("VIZBUN_QCS_TRELLIS");var v;switch(a){case"image":v={appId:o.appId,chartId:n.model.id,filters:r,inWidth:i.captureSize.width,inHeight:i.captureSize.height,outDpi:i.captureSize.dpi,outFormat:i.imageType,timeoutSec:20,patches:u,opts:{language:l.getClientLanguage(),theme:f,viewState:d,forceFlags:g,deviceType:c.deviceType}};break;case"pdf":var h;var b=i.sourceSize.width;var y=i.sourceSize.height;var w=i.dpi;var S={};var x="none";if(3==i.fitCriteria){var C=m(i);h=C[i.size.name];if(h){w=h.dpi;b=h.w;y=h.h;x="fit";S={fit:"landscape"===i.orientation?h.fitL:h.fitP}}}v={type:"sense-composition-1.1",selections:r,senseCompositionTemplate:{appId:o.appId,webCanvas:{zoom:1,widthPx:h?b:1,heightPx:h?y:1},elements:[{position:{leftPx:0,topPx:0,"z-index":-5},visualization:{id:n.model.id,widthPx:b,heightPx:y,patches:u,jsOpts:{language:l.getClientLanguage(),theme:f,viewState:d,forceFlags:g}}}]},outputs:[{outputId:"Qlik_PDF",type:"pdf",pdfOutput:{size:i.size.name,orientation:"portrait"==i.orientation?"P":"L",margins:[],imageRenderingDpi:w,resizeType:x,resizeData:S,align:{horizontal:"center",vertical:"middle"}}}]};break;case"data":v={type:"sense-data-1.0",selections:r,senseDataTemplate:{appId:o.appId,id:n.model.id,patches:u},outputs:[{outputId:"Qlik_Excel",type:"xlsx"}]};break}return{payload:v}})};function m(t){return{A3:{w:t.sourceSize.width,h:t.sourceSize.height,fitL:"42cmx29.7cm",fitP:"29.7cmx42cm",dpi:t.sourceSize.dpi},A4:{w:t.sourceSize.width,h:t.sourceSize.height,fitL:"27.7cmx21cm",fitP:"21cmx27.7cm",dpi:t.sourceSize.dpi},A5:{w:t.sourceSize.width,h:t.sourceSize.height,fitL:"21cmx14.8cm",fitP:"14.8cmx21cm",dpi:t.sourceSize.dpi},A6:{w:t.sourceSize.width,h:t.sourceSize.height,fitL:"14.8cmx10.5cm",fitP:"10.5cmx14.8cm",dpi:t.sourceSize.dpi},Letter:{w:t.sourceSize.width,h:t.sourceSize.height,fitL:"27.94cmx21.59cm",fitP:"21.59cmx27.94cm",dpi:t.sourceSize.dpi}}}var b={allPoolPromises:[],download:function t(e,n,i,a){return this.getObjects(e,n,i,a).then(function(t){return b.enqueueRequest(t.payload,i,n)})},enqueueRequest:function t(e,n,i){switch(n){case"image":return b.enqueueImageRequest(e,n,i.timeoutMsec,i.checkInterval);case"pdf":case"data":return b.enqueueReportRequest(e,n,i.timeoutMsec,i.checkInterval)}},enqueueReportRequest:function n(i,a,o,r){var s="/api/v1/reports";var l=t();var c=this.getStates();var d=o||12e4;var u=r||3e3;var p=d/u;var g=0;var f=e.getService("$http");var v=e.getService("$interval");f({url:s,method:"POST",data:i}).then(function t(e){var n=e.headers(["content-location"]);var i=function t(){g++;if(g>p){b.cancel(a);l.reject({status:c.TIMEOUT});return}f({url:n,method:"GET"}).then(function t(e){if("200"==e.status)switch(e.data.status){case"done":var n=e.data.results[0].location;b.cancel(a);l.resolve({status:c.COMPLETED,qUrl:n});break;case"failed":console.error(e.data);b.cancel(a);l.reject({status:c.FAILED,data:e.data,httpStatusCode:e.status});break}},function t(e){b.cancel(a);l.reject({status:c.FAILED,data:e.data,httpStatusCode:e.status});return})};var o=v(i,u);b.addToPoolPromises(a,o);i()},function t(e){b.cancel(a);l.reject({status:c.FAILED,data:e.data,httpStatusCode:e.status});return});return l.promise},enqueueImageRequest:function n(i,a,o,r){var s="/api/v1/images";var l=t();var c=this.getStates();o=o||12e4;r=r||3e3;var d=o/r;var u=0;var p=e.getService("$http");var g=e.getService("$interval");var f=null;p({url:s,method:"POST",data:i}).then(function t(e){var n=e.headers(["content-location"]);var i=function t(){u++;if(u>d){g.cancel(f);l.reject({status:c.TIMEOUT});return}p({url:n,method:"GET"}).then(function t(e){if("200"==e.status)if(e.data.message){console.error(e.data.message);g.cancel(f);l.reject({status:c.FAILED,data:e.data,httpStatusCode:e.status})}else{var n=e.config.url;g.cancel(f);l.resolve({status:c.COMPLETED,qUrl:n})}},function t(e){g.cancel(f);l.reject({status:c.FAILED,data:e.data,httpStatusCode:e.status})})};f=g(i,r);b.addToPoolPromises(a,f)},function t(e){l.reject({status:c.FAILED,data:e.data,httpStatusCode:e.status})});return l.promise},addToPoolPromises:function t(e,n){this.cancel(e);this.allPoolPromises[e]=n},cancel:function t(n){var i=this.allPoolPromises[n];if(i){var a=e.getService("$interval");a.cancel(i);this.allPoolPromises[n]=null}},cancelAll:function t(){Object.keys(this.allPoolPromises).forEach(function(t){b.cancel(t)})},getStates:function t(){return{NODATA:-4,CANCELED:-3,TIMEOUT:-2,FAILED:-1,IDLE:0,PENDING:1,COMPLETED:2}},getObjects:h,getNavigatorLanguage:g,getClientLanguage:f,getConfig:d,getSelections:u,getAppliedPatches:v};return b}.apply(e,i),void 0!==a&&(t.exports=a))},1545:function(t,e,n){var i,a;var o=o||function(t){"use strict";if("undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))return;var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in i,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},r=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),s=t.webkitRequestFileSystem,l=t.requestFileSystem||s||t.mozRequestFileSystem,c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},d="application/octet-stream",u=0,p=4e4,g=function(t){var e=function(){"string"===typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,p)},f=function(t,e,n){e=[].concat(e);var i=e.length;while(i--){var a=t["on"+e[i]];if("function"===typeof a)try{a.call(t,n||t)}catch(t){c(t)}}},v=function(t){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type))return new Blob(["\ufeff",t],{type:t.type});return t},h=function(e,c,p){p||(e=v(e));var h=this,m=e.type,b=false,y,w,S=function(){f(h,"writestart progress write writeend".split(" "))},x=function(){if(w&&r&&"undefined"!==typeof FileReader){var i=new FileReader;i.onloadend=function(){var t=i.result;w.location.href="data:attachment/file"+t.slice(t.search(/[,;]/));h.readyState=h.DONE;S()};i.readAsDataURL(e);h.readyState=h.INIT;return}!b&&y||(y=n().createObjectURL(e));if(w)w.location.href=y;else{var a=t.open(y,"_blank");void 0===a&&r&&(t.location.href=y)}h.readyState=h.DONE;S();g(y)},C=function(t){return function(){if(h.readyState!==h.DONE)return t.apply(this,arguments)}},D={create:true,exclusive:false},E;h.readyState=h.INIT;c||(c="download");if(a){y=n().createObjectURL(e);setTimeout(function(){i.href=y;i.download=c;o(i);S();g(y);h.readyState=h.DONE});return}if(t.chrome&&m&&m!==d){E=e.slice||e.webkitSlice;e=E.call(e,0,e.size,d);b=true}s&&"download"!==c&&(c+=".download");(m===d||s)&&(w=t);if(!l){x();return}u+=e.size;l(t.TEMPORARY,u,C(function(t){t.root.getDirectory("saved",D,C(function(t){var n=function(){t.getFile(c,D,C(function(t){t.createWriter(C(function(n){n.onwriteend=function(e){w.location.href=t.toURL();h.readyState=h.DONE;f(h,"writeend",e);g(t)};n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&x()};"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=h["on"+t]});n.write(e);h.abort=function(){n.abort();h.readyState=h.DONE};h.readyState=h.WRITING}),x)}),x)};t.getFile(c,{create:false},C(function(t){t.remove();n()}),C(function(t){t.code===t.NOT_FOUND_ERR?n():x()}))}),x)}),x)},m=h.prototype,b=function(t,e,n){return new h(t,e,n)};if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(t,e,n){n||(t=v(t));return navigator.msSaveOrOpenBlob(t,e||"download")};m.abort=function(){var t=this;t.readyState=t.DONE;f(t,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;return b}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);true,t.exports?t.exports.saveAs=o:(true,null!==n(1546))&&null!==n(593)&&!(i=[],a=function(){return o}.apply(e,i),void 0!==a&&(t.exports=a))},1546:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},1547:function(t,e){t.exports='<div id="download-data">\n    <div class="section section-with-bottom">{{translate(\'Download.Data.Message\')}}</div>\n</div>\n'},1548:function(t,e,n){"use strict";var i,a;!(i=[n(1549)],a=function(t){function e(e){e.fileType="xlsx";e.doCallLocal=n;function n(){e.print={};e.print.hasNoDataToExport=t.hasNoDataToExport(e.input.object.layout);e.doCall(2)}var i=false;e.attemptFirstCall=a;function a(){if(!i){n();i=true}}e.injectScopeToParent(2,e)}return{directiveLinkFunction:e}}.apply(e,i),void 0!==a&&(t.exports=a))},1549:function(t,e,n){"use strict";var i,a;!(i=[n(90)],a=function(t){function e(t){var e=function t(e){return e.qcy*e.qcx===0};var i=n(t);var a=i.some(function(t){if(t.qSize&&false===e(t.qSize))return true});return!a}function n(e){var n=["qHyperCube","qUndoExclude.box.qHyperCube","boxplotDef.qHyperCube","qUndoExclude.qHyperCubeDef","qUndoExclude.generated.qHyperCubeDef","qUndoExclude.generated.qHyperCube"];var i=[];n.forEach(function(n){var a=t.getValue(e,n,false);a&&i.push(a)});return i}return{hasNoDataToExport:e}}.apply(e,i),void 0!==a&&(t.exports=a))},1550:function(t,e){t.exports='<div id="download-pdf">\n\t<div class="preview-section preview-section-pdf">\n\t\t<dd-pdf-preview states="states" state="state" preview-disabled="optionChanged && state === states.PENDING" current-orientation-index="currentOrientationIndex" status-code="statusCode" preview-url="embedUrl"></dd-pdf-preview>\n\t</div>\n\n\t<div class="section form-element" ng-show="paperFormat.show">\n\t\t<div class="form-label" q-translation="{{paperFormat.title}}"></div>\n\t\t<div class="form-input" aria-label="{{translate(paperFormat.aria)}}">\n\t\t\t<lui-select\n\t\t\t\ttid="download-pdf-paper-format"\n\t\t\t\tx-change="onFormChange()"\n\t\t\t\tx-model="selectedPaperFormat"\n\t\t\t\tx-options="paperFormatOpt.label for paperFormatOpt in paperFormat.options">\n\t\t\t</lui-select>\n\t\t</div>\n\t</div>\n\n\t<div class="section form-element form-rbtns" ng-show="orientation.show">\n\t\t<lui-radiobutton tid="download-pdf-landscape" id="download-pdf-landscape" value=1 x-model="currentOrientationIndex"><span q-translation="{{orientation.options[1].translationKey}}"></span></lui-radiobutton>\n\t\t<lui-radiobutton tid="download-pdf-portrait" id="download-pdf-portrait" value=0 x-model="currentOrientationIndex"><span q-translation="{{orientation.options[0].translationKey}}"></span></lui-radiobutton>\n\t</div>\n\n\t<div class="section section-with-bottom form-element" ng-show="size.show">\n\t\t<div class="form-label" q-translation="{{size.title}}"></div>\n\t\t<div class="form-input" aria-label="{{translate(size.aria)}}">\n\t\t\t<lui-select\n\t\t\t\ttid="download-pdf-size"\n\t\t\t\tx-change="onFormChange()"\n\t\t\t\tx-model="selectedFitCriteria"\n\t\t\t\tx-options="sizeOpt.label for sizeOpt in size.options">\n\t\t\t</lui-select>\n\t\t</div>\n\t</div>\n</div>\n'},1551:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(1180),n(432),n(1552)],a=function(t,e,n){function i(i){i.fileType="pdf";i.doCallLocal=d;i.onFormChange=c;i.onOrientationChange=l;i.embedUrl="";var a="";i.$watch("printUrl",o);function o(e){if(e&&e!=a){a=e;var o=t.getService("$timeout");n.getPdfEmbedUrl(a).then(function(t){o(function(){i.embedUrl=i.sce.trustAsResourceUrl(t+"#zoom=42")})},function(){i.embedUrl=""})}}var r=e.getForPdf();i.paperFormat=r.paperFormat;i.selectedPaperFormat=i.paperFormat.options[1];i.size=r.size;i.selectedFitCriteria=i.size.options[0];i.orientation=r.orientation;i.currentOrientationIndex="1";var s=true;i.$watch("currentOrientationIndex",l);function l(t){u(t);s?s=false:c()}function c(){i.printUrl="";i.embedUrl="";i.optionChanged=true;d()}function d(){i.print={};i.print.dpi=200;i.minDpi=72;i.maxDpi=300;i.selectedSize=i.selectedPaperFormat;i.selectedLayout=i.orientation.options[i.currentOrientationIndex];i.print.fitCriteria=i.selectedFitCriteria.value;i.doCall(1)}function u(t){var e=i.orientation.options[t];if(!e||!e.orientation)return;i.paperFormat.options.forEach(function(t){t.setLabel(e.orientation)})}var p=false;i.attemptFirstCall=g;function g(){if(!p){d();p=true}}i.injectScopeToParent(1,i)}return{directiveLinkFunction:i}}.apply(e,i),void 0!==a&&(t.exports=a))},1552:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(1553)],a=function(t,e){t.directive("ddPdfPreview",function(){return{restrict:"E",template:e,replace:true,scope:{state:"=",states:"=",previewDisabled:"=",currentOrientationIndex:"=",statusCode:"=",previewUrl:"="},link:function t(e,n){e.showPreviewNotAvailable=i;function i(){if(!e.previewUrl)return true;try{var t=n[0].querySelector("iframe.preview-pdf").contentWindow.document.getElementsByTagName("body");return!!t.length&&!t[0].children.length}catch(t){return false}}}}})}.apply(e,i),void 0!==a&&(t.exports=a))},1553:function(t,e){t.exports='<div class="dd-preview dd-preview-pdf">\n    <div class="preview" ng-class="{\'dd-opacity-0 dd-hidden\': !(state && state === states.COMPLETED) }">\n        <div class="preview-content preview-content-pdf">\n            <div class="preview-embed-wrap-pdf" ng-class="{\'dd-opacity-0\': showPreviewNotAvailable()}">\n                <iframe \n                    width="100%"\n                    height="99%"\n                    tabindex="-1" \n                    class="preview-pdf" \n                    ng-class="{ \'preview-pdf-l\': currentOrientationIndex == 1, \'preview-pdf-p\': currentOrientationIndex == 0, \'preview-disabled\': previewDisabled }"\n                    ng-hide="!previewUrl"\n                    ng-src="{{previewUrl}}"\n                    tid="download-preview" \n                    type="application/pdf">\n                </iframe>\n            </div>\n        </div>\n        <div ng-show="showPreviewNotAvailable()" tid="unavailable-status" id="unavailable-status" class="status-wrap">\n            <div class="lui-icon lui-icon--warning status-icon"></div>\n            <div class="status-text">\n                <div class="st-header" q-translation="Download.PreviewNotAvailable"></div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="state === states.FAILED || !state" tid="failed-status" id="failed-status" class="status-wrap">\n        <div class="lui-icon lui-icon--warning status-icon"></div>\n        <div class="status-text">\n            <div class="st-header" q-translation="Download.Error.Generic_1"></div>\n            <div ng-switch="statusCode">\n                <div ng-switch-when="413" q-translation="Download.Error.Selections"></div>\n                <div ng-switch-default q-translation="Download.Error.Generic_2"></div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="state === states.TIMEOUT" tid="timeout-status" id="timeout-status" class="status-wrap">\n        <div class="lui-icon lui-icon--idle status-icon"></div>\n        <div class="status-text">\n            <div q-translation="Download.PDF.Timeout" class="st-header"></div>\n            <div q-translation="Download.Error.Generic_2"></div>\n        </div>\n    </div>\n    <div ng-if="state === states.PENDING" tid="pending-status" id="pending-status" class="status-wrap"> \n        <div class="status-spinner">\n            <div class="spinner">\n                <div class="qv-loader white"></div>\n            </div>\n        </div>\n        <div class="status-text">\n            <div q-translation="Download.PendingPreview" class="st-header"></div>\n        </div>\n    </div>\n</div>\n'},1554:function(t,e){t.exports='<div id="download-image">\n\t<div class="preview-section preview-section-image">\n\t\t<dd-image-preview state="state" states="states" preview-url="printUrl" disable-preview="getModifyingCustomSize()" top-text="getSummaryText(1)" bottom-text="getSummaryText(0)"></dd-image-preview>\n\t</div>\n\t\x3c!-- Data Area select --\x3e\n\t<div class="section" ng-class="{\'section-with-bottom\': !scale.show}" ng-if="dataArea.show">\n\t\t<div class="sub-section form-element">\n\t\t\t<div class="form-label" q-translation="{{dataArea.title}}" q-title-translation="{{dataArea.tooltip}}"></div>\n\t\t\t<div class="form-input" aria-label="{{translate(dataArea.title)}}">\n\t\t\t\t<lui-select\n\t\t\t\t\tid="download-image-data-area"\n\t\t\t\t\ttid="download-image-data-area"\n\t\t\t\t\tx-model="selectedDataArea"\n\t\t\t\t\tx-change="onDataAreaChange()"\n\t\t\t\t\tx-options="dataAreaOpt.label for dataAreaOpt in dataArea.options">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!-- Data Area width/ height inputs --\x3e\n\t\t<div ng-show="selectedDataArea.isCustom" class="download-customSize" id="download-custom-data-area" tid="download-custom-data-area">\n\t\t\t<div class="download-customSize-form dcf-with-top-bottom">\n\t\t\t\t<div class="form-content">\n\t\t\t\t\t<div class="form-label" q-translation="Common.Width"></div>\n\t\t\t\t\t   <dd-input \n\t\t\t\t\t\t\t  ng-class="{\'lui-invalid\': width.percError}"\n\t\t\t\t\t\t\t  on-blur="changeCustomSize(1)" \n\t\t\t\t\t\t\t  model="width.percentageValue" \n\t\t\t\t\t\t\t  on-change="width.onDynamicPercentageChange()"\n\t\t\t\t\t\t\t  on-enter="changeCustomSize(1)"\n\t\t\t\t\t\t\t  tid="download-custom-width-percentage" id="download-custom-width-percentage" \n\t\t\t\t\t\t\t  aria-label="{{translate(\'Download.Aria.Image.CustomSizeWidth\')}}. {{translate(\'Download.Aria.Image.CustomSizeGeneral\')}}">\n\t\t\t\t\t\t</dd-input>\n\t\t\t\t\t<div class="download-customSize-unit">%</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\x3c!-- Data Area - Height --\x3e\n\t\t\t<div class="download-customSize-form">\n\t\t\t\t<div class="form-content">\n\t\t\t\t\t<div class="form-label" q-translation="Common.Height"></div>\n\t\t\t\t\t\t<dd-input \n\t\t\t\t\t\t\tng-class="{\'lui-invalid\': height.percError}"\n\t\t\t\t\t\t\ton-blur="changeCustomSize(2)" \n\t\t\t\t\t\t\tmodel="height.percentageValue" \n\t\t\t\t\t\t\ton-change="height.onDynamicPercentageChange()"\n\t\t\t\t\t\t\ton-enter="changeCustomSize(2)"\n\t\t\t\t\t\t\ttid="download-custom-height-percentage" id="download-custom-height-percentage" \n\t\t\t\t\t\t\taria-label="{{translate(\'Download.Aria.Image.CustomSizeHeight\')}}. {{translate(\'Download.Aria.Image.CustomSizeGeneral\')}}">\n\t\t\t\t\t\t</dd-input>\n\t\t\t\t\t\t<div class="download-customSize-unit">%</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="download-customSize-hint" ng-show="selectedDataArea.isCustom">\n\t\t\t\t<span q-translation="{{dataArea.hint}}"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t\x3c!-- Scale select --\x3e\n\t<div class="section section-with-bottom" ng-if="scale.show">\n\t\t<div class="sub-section form-element">\n\t\t\t<div class="form-label" q-translation="{{scale.title}}" q-title-translation="{{scale.tooltip}}"></div>\n\t\t\t<div class="form-input" aria-label="{{translate(scale.title)}}">\n\t\t\t\t<lui-select\n\t\t\t\t\tid="download-image-scale"\n\t\t\t\t\ttid="download-image-scale"\n\t\t\t\t\tx-model="selectedScale"\n\t\t\t\t\tx-change="onScaleChange()"\n\t\t\t\t\tx-options="scaleOpt.label for scaleOpt in scale.options">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!-- Scale - Custom input --\x3e\n\t\t<div ng-show="selectedScale.isCustom" class="sub-section download-customSize" id="download-custom-scale" tid="download-custom-scale">\n\t\t\t<div class="download-customSize-form-wrap">\n\t\t\t\t<div>\n\t\t\t\t\t<div class="download-customSize-form dcf-with-top-bottom">\n\t\t\t\t\t\t<div class="form-content">\n\t\t\t\t\t\t\t<div class="form-label" q-translation="Common.Width"></div>\n\t\t\t\t\t\t\t\t<dd-input\n\t\t\t\t\t\t\t\t\t\tng-class="{\'lui-invalid\': width.pxError}"\n\t\t\t\t\t\t\t\t\t\ton-blur="changeCustomSize(1)" \n\t\t\t\t\t\t\t\t\t\tmodel="width.current" \n\t\t\t\t\t\t\t\t\t\ton-change="width.onDynamicPixelChange()"\n\t\t\t\t\t\t\t\t\t\ton-enter="changeCustomSize(1)"\n\t\t\t\t\t\t\t\t\t\ttid="download-custom-width-pixels" id="download-custom-width-pixels" \n\t\t\t\t\t\t\t\t\t\taria-label="{{translate(\'Download.Aria.Image.CustomSizeWidth\')}}. {{translate(\'Download.Aria.Image.CustomSizeGeneral\')}}">\n\t\t\t\t\t\t\t\t\t</dd-input>\n\t\t\t\t\t\t\t<div class="download-customSize-unit" q-translation="Common.px"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- Data Area - Height --\x3e\n\t\t\t\t\t<div class="download-customSize-form">\n\t\t\t\t\t\t<div class="form-content">\n\t\t\t\t\t\t\t<div class="form-label" q-translation="Common.Height"></div>\n\t\t\t\t\t\t\t\t<dd-input \n\t\t\t\t\t\t\t\t\tng-class="{\'lui-invalid\': height.pxError}"\n\t\t\t\t\t\t\t\t\ton-blur="changeCustomSize(2)" \n\t\t\t\t\t\t\t\t\tmodel="height.current" \n\t\t\t\t\t\t\t\t\ton-change="height.onDynamicPixelChange()"\n\t\t\t\t\t\t\t\t\ton-enter="changeCustomSize(2)"\n\t\t\t\t\t\t\t\t\ttid="download-custom-height-pixels" id="download-custom-height-pixels" \n\t\t\t\t\t\t\t\t\taria-label="{{translate(\'Download.Aria.Image.CustomSizeHeight\')}}. {{translate(\'Download.Aria.Image.CustomSizeGeneral\')}}">\n\t\t\t\t\t\t\t\t</dd-input>\n\t\t\t\t\t\t\t<div class="download-customSize-unit" q-translation="Common.px"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="download-customSize-hint">\n\t\t\t\t<span q-translation="{{scale.hint}}"></span>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>\n'},1555:function(t,e,n){"use strict";var i,a;!(i=[n(1180),n(1556),n(91),n(432),n(1557)],a=function(t,e,n,i){function a(a){a.usingRS=i.getUsingReportingService();a.fileType="png";a.doCallLocal=D;a.changeCustomSize=E;a.onFormChange=b;a.onDataAreaChange=y;a.onScaleChange=S;a.getModifyingCustomSize=k;a.getSummaryText=T;a.currentDpi=a.input.currentDpi;var o=100;var r=a.input.currentWidth/a.input.currentHeight;a.maxSize=5e3;a.minSize=8;a.maxDpi=300;function s(t){return e.verifyPercentage(t)}function l(t,e){if(t)return s(t);return s(e)}function c(t,e){var n="width"===t.dimensionName?t:e;var i="height"===t.dimensionName?t:e;var o=r*(n.percentageValue/i.percentageValue);var s="width"===t.dimensionName?t.current/o:t.current*o;return q(Math.round(s),0,a.maxSize,true)}function d(t,n){return e.reduceByPercentage(t,n)}function u(t,n){return e.calculateInitialDimensions(t,n,C(),a.maxSize)}function p(t,n){if(t.current){var i=q(t.current,0,a.maxSize,true);t.current=i.value;t.pxError=q(i.value,a.minSize,a.maxSize).error;var o=c(t,n);n.current=o.value;n.pxError=q(n.current,a.minSize,a.maxSize).error;o.error&&(t.current=c(n,t).value);t.modifying=e.wasDimensionModified(t);a.dpiMultiplier=t.current/(t.orig*(t.percentageValue/100))*C();var r=a.dpiMultiplier*a.currentDpi;if(r>a.maxDpi){var s=g(100*(r-a.maxDpi)/r);a.dpiMultiplier=g(d(a.dpiMultiplier,s));t.current=Math.round(d(t.current,s));n.current=Math.round(d(n.current,s))}t.modifying=e.wasDimensionModified(t);t.fallback=t.current;n.fallback=n.current}else t.pxError=true;t.modifying=e.wasDimensionModified(t)}function g(t){return t.toFixed(3)}function f(t){var n=s(t.percentageValue);var i=Math.floor(n.value/100*t.orig);var o=q(i,8,a.maxSize);t.current=o.value;if(n.error)t.percError=true;else{if(o.error&&"max"===o.errorType){t.percentageValue=Math.floor(t.current/t.orig*100);t.current=Math.floor(t.percentageValue/100*t.orig)}t.percError=false;t.modifying=e.wasDimensionModified(t)}a.width.fallback=a.width.current;a.height.fallback=a.height.current}var v=u(a.input.currentWidth,a.input.currentHeight);a.dpiMultiplier=v.dpi;a.width={dimensionName:"width",orig:v.w,prev:v.w,current:v.w,fallback:v.w,percentageValue:o,percentageFallback:o,modifying:false,min:8,max:5e3,onDynamicPixelChange:function t(){p(a.width,a.height)},onDynamicPercentageChange:function t(){if(a.width.percentageValue){h();f(a.width);f(a.height);a.width.percentageFallback=a.width.percentageValue}else a.width.percError=true}};a.height={dimensionName:"height",orig:v.h,prev:v.h,current:v.h,fallback:v.h,percentageValue:o,percentageFallback:o,modifying:false,min:8,max:5e3,onDynamicPixelChange:function t(){p(a.height,a.width)},onDynamicPercentageChange:function t(){if(a.height.percentageValue){h();f(a.width);f(a.height);a.height.percentageFallback=a.height.percentageValue}else a.height.percError=true}};function h(){a.width.current=a.width.orig;a.height.current=a.height.orig;a.dpiMultiplier=C()}var m=t.getForImage(a.input.object);a.dataArea=m.dataArea;a.selectedDataArea=a.dataArea.options[0];a.scale=m.scale;a.selectedScale=a.scale.options[0];function b(){a.width.prev=a.width.current;a.height.prev=a.height.current;a.width.modifying=false;a.height.modifying=false;a.printUrl="";D()}function y(){if(a.selectedDataArea.isDefault&&(a.width.current!==a.width.orig||a.height.current!==a.height.orig)){a.width.current=a.width.orig;a.height.current=a.height.orig;a.width.percentageValue=o;a.height.percentageValue=o;b()}if(a.selectedDataArea.isMax){var t=5e3;var e=2500;if(a.width.current!==t||a.height.current!==e){a.width.current=t;a.height.current=e;b()}}}function w(){var t=a.width.current!==x(a.width);var e=a.height.current!==x(a.height);var n=a.dpiMultiplier!==C();return t||e||n}function S(){if(a.selectedScale.isDefault&&w()){a.width.current=x(a.width);a.height.current=x(a.height);a.dpiMultiplier=C();b()}}function x(t){return Math.floor(t.orig*t.percentageValue/100)}function C(){return a.usingRS?1:2}function D(){a.print={};a.print.minSize=a.minSize;a.print.width=a.width.current;a.print.height=a.height.current;a.print.dpi=a.dpiMultiplier?Math.floor(a.currentDpi*a.dpiMultiplier):a.currentDpi;a.width.percentageValue=s(a.width.percentageValue).value;a.height.percentageValue=s(a.height.percentageValue).value;a.imageCustomSize=true;a.print.format="png";a.prevPrintUrl=a.printUrl;a.doCall(0)}function E(){z();a.width.current=P(a.width.current,a.minSize,a.maxSize,false,a.width.fallback).value;a.height.current=P(a.height.current,a.minSize,a.maxSize,false,a.height.fallback).value;a.width.percentageValue=l(a.width.percentageValue,a.width.percentageFallback).value;a.height.percentageValue=l(a.height.percentageValue,a.height.percentageFallback).value;a.width.prev===a.width.current&&a.height.prev===a.height.current||b()}function q(t,n,i,a){return e.verifySizeRange(t,n,i,a)}function k(){return a.width.modifying||a.height.modifying}function P(t,e,n,i,a){if(!t&&a)return q(a,e,n,i);return q(t,e,n,i,a)}function T(t){switch(t){case 0:var e=P(a.width.current,a.minSize,a.maxSize,false,a.width.fallback).value;var i=P(a.height.current,a.minSize,a.maxSize,false,a.height.fallback).value;return e+" x "+i+" "+a.translate("Common.px");case 1:return n.get("Common.Preview");default:return""}}var I=false;a.attemptFirstCall=j;function j(){if(!I){D();I=true}}a.injectScopeToParent(0,a);function z(){a.width.percError=false;a.width.pxError=false;a.height.percError=false;a.height.pxError=false}}return{directiveLinkFunction:a}}.apply(e,i),void 0!==a&&(t.exports=a))},1556:function(t,e,n){"use strict";var i,a;!(i=[],a=function(){function t(t){return t?{value:t}:{value:1,error:true}}function e(t,e,n,i){if(!t&&0!==t&&!i)return{value:e,error:true,errorType:"min"};if(t<e)return{value:e,error:true,errorType:"min"};if(t>n)return{value:n,error:true,errorType:"max"};return{value:t,error:false}}function n(t){return t.prev!==t.current}function i(t,e,n,i){var r=t*n;var s=e*n;var l=a(r>s?r:s,i);if(l){r=Math.floor(o(r,l));s=Math.floor(o(s,l));n=o(n,l)}return{w:r,h:s,dpi:n}}function a(t,n){var i=e(t,0,n);if("max"===i.errorType)return 100-100*n/t;return 0}function o(t,e){return t-t*e/100}return{verifySizeRange:e,wasDimensionModified:n,calculateInitialDimensions:i,verifyPercentage:t,reduceByPercentage:o}}.apply(e,i),void 0!==a&&(t.exports=a))},1557:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(1558),n(91)],a=function(t,e,n){t.directive("ddImagePreview",function(){return{restrict:"E",template:e,replace:true,scope:{state:"=",states:"=",disablePreview:"=",topText:"=",bottomText:"=",previewUrl:"="},link:function t(e){e.$watch("state",i);function i(t){t===e.states.PENDING&&(e.imageLoaded=false)}e.translate=n.get;e.hidePreviewCondition=a;function a(){return!e.state||!e.previewUrl||e.state!==e.states.COMPLETED}e.hidePendingCondition=o;function o(){return e.state!==e.states.PENDING}e.disablePreviewCondition=r;function r(){return e.state===e.states.PENDING||e.disablePreview}}}})}.apply(e,i),void 0!==a&&(t.exports=a))},1558:function(t,e){t.exports='<div class="dd-preview dd-preview-image">\n    <div class="preview" ng-hide="hidePreviewCondition()">\n        <div class="preview-text pt-top">{{topText}}</div>\n        <div class="preview-separator"></div>\n        <div class="preview-content preview-content-image" >\n            <img \n            class="preview-image"\n            tid="download-preview" \n            ng-src="{{previewUrl}}" \n            ng-class="{ \'preview-disabled\': disablePreviewCondition() }"\n            imageonload\n            loaded="imageLoaded"\n            />\n        </div>\n        <div class="preview-separator"></div>\n        <div class="preview-text pt-bottom">{{bottomText}}</div>\n    </div>\n    <div ng-if="state === states.PENDING" class="status-wrap" tid="pending-status" id="pending-status"> \n        <div class="status-spinner">\n            <div class="spinner">\n                <div class="qv-loader white"></div>\n            </div>\n        </div>\n        <div class="status-text">\n            <div q-translation="Download.PendingPreview" class="st-header"></div>\n        </div>\n    </div>\n    <div ng-if="state === states.FAILED || !state" tid="failed-status" id="failed-status" class="status-wrap">\n        <div class="lui-icon lui-icon--warning status-icon"></div>\n        <div class="status-text">\n            <div class="st-header" q-translation="Download.Error.Generic_1"></div>\n            <div ng-switch="statusCode">\n                <div ng-switch-when="413" q-translation="Download.Error.Selections"></div>\n                <div ng-switch-default q-translation="Download.Error.Generic_2"></div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="state === states.TIMEOUT" tid="timeout-status" id="timeout-status" class="status-wrap">\n        <div class="lui-icon lui-icon--idle status-icon"></div>\n        <div class="status-text">\n            <div q-translation="Download.Image.Timeout" class="st-header"></div>\n            <div q-translation="Download.Error.Generic_2"></div>\n        </div>\n    </div>\n</div>\n'},1559:function(t,e,n){"use strict";var i,a;!(i=[n(48)],a=function(t){t.directive("imageonload",function(){return{restrict:"A",scope:{loaded:"="},template:"<img />",link:function t(e,n){n.bind("load",function(){e.loaded=true;e.$apply("loaded")})}}})}.apply(e,i),void 0!==a&&(t.exports=a))},1560:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(1561)],a=function(t,e){t.directive("ddInput",function(){return{restrict:"E",require:"ngModel",replace:true,scope:{onChange:"&",model:"=",onBlur:"&",onEnter:"&"},template:e,controller:n,link:function t(e,n,i,a){function o(t){if(t){var e=t.replace(/[^0-9]/g,"");if(e!==t){a.$setViewValue(e);a.$render()}return e}return}a.$parsers.push(o)}}});var n=["$scope","$timeout",function(t,e){t.prev=t.model;t.onKeyDown=function(e){switch(e.which){case 13:t.onEnter();break;case 38:t.model++;n();break;case 40:t.model--;n();break}};t.change=n;function n(){t.model=parseInt(t.model);e(function(){t.onChange()})}}]}.apply(e,i),void 0!==a&&(t.exports=a))},1561:function(t,e){t.exports='<input type="text" class="lui-input form-input dd-input" min="0" maxlength="5"\n  ng-change="change()" \n  ng-model="model" \n  ng-blur="onBlur()" \n  ng-keydown="onKeyDown($event)" />\n'},1562:function(t,e,n){"use strict";var i,a;!(i=[n(443),n(1563),n(50)],a=function(t,e,n){return{template:e,scope:{},controller:["$scope","$element",function(e,i){i.find(".content").showComponent(t,{input:e.input});e.cancel=function(){e.destroyComponent()};n.ViewChanged.bind(e.destroyComponent);e.$on("$destroy",function(){n.ViewChanged.unbind(e.destroyComponent)})}]}}.apply(e,i),void 0!==a&&(t.exports=a))},1563:function(t,e){t.exports='<div class="qv-object-info-mobile">\n\n\t<div class="qui-toolbar qv-mi-toolbar" qva-direction x-dir-setting="{{direction}}">\n\n\t\t<div class="qv-mi-toolbar-title">\n\t\t\t<span q-translation="ObjectInfo.Dialog.Header" class="qv-mi-toolbar-text"></span>\n\t\t</div>\n\n\t\t<qui-toolbarbutton qva-activate="cancel($event)" name="cancel" class="qv-mi-toolbar-close" tid="object-info-close">\n\t\t\t<span q-translation="Common.Close" class="qv-mi-toolbar-text"></span>\n\t\t</qui-toolbarbutton>\n\t</div>\n\n\t<div class="content"></div>\n\n</div>\n\n'},1564:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(1565),n(91),n(13),n(100),n(89),n(451),n(188)],a=function(t,e,n,i,a,o,r,s){function l(t,e){if(!e.qHasSoftPatches)return o.resolve();return o.all({properties:t.getProperties(),effective:t.getEffectiveProperties()}).then(function(t){var e=s.generate(t.properties,t.effective);e&&e.length&&(e=e.map(function(t){return{qOp:t.op,qValue:JSON.stringify(t.value),qPath:t.path}}));return e})}t.service("objectDeveloperDialog",["luiDialog",function(t){function s(s,c){t.show({controller:["$scope","$element",function(t,e){t.layout=c.model.layout;t.closeLabel=n.get("Common.Close");t.title="Developer";e.on("keyup,keydown",function(t){t.stopPropagation()});t.state={layoutExpanded:false,propertiesExpanded:false};t.toggleProperties=function(){t.state.propertiesExpanded?t.state.propertiesExpanded=false:c.model.getProperties().then(function(e){t.properties=e;t.state.propertiesExpanded=true})};Object.defineProperty(t,"formattedLayout",{get:function t(){return JSON.stringify(c.model.layout,null,2)}});Object.defineProperty(t,"formattedProperties",{get:function e(){return JSON.stringify(t.properties||{},null,2)},set:function e(n){var i=JSON.parse(n);i.qInfo.qId=c.model.layout.qInfo.qId;c.model.setProperties(i);t.properties=i}});t.clickPrintLink=function(t){t.preventDefault();o.all([c.model.app.getLayout(),c.getSnapshotLayout()]).then(function(t){var e=t[0];var a=t[1];var o=c.model.layout.qInfo.qId+Date.now();localStorage.setItem("print-"+o,JSON.stringify({data:a,language:n.language,appLocaleInfo:e.qLocaleInfo}));var r=i.rootPath+"resources/printing-snapshot.html?callback=fromLocalStorage&printId="+o;window.open(r,"_blank")})};t.clickPrintLinkFull=function(t){t.preventDefault();o.all([r.snapshot(c.model.id,"object",{size:{width:document.body.clientWidth,height:document.body.clientHeight},source:c,sourceSize:{width:100,height:100},sheetLayout:"grid"})]).then(function(t){var e=t[0];var n=c.model.layout.qInfo.qId+Date.now();localStorage.setItem("print-"+n,e.snapshotData);var a=i.rootPath+"resources/printing-snapshot.html?callback=fromLocalStorage&printId="+n;window.open(a,"_blank")})};t.clickPrintLiveLink=function(t,e){t.preventDefault();var r=c.model.layout.qInfo.qId+Date.now();var d=i.rootPath+"resources/printing-live.html?callback=fromLocalStorage&livePrintId="+r;switch(e){case"object":o.all([c.getViewState(),l(c.model,c.model.layout)]).then(function(t){var i=t[0];var o=t[1];localStorage.setItem("live-print-"+r,JSON.stringify({appId:c.model.app.id,type:e,objectId:c.model.layout.qInfo.qId,options:{language:n.language,viewState:i,theme:a.getCurrentTheme(),patches:o,objectSize:c.objectSize}}));window.open(d,"_blank")});break;case"sheet":localStorage.setItem("live-print-"+r,JSON.stringify({appId:c.model.app.id,type:e,objectId:s.layout.qInfo.qId,language:n.language}));window.open(d,"_blank")}};t.clickSingleIntegratorLink=function(t){t.preventDefault();var e=encodeURIComponent(c.model.app.layout.qFileName);var n=c.model.layout.qInfo.qId;var a=i.rootPath+"dev-hub/single-configurator#qapp{"+e+";"+n+"}";window.open(a,"_blank")}}],template:e,closeOnEscape:true})}return{show:s}}])}.apply(e,i),void 0!==a&&(t.exports=a))},1565:function(t,e){t.exports='<lui-dialog class="qv-developer-dialog" style="min-width: 350px;">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title>Developer</lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body>\n\t\t<div style="margin-top: 5px;">\n\t\t\t<span style="font-weight: bold;">Object ID</span>\n\t\t\t<input readonly="readonly" ng-model="layout.qInfo.qId" style="display: inline-block; text-align: right; border: none; cursor: text;"/>\n\t\t</div>\n\t\t\n\t\t<div style="margin-top: 8px; font-weight: bold;" ng-click="toggleProperties()">\n\t\t\t<span>Properties</span>\n\t\t\t<span class="lui-icon lui-icon--small" ng-class="state.propertiesExpanded ? \'lui-icon--triangle-top\' : \'lui-icon--triangle-right\'"\n\t\t\t\tstyle="cursor: pointer; margin-left: 5px;">\n\t\t\t</span>\n\t\t</div>\n\t\t<div ng-if="state.propertiesExpanded" style="margin-top: 5px;">\n\t\t\t<textarea type="text" rows="15" class="lui-textarea" ng-readonly="!layout.permissions.update"\n\t\t\t\tng-model="formattedProperties" ng-change="change()" ng-model-options="{ updateOn: \'blur\' }">\n\t\t\t</textarea>\n\t\t</div>\n\t\n\t\t<div style="margin-top: 8px; font-weight: bold;" ng-click="state.layoutExpanded = !state.layoutExpanded">\n\t\t\t<span>Layout</span>\n\t\t\t<span class="lui-icon lui-icon--small" ng-class="state.layoutExpanded ? \'lui-icon--triangle-top\' : \'lui-icon--triangle-right\'"\n\t\t\t\tstyle="cursor: pointer; margin-left: 5px;">\n\t\t\t</span>\n\t\t</div>\n\t\t<div ng-if="state.layoutExpanded" style="margin-top: 5px;">\n\t\t\t<textarea type="text" rows="15" class="lui-textarea" readonly="true" ng-model="formattedLayout"></textarea>\n\t\t</div>\n\t\n\t\t<div style="margin: 12px 5px; border-top: 1px solid rgb(179, 179, 179)"></div>\n\t\n\t\t<div style="margin-top: 8px;">\n\t\t\t<a href="javascript:void(0)" target="_blank" ng-click="clickSingleIntegratorLink( $event );">\n\t\t\t\tOpen in single configurator <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t</a>\n\t\t</div>\n\t\n\t\t<div style="margin-top: 8px;">\n\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLink( $event );">\n\t\t\t\tTest exporting <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t</a>&nbsp;&nbsp;\n\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLinkFull( $event );">\n\t\t\t\tTest window sized export <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t</a>\n\t\t</div>\n\t\t<div style="margin-top: 8px;">\n\t\t\tTest Live mashup: \n\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLiveLink( $event, \'object\' );">\n\t\t\t\tObject&nbsp;<span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t</a>&nbsp;&nbsp;\n\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLiveLink( $event, \'sheet\' );">\n\t\t\t\tSheet&nbsp;<span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t</a>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button tid="developer-dialog-close" ng-click="close(true);" qva-focus="true">{{::closeLabel}}</lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},1668:function(t,e,n){"use strict";var i,a;!(i=[n(328),n(122)],a=function(t,e){return function(n,i){t.duplicateSheet(n).then(function(t){i&&t.getProperties().then(function(t){e.goToSheet(t.qInfo.qId,"edit")});return t})}}.apply(e,i),void 0!==a&&(t.exports=a))},1670:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(91),n(48),n(2272),n(2273),n(230),n(124),n(138),n(2274),n(1671),n(1329),n(1772)],a=function(t,e,n,i,a,o,r,s,l){var c,d,u=false;function p(e,n){o.get(e).then(function(e){e.getProperties().then(function(i){t.extend(true,i,n);e.setProperties(i)})})}function g(t,e,n){var i;if("width"===n){i=t.left+t.width/2;return i>0&&i<e}if("height"===n){i=t.top+t.height/2;return i>0&&i<e}}function f(t,e,n,i,a){return(t.left>e||i-t.right>e)&&g(t,a,"height")||(t.top>n||a-t.bottom>n)&&g(t,i,"width")}function v(t){t.parent().hasClass("qv-panel-story-right")&&t.on("mousedown.snapshotLibrary",function(){u=true})}function h(t){if(t.parent().hasClass("qv-panel-story-right")){t.off("mousedown.snapshotLibrary");u=false}}function m(t){return u&&t===d}n.service("storyItemsLibrary",function(){return{openPopover:function e(a){var o=a.event.currentTarget,s=!!a.objectId,p="snapshot"===a.library?350:230,g=s?300:500,b;c&&c.close();if(m(o)){h(t(o));d=null;return}r.load();v(t(o));d=o;b={template:i,controller:l,input:{event:a.event,library:a.library,objectId:a.objectId,isZoomed:a.isZoomed,width:p,getLibButtonClicked:function t(){return d},cleanUp:function e(){u||h(t(o))},closePopover:function t(){if(c){c.close();c=null}}}};var y=o.getBoundingClientRect();var w=window.innerWidth;var S=window.innerHeight;if("snapshot"!==a.library||f(y,p+50,g,w,S)){s||(b.dock="left");b.alignTo=o;c=n.getService("luiPopover").show(b)}else{b.x=a.event.pageX;b.y=a.event.pageY;c=n.getService("luiPopover").showToPosition(b)}c.closed.then(function(){o.blur()})}}});n.directive("storyItemsLibrarySnapshot",function(){return{restrict:"E",replace:true,scope:{edit:"=",snapshot:"="},template:a,link:function t(n,i){n.editingAnnotation=false;n.formattedTimestamp=s.format.date(n.snapshot.qData.timestamp,{date:"long"});n.id=n.snapshot.qInfo.qId;n.enterEdit=function(t){if(!n.edit)return;if(!t)return;n.editingAnnotation=true};n.snapshot.qData.libraryTitle.length?n.snapshotTitle=n.snapshot.qData.libraryTitle:n.snapshotTitle=e.get("Storytelling.snapshot.Untitled");n.leaveEdit=function(){if(!n.edit||!n.editingAnnotation)return;i.find(".snapshot-title-input").blur();n.editingAnnotation=false;p(n.id,{qMetaDef:{annotation:n.snapshot.qMeta.annotation}});i.off()}}}});return{canFitPopoverOutsideElement:f,isMiddleVisible:g}}.apply(e,i),void 0!==a&&(t.exports=a))},1671:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(11)],a=function(t,e){t.filter("filterDate",function(){return function(t,n){var i=[],a=(new Date).toDateString(),o,r;r=new Date;o=(r.getDay()+6)%7;r=new Date(r-24*o*60*60*1e3);switch(n.category.name){case"today":e.each(t,function(t,e){new Date(e.qData.timestamp).toDateString()===a&&i.push(e)});break;case"thisweek":e.each(t,function(t,e){e.qData.timestamp>r.getTime()&&new Date(e.qData.timestamp).toDateString()!==a&&i.push(e)});break;case"older":e.each(t,function(t,e){new Date(e.qData.timestamp).toDateString()!==a&&e.qData.timestamp<r.getTime()&&i.push(e)});break;default:return t}n.category.isEmpty=i.length<1;return i}})}.apply(e,i),void 0!==a&&(t.exports=a))},1674:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(89),n(165)],a=function(t,e,i){var a=null;function o(){function o(){Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(91)]).then(function(){var e=[n(1672),n(2678),n(2680),n(2682),n(2684),n(2686),n(2687),n(2688),n(2690),n(2692),n(2694),n(2696),n(2698),n(2711),n(2713),n(2715),n(2717),n(1688),n(2720),n(2723),n(2725),n(2727),n(2729),n(2731),n(2733),n(2735),n(2737),n(2739),n(2741),n(2743),n(2745),n(2747),n(2749),n(2751),n(2753),n(2755),n(2757),n(2759),n(2761),n(2762),n(2764),n(2766),n(2767),n(2769),n(2771),n(2773),n(2775),n(2777),n(2780),n(2782),n(2786),n(2788),n(2790),n(2792),n(2795),n(2797),n(2799),n(2801),n(2803),n(1325),n(2807),n(2809),n(2810),n(2811),n(2812),n(2813),n(2814)];(function(e,n,o,r,s,l,c,d,u,p,g,f,v,h,m,b,y,w,S,x,C,D,E,q,k,P,T,I,j,z,M,L,A,O,_,F,N,R,G,$,V,H,U,B,W,Y,X,K,Z,Q,J,tt,et,nt,it,at,ot,rt,st,lt,ct,dt,ut,pt,gt,ft,vt){i.addComponent("button",n);i.addComponent("accordion",o);i.addComponent("checkbox",r);i.addComponent("dimensions",s);i.addComponent("dropdown",l);i.addComponent("custom-formatter-dropdown",c);i.addComponent("expression",d);i.addComponent("buttongroup",u);i.addComponent("radiobuttons",p);i.addComponent("expandable-items",g);i.addComponent("header",f);i.addComponent("hypercube-data",v);i.addComponent("hypercube-sorting",h);i.addComponent("sorting",h);i.addComponent("inline-dimension",m);i.addComponent("inline-measure",b);i.addComponent("integer",y);i.addComponent("items",w);i.addComponent("layers",S);i.addComponent("link",x);i.addComponent("list",C);i.addComponent("measures",D);i.addComponent("measures-tab",E);i.addComponent("number",q);i.addComponent("slider",k);i.addComponent("string",P);i.addComponent("library-item",T);i.addComponent("item-selection-list",I);i.addComponent("switch",j);i.addComponent("color-scale",z);i.addComponent("image-item",M);i.addComponent("icon-item",L);i.addComponent("color-picker",A);i.addComponent("color-scale-creator",O);i.addComponent("sorting-dimension",_);i.addComponent("sorting-measure",F);i.addComponent("text",N);i.addComponent("textarea",R);i.addComponent("dimension-dropdown",G);i.addComponent("media",$);i.addComponent("align-matrix",V);i.addComponent("number-formatter-dropdown",H);i.addComponent("number-formatter",U);i.addComponent("scope",B);i.addComponent("tags",W);i.addComponent("sheet-dropdown",Y);i.addComponent("attribute-expression-reference",X);i.addComponent("color-by-dropdown",K);i.addComponent("measure-color",Z);i.addComponent("sort-by-element",Q);i.addComponent("no-data",J);i.addComponent("calc-cond",tt);i.addComponent("options-list",et);i.addComponent("header-with-switch",nt);i.addComponent("chart-type",it);i.addComponent("icon-button",at);i.addComponent("palette-creator",ot);i.addComponent("style-editor",rt);i.addComponent("wms-setup",st),i.addComponent("columns",lt);i.addComponent("pivot-data",ct);i.addComponent("filterpane-data",dt);i.addComponent("filterpane-sorting",ut);var ht=t.getService("$templateCache");ht.put("pp-data-item.ng.html",pt);ht.put("pp-pseudo-item.ng.html",gt);ht.put("pp-empty-data-item.ng.html",ft);ht.put("pp-sorting-item.ng.html",vt);a.resolve(i)}).apply(null,e)}).catch(n.oe)}if(!a){a=new e;o()}return a.promise}return{loadComponents:o}}.apply(e,i),void 0!==a&&(t.exports=a))},1768:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(48),n(2262),n(1314),n(94),n(131),n(128),n(2263),n(50),n(1769),n(162),n(114),n(304),n(100),n(236),n(2268),n(302),n(287),n(2285),n(1775)],a=function(t,e,n,i,a,o,r,s,l,c,d,u,p,g,f){var v=20;var h="";var m={};var b={center:"logo-center",right:"logo-right",left:"logo-left"};function y(t){return t&&"none"!==t}function w(t){var e=g.resolveColor(t.sheetTitleBgColor);var n=g.resolveColor(t.sheetTitleGradientColor);return{bgColor:y(e)?e:n,bgSecondaryColor:n,fontColor:t.sheetTitleColor,mobileFontColor:t.sheetTitleColor,logoImgSrc:t.sheetLogoThumbnail&&t.sheetLogoThumbnail.qStaticContentUrl.qUrl?p.addBasePath(t.sheetLogoThumbnail.qStaticContentUrl.qUrl):"",logoPosition:t.sheetLogoPosition}}var S={template:n,restrict:"E",replace:true,scope:{},controller:["$scope","$element","qvSheetService","$interval",function(n,p,S,x){t("body").addClass("qv-sheet-enabled");n.exp={};n.sheetTitle={sheetTitleClass:{},headerBGStyle:"",fontStyle:{},fontColor:"",mobileFontColor:"",bgColor:"",bgSecondaryColor:"",logoImgSrc:"",logoPosition:""};r.start(a.model);function C(t){n.exp.isSmallDevice=t}function D(e,i,a){h="";if(y(e)){h=y(i)?c.getCSSLinearGradient("right",[e,i],[0,100]):"background:"+e+";";h+="border-bottom: 1px solid rgba(0,0,0,0.1);"}else if(y(i)){h="background:"+i+";";h+="border-bottom: 1px solid rgba(0,0,0,0.1);"}!h||n.sheetTitle.fontColor&&"none"!==n.sheetTitle.fontColor||(n.sheetTitle.mobileFontColor="#b0afae");n.sheetTitle.headerBGStyle=h;m=a&&"none"!==a?{color:a}:{};n.sheetTitle.fontStyle=t.extend(true,{},m);E()}function E(){n.sheetTitle.headerBGStyle=h;n.sheetTitle.fontStyle=t.extend(true,{},m);if(n.isCustomSize()){n.sheetTitle.headerBGStyle+=" width: "+(n.grid.layout.pxWidth-4)+"px; min-width: 100%; ";u.isRtl||(n.sheetTitle.fontStyle["min-width"]=n.grid.layout.pxWidth-30+"px")}}function q(t){var e={};b[t]&&(e[b[t]]=true);e["qv-rtl-layout"]=u.isRtl;n.sheetTitle.sheetTitleClass=e}function k(t){n.sheetTitle.tid=t.bgColor+" "+t.bgSecondaryColor+" "+t.fontColor+" "+t.logoPosition}function P(i){var a=w(i);t.extend(n.sheetTitle,a);D(a.bgColor,a.bgSecondaryColor,a.fontColor);q(a.logoPosition||"right",a.logoImgSrc);k(a);e.$rootScope.$broadcast("refreshPropertyPanel")}function T(){d.UpdateObjProps.bind(P)}function I(){d.UpdateObjProps.unbind(P)}d.getProperties().then(function(t){P(t)});function j(){g.ThemeChanged.unbind(j);d.getProperties().then(function(t){P(t)})}g.ThemeChanged.bind(j);T();n.exp.isSmallDevice=l.isSmallDevice;l.ViewChanged.bind(C);n.$watch(r.getGrid,function(t){n.grid=t});n.$watch(r.getModel,function(t){n.model=t;l.isSmallDevice?r.resetSmallDeviceSheetScroll():r.restoreSheetScrollState(0,0)});n.$watch(a.isInEditMode,function(t){n.editmode=t});n.$watch("grid.sheetSize",function(){E()});n.onClickSheetTitle=function(){if(n.grid){n.grid.toggleActive(null);a.isInEditMode()&&(o.propertiesOpen=true)}};n.isCustomSize=function(){return n.grid&&!n.grid.zoomCell&&n.grid.layout&&n.grid.layout.layoutOptions&&"CUSTOM"===n.grid.layout.layoutOptions.sheetMode&&!l.isSmallDevice};n.onCellContextMenu=i.onCellContextMenu;n.onCellRadialContextMenu=i.onCellRadialContextMenu;n.onHintContextMenu=i.onHintContextMenu;p.find("#hint").showComponent(s);S.set(p);var z=p[0];var M;var L;function A(t,e){var n=e.pageY;var i=t.targetRect;if(z.scrollTop>=0&&i.top<n&&i.top+v>n){L=-20;M=x(O,50,50);return true}if(z.scrollTop<=z.scrollHeight-i.height&&i.bottom>n&&i.bottom-v<n){L=20;M=x(O,50,50);return true}return false}function O(){z.scrollTop=z.scrollTop+L}function _(){x.cancel(M)}var F={start:function t(e){var n;try{n=z.getBoundingClientRect()}catch(t){return}var i={enter:A,leave:_,targetRect:{top:n.top-20,bottom:n.bottom+20,left:n.left,right:n.right,height:n.height,width:n.width}};e.registerScrollRect(i)},end:_};f.registerScrollComponent(F);n.$on("$destroy",function(){S.destroy();t("body").removeClass("qv-sheet-enabled");g.ThemeChanged.unbind(j);l.ViewChanged.unbind(C);r.stop();I();f.unregisterScrollComponent(F)})}]};e.directive("qvStageSheet",function(){return S});return S}.apply(e,i),void 0!==a&&(t.exports=a))},1769:function(t,e,n){"use strict";var i,a;!(i=[],a=function(){var t={};var e={moz:"-moz-linear-gradient(",webkit:"-webkit-linear-gradient(",opera:" -o-linear-gradient(",ie:"-ms-linear-gradient(",w3c:"linear-gradient(to "};var n={top:"bottom",bottom:"top",right:"left",left:"right"};t.getCSSLinearGradient=function(t,i,a,o){if(1===i.length)return"background:"+i[0]+";";var r,s,l;s="";l=")";if(o)for(r=i.length-1;r>=0;r--)s+=", "+i[r]+" "+(100-a[r])+"%";else for(r=0;r<i.length;r++)s+=", "+i[r]+" "+a[r]+"%";return"background:"+i[Math.floor(i.length/2)]+"; background:"+e.moz+n[t]+s+l+"; background:"+e.webkit+n[t]+s+l+"; background:"+e.opera+n[t]+s+l+"; background:"+e.ie+n[t]+s+l+"; background:"+e.w3c+t+s+l+";"};return t}.apply(e,i),void 0!==a&&(t.exports=a))},1770:function(t,e,n){"use strict";var i,a;!(i=[n(11)],a=function(t){function e(e){var n={};var i=t(".qvt-sheet");var a=i.offset().top;var o=i.offset().left;var r=i.height();var s=i.width();var l=a+r;var c=o+s;var d=e.top;var u=e.bottom;var p=e.left;var g=e.right;if(u<a||d>l||g<o||p>c)return{ignoreRect:true,ignoreLines:n};if(u>l){n.bottom=true;e.bottom=l}if(d<a){n.top=true;e.top=a}if(g>c){n.right=true;e.right=c}if(p<o){n.left=true;e.left=o}return{ignoreRect:false,ignoreLines:n}}return{removeRectOverlap:e}}.apply(e,i),void 0!==a&&(t.exports=a))},1771:function(t,e,n){"use strict";var i,a;!(i=[n(11)],a=function(){var t={},e=[{title:"Storytelling.library.effect.highlightMax",supportedVisualizations:["piechart","linechart","barchart"],effectPath:"/effects/maxmin",iconClass:"effect-max",effectProperties:{max:true,min:false},restraints:{}},{title:"Storytelling.library.effect.highlightMin",supportedVisualizations:["piechart","linechart","barchart"],effectPath:"/effects/maxmin",iconClass:"effect-min",effectProperties:{max:false,min:true},restraints:{}},{title:"Storytelling.library.effect.highlightValue",supportedVisualizations:["piechart","linechart","barchart"],effectPath:"/effects/highlight-value",iconClass:"effect-highlight",effectProperties:{selectedIndex:0},restraints:{}}],i=[{title:"Common.Title",cssClass:"qv-story-library-text-title",textType:"title",drag:"disable",maintainRatio:true},{title:"Storytelling.library.paragraph",cssClass:"qv-story-library-text-paragraph",textType:"paragraph",drag:"enable",maintainRatio:false}],a=[{shape:"square",src:n.p+"img/storytelling/shapes/square.svg",maintainRatio:false},{shape:"square_rounded",src:n.p+"img/storytelling/shapes/square_rounded.svg",maintainRatio:false},{shape:"circle",src:n.p+"img/storytelling/shapes/circle.svg",maintainRatio:false},{shape:"disc",src:n.p+"img/storytelling/shapes/disc.svg",maintainRatio:false},{shape:"arrow_d",src:n.p+"img/storytelling/shapes/arrow_d.svg",maintainRatio:false},{shape:"arrow_l",src:n.p+"img/storytelling/shapes/arrow_l.svg",maintainRatio:false},{shape:"arrow_r",src:n.p+"img/storytelling/shapes/arrow_r.svg",maintainRatio:false},{shape:"arrow_u",src:n.p+"img/storytelling/shapes/arrow_u.svg",maintainRatio:false},{shape:"pullout_b",src:n.p+"img/storytelling/shapes/pullout_b.svg",maintainRatio:false},{shape:"pullout_l",src:n.p+"img/storytelling/shapes/pullout_l.svg",maintainRatio:false},{shape:"pullout_r",src:n.p+"img/storytelling/shapes/pullout_r.svg",maintainRatio:false},{shape:"pullout_t",src:n.p+"img/storytelling/shapes/pullout_t.svg",maintainRatio:false},{shape:"tri1",src:n.p+"img/storytelling/shapes/tri1.svg",maintainRatio:false},{shape:"tri2",src:n.p+"img/storytelling/shapes/tri2.svg",maintainRatio:false},{shape:"tri3",src:n.p+"img/storytelling/shapes/tri3.svg",maintainRatio:false},{shape:"tri4",src:n.p+"img/storytelling/shapes/tri4.svg",maintainRatio:false},{shape:"2lines_h",src:n.p+"img/storytelling/shapes/2lines_h.svg",maintainRatio:false},{shape:"2lines_v",src:n.p+"img/storytelling/shapes/2lines_v.svg",maintainRatio:false},{shape:"plane",src:n.p+"img/storytelling/shapes/plane.svg",maintainRatio:true},{shape:"bus",src:n.p+"img/storytelling/shapes/bus.svg",maintainRatio:true},{shape:"car",src:n.p+"img/storytelling/shapes/car.svg",maintainRatio:true},{shape:"train",src:n.p+"img/storytelling/shapes/train.svg",maintainRatio:true},{shape:"dollar",src:n.p+"img/storytelling/shapes/dollar.svg",maintainRatio:true},{shape:"euro",src:n.p+"img/storytelling/shapes/euro.svg",maintainRatio:true},{shape:"pound",src:n.p+"img/storytelling/shapes/pound.svg",maintainRatio:true},{shape:"yen",src:n.p+"img/storytelling/shapes/yen.svg",maintainRatio:true},{shape:"flag",src:n.p+"img/storytelling/shapes/flag.svg",maintainRatio:true},{shape:"globe",src:n.p+"img/storytelling/shapes/globe.svg",maintainRatio:true},{shape:"tree",src:n.p+"img/storytelling/shapes/tree.svg",maintainRatio:true},{shape:"cloud",src:n.p+"img/storytelling/shapes/cloud.svg",maintainRatio:true},{shape:"lightbulb",src:n.p+"img/storytelling/shapes/lightbulb.svg",maintainRatio:true},{shape:"clock",src:n.p+"img/storytelling/shapes/clock.svg",maintainRatio:true},{shape:"man",src:n.p+"img/storytelling/shapes/man.svg",maintainRatio:true},{shape:"woman",src:n.p+"img/storytelling/shapes/woman.svg",maintainRatio:true},{shape:"running_man",src:n.p+"img/storytelling/shapes/running_man.svg",maintainRatio:true},{shape:"star",src:n.p+"img/storytelling/shapes/star.svg",maintainRatio:true},{shape:"tick",src:n.p+"img/storytelling/shapes/tick.svg",maintainRatio:true},{shape:"cross",src:n.p+"img/storytelling/shapes/cross.svg",maintainRatio:true},{shape:"banned",src:n.p+"img/storytelling/shapes/banned.svg",maintainRatio:true}],o=[{expanded:true,name:"today",translate:"Storytelling.library.category.today",isEmpty:false,rank:1},{expanded:true,name:"thisweek",translate:"Storytelling.library.category.thisweek",isEmpty:false,rank:2},{expanded:true,name:"older",translate:"Storytelling.library.category.older",isEmpty:false,rank:3}];return{currentStory:t,textTemplates:i,effectTemplates:e,shapeTemplates:a,timeCategories:o}}.apply(e,i),void 0!==a&&(t.exports=a))},1772:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(48),n(172),n(382),n(96)],a=function(t,e,n,i,a){function o(t,e,n,i){if(e.validDrop){var a=e.snapToGrid.gridSize.width,o=n.x-e.snapToGrid.targetRect.left,r=n.y-e.snapToGrid.targetRect.top,s=t.gestureData.swipe,l=Math.sqrt(Math.pow(s.curDeltaX,2)+Math.pow(s.curDeltaY,2)),c=i.getBoundingClientRect(),d=l<10&&0!==c.top&&0!==c.left;n.x=e.snapToGrid.targetRect.left+(o/a).toFixed()*a;n.y=e.snapToGrid.targetRect.top+(r/a).toFixed()*a;d?i.classList.add("smooth-snapping"):i.classList.remove("smooth-snapping")}else i.classList.remove("smooth-snapping")}function r(e,r){i.addDrag(r,".qv-story-library-item",{allowScroll:true,isEnabled:function t(){return!e.inEdit},cond:function t(e){return!a.utils.touch||"right"===e.direction&&e.distance>7},onStart:function e(n){var i=t(n.currentTarget),a=i.scope();a.validDrop=false;n.currentTarget.style.opacity=.5},onStop:function n(i){var a=t(i.currentTarget).scope();if(a.effect){t(".qv-grid-story").scope().$broadcast("dropEffect",t.extend(true,{},a.effect));t(".slide-item-content").not(":has(.qv-snapshot)").removeClass("not-applicable")}e.closePopover()},info:function t(e){return{type:"storyitem",item:e,snapToGrid:{gridSize:{width:n.getGridOptions().cellSize.width,height:n.getGridOptions().cellSize.height},snapFunc:o}}},elem:function n(i){var a=i.currentTarget,o=t(a).scope(),r=a.cloneNode(true);s(e,t(r),o);r.classList.add("ui-draggable-dragging");e.$apply(function(){e.hidePopover()});return r}})}function s(e,i,a){var o=n.getGridOptions().cellSize;var r=o.height*e.helperSize.height;var s=o.width*e.helperSize.width;var c=-1;var d=-1;if(a.text&&"title"===a.text.textType){r=3*o.height;s=19*o.width;c=.5*r;d=r}else if(a.text&&"paragraph"===a.text.textType){c=.1*r;d=.2*r}else if(a.effect){r=20*e.helperSize.height;s=20*e.helperSize.width;t(".qv-grid-story").scope().$broadcast("draggingEffect",a.effect);t(".slide-item-content").not(":has(.qv-snapshot)").addClass("not-applicable")}else if(a.snapshot){var u=a.snapshot.qData.snapshotData;var p=l(u);var g=n.getGridOptions();r=p.rows>=g.rows?(g.rows-1)*o.height:o.height*p.rows;s=p.cols>=g.columns?(g.columns-1)*o.width:o.width*p.cols;c=.2*Math.min(r,s);d=c}i.css({height:Math.round(r),width:Math.round(s),"font-size":c>0?Math.round(c)+"px":"inherit","line-height":d>0?Math.round(d)+"px":"inherit"})}function l(t){var e=t.object.size.w/t.object.size.h,i,a,o,r,s=n.getGridOptions().columns,l=n.getGridOptions().rows;if(t.parent.w>t.parent.h){i=t.object.size.h/t.parent.h;o=l*i;r=o*e;if(r>s){r=s;o=r/e}}else{a=t.object.size.w/t.parent.w;r=s*a;o=r/e;if(o>l){o=l;r=o*e}}return{rows:Math.round(o),cols:Math.round(r)}}e.directive("storyLibraryDraggable",["$timeout",function(t){return{restrict:"A",scope:true,link:function e(n,i){t(function(){n.showMiniLibrary||r(n,i)})}}}])}.apply(e,i),void 0!==a&&(t.exports=a))},1773:function(t,e,n){"use strict";var i,a;!(i=[n(48)],a=function(t){t.service("qvAccessibilityGridService",[function(){var t={},e={ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40};function n(e){if(!t[e]||!t[e].items)return[];return t[e].items}function i(e,n){t[e]={items:n,activeIndex:0}}function a(e){if(t[e])return t[e].activeIndex}function o(e,n){t[e]&&(t[e].activeIndex=n)}function r(e){t[e]&&delete t[e]}function s(t,e){var n,i=null,a=t.length;for(n=0;n<a;n++)if(t[n].row===e.row){i=t[n];break}i?i.items.push(e):t.push({row:e.row,items:[e]})}function l(t,e){var n=t[e].col,i=t[e].row,a=e,o,r=t.length,s=void 0,l,c=Infinity;for(o=0;o<r;o++)if(t[o].row>i){s=t[o].row;break}void 0!==s&&t.forEach(function(t,e){if(t.row===s){l=Math.abs(t.col-n);if(l<c){c=l;a=e}}});return a}function c(t,e){var n=t[e].col,i=t[e].row,a=e,o,r=t.length-1,s=void 0,l,c=Infinity;for(o=r;o>-1;o--)if(t[o].row<i){s=t[o].row;break}void 0!==s&&t.forEach(function(t,e){if(t.row===s){l=Math.abs(t.col-n);if(l<c){c=l;a=e}}});return a}function d(t,e,a,r){var l=n(t),c=l.length,d,u,p=[],g=[];for(u=0;u<c;u++)l[u].id===e&&(d=l[u]);if(d&&(d.col!==a||d.row!==r)){d.col=a;d.row=r;l.forEach(function(t){s(p,t)});p.sort(function(t,e){return t.row-e.row});p.forEach(function(t){t.items.sort(function(t,e){return t.col-e.col})});p.forEach(function(t){t.items.forEach(function(t){g.push(t)})});i(t,g);o(t,0);g.forEach(function(t){t.callback(g[0].col,g[0].row,true)})}}var u={addItem:function t(e,a,r,l,c){var d=n(r),u=[],p=[];if(d.every(function(t){return t.id!==e})){d.push({id:e,callback:a,col:l,row:c});d.forEach(function(t){s(u,t)});u.sort(function(t,e){return t.row-e.row});u.forEach(function(t){t.items.sort(function(t,e){return t.col-e.col})});u.forEach(function(t){t.items.forEach(function(t){p.push(t)})});i(r,p)}o(r,0);return d[0].id===e},updateItem:function e(n,i,a,o){var r=t[i];r.items.some(function(t){var e=t.id===n;if(e){t.col=o;t.row=a}return e})},setFocus:function t(e,i){var a=n(e);var r=-1;var s;var l;a.forEach(function(t,e){t.id===i.id&&(r=e)});s=a[r].row;l=a[r].col;o(e,r);a.forEach(function(t){t.callback(l,s,false)})},removeAllItems:function t(e){r(e)},removeItem:function t(e,i){var a,s=n(e);for(a=0;a<s.length;a++)if(s[a].id===i){s.splice(a,1);break}if(s.length){o(e,0);s.forEach(function(t){t.callback(s[0].col,s[0].row,true)})}else r(e)},key:function t(i,r){if(i.altKey||i.shiftKey)return;var t=i.which,s=a(r),d=s,u=n(r);i.ctrlKey||i.metaKey?t===e.ARROW_DOWN?s=u.length-1:t===e.ARROW_UP&&(s=0):t===e.ARROW_RIGHT?s<u.length-1&&s++:t===e.ARROW_LEFT?s>0&&s--:t===e.ARROW_DOWN?s=l(u,s):t===e.ARROW_UP&&(s=c(u,s));if(s!==d){var p=u[s].col,g=u[s].row;u.forEach(function(t){t.callback(p,g,false)});o(r,s);i.preventDefault();i.stopPropagation()}},positionReset:function t(e,n,i,a){d(e,n,i,a)},softReset:function t(e){var i=n(e);if(i.length){o(e,0);i.forEach(function(t){t.callback(i[0].col,i[0].row,true)})}else r(e)},RIGHT_KEY:e.ARROW_RIGHT,LEFT_KEY:e.ARROW_LEFT,UP_KEY:e.ARROW_UP,DOWN_KEY:e.ARROW_DOWN};return u}])}.apply(e,i),void 0!==a&&(t.exports=a))},1774:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(90),n(89),n(2279),n(1061),n(2280),n(376),n(50),n(96),n(99),n(2281)],a=function(t,e,n,i,a,o,r,s,l,c){t.directive("qvSoftPropertyPanel",function(){return{template:i,restrict:"E",replace:true,scope:{object:"=",canSaveSoftProperties:"=",onToggle:"=",showExploreMenu:"="},controller:["$scope","$element",function(i,d){var u={},p=t.getService("$cacheFactory"),g=p.get("em-object"),f,v=d.find(".em-mobile-overlay")[0];function h(){i.$broadcast("em-resize")}g||(g=p("em-object"));i.$watch("showExploreMenu",function(t){t&&h()});i.$watch("canSaveSoftProperties",function(){i.canSave=w()});i.hasChanged=false;d.toggleClass("em-mobile",s.isSmallDevice);function m(t){d.toggleClass("em-mobile",t)}s.ViewChanged.bind(m);i.object.explore.watchResize(h);d.on("qv-radial-contextmenu qv-contextmenu",function(t){t.stopPropagation()});c.treatAsDesktop()||l(d.find(".em-mobile-overlay")[0]).longtap({options:{preventDefault:false,timeThreshold:100,interval:20},update:function t(e,n){if(n.percentage>=100){l.preventGestures(this.gestureHandler);b()}},cancel:function t(){y()},end:function t(){y()}});function b(){d.addClass("em-peeking")}function y(){d.removeClass("em-peeking")}function w(){var t=!i.data||i.data.qExtendsId;return i.canSaveSoftProperties&&!t}i.close=function(){y();i.onToggle(false)};i.onOverlaySwipe=function(t){"left"===t.gestureData.swipe.direction&&i.close()};i.onOverlayTap=function(){i.close()};i.discard=function(){i.reset();i.close()};i.reset=function(){if(u&&u.model&&i.hasChanged){u.model.clearSoftPatches();u.effectiveProperties=e.extend(true,{},u.properties);u.prevEffectiveProperties=e.extend(true,{},u.effectiveProperties)}};i.applyPatches=function(){i.applying=true};i.cancelConfirm=function(){i.applying=false};i.mergeSoftPatches=function(){if(!i.canSave)return;f.mergeSoftPatches().then(function(){i.applying=false;i.close()})};function S(){u.model.getLayout().then(function(t){i.hasChanged=t.qHasSoftPatches;i.hasChanged||(i.applying=false);var a=t.visualization||t.qInfo.qType;if(a!==u.type)return;n.all({effectiveProperties:u.model.getEffectiveProperties(),properties:u.model.getProperties().then(function(t){if(t.qExtendsId)return u.model.app.getObject(t.qExtendsId).then(function(t){return t.getProperties()});return t})}).then(function(t){u.properties=t.properties;u.effectiveProperties=t.effectiveProperties;u.prevEffectiveProperties=e.extend(true,{},t.effectiveProperties);i.data=u.effectiveProperties;i.canSave=w();i.args.properties=u.properties;i.$broadcast("datachanged",i.data)})})}i.$on("saveSoftProperties",function(t){t.stopPropagation();u.ext.onSoftPropertyChange&&u.ext.onSoftPropertyChange(u.prevEffectiveProperties,u.effectiveProperties);f.saveSoftProperties(u.prevEffectiveProperties,u.effectiveProperties).then(function(t){t&&i.$broadcast("applyPatches")})});i.$on("updateSoftContent",function(t,n){t.preventDefault();o.loadComponents([]).then(function(){u.model&&u.model.Invalidated.unbind(S);u=n;i.definition=u.definition;i.data=u.effectiveProperties;i.args={properties:u.properties,layout:u.layout,cache:u.cache,app:u.app};u.model.Invalidated.bind(S);i.hasChanged=u.layout.qHasSoftPatches;i.canSave=w();i.rootComponent=e.extend({},a.findComponent(u.definition));f?f.setModel(u.model):f=new r(u.model)})});i.$on("$destroy",function(){i.object.explore.unwatchResize(h);s.ViewChanged.unbind(m);u.model&&u.model.Invalidated.unbind(S);c.treatAsDesktop()||l(v).off("longtap")});function x(){if(i.object.hasSoftProperties){var t=i.object;t.getSoftPropertyContent().then(function(a){n.all({effectiveProperties:t.model.getEffectiveProperties(),properties:t.model.getProperties().then(function(e){if(e.qExtendsId)return t.model.app.getObject(e.qExtendsId).then(function(t){return t.getProperties()});return e}),layout:t.model.getLayout()}).then(function(n){var o={definition:a.definition,properties:n.properties,effectiveProperties:n.effectiveProperties,prevEffectiveProperties:e.extend(true,{},n.effectiveProperties),layout:n.layout,model:t.model,app:t.model.app,type:a.type.type,cache:g,ext:t.ext};i.$broadcast("updateSoftContent",o)})})}}i.$on("reloadExploreContent",function(){x()});i.object.hasSoftProperties&&x()}]}});t.componentDirective("includeEmComponent",{definition:"=",data:"=",args:"="})}.apply(e,i),void 0!==a&&(t.exports=a))},1775:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(2284),n(1668)],a=function(t,e,n){t.directive("permissionOverlay",function(){return{template:e,restrict:"E",replace:true,scope:{model:"=",sheetMode:"="},controller:["$scope",function(t){t.duplicateSheet=function(){n(t.model,true)}}]}})}.apply(e,i),void 0!==a&&(t.exports=a))},2262:function(t,e){t.exports='<div class="qv-panel-sheet" ng-class="{\'qv-custom-size\': isCustomSize()}">\t\n\t<qv-odag-link-drop-help-target></qv-odag-link-drop-help-target>\n\t<div class="sheet-title-container" ng-if="!exp.isSmallDevice" qva-apply-style="sheetTitle.headerBGStyle" tid="{{sheetTitle.tid}}">\n\t\t<div id="sheet-title" qva-activate="onClickSheetTitle()" ng-if="grid.isSheet" class="{{sheetMode}}" ng-class="sheetTitle.sheetTitleClass" ng-style="sheetTitle.fontStyle" data-sheet-id="{{grid.sheetId}}">\n\t\t\t<span class="sheetDraftIndicator" ng-if="grid.isDraft || grid.isDraftOwner" q-translation="{{grid.isDraft ? \'Common.Draft\' : \'Common.Updating\'}}"></span>\n\t\t\t<div class="triangle" ng-if="grid.isDraft || grid.isDraftOwner"></div>\n\t\t\t<span class="pushTitle" ng-if="grid.isDraft || grid.isDraftOwner" q-translation="{{grid.isDraft ? \'Common.Draft\' : \'Common.Updating\'}}"></span>\n\t\t\t<span qva-direction x-dir-text="{{grid.sheetTitle}}" class="sheet-title-text" title="{{grid.sheetTitle}}">{{grid.sheetTitle}}</span>\n\t\t\t<div class="sheet-title-logo-img" ng-if="!!sheetTitle.logoImgSrc">\n\t\t\t\t<img ng-src="{{ sheetTitle.logoImgSrc }}" draggable="false" class="img-no-drag"/>\n\t\t\t</div>\n\t\t\t<div class="sheet-title-bumper" ng-if="sheetTitle.logoPosition === \'center\'"></div>\n\t\t</div>\n\t</div>\n\t<div id="master-info" ng-if="grid.isMaster" qv-master-info model="grid.cells[0].model" ext="grid.cells[0].ext"></div>\n\t<div id="grid-wrap" class="borderbox {{sheetMode}}" ng-class="{ \'grid-wrap-zoom-cell\': !!grid.zoomCell }"  ng-style="grid.permissionStyle" qva-activate="grid.gridToggleActive( )">\n\t\t<div id="hint" qva-context-menu="onHintContextMenu($event)"></div>\n\t\t<qv-grid model="model" sheet-mode="sheetMode" grid="grid" context-menu-fn="onCellContextMenu" radial-context-menu-fn="onCellRadialContextMenu"></qv-grid>\t\n\t\t<permission-overlay ng-if="grid.isSheet && editmode && model.layout && !model.layout.permissions.update"  model="model" grid="grid" sheet-mode="sheetMode"></permission-overlay>\n\t</div>\n\t<div ng-if="exp.isSmallDevice && !grid.zoomCell && !editmode" class="quick-navigation-wrapper">\n\t\t<qv-quick-navigation is-small-device="exp.isSmallDevice" sheet-title="grid.sheetTitle" font-color="sheetTitle.fontColor" bg-color="sheetTitle.bgColor" logo-img-src="sheetTitle.logoImgSrc" logo-placement="sheetTitle.logoPosition" />\n\t</div>\n</div>\n'},2263:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(95),n(106),n(94),n(2264),n(2265),n(388),n(50),n(2266),n(49),n(2267)],a=function(t,e,n,i,a,o,r,s,l,c){var d={template:o,scope:true,controller:["$scope","$element","$timeout",function(o,d,u){var p=false,g=null,f,v=new a;v.setCurrentState(a.States.editHint);o.isSmallDevice=s.isSmallDevice;function h(t){o.model=t;o.setSheet()}function m(t){o.isSmallDevice=t;o.setState()}n(o,"model",function(t){if("story"===t.qInfo.qType)return;p=0===t.cells.length;g=t.permissions;o.setState()});o.setSheet=function(){o.model.getLayout().then(function(t){if("story"===t.qInfo.qType)return;p=0===t.cells.length;g=t.permissions;o.setState()})};i.SheetChanged.bind(h);s.ViewChanged.bind(m);f=o.$watch(i.isInEditMode,function(){o.setState();o.ShowFinishedMessage()});function b(){o.ShowDragHint=v.isState(a.States.dragHint);o.ShowDropHint=v.isState(a.States.dropHint)}o.$watch(a.state,b);o.setState=function(){var t=v.getState(p,g,i.isInEditMode(),o.isSmallDevice);t===a.States.editHint?o.setEditHint():t===a.States.dragHint?o.setDragHint():o.setNoHint()};o.hasHint=function(){return v.isHintState(g,i.inSheetView())};o.ShowAuthoringHint=function(){return v.isAuthoringHint()};o.ShowEditHint=function(){return v.isEditHint()};o.ShowFinishedMessage=function(){return i.isInEditMode()};o.setNoHint=function(){l.destroy();v.setCurrentState(a.States.noHint);e.unsubscribe(".sheethint")};o.setEditHint=function(){v.setCurrentState(a.States.editHint);e.unsubscribe(".sheethint")};function y(){e.subscribeOnce("/library/dragstop.sheethint",function(e){var n=t("#grid");e.pageX>n.offset().left&&e.pageX<n.offset().left+n.width()&&e.pageY>n.offset().top&&e.pageY<n.offset().top+n.height()&&(p=false);o.setDragHint()})}o.setDragHint=function(){v.setCurrentState(a.States.dragHint);b();u(function(){l.setup(d.find(".hint-animation"))});r.load().then(function(t){o.hintText=t.fullMode?"SheetView.Content.GettingStarted.Assets":"SheetView.Content.GettingStarted.Library";t.getActiveTabId()||t.expandTab(t.tabs[0])});e.unsubscribe(".sheethint");e.subscribeOnce("/library/dragstart.sheethint",function(t){if(t&&"odagLinkItem"===t.dragDropType){o.setNoHint();y()}else o.setDropHint()})};o.setDropHint=function(){v.setCurrentState(a.States.dropHint);e.unsubscribe(".sheethint");y();b()};if(i.model){o.model=i.model;o.setSheet()}o.$on("$destroy",function(){f();l.destroy();i.SheetChanged.unbind(h);s.ViewChanged.unbind(m)});o.dropZones=c.getFlag("DROP_ZONES")}]};return d}.apply(e,i),void 0!==a&&(t.exports=a))},2264:function(t,e,n){"use strict";var i,a;!(i=[n(92)],a=function(t){var e=t.extend("State",{init:function t(){this.currentState=0},setCurrentState:function t(e){e!==this.currentState&&(this.currentState=e)},isState:function t(e){return this.currentState===e},getState:function t(n,i,a){var o=e.States.noHint;n&&i&&i.update&&(o=a?e.States.dragHint:e.States.editHint);return o},isHintState:function t(n,i){return!!n&&n.update&&i&&!this.isState(e.States.noHint)},isAuthoringHint:function t(){return this.isState(e.States.dragHint)||this.isState(e.States.dropHint)},isEditHint:function t(){return this.isState(e.States.editHint)}});e.States={noHint:0,dragHint:1,dropHint:2,editHint:3};return e}.apply(e,i),void 0!==a&&(t.exports=a))},2265:function(t,e){t.exports='<div class="grid-hint-wrapper" ng-if="hasHint()">\n\t<div class="grid-hint">\n\t\t<div class="grid-hint-stage-0" ng-show="ShowEditHint()" tid="grid-hint-edit">\n\t\t\t<div class="hint-header" q-translation="SheetView.Content.GettingStarted.Title"></div>\n\t\t\t<div class="hint-description" ng-if="!isSmallDevice" q-translation="SheetView.Content.GettingStarted.Analyse" q-html-translation-indexes=\'["<i class=\\"lui-icon lui-icon--edit\\"></i>"]\'></div>\n\t\t\t<div ng-show="ShowFinishedMessage()" class="hint-description" q-translation="SheetView.Content.GettingStarted.Assets2" q-html-translation-indexes=\'["<i class=\\"lui-icon lui-icon--edit\\"></i>"]\'></div>\n\t\t</div>\n\t\t<div class="grid-hint-editmode" ng-show="ShowAuthoringHint()">\n\t\t\t<div class="stages">\n\t\t\t\t<div class="grid-hint-stage-1" hint-fadein="ShowDragHint" hint-fadeout="ShowDropHint" tid="grid-hint-drag">\n\t\t\t\t\t<div class="hint-animation"/>\n\t\t\t\t\t<div class="hint-header" q-translation="Common.Create"></div>\n\t\t\t\t\t<div class="hint-description" q-translation="{{hintText}}"></div>\n\t\t\t\t\t\x3c!-- Navigate between the different assets you can use on your sheet by switching the tabs found on the lower left corner.--\x3e\n\t\t\t\t</div>\n\t\t\t\t<div class="grid-hint-stage-2" ng-if="!dropZones" hint-fadein="ShowDropHint" hint-fadeout="ShowDragHint" style="display: none;">\n\t\t\t\t\t<div class="hint-header"> </div>\n\t\t\t\t\t<div class="hint-description" q-translation="SheetView.Content.GettingStarted.Description2"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},2266:function(t,e,n){"use strict";var i,a;!(i=[n(1e3)],a=function(t){var e={v:"4.6.0",fr:25,ip:0,op:222,w:326,h:228,nm:"Comp 1",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"Shape Layer 22",ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[0],e:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:92,s:[0],e:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:94,s:[100],e:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:186,s:[100],e:[0]},{t:193}]},r:{a:0,k:0},p:{a:1,k:[{i:{x:.488,y:.994},o:{x:.5,y:0},n:"0p488_0p994_0p5_0",t:92,s:[263,176.5,0],e:[70,98,0],to:[-76.1666641235352,-3.58332848548889,0],ti:[37.0163917541504,46.5222625732422,0]},{i:{x:.833,y:.833},o:{x:.618,y:0},n:"0p833_0p833_0p618_0",t:115,s:[70,98,0],e:[70,98,0],to:[-1.29297375679016,-1.62501168251038,0],ti:[0,0,0]},{i:{x:.524,y:.904},o:{x:.339,y:.068},n:"0p524_0p904_0p339_0p068",t:132,s:[70,98,0],e:[287,92.75,0],to:[0,0,0],ti:[0,0,0]},{t:163}]},a:{a:0,k:[0,0,0]},s:{a:0,k:[66,66,100]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[22.385,9.277],[5.445,5.445],[.605,3.832],[-5.445,-.403],[0,0],[0,2.017],[0,3.227],[-2.218,0],[0,-3.227],[0,0],[-.907,.908],[-2.622,0],[-1.412,0],[-2.017,-.807],[-1.412,-.202],[-2.117,-2.118],[0,-3.227],[1.21,-3.025],[0,-2.42],[0,0]],o:[[0,0],[-5.445,-5.445],[-.605,-3.832],[5.445,.403],[0,0],[0,-2.017],[0,-3.227],[2.218,0],[0,3.227],[0,0],[.908,-.907],[2.622,0],[1.412,0],[2.017,.807],[1.412,.202],[2.118,2.118],[0,3.227],[-1.21,3.025],[0,2.42],[0,0]],v:[[-12.504,32.368],[-16.335,17.243],[-33.074,4.739],[-27.427,-1.916],[-13.915,2.723],[-12.705,-1.109],[-12.705,-35.998],[-7.462,-41.645],[-1.21,-36.401],[-1.008,-11.193],[-.403,-14.218],[6.252,-16.638],[11.092,-15.428],[17.747,-15.024],[23.394,-10.789],[31.259,-7.764],[33.679,3.529],[32.267,15.024],[27.83,24.503],[27.83,32.368]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"st",c:{a:0,k:[.402114,.402114,.402114,1]},o:{a:0,k:100},w:{a:0,k:4},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke"},{ty:"fl",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:2,ty:4,nm:"Shape Layer 21",ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[45.384,130,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,.638],[0,0],[-.638,0],[0,0],[0,-.638],[0,0],[.638,0]],o:[[-.638,0],[0,0],[0,-.638],[0,0],[.638,0],[0,0],[0,.638],[0,0]],v:[[-32.104,9.974],[-33.26,8.816],[-33.26,-8.817],[-32.104,-9.974],[33.354,-9.974],[34.51,-8.817],[34.51,8.816],[33.354,9.974]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"st",c:{a:0,k:[.6306985,.6306985,.6306985,1]},o:{a:0,k:100},w:{a:0,k:4},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke"},{ty:"fl",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:3,ty:4,nm:"Shape Layer 20",ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[45.384,100,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,.638],[0,0],[-.638,0],[0,0],[0,-.638],[0,0],[.638,0]],o:[[-.638,0],[0,0],[0,-.638],[0,0],[.638,0],[0,0],[0,.638],[0,0]],v:[[-32.104,9.974],[-33.26,8.816],[-33.26,-8.817],[-32.104,-9.974],[33.354,-9.974],[34.51,-8.817],[34.51,8.816],[33.354,9.974]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"st",c:{a:0,k:[.6306985,.6306985,.6306985,1]},o:{a:0,k:100},w:{a:0,k:4},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke"},{ty:"fl",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:4,ty:4,nm:"Shape Layer 19",ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:203,s:[100],e:[0]},{t:212}]},r:{a:0,k:0},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},n:"0p833_0p833_0p167_0p167",t:112,s:[45.5,70,0],e:[45,70,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.524,y:.904},o:{x:.339,y:.068},n:"0p524_0p904_0p339_0p068",t:132,s:[45,70,0],e:[262,64.75,0],to:[0,0,0],ti:[0,0,0]},{t:163}]},a:{a:0,k:[0,0,0]},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},n:["0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167"],t:119,s:[100,100,100],e:[119,119,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},n:["0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167"],t:122,s:[119,119,100],e:[108,108,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},n:["0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167"],t:125,s:[108,108,100],e:[108,108,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},n:["0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167"],t:163,s:[108,108,100],e:[158,360,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},n:["0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167"],t:169,s:[158,360,100],e:[152,345,100]},{t:171}]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,.638],[0,0],[-.638,0],[0,0],[0,-.638],[0,0],[.638,0]],o:[[-.638,0],[0,0],[0,-.638],[0,0],[.638,0],[0,0],[0,.638],[0,0]],v:[[-32.104,9.974],[-33.26,8.816],[-33.26,-8.817],[-32.104,-9.974],[33.354,-9.974],[34.51,-8.817],[34.51,8.816],[33.354,9.974]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"st",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:119,s:[.6306985,.6306985,.6306985,1],e:[.3764706,.654902,.2705882,1]},{t:122}]},o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:163,s:[100],e:[0]},{t:165}]},w:{a:0,k:4},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke"},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:119,s:[1,1,1,1],e:[.3764706,.654902,.2705882,1]},{t:122}]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:5,ty:4,nm:"Shape Layer 24",ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[45.384,70,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,.638],[0,0],[-.638,0],[0,0],[0,-.638],[0,0],[.638,0]],o:[[-.638,0],[0,0],[0,-.638],[0,0],[.638,0],[0,0],[0,.638],[0,0]],v:[[-32.104,9.974],[-33.26,8.816],[-33.26,-8.817],[-32.104,-9.974],[33.354,-9.974],[34.51,-8.817],[34.51,8.816],[33.354,9.974]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"st",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:163,s:[.7450981,.7450981,.7450981,1],e:[.6313726,.6313726,.6313726,1]},{t:167}]},o:{a:0,k:100},w:{a:0,k:4},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke"},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:163,s:[.7435968,.7435968,.7435968,1],e:[1,1,1,1]},{t:167}]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:6,ty:4,nm:"Shape Layer 18",ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[45.384,40,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,.638],[0,0],[-.638,0],[0,0],[0,-.638],[0,0],[.638,0]],o:[[-.638,0],[0,0],[0,-.638],[0,0],[.638,0],[0,0],[0,.638],[0,0]],v:[[-32.104,9.974],[-33.26,8.816],[-33.26,-8.817],[-32.104,-9.974],[33.354,-9.974],[34.51,-8.817],[34.51,8.816],[33.354,9.974]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"st",c:{a:0,k:[.6306985,.6306985,.6306985,1]},o:{a:0,k:100},w:{a:0,k:4},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke"},{ty:"fl",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:7,ty:4,nm:"sidepanel",ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[46.5,122,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0],[0,5.068],[0,0],[0,0]],o:[[0,0],[-5.068,0],[0,0],[0,0],[0,0]],v:[[41.626,100],[-33.2,100],[-42.376,90.824],[-42.376,-100],[41.626,-100]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"fl",c:{a:0,k:[.8992494,.8992494,.8992494,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:8,ty:4,nm:"placeholder 2",ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:154,s:[0],e:[30]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:157,s:[30],e:[30]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:167,s:[30],e:[0]},{t:169}]},r:{a:0,k:0},p:{a:0,k:[163,114,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[50.811,-33.986],[-50.811,-33.986],[-50.811,33.986],[50.811,33.986]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"st",c:{a:0,k:[.6306985,.6306985,.6306985,1]},o:{a:0,k:100},w:{a:0,k:1},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke"},{ty:"fl",c:{a:0,k:[.6269148,.6269148,.6269148,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"},{ty:"tr",p:{a:0,k:[99.811,-50.014],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,mn:"ADBE Vector Group"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:9,ty:4,nm:"placeholder 1",ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:137,s:[0],e:[30]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:140,s:[30],e:[30]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:150,s:[30],e:[0]},{t:152}]},r:{a:0,k:0},p:{a:0,k:[47,114,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[50.811,-33.986],[-50.811,-33.986],[-50.811,33.986],[50.811,33.986]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"st",c:{a:0,k:[.6306985,.6306985,.6306985,1]},o:{a:0,k:100},w:{a:0,k:1},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke"},{ty:"fl",c:{a:0,k:[.6269148,.6269148,.6269148,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"},{ty:"tr",p:{a:0,k:[99.811,-50.014],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,mn:"ADBE Vector Group"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:10,ty:4,nm:"sheet",ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[164,122,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[-5.068,0],[0,0],[0,5.068],[0,0],[0,0]],o:[[0,5.068],[0,0],[5.068,0],[0,0],[0,0],[0,0]],v:[[-160,90.824],[-150.824,100],[150.824,100],[158,90.647],[158,-100.176],[-160,-100]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"fl",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1},{ddd:0,ind:11,ty:4,nm:"bg",ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[163,113.5,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[6.714,0],[0,0],[0,-6.714],[0,0],[-6.714,0],[0,0],[0,6.714],[0,0]],o:[[0,0],[-6.714,0],[0,0],[0,6.714],[0,0],[6.714,0],[0,0],[0,-6.714]],v:[[150.824,-113.303],[-150.824,-113.303],[-163,-101.127],[-163,101.127],[-150.824,113.303],[150.824,113.303],[163,101.127],[163,-101.127]],c:true}},nm:"Path 1",mn:"ADBE Vector Shape - Group"},{ty:"fl",c:{a:0,k:[.6335325,.6335325,.6335325,1]},o:{a:0,k:100},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill"}],ip:0,op:3101,st:0,bm:0,sr:1}]};var n=null;var i=false;return{setup:function a(o){if(!n&&!i){i=true;t().then(function(t){var a={container:o[0],renderer:"svg",loop:true,autoplay:false,animationData:e};n=t.loadAnimation(a);n.play();i=false})}},destroy:function t(){if(n){n.stop();n.destroy();n=null;i=false}}}}.apply(e,i),void 0!==a&&(t.exports=a))},2267:function(t,e,n){"use strict";var i,a;!(i=[n(119)],a=function(t){t.directive("hintFadein",["$timeout",function(t){return{restrict:"A",link:function e(n,i,a){n.$watch(a.hintFadein,function(e){e&&t(function(){i.fadeIn({duration:250})},250)})}}}]);t.directive("hintFadeout",function(){return{restrict:"A",link:function t(e,n,i){e.$watch(i.hintFadeout,function(t){t&&n.fadeOut({duration:250})})}}})}.apply(e,i),void 0!==a&&(t.exports=a))},2268:function(t,e,n){"use strict";var i,a;!(i=[n(50),n(119),n(91),n(2269),n(2270),n(93),n(94),n(236),n(309),n(95),n(262),n(96),n(128),n(123),n(114),n(90),n(1770),n(426),n(49),n(2271),n(1670),n(2275),n(2276),n(245),n(2278),n(1731),n(1774),n(2282),n(1775)],a=function(t,e,n,i,a,o,r,s,l,c,d,u,p,g,f,v,h,m,b,y){e.componentDirective("qvGridCellContent",{cell:"="});var w={RENDERED:1,NOPE:0};function S(t){return{libraryitem:function e(n,i){c.publish("/ui/library/addToSheet",{cell:t,item:n.item,event:i})},gridcell:function e(n){var i=t.pos;t.isEmpty?p.moveObject(n.cell.pos,i):t.object&&t.object.ext&&t.object.ext.addChild?m.get().then(function(e){e.startGroup().then(function(i){n.cell.model.getFullPropertyTree().then(function(a){t.object.ext.addChild(n.cell.model.properties,a.qChildren).then(function(){p.removeCell(n.cell);e.endGroup(i)})})})}):p.swapObjects(n.cell.pos,i)},containerItem:function e(n){(t.isEmpty||t.object&&t.object.ext.addChild)&&m.get().then(function(e){e.startGroup().then(function(i){n.extractObject().then(function(n){t.isEmpty?p.addObject({cell:t,init:n,template:n.visualization}):t.object.ext.addChild(n);e.endGroup(i)})})})}}}function x(t,e,n,i){if(!n.ignoreRect){var a=S(e);t.registerDropRect({targetRect:n,drawRect:n,drop:a,isEmpty:e.isEmpty,ignoreLines:i})}}function C(t,e,n,i,a){var o=v.extend(true,{},t),r=a?4:10,s=Math.abs(t[e]-t[n]),l=75,c=250,d=800;if(!a)if(s<l)s=-1;else if(s<c){s=l/3;r=1}else if(s>d){s=d/r;r=1}o[n]=t[e]+i*s/r;return o}function D(t){return"libraryitem"===t.type&&"visualization"===t.item.type}function E(t,e){function i(){d.show({title:n.get("Object.Master.Drop.Visualization.Error.Title"),message:n.get("Object.Master.Drop.Visualization.Error.Message")})}e.rect||t.registerDropRect({targetRect:e,drop:i})}function q(t,e){var n;var i={accept:{libraryitem:function t(){return true},gridcell:function t(){return true},containerItem:function t(){return true}},end:function t(i){e.removeClass(n);"gridcell"===i.info.type&&(i.info.cell.isDragging=false)},start:function i(a){var o;var r;var s;var c={};try{s=e[0].getBoundingClientRect()}catch(t){return}var d=t.grid;t.$root.$emit("hideSubPanel",{all:true,forceClose:false});n="libraryitem"===a.info.type?"dragging library-dragging":"dragging";e.addClass(n);"gridcell"===a.info.type&&(a.info.cell.isDragging=true);function u(t,e){var n=d.rectFor(t,e);var i={left:s.left+s.width/100*n.left+n.margin,top:s.top+s.height/100*n.top+n.margin,right:s.left+s.width/100*(n.left+n.width)-n.margin,bottom:s.top+s.height/100*(n.top+n.height)-n.margin};c={};if(e){var a=h.removeRectOverlap(i);i.ignoreRect=a.ignoreRect;c=a.ignoreLines}return i}function p(t,e,n,i){var o=l.splitPos(t.pos,i,d.cols,d.rows).pos2;var r=u(o,true);var s;if(t.isEmpty)s={pos:o,isEmpty:true};else{var p={pos:t.pos,split:i};s={pos:p,isEmpty:true}}if(!h.removeRectOverlap(n).ignoreRect){var g={prio:1,targetRect:n,drawRect:r,cellRect:e,ignoreLines:c,drop:S(s),isEmpty:t.isEmpty};a.registerDropRect(g)}}if(d.zoomCell){o=u({col:0,row:0,colspan:d.cols,rowspan:d.rows},false);d.isMaster&&D(a.info)?E(a,o):x(a,d.zoomCell,o,c);return}var g="state"===v.getValue(a.info,"item.type");if(g){o=u({col:0,row:0,colspan:d.cols,rowspan:d.rows},false);var f=S(y);a.registerDropRect({prio:-1,targetRect:o,drawRect:o,drop:f,isEmpty:false,ignoreLines:c})}var m;var y;for(m=0;m<d.cells.length;++m){y=d.cells[m];if("gridcell"===a.info.type&&a.info.cell===y)continue;if(g&&y.isEmpty)continue;if(!y.isEmpty&&!y.object.canReceive(a.info))continue;o=u(y.pos,false);r=u(y.pos,true);x(a,y,r,c);if(d.zoomCell||g)continue;if(!y.isEmpty||!b.getFlag("DROP_ZONES")){if(l.ifSplit("horizontal",y,d.layout.columns,d.layout.rows)){p(y,r,C(o,"right","left",-1,y.isEmpty),"right");p(y,r,C(o,"left","right",1,y.isEmpty),"left")}if(l.ifSplit("vertical",y,d.layout.columns,d.layout.rows)){p(y,r,C(o,"top","bottom",1,y.isEmpty),"top");p(y,r,C(o,"bottom","top",-1,y.isEmpty),"bottom")}}}}};s.registerDropTarget(i);t.$on("$destroy",function(){s.unregisterDropTarget(i)})}e.directive("qvGrid",["$timeout",function(s){return{template:i,replace:true,restrict:"E",scope:{model:"=",grid:"=",sheetMode:"=",contextMenuFn:"=",radialContextMenuFn:"="},link:function i(l,c){var d=w.NOPE,g,v=false;var h=!!c.closest(".qv-story-sheet").length,m=l.$watch("grid",function(){p.setGridElement(c[0]);m()});l.SSA=b.getFlag("SSA_IN_EDIT");l.onFocus=function(){v?l.gridScreenReader="":r.model.getLayout().then(function(t){l.gridScreenReader=n.get("Accessibility.Object.Description",t.qMeta.title)})};l.onBlur=function(){v=!!document.activeElement&&document.activeElement.classList.contains("qv-gridcell");l.gridScreenReader=""};l.$watch("grid.cells",function(t,e){if(t===e)return;var n=!t||!t.length||!t.some(function(t){return!t.isEmpty});if(n&&d!==w.RENDERED){d=w.RENDERED;s.cancel(g);g=s(function(){c.attr("data-render-state",d)},0,false)}p.highlightedCell()});l.$watch("grid.mobileGrid",function(){C()});function S(t,e,n,i){k(l.grid,l.SSA,e,i)}function x(t){(l.grid.cells||[]).forEach(function(e){e.object&&e.object.setDirection&&e.object.setDirection(t)})}o.getApp().then(function(t){return t.getLayout()}).then(function(t){l.canCreateSheet=t.permissions.createSheet});l.$watch(r.isInEditMode,function(t){l.editmode=t;l.editmode&&l.grid.cells&&l.grid.cells.forEach(function(t){t.object&&t.toggleExploreMenu(false)})});l.isAnalysisMode=function(){return r.state===r.States.analysis};q(l,c);function C(){e.$apply(e.$rootScope,function(){l.isSmallDevice=t.isSmallDevice;l.sheetMode=a.getSheetMode(t,h,l.grid&&l.grid.mobileGrid);l.grid&&l.grid.cells&&l.grid.cells.forEach(function(t){t.onViewModeChanged&&t.onViewModeChanged()})})}C();t.ViewChanged.bind(C);t.OrientationChanged.bind(C);r.StateChanged.bind(S);f.DirectionChanged.bind(x);c.on("scroll",function(){u.preventGestures()});u.utils.touch&&c.on("touchforcechange",function(){});l.$on("cellRenderStateChange",function(t,e){t.stopPropagation();var n=1!==e?0:l.grid.cells.some(function(t){return t.object&&1!==t.object.renderState})?0:1;if(n!==d){d=n;s.cancel(g);if(d!==w.RENDERED)c.attr("data-render-state",d);else{y.trackSheetDetails(l.grid);g=s(function(){c.attr("data-render-state",d)},0,false)}}});l.$on("$destroy",function(){c.off("scroll");u.utils.touch&&c.off("touchforcechange");t.ViewChanged.unbind(C);t.OrientationChanged.unbind(C);r.StateChanged.unbind(S);f.DirectionChanged.unbind(x)})}}}]);function k(t,e,n,i){if(n===i||Number.isNaN(+i))return;if(e)t&&i===r.States.edit&&t.setCellSelected(null);else{var a=n===r.States.edit?g.EDIT:g.ANALYSIS;(t&&t.cells||[]).forEach(function(t){t.object&&t.object.setInteractionState&&t.object.setInteractionState(a)})}}return{updateStateUtil:k}}.apply(e,i),void 0!==a&&(t.exports=a))},2269:function(t,e){t.exports='<div id="grid" ng-class="{ \'grid-cell-zoomed\': !!grid.zoomCell, \'resizing\' : grid.gridHandleActive }" data-render-state="0" ng-style="grid.sheetSize">\n\n\t<div ng-if="model.layout" id="snapshotAnnotationsContainer" snapshot-annotations></div>\n\n\t<div ng-if="(SSA || editmode) && !grid.zoomCell && !isSmallDevice" class="qv-gridguide-wrapper">\n\t\t<div ng-repeat="lineStyle in grid.verticalLines" class="qv-gridguide qv-gridguide-vertical" ng-style="lineStyle">\n\t\t\t<div class="qv-gridguide-inner"></div>\n\t\t</div>\n\t\t<div ng-repeat="lineStyle in grid.horizontalLines" class="qv-gridguide qv-gridguide-horizontal" ng-style="lineStyle">\n\t\t\t<div class="qv-gridguide-inner"></div>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="!cell.isEmpty || !isSmallDevice" class="cell qv-gridcell qvt-gridcell"\n\t\tng-repeat="cell in grid.cells" qv-grid-cell="cell"\n\t\tng-class="classes" ng-style="cell.style"\n\t\tng-mouseenter="mouseEnter()" ng-mouseleave="mouseLeave()"\n\t\tng-keydown="keyDown( $event )"\n\t\tng-mousedown="mouseDown()"\n\t\tng-mouseup="mouseUp()"\n\t\tqva-activate="onCellClick( cell, $event )"\n\t\tqva-context-menu="contextMenuFn( $event, cell, model, grid )"\n\t\tqva-radial-context-menu="radialContextMenuFn( $event, cell, model, grid )"\n\t\ttabindex="{{tab}}"\n\t\ttid="{{cell.id}}"\n\t\tng-blur="onBlur()"\n\t\tng-focus="onFocus()">\n\n\t\t<div class="hidden-screen-reader-label" aria-label="{{gridScreenReader}}"></div>\n\t\t<label class="hidden-screen-reader-label" id="sr-cell-status-label" aria-live="assertive"></label>\n\n\t\t<div ng-if="zooming" class="zoomBorder qv-animate"></div>\n\n\t\t<div class="object-and-panel-wrapper">\n\t\t\t<div class="object-wrapper">\n\t\t\t\t<qv-object tabindex="-1" ng-if="!cell.isEmpty" class="cell-content" object="cell.object" model="cell.model" options="cell.options" zoom-object="grid.toggleZoom(cell)" nav-menu="cell.navMenu" snapshot="cell.snapshot" ></qv-object>\n\t\t\t\t<qva-nav-menu options="cell.options" menu="cell.navMenu"></qva-nav-menu>\n\t\t\t</div>\n\t\t\t<qv-soft-property-panel object="cell.object" ng-if="cell.options.isZoomed && cell.object.hasSoftProperties" can-save-soft-properties="cell.options.canSaveSoftProperties" ng-hide="!cell.showExploreMenu" on-toggle="cell.toggleExploreMenu" show-explore-menu="cell.showExploreMenu"></qv-soft-property-panel>\n\t\t</div>\n\t\t\n\t\t<div ng-hide="!cell.showingObjectMenu" class="greyDim qv-animate fade ng-hide"></div>\n\t\t<qv-transparent-overlay ng-if="isSmallDevice && !grid.zoomCell" qva-activate="grid.zoom(cell)"></qv-transparent-overlay>\n\n\t\t<div ng-if="!isSmallDevice && !grid.zoomCell" ng-repeat="resize in cell.resize track by resize.dir"\n\t\t\tqv-grid-cell-handle\n\t\t\tclass="ignore-context-menu qv-gridresize-point qv-gridresize-{{resize.dir}}">\n\t\t\t<div class="visual-cue ignore-context-menu"></div>\n\t\t</div>\n\t\t\n\n\t</div>\n\n\t<qv-extend-sheet-target grid-model="model" ng-if="editmode && !grid.zoomCell && grid.extend">\n\t\t\n\t</qv-extend-sheet-target>\n\n\t\n</div>\n\n\n'},2270:function(t,e,n){"use strict";var i,a;!(i=[],a=function(){return{isSmallCell:function t(e){return e.object&&e.object.type&&("text-image"===e.object.type.type||"filterpane"===e.object.type.type)},getSheetMode:function t(e,n,i){if(!e.isSmallDevice||i||n)return"sheet-grid";var a="sheet-list sheet-list-";a+=e.orientation===e.Orientation.portrait?"vertical":"horizontal";return a}}}.apply(e,i),void 0!==a&&(t.exports=a))},2271:function(t,e,n){"use strict";var i,a;!(i=[n(103),n(89),n(90)],a=function(t,e,n){var i={};function a(a){if(!i[a.layout.qInfo.qId]){i[a.layout.qInfo.qId]=true;var o=a.cells.filter(function(t){return!t.isEmpty&&"function"===typeof t.getVisualization}).map(function(t){return t.getVisualization()});e.all(o).then(function(e){var i;var o=e.map(function(t){i={chart_isThirdParty:n.getValue(t,"type.libraryInfo.isThirdParty"),isAutoChart:"auto-chart"===n.getValue(t,"type.type")};i.chart_type=i.isAutoChart?n.getValue(t,"layout.qUndoExclude.generated.visualization",""):n.getValue(t,"type.type","");t.ext&&"function"===typeof t.ext.extendMetrics&&n.extend(i,t.ext.extendMetrics(n.getValue(t,"layout")));return i});t.trackEvent(t.customEvents.SHEET_RENDERED,{objects:o,sheet_id:a.layout.qInfo.qId})})}}return{trackSheetDetails:a}}.apply(e,i),void 0!==a&&(t.exports=a))},2272:function(t,e){t.exports='<lui-popover ng-hide="!show" class="story-library-popover" tid="snapshot-library-popover"\n\t\t\t ng-style="{ \'width\': input.width,  \'min-width\': input.width }">\n\t<lui-popover-header>\n\t\t<div class="qv-story-library-header" q-translation="{{currentLibrary.translation}}"></div>\n\t</lui-popover-header>\n\n\t<lui-popover-body>\n\t\t<div story-library-draggable class="qv-story-library-content"\n\t\t\t ng-class="{\'story-mini-library\': showMiniLibrary,\n\t\t\t\t\t\t\'qv-snapshot-library\': snapshots,\n\t\t\t\t\t\t\'qv-text-library\': texts,\n\t\t\t\t\t\t\'qv-shape-library\': shapes,\n\t\t\t\t\t\t\'qv-effect-library\': effects}">\n\n\t\t\t\x3c!-- SNAPSHOTS INCLUDING CATEGORIES --\x3e\n\t\t\t<div ng-if="snapshots">\n\t\t\t\t<ul class="qv-expandable-list">\n\t\t\t\t\t<li ng-repeat="category in categories | orderBy:\'rank\'" class="expandable-item ng-scope" ng-class="{ \'empty\': category.isEmpty }">\n\n\t\t\t\t\t\t<div class="qv-expandable-list-header"\n\t\t\t\t\t\t\t ng-click="expandClicked(category)"\n\t\t\t\t\t\t\t ng-if="!category.isEmpty"\n\t\t\t\t\t\t\t ng-class="{ \'expanded\': category.expanded }">\n\t\t\t\t\t\t\t<span ng-class="{ \'lui-icon\': true, \'lui-icon--triangle-right\' : !category.expanded, \'lui-icon--triangle-bottom\': category.expanded }"></span>\n\t\t\t\t\t\t\t<div class="text ng-binding" q-translation="{{ category.translate }}"></div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ul class="lui-list"\n\t\t\t\t\t\t\tng-show="category.expanded"\n\t\t\t\t\t\t\tng-class="{ \'expanded\': category.expanded }">\n\n\t\t\t\t\t\t\t<li ng-repeat="snapshot in snapshots | orderBy:\'qData.timestamp\':true | filterDate:this"\n\t\t\t\t\t\t\t\tng-class="{ \'qv-draggable\': !inEdit && !showMiniLibrary, \'edit\': inEdit }"\n\t\t\t\t\t\t\t\tclass="qv-story-library-item lui-list__item snapshot"\n\t\t\t\t\t\t\t\tng-dblclick="itemDblClick(snapshot)">\n\n\t\t\t\t\t\t\t\t<div ng-show="isEmpty" class="snapshot-empty" q-translation="Storytelling.library.noSnapshots"></div>\n\n\t\t\t\t\t\t\t\t\x3c!-- CHECKBOX TO TIC SNAPSHOT FOR REMOVE --\x3e\n\t\t\t\t\t\t\t\t<lui-checkbox ng-if="inEdit"\n\t\t\t\t\t\t\t\t\t\t\t  class="snapshot-checkbox"\n\t\t\t\t\t\t\t\t\t\t\t  x-model="checkboxTicked"\n\t\t\t\t\t\t\t\t\t\t\t  x-change="onCheckboxClick()"\n\t\t\t\t\t\t\t\t\t\t\t  x-disabled="!snapshot.permissions.remove">\n\t\t\t\t\t\t\t\t</lui-checkbox>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass="snapshot-icon lui-list__aside lui-icon  lui-icon--{{ getIconName( snapshot.qData.visualizationType ) }}">\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<story-items-library-snapshot edit="inEdit" snapshot="snapshot" />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div ng-show="empty" class="snapshot-empty" q-translation="Storytelling.library.noSnapshots"></div>\n\n\t\t\t<ul class="lui-list">\n\n\t\t\t\t\x3c!-- TEXT OBJECTS --\x3e\n\t\t\t\t<li ng-repeat="text in texts" ng-class="text.textType" class="qv-story-library-item lui-list__item qv-draggable" ng-dblclick="itemDblClick(text)">\n\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass="text-{{text.textType}}"\n\t\t\t\t\t\t\tq-translation="{{text.title}}">\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\n\t\t\t\t\x3c!-- SHAPES --\x3e\n\t\t\t\t<li ng-repeat="shape in shapes" class="qv-story-library-item shape lui-list__item qv-draggable" ng-dblclick="itemDblClick(shape)">\n\t\t\t\t\t<img\n\t\t\t\t\t\t\tonmousedown="if (event.preventDefault) event.preventDefault()"\n\t\t\t\t\t\t\tdraggable="false"\n\t\t\t\t\t\t\tng-src="{{shape.src}}" />\n\t\t\t\t</li>\n\n\t\t\t\t\x3c!-- EFFECTS --\x3e\n\t\t\t\t<li ng-repeat="effect in effects" class="qv-story-library-item qv-story-library-effect lui-list__item qv-draggable">\n\t\t\t\t\t<span class="effect-icon {{effect.iconClass}}">\n\t\t\t\t\t</span>\n\t\t\t\t\t<p\n\t\t\t\t\t\tclass="effect-title"\n\t\t\t\t\t\tq-translation="{{effect.title}}">\n\t\t\t\t\t</p>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer class="qv-story-library-footer" ng-show="editable">\n\t\t<div ng-hide="snapshots.length < 1 || inEdit">\n\t\t\t<button\n\t\t\t\tng-disabled="!editable"\n\t\t\t\tclass="lui-fade-button"\n\t\t\t\tng-click="enterEdit()"\n\t\t\t\tq-title-translation="Common.Edit"\n\t\t\t\ttid="edit-library-item">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--edit"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div ng-if="inEdit && !empty">\n\t\t\t<button\n\t\t\t\tng-disabled="!isAnyTicked"\n\t\t\t\tclass="lui-fade-button delete"\n\t\t\t\tng-click="deleteSnapshots()"\n\t\t\t\tq-title-translation="Common.Delete"\n\t\t\t\ttid="delete-library-item">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--bin"></span>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass="lui-fade-button lui-active"\n\t\t\t\tng-click="leaveEdit()"\n\t\t\t\tq-title-translation="Tooltip.StopEdit"\n\t\t\t\tqva-focus="true">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--edit"></span>\n\t\t\t</button>\n\t\t</div>\n\t</lui-popover-footer>\n</lui-popover>\n\n'},2273:function(t,e){t.exports='<div class="snapshot-info">\n\t<div id="title-container">\n\t\t<p class="snapshot-title">{{ snapshotTitle }}</p>\t\t\n\t\t<p class="snapshot-date">{{ formattedTimestamp }}</p>\n\t</div>\n\t<div class="annotation-container">\n\t\t<div class="snapshot-annotation"\n\t\t   ng-class="{ \'edit\': edit }"\n\t\t   ng-show="!editingAnnotation"\n\t\t   ng-click="enterEdit( snapshot.permissions.update ) && edit"\n\t\t   title="{{snapshot.qMeta.annotation.length > 0 ? snapshot.qMeta.annotation : \'\'}}"\n\t\t>\n\t\t\t{{snapshot.qMeta.annotation.length > 0 ? snapshot.qMeta.annotation : \'\'}}\n\t\t</div>\n\t\t<div class="snapshot-annotation"\n\t\t   ng-if="editingAnnotation"\n\t\t   ng-class="{ \'editing-title\': editingAnnotation }">\n\t\t\t<textarea type="text" qva-outside="leaveEdit()" qva-focus="editingAnnotation" class="snapshot-annotation-input" maxlength="255" rows="2" ng-model="snapshot.qMeta.annotation"/>\n\t\t</div>\n\t</div>\n</div>\n\n'},2274:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(48),n(96),n(97),n(1771),n(115),n(230),n(94),n(172),n(1671),n(1329),n(1772)],a=function(t,e,n,i,a,o,r,s,l){var c={snapshot:{translation:"Storytelling.library.snapshot",type:"snapshot"},text:{translation:"Storytelling.library.text"},shapes:{translation:"Storytelling.library.shape"},effects:{translation:"Storytelling.library.effect"},media:{translation:"Storytelling.library.media"}};function d(e,n,i,o){h(e);e.event=n;e.categories=t.extend(true,[],a.timeCategories);t(e.input.getLibButtonClicked()).addClass("goto-source-indication-border");switch(i){case"snapshot":u(e,o);e.currentLibrary=c.snapshot;break;case"text":p(e);e.currentLibrary=c.text;break;case"shapes":g(e);e.currentLibrary=c.shapes;break;case"effects":f(e);e.currentLibrary=c.effects;break}}function u(t,e){function n(){r.getLibraryContent(e,n).then(function(e){t.snapshots=e;t.empty=t.snapshots.length<1;t.helperSize={height:15,width:21};t.editable=e.some(function(t){return t.permissions.update||t.permissions.remove})})}n()}function p(t){t.texts=a.textTemplates;t.helperSize={height:12,width:12};t.empty=false}function g(t){t.shapes=a.shapeTemplates;t.helperSize={height:6,width:6};t.empty=false}function f(e){e.effects=t.extend(true,{},a.effectTemplates);e.helperSize={height:2.5,width:11};e.empty=false}function v(e){var n=t(".qv-story-library-item.snapshot"),i=[];n.each(function(){t(this).find("input").prop("checked")&&i.push(t(this).scope().snapshot.qInfo.qId)});e.afterRemoveLength=e.snapshots.length-i.length;i.forEach(function(t){r.remove(t)});e.isAnyTicked=false}function h(e){t(document).on("keydown.snapshotLibrary",function(t){b(t)&&e.input.closePopover()})}function m(){t(document).off("keydown.snapshotLibrary")}function b(t){var e=(t.ctrlKey||t.metaKey)&&!t.altKey;return e&&(37===t.which||39===t.which)}var y=["$scope","$element",function(a,c){var u=e.getService("$addSlideItemService");a.show=true;a.showMiniLibrary=s.state!==s.States.editstory;a.currentLibrary=null;a.helperSize=null;a.editable=false;a.inEdit=false;a.empty=false;a.isAnyTicked=false;a.expandClicked=function(t){t.expanded=!t.expanded};a.getIconName=function t(e){return o.getIconName(e)};a.enterEdit=function(){a.inEdit=true};a.leaveEdit=function(){a.inEdit=false;a.isAnyTicked=false};a.deleteSnapshots=function(){v(a)};a.onCheckboxClick=function(){var e=t(".qv-story-library-content ul");a.isAnyTicked=false;e.children().each(function(){t(this).find("input").prop("checked")&&(a.isAnyTicked=true)})};a.hidePopover=function(){a.show=false};a.cleanUp=function(){var e=a.input.getLibButtonClicked();e&&t(e).removeClass("goto-source-indication-border");m();a.input.cleanUp()};a.itemDblClick=function t(e){if(a.showMiniLibrary)return;a.input.closePopover();s.model.app.getObject(l.currentSlideId).then(function(t){a.snapshots?u.addSnapshot(a,e,t):a.texts?u.addText(a,e,t):a.shapes&&u.addShape(a,e,t)})};i.on("start.storytellingLibrary",a.input.closePopover);n.utils.touch&&c.on("touchforcechange",function(){});a.$on("$destroy",function(){a.cleanUp();i.off("start",a.input.closePopover);n.utils.touch&&c.off("touchforcechange");r.unbindList()});d(a,a.input.event,a.input.library,a.input.objectId)}];return y}.apply(e,i),void 0!==a&&(t.exports=a))},2275:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(119),n(382),n(94),n(1161),n(128),n(247),n(89),n(181),n(96),n(91),n(49),n(100),n(1773),n(111)],a=function(t,e,n,i,a,o,r,s,l,c,d,u,p){function g(t){return t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)}e.directive("qvGridCell",["$timeout","qvAccessibilityGridService","qvContextMenu",function(l,c,f){return function(v,h){var m=h.find("#sr-cell-status-label");v.cell.showExploreMenu=false;l(function(){if(v.cell.object){v.cell.object.setOnBlurHandler(function(){c.setFocus("GenericObject",v.cell);b()});v.accCallback=function(t,e,n){var i=t===v.cell.pos.col&&e===v.cell.pos.row;v.tab=i?0:-1;!i||n||v.editmode?h.blur():h.focus()};var t=c.addItem(v.cell.id,v.accCallback,"GenericObject",v.cell.pos.col,v.cell.pos.row);v.tab=t?0:-1}});v.keyDown=function(t){if(h[0]!==document.activeElement||v.editmode||v.cell.object.selectionsApi&&v.cell.object.selectionsApi.active||v.cell.object.childInSelection)return;switch(t.which){case c.RIGHT_KEY:case c.LEFT_KEY:case c.UP_KEY:case c.DOWN_KEY:f.close();0===v.tab&&c.key(t,"GenericObject");break;case 9:t.shiftKey&&f.close();break;case 13:case 32:f.close();if(!v.cell.object.isInvalid){if(t.shiftKey)if(v.cell===v.grid.zoomCell)v.grid.zoom(null);else{v.grid.zoom(v.cell);v.cell.object.focus&&v.cell.object.focus();m.text(d.get("Accessibility.Object.FullScreenMode"))}else{var e=!v.cell.object.viewDataToggled&&v.cell.object.supportViewData();e?v.cell.object.toggleDataView().then(function(){v.cell.object.viewDataToggled&&m.text(d.get("Accessibility.Object.ViewDataMode"))}):v.cell.object.viewDataToggled&&"function"===typeof v.cell.object.dataViewObject.focus?v.cell.object.dataViewObject.focus():"function"===typeof v.cell.object.focus?v.cell.object.focus():m.text(d.get("Accessibility.Object.CannotViewData"))}m.text("")}break;case 27:!v.grid.zoomCell&&v.cell.object.viewDataToggled?v.cell.object.toggleDataView().then(function(){v.cell.object.viewDataToggled||m.text(d.get("Accessibility.Object.ViewChartMode"))}):v.cell===v.grid.zoomCell&&m.text(d.get("Accessibility.Object.CloseFullScreenMode"));f.close();if(!v.grid.zoomCell){t.preventDefault();t.stopPropagation()}m.text("");break;case 121:if(t.shiftKey){var n=h.offset();t.pageY=n.top+h.height()/2;t.pageX=n.left+h.width()/2;v.contextMenuFn(t,v.cell,v.model,v.grid,b)}break}};v.classes={"qv-gridcell-empty":false,active:false,zoom:false,linked:false,animateable:false,"qv-gridcell-invalid":false,"goto-source-indication-border":false,"border-indication-fade-7s":false,"qv-gridcell-acc-focus":false,resizing:false,dragging:false};function b(){h.get(0).focus();v.tab=0}function y(){if(!v.cell.navMenu)return;var t=v.cell;var e=t.object;var n=!v.grid.gridHandleActive&&!t.isEmpty;var a=t.options&&t.options.isActive;var o=v.cell===v.grid.zoomCell;var r=!!e&&(!e.selectionsApi||e.selectionsApi&&!e.selectionsApi.active)&&!e.childInSelection;var s=!!t.snapshot&&t.snapshot.isAnnotating;var c=i.isInEditMode()&&!(!!v.grid&&v.grid.hasUpdatePermission);var d=i.inMasterObjectView();var u=(a||o||t.mouseOver||s)&&n&&r&&!v.isSmallDevice&&!c&&!d;v.cell.navMenu.visible=u;var g=p.hasCardLayout();u?l(function(){if(t.navMenu&&t.navMenu.getSize){var n=t.navMenu.getSize().width;g&&e&&e.updateTitlePadding(n)}},i.isInEditMode()?0:200):g&&e&&e.updateTitlePadding(0);if(u&&v.grid&&v.grid.cells)for(var f=0;f<v.grid.cells.length;f++){var h=v.grid.cells[f];var m=h.options&&h.options.isActive;if(h!==v.cell&&h.navMenu&&h.navMenu.visible&&!m){h.navMenu.visible=false;g&&h.object&&h.object.updateTitlePadding(0)}}}function w(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}v.cell.mouseOver=false;v.cell.toggleExploreMenu=function(t){v.cell.showExploreMenu=void 0!==t?t:!v.cell.showExploreMenu;return v.cell.showExploreMenu};v.mouseEnter=function(){v.cell.mouseOver=true;y()};v.mouseLeave=function(){v.cell.mouseOver=false;y()};if(!v.cell.isEmpty){u.getFlag("SSA_IN_EDIT")||n.addDrag(h,"",{isEnabled:function e(n,a){var r=t(a.target).closest(".qv-object-nav").length>0,s=t(a.target).closest(".cell-content").length<1;if(s||r)return false;var l=o.isBlocked();var c=g(document.activeElement)||g(a);var d=v.cell.object&&v.cell.object.preventDrag;return!c&&!d&&i.isInEditMode()&&!v.grid.zoomCell&&!l},info:function t(){return{type:"gridcell",cell:v.cell}},onStart:function t(){v.grid.toggleActive(v.cell)},elem:"<div class='qv-gridmove-icon'></div>"});v.cell.snapshot={showCounter:false,snapshotCount:0,isAnnotating:false,dialogOpen:false,snapshotTimer:null,updateCount:function t(){r.getNumberOfSnapshots(v.cell.id).then(function(t){v.cell.snapshot.snapshotCount=t;v.cell.snapshot.disabledSave=false})},openAnnotation:function n(i){v.cell.snapshot.dialogOpen=true;v.cell.snapshot.disabledSave=true;return l(function(){var n=h.find(".qv-object-nav .lui-icon--camera");if(w(n[0]))return e.getService("annotationsDialog").openDialog(n,v.cell.snapshot.closeAnnotation,i,function(){return v.cell.snapshot.disabledSave});n[0].scrollIntoView();t(".qvt-sheet")[0].scrollLeft+=40;return e.getService("annotationsDialog").openDialog(n,v.cell.snapshot.closeAnnotation,i,function(){return v.cell.snapshot.disabledSave})})},closeAnnotation:function t(){v.cell.snapshot.dialogOpen=false;v.cell.snapshot.isAnnotating=false;y()},take:function t(e,n){var i=v.cell.object,a;if(i.supportSnapshot()){a=e?v.cell.snapshot.openAnnotation(n):s.resolve();a.then(function(t){if(e){v.cell.navMenu.active=true;v.cell.navMenu.visible=true;v.cell.snapshot.isAnnotating=true}r.createSnapshot(i,h).then(function(n){v.cell.snapshot.updateCount();e&&(t.currentAnnotationId=n)})})}},openLibrary:function t(n,i){n.stopImmediatePropagation();e.getService("storyItemsLibrary").openPopover({event:n,library:"snapshot",objectId:v.cell.id,isZoomed:i})}};v.cell.getVisualization().then(function(t){return t.loaded}).then(function(){v.cell.snapshot.updateCount()})}function S(t,e){if(t===e)return;v.$broadcast("resizeCell")}function x(t,e){if(t===e)return;var n=v.cell;var i=v.grid;var a=v.cell===v.grid.zoomCell;v.changedZoom=true;v.grid.changedZoom=true;v.classes.zoom=a;v.zooming=a||!i.zoomCell&&n===e;v.classes.animateable=v.zooming;v.validatingCell=n.model&&n.model.isValidating?n:null;y();t&&t.object?t.object.setRenderState(0):e&&e.object&&e.object.setRenderState(0);v.zooming?l(C,500):v.$broadcast("resizeCell")}h.on("transitionend.transitionAnimListener webkitTransitionEnd.transitionAnimListener oTransitionEnd.transitionAnimListener MSTransitionEnd.transitionAnimListener",function(t){var e=t.originalEvent.propertyName;"width"===e&&C()});h.on("animationend.transitionAnimListener webkitAnimationEnd.transitionAnimListener oAnimationEnd.transitionAnimListener msAnimationEnd.transitionAnimListener",function(t){var e=t.originalEvent.animationName;if("fadeAwayBorder"===e){v.cell.isHighlighted=false;v.$apply()}});function C(){var t=v.grid;if(!v.changedZoom)return;v.changedZoom=false;v.grid.changedZoom=false;v.$broadcast("resizeCell");v.zooming=v.zooming&&!(v.validatingCell&&v.validatingCell.model.isValidating);v.classes.animateable=false;t.blockZoomAnimation=false;y();var e=v.cell!==v.grid.zoomCell;if(v.isSmallDevice&&e&&v.cell.isHighlighted){q(v.cell.isHighlighted);h[0].scrollIntoView(true)}}function D(){var t=v.cell===v.grid.activeCell&&v.editmode;v.classes.active=t;v.cell.isEmpty||(v.cell.options.isActive=t)}function E(){v.classes["qv-gridcell-acc-focus"]=!v.editmode&&!v.cell.isEmpty&&v.cell.object&&!v.cell.object.childInSelection&&v.cell.object.selectionsApi&&!v.cell.object.selectionsApi.active&&v.focusBorder}function q(t){l(function(){v.classes["goto-source-indication-border"]=t;v.classes["border-indication-fade-7s"]=t})}v.cell.onViewModeChanged=function(){y()};v.onCellClick=function(t,e){if(i.isInEditMode()){u.getFlag("SSA_IN_EDIT")&&!t.isEmpty||v.grid.toggleActive(t);e&&!u.getFlag("SSA_IN_EDIT")&&e.stopPropagation()}};v.focusBorder=true;v.mouseDown=function(){v.focusBorder=false;E();h.blur()};v.mouseUp=function(){v.focusBorder=true;E();h.blur()};v.$watch("cell.isDragging",function(){v.classes.dragging=v.cell.isDragging});v.$watch("cell.isHighlighted",function(){v.isSmallDevice&&v.cell.isHighlighted?l(function(){v.grid.zoom(v.cell)},100):q(v.cell.isHighlighted)});v.$watch("cell.pos.colspan",S);v.$watch("cell.pos.rowspan",S);v.$watch("grid.zoomCell",function(t,e){x(t,e)});v.$watch("grid.activeCell",function(){D();y()});v.$watch("editmode",function(e){if(a.matchSource(v.cell.id)){q(true);l(function(){var e=t("[tid="+v.cell.id+"]");e.length&&v.grid.gridService.scrollToPos(e.offset().left,e.offset().top)})}else{v.classes["goto-source-indication-border"]=false;v.classes["border-indication-fade-7s"]=false}D();if(false===e&&v.cell.object){c.positionReset("GenericObject",v.cell.id,v.cell.pos.col,v.cell.pos.row);v.focusBorder=true}E()});v.$watch("cell.isEmpty",function(t){v.classes["qv-gridcell-empty"]=t});v.$watch("cell.object.isInvalid",function(t){v.classes["qv-gridcell-invalid"]=t});v.$watch("cell.object.isLink",function(t){v.classes.linked=t});v.$watch("cell.object.selectionsApi.active",function(){y();E()});v.$watch("cell.object.childInSelection",function(){y();E()});v.$on("objectRenderStateChange",function(t,e){if(!v.cell.isEmpty){h.attr("data-render-state",e?1:0);v.$emit("cellRenderStateChange",e?1:0);v.zooming&&e&&(v.zooming=false)}});v.$on("zoomOnCell",function(t){v.grid.zoom(v.cell);t.stopPropagation()});v.$on("zoomOut",function(t){v.grid.zoom(null);t.stopPropagation()});v.$on("$destroy",function(){h.off(".transitionAnimListener");v.cell.object&&c.removeItem("GenericObject",v.cell.id)})}}]);e.directive("qvGridCellHandle",function(){return function(e,n){function i(t){return o.moveObject(v,t)}function a(t,n){l.alignToGrid({rows:e.grid.rows,columns:e.grid.cols},t);var i={col:t.col,row:t.row,colspan:t.colspan,rowspan:t.rowspan};r[e.resize.dir].X&&(i.col-=n.X);r[e.resize.dir].Y&&(i.row-=n.Y);i.colspan+=n.X;i.rowspan+=n.Y;return i}var r={left:{X:true,Y:true},top:{X:true,Y:true},"top-left":{X:true,Y:true},bottom:{X:false,Y:false},right:{X:false,Y:false},"bottom-right":{X:false,Y:false},"top-right":{X:false,Y:true},"bottom-left":{X:true,Y:false}};var s={left:true,right:true}[e.resize.dir]||false;var d={top:true,bottom:true}[e.resize.dir]||false;var u={"top-left":true,"top-right":true,"bottom-left":true,"bottom-right":true}[e.resize.dir]||false;var p={deltaX:s||u,deltaY:d||u};var g;var f;var v;n.on("qv-swipestart",function(i){c.WebkitHack.prevent();i.preventDefault();m(true);e.mouseLeave();v=t.extend(true,{},e.cell.pos);f={X:0,Y:0};var a=n.closest("#grid");g={X:e.grid.cols/a.width(),Y:e.grid.rows/a.height()};g.X=r[e.resize.dir].X?-g.X:g.X;g.Y=r[e.resize.dir].Y?-g.Y:g.Y});c(n[0]).tap({options:{preventDefault:false},start:function t(){m(true)},end:function t(){m(false)}});e.$on("$destroy",function(){c(n[0]).off()});n.on("qv-swipe",function(t){c.WebkitHack.prevent();t.preventDefault();m(false);h(t);i(e.cell.pos)});n.on("qv-swipecancel",function(t){c.WebkitHack.prevent();t.preventDefault();m(false);h(t);i(e.cell.pos)});n.on("qv-swipeupdate",function(t){c.WebkitHack.prevent();t.preventDefault();var n={X:0,Y:0};p.deltaX&&(n.X=Math.round(t.gestureData.swipe.deltaX*g.X));p.deltaY&&(n.Y=Math.round(t.gestureData.swipe.deltaY*g.Y));var i={X:n.X-f.X,Y:n.Y-f.Y};i.X=Math.min(e.resize.expand.X,i.X);i.X=-Math.min(e.resize.contract.X,-i.X);i.Y=Math.min(e.resize.expand.Y,i.Y);i.Y=-Math.min(e.resize.contract.Y,-i.Y);0!==i.X&&(f.X+=i.X);0!==i.Y&&(f.Y+=i.Y);if(0!==i.X||0!==i.Y){e.grid.setCellSize(e.cell,a(v,f));e.grid.updateResize(e.cell);e.$apply()}});function h(i){if(i.originalEvent){var a=n.closest(".qv-gridcell")[0];var o=t(i.originalEvent.target).closest(".qv-gridcell")[0];e.grid.gridHandleActive||a!==o||e.mouseEnter()}}function m(t){e.grid.gridHandleActive=t;e.classes.resizing=e.grid.gridHandleActive}}})}.apply(e,i),void 0!==a&&(t.exports=a))},2276:function(t,e,n){"use strict";var i,a;!(i=[n(119),n(2277),n(128)],a=function(t,e,n){function i(t){t.$watch("model",function(t,e){e&&e.Closed.unbind(n.closeEditMaster);t&&t.Closed.bind(n.closeEditMaster)});t.$on("$destroy",function(){t.model.Closed.unbind(n.closeEditMaster)})}t.directive("qvMasterInfo",function(){return{template:e,scope:{model:"=",ext:"="},link:function t(e){e.close=function(){n.closeEditMaster()};i(e)}}})}.apply(e,i),void 0!==a&&(t.exports=a))},2277:function(t,e){t.exports='<div class="info">\n\t<lui-button\n\t        x-variant="warning"\n\t\t\tclass="close"\n\t\t\tqva-activate="close()"\n\t\t\tq-translation="Common.Done"></lui-button>\n\t<div class="text">\n\t\t<div q-translation="Object.Master.Editor.Title" class="label"></div>\n\t\t<div><span q-translation="metadata.name" class="label">Name:</span> <span>{{model.layout.qMeta.title}}</span>\n\t\t</div>\n\t\t<div><span q-translation="metadata.description" class="label">Description:</span>\n\t\t\t<span>{{model.layout.descriptionExpression || model.layout.qMeta.description}}</span></div>\n\t\t<div><span q-translation="metadata.tags" class="label">Tags:</span>\n\t\t\t<span>{{model.layout.qMeta.tags.join( ", " )}}</span></div>\n\t</div>\n\t<div class="divider"></div>\n</div>\n'},2278:function(t,e,n){"use strict";var i,a;!(i=[n(119)],a=function(t){t.directive("qvTransparentOverlay",function(){return{template:'<div class="transparent-overlay"><div class="transparent-overlay-scroll"></div></div>',replace:true,restrict:"E"}})}.apply(e,i),void 0!==a&&(t.exports=a))},2279:function(t,e){t.exports='<div class="qv-soft-property-panel qui-dark">\n\t\n\t<div class="em-mobile-overlay" qva-activate="onOverlayTap()" qva-swipe="onOverlaySwipe($event)"></div>\n\t\n\t<div class="panel-container">\n\t\t<div class="panel-content" include-em-component x-component="rootComponent" x-args="args" x-definition="definition" x-data="data"></div>\n\n\t\t<div class="panel-bottom">\n\t\t\t<button ng-class="{\'lui-disabled\': !hasChanged && !applying}" ng-click="hasChanged && discard();" tid="discard">\n\t\t\t\t<span q-translation="Common.Discard"></span>\n\t\t\t</button>\n\t\t\t<button ng-if="canSave" ng-class="{\'lui-disabled\': !hasChanged && !applying}" qva-activate="hasChanged && applyPatches();" tid="apply">\n\t\t\t\t<span q-translation="Common.Apply"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t\n\t\t<div class="em-confirm-overlay" ng-if="hasChanged && applying">\n\t\t\t<section>\n\t\t\t\t<div class="lui-icon lui-icon--control"></div>\n\t\t\t\t<p class="title" q-translation="Object.VisualExploration.NoEdit.PropPanel.Title"></p>\n\t\t\t\t<p q-translation="Object.VisualExploration.Confirm.Text"></p>\n\t\t\t</section>\n\t\t\t<section class="panel-bottom">\n\t\t\t\t<lui-button ng-if="canSave" x-variant="inverse" q-translation="Common.Apply" qva-activate="hasChanged && mergeSoftPatches();" tid="apply"></lui-button>\n\t\t\t\t<lui-button x-variant="inverse" q-translation="Common.Cancel" qva-activate="cancelConfirm();" tid="cancel"></lui-button>\n\t\t\t</section>\n\t\t</div>\n\t\t<div class="em-disabled-overlay" ng-if="object.selectionsApi.active"></div>\n\t</div>\n</div>\n'},2280:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(89),n(1061)],a=function(t,e,i){var a=null;function o(){if(a)return a.promise;a=e();n.e(92).then(function(){var e=[n(1774),n(2648),n(2650),n(2652),n(2654),n(2656),n(2657),n(2658),n(2660),n(2662),n(2664),n(2666),n(2668),n(2670),n(2672),n(2674),n(2676),n(2677)];(function(e,n,o,r,s,l,c,d,u,p,g,f,v,h,m,b,y,w){i.addComponent("checkbox",n);i.addComponent("text",o);i.addComponent("accordion",r);i.addComponent("items",s);i.addComponent("radio-list",l);i.addComponent("dimension-radio-list",c);i.addComponent("header",d);i.addComponent("hypercube-data",u);i.addComponent("slider",p);i.addComponent("switch",g);i.addComponent("sort",f);i.addComponent("item-selection-list",v);i.addComponent("color-scale",h);i.addComponent("icon-item",m);i.addComponent("layers",b);var S=t.getService("$templateCache");S.put("em-sorting-item.ng.html",y);S.put("em-data-item.ng.html",w);a.resolve()}).apply(null,e)}).catch(n.oe);return a.promise}function r(){return o()}return{loadComponents:r}}.apply(e,i),void 0!==a&&(t.exports=a))},2281:function(t,e,n){"use strict";var i,a;!(i=[n(48)],a=function(t){t.directive("emAccordion",function(){return{template:"<div ng-transclude></div>",transclude:true,scope:{emAccordion:"=",definition:"=",args:"="},controller:["$scope","$element","$timeout",function(t,e,n){this.init=function(i){if(i===t.emAccordion.length-1){e.accordion({header:".em-section-header",active:0,collapsible:true,heightStyle:"fill",animate:{easing:"swing",duration:200},beforeActivate:function t(e,n){n.newHeader&&n.newHeader.length&&n.newHeader.scope()&&(n.newHeader.scope().item.expanded=true);n.oldHeader&&n.oldHeader.length&&n.oldHeader.scope()&&(n.oldHeader.scope().item.expanded=false)}});t.$on("em-resize",function(){e.data("ui-accordion")&&e.accordion("refresh")});t.$on("headerschanged",function(){n(function(){e.data("ui-accordion")&&e.accordion("refresh")})})}}}]}});t.directive("emAccordionItem",function(){return{require:"^emAccordion",link:function t(e,n,i,a){a.init(e.$index)}}})}.apply(e,i),void 0!==a&&(t.exports=a))},2282:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(11),n(2283),n(236),n(95),n(128),n(181),n(1770)],a=function(t,e,n,i,a,o,r,s){function l(t,n,i){t.isDrag=true;var l=n[0].getBoundingClientRect();var c={left:l.left-1,right:l.right-1,top:l.bottom-46,bottom:l.bottom};var d={bottom:true};var u=s.removeRectOverlap(c).ignoreRect;c.bottom+=9;var p={targetRect:c,drawRect:c,prio:2,ignoreLines:d,enter:function e(){t.borderStyling={"border-color":"transparent"};t.$apply()},leave:function e(){t.borderStyling={};t.$apply()}};t.borderStyling={};t.$apply();n.addClass("active");function g(e){var n={isEmpty:true,pos:{row:0,col:0,rowspan:0,colspan:6}};return t.gridModel.extendSheet(50).then(function(t){var i=t[0];var a=t[1];var o=t[2];n.pos.rowspan=a-i;n.pos.row=a-n.pos.rowspan;n.pos.col=0;n.pos.colspan=o;n.pos.bounds=r.getBounds(n.pos,o,a);e&&(e.pos.bounds=r.recalculateBounds(e.pos,o,i,o,a));return n})}p.drop={libraryitem:function t(n,i){g().then(function(t){a.publish("/ui/library/addToSheet",{cell:t,item:n.item,event:i});e(".qvt-sheet").animate({scrollTop:e(".qvt-sheet").prop("scrollHeight")},1e3)})},gridcell:function t(n){g(n.cell).then(function(t){var i=t.pos;o.moveObject(n.cell.pos,i).then(function(){e(".qvt-sheet").animate({scrollTop:e(".qvt-sheet").prop("scrollHeight")},1e3)})})}};u||i.registerDropRect(p)}function c(t,n){n.isDrag=false;t.removeClass("active");e("#grid").animate({scrollBottom:e("#grid").offset().top},200)}t.directive("qvExtendSheetTarget",function(){return{restrict:"E",replace:true,scope:{gridModel:"="},template:n,link:function t(n,a){n.active=false;n.clickExpand=function(){n.gridModel.extendSheet(50);e(".qvt-sheet").animate({scrollTop:e(".qvt-sheet").prop("scrollHeight")},1e3)};var o={accept:{gridcell:function t(){return true},libraryitem:function t(){return true}},start:l.bind(null,n,a),end:c.bind(null,a,n)};i.registerDropTarget(o);n.$on("$destroy",function(){i.unregisterDropTarget(o)})}}})}.apply(e,i),void 0!==a&&(t.exports=a))},2283:function(t,e){t.exports='<div class="drop-target qv-animate extend-sheet-comp">\n\t<div ng-show="!isDrag">\n\t\t<lui-button ng-click="clickExpand()" tid="extend-sheet-button">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--expand-disclusure" ></span>\n\t\t\t<span class="lui-button__text" q-translation="Sheet.ExtendSheet"></span>\n\t\t</lui-button>\n\t</div>\n\t<div ng-show="isDrag" class="drag-overlay" ng-style="borderStyling">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--drop" ></span>\n\t\t\t<span class="lui-button__text" q-translation="Sheet.ExtendSheetDrop"></span>\n\t</div>\n</div>'},2284:function(t,e){t.exports='<div class="block-permission">\n    <div class="hint-content">\n        <p q-translation="Sheet.NoPermission"></p>\n        <button ng-if="sheetMode" class="lui-button" q-translation="Common.Duplicate" ng-click="duplicateSheet()"></button>\n    </div>\n</div>'},2285:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(2286),n(236)],a=function(t,e,n){function i(t,e,n){var i=e.parent(".qv-panel-sheet")[0].getBoundingClientRect();var a=2;var o={left:i.left+a,right:i.right-a,top:i.top+a,bottom:i.bottom-a};var r={targetRect:o};t.title="library.addtoODAGToolbar.drop.title";t.text="library.addtoODAGToolbar.drop";e.addClass("active");r.drop=function(){return};n.registerDropRect(r)}function a(t){t.removeClass("active")}t.directive("qvOdagLinkDropHelpTarget",function(){return{restrict:"E",replace:true,scope:{},template:e,link:function t(e,o){e.active=false;var r={accept:{odagLinkItem:function t(){return true}},start:i.bind(null,e,o),end:a.bind(null,o)};n.registerDropTarget(r);e.$on("$destroy",function(){n.unregisterDropTarget(r)})}}})}.apply(e,i),void 0!==a&&(t.exports=a))},2286:function(t,e){t.exports='<div class="odag-link-drop-target qv-animate">\n\t<div class="overlay-content">\n\t\t<div class="icon lui-icon lui-icon--sign-post"></div>\n\t\t<p class="title" q-translation="{{title}}"></p>\n\t\t<p q-translation="{{text}}"></p>\n\t</div>\n</div>\n'},322:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(48),n(429),n(224),n(430),n(478),n(479),n(480),n(481),n(482)],a=function(t,e,n,i,a,o,r,s,l,c){function d(t,e){t=t.toLowerCase()||"image";e=e.toLowerCase();var d=e+"-"+t;function u(){var t;switch(d){case"sheet-pdf":case"object-pdf":t=s;break;case"sheet-image":case"object-image":t=r;break;case"story-ppt":t=l;break;case"story-pdf":t=c;break;default:t=r}return t}var p={template:u(),controller:["$scope","$timeout",function(e,r){e.exportType=t;e.states=i.getStates();e.state=e.states.IDLE;var s={CurrentSize:"0",BestFitPreserveAspectRatio:"1",BestFitNoPreserveAspectRatio:"2"};e.print={fitCriteria:s.CurrentSize};if(e.input.object){var l=e.input.object.model.id;var c={id:l,model:e.input.object.model,options:{id:l,isVisible:true,isOnGrid:false,isZoomed:false}};e.obj=c}switch(d){case"sheet-pdf":case"object-pdf":case"story-pdf":e.sizes=a.sizes;e.layouts=a.layouts;e.selectedSize=e.sizes[1];e.print.dpi=200;e.selectedLayout=e.layouts[1];e.minDpi=72;e.maxDpi=300;r(function(){e.onPrintLayout(e.selectedLayout)});break;case"sheet-image":case"object-image":e.availableFormats=["Jpeg","Png"];e.print.width=e.input.currentWidth;e.print.height=e.input.currentHeight;e.print.dpi=e.input.currentDpi;e.print.format="Png";e.imageCustomSize=false;break;case"story-ppt":e.availablePptDpi=[96,150,220];e.print.dpi=e.availablePptDpi[2];e.print.currentWidth=e.input.currentWidth;e.print.currentHeight=e.input.currentHeight;e.print.currentDpi=e.input.currentDpi;e.formats=o.formats;e.selectedFormat=e.formats[3];r(function(){e.onPptFormatChange(e.selectedFormat)});break}var u=n.create(e);e.confirm=u.confirm;e.onImageCustomSize=u.onImageCustomSize;e.onSizeChange=u.onSizeChange;e.onPrintLayout=u.onPrintLayout;e.onPptFormatChange=u.onPptFormatChange}]};return p}function u(){var t=document.createElement("div");t.style.width="1in";var e=document.getElementsByTagName("body")[0];e.appendChild(t);var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("width");e.removeChild(t);var i=n&&Math.round(parseFloat(n));i=i||96;return i>300?300:i}function p(t,n,a,o,r,s){var l="Print."+n+".Title";var c=u();var p=d(n,a);var g=e.getService("luiDialog").show({controller:p.controller,template:p.template,input:{title:l,object:t,sourceType:"object",exportType:n,currentWidth:o,currentHeight:r,currentDpi:c}});g.closed.then(function(){i.cancel();s&&s()});return g}function g(n,a,o){var r="Print."+a+".Title";var s;s="story"===o.toLowerCase()?n&&n.inStoryPlayState()?t("#qv-storytelling .qv-story-slide-active"):t("#qv-storytelling .qv-grid-story"):n.model&&n.model.isCustomSize()?t("#grid"):t(".qvt-sheet > .sheet-grid");var l=Math.round(s.width()||960);var c=Math.round(s.height()||720);var p=u();var g=d(a,o);var f=e.getService("luiDialog").show({controller:g.controller,template:g.template,input:{title:r,object:n,exportType:a,currentWidth:l,currentHeight:c,currentDpi:p}});f.closed.then(function(){i.cancel()})}return{showForObject:p,showForGlobalMenu:g,getScreenDpi:u}}.apply(e,i),void 0!==a&&(t.exports=a))},376:function(t,e,n){"use strict";var i,a;!(i=[n(92),n(90),n(188),n(89)],a=function(t,e,n,i){var a;a=t.extend({init:function t(e){this._model=e},setModel:function t(e){this._model=e},saveSoftProperties:function t(a,o){if(!this._model)return i.resolve(false);var r=n.generate(a,o);e.extend(true,a,o);if(r&&r.length){r=r.map(function(t){return{qOp:t.op,qValue:JSON.stringify(t.value),qPath:t.path}});return this._model.applyPatches(r,true).then(function(){return true})}return i.resolve(false)},mergeSoftPatches:function t(){if(!this._model)return i.resolve();var e=this;return i.all({properties:this._model.getProperties(),effective:this._model.getEffectiveProperties()}).then(function(t){if(t.properties.qExtendsId)return;var i=n.generate(t.properties,t.effective);n.apply(t.properties,i);e._model.setProperties(t.properties).then(function(){e._model.clearSoftPatches()})})}});return a}.apply(e,i),void 0!==a&&(t.exports=a))},393:function(t,e,n){"use strict";var i,a;!(i=[n(10),n(48)],a=function(t,e){var n=document.createElement("textarea");n.style.position="absolute";n.style.left="-9999px";n.setAttribute("readonly","");function i(t){n.value=t;document.body.appendChild(n);n.select();n.setSelectionRange(0,n.value.length);document.execCommand("copy");document.body.removeChild(n)}e.service("qvCopy",["$window",function(e){var n=t.element(e.document.body);var i=t.element("<textarea/>");i.css({position:"fixed",opacity:"0"});return function(t){i.val(t);n.append(i);i[0].select();try{var e=document.execCommand("copy");if(!e)throw e}catch(e){window.prompt("Copy to clipboard: Ctrl+C, Enter",t)}i.remove()}}]);e.directive("qvClickCopy",["qvCopy",function(t){return{restrict:"A",link:function e(n,i,a){i.bind("click",function(){t(a.qvClickCopy)})}}}]);return{copyToClipboard:i}}.apply(e,i),void 0!==a&&(t.exports=a))},411:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=s(n(98));var a=s(n(988));var o=s(n(438));var r=s(n(1086));function s(t){return t&&t.__esModule?t:{default:t}}function l(){l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};return l.apply(this,arguments)}function c(t){return t.displayName||t.name||"Component"}function d(t){var e=function e(n){return i.default.createElement(a.default,null,function(e){return i.default.createElement(o.default,null,function(a){if(!a)return null;return i.default.createElement(r.default,null,function(o){return i.default.createElement(t,l({},n,{app:e,appLayout:a,urlParameters:o}))})})})};e.displayName="WithConsumers(".concat(c(t),")");return e}var u=d;e.default=u;t.exports=e.default},429:function(t,e,n){"use strict";var i,a;!(i=[n(11),n(224)],a=function(t,e){function n(n){function i(t){n.imageCustomSize=t}function a(t){n.selectedSize=t}function o(t){if(!t||!t.orientation)return;n.selectedLayout=t;n.sizes.forEach(function(e){e.setLabel(t.orientation)})}function r(t){n.export=t;n.print.format=t.format}function s(t){var e=l();if(t.isCustom){n.print.width=Math.round(e.width);n.print.height=Math.round(e.height);return}var i=t.toPixels(e.width);n.print.width=i.w;n.print.height=i.h}function l(){return{width:t("#qv-story-play").is(":visible")?t("#qv-story-play").find(".qv-story-play-slide").first().width():n.input.currentWidth,height:t("#qv-story-play").is(":visible")?t("#qv-story-play").find(".qv-story-play-slide").first().height():n.input.currentHeight,dpi:n.input.currentDpi}}function c(t){if(n.obj&&n.input.object){var i,a,o,r,s;n.print.width<8&&(n.print.width=8);n.print.height<8&&(n.print.height=8);n.print.dpi<n.minDpi&&(n.print.dpi=n.minDpi);n.print.dpi>n.maxDpi&&(n.print.dpi=n.maxDpi);var c=Math.round(n.print.width),p=Math.round(n.print.height);var g=l();s={width:Math.round(g.width),height:Math.round(g.height),dpi:g.dpi};var f=n.imageCustomSize?{width:n.print.width,height:n.print.height,dpi:n.print.dpi}:{width:n.input.currentWidth,height:n.input.currentHeight,dpi:n.input.currentDpi};a={width:Math.round(f.width*(n.input.currentDpi/f.dpi)),height:Math.round(f.height*(n.input.currentDpi/f.dpi))};"image"===t&&(i={imageType:n.print.format,captureSize:f});if("pdf"===t){o=n.selectedSize.toMillimeters();r={right:10,left:10,top:10,bottom:10};i={width:o["portrait"===n.selectedLayout.orientation?"w":"h"],height:o["portrait"===n.selectedLayout.orientation?"h":"w"],dpi:n.print.dpi,fitCriteria:n.print.fitCriteria,margin:r,sourceSize:s}}"ppt"===t&&(i={width:c,height:p,dpi:n.print.dpi,sourceSize:s});n.state=n.states.PENDING;return e.printTree(n.input.object,s,a,i,t).then(function(e){d(e,t)},u)}n.destroyComponent()}function d(t,e){n.printUrl=t.qUrl;n.printFileName=t.fileName;var i=e.charAt(0).toUpperCase()+e.slice(1);n.printUrlTranslationKey="Print."+i+".CompletedLink";n.state=n.states.COMPLETED}function u(t){n.statusCode=t.httpStatusCode;var e=t&&t.status;switch(e){case n.states.CANCELED:case n.states.TIMEOUT:n.state=e;break;default:n.state=n.states.FAILED;break}}return{onImageCustomSize:i,onSizeChange:a,onPrintLayout:o,onFormatChange:r,confirm:c,onPptFormatChange:s}}return{create:n}}.apply(e,i),void 0!==a&&(t.exports=a))},430:function(t,e,n){"use strict";var i,a;!(i=[n(91)],a=function(t){var e="landscape";var n={w:33.1,h:46.8};var i=function t(e,n,i){this.name=e;this.unit=i||"in";this.dimensions=n};i.prototype={toPixels:function t(e){var n,i,a=0;switch(this.unit){case"in":a=e;break;case"pi":a=1;break;case"cm":a=.393701*e;break}n=this.dimensions.w*a;i=this.dimensions.h*a;return{w:Math.round(n),h:Math.round(i)}},toMillimeters:function t(){var e,n,i=0;switch(this.unit){case"in":i=1/.0393701;break;case"cm":i=10;break}e=this.dimensions.w*i;n=this.dimensions.h*i;return{w:Math.floor(e),h:Math.floor(n)}},setLabel:function e(n){var i=this;var a;var o=t.localeDetected&&"en"===t.localeDetected.substring(0,2);var r=o?i.dimensions:i.toMillimeters();var s=r["portrait"===n?"w":"h"],l=r["portrait"===n?"h":"w"];"Print.PaperSize.Letter"===i.name&&(i.name=t.get(i.name));a=o?" ("+s+'" x '+l+'")':" ("+s+" mm x "+l+" mm)";i.label=i.name+a}};function a(t,e){var n,i;if(t<e){n=t;i=e/2}else{n=t/2;i=e}return{w:n>i?i:n,h:i>n?i:n}}var o=[new i("A0",{w:n.w,h:n.h})];for(var r=1;r<8;r++)o.push(new i("A"+r,a(o[r-1].dimensions.w,o[r-1].dimensions.h)));o.push(new i("Print.PaperSize.Letter",{w:8.5,h:11}));for(var s=0;s<3;s++)o.shift();o.forEach(function(t){t.setLabel(e)});var l=[{orientation:"portrait",translationKey:"Print.Portrait"},{orientation:"landscape",translationKey:"Print.Landscape"}];l.forEach(function(e){t.ready.then(function(){e.label=t.get(e.translationKey)})});var c=[{type:"pdf",format:"pdf",label:"PDF"},{type:"image",format:"png",label:"PNG"},{type:"image",format:"jpeg",label:"JPEG"}];return{sizes:o,layouts:l,outputs:c}}.apply(e,i),void 0!==a&&(t.exports=a))},432:function(t,e,n){"use strict";var i,a;!(i=[n(48),n(1544),n(224),n(49),n(1545),n(93),n(89)],a=function(t,e,n,i,a,o,r){function s(){return i.getFlag("DOWNLOAD_USE_REPORTING")}function l(){return i.getFlag("DOWNLOAD_OBJECT")}function c(){return i.getFlag("DOWNLOAD_DATA_OBJECT")}function d(t,a,s,l,c,d,u){if(i.getFlag("DOWNLOAD_USE_REPORTING")){var p=u?r.resolve(u):o.getApp();return p.then(function(n){return n.global.getConfiguration().then(function(t){return t.qFeatures.qAutoSave&&n.layout.permissions.update?n.doSave():void 0}).then(function(){return e.download(t,a,s,d)})})}if("data"===s){var g=t.model;var f=t.ext.options.hyperCubePath||"";return g.exportData(null,f,g.layout.title||null)}return n.printTree(t,l,c,a,s)}function u(){i.getFlag("DOWNLOAD_USE_REPORTING")?e.cancelAll():n.cancel()}function p(){return i.getFlag("DOWNLOAD_USE_REPORTING")?e.getStates():n.getStates()}function g(e){var n=new Promise(function(n,a){if(i.getFlag("DOWNLOAD_USE_REPORTING"))n(e);else{var o=t.getService("$http");o({url:e,method:"GET",responseType:"blob"}).then(function(t){if("application/pdf"===t.data.type){var e=URL.createObjectURL(t.data);n(e)}else a("Url doesn't return pdf blob")},function(t){a(t)})}});return n}function f(e,n,i,o){var r=t.getService("$http");r({url:e,method:"GET",responseType:"blob"}).then(function(t){var e=n?n+"."+i:void 0;a.saveAs(t.data,e)},o)}return{requestDownload:d,cancel:u,getStates:p,getPdfEmbedUrl:g,downloadFile:f,getUsingReportingService:s,getDownloadObjectDataFlag:c,getDownloadObjectFlag:l}}.apply(e,i),void 0!==a&&(t.exports=a))},478:function(t,e,n){"use strict";var i,a;!(i=[n(91)],a=function(t){var e=[],n=[{tid:"Print.Ppt.Format.Standard",w:4,h:3},{tid:"Print.Ppt.Format.Widescreen",w:16,h:9},{tid:"Print.Ppt.Format.Widescreen",w:16,h:10},{tid:"Print.Ppt.Format.Custom"}];var i=function t(e,n){this.ratio=e||{};this.isCustom=n||false};i.prototype={toPixels:function t(e){var n=parseInt(e)||960;var i=n/this.ratio.w*this.ratio.h;return{w:Math.round(n),h:Math.round(i)}},setLabel:function e(){var n=this;t.ready.then(function(){var e=t.get(n.ratio.tid);n.label=e;n.ratio.w&&n.ratio.h&&(n.label+=" "+n.ratio.w+":"+n.ratio.h)})}};var a=n.length;for(var o=0;o<a;o++){var r=new i(n[o]);3===o&&(r.isCustom=true);e.push(r)}e.forEach(function(t){t.setLabel("portrait")});return{formats:e}}.apply(e,i),void 0!==a&&(t.exports=a))},479:function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-image-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button" tid="print-current-size" ng-class="{ \'lui-active\': ! imageCustomSize }" q-translation="Print.Image.CurrentSize" ng-click="onImageCustomSize(false)" ng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button" tid="print-custom-size"  ng-class="{ \'lui-active\': imageCustomSize }" q-translation="Common.Custom" ng-click="onImageCustomSize(true)" ng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="! imageCustomSize">\n\t\t\t{{input.currentWidth}} x {{input.currentHeight}} px @ 96 dpi</span>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-width"\n\t\t\t\t\t\tqui-model="print.width" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-height"\n\t\t\t\t\t\tqui-model="print.height" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-dpi"\n\t\t\t\t\t\tqui-model="print.dpi" qui-disabled="state === states.PENDING" qui-min="0" qui-max="300" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Format"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\t\tx-model="print.format"\n\t\t\t\t\t\t\tx-options="f as f for f in availableFormats"\n\t\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\t\ttid="print-image-selected-format"></lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-if="!usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink"></a>\n\t\t\t\t<a ng-if="usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink" download="{{printFileName}}"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},480:function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="{{minDpi}}"\n\t\t\t\t\t\tqui-max="{{maxDpi}}"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},481:function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-ppt-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.Format"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\ttid="print-ppt-selected-size"\n\t\t\t\t\tx-model="selectedFormat"\n\t\t\t\t\tx-options="f.label for f in formats"\n\t\t\t\t\tx-change="onPptFormatChange(selectedFormat)">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-width"\n\t\t\t\tqui-model="print.width" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-height"\n\t\t\t\tqui-model="print.height" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-ppt-dpi">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-ppt-dpi"\n\t\t\t\t\t\tx-model="print.dpi"\n\t\t\t\t\t\tx-options="d as d for d in availablePptDpi">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t{{print.width}} x {{print.height}} px @ {{print.dpi}} dpi\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.CurrentSlideSize"></div>\n\t\t\t<p>\n\t\t\t{{print.currentWidth}} x {{print.currentHeight}} px @ {{print.currentDpi}} dpi\n\t\t\t</p>\n\t\t</div>\n\t\t--\x3e\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Ppt.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},482:function(t,e){t.exports='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="0"\n\t\t\t\t\t\tqui-max="300"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},486:function(t,e,n){"use strict";var i,a;!(i=[n(200),n(104)],a=function(t){function e(e,a,c){var d=e.length>0?e[0].positions:[],u=a._style,p=a._radialOptions,g=new t,f=u.ticks.major.length*c,v=u.label.offset*c*20,h,m,b="far"===a.getAlignment()?"left":"right",y=[],w=Math.min(a.rect.height,a.rect.width),S=0,x,C,D,E,q=[],k=a._radius,P;m="left"===b?1:-1;f*=m;h=m>0?0:a.rect.width;a.getShowLine()&&y.push({stroke:u.line.color,shape:{cx:a._centerPoint.x,cy:a._centerPoint.y,radius:k,radianOffset:0,start:p.start,end:p.end},type:"arc"});if(a.getShowLabels())for(P=0;P<d.length;P++){x=(d[P]-S)/(w-S);D=r(x,a);E=s(D);E.r=E.r+v;E=l(E,a._centerPoint);C=o(x,a);E.angle=C;q.push(E);g.save();g.translate(D.x+a._centerPoint.x,D.y+a._centerPoint.y);g.rotate(C);y.push({stroke:u.ticks.major.color,opacity:a.ticks[P].opacity,transform:g.elements,shape:{x1:0,x2:-f,y1:0,y2:0},type:"line"});g.restore()}h+=u.ticks.major.length*m;if(a._showLabels&&a._layoutMode>1)for(P=0;P<e.length;P++){y=y.concat(n(e[P],q,h,a));h+=e[P].labelSpace*m}a._showTitle&&a._layoutMode>1&&(y=y.concat(i(a,u)));a._renderer.shapes=y;a._renderer.render()}function n(t,e,n,i){var a=t.labels,o=e,r=t.opacities,s,l,c=[],d=i._style,u,p,g,f,v,h,m;p=a?a.length:0;if(0===p)return;g=p-1;for(h=0;h<p;h++){f=i.yMirrorMode?a[g-h]:a[h];s=i._renderer.getTextWidth(f,d.label.font);v=o[h];u=v.angle;l=u-.1<3*Math.PI/2&&u+.1>3*Math.PI/2?"center":u<Math.PI/2||u>3*Math.PI/2?"left":"right";c.push({type:"text",fill:d.label.color,opacity:r?r[h]:1,shape:{text:f,x:v.x,y:v.y,maxWidth:v.x-s<0?v.x:v.x+s>i.rect.width?i.rect.width-v.x:s,height:m,maxNumLines:1,font:d.label.font,align:l,baseline:"middle"}})}return c}function i(t,e){var n=[],i=Math.min(t.rect.width,t.rect.height),o=a(t);n.push({type:"text",fill:e.title.color,opacity:1,shape:{text:t._title,x:o.x,y:o.y+i*(.06+Math.min(i-300,0)/-300*.04),maxWidth:1.4*t._radius,maxNumLines:1,font:e.title.font,align:"center",baseline:"middle"}});return n}function a(t){var e={x:t.rect.width/2,y:t.rect.height/2};return e}function o(t,e){var n=e._radialOptions,i=Math.max(Math.min(t,1),0)*(n.end-n.start)+n.start;return i}function r(t,e,n){var i=e._radialOptions,a=t*(i.end-i.start)+i.start,o=e._radius;return l({a:a,r:o},n)}function s(t){return{r:Math.sqrt(t.x*t.x+t.y*t.y),a:Math.atan2(t.y,t.x)}}function l(t,e){e||(e={x:0,y:0});return{x:e.x+t.r*Math.cos(t.a),y:e.y+t.r*Math.sin(t.a)}}return{renderRadial:e,getPointOfValue:r,getPolPos:s,getCartPos:l,getAngleOfNormalizedValue:o}}.apply(e,i),void 0!==a&&(t.exports=a))}}]);