/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[89],{1033:function(t,e,i){"use strict";var n,o;!(n=[i(307),i(293),i(109)],o=function(t,e,i){var n;n=t.extend("SelectionHighlightLayer",{init:function t(){this._super.apply(this,arguments);this.ranges=[];this.color=i.toRGBA("#52cc52",.2)},setRanges:function t(e){this.ranges=e},update:function t(i){var n=this.ranges.map(function(t){var n=i.getPositionOfValue(t.min);var o=i.getPositionOfValue(t.max);var a=new e(n,0,o-n,this.rect.height);a.fill=this.color;return a},this);this.renderer.stage.removeChildren();if(n.length){this.renderer.stage.addChildren(n);this.show()}else this.hide()}});return n}.apply(e,n),void 0!==o&&(t.exports=o))},1052:function(t,e,i){"use strict";var n,o;!(n=[i(292),i(1253),i(1254),i(1255)],o=function(t,e,i,n){var o;o=t.extend("LineObject",{init:function t(o,a){this._super();this.data.label=o.info.label;if(a.showArea){this._areaLayer=new n;this.addChild(this._areaLayer)}this._lineLayer=new i;this.addChild(this._lineLayer);this._pointLayer=new e("circle");this.addChild(this._pointLayer)},update:function t(e){this._pointLayer.update(e);this._lineLayer.update(e);this.visible=this._pointLayer.visible||this._lineLayer.visible;if(this._areaLayer){this._areaLayer.update(e,this._lineLayer.children);this._areaLayer.visible&&(this.visible=true)}},getLinesInRange:function e(i,n,o){var a=new t;var s=this._lineLayer.getLineInRange(i,n);if(this._areaLayer){var r=this._areaLayer.getAreaFromSegments(s.children);a.addChildren([r])}a.addChildren([s]);a.addChildren(this._pointLayer.getFromRange(i,n,o));return a}});return o}.apply(e,n),void 0!==o&&(t.exports=o))},1166:function(t,e,i){"use strict";var n,o;!(n=[i(180),i(1233),i(1235),i(109),i(104),i(292),i(278),i(293),i(100),i(89),i(1033),i(1236)],o=function(t,e,i,n,o,a,s,r,l,c,d){var u,f="stacked",h="grouped";var p=document.createElement("canvas"),g=p.getContext("2d");function y(t){var e=1;p.width=5*e;p.height=5*e;g.save();g.fillStyle=n.toRGBA(t,.8);g.scale(e,e);g.fillRect(0,0,1,1);g.fillRect(0,1,1,1);g.fillRect(1,0,1,1);g.fillRect(4,1,1,1);g.fillRect(4,2,1,1);g.fillRect(3,2,1,1);g.fillRect(3,3,1,1);g.fillRect(2,3,1,1);g.fillRect(2,4,1,1);g.fillRect(1,4,1,1);g.restore();return g.createPattern(p,"repeat")}u=t.extend("BarArea",{init:function t(){this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._shapes=[];this._barData=[];this._showDataPoints=true;this._colorMap=null;this._groupingMode=h;this._globalAlpha=1;this._styleService=l.initializeService("object.barChart");this._edgeBleed=0;this._barLayer=new e(this.container);this._barLayer.isMini=this.isMini;this.layers=[this._barLayer];if(this.isMini){this._rangeSelectionLayer=new d(this.container);this.layers.push(this._rangeSelectionLayer)}else{this._labelLayer=new i(this.container);this.layers.push(this._labelLayer)}},setYMirrorMode:function t(e){this._super(e);this._labelLayer&&this._labelLayer.setYMirrorMode(e)},beforeBarsAddedToRenderer:function t(){},barsAddedToRenderer:function t(){},labelAddedToRenderer:function t(){},afterPaint:function t(){return c.resolve()},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},setShowDataPoints:function t(e){this._showDataPoints=e;this.invalidateDisplay("BarArea.setShowDataPoints")},getShowDataPoints:function t(){return this._showDataPoints},getMeasureIndices:function t(){return this._measureIndices},setMeasureIndices:function t(e){this._measureIndices=e},setMajorAxis:function t(e){this._majorAxis=e;this._majorAxis.listen("changed",function(){this.invalidateDisplay("BarArea.setMajorAxis")},this)},setMinorAxis:function t(e){this._minorAxis=e;this._minorAxis.listen("changed",function(){this._localFormatting&&(this._areLabelsFormatted=false);this.invalidateDisplay("BarArea.setMinorAxis")},this)},setTimeAxis:function t(e){this.timeAxis=e;this.timeAxis.listen("changed",function(){this.invalidateDisplay()},this)},setContinuousAxis:function t(e){this.continuousAxis=e;this.continuousAxis.listen("changed",function(){this.invalidateDisplay()},this)},setActiveDimensionAxis:function t(e){this._activeDimAxis=e},setIsDimensionContinuous:function t(e){this.isDimensionContinuous=e;this._edgeBleed=this.isDimensionContinuous?5:0},setDimensionTree:function t(e){this._tree=e},setGroupingMode:function t(e){this._groupingMode=e},_updateSize:function t(){this.invalidateDisplay("BarArea._updateSize")},insertAdjacentTo:function t(e,i){this._super(e,i);if(this._minorAxis&&this._minorAxis.isHorizontal())switch(this._minorAxis.dock){case"bottom":this.rect.height-=1;break}},getMajorAxisData:function t(){return this._majorAxisData},getMinorAxisData:function t(){return this._minorAxisData},setCacheItems:function t(e){this._cacheItems=e},getCacheItems:function t(){return this._cacheItems},createAxisData:function t(e,i,n,o){if(!o){this._cacheIndex=0;this._outerCacheIndex=0}var a=i.stackLevel===o+1,s,r=e.children,l=i.numLevels-i.numMeasures;"measure"===i.types[o]&&this._measureIndices&&(r=r.filter(function(t,e){return this._measureIndices.indexOf(e)>=0},this));return r.map(function(t){var e;if("dimension"===i.types[o]){e={label:t.data.qText,group:"dimension"===i.types[o+1]||"measure"===i.types[o+1]&&i.numMeasures>1,id:t.data.id,cacheIndex:[]};if("measure"===i.types[o+1])for(s=0;s<i.numMeasures;s++)e.cacheIndex.push(this._cacheIndex++);else l>1&&0===o&&t.children.forEach(function(t){if(t.children[0].isBranch){-2!==t.data.qElemNo&&e.cacheIndex.push(this._outerCacheIndex);this._outerCacheIndex++}},this);!a&&("dimension"===i.types[o+1]||"measure"===i.types[o+1]&&i.numMeasures>1)&&(e.children=this.createAxisData(t,i,n,o+1))}else"measure"===i.types[o]&&(e={label:t.data.qText,id:t.data.id});return e},this)},_createMeasureDisplayNode:function t(e,i){if(!e.isBranch)return;var n=true===this.isMini||this._isStacked?new r:new s,a=e.children,l=a[0].data,c=e.parent.cacheItem,d=new o(0,0,0,0),u=this.measureFormatters[i],f="undefined"!==typeof l.qValue?l.qValue:l.qNum,h=e.ancestors.filter(function(t){return"qElemNo"in t.data}).map(function(t){return t.data.qElemNo}).reverse();n.data={qText:e.data.qText,measureIndex:i,value:f,start:0,end:f,valueLabel:e.children[0].data.qText,formatted:!u||"U"!==u.type,hitRect:d,cacheItem:c,color:this._colorMap.getColor(h,f,i,e.data.rowIndex)};c.addShape("dataArea",d,true);c.calculateTooltipPosition=true;n.data.fill=n.data.color.toRGBA();n.fill=n.data.fill;n.data.isFillColorDark=n.data.color.isDark();return n},_createDimensionDisplayNode:function t(e){var i=new a;i.data={qText:e.data.qText,qElemNo:e.data.qElemNo,qMaxPos:e.data.qMaxPos,qMinNeg:e.data.qMinNeg,qType:e.data.qType};return i},_createStackNode:function t(){var e=new a;e.data={stack:true};return e},_createOtherNode:function t(e,i){var n=new r,a=new o(0,0,0,0),s=this.measureFormatters[0];n.data={measureIndex:0,value:i-e,start:e,end:i,isFakeOtherCell:true,highlightOnGroupSelect:0===this._selectionIndices[0],valueLabel:"valueLabel",formatted:!s||"U"!==s.type,hitRect:a,cacheItem:{},color:this._colorMap.getColor([-3],i-e,0,0)};n.data.fill=n.data.color.toRGBA();n.fill=n.data.fill;n.data.isFillColorDark=n.data.color.isDark();return n},_addOtherNode:function t(e,i,n){var o=this._createDimensionDisplayNode({data:{qMaxPos:0,qMinNeg:0,qElemNo:-3,qType:"O"}}),a=this._createOtherNode(e.data.sum,i);a.data.axisId=n.data.id;a.data.cacheItem=n.cacheItem;o.addChild(a);e.data.sum=i;e.addChild(o);return a},_stackNodes:function t(e,i,n,o){var a,s,r,l=this._createStackNode(),c=this._createStackNode(),d=false,u=false,f,h,p=0,g=0;l.data.isStack=true;c.data.isStack=true;e.forEach(function(t){a=i;r=t.children&&t.children[0]?t.children[0].data:t.data;if(r.value>=0){a=l;r.start=p;p+=r.value;r.end=p;s=p;f=true;a.addChild(t);"O"===t.data.qType&&(d=true)}else if(!Number.isNaN(+r.value)){a=c;r.start=g;g+=r.value;r.end=g;s=g;h=true;a.addChild(t);"O"===t.data.qType&&(u=true)}a.data.sum=s});if("undefined"!==typeof i.data.qMaxPos&&!d&&p!==i.data.qMaxPos){o.push(this._addOtherNode(l,i.data.qMaxPos,n));p=l.data.sum;f=p>0}if("undefined"!==typeof i.data.qMinNeg&&!u&&g!==i.data.qMinNeg){o.push(this._addOtherNode(c,i.data.qMinNeg,n));g=c.data.sum;h=g<0}if(f){l.data.valueLabel=this.combinedMeasuresFormatter?this.combinedMeasuresFormatter.formatValue(l.data.sum):l.data.sum+"";i.addChild(l)}if(h){c.data.valueLabel=this.combinedMeasuresFormatter?this.combinedMeasuresFormatter.formatValue(c.data.sum):c.data.sum+"";i.addChild(c)}i.data.sum={positive:p,negative:g}},getRenderTree:function t(e,i,n,o){var a=i.stackLevel===o+1,s=[],r,l,c,d,u,f,h;c=e.children;"measure"===i.types[o]&&this._measureIndices&&(c=c.filter(function(t,e){return this._measureIndices.indexOf(e)>=0},this));u=c.length;for(d=0;d<u;d++){h=c[d];if("dimension"===i.types[o]){f=this._createDimensionDisplayNode(h);l=this.getRenderTree(h,i,n,o+1);if(a){this._stackNodes(l,f,h,n.otherShapes);n.globalPositiveSum=Math.max(n.globalPositiveSum,f.data.sum.positive);n.globalNegativeSum=Math.min(n.globalNegativeSum,f.data.sum.negative)}else f.addChildren(l);f.isBranch&&s.push(f)}else if("measure"===i.types[o]){f=this._createMeasureDisplayNode(h,this._measureIndices?this._measureIndices[d]:d);if(!f)continue;r=h;i.numMeasures<=1&&(r=r.parent);i.stackLevel===o&&(r=r.parent);f.data.axisId=r.data.id;f.data.axisNum=1===o?r.data.qNum:r._parent.data.qNum;n.shapes.push(f);s.push(f)}}return s},_applyIds:function t(e,i,n,o){var a;e.children.forEach(function(t,s){a=e.data.id?e.data.id+";"||false:"";if("dimension"===n[o]){t.data.id=a+i[o]+":"+t.data.qElemNo;this._applyIds(t,i,n,o+1)}else"measure"===n[o]&&(t.data.id=a+i[o+s])}.bind(this))},renderRangeSelections:function t(){this._rangeSelectionLayer.update(this._activeDimAxis);return this._rangeSelectionLayer.render()},updateRangeSelection:function t(e){if(this._rangeSelectionLayer){this._rangeSelectionLayer.setRanges(e);this.renderRangeSelections()}this.isMini||(this._barLayer.selectedRanges=e)},_updateProperties:function t(){if(!this._data||!this._tree)return;this._barLayer.renderer.stage.removeChildren();var e=this._data.qHyperCube.qDimensionInfo.length,i=this._measureIndices?this._measureIndices.length:this._data.qHyperCube.qMeasureInfo.length,n=this._groupingMode===f&&(e>1||i>1),o=e+1,a=-2,s=[],r=new Array(e).join(",").split(",").map(function(){return"dimension"}),l=this._data.qHyperCube.qDimensionInfo.concat(this._data.qHyperCube.qMeasureInfo).map(function(t){return t.cId}),c=this._data.qHyperCube.qDimensionInfo.map(function(t){return t.qApprMaxGlyphCount});r.push("measure");c.push(this._data.qHyperCube.qMeasureInfo.reduce(function(t,e){return Math.max(t,e.qApprMaxGlyphCount)},0));if(n)a=i>1?e:e-1;else if(e>1){var d=this._data.qHyperCube.qDimensionInfo[0].qStateCounts.qOption+this._data.qHyperCube.qDimensionInfo[0].qStateCounts.qSelected;var u=this._data.qHyperCube.qSize.qcy/d;s.push(u);s.push(i)}else{s.push(i);s.push(1)}this._isStacked=n;var h={columns:[],shapes:[],shapesToLabel:[],otherShapes:[],globalPositiveSum:0,globalNegativeSum:0};var p={colIds:l,types:r,numLevels:o,numMeasures:i,stackLevel:a};if(e>1&&this._allowInnerSelection&&!this._data.qHyperCube.qDimensionInfo[1].qLocked){this.setSelectionIndices([1]);this._majorAxis.setSelectionIndices([1]);this._majorAxis.setCurrentDataIndices([1])}else{this.setSelectionIndices([0]);this._majorAxis.setSelectionIndices([0]);this._majorAxis.setCurrentDataIndices([0])}this._applyIds(this._tree,l,r,0);var g=this.getRenderTree(this._tree,p,h,0);this._objects=g;this._formatted=this._isStacked||this.measureFormatters.every(function(t,e){var i=!this._measureIndices||this._measureIndices.indexOf(e)>=0;return!i||t&&"U"!==t.type},this);this._shapes=h.shapes;var y=h.shapes.map(function(t){return t.data.cacheItem});this._shapes=this._shapes.concat(h.otherShapes);g.forEach(function(t){this._barLayer.renderer.stage.addChild(t)}.bind(this));var v=this.createAxisData(this._tree,p,h,0);var m=r.map(function(t,e){return{qApprMaxGlyphCount:c[e],show:e<r.length-1,groupSize:s[e]}});this._majorAxisData={data:v,info:m};this._numDimensions=e;this._numMeasures=i;this._minorAxisData=n?{min:h.globalNegativeSum,max:h.globalPositiveSum}:null;this.setSelectableShapes(y)},hasValidData:function t(){return this._super()&&this._majorAxis&&this._minorAxis&&this._data&&this._tree&&(this._data.qHyperCube.qStackedDataPages.length>0||this._data.qHyperCube.qDataPages.length>0)},updateSize:function t(){this._super();this.layers.forEach(function(t){t.rect=this.rect;t.renderer.setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y);t.renderer.setDimensions(0,0,this.rect.width,this.rect.height)},this)},paint:function t(){this._super(this._layoutMode,this._data);this._majorAxis.updateNow();this._minorAxis.updateNow();this._activeDimAxis&&this._activeDimAxis.updateNow();var e=this._minorAxis.getPadding(),i=new o,n=this;this._style=v(this._styleService);i.set(e.left,e.top,this.rect.width-e.left-e.right,this.rect.height-e.top-e.bottom);this.layers.forEach(function(t){t.minorAxis=this._minorAxis;t.majorAxis=this.isDimensionContinuous?this._activeDimAxis:this._majorAxis;t.isNumeric=this.isDimensionContinuous;t.shapes=this._shapes;t.othersFillPattern=y(this._colorMap.getColor([-3]));t.groupingMode=this._groupingMode;t.widthRatio=this._numDimensions<=1&&this._numMeasures<=1||this._groupingMode===f?.7:.95;t.isSpikingEnabled=!this.isMini&&!(this._groupingMode===f&&(this._numDimensions>1||this._numMeasures>1));t.isHintingEnabled=!this.isMini&&(this._groupingMode===h||this._groupingMode===f&&this._numDimensions+this._numMeasures<=2);t.style=this._style;t._globalAlpha=this._globalAlpha},this);this._barLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0};this._barLayer.colorMap=this._colorMap;this._barLayer.update();this.nodesInView=this._barLayer.nodesInView;this.barsAddedToRenderer();if(this._labelLayer){this._labelLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0};this._labelLayer.setShapes(this._objects);this._labelLayer.bounds=i;this._labelLayer._longestLabel=20;if(this._layoutMode>this.ShowFlags.XSMALL&&this._showDataPoints){this._formatLabels();this._labelLayer.show();this._labelLayer.render()}else this._labelLayer.hide()}var a=[this._barLayer.render()];this._rangeSelectionLayer&&a.push(this.renderRangeSelections());return c.all(a).then(function(){return n.afterPaint()})},_formatLabels:function t(){if(this._isStacked||this._formatted)return;var e,i,n=this.nodesInView?this.nodesInView.length:0;for(e=0;e<n;e++){i=this.nodesInView[e].data;if(!i.formatted){i.formatted=true;i.valueLabel=this.measureFormatters[i.measureIndex]?this.measureFormatters[i.measureIndex].formatValue(i.value):i.valueLabel}}},preRelevantSizeCalculation:function t(){this.perpendicularlyRelevantSpacing={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0}},clear:function t(){this._super();this.layers.forEach(function(t){t.clear()})},release:function t(){this.layers.forEach(function(t){t.release()});this._super();this._majorAxis&&this._majorAxis.stopListen("changed",null,this);this._minorAxis&&this._minorAxis.stopListen("changed",null,this);this.timeAxis&&this.timeAxis.stopListen("changed",null,this);this.continuousAxis&&this.continuousAxis.stopListen("changed",null,this)}});function v(t){return{shape:{selected:{border:{color:"#333333",width:2}},outOfRange:{color:t.getStyle("outOfRange","color")}},dataPoints:{label:{font:"normal "+t.getStyle("label.value","fontSize")+" 'QlikView Sans'",color:t.getStyle("label.value","color"),dark:{color:"#595959"},light:{color:"#E6E6E6"}},backgroundColor:t.getStyle("","backgroundColor")},backgroundColor:t.getStyle("","backgroundColor")}}return u}.apply(e,n),void 0!==o&&(t.exports=o))},1176:function(t,e,i){"use strict";var n,o;!(n=[i(180),i(1167),i(1251),i(1252),i(1177),i(1256),i(1257),i(1033),i(100),i(89)],o=function(t,e,i,n,o,a,s,r,l,c){var d,u={LINE:"line",AREA:"area",STACKED:"stackedArea"},f={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function h(t){return!!t}function p(t,e){var i=Object.keys(t);var n=i.length;var o=i.map(function(e){return t[e].points});var a=Math.max.apply(null,o.map(function(t){return t.length}));var s;for(var r=0;r<a;++r){var l=false;var c=false;for(s=0;s<n;++s){l=l||o[s][r];c=c||!o[s][r]}if(!l||!c)continue;for(s=0;s<n;++s)o[s][r]||(o[s][r]={idx:l.idx,dimValue:l.dimValue,measureIdx:l.measureIdx,aggregated:{start:0,end:0},hasLeftNeighbour:!!o[s][r-1]&&!o[s][r-1].isNaN,hasRightNeighbour:!!o[s][r+1]&&!o[s][r+1].isNaN,isNaN:!e,value:e?0:NaN,text:e?"0":"",hidePoint:true,color:null,label:""})}}function g(t){var e,i,n,o,a,s=t?t.length:0;for(e=0;e<s;e++){a=t[e];if(a&&!a.hasRightNeighbour){for(i=e+1;i<s;i++)if(t[i]&&!t[i].isNaN){a.nearestRightNeighbour=i;break}if(!a.isNaN){if(!Number.isNaN(+a.nearestRightNeighbour)){o=i-e;for(n=1;n<o;n++)if(t[e+n]){t[e+n].nearestRightNeighbour=a.nearestRightNeighbour;t[e+n].nearestLeftNeighbour=e}}e=i-1}}}}function y(t){var e,i,n,o,a,s,r,l,c,d=t?t.length:0,u=this.isDimensionContinuous;for(e=0;e<d;e++){c=t[e];if(c&&!c.hasRightNeighbour&&!c.isNaN&&!Number.isNaN(+c.nearestRightNeighbour)){i=c.nearestRightNeighbour;a=c.value;s=t[i].value;l=i-e;r=u?t[i].dimValue-c.dimValue:i-e;for(n=1;n<l;n++){o=(u?t[e+n].dimValue-c.dimValue:n)/r;t[e+n]&&(t[e+n].interpolatedValue=a*(1-o)+s*o)}}}}function v(t,e){var i,n=[],o,a,s,r,l=t?t.length:0;for(i=0;i<l;i++){o=t[i].points;Object.keys(o).forEach(function(t){var i=false;r=o[t].idx;n[r]||(n[r]={pos:0,neg:0,total:0});s=o[t];if(!s)return;a=s.isNaN?Number.isNaN(+s.interpolatedValue)?0:s.interpolatedValue:s.value;if(!Number.isNaN(+a)){if(e){0===a?s.hasLeftNeighbour&&o[t-1]?i=o[t-1].aggregated.end<0:s.hasRightNeighbour&&o[t+1]&&(i=o[t+1].aggregated.end<0):i=a<0;if(i){s.aggregated.start=n[r].neg;n[r].neg+=a;s.aggregated.end=n[r].neg}else{s.aggregated.start=n[r].pos;n[r].pos+=a;s.aggregated.end=n[r].pos}}else{s.aggregated.start=n[r].total;n[r].total+=a;n[r].pos=Math.max(n[r].pos,n[r].total);n[r].neg=Math.min(n[r].neg,n[r].total);s.aggregated.end=n[r].total}if("number"===typeof s.interpolatedValue){s.interpolatedValue=s.aggregated.end;s.isInterpolationOffset=true}}})}return{pos:Math.max.apply(null,n.filter(function(t){return!!t}).map(function(t){return t.pos})),neg:Math.min.apply(null,n.filter(function(t){return!!t}).map(function(t){return t.neg}))}}d=t.extend("LineArea",{init:function t(){this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._shapes=[];this._generatedCacheItems=[];this._showDataPoints=true;this._colorMap=null;this._showDataPoints=false;this._lineType=u.LINE;this._nullMode=f.GAP;this._separateStacking=true;this._globalAlpha=1;this._dataLabelMargin=6;this._maxDataLabelMargin=12;this._dataLabelHorizontalGap=6;this._dataLabelVerticalGap=3;this._horizontalDistanceFromLine=2;this.interpolateVaryingColors=true;this._styleService=l.initializeService("object.lineChart");this._lineObjectsModel=new i;this._edgeBleed=0;this._lineLayer=new n(this.container);this.layers=[this._lineLayer];if(this.isMini){this._rangeSelectionLayer=new r(this.container);this.layers.push(this._rangeSelectionLayer)}else{this._oobLayer=new o(this.container);this.layers.push(this._oobLayer);this._labelLayer=new a(this.container);this.layers.push(this._labelLayer);this._rangeSelectionLayer=new s(this.container);this.layers.push(this._rangeSelectionLayer)}},setYMirrorMode:function t(e){this.yMirrorMode=e;this._labelLayer&&this._labelLayer.setYMirrorMode(e)},preRender:function t(){},afterPaint:function t(){return c.resolve()},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},setShowDataPoints:function t(e){this._showDataPoints=e},getShowDataPoints:function t(){return this._showDataPoints},setMajorAxis:function t(e){this._majorAxis=e;this._majorAxis.listen("changed",function(){this.invalidateDisplay()},this)},setMinorAxis:function t(e){this._minorAxis=e;this._minorAxis.listen("changed",function(){this.invalidateDisplay()},this)},setTimeAxis:function t(e){this.timeAxis=e;this.timeAxis.listen("changed",function(){this.invalidateDisplay()},this)},setContinuousAxis:function t(e){this.continuousAxis=e;this.continuousAxis.listen("changed",function(){this.invalidateDisplay()},this)},setActiveDimensionAxis:function t(e){this._activeDimAxis=e},setSecondaryMinorAxis:function t(e){this._secondaryMinorAxis=e;this._secondaryMinorAxis.listen("changed",function(){this.invalidateDisplay()},this)},setIsDimensionContinuous:function t(e){this.isDimensionContinuous=e;this._edgeBleed=this.isDimensionContinuous?5:0},setDimensionTree:function t(e){this._tree=e;this.invalidateProperties("linearea: setDimensionTree")},setLineType:function t(e){this._lineType=e},setNullMode:function t(e){this._nullMode=e},setSeparateStacking:function t(e){this._separateStacking=e},setShowDataPointLabels:function t(e){this._showDataPointLabels=e},getShowDataPointLabels:function t(){return this._showDataPointLabels},freezeZOrdering:function t(){this._zOrderFreezed=true},unFreezeZOrdering:function t(){this._zOrderFreezed=false},setColorMappings:function t(e){this._colorMappings=e},_updateSize:function t(){this.invalidateDisplay()},getCacheItems:function t(){return this._cacheItems},setCacheItems:function t(e){this._cacheItems=e},getGeneratedCacheItems:function t(){return this._generatedCacheItems||[]},setMeasureIndices:function t(e){this._measureIndices=e},getMajorAxisData:function t(){return this._majorAxisData},getMinorAxisData:function t(){return this._minorAxisData},renderRangeSelections:function t(){this._rangeSelectionLayer.update(this._activeDimAxis,this._lineLayer);return this._rangeSelectionLayer.render()},updateRangeSelection:function t(e){this._rangeSelectionLayer.setRanges(e);this.renderRangeSelections()},_updateProperties:function t(){if(!this._data||!this._tree)return;this._minorAxes=[this._minorAxis];this._secondaryMinorAxis&&this._minorAxes.push(this._secondaryMinorAxis);this._majorAxisData=b.call(this);this._minorAxisData=null;var i=[],n=this._data.qHyperCube.qDimensionInfo,o=n.length,a=this._measureIndices?this._measureIndices.length:this._data.qHyperCube.qMeasureInfo.length,s=this._data.qHyperCube.qMeasureInfo,r=this._tree,l,c=this._shapes,d=r.children.length,m,x,S,_,I=0,w=this._shapes.length,P={},q=this.measureFormatters,M,D,C=this.selectionIdentifier?this.selectionIdentifier:"dataArea";var L=this._minorAxes;var k=[];var z=[];if(this._measureIndices)z=this._measureIndices;else if(a>0&&a<20)while(z.length<a)z.push(z.slice(-1)[0]+1||0);z.forEach(function(t){k[t]=L.filter(function(e){return!e._dataIndices||e._dataIndices.indexOf(t)>=0})[0]});this._measureToAxis=k;this._measureToAxisIndex=k.map(function(t){return L.indexOf(t)});this._polysData=[];if(d&&z||z.length){r.children.forEach(function(t,a){t.id=n[0].cId+"_"+t.data.qElemNo;t.children.forEach(function(r,d){if(o>1){l=t.id+";"+n[1].cId+"_"+r.data.qElemNo;var u="X"+r.data.qElemNo;D=P[u];if(!D){P[u]={info:{label:r.data.qText},points:[],values:[],measureIdx:o>1?0:d};D=P[u]}r=r.children[0];M=q[0]}else{if(this._measureIndices&&this._measureIndices.indexOf(d)<0)return;l=t.id;D=P[d];if(!D){P[d]={info:{label:s[d].qFallbackTitle},measureIdx:d,points:[],values:[]};D=P[d]}M=q[d]}x=r?r.children[0]:void 0;if(!x)return;m=void 0!==x.data.qValue?x.data.qValue:x.data.qNum;_=Number.isNaN(+m);if(this._nullMode===f.ZERO&&_){m=0;_=false}r.chartData={value:m,isNaN:_,idx:a,measureIdx:o>1?0:d,hasLeftNeighbour:!!D.points[a-1]&&!D.points[a-1].isNaN,hasRightNeighbour:false,color:null,text:x.data.qText,label:x.data.qText?M&&("U"===M.type||Number.isNaN(+x.data.qNum))?M.formatValue(m):x.data.qText:"",rowIndex:r.data.rowIndex,dimValue:t.data.qNum,id:l,aggregated:{}};if(!r.chartData.isNaN){r.chartData.aggregated.start=0;r.chartData.aggregated.end=m;D.values.push(m)}D.points[a]=r.chartData;D.points[a-1]&&(D.points[a-1].hasRightNeighbour=!r.chartData.isNaN);r.chartData.shapeIndex=I++;w<I&&c.push(new e(NaN,NaN,NaN));r.chartData.cacheCircle=c[r.chartData.shapeIndex];S=r.parent;if(S.cacheItem){i.indexOf(S.cacheItem)<0&&i.push(S.cacheItem);r.chartData.cacheItem=S.cacheItem;S.cacheItem.addShape(C,r.chartData.cacheCircle,true);S.cacheItem.calculateTooltipPosition=true}},this)},this);var A=[];var O=a>1||o>1;var T=(this._nullMode===f.CONNECT||this.isDimensionContinuous)&&this._lineType===u.STACKED&&O;var E=this._nullMode===f.ZERO&&O&&!this.isDimensionContinuous;(T||E)&&p.call(this,P,E);Object.keys(P).forEach(function(t){(T||this._nullMode!==f.ZERO)&&g.call(this,P[t].points);T&&y.call(this,P[t].points);this.isDimensionContinuous||(P[t].points=P[t].points.filter(h));A.push(P[t])},this);this._polysData=A;if(this._zOrderFreezed){var R=this._sortedOrder;this._polysData.forEach(function(t,e){t.idx=e});this._polysData.sort(function(t,e){return R.indexOf(t.idx)-R.indexOf(e.idx)})}else{if(this._lineType===u.AREA){this._polysData.forEach(function(t,e){t.idx=e;t.values.sort(function(t,e){return e-t});t.absMedian=Math.abs(t.values[Math.floor(t.values.length/2)])});this._polysData.sort(function(t,e){return e.absMedian-t.absMedian})}else this._polysData.forEach(function(t,e){t.idx=e});this._sortedOrder=this._polysData.map(function(t){return t.idx})}if(this._lineType===u.STACKED&&(a>1||o>1)){var j=v.apply(this,[A,this._separateStacking]);this._minorAxisData={min:j.neg>=0?0:j.neg,max:j.pos<0?0:j.pos}}}this._shapes.length>I&&(this._shapes=this._shapes.slice(0,I));this.setSelectableShapes(i);this._lineLayer.updateInstances(this._polysData,{showArea:[u.AREA,u.STACKED].contains(this._lineType)})},hasValidData:function t(){return this._super()&&this._majorAxis&&this._minorAxis&&this._data&&this._tree},updateSize:function t(){this._super();this.layers.forEach(function(t){t.rect=this.rect;t.renderer.setDimensions(0,-1,this.rect.width,this.rect.height+1);t.renderer.setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y)},this);this._style=m(this._styleService,this._layoutMode)},preRelevantSizeCalculation:function t(){this.perpendicularlyRelevantSpacing={left:this._edgeBleed,right:this._edgeBleed,top:1,bottom:this._edgeBleed}},release:function t(){this.layers.forEach(function(t){t.release()});this._super();this._majorAxis&&this._majorAxis.stopListen("changed",null,this);this._minorAxis&&this._minorAxis.stopListen("changed",null,this);this._secondaryMinorAxis&&this._secondaryMinorAxis.stopListen("changed",null,this);this.timeAxis&&this.timeAxis.stopListen("changed",null,this);this.continuousAxis&&this.continuousAxis.stopListen("changed",null,this)},beforeLayerUpdates:function t(){},paint:function t(){this._majorAxis.updateNow();this._minorAxis.updateNow();this._activeDimAxis&&this._activeDimAxis.updateNow();var e={numDimensions:this._data.qHyperCube.qDimensionInfo.length,showDataPoints:this._showDataPoints&&this._layoutMode>this.ShowFlags.SPARK,nullMode:this._nullMode,globalAlpha:this._globalAlpha,majorAxis:this._majorAxis,minorAxes:this._minorAxes,numericAxis:this._activeDimAxis,isNumeric:this.isDimensionContinuous,measureToAxisIndex:this._measureToAxisIndex,axesSettings:this._minorAxes.map(this._getAxisDetails),combinedMeasuresFormatter:this.combinedMeasuresFormatter,interpolateVaryingColors:this.interpolateVaryingColors,colorMap:this._colorMap,rect:this.rect,style:this._style,markerSize:Math.min(8,this._majorAxis.getDiscreteSpacing()/2),yMirrorMode:this.yMirrorMode},i=this,n=[];this._lineObjectsModel.update(this._polysData,e);this.beforeLayerUpdates(this._lineObjectsModel.getLineObjectsSettings());this._lineLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:1,bottom:this._edgeBleed};this._lineLayer.update(this._lineObjectsModel.getLineObjectsSettings());this.preRender(this._lineLayer._lineObjects);n.push(this._lineLayer.render());if(this._oobLayer){this._oobLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:this._edgeBleed};this._oobLayer.update(this._lineObjectsModel.getPointsOutOfRange(),e);n.push(this._oobLayer.render())}if(this._labelLayer)if(this._layoutMode>this.ShowFlags.XSMALL&&this._showDataPointLabels&&this._showDataPoints){this._labelLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:this._edgeBleed};this._labelLayer.update(this._lineLayer.getLineObjects(),e);this._labelLayer.show();n.push(this._labelLayer.render())}else this._labelLayer.hide();this._rangeSelectionLayer&&n.push(this.renderRangeSelections());return c.all(n).then(function(){return i.afterPaint(e.axesSettings[0].topCutoff,e.axesSettings[0].bottomCutoff)})},clear:function t(){this._super();this.layers.forEach(function(t){t.clear()})},_getAxisDetails:function t(e){var i=e.getPlotMin(),n=e.getPlotMax(),o=n-i,a=e.getPadding(),s=a.top,r=e.rect.height-a.bottom,l=0;l=i>0?r:n<0?s:Math.ceil(e.getPositionOfValue(0)+1e-5);return{plotMin:i,plotMax:n,posMin:e.getPositionOfValue(i),posMax:e.getPositionOfValue(n),plotRange:o,topCutoff:s,bottomCutoff:r,areaStartBase:l,zeroPos:Math.floor(e.getPositionOfValue(0))-.5}}});function m(t,e){var i=t.layoutMap[e]||"medium";return{dataPoints:{color:t.getStyle("label.value","color"),font:"normal "+t.getStyle("label.value","fontSize")+" 'QlikView Sans'",size:{normal:6,selected:10}},outOfRange:{color:t.getStyle("outOfRange","color")},line:{width:"full"===i?2:1}}}function b(){if(!this._data||!this._tree)return[];var t=this._data.qHyperCube.qDimensionInfo,e=t.length,i=[],n,o=0;this._tree.children.forEach(function(a){a.id=t[0].cId+"_"+a.data.qElemNo;n={label:a.data.qText||"",cacheIndex:[],id:a.id};i.push(n);1===e&&(n.cacheIndex[0]=o++);e>1&&a.children.forEach(function(t){if(t.children[0]&&t.children[0].isBranch){-2!==t.data.qElemNo&&n.cacheIndex.push(o);o++}},this)},this);return{data:i,info:[{qApprMaxGlyphCount:this._tree.data.qApprMaxGlyphCount}],groupSize:null}}return d}.apply(e,n),void 0!==o&&(t.exports=o))},1177:function(t,e,i){"use strict";var n,o;!(n=[i(307),i(278)],o=function(t,e){var i;function n(t,e,i,n,o){var a=[];if("left"===o){a.push({x:t,y:e+i/2});a.push({x:t,y:e-i/2});a.push({x:t-n,y:e})}else if("right"===o){a.push({x:t,y:e+i/2});a.push({x:t,y:e-i/2});a.push({x:t+n,y:e})}else if("up"===o){a.push({x:t-i/2,y:e});a.push({x:t+i/2,y:e});a.push({x:t,y:e-n})}else if("down"===o){a.push({x:t-i/2,y:e});a.push({x:t+i/2,y:e});a.push({x:t,y:e+n})}return a}i=t.extend("OutOfBoundsLayer",{init:function t(e){this._super(e,{name:"out-of-bounds-layer"});this._markerSize=8},update:function t(i,o){var a=this.renderer.stage,s=a.children,r=o.markerSize||this._markerSize,l,c,d,u,f,h,p=i?i.length:0;for(h=0;h<p;h++){l=s[h];c=i[h];u=c;c.data&&(u=c.data);f=o.axesSettings[o.measureToAxisIndex[u.measureIdx]];d=n(u.x,u.outOfRangeUp?f.topCutoff+r:f.bottomCutoff-r,r,r,u.outOfRangeUp?"up":"down");if(l)l.set(d);else{l=new e(d);a.addChild(l)}l.fill=o.style.outOfRange.color;l.opacity=u.selected?1:o.globalAlpha}p<s.length&&a.removeChildren(s.slice(p-s.length))}});return i}.apply(e,n),void 0!==o&&(t.exports=o))},1196:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(1049),i(1232),i(90)],o=function(t,e,i,n){function o(t,e,i){if(!e||i<1)return;var a=t.measureText(e).width;if(a>i){var s=a/i,r=parseInt(e.length/s);return o(t,n.ellipseText(e,r),i)}return e}function a(t,e){t.selectedIndex=s.call(this,t.recentClickToSelect,e);t.selectedIndex<0&&(t.selectedIndex=t._effectProperties.selectedIndex);t.recentClickToSelect=null}function s(n,o){var a=n.gestureData.pagePoints[0].x-t(this.container).offset().left,s=n.gestureData.pagePoints[0].y-t(this.container).offset().top,u=this.getOriginalPoint(a,s),f=-1;o[0]instanceof i?f=r(u,o,this.container.clientWidth/2,this.container.clientHeight/2):o[0]instanceof e?f=c(u,o):o[0].getBoundingRect?f=l(u,o.map(function(t){return t.getBoundingRect()})):"x"in o[0]&&"y"in o[0]&&(f=d(u,o));return f}function r(t,e,i,n){var o=-1,a=e[0].getAngle(t.x,t.y,i,n);e.forEach(function(t,i){if(i===e.length-1&&t.start<=a||t.start<=a&&t.end>=a){o=i;return}});return o}function l(t,e){var i=-1,n,o=99999,a;e.forEach(function(t,e){a=[{x1:t.x,y1:t.y,x2:t.getRight(),y2:t.y,angle:0},{x1:t.getRight(),y1:t.y,x2:t.getRight(),y2:t.getBottom(),angle:0},{x1:t.getRight(),y1:t.getBottom(),x2:t.x,y2:t.getBottom(),angle:0},{x1:t.x,y1:t.getBottom(),x2:t.x,y2:t.y,angle:0}];s(a,e)});function s(e,a){e.forEach(function(e){n=r(t.x,t.y,e.x1,e.y1,e.x2,e.y2,e.angle);if(n<o){o=n;i=a}})}function r(t,e,i,n,o,a){var s;function r(t,e,i,n){return Math.sqrt((t-=i)*t+(e-=n)*e)}function l(t,e,i,n,o,a){if(o-i===0)return{x:i,y:e};if(a-n===0)return{x:t,y:n};var s,r=-1/((a-n)/(o-i));return{x:s=(o*(t*r-e+n)+i*(t*-r+e-a))/(r*(o-i)+n-a),y:r*s-r*t+e}}if(s=l(t,e,i,n,o,a),s.x>=Math.min(i,o)&&s.x<=Math.max(i,o)&&s.y>=Math.min(n,a)&&s.y<=Math.max(n,a)){var c=n-a,d=o-i,u=i*a-n*o;return Math.abs(c*t+d*e+u)/Math.sqrt(c*c+d*d)}var f=r(t,e,i,n),h=r(t,e,o,a);return f>h?h:f}return i}function c(t,e){var i=-1,n,o=99999;e.forEach(function(e,a){n=u(t,e.getPoints()[0]);if(n<o){o=n;i=a}});return i}function d(t,e){var i=-1,n,o=99999;e.forEach(function(e,a){n=u(t,{x:e.x,y:e.y});if(n<o){o=n;i=a}});return i}function u(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function f(e){var i=e.element.scope().model,n=e.selectedIndex;var o={effectProperties:{selectedIndex:n}};i.getProperties().then(function(a){a._originalModelSetting||(o.originalModelSettings=i.layout.originalModelSettings);o=t.extend(true,a,o);i.setProperties(o).then(function(){e._effectProperties.selectedIndex=n})})}function h(t){var e=t.scope();e.fade=false;e.fadeIn=false}function p(t){var e=t.scope();e.fade=true;setTimeout(function(){e.$apply(function(){e.fadeIn=true})},100)}return{selectShape:a,updateSelectedPointIndex:f,initFade:h,fadeIn:p,shortenText:o}}.apply(e,n),void 0!==o&&(t.exports=o))},1233:function(t,e,i){"use strict";var n,o;!(n=[i(92),i(104),i(278),i(291),i(101),i(1234)],o=function(t,e,i,n,o,a){var s;function r(){var t,n,o,s,r=this.style.shape,l=new e(0,0,0,0),c=this.widthRatio,d,u,f,h,p,g=this.isSpikingEnabled,y=this.isHintingEnabled,v,m,b,x=[],S=this.majorAxis.isDiscrete(),_=this.majorAxis.getDiscreteSpacing()*c,I,w=this.minorAxis.getPlotMax(),P=this.minorAxis.getPlotMin(),q=!this.majorAxis.isVertical(),M=this.minorAxis.getPadding(),D=this.minorAxis.getPositionOfValue(0)-1,C={pad:q?M.top:M.right},L={pad:q?M.bottom:M.left},k=new e;C.gap=.3*C.pad;C.sharpness=.3*C.pad;L.gap=.3*L.pad;L.sharpness=.3*L.pad;k.set(M.left,M.top,this.rect.width-M.left-M.right,this.rect.height-M.top-M.bottom);this._bounds=k;var z=0,A=q?this.rect.width:this.rect.height,O=-1,T=q?this.rect.height:this.rect.width;h=this.shapes?this.shapes.length:0;if(this.isNumeric){S=false;var E=this.majorAxis._scale.plotRange/(this.majorAxis._scale._dataMax-this.majorAxis._scale._dataMin),R=90,j=.25,N=2,$=this.majorAxis._scale._plotSize/R;I=Math.max($-Math.pow(E,j)*$,N);Number.isNaN(+I)&&(I=N)}for(p=0;p<h;p++){u=this.shapes[p];b=u instanceof i||"Polygon"===u.type;f=this.isNumeric?this.majorAxis.getPositionOfValue(u.data.axisNum):this.majorAxis.getPositionOfId(u.data.axisId);d=S?_:I||this.majorAxis.getWidthOfId(u.data.axisId)*c;if(u.data.isNaN||Number.isNaN(+u.data.value)){u.data.isNaN=true;o=D;s=D}else{o=this.minorAxis.getPositionOfValue(u.data.start)-1;s=this.minorAxis.getPositionOfValue(u.data.end)-1}t=f-d/2;n=f+d/2;a.updateRectangle(u.data.hitRect,t,n,o,s,!q,k);delete u.data.labelRect;delete u.data.isCutOff;delete u.data.hintDirection;if(n<z||t>A)u.data.isVisible=false;else{u.data.isVisible=true;b?u.set(u.data.hitRect.getPoints()):u.set(u.data.hitRect.x,u.data.hitRect.y,u.data.hitRect.width,u.data.hitRect.height);l.set(u.data.hitRect.x,u.data.hitRect.y,u.data.hitRect.width,u.data.hitRect.height);x.push(u);v=u.data.cacheItem;var B=v.selected;if(u.data.isFakeOtherCell&&u.data.highlightOnGroupSelect&&v.children[0].selected){B=true;for(var F=0;F<v.children.length;F++)if(!v.children[F].selected){B=false;break}}this.isNumeric&&this.selectedRanges&&!B&&(B=this.selectedRanges.some(function(t){return u.data.axisNum>=t.min&&(t.maxIncluded?u.data.axisNum<=t.max:u.data.axisNum<t.max)}));m=B&&d>6?r.selected:{border:{color:0,width:0}};u.stroke=m.border.color;u.fill=u.data.isFakeOtherCell?this.othersFillPattern:u.data.fill;u.strokeWidth=m.border.width;u.opacity=B?1:this._globalAlpha;var V=!!y&&this._getHint(o,s,k,q);var H=!(!b||V||!g)&&this._getSpike(u.data.end,o,s,k,q,P,w);if(H){u.data.labelRect=l.clone();a.updateSpike(u,q?u.data.end>=0?"up":"down":u.data.end>=0?"right":"left",u.data.end>=0?C:L);u.data.isCutOff=true}else if(V){u.fill=r.outOfRange.color;a.updateHint(u,V,k);u.data.hintDirection=V}else(o<O&&s<O||o>T&&s>T)&&(u.data.isVisible=false)}}this.nodesInView=x}s=t.extend("BarLayer",{init:function t(e){this.renderer=new n(e,{name:"bar-layer"});this.widthRatio=.7;this.isSpikingEnabled=false;this.isHintingEnabled=false;this.shapes=[];this._globalAlpha=1},release:function t(){this.renderer.release();this.shapes=null;this.minorAxis=null;this.majorAxis=null},update:function t(){r.call(this)},render:function t(){return this.renderer.render()},clear:function t(){this.renderer.clear()},_getStyle:function t(e){return{selected:{border:{color:o.getValue(e,"shape.selected.border.color","rgba(0,0,0,0.25)"),width:o.getValue(e,"shape.selected.border.width",1)}}}},_getHint:function t(e,i,n,o){if(o){if(i+1<n.y&&e+1<=n.y)return"up";if(i+1>n.y+n.height&&e+1>=n.y+n.height)return"down"}else{if(i+1<n.x&&e+1<=n.x)return"left";if(i+1>n.x+n.width&&e+1>=n.x+n.width)return"right"}return false},_getSpike:function t(e,i,n,o,a,s,r){var l=e>r,c=e<s;if(a){l=l&&n<o.y&&i>o.y;c=c&&n>o.y+o.height&&i<o.y+o.height}else{l=l&&n>o.x+o.width&&i<o.x+o.width;c=c&&n<o.x&&i>o.x}return l||c}});return s}.apply(e,n),void 0!==o&&(t.exports=o))},1234:function(t,e,i){"use strict";var n,o;!(n=[i(293)],o=function(t){function e(t,e,i,n,o,a,s){var r,l;if(a){r=e;l=i;i=o;e=n;o=r;n=l;if(i<e){r=i;i=e;e=r}e=Math.max(s.x,Math.min(s.x+s.width,e));i=Math.max(s.x,Math.min(s.x+s.width,i))}else{if(n<o){r=o;o=n;n=r}n=Math.max(s.y,Math.min(s.y+s.height,n));o=Math.max(s.y,Math.min(s.y+s.height,o))}t.set(e,o,i-e,n-o);return t}function i(t,e,i,n){var o=[{x:t.x,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height},{x:t.x+t.width,y:t.y}];switch(e){case"left":n?o[0].x-=i:o[1].x+=i;break;case"right":n?o[2].x+=i:o[3].x-=i;break;case"top":n?o[3].y-=i:o[0].y+=i;break;case"bottom":n?o[1].y+=i:o[2].y-=i;break}return o}function n(e,n,o){var a,s=o.pad,r=o.gap,l=o.sharpness,c=e.clone(),d=i,u=[];if("right"===n){a=new t(c.x+c.width+r,c.y,s-r,c.height);u.push(d(c,"right",l,true));u.push(d(a,"left",l,false,true));e.width+=a.width+r}else if("left"===n){a=new t(0,c.y,s-r,c.height);u.push(d(c,"left",l,true));u.push(d(a,"right",l,false,true));e.x=a.x;e.width+=a.width+r}else if("down"===n){a=new t(c.x,c.y+c.height+r,c.width,s-r);u.push(d(c,"bottom",l,true));u.push(d(a,"top",l,false,true));e.height+=a.height+r}else if("up"===n){a=new t(c.x,0,c.width,s-r);u.push(d(c,"top",l,true));u.push(d(a,"bottom",l,false,true));e.y=a.y;e.height+=a.height+r}return u}function o(t,e,i){t.set(n(t.data.hitRect,e,i))}function a(t,e,i){t.set(r(t.data.hitRect,e,i))}function s(t,e,i,n,o){var a=[];if("left"===o){a.push({x:t,y:e+i/2});a.push({x:t,y:e-i/2});a.push({x:t-n,y:e})}else if("right"===o){a.push({x:t,y:e+i/2});a.push({x:t,y:e-i/2});a.push({x:t+n,y:e})}else if("up"===o){a.push({x:t-i/2,y:e});a.push({x:t+i/2,y:e});a.push({x:t,y:e-n})}else if("down"===o){a.push({x:t-i/2,y:e});a.push({x:t+i/2,y:e});a.push({x:t,y:e+n})}return a}function r(t,e,i){var n,o,a;a=Math.min(t[["left","right"].contains(e)?"height":"width"]/2,8);o=Math.min(a,8);if("left"===e){n=s(i.x+o,t.y+t.height/2,a,o,e);t.width+=o}else if("right"===e){n=s(i.x+i.width-o-1,t.y+t.height/2,a,o,e);t.width+=o;t.x-=o}else if("up"===e){n=s(t.x+t.width/2,i.y+o,a,o,e);t.height+=o}else if("down"===e){n=s(t.x+t.width/2,i.y+i.height-o-1,a,o,e);t.height+=o;t.y-=o}return n}return{updateRectangle:e,getSpike:n,getSlicedPolygon:i,getHint:r,updateSpike:o,updateHint:a}}.apply(e,n),void 0!==o&&(t.exports=o))},1235:function(t,e,i){"use strict";var n,o;!(n=[i(92),i(203),i(200),i(109),i(344)],o=function(t,e,i,n){var o,a,s,r,l;function c(t,e){return t?n.useDarkLabel(e,l)?a.label.dark.color:a.label.light.color:a.label.color}function d(t,e,i,n,o,s,r){return{type:"text",fill:a.label.dark.color,opacity:n||1,data:{value:e,rect:i,labelRect:s,hintDirection:r,color:o},shape:{text:t,maxNumLines:1,align:"center",baseline:"middle"}}}function u(t){var e,i,n,o;e=t.descendants.filter(function(t){return!t.isBranch&&false!==t.data.isVisible});i=e.map(function(t){return t.data.hitRect});if(i.length){n=i[0];i.length>1&&(n=n.combineWith(i.slice(-1)[0]));o=d(t.data.valueLabel,t.data.sum,n,e[e.length-1].opacity,e[e.length-1].data.color,null,null);o.data.isFillPattern=window.CanvasPattern&&e[e.length-1].fill instanceof window.CanvasPattern;o.data.lastRect=i[i.length-1];return o}}function f(t,e){var i,n;t.forEach(function(t){i=t.children;if(t.data.isStack){n=u(t);if(n){n.data.isStack=true;n.targetShape=t;e.push(n)}}else if(i&&i.length)f(i,e);else if(false!==t.data.isVisible){n=d(t.data.valueLabel,t.data.value,t.data.hitRect,t.opacity,t.data.color,t.data.labelRect,t.data.hintDirection);n.targetShape=t;e.push(n)}})}function h(t,e){var i;t.forEach(function(t){i=t.children;i&&i.length?h(i,e):false!==t.data.isVisible&&e.push(t)})}function p(t,e){Object.keys(e).forEach(function(i){t[i]=e[i]})}function g(t){return t.filter(function(t){return!!t.labelBounds})}function y(t,e,i){return t.filter(function(t){return t.labelBounds.x>=e&&t.labelBounds.x+t.labelBounds.width<=i})}function v(t,e){var i=e?e.length:0,n,o,a;o=t.labelBounds;for(n=0;n<i;n++){a=e[n].data.hitRect;if(t.targetShape===e[n]){if(o.y+o.height/2>a.y&&o.width>a.width+8)return true}else if(a&&o.x<=a.x+a.width&&a.x<=o.x+o.width&&o.y<=a.y+a.height&&a.y<=o.y+o.height)return true}return false}function m(t,e){return t.filter(function(t){return!v(t,e)})}function b(t){return t.filter(function(t){return t.data.value<0})}function x(t){return t.filter(function(t){return t.data.value>=0})}function S(t,e){var i=e?e.length:0,n,o,a;o=t.labelBounds;for(n=0;n<i;n++){a=e[n].labelBounds;if(o.x<=a.x+a.width&&a.x<=o.x+o.width&&o.y<=a.y+a.height&&a.y<=o.y+o.height)return true}return false}function _(t){var e=t?t.length:0,i=[],n,o,a,s,r;for(n=0;n<e;n++){r=t[n];o=r.data.value;a=0===n?o:t[n-1].data.value;s=n===e-1?o:t[n+1].data.value;r.priority=o>a&&o>s?6:o<a&&o<s?5:o>a&&o===s||o===a&&o>s?4:o<a&&o===s||o===a&&o<s?3:o===a&&o===s?2:1}t.sort(function(t,e){return t.priority-e.priority});for(n=0;n<e;n++)S(t[n],i)||(i[i.length]=t[n]);return i}function I(){var t=[],i=[],n=this.minorAxis.getPlotMin(),o=this.minorAxis.getPlotMax(),r,c,d,u=a.label.font,p=this.bounds,v;f(this._shapes,t);e.setFont(u);this.renderer.setFont(u);t=t.filter(function(t){if("NaN"===t.data.value)return true;if(t.data.labelRect||t.data.showHintLabel)return true;if(t.data.value>=0&&o>=t.data.value&&n<=t.data.value)return true;if(t.data.value<0&&n<=t.data.value&&o>=t.data.value)return true;if(t.data.rect.width&&t.data.rect.height&&p.intersectsWith(t.data.rect))return true;return false});var S,I,q;if(this._shapes&&this._shapes.length){I=this._shapes[0].descendants.filter(function(t){return!t.isBranch})[0];q=I?I.data.hitRect.width:this.majorAxis._discreteSpacing}else q=0;S=0;r=t?t.length:0;for(d=0;d<r;d++){c=t[d];if(c.shape){c.shape.font=u;c.data.labelWidth=e.getTextWidth(c.shape.text);S=Math.max(S,c.data.labelWidth)}}this._longestLabel=S;v=this._longestLabel<q;var D;D=this.minorAxis.isVertical()?v?w:P:M;for(d=0;d<r;d++)D.call(this,t[d],q);if(this.isNumeric){var C=4,L,k;h(this._shapes,i);t=g(t);t=y(t,this.bounds.x-C,this.bounds.x+this.bounds.width+C);t=m(t,i);L=b(t);k=x(t);L=_(L);k=_(k);t=k.concat(L)}t.slice().forEach(function(e){if(e.fill&&e.backdrop){t.unshift({opacity:e.opacity||1,type:"roundRect",fill:s,shape:e.backdrop});e.fill=l?a.label.light.color:a.label.dark.color}});this.renderer.shapes=t;this.renderer.render()}function w(t,e){var i,n=this.renderer.getFontHeight(a.label.font);var o=q.apply(this,[t,false,e]);for(var s=0;s<o.length;s++){p(t.shape,o[s].rect);if(n<o[s].rect.height){i=o[s];break}}if(i){var r=i.rect.width-t.data.labelWidth;p(t.shape,i.rect);t.shape.baseline=i.baseline;t.shape.align=i.align;t.labelBounds={x:i.rect.x+Math.min(r/2,4),y:"top"===i.baseline?i.rect.y:i.rect.y+i.rect.height-16,width:Math.max(i.rect.width-Math.min(r,8)),height:16,containingRect:i.inline?t.shape:void 0};if(t.data.isStack&&i.inline&&(t.data.lastRect.height<20||t.data.isFillPattern))t.backdrop={x:t.labelBounds.x,y:t.labelBounds.y,width:t.labelBounds.width,height:t.labelBounds.height,radius:4};else{t.fill=c(i.inline,t.data.color);t.backdrop=false}}else t.fill=false}function P(t,n){var o,a,s,r;var l=q.apply(this,[t,true,n]);r=this.bounds.x+this.bounds.width;o="labelWidth"in t.data?t.data.labelWidth:e.getTextWidth(t.shape.text);for(a=0;a<l.length;a++)if(l[a].rect.height>=o){s=l[a];break}if(!s){l.sort(function(t,e){return.8*e.rect.height-t.rect.height});l[0].rect.height>=8&&(s=l[0])}if(s){var d=new i;d.translate(s.rect.x,s.rect.y+s.rect.height);d.rotate(-Math.PI/2);p(t.shape,{width:s.rect.height,height:s.rect.width,baseline:s.baseline,align:s.align,x:0,y:0});t.transform=d.elements;t.labelBounds={x:s.rect.x+s.rect.width/2-8,y:"right"===s.align?s.rect.y-4:s.rect.y+s.rect.height-o-4,width:16,height:o+8};s.rect.x<0&&s.rect.x+s.rect.width>0&&(t.labelBounds.x=Math.max(t.labelBounds.x,this.bounds.x-4));s.rect.x<r&&s.rect.x+s.rect.width>r&&(t.labelBounds.x=Math.min(t.labelBounds.x,r-t.labelBounds.width));if(t.data.isStack&&s.inline&&(t.data.lastRect.height<o+4||t.data.isFillPattern))t.backdrop={x:t.labelBounds.x,y:t.labelBounds.y,width:t.labelBounds.width,height:t.labelBounds.height,radius:4};else{t.fill=c(s.inline,t.data.color);t.backdrop=false}}else t.fill=false}function q(t,e,i){var n,o,a,s,r=e&&t.data.isStack?8:4,l=[];n=t.data.rect.width;o=t.data.rect.height;a=t.data.rect.x;s=t.data.rect.y;if("up"!==t.data.hintDirection&&t.data.value>=0||"down"===t.data.hintDirection){s-this.bounds.y-2*r>4&&l.push({align:e?"left":"center",baseline:e?"middle":"bottom",rect:{x:a-.5*(i-n),y:this.bounds.y+r,width:i,height:s-this.bounds.y-2*r}});if(t.data.labelRect){n=t.data.labelRect.width;o=t.data.labelRect.height;a=t.data.labelRect.x;s=t.data.labelRect.y}t.data.hintDirection||l.push({align:e?"right":"center",baseline:e?"middle":"top",inline:true,rect:{x:a,y:s+r,width:n,height:o-2*r}})}else{this.bounds.height-s-o-2*r>0&&l.push({align:e?"right":"center",baseline:e?"middle":"top",rect:{x:a-.5*(i-n),y:s+o+r,width:i,height:this.bounds.height-s-o-2*r}});if(t.data.labelRect){n=t.data.labelRect.width;o=t.data.labelRect.height;a=t.data.labelRect.x;s=t.data.labelRect.y}t.data.hintDirection||l.push({align:e?"left":"center",baseline:e?"middle":"bottom",inline:true,rect:{x:a,y:s+r,width:n,height:o-2*r}})}return l}function M(t,i){var n,o,a,s;a=D.apply(this,[t,i]);n="labelWidth"in t.data?t.data.labelWidth:e.getTextWidth(t.shape.text);for(o=0;o<a.length;o++)if(a[o].rect.width>=n){s=a[o];break}if(!s&&a.length){a.sort(function(t,e){return.8*e.rect.width-t.rect.width});a[0].rect.width>=8&&(s=a[0])}if(s){t.shape.baseline="middle";t.shape.align=s.align;p(t.shape,s.rect);t.labelBounds={x:("right"===s.align?s.rect.x+s.rect.width-n:s.rect.x)-4,y:s.rect.y+s.rect.height/2-8,width:n+8,height:16};if(t.data.isStack&&s.inline&&(t.data.lastRect.width<n+8||t.data.isFillPattern))t.backdrop={x:t.labelBounds.x,y:t.labelBounds.y,width:t.labelBounds.width,height:t.labelBounds.height,radius:4};else{t.fill=c(s.inline,t.data.color);t.backdrop=false}}else t.fill=false}function D(t){var e,i,n,o,a=t.data.isStack?8:4,s=[];e=t.data.rect.width;i=t.data.rect.height;n=t.data.rect.x;o=t.data.rect.y;if("right"!==t.data.hintDirection&&(this.yMirrorMode?t.data.value<0:t.data.value>=0)||"left"===t.data.hintDirection){this.bounds.width-n-e-2*a>0&&s.push({align:"left",rect:{x:n+e+a,y:o,width:this.bounds.width-n-e-2*a,height:i}});if(t.data.labelRect){e=t.data.labelRect.width;i=t.data.labelRect.height;n=t.data.labelRect.x;o=t.data.labelRect.y}t.data.hintDirection||s.push({align:"right",inline:true,rect:{x:n+a,y:o,width:e-2*a,height:i}})}else{n-this.bounds.x-2*a&&s.push({align:"right",rect:{x:this.bounds.x+a,y:o,width:n-this.bounds.x-2*a,height:i}});if(t.data.labelRect){e=t.data.labelRect.width;i=t.data.labelRect.height;n=t.data.labelRect.x;o=t.data.labelRect.y}t.data.hintDirection||s.push({align:"left",inline:true,rect:{x:n+a,y:o,width:e-2*a,height:i}})}return s}o=t.extend("LabelLayer",{init:function t(i){this.renderer=new e(i)},setYMirrorMode:function t(e){this.yMirrorMode=e},setData:function t(e){this._data=e},setMeasureIndices:function t(){},setBarData:function t(e){this._barData=e},setShapes:function t(e){this._shapes=e},show:function t(){this.renderer.show()},hide:function t(){this.renderer.hide()},clear:function t(){this.renderer.clear()},release:function t(){this.renderer.release()},render:function t(){a=this.style.dataPoints;r=new n(this.style.backgroundColor);l=r.isDark();s=n.toRGBA(r,.75);I.call(this)}});return o}.apply(e,n),void 0!==o&&(t.exports=o))},1236:function(t,e,i){"use strict";var n,o;!(n=[],o=function(){return{dataPoint:{label:{dark:{color:"#666"},light:{color:"#eee"},font:"11px 'QlikView Sans'"}},shape:{selected:{border:{color:"#333",width:2}},unselected:{opacity:.5},highlighted:{border:{dark:{color:"rgba( 26, 26, 26, 0.75 )"},light:{color:"rgba( 230, 230, 230, 0.75)"},width:1}}}}}.apply(e,n),void 0!==o&&(t.exports=o))},1251:function(t,e,i){"use strict";var n,o;!(n=[i(92),i(90),i(1034)],o=function(t,e,i){var n,o={LINE:"line",AREA:"area",STACKED:"stackedArea"},a={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function s(t,e,i,n){return i<t||n>e}function r(t){return t.color.byMeasureDef&&t.color.byMeasureDef.activeMeasureIndex>=0&&1===t.qHyperCube.qMeasureInfo.length}n=t.extend("LineObjectsModel",{init:function t(){this._lineObjectSettings=[]},update:function t(i,n){this._updateLineObjectsSettings(i,e.extend({selections:this._getSelected(i,n.numDimensions)},n))},getLineObjectsSettings:function t(){return this._lineObjectSettings},getPointsOutOfRange:function t(){return this._outOfRange.points},_updateLineObjectsSettings:function t(i,n){var o,a=i?i.length:0,s,r,l,c,d,u;this._outOfRange={up:{},down:{},points:[]};this._lineObjectSettings=[];for(o=0;o<a;o++){s=i[o];r=n.minorAxes[n.measureToAxisIndex[s.measureIdx]];l=n.axesSettings[n.measureToAxisIndex[s.measureIdx]];c=this._getColorSettings(n.colorMap,l,r);d=[];this._updateLinePoints(i[o].points,d,this._outOfRange,e.extend({majorAxis:n.majorAxis,minorAxis:r,measureIdx:s.measureIdx,axisSettings:l,isLineSelected:n.selections.lines.indexOf(o)>=0},n));u=e.extend({info:i.info,colors:c,clippings:this._getClippings(r,n.rect),idx:i.idx,points:d},n);this._lineObjectSettings.push(u)}},_updateLinePoints:function t(e,n,r,l){var c,d,u,f,h,p,g,y,v=.5,m,b,x,S,_,I=e?e.length:0,w=1===I,P=l.yMirrorMode,q=l.rect.width,M=l.rect.height;g=0;for(d=0;d<I;d++){if(!e[d])continue;c=e[d];u=c.idx;f={x:l.isNumeric?l.numericAxis.getPositionOfValue(c.dimValue):l.majorAxis.getPositionOfValue(u,0),y:l.minorAxis.zeroPos};h=c.cacheCircle;if(h){h.cx=f.x;h.cy=f.y}if(w&&(f.x<0||f.x>q))continue;if(c.isNaN&&!c.hasRightNeighbour&&"number"!==typeof c.nearestRightNeighbour)break;if(c.isNaN&&l.lineType===o.STACKED&&l.nullMode===a.CONNECT&&true!==c.isInterpolationOffset);else if(c.isNaN&&true!==c.isInterpolationOffset){n.push(false);continue}y=c.hasRightNeighbour?e[d+1].idx:c.nearestRightNeighbour;p="undefined"!==typeof y?l.isNumeric?e[y]?l.numericAxis.getPositionOfValue(e[y].dimValue):NaN:l.majorAxis.getPositionOfValue(y,0):NaN;if(!P&&s(0,q,p,g)||P&&s(0,q,g,p)){n.push(false);continue}m=c.cacheItem&&c.cacheItem.selected;var D=!m&&l.isLineSelected&&l.selections.synqronize&&this._isSelectedIndirectly(u,l.selections.lines,l.selections.points);var C=l.minorAxis.getPositionOfValue(c.aggregated.end);f.y=i.roundToHalf(C)+v;f.y<-1e5&&(f.y=-1e5);f.y>M+1e5&&(f.y=M+1e5);if(h){h.r=Math.max(l.style.dataPoints.size.normal/2,8);h.cy=Math.max(l.axisSettings.topCutoff,Math.min(l.axisSettings.bottomCutoff,f.y))}c.isNaN||(g=f.x);b=c.cacheItem&&(c.cacheItem.parent?[c.cacheItem.parent.id,c.cacheItem.id]:c.cacheItem.id);x=l.colorMap.getColor(b,c.aggregated.end,l.measureIdx,c.rowIndex).toRGBA();if(w)_=true;else{_=!c.hasLeftNeighbour&&!c.hasRightNeighbour&&l.nullMode===a.GAP;_&&l.isNumeric&&(_=(0==d||e[d-1])&&(d===I-1||e[d+1]))}S={size:m?l.style.dataPoints.size.selected:l.style.dataPoints.size.normal,selected:m||D,selectedIndirectly:D,text:c.cacheItem?c.cacheItem.getDimensions()[0]:"",measureIdx:c.measureIdx,label:c.label,value:c.aggregated.end,isNaN:c.isNaN,isInterpolationOffset:c.isInterpolationOffset,color:x,outOfRangeUp:C<l.axisSettings.topCutoff,outOfRangeDown:C>l.axisSettings.bottomCutoff,outOfDimensionBounds:f.x<0||f.x>q,outOfBounds:f.x<0||f.x>q||c.aggregated.end>l.axisSettings.plotMax||c.aggregated.end<l.axisSettings.plotMin,dataIndex:u,isSingle:_,hidden:c.hidePoint,x:f.x,y:f.y,y1:0===c.aggregated.start?l.axisSettings.areaStartBase:l.minorAxis.getPositionOfValue(c.aggregated.start),cacheItem:c.cacheItem,isNull:c.cacheItem&&-2===c.cacheItem.id};if(S.outOfRangeUp||S.outOfRangeDown)if(S.outOfRangeUp&&!r.up[S.x]){r.points.push(S);r.up[S.x]=true}else if(S.outOfRangeDown&&!r.down[S.x]){r.points.push(S);r.down[S.x]=true}n[u]=S}},_getSelected:function t(e,i){var n,o,a,s=[],r=[],l=e.length;if(i)for(n=0;n<l;n++){a=e[n].points;for(o=0;o<a.length;o++){if(!a[o])continue;if(a[o].cacheItem&&a[o].cacheItem.selected)if(-1===s.indexOf(n)){s.push(n);r[n]=[a[o].idx]}else r[n].push(a[o].idx)}}return{lines:s,points:r,synqronize:s.length>1}},_isSelectedIndirectly:function t(e,i,n){var o,a,s,r=i?i.length:0,l=false;for(o=0;o<r;o++){s=n[i[o]];for(a=0;a<s.length;a++)if(e===s[a]){l=true;break}}return l},_getMeasureGradient:function t(e,i,n){var o={gradient:{colors:[],limits:[],x0:0,x1:0,y0:e.posMin,y1:e.posMax}};i.getColorMapping().slice().reverse().forEach(function(t){o.gradient.colors.push(t.grad[1].toRGBA());o.gradient.colors.push(t.grad[0].toRGBA());o.gradient.limits.push(Math.min(1,Math.max(0,n.getNormalizedValue(t.id[1]))));o.gradient.limits.push(Math.min(1,Math.max(0,n.getNormalizedValue(t.id[0]))))});return o},_getClippings:function t(e,i){var n=e.getPadding(),o=n.top-1,a=e.rect.height-n.top-n.bottom+2;return{areaClip:{x:0,y:o,width:i.width,height:a},lineClip:{x:0,y:o,width:i.width,height:a}}},_getColorSettings:function t(e,i,n){var o=.3,a=false,s=false;if(e.mode&&e.mode===e.MEASURE&&!Number.isNaN(+i.posMin)&&r(e._data)){o=.6;s=this._getMeasureGradient(i,e,n)}else if(e.mode&&e.mode===e.EXPRESSION||e.mode===e.MEASURE&&!Number.isNaN(+i.posMin)){a=true;o=.6}return{isExpression:a,areaAlpha:o,varyingPointColors:a,gradient:s}}});return n}.apply(e,n),void 0!==o&&(t.exports=o))},1252:function(t,e,i){"use strict";var n,o;!(n=[i(307),i(1052)],o=function(t,e){var i;i=t.extend("LineObjectLayer",{init:function t(e){this._super(e,{name:"line-objects-layer"})},updateInstances:function t(i,n){var o=i?i.length:0,a,s=[];this.renderer.stage.removeChildren();for(a=0;a<o;a++)s.push(new e(i[a],{showArea:n.showArea}));this.renderer.stage.addChildren(s);this._lineObjects=s},getLineObjects:function t(){return this._lineObjects},getPolyLinesInRange:function t(e,i,n){return this._lineObjects.map(function(t){return t.getLinesInRange(e,i,n)})},update:function t(e){var i,n=this._lineObjects?this._lineObjects.length:0;for(i=0;i<n;i++)this._lineObjects[i].update(e[i])}});return i}.apply(e,n),void 0!==o&&(t.exports=o))},1253:function(t,e,i){"use strict";var n,o;!(n=[i(292),i(1049),i(278),i(293)],o=function(t,e,i,n){var o;function a(t){switch(t){case"diamond":case"triangle":return new i;case"circle":return new e;case"line":return new n;default:return new n}}function s(t,e,i,n,o){var a=n;switch(o){case"circle":t.set(e,i,.5*a);break;case"diamond":t.set([{x:e,y:i-a/2},{x:e-a/2,y:i},{x:e,y:i+a/2},{x:e+a/2,y:i}]);break;case"triangle":t.set([{x:e,y:i-a/2},{x:e-a/2,y:i+a/2},{x:e+a/2,y:i+a/2}]);break;default:a=n;t.set(e-a/2,i-a/2,a,a)}}o=t.extend("Points",{init:function t(e){this._super();this._symbol=e||"circle"},update:function t(e){var i,n,o,r=e.points?e.points:[],l=0,c=false,d=r?r.length:0;for(n=0;n<d;n++){o=r[n];if(!o||o.outOfDimensionBounds||o.isNaN)continue;i=this._children[l++];if(!i){i=a(this._symbol);this.addChild(i)}s(i,o.x,o.y,o.size,this._symbol);i.fill=o.selectedIndirectly?"white":o.color;i.stroke=o.selectedIndirectly?o.color:!!o.selected&&"white";i.opacity=o.selected||o.selectedIndirectly?1:e.globalAlpha;i.strokeWidth=1.5;i.visible=!o.outOfBounds&&!o.isNaN&&!o.hidden&&(e.showDataPoints||o.isSingle||o.keep||o.selected);i.visible&&!c&&(c=i.true);i.data.outOfBounds=o.outOfBounds;i.data.value=o.value;i.data.label=o.label;i.data.dataIndex=o.dataIndex;i.data.text=o.text}l<this._children.length&&this.removeChildren(this._children.slice(l-this._children.length));this.visible=c;this._selectedSize=e.style.dataPoints.size.selected;return this},getFromRange:function t(i,n,o){return this.children.filter(function(t){return o?t.cx>=i&&t.cx<=n&&t.visible:t.cx>=i&&t.cx<n&&t.visible}).map(function(t){var i=new e(t.cx,t.cy,.5*this._selectedSize);i.fill=t.fill;i.stroke="white";i.opacity=1;i.strokeWidth=1.5;return i},this)}});return o}.apply(e,n),void 0!==o&&(t.exports=o))},1254:function(t,e,i){"use strict";var n,o;!(n=[i(292),i(278),i(1002)],o=function(t,e,i){var n,o={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function a(t){var e,i=[];for(e=0;e<t.length;e++)i=i.concat(s(t[e]));return i}function s(t){var e=[],i,n,o,a,l,c,d,u=t._polygons[0].points;if(!u||u.length<2)return e;t.data.selected=u[0].selected&&u[1].selected;c=null;d=u.length-1;for(l=1;l<u.length;l++)if(u[l-1].selected&&u[l].selected){c=l-1;break}if(null!==c){for(l=c;l<u.length;l++)if(!u[l].selected){d=l-1;break}n=u.slice(0,c+1);o=u.slice(c,d+1);a=u.slice(d);if(n&&n.length>1){i=r(n,t);e.push(i)}if(o&&o.length>1){i=r(o,t);i.data.selected=true;e.push(i)}if(a&&a.length>1){i=r(a,t);e=e.concat(s(i))}}else e.push(t);return e}function r(t,i){var n=new e(t);n.opacity=i.opacity;n.close=false;n.stroke=i.stroke;n.strokeWidth=i.strokeWidth;n.lineJoin=i.lineJoin;n.lineCap=i.lineCap;return n}function l(t,i,n,s){var r,l,c,d,u,f,h=[];d=i?i.length:0;u=[];for(r=0;r<d;r++){f=i[r];if(!f||f.isNaN&&true!==f.isInterpolationOffset){if((void 0!==f||!t.isNumeric)&&n===o.GAP&&c&&h.length){c.set(h);u.push(c);c=null;h=[]}continue}if(!c){c=new e;c.close=false;c.stroke=s||f.color||"#333333";c.lineJoin="round";c.lineCap="round";c.opacity=1;h=[];f.isNull&&!s&&i[r+1]&&(c.stroke=i[r+1].color||"#333333");if(f.hidden&&!s)for(l=1;l<d-r;++l)if(i[r+l]&&!i[r+l].hidden){c.stroke=i[r+l].color||"#333333";break}}h.push({x:f.x,y:f.y,selected:f.selected,dataIndex:f.dataIndex,y_:f.y1})}if(c&&h.length>1){c.set(h);u.push(c)}u=a(u);d=u.length;for(r=0;r<d;r++){u[r].strokeWidth=t.style.line.width*(u[r].data.selected?2:1);u[r].opacity=u[r].data.selected?1:t.globalAlpha}return u}function c(t,e,i,n){var a=e?e.length:0,s=t.interpolateVaryingColors,r=[],l,c,d=null,u,f,h,p;for(l=0;l<a;l++){u=e[l];if(!u||u.isNaN&&true!==u.isInterpolationOffset){void 0===u&&t.isNumeric||i!==o.GAP||(f=null);continue}if(f){d=new n(f.x,f.y,u.x,u.y);d.data.selected=f.selected&&u.selected;d.data.y1_=f.y1;d.data.y2_=u.y1;if(u.hidden||f.hidden){for(c=l;c>=0;c--)if(!e[c].hidden){h=e[c].color;break}if(void 0===h)for(c=l;c<a;c++)if(!e[c].hidden){h=e[c].color;break}p=h}else{h=f.color;p=u.color}f.color!==u.color?d.stroke={gradient:{x0:f.x,y0:0,x1:u.x,y1:0,limits:s?[0,1]:[0,.5,.5,1],colors:s?[h||"#333333",p||"#333333"]:[h||"#333333",h||"#333333",p||"#333333",p||"#333333"]}}:d.stroke=p||"#333333";d.opacity=d.data.selected?1:t.globalAlpha;d.strokeWidth=t.style.line.width*(d.data.selected?2:1);r.push(d);f=u}else f=u}return r}n=t.extend("PolyLine",{init:function t(){this._super();this.lineJoin="round";this.lineCap="round"},update:function t(e){this.clip=e.clippings.lineClip;this.removeChildren();e.colors.varyingPointColors?this.addChildren(n.getLines(e,e.points,e.nullMode,i)):this.addChildren(l.call(this,e,e.points,e.nullMode,e.colors.gradient))},getLineInRange:function t(e,i){var o=new n;this.children.forEach(function(t){var n=t.getPartialFromRange(e,i);if(!n)return;n.stroke=t.stroke;n.strokeWidth=3;n.close=t.close;o.addChildren([n])});return o}});n.getLines=c;return n}.apply(e,n),void 0!==o&&(t.exports=o))},1255:function(t,e,i){"use strict";var n,o;!(n=[i(292),i(278),i(1002)],o=function(t,e,i){var n;function o(t){return{x:t.x,y:t.y_}}function a(t,n){var a,s,r=[],l,c,d,u=n?n.length:0;for(a=0;a<u;a++){if(n[a]instanceof e){l=n[a]._polygons[0].points;s=new e(l.concat(l.map(o).reverse()));s.fill=t.colors.gradient||n[a].stroke;s.opacity=t.colors.areaAlpha*(n[a].data.selected?1:t.globalAlpha)}else if(n[a]instanceof i){c=Math.floor(n[a].x1);d=Math.floor(n[a].x2);l=[{x:c,y:n[a].y1},{x:c,y:n[a].data.y1_},{x:d,y:n[a].data.y2_},{x:d,y:n[a].y2}];s=new e(l);n[a].stroke.gradient?s.fill={gradient:{colors:n[a].stroke.gradient.colors,limits:n[a].stroke.gradient.limits,x0:n[a].stroke.gradient.x0,x1:n[a].stroke.gradient.x1,y0:0,y1:0}}:n[a].stroke?s.fill=n[a].stroke||"#eeeeee":s.fill=t.colors.gradient||"#eeeeee";s.opacity=t.colors.areaAlpha*(n[a].data.selected?1:t.globalAlpha)}s&&r.push(s)}return r}n=t.extend("PolyArea",{getAreaFromSegments:function e(i){var n=new t;n.addChildren(a(this.__data,i));return n},update:function t(e,i){this.__data=e;this.clip=e.clippings.areaClip;this.removeChildren();this.addChildren(a(e,i))}});return n}.apply(e,n),void 0!==o&&(t.exports=o))},1256:function(t,e,i){"use strict";var n,o;!(n=[i(307),i(203),i(413)],o=function(t,e,i){var n,o={LINE:"line",AREA:"area",STACKED:"stackedArea"};function a(){var t,e,i,n,a,s,r,l,c,d={},u,f=this.combinedMeasuresFormatter;this._allDataLineObjectsLength=this._allDataLineObjects?this._allDataLineObjects.length:0;this._dataLabelsOfLines=new Array(this._allDataLineObjectsLength);this._allDataPointLabels=[];for(t=0;t<this._allDataLineObjectsLength;t++){this._dataLabelsOfLines[t]=[];i=this._allDataLineObjects[t];s=i.find("Points [visible='true']");a=s?s.length:0;for(e=0;e<a;e++){r=s[e].getLocalBoundingRect();l=r.x+r.width/2;c=r.y+r.height/2;u=l+";"+c;if(u in d)continue;d[u]=true;n={text:this._lineType===o.STACKED&&this._allDataLineObjectsLength>1?f.formatValue(s[e].value):s[e].data.label,x0:l,y0:c,align:"center",font:this._style.dataPoints.font,maxWidth:512,maxNumLines:1,line:t};this._dataLabelsOfLines[t].push(n);this._allDataPointLabels.push(n)}}this._numAllDataPointLabels=this._allDataPointLabels.length}function s(){var t;for(t=0;t<this._numAllDataPointLabels;t++)this._allDataPointLabels[t].size=e.measureTextObject({type:"text",shape:this._allDataPointLabels[t]})}function r(){s.call(this);var t,e,i,n,o,a,r,l=this._discreteSpacing/2;var c="leftDx",d="leftDy",u="rightDx",f="rightDy",h=1;if(this.yMirrorMode){c="rightDx";d="rightDy";u="leftDx";f="leftDy";h=-1}for(t=0;t<this._allDataLineObjectsLength;t++){n=this._dataLabelsOfLines[t];i=n.length;if(0===i)continue;if(1===i){o=n[0];o[c]=l;o[d]=0;o[u]=l;o[f]=0;continue}o=n[0];o.priority=6;r=n[1];o[c]=l;o[d]=0;o[u]=(r.x0-o.x0)*h;o[f]=o.y0-r.y0;for(e=1;e<i-1;e++){o=n[e];a=n[e-1];r=n[e+1];o[c]=a[u];o[d]=-a[f];o[u]=(r.x0-o.x0)*h;o[f]=o.y0-r.y0;a.y0<o.y0?o.y0<r.y0?o.priority=1:o.y0===r.y0?o.priority=2:o.priority=3:a.y0===o.y0?o.y0<r.y0?o.priority=2:o.y0===r.y0?o.priority=0:o.priority=2:o.y0<r.y0?o.priority=4:o.y0===r.y0?o.priority=2:o.priority=1}o=n[i-1];a=n[i-2];o[c]=a[u];o[d]=-a[f];o[u]=l;o[f]=0;o.priority=5}}function l(){void 0!==this._usedDataMax&&this._usedDataMax===this._usedDataMin?this._allDataPointLabels.sort(function(t,e){return t.x0<e.x0?-1:1}):this._allDataPointLabels.sort(function(t,e){if(t.priority>e.priority)return-1;if(t.priority===e.priority){if(6===t.priority)return t.x0===e.x0?t.y0>e.y0?1:-1:t.x0>e.x0?1:-1;if(5===t.priority)return t.x0===e.x0?t.y0>e.y0?1:-1:t.x0>e.x0?-1:1;if(4===t.priority)return t.y0>e.y0?1:-1;if(3===t.priority)return t.y0>e.y0?-1:1;if(t.y0===e.y0)return t.x0>e.x0?-1:1;return t.y0<e.y0?-1:1}return 1})}function c(){var t,e,i,n,o,a,s=[],r;for(t=0;t<this._allDataLineObjectsLength;t++){i=this._allDataLineObjects[t];n=i.find("PolyLine [stroke]");o=n?n.length:0;for(e=0;e<o;e++){a=n[e];r=a.getLocalPoints();s.push(r)}}return s}function d(t,e){if(t.minX2>e.maxX2||t.maxX2<e.minX2||t.minY2>e.maxY2||t.maxY2<e.minY2)return false;return true}function u(t){var e=this._allDataPointLabels[t],i=0,n=this.rect.width,o=0,a=this.rect.height;return e.x0>=i&&e.x0<=n&&e.minX>=i&&e.maxX<=n&&e.minY>=o&&e.maxY<=a}function f(t){return!i.checkPolylinesIntersectingRectDefinedByMaxMin(this._polylines,this._allDataPointLabels[t])}function h(t){var e=this._allDataPointLabels[t],i=(e.minX+e.maxX)/2,n=(e.minY+e.maxY)/2,o=Math.pow(i-e.x0,2)+Math.pow(n-e.y0,2),a,s;for(s=0;s<this._numAllDataPointLabels;s++){a=this._allDataPointLabels[s];if(s!==t&&o>=Math.pow(i-a.x0,2)+Math.pow(n-a.y0,2))return false}return true}function p(t){var e,i=this._allDataPointLabels[t];for(e=0;e<t;e++)if(this._allDataPointLabels[e].status&&d(i,this._allDataPointLabels[e]))return false;return true}function g(t){if(!u.call(this,t))return false;if(!h.call(this,t))return false;if(!f.call(this,t))return false;return p.call(this,t)}function y(t){var e,i,n,o=this._dataLabelHorizontalGap/2,a=this._dataLabelVerticalGap/2;e=t.size.width/2;i=e+o;t.minX=t.x-e;t.maxX=t.x+e;t.minX2=t.x-i;t.maxX2=t.x+i;n=t.size.height;if("top"===t.baseline){t.minY=t.y;t.maxY=t.y+n;t.maxY2=t.maxY+a;t.minY2=t.minY-a}if("bottom"===t.baseline){t.maxY=t.y;t.minY=t.y-n;t.maxY2=t.maxY+a;t.minY2=t.minY-a}if("middle"===t.baseline){t.maxY=t.y+n/2;t.minY=t.y-n/2;t.maxY2=t.maxY+a;t.minY2=t.minY-a}}function v(t){6===t.priority&&t.x-t.size.width/2<0&&(t.x=t.size.width/2+1);5===t.priority&&t.x+t.size.width/2>this.rect.width&&(t.x=this.rect.width-t.size.width/2-1)}function m(t){t.baseline="middle";t.x=t.x0-t.size.width/2-this._dataLabelHorizontalGap;t.y=t.y0;return true}function b(t){t.baseline="middle";t.x=t.x0+t.size.width/2+this._dataLabelHorizontalGap;t.y=t.y0;return true}function x(t){t.baseline="bottom";t.x=t.x0;t.y=t.y0-this._dataLabelMargin;v.call(this,t);return true}function S(t){t.baseline="top";t.x=t.x0;t.y=t.y0+this._dataLabelMargin;v.call(this,t);return true}function _(t){var e,i,n,o,a,s=t.leftDx,r=t.rightDx,l=t.leftDy,c=t.rightDy,d=1e-9;if(l>0||c>0){l=Math.max(l,d);c=Math.max(c,d);e=t.size.width+2*this._horizontalDistanceFromLine;n=e/(s/l+r/c);if(n<=this._maxDataLabelMargin){t.baseline="bottom";n=Math.max(n,this._dataLabelMargin);t.y=t.y0-n;o=n*s/l;a=n*r/c;i=e/2;o<i?t.x=t.x0+(i-o):a<i&&(t.x=t.x0-(i-a));return true}}return false}function I(t){var e,i,n,o,a,s=t.leftDx,r=t.rightDx,l=-t.leftDy,c=-t.rightDy,d=1e-9;if(l>0||c>0){l=Math.max(l,d);c=Math.max(c,d);e=t.size.width+2*this._horizontalDistanceFromLine;n=e/(s/l+r/c);if(n<=this._maxDataLabelMargin){t.baseline="top";n=Math.max(n,this._dataLabelMargin);t.y=t.y0+n;o=n*s/l;a=n*r/c;i=e/2;o<i?t.x=t.x0+(i-o):a<i&&(t.x=t.x0-(i-a));return true}}return false}function w(t){var e,i,n=t.leftDx,o=t.leftDy;t.baseline="middle";e=t.size.height/2+this._horizontalDistanceFromLine;i=Math.abs(this._dataLabelHorizontalGap*o/n);t.x=t.x0-t.size.width/2-this._dataLabelHorizontalGap;t.y=t.y0+(i>=e?0:o>0?e-i:i-e);return true}function P(t){var e,i,n=t.rightDx,o=t.rightDy;t.baseline="middle";e=t.size.height/2+this._horizontalDistanceFromLine;i=Math.abs(this._dataLabelHorizontalGap*o/n);t.x=t.x0+t.size.width/2+this._dataLabelHorizontalGap;t.y=t.y0+(i>=e?0:o>0?e-i:i-e);return true}function q(t){var e=0,i=this.rect.width,n,o,a=9,s,r;if(t.priority>3){t.baseline="middle";if(t.x0-e<=i-t.x0){t.x=t.x0+a+t.size.width/2;t.y=t.y0}else{t.x=t.x0-a-t.size.width/2;t.y=t.y0}}else if(3===t.priority){n=t.leftDy/t.leftDx;o=t.rightDy/t.rightDx;if(o>=n){s=(t.size.height/2+1)/o;if(s<=2*a){t.baseline="middle";t.y=t.y0;t.x=t.x0+Math.max(s,a)+t.size.width/2}else{r=2*a*o-1;t.baseline="top";t.y=t.y0-r;t.x=t.x0+2*a+t.size.width/2}}else{s=(t.size.height/2+1)/n;if(s<=2*a){t.baseline="middle";t.y=t.y0;t.x=t.x0-Math.max(s,a)-t.size.width/2}else{r=2*a*n-1;t.baseline="top";t.y=t.y0-r;t.x=t.x0-2*a-t.size.width/2}}}return true}function M(t){var e;if(t.rightDy<=0){t.baseline="bottom";t.x=t.x0+t.size.width/2;t.y=t.y0+1}else if(t.rightDy<=t.rightDx){t.baseline="bottom";t.x=t.x0+t.size.width/2;t.y=t.y0-t.size.width*Math.abs(t.rightDy/t.rightDx)-1}else{t.baseline="top";e=Math.max(0,t.size.height+1-this.rect.height+t.y0);t.x=t.x0+t.size.width/2+e*Math.abs(t.rightDx/t.rightDy);t.y=t.y0-e+1}return true}function D(t){var e;if(t.leftDy<=0){t.baseline="bottom";t.x=t.x0-t.size.width/2;t.y=t.y0+1}else if(t.leftDy<=t.leftDx){t.baseline="bottom";t.x=t.x0-t.size.width/2;t.y=t.y0-t.size.width*Math.abs(t.leftDy/t.leftDx)-1}else{t.baseline="top";e=Math.max(0,t.size.height+1-this.rect.height+t.y0);t.x=t.x0-t.size.width/2-e*Math.abs(t.leftDx/t.leftDy);t.y=t.y0-e+1}return true}function C(t,e){var i=this._allDataPointLabels[e];if(!i.status&&t.call(this,i)){y.call(this,i);i.status=g.call(this,e)}}function L(t){var e=this._allDataPointLabels[t];if(this._allDataLineObjectsLength>1){6===e.priority&&C.apply(this,[m,t]);5===e.priority&&C.apply(this,[b,t]);C.apply(this,[x,t]);C.apply(this,[S,t])}else{C.apply(this,[x,t]);C.apply(this,[S,t]);6===e.priority&&C.apply(this,[m,t]);5===e.priority&&C.apply(this,[b,t])}if(!e.status)if(e.rightDy+Math.abs(e.rightDx)*e.leftDy/Math.abs(e.leftDx)>=0){C.apply(this,[I,t]);C.apply(this,[_,t])}else{C.apply(this,[_,t]);C.apply(this,[I,t])}if(!e.status)if(e.rightDy+Math.abs(e.rightDx)*e.leftDy/Math.abs(e.leftDx)>=0){C.apply(this,[w,t]);C.apply(this,[P,t])}else{C.apply(this,[P,t]);C.apply(this,[w,t])}C.apply(this,[q,t]);e.status||6!==e.priority||C.apply(this,[M,t]);e.status||5!==e.priority||C.apply(this,[D,t])}function k(){var t;for(t=0;t<this._numAllDataPointLabels;t++)L.call(this,t)}function z(){var t,e,i,n=[];for(t=0;t<this._numAllDataPointLabels;t++){e=this._allDataPointLabels[t];if(e.status){i={type:"text",fill:this._style.dataPoints.color,shape:e};n.push(i)}}this.renderer.shapes=n}n=t.extend("LabelLayer",{init:function t(i){this.wrapper=document.createElement("div");this.wrapper.style.position="absolute";this.renderer=new e(this.wrapper);this.minorAxis=null;this.majorAxis=null;i.appendChild(this.wrapper);this._dataLabelMargin=6;this._maxDataLabelMargin=12;this._dataLabelHorizontalGap=6;this._dataLabelVerticalGap=3;this._horizontalDistanceFromLine=2},setYMirrorMode:function t(e){this.yMirrorMode=e},update:function t(e,i){this.combinedMeasuresFormatter=i.combinedMeasuresFormatter;this._allDataLineObjects=e;this._lineType=i.lineType;this._discreteSpacing=i.majorAxis.getDiscreteSpacing();this._style=i.style;this.rect=i.rect;this.renderer.shapes=[];a.call(this);r.call(this);l.call(this);this._polylines=c.call(this);k.call(this);z.call(this)}});return n}.apply(e,n),void 0!==o&&(t.exports=o))},1257:function(t,e,i){"use strict";var n,o;!(n=[i(307),i(1052)],o=function(t){var e;e=t.extend("LineHighlightLayer",{init:function t(){this._super.apply(this,arguments);this.ranges=[]},getLineObjects:function t(){return this._lineObjects},setRanges:function t(e){this.ranges=e},update:function t(e,i){var n=[];this.ranges.forEach(function(t){var o=e.getPositionOfValue(t.min);var a=e.getPositionOfValue(t.max);n=n.concat(i.getPolyLinesInRange(o,a,t.maxIncluded))},this);this.renderer.stage.removeChildren();if(n.length){this.renderer.stage.addChildren(n);this.show()}else this.hide()}});return e}.apply(e,n),void 0!==o&&(t.exports=o))},1270:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(159),i(114)],o=function(t,e,i){var n={};var o=e.supportDirAuto();function a(t){return t.is("textarea,input")&&0===t.val().length||""===t[0].textContent&&0===t.has("img").length}function s(t,e){a(t)?t.css("direction",e):"rtl"!==t.css("direction")&&"ltr"!==t.css("direction")||t.css("direction","")}function r(i,n,o){i.find("div,p").each(function(i,a){n?"auto"!==a.getAttribute("dir")&&a.setAttribute("dir","auto"):a.setAttribute("dir",e.detectTextDirection(a.innerText));s(t(a),o)})}n.enable=function(n,a){var l=t(n);s(l,i.direction);l.attr("dir",e.getAutoOrAlternativeDirection(l[0].innerText));if(a){l.attr("x-auto-direction-for-paragraphs","");r(l,o,i.direction)}l.on("keyup",function(){o||l.attr("dir",e.detectTextDirection(l[0].innerText));a&&r(l,o,i.direction);s(l,i.direction)})};return n}.apply(e,n),void 0!==o&&(t.exports=o))},1280:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(1161),i(94),i(1720),i(172),i(122),i(91),i(120),i(202)],o=function(t,e,i,n,o,a,s,r,l,c){function d(){i.prevSlideId=a.currentSlideId;i.isViewingSource=true}var u={gotoObject:function n(a,s){d();i.objectId=s.layout.sourceObjectId;function l(){s.app.getObject(i.objectId).then(function(){},function(){e.getService("qvAlertDialog").show({title:r.get("Storytelling.GotoSource.MissingVisualization.Title"),message:r.get("Storytelling.GotoSource.MissingVisualization"),closeLabel:r.get("Common.OK")})})}function c(e){if(e){t("body").removeClass("qv-story-play");l()}}a.layout&&a.layout.qEmbeddedSnapshot?o.applyEmbeddedSnapshot(s).then(function(t){c(t)}):o.applySnapshot(s.id,s).then(function(t){c(t)})},gotoSheet:function e(i,o){d();n.SheetChanged.emit(o);l.get(i).then(function(e){var n=e.layout.qMeta&&e.layout.qMeta.published;c.getCurrentSheetViewState(n).then(function(e){s.goToSheet(i,e);t("body").removeClass("qv-story-play")})})},gotoBookmark:function e(i){d();o.applyBookmark(i,true).then(function(e){e&&t("body").removeClass("qv-story-play")})}};return u}.apply(e,n),void 0!==o&&(t.exports=o))},1281:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(2613)],o=function(t,e){function i(t){var e=[];/top/.exec(t)&&e.push("v-top");/bottom/.exec(t)&&e.push("v-bottom");/horizontal/.exec(t)&&e.push("v-center");/left/.exec(t)&&e.push("h-left");/right/.exec(t)&&e.push("h-right");e=e.map(function(t){return"qv-flag-"+t});return e.join(" ")}var n={template:e,controller:["$scope",function(t){t.flags=[];t.items.forEach(function(e){t.flags.push({title:e.title,label:e.label,style:{top:e.position.y+"px",left:e.position.x+"px"},orientationClasses:i(e.orientation)})})}]};return{show:function e(i,o){var a=Math.max(t(".qv-grid-story, .qv-story-slide-active").outerWidth()/100||12);i[0].style.fontSize=Math.round(a)+"px";i.showComponent(n,{items:o})}}}.apply(e,n),void 0!==o&&(t.exports=o))},1685:function(t,e){t.exports='<lui-popover class="lui-popover--inverse highlight-value-props-popover" qva-outside-ignore-for="{{input.qvaOutsideIgnoreFor}}">\n\t<div class="lui-popover__header highlight-value-props-popover-header">\n\t\t<div q-translation="Storytelling.Effect.SelectDataPoint" class="qv-highlight-value-select-text highlight-value-props-popover-text">Select data point</div>\n\t</div>\n\t<div class = "lui-popover__body--nopad">\n\t\t<div class="qv-highlight-value-select">\n\t\t\t<lui-select class="highlight-value-props-popover-input" x-variant="inverse" x-model="effect.selectedIndex" x-change="change()" x-options="point.value as point.text group by point.optionGroup for point in effect.dataPoints"></lui-select>\n\t\t</div>\n\t</div>\n</lui-popover>'},1686:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=l(i(98));var o=r(i(116));var a=r(i(110));var s=r(i(1808));function r(t){return t&&t.__esModule?t:{default:t}}function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}e.default=t;return e}function c(t){c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return c(t)}function d(){d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return d.apply(this,arguments)}function u(t,e){if(null==t)return{};var i=f(t,e);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++){n=a[o];if(e.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(t,n))continue;i[n]=t[n]}}return i}function f(t,e){if(null==t)return{};var i={};var n=Object.keys(t);var o,a;for(a=0;a<n.length;a++){o=n[a];if(e.indexOf(o)>=0)continue;i[o]=t[o]}return i}function h(t,e){return y(t)||g(t,e)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function g(t,e){var i=[];var n=true;var o=false;var a=void 0;try{for(var s=t[Symbol.iterator](),r;!(n=(r=s.next()).done);n=true){i.push(r.value);if(e&&i.length===e)break}}catch(t){o=true;a=t}finally{try{n||null==s["return"]||s["return"]()}finally{if(o)throw a}}return i}function y(t){if(Array.isArray(t))return t}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function b(t,e,i){e&&m(t.prototype,e);i&&m(t,i);return t}function x(t,e){if(e&&("object"===c(e)||"function"===typeof e))return e;return _(t)}function S(t){S=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return S(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&w(t,e)}function w(t,e){w=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return w(t,e)}function P(t){return t.displayName||t.name||"Component"}function q(t,e){var i=function(i){I(o,i);function o(t){var e;v(this,o);e=x(this,S(o).call(this,t));e.state={story:null};e.updateStory=e.updateStory.bind(_(e));return e}b(o,[{key:"componentDidMount",value:function t(){this.updateStory()}},{key:"componentDidUpdate",value:function t(e){var i=this.props.urlParameters;i!==e.urlParameters&&this.updateStory()}},{key:"componentWillUnmount",value:function t(){this.unmounting=true}},{key:"updateStory",value:function t(){var i=this;var n=this.props,o=n.app,r=n.urlParameters;var l=h(r,1),c=l[0];o.getObject(c).then(function(t){i.unmounting||i.setState({story:t})},function(t){if(e){var i=t.error.code===a.default.NxLocalizedErrorCode.LOCERR_GENERIC_NOT_FOUND;(0,s.default)(i)}})}},{key:"render",value:function e(){var i=this.props,o=i.urlParameters,a=u(i,["urlParameters"]);var s=this.state.story;if(!s)return null;var r=h(o,3),l=r[1],c=r[2];return n.default.createElement(t,d({},a,{slideId:c,state:l,story:s}))}}]);return o}(n.Component);i.propTypes={app:o.default.object.isRequired,urlParameters:o.default.array.isRequired};i.displayName="WithStory(".concat(P(t),")");return i}var M=q;e.default=M;t.exports=e.default},1687:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=r(i(98));var o=s(i(116));var a=s(i(1808));function s(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}e.default=t;return e}function l(t){l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return l(t)}function c(){c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return c.apply(this,arguments)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function f(t,e,i){e&&u(t.prototype,e);i&&u(t,i);return t}function h(t,e){if(e&&("object"===l(e)||"function"===typeof e))return e;return g(t)}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return p(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&v(t,e)}function v(t,e){v=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return v(t,e)}function m(t){return t.displayName||t.name||"Component"}function b(t,e){var i=function(i){y(o,i);function o(t){var e;d(this,o);e=h(this,p(o).call(this,t));e.state={storyLayout:null};e.updateStory=e.updateStory.bind(g(e));return e}f(o,[{key:"componentDidMount",value:function t(){var e=this.props.story;e&&this.updateStory()}},{key:"componentDidUpdate",value:function t(e){var i=this.props.story;i!==e.story&&this.updateStory()}},{key:"componentWillUnmount",value:function t(){this.unmounting=true}},{key:"updateStory",value:function t(){var i=this;var n=this.props.story;n.getLayout().then(function(t){i.unmounting||("story"===t.qInfo.qType?i.setState({storyLayout:t}):e&&(0,a.default)(true))})}},{key:"render",value:function e(){var i=this.state.storyLayout;if(!i)return null;return n.default.createElement(t,c({},this.props,{storyLayout:i}))}}]);return o}(n.Component);i.propTypes={story:o.default.object};i.defaultProps={story:null};i.displayName="WithStoryLayout(".concat(m(t),")");return i}var x=b;e.default=x;t.exports=e.default},1802:function(t,e,i){"use strict";var n,o;!(n=[],o=function(){var t={KEY_ESC:27,KEY_LEFT_ARROW:37,KEY_UP_ARROW:38,KEY_RIGHT_ARROW:39,KEY_DOWN_ARROW:40,KEY_SPACEBAR:32},e={LEFT:0,RIGHT:1};function i(e,i){return e===t.KEY_UP_ARROW||!i&&e===t.KEY_LEFT_ARROW||i&&e===t.KEY_RIGHT_ARROW}function n(e,i){return e===t.KEY_DOWN_ARROW||e===t.KEY_SPACEBAR||!i&&e===t.KEY_RIGHT_ARROW||i&&e===t.KEY_LEFT_ARROW}function o(t,i){return t===e.LEFT&&i||t===e.RIGHT&&!i?1:t===e.LEFT&&!i||t===e.RIGHT&&i?-1:0}return{keys:t,navDirections:e,isPreviousKey:i,isNextKey:n,getSlideDiff:o}}.apply(e,n),void 0!==o&&(t.exports=o))},1803:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(114),i(1802),i(2598)],o=function(t,e,i,n){function o(t,n){if(!t.sheetLocked)return;var o=n.velocity>3&&n.percentage>8||n.percentage>23;if(o){if("right"!==n.direction||this.startRightPanning||this.zoomPanHandler.zoomPanInfo.pannedRight){if("left"!==n.direction||this.startLeftPanning||this.zoomPanHandler.zoomPanInfo.pannedLeft)return;t.moveSlideFocus(i.getSlideDiff(i.navDirections.LEFT,e.isRtl))}else t.moveSlideFocus(i.getSlideDiff(i.navDirections.RIGHT,e.isRtl));t.$apply()}}function a(){this.startLeftPanning=this.zoomPanHandler.zoomPanInfo.pannedLeft;this.startRightPanning=this.zoomPanHandler.zoomPanInfo.pannedRight;t("#qs-chart-tooltip > div").hide()}var s=function t(){this.init=function(t,e){var i=".qv-story-slide-active";this.zoomPanHandler=new n(t,i,{panEndCallback:o.bind(this,e),startCallback:a.bind(this,e),enable:function t(){return e.sheetLocked}})};this.reset=function(){this.zoomPanHandler.reset()};this.destroy=function(){this.zoomPanHandler&&this.zoomPanHandler.destroy()}};return new s}.apply(e,n),void 0!==o&&(t.exports=o))},1804:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(2599),i(106),i(340),i(172),i(1805),i(94),i(114),i(2600),i(2601),i(97),i(100),i(319),i(296),i(298),i(2602),i(2603),i(1725),i(2604),i(2606),i(2621),i(2623),i(1807),i(2626)],o=function(t,e,i,n,o,a,s,r,l,c,d,u,f){e.directive("qvSlideItemSection",function(){return{restrict:"E",replace:true,template:i,controller:["$scope","$element",function(e,i){var h;e.theme=f;e.editController=null;e.zindex=null;e.dragging=false;e.inEdit=false;e.doRemove=false;e.isNew=false;e.ratio=e.slideItem.qData.ratio;e.visualization=e.slideItem.qData.visualization;e.visualizationType=e.slideItem.qData.visualizationType;e.id=e.slideItem.qInfo.qId;e.extraClass="qv-story-"+e.visualization+(e.visualizationType?"-"+e.visualizationType:"");function p(){e.direction=l.direction}e.direction=l.direction;l.DirectionChanged.bind(p);e.setActive=function(t){i.parent().toggleClass("qv-fade-border");e.active=t;t?i.parent().css({"z-index":201}):i.parent().css({"z-index":e.zindex});setTimeout(function(){i.parent().toggleClass("qv-fade-border")})};if(a.lastObjAdded.id===e.slideItem.qInfo.qId){e.isNew=true;e.active=true}o.get(e.slideItem.qInfo.qId).then(function(t){e.slideItemModel=t;e.slideItemModel.Closed.bind(g)});n(e,"slideItemModel",function(t){var n=i.parent()[0].style&&i.parent()[0].style.top,o=i.parent()[0].style&&i.parent()[0].style.left;if(!t.position)return;void 0!==t.sheetId&&""===t.sheetId&&i.find(".sheet-in-story").empty();e.position=t.position;e.ratio=t.ratio;i.parent().css(e.position);n!==e.position.top&&o!==e.position.left&&e.$broadcast("slideItemPositioned");i.parent().hasClass("item-active")&&e.zindex===t.position["z-index"]&&i.parent().css({"z-index":201});e.zindex=t.position["z-index"];if("shape"===e.visualization){t.style.colorPaletteIndex&&-1!==t.style.colorPaletteIndex?e.shapeColor=f.resolveColor({index:t.style.colorPaletteIndex}):e.shapeColor=t.style.color;e.colorPaletteIndex=t.style.colorPaletteIndex}"snapshot"===e.visualization&&(e.snapshotId=t.style.id)});function g(){e.slideItemModel&&e.slideItemModel.Closed.unbind(g);e.slideItemModel=null;h&&h()}e.isInPlay=function(){return r.state===r.States.play};e.updateProperties=function(i,n){var o=t.extend(true,o,n);if(!e.slideItemModel)return;return e.slideItemModel.getProperties().then(function(i){var n={};n=t.extend(true,i,o);n.srcPath&&n.srcPath.qStaticContentUrlDef&&n.srcPath.qStaticContentUrlDef.qUrl&&n.srcPath.qStaticContentUrlDef.qUrl.indexOf("http")>=0&&(n.srcPath.qStaticContentUrlDef.qUrl="");return e.slideItemModel.setProperties(n)})};if(r.state!==r.States.editstory)return;e.fade=true;e.onSlideItemClick=function(t){c.click(y,t);"sheet"===e.visualization||t&&"effectLayer"===t.target.className&&!c.isInside(t)?e.setActive(false):e.setActive(true)};function y(t){var n=i.find(".slide-item-props-btn");if("text"===e.visualization||"image"===e.visualization){if(n&&t&&(t.target===n[0]||t.target.parentElement===n[0]))return;e.onEditClick(t)}}e.onSlideItemClickOutside=function(i){var n=t(i.target);if(!e.active||n.parents().hasClass("qv-storytelling-edit-toolbar")||n.parents().hasClass("qv-highlight-value-props")||n.parents(".qv-contextmenu").length>0||n.parents(".lui-popover, .qui-immidiateContextual").length>0||n.parents(".font-size-menu-tooltip").length>0||n.parents(".tooltip-storytelling-slideitem-props").length>0||n.parents(".qv-texttool-toolbar, .qv-modal-container, .export-story-popover").length>0||n.hasClass("qv-cp-popup")||t("#snapshot-properties-dialog").length>0){i.preventDefault();return}m();e.setActive(false);e.isNew=false};e.onEditClick=function t(n){if(n){n.stopPropagation();n.preventDefault()}if(e.inEdit){m();return}e.inEdit=true;if(e.active){e.editButton=i.find(".slide-item-props-btn");switch(e.visualization){case"snapshot":e.initSnapshotProperties();break;case"image":e.initImageProperties();break;case"text":l.isRtl&&v();e.initTextEditor();break}}};function v(){var t=a.getElementPosition(i.parents(".qv-story-grid-object"),"right");i.parent().css(t)}function m(){if("text"===e.visualization){a.slideItemOutsideSlide(i.parents(".qv-story-grid-object"),t("#selectable"),a.getGridOptions().cellSize);e.position=a.getElementPosition(i.parents(".qv-story-grid-object"),"left");e.saveText()}e.inEdit=false}e.removeItem=function t(i){e.doRemove=true;e.setActive(false);e.inEdit=false;e.isNew=false;e.effectPropsOpen=false;u.off("end",b);return s.updateLayerPositionFiltered(i,e)};e.$on("startResize",function(){m()});e.$on("updateLayers",function(){e.doRemove||e.updateProperties(e.slideItem.qInfo.qId,{position:e.slideItem.qData.position})});e.$on("snapshotPropertiesClosed",function(){e.inEdit=false});e.$on("snapshotModelClosed",function(){g()});e.$watch("ratio",function(){if("sheet"===e.visualization)return;d.create(e,i)});e.$watch("active",function(){e.active?a.setSelectedSlideItemElem(i.parent()):a.getSelectedSlideItemElem()&&a.getSelectedSlideItemElem().attr("id")===i.parent().attr("id")&&a.setSelectedSlideItemElem(null)});e.$watchCollection("[position.height, position.width]",function(t,i){t[0]&&i[0]&&e.$broadcast("slideItemResized",t,i)},true);var b=d.create.bind(this,e,i);u.on("end",b);e.$on("$destroy",function(){a.lastObjAdded.id=null;u.off("end",b);l.DirectionChanged.unbind(p);g()})}]}})}.apply(e,n),void 0!==o&&(t.exports=o))},1805:function(t,e,i){"use strict";var n,o;!(n=[],o=function(){var t=4;function e(t,e,o,a){a.slideModel.getFullPropertyTree().then(function(s){var r=s.qChildren,l=s.qChildren[a.$index];i(t,e,o,r,l);n(r);a.slideModel.setFullPropertyTree(s)})}function i(t,e,i,n,o){var s=o.qProperty.position,r,l;a(n);if(i){s["z-index"]=n.length+10;a(n)}else if(e){s["z-index"]=0;a(n)}else{r=n.indexOf(o);l=n[r];if(r+t>=0&&r+t+1<=n.length){n[r]=n[r+t];n[r+t]=l}}}function n(e){for(var i=0;i<e.length;i++)e[i].qProperty.position["z-index"]=t+i}function o(t,e){return e.slideModel.getFullPropertyTree().then(function(i){var o=-1;for(var s=0;s<i.qChildren.length;++s)if(i.qChildren[s].qProperty.qInfo.qId===t){o=s;break}o>=0&&i.qChildren.splice(o,1);a(i.qChildren);n(i.qChildren);return e.slideModel.setFullPropertyTree(i)})}function a(t){t.sort(s)}function s(t,e){if(t.qProperty.position["z-index"]>e.qProperty.position["z-index"])return 1;if(t.qProperty.position["z-index"]<e.qProperty.position["z-index"])return-1;return 0}return{changeLayerPosition:e,prepareNewLayering:i,updateLayerPositionForAll:n,updateLayerPositionFiltered:o,sortByLayer:a}}.apply(e,n),void 0!==o&&(t.exports=o))},1806:function(t,e,i){"use strict";var n,o;!(n=[i(90),i(11),i(247)],o=function(t,e,i){function n(e,i){e.getProperties().then(function(n){var o=t.extend(true,n,{ratio:i});e.setProperties(o)})}function o(t){t.options.freeResize=true;t.getVisualization().then(function(t){t.setFreeResize(true)})}function a(t,e,i){var n=t[0].clientWidth/e.object.size.w,o=t[0].clientHeight/e.object.size.h,a=n<o?n:o;var s="scale("+a+")";i["-webkit-transform"]=s;i["-moz-transform"]=s;i["-ms-transform"]=s;i["transform"]=s}function s(t){return t.slideItemModel.getProperties().then(function(n){t.slideItemModel.position=t.position;t.slideItemModel.setProperties(n).then(function(){return t.getVisualization().then(function(n){t.options.freeResize=false;n.setFreeResize(false);return t.model.getProperties().then(function(o){return i.prepSnapshotData(o,n,false).then(function(){o=e.extend(true,t.model.layout,o);return t.model.setProperties(o)})})})})})}return{lockUnlockRatio:n,resizeFreely:o,cssScaleSnapshot:a,saveState:s}}.apply(e,n),void 0!==o&&(t.exports=o))},1807:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(2618),i(2619),i(340),i(172),i(426),i(93)],o=function(t,e,i,n,o,a,s,r){var l,c=false;function d(t){t.on("mousedown.snapshotLibrary",function(){c=true})}function u(t){t.off("mousedown.snapshotLibrary");c=false}function f(){return c}e.service("snapshotReplaceService",function(){function h(t,e,i,n){r.getApp().then(function(r){r.getObject(a.currentSlideId).then(function(r){var l={position:i.qData.position,ratio:i.qData.ratio,visualization:"snapshot",visualizationType:e,style:{id:t}};s.get().then(function(e){e.startGroup().then(function(s){o.create(l,r).then(function(o){a.lastObjAdded.id=o.id;o.embedSnapshotObject(t).then(function(){o.getSnapshotObject().then(function(t){t.getProperties().then(function(o){p.info.snapshotData.object&&(o.snapshotData.object.size=p.info.snapshotData.object.size);p.info.snapshotData.content&&o.snapshotData.content&&(o.snapshotData.content.size=p.info.snapshotData.content.size);t.setProperties(o).then(function(){n(i.qInfo.qId).then(function(){e.endGroup(s)})})})})})})})})})})}var p={info:{},showList:function o(a,s,r,g,y){l&&l.close();if(f()){u(t(g));return}d(t(g));p.info.snapshotId=a;p.info.objectId=r.layout.sourceObjectId;p.info.alignTo=g;p.info.snapshotData=r.layout.snapshotData;l=e.getService("luiPopover").show({template:n,controller:i,alignTo:g,input:{serviceInfo:p.info,slideItemObject:s,snapshotModel:r,cleanUp:function e(){c||u(t(g))},closePopover:function t(){if(l){l.close();l=null}},replaceSnapshotCallback:h,removeItemCallback:y},dock:"bottom"});l.opened.catch(function(t){false});l.closed.catch(function(t){false});l.closing.catch(function(t){false})}};return p})}.apply(e,n),void 0!==o&&(t.exports=o))},1808:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=u;var n=d(i(48));var o=d(i(91));var a=d(i(122));var s=d(i(94));var r=d(i(228));var l=d(i(177));var c=i(90);function d(t){return t&&t.__esModule?t:{default:t}}function u(t){if(t){var e=n.default.getService("$delayedModal");e.open({title:o.default.get("Error.StoryNotFound.Title"),content:o.default.get("Error.StoryNotFound.Message"),buttons:[]})}s.default.setView(s.default.Views.story);l.default.setStory(null,null,null,(0,c.getParameterByName)("app"));setTimeout(function(){r.default.setNavigationMode(r.default.NavigationMode.story);a.default.goToOverview()},0)}t.exports=e.default},2578:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=f(i(98));var o=f(i(2579));var a=f(i(2640));var s=f(i(2642));var r=f(i(2643));var l=f(i(362));var c=f(i(997));var d=f(i(988));var u=f(i(1086));i(2644);function f(t){return t&&t.__esModule?t:{default:t}}var h={helpKey:"Story_Story",loaderTranslationKey:"App.IsLoading.Story",titleTranslationKey:"",init:function t(){l.default.init()},renderContent:function t(){false;return n.default.createElement(o.default,null)},renderMenuItems:function t(e){var i=e.closeMenu;return n.default.createElement(s.default,{closeMenu:i})},renderToolbarContent:function t(){return n.default.createElement(a.default,null)}};e.default=h;t.exports=e.default},2579:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=v(i(98));var o=y(i(116));var a=y(i(11));var s=y(i(94));var r=y(i(172));var l=y(i(2580));var c=y(i(362));var d=y(i(1005));var u=y(i(177));var f=i(90);var h=y(i(1686));var p=y(i(1687));var g=y(i(411));function y(t){return t&&t.__esModule?t:{default:t}}function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}e.default=t;return e}function m(t){m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return m(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function S(t,e,i){e&&x(t.prototype,e);i&&x(t,i);return t}function _(t,e){if(e&&("object"===m(e)||"function"===typeof e))return e;return w(t)}function I(t){I=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return I(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&q(t,e)}function q(t,e){q=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return q(t,e)}var M=function(t){P(e,t);function e(t){var i;b(this,e);i=_(this,I(e).call(this,t));i.updateContent=i.updateContent.bind(w(i));return i}S(e,[{key:"componentDidMount",value:function t(){(0,a.default)("body").addClass("qv-story-enabled");this.updateContent(true);s.default.setView(s.default.Views.story);d.default.setBeforeUnloadFunctions(null,true)}},{key:"componentDidUpdate",value:function t(){this.updateContent(false)}},{key:"componentWillUnmount",value:function t(){if(this.component)try{this.component.destroy()}catch(t){console.error(t)}s.default.model.Closed.unbind(c.default.Stories.navigate);(0,a.default)("body").removeClass("qv-story-enabled").removeClass("qv-story-disabled")}},{key:"updateContent",value:function t(e){var i=this.props,n=i.story,o=i.storyLayout,d=i.state,h=i.slideId;!e&&s.default.model&&s.default.model.Closed.unbind(c.default.Stories.navigate);var p=n.id;var g=r.default.sortSlidesByRank(o.qChildList.qItems.slice());var y=h;y||(y=g[0].qInfo.qId);r.default.currentStoryId=p;r.default.currentSlideId=y;u.default.setStory(y,d,n.id,(0,f.getParameterByName)("app"));s.default.setStory(n,d,y);s.default.model.Closed.bind(c.default.Stories.navigate);e&&(this.component=(0,a.default)(this.elem).showComponent(l.default,{storyId:p,state:d,slideId:y}))}},{key:"render",value:function t(){var e=this;return n.default.createElement("div",{id:"qv-storytelling",className:"qv-panel qv-panel-story",ref:function t(i){e.elem=i}})}}]);return e}(n.Component);M.propTypes={story:o.default.object.isRequired,storyLayout:o.default.object.isRequired,slideId:o.default.string,state:o.default.string.isRequired};M.defaultProps={slideId:void 0};var D=(0,g.default)((0,h.default)((0,p.default)(M,true),true));e.default=D;t.exports=e.default},2580:function(t,e,i){"use strict";var n,o;!(n=[i(2581),i(2582),i(2585),i(2588),i(172),i(2595),i(2630),i(2639),i(94),i(122),i(50),i(114),i(11)],o=function(t,e,i,n,o,a,s,r,l,c,d,u,f){function h(){d.isSmallDevice&&l.state!==l.States.play&&c.goToStory(o.currentStoryId,Object.keys(l.States)[l.States.play],o.currentSlideId)}return{template:t,controller:["$scope",function(t){var p=new r(e,s,a,i,n,t.state);var g="ltr";t.show=function(e){p.render(t.isPermitted,u.direction,e)};t.hide=function(){p.close()};t.updateDirection=function(e){if(g!==e){g=e;t.show(true)}};var y;function v(e){y.getLayout().then(function(i){if("undefined"===typeof t.isPublished&&t.isPublished!==i.qMeta.published){t.isPublished=i.qMeta.published;var n=t.isPublished?"play":"editstory";if(!e){c.goToStory(i.qInfo.qId,n,o.currentSlideId);return}}t.isPublished=i.qMeta.published;t.isPermitted=i.permissions.update;p.updateStory(o.currentStoryId,o.currentSlideId,Object.keys(l.States)[l.state]);p.render(t.isPermitted,u.direction)})}t.onPlayButtonClicked=function(){c.goToStory(o.currentStoryId,Object.keys(l.States)[l.States.play],o.currentSlideId);f("body").addClass("qv-story-play")};t.updateStory=function(t){y&&y.Invalidated.unbind(v);y=t;t.Invalidated.bind(v);v(true)};t.updateStory(l.model);function m(){t.updateStory(l.model)}function b(){t.updateStory(l.model)}l.StateChanged.bind(m);l.StoryChanged.bind(b);d.ViewChanged.bind(h);u.DirectionChanged.bind(t.updateDirection);this.destroy=function(){t.hide();p=null;l.StateChanged.unbind(m);l.StoryChanged.unbind(b);d.ViewChanged.unbind(h);u.DirectionChanged.unbind(t.updateDirection);y&&y.Invalidated.unbind(v);t.destroyComponent()}}]}}.apply(e,n),void 0!==o&&(t.exports=o))},2581:function(t,e){t.exports='<div\n\tclass="qv-panel-story qv-storytelling-edit-toolbar borderbox"\n\tng-show="!isPublished && isPermitted"\n></div>\n<div class="qv-panel-story qv-panel-story-left" data-paneltoggle="left"></div>\n<div class="qv-panel qv-panel-stage borderbox" ng-class="{ \'qv-panel-stage-published\': isPublished && !isPermitted }">\n\t<div id="qv-grid-story-containment">\n\t</div>\n\t<div class="qv-panel-content borderbox"></div>\n</div>\n<div\n\tclass="qv-panel-story qv-panel-story-right"\n\tdata-paneltoggle="right"\n\tng-show="!isPublished && isPermitted"\n></div>\n<div id="qv-story-play" style="display: none"></div>\n<span\n\tclass="text-title-row-ghost"\n\tstyle="position: absolute; top: -1000px; left: -1000px;"\n></span>\n'},2582:function(t,e,i){"use strict";var n,o;!(n=[i(2583),i(423),i(1670),i(2584)],o=function(t,e){return{template:t,controller:["$scope","$element","$rootScope","storyItemsLibrary","$addSheet",function(t,i,n,o,a){t.openLibrary=function(t,e){o.openPopover({event:t,library:e})};t.openSheetDialog=function(){e.onSelectSheet(t,{sheetInformation:"Storytelling.library.sheets.embeddedSelectionsInfo"})};t.openImageDialog=function(){n.$broadcast("addItem")};t.$on("sheetSelected",function(t,e){a.addSheet(e)});this.release=function(){t.$destroy();t.destroyComponent();i.empty()}}]}}.apply(e,n),void 0!==o&&(t.exports=o))},2583:function(t,e){t.exports='<button\n\tclass="lui-fade-button qv-story-tool-snapshot"\n\tq-title-translation="Storytelling.library.snapshot"\n\tng-disabled="disableLibraries"\n\tng-click="openLibrary($event, \'snapshot\')">\n\t<span class="lui-button__icon  lui-icon  lui-icon--camera"></span>\n</button>\n<button\n\tclass="lui-fade-button qv-story-tool-text"\n\tq-title-translation="Storytelling.library.text"\n\tng-disabled="disableLibraries"\n\tng-click="openLibrary($event, \'text\')">\n\t<span class="lui-button__icon  lui-icon  lui-icon--text"></span>\n</button>\n<button\n\tclass="lui-fade-button qv-story-tool-shapes"\n\tq-title-translation="Storytelling.library.shape"\n\tng-disabled="disableLibraries"\n\tng-click="openLibrary($event, \'shapes\')">\n\t<span class="lui-button__icon  lui-icon  lui-icon--shapes"></span>\n</button>\n<button\n\tclass="lui-fade-button qv-story-tool-effects"\n\tq-title-translation="Storytelling.library.effect"\n\tng-disabled="disableLibraries"\n\tng-click="openLibrary($event, \'effects\')">\n\t<span class="lui-button__icon  lui-icon  lui-icon--effects"></span>\n</button>\n<button\n\tclass="lui-fade-button qv-story-tool-media"\n\tq-title-translation="Storytelling.library.media"\n\tng-disabled="disableLibraries"\n\tng-click="openImageDialog()">\n\t<span class="lui-button__icon  lui-icon  lui-icon--image"></span>\n</button>\n<button\n\tclass="lui-fade-button qv-story-tool-sheets"\n\tq-title-translation="Storytelling.library.sheets"\n\tng-disabled="disableLibraries"\n\tng-click="openSheetDialog()">\n\t<span class="lui-button__icon  lui-icon  lui-icon--sheet"></span>\n</button>'},2584:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(172),i(215),i(340),i(132),i(173),i(426)],o=function(t,e,i,n,o,a,s,r){function l(t){return u().then(function(e){return e.getLayout().then(function(i){return h(i.qChildList.qItems,e).then(function(e){return f(e).then(function(e){return c(t.qInfo.qId).then(function(i){return d(e.id,{sheetId:t.qInfo.qId}).then(function(){return o.get(e.id).then(function(t){return t.embedSnapshotObject(i.id).then(function(){return s.remove(i.id)})})})})})})})})}function c(t){return a.get().then(function(e){return e.getLayout().then(function(e){return s.create({title:"",sheetId:t,selectionFields:e.qSelectionObject.qSelections,selectionsInStates:e.selectionsInStates})})})}function d(e,i){var n=t.extend(true,n,i);return o.get(e).then(function(e){return e.getProperties().then(function(i){t.extend(true,i,n);return e.setProperties(i)})})}function u(){return n.get(i.currentStoryId)}function f(t){var e={position:{top:"1%",left:"1.5%",width:"94%",height:"98%"},ratio:false,visualization:"sheet"};e.position["z-index"]=4;return o.create(e,t)}function h(t,e){var i=t.length,n=i?t[i-1].qData.rank:0;return e.createSlide({rank:n+1})}e.service("$addSheet",[function(){return{addSheet:function t(e){r.get().then(function(t){t.startGroup().then(function(i){l(e).then(function(){t.endGroup(i)})})})}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2585:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(90),i(2586),i(172),i(197),i(93),i(106),i(426),i(2587),i(319)],o=function(t,e,i,n,o,a,s,r){return{template:i,controller:["$scope","$element",function(i,l){var c;i.cutItems=[];i.hasStorage=e.isLocalStorageSupported();i.isASlideItemSelected=false;i.isDisabled=false;i.$on("slideItemSelected",function(){i.isASlideItemSelected=true});i.$on("slideItemDeselected",function(){i.isASlideItemSelected=false});i.$on("disableEditbar",function(t,e){i.isDisabled=!(!i.isASlideItemSelected||!e)});function d(){for(var e=0;e<i.cutItems.length;e++)t("#"+i.cutItems[e]).removeClass("cut-opacity");i.cutItems=[]}function u(){var t={};t.elem=n.getSelectedSlideItemElem();t.elem&&(t.scope=t.elem.find(".slide-item-content").scope());return t}i.performAction=function(t,e,i){var a=e.slideItemModel.layout,s=a.qEmbeddedSnapshot;c=e.slideItem.qInfo.qId;e.slideItemModel.getProperties().then(function(r){var l={};l.id=e.slideItem.qInfo.qId;l.style=a.style;l.dataPath=r.dataPath;l.srcPath=r.srcPath;l.visualization=a.visualization;l.visualizationType=a.visualizationType;l.ratio=a.ratio;l.position=a.position;l.copiedFromSlide=n.currentSlideId;l.action=i;s&&s.visualization&&(l.isEmbeddedSnapshot=true);if(a.visualization&&s&&s.effectPath){l.effectPath=s.effectPath;s.originalModelSettings&&(l.originalModelSettings=s.originalModelSettings)}o.set("QlikView-storytelling-"+t,l);n.pasteOffset=1})};i.onUndoClicked=function(){i.undoinfo.undo()};i.onRedoClicked=function(){i.undoinfo.redo()};r.get().then(function(t){i.undoinfo=t;s(i,"undoinfo",function(t){var e=!i.undoredo;i.undoredo=t.qUndoInfo;e&&i.undoinfo.reset()})});a.getApp().then(function(t){var e=t.id;i.isThereAnythingToPaste=function(){return!!o.contains("QlikView-storytelling-"+e)};i.onCopyClicked=function(){var t=u();d();i.performAction(e,t.scope,"copy")};i.onCutClicked=function(){d();var t=u();i.cutItems=[];i.cutItems.push(t.scope.slideItem.qInfo.qId);t.elem.addClass("cut-opacity");i.performAction(e,t.scope,"cut")};i.onPasteClicked=function(){d();i.$parent.$broadcast("pasteSlideItem")};i.removeActiveItem=function t(){var n,a=u();if(!a.elem)return;n=a.scope.slideItem.qInfo.qId;a.scope.removeItem(n);c===n&&o.remove("QlikView-storytelling-"+e);i.cutItems[0]===n&&(i.cutItems=[]);i.isASlideItemSelected=false}});this.release=function(){i.$destroy();l.empty();t(document).off(".storyEditShortcutKeys")}}]}}.apply(e,n),void 0!==o&&(t.exports=o))},2586:function(t,e){t.exports='<button\n\tclass="lui-fade-button storytelling-cut" tid="st-cut"\n\tng-disabled="!hasStorage || !isASlideItemSelected || !isPermitted || cutItems.length || isDisabled"\n\tq-title-translation="contextMenu.cut"\n\tng-click="onCutClicked()">\n\t<span class="lui-button__icon  lui-icon  lui-icon--cut"></span>\n</button>\n<button\n\tclass="lui-fade-button storytelling-copy" tid="st-copy"\n\tng-disabled="!hasStorage || !isASlideItemSelected || !isPermitted || isDisabled"\n\tq-title-translation="contextMenu.copy"\n\tng-click="onCopyClicked()">\n\t<span class="lui-button__icon  lui-icon  lui-icon--copy"></span>\n</button>\n<button\n\tclass="lui-fade-button storytelling-paste" tid="st-paste"\n\tng-disabled="!hasStorage || !isThereAnythingToPaste() || !isPermitted || isDisabled"\n\tq-title-translation="contextMenu.paste"\n\tng-click="onPasteClicked()">\n\t<span class="lui-button__icon  lui-icon  lui-icon--paste"></span>\n</button>\n<button\n\tclass="lui-fade-button storytelling-remove" tid="st-remove"\n\tng-disabled="!isASlideItemSelected || !isPermitted || isDisabled"\n\tq-title-translation="Common.Delete"\n\tng-click="removeActiveItem()">\n\t<span class="lui-button__icon  lui-icon  lui-icon--bin"></span>\n</button>\n<div class="storytelling-undo-redo" story-edit-shortcut-keys>\n\t<button\n\t\tclass="lui-fade-button storytelling-undo" tid="st-undo"\n \t\tng-disabled="!undoredo.qUndoCount || !isPermitted"\n\t\tq-title-translation="Common.Undo"\n\t\tng-click="onUndoClicked()">\n\t\t<span class="lui-button__icon  lui-icon  lui-icon--back"></span>\n\t</button>\n\t<button\n\t\tclass="lui-fade-button storytelling-redo" tid="st-redo"\n\t\tng-disabled="!undoredo.qRedoCount || !isPermitted"\n\t\tq-title-translation="Common.Redo"\n\t\tng-click="onRedoClicked()">\n\t\t<span class="lui-button__icon  lui-icon  lui-icon--forward"></span>\n\t</button>\n</div>\n'},2587:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(11),i(172),i(214),i(108)],o=function(t,e,i,n,o){t.directive("storyEditShortcutKeys",[function(){return{restrict:"A",link:function t(a){var s=true,r=250;e(document).on("keydown.storyEditShortcutKeys",function(t){var n=(t.ctrlKey||t.metaKey)&&!t.altKey,o=t.shiftKey,r=i.getSelectedSlideItemElem(),l=e(".qv-contextmenu").is(":visible"),c=!!e("#snapshot-properties-dialog").length;if((e(document.activeElement).is("input")||e(document.activeElement).is("textarea")||e(document.activeElement).hasClass("st-text-block")||l||c)&&83!==t.which)return;r||8!==t.which||t.preventDefault();(n||46===t.which||8===t.which)&&s&&a.handleShortcut(t,r,o)});a.handleShortcut=function(t,e,i){switch(t.which){case 67:if(e){s=false;a.$apply(function(){a.onCopyClicked()});l(t)}break;case 83:if(o.isPersonalModeSync()){s=false;t.preventDefault();n.saveApp();l(t)}break;case 86:s=false;a.$apply(function(){a.onPasteClicked()});l(t);break;case 88:if(e){s=false;a.$apply(function(){a.onCutClicked()});l(t)}break;case 89:s=false;a.$apply(function(){a.onRedoClicked()});l(t);break;case 90:if(i){if(i){s=false;a.$apply(function(){a.onUndoClicked()});l(t)}}else{s=false;a.$apply(function(){a.onUndoClicked()});l(t)}break;case 46:a.$apply(function(){a.removeActiveItem()});break;case 8:a.$apply(function(){a.removeActiveItem();t.preventDefault()});break;default:return}};function l(t){t.preventDefault();setTimeout(function(){s=true},r)}}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2588:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(11),i(54),i(2589),i(215),i(172),i(94),i(122),i(426),i(89),i(93),i(106),i(197),i(2590),i(319),i(242),i(1723),i(111),i(2591),i(2593)],o=function(t,e,i,n,o,a,s,r,l,c,d,u,f){var h=null,p=200,g=400,y;function v(t){return t.qInfo.qId}function m(t,e){var i=t.length,n=i?t[i-1].qData.rank:0,o=false,a=new c;if(h||i>p-1){o=true;a.reject("rejected")}else h=setTimeout(function(){h=null},g);!o&&i<p-1&&e.createSlide({rank:n+1}).then(function(t){a.resolve(t)},a.reject);return a.promise}function b(t){clearTimeout(y);y=setTimeout(function(){var i=e(".qv-panel-story-timeline",t),n=e("div[id="+a.currentSlideId+"]",t);n&&i.scrollTop(n.offset().top-(i.offset().top+25)+i.scrollTop())},300)}function x(t,i){d.getApp().then(function(n){n.getObject(t).then(function(t){t.getProperties().then(function(n){var o={};o=e.extend(true,n,{rank:i});t.setProperties(o)})})})}function S(e,i,n,c){var d=n.qInfo.qId,u=e.storyModel.app.id,f;if(e.readonly)return;f=t.getService("qvContextMenu").menu();f.addItem({translation:"Common.Duplicate",tid:"duplicate-slide",select:function t(){l.get().then(function(t){t.startGroup().then(function(e){t.app.enigmaModel.getObject(d).then(function(i){o.get(a.currentStoryId).then(function(n){i.duplicate(n).then(function(){t.endGroup(e)})})})})})}});f.addItem({translation:"Common.Delete",tid:"delete-slide",select:function t(){if(d===a.currentSlideId){a.currentSlideId=P(e.slides,d,c);r.goToStory(a.currentStoryId,Object.keys(s.States)[s.States.editstory],a.currentSlideId)}I(e.storyModel,d,c).then(function(){e.$parent.$broadcast("renderSlide")});w(d,u)}});t.getService("qvContextMenu").show(f,{position:{x:i.pageX,y:i.pageY}})}function _(t,e,i){var n=a.currentStoryId,o=Object.keys(s.States)[s.States.editstory];a.currentSlideId=i;r.goToStory(n,o,i);t.$parent.$broadcast("renderSlide");b(e)}function I(t,e,i){if(0===i&&1===t.layout.qChildList.qItems.length){var n=new c;t.app.getObject(e).then(function(t){t.destroyAllChildren().then(function(){n.resolve()})});return n.promise}return t.destroyChild(e)}function w(t,e){var i="QlikView-storytelling-"+e;if(f.contains(i)){var n=f.get(i).copiedFromSlide;n===t&&f.remove(i)}}function P(t,e,i){var n=t[i-1],o=t[i+1],a;(n||o)&&(a=n&&!o?n.qInfo.qId:o.qInfo.qId);return a}return{template:n,controller:["$scope","$element","$timeout",function(t,n,l){var c;t.storytellingHelper=a;t.sortingEnabled=true===s.model.layout.permissions.update;c=u(t,"storyModel",function(e){t.isPublished=e.qMeta.published;var o=a.sortSlidesByRank(e.qChildList.qItems.slice());var s=i(o.map(v)).difference(t.slides.map(v));1===s.length&&_(t,n,s[0]);var r=o.map(v).indexOf(a.currentSlideId)>-1;t.sortingEnabled?t.updateSortableList(o):t.slides=o;r||t.onSlideClicked(o[0])});t.initTimeline=function(){return o.get(a.currentStoryId).then(function(e){t.storyModel=e})};t.slideMoved=function(t,e){x(t,e)};t.addSlideClicked=function e(){m(t.slides,t.storyModel).then(function(){t.showAddDialog=false},function(){t.showAddDialog=false})};t.onSlideClicked=function e(i){l(function(){if(a.currentSlideId===i.qInfo.qId)return;a.setSelectedSlideItemElem(null);a.currentSlideId=i.qInfo.qId;r.goToStory(a.currentStoryId,Object.keys(s.States)[s.States.editstory],a.currentSlideId);t.$parent.$broadcast("renderSlide")},0)};t.onContextMenu=function e(i,n,o){S(t,i,n,o)};t.onPlayButtonClicked=function t(){r.goToStory(a.currentStoryId,Object.keys(s.States)[s.States.play],a.currentSlideId);e("body").addClass("qv-story-play")};t.initTimeline().then(function(){b(n)});n.on("click",".qv-slide-thumb-obj a",function(t){e(t.target).closest("a").length&&t.preventDefault()});function d(){c&&c()}this.release=function(){t.slides=null;d();clearTimeout(y);t.$destroy();n.empty()}}]}}.apply(e,n),void 0!==o&&(t.exports=o))},2589:function(t,e){t.exports='\x3c!-- Directive for the play button which will initiate play mode --\x3e\n<qv-play-button on-play="onPlayButtonClicked" ng-if="!isPublished"/>\n\x3c!-- Here goes the timeline with its slides, slide numbering and thumbnails --\x3e\n<div class="qv-panel-story-content qv-panel-story-timeline" data-help="Story.Timeline" ng-class="{\'qv-panel-story-timeline-published\': isPublished}">\n\t<div id="chapter1" class="qv-story-timeline-chapter" ng-class="{\'qv-sorting-enabled\': sortingEnabled, \'qv-timeline-dragging\': !!sortState.placeholder}" qv-sortable-list="sortableItemLists" storytelling-timeline-sortable>\n\t\t<div ng-repeat="slide in slides track by slide.qInfo.qId" class="qv-story-timeline-slide {{storytellingHelper.currentSlideId==slide.qInfo.qId ? \'qv-selected-slide-highlight\' : \'\'}}" id="{{slide.qInfo.qId}}" qva-context-menu="sortingEnabled && onContextMenu( $event, slide, $index )" ng-click="onSlideClicked(slide)" ng-class="slide.classList">\n\t\t\t<div class="qv-story-timeline-slide-area" storytelling-thumbnail />\n\t\t\t<span class="qv-slide-number">{{getSlideIndex($index, slide)}}</span>\n\t\t</div>\n\t</div>\n</div>\n\n\x3c!--This is the button plus directive for adding new slides --\x3e\n<qv-add-slide-button on-click="addSlideClicked" sorting-enabled="sortingEnabled" ng-if="!isPublished" />'},2590:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(99),i(207),i(1724)],o=function(t,e,i,n){function o(t,e){var i=t.getIndexByItem(e),n=t.items[i-1],o=t.items[i+1];if(o||n)if(o&&!n){o=o.qData.rank;i=o-1}else if(!o&&n){n=n.qData.rank;i=n+1}else{n=n.qData.rank;o=o.qData.rank;i=(n+o)/2}return i}e.directive("storytellingTimelineSortable",function(){return{link:function e(a,s){a.sortState={placeholder:null,placeholderIx:-1,fromItem:null};function r(){a.sortState.placeholder=null;a.sortState.placeholderIx=-1;a.sortState.fromItem=null}function l(e){if(i.isMouse(e))return!!t(e.target).closest(this.options.itemSelector).length;return!!t(e.target).closest(this.options.itemDragSelector).length}function c(){var t=s.closest(d.scrollSelector)[0],e=t.getBoundingClientRect(),i=s.find(".qv-story-timeline-slide")[0];a.sortableItemLists.options.boundingRect={bottom:e.bottom,height:e.height,left:i.offsetLeft,right:e.width-(i.offsetLeft+i.clientWidth),top:e.top,width:i.clientWidth}}var d={direction:"vertical",itemKey:"slide",itemSelector:".qv-sorting-enabled .qv-story-timeline-slide",scrollSelector:".qv-panel-story-timeline",gesture:{name:i.treatAsDesktop()?"swipe":"longtapswipe",options:{radiusThreshold:2}}};a.updateSortableList=function(t){u.reset();for(var e=0;e<t.length;e++){var i={qInfo:t[e].qInfo,qData:t[e].qData,classList:[]};u.addSortableItem(i)}};a.sortableItemLists=n.create({options:d,addPlaceholder:function t(e){var i=this._super.apply(this,arguments);i.qInfo={qInfo:{qId:-10}};i.qData=e.qData;i.style={};i.classList=["qv-timeline-slide-placeholder"];f=true;a.sortState.placeholder=i;a.sortState.placeholderIx=u.getIndexByItem(i);a.sortState.fromItem=e},onBegin:function t(e){this._super.apply(this,arguments);c();e.classList.push("qv-timeline-dragging")},enable:function t(){this._super.apply(this,arguments);f=false},onCancel:function t(){a.sortState.fromItem&&(a.sortState.fromItem.classList.length=0);r();this._super.apply(this,arguments)},onMove:function t(e){this._super.apply(this,arguments);e.classList.length=0;a.slideMoved(e.qInfo.qId,o(u,e));r()},allowDrag:l,allowScroll:function t(){return true}});var u=a.sortableItemLists.createList();var f=false;i.treatAsDesktop()||s.closest(".qv-panel-story-timeline").on("touchmove.timeline-sortable",function(t){f&&t.preventDefault()});a.getSlideIndex=function(t,e){if(a.sortState.placeholder){var i=u.items.slice(0);i.splice(i.indexOf(a.sortState.fromItem),1);if("placeholder"===e.id)return;if(e===a.sortState.fromItem)return i.indexOf(a.sortState.placeholder)+1;return i.indexOf(e)+1}return t+1};a.slides=u.items;a.$on("$destroy",function(){s.closest(".qv-story-").off(".timeline-sortable")})}}})}.apply(e,n),void 0!==o&&(t.exports=o))},2591:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(2592)],o=function(t,e){t.directive("qvPlayButton",[function(){return{restrict:"E",template:e,scope:{onPlay:"="}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2592:function(t,e){t.exports='<div class="qv-panel-story-content qv-panel-story-tell-story" data-help="Story.Play">\n\t<lui-button\n\t\tclass="qv-storytelling-button-play"\n\t\tqva-activate="onPlay()"\n\t\tq-title-translation="Storytelling.play">\n\t\t<span class="lui-button__icon  lui-icon  lui-icon--triangle-right"></span>\n\t</lui-button>\n</div>'},2593:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(2594)],o=function(t,e){t.directive("qvAddSlideButton",[function(){return{restrict:"E",template:e,scope:{onClick:"=",sortingEnabled:"="}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2594:function(t,e){t.exports='<div class="qv-panel-story-content qv-panel-story-actionpanel" data-help="Story.Actionpanel">\n\t<button\n\t\t\tclass="lui-fade-button qv-storytelling-button-addSlide"\n\t\t\tng-disabled="!sortingEnabled"\n\t\t\tq-title-translation="Storytelling.timeline.addSlide"\n\t\t\tng-click="sortingEnabled && onClick()">\n\t\t<span class="lui-button__icon  lui-icon  lui-icon--add"></span>\n\t</button>\n</div>\n'},2595:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(11),i(54),i(97),i(93),i(2596),i(215),i(172),i(1161),i(94),i(122),i(114),i(50),i(1280),i(2597),i(1802),i(1803),i(177),i(90),i(111),i(1804),i(2628)],o=function(t,e,i,n,o,a,s,r,l,c,d,u,f,h,p,g,y,v,m){var b=r.availableRatios.wide,x=i.throttle(S,150,{leading:false});function S(t,e){t.moveSlideFocus(e);t.$apply()}function _(t,e){var i=window.innerHeight/window.innerWidth>b.h/b.w,n=i?window.innerWidth-4:window.innerHeight*(b.w/b.h),o=i?window.innerWidth*(b.h/b.w):window.innerHeight,a=(window.innerWidth-n)/2,s=(window.innerHeight-o)/2;t.applySlideTransition(e);t.slideWindowStyle={"margin-top":Math.ceil(s)+"px"};t.slideStyle={width:n+"px",height:Math.ceil(o)+"px","margin-left":a+"px","margin-right":a+"px"}}function I(t){for(var e=0;e<t.length;e++)if(t[e].qInfo.qId===r.currentSlideId)return e;return-1}function w(t){t.addClass("qv-story-disabled").removeClass("qv-story-enabled").removeClass("qv-story-play")}function P(i,n){n.parent().css("z-index","");var o=e("body");var a=Object.keys(c.States);if(f.isSmallDevice){w(o);d.goToOverview();c.setView(c.Views.overview);l.prevStoryId=null}else d.goToStory(r.currentStoryId,a[c.States.editstory],r.currentSlideId);e("#qv-storytelling").css("z-index",1);t.getService("qvContextMenu").close();i.$destroy();n.hide();n.empty();r.selectionState.hasViewedSheet=false;e(document).off(".playStory");e(document).off(".navigateStory")}return{template:a,scope:{sheetLocked:"@"},controller:["$scope","$element",function(i,a){i.translateXPercent=0;i.sheetLocked=true;i.showNavigation=false;i.showMore=true;i.directionService=u;y.init(a[0],i);var l=0,b=e(".qv-story-slide-window");b.on("transitionend.transitionAnimListener webkitTransitionEnd.transitionAnimListener oTransitionEnd.transitionAnimListener MSTransitionEnd.transitionAnimListener",function(){i.$apply(function(){i.slideTransitionInProgress=false});p.callback()});i.isSmallDevice=function(){return f.isSmallDevice};s.get(r.currentStoryId).then(function(t){t.getLayout().then(function(t){e("#qv-storytelling").css("z-index",5);var n=[];e.extend(true,n,t.qChildList.qItems);e.each(n,function(t,e){c.model.app.getObject(e.qInfo.qId).then(function(o){o.getLayout().then(function(o){e.slideItems=o.qChildList.qItems;if(t===n.length-1){i.slides=r.sortSlidesByRank(n.slice());i.activeSlideIndex=I(i.slides);_(i,"none");a.show()}})})})})});o.getApp().then(function(t){t.getLayout().then(function(){i.shouldPrintBeAdded=function(){var e=t.layout;return e&&e.permissions&&e.permissions.exportData}})});i.onOutsideClicked=function(t){if(e(t.target).parents(".export-story-popover").length>0)return;i.showNavigation=false;setTimeout(function(){i.$apply(function(){i.showMore=true})},600)};i.toggleNavigation=function(){i.showNavigation=!i.showNavigation;i.showNavigation&&(i.showMore=false)};e(document).on("touchmove.playStory",function(t){var i=e(t.target).parents();if(i.is(".qv-object-filterpane, .qv-object-table, .qv-object-text-image, .qv-listbox-popover"))return;t.preventDefault()});i.onLeftNavPressed=function(){i.moveSlideFocus(g.getSlideDiff(g.navDirections.LEFT,u.isRtl))};i.onRightNavPressed=function(){i.moveSlideFocus(g.getSlideDiff(g.navDirections.RIGHT,u.isRtl))};i.moveSlideFocus=function(t){e(".qv-selection-toolbar").length>0&&e(".qv-selection-toolbar").remove();e(".qv-listbox-popover").length>0&&e(".qv-listbox-popover").remove();e("#qs-chart-tooltip > div").hide();y.reset();if(i.slides[i.activeSlideIndex+l+t]){l+=t;i.slideTransitionInProgress=true;i.sheetLocked=true;i.applySlideTransition()}else i.slides[i.activeSlideIndex+t]||S(t)};function S(t){var e=b[0],n=p.getTransitionPercent(i.slides,i.activeSlideIndex,l);p.bounceAnimation(n,e,t,p.callback);p.callback=function(){var t="translateX("+n+"%)";e.style.transform=t;e.style.webkitTransform=t;e.style.mozTransform=t;e.style.msTransform=t;p.callback=function(){}}}i.applySlideTransition=function(e){var n,o=i.activeSlideIndex;t.getService("qvContextMenu").close();b.off(".slideTransition");n=p.getTransitionPercent(i.slides,o,l);p.applyTransition(n,b[0],e);p.callback=function(){b.css("visibility","hidden");i.activeSlideIndex+=l;r.currentSlideId=i.slides[i.activeSlideIndex].qInfo.qId;d.goToStory(r.currentStoryId,"play",r.currentSlideId);p.callback=function(){};l=0}};e(document).on("keydown.navigateStory",function(t){var n=e(document.activeElement);if(t.keyCode===g.keys.KEY_ESC){P(i,a);i.$apply()}else g.isPreviousKey(t.keyCode,u.isRtl)?n.is("input")||x(i,-1):g.isNextKey(t.keyCode,u.isRtl)&&!n.is("input")&&n.parent(".qv-play-navigator").length<1&&x(i,1)});i.goToOriginalSheet=function(t,i,n){v.setStory(r.currentSlideId,"play",r.currentStoryId,m.getParameterByName("app"));h.gotoSheet(n,i);r.selectionState.hasViewedSheet=true;e("#qv-storytelling").css("z-index",1)};i.onExitClicked=function t(n){n&&n.preventDefault&&n.preventDefault();P(i,a);e("body").removeClass("qv-story-play");f.isSmallDevice&&e("body").removeClass("qv-story-enabled")};i.onSheetClickOutside=function(t){var n=e(t.target),o=n.parents(".sheet-container"),a=n.parents(".qv-selection-toolbar"),s=n.parents(".qui-immidiateContextual"),r=n.parents(".touch-object-menu");if(o.length||a.length||s.length||r.length){t.preventDefault();return}i.sheetLocked=true};i.sheetLockClicked=function t(n,o){var a=e(o.target).hasClass("reset-btn");i.sheetLocked=f.isSmallDevice||!n.sheetInfo&&n.sheetHint||!i.sheetLocked&&!a||1!==y.zoomPanHandler.zoomPanInfo.scale};function w(){y.reset();i.$apply(function(){_(i,"none")})}function q(){i.$apply(function(){_(i,"none")})}n.on("end.storytellingPlay",w);n.on("start.storytellingPlay",q);this.release=function(){e("#qv-storytelling").css("z-index",1);n.off("end.storytellingPlay",w);n.off("start.storytellingPlay",q);i.$destroy();i.destroyComponent();a.empty();a.hide();e(document).off(".playStory");e(document).off(".navigateStory");e(document).off(".playNavHovering");b.off(".transitionAnimListener");e("body").removeClass("qv-story-play");y.destroy()}}]}}.apply(e,n),void 0!==o&&(t.exports=o))},2596:function(t,e){t.exports='\x3c!-- Exit button --\x3e\n<button ng-show="!slideTransitionInProgress"\n   ng-click="onExitClicked($event)"\n   class="lui-overlay-button qv-story-play-exit"\n   q-title-translation="Common.Close"\n   dir="{{ directionService.direction }}"\n   ng-style="exitButtonStyle">\n\t<span class="lui-overlay-button__icon lui-icon  lui-icon--close"></span>\n</button>\n\n\x3c!-- Slides --\x3e\n<div class="qv-story-slide-window" ng-style="slideWindowStyle" dir="{{ directionService.direction }}">\n\n\t<div ng-repeat="slide in slides" class="qv-story-play-slide" ng-style="slideStyle" ng-class="{\'qv-story-slide-active\': activeSlideIndex==$index}" dir="ltr">\n\n\t\t<div id="{{slideItem.qInfo.qId}}"\n\t\t\tng-if="$parent.$index <= $parent.$parent.activeSlideIndex + 1 && $parent.$index >= $parent.$parent.activeSlideIndex - 1"\n\t\t\tclass="qv-story-grid-object borderbox qv-story-{{slideItem.qData.visualization}}{{slideItem.qData.visualizationType ? \'-\' + slideItem.qData.visualizationType : \'\' }}"\n\t\t\tng-repeat="slideItem in slide.slideItems"\n\t\t\tng-class="{\'item-active\': active, \'qv-story-shape\': slideItem.qData.visualization === \'shape\'}"\n\t\t\tng-style="{{slideItem.qData.position}}">\n\t\t\t<qv-slide-item-section/>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="qv-play-nav-container"\n\t qv-play-navigation\n\t x-show-navigation="showNavigation"\n\t x-show-more="showMore"\n\t x-open-export-menu="openExportMenu"\n\t x-export-story="exportStory"\n\t x-export-button="exportButton"\n\t x-print-to-ppt="printToPpt"\n\t x-print-to-pdf="printToPdf"\n\t qva-outside="onOutsideClicked($event)">\n\t<button\n\t\tng-click="toggleNavigation();"\n\t\tclass="qv-play-more lui-overlay-button qv-animate"\n\t\tq-title-translation="Storytelling.play.actions"\n\t\tng-show="!showNavigation && showMore">\n\t\t\t<span class="lui-overlay-button__icon lui-icon lui-icon--more"></span>\n\t</button>\n\t<div class="qv-play-navigator qv-animate ng-hide" ng-show="showNavigation" >\n\t\t<button\n\t\t\tclass="lui-fade-button lui-fade-button--inverse qv-play-prev"\n\t\t\tq-title-translation="{{ directionService.isRtl ? \'Storytelling.play.next\' : \'Storytelling.play.previous\' }}"\n\t\t\tng-click="$event.preventDefault();onLeftNavPressed();">\n\t\t\t<span class="lui-icon lui-icon--arrow-left"></span>\n\t\t</button>\n\t\t<div\n\t\t\tclass="qv-story-slide-number"\n\t\t \tq-translation="CurrentSelections.Of,{{activeSlideIndex + 1}},{{slides.length}}">\n\t\t</div>\n\t\t<button\n\t\t\tclass="lui-fade-button lui-fade-button--inverse qv-play-next"\n\t\t\tq-title-translation="{{ directionService.isRtl ? \'Storytelling.play.previous\' : \'Storytelling.play.next\' }}"\n\t\t\tng-click="$event.preventDefault();onRightNavPressed();">\n\t\t\t<span class="lui-icon lui-icon--arrow-right"></span>\n\t\t</button>\n\t\t<div ng-if="!isSmallDevice() && shouldPrintBeAdded()" class="qv-play-divider"></div>\n\t\t<button\n\t\t\tng-if="!isSmallDevice() && shouldPrintBeAdded()"\n\t\t\tq-title-translation="Storytelling.Open.ExportMenu"\n\t\t\tclass="lui-fade-button lui-fade-button--inverse lui-icon lui-icon--export"\n\t\t\tng-click="openExportMenu($event)">\n\t\t</button>\n\t</div>\n</div>\n'},2597:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(114)],o=function(t,e){var i=function t(){};function n(e,i,n){n=n||"600ms";i.style.transition=n;i.style.webkitTransition=n;i.style.mozTransition=n;i.style.msTransition=n;var o="translateX("+e+"%)";i.style.transform=o;i.style.webkitTransform=o;i.style.mozTransform=o;i.style.msTransform=o;"none"!==n&&t(i).css("visibility","visible")}function o(t,i,n){var o=50/i.clientWidth*100,a=e.isRtl?1:-1;var s="0.15s ease-out";i.style.transition=s;i.style.webkitTransition=s;i.style.mozTransition=s;i.style.msTransition=s;var r="translateX("+(t+a*n*o)+"%)";i.style.transform=r;i.style.webkitTransform=r;i.style.mozTransform=r;i.style.msTransform=r}function a(t,i,n){var o=100/t.length,a=i+n,s=e.isRtl?t.length-a-1:a;return-s*o}return{applyTransition:n,getTransitionPercent:a,bounceAnimation:o,callback:i}}.apply(e,n),void 0!==o&&(t.exports=o))},2598:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(96)],o=function(t,e){function i(){return true}function n(t){t.scale=1;t.panX=0;t.panY=0;t.pannedLeft=false;t.pannedRight=false}function o(t,e){var i=this.zoomPanInfo,n=t.clientWidth*i.scale,o=t.clientHeight*i.scale;i.pannedLeft=true;i.pannedRight=true;if(i.panX>=0){i.panX=0;i.pannedLeft=false}if(i.panX<=e.width-n){i.panX=e.width-n;i.pannedRight=false}i.panY>0&&(i.panY=0);i.panY<e.height-o&&(i.panY=e.height-o)}function a(e){e.preventDefault();var i=e.originalEvent,n,a;var s=i.wheelDelta?i.wheelDelta/80:i.detail?-i.detail:0,r=Math.pow(this._zoomSensitivity,s);n=t(this._elementSelector)[0];a=n.getBoundingClientRect();this._initialRect||(this._initialRect={width:Math.round(a.width),height:Math.round(a.height)});this.zoom(a,e.originalEvent,this.zoomPanInfo.scale*r);o.call(this,n,this._initialRect);this._updateFn(n,this.zoomPanInfo);this._startFn()}function s(t,e){t.style.left=e.panX+"px";t.style.top=e.panY+"px";var i="scale("+e.scale+")";t.style.transform=i;t.style.webkitTransform=i;t.style.mozTransform=i;t.style.msTransform=i}function r(t,e){return e.scale!==t.scale||e.panX!==t.panX||e.panY!==t.panY}function l(i){this._allowScrollZoom&&t(i).on("mousewheel"+this._eventId+" DOMMouseScroll"+this._eventId,a.bind(this));var n,o,s,l,c=this;e(i).pinch({id:this._eventId,options:{pinchThreshold:0,preventDefault:false},start:function i(a,r){n={x:r.centerPoint.x,y:r.centerPoint.y};s=t(c._elementSelector)[0];if(!c._initialRect){var l=s.getBoundingClientRect();c._initialRect={width:Math.round(l.width),height:Math.round(l.height)}}o=c.zoomPanInfo.scale;c._startFn();e.preventGestures(this.gestureHandler)},update:function t(i,a){var d=a.centerPoint.x,u=a.centerPoint.y,f=d-n.x,h=u-n.y;var p={zoom:c.zoomPanInfo.scale,panX:c.zoomPanInfo.panX,panY:c.zoomPanInfo.panY};l=s.getBoundingClientRect();c.zoom(l,{x:d,y:u},o*a.scale);c.pan(f,h,s,c._initialRect);r(p,c.zoomPanInfo)&&c._updateFn(s,c.zoomPanInfo);n={x:a.centerPoint.x,y:a.centerPoint.y};e.preventGestures(this.gestureHandler)}});e(i).swipe({id:this._eventId,options:{preventDefault:false},start:function i(){s=t(c._elementSelector)[0];if(!c._initialRect){var n=s.getBoundingClientRect();c._initialRect={width:Math.round(n.width),height:Math.round(n.height)}}c._startFn();e.preventGestures(this.gestureHandler)},update:function t(e,i){var n={zoom:c.zoomPanInfo.scale,panX:c.zoomPanInfo.panX,panY:c.zoomPanInfo.panY};l=s.getBoundingClientRect();c.pan(i.swipe.curDeltaX,i.swipe.curDeltaY,s,c._initialRect);r(n,c.zoomPanInfo)&&c._updateFn(s,c.zoomPanInfo)},end:function t(e,i){c._panEndFn(i.swipe)}})}var c=function a(r,c,d){this.zoomPanInfo={};this._elementSelector=c;this._initialRect=null;this._eventId=".panZoom-"+Date.now();d=d||{};this._maxZoom=d.maxZoom||4;this._minZoom=d.minZoom||1;this._zoomSensitivity=d.zoomSensitivity||1.2;this._updateFn=d.updateCallback||s;this._panEndFn=d.panEndCallback||function(){};this._startFn=d.startCallback||function(){};this._allowScrollZoom=d.allowScrollZoom||false;this._enable=d.enable||i;if(!c)throw new Error("elementSelector needed to zoom or pan!");n(this.zoomPanInfo);l.call(this,r);this.zoom=function(t,e,i){var n=this.zoomPanInfo.scale;i>this._maxZoom?i=this._maxZoom:i<this._minZoom&&(i=this._minZoom);if(n===i||!this._enable())return;var o=(t.left-e.x)/this.zoomPanInfo.scale,a=(t.top-e.y)/this.zoomPanInfo.scale;this.zoomPanInfo.scale=i;this.zoomPanInfo.panX+=o*(i-n);this.zoomPanInfo.panY+=a*(i-n)};this.pan=function(t,e,i,n){if(!this._enable())return;if(this.zoomPanInfo.scale===this._minZoom){this.zoomPanInfo.panX=0;this.zoomPanInfo.panY=0}else{this.zoomPanInfo.panX+=t;this.zoomPanInfo.panY+=e}o.call(this,i,n)};this.reset=function(){n(this.zoomPanInfo);this._initialRect=null;var e=t(this._elementSelector)[0];e&&this._updateFn(e,this.zoomPanInfo)};this.destroy=function(){t(r).off(this._eventId);e(r).off("*",this._eventId)}};return c}.apply(e,n),void 0!==o&&(t.exports=o))},2599:function(t,e){t.exports='<div style="height: 100%; width: 100%;"\n\t qva-context-menu="onContextMenu($event)">\n\n\t<div class="slide-item-button-container"\n\t\t qv-slide-item-buttons\n\t\t ng-show="active && !isResizing && visualization !== \'image\'"\n\t\t ng-style="buttonPosition">\n\t</div>\n\n\t<div class="qv-gridresize-point qv-gridresize-top-left">\n\t\t<div class="hitarea ui-resizable-handle ui-resizable-nw"></div>\n\t</div>\n\t<div class="qv-gridresize-point qv-gridresize-top-right">\n\t\t<div class="hitarea ui-resizable-handle ui-resizable-ne"></div>\n\t</div>\n\t<div class="qv-gridresize-point qv-gridresize-bottom-left">\n\t\t<div class="hitarea ui-resizable-handle ui-resizable-sw"></div>\n\t</div>\n\t<div class="qv-gridresize-point qv-gridresize-bottom-right">\n\t\t<div class="hitarea ui-resizable-handle ui-resizable-se"></div>\n\t</div>\n\n\t<div\n\t\tclass="slide-item-content"\n\t\tng-class="{\'fade\': fade && visualization !== \'image\', \'slow\': fade && isNew, \'fast\': fade }"\n\t\tstorytelling-slide-item storytelling-slide-item-contextmenu>\n\n\t\t<div ng-if="visualization === \'text\' && isEmpty && !editorRendered && !inEdit && !isInPlay()" class="slide-item-empty">\n\t\t\t<span class="empty-message" q-translation="Storytelling.Text.Empty" ></span>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="visualization === \'snapshot\'"\n\t\t ng-show="effectNotApplicable"\n\t\t class="invalid-object-message">\n\t\t<div class="message" q-translation="Storytelling.slideItem.effectNotApplicable"></div>\n\t</div>\n\n</div>\n'},2600:function(t,e,i){"use strict";var n,o;!(n=[i(11)],o=function(t){var e={isDbClick:false,timer:null,threshold:250,clicks:0,startTime:null,endTime:null};function i(t,i){e.clicks++;if(1===e.clicks){e.startTime=+new Date;e.timer=setTimeout(function(){e.clicks=0},e.threshold)}else if(2===e.clicks){window.clearTimeout(e.timer);e.endTime=+new Date;e.startTime+e.threshold>=e.endTime&&t&&t.call(this,i);e.clicks=0}}function n(e){var i=e.gestureData.points[0].x,n=e.gestureData.points[0].y,o=t(e.currentTarget),a=o.offset(),s=o.width(),r=o.height(),l=a.top-10,c=a.top+r+10,d=a.left-10,u=a.left+s+10,f=d<=i&&i<=u&&l<=n&&n<=c;return f}return{click:i,isInside:n}}.apply(e,n),void 0!==o&&(t.exports=o))},2601:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(54),i(172),i(1806),i(89),i(426)],o=function(t,e,i,n,o,a){var s=e.throttle(l,50,{leading:false}),r=e.throttle(c,0,{leading:false});function l(t){return t.getVisualization().then(function(e){!t.options.freeResize&&e.supportCssScaling()||e.resize();t.scaleSnapshot(e)}).catch(function(t){false})}function c(t,e){t.height(e.height())}function d(t,e){var i=t.element.data("ui-resizable").axis,n=e.width,o=e.height,a=t.element[0],s=a.getBoundingClientRect(),r=a.offsetLeft,l=a.offsetTop,c=Math.round(s.width),d=Math.round(s.height),u,f,h,p;switch(i){case"nw":u=r;f=l;h=(u/n).toFixed()*n;p=(f/o).toFixed()*o;t.originalPosition.left=h;t.originalPosition.top=p;t.originalSize.width=c+(u-h);t.originalSize.height=d+(f-p);break;case"ne":u=r+c;f=l;h=(u/n).toFixed()*n;p=(f/o).toFixed()*o;t.originalPosition.top=p;t.originalSize.width=h-r;t.originalSize.height=d+(f-p);break;case"sw":u=r;f=l+d;h=(u/n).toFixed()*n;p=(f/o).toFixed()*o;t.originalPosition.left=h;t.originalSize.width=c+(u-h);t.originalSize.height=p-l;break;case"se":u=r+c;f=l+d;h=(u/n).toFixed()*n;p=(f/o).toFixed()*o;t.originalSize.width=h-r;t.originalSize.height=p-l;break}}function u(e,o){var l=o.parent(),c=i.getGridOptions(),u=c.cellSize,g=c.snapGrid;if(l.data("ui-resizable")){l.resizable("destroy");l.find(".qv-gridresize-top-left").append('<div class="hitarea ui-resizable-handle ui-resizable-nw"></div>');l.find(".qv-gridresize-top-right").append('<div class="hitarea ui-resizable-handle ui-resizable-ne"></div>');l.find(".qv-gridresize-bottom-left").append('<div class="hitarea ui-resizable-handle ui-resizable-sw"></div>');l.find(".qv-gridresize-bottom-right").append('<div class="hitarea ui-resizable-handle ui-resizable-se"></div>')}l.resizable({handles:{nw:l.find(".ui-resizable-nw"),ne:l.find(".ui-resizable-ne"),sw:l.find(".ui-resizable-sw"),se:l.find(".ui-resizable-se")},grid:!!g&&[u.width,u.height],minHeight:"shape"===e.visualization?1*u.height:2*u.height-1,minWidth:"shape"===e.visualization?1*u.height:2*u.width-1,disabled:i.getPublishState(),aspectRatio:e.ratio,start:function t(o,a){e.$broadcast("startResize");e.$apply(function(){e.isResizing=true});i.showGridPattern();a.element.find("textarea").blur();a.element.css({"z-index":201});if("snapshot"===e.visualization){var s=e.model.layout.snapshotData.object.size;a.element.resizable("option","aspectRatio",s.w/s.h);e.ratio||n.resizeFreely(e)}"image"===e.visualization&&a.element.resizable("option","aspectRatio",a.originalSize.width/a.originalSize.height);d(a,u)},resize:function i(n,o){var a=o.element.scope().ratio,l=o.element.resizable("option","minHeight"),c=o.element.outerHeight(),d=o.originalSize.height;if(a&&c<=l&&d===o.size.height){o.element.css({width:o.originalSize.width,height:o.originalSize.height});if("image"===e.visualization){f(t(this).data("ui-resizable").axis,o.helper,o.originalPosition,o.originalSize);return false}}if("snapshot"===e.visualization){o.element.find(".effectLayer").hide();s(e)}if("title"===e.visualizationType){e.closeEditmode();e.resizeTitle(true);p(o.element,o.element)}"paragraph"===e.visualizationType&&e.closeEditmode();if("image"===e.visualization){var u=o.element.find("img");o.helper.height()!==u.height()&&void 0!==u.attr("src")&&r(o.helper,u)}f(t(this).data("ui-resizable").axis,o.helper,o.originalPosition,o.originalSize)},stop:function n(o,s){var r=i.getGridOptions();e.isResizing=false;i.slideItemOutsideSlide(s.helper,t("#selectable"),r.cellSize);e.$apply(function(){e.position=i.getElementPosition(t(s.helper),r)});delete e.position["z-index"];if("snapshot"===e.visualization){s.element.find("[storytelling-slide-item-snapshot]").css({height:"100%",width:"100%",padding:0});a.get().then(function(t){t.startGroup().then(function(i){h(s.element.find(".effectLayer"),e,l).then(function(){e.updateProperties(e.id,{position:e.position}).then(function(){t.endGroup(i)}).catch(function(t){false})}).catch(function(t){false})}).catch(function(t){false})}).catch(function(t){false})}else e.updateProperties(e.id,{position:e.position});i.hideGridPattern()}})}function f(t,e,i,n){var o=e.outerWidth()-n.width,a=e.outerHeight()-n.height,s=i.left,r=i.top;switch(t){case"nw":e.css({left:s-o,top:r-a});break;case"ne":e.css("top",r-a);break;case"sw":e.css("left",s-o);break}}function h(t,e,i){t.fadeIn("500");return l(e).then(function(){if(e.ratio)return o.resolve();i.addClass("hideHandles");return n.saveState(e).then(function(){i.removeClass("hideHandles")}).catch(function(t){false})}).catch(function(t){false})}function p(t,e){t.addClass("qv-dynamic-resizing");t.height(e.height());t.width(e.width());t.removeClass("qv-dynamic-resizing")}return{create:u}}.apply(e,n),void 0!==o&&(t.exports=o))},2602:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(94)],o=function(t,e){t.directive("storytellingSlideItem",["$compile",function(t){return{restrict:"A",link:function i(n,o){var a=n.slideItem.qData.visualization;switch(a){case"snapshot":o.append(t('<div class="qv-snapshot" qva-outside-ignore-for="effect-popover-ignore-toggle-'+n.slideItem.qInfo.qId+'" storytelling-slide-item-snapshot '+(e.state===e.States.editstory?"storytelling-droppable-snapshot":"")+' style="height:100%;"></div>')(n));break;case"shape":o.append(t('<div class="qv-story-shape" storytelling-slide-item-shape style="height:100%;"></div>')(n));break;case"text":o.append(t('<div class="qv-story-text {{slideItem.qData.visualizationType}}" ng-class="{edit: inEdit}" storytelling-slide-item-text style="height:100%;" dir="{{ direction }}"></div>')(n));break;case"sheet":o.append(t('<div class="qv-story-sheet borderbox" storytelling-slide-item-sheet style="height:100%;"></div>')(n));break;case"image":o.append(t('<div class="qv-story-image" storytelling-slide-item-image style="height:100%;"></div>')(n));break}}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2603:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(93),i(1280),i(1805),i(197),i(177),i(90),i(172),i(94),i(111)],o=function(t,e,i,n,o,a,s,r,l){t.directive("storytellingSlideItemContextmenu",[function(){return{restrict:"A",link:function t(e){e.playMode=e.isInPlay();e.onContextMenu=function t(i){if("sheet"===e.visualization)return;e.playMode||e.setActive(true);c(i,e)}}}}]);function c(c,d){var u=d.slideItem.qInfo.qId,f=t.getService("qvContextMenu").menu();if(!d.playMode){f.addItem({translation:"Storytelling.contextMenu.sendToBack",tid:"send-to-back",select:function t(){n.changeLayerPosition(-1,true,false,d)}});f.addItem({translation:"Storytelling.contextMenu.bringToFront",tid:"bring-to-front",select:function t(){n.changeLayerPosition(-1,false,true,d)}});f.addItem({translation:"Storytelling.contextMenu.sendBackward",tid:"send-backward",select:function t(){n.changeLayerPosition(-1,false,false,d)}});f.addItem({translation:"Storytelling.contextMenu.bringForward",tid:"bring-forward",select:function t(){n.changeLayerPosition(1,false,false,d)}});d.hasEffect&&f.addItem({translation:"Storytelling.contextMenu.deleteEffect",tid:"delete-effect",select:function t(){d.removeEffect(true)}})}"snapshot"===d.visualization&&f.addItem({translation:"Storytelling.contextMenu.goToAnalysis",tid:"goto-analysis",select:function t(){var e=Object.keys(l.States)[l.state];a.setStory(r.currentSlideId,e,r.currentStoryId,s.getParameterByName("app"));i.gotoObject(d.slideItemModel,d.model)}});d.playMode||f.addItem({translation:"Common.Delete",tid:"delete",select:function t(){d.removeItem(u);e.getApp().then(function(t){var e,i="QlikView-storytelling-"+t.id;if(o.contains(i)){e=o.get(i);e.id===u&&o.remove(i)}})}});t.getService("qvContextMenu").show(f,{position:{x:c.pageX,y:c.pageY}})}}.apply(e,n),void 0!==o&&(t.exports=o))},2604:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(90),i(2605),i(1224),i(452),i(97),i(159),i(1280),i(1270),i(172)],o=function(t,e,i,n,o,a,s,r,l,c,d){e.directive("storytellingSlideItemText",["$sce",function(e){return{restrict:"A",template:n,link:function n(u,f){var h=u.isInPlay()?t(".qv-story-play-slide.qv-story-slide-active"):t("#selectable"),p=f.find(".story-text-edit");u.loading=true;u.isEmpty=true;u.editorActive=null;u.editorRendered=false;u.objectType=u.slideItem.qData.visualizationType;u.textDirection="";u.html="";function g(t){u.html=e.trustAsHtml(o.toHTML(t));u.textDirection=r.getAutoOrAlternativeDirection(t)}g(u.slideItem.qData.style.text);setTimeout(function(){u.resizeText();"title"===u.objectType&&u.resizeTitle(false);u.$apply(function(){u.loading=false})});u.isOnPlaySlide=function(){var t=false;f.parents(".qv-story-play-slide").length>0&&(t=true);return t};u.resizeText=function(){a.calculateFontsize(u.objectType,u.html.toString(),f,h,u.isInPlay())};u.resizeTitle=function(t){var e;e=u.html.$$unwrapTrustedValue?u.html.$$unwrapTrustedValue():u.html;a.calculateFontsizeOnTitle(e,f,1.3,t)};u.initTextEditor=function(){v()};u.hideTextEditor=function(){u.editorActive=false;o.hide()};u.closeEditmode=function(){u.saveText();u.$apply(function(){u.inEdit=false})};function y(){f.parents(".qv-story-grid-object").removeClass("qv-dynamic-resizing");var t=f.find(".qv-media-tool-html");"title"===u.objectType&&t.css({display:"inline-block"});u.resizeText();u.closeEditmode();"title"===u.objectType&&t.css({display:"block"})}function v(){var t;t="title"===u.visualizationType?{style:"inline",buttons:{color:true,bold:true,italic:true,underline:true,link:true},width:292}:{style:"inline",buttons:{color:true,fontSize:true,bold:true,italic:true,underline:true,justifyLeft:true,justifyCenter:true,justifyRight:true,link:true}};function e(){var t=o.getEditorElement();c.enable(t,"paragraph"===u.visualizationType)}u.editorActive=true;setTimeout(function(){o.show(p,{markdown:u.slideItem.qData.style.text,toolbar:t,target:f.closest(".qv-story-grid-object").find(".slide-item-text-toolbar-buttons"),onOpen:function t(n){u.editorRendered=true;setTimeout(function(){e();i.isIos()||f.find(".st-text-block").focus();n.saveRange()},0)}})})}u.saveText=function(){if(!o.isActive()||!u.active)return;o.closing();var e,i=o.getMarkdown();i&&""!==t.trim(i)&&g(i);delete u.position["z-index"];u.setActive(false);e={style:{text:i},position:d.getElementPosition(f.parents(".qv-story-grid-object"),"left")};u.updateProperties(u.slideItem.qInfo.qId,e,true).then(function(){u.inEdit=false;o.hide()})};u.$watch("inEdit",function(){var e=t(".qv-storytelling-edit-toolbar").scope();if(u.inEdit)e.$broadcast("disableEditbar",true);else if(u.editorActive){u.hideTextEditor();u.editorRendered=false;e.$broadcast("disableEditbar",false)}});u.$watch("editorRendered",function(){u.editorRendered?f.removeClass("default-text"):"!?}^"===u.html&&(f.hasClass("default-text")||f.addClass("default-text"))});u.$watch("slideItem.qData.style.text",function(){var e=u.slideItem.qData.style.text;if(e&&""!==t.trim(e)){u.isEmpty=false;u.markdown=e;g(e);f.removeClass("default-text")}else{u.html="!?}^";u.isEmpty=true;e="";u.inEdit||f.addClass("default-text")}});p.on("keydown keyup input propertychange",function(){if("title"===u.visualizationType){var t=f.parents(".qv-story-grid-object"),e=o.getEditorElement();t.hasClass("qv-dynamic-resizing")||0===e.html().length||t.addClass("qv-dynamic-resizing");0===e.html().length&&t.removeClass("qv-dynamic-resizing");u.setPosition()}u.onFocus=function(t){var e=t.currentTarget;e.selectionEnd=e.value.length;e.selectionStart=e.value.length;e.placeholder=u.isInPlay()?u.addTextString:""};u.onBlur=function(t){t.currentTarget.placeholder=u.addTextString}});f.on("click.textobject",".qv-media-tool-html a",function(e){!t(e.target).closest("a").length||u.isOnPlaySlide()&&!t(e.currentTarget).filter("[data-bookmark-id]").length||e.preventDefault();t(e.target).closest("a").hasClass("bookmark-link")&&u.isOnPlaySlide()&&l.gotoBookmark(t(e.currentTarget).attr("data-bookmark-id"))});s.on("start.slideItem"+u.slideItem.qInfo.qId,u.closeEditmode);s.on("end.slideItem"+u.slideItem.qInfo.qId,y);u.$on("slideItemResized",function(t,e,i){if(e&&i){var n=parseFloat(e[0]),o=parseFloat(i[0]);"title"===u.objectType&&(n>o+1||o>n+1)&&setTimeout(function(){u.resizeTitle(true)},0)}});u.$on("$destroy",function(){f.off(".textobject");s.off("start.slideItem"+u.slideItem.qInfo.qId,u.closeEditmode);s.off("end.slideItem"+u.slideItem.qInfo.qId,y)})}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2605:function(t,e){t.exports='\n<div class="qv-story-text-block" ng-if="!isOnPlaySlide() && !inEdit"></div>\n<div class="qv-media-tool-editor story-text-edit" ng-show="inEdit && editorRendered">\n\t<textarea ng-if="editorActive" class="{{slideItem.qData.style.classes}}"\n\t\tcols="10"\n\t\tng-show="showText"\n\t\tplaceholder="{{addTextString}}"\n\t\t\tng-focus="onFocus()"\n\t\t\tng-blur="onBlur()"\n\t\tmaxlength="255">{{ slideItem.qData.style.text }}</textarea>\n</div>\n<div class="qv-media-tool-html story-text-static" ng-show="!editorRendered" ng-bind-html="html" dir="{{ textDirection }}"></div>\n\x3c!--<div class="qv-media-tool-html story-text-static" ng-show="!inEdit && !loading" ng-bind-html="html"></div>--\x3e\n'},2606:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(90),i(89),i(48),i(2607),i(2608),i(230),i(97),i(422),i(2609),i(2611),i(1806),i(106),i(123),i(114),i(1803),i(95),i(1807),i(2620),i(245)],o=function(t,e,i,n,o,a,s,r,l,c,d,u,f,h,p,g,y){function v(t){var e;e=t&&"pivot-table"===t?h.STATIC:h.ANALYSIS;return e}n.directive("storytellingSlideItemSnapshot",["$timeout",function(h){return{restrict:"A",template:o,link:function o(m,b){var x=i(),S,_="function"===typeof m.isInPlay&&m.isInPlay();m.options={setController:x.resolve,APIType:l,hideChartScrollWithoutMiniChart:true,interactionState:v(m.visualizationType),selections:false,tooltips:_,limitedInteraction:_,navigation:false,direction:p.direction,freeResize:false,maximizeSnapshot:m.maximizeSnapshot,onRendered:function t(){b.attr("data-render-state",1)}};_&&(m.options.cssTransform=g.zoomPanHandler.zoomPanInfo);m.effectPropsOpen=false;m.getVisualization=function(){return x.promise};t(b).on("dragstart","img",function(){return false});m.$watch("slideItemModel",function(t){t&&t.getLayout().then(function(t){var i;if(t.qEmbeddedSnapshot)if(Object.keys(t.qEmbeddedSnapshot).length){i=m.slideItemModel.getSnapshotObject();o()}else var n=f(m,"slideItemModel",function(t){if(Object.keys(t.qEmbeddedSnapshot).length){i=m.slideItemModel.getSnapshotObject();o();n()}});else if(!t.qEmbeddedSnapshot){i=s.get(t.style.id);o()}function o(){i.then(function(t){m.model=t;t.Closed.bind(I);S=t.layoutSubscribe(function(t){if(!m.hasEffect&&t.effectPath)d.renderEffect(m,b,!!m.effect);else if(!m.effect||m.effectPath===t.effectPath&&e.isEqual(m.effectProperties,t.effectProperties))!t.effectPath&&m.effect&&m.removeEffect(false);else{m.effectPath=null;d.renderEffect(m,b,true)}m.maximizeSnapshot&&m.model.layout.snapshotData&&M();m.scaleSnapshot();m.getVisualization().then(function(t){t.loaded.then(function(){m.object=t;m.cssScalingSupported=t.supportCssScaling();m.cssScalingSupported&&(m.scaling={width:m.model.layout.snapshotData.object.size.w+"px",height:m.model.layout.snapshotData.object.size.h+"px"});m.scaleSnapshot(t)})})});m.fadeIn=true;y.publish("/story/snapshotReadyForId",m.id)})}})});m.scaleSnapshot=function(){var t=m.model.layout.snapshotData,e=!m.options.freeResize||m.maximizeSnapshot;if(!e){m.scaling={};return}if(m.cssScalingSupported)u.cssScaleSnapshot(b,m.model.layout.snapshotData,m.scaling);else{var i=b.find("article"),n=m.maximizeSnapshotSize?parseInt(m.maximizeSnapshotSize.width):i.width(),o=t.object.size.w||t.content.size.w,s=a.sizeSnapshotTitles(o,n,m.maximizeSnapshot);m.scaling={"font-size":s+"px"}}};m.renderEffect=function(t){return d.renderEffect(m,b,t)};function I(){m.model=null;S&&S.dispose();m.$broadcast("snapshotModelClosed")}function w(){if(m.model&&m.model.layout&&m.model.layout.snapshotData){m.maximizeSnapshot&&M();!m.object||!m.object.layout.snapshotData.object.freeResize&&m.cssScalingSupported||m.object.resize();m.scaleSnapshot(m.object)}}r.on("end.slideItem"+m.$id,w);m.$on("slideItemResized",function(){h(function(){w()})});m.$on("$destroy",function(){r.off("end.slideItem"+m.$id,w);m.object&&m.object.tooltipApi.cancel();I();m.model&&m.model.Closed.unbind(I)});if("function"===typeof m.isInPlay&&m.isInPlay())return;var P=t(".qv-grid-story").find(".slide-overlay.effect"),q=n.getService("snapshotReplaceService");m.replaceInfo=q.info;m.initSnapshotProperties=function(){m.model.getProperties().then(function(){c.show({snapShotModel:m.model,slideItemModel:m.slideItemModel,getVisualization:m.getVisualization,effect:m.effect})})};t(b).on("click","a",function(t){t.preventDefault()});m.openEffectProps=function t(e){e&&"function"===typeof e.stopPropagation&&e.stopPropagation();m.effectPropsOpen?m.effectPropsOpen=false:d.openEffectDialog(m,m.effect.propsTemplate,b.closest(".qv-story-grid-object").find(".effect-props-btn"))};m.showReplaceSnapshot=function(t){t&&"function"===typeof t.stopPropagation&&t.stopPropagation();m.replaceInfo.replaceListOpen?q.closeList():q.showList(m.snapshotId,m.slideItem,m.model,t.currentTarget,m.removeItem)};m.removeEffect=function t(e){m.effectPath=null;m.effectProperties=null;m.hasEffect=false;m.effect.remove(m,m.model,e).then(function(t){if(e)m.model.setProperties(t);else{b.parent().parent().find(".effectLayer").remove();d.reloadContent(m)}})};m.lockUnlockRatio=function(t){t&&"function"===typeof t.stopPropagation&&t.stopPropagation();m.ratio=!m.ratio;u.lockUnlockRatio(m.slideItemModel,m.ratio)};m.$on("draggingEffect",function(t,e){d.showDragResponse(m,b,e,m.slideItem.qData.position["z-index"],P)});m.$on("dropEffect",function(){d.hideDragResponse(m,b.closest(".qv-story-grid-object"),m.slideItem.qData.position["z-index"],P)});function M(){var t=m.model.layout.snapshotData.object.size,e=t.w/t.h,i=b.parent(),n={w:i.width()-20,h:i.height()-20},o={height:n.h+"px",width:n.h*e+"px"};if(n.h*e>n.w){o.width=n.w+"px";o.height=n.w/e+"px"}m.maximizeSnapshotSize=o}}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2607:function(t,e){t.exports='<qv-object model="model" options="options" ng-style="scaling"></qv-object>'},2608:function(t,e,i){"use strict";var n,o;!(n=[],o=function(){var t=13,e=1,i=45;function n(n,o,a){var s=o/n,r;r=Math.round(t*s);r<e&&(r=e);a&&r>i&&(r=i);return r}return{sizeSnapshotTitles:n}}.apply(e,n),void 0!==o&&(t.exports=o))},2609:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(90),i(156),i(101),i(506),i(2610),i(165),i(1674),i(115),i(50),i(315)],o=function(t,e,i,n,o,a,s,r,l,c){var d={scope:{snapShotModel:"=",slideItemModel:"=",getVisualization:"=",effectObj:"="},controller:["$scope",function(n){n.maximizeSnapshot=true;n.visualizationType=n.snapShotModel.layout.visualizationType;function o(){n.items=[];n.getVisualization().then(function(t){var o=i.findSnapshotProperties(t.ext.mappedDefinition),a=n.snapShotModel.layout,s=n.snapShotModel.layout.visualization;r.loadComponents().then(function(){for(var t=0;t<o.length;t++){var i=e.extend(true,{},o[t]);a.orientation&&(i.orientation=a.orientation);if("legend.show"===i.ref){i.readOnly=f(a,s);i.show=true}h(n.items,i,a)}})})}n.getIconName=function t(e){return l.getLibraryInfo(e).icon};n.$on("saveProperties",function(){n.snapShotModel.layout.effectPath&&n.snapShotModel.layout.originalModelSettings&&(n.snapShotModel.properties.originalModelSettings=n.effectObj.updateOrigSettings(n.snapShotModel.properties));n.snapShotModel.setProperties(n.snapShotModel.properties);n.$broadcast("datachanged")});n.done=function(){n.snapShotModel=null;t.$rootScope.$broadcast("snapshotPropertiesClosed");n.destroyComponent()};n.$on("$destroy",function(){n.snapShotModel=null;c.ViewChanged.unbind(n.done)});c.ViewChanged.bind(n.done);o()}]};function u(t,e){var i=n.getValue(t,"color."+e);var o;var a;if(void 0===i){o=n.getValue(t,"color.box."+e);void 0===o&&(a=n.getValue(t,"color.point."+e))}return i||o||a}function f(t,e){var i=u(t,"auto"),o=u(t,"mode"),a=u(t,"expressionIsColor"),s=n.getValue(t,"qHyperCube.qDimensionInfo.length"),r=n.getValue(t,"qHyperCube.qMeasureInfo.length");return"scatterplot"===e?!("primary"!==n.getValue(t,"color.mode")&&!n.getValue(t,"color.auto")):"piechart"===e?!i&&"primary"===o||!i&&"byExpression"===o&&a:i&&1===s&&1===r||!i&&"primary"===o||!i&&"byExpression"===o&&a}function h(t,e,i){var n={component:s.findComponent(e),definition:e,tid:"function"===typeof e.snapshot.tid?e.snapshot.tid(i):e.snapshot.tid,title:"function"===typeof e.snapshot.title?e.snapshot.title(i):e.snapshot.title,args:{handler:new o,snapshot:true,layout:i}};t.push(n)}function p(e){var i={snapShotModel:e.snapShotModel,slideItemModel:e.slideItemModel,getVisualization:e.getVisualization,effectObj:e.effect};var n=t.getService("luiDialog");return n.show({template:a,controller:d.controller,input:i})}return{show:p}}.apply(e,n),void 0!==o&&(t.exports=o))},2610:function(t,e){t.exports='<lui-dialog id="snapshot-properties-dialog">\n\t<lui-dialog-body class="snapshot-properties-body">\n\t\t<div id="snapshot-properties-wrapper">\n\t\t\t<section id="snapshot-properties-content">\n\t\t\t\t<main class="dm-main">\n\t\t\t\t\t<div class="qv-snapshot" storytelling-slide-item-snapshot ng-style="maximizeSnapshotSize"></div>\n\t\t\t\t</main>\n\t\t\t</section>\n\t\t\t<section id="snapshot-properties-panel">\n\t\t\t\t<div class="snapshot-properties-header">\n\t\t\t\t\t<span class="lui-icon  lui-icon--{{ getIconName( snapShotModel.layout.visualizationType ) }}"></span>\n\t\t\t\t\t<span class="title" q-translation="{{snapShotModel.layout.title.length > 0 ? snapShotModel.layout.title : \'Storytelling.snapshot.Untitled\'}}"></span>\n\t\t\t\t</div>\n\t\t\t\t<ul class="snapshot-prop-list">\n\t\t\t\t\t<li class="snapshot-prop-item" ng-repeat="item in items" tid="{{item.tid}}">\n\t\t\t\t\t\t<div ng-if="item.title" class="property-title" q-translation="{{item.title}}"></div>\n\t\t\t\t\t\t<div include-pp-component x-component="item.component" x-definition="item.definition" x-data="snapShotModel.properties" x-args="item.args"></div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</section>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-footer id="snapshot-properties-footer">\n\t\t<lui-button ng-click="done()" name="done" q-translation="Common.Done" tid="done-button"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},2611:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(90),i(89),i(2612),i(2614),i(2615),i(2616),i(172),i(48),i(2617),i(1685),i(1281),i(1196),i(49)],o=function(t,e,i,n,o,a,s,r,l,c,d,u,f,h){function p(t,e,i){return t.model.getLayout().then(function(n){if(!n.effectPath&&!t.effectPath){t.hasEffect=false;return}if(n.effectPath&&!t.effectPath){t.effectPath=n.effectPath;t.effectProperties=n.effectProperties;t.hasEffect=true}return x(t,e,t.model,t.effectPath,t.effectProperties).then(function(){t.hasEffect=true;i&&b(t)}).catch(function(t){false})}).catch(function(t){false})}function g(e,i,n){function o(i){if(i&&t(i.target).closest(".effect-props-btn")[0]===n[0])return;n.attr("active",false);e.effectPropsOpen=false}var a={template:i,closeOnEscape:true,controller:c.controller,input:{onClose:o,slideItemScope:e,effectPropsButton:n,effect:e.effect},outsideIgnore:"effect-popover-ignore-toggle-"+e.slideItem.qInfo.qId,dock:"bottom",showArrow:false,alignTo:n[0]};return l.getService("luiPopover").show(a)}function y(t,e,i,n,o){var a=t.visualizationType;if(v(t,a,i.effectPath)){e.parents(".qv-story-grid-object").toggleClass("qv-fade-border");t.validDrop=true;setTimeout(function(){e.parents(".qv-story-grid-object").toggleClass("qv-fade-border")});e.css("z-index",r.maxNumberOfSlideItems+n)}else{e.find("slide-item-content").addClass("not-applicable");t.effectNotApplicable=true}o.show()}function v(t,i,n){var o=false;if(h.getFlag("BARCHART")||"barchart"!==i||"stacked"===t.model.layout.barGrouping.grouping){if("linechart"===i&&1===t.model.layout.qHyperCube.qMeasureInfo.length&&1===t.model.layout.qHyperCube.qDimensionInfo.length)o=true;else if(e.getValue(t,"object.ext.support.effects")){var a=e.getValue(t,"object.ext.effects.isCompatible");a({layout:t.model.layout,effectPath:n})&&(o=true)}}else o=true;return o}function m(t,e,i,n){e.css({"z-index":i});e.find("slide-item-content").removeClass("not-applicable");n.hide();t.effectNotApplicable=false;e.toggleClass("qv-fade-border");t.activeDrop=false;t.validDrop=false;setTimeout(function(){e.toggleClass("qv-fade-border")},100);t.$apply()}function b(t){t.getVisualization().then(function(t){t.reloadContent()})}function x(t,e,r,l,c){t.effect=null;l.indexOf("maxmin")>-1?h.getFlag("BARCHART")||"barchart"!==r.layout.visualizationType?"linechart"===r.layout.visualizationType&&(t.effect=new o(e,c)):t.effect=new n(e,c):l.indexOf("highlight-value")>-1&&(h.getFlag("BARCHART")||"barchart"!==r.layout.visualizationType?"linechart"===r.layout.visualizationType&&(t.effect=new s(e,c,t)):t.effect=new a(e,c,t));return t.effect?t.effect.init(t,r,l,c):t.getVisualization().then(function(n){n.ext.support.effects&&(t.effect=n.ext.effects.create({element:e,properties:c,effectPath:l,effectHelper:f,Flag:u,highlightValuePropsTemplate:d,Promise:i.Promise}));return t.effect?t.effect.init(t,r,l,c):null})}return{show:g,renderEffect:p,openEffectDialog:g,showDragResponse:y,hideDragResponse:m,reloadContent:b}}.apply(e,n),void 0!==o&&(t.exports=o))},2612:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(89),i(1166),i(90),i(1281),i(1196)],o=function(t,e,i,n,o,a){var s=i.extend({init:function t(){this._super.apply(this,[].slice.call(arguments))},beforeBarsAddedToRenderer:function t(){},barsAddedToRenderer:function t(){this._formatLabels();var e=this.options.effects.maxmin;this.identifiedNodes=[];r.call(this,e._effectProperties,this._barLayer.renderer.stage)},labelAddedToRenderer:function t(e){e.rendered=false},afterPaint:function i(){var n=this,o,a=this.options.effects.maxmin,s=a.effectLayer;o=this.identifiedNodes.filter(function(t){return!!t.shape}).map(function(e){return a.generateFlagDetails(e.shape,e.data.value,e.data.valueLabel,t(n.container),n)});o&&o.length&&a.showFlags(s,o);return e.resolve()}});function r(t,e){var i=e.leaves.filter(function(t){return t.data.isVisible}),n=i.length,o,a,s,r=[],l=this._data.qHyperCube.qMeasureInfo.length,c=this._data.qHyperCube.qDimensionInfo.length,d,u;l>1?e.children.forEach(function(t){r.push(t.children.filter(function(t){return t.data.isVisible}))}):c>1?e.children.forEach(function(t){r.push(t.leaves.filter(function(t){return t.data.isVisible}))}):r.push(i);if(r&&r.length)for(d=0;d<r.length;d++){s=r[d];n=s.length;if(!s||!n)continue;a=s[0];o=a.data.value;for(u=0;u<n;u++){s[u].fill="#BFDAD9";if(t.max&&s[u].data.value>o||t.min&&s[u].data.value<o){a=s[u];o=a.data.value}}a&&(a.fill="#68B2AF");this.identifiedNodes.push({data:a.data,shape:a.getBoundingRect()})}}function l(e,i){this.element=e;a.initFade(this.element);var n=this.element.parent(),o=n.parent().find(".effectLayer");o.length>0&&o.remove();this.effectLayer=t('<div class="effectLayer"></div>');e.append(this.effectLayer);this._effectProperties=i;this.effectApplied=true;a.fadeIn(this.element)}l.prototype.init=function(i,o,a,r){var l=this;this.model=o;if(o.layout.effectProperties&&o.layout.effectPath===a&&o.layout.effectProperties.max===r.max){i.options=n.extend(true,i.options,{components:{dataArea:{clazz:s,effects:{maxmin:this}}}});return e.resolve()}i.options=n.extend(true,i.options,{components:{dataArea:{clazz:s,effects:{maxmin:this}}}});return o.getProperties().then(function(e){if(!o.properties.originalModelSettings){var i=t.extend(true,{},e);o.properties.originalModelSettings=l.updateOrigSettings(i)}o.properties.effectProperties=r;o.properties.effectPath=a;o.properties.measureAxis.show="none";o.properties.dimensionAxis.show="labels";o.properties.gridLine.auto=false;o.properties.gridLine.spacing=0;o.properties.legend.show=false;o.properties.dataPoint.showLabels=false;var n=o.properties.refLine.refLines;for(var s=0;s<n.length;s++)n[s].show=false;return o.setProperties(o.properties)})};l.prototype.updateOrigSettings=function(t){return{measureAxis:t.measureAxis,dimensionAxis:t.dimensionAxis,gridLine:t.gridLine,legend:t.legend,dataPoint:t.dataPoint,refLine:t.refLine}};l.prototype.remove=function(o,a,s){var r=e();o.options=n.extend(true,o.options,{components:{grid:{show:true},dataArea:{clazz:i}}});s?a.getProperties().then(function(e){var i=t.extend(true,e,{effectPath:null,effectProperties:null,measureAxis:a.layout.originalModelSettings.measureAxis,dimensionAxis:a.layout.originalModelSettings.dimensionAxis,gridLine:a.layout.originalModelSettings.gridLine,legend:a.layout.originalModelSettings.legend,dataPoint:a.layout.originalModelSettings.dataPoint,refLine:a.layout.originalModelSettings.refLine});r.resolve(i)}):r.resolve();return r.promise};function c(t,e,i,n){var o=e.offset().left-i.element.offset().left,a=e.offset().top-i.element.offset().top,s;s="horizontal"===i.model.layout.orientation?{x:n>0?t.x+o+t.width:t.x+o,y:a+t.y+t.height/2}:{x:t.x+o+t.width/2,y:n>0?t.y+a:t.y+t.height+a};return s}function d(t,e,i){var n,o;if("horizontal"===i.model.layout.orientation)return t>0?"horizontalright":"horizontalleft";n=t>=0?"top":"bottom";o=e.x>i.element.width()/2?"left":"right";return n+o}l.prototype.generateFlagDetails=function(t,e,i,n,o){var a=c(t,n,this,e,o),s=d(e,a,this);return{position:a,label:i,orientation:s}};l.prototype.showFlags=function(t,e){o.show(t,e)};return l}.apply(e,n),void 0!==o&&(t.exports=o))},2613:function(t,e){t.exports='<div class="qv-story-effect-flag" ng-repeat="flag in flags" ng-class="[flag.orientationClasses]" ng-style="flag.style">\n  <div class="qv-flag-content">\n    <div class="qv-flag-title" ng-if="flag.title">{{flag.title}}</div>\n    <div class="qv-flag-label">{{flag.label}}</div>\n  </div>\n  <div class="qv-flag-post"></div>\n</div>'},2614:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(89),i(1176),i(90),i(1281),i(1196)],o=function(t,e,i,n,o,a){var s=i.extend({init:function t(){this._super.apply(this,[].slice.call(arguments))},beforeLayerUpdates:function t(e){var i,n=0,o=l(e,n),a=o.length,s,r;if(!a)return;s=o[0].value;r=o[0].value;for(i=1;i<a;i++){this.options.effects.maxmin._effectProperties.max&&o[i].value>=s&&(s=o[i].value);this.options.effects.maxmin._effectProperties.min&&o[i].value<=r&&(r=o[i].value)}o.forEach(function(t){(this.options.effects.maxmin._effectProperties.max&&t.value===s||this.options.effects.maxmin._effectProperties.min&&t.value===r)&&(t.keep=true);t.size=12},this);this._maxValue=s;this._minValue=r;this._lineIndex=n},preRender:function t(e){var i=[],n=c(e,this._lineIndex||0),o=n.length;d(e);this._pointsToHighlight=[];if(!o)return;this.options.effects.maxmin._effectProperties.max&&(i=n.filter(function(t){return t.data.value===this._maxValue},this));this.options.effects.maxmin._effectProperties.min&&(i=i.concat(n.filter(function(t){return t.data.value===this._minValue&&i.indexOf(t)<0},this)));i.forEach(function(t){t.fill="#68B2AF";t.visible=true});this._pointsToHighlight=i},afterPaint:function i(){var o=this.options.effects.maxmin,a=o.effectLayer,s,l;l=this._pointsToHighlight.map(function(e){var i=e.getBoundingRect();s=e.data.text?n.ellipseText(e.data.text,r):"";return o.generateFlagDetails({x:i.x+i.width/2,y:i.y+i.height/2},e.data.label,t(this.container),e.data.value,s,this)},this);o.showFlags(a,l);return e.resolve()}}),r=20;function l(t,e){var i=t?t[e]:null;return i?i.points.filter(function(t){return!!t&&!t.isNaN&&!t.outOfDimensionBounds}):[]}function c(t,e){var i=t?t[e]:null,n=i?i.find("Points")[0]:null;return n?n.children:[]}function d(t){if(!t)return;t.forEach(function(t){t.find("PolyArea Polygon").forEach(function(t){t.fill="#BFDAD9"});t.find("PolyLine Polygon, PolyLine Line").forEach(function(t){t.stroke="#BFDAD9";t.strokeWidth=4});t.find("Circle").forEach(function(t){t.fill="#BFDAD9";t.strokeWidth=0})})}function u(e,i){this.element=e;a.initFade(this.element);var n=e.find(".effectLayer");n.length>0&&n.remove();this.effectLayer=t('<div class="effectLayer"></div>');e.prepend(this.effectLayer);this._effectProperties=i;this.effectApplied=true;a.fadeIn(this.element)}u.prototype.init=function(i,o,a,r){var l=this;if(o.layout.effectProperties&&o.layout.effectPath===a&&o.layout.effectProperties.max===r.max){i.options=n.extend(true,i.options,{components:{dataArea:{clazz:s,effects:{maxmin:this}}}});return e.resolve()}i.options=n.extend(true,i.options,{dataPoint:{showLabels:false},components:{dataArea:{clazz:s,effects:{maxmin:this}}}});return o.getProperties().then(function(e){if(!o.properties.originalModelSettings){var i=t.extend(true,{},e);o.properties.originalModelSettings=l.updateOrigSettings(i)}o.properties.effectProperties=r;o.properties.effectPath=a;o.properties.measureAxis.show="none";o.properties.dimensionAxis.show="labels";o.properties.gridLine.auto=false;o.properties.gridLine.spacing=0;o.properties.legend.show=false;o.properties.dataPoint.showLabels=false;var n=o.properties.refLine.refLines;for(var s=0;s<n.length;s++)n[s].show=false;o.setProperties(o.properties)})};u.prototype.updateOrigSettings=function(t){return{measureAxis:t.measureAxis,dimensionAxis:t.dimensionAxis,gridLine:t.gridLine,legend:t.legend,dataPoint:t.dataPoint,refLine:t.refLine}};u.prototype.remove=function(o,a,s){var r=e();o.options=n.extend(true,o.options,{components:{grid:{show:true},dataArea:{clazz:i}}});s?a.getProperties().then(function(e){var i=t.extend(true,e,{effectPath:null,effectProperties:null,measureAxis:a.layout.originalModelSettings.measureAxis,dimensionAxis:a.layout.originalModelSettings.dimensionAxis,gridLine:a.layout.originalModelSettings.gridLine,legend:a.layout.originalModelSettings.legend,dataPoint:a.layout.originalModelSettings.dataPoint,refLine:a.layout.originalModelSettings.refLine});r.resolve(i)}):r.resolve();return r.promise};function f(t,e,i){var n=e.offset().left-i.element.offset().left,o=e.offset().top-i.element.offset().top;return{x:t.x+n,y:t.y+o}}function h(t,e,i){var n=t>=0?"top":"bottom",o=e.x>i.element.width()/2?"left":"right";return n+o}u.prototype.generateFlagDetails=function(t,e,i,n,o,a){var s=f(t,i,this,a),r=h(n,s,this);return{position:s,orientation:r,label:e,title:o}};u.prototype.showFlags=function(t,e){o.show(t,e)};return u}.apply(e,n),void 0!==o&&(t.exports=o))},2615:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(89),i(1166),i(90),i(1281),i(1685),i(1196)],o=function(t,e,i,n,o,a,s){var r=i.extend({init:function t(){this._super.apply(this,[].slice.call(arguments))},getOriginalPoint:function t(e,i){return{x:e,y:i}},beforeBarsAddedToRenderer:function t(){},barsAddedToRenderer:function t(){this._formatLabels();var e=this.options.effect;c.call(this,this.nodesInView);this.selectedNodes=[];e.selectedIndex=e._effectProperties.selectedIndex;if(e.recentClickToSelect){s.selectShape.call(this,e,this.nodesInView);s.updateSelectedPointIndex(e)}e.selectedValue=e.dataPoints[e.selectedIndex];d.call(this,this.nodesInView,e.selectedValue);e.effectApplied&&u.call(this,this.nodesInView)},labelAddedToRenderer:function t(e){e.rendered=false},afterPaint:function i(){var n=this.options.effect,o=n.effectLayer,a,s=this;if(this.nodesInView.length>0){a=this.selectedNodes.map(function(e){return s.options.effect.generateFlagDetails(e.getBoundingRect(),e.data.value,e.data.valueLabel,t(s.container),s)});s.options.effect.showFlags(o,a)}return e.resolve()}}),l=20;function c(t){var e,i=[],o=this._data.qHyperCube.qMeasureInfo.length,a=1===this._data.qHyperCube.qDimensionInfo.length&&1===o,s;if(a)for(e=0;e<t.length;e++){s=t[e].parent.data.qText?n.ellipseText(t[e].parent.data.qText,l):"";i.push({type:"singles",text:s+" ("+t[e].data.valueLabel+")",value:e})}else for(e=0;e<t.length;e++){var r=o<=1?t[e].parent:t[e];i.push({type:"grouped",text:n.ellipseText(r.data.qText,l),dataIdx:o<=1?r.data.qElemNo:r.data.measureIndex,value:e,optionGroup:n.ellipseText(r.parent.data.qText,l)})}this.options.effect.dataPoints=i}function d(t,e){if(!e)return;if("singles"===e.type){this.selectedNodes.push(t[e.value]);return}var i=this,n,o,a,s=this._data.qHyperCube.qMeasureInfo.length;"dataIdx"in e?t.forEach(function(t){a=s>1?t:t.parent;n=a.data.qText;o="measureIndex"in a.data?a.data.measureIndex:a.data.qElemNo;e.dataIdx===o&&i.selectedNodes.push(t)}):t.forEach(function(t){n=t.data.qText;e.text===n&&i.selectedNodes.push(t)})}function u(t){t.forEach(function(t){t.fill="#BFDAD9"});this.selectedNodes.forEach(function(t){t.fill="#68B2AF"})}function f(e,i){this.element=e;s.initFade(this.element);var n=e.find(".effectLayer"),o=this;n.length>0&&n.remove();o.effectLayer=t('<div class="effectLayer"></div>');e.append(o.effectLayer);o._effectProperties=i;o.hasPropertiesPanel=true;o.effectApplied=true;o.applyEffect=function t(){if(!o.effectApplied){o.effectApplied=true;o.element.scope().getVisualization().then(function(t){t.onResize()})}};s.fadeIn(this.element)}f.prototype.init=function(i,o,a,s){var l=this;this.model=o;if(o.layout.effectProperties&&o.layout.effectPath===a){i.options=n.extend(true,i.options,{components:{dataArea:{clazz:r,effect:this}}});return e.resolve()}i.options=n.extend(true,i.options,{components:{dataArea:{clazz:r,effect:this}}});return o.getProperties().then(function(e){if(!o.properties.originalModelSettings){var i=t.extend(true,{},e);o.properties.originalModelSettings=l.updateOrigSettings(i)}o.properties.effectProperties=s;o.properties.effectPath=a;o.properties.measureAxis.show="none";o.properties.dimensionAxis.show="labels";o.properties.gridLine.auto=false;o.properties.gridLine.spacing=0;o.properties.legend.show=false;o.properties.dataPoint.showLabels=false;var n=o.properties.refLine.refLines;for(var r=0;r<n.length;r++)n[r].show=false;return o.setProperties(o.properties)})};f.prototype.updateOrigSettings=function(t){return{measureAxis:t.measureAxis,dimensionAxis:t.dimensionAxis,gridLine:t.gridLine,legend:t.legend,dataPoint:t.dataPoint,refLine:t.refLine}};f.prototype.remove=function(o,a,s){var r=e();o.options=n.extend(true,o.options,{components:{grid:{show:true},dataArea:{clazz:i}}});s?a.getProperties().then(function(e){var i=t.extend(true,e,{effectPath:null,effectProperties:null,measureAxis:a.layout.originalModelSettings.measureAxis,dimensionAxis:a.layout.originalModelSettings.dimensionAxis,gridLine:a.layout.originalModelSettings.gridLine,legend:a.layout.originalModelSettings.legend,dataPoint:a.layout.originalModelSettings.dataPoint,refLine:a.layout.originalModelSettings.refLine});r.resolve(i)}):r.resolve();return r.promise};function h(t,e,i,n){var o=e.offset().left-i.element.offset().left,a=e.offset().top-i.element.offset().top,s;s="horizontal"===i.model.layout.orientation?{x:n>0?t.x+o+t.width:t.x+o,y:a+t.y+t.height/2}:{x:t.x+o+t.width/2,y:n>0?t.y+a:t.y+t.height+a};return s}function p(t,e,i){var n,o;if("horizontal"===i.model.layout.orientation)return t>0?"horizontalright":"horizontalleft";n=t>=0?"top":"bottom";o=e.x>i.element.width()/2?"left":"right";return n+o}f.prototype.generateFlagDetails=function(t,e,i,n,o){var a=h(t,n,this,e,o),s=p(e,a,this);return{position:a,orientation:s,label:i}};f.prototype.showFlags=function(t,e){var i=this.element.scope();o.show(t,e);if(i.effectJustDropped){i.effectPropsOpen=false;i.openEffectProps();i.effectJustDropped=false}};f.prototype.propsTemplate=a;return f}.apply(e,n),void 0!==o&&(t.exports=o))},2616:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(89),i(1176),i(90),i(1281),i(1685),i(1196)],o=function(t,e,i,n,o,a,s){var r=i.extend({init:function t(){this._super.apply(this,[].slice.call(arguments))},beforeLayerUpdates:function t(e){var i=0,n,o=d(e,i),a=o.length,r=this.options.effect;this._circleValueToHighlight=-1;this._lineIndex=i;this._pointsInView=o;if(!a)return;r.selectedIndex=r._effectProperties.selectedIndex;if(r.recentClickToSelect){s.selectShape.call(this,r,o);s.updateSelectedPointIndex(r)}n=o[r.selectedIndex];if(n){n.keep=true;this._circleValueToHighlight=n.dataIndex}o.forEach(function(t){t.size=12})},preRender:function t(e){var i=u(e,this._lineIndex),n=i.length;this._pointsToHighlight=[];f(e);if(!n)return;this._pointsToHighlight=e[this._lineIndex].find("Points [data.dataIndex='"+this._circleValueToHighlight+"']");this._pointsToHighlight.forEach(function(t){t.fill="#68B2AF";t.visible=true})},afterPaint:function i(){var o=this.options.effect,a=o.effectLayer,s,r,d;c.call(this,this._pointsInView);d=this._pointsToHighlight?this._pointsToHighlight[0]:null;if(d){s=d.getBoundingRect();r=d.data.text?n.ellipseText(d.data.text,l):"";var u=[o.generateFlagDetails({x:s.x+s.width/2,y:s.y+s.height/2},d.data.label,t(this.container),d.data.value,r,this)];o.showFlags(a,u)}return e.resolve()}}),l=20;function c(t){var e,i,o=[];for(e=0;e<t.length;e++){i=t[e].text?n.ellipseText(t[e].text,l):"";o.push({text:i+" ("+t[e].label+")",value:e})}this.options.effect.dataPoints=o}function d(t,e){var i=t?t[e]:null;return i?i.points.filter(function(t){return!!t&&!t.isNaN&&!t.outOfDimensionBounds}):[]}function u(t,e){var i=t?t[e||0]:null,n=i?i.find("Points")[0]:null;return n?n.children:[]}function f(t){if(!t)return;t.forEach(function(t){t.find("PolyArea Polygon").forEach(function(t){t.fill="#BFDAD9"});t.find("PolyLine Polygon, PolyLine Line").forEach(function(t){t.stroke="#BFDAD9";t.strokeWidth=4});t.find("Circle").forEach(function(t){t.fill="#BFDAD9";t.strokeWidth=0})})}function h(e,i){this.element=e;s.initFade(this.element);var n=e.find(".effectLayer"),o=this;n.length>0&&n.remove();o.effectLayer=t('<div class="effectLayer"></div>');e.prepend(o.effectLayer);o._effectProperties=i;o.hasPropertiesPanel=true;o.effectApplied=true;o.applyEffect=function t(){if(!o.effectApplied){o.effectApplied=true;o.element.scope().getVisualization().then(function(t){t.onResize()})}};s.fadeIn(this.element)}h.prototype.init=function(i,o,a,s){var l=this;if(o.layout.effectProperties&&o.layout.effectPath===a&&o.layout.effectProperties.selectedIndex===s.selectedIndex){i.options=n.extend(true,i.options,{components:{dataArea:{clazz:r,effect:this}}});return e.resolve()}i.options=n.extend(true,i.options,{components:{dataArea:{clazz:r,effect:this}}});return o.getProperties().then(function(e){if(!o.properties.originalModelSettings){var i=t.extend(true,{},e);o.properties.originalModelSettings=l.updateOrigSettings(i)}o.properties.effectProperties=s;o.properties.effectPath=a;o.properties.measureAxis.show="none";o.properties.dimensionAxis.show="labels";o.properties.gridLine.auto=false;o.properties.gridLine.spacing=0;o.properties.legend.show=false;o.properties.dataPoint.showLabels=false;var n=o.properties.refLine.refLines;for(var r=0;r<n.length;r++)n[r].show=false;return o.setProperties(o.properties)})};h.prototype.updateOrigSettings=function(t){return{measureAxis:t.measureAxis,dimensionAxis:t.dimensionAxis,gridLine:t.gridLine,legend:t.legend,dataPoint:t.dataPoint,refLine:t.refLine}};h.prototype.remove=function(o,a,s){var r=e();o.options=n.extend(true,o.options,{components:{grid:{show:true},dataArea:{clazz:i}}});s?a.getProperties().then(function(e){var i=t.extend(true,e,{effectPath:null,effectProperties:null,measureAxis:a.layout.originalModelSettings.measureAxis,dimensionAxis:a.layout.originalModelSettings.dimensionAxis,gridLine:a.layout.originalModelSettings.gridLine,legend:a.layout.originalModelSettings.legend,dataPoint:a.layout.originalModelSettings.dataPoint,refLine:a.layout.originalModelSettings.refLine});r.resolve(i)}):r.resolve();return r.promise};function p(t,e,i){var n=e.offset().left-i.element.offset().left,o=e.offset().top-i.element.offset().top;return{x:t.x+n,y:t.y+o}}function g(t,e,i){var n=t>=0?"top":"bottom",o=e.x>i.element.width()/2?"left":"right";return n+o}h.prototype.generateFlagDetails=function(t,e,i,n,o,a){var s=p(t,i,this,a),r=g(n,s,this);return{position:s,orientation:r,label:e,title:o}};h.prototype.showFlags=function(t,e){var i=this.element.scope();o.show(t,e);if(i.effectJustDropped){i.effectPropsOpen=false;i.openEffectProps();i.effectJustDropped=false}};h.prototype.propsTemplate=a;return h}.apply(e,n),void 0!==o&&(t.exports=o))},2617:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(97),i(172),i(1196)],o=function(t,e,i,n){return{controller:["$scope",function(o){var a=o.slideItemScope.effect;o.slideItemScope.effectPropsOpen=true;o.change=function t(){n.updateSelectedPointIndex(a)};a.recentClickToSelect=null;a.element.closest(".qv-story-grid-object").on("qv-activate.selectDataPoint",function(t){if(a.onClick)a.onClick(t);else{a.recentClickToSelect=t;a.element.scope().getVisualization().then(function(t){t.onResize()})}});o.closeView=function(n,s){var r=i.getSelectedSlideItemElem();if(!r||s||"BUTTON"===n.target.tagName||!t(n.target).parents(".qv-story-grid-object").length||t(n.target).hasClass("qv-gridresize-point")){a.element.closest(".qv-story-grid-object").off(".selectDataPoint");e.off("start.effectProps",o.closeView);o.destroyComponent();o.onClose(n)}};o.$watch("slideItemScope.effectPropsOpen",function(){o.slideItemScope.effectPropsOpen||setTimeout(function(){o.closeView({},true)},0)});o.$on("$destroy",function(){o.closeView({},true)});o.slideItemScope.$on("startResize",function(){setTimeout(function(){o.closeView({},true)},0)});e.on("start.effectProps",o.closeView)}]}}.apply(e,n),void 0!==o&&(t.exports=o))},2618:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(90),i(97),i(115),i(230),i(1771),i(124),i(1280),i(340),i(1671),i(1670)],o=function(t,e,i,n,o,a,s,r,l){function c(t){t.snapshots=null;function e(){o.getLibraryContent(t.input.serviceInfo.objectId,e).then(function(e){t.snapshots=e;t.empty=t.snapshots.length<1})}e()}var d=["$scope","$element",function(d,u){s.load();d.goToSource=function(){l.get(d.input.slideItemObject.qInfo.qId).then(function(t){d.input.closePopover();r.gotoObject(t,d.input.snapshotModel)})};d.expandClicked=function(t){t.expanded=!t.expanded};d.empty=false;d.getIconName=function t(e){return n.getLibraryInfo(e).icon};function f(t){return Object.keys(t).map(function(e){return t[e]})}d.categories=f(e.extend(true,d.categories,a.timeCategories));c(d);i.on("start",d.input.closePopover);u.on("qv-activate.replaceSnapshot",".qv-story-library-item",function(e){var i=t(e.currentTarget).scope().snapshot,n=i.qInfo.qId,o=i.qData.visualizationType;if(n===d.input.serviceInfo.snapshotId)return;d.input.replaceSnapshotCallback(n,o,d.input.slideItemObject,d.input.removeItemCallback);d.input.closePopover()});d.$on("$destroy",function(){d.input.cleanUp();i.off("start",d.input.closePopover);o.unbindList();u.off(".replaceSnapshot")})}];return d}.apply(e,n),void 0!==o&&(t.exports=o))},2619:function(t,e){t.exports='<lui-popover class="replace-snapshot-list" tid="replace-snap-list">\n\n\t<lui-popover-header>\n\t\t<div class="qv-story-library-header" q-translation="Storytelling.ReplaceSnapshot"></div>\n\t</lui-popover-header>\n\n\t<lui-popover-body>\n\t\t<div class="qv-story-library-content story-mini-library">\n\t\t\t<div ng-if="snapshots">\n\t\t\t\t<ul class="qv-expandable-list">\n\t\t\t\t\t<li ng-repeat="category in categories | orderBy:\'rank\'" class="expandable-item ng-scope" ng-class="{ \'empty\': category.isEmpty }">\n\t\t\t\t\t\t<div class="qv-expandable-list-header"\n\t\t\t\t\t\t\t ng-click="expandClicked(category)"\n\t\t\t\t\t\t\t ng-if="!category.isEmpty"\n\t\t\t\t\t\t\t ng-class="{ \'expanded\': category.expanded }">\n\t\t\t\t\t\t\t<span ng-class="{ \'lui-icon\': true, \'lui-icon--triangle-right\' : !category.expanded, \'lui-icon--triangle-bottom\': category.expanded }"></span>\n\t\t\t\t\t\t\t<div class="text ng-binding" q-translation="{{ category.translate }}"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul class="lui-list"\n\t\t\t\t\t\t\tng-if="category.expanded"\n\t\t\t\t\t\t\tng-class="{ \'expanded\': category.expanded }">\n\t\t\t\t\t\t\t<li ng-repeat="snapshot in snapshots | orderBy:\'qData.timestamp\':true | filterDate:this"\n\t\t\t\t\t\t\t\tclass="qv-story-library-item lui-list__item snapshot">\n\t\t\t\t\t\t\t\t<span class="snapshot-icon lui-icon lui-icon--{{ getIconName( snapshot.qData.visualizationType ) }}"></span>\n\t\t\t\t\t\t\t\t<story-items-library-snapshot edit="inEdit" snapshot="snapshot" />\n\t\t\t\t\t\t\t\t<span class="lui-icon lui-icon--tick" ng-if="input.serviceInfo.snapshotId === snapshot.qInfo.qId"></span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div ng-show="empty" class="snapshot-empty" q-translation="Storytelling.library.noSnapshots"></div>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer class="qv-story-library-footer">\n\t\t<button\n\t\t\t\tclass="lui-button replace-goto-btn"\n\t\t\t\tng-click="goToSource()"\n\t\t\t\tq-title-translation="Storytelling.contextMenu.goToAnalysis">\n\t\t\t<span class="goto-source-icon lui-button__icon lui-icon lui-icon--goto"></span><span class="lui-button__text goto-source-text" q-translation="Storytelling.contextMenu.goToAnalysis"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},2620:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(90),i(48),i(236),i(426)],o=function(t,e,i,n,o){i.directive("storytellingDroppableSnapshot",function(){return{restrict:"A",link:function t(e,i){e.activeDrop=false;e.validDrop=false;a(e,i)}}});function a(t,e){var i={accept:{storyitem:function e(){return t.validDrop}},start:function i(n){s(t,e,n)}};n.registerDropTarget(i);t.$on("$destroy",function(){n.unregisterDropTarget(i)})}function s(e,i,n){var o=i[0].getBoundingClientRect();var a={left:o.left+2,right:o.right-2,top:o.top+2,bottom:o.bottom-2};var s={prio:2,targetRect:a,drop:{storyitem:function t(n){r(e,i,n)}},enter:function o(a){l(e,i,a,t(n.handle.elem))},leave:function i(){c(e,t(n.handle.elem))}};n.registerDropRect(s)}function r(t,i,n){var a=n.item.effect,s=a.effectPath,r=a.effectProperties;if(!t.activeDrop)return;t.$apply(function(){t.model.getProperties().then(function(i){t.effectJustDropped=true;t.onSlideItemClick();if(i.effectPath!==s){t.effectProperties=r;t.effectPath=s;o.get().then(function(e){e.startGroup().then(function(i){t.renderEffect(true).then(function(){e.endGroup(i)})})})}else if(i.effectPath===s&&JSON.stringify(i.effectProperties)!==JSON.stringify(r)){t.effectProperties=r;var n=e.extend(true,i,{effectProperties:r});t.model.setProperties(n)}})})}function l(e,i,n,o){var a=i.parents(".qv-story-grid-object"),s=t(".qv-story-grid-object").find("[storytelling-slide-item-snapshot]").parents(".qv-story-grid-object");if(!e.activeDrop){e.activeDrop=true;o.css({opacity:1});e.$apply();t.each(s,function(e,i){var n=t(i).find("[storytelling-slide-item-snapshot]").scope();a.attr("id")!==t(i).attr("id")&&(n.activeDrop=false)})}}function c(t,e){t.activeDrop=false;t.$apply();e.css({opacity:.6})}}.apply(e,n),void 0!==o&&(t.exports=o))},2621:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(2622),i(120),i(94),i(340),i(91),i(128),i(1768),i(132),i(173),i(172),i(426),i(215),i(50),i(97),i(423),i(114),i(138),i(106),i(999)],o=function(t,e,i,n,o,a,s,r,l,c,d,u,f,h,p,g,y,v,m,b){e.directive("storytellingSlideItemSheet",["$timeout",function(e){return{restrict:"A",template:i,link:function i(S,w){var P=S.isInPlay()?S.slide:S.$parent,q,M,D,C;S.showSelectSheet=false;P.sheetInfo=null;S.isSheet=true;S.isBookmark=false;S.initState=false;S.directionService=v;function L(){S.inPlay=false;S.sheetLocked=true;S.showSelectSheet=true;b(S,"slideItemModel",function(t){if(""===t.sheetId){S.sheetTitle=null;S.showTemplate=true;S.sheetId=null;j();F()}else e(function(){j();S.showTemplate=false;t.sheetId!==S.sheetId&&S.$apply(function(){E(true)})},0)})}function k(){S.inPlay=true;S.showSheetHint=false;S.showTemplate=false;S.$watch("activeSlideIndex",function(){var t=S.$parent.$parent;F();if(t.$index===S.activeSlideIndex){S.showRain=!p.isSmallDevice;E(false);e(function(){S.showRain=false},800)}})}function z(t){var e=t.slice(0).sort(function(t,e){return t.qField.localeCompare(e.qField)});return e.map(function(t){return t.qSelected})}function A(t,e){var i=z(t);var n=z(e);return JSON.stringify(i)!==JSON.stringify(n)}function O(t,e){var i=t?t.length:0;var n=e?e.length:0;if(i!==n)return true;for(var o=0;o<i;o++)if(A(t[o].qSelectionObject.qSelections,e[o].qSelectionObject.qSelections))return true;return false}function T(){c.get().then(function(t){S.csModel=t});M&&M();M=b(S,"csModel",function(t){S.slideItemModel.layout.qEmbeddedSnapshot&&(S.slideItemModel.layout.qEmbeddedSnapshot.selectionsInStates&&t.selectionsInStates?S.initState=O(S.slideItemModel.layout.qEmbeddedSnapshot.selectionsInStates,t.selectionsInStates):S.initState=A(S.slideItemModel.layout.qEmbeddedSnapshot.selectionFields,t.qSelectionObject.qSelections))})}function E(t){I();t||w.find(".qv-block-ui").remove();a.get(S.id).then(function(t){t.getLayout().then(function(t){n.get(t.sheetId).then(function(i){S.sheet=i;S.tooSmallDevice=null;S.showSheetHint=true;D=i.Closed;D.bind(B);q&&q();q=b(S,"sheet",function(n){S.sheetTitle=n.labelExpression||n.qMeta.title||s.get("Common.Sheet");S.sheetId=t.sheetId;if(p.isSmallDevice){V();S.tooSmallDevice=true;S.showTemplate=true;S.sheetHint="Storytelling.Sheet.TooSmallScreen"}else C=e(function(){var e=t.selectionState?t.selectionState.init:null;if(!u.selectionState.hasViewedSheet&&(e||t.qEmbeddedSnapshot&&t.qEmbeddedSnapshot.sheetId)){_(e,S.id);R(i)}else{u.selectionState.hasViewedSheet=false;R(i)}q()},100)})},N)})})}function R(i){S.showTemplate=false;S.sheetHint=null;o.state===o.States.play&&T();r.stop();r.start(i);w.find(".sheet-in-story").showComponent(l);$(i);t(".selections-data-area-ui canvas").css("z-index",5);e(function(){G()})}o.state===o.States.editstory?L():k();S.removeSelectedSheet=function(t){t&&t.stopPropagation();V();var e=S.slideItemModel?S.slideItemModel.layout:void 0;e&&e.selectionState&&d.remove(e.selectionState.init);S.updateProperties(S.id,{sheetId:"",selectionState:null})};S.resetSelections=function(){var t=S.slideItemModel.layout;t&&t.selectionState?_(t.selectionState.init):_(null,S.slideItemModel.layout.qInfo.qId)};S.$on("sheetSelected",function(t,e){S.sheetId!==e.qInfo.qId&&""!==e.qInfo.qId&&f.get().then(function(t){t.startGroup().then(function(i){x(S,e.qInfo.qId).then(function(){t.endGroup(i)})})})});function j(){S.selectSheet=function(){y.onSelectSheet(S)}}S.setLayout=function(t){var e=y.getPosition(t);S.slideItemModel.getProperties().then(function(t){t.position=e;S.slideItemModel.setProperties(t)})};function N(t){t="undefined"!==typeof t&&t;if(S.inPlay){S.showRain=false;S.sheetHint=S.sheetId?"Storytelling.Sheet.NotAvailable":"Storytelling.Sheet.NoSheet"}else j();if(t){S.showTemplate=true;S.sheetId=null}}function $(t){t.app.getLayout().then(function(t){P.sheetInfo={sheetTitle:S.sheetTitle,lastReloadString:m.format.date(t.qLastReloadTime,{skeleton:"yMMMdjm"}),sheetId:S.sheetId}})}function B(){D&&D.unbind(B);S.removeSelectedSheet();N(true);F();h.get(u.currentStoryId).then(function(t){o.setStory(t,o.state,u.currentSlideId)})}function F(){P.sheetInfo=null}function V(){q&&q();M&&M();var e=w.find(".qv-panel-sheet").scope();void 0!==e&&e.destroyComponent();r.stop();F();t(".selections-data-area-ui canvas").first().css("z-index","");w.find(".sheet-in-story").empty()}function H(){k()}function G(){var e;e=o.state===o.States.editstory?t(".embedded-sheet-toolbar"):t(".qv-story-slide-active .embedded-sheet-toolbar");if(v.isRtl){t("#sheet-title").css("margin-left",e.width()+20);t("#sheet-title").css("margin-right","")}else{t("#sheet-title").css("margin-right",e.width()+20);t("#sheet-title").css("margin-left","")}}p.ViewChanged.bind(H);v.DirectionChanged.bind(G);g.on("end.slideItem"+S.slideItem.qInfo.qId,G);S.$on("$destroy",function(){e.cancel(C);V();p.ViewChanged.unbind(H);v.DirectionChanged.unbind(G);D&&D.unbind(B);g.off("end.slideItem"+S.slideItem.qInfo.qId,G)})}}}]);function x(t,e){var i={position:t.slideItemModel.layout.position,ratio:false,visualization:"sheet"};return t.slideModel.destroyChild(t.slideItemModel.id).then(function(){return a.create(i,t.slideModel).then(function(t){return S(e).then(function(i){return t.getProperties().then(function(n){n.sheetId=e;return t.setProperties(n).then(function(){return t.embedSnapshotObject(i.id).then(function(){return d.remove(i.id)})})})})})})}function S(t){return c.get().then(function(e){return e.getLayout().then(function(e){return d.create({title:"",sheetId:t,selectionFields:e.qSelectionObject.qSelections})})})}function _(t,e){return t?d.get(t).then(function(t){return t.apply()},function(){}):a.get(e).then(function(t){return t.getSnapshotObject().then(function(t){t.apply()})})}function I(){var e=t(".selectButton");e.css("transition","box-shadow 0s ease-in-out");e.css("box-shadow","inset 0 0 0 2px #3071A9");setTimeout(w,100)}function w(){var e=t(".selectButton");e.css("transition","box-shadow 1s ease-in-out");e.css("box-shadow","inset 0 0 0 0px #3071A9")}}.apply(e,n),void 0!==o&&(t.exports=o))},2622:function(t,e){t.exports='<div class="sheet-container" qva-outside="inPlay && onSheetClickOutside($event)" ng-class="{\'story-sheet-unlocked\': !sheetLocked, \'selections-possible\': !showTemplate}">\n\n<div class="sheet-title-container" ng-if="tooSmallDevice">\n\t<div id="sheet-title" class="sheet-grid">\n\t\t<span>{{sheetTitle}}</span>\n\t</div>\n</div>\n\n<qv-rain ng-if="showRain" show="showRain"></qv-rain>\n\n<div ng-if="slide.sheetInfo || sheetInfo" ng-style="sheetInfoStyle" class="sheet-in-story-details" ng-class="{ \'rtl\': directionService.isRtl }">\n\t<span class="data-last-reload-title" q-translation="Toolbar.DataLastLoaded"></span>\n\t<i ng-if="inPlay" class="data-last-reload"> {{ slide.sheetInfo.lastReloadString }}</i>\n\t<i ng-if="!inPlay" class="data-last-reload"> {{ sheetInfo.lastReloadString }}</i>\n</div>\n\n<div ng-if="$parent.$parent.$index == $parent.$parent.activeSlideIndex" class="sheet-in-story borderbox">\n</div>\n\n<div ng-if="sheetLocked || !inPlay" class="story-sheet-analyze-blocker" ng-click="sheetLockClicked(this, $event)"></div>\n\n<div class="embedded-sheet-toolbar" ng-click="sheetLockClicked(this, $event)" qva-direction>\n\t<span class="click-for-selections"\n\t\t  ng-if="inPlay && sheetLocked && !showTemplate && showSheetHint"\n\t\t  q-translation="Storytelling.Sheet.Hint">\n\t</span>\n\t<lui-button class="reset-btn"\n\t\t\tng-if="inPlay && sheetId && !showTemplate"\n\t\t\tng-disabled="!initState"\n\t\t\tq-translation="Storytelling.Sheet.ResetSelections"\n\t\t\tng-click="resetSelections()"\n\t\t\ttid="reset-button">\n\t</lui-button>\n\t<lui-button\n\t\t\tng-if="sheetId && !tooSmallDevice && inPlay"\n\t\t\tq-translation="Storytelling.Sheet.GoToSheet"\n\t\t\tng-click="goToOriginalSheet( $event, sheet, sheetId )"\n\t\t\ttid="go-to-sheet">\n\t</lui-button>\n</div>\n\n<div ng-if="showTemplate" class="borderbox sheet-bg-icon"></div>\n\n<div ng-if="showTemplate || sheetHint || !inPlay" class="embed-sheet-text">\n\t<span class="embed-sheet-verticalizer"></span>\n\n\t<div ng-if="sheetHint" class="embed-sheet" ng-click="selectSheet()">\n\t\t<h2 class="header">\n\t\t\t<span class="header-text" q-translation="{{sheetHint}}"></span>\n\t\t\t<lui-button class="too-small-goto-btn"\n\t\t\t\tng-if="tooSmallDevice && inPlay"\n\t\t\t\tq-translation="Storytelling.Sheet.GoToSheet"\n\t\t\t\tng-click="goToOriginalSheet( $event, sheet, sheetId )">\n\t\t\t</lui-button>\n\t\t</h2>\n\t</div>\n\n\n\t<div ng-if="showSelectSheet" class="lui-popover embed-sheet-popup">\n\t\t<div class="lui-popover__content">\n\t\t\t<div class="lui-popover__header">\n\t\t\t\t<div class="lui-popover__title popup-title" q-translation="Storytelling.Sheet.EmbedSheet"></div>\n\n\t\t\t\t<button class="lui-fade-button remove-button" ng-click="removeItem(id)">\n\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--bin"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="lui-popover__body body">\n\n\t\t\t\t<span class="sheet-text" q-translation="Storytelling.EmbedSheet.ActiveSheet"></span>\n\t\t\t\t<lui-button class="lui-button lui-button--block selectButton" ng-click="selectSheet()">\n\t\t\t\t\t<span ng-if="!sheetId" class="lui-button__text" q-translation="SheetDialog.SelectSheet"></span>\n\t\t\t\t\t<span ng-if="sheetId" class="lui-button__text">{{sheetTitle}}</span>\n\t\t\t\t</lui-button>\n\n\t\t\t\t<hr class="sheet-line">\n\t\t\t\t<span class="sheet-text" q-translation="Storytelling.EmbedSheet.Alignment">Alignment</span>\n\t\t\t\t<div class="frame lui-bg-default frame-alignment-buttons">\n\t\t\t\t\t<button class="lui-fade-button button-align-left" ng-click="setLayout(\'align-left\')">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--align-object-left "></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="lui-fade-button button-align-center" ng-click="setLayout(\'align-center\')">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--align-object-center "></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="lui-fade-button button-align-right" ng-click="setLayout(\'align-right\')">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--align-object-right "></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>\n</div>\n\n</div>\n'},2623:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(2624),i(2625),i(304),i(172)],o=function(t,e,i,n,o,a){function s(t,e){t.editController=new n({slideItemId:t.slideItem.qInfo.qId,slideItem:e,removeEmptyImage:t.removeItem.bind(this,t.slideItem.qInfo.qId),currentImgUrl:t.slideItem.qData.srcPath.qStaticContentUrl.qUrl,save:function e(i,n){var o=t.slideItem.qData.srcPath.qStaticContentUrl.qUrl&&!n;t.slideItem.qData.srcPath.qStaticContentUrl.qUrl=i;t.imgDef=n;o&&t.updateProperties(t.id,{position:t.position,srcPath:{qStaticContentUrlDef:{qUrl:t.imgDef}}})}});t.editController.open(t.slideItem.qData.srcPath.qStaticContentUrl.qUrl);t.setActive(false);t.inEdit=false;l(e,t)}function r(t){var e=t.find("img");e.on("dragstart",function(){return false})}function l(t,e){var i=t.find("img");i.on("load",function(){var n=t.closest(".qv-story-grid-object");e.$apply(function(){c(n,i)});var o=a.getElementPosition(t.parents(".qv-story-grid-object"));if(e.isNew){var s={top:50-parseFloat(o.height)/2+"%",left:50-parseFloat(o.width)/2+"%",width:o.width,height:o.height};e.position=s}else e.position=o;e.updateProperties(e.id,{position:e.position,srcPath:{qStaticContentUrlDef:{qUrl:e.imgDef}}});i.off("load")})}function c(e,i){i.css({width:"auto",height:"auto"});var n=i.width(),o=i.height(),a=t("#selectable"),s=.8*a.width(),r=.8*a.height(),l;if(n>s){l=(n-s)/n;n=s;o*=1-l}if(o>r){l=(o-r)/o;o=r;n*=1-l}e.height(o);e.width(n);i.css({width:"100%",height:"100%"})}e.directive("storytellingSlideItemImage",function(){return{restrict:"A",template:i,link:function t(e,i){e.initImageProperties=function(){s(e,i)};r(i);if(e.isNew){e.setActive(true);e.slideItem.qData.srcPath.qStaticContentUrl.qUrl||s(e,i)}if(e.slideItem.qData.srcPath.qStaticContentUrl){var n=e.slideItem.qData.srcPath.qStaticContentUrl.qUrl;n&&n.indexOf("http")>=0&&(e.slideItem.qData.srcPath.qStaticContentUrl.qUrl="");e.mediaUrl=n?o.addBasePath(n):null}e.$on("$destroy",function(){if(e.editController){e.editController.close();e.editController=null;e.inEdit=false}i.find("img").off()});e.$watch("slideItem.qData.srcPath.qStaticContentUrl.qUrl",function(){var t=e.slideItem.qData.srcPath.qStaticContentUrl.qUrl;if(t)e.mediaUrl=o.addBasePath(t);else{e.mediaUrl=null;i.find("img").removeAttr("src")}})}}})}.apply(e,n),void 0!==o&&(t.exports=o))},2624:function(t,e){t.exports='<span ng-if="!mediaUrl" class="not-selected-verticalizer"></span>\n<span ng-if="!mediaUrl && !isInPlay()" class="no-story-image-selected" q-translation="Storytelling.Image.Empty"></span>\n<div class="qv-story-image-container borderbox">\n\t<img ng-src="{{ mediaUrl }}" title="{{ slideItem.qData.srcPath.qStaticContentUrl.qUrl }}" draggable="false" />\n</div>\n\n\n\n\n'},2625:function(t,e,i){"use strict";var n,o;!(n=[i(832),i(50)],o=function(t,e){function i(){t.hide()}var n=function n(o){o.update=function(t,e){if(t!==o.value){o.value=t;o.save(t,e)}};this.close=function(){e.ViewChanged.unbind(i)};this.open=function(n){e.ViewChanged.bind(i);t.show({onCancel:function t(n){n&&o.update(null,null);o.currentImgUrl||o.removeEmptyImage();e.ViewChanged.unbind(i)},onConfirm:function t(n,a){o.update(n,a);e.ViewChanged.unbind(i)},selectedFile:n})};o.update(o.value,null)};return n}.apply(e,n),void 0!==o&&(t.exports=o))},2626:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(96),i(48),i(97),i(2627)],o=function(t,e,i,n,o){var a=50,s=25;function r(t,e,i,n){var o=n||"0px";t.right-e.right<0&&(o=Math.abs(e.right+s-t.right)+"px");e.right-t.left<i.width&&(o="-"+Math.abs(i.width-(e.right-t.left)+s)+"px");return o}function l(i,n,o,s,l){var c=t(n).outerHeight();var d=o.getBoundingClientRect();var u=n.getBoundingClientRect();var f=i.getBoundingClientRect();var h={def:{top:"-53px",right:"0px",width:"auto"},touch:{top:"50px",right:"450px",width:"auto"}};var p=h.def;if(s&&l&&(u.top-f.top<a+31||f.width<d.width)){p=h.touch;t(o).appendTo("body");u.top-(t(o).height()+40)<0?p.top="1px":p.top=u.top-(t(o).height()+40)+"px";p.right=t("body").width()/2-t(o).width()/2+"px";p.transition="none"}else if(u.top-a-f.top<0&&f.bottom-(u.bottom+a)>0&&!s){p.top=c+14+"px";p.right=r(f,u,d)}else if(u.top-a-f.top>0||s){if(e.utils.touch&&l){p.top="-85px";p.transition="none"}p.right=r(f,u,d)}else if(f.bottom-(u.bottom+a)<0&&u.top-a-f.top<0){u.top>f.top?p.top="5px":p.top=Math.abs(f.top-u.top)+5+"px";p.right=r(f,u,d,"5px")}return p}i.directive("qvSlideItemButtons",function(){return{replace:true,template:o,link:function i(o,a){var s=a;var r=s.parents(".qv-story-grid-object");var c=s.parents("#selectable");o.isInPlay()&&(c=a.parents(".qv-story-play-slide"));function d(){return"text"===o.visualization}o.setPosition=function(){var t;var i;if(e.utils.touch&&o.inEdit){t=true;i=d()}o.buttonPosition=l(c[0],r[0],s[0],t,i)};setTimeout(function(){o.setPosition()});o.updateMove=function(){o.setPosition()};o.$watch("inEdit",function(i){if(!d())return;if(i){e.utils.touch&&a.hide();setTimeout(function(){o.$apply(function(){e.utils.touch&&a.show();o.setPosition()})},150)}else{e.utils.touch&&t(a).appendTo(r);setTimeout(function(){o.setPosition()})}});o.$watch("active",function(t){if(t){a.hide();setTimeout(function(){o.$apply(function(){o.setPosition();a.show()})})}});o.$on("slideItemPositioned",function(){a.hide();o.setPosition();a.show()});o.$on("slideItemResized",function(){o.setPosition()});n.on("end.slideItemToolbar",o.setPosition);o.$on("$destroy",function(){n.off("end.slideItemToolbar",o.setPosition)})}}})}.apply(e,n),void 0!==o&&(t.exports=o))},2627:function(t,e){t.exports='<div>\n\t<div class="slide-item-text-toolbar-buttons" ng-if="visualization === \'text\' && inEdit"></div>\n\t<div class="lui-buttongroup">\n\t\t<button class="slide-item-props-btn replace-snapshot-list-btn lui-fade-button lui-fade-button--inverse"\n\t\t\t\tng-class="{ \'lui-active\': replaceInfo.replaceListOpen }"\n\t\t\t\tng-click="showReplaceSnapshot($event)"\n\t\t\t\tq-title-translation="Storytelling.ReplaceSnapshot"\n\t\t\t\ttid="replace-snapshot"\n\t\t\t\tng-if="visualization === \'snapshot\'">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--camera"></span>\n\t\t</button>\n\t\t<button\tng-if="visualization === \'snapshot\'"\n\t\t\t\t   class="effect-props-btn lui-fade-button lui-fade-button--inverse"\n\t\t\t\t   q-title-translation="Storytelling.library.effect.properties"\n\t\t\t\t   ng-class="{ \'lui-active\': effectPropsOpen }"\n\t\t\t\t   ng-click="openEffectProps($event)"\n\t\t\t\t   ng-show="visualization === \'snapshot\' && hasEffect && effect.hasPropertiesPanel">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--effects"></span>\n\t\t</button>\n\t\t<button class="slide-item-props-btn lui-fade-button lui-fade-button--inverse"\n\t\t\t\tmodel="SlideItem"\n\t\t\t\tq-title-translation="Common.Edit"\n\t\t\t\tng-class="{ \'lui-active\': inEdit }"\n\t\t\t\tng-click="onEditClick($event)"\n\t\t\t\tng-if="visualization === \'snapshot\'">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--edit"></span>\n\t\t</button>\n\t\t<button ng-if="visualization === \'snapshot\'"\n\t\t\t\tng-class="{ \'lui-active\': !ratio }"\n\t\t\t\tclass="slide-item-props-btn lui-fade-button lui-fade-button--inverse"\n\t\t\t\tq-title-translation="{{ ratio ? \'Storytelling.slideItem.lockRatio\' : \'Storytelling.slideItem.unlockRatio\' }}"\n\t\t\t\tng-click="lockUnlockRatio($event)">\n\t\t\t<span class="lui-fade-button__icon  lui-icon"\n\t\t\t\t  ng-class="{ \'lui-icon--lock\': ratio, \'lui-icon--unlock\' : !ratio }"></span>\n\t\t</button>\n\t\t<button\tclass="slide-item-props-btn lui-fade-button lui-fade-button--large lui-fade-button--inverse"\n\t\t\t\ttid="edit"\n\t\t\t\tmodel="SlideItem"\n\t\t\t\tq-title-translation="Common.Edit"\n\t\t\t\tng-class="{ \'lui-active\': inEdit }"\n\t\t\t\tng-click="onEditClick($event)"\n\t\t\t\tng-if="visualization === \'text\'">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--edit"></span>\n\t\t</button>\n\t\t<div\n\t\t\tng-if="visualization === \'shape\' && active"\n\t\t\tqv-color-picker-button-new\n\t\t\textended="true"\n\t\t\tx-variant="inverse"\n\t\t\tng-model="color"\n\t\t\ttoggle-open="true"\n\t\t\tactual-color="true"\n\t\t\tdisable-none="false"\n\t\t\ton-open="openColorPickerFoldout"\n\t\t\ton-close="closeColorpickerFoldout"\n\t\t\tpalette="theme.currentPalette">\n\t\t</div>\n\t</div>\n</div>'},2628:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(94),i(322),i(2629)],o=function(t,e,i,n){var o=null,a=false,s=null;t.directive("qvPlayNavigation",function(){return{scope:{showNavigation:"=",showMore:"=",openExportMenu:"=",exportStory:"=",exportButton:"=",printToPpt:"=",printToPdf:"="},link:function r(l,c){l.$watch("showNavigation",function(){if(l.showNavigation){d();c.find(".qv-play-more").hide();u("210px","-105px")}else{setTimeout(function(){u("40px","-20px");c.find(".qv-play-more").show()},500);setTimeout(function(){l.exportStory=false;a=false},10)}});l.openExportMenu=function(t){l.exportButton=t.target;if(a){a=false;l.exportStory=false}else l.exportStory=true};l.$watch("exportStory",function(e){if(e&&!s){s=t.getService("luiPopover").show({template:n,input:{printToPpt:l.printToPpt,printToPdf:l.printToPdf},alignTo:l.exportButton,closeOnEscape:true,closeOnOutside:true,showArrow:true,dock:"top",autoFocus:true});s.closing.then(function(){a=true}).catch(function(t){false});s.closed.then(function(){l.exportStory=false;s=null}).catch(function(t){false});s.opened.catch(function(t){false})}if(!e&&s){s.close();s=null}});l.printToPpt=function(){i.showForGlobalMenu(e,"Ppt","Story");l.exportStory=false};l.printToPdf=function(){i.showForGlobalMenu(e,"Pdf","Story");l.exportStory=false};function d(){o&&clearTimeout(o);o=setTimeout(function(){f()},3e3)}function u(t,e){c.css({width:t,"margin-left":e})}function f(){l.$apply(function(){l.showNavigation=false;l.exportStory=false;setTimeout(function(){l.$apply(function(){l.showMore=true})},600)})}c.on("mouseenter.playNavigation pointerenter.playNavigation mousemove.playNavigation mouseleave.playNavigation touchstart.playNavigation pointerleave.playNavigation pointerdown.playNavigation click.playNavigation",function(){d()});l.$on("$destroy",function(){c.off(".playNavigation");o&&clearTimeout(o)})}}})}.apply(e,n),void 0!==o&&(t.exports=o))},2629:function(t,e){t.exports='<lui-popover class="lui-popover--inverse export-story-popover">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list lui-list--inverse">\n\t\t\t<li class="lui-list__item">\n\t\t\t\t<span class="lui-list__text" q-translation="Storytelling.ExportMenu.Ppt" q-title-translation="GlobalMenu.ExportStoryToPpt"\n\t\t\t\t tid="storytelling-export-to-ppt" ng-click="input.printToPpt()"></span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item">\n\t\t\t\t<span class="lui-list__text" q-translation="Storytelling.ExportMenu.Pdf" q-title-translation="GlobalMenu.ExportStoryToPdf"\n\t\t\t\t tid="storytelling-export-to-pdf" ng-click="input.printToPdf()"></span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n'},2630:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(96),i(48),i(2631),i(94),i(172),i(122),i(215),i(1280),i(426),i(106),i(2632),i(2633),i(2634),i(2635),i(2637),i(2638),i(1804),i(242)],o=function(t,e,i,n,o,a,s,r,l,c,d){return{template:n,controller:["$scope","$element",function(n,u){var f=i.getService("$sce"),h=u.find(".qv-grid-story");r.get(a.currentStoryId).then(function(t){n.storyModel=t;d(n,"storyModel",function(t){n.storyTitle=f.trustAsHtml(t.qMeta.title).toString()})});c.get().then(function(t){t.reset()});n.onPlayLockedStory=function(){s.goToStory(a.currentStoryId,Object.keys(o.States)[o.States.play],a.currentSlideId)};n.goToOriginalSheet=function(t,e,i){l.gotoSheet(i,e)};e.utils.msPointer&&h.on("pointerup",function(e){var i=t(e.target);i.parents(".slide-item-button-container").length||h.trigger("mouseup")});this.release=function(){n.$destroy();n.destroyComponent();u.empty()}}]}}.apply(e,n),void 0!==o&&(t.exports=o))},2631:function(t,e){t.exports='<div class="qv-storytelling-story-title" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{storyTitle}}">{{storyTitle}}</div>\n<div class="qv-grid-story-ratio" data-help="Story.Stage">\t\n\t\t<div class="qv-grid-story borderbox" ng-class="{\'qv-story-grid-visible\': gridOptions.showGrid}">\n\t\t\t<div class="qv-story-play-overlay" ng-if="isPublished">\n\t\t\t\t<button\n\t\t\t\t\tclass="lui-button lui-button--success lui-button--x-large qs-story-play-overlay-button"\n\t\t\t\t\tng-click="onPlayButtonClicked()"\n\t\t\t\t\tq-title-translation="Storytelling.play">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--triangle-right qs-story-play-overlay-icon"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div id="selectable"\n\t\t\t\tstorytelling-resize-slide\n\t\t\t\tstorytelling-droppable-slide\n\t\t\t\tstorytelling-render-slide\n\t\t\t\tstorytelling-slide-shortcut-keys\n\t\t\t\tstorytelling-slide-movable>\n\n\t\t\t\t<div id="{{slideItem.qInfo.qId}}"\n\t\t\t\t\tclass="qv-story-grid-object qv-fade-border borderbox"\n\t\t\t\t\tng-repeat="slideItem in slideItems"\n\t\t\t\t\tng-class="[{\'item-active\': active, \'dragging\': dragging, \'qv-story-shape\': visualization === \'shape\', \'valid-drop\': validDrop && !activeDrop, \'valid-drop-active\': activeDrop, \'edit\': inEdit}, extraClass]"\n\t\t\t\t\tng-style="{{slideItem.qData.position}}"\n\t\t\t\t\tqva-activate="!inEdit && onSlideItemClick($event)"\n\t\t\t\t\tqva-outside="active && onSlideItemClickOutside($event)">\n\t\t\t\t\t<qv-slide-item-section />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="isPublished && !isPermitted"\n\t\t\t\t class="slide-overlay">\n\t\t\t</div>\n\t\t\t<div class="slide-overlay effect" style="display: none;"></div>\n\t\t\t<canvas storytelling-grid-pattern class="qv-story-grid-pattern"></canvas>\n\t\t\t<canvas id="grid-pattern-helper"></canvas>\n\t\t</div>\n</div>\n'},2632:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(97),i(172)],o=function(t,e,i,n){e.directive("storytellingResizeSlide",[function(){return{restrict:"A",link:function t(e){e.gridOptions={columns:48,rows:27,ratio:{wide:{w:16,h:9},regular:{w:4,h:3}},cellSize:null,timelineController:null,snapGrid:true,showGrid:false};n.setGridOptions(e.gridOptions);function a(){e.$apply(function(){o(e)});e.$broadcast("slideResized")}i.on("end.storytellingGrid",a);e.$on("$destroy",function(){i.off("end.storytellingGrid",a)});o(e)}}}]);function o(e){var i=t("#qv-storytelling"),o=t("#selectable"),l=t(".qv-grid-story-ratio",i),c=l.parent();l.width(n.decreaseValueUntilEvenSplit(c.outerWidth(),e.gridOptions.columns));s(l,c.height(),e.gridOptions.ratio,e);e.gridOptions.snapGrid&&a(i,l,0);e.gridOptions.cellSize=r(t("#qv-storytelling .qv-grid-story"),e);o.height(l.height());o.width(l.width());o.on("scroll",function(){t("#selectable").scrollTop(0);t("#selectable").scrollLeft(0)});i.attr("gridcellheight",e.gridOptions.cellSize.height);i.attr("gridcellwidth",e.gridOptions.cellSize.width)}function a(e,i,n){t("#qv-grid-story-containment").css({"padding-left":e.width()/2-i.width()/2+42+"px","padding-right":e.width()/2-i.width()/2-48+"px","padding-bottom":n-3+"px",height:i.height()+8,width:i.width()+8})}function s(t,e,i,o){var a=t.width();t.height(Math.floor(a/i.wide.w*i.wide.h));while(e<t.height()&&e>o.gridOptions.columns){a=n.decreaseValueUntilEvenSplit(a-1,o.gridOptions.columns);t.height(Math.floor(a/i.wide.w*i.wide.h));t.width(a)}}function r(t,e){var i={height:Math.round(t.height()/e.gridOptions.rows),width:Math.round(t.width()/e.gridOptions.columns)};return i}}.apply(e,n),void 0!==o&&(t.exports=o))},2633:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(94),i(172),i(236),i(1329)],o=function(t,e,i,n){function o(t,e){t.$on("addItem",function(){var t={top:"-100%",left:"-100%",width:"1%",height:"1%","z-index":9999},e={media:{maintainRatio:true}};r(e,t)});var o={accept:{storyitem:function t(){return true}},start:function t(n){a(n,e);n.info.item.effect||i.showGridPattern()},end:function t(e){s(e);i.hideGridPattern()}};n.registerDropTarget(o);t.$on("$destroy",function(){n.unregisterDropTarget(o)})}function a(t,e){var i=e[0].getBoundingClientRect();t.info.snapToGrid.targetRect=i;var n={prio:1,targetRect:i,enter:function e(i){if(i.item.effect)return;i.validDrop=true;t.handle.elem.style.opacity=1},leave:function e(i){i.validDrop=false;t.handle.elem.style.opacity=.5}};t.registerDropRect(n)}function s(t){t.handle.elem.classList.remove("smooth-snapping");var e=i.getHelperPosition(t.handle.elem);t.info.validDrop&&r(t.info.item,e)}function r(n,o){var a={position:o};var s=t.getService("$addSlideItemService");e.model.app.getObject(i.currentSlideId).then(function(t){n.snapshot?s.addSnapshot(a,n.snapshot,t):n.text?s.addText(a,n.text,t):n.shape?s.addShape(a,n.shape,t):n.media&&s.addMedia(a,n.media,t)})}t.directive("storytellingDroppableSlide",[function(){return{restrict:"A",link:function t(i,n){e.state===e.States.editstory&&o(i,n)}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2634:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(172),i(197),i(106),i(93),i(1329)],o=function(t,e,i,n,o,a){e.directive("storytellingRenderSlide",[function(){return{restrict:"A",link:function t(e){e.renderSlide=function(){a.getApp().then(function(t){t.enigmaModel.getObject(i.currentSlideId).then(function(t){e.slideModel=t;i.pasteOffset=0})})};o(e,"slideModel",function(t){var n=i.getSelectedSlideItemElem(),o=false;e.slideItems=t.qChildList.qItems.slice();if(n&&n.scope()&&e.slideItems.length>0){e.slideItems.forEach(function(t){t.qInfo.qId===n.scope().id&&(o=true)});o||i.setSelectedSlideItemElem(null)}});e.$on("renderSlide",function(){e.renderSlide()});e.$on("pasteSlideItem",function(){s(e)});e.renderSlide()}}}]);function s(o){a.getApp().then(function(a){var s=e.getService("$addSlideItemService");if(o.slideItems.length>199)return;if(n.contains("QlikView-storytelling-"+a.id)){var l=n.get("QlikView-storytelling-"+a.id),c=parseFloat(l.position.left),d=parseFloat(l.position.top),u=parseFloat(l.position.height),f=parseFloat(l.position.width),h=3;if("cut"===l.action){n.remove("QlikView-storytelling-"+a.id);if(i.currentSlideId===l.copiedFromSlide){t("#"+l.id).removeClass("cut-opacity");return}}if(i.currentSlideId!==l.copiedFromSlide&&l.id!==i.lastObjPasted.id||i.currentSlideId!==l.copiedFromSlide&&i.lastObjPasted.slide!==i.currentSlideId&&l.id===i.lastObjPasted.id&&"cut"===l.action||i.currentSlideId===l.copiedFromSlide&&l.id!==i.lastObjPasted.id&&"cut"===l.action)h=0;else{0===i.pasteOffset&&i.lastObjPasted.slide===i.currentSlideId&&(i.pasteOffset=1);h*=i.pasteOffset;i.pasteOffset>4?i.pasteOffset=0:i.pasteOffset++}l.position.left=c+f+h>100?c-h+"%":c+h+"%";l.position.top=d+u+h>100?d-h+"%":d+h+"%";i.lastObjPasted={id:l.id,slide:i.currentSlideId,action:l.action};r();s.addItemToSlide(o.slideModel,l)}})}function r(){var t=i.getSelectedSlideItemElem();t&&t.scope()&&i.getSelectedSlideItemElem().scope().setActive(false)}}.apply(e,n),void 0!==o&&(t.exports=o))},2635:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(2636),i(172),i(96)],o=function(t,e,i,n,o){e.directive("storytellingSlideMovable",[function(){return{restrict:"A",link:function e(a,s){var r;var l=new i({containmentElement:s,selector:".qv-story-grid-object",cellWidth:function t(){var e=n.getGridOptions();return e.cellSize.width},enabled:function e(i){var n=t(i.currentTarget).scope();return!n.effectPropsOpen&&!n.inEdit&&!n.isSheet&&!t(i.target).hasClass("ui-resizable-handle")},onStart:function e(i){r=t(i.currentTarget).scope();r.dragging=true;o.WebkitHack.prevent();r.setActive(true);n.showGridPattern();r.$apply()},onStop:function e(i){i.currentTarget.classList.remove("smooth-snapping");var o=t(i.currentTarget),a=o.scope(),s=n.getElementPosition(o);delete s["z-index"];a.dragging=false;a.updateProperties(a.id,{position:s});a.updateMove(i);n.hideGridPattern()}});a.$on("$destroy",function(){r=null;l.destroy()})}}}])}.apply(e,n),void 0!==o&&(t.exports=o))},2636:function(t,e,i){"use strict";var n,o;!(n=[i(90),i(96)],o=function(t){function e(e,n,o,a){var s=e.currentTarget.getBoundingClientRect(),r={left:e.gestureData.swipe.deltaX+n.left,top:e.gestureData.swipe.deltaY+n.top},l=e.gestureData.swipe,c=Math.sqrt(Math.pow(l.curDeltaX,2)+Math.pow(l.curDeltaY,2)),d=c<10;d?e.currentTarget.classList.add("smooth-snapping"):e.currentTarget.classList.remove("smooth-snapping");s=t.extend(true,{},s);s.left=(r.left/a).toFixed()*a;s.top=(r.top/a).toFixed()*a;s.right=o.width-(r.left+s.width);s.bottom=o.height-(r.top+s.height);i(o,s,e.currentTarget,a)}function i(t,e,i,n){e.right>t.width-n?i.style.left=n-e.width+"px":e.left>t.width-n?i.style.left=t.width-n+"px":i.style.left=e.left+"px";e.bottom>t.height-n?i.style.top=n-e.height+"px":e.top>t.height-n?i.style.top=t.height-n+"px":i.style.top=e.top+"px"}function n(t){var i=this;t.containmentElement.on("qv-press.movable",t.selector,function(e){i.moving=null;if(!t.isEnabled(e)){i.moving=false;return}});t.containmentElement.on("qv-swipestart.movable qv-swipeupdate.movable",t.selector,function(n){if(false===i.moving)return;if(!i.moving){i.moving=true;var o=n.currentTarget;i.initialPosition.left=o.offsetLeft;i.initialPosition.top=o.offsetTop;i.containmentRect=t.containmentElement[0].getBoundingClientRect();t.onStart(n);e(n,i.initialPosition,i.containmentRect,t.cellWidth())}if(i.moving){n.preventDefault();t.onUpdate(n);e(n,i.initialPosition,i.containmentRect,t.cellWidth())}});t.containmentElement.on("qv-swipe.movable",t.selector,function(n){if(false===i.moving)return;if(i.moving){e(n,i.initialPosition,i.containmentRect,t.cellWidth());t.onStop(n)}i.moving=false});t.containmentElement.on("qv-swipecancel.movable",t.selector,function(e){i.moving=false;t.onStop(e)})}var o=function t(e){this.moving=false;this.initialPosition={};e.isEnabled=e.enabled||function(){return true};e.onStop=e.onStop||function(){};e.cellWidth=e.cellWidth||function(){return 0};e.onStart=e.onStart||function(){};e.onUpdate=e.onUpdate||function(){};n.call(this,e);this.destroy=function(){e.containmentElement.off(".movable")}};return o}.apply(e,n),void 0!==o&&(t.exports=o))},2637:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48)],o=function(t,e){e.directive("storytellingGridPattern",["$timeout",function(t){return{priority:-5,link:function e(n,o){t(function(){i(n,o);n.$on("slideResized",function(){i(n,o)})})}}}]);function i(e,i){var o=i.parent().width(),a=i.parent().height(),s,r=t("#grid-pattern-helper"),l,c,d;i.attr({height:a,width:o});if(0===o||0===a)return;if(i[0]&&r[0]){s=n(e,i);d=i[0].getContext("2d");r.attr({width:s.width,height:s.height});l=r[0].getContext("2d");l.beginPath();l.lineWidth=1;l.strokeStyle="#C4C4C4";l.moveTo(s.width,0);l.lineTo(s.width,s.height);l.lineTo(0,s.height);l.stroke();c=d.createPattern(r[0],"repeat");d.rect(0,0,o,a);d.fillStyle=c;d.fill()}}function n(t,e){var i={height:Math.round(e.height()/t.gridOptions.rows),width:Math.round(e.width()/t.gridOptions.columns)};return i}}.apply(e,n),void 0!==o&&(t.exports=o))},2638:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(54),i(172)],o=function(t,e,i,n){e.directive("storytellingSlideShortcutKeys",function(){var e=i.throttle(function(t,e,i){n.showGridPattern();n.hideGridPattern();i.updateProperties(null,{position:t});i.setPosition()},1e3);return{restrict:"A",link:function i(o){function a(i){t(document).on("keydown.storytelling",function(o){var a=t(".qv-grid-story"),s=i.gridOptions.cellSize,r=n.getSelectedSlideItemElem(),l=t(".qv-contextmenu").is(":visible"),c,d,u;if(r&&!r.hasClass("ui-draggable-disabled")){c=r.find(".slide-item-content").scope();if(void 0!==c&&(c.inEdit||l||t(".qv-color-picker").length||c.effectPropsOpen||c.replaceInfo&&c.replaceInfo.replaceListOpen))return;switch(o.which){case 37:if(r.position().left+r.outerWidth()<1*s.height)return;u=(parseFloat(r.css("left"))-2)/a.outerWidth()*100+"%";r.css("left",u);break;case 38:if(r.position().top+r.outerHeight()<1*s.height)return;u=(parseFloat(r.css("top"))-2)/a.outerHeight()*100+"%";r.css("top",u);break;case 39:if(r.position().left>a.outerWidth()-1*s.width)return;u=(parseFloat(r.css("left"))+2)/a.outerWidth()*100+"%";r.css("left",u);break;case 40:if(r.position().top>a.outerHeight()-1*s.height)return;u=(parseFloat(r.css("top"))+2)/a.outerHeight()*100+"%";r.css("top",u);break}if(o.which>36&&o.which<41){d=n.getElementPosition(r);delete d["z-index"];e(d,i,c)}}})}a(o);o.$on("$destroy",function(){t(document).off("keydown.storytelling")})}}})}.apply(e,n),void 0!==o&&(t.exports=o))},2639:function(t,e,i){"use strict";var n,o;!(n=[i(11),i(48),i(91),i(92),i(1161),i(172),i(215),i(122),i(89)],o=function(t,e,i,n,o,a,s,r,l){var c=t("body"),d=false;var u={timeline:"#qv-storytelling .qv-panel-story-left",grid:"#qv-storytelling .qv-panel-content",library:"#qv-storytelling .qv-panel-story-right",editBar:"#qv-storytelling .qv-storytelling-edit-toolbar",play:"#qv-story-play"};var f;function h(t,e){o.resetHistory();o.prevStoryId=t;o.prevState=e}function p(t,n,o){var a=o,s=false;s=t.some(function(t){return t.qInfo.qId===a});if(!s){a=t[0].qInfo.qId;e.getService("qvAlertDialog").show({title:i.get("Storytelling.ErrorMessage.SlideNotFound.Title"),message:i.get("Storytelling.ErrorMessage.SlideNotFound.Message"),closeLabel:i.get("Common.OK")})}return{slideFound:s,slideId:a}}function g(t){if(t){c.addClass("qv-story-enabled");c.removeClass("qv-story-disabled")}else{c.removeClass("qv-story-enabled");c.addClass("qv-story-disabled")}if(!t&&!c.hasClass("qv-story-enabled"))return;if(d){c.addClass("qv-gridzoom qv-view-object");d=false}else if(c.hasClass("qv-gridzoom qv-view-object")){c.removeClass("qv-gridzoom qv-view-object");d=true}}function y(t,e,i){return!t&&e===o.prevState&&i===o.prevStoryId&&!o.isViewingSource}function v(e,i,n){return t(i).showComponent(e,n)}f=n.extend("StorytellingController",{init:function t(e,i,n,o,a,s){this._ctrls={timeline:null,grid:null,library:null,editBar:null,play:null};this._LibraryComponent=e;this._GridComponent=i;this._PlayComponent=n;this._TimelineComponent=a;this._EditBarComponent=o;this._storyState=s},releaseControllers:function t(){for(var e in this._ctrls)if(this._ctrls.hasOwnProperty(e)&&this._ctrls[e]){this._ctrls[e].release();this._ctrls[e]=null}},updateStory:function t(e,i,n){this._storyId=e;this._slideId=i;this._storyState=n},getSortedSlides:function t(){return s.get(this._storyId).then(function(t){return t.getLayout().then(function(t){return a.sortSlidesByRank(t.qChildList.qItems.slice())})})},handleMissingSlide:function t(){var e=new l,i=this;this.getSortedSlides().then(function(t){i._slideId||(i._slideId=t[0].qInfo.qId);var n=p(t,i._storyId,i._slideId);if(n.slideFound)e.resolve();else{r.goToStory(i._storyId,i._storyState,n.slideId);e.reject()}});return e.promise},render:function t(i,n,o){var a=this;var s=e.getService("qvLoader");if(y(o,this._storyState,this._storyId))return;this.handleMissingSlide().then(function(){h(a._storyId,a._storyState);g(true);a.releaseControllers();"play"===a._storyState?a.showPlay(n):a.showEdit(i,n)}).catch(function(){s.close()})},showPlay:function t(i){this._ctrls.play=v(this._PlayComponent,u.play,{options:{direction:i}});c.addClass("qv-story-play");var n=e.getService("qvLoader");n.close()},showEdit:function t(i,n){this._ctrls.grid=v(this._GridComponent,u.grid,{isPermitted:i,options:{direction:n}});this._ctrls.library=v(this._LibraryComponent,u.library,{disableLibraries:!i});this._ctrls.editBar=v(this._EditBarComponent,u.editBar,{isPermitted:i});this._ctrls.timeline=v(this._TimelineComponent,u.timeline);c.removeClass("qv-story-play");var o=e.getService("qvLoader");o.close()},close:function t(){var i=e.getService("qvLoader");o.isViewingSource||o.resetHistory();a.selectedSlideItemElem=null;this.releaseControllers();g(false);i.close()},setState:function t(e){this._storyState=e}});return f}.apply(e,n),void 0!==o&&(t.exports=o))},2640:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=g(i(98));var o=p(i(116));var a=i(171);var s=p(i(91));var r=p(i(95));var l=p(i(2641));var c=i(1096);var d=p(i(1044));var u=p(i(1686));var f=p(i(1687));var h=p(i(411));function p(t){return t&&t.__esModule?t:{default:t}}function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}e.default=t;return e}function y(){y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return y.apply(this,arguments)}function v(t){v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return v(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function x(t,e,i){e&&b(t.prototype,e);i&&b(t,i);return t}function S(t,e){if(e&&("object"===v(e)||"function"===typeof e))return e;return I(t)}function _(t){_=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return _(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&P(t,e)}function P(t,e){P=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return P(t,e)}var q=function(t){w(e,t);function e(t){var i;m(this,e);i=S(this,_(e).call(this,t));i.toggleStoryNavigator=i.toggleStoryNavigator.bind(I(i));i.force=i.forceUpdate.bind(I(i));i.state={storyNavigatorOpen:false};return i}x(e,[{key:"componentDidMount",value:function t(){r.default.subscribe("/data/story-list-layout-changed",this.force)}},{key:"componentWillUnmount",value:function t(){r.default.unsubscribe("/data/story-list-layout-changed",this.force)}},{key:"toggleStoryNavigator",value:function t(e){var i=this;var n=this.state.storyNavigatorOpen;var o=!n;l.default.toggle({pressed:o,close:function t(){return i.setState(function(t){var e=t.storyNavigatorOpen;return{storyNavigatorOpen:!e}})}},e);this.setState({storyNavigatorOpen:o})}},{key:"render",value:function t(){var e=this.props,i=e.isButtonTab,o=e.storyLayout;var r=this.state.storyNavigatorOpen;var l=false;var c=o.labelExpression||o.qMeta.title;return n.default.createElement(n.Fragment,null,n.default.createElement("div",{className:"qs-popover-container qs-toolbar__element"},n.default.createElement(a.Button,{tid:"4e25a2",className:r?"lui-active":"","qva-outside-ignore-for":"nav-story",title:s.default.get("Common.Stories"),disabled:l,onClick:this.toggleStoryNavigator},i?null:n.default.createElement(a.Button.Text,{className:"lui-button__text"},c),n.default.createElement(a.Button.Icon,{name:"slide-show"}),n.default.createElement(a.Button.Caret,null))))}}]);return e}(n.Component);q.propTypes={storyLayout:o.default.object.isRequired,isButtonTab:o.default.bool};q.defaultProps={isButtonTab:false};var M=(0,h.default)((0,u.default)((0,f.default)(function(t){return n.default.createElement(c.ToolbarConsumer,null,function(e){return n.default.createElement(q,y({},t,{isButtonTab:e<=d.default.medium}))})})));e.default=M;t.exports=e.default},2641:function(t,e,i){"use strict";var n,o;!(n=[i(48),i(11),i(1222),i(1460),i(122),i(1161),i(228)],o=function(t,e,i,n,o,a,s){var r;function l(o,a){var l=s.NavigationMode.story;r=t.getService("luiPopover").show({controller:i.controller,template:i.template,dock:"bottom",alignTo:a,outsideIgnore:"nav-"+l,container:e(a).parents(".popover-container,.qs-popover-container")[0],autoFocus:false,input:{showToolbar:true,showNavigation:false,navigationmode:l,isNavigator:true,tid:"storyNavigator"}});n.open();r.closing.then(function t(i){r=null;o.pressed=false;o.close&&o.close();var a=i&&e(i.target).closest("[data-toolbar-navigator]");a&&a.length||n.close()})}function c(t,e){if(t.pressed)l(t,e.currentTarget);else{r.close();r=null;n.close()}}function d(){o.goToStory(a.prevStoryId,a.prevState,a.prevSlideId)}return{toggle:c,returnToStory:d}}.apply(e,n),void 0!==o&&(t.exports=o))},2642:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=S(i(98));var o=x(i(116));var a=x(i(997));var s=x(i(48));var r=x(i(91));var l=x(i(118));var c=x(i(322));var d=x(i(1433));var u=x(i(328));var f=x(i(215));var h=x(i(122));var p=x(i(94));var g=x(i(143));var y=x(i(1001));var v=x(i(1686));var m=x(i(1687));var b=x(i(411));function x(t){return t&&t.__esModule?t:{default:t}}function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}e.default=t;return e}function _(){_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return _.apply(this,arguments)}function I(t){I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return I(t)}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function q(t,e,i){e&&P(t.prototype,e);i&&P(t,i);return t}function M(t,e){if(e&&("object"===I(e)||"function"===typeof e))return e;return D(t)}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){C=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return C(t)}function L(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&k(t,e)}function k(t,e){k=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return k(t,e)}var z=function(t){L(e,t);function e(t){var i;w(this,e);i=M(this,C(e).call(this,t));i.state={userId:void 0,userDirectory:void 0,streams:[]};return i}q(e,[{key:"componentDidMount",value:function t(){var e=this;var i=this.props.app;i.getPublishableStreams().then(function(t){return e.setState({streams:t})});g.default.onDataReceived.then(function(t){var i=t.userId,n=t.userDirectory;"NONE"!==n&&e.setState({userId:i,userDirectory:n})})}},{key:"render",value:function t(){var e=this.props,i=e.app,o=e.appLayout,a=e.story,g=e.storyLayout,v=e.closeMenu,m=e.features;var b=this.state,x=b.streams,S=b.userId,_=b.userDirectory;var I=[];var w=m.getFlag("AOSHARE");var P=g.permissions.publish&&g.qMeta&&!g.qMeta.published;if(P){var q=w?"GlobalMenu.SharedSpace.ApproveStory":"GlobalMenu.PublishStory";I.push(n.default.createElement(y.default,{key:w?"approve":"publish",tid:q,iconName:"publish",title:r.default.get(q),onSelect:function t(){d.default.openPublishDialog(p.default,x,i);v()}},r.default.get(q)))}var M=o.permissions.exportData;if(M){I.push(n.default.createElement(y.default,{key:"exportToPpt",tid:"GlobalMenu.ExportStoryToPpt",iconName:"print",title:r.default.get("GlobalMenu.ExportStoryToPpt"),onSelect:function t(){c.default.showForGlobalMenu(p.default,"Ppt","Story");v()}},r.default.get("GlobalMenu.ExportStoryToPpt")));I.push(n.default.createElement(y.default,{key:"exportToPdf",tid:"GlobalMenu.ExportStoryToPdf",iconName:"print",title:r.default.get("GlobalMenu.ExportStoryToPdf"),onSelect:function t(){c.default.showForGlobalMenu(p.default,"Pdf","Story");v()}},r.default.get("GlobalMenu.ExportStoryToPdf")))}var D=o.permissions.createStory;D&&I.push(n.default.createElement(y.default,{key:"duplicate",tid:"GlobalMenu.DuplicateStory",iconName:"copy",title:r.default.get("GlobalMenu.DuplicateStory"),onSelect:function t(){var e=p.default.getModel();u.default.duplicateStory(e).then(function(t){t.getProperties().then(function(t){h.default.goToStory(t.qInfo.qId,"editstory")})});v()}},r.default.get("GlobalMenu.DuplicateStory")));var C=g.permissions.publish&&g.qMeta.published&&!g.qMeta.approved&&g.qMeta.owner.userId===S&&g.qMeta.owner.userDirectory===_;if(C){var L=w?"GlobalMenu.SharedSpace.UnapproveStory":"GlobalMenu.UnpublishStory";I.push(n.default.createElement(y.default,{key:"unpublish",tid:L,iconName:"publish",title:r.default.get(L),onSelect:function t(){d.default.openUnpublishDialog(p.default,a);v()}},r.default.get(L)))}var k=g.qMeta&&!g.qMeta.published&&g.permissions.remove;if(k){var z=function t(e){if(l.default.startsWith(e,"<")&&l.default.endsWith(e,">"))return encodeURI(e);return e};I.push(n.default.createElement(y.default,{key:"delete",tid:"GlobalMenu.DeleteStory",iconName:"bin",title:r.default.get("GlobalMenu.DeleteStory"),onSelect:function t(){var e=g.qInfo.qId;var i=g.labelExpression||g.qMeta.title;var n=s.default.getService("qvConfirmDialog");n.show({title:r.default.get("AppOverView.Confirm.Title.Story"),message:r.default.get("AppOverView.Confirm.Description.Story",[z(i)]),cancelLabel:r.default.get("Common.Cancel"),okLabel:r.default.get("Common.Delete")}).closed.then(function(t){t&&f.default.remove(e)});v()}},r.default.get("GlobalMenu.DeleteStory")))}return n.default.createElement(n.Fragment,null,I)}}]);return e}(n.Component);z.propTypes={app:o.default.object.isRequired,appLayout:o.default.object.isRequired,story:o.default.object.isRequired,storyLayout:o.default.object.isRequired,closeMenu:o.default.func.isRequired,features:o.default.object.isRequired};var A=(0,b.default)((0,v.default)((0,m.default)(function(t){return n.default.createElement(a.default,null,function(e){return n.default.createElement(z,_({features:e},t))})})));e.default=A;t.exports=e.default},2643:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=s;var n=o(i(98));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}e.default=t;return e}var a=(0,n.lazy)(function(){return i.e(71).then(i.t.bind(null,2815,7))});function s(t){return n.default.createElement(n.Suspense,{fallback:n.default.createElement("div",null)},n.default.createElement(a,t))}t.exports=e.default},2644:function(t,e,i){},307:function(t,e,i){"use strict";var n,o;!(n=[i(92),i(291),i(89)],o=function(t,e,i){var n;n=t.extend("layer",{init:function t(i,n){this.wrapper=document.createElement("div");this.wrapper.style.position="absolute";this.renderer=new e(this.wrapper,n);this.minorAxis=null;this.majorAxis=null;i.appendChild(this.wrapper)},update:function t(){},release:function t(){this.wrapper&&this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper);this.wrapper=null;this.renderer.release();this.minorAxis=null;this.majorAxis=null},show:function t(){this.wrapper.style.display="block"},hide:function t(){this.wrapper.style.display="none"},render:function t(){if("none"!==this.wrapper.style.display)return this.renderer.render();return i.resolve()},clear:function t(){this.renderer.clear()}});return n}.apply(e,n),void 0!==o&&(t.exports=o))}}]);