/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[79],{1331:function(t,e,n){var i,o;!(i=[n,e,n(1795)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});var i=function(){function t(){this._linkDistance=100;this._recommendationDistance=100;this._linkStrength=2;this._recommendationStrength=.1;this._linkTearDistance=100;this._linkRFactor=.7;this._charge=-1500;this._gravity=.05;this._friction=.9;this._theta=.8;this._minBubbleRadius=55;this._maxBubbleRadius=80;this._animationLogLevel=t.OFF;this._enableRestoreOnEnd=t.ENABLE;this._enableLOD=t.ENABLE;this._enableDropFrames=t.ENABLE;this._enableAlwaysFast=t.OFF;this._fps=25;this._simpleLines=t.ENABLE;this._enableClearOverlaps=t.ENABLE;this.onOptionChangeEvent=new n.default;this.load()}t.prototype.save=function(){var t={};t["_linkDistance"]=this._linkDistance;t["_recommendationDistance"]=this._recommendationDistance;t["_linkStrength"]=this._linkStrength;t["_recommendationStrength"]=this._recommendationStrength;t["_linkTearDistance"]=this._linkTearDistance;t["_linkRFactor"]=this._linkRFactor;t["_charge"]=this._charge;t["_gravity"]=this._gravity;t["_friction"]=this._friction;t["_theta"]=this._theta;t["_minBubbleRadius"]=this._minBubbleRadius;t["_maxBubbleRadius"]=this._maxBubbleRadius;t["_animationLogLevel"]=this._animationLogLevel;t["_enableRestoreOnEnd"]=this._enableRestoreOnEnd;t["_enableLOD"]=this._enableLOD;t["_enableDropFrames"]=this._enableDropFrames;t["_enableAlwaysFast"]=this._enableAlwaysFast;t["_fps"]=this._fps;t["_simpleLines"]=this._simpleLines;t["_enableClearOverlaps"]=this._enableClearOverlaps;var e=new Date;var n=e.getTime();var i=n+36e6;e.setTime(i);document.cookie="hldm-vis-options="+JSON.stringify(t)+";expires="+e.toUTCString()+";path=/"};t.prototype.load=function(){var t=this.getCookie("hldm-vis-options");if(t){var e=JSON.parse(t);this._linkDistance=parseFloat(e["_linkDistance"]);this._recommendationDistance=parseFloat(e["_recommendationDistance"]);this._linkStrength=parseFloat(e["_linkStrength"]);this._recommendationStrength=parseFloat(e["_recommendationStrength"]);this._linkTearDistance=parseFloat(e["_linkTearDistance"]);this._linkRFactor=parseFloat(e["_linkRFactor"]);this._charge=parseFloat(e["_charge"]);this._gravity=parseFloat(e["_gravity"]);this._friction=parseFloat(e["_friction"]);this._theta=parseFloat(e["_theta"]);this._minBubbleRadius=parseFloat(e["_minBubbleRadius"]);this._maxBubbleRadius=parseFloat(e["_maxBubbleRadius"]);this._animationLogLevel=parseFloat(e["_animationLogLevel"]);this._enableRestoreOnEnd=parseFloat(e["_enableRestoreOnEnd"]);this._enableLOD=parseFloat(e["_enableLOD"]);this._enableDropFrames=parseFloat(e["_enableDropFrames"]);this._enableAlwaysFast=parseFloat(e["_enableAlwaysFast"]);this._fps=parseFloat(e["_fps"]);this._simpleLines=parseFloat(e["_simpleLines"]);this._enableClearOverlaps=parseFloat(e["_enableClearOverlaps"])}};t.prototype.restore=function(){document.cookie="hldm-vis-options=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"};t.prototype.getCookie=function(t){var e=t+"=";var n=document.cookie.split(";");for(var i=0;i<n.length;i++){var o=n[i];while(" "===o.charAt(0))o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return""};t.prototype.toFloat=function(t){return parseFloat(t)};Object.defineProperty(t.prototype,"linkDistance",{get:function(){return this._linkDistance},set:function(t){this._linkDistance=t;this.emit({option:"linkDistance",value:t})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recommendationDistance",{get:function(){return this._recommendationDistance},set:function(t){this._recommendationDistance=t;this.emit({option:"recommendationDistance",value:t})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"linkStrength",{get:function(){return this._linkStrength},set:function(t){this._linkStrength=this.toFloat(t);this.emit({option:"linkStrength",value:this._linkStrength})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recommendationStrength",{get:function(){return this._recommendationStrength},set:function(t){this._recommendationStrength=this.toFloat(t);this.emit({option:"recommendationStrength",value:this._recommendationStrength})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"linkTearDistance",{get:function(){return this._linkTearDistance},set:function(t){this._linkTearDistance=this.toFloat(t);this.emit({option:"linkTearDistance",value:this._linkTearDistance})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"linkRFactor",{get:function(){return this._linkRFactor},set:function(t){this._linkRFactor=this.toFloat(t);this.emit({option:"linkRFactor",value:this._linkRFactor})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"charge",{get:function(){return this._charge},set:function(t){this._charge=this.toFloat(t);this.onOptionChangeEvent.emit({option:"charge",value:this._charge})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gravity",{get:function(){return this._gravity},set:function(t){this._gravity=this.toFloat(t);this.emit({option:"gravity",value:this._gravity})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"friction",{get:function(){return this._friction},set:function(t){this._friction=this.toFloat(t);this.emit({option:"friction",value:this._friction})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"theta",{get:function(){return this._theta},set:function(t){this._theta=this.toFloat(t);this.emit({option:"theta",value:this._theta})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"minBubbleRadius",{get:function(){return this._minBubbleRadius},set:function(t){this._minBubbleRadius=this.toFloat(t);this.emit({option:"minBubbleRadius",value:this._minBubbleRadius})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxBubbleRadius",{get:function(){return this._maxBubbleRadius},set:function(t){this._maxBubbleRadius=this.toFloat(t);this.emit({option:"maxBubbleRadius",value:this._maxBubbleRadius})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fps",{get:function(){return this._fps},set:function(t){this._fps=this.toFloat(t);this.emit({option:"fps",value:this._fps})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enableDropFrames",{get:function(){return this._enableDropFrames},set:function(t){this._enableDropFrames=this.toFloat(t);this.emit({option:"enableDropFrames",value:this._enableDropFrames})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enableLOD",{get:function(){return this._enableLOD},set:function(t){this._enableLOD=this.toFloat(t);this.emit({option:"enableLOD",value:this._enableLOD})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enableRestoreOnEnd",{get:function(){return this._enableRestoreOnEnd},set:function(t){this._enableRestoreOnEnd=this.toFloat(t);this.emit({option:"enableRestoreOnEnd",value:this._enableRestoreOnEnd})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animationLogLevel",{get:function(){return this._animationLogLevel},set:function(t){this._animationLogLevel=this.toFloat(t);this.emit({option:"animationLogLevel",value:this._animationLogLevel})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enableAlwaysFast",{get:function(){return this._enableAlwaysFast},set:function(t){this._enableAlwaysFast=this.toFloat(t);this.emit({option:"enableAlwaysFast",value:this._enableAlwaysFast})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"simpleLines",{get:function(){return this._simpleLines},set:function(t){this._simpleLines=this.toFloat(t);this.emit({option:"simpleLines",value:this._simpleLines})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enableClearOverlaps",{get:function(){return this._enableClearOverlaps},set:function(t){this._enableClearOverlaps=this.toFloat(t);this.emit({option:"enableClearOverlaps",value:this._enableClearOverlaps})},enumerable:true,configurable:true});t.prototype.emit=function(t){this.save();this.onOptionChangeEvent.emit(t)};t.prototype.onOptionChange=function(t){return this.onOptionChangeEvent.add(t)};t.ENABLE=1;t.OFF=0;t.LOW=1;t.MEDIUM=2;t.HIGH=3;t.ANIMATION_ONLY=2;t.ALWAYS=3;return t}();e.default=i}.apply(e,i),void 0!==o&&(t.exports=o))},1682:function(t,e,n){var i,o;var r=this&&this.__extends||function(){var t=function(e,n){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!(i=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n;(function(t){t[t["Good"]=0]="Good";t[t["Medium"]=1]="Medium";t[t["Bad"]=2]="Bad"})(n=e.LinkStatus||(e.LinkStatus={}));var i;(function(t){t[t["Normal"]=0]="Normal";t[t["Pending"]=1]="Pending";t[t["Deleted"]=2]="Deleted";t[t["Invalid"]=3]="Invalid"})(i=e.TableStatus||(e.TableStatus={}));var o;(function(t){t[t["Normal"]=0]="Normal";t[t["Script"]=1]="Script";t[t["Concatenated"]=2]="Concatenated";t[t["Joined"]=3]="Joined"})(o=e.TableType||(e.TableType={}));var s=function(){function t(){}return t}();var a=function(t){r(e,t);function e(e){var i=t.call(this)||this;i.name=e.name;i.id=i.name;i.x=e.x;i.y=e.y;i.r=e.r;i.fixed=e.fixed||false;i.linkScore=e.linkScore||0;i.linkStatus=e.linkStatus||n.Bad;i.linkProximity=e.linkProximity||false;return i}e.prototype.isScript=function(){return false};e.prototype.isEnabled=function(){return true};e.prototype.isInteractive=function(){return true};e.prototype.hasPendingChanges=function(){return false};e.prototype.getIcon=function(){return""};e.prototype.hasIcon=function(){return""!==this.getIcon()};e.prototype.getJoinSvgIcon=function(){return""};e.prototype.hasJoinSvgIcon=function(){return""!==this.getJoinSvgIcon()};return e}(s);var u=function(t){r(e,t);function e(e){var n=t.call(this,e)||this;n.table=e.table;n.id=n.table.id;n.name=n.table.name;return n}e.prototype.isTable=function(){return true};e.prototype.isHub=function(){return false};e.prototype.getType=function(){return o[this.table.type]};e.prototype.getStatus=function(){return i[this.table.status]};e.prototype.isScript=function(){return this.getType()===o.Script};e.prototype.getRelativeSize=function(){return this.table.rowCount};e.prototype.isEnabled=function(){return this.getStatus()!==i.Deleted&&this.getStatus()!==i.Invalid};e.prototype.isInteractive=function(){return this.getType()!==o.Script&&(this.getStatus()===i.Normal||this.getStatus()===i.Pending)};e.prototype.hasPendingChanges=function(){return this.getStatus()===i.Pending};e.prototype.getIcon=function(){if(this.getType()===o.Script)return"8";if(this.getType()===o.Concatenated)return"A";if(this.table.isFiltered)return"☽";return""};e.prototype.getJoinSvgIcon=function(){if(this.getType()===o.Joined)return"Joined";return""};return e}(a);e.TableBubble=u;var l=function(t){r(e,t);function e(e){var n=t.call(this,e)||this;n.id=e.id;return n}e.prototype.isTable=function(){return false};e.prototype.isHub=function(){return true};e.prototype.getRelativeSize=function(){return 0};return e}(a);e.HubBubble=l;var c=function(t){r(e,t);function e(e){var i=t.call(this)||this;i.source=e.source;i.target=e.target;i.id=e.source.id+"-"+e.target.id;i.name=e.source.name+"-"+e.target.name;i.linkStatus=e.linkStatus||n.Bad;return i}e.prototype.isPreview=function(){return false};e.prototype.isHubLink=function(){return this.source.isHub()||this.target.isHub()};e.prototype.getHubBubble=function(){return this.source.isHub()?this.source:this.target.isHub()?this.target:void 0};e.prototype.getTableBubble=function(){return this.source.isTable()?this.source:this.target.isTable()?this.target:void 0};e.prototype.getInitialLength=function(){return this.initialLength};e.prototype.setInitialLength=function(t){this.initialLength=t};e.prototype.getCurrentLength=function(){var t=this.source.x,e=this.source.y;var n=this.target.x,i=this.target.y;var o=Math.sqrt((t-n)*(t-n)+(e-i)*(e-i));return o};return e}(s);var d=function(t){r(e,t);function e(e){var n=t.call(this,e)||this;n.association=e.association;return n}e.prototype.isAssociation=function(){return true};e.prototype.isRecommendation=function(){return false};e.prototype.isPreview=function(){return this.association&&this.association.preview};return e}(c);e.AssociationLink=d;var p=function(t){r(e,t);function e(e){var n=t.call(this,e)||this;n.recommendation=e.recommendation;return n}e.prototype.isAssociation=function(){return false};e.prototype.isRecommendation=function(){return true};return e}(c);e.RecommendationLink=p;var f=function(){function t(){this.bubbleData=[];this.linkData=[]}Object.defineProperty(t.prototype,"bubbles",{get:function(){return this.bubbleData},set:function(t){this.bubbleData=t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"links",{get:function(){return this.linkData},set:function(t){this.linkData=t},enumerable:true,configurable:true});return t}();e.BubbleDataModel=f;var h=function(){function t(){}t.TABLE="table";t.HUB="hub";t.LINK="link";return t}();e.SelectedObjectType=h}.apply(e,i),void 0!==o&&(t.exports=o))},1791:function(t,e,n){var i,o;!(i=[n,e,n(54)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.transformation=e,this.targetTable=t}return t.prototype.getAppliedTo=function(){var t=this,e=[];if(n.isArray(this.transformation.appliedTo))this.transformation.appliedTo.forEach(function(n){var i=t.targetTable.getField(n);i&&e.push(i)});else{var i=this.targetTable.getField(this.transformation.appliedTo);i&&e.push(i)}return e},t.prototype.getNullMappingCount=function(){var t=0;return this.transformation.arguments.mapping&&this.transformation.arguments.mapping.forEach(function(e){(""===e.to||void 0===e.to)&&t++}),t},t.prototype.getMappingsCount=function(){var t=0;return this.transformation.arguments.mapping&&(t=this.transformation.arguments.mapping.length),t},t}();e.TransformationOperations=i}.apply(e,i),void 0!==o&&(t.exports=o))},1795:function(t,e,n){var i,o;!(i=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(){this.handlers=[]}t.prototype.add=function(t){var e=this;this.handlers.indexOf(t)<0&&this.handlers.push(t);return{remove:function(){e.remove(t)}}};t.prototype.remove=function(t){var e=this.handlers.indexOf(t);e>=0&&this.handlers.splice(e,1)};t.prototype.removeAll=function(){this.handlers=[]};t.prototype.emit=function(t){this.handlers.forEach(function(e){e(t)})};return t}();e.default=n}.apply(e,i),void 0!==o&&(t.exports=o))},1796:function(t,e,n){var i,o;!(i=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e,n,i,o){this._force=t;this._data=e;this._visOptions=i;this.absUrl=n;this._graphProvider=o}t.prototype.getLinkedNodes=function(t){return this._data.links.filter(function(t){return!t.isRecommendation()}).map(function(e){if(e.source===t)return e.target;if(e.target===t)return e.source;return null}).filter(function(t){return null!==t})};t.prototype.getLinks=function(t){return this._data.links.filter(function(t){return!t.isRecommendation()}).map(function(e){if(e.source===t||e.target===t)return e;return null}).filter(function(t){return null!==t})};t.LOD_HIGH=0;t.LOD_MEDIUM=1;t.LOD_LOW=2;t.LOD_FASTEST=3;return t}();e.default=n}.apply(e,i),void 0!==o&&(t.exports=o))},2404:function(t,e,n){var i,o;!(i=[n,e,n(151)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.targetTable=t}return t.prototype.getConcatenationInfo=function(){var t={totalFields:0,totalConcatFields:0};return this.targetTable.getFields().forEach(function(e){t.totalFields++,e.type===n.DSMTypes.CompositeQueryField.name&&t.totalConcatFields++}),t},t}();e.AutoConcatOperations=i}.apply(e,i),void 0!==o&&(t.exports=o))},2408:function(t,e,n){var i,o;!(i=[n,e,n(2409),n(2410),n(2411),n(1791),n(439),n(151)],o=function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t){this.loadModel=t}return t.prototype.getFieldLineage=function(t,e,n){var i={};return this.getFieldLineageImpl(t,e,n,i)},t.prototype.getQueryLineage=function(t,e){var i=[],o=[];this.walkQueries(t,void 0,i,o);var r={lineageType:n.LineageType.query,sources:o,operations:i,subject:{name:t.name,id:t.id}};return r},t.prototype.getFieldLineageImpl=function(t,e,i,o){var r=[],s=[];this.walkFields(t,e,r,s,i);var a=void 0;i&&i.deep&&(a=this.processLineageSources(s,i,o));var u={lineageType:n.LineageType.field,sources:s,operations:r,subject:{name:e.name,id:e.id,parentId:t.id}};return a&&(u.dependents=a),u},t.prototype.processLineageSources=function(t,e,n){var i=this,o=[];return t.forEach(function(t){if(t.queryId&&t.fieldId){var r=i.loadModel.findQueryById(t.queryId),s=r.getField(t.fieldId);n[t.fieldId]||(n[t.fieldId]=!0,o.push(i.getFieldLineageImpl(r.data,s,e,n)))}}),o},t.prototype.buildQueryExpressionFieldOperation=function(t,e,i){var r=new o.QueryExpressionFieldOperations(t,e),s=r.getReferencedFields(),a={op:n.LineageOp.expression,opType:n.LineageOpType.field,subject:{name:e.name,id:e.id,parentId:t.data.id},details:[]};return s.forEach(function(e){var o={type:n.LineageObjectRefType.field,queryId:t.data.id,fieldId:e.id,name:e.name,hints:[n.LineageHint.input]};i.push(o),a.details.push({type:n.LineageDetailType.objectref,objectref:o})}),a.details.push({type:n.LineageDetailType.expression,expression:r.expressionToPrettyString()}),a},t.prototype.buildQueryTransformFieldOperation=function(t,e,i){var o=this,a=void 0;return e.transformations&&e.transformations.forEach(function(u){if(s.LoadModelUtils.isNewFieldTransformation(u.op)){a={op:o.transformationNameToEnum(u.op),opType:n.LineageOpType.field,subject:{name:e.name,id:e.id,parentId:t.data.id},details:[]};var l=new r.TransformationOperations(t,u),c=l.getAppliedTo();c.forEach(function(e){var o={type:n.LineageObjectRefType.field,queryId:t.data.id,fieldId:e.id,name:e.name,hints:[n.LineageHint.input]};i.push(o),a.details.push({type:n.LineageDetailType.objectref,objectref:o})}),a.details.push({type:n.LineageDetailType.transformationIndex,value:e.transformations.indexOf(u)})}}),a},t.prototype.buildCompositeFieldOperation=function(t,e,o){var r=n.LineageOp.add;switch(t.data.type.toLowerCase()){case"crosstablequery":r=n.LineageOp.unpivot;break;case"forcedconcatenationquery":r=n.LineageOp.forceconcat;break;case"concatenationquery":r=n.LineageOp.autoconcat}var s=[];if("crosstablequery"===t.data.type.toLowerCase()&&t.data.attributeFieldRef===e.id||t.data.dataFieldRef===e.id){var a,u=new i.CrossTableOperations(t).getUnpivotedFields();a=t.data.attributeFieldRef===e.id?n.LineageHint.attributeField:n.LineageHint.dataField,u.forEach(function(e){var i={type:n.LineageObjectRefType.field,queryId:t.data.id,fieldId:e.id,name:e.name,hints:[n.LineageHint.input,a]};o.push(i),s.push({type:n.LineageDetailType.objectref,objectref:i})})}else t.getSourceFields(e.id).forEach(function(t){var e={type:n.LineageObjectRefType.field,fieldId:t.field.id,queryId:t.sourceQuery.id,name:t.field.name,contextName:t.sourceQuery.name,hints:[n.LineageHint.input]};o.push(e),s.push({type:n.LineageDetailType.objectref,objectref:e})});var l={op:r,opType:n.LineageOpType.field,subject:{name:e.name,id:e.id,parentId:t.data.id},details:s};return l},t.prototype.walkFields=function(t,e,i,o,r){var a=this,u=this.loadModel.wrapInTargetTableModel(t);if(-1!==["queryexpressionfield","querytransformfield"].indexOf(e.type.toLowerCase()))switch(e.type.toLowerCase()){case"queryexpressionfield":i.push(this.buildQueryExpressionFieldOperation(u,e,o));break;case"querytransformfield":var l=this.buildQueryTransformFieldOperation(u,e,o);l&&i.push(l)}else if(u.getSourceQueries().length>0){var l=this.buildCompositeFieldOperation(u,e,o);i.push(l)}var c=this.loadModel.wrapInFieldModel(e);if(c.isGeographical()){var l={op:n.LineageOp.classification,opType:n.LineageOpType.field,subject:{name:e.name,id:e.id,parentId:u.data.id},details:[]};l.details.push({type:n.LineageDetailType.classification,classification:{type:n.LineageClassificationType.geo,value:c.getGeographicalClassification()}}),i.push(l)}if(e.transformations){var d=this.sortTransformationsByLineageOrder(e.transformations);d.forEach(function(t){if(s.LoadModelUtils.isInlineTransformation(t.op)){var o={op:a.transformationNameToEnum(t.op),opType:n.LineageOpType.field,subject:{name:e.name,id:e.id,parentId:u.data.id},details:[]};o.details.push({type:n.LineageDetailType.transformationIndex,value:e.transformations.indexOf(t)}),i.push(o)}})}if(e.fieldRef&&"query"===t.type.toLowerCase()){var p=this.loadModel.getSourceTableByTableRefId(u.getTableRefs()[0]),f=p.getFieldById(e.fieldRef);o.push({type:n.LineageObjectRefType.field,tableId:p.data.id,fieldId:f.id,name:f.name,contextName:p.data.tableName,hints:[n.LineageHint.input]})}},t.prototype.sortTransformationsByLineageOrder=function(t){var e=["mapValues","defineOrder","fieldSplit"];return t&&t.sort(function(t,n){var i=e.indexOf(t.op),o=e.indexOf(n.op);if(-1!==i){if(-1===o)return-1;if(o>i)return-1;if(i>o)return 1}else if(-1!==o)return 1;return 0}),t},t.prototype.walkQueries=function(t,e,i,o){var r=this,s=this.loadModel.wrapInTargetTableModel(t),u=s.getSourceQueries();if(u.length>0){var l=[];t.type===a.DSMTypes.JoinedQuery.name&&t.joinType&&l.push({type:n.LineageDetailType.join,objectref:{type:n.LineageObjectRefType.join,name:t.joinType}}),u.forEach(function(e){r.walkQueries(e,t,i,o),l.push({type:n.LineageDetailType.objectref,objectref:{type:n.LineageObjectRefType.query,queryId:e.id,name:e.name,hints:[n.LineageHint.input]}})});var c={opType:n.LineageOpType.query,subject:{name:t.name,id:t.id,parentId:e?e.id:void 0},op:this.getLineageOpTypeForQuery(t),details:[]};this.supplementOperationDetails(s,u,l),c.details=l,i.push(c)}else{var d=this.loadModel.getSourceTableByTableRefId(s.getTableRefs()[0]),p=n.LineageOp.add;"script"===d.data.connectionInfo.typeName&&(p=n.LineageOp.synchronize);var c={opType:n.LineageOpType.query,subject:{name:t.name,id:t.id},op:p,details:[]},f={type:n.LineageObjectRefType.table,tableId:d.data.id,name:d.data.tableName,hints:[n.LineageHint.input],contextName:d.data.databaseName};c.details.push({type:n.LineageDetailType.objectref,objectref:f}),o.push(f),d.data.filter&&c.details.push({type:n.LineageDetailType.tableFilter}),i.push(c)}},t.prototype.getLineageOpTypeForQuery=function(t){switch(t.type.toLowerCase()){case"concatenationquery":return n.LineageOp.autoconcat;case"forcedconcatenationquery":return n.LineageOp.forceconcat;case"crosstablequery":return n.LineageOp.unpivot;case"joinedquery":return n.LineageOp.join;default:return n.LineageOp.add}},t.prototype.supplementOperationDetails=function(t,e,n){switch(t.data.type.toLowerCase()){case"concatenationquery":case"forcedconcatenationquery":break;case"crosstablequery":this.addPivotDetails(t,e,n)}},t.prototype.addPivotDetails=function(t,e,o){var r=new i.CrossTableOperations(t),s=r.getAttributeField(),a=r.getDataField(),u=r.getUnpivotedFields();o.push({type:n.LineageDetailType.objectref,objectref:{type:n.LineageObjectRefType.field,tableId:t.data.id,fieldId:s.id,name:s.name,hints:[n.LineageHint.output,n.LineageHint.attributeField]}}),o.push({type:n.LineageDetailType.objectref,objectref:{type:n.LineageObjectRefType.field,tableId:t.data.id,fieldId:a.id,name:a.name,hints:[n.LineageHint.output,n.LineageHint.dataField]}}),u.forEach(function(e){o.push({type:n.LineageDetailType.objectref,objectref:{type:n.LineageObjectRefType.field,tableId:t.data.id,fieldId:e.id,name:e.name,hints:[n.LineageHint.input]}})})},t.prototype.transformationNameToEnum=function(t){return n.LineageOp[t]},t}();e.LineageGenerator=u}.apply(e,i),void 0!==o&&(t.exports=o))},2409:function(t,e,n){var i,o;!(i=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){t[t.query="query"]="query",t[t.field="field"]="field"}(n=e.LineageOpType||(e.LineageOpType={}));var i;!function(t){t[t.query="query"]="query",t[t.field="field"]="field"}(i=e.LineageType||(e.LineageType={}));var o;!function(t){t[t.query="query"]="query",t[t.table="table"]="table",t[t.field="field"]="field",t[t.join="join"]="join"}(o=e.LineageObjectRefType||(e.LineageObjectRefType={}));var r;!function(t){t[t.add="add"]="add",t[t.autoconcat="autoconcat"]="autoconcat",t[t.forceconcat="forceconcat"]="forceconcat",t[t.unpivot="unpivot"]="unpivot",t[t.join="join"]="join",t[t.expression="expression"]="expression",t[t.lookupGeoInfo="lookupGeoInfo"]="lookupGeoInfo",t[t.bucketed="bucketed"]="bucketed",t[t.makeGeoPoint="makeGeoPoint"]="makeGeoPoint",t[t.fieldSplit="fieldSplit"]="fieldSplit",t[t.ignoreValues="ignoreValues"]="ignoreValues",t[t.defineOrder="defineOrder"]="defineOrder",t[t.mapValues="mapValues"]="mapValues",t[t.interpretValues="interpretValues"]="interpretValues",t[t.classification="classification"]="classification",t[t.synchronize="synchronize"]="synchronize"}(r=e.LineageOp||(e.LineageOp={}));var s;!function(t){t[t.objectref="objectref"]="objectref",t[t.expression="expression"]="expression",t[t.number="index"]="number",t[t.transformationIndex="transformationIndex"]="transformationIndex",t[t.classification="classification"]="classification",t[t.tableFilter="tableFilter"]="tableFilter",t[t.join="join"]="join"}(s=e.LineageDetailType||(e.LineageDetailType={}));var a;!function(t){t[t.input="input"]="input",t[t.output="output"]="output",t[t.attributeField="attributeField"]="attributeField",t[t.dataField="dataField"]="dataField"}(a=e.LineageHint||(e.LineageHint={}));var u;!function(t){t[t.geo="geo"]="geo"}(u=e.LineageClassificationType||(e.LineageClassificationType={}))}.apply(e,i),void 0!==o&&(t.exports=o))},2410:function(t,e,n){var i,o;!(i=[n,e,n(54)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.crossTable=t}return t.prototype.getAttributeField=function(){var t=n.findWhere(this.crossTable.getFields(),{id:this.crossTable.data.attributeFieldRef});return t},t.prototype.getDataField=function(){var t=n.findWhere(this.crossTable.getFields(),{id:this.crossTable.data.dataFieldRef});return t},t.prototype.getUnpivotedFields=function(){var t=this.crossTable.getFields(),e=t.filter(function(t){return void 0!==t.fieldRef}),i=this.crossTable.getSourceQueries()[0].fields.filter(function(t){return void 0===n.findWhere(e,{name:t.name})&&void 0===n.findWhere(e,{fieldRef:t.id})});return i},t}();e.CrossTableOperations=i}.apply(e,i),void 0!==o&&(t.exports=o))},2411:function(t,e,n){var i,o;!(i=[n,e,n(439)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.queryField=e,this.query=t}return t.prototype.getReferencedFields=function(){for(var t=this.queryField.expression.split(n.LoadModelUtils.gExpressionRegEx),e=[],i=2;i<t.length;i+=4){var o=this.query.getField(t[i]);o&&e.push(o)}return e},t.prototype.expressionToPrettyString=function(){var t="({{)(\\S\\s*[^}}]*)(}})",e=new RegExp(t,"g"),n=this.queryField.expression.replace(e,this.fieldNameReplacer.bind(this));return n},t.prototype.fieldNameReplacer=function(t,e,n,i,o,r){var s=this.query.getField(n);return s||(s=this.query.getFieldByName(n)),s?"["+s.name+"]":"-"},t}();e.QueryExpressionFieldOperations=i}.apply(e,i),void 0!==o&&(t.exports=o))},2429:function(t,e,n){var i,o;!(i=[n,e,n(48),n(2430),n(1331),n(2434),n(2441),n(2442),n(2445)],o=function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});var a=function(){function t(){this.restrict="E";this.replace=true;this.template=s;this.scope={bubblesDataProvider:"=",params:"=",debugEnabled:"="};this.link=function(t,e){t.params||(t.params={});t.workbench=new r.default(e.find(".workbench")[0],t.visualizationOptions,t.bubblesEventsBridge,t.params,t.debugEnabled);t.$emit("bubbles-initialized",t.bubblesEventsBridge)};this.controller=u}return t}();var u=function(){function t(t,e,n,r){t.visualizationOptions=new o.default;t.bubblesEventsBridge=new i.default;t.bubblesAutoAssociateButtonState={showBadge:false,isAssociationsRecommendationsPanelOpened:false,associationsCount:0};function s(){r.clearButtons();r.addButton({tid:"home-button",cssIcon:"lui-icon--home",tooltip:"Bubbles.Toolbar.Home.Tooltip",action:function(){return t.workbench.zoomToFit()},disabled:function(){return false}});r.addButton({tid:"zoom-in-button",cssIcon:"lui-icon--zoom-in",tooltip:"Bubbles.Toolbar.ZoomIn.Tooltip",action:function(){return t.workbench.zoomIn()},disabled:function(){return!t.workbench.canZoomIn()}});r.addButton({tid:"zoom-out-button",cssIcon:"lui-icon--zoom-out",tooltip:"Bubbles.Toolbar.ZoomOut.Tooltip",appendSeparator:true,action:function(){return t.workbench.zoomOut()},disabled:function(){return!t.workbench.canZoomOut()}});r.addButton({tid:"auto-associate-button",cssIcon:"lui-icon--effects",tooltip:"Bubbles.Toolbar.AutoAssociate.Tooltip",showBadge:t.bubblesAutoAssociateButtonState.showBadge,badge_count:t.bubblesAutoAssociateButtonState.associationsCount,toggled:t.bubblesAutoAssociateButtonState.isAssociationsRecommendationsPanelOpened,action:function(){return t.bubblesEventsBridge.autoAssociateBubbles()},disabled:function(){return t.workbench.isReadOnly()}})}s();t.bubblesEventsBridge.onModelChanged(function(n){e(function(){n&&n.selectionOnly?t.workbench.selectionUpdated(n.bubblesSelectionState.selected):t.bubblesDataProvider.getTableData().then(function(e){t.workbench.renderTables(e,n)}).finally(function(){t.bubblesEventsBridge.modelReloaded()})})});t.bubblesEventsBridge.onBubblesAssociationPanelChanged(function(n){e(function(){t.bubblesAutoAssociateButtonState=n;s()})});t.bubblesEventsBridge.onReadOnlyStateChanged(function(e){t.workbench.onReadOnlyStateChanged(e)});t.bubblesEventsBridge.onGetBubbleState(function(){return n.resolve(t.workbench.getBubblesState())});t.$on("$destroy",function(){r.clearButtons();t.workbench.destroy()})}t.$inject=["$scope","$timeout","$q","qvBubblesToolbarService"];return t}();n.directive("qvBubbles",[function(){return new a}])}.apply(e,i),void 0!==o&&(t.exports=o))},2430:function(t,e,n){var i,o;!(i=[n,e,n(2431),n(1795),n(2432),n(2433)],o=function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var s=function(){function t(){this.onModelChangedEvent=new i.default;this.onBubblesAssociationPanelChangeEvent=new i.default;this.onGetBubbleStateAction=new r.default;this.onResizeEvent=new n.default;this.onBubbleSelectedEvent=new i.default;this.onBubbleDoubleClickedEvent=new i.default;this.onLinksSelectedEvent=new i.default;this.onSelectionClearedEvent=new n.default;this.onBubblesHoverEvent=new i.default;this.onRecommendationJoinedEvent=new i.default;this.onBubblesJoinedEvent=new o.default;this.onBubblesSplitEvent=new i.default;this.onLaunchAddDataAction=new n.default;this.onAutoAssociateBubblesAction=new n.default;this.onModelReloadedAction=new n.default;this.onBubblesStateUpdatedEvent=new i.default;this.onBubblesReadOnlyEvent=new i.default}t.prototype.modelChanged=function(t){this.onModelChangedEvent.emit(t)};t.prototype.onModelChanged=function(t){return this.onModelChangedEvent.add(t)};t.prototype.bubblesAssociationPanelChanged=function(t){this.onBubblesAssociationPanelChangeEvent.emit(t)};t.prototype.onBubblesAssociationPanelChanged=function(t){return this.onBubblesAssociationPanelChangeEvent.add(t)};t.prototype.readOnlyStateChanged=function(t){return this.onBubblesReadOnlyEvent.emit(t)};t.prototype.onReadOnlyStateChanged=function(t){this.onBubblesReadOnlyEvent.add(t)};t.prototype.getBubbleState=function(){return this.onGetBubbleStateAction.emit()};t.prototype.onGetBubbleState=function(t){return this.onGetBubbleStateAction.add(t)};t.prototype.resize=function(){this.onResizeEvent.emit()};t.prototype.onResize=function(t){return this.onResizeEvent.add(t)};t.prototype.bubbleSelected=function(t){this.onBubbleSelectedEvent.emit(t)};t.prototype.onBubbleSelected=function(t){return this.onBubbleSelectedEvent.add(t)};t.prototype.bubbleDoubleClicked=function(t){this.onBubbleDoubleClickedEvent.emit(t)};t.prototype.onBubbleDoubleClicked=function(t){return this.onBubbleDoubleClickedEvent.add(t)};t.prototype.linksSelected=function(t){this.onLinksSelectedEvent.emit(t)};t.prototype.onLinksSelected=function(t){return this.onLinksSelectedEvent.add(t)};t.prototype.selectionCleared=function(){this.onSelectionClearedEvent.emit()};t.prototype.onSelectionCleared=function(t){return this.onSelectionClearedEvent.add(t)};t.prototype.bubblesHover=function(t){this.onBubblesHoverEvent.emit(t)};t.prototype.onBubblesHover=function(t){return this.onBubblesHoverEvent.add(t)};t.prototype.recommendationJoined=function(t){this.onRecommendationJoinedEvent.emit(t)};t.prototype.onRecommendationJoined=function(t){return this.onRecommendationJoinedEvent.add(t)};t.prototype.bubblesJoined=function(t){return this.onBubblesJoinedEvent.emit(t)};t.prototype.onBubblesJoined=function(t){return this.onBubblesJoinedEvent.add(t)};t.prototype.bubblesSplit=function(t){this.onBubblesSplitEvent.emit(t)};t.prototype.onBubblesSplit=function(t){return this.onBubblesSplitEvent.add(t)};t.prototype.autoAssociateBubbles=function(){this.onAutoAssociateBubblesAction.emit()};t.prototype.onAutoAssociateBubbles=function(t){return this.onAutoAssociateBubblesAction.add(t)};t.prototype.launchAddData=function(){this.onLaunchAddDataAction.emit()};t.prototype.onLaunchAddData=function(t){return this.onLaunchAddDataAction.add(t)};t.prototype.modelReloaded=function(){this.onModelReloadedAction.emit()};t.prototype.onModelReloaded=function(t){return this.onModelReloadedAction.add(t)};t.prototype.bubblesStateUpdated=function(t){this.onBubblesStateUpdatedEvent.emit(t)};t.prototype.onBubblesStateUpdated=function(t){return this.onBubblesStateUpdatedEvent.add(t)};return t}();e.default=s}.apply(e,i),void 0!==o&&(t.exports=o))},2431:function(t,e,n){var i,o;!(i=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(){this.handlers=[]}t.prototype.add=function(t){var e=this;this.handlers.indexOf(t)<0&&this.handlers.push(t);return{remove:function(){e.remove(t)}}};t.prototype.remove=function(t){var e=this.handlers.indexOf(t);e>=0&&this.handlers.splice(e,1)};t.prototype.removeAll=function(){this.handlers=[]};t.prototype.emit=function(){this.handlers.forEach(function(t){t()})};return t}();e.default=n}.apply(e,i),void 0!==o&&(t.exports=o))},2432:function(t,e,n){var i,o;!(i=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(){}t.prototype.add=function(t){var e=this;this.handler=t;return{remove:function(){e.handler=void 0}}};t.prototype.emit=function(t){return this.handler?this.handler(t):void 0};return t}();e.default=n}.apply(e,i),void 0!==o&&(t.exports=o))},2433:function(t,e,n){var i,o;!(i=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(){}t.prototype.add=function(t){var e=this;this.handler=t;return{remove:function(){e.handler=void 0}}};t.prototype.emit=function(){return this.handler?this.handler():void 0};return t}();e.default=n}.apply(e,i),void 0!==o&&(t.exports=o))},2434:function(t,e,n){var i,o;!(i=[n,e,n(234),n(2435),n(1796),n(2436),n(2439),n(1331),n(2440),n(1682)],o=function(t,e,n,i,o,r,s,a,u,l){"use strict";Object.defineProperty(e,"__esModule",{value:true});var c=function(){function t(t,e,n,o,r){this._el=t;this.visualizationOptions=e;this.bubblesEvents=n;this.params=o;this.debugEnabled=r;this._draggingNode=null;this.visualizationOptionsModifier=1;this.isFirstLoad=true;this.centerOnEnd=false;this._readOnly=false;this._stopPointIncrements=[3,3,3];this.chargeModifiers={1:1,.9:.83,.8:.67,.7:.5,.6:.33,.5:.25,.4:.2};this.bubblePlacementService=new s.default(e);this.init();this._lod=new i.default(e);this._lod.setLODFPSStopPoints([5,3,2])}t.prototype.destroy=function(){n.select(window).on("resize",null);this._renderer.destroy()};t.prototype.startForceLayout=function(){this._force.start()};t.prototype.onReadOnlyStateChanged=function(t){this._readOnly=t;this._renderer.enableDrag(!t)};t.prototype.isReadOnly=function(){return this._readOnly};t.prototype.renderTables=function(t,e){var n=this;void 0===t&&(t=null);void 0===e&&(e=null);if(t){e&&this.bubblePlacementService.setBubblesState(e.bubblesState);var i=new u.default(this.bubblePlacementService);this._data=i.reconcileData(this._data,t);this.updateVisualizationOptionsModifier()}this._graphStats=this.bubblePlacementService.getGraphStats(this._data.bubbles,this._data.links);this._force.nodes(this._data.bubbles);this._force.links(this.getForceLinks());this._renderer.buildSceneGraph();this._renderer.enableDrag(!this._readOnly);this.startForceLayout();if(this.isFirstLoad){this.centerOnEnd=true;for(var o=0;o<10;o++)this._force.tick();this._force.on("tick",function(){n.tick()});this.isFirstLoad=false}e&&e.bubblesSelectionState&&this.selectionUpdated(e.bubblesSelectionState.selected);(this._renderer.getSelectedLinks().some(function(t){return n._data.links.indexOf(t)<0})||this._renderer.getSelectedBubble()&&this._data.bubbles.indexOf(this._renderer.getSelectedBubble())<0)&&this._renderer.clearSelection(true)};t.prototype.zoomToFit=function(){var t=this.bubblePlacementService.getZoomToFitPosition(this._data.bubbles);this.zoom(t)};t.prototype.zoomIn=function(){var t=this.bubblePlacementService.getZoomPosition({scale:this._zoom.scale(),position:this._zoom.translate()},1);this.zoom(t)};t.prototype.zoomOut=function(){var t=this.bubblePlacementService.getZoomPosition({scale:this._zoom.scale(),position:this._zoom.translate()},-1);this.zoom(t)};t.prototype.canZoomIn=function(){return this._zoom.scale()<this.bubblePlacementService.maxZoomLevel};t.prototype.canZoomOut=function(){return this._zoom.scale()>this.bubblePlacementService.minZoomLevel};t.prototype.getBubblesState=function(){return this.bubblePlacementService.updateBubblesState(this._data.bubbles)};t.prototype.selectionUpdated=function(t){var e=this;if(t&&t.selectedObjects&&t.selectedObjects.length>0){var n=t.selectedObjects.filter(function(t){return t.type===l.SelectedObjectType.LINK});if(n.length>0){var i=[];n.forEach(function(t){if(t.objects&&t.objects.length>1){var n=e.getBubbleById(e.getBubbleIdFromSelectedObject(t.objects[0]));var o=e.getBubbleById(e.getBubbleIdFromSelectedObject(t.objects[1]));var r=e.findLink(n,o);if(r)i.push(r);else{var s=e._data.links.filter(function(t){return t.isAssociation()&&t.isHubLink()});var a=s.filter(function(t){return t.getTableBubble()===n});var u=s.filter(function(t){return t.getTableBubble()===o});a.some(function(t){return u.some(function(e){if(e.getHubBubble()===t.getHubBubble()){i.push(t);i.push(e);return true}return false})})}}return});this._renderer.setSelectedLinks(i);return}var o=t.selectedObjects.filter(function(t){return t.type===l.SelectedObjectType.TABLE||t.type===l.SelectedObjectType.HUB});if(o.length>0){var r=o.map(function(t){return e.getBubbleById(e.getBubbleIdFromSelectedObject(t))}).filter(function(t){return t});this._renderer.setSelectedBubbles(r);return}}this._renderer.clearSelection(false)};t.prototype.getBubbleIdFromSelectedObject=function(t){if(t.type===l.SelectedObjectType.TABLE)return t.tableModel.data.id;if(t.type===l.SelectedObjectType.HUB)return t.id;return};t.prototype.init=function(){var t=this;this._force=n.layout.force().charge(function(e){return t.getBubbleCharge(e)}).chargeDistance(10*+this.visualizationOptions.recommendationDistance).gravity(this.visualizationOptions.gravity).friction(this.visualizationOptions.friction).theta(this.visualizationOptions.theta).linkDistance(function(e){return t.getLinkDistance(e,t._draggingNode)}).linkStrength(function(e){return t.getLinkStrength(e)}).on("end",function(){t.tick(true);t._renderer.animationEnd();t.restoreLOD();t._lod.reset();t.bubblesEvents.bubblesStateUpdated(t.getBubblesState())}).on("start",function(){t._renderer.animationStart()});this.visualizationOptions.onOptionChange(function(e){t._renderer.setLOD(t._lod.getLOD());t._force.gravity(t.visualizationOptions.gravity).friction(t.visualizationOptions.friction).theta(t.visualizationOptions.theta);t.updateVisualizationOptionsModifier();t.renderTables();t._force.start()});this._force.drag().on("dragstart",function(e){t.nodeDragStart(e)}).on("drag",function(e){t.nodeDrag(e)}).on("dragend",function(e){t.nodeDragEnd(e)});this._zoom=n.behavior.zoom().scaleExtent([this.bubblePlacementService.minZoomLevel,this.bubblePlacementService.maxZoomLevel]).on("zoom",function(){t.clickEvent&&(t.clickEvent.zoomed=true);t._renderer.applyD3ZoomEvent()});this._data=new l.BubbleDataModel;this._force.nodes(this._data.bubbles);this._force.links(this.getForceLinks());this._renderer=new r.default(this._force,this._data,"",this.visualizationOptions,this,this.params);this._renderer.init(this._el);this._renderer.getRoot().on("mousedown",function(){t.clickEvent={}}).on("mouseup",function(){t.clickEvent&&!t.clickEvent.zoomed&&t._renderer.clearSelection(true);t.clickEvent=null}).call(this._zoom);n.select(window).on("resize",function(){t.updateCanvasSize();t.updateVisualizationOptionsModifier()&&t._renderer.refreshNodeSizes();t._force.start();t.centerOnEnd=true});this.bubblesEvents.onResize(function(){t.updateCanvasSize();t.updateVisualizationOptionsModifier()&&t._renderer.refreshNodeSizes();t._force.start();t.centerOnEnd=true});this.updateCanvasSize()};t.prototype.updateCanvasSize=function(){this.bubblePlacementService.updateContainerDimensions(this._el.clientWidth,this._el.clientHeight);this._renderer.updateSize(this.bubblePlacementService.containerWidth,this.bubblePlacementService.containerHeight);this._force.size([this.bubblePlacementService.containerWidth,this.bubblePlacementService.containerHeight])};t.prototype.zoom=function(t){this._zoom.scale(t.scale);this._zoom.translate(t.position);this._renderer.applyD3Zoom(this._zoom)};t.prototype.updateVisualizationOptionsModifier=function(){var t=this.bubblePlacementService.getBubblePlacementScore(this._data.bubbles);this.bubblePlacementService.updateBubbleSizes(this._data.bubbles,t);this.shouldStartDragging(this._draggingNode)&&this._renderer.bubbleDragStart(this._draggingNode);var e=this.visualizationOptionsModifier;this.visualizationOptionsModifier=t;return e!==t};t.prototype.shouldStartDragging=function(t){return t&&!isNaN(t.px)&&!isNaN(t.py)};t.prototype.restoreLOD=function(){this.visualizationOptions.enableRestoreOnEnd===a.default.ENABLE&&this._lod.getLOD()!==o.default.LOD_HIGH&&this.visualizationOptions.enableAlwaysFast!==a.default.ENABLE&&(this._graphStats.large||this._renderer.setLOD(o.default.LOD_HIGH))};t.prototype.tick=function(t){var e=this._lod.tick();if(this.visualizationOptions.enableAlwaysFast===a.default.ENABLE&&this._lod.getLOD()!==o.default.LOD_FASTEST){this._lod.setLOD(o.default.LOD_FASTEST);this._renderer.setLOD(o.default.LOD_FASTEST)}else if(this.visualizationOptions.enableLOD===a.default.ENABLE)if(e.stopPointCount[2]>this._stopPointIncrements[2]&&e.lod<o.default.LOD_FASTEST){this._lod.setLOD(o.default.LOD_FASTEST);this._renderer.setLOD(o.default.LOD_FASTEST)}else if(e.stopPointCount[1]>this._stopPointIncrements[1]&&e.lod<o.default.LOD_MEDIUM){this._lod.setLOD(o.default.LOD_LOW);this._renderer.setLOD(o.default.LOD_LOW)}else if(e.stopPointCount[0]>this._stopPointIncrements[0]&&e.lod===o.default.LOD_HIGH){this._lod.setLOD(o.default.LOD_MEDIUM);this._renderer.setLOD(o.default.LOD_MEDIUM)}if(e.dropFrame&&!t)return;this._renderer.updateLocations();if(this.centerOnEnd&&this._force.alpha()<.07){this.centerOnEnd=false;this.zoomToFit()}};t.prototype.getBubbleCharge=function(t){var e=1;(t.isHub()||t===this._draggingNode)&&(e=2);return this.visualizationOptions.charge*this.chargeModifiers[this.visualizationOptionsModifier]*e};t.prototype.getLinkDistance=function(t,e){var n=t.source.r+t.target.r;var i=t.isRecommendation()?this.visualizationOptions.recommendationDistance:this.visualizationOptions.linkDistance;this.useSimpleLines()&&(i=2.5*+i);n+=+i;t.isRecommendation()?t.source!==e&&t.target!==e||(n-=10):t.isHubLink()&&(n*=.7);return n};t.prototype.getLinkStrength=function(t){return t.isRecommendation()?+this.visualizationOptions.recommendationStrength*this.chargeModifiers[this.visualizationOptionsModifier]:+this.visualizationOptions.linkStrength};t.prototype.getBubbleById=function(t){var e=void 0;this._data.bubbles.some(function(n){if(n.id===t){e=n;return true}return false});return e};t.prototype.findLink=function(t,e,n){void 0===n&&(n=false);var i=null;this._data.links.some(function(o){if(n===o.isRecommendation()&&(o.source===t&&o.target===e||o.target===t&&o.source===e)){i=o;return true}return false});return i};t.prototype.findAssociation=function(t,e){return this.findLink(t,e,false)};t.prototype.haveAssociation=function(t,e){var n=this;if(null!==this.findAssociation(t,e))return true;return this._data.links.filter(function(e){return!e.isRecommendation()&&e.source===t&&e.target.isHub()}).map(function(t){return t.target}).some(function(t){return null!==n.findAssociation(e,t)})};t.prototype.findRecommendation=function(t,e){return this.findLink(t,e,true)};t.prototype.selectionCleared=function(){this.bubblesEvents.selectionCleared()};t.prototype.linksSelected=function(t){this.bubblesEvents.linksSelected(t)};t.prototype.bubbleSelected=function(t){this.bubblesEvents.bubbleSelected(t)};t.prototype.bubbleDoubleClicked=function(t){this.bubblesEvents.bubbleDoubleClicked(t)};t.prototype.useSimpleLines=function(){if(this.visualizationOptions.simpleLines===a.default.OFF)return false;if(this.visualizationOptions.simpleLines===a.default.ALWAYS)return true;if(this._graphStats.large){if(this._graphStats.maxLinksPerNode>5||this._graphStats.bubbleCoverage>.2)return true}else if(this._graphStats.maxLinksPerNode>10)return true;return false};t.prototype.getAllConnectedNodes=function(t){var e=[];var n=[];var i=this._data.links.filter(function(t){return!t.isRecommendation()});n.push(t);while(n.length>0){var o=n.pop();-1===e.indexOf(o)&&e.push(o);i.forEach(function(t){var i=null;t.source===o?i=t.target:t.target===o&&(i=t.source);i&&-1===e.indexOf(i)&&-1===n.indexOf(i)&&n.push(i)})}return e};t.prototype.getForceLinks=function(){var t=this;var e=this._data.links.filter(function(t){return!t.isRecommendation()});return this._data.links.filter(function(n){return!n.isRecommendation()||!t.areConnectedNodes(n.source,n.target,e)})};t.prototype.areConnectedNodes=function(t,e,n){if(t===e)return true;var i=[];var o=[];i.push(t);while(i.length>0){var r=i.pop();-1===o.indexOf(r)&&o.push(r);var s=n.some(function(t){var n=null;t.source===r?n=t.target:t.target===r&&(n=t.source);if(n===e)return true;n&&-1===o.indexOf(n)&&-1===i.indexOf(n)&&i.push(n);return false});if(s)return true}return false};t.prototype.updateLinkLengths=function(t){var e=this._renderer.getLinks(t);for(var n=0;n<e.length;n++)e[n].setInitialLength(e[n].getCurrentLength())};t.prototype.refreshLinks=function(){this._force.links(this.getForceLinks());this._renderer.buildLinks()};t.prototype.nodeDragStart=function(t){var e=this;if(this._draggingNode)return;this._lod.setDragging(true);this.updateLinkLengths(t);this._force.friction(this.visualizationOptions.friction/1.5);t._dragged=true;this._draggingNode=t;if(t instanceof l.AssociationLink){[t.source,t.target].forEach(function(t){t.fixed=true});return}var n=false;var i=this.getAllConnectedNodes(t);this._data.bubbles.forEach(function(o){if(o!==t){n=e.bubblePlacementService.pushTargetAwayIfOverlap(t,o)||n;i.indexOf(o)<0&&(o.fixed=true);var r=e.findRecommendation(t,o);o.linkScore=r?r.recommendation.score.value:0;o.linkStatus=r?r.linkStatus:l.LinkStatus.Bad}});this._renderer.bubbleDragStart(t);n&&this.startForceLayout()};t.prototype.nodeDrag=function(t){var e=this;if(this._draggingNode!==t){t.px=t.x;t.py=t.y;return}if(t instanceof l.AssociationLink){var i=n.event.dx;var o=n.event.dy;[t.source,t.target].forEach(function(t){t.x+=i;t.y+=o;t.px=t.x;t.py=t.y});return}if(t.isHub()||!t.isInteractive())return;this._data.bubbles.forEach(function(t){delete t.linkProximity});var r=this.bubblePlacementService.getNearestOverlappingNode(this._data.bubbles,t,function(n){return!n.isHub()&&n.isInteractive()&&!e.haveAssociation(t,n)});r&&(r.linkProximity=true);this._renderer.nodeDrag();var s=this._renderer.getBrokenRefs(t);if(s.length>0){s.forEach(function(n){var i=e.findAssociation(t,n);if(!i.isPreview()){e._data.links.splice(e._data.links.indexOf(i),1);e.bubblesEvents.bubblesSplit([t,n])}});var a=this.getAllConnectedNodes(t);this._data.bubbles.forEach(function(t){a.indexOf(t)<0&&(t.fixed=true)});this.refreshLinks();this.startForceLayout()}};t.prototype.nodeDragEnd=function(t){var e=this;if(this._draggingNode!==t)return;this._lod.setDragging(false);this._force.friction(this.visualizationOptions.friction);if(t instanceof l.AssociationLink){t._dragged=false;this._draggingNode=null;[t.source,t.target].forEach(function(t){t.fixed=false});return}t._dragged=false;if(!t.isHub()&&t.isInteractive()){var n=this.bubblePlacementService.getNearestOverlappingNode(this._data.bubbles,t,function(n){return!n.isHub()&&n.isInteractive()&&!e.haveAssociation(t,n)});if(n){var i=t,o=n;var r=new l.AssociationLink({source:i,target:o});this._data.links.push(r);var s=this.findRecommendation(i,o);if(s){r.linkStatus=s.linkStatus;this.bubblesEvents.recommendationJoined(s)}else{r.linkStatus=l.LinkStatus.Bad;this.bubblesEvents.bubblesJoined([i,o]).then(function(t){if(!t){var n=e._data.links.indexOf(r);if(n>=0){e._data.links.splice(n,1);e._renderer.clearSelection(true);e.refreshLinks();e.startForceLayout()}}})}this.refreshLinks();this.startForceLayout();this._renderer.selectLink(r)}}this._draggingNode=null;this._data.bubbles.forEach(function(e){delete e.linkScore;delete e.linkStatus;delete e.linkProximity;e!==t&&(e.fixed=false)});this._renderer.bubbleDragEnd()};return t}();e.default=c}.apply(e,i),void 0!==o&&(t.exports=o))},2435:function(t,e,n){var i,o;!(i=[n,e,n(1331)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});var i=function(){function t(t){this._forceRendersThreshold=50;this._dragging=false;this._visualizationOptions=t;t.onOptionChange(this.visOptionsChange.bind(this));this.updateFromVisOptions();this.resetImpl();this._stopPoints=new Array(0);this._fpsStopPoints=new Array(0)}t.prototype.visOptionsChange=function(){this.updateFromVisOptions()};t.prototype.setDragging=function(t){this._dragging=t};t.prototype.setLODStopPoints=function(t){this._stopPoints=t;this._stopPointCounts=new Array(this._stopPoints.length);for(var e=0;e<this._stopPointCounts.length;e++)this._stopPointCounts[e]=0};t.prototype.setLODFPSStopPoints=function(t){this._fpsStopPoints=t;this._fpsStopPointCounts=new Array(this._fpsStopPoints.length);for(var e=0;e<this._fpsStopPointCounts.length;e++)this._fpsStopPointCounts[e]=0};t.prototype.updateFromVisOptions=function(){this._targetFPS=this._visualizationOptions.fps;var t=this._visualizationOptions.animationLogLevel;this._verbose=t;this._timePerFrame=1e3/this._targetFPS};t.prototype.setLOD=function(t){this._lod=t;this._framesSinceLast=0};t.prototype.getLOD=function(){return this._lod};t.prototype._adjustForFPS=function(t){return t*(this._targetFPS/25)};t.prototype.reset=function(){var t=(new Date).getTime()-this._layoutStartTime;var e=this._droppedFrames/this._currentFrame;this._verbose>0&&console.log("Percent dropped: "+e+" Total dropped: "+this._droppedFrames+" Total frames: "+this._currentFrame+"Stop points: "+this._fpsStopPointCounts+" Time: "+t+" Actual fps: "+this._fps);this.resetImpl()};t.prototype.resetImpl=function(){this._layoutStartTime=-1;this._lod=0;this._framesSinceLast=0;this._renderedLastFrame=false;this._forceRedrawLimit=5;this._droppedFrames=0;this._dropsInARow=0};t.prototype.renderedLastFrame=function(){return this._renderedLastFrame};t.prototype.checkStopPoints=function(t){for(var e=0;e<this._stopPoints.length;e++){var n=this._stopPoints[e];t<this._adjustForFPS(n)&&(this._stopPointCounts[e]=this._stopPointCounts[e]+1)}};t.prototype.checkFPSStopPoints=function(t){for(var e=0;e<this._fpsStopPoints.length;e++){var n=this._fpsStopPoints[e];t<n&&(this._fpsStopPointCounts[e]=this._fpsStopPointCounts[e]+1)}};t.prototype.canDropFrame=function(t){if(!this._dragging)return true;if(t>2)return false};t.prototype.tick=function(){var t=Date.now();this._framesSinceLast++;var e=false;if(-1===this._layoutStartTime){this._layoutStartTime=Date.now();this._droppedFrames=0;this._currentFrame=0;this._dropsInARow=0;this.setLODStopPoints(this._stopPoints);this.setLODFPSStopPoints(this._fpsStopPoints)}var i=this._layoutStartTime+(this._currentFrame+1)*this._timePerFrame;var o=i-t;var r=(t-this._layoutStartTime)/1e3;this._fps=(this._currentFrame-this._droppedFrames)/r;this._currentFrame++;var s=0;if(o<0&&this._visualizationOptions.enableDropFrames===n.default.ENABLE&&0!==this._currentFrame){var a=true;if(this._dropsInARow>this._forceRedrawLimit&&this._currentFrame<this._forceRendersThreshold&&0!==this._lod){this._forceRedrawLimit+=5;a=false}if(a&&this.canDropFrame(this._dropsInARow)){this._dropsInARow++;this._droppedFrames++;e=true}}s=this._droppedFrames/this._currentFrame;e||(this._renderedLastFrame=true);e||(this._dropsInARow=0);this.checkFPSStopPoints(this._fps);this.checkStopPoints(o);this._verbose>2?console.log("FPS: "+this._fps+" %dropped"+s+" Time behind: "+o+" Drops in a row: "+this._dropsInARow+" Frame dropped: "+e+" Check stops: "+this._fpsStopPointCounts):this._verbose>1&&console.log("DF:"+this._droppedFrames+" FPS"+this._fps);return{dropFrame:e,pecentDropped:s,lod:this._lod,droppedFrames:this._droppedFrames,stopPointCount:this._fpsStopPointCounts,framesSinceLastLOD:this._framesSinceLast}};return t}();e.default=i}.apply(e,i),void 0!==o&&(t.exports=o))},2436:function(t,e,n){var i,o;var r=this&&this.__extends||function(){var t=function(e,n){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!(i=[n,e,n(1796),n(1331),n(2437),n(234),n(1682),n(2438)],o=function(t,e,n,i,o,s,a,u){"use strict";Object.defineProperty(e,"__esModule",{value:true});var l=function(t){r(e,t);function e(e,n,i,o,r,s){var a=t.call(this,e,n,i,o,r)||this;a.params=s;a._simpleLines=void 0;a._selectedBubbles=[];a._selectedLinks=[];return a}e.prototype.destroy=function(){this._svg.remove()};e.prototype.updateSize=function(t,e){this._svg.attr("width",t).attr("height",e)};e.prototype.init=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width","407");e.setAttribute("height","577");t.appendChild(e);this._svg=s.select(t).select("svg");this._svg.attr("tid","bubble-graph-render");var n=(new DOMParser).parseFromString(u,"image/svg+xml");var i=e.ownerDocument.importNode(n.documentElement,true);e.appendChild(i);this._rootContainer=this._svg.append("g");this._rootContainer.attr("transform","translate(0, 0)");this._layerLinks=this._rootContainer.append("g");this._layerTables=this._rootContainer.append("g");this._nodes=this._layerTables.selectAll(".node");this._links=this._layerLinks.selectAll(".link")};e.prototype.getRoot=function(){return this._svg};e.prototype.buildSceneGraph=function(){this._simpleLines=this._graphProvider.useSimpleLines();this.renderNodes();this.initNodes();this.buildLinks();if(this._nodes.node()){var t=this._nodes.property("__onmousedown.drag");t&&t["_"]&&(this._d3DragHandler=t["_"])}};e.prototype.enableDrag=function(t){t?this._d3DragHandler&&this._nodes.on("mousedown.drag",this._d3DragHandler):this._nodes.on("mousedown.drag",null)};e.prototype.getBrokenRefs=function(t){var n=this;var i;if("line"===this._currentLineRepresentation){i=[];var r=this.getLinks(t);for(var s=0;s<r.length;s++){var a=r[s];a.getCurrentLength()>a.getInitialLength()*e.SIMPLE_LINE_TEAR_FACTOR&&i.push(a.source===t?a.target:a.source)}}else i=this.getLinkedNodes(t).filter(function(e){return!o.isConnectedMetaBall(t,e,+n._visOptions.linkRFactor,n.getCFactor(t.r,e.r))});return i};e.prototype.updateLocations=function(){var t=10;this.updateNodeLocations(t);this.updateLinkLocations(t)};e.prototype.refreshNodeSizes=function(){this.updateNodeSizes();this.updateGooEndPoints();this.updateLocations()};e.prototype.applyD3ZoomEvent=function(){this._rootContainer.attr("transform","translate("+s.event.translate+")scale("+s.event.scale+")")};e.prototype.applyD3Zoom=function(t){this._rootContainer.transition().ease("cubic-out").duration(500).attr("transform","translate("+t.translate()+")scale("+t.scale()+")")};e.prototype.getSelectedBubble=function(){return this._selectedBubbles.length>0?this._selectedBubbles[0]:void 0};e.prototype.getSelectedLinks=function(){return this._selectedLinks};e.prototype.setLOD=function(t){if(t===n.default.LOD_FASTEST){this.setCircleFillStrategy({method:"solid"});this.setDropShadowStrategy({method:"none"});this.setJoinDrawStrategy({method:"lines"})}else if(t===n.default.LOD_MEDIUM){this.setDropShadowStrategy({method:"none"});this.setCircleFillStrategy({method:"solid"})}else if(t===n.default.LOD_LOW)this.setCircleFillStrategy({method:"solid"});else if(t===n.default.LOD_HIGH){this.setDropShadowStrategy({});this.setCircleFillStrategy({});this.setJoinDrawStrategy({})}};e.prototype.canDrawLines=function(t){if(this._visOptions.simpleLines===i.default.OFF)return false;if(this._visOptions.simpleLines===i.default.ENABLE)return true;if(t&&this._visOptions.simpleLines===i.default.ENABLE)return true;if(this._visOptions.simpleLines===i.default.ALWAYS)return true;return false};e.prototype.animationEnd=function(){this._animating=false;this.updateRenderInfo()};e.prototype.animationStart=function(){this._animating=true;this.updateRenderInfo()};e.prototype.setJoinDrawStrategy=function(t){("lines"===t.method||this._graphProvider.useSimpleLines())&&this.canDrawLines(this._animating)?this._simpleLines=true:this._simpleLines=false;this.isLinkRepresentationCorrect()||this.rebuildLinks();this.updateRenderInfo()};e.prototype.updateRenderInfo=function(){var t="notdone";this._animating||(t=this._simpleLines?"animationdone":"done");this._svg.attr("state",t)};e.prototype.setDropShadowStrategy=function(t){var e=this;if("none"!==t.method&&this.params.enableSVGFilters){this._nodes.select(".bubble").style("filter",function(t){return t.isInteractive()?"url("+e.buildFilterURL("#bubble-drop-shadow")+")":null});this._links.select(".hub").style("filter","url("+this.buildFilterURL("#bubble-drop-shadow")+")")}else{this._nodes.select(".bubble").style("filter",null);this._links.select(".hub").style("filter",null)}};e.prototype.buildFilterURL=function(t){return window.location.toString()+t};e.prototype.setCircleFillStrategy=function(t){var e=this;if("solid"!==t.method&&this.params.enableSVGFilters){this._nodes.select(".bubble").attr("fill",null).style("fill",function(t){return t.isInteractive()||t.isScript()?"url("+e.buildFilterURL("#bubble-fill")+")":null}).attr("stroke",null).attr("stroke-width",null);this._links.select(".hub").style("fill","url("+this.buildFilterURL("#bubble-fill")+")")}else{this._nodes.select(".bubble").attr("fill",function(t){return"#FFFFFF"}).style("fill",null).attr("stroke",function(t){return"#e0e0e0"}).attr("stroke-width",function(t){return"3"});this._links.select(".hub").style("fill",null)}};e.prototype.updateNodeLocations=function(t){var e=this;this.updateAttribute(this._nodes,"transform",function(n){return"translate("+e.roundWithPrecision(n.x,t)+", "+e.roundWithPrecision(n.y,t)+")"})};e.prototype.updateLinkLocations=function(t){var e=this;if(this._simpleLines){this.updateAttribute(this._links.select("line"),"x1",function(t){return Math.floor(t.source.x)});this.updateAttribute(this._links.select("line"),"y1",function(t){return Math.floor(t.source.y)});this.updateAttribute(this._links.select("line"),"x2",function(t){return Math.floor(t.target.x)});this.updateAttribute(this._links.select("line"),"y2",function(t){return Math.floor(t.target.y)})}else{this.updateGooEndPoints();this.updateAttribute(this._links.select(".path"),"d",function(n){return o.getMetaBallConnectorPath({x:e.roundWithPrecision(n.source.x,t),y:e.roundWithPrecision(n.source.y,t),r:n.source.r+5},{x:e.roundWithPrecision(n.target.x,t),y:e.roundWithPrecision(n.target.y,t),r:n.target.r+(n.target.isHub()?10:5)},+e._visOptions.linkRFactor,e.getCFactor(n.source.r,n.target.r))})}this.updateAttribute(this._links.select(".hubGroup"),"transform",function(n){var i=e.findNearPointOnBubbleEdge(n.source,n.target);var o=e.findNearPointOnBubbleEdge(n.target,n.source);var r=(i.x+o.x)/2;var s=(i.y+o.y)/2;return"translate("+e.roundWithPrecision(r,t)+", "+e.roundWithPrecision(s,t)+")"});this.updateAttribute(this._links.select("circle.source"),"transform",function(n){return"translate("+e.roundWithPrecision(n.source.x,t)+", "+e.roundWithPrecision(n.source.y,t)+")"});this.updateAttribute(this._links.select("circle.target"),"transform",function(n){return"translate("+e.roundWithPrecision(n.target.x,t)+", "+e.roundWithPrecision(n.target.y,t)+")"});if(this._graphProvider.debugEnabled){var n=this._layerLinks.selectAll(".link-debug");this.updateAttribute(n,"x1",function(t){return t.source.x});this.updateAttribute(n,"y1",function(t){return t.source.y});this.updateAttribute(n,"x2",function(t){return t.target.x});this.updateAttribute(n,"y2",function(t){return t.target.y})}};e.prototype.roundWithPrecision=function(t,e){return Math.round(t*e)/e};e.prototype.findNearPointOnBubbleEdge=function(t,e){var n=e.x-t.x;var i=e.y-t.y;var o=Math.sqrt(n*n+i*i);return{x:t.x+n/o*t.r,y:t.y+i/o*t.r}};e.prototype.updateAttribute=function(t,e,n){t.each(function(t,i){var o=n.call(this,t,i);o!==this.getAttribute(e)&&this.setAttribute(e,o)})};e.prototype.renderNodes=function(){var t=this;var e=this._nodes.data(this._data.bubbles,function(t){return t.id});var n=e.enter().append("svg:g").classed("node",true).classed("draggable",true).classed("table",function(t){return t.isTable()}).classed("hub",function(t){return t.isHub()}).classed("new",true).attr("tid",function(t){if(t.isHub())return"hub-"+t.name;return"bubble-"+t.name}).on("mousedown",function(e){s.event.stopPropagation();s.event.preventDefault();t.selectBubble(e)}).on("touchstart",function(){s.event.stopPropagation()}).on("dblclick",function(e){s.event.stopPropagation();s.event.preventDefault();t.doubleClickOnBubble(e)}).call(this._force.drag());n.attr("opacity","0.3");n.transition().ease("cubic").duration(500).attr("opacity","1.0");n.append("svg:circle").classed("selected-bubble",true);n.append("svg:circle").classed("bubble",true).classed("bubble-expand",true);var i=this._layerTables.selectAll(".new.table");var o=this._layerTables.selectAll(".new.hub");i.classed("new",false);o.classed("new",false);i.append("svg:path").classed("linkScore",true);i.append("svg:path").classed("linkProximity",true);i.append("svg:text").classed("label",true).attr("y",5).attr("text-anchor","middle");o.append("svg:circle").classed("hubCenter",true).attr("r",5);e.exit().remove();this._nodes=this._layerTables.selectAll(".node")};e.prototype.updateNodeSizes=function(){var t=this;this._nodes.select(".bubble").attr("r",function(t){return t.r});this._nodes.select(".bubble-expand").transition().ease("cubic").duration(500).attr("r",function(t){return 1.2*t.r}).each("end",function(){s.select(this).transition().ease("cubic").duration(200).attr("r",function(t){return t.r}).each("end",function(){s.select(this).classed("bubble-expand",false)})});this._nodes.select(".icon").attr("y",function(e){return t.getIconOffset(e.r)}).style("font-size",function(e){return t.getIconSize(e.r)});this._nodes.select(".selected-bubble").attr("r",function(t){return t.r+(t.isHub()?10:5)});this._nodes.select(".linkProximity").attr("d",function(e){return t.determineScoreArc(1,e.r)})};e.prototype.initNodes=function(){var t=this;this._nodes=this._layerTables.selectAll(".node");this._nodes.classed("disabled",function(t){return!t.isEnabled()}).classed("scripted",function(t){return t.isScript()}).classed("hasIcon",function(t){return t.hasIcon()}).classed("noIcon",function(t){return!t.hasIcon()&&!t.hasJoinSvgIcon()}).classed("hasJoinSvgIcon",function(t){return t.hasJoinSvgIcon()});this.params.enableSVGFilters&&this._nodes.select(".bubble").style("filter",function(e){return e.isInteractive()?"url("+t.buildFilterURL("#bubble-drop-shadow")+")":null}).style("fill",function(e){return e.isInteractive()||e.isScript()?"url("+t.buildFilterURL("#bubble-fill")+")":null});this._nodes.select(".label").text(function(t){var e=t.isHub()?"":t.name;t.hasPendingChanges()&&(e+="*");return e});var e=this._layerTables.selectAll(".noIcon");e.classed("noIcon",false);e.select(".icon").remove();var n=this._layerTables.selectAll(".hasIcon");n.classed("hasIcon",false);n.select(".icon").remove();n.append("svg:text").attr("y",-18).attr("text-anchor","middle").classed("icon",true).classed("bubbles-font",function(t){return"A"===t.getIcon()}).classed("lui-icon",true).text(function(t){return t.getIcon()});var i=this._layerTables.selectAll(".hasJoinSvgIcon");var o=i.append("g").attr("stroke","none").attr("stroke-width","1").attr("fill","none").attr("fill-rule","evenodd").classed("icon",true).append("g").attr("transform","translate(-8, -30)").attr("fill","#DBDBDB").attr("fill-rule","nonzero");o.append("path").attr("d","M7.08424251,0.453785913 C5.80794988,1.55407905 5,3.18268612 5,5 C5,6.81731388 5.80794988,8.44592095 7.08424251,9.54621409 C6.44979377,9.83755874 5.74386698,10 5,10 C2.23857625,10 0,7.76142375 0,5 C0,2.23857625 2.23857625,0 5,0 C5.74386698,0 6.44979377,0.162441256 7.08424251,0.453785913 Z");o.append("path").attr("d","M8.91575749,9.54621409 C10.1920501,8.44592095 11,6.81731388 11,5 C11,3.18268612 10.1920501,1.55407905 8.91575749,0.453785913 C9.55020623,0.162441256 10.256133,0 11,0 C13.7614237,0 16,2.23857625 16,5 C16,7.76142375 13.7614237,10 11,10 C10.256133,10 9.55020623,9.83755874 8.91575749,9.54621409 Z");o.append("path").attr("d","M8,0.999633813 C9.2144467,1.91184014 10,3.36418217 10,5 C10,6.63581783 9.2144467,8.08815986 8,9.00036619 C6.7855533,8.08815986 6,6.63581783 6,5 C6,3.36418217 6.7855533,1.91184014 8,0.999633813 Z");n.classed("hasJoinSvgIcon",false);this.updateNodeSizes()};e.prototype.bubbleDragStart=function(t){var e=this;this._nodes.select(".linkScore").attr("d",function(n){if(t===n)return"";return e.determineScoreArc(n.linkScore,n.r)});this._nodes.attr("opacity",function(e){return t!==e?1:.3}).classed("score",function(e){return t!==e}).classed("good",function(t){return t.linkStatus===a.LinkStatus.Good}).classed("medium",function(t){return t.linkStatus===a.LinkStatus.Medium}).classed("bad",function(t){return t.linkStatus===a.LinkStatus.Bad})};e.prototype.bubbleDragEnd=function(){this._nodes.attr("opacity",1).classed("score",false).classed("proximity",false).classed("good",false).classed("medium",false).classed("bad",false)};e.prototype.nodeDrag=function(){this._nodes.classed("proximity",function(t){return t.linkProximity})};e.prototype.clearLinkRendering=function(){this._links.data([]).exit().remove();this._links=this._layerLinks.selectAll(".link")};e.prototype.rebuildLinks=function(){this.buildLinks();this.initLinkPositions();this.updateLinkLocations(10)};e.prototype.isLinkRepresentationCorrect=function(){var t=true;(this._simpleLines&&"path"===this._currentLineRepresentation||!this._simpleLines&&"line"===this._currentLineRepresentation)&&(t=false);return t};e.prototype.buildLinks=function(){var t=this;this.isLinkRepresentationCorrect()||this.clearLinkRendering();this._simpleLines?this._currentLineRepresentation="line":this._currentLineRepresentation="path";var e=this._links.data(this._data.links.filter(function(t){return!t.isRecommendation()}),function(t){return t.id});var n=e.enter().append("svg:g").classed("link",true).classed("draggable",true).classed("tableLink",function(t){return!t.isHubLink()}).attr("tid",function(t){return"link-"+t.name}).on("mousedown",function(e){s.event.stopPropagation();s.event.preventDefault();t.selectLink(e)}).on("touchstart",function(){s.event.stopPropagation()}).call(this._force.drag());var i=n.append(this._simpleLines?"svg:line":"svg:path");this._simpleLines?i.classed("line",true):i.classed("path",true);n.append("svg:circle").classed("source",true);n.append("svg:circle").classed("target",true);var o=this._layerLinks.selectAll(".tableLink");o.classed("tableLink",false);var r=o.append("svg:g").classed("hubGroup",true);r.append("svg:circle").classed("hub",true).attr("r",12);this.params.enableSVGFilters&&r.style("filter","url("+this.buildFilterURL("#bubble-drop-shadow")+")").style("fill","url("+this.buildFilterURL("#bubble-fill")+")");r.append("svg:circle").classed("hubScore",true).attr("r",5);e.exit().remove();this.initLinkPositions();this._links=this._layerLinks.selectAll(".link");this._links.classed("preview",function(t){return t.isPreview()});if(this._graphProvider.debugEnabled){var a=this._layerLinks.selectAll(".link-debug").data(this._graphProvider.getForceLinks(),function(t){return t.id});a.enter().append("svg:line").classed("link-debug",true);a.exit().remove()}};e.prototype.updateGooEndPoints=function(){this._links.select(".source").attr("r",function(t){return t.source.r+5});this._links.select(".target").attr("r",function(t){return t.target.r+(t.target.isHub()?10:5)})};e.prototype.initLinkPositions=function(){this._links=this._layerLinks.selectAll(".link");this.updateGooEndPoints();this._links.filter(function(t){return!t.target.isHub()}).classed("good",function(t){return t.linkStatus===a.LinkStatus.Good}).classed("medium",function(t){return t.linkStatus===a.LinkStatus.Medium}).classed("bad",function(t){return t.linkStatus===a.LinkStatus.Bad})};e.prototype.determineScoreArc=function(t,e){var n=this.determineArcEndpoint(t),i=n-90,o=Math.PI*i/180,r=e-5,s=r*Math.cos(o),a=r*Math.sin(o),u=n>180?1:0,l=-r,c="M0, "+l+" A"+r+", "+r+" 0 "+u+", 1 "+s+", "+a;return c};e.prototype.determineArcEndpoint=function(t){var e=360*t;e=360===e?359.9999:e;return e};e.prototype.setSelectedBubbles=function(t){var e=this;this.clearSelection();t.forEach(function(t){e._selectedBubbles.push(t)});this._nodes.classed("selected",function(t){return-1!==e._selectedBubbles.indexOf(t)});this.bringBubbleToTop(".selected")};e.prototype.selectBubble=function(t){this._graphProvider.bubbleSelected(t)};e.prototype.doubleClickOnBubble=function(t){this._graphProvider.bubbleDoubleClicked(t)};e.prototype.bringBubbleToTop=function(t){var e=this._layerTables.select(t);if(e.size()>0){e.remove();this._layerTables.node().appendChild(e.node())}};e.prototype.clearSelection=function(t){void 0===t&&(t=false);this._selectedLinks=[];this._selectedBubbles.length=0;this._svg.selectAll(".selected").classed("selected",false);this._nodes.classed("primary",false);t&&this._graphProvider.selectionCleared()};e.prototype.setSelectedLinks=function(t){var e=this;this.clearSelection();this._selectedLinks=t;if(this._selectedLinks.length>0){this._links.classed("selected",function(t){return e._selectedLinks.indexOf(t)>=0});this.bringLinkToTop(".selected");var n=this._selectedLinks[0].isHubLink()?this._selectedLinks[0].getTableBubble():void 0;this._nodes.classed("primary",function(t){return t===n})}};e.prototype.selectLink=function(t){if(this._selectedLinks.indexOf(t)>=0&&2!==this._selectedLinks.length)return;var e=this._selectedLinks.slice();t.isHubLink()?2===e.length?e=e.indexOf(t)>=0?[t]:e[1].getHubBubble().name===t.getHubBubble().name?[e[1],t]:[t]:1===this._selectedLinks.length&&e[0].isHubLink()&&e[0].getHubBubble().name===t.getHubBubble().name?e.push(t):e=[t]:e=[t];e.length>0&&this._graphProvider.linksSelected(e)};e.prototype.selectLinks=function(t){var e=this._selectedLinks.slice();if(t.length===e.length&&t.every(function(t){return e.indexOf(t)>=0}))return;this._graphProvider.linksSelected(t)};e.prototype.bringLinkToTop=function(t){var e=this._layerLinks.select(t);if(e.size()>0){e.remove();this._layerLinks.node().appendChild(e.node())}};e.prototype.getCFactor=function(t,e){var n=this._visOptions.linkTearDistance;return Math.max(t,e)/(+n+Math.max(t,e))};e.prototype.getIconOffset=function(t){return-.345*t-.41};e.prototype.getIconSize=function(t){return.21*t+5.45};e.SIMPLE_LINE_TEAR_FACTOR=1.3;return e}(n.default);e.default=l}.apply(e,i),void 0!==o&&(t.exports=o))},2437:function(t,e,n){var i,o;!(i=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});function n(t){return{x:-t.y,y:t.x}}function i(t){return{x:t.y,y:-t.x}}function o(t,e){return{x:e.x-t.x,y:e.y-t.y}}var r=1.11e-16;function s(t){return Math.abs(t)<=r}function a(t){if(s(t))return 0;return t>0?1:-1}function u(t){var e=c(t);if(s(e))return{x:0,y:0};return{x:t.x/e,y:t.y/e}}function l(t,e){return{x:t.x*e,y:t.y*e}}function c(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function d(t,e){return{x:t.x+e.x,y:t.y+e.y}}function p(t,e,n,i){var o=i.x*i.x+i.y*i.y;var r=2*(i.x*(n.x-t.x)+i.y*(n.y-t.y));var s=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)-e*e;var a=f(o,r,s).filter(function(t){return t>0});if(a.length>0){var u=a.reduce(function(t,e){return Math.min(t,e)});return{x:n.x+i.x*u,y:n.y+i.y*u}}return null}function f(t,e,n){if(s(t)){if(s(e))return[];return[-n/e]}var i=e*e-4*t*n;if(i<0)return[];if(s(i))return[-e/(2*t)];return[(-e+Math.sqrt(i))/(2*t),(-e-Math.sqrt(i))/(2*t)]}function h(t,e,r,s,a){var f=u(o(t,e));var h,b,g,v,m,y,_;if(-1===a){h=d(t,l(i(f),t.r*r));b=d(e,l(i(f),e.r*r));g=p(t,t.r,h,u(o(h,b)));v=p(e,e.r,b,u(o(b,h)));m=c(o(g,v));s=m*s/Math.max(t.r,e.r);y=d(g,l(u(n(o(t,g))),t.r*s));_=d(v,l(u(i(o(e,v))),e.r*s))}else{h=d(t,l(n(f),t.r*r));b=d(e,l(n(f),e.r*r));g=p(t,t.r,h,u(o(h,b)));v=p(e,e.r,b,u(o(b,h)));m=c(o(g,v));s=m*s/Math.max(t.r,e.r);y=d(g,l(u(i(o(t,g))),t.r*s));_=d(v,l(u(n(o(e,v))),e.r*s))}return[g,y,_,v]}function b(t,e,n,i){var o=h(t,e,n,i,-1);var r="";r+="M"+o[0].x+","+o[0].y;r+="C"+o[1].x+","+o[1].y;r+=","+o[2].x+","+o[2].y;r+=","+o[3].x+","+o[3].y;o=h(t,e,n,i,1).reverse();r+="L"+ +o[0].x+","+o[0].y;r+="C"+o[1].x+","+o[1].y;r+=","+o[2].x+","+o[2].y;r+=","+o[3].x+","+o[3].y;r+="Z";return r}e.getMetaBallConnectorPath=b;function g(t,e,n,i,o,r){var s=e.y-t.y,u=t.x-e.x,l=e.x*t.y-t.x*e.y;var c=r.x-3*o.x+3*i.x-n.x,d=r.y-3*o.y+3*i.y-n.y,p=3*n.x-6*i.x+3*o.x,h=3*n.y-6*i.y+3*o.y,b=3*i.x-3*n.x,g=3*i.y-3*n.y,v=n.x,m=n.y;var y=function(t){return t*t*t*(s*c+u*d)+t*t*(s*p+u*h)+t*(s*b+u*g)+s*v+u*m+l};var _=f(3*(s*c+u*d),2*(s*p+u*h),s*b+u*g).filter(function(t){return t>=0&&t<=1});_.push(1);var L=a(y(0));return _.some(function(t){var e=a(y(t));return 0===e||e!==L})}function v(t,e,n,i){if(c(o(t,e))<t.r+e.r)return true;var r=h(t,e,n,i,-1);if(0===r.length)return false;return!g(t,e,r[0],r[1],r[2],r[3])}e.isConnectedMetaBall=v}.apply(e,i),void 0!==o&&(t.exports=o))},2438:function(t,e){t.exports='<defs xmlns="http://www.w3.org/2000/svg">\n\t\t\t<filter id="bubble-drop-shadow" x="-20%" y="-20%" width="230%" height="230%">\n\t\t\t\t<feComponentTransfer in="SourceAlpha">\n\t\t\t\t\t<feFuncA type="table" tableValues="1 0" />\n\t\t\t\t</feComponentTransfer>\n\t\t\t\t<feGaussianBlur stdDeviation="2" />\n\t\t\t\t<feOffset dx="0" dy="0" result="offsetblur" />\n\t\t\t\t<feFlood flood-color="#000" flood-opacity="0.6" result="color" />\n\t\t\t\t<feComposite in2="offsetblur" operator="in" />\n\t\t\t\t<feComposite in2="SourceAlpha" operator="in" />\n\t\t\t\t<feMerge result="insetAround">\n\t\t\t\t\t<feMergeNode in="SourceGraphic" />\n\t\t\t\t\t<feMergeNode />\n\t\t\t\t</feMerge>\n\n\t\t\t\t<feComponentTransfer in="SourceAlpha">\n\t\t\t\t\t<feFuncA type="table" tableValues="1 0" />\n\t\t\t\t</feComponentTransfer>\n\t\t\t\t<feGaussianBlur stdDeviation="1" />\n\t\t\t\t<feOffset dx="0" dy="2" result="offsetblur" />\n\t\t\t\t<feFlood flood-color="#fff" result="color" />\n\t\t\t\t<feComposite in2="offsetblur" operator="in" />\n\t\t\t\t<feComposite in2="SourceAlpha" operator="in" />\n\t\t\t\t<feMerge result="insetTop">\n\t\t\t\t\t<feMergeNode in="insetAround" />\n\t\t\t\t\t<feMergeNode />\n\t\t\t\t</feMerge>\n\n\t\t\t\t<feOffset in="SourceAlpha" dx="0" dy="1" result="offOut" />\n\t\t\t\t<feGaussianBlur in="offOut" stdDeviation="1" result="offsetBlur" />\n\t\t\t\t<feFlood flood-color="#000" flood-opacity="0.5" result="offsetColor" />\n\t\t\t\t<feComposite in="offsetColor" in2="offsetBlur" operator="in" result="blurOut" />\n\t\t\t\t<feBlend in="insetTop" in2="blurOut" mode="normal"></feBlend>\n\t\t\t</filter>\n\t\t\t<linearGradient id="bubble-fill" x1="0%" y1="0%" x2="0%" y2="100%">\n\t\t\t\t<stop offset="0%" style="stop-color:#fff;stop-opacity:1" />\n\t\t<stop offset="100%" style="stop-color:#f1f1f1;stop-opacity:1" />\n\t</linearGradient>\n</defs>'},2439:function(t,e,n){var i,o;!(i=[n,e,n(234)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});var i=function(){function t(t){this.visualizationOptions=t;this.minZoomLevel=.5;this.maxZoomLevel=1.5;this.seed=1;this.updateContainerDimensions(0,0)}t.prototype.updateContainerDimensions=function(t,e){this.containerWidth=t;this.containerHeight=e;this.center={x:t/2,y:e/2}};t.prototype.generateInitialTablePosition=function(t){if(this.bubblesState&&this.bubblesState.positions&&this.bubblesState.positions.tables){var e=this.bubblesState.positions.tables[t];if(e)return e}return this.generateRandomInitialPosition()};t.prototype.generateInitialHubPosition=function(t){if(this.bubblesState&&this.bubblesState.positions&&this.bubblesState.positions.hubs){var e=this.bubblesState.positions.hubs[t];if(e)return e}return this.generateRandomInitialPosition()};t.prototype.getZoomToFitPosition=function(t){if(!t||0===t.length)return{scale:1,position:[0,0]};var e={minX:n.min(t,function(t){return t.x-t.r}),maxX:n.max(t,function(t){return t.x+t.r}),minY:n.min(t,function(t){return t.y-t.r}),maxY:n.max(t,function(t){return t.y+t.r})};var i=1;i=this.containerWidth<this.containerHeight?this.containerWidth/(e.maxX-e.minX+50):this.containerHeight/(e.maxY-e.minY+50);i=Math.min(this.maxZoomLevel,Math.max(this.minZoomLevel,i));var o={x:(e.maxX+e.minX)/2,y:(e.maxY+e.minY)/2};var r=this.containerWidth/2-o.x*i;var s=this.containerHeight/2-o.y*i;var a=[r,s];return{scale:i,position:a}};t.prototype.getZoomPosition=function(t,e){var n=.2,i=[this.containerWidth/2,this.containerHeight/2];var o=t.scale*(1+n*e);o=Math.min(this.maxZoomLevel,Math.max(this.minZoomLevel,o));var r=[(i[0]-t.position[0])/t.scale,(i[1]-t.position[1])/t.scale];var s=[r[0]*o+t.position[0],r[1]*o+t.position[1]];var a=[t.position[0]+i[0]-s[0],t.position[1]+i[1]-s[1]];return{scale:o,position:a}};t.prototype.getNearestOverlappingNode=function(t,e,n){var i=this;var o=t.filter(function(t){return!n||n(t)}).reduce(function(t,n){if(e!==n){var o=i.getDistanceBetweenBubbles(e,n);o<e.r+n.r&&(!t||t.d>o)&&(t={b:n,d:o})}return t},null);return o?o.b:null};t.prototype.pushTargetAwayIfOverlap=function(t,e){var n=this.getDistanceBetweenBubbles(t,e);var i=t.r+e.r+5-n;var o=i>=0;if(o){var r=i+t.r/2;var s=t.x-e.x||.1;var a=t.y-e.y;var u=a/s;var l=s/Math.abs(s);var c=e.x-Math.sqrt(r*r/(1+u*u))*l;var d=u*(c-e.x)+e.y;e.x=c;e.y=d;e.px=c;e.py=d;return true}return false};t.prototype.getBubblePlacementScore=function(t){var e=10;var n=t?t.length:0;n>15?e-=2:n>=10&&(e-=1);var i=this.getViewSize();i<=1250?e-=4:i<=1400?e-=3:i<=1600?e-=2:i<=2e3&&(e-=1);return e/10};t.prototype.updateBubbleSizes=function(t,e){var n=t.filter(function(t){return t.isTable()});var i=+this.visualizationOptions.maxBubbleRadius*e;var o=+this.visualizationOptions.minBubbleRadius*e;var r=this.getMinRowCount(n);var s=this.getMaxRowCount(n);var a=this.getAverageRowCount(n);n.forEach(function(t){var e=(i+o)/2;if(s!==r){e=t.getRelativeSize()-a;var n=e<0?a-r:s-a;e=(i+o)/2+e/n*(i-o)/2}t.r=e});var u=t.filter(function(t){return t.isHub()});u.forEach(function(t){t.r=12})};t.prototype.getBubblesState=function(){return this.bubblesState};t.prototype.updateBubblesState=function(t){var e={positions:{tables:{},hubs:{}}};t.forEach(function(t){t.isTable()?e.positions.tables[t.id||t.name]={x:t.x,y:t.y}:e.positions.hubs[t.name]={x:t.x,y:t.y}});return this.bubblesState=e};t.prototype.setBubblesState=function(t){this.bubblesState=t};t.prototype.getBubbleCoverage=function(t){var e=this.containerWidth*this.containerHeight;var n=0;for(var i=0;i<t.length;i++){var o=t[i].r*t[i].r;n+=o}var r=n/e;return r};t.prototype.getGraphStats=function(t,e){var n=this.getBubbleStats(t,e);return n};t.prototype.getBubbleStats=function(t,e){var n=0;var i=0;for(var o=0;o<t.length;o++){var r=t[o];var s=this.getLinks(r,e);i=Math.max(s.length,i);n+=s.length}var a=0;for(var o=0;o<e.length;o++)e[o].isAssociation()&&a++;return{avgLinksPerNode:n/t.length,maxLinksPerNode:i,large:t.length>25,visibleLinkCount:a,bubbleCoverage:this.getBubbleCoverage(t)}};t.prototype.getLinks=function(t,e){var n=new Array;for(var i=0;i<e.length;i++){var o=e[i];o.isRecommendation()||o.source!==t&&o.target!==t||n.push(o)}return n};t.prototype.getViewSize=function(){return Math.sqrt(Math.pow(this.containerWidth,2)+Math.pow(this.containerHeight,2))};t.prototype.getMinRowCount=function(t){if(!t||0===t.length)return 0;return t.reduce(function(t,e){return Math.min(t,e.getRelativeSize())},t[0].getRelativeSize())};t.prototype.getMaxRowCount=function(t){if(!t)return 0;return t.reduce(function(t,e){return Math.max(t,e.getRelativeSize())},0)};t.prototype.getAverageRowCount=function(t){if(!t)return 0;return t.reduce(function(t,e){return t+e.getRelativeSize()},0)/t.length};t.prototype.getDistanceBetweenBubbles=function(t,e){var n=t.x-e.x;var i=t.y-e.y;return Math.sqrt(n*n+i*i)};t.prototype.generateRandomInitialPosition=function(){return{x:this.center.x+this.seededPseudoRandom()*(this.center.x/2)*(2*this.seededPseudoRandom()<1?1:-1),y:this.center.y+this.seededPseudoRandom()*(this.center.y/2)*(2*this.seededPseudoRandom()<1?1:-1)}};t.prototype.seededPseudoRandom=function(){var t=1e4*Math.sin(this.seed++);return t-Math.floor(t)};return t}();e.default=i}.apply(e,i),void 0!==o&&(t.exports=o))},2440:function(t,e,n){var i,o;!(i=[n,e,n(1682)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});var i=function(){function t(t){this.bubblePlacement=t}t.prototype.reconcileData=function(t,e){var i=this;var o=t.bubbles.reduce(function(t,e){t[e.id]=e;return t},{});var r=e.associations.reduce(function(t,e){t[e.name]||(t[e.name]=[]);t[e.name].push(e);return t},{});t.bubbles=e.tables.map(function(t){t.id||(t.id=t.type+t.name);var e=o[t.id];if(e){e.name=t.name;e.table=t}else{var r=i.bubblePlacement.generateInitialTablePosition(t.id||t.name);e=new n.TableBubble({table:t,x:r.x,y:r.y})}return e});var s=Object.keys(r).filter(function(t){return r[t].length>1});s.forEach(function(e){var r="hub__";var s=o[r+e];if(!s){var a=i.bubblePlacement.generateInitialHubPosition(e);s=new n.HubBubble({name:e,id:r+e,x:a.x,y:a.y})}t.bubbles.push(s)});var a={};var u={};t.links.forEach(function(t){var e=t.isRecommendation()?u:a;e[t.source.id]||(e[t.source.id]=[]);e[t.source.id].push(t);e[t.target.id]||(e[t.target.id]=[]);e[t.target.id].push(t)});var l=t.bubbles.filter(function(t){return t.isTable()});var c=t.bubbles.filter(function(t){return t.isHub()});t.links=e.recommendations.map(function(t){var e=i.getBubble(l,t.source.tableName);var o=i.getBubble(l,t.target.tableName);if(e&&o){var r=i.findLinkInMap(u,e,o);r?r.recommendation=t:r=new n.RecommendationLink({source:e,target:o,recommendation:t});r.linkStatus=i.getLinkStatus(r.recommendation.score.value);return r}return}).filter(function(t){return void 0!==t});e.associations.forEach(function(n){if(s.indexOf(n.name)>-1){var o=i.getBubble(l,n.source.tableName);var r=i.getBubble(c,n.name);var u=i.getOrCreateAssociation(a,t.links,n,o,r);u&&!i.linkExists(t.links,u)&&t.links.push(u);i.updatePreviewStatus(u,e.associations);o=i.getBubble(l,n.target.tableName);u=i.getOrCreateAssociation(a,t.links,n,o,r);u&&!i.linkExists(t.links,u)&&t.links.push(u);i.updatePreviewStatus(u,e.associations)}else{var o=i.getBubble(l,n.source.tableName);var r=i.getBubble(l,n.target.tableName);var u=i.getOrCreateAssociation(a,t.links,n,o,r);u&&!i.linkExists(t.links,u)&&t.links.push(u)}});return t};t.prototype.getLinkStatus=function(t){return t>=.75?n.LinkStatus.Good:t>=.5?n.LinkStatus.Medium:n.LinkStatus.Bad};t.prototype.getOrCreateAssociation=function(t,e,i,o,r){if(o&&r){var s=this.findLinkInMap(t,o,r);s?s.association&&!this.sourceAndTargetMatch(s.association,i)||(s.association=this.cloneAssociationStats(i)):s=new n.AssociationLink({source:o,target:r,association:this.cloneAssociationStats(i)});var a=this.getRecommendation(e,o,r);s.linkStatus=a?a.linkStatus:n.LinkStatus.Bad;return s}return};t.prototype.cloneAssociationStats=function(t){return{name:t.name,preview:t.preview,source:t.source,target:t.target}};t.prototype.getBubble=function(t,e){var n=void 0;t.some(function(t){if(t.name===e){n=t;return true}return false});return n};t.prototype.getRecommendation=function(t,e,n){var i=void 0;t.some(function(t){if(t.isRecommendation()&&(t.source.name===e.name&&t.target.name===n.name||t.target.name===e.name&&t.source.name===n.name)){i=t;return true}return false});return i};t.prototype.linkExists=function(t,e){return t.some(function(t){return t.isRecommendation()===e.isRecommendation()&&(t.source===e.source&&t.target===e.target||t.source===e.target&&t.target===e.source)})};t.prototype.findLinkInMap=function(t,e,n){var i=void 0;var o=t[e.id];o&&o.some(function(t){if(t.source===n||t.target===n){i=t;return true}return false});return i};t.prototype.sourceAndTargetMatch=function(t,e){return t.source.tableName===e.source.tableName&&t.target.tableName===e.target.tableName||t.source.tableName===e.target.tableName&&t.target.tableName===e.source.tableName};t.prototype.updatePreviewStatus=function(t,e){var n=t.association.name;var i=t.source.name;t.association.preview=!e.some(function(t){return t.name===n&&(t.source.tableName===i||t.target.tableName===i)&&!t.preview})};return t}();e.default=i}.apply(e,i),void 0!==o&&(t.exports=o))},2441:function(t,e){t.exports='<div class="bubblesPane">\r\n    <qv-debug ng-if="debugEnabled" visualization-options="visualizationOptions"></qv-debug>\r\n    <div class="add-data-bubble-button" ng-class="{\'disabled\': workbench.isReadOnly(), \'not-disabled\': !workbench.isReadOnly()}" ng-click="!workbench.isReadOnly() ? bubblesEventsBridge.launchAddData():\'\'" q-title-translation="Bubbles.Toolbar.Add.Tooltip">\r\n        <div class="lui-icon lui-icon--add add-icon"></div>\r\n    </div>\r\n    <qv-bubbles-toolbar></qv-bubbles-toolbar>\r\n    <div class="workbench"></div>\r\n</div>'},2442:function(t,e,n){var i,o;!(i=[n,e,n(48),n(2443),n(2444)],o=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var o=function(){function t(){this.restrict="E";this.replace=true;this.template=i;this.scope={};this.controller=r}return t}();var r=function(){function t(t,e){this.$scope=t;t.toolbarService=e}t.$inject=["$scope","qvBubblesToolbarService"];return t}();n.directive("qvBubblesToolbar",[function(){return new o}])}.apply(e,i),void 0!==o&&(t.exports=o))},2443:function(t,e){t.exports='<div class="qv-bubbles-toolbar">\r\n\t<div class="toolbar-button" ng-repeat="button in toolbarService.getButtons()" q-title-translation="{{button.tooltip}}" ng-click="button.action()">\r\n\t\t<div class="badge-container" ng-if="button.showBadge" ng-class="{ \'badge-disabled\': button.disabled() }">{{button.badge_count}}</div>\r\n\t\t<button class="lui-fade-button" ng-class="{ \'toggled-state\': button.toggled }"\r\n\t\t\t\ttid="{{button.tid}}" ng-disabled="button.disabled()">\r\n\t\t\t<span class="lui-fade-button__icon lui-icon" ng-class="button.cssIcon"></span>\r\n\t\t</button>\r\n\t\t<div class="separator" ng-if="button.appendSeparator"></div>\r\n\t</div>\r\n</div>'},2444:function(t,e,n){var i,o;!(i=[n,e,n(48)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});var i=function(){function t(){this.buttons=[]}t.prototype.clearButtons=function(){this.buttons=[]};t.prototype.getButtons=function(){return this.buttons};t.prototype.addButton=function(t){this.buttons.push(t)};return t}();n.service("qvBubblesToolbarService",function(){return new i})}.apply(e,i),void 0!==o&&(t.exports=o))},2445:function(t,e,n){var i,o;!(i=[n,e,n(48),n(2446)],o=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var o=function(){function t(){this.restrict="E";this.replace=true;this.template=i;this.scope={visualizationOptions:"="};this.controller=r}return t}();var r=function(){function t(t){t.toggleOptions=function(){t.showOptions=!t.showOptions}}t.$inject=["$scope"];return t}();n.directive("qvDebug",[function(){return new o}])}.apply(e,i),void 0!==o&&(t.exports=o))},2446:function(t,e){t.exports='<div class="debugPanel">\r\n\t<div class="toggleOptions lui-icon lui-icon--cogwheel" ng-click="toggleOptions()"></div>\r\n\t<div class="options" ng-show="showOptions">\r\n\t\t<div>\r\n\t\t\t<a href="https://github.com/mbostock/d3/wiki/Force-Layout#charge">Charge: </a><input type="text" ng-model="visualizationOptions.charge" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }">\r\n\t\t</div>\r\n\t\t<div>Gravity: <input type="text" ng-model="visualizationOptions.gravity" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Friction: <input type="text" ng-model="visualizationOptions.friction" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Theta: <input type="text" ng-model="visualizationOptions.theta" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Min bubble radius: <input type="text" ng-model="visualizationOptions.minBubbleRadius" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Max bubble radius: <input type="text" ng-model="visualizationOptions.maxBubbleRadius" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Link distance: <input type="text" ng-model="visualizationOptions.linkDistance" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Link strength: <input type="text" ng-model="visualizationOptions.linkStrength" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Recommendation distance: <input type="text" ng-model="visualizationOptions.recommendationDistance" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Recommendation strength: <input type="text" ng-model="visualizationOptions.recommendationStrength" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Link "tear" distance: <input type="text" ng-model="visualizationOptions.linkTearDistance" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Link "R" factor: <input type="text" ng-model="visualizationOptions.linkRFactor" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t<div>Simple Lines: <input type="number" ng-model="visualizationOptions.simpleLines" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t    <div>Enable reduce overlaps: <input type="number" ng-model="visualizationOptions.enableClearOverlaps" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t\r\n\t\t        \r\n        <h2>Animation Properties</h2>\r\n        <div>FPS Target: <input type="number" ng-model="visualizationOptions.fps" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n        <div>Level Of Detail: <input type="number" ng-model="visualizationOptions.enableLOD" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n        <div>Drop Frames: <input type="number" ng-model="visualizationOptions.enableDropFrames" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n        <div>Restore on End: <input type="number" ng-model="visualizationOptions.enableRestoreOnEnd" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n        <div>Verbose level: <input type="number" ng-model="visualizationOptions.animationLogLevel" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t <div>Always Fast: <input type="number" ng-model="visualizationOptions.enableAlwaysFast" ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }"></div>\r\n\t\t\r\n\t\t <button ng-activate="visualizationOptions.restore()">Clear</button>\r\n\t</div>\r\n</div>'}}]);