/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[12],{1062:function(e){e.exports={_variables:{"@B20":"#333333","@B35":"#595959","@B45":"#737373","@B50":"#808080","@B60":"#999999","@B80":"#cccccc","@B90":"#e6e6e6","@B98":"#fbfbfb","@B100":"#ffffff","@H1":"24px","@H2":"18px","@H3":"14px","@H4":"13px","@H5":"12px","@H6":"10px"},color:"@B35",fontSize:"13px",backgroundColor:"transparent",object:{line:{highContrast:{color:"@B60"},major:{color:"@B80"},minor:{color:"@B90"}},title:{main:{color:"@B50",fontSize:"15px"},subTitle:{color:"@B50",fontSize:"12px"},footer:{color:"@B50",fontSize:"12px",backgroundColor:"transparent"}},label:{name:{color:"@B20",fontSize:"13px"},value:{color:"@B20",fontSize:"13px"}},axis:{title:{fontSize:"12px",color:"@B20"},label:{name:{color:"@B35",fontSize:"12px"}},line:{major:{color:"@B80"},minor:{color:"@B90"}}},grid:{line:{highContrast:{color:"@B60"},major:{color:"@B80"},minor:{color:"@B90"}}},referenceLine:{label:{name:{color:"@B20",fontSize:"12px"}},outOfBounds:{color:"@B90",backgroundColor:"@B45",fontSize:"@H6"}},legend:{title:{fontSize:"15px",color:"@B20"},label:{fontSize:"13px",color:"@B35"}},barChart:{outOfRange:{color:"@B60"},label:{value:{color:"@B35",fontSize:"11px"}}},gauge:{label:{value:{color:"@B20",fontSize:"42px"}}},treemap:{branch:{backgroundColor:".alpha(5)",label:{color:".inherit()",fontSize:"14px"}},leaf:{label:{fontSize:"12px"}}},scatterPlot:{label:{value:{color:"@B35",fontSize:"12px"}}},lineChart:{outOfRange:{color:"@B60"},label:{value:{color:"@B35",fontSize:"12px"}}},pieChart:{axis:{title:{fontSize:"12px"}},label:{name:{color:"@B20",fontSize:"14px"},value:{fontSize:"12px"}}},straightTable:{header:{fontSize:"@H4",color:"@B35"},content:{fontSize:"@H4",color:"@B35"}},listBox:{title:{main:{color:"@B35",fontSize:"13px"}},content:{color:"@B35",fontSize:"12px"}},boxPlot:{box:{whisker:{stroke:"@B35"},line:{stroke:"@B35"},box:{fill:"@B90",stroke:"@B35"}}},distributionPlot:{box:{fill:"@B90"}},histogram:{label:{value:{color:"@B35",fontSize:"12px"}}},waterfallChart:{label:{value:{color:"@B35",fontSize:"12px"}},value:{color:{default:"@B35",dark:"@B35",light:"@B90"}},shape:{positiveValue:{fill:"#4477AA"},negativeValue:{fill:"#cc6677"},subtotal:{fill:"#c3c3c3"},bridge:{stroke:"@B50"}}},mapChart:{label:{value:{color:"@B35",fontSize:"12px"}}}},dataColors:{primaryColor:"#4477aa",othersColor:"#a5a5a5",errorColor:"#ff4444",nullColor:"#d2d2d2"},palettes:{data:[{name:"12 Colors",translation:"properties.colorNumberOfColors.12",propertyValue:"12",type:"pyramid",scale:[["#4477aa"],["#4477aa","#cc6677"],["#4477aa","#ddcc77","#cc6677"],["#4477aa","#117733","#ddcc77","#cc6677"],["#332288","#88ccee","#117733","#ddcc77","#cc6677"],["#332288","#88ccee","#117733","#ddcc77","#cc6677","#aa4499"],["#332288","#44aa99","#88ccee","#117733","#ddcc77","#cc6677","#aa4499"],["#332288","#44aa99","#88ccee","#117733","#999933","#ddcc77","#cc6677","#aa4499"],["#332288","#44aa99","#88ccee","#117733","#999933","#ddcc77","#cc6677","#882255","#aa4499"],["#332288","#44aa99","#88ccee","#117733","#999933","#ddcc77","#661100","#cc6677","#882255","#aa4499"],["#332288","#6699cc","#44aa99","#88ccee","#117733","#999933","#ddcc77","#661100","#cc6677","#882255","#aa4499"],["#332288","#6699cc","#88ccee","#44aa99","#117733","#999933","#ddcc77","#661100","#cc6677","#aa4466","#882255","#aa4499"]]},{name:"100 Colors",translation:"properties.colorNumberOfColors.100",propertyValue:"100",type:"row",scale:["#99c867","#e43cd0","#e2402a","#66a8db","#3f1a20","#e5aa87","#3c6b59","#aa2a6b","#e9b02e","#7864dd","#65e93c","#5ce4ba","#d0e0da","#d796dd","#64487b","#e4e72b","#6f7330","#932834","#ae6c7d","#986717","#e3cb70","#408c1d","#dd325f","#533d1c","#2a3c54","#db7127","#72e3e2","#e2c1da","#d47555","#7d7f81","#54ae9b","#e9daa6","#3a8855","#5be66e","#ab39a4","#a6e332","#6c469d","#e39e51","#4f1c42","#273c1c","#aa972e","#8bb32a","#bdeca5","#63ec9b","#9c3519","#aaa484","#72256d","#4d749f","#9884df","#e590b8","#44b62b","#ad5792","#c65dea","#e670ca","#e38783","#29312d","#6a2c1e","#d7b1aa","#b1e7c3","#cdc134","#9ee764","#56b8ce","#2c6323","#65464a","#b1cfea","#3c7481","#3a4e96","#6493e1","#db5656","#747259","#bbabe4","#e33f92","#d0607d","#759f79","#9d6b5e","#8574ae","#7e304c","#ad8fac","#4b77de","#647e17","#b9c379","#8da8b0","#b972d9","#786279","#7ec07d","#916436","#2d274f","#dce680","#759748","#dae65a","#459c49","#b7934a","#51c671","#9ead3f","#969a5c","#b9976a","#46531a","#c0f084","#76c146","#bad0ad"]}],ui:[{name:"Palette",colors:["#ffffff","#46c646","#276e27","#b6d7ea","#7db8da","#4477aa","#8e477d","#ffcf02","#f8981d","#f93f17","#633d0c","#b0afae","#7b7a78","#545352","#000000"]}]},scales:[{name:"Sequential Gradient",translation:"properties.colorScheme.sequential",type:"gradient",propertyValue:"sg",scale:["#662506","#993404","#cc4c02","#ec7014","#fb9a29","#fec44f","#fee391","#fff7bc"]},{name:"Sequential Classes",translation:"properties.colorScheme.sequentialC",propertyValue:"sc",type:"class",scale:["#662506","#993404","#cc4c02","#ec7014","#fb9a29","#fec44f","#fee391"]},{name:"Diverging gradient",translation:"properties.colorScheme.diverging",propertyValue:"dg",type:"gradient",scale:["#ae1c3e","#d24d3e","#ed875e","#f9bd7e","#e6f5fe","#b4ddf7","#77b7e5","#3a89c9","#3d52a1"]},{name:"Diverging Classes",translation:"properties.colorScheme.divergingC",propertyValue:"dc",type:"class",scale:["#ae1c3e","#d24d3e","#ed875e","#f9bd7e","#ffe3aa","#e6f5fe","#b4ddf7","#77b7e5","#3a89c9","#3d52a1"]}]}},1090:function(e){e.exports={id:"qlik-dashboard-bundle",name:"Qlik dashboard bundle",description:"N/A",eula:"generic",content:[{id:"qlik-show-hide-container",name:"Show/hide container",version:"2.5.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-variable-input",name:"Variable input",version:"6.3.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-button-for-navigation",name:"Button for navigation",version:"2.3.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-date-picker",name:"Date picker",version:"2.3.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-tabbed-container",name:"Tabbed container",version:"3.5.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-on-demand-reporting",name:"On demand reporting",version:"2.3.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-share-button",name:"Share button",version:"0.23.0",dependencies:{"qlik-sense":">=5.5.x"}}]}},1091:function(e){e.exports={content:[{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-multi-kpi",name:"Multi KPI",source:{repo:"qsSimpleKPI",service:"github",user:"qlik-oss"},version:"0.79.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-heatmap-chart",name:"Heatmap chart",source:{repo:"QlikSense_Extension_2DimHeatmap",service:"github",user:"qlik-oss"},version:"0.53.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-word-cloud",name:"Word cloud chart",source:{repo:"br.com.clever.wordcloud",service:"github",user:"qlik-oss"},version:"0.28.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-network-chart",name:"Network chart",source:{repo:"network-vis-chart",service:"github",user:"qlik-oss"},version:"0.25.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-radar-chart",name:"Radar chart",source:{repo:"D3ImprovedRadarChart",service:"github",user:"qlik-oss"},version:"0.33.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-barplus-chart",name:"Bar plus chart",source:{repo:"barsPlus",service:"github",user:"qlik-oss"},version:"0.56.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-bullet-chart",name:"Bullet chart",source:{repo:"D3-Bullet-Chart",service:"github",user:"qlik-oss"},version:"0.22.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-smart-pivot",name:"Smart pivot",source:{repo:"PLSmartPivot",service:"github",user:"qlik-oss"},version:"0.50.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-trellis-container",name:"Trellis container",source:{repo:"qwik-trellis",service:"github",user:"qlik-oss"},version:"0.14.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-sankey-chart-ext",name:"Sankey chart",source:{path:"@qlik/sankey-chart-ext/dist",service:"npm"},version:"0.7.4"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-funnel-chart-ext",name:"Funnel chart",source:{path:"@qlik/funnel-chart-ext/dist",service:"npm"},version:"0.7.8"}],description:"This is a set of supported extensions that expands the visualization capabilities of Qlik Sense. These can be used in addition to the native objects found under 'Charts'. For support conditions and limitations, see the documentation.",eula:"generic",id:"qlik-visualization-bundle",name:"Qlik Visualization bundle"}},1092:function(e,t,r){(function(e){true;e(r(190))})(function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8);var r=e.Pos;var n={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function i(e,t,i,a){var l=e.getLineHandle(t.line),s=t.ch-1;var u=s>=0&&n[l.text.charAt(s)]||n[l.text.charAt(++s)];if(!u)return null;var c=">"==u.charAt(1)?1:-1;if(i&&c>0!=(s==t.ch))return null;var f=e.getTokenTypeAt(r(t.line,s+1));var h=o(e,r(t.line,s+(c>0?1:0)),c,f||null,a);if(null==h)return null;return{from:r(t.line,s),to:h&&h.pos,match:h&&h.ch==u.charAt(0),forward:c>0}}function o(e,t,i,o,a){var l=a&&a.maxScanLineLength||1e4;var s=a&&a.maxScanLines||1e3;var u=[];var c=a&&a.bracketRegex?a.bracketRegex:/[(){}[\]]/;var f=i>0?Math.min(t.line+s,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-s);for(var h=t.line;h!=f;h+=i){var d=e.getLine(h);if(!d)continue;var p=i>0?0:d.length-1,v=i>0?d.length:-1;if(d.length>l)continue;h==t.line&&(p=t.ch-(i<0?1:0));for(;p!=v;p+=i){var g=d.charAt(p);if(c.test(g)&&(void 0===o||e.getTokenTypeAt(r(h,p+1))==o)){var m=n[g];if(">"==m.charAt(1)==i>0)u.push(g);else{if(!u.length)return{pos:r(h,p),ch:g};u.pop()}}}}return h-i!=(i>0?e.lastLine():e.firstLine())&&null}function a(e,n,o){var a=e.state.matchBrackets.maxHighlightLineLength||1e3;var l=[],s=e.listSelections();for(var u=0;u<s.length;u++){var c=s[u].empty()&&i(e,s[u].head,false,o);if(c&&e.getLine(c.from.line).length<=a){var f=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";l.push(e.markText(c.from,r(c.from.line,c.from.ch+1),{className:f}));c.to&&e.getLine(c.to.line).length<=a&&l.push(e.markText(c.to,r(c.to.line,c.to.ch+1),{className:f}))}}if(l.length){t&&e.state.focused&&e.focus();var h=function(){e.operation(function(){for(var e=0;e<l.length;e++)l[e].clear()})};if(!n)return h;setTimeout(h,800)}}var l=null;function s(e){e.operation(function(){if(l){l();l=null}l=a(e,false,e.state.matchBrackets)})}e.defineOption("matchBrackets",false,function(t,r,n){n&&n!=e.Init&&t.off("cursorActivity",s);if(r){t.state.matchBrackets="object"==typeof r?r:{};t.on("cursorActivity",s)}});e.defineExtension("matchBrackets",function(){a(this,true)});e.defineExtension("findMatchingBracket",function(e,t,r){return i(this,e,t,r)});e.defineExtension("scanForBracket",function(e,t,r,n){return o(this,e,t,r,n)})})},1093:function(e,t,r){(function(e){true;e(r(190))})(function(e){"use strict";var t={};var r=/[^\s\u00a0]/;var n=e.Pos;function i(e){var t=e.search(r);return-1==t?0:t}e.commands.toggleComment=function(e){e.toggleComment()};e.defineExtension("toggleComment",function(e){e||(e=t);var r=this;var i=Infinity,o=this.listSelections(),a=null;for(var l=o.length-1;l>=0;l--){var s=o[l].from(),u=o[l].to();if(s.line>=i)continue;u.line>=i&&(u=n(i,0));i=s.line;if(null==a)if(r.uncomment(s,u,e))a="un";else{r.lineComment(s,u,e);a="line"}else"un"==a?r.uncomment(s,u,e):r.lineComment(s,u,e)}});e.defineExtension("lineComment",function(e,o,a){a||(a=t);var l=this,s=l.getModeAt(e);var u=a.lineComment||s.lineComment;if(!u){if(a.blockCommentStart||s.blockCommentStart){a.fullLines=true;l.blockComment(e,o,a)}return}var c=l.getLine(e.line);if(null==c)return;var f=Math.min(0!=o.ch||o.line==e.line?o.line+1:o.line,l.lastLine()+1);var h=null==a.padding?" ":a.padding;var d=a.commentBlankLines||e.line==o.line;l.operation(function(){if(a.indent){var t=null;for(var o=e.line;o<f;++o){var s=l.getLine(o);var c=s.slice(0,i(s));(null==t||t.length>c.length)&&(t=c)}for(var o=e.line;o<f;++o){var s=l.getLine(o),p=t.length;if(!d&&!r.test(s))continue;s.slice(0,p)!=t&&(p=i(s));l.replaceRange(t+u+h,n(o,0),n(o,p))}}else for(var o=e.line;o<f;++o)(d||r.test(l.getLine(o)))&&l.replaceRange(u+h,n(o,0))})});e.defineExtension("blockComment",function(e,i,o){o||(o=t);var a=this,l=a.getModeAt(e);var s=o.blockCommentStart||l.blockCommentStart;var u=o.blockCommentEnd||l.blockCommentEnd;if(!s||!u){(o.lineComment||l.lineComment)&&false!=o.fullLines&&a.lineComment(e,i,o);return}var c=Math.min(i.line,a.lastLine());c!=e.line&&0==i.ch&&r.test(a.getLine(c))&&--c;var f=null==o.padding?" ":o.padding;if(e.line>c)return;a.operation(function(){if(false!=o.fullLines){var t=r.test(a.getLine(c));a.replaceRange(f+u,n(c));a.replaceRange(s+f,n(e.line,0));var h=o.blockCommentLead||l.blockCommentLead;if(null!=h)for(var d=e.line+1;d<=c;++d)(d!=c||t)&&a.replaceRange(h+f,n(d,0))}else{a.replaceRange(u,i);a.replaceRange(s,e)}})});e.defineExtension("uncomment",function(e,i,o){o||(o=t);var a=this,l=a.getModeAt(e);var s=Math.min(0!=i.ch||i.line==e.line?i.line:i.line-1,a.lastLine()),u=Math.min(e.line,s);var c=o.lineComment||l.lineComment,f=[];var h=null==o.padding?" ":o.padding,d;e:{if(!c)break e;for(var p=u;p<=s;++p){var v=a.getLine(p);var g=v.indexOf(c);g>-1&&!/comment/.test(a.getTokenTypeAt(n(p,g+1)))&&(g=-1);if(-1==g&&(p!=s||p==u)&&r.test(v))break e;if(g>-1&&r.test(v.slice(0,g)))break e;f.push(v)}a.operation(function(){for(var e=u;e<=s;++e){var t=f[e-u];var r=t.indexOf(c),i=r+c.length;if(r<0)continue;t.slice(i,i+h.length)==h&&(i+=h.length);d=true;a.replaceRange("",n(e,r),n(e,i))}});if(d)return true}var m=o.blockCommentStart||l.blockCommentStart;var y=o.blockCommentEnd||l.blockCommentEnd;if(!m||!y)return false;var b=o.blockCommentLead||l.blockCommentLead;var w=a.getLine(u),x=s==u?w:a.getLine(s);var C=w.indexOf(m),S=x.lastIndexOf(y);if(-1==S&&u!=s){x=a.getLine(--s);S=x.lastIndexOf(y)}if(-1==C||-1==S||!/comment/.test(a.getTokenTypeAt(n(u,C+1)))||!/comment/.test(a.getTokenTypeAt(n(s,S+1))))return false;var k=w.lastIndexOf(m,e.ch);var T=-1==k?-1:w.slice(0,e.ch).indexOf(y,k+m.length);if(-1!=k&&-1!=T&&T+y.length!=e.ch)return false;T=x.indexOf(y,i.ch);var L=x.slice(i.ch).lastIndexOf(m,T-i.ch);k=-1==T||-1==L?-1:i.ch+L;if(-1!=T&&-1!=k&&k!=i.ch)return false;a.operation(function(){a.replaceRange("",n(s,S-(h&&x.slice(S-h.length,S)==h?h.length:0)),n(s,S+y.length));var e=C+m.length;h&&w.slice(e,e+h.length)==h&&(e+=h.length);a.replaceRange("",n(u,C),n(u,e));if(b)for(var t=u+1;t<=s;++t){var i=a.getLine(t),o=i.indexOf(b);if(-1==o||r.test(i.slice(0,o)))continue;var l=o+b.length;h&&i.slice(l,l+h.length)==h&&(l+=h.length);a.replaceRange("",n(t,o),n(t,l))}});return true})})},190:function(e,t,r){(function(t,r){e.exports=r()})(this,function(){"use strict";var e=navigator.userAgent;var t=navigator.platform;var r=/gecko\/\d/i.test(e);var n=/MSIE \d/.test(e);var i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e);var o=/Edge\/(\d+)/.exec(e);var a=n||i||o;var l=a&&(n?document.documentMode||6:+(o||i)[1]);var s=!o&&/WebKit\//.test(e);var u=s&&/Qt\/\d+\.\d+/.test(e);var c=!o&&/Chrome\//.test(e);var f=/Opera\//.test(e);var h=/Apple Computer/.test(navigator.vendor);var d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e);var p=/PhantomJS/.test(e);var v=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e);var g=/Android/.test(e);var m=v||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e);var y=v||/Mac/.test(t);var b=/\bCrOS\b/.test(e);var w=/win/i.test(t);var x=f&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1]));if(x&&x>=15){f=false;s=true}var C=y&&(u||f&&(null==x||x<12.11));var S=r||a&&l>=9;function k(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var T=function(e,t){var r=e.className;var n=k(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:"")}};function L(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function M(e,t){return L(e).appendChild(t)}function A(e,t,r,n){var i=document.createElement(e);r&&(i.className=r);n&&(i.style.cssText=n);if("string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function N(e,t,r,n){var i=A(e,t,r,n);i.setAttribute("role","presentation");return i}var O;O=document.createRange?function(e,t,r,n){var i=document.createRange();i.setEnd(n||e,r);i.setStart(e,t);return i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}n.collapse(true);n.moveEnd("character",r);n.moveStart("character",t);return n};function D(e,t){3==t.nodeType&&(t=t.parentNode);if(e.contains)return e.contains(t);do{11==t.nodeType&&(t=t.host);if(t==e)return true}while(t=t.parentNode)}function E(){var e;try{e=document.activeElement}catch(t){e=document.body||null}while(e&&e.shadowRoot&&e.shadowRoot.activeElement)e=e.shadowRoot.activeElement;return e}function W(e,t){var r=e.className;k(t).test(r)||(e.className+=(r?" ":"")+t)}function H(e,t){var r=e.split(" ");for(var n=0;n<r.length;n++)r[n]&&!k(r[n]).test(t)&&(t+=" "+r[n]);return t}var I=function(e){e.select()};v?I=function(e){e.selectionStart=0;e.selectionEnd=e.value.length}:a&&(I=function(e){try{e.select()}catch(e){}});function P(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function z(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||false===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function F(e,t,r,n,i){if(null==t){t=e.search(/[^\s\u00a0]/);-1==t&&(t=e.length)}for(var o=n||0,a=i||0;;){var l=e.indexOf("\t",o);if(l<0||l>=t)return a+(t-o);a+=l-o;a+=r-a%r;o=l+1}}var B=function(){this.id=null};B.prototype.set=function(e,t){clearTimeout(this.id);this.id=setTimeout(t,e)};function R(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}var q=30;var G={toString:function(){return"CodeMirror.Pass"}};var V={scroll:false};var U={origin:"*mouse"};var _={origin:"+move"};function X(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var a=o-n;if(o==e.length||i+a>=t)return n+Math.min(a,t-i);i+=o-n;i+=r-i%r;n=o+1;if(i>=t)return n}}var Y=[""];function K(e){while(Y.length<=e)Y.push(j(Y)+" ");return Y[e]}function j(e){return e[e.length-1]}function $(e,t){var r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function Z(e,t,r){var n=0,i=r(t);while(n<e.length&&r(e[n])<=i)n++;e.splice(n,0,t)}function Q(){}function J(e,t){var r;if(Object.create)r=Object.create(e);else{Q.prototype=e;r=new Q}t&&z(t,r);return r}var ee=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function re(e,t){if(!t)return te(e);if(t.source.indexOf("\\w")>-1&&te(e))return true;return t.test(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return false;return true}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&ie.test(e)}function ae(e,t,r){while((r<0?t>0:t<e.length)&&oe(e.charAt(t)))t+=r;return t}function le(e,t,r){for(;;){if(Math.abs(t-r)<=1)return e(t)?t:r;var n=Math.floor((t+r)/2);e(n)?r=n:t=n}}function se(e,t,n){var i=this;this.input=n;i.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler");i.scrollbarFiller.setAttribute("cm-not-content","true");i.gutterFiller=A("div",null,"CodeMirror-gutter-filler");i.gutterFiller.setAttribute("cm-not-content","true");i.lineDiv=N("div",null,"CodeMirror-code");i.selectionDiv=A("div",null,null,"position: relative; z-index: 1");i.cursorDiv=A("div",null,"CodeMirror-cursors");i.measure=A("div",null,"CodeMirror-measure");i.lineMeasure=A("div",null,"CodeMirror-measure");i.lineSpace=N("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=N("div",[i.lineSpace],"CodeMirror-lines");i.mover=A("div",[o],null,"position: relative");i.sizer=A("div",[i.mover],"CodeMirror-sizer");i.sizerWidth=null;i.heightForcer=A("div",null,null,"position: absolute; height: "+q+"px; width: 1px;");i.gutters=A("div",null,"CodeMirror-gutters");i.lineGutter=null;i.scroller=A("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll");i.scroller.setAttribute("tabIndex","-1");i.wrapper=A("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror");if(a&&l<8){i.gutters.style.zIndex=-1;i.scroller.style.paddingRight=0}s||r&&m||(i.scroller.draggable=true);e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper));i.viewFrom=i.viewTo=t.first;i.reportedViewFrom=i.reportedViewTo=t.first;i.view=[];i.renderedView=null;i.externalMeasured=null;i.viewOffset=0;i.lastWrapHeight=i.lastWrapWidth=0;i.updateLineNumbers=null;i.nativeBarWidth=i.barHeight=i.barWidth=0;i.scrollbarsClipped=false;i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null;i.alignWidgets=false;i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null;i.maxLine=null;i.maxLineLength=0;i.maxLineChanged=false;i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null;i.shift=false;i.selForContextMenu=null;i.activeTouch=null;n.init(i)}function ue(e,t){t-=e.first;if(t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");var r=e;while(!r.lines)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function ce(e,t,r){var n=[],i=t.line;e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch));i==t.line&&(o=o.slice(t.ch));n.push(o);++i});return n}function fe(e,t,r){var n=[];e.iter(t,r,function(e){n.push(e.text)});return n}function he(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function de(e){if(null==e.parent)return null;var t=e.parent,r=R(t.lines,e);for(var n=t.parent;n;t=n,n=n.parent)for(var i=0;;++i){if(n.children[i]==t)break;r+=n.children[i].chunkSize()}return r+t.first}function pe(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o;r+=i.chunkSize()}return r}while(!e.lines);var a=0;for(;a<e.lines.length;++a){var l=e.lines[a],s=l.height;if(t<s)break;t-=s}return r+a}function ve(e,t){return t>=e.first&&t<e.first+e.size}function ge(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function me(e,t,r){void 0===r&&(r=null);if(!(this instanceof me))return new me(e,t,r);this.line=e;this.ch=t;this.sticky=r}function ye(e,t){return e.line-t.line||e.ch-t.ch}function be(e,t){return e.sticky==t.sticky&&0==ye(e,t)}function we(e){return me(e.line,e.ch)}function xe(e,t){return ye(e,t)<0?t:e}function Ce(e,t){return ye(e,t)<0?e:t}function Se(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ke(e,t){if(t.line<e.first)return me(e.first,0);var r=e.first+e.size-1;if(t.line>r)return me(r,ue(e,r).text.length);return Te(t,ue(e,t.line).text.length)}function Te(e,t){var r=e.ch;return null==r||r>t?me(e.line,t):r<0?me(e.line,0):e}function Le(e,t){var r=[];for(var n=0;n<t.length;n++)r[n]=ke(e,t[n]);return r}var Me=false;var Ae=false;function Ne(){Me=true}function Oe(){Ae=true}function De(e,t,r){this.marker=e;this.from=t;this.to=r}function Ee(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function We(e,t){var r;for(var n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function He(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t];t.marker.attachLine(e)}function Ie(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(l||o.from==t&&"bookmark"==a.type&&(!r||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new De(a,o.from,s?null:o.to))}}return n}function Pe(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(l||o.from==t&&"bookmark"==a.type&&(!r||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new De(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return n}function ze(e,t){if(t.full)return null;var r=ve(e,t.from.line)&&ue(e,t.from.line).markedSpans;var n=ve(e,t.to.line)&&ue(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,a=0==ye(t.from,t.to);var l=Ie(r,i,a);var s=Pe(n,o,a);var u=1==t.text.length,c=j(t.text).length+(u?i:0);if(l)for(var f=0;f<l.length;++f){var h=l[f];if(null==h.to){var d=Ee(s,h.marker);d?u&&(h.to=null==d.to?null:d.to+c):h.to=i}}if(s)for(var p=0;p<s.length;++p){var v=s[p];null!=v.to&&(v.to+=c);if(null==v.from){var g=Ee(l,v.marker);if(!g){v.from=c;u&&(l||(l=[])).push(v)}}else{v.from+=c;u&&(l||(l=[])).push(v)}}l&&(l=Fe(l));s&&s!=l&&(s=Fe(s));var m=[l];if(!u){var y=t.text.length-2,b;if(y>0&&l)for(var w=0;w<l.length;++w)null==l[w].to&&(b||(b=[])).push(new De(l[w].marker,null,null));for(var x=0;x<y;++x)m.push(b);m.push(s)}return m}function Fe(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&false!==r.marker.clearWhenEmpty&&e.splice(t--,1)}if(!e.length)return null;return e}function Be(e,t,r){var n=null;e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=R(n,r)||(n||(n=[])).push(r)}});if(!n)return null;var i=[{from:t,to:r}];for(var o=0;o<n.length;++o){var a=n[o],l=a.find(0);for(var s=0;s<i.length;++s){var u=i[s];if(ye(u.to,l.from)<0||ye(u.from,l.to)>0)continue;var c=[s,1],f=ye(u.from,l.from),h=ye(u.to,l.to);(f<0||!a.inclusiveLeft&&!f)&&c.push({from:u.from,to:l.from});(h>0||!a.inclusiveRight&&!h)&&c.push({from:l.to,to:u.to});i.splice.apply(i,c);s+=c.length-3}}return i}function Re(e){var t=e.markedSpans;if(!t)return;for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}function qe(e,t){if(!t)return;for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}function Ge(e){return e.inclusiveLeft?-1:0}function Ve(e){return e.inclusiveRight?1:0}function Ue(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find();var o=ye(n.from,i.from)||Ge(e)-Ge(t);if(o)return-o;var a=ye(n.to,i.to)||Ve(e)-Ve(t);if(a)return a;return t.id-e.id}function _e(e,t){var r=Ae&&e.markedSpans,n;if(r)for(var i=void 0,o=0;o<r.length;++o){i=r[o];i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||Ue(n,i.marker)<0)&&(n=i.marker)}return n}function Xe(e){return _e(e,true)}function Ye(e){return _e(e,false)}function Ke(e,t,r,n,i){var o=ue(e,t);var a=Ae&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(!s.marker.collapsed)continue;var u=s.marker.find(0);var c=ye(u.from,r)||Ge(s.marker)-Ge(i);var f=ye(u.to,n)||Ve(s.marker)-Ve(i);if(c>=0&&f<=0||c<=0&&f>=0)continue;if(c<=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?ye(u.to,r)>=0:ye(u.to,r)>0)||c>=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?ye(u.from,n)<=0:ye(u.from,n)<0))return true}}function je(e){var t;while(t=Xe(e))e=t.find(-1,true).line;return e}function $e(e){var t;while(t=Ye(e))e=t.find(1,true).line;return e}function Ze(e){var t,r;while(t=Ye(e)){e=t.find(1,true).line;(r||(r=[])).push(e)}return r}function Qe(e,t){var r=ue(e,t),n=je(r);if(r==n)return t;return de(n)}function Je(e,t){if(t>e.lastLine())return t;var r=ue(e,t),n;if(!et(e,r))return t;while(n=Ye(r))r=n.find(1,true).line;return de(r)+1}function et(e,t){var r=Ae&&t.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i){n=r[i];if(!n.marker.collapsed)continue;if(null==n.from)return true;if(n.marker.widgetNode)continue;if(0==n.from&&n.marker.inclusiveLeft&&tt(e,t,n))return true}}function tt(e,t,r){if(null==r.to){var n=r.marker.find(1,true);return tt(e,n.line,Ee(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return true;for(var i=void 0,o=0;o<t.markedSpans.length;++o){i=t.markedSpans[o];if(i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&tt(e,t,i))return true}}function rt(e){e=je(e);var t=0,r=e.parent;for(var n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==r)break;t+=l.height}return t}function nt(e){if(0==e.height)return 0;var t=e.text.length,r,n=e;while(r=Xe(n)){var i=r.find(0,true);n=i.from.line;t+=i.from.ch-i.to.ch}n=e;while(r=Ye(n)){var o=r.find(0,true);t-=n.text.length-o.from.ch;n=o.to.line;t+=n.text.length-o.to.ch}return t}function it(e){var t=e.display,r=e.doc;t.maxLine=ue(r,r.first);t.maxLineLength=nt(t.maxLine);t.maxLineChanged=true;r.iter(function(e){var r=nt(e);if(r>t.maxLineLength){t.maxLineLength=r;t.maxLine=e}})}function ot(e,t,r,n){if(!e)return n(t,r,"ltr");var i=false;for(var o=0;o<e.length;++o){var a=e[o];if(a.from<r&&a.to>t||t==r&&a.to==t){n(Math.max(a.from,t),Math.min(a.to,r),1==a.level?"rtl":"ltr");i=true}}i||n(t,r,"ltr")}var at=null;function lt(e,t,r){var n;at=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==r?n=i:at=i);o.from==t&&(o.from!=o.to&&"before"!=r?n=i:at=i)}return null!=n?n:at}var st=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function r(r){return r<=247?e.charAt(r):1424<=r&&r<=1524?"R":1536<=r&&r<=1785?t.charAt(r-1536):1774<=r&&r<=2220?"r":8192<=r&&r<=8203?"w":8204==r?"b":"L"}var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var i=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,l=/[1n]/;function s(e,t,r){this.level=e;this.from=t;this.to=r}return function(e,t){var u="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!n.test(e))return false;var c=e.length,f=[];for(var h=0;h<c;++h)f.push(r(e.charCodeAt(h)));for(var d=0,p=u;d<c;++d){var v=f[d];"m"==v?f[d]=p:p=v}for(var g=0,m=u;g<c;++g){var y=f[g];if("1"==y&&"r"==m)f[g]="n";else if(o.test(y)){m=y;"r"==y&&(f[g]="R")}}for(var b=1,w=f[0];b<c-1;++b){var x=f[b];"+"==x&&"1"==w&&"1"==f[b+1]?f[b]="1":","!=x||w!=f[b+1]||"1"!=w&&"n"!=w||(f[b]=w);w=x}for(var C=0;C<c;++C){var S=f[C];if(","==S)f[C]="N";else if("%"==S){var k=void 0;for(k=C+1;k<c&&"%"==f[k];++k);var T=C&&"!"==f[C-1]||k<c&&"1"==f[k]?"1":"N";for(var L=C;L<k;++L)f[L]=T;C=k-1}}for(var M=0,A=u;M<c;++M){var N=f[M];"L"==A&&"1"==N?f[M]="L":o.test(N)&&(A=N)}for(var O=0;O<c;++O)if(i.test(f[O])){var D=void 0;for(D=O+1;D<c&&i.test(f[D]);++D);var E="L"==(O?f[O-1]:u);var W="L"==(D<c?f[D]:u);var H=E==W?E?"L":"R":u;for(var I=O;I<D;++I)f[I]=H;O=D-1}var P=[],z;for(var F=0;F<c;)if(a.test(f[F])){var B=F;for(++F;F<c&&a.test(f[F]);++F);P.push(new s(0,B,F))}else{var R=F,q=P.length;for(++F;F<c&&"L"!=f[F];++F);for(var G=R;G<F;)if(l.test(f[G])){R<G&&P.splice(q,0,new s(1,R,G));var V=G;for(++G;G<F&&l.test(f[G]);++G);P.splice(q,0,new s(2,V,G));R=G}else++G;R<F&&P.splice(q,0,new s(1,R,F))}if(1==P[0].level&&(z=e.match(/^\s+/))){P[0].from=z[0].length;P.unshift(new s(0,0,z[0].length))}if(1==j(P).level&&(z=e.match(/\s+$/))){j(P).to-=z[0].length;P.push(new s(0,c-z[0].length,c))}return"rtl"==t?P.reverse():P}}();function ut(e,t){var r=e.order;null==r&&(r=e.order=st(e.text,t));return r}function ct(e,t,r){var n=ae(e.text,t+r,r);return n<0||n>e.text.length?null:n}function ft(e,t,r){var n=ct(e,t.ch,r);return null==n?null:new me(t.line,n,r<0?"after":"before")}function ht(e,t,r,n,i){if(e){var o=ut(r,t.doc.direction);if(o){var a=i<0?j(o):o[0];var l=i<0==(1==a.level);var s=l?"after":"before";var u;if(a.level>0){var c=on(t,r);u=i<0?r.text.length-1:0;var f=an(t,c,u).top;u=le(function(e){return an(t,c,e).top==f},i<0==(1==a.level)?a.from:a.to-1,u);"before"==s&&(u=ct(r,u,1))}else u=i<0?a.to:a.from;return new me(n,u,s)}}return new me(n,i<0?r.text.length:0,i<0?"before":"after")}function dt(e,t,r,n){var i=ut(t,e.doc.direction);if(!i)return ft(t,r,n);if(r.ch>=t.text.length){r.ch=t.text.length;r.sticky="before"}else if(r.ch<=0){r.ch=0;r.sticky="after"}var o=lt(i,r.ch,r.sticky),a=i[o];if("ltr"==e.doc.direction&&a.level%2==0&&(n>0?a.to>r.ch:a.from<r.ch))return ft(t,r,n);var l=function(e,r){return ct(t,e instanceof me?e.ch:e,r)};var s;var u=function(r){if(!e.options.lineWrapping)return{begin:0,end:t.text.length};s=s||on(e,t);return Tn(e,t,s,r)};var c=u("before"==r.sticky?l(r,-1):r.ch);if("rtl"==e.doc.direction||1==a.level){var f=1==a.level==n<0;var h=l(r,f?1:-1);if(null!=h&&(f?h<=a.to&&h<=c.end:h>=a.from&&h>=c.begin)){var d=f?"before":"after";return new me(r.line,h,d)}}var p=function(e,t,n){var o=function(e,t){return t?new me(r.line,l(e,1),"before"):new me(r.line,e,"after")};for(;e>=0&&e<i.length;e+=t){var a=i[e];var s=t>0==(1!=a.level);var u=s?n.begin:l(n.end,-1);if(a.from<=u&&u<a.to)return o(u,s);u=s?a.from:l(a.to,-1);if(n.begin<=u&&u<n.end)return o(u,s)}};var v=p(o+n,n,c);if(v)return v;var g=n>0?c.end:l(c.begin,-1);if(null!=g&&!(n>0&&g==t.text.length)){v=p(n>0?0:i.length-1,n,u(g));if(v)return v}return null}var pt=[];var vt=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,false);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||pt).concat(r)}};function gt(e,t){return e._handlers&&e._handlers[t]||pt}function mt(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,false);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var o=R(i,r);o>-1&&(n[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function yt(e,t){var r=gt(e,t);if(!r.length)return;var n=Array.prototype.slice.call(arguments,2);for(var i=0;i<r.length;++i)r[i].apply(null,n)}function bt(e,t,r){"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=true}});yt(e,r||t.type,e,t);return Tt(t)||t.codemirrorIgnore}function wt(e){var t=e._handlers&&e._handlers.cursorActivity;if(!t)return;var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var n=0;n<t.length;++n)-1==R(r,t[n])&&r.push(t[n])}function xt(e,t){return gt(e,t).length>0}function Ct(e){e.prototype.on=function(e,t){vt(this,e,t)};e.prototype.off=function(e,t){mt(this,e,t)}}function St(e){e.preventDefault?e.preventDefault():e.returnValue=false}function kt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=true}function Tt(e){return null!=e.defaultPrevented?e.defaultPrevented:false==e.returnValue}function Lt(e){St(e);kt(e)}function Mt(e){return e.target||e.srcElement}function At(e){var t=e.which;null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2));y&&e.ctrlKey&&1==t&&(t=3);return t}var Nt=function(){if(a&&l<9)return false;var e=A("div");return"draggable"in e||"dragDrop"in e}();var Ot;function Dt(e){if(null==Ot){var t=A("span","​");M(e,A("span",[t,document.createTextNode("x")]));0!=e.firstChild.offsetHeight&&(Ot=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&l<8))}var r=Ot?A("span","​"):A("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");r.setAttribute("cm-text","");return r}var Et;function Wt(e){if(null!=Et)return Et;var t=M(e,document.createTextNode("AخA"));var r=O(t,0,1).getBoundingClientRect();var n=O(t,1,2).getBoundingClientRect();L(e);if(!r||r.left==r.right)return false;return Et=n.right-r.right<3}var Ht=3!="\n\nb".split(/\n/).length?function(e){var t=0,r=[],n=e.length;while(t<=n){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i);var a=o.indexOf("\r");if(-1!=a){r.push(o.slice(0,a));t+=a+1}else{r.push(o);t=i+1}}return r}:function(e){return e.split(/\r\n?|\n/)};var It=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return false}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}if(!t||t.parentElement()!=e)return false;return 0!=t.compareEndPoints("StartToEnd",t)};var Pt=function(){var e=A("div");if("oncopy"in e)return true;e.setAttribute("oncopy","return;");return"function"==typeof e.oncopy}();var zt=null;function Ft(e){if(null!=zt)return zt;var t=M(e,A("span","x"));var r=t.getBoundingClientRect();var n=O(t,0,1).getBoundingClientRect();return zt=Math.abs(r.left-n.left)>1}var Bt={};var Rt={};function qt(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2));Bt[e]=t}function Gt(e,t){Rt[e]=t}function Vt(e){if("string"==typeof e&&Rt.hasOwnProperty(e))e=Rt[e];else if(e&&"string"==typeof e.name&&Rt.hasOwnProperty(e.name)){var t=Rt[e.name];"string"==typeof t&&(t={name:t});e=J(t,e);e.name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Vt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Vt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ut(e,t){t=Vt(t);var r=Bt[t.name];if(!r)return Ut(e,"text/plain");var n=r(e,t);if(_t.hasOwnProperty(t.name)){var i=_t[t.name];for(var o in i){if(!i.hasOwnProperty(o))continue;n.hasOwnProperty(o)&&(n["_"+o]=n[o]);n[o]=i[o]}}n.name=t.name;t.helperType&&(n.helperType=t.helperType);if(t.modeProps)for(var a in t.modeProps)n[a]=t.modeProps[a];return n}var _t={};function Xt(e,t){var r=_t.hasOwnProperty(e)?_t[e]:_t[e]={};z(t,r)}function Yt(e,t){if(true===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([]));r[n]=i}return r}function Kt(e,t){var r;while(e.innerMode){r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state;e=r.mode}return r||{mode:e,state:t}}function jt(e,t,r){return!e.startState||e.startState(t,r)}var $t=function(e,t,r){this.pos=this.start=0;this.string=e;this.tabSize=t||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=r};$t.prototype.eol=function(){return this.pos>=this.string.length};$t.prototype.sol=function(){return this.pos==this.lineStart};$t.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};$t.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};$t.prototype.eat=function(e){var t=this.string.charAt(this.pos);var r;r="string"==typeof e?t==e:t&&(e.test?e.test(t):e(t));if(r){++this.pos;return t}};$t.prototype.eatWhile=function(e){var t=this.pos;while(this.eat(e));return this.pos>t};$t.prototype.eatSpace=function(){var e=this;var t=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++e.pos;return this.pos>t};$t.prototype.skipToEnd=function(){this.pos=this.string.length};$t.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1){this.pos=t;return true}};$t.prototype.backUp=function(e){this.pos-=e};$t.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)};$t.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)};$t.prototype.match=function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);if(n&&n.index>0)return null;n&&false!==t&&(this.pos+=n[0].length);return n}var i=function(e){return r?e.toLowerCase():e};var o=this.string.substr(this.pos,e.length);if(i(o)==i(e)){false!==t&&(this.pos+=e.length);return true}};$t.prototype.current=function(){return this.string.slice(this.start,this.pos)};$t.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}};$t.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)};var Zt=function(e,t){this.state=e;this.lookAhead=t};var Qt=function(e,t,r,n){this.state=t;this.doc=e;this.line=r;this.maxLookAhead=n||0};Qt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e);return t};Qt.prototype.nextLine=function(){this.line++;this.maxLookAhead>0&&this.maxLookAhead--};Qt.fromSaved=function(e,t,r){return t instanceof Zt?new Qt(e,Yt(e.mode,t.state),r,t.lookAhead):new Qt(e,Yt(e.mode,t),r)};Qt.prototype.save=function(e){var t=false!==e?Yt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Zt(t,this.maxLookAhead):t};function Jt(e,t,r,n){var i=[e.state.modeGen],o={};sr(e,t.text,e.doc.mode,r,function(e,t){return i.push(e,t)},o,n);var a=r.state;var l=function(n){var a=e.state.overlays[n],l=1,s=0;r.state=true;sr(e,t.text,a.mode,r,function(e,t){var r=l;while(s<e){var n=i[l];n>e&&i.splice(l,1,e,i[l+1],n);l+=2;s=Math.min(e,n)}if(!t)return;if(a.opaque){i.splice(r,l-r,e,"overlay "+t);l=r+2}else for(;r<l;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"overlay "+t}},o)};for(var s=0;s<e.state.overlays.length;++s)l(s);r.state=a;return{styles:i,classes:o.bgClass||o.textClass?o:null}}function er(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=tr(e,de(t));var i=t.text.length>e.options.maxHighlightLength&&Yt(e.doc.mode,n.state);var o=Jt(e,t,n);i&&(n.state=i);t.stateAfter=n.save(!i);t.styles=o.styles;o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null);r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function tr(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return new Qt(n,true,t);var o=ur(e,t,r);var a=o>n.first&&ue(n,o-1).stateAfter;var l=a?Qt.fromSaved(n,a,o):new Qt(n,jt(n.mode),o);n.iter(o,t,function(r){rr(e,r.text,l);var n=l.line;r.stateAfter=n==t-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?l.save():null;l.nextLine()});r&&!e.doc.mode.noUpdateFrontier&&(n.modeFrontier=l.line);return l}function rr(e,t,r,n){var i=e.doc.mode;var o=new $t(t,e.options.tabSize,r);o.start=o.pos=n||0;""==t&&nr(i,r.state);while(!o.eol()){ir(i,o,r.state);o.start=o.pos}}function nr(e,t){if(e.blankLine)return e.blankLine(t);if(!e.innerMode)return;var r=Kt(e,t);if(r.mode.blankLine)return r.mode.blankLine(r.state)}function ir(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=Kt(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}var or=function(e,t,r){this.start=e.start;this.end=e.pos;this.string=e.current();this.type=t||null;this.state=r};function ar(e,t,r,n){var i=e.doc,o=i.mode,a;t=ke(i,t);var l=ue(i,t.line),s=tr(e,t.line,r);var u=new $t(l.text,e.options.tabSize,s),c;n&&(c=[]);while((n||u.pos<t.ch)&&!u.eol()){u.start=u.pos;a=ir(o,u,s.state);n&&c.push(new or(u,a,Yt(i.mode,s.state)))}return n?c:new or(u,a,s.state)}function lr(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function sr(e,t,r,n,i,o,a){var l=r.flattenSpans;null==l&&(l=e.options.flattenSpans);var s=0,u=null;var c=new $t(t,e.options.tabSize,n),f;var h=e.options.addModeClass&&[null];""==t&&lr(nr(r,n.state),o);while(!c.eol()){if(c.pos>e.options.maxHighlightLength){l=false;a&&rr(e,t,n,c.pos);c.pos=t.length;f=null}else f=lr(ir(r,c,n.state,h),o);if(h){var d=h[0].name;d&&(f="m-"+(f?d+" "+f:d))}if(!l||u!=f){while(s<c.start){s=Math.min(c.start,s+5e3);i(s,u)}u=f}c.start=c.pos}while(s<c.pos){var p=Math.min(c.pos,s+5e3);i(p,u);s=p}}function ur(e,t,r){var n,i,o=e.doc;var a=e.doc.mode.preciseStartState||r?-1:t-(e.doc.mode.innerMode?1e3:100);for(var l=t;l>a;--l){if(l<=o.first)return o.first;var s=ue(o,l-1),u=s.stateAfter;if(u&&(!r||l+(u instanceof Zt?u.lookAhead:0)<=o.modeFrontier))return l;var c=F(s.text,null,e.options.tabSize);if(null==i||n>c){i=l-1;n=c}}return i}function cr(e,t){e.modeFrontier=Math.min(e.modeFrontier,t);if(e.highlightFrontier<t-10)return;var r=e.first;for(var n=t-1;n>r;n--){var i=ue(e,n).stateAfter;if(i&&(!(i instanceof Zt)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}var fr=function(e,t,r){this.text=e;qe(this,t);this.height=r?r(this):1};fr.prototype.lineNo=function(){return de(this)};Ct(fr);function hr(e,t,r,n){e.text=t;e.stateAfter&&(e.stateAfter=null);e.styles&&(e.styles=null);null!=e.order&&(e.order=null);Re(e);qe(e,r);var i=n?n(e):1;i!=e.height&&he(e,i)}function dr(e){e.parent=null;Re(e)}var pr={};var vr={};function gr(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?vr:pr;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function mr(e,t){var r=N("span",null,null,s?"padding-right: .1px":null);var n={pre:N("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:false,splitSpaces:(a||s)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,l=void 0;n.pos=0;n.addToken=br;Wt(e.display.measure)&&(l=ut(o,e.doc.direction))&&(n.addToken=xr(n.addToken,l));n.map=[];var u=t!=e.display.externalMeasured&&de(o);Sr(o,n,er(e,o,u));if(o.styleClasses){o.styleClasses.bgClass&&(n.bgClass=H(o.styleClasses.bgClass,n.bgClass||""));o.styleClasses.textClass&&(n.textClass=H(o.styleClasses.textClass,n.textClass||""))}0==n.map.length&&n.map.push(0,0,n.content.appendChild(Dt(e.display.measure)));if(0==i){t.measure.map=n.map;t.measure.cache={}}else{(t.measure.maps||(t.measure.maps=[])).push(n.map);(t.measure.caches||(t.measure.caches=[])).push({})}}if(s){var c=n.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}yt(e,"renderLine",e,t.line,n.pre);n.pre.className&&(n.textClass=H(n.pre.className,n.textClass||""));return n}function yr(e){var t=A("span","•","cm-invalidchar");t.title="\\u"+e.charCodeAt(0).toString(16);t.setAttribute("aria-label",t.title);return t}function br(e,t,r,n,i,o,s){if(!t)return;var u=e.splitSpaces?wr(t,e.trailingSpace):t;var c=e.cm.state.specialChars,f=false;var h;if(c.test(t)){h=document.createDocumentFragment();var d=0;while(true){c.lastIndex=d;var p=c.exec(t);var v=p?p.index-d:t.length-d;if(v){var g=document.createTextNode(u.slice(d,d+v));a&&l<9?h.appendChild(A("span",[g])):h.appendChild(g);e.map.push(e.pos,e.pos+v,g);e.col+=v;e.pos+=v}if(!p)break;d+=v+1;var m=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;m=h.appendChild(A("span",K(b),"cm-tab"));m.setAttribute("role","presentation");m.setAttribute("cm-text","\t");e.col+=b}else if("\r"==p[0]||"\n"==p[0]){m=h.appendChild(A("span","\r"==p[0]?"␍":"␤","cm-invalidchar"));m.setAttribute("cm-text",p[0]);e.col+=1}else{m=e.cm.options.specialCharPlaceholder(p[0]);m.setAttribute("cm-text",p[0]);a&&l<9?h.appendChild(A("span",[m])):h.appendChild(m);e.col+=1}e.map.push(e.pos,e.pos+1,m);e.pos++}}else{e.col+=t.length;h=document.createTextNode(u);e.map.push(e.pos,e.pos+t.length,h);a&&l<9&&(f=true);e.pos+=t.length}e.trailingSpace=32==u.charCodeAt(t.length-1);if(r||n||i||f||s){var w=r||"";n&&(w+=n);i&&(w+=i);var x=A("span",[h],w,s);o&&(x.title=o);return e.content.appendChild(x)}e.content.appendChild(h)}function wr(e,t){if(e.length>1&&!/  /.test(e))return e;var r=t,n="";for(var i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" ");n+=o;r=" "==o}return n}function xr(e,t){return function(r,n,i,o,a,l,s){i=i?i+" cm-force-border":"cm-force-border";var u=r.pos,c=u+n.length;for(;;){var f=void 0;for(var h=0;h<t.length;h++){f=t[h];if(f.to>u&&f.from<=u)break}if(f.to>=c)return e(r,n,i,o,a,l,s);e(r,n.slice(0,f.to-u),i,o,null,l,s);o=null;n=n.slice(f.to-u);u=f.to}}}function Cr(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i);if(!n&&e.cm.display.input.needsContentAttribute){i||(i=e.content.appendChild(document.createElement("span")));i.setAttribute("cm-marker",r.id)}if(i){e.cm.display.input.setUneditable(i);e.content.appendChild(i)}e.pos+=t;e.trailingSpace=false}function Sr(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(!n){for(var a=1;a<r.length;a+=2)t.addToken(t,i.slice(o,o=r[a]),gr(r[a+1],t.cm.options));return}var l=i.length,s=0,u=1,c="",f,h;var d=0,p,v,g,m,y;for(;;){if(d==s){p=v=g=m=h="";y=null;d=Infinity;var b=[],w=void 0;for(var x=0;x<n.length;++x){var C=n[x],S=C.marker;if("bookmark"==S.type&&C.from==s&&S.widgetNode)b.push(S);else if(C.from<=s&&(null==C.to||C.to>s||S.collapsed&&C.to==s&&C.from==s)){if(null!=C.to&&C.to!=s&&d>C.to){d=C.to;v=""}S.className&&(p+=" "+S.className);S.css&&(h=(h?h+";":"")+S.css);S.startStyle&&C.from==s&&(g+=" "+S.startStyle);S.endStyle&&C.to==d&&(w||(w=[])).push(S.endStyle,C.to);S.title&&!m&&(m=S.title);S.collapsed&&(!y||Ue(y.marker,S)<0)&&(y=C)}else C.from>s&&d>C.from&&(d=C.from)}if(w)for(var k=0;k<w.length;k+=2)w[k+1]==d&&(v+=" "+w[k]);if(!y||y.from==s)for(var T=0;T<b.length;++T)Cr(t,0,b[T]);if(y&&(y.from||0)==s){Cr(t,(null==y.to?l+1:y.to)-s,y.marker,null==y.from);if(null==y.to)return;y.to==s&&(y=false)}}if(s>=l)break;var L=Math.min(l,d);while(true){if(c){var M=s+c.length;if(!y){var A=M>L?c.slice(0,L-s):c;t.addToken(t,A,f?f+p:p,g,s+A.length==d?v:"",m,h)}if(M>=L){c=c.slice(L-s);s=L;break}s=M;g=""}c=i.slice(o,o=r[u++]);f=gr(r[u++],t.cm.options)}}}function kr(e,t,r){this.line=t;this.rest=Ze(t);this.size=this.rest?de(j(this.rest))-r+1:1;this.node=this.text=null;this.hidden=et(e,t)}function Tr(e,t,r){var n=[],i;for(var o=t;o<r;o=i){var a=new kr(e.doc,ue(e.doc,o),o);i=o+a.size;n.push(a)}return n}var Lr=null;function Mr(e){Lr?Lr.ops.push(e):e.ownsGroup=Lr={ops:[e],delayedCallbacks:[]}}function Ar(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)while(i.cursorActivityCalled<i.cursorActivityHandlers.length)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}function Nr(e,t){var r=e.ownsGroup;if(!r)return;try{Ar(r)}finally{Lr=null;t(r)}}var Or=null;function Dr(e,t){var r=gt(e,t);if(!r.length)return;var n=Array.prototype.slice.call(arguments,2),i;if(Lr)i=Lr.delayedCallbacks;else if(Or)i=Or;else{i=Or=[];setTimeout(Er,0)}var o=function(e){i.push(function(){return r[e].apply(null,n)})};for(var a=0;a<r.length;++a)o(a)}function Er(){var e=Or;Or=null;for(var t=0;t<e.length;++t)e[t]()}function Wr(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?zr(e,t):"gutter"==o?Br(e,t,r,n):"class"==o?Fr(e,t):"widget"==o&&Rr(e,t,n)}t.changes=null}function Hr(e){if(e.node==e.text){e.node=A("div",null,null,"position: relative");e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text);e.node.appendChild(e.text);a&&l<8&&(e.node.style.zIndex=2)}return e.node}function Ir(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;r&&(r+=" CodeMirror-linebackground");if(t.background)if(r)t.background.className=r;else{t.background.parentNode.removeChild(t.background);t.background=null}else if(r){var n=Hr(t);t.background=n.insertBefore(A("div",null,r),n.firstChild);e.display.input.setUneditable(t.background)}}function Pr(e,t){var r=e.display.externalMeasured;if(r&&r.line==t.line){e.display.externalMeasured=null;t.measure=r.measure;return r.built}return mr(e,t)}function zr(e,t){var r=t.text.className;var n=Pr(e,t);t.text==t.node&&(t.node=n.pre);t.text.parentNode.replaceChild(n.pre,t.text);t.text=n.pre;if(n.bgClass!=t.bgClass||n.textClass!=t.textClass){t.bgClass=n.bgClass;t.textClass=n.textClass;Fr(e,t)}else r&&(t.text.className=r)}function Fr(e,t){Ir(e,t);t.line.wrapClass?Hr(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function Br(e,t,r,n){if(t.gutter){t.node.removeChild(t.gutter);t.gutter=null}if(t.gutterBackground){t.node.removeChild(t.gutterBackground);t.gutterBackground=null}if(t.line.gutterClass){var i=Hr(t);t.gutterBackground=A("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px");e.display.input.setUneditable(t.gutterBackground);i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=Hr(t);var l=t.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");e.display.input.setUneditable(l);a.insertBefore(l,t.text);t.line.gutterClass&&(l.className+=" "+t.line.gutterClass);!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(A("div",ge(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px")));if(o)for(var s=0;s<e.options.gutters.length;++s){var u=e.options.gutters[s],c=o.hasOwnProperty(u)&&o[u];c&&l.appendChild(A("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[u]+"px; width: "+n.gutterWidth[u]+"px"))}}}function Rr(e,t,r){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild,i=void 0;n;n=i){i=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}Gr(e,t,r)}function qr(e,t,r,n){var i=Pr(e,t);t.text=t.node=i.pre;i.bgClass&&(t.bgClass=i.bgClass);i.textClass&&(t.textClass=i.textClass);Fr(e,t);Br(e,t,r,n);Gr(e,t,n);return t.node}function Gr(e,t,r){Vr(e,t.line,t,r,true);if(t.rest)for(var n=0;n<t.rest.length;n++)Vr(e,t.rest[n],t,r,false)}function Vr(e,t,r,n,i){if(!t.widgets)return;var o=Hr(r);for(var a=0,l=t.widgets;a<l.length;++a){var s=l[a],u=A("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||u.setAttribute("cm-ignore-events","true");Ur(s,u,r,n);e.display.input.setUneditable(u);i&&s.above?o.insertBefore(u,r.gutter||r.text):o.appendChild(u);Dr(s,"redraw")}}function Ur(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px";if(!e.coverGutter){i-=n.gutterTotalWidth;t.style.paddingLeft=n.gutterTotalWidth+"px"}t.style.width=i+"px"}if(e.coverGutter){t.style.zIndex=5;t.style.position="relative";e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px")}}function _r(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;");e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;");M(t.display.measure,A("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function Xr(e,t){for(var r=Mt(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return true}function Yr(e){return e.lineSpace.offsetTop}function Kr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function jr(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=M(e.measure,A("pre","x"));var r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle;var n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n);return n}function $r(e){return q-e.display.nativeBarWidth}function Zr(e){return e.display.scroller.clientWidth-$r(e)-e.display.barWidth}function Qr(e){return e.display.scroller.clientHeight-$r(e)-e.display.barHeight}function Jr(e,t,r){var n=e.options.lineWrapping;var i=n&&Zr(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;var a=t.text.firstChild.getClientRects();for(var l=0;l<a.length-1;l++){var s=a[l],u=a[l+1];Math.abs(s.bottom-u.bottom)>2&&o.push((s.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}function en(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(de(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:true}}function tn(e,t){t=je(t);var r=de(t);var n=e.display.externalMeasured=new kr(e.doc,t,r);n.lineN=r;var i=n.built=mr(e,n);n.text=i.pre;M(e.display.lineMeasure,i.pre);return n}function rn(e,t,r,n){return an(e,on(e,t),r,n)}function nn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[In(e,t)];var r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size)return r}function on(e,t){var r=de(t);var n=nn(e,r);if(n&&!n.text)n=null;else if(n&&n.changes){Wr(e,n,r,On(e));e.curOp.forceUpdate=true}n||(n=tn(e,t));var i=en(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:false}}function an(e,t,r,n,i){t.before&&(r=-1);var o=r+(n||""),a;if(t.cache.hasOwnProperty(o))a=t.cache[o];else{t.rect||(t.rect=t.view.text.getBoundingClientRect());if(!t.hasHeights){Jr(e,t.view,t.rect);t.hasHeights=true}a=cn(e,t,r,n);a.bogus||(t.cache[o]=a)}return{left:a.left,right:a.right,top:i?a.rtop:a.top,bottom:i?a.rbottom:a.bottom}}var ln={left:0,right:0,top:0,bottom:0};function sn(e,t,r){var n,i,o,a,l,s;for(var u=0;u<e.length;u+=3){l=e[u];s=e[u+1];if(t<l){i=0;o=1;a="left"}else if(t<s){i=t-l;o=i+1}else if(u==e.length-3||t==s&&e[u+3]>t){o=s-l;i=o-1;t>=s&&(a="right")}if(null!=i){n=e[u+2];l==s&&r==(n.insertLeft?"left":"right")&&(a=r);if("left"==r&&0==i)while(u&&e[u-2]==e[u-3]&&e[u-1].insertLeft){n=e[2+(u-=3)];a="left"}if("right"==r&&i==s-l)while(u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft){n=e[(u+=3)+2];a="right"}break}}return{node:n,start:i,end:o,collapse:a,coverStart:l,coverEnd:s}}function un(e,t){var r=ln;if("left"==t){for(var n=0;n<e.length;n++)if((r=e[n]).left!=r.right)break}else for(var i=e.length-1;i>=0;i--)if((r=e[i]).left!=r.right)break;return r}function cn(e,t,r,n){var i=sn(t.map,r,n);var o=i.node,s=i.start,u=i.end,c=i.collapse;var f;if(3==o.nodeType){for(var h=0;h<4;h++){while(s&&oe(t.line.text.charAt(i.coverStart+s)))--s;while(i.coverStart+u<i.coverEnd&&oe(t.line.text.charAt(i.coverStart+u)))++u;f=a&&l<9&&0==s&&u==i.coverEnd-i.coverStart?o.parentNode.getBoundingClientRect():un(O(o,s,u).getClientRects(),n);if(f.left||f.right||0==s)break;u=s;s-=1;c="right"}a&&l<11&&(f=fn(e.display.measure,f))}else{s>0&&(c=n="right");var d;f=e.options.lineWrapping&&(d=o.getClientRects()).length>1?d["right"==n?d.length-1:0]:o.getBoundingClientRect()}if(a&&l<9&&!s&&(!f||!f.left&&!f.right)){var p=o.parentNode.getClientRects()[0];f=p?{left:p.left,right:p.left+Nn(e.display),top:p.top,bottom:p.bottom}:ln}var v=f.top-t.rect.top,g=f.bottom-t.rect.top;var m=(v+g)/2;var y=t.view.measure.heights;var b=0;for(;b<y.length-1;b++)if(m<y[b])break;var w=b?y[b-1]:0,x=y[b];var C={left:("right"==c?f.right:f.left)-t.rect.left,right:("left"==c?f.left:f.right)-t.rect.left,top:w,bottom:x};f.left||f.right||(C.bogus=true);if(!e.options.singleCursorHeightPerLine){C.rtop=v;C.rbottom=g}return C}function fn(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ft(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI;var n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function hn(e){if(e.measure){e.measure.cache={};e.measure.heights=null;if(e.rest)for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}}function dn(e){e.display.externalMeasure=null;L(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)hn(e.display.view[t])}function pn(e){dn(e);e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null;e.options.lineWrapping||(e.display.maxLineChanged=true);e.display.lineNumChars=null}function vn(){if(c&&g)return-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft));return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function gn(){if(c&&g)return-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop));return window.pageYOffset||(document.documentElement||document.body).scrollTop}function mn(e,t,r,n,i){if(!i&&t.widgets)for(var o=0;o<t.widgets.length;++o)if(t.widgets[o].above){var a=_r(t.widgets[o]);r.top+=a;r.bottom+=a}if("line"==n)return r;n||(n="local");var l=rt(t);"local"==n?l+=Yr(e.display):l-=e.display.viewOffset;if("page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+("window"==n?0:gn());var u=s.left+("window"==n?0:vn());r.left+=u;r.right+=u}r.top+=l;r.bottom+=l;return r}function yn(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r){n-=vn();i-=gn()}else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left;i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:n-a.left,top:i-a.top}}function bn(e,t,r,n,i){n||(n=ue(e.doc,t.line));return mn(e,n,rn(e,n,t.ch,i),r)}function wn(e,t,r,n,i,o){n=n||ue(e.doc,t.line);i||(i=on(e,n));function a(t,a){var l=an(e,i,t,a?"right":"left",o);a?l.left=l.right:l.right=l.left;return mn(e,n,l,r)}var l=ut(n,e.doc.direction),s=t.ch,u=t.sticky;if(s>=n.text.length){s=n.text.length;u="before"}else if(s<=0){s=0;u="after"}if(!l)return a("before"==u?s-1:s,"before"==u);function c(e,t,r){var n=l[t],i=n.level%2!=0;return a(r?e-1:e,i!=r)}var f=lt(l,s,u);var h=at;var d=c(s,f,"before"==u);null!=h&&(d.other=c(s,h,"before"!=u));return d}function xn(e,t){var r=0;t=ke(e.doc,t);e.options.lineWrapping||(r=Nn(e.display)*t.ch);var n=ue(e.doc,t.line);var i=rt(n)+Yr(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function Cn(e,t,r,n,i){var o=me(e,t,r);o.xRel=i;n&&(o.outside=true);return o}function Sn(e,t,r){var n=e.doc;r+=e.display.viewOffset;if(r<0)return Cn(n.first,0,null,true,-1);var i=pe(n,r),o=n.first+n.size-1;if(i>o)return Cn(n.first+n.size-1,ue(n,o).text.length,null,true,1);t<0&&(t=0);var a=ue(n,i);for(;;){var l=Ln(e,a,i,t,r);var s=Ye(a);var u=s&&s.find(0,true);if(!s||!(l.ch>u.from.ch||l.ch==u.from.ch&&l.xRel>0))return l;i=de(a=u.to.line)}}function kn(e,t,r,n){var i=function(n){return mn(e,t,an(e,r,n),"line")};var o=t.text.length;var a=le(function(e){return i(e-1).bottom<=n},o,0);o=le(function(e){return i(e).top>n},a,o);return{begin:a,end:o}}function Tn(e,t,r,n){var i=mn(e,t,an(e,r,n),"line").top;return kn(e,t,r,i)}function Ln(e,t,r,n,i){i-=rt(t);var o=0,a=t.text.length;var l=on(e,t);var s;var u=ut(t,e.doc.direction);if(u){if(e.options.lineWrapping){var c;c=kn(e,t,l,i),o=c.begin,a=c.end}s=new me(r,Math.floor(o+(a-o)/2));var f=wn(e,s,"line",t,l).left;var h=f<n?1:-1;var d,p=f-n,v;var g=Math.ceil((a-o)/4);e:do{d=p;v=s;var m=0;for(;m<g;++m){var y=s;s=dt(e,t,s,h);if(null==s||s.ch<o||a<=("before"==s.sticky?s.ch-1:s.ch)){s=y;break e}}p=wn(e,s,"line",t,l).left-n;if(g>1){var b=Math.abs(p-d)/g;g=Math.min(g,Math.ceil(Math.abs(p)/b));h=p<0?1:-1}}while(0!=p&&(g>1||h<0!=p<0&&Math.abs(p)<=Math.abs(d)));if(Math.abs(p)>Math.abs(d)){if(p<0==d<0)throw new Error("Broke out of infinite loop in coordsCharInner");s=v}}else{var w=le(function(r){var o=mn(e,t,an(e,l,r),"line");if(o.top>i){a=Math.min(r,a);return true}return!(o.bottom<=i)&&(o.left>n||!(o.right<n)&&n-o.left<o.right-n)},o,a);w=ae(t.text,w,1);s=new me(r,w,w==a?"before":"after")}var x=wn(e,s,"line",t,l);(i<x.top||x.bottom<i)&&(s.outside=true);s.xRel=n<x.left?-1:n>x.right?1:0;return s}var Mn;function An(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Mn){Mn=A("pre");for(var t=0;t<49;++t){Mn.appendChild(document.createTextNode("x"));Mn.appendChild(A("br"))}Mn.appendChild(document.createTextNode("x"))}M(e.measure,Mn);var r=Mn.offsetHeight/50;r>3&&(e.cachedTextHeight=r);L(e.measure);return r||1}function Nn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=A("span","xxxxxxxxxx");var r=A("pre",[t]);M(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;i>2&&(e.cachedCharWidth=i);return i||10}function On(e){var t=e.display,r={},n={};var i=t.gutters.clientLeft;for(var o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a){r[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i;n[e.options.gutters[a]]=o.clientWidth}return{fixedPos:Dn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function Dn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function En(e){var t=An(e.display),r=e.options.lineWrapping;var n=r&&Math.max(5,e.display.scroller.clientWidth/Nn(e.display)-3);return function(i){if(et(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function Wn(e){var t=e.doc,r=En(e);t.iter(function(e){var t=r(e);t!=e.height&&he(e,t)})}function Hn(e,t,r,n){var i=e.display;if(!r&&"true"==Mt(t).getAttribute("cm-not-content"))return null;var o,a,l=i.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left;a=t.clientY-l.top}catch(t){return null}var s=Sn(e,o,a),u;if(n&&1==s.xRel&&(u=ue(e.doc,s.line).text).length==s.ch){var c=F(u,u.length,e.options.tabSize)-u.length;s=me(s.line,Math.max(0,Math.round((o-jr(e.display).left)/Nn(e.display))-c))}return s}function In(e,t){if(t>=e.display.viewTo)return null;t-=e.display.viewFrom;if(t<0)return null;var r=e.display.view;for(var n=0;n<r.length;n++){t-=r[n].size;if(t<0)return n}}function Pn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function zn(e,t){var r=e.doc,n={};var i=n.cursors=document.createDocumentFragment();var o=n.selection=document.createDocumentFragment();for(var a=0;a<r.sel.ranges.length;a++){if(false===t&&a==r.sel.primIndex)continue;var l=r.sel.ranges[a];if(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)continue;var s=l.empty();(s||e.options.showCursorWhenSelecting)&&Fn(e,l.head,i);s||Bn(e,l,o)}return n}function Fn(e,t,r){var n=wn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine);var i=r.appendChild(A("div"," ","CodeMirror-cursor"));i.style.left=n.left+"px";i.style.top=n.top+"px";i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px";if(n.other){var o=r.appendChild(A("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="";o.style.left=n.other.left+"px";o.style.top=n.other.top+"px";o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function Bn(e,t,r){var n=e.display,i=e.doc;var o=document.createDocumentFragment();var a=jr(e.display),l=a.left;var s=Math.max(n.sizerWidth,Zr(e)-n.sizer.offsetLeft)-a.right;function u(e,t,r,n){t<0&&(t=0);t=Math.round(t);n=Math.round(n);o.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==r?s-e:r)+"px;\n                             height: "+(n-t)+"px"))}function c(t,r,n){var o=ue(i,t);var a=o.text.length;var c,f;function h(r,n){return bn(e,me(t,r),"div",o,n)}ot(ut(o,i.direction),r||0,null==n?a:n,function(e,t,i){var o=h(e,"left"),d,p,v;if(e==t){d=o;p=v=o.left}else{d=h(t-1,"right");if("rtl"==i){var g=o;o=d;d=g}p=o.left;v=d.right}null==r&&0==e&&(p=l);if(d.top-o.top>3){u(p,o.top,null,o.bottom);p=l;o.bottom<d.top&&u(p,o.bottom,null,d.top)}null==n&&t==a&&(v=s);(!c||o.top<c.top||o.top==c.top&&o.left<c.left)&&(c=o);(!f||d.bottom>f.bottom||d.bottom==f.bottom&&d.right>f.right)&&(f=d);p<l+1&&(p=l);u(p,d.top,v-p,d.bottom)});return{start:c,end:f}}var f=t.from(),h=t.to();if(f.line==h.line)c(f.line,f.ch,h.ch);else{var d=ue(i,f.line),p=ue(i,h.line);var v=je(d)==je(p);var g=c(f.line,f.ch,v?d.text.length+1:null).end;var m=c(h.line,v?0:null,h.ch).start;if(v)if(g.top<m.top-2){u(g.right,g.top,null,g.bottom);u(l,m.top,m.left,m.bottom)}else u(g.right,g.top,m.left-g.right,g.bottom);g.bottom<m.top&&u(l,g.bottom,null,m.top)}r.appendChild(o)}function Rn(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var r=true;t.cursorDiv.style.visibility="";e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}function qn(e){if(!e.state.focused){e.display.input.focus();Vn(e)}}function Gn(e){e.state.delayingBlurEvent=true;setTimeout(function(){if(e.state.delayingBlurEvent){e.state.delayingBlurEvent=false;Un(e)}},100)}function Vn(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=false);if("nocursor"==e.options.readOnly)return;if(!e.state.focused){yt(e,"focus",e,t);e.state.focused=true;W(e.display.wrapper,"CodeMirror-focused");if(!e.curOp&&e.display.selForContextMenu!=e.doc.sel){e.display.input.reset();s&&setTimeout(function(){return e.display.input.reset(true)},20)}e.display.input.receivedFocus()}Rn(e)}function Un(e,t){if(e.state.delayingBlurEvent)return;if(e.state.focused){yt(e,"blur",e,t);e.state.focused=false;T(e.display.wrapper,"CodeMirror-focused")}clearInterval(e.display.blinker);setTimeout(function(){e.state.focused||(e.display.shift=false)},150)}function _n(e){var t=e.display;var r=t.lineDiv.offsetTop;for(var n=0;n<t.view.length;n++){var i=t.view[n],o=void 0;if(i.hidden)continue;if(a&&l<8){var s=i.node.offsetTop+i.node.offsetHeight;o=s-r;r=s}else{var u=i.node.getBoundingClientRect();o=u.bottom-u.top}var c=i.line.height-o;o<2&&(o=An(t));if(c>.005||c<-.005){he(i.line,o);Xn(i.line);if(i.rest)for(var f=0;f<i.rest.length;f++)Xn(i.rest[f])}}}function Xn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function Yn(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Yr(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight;var o=pe(t,n),a=pe(t,i);if(r&&r.ensure){var l=r.ensure.from.line,s=r.ensure.to.line;if(l<o){o=l;a=pe(t,rt(ue(t,l))+e.wrapper.clientHeight)}else if(Math.min(s,t.lastLine())>=a){o=pe(t,rt(ue(t,s))-e.wrapper.clientHeight);a=s}}return{from:o,to:Math.max(a,o+1)}}function Kn(e){var t=e.display,r=t.view;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var n=Dn(t)-t.scroller.scrollLeft+e.doc.scrollLeft;var i=t.gutters.offsetWidth,o=n+"px";for(var a=0;a<r.length;a++)if(!r[a].hidden){if(e.options.fixedGutter){r[a].gutter&&(r[a].gutter.style.left=o);r[a].gutterBackground&&(r[a].gutterBackground.style.left=o)}var l=r[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}function jn(e){if(!e.options.lineNumbers)return false;var t=e.doc,r=ge(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(A("div",[A("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var o=i.firstChild.offsetWidth,a=i.offsetWidth-o;n.lineGutter.style.width="";n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-a)+1;n.lineNumWidth=n.lineNumInnerWidth+a;n.lineNumChars=n.lineNumInnerWidth?r.length:-1;n.lineGutter.style.width=n.lineNumWidth+"px";_i(e);return true}return false}function $n(e,t){if(bt(e,"scrollCursorIntoView"))return;var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;t.top+n.top<0?i=true:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=false);if(null!=i&&!p){var o=A("div","​",null,"position: absolute;\n                         top: "+(t.top-r.viewOffset-Yr(e.display))+"px;\n                         height: "+(t.bottom-t.top+$r(e)+r.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o);o.scrollIntoView(i);e.display.lineSpace.removeChild(o)}}function Zn(e,t,r,n){null==n&&(n=0);var i;if(!e.options.lineWrapping&&t==r){t=t.ch?me(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t;r="before"==t.sticky?me(t.line,t.ch+1,"before"):t}for(var o=0;o<5;o++){var a=false;var l=wn(e,t);var s=r&&r!=t?wn(e,r):l;i={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-n,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+n};var u=Jn(e,i);var c=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=u.scrollTop){ai(e,u.scrollTop);Math.abs(e.doc.scrollTop-c)>1&&(a=true)}if(null!=u.scrollLeft){si(e,u.scrollLeft);Math.abs(e.doc.scrollLeft-f)>1&&(a=true)}if(!a)break}return i}function Qn(e,t){var r=Jn(e,t);null!=r.scrollTop&&ai(e,r.scrollTop);null!=r.scrollLeft&&si(e,r.scrollLeft)}function Jn(e,t){var r=e.display,n=An(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop;var o=Qr(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var l=e.doc.height+Kr(r);var s=t.top<n,u=t.bottom>l-n;if(t.top<i)a.scrollTop=s?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(u?l:t.bottom)-o);c!=i&&(a.scrollTop=c)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft;var h=Zr(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0);var d=t.right-t.left>h;d&&(t.right=t.left+h);t.left<10?a.scrollLeft=0:t.left<f?a.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>h+f-3&&(a.scrollLeft=t.right+(d?0:10)-h);return a}function ei(e,t){if(null==t)return;ii(e);e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t}function ti(e){ii(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function ri(e,t,r){null==t&&null==r||ii(e);null!=t&&(e.curOp.scrollLeft=t);null!=r&&(e.curOp.scrollTop=r)}function ni(e,t){ii(e);e.curOp.scrollToPos=t}function ii(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=xn(e,t.from),n=xn(e,t.to);oi(e,r,n,t.margin)}}function oi(e,t,r,n){var i=Jn(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});ri(e,i.scrollLeft,i.scrollTop)}function ai(e,t){if(Math.abs(e.doc.scrollTop-t)<2)return;r||Vi(e,{top:t});li(e,t,true);r&&Vi(e);Ii(e,100)}function li(e,t,r){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t);if(e.display.scroller.scrollTop==t&&!r)return;e.doc.scrollTop=t;e.display.scrollbars.setScrollTop(t);e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t)}function si(e,t,r,n){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth);if((r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n)return;e.doc.scrollLeft=t;Kn(e);e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t);e.display.scrollbars.setScrollLeft(t)}function ui(e){var t=e.display,r=t.gutters.offsetWidth;var n=Math.round(e.doc.height+Kr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+$r(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var ci=function(e,t,r){this.cm=r;var n=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var i=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n);e(i);vt(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")});vt(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")});this.checkedZeroWidth=false;a&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ci.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1;var r=e.scrollHeight>e.clientHeight+1;var n=e.nativeBarWidth;if(r){this.vert.style.display="block";this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(t){this.horiz.style.display="block";this.horiz.style.right=r?n+"px":"0";this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&e.clientHeight>0){0==n&&this.zeroWidthHack();this.checkedZeroWidth=true}return{right:r?n:0,bottom:t?n:0}};ci.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};ci.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};ci.prototype.zeroWidthHack=function(){var e=y&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=e;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new B;this.disableVert=new B};ci.prototype.enableZeroWidthBar=function(e,t,r){e.style.pointerEvents="auto";function n(){var i=e.getBoundingClientRect();var o="vert"==r?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);o!=e?e.style.pointerEvents="none":t.set(1e3,n)}t.set(1e3,n)};ci.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz);e.removeChild(this.vert)};var fi=function(){};fi.prototype.update=function(){return{bottom:0,right:0}};fi.prototype.setScrollLeft=function(){};fi.prototype.setScrollTop=function(){};fi.prototype.clear=function(){};function hi(e,t){t||(t=ui(e));var r=e.display.barWidth,n=e.display.barHeight;di(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++){r!=e.display.barWidth&&e.options.lineWrapping&&_n(e);di(e,ui(e));r=e.display.barWidth;n=e.display.barHeight}}function di(e,t){var r=e.display;var n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px";r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px";r.heightForcer.style.borderBottom=n.bottom+"px solid transparent";if(n.right&&n.bottom){r.scrollbarFiller.style.display="block";r.scrollbarFiller.style.height=n.bottom+"px";r.scrollbarFiller.style.width=n.right+"px"}else r.scrollbarFiller.style.display="";if(n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter){r.gutterFiller.style.display="block";r.gutterFiller.style.height=n.bottom+"px";r.gutterFiller.style.width=t.gutterWidth+"px"}else r.gutterFiller.style.display=""}var pi={native:ci,null:fi};function vi(e){if(e.display.scrollbars){e.display.scrollbars.clear();e.display.scrollbars.addClass&&T(e.display.wrapper,e.display.scrollbars.addClass)}e.display.scrollbars=new pi[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller);vt(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)});t.setAttribute("cm-not-content","true")},function(t,r){"horizontal"==r?si(e,t):ai(e,t)},e);e.display.scrollbars.addClass&&W(e.display.wrapper,e.display.scrollbars.addClass)}var gi=0;function mi(e){e.curOp={cm:e,viewChanged:false,startHeight:e.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++gi};Mr(e.curOp)}function yi(e){var t=e.curOp;Nr(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;bi(e)})}function bi(e){var t=e.ops;for(var r=0;r<t.length;r++)wi(t[r]);for(var n=0;n<t.length;n++)xi(t[n]);for(var i=0;i<t.length;i++)Ci(t[i]);for(var o=0;o<t.length;o++)Si(t[o]);for(var a=0;a<t.length;a++)ki(t[a])}function wi(e){var t=e.cm,r=t.display;Fi(t);e.updateMaxLine&&it(t);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping;e.update=e.mustUpdate&&new zi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function xi(e){e.updatedDisplay=e.mustUpdate&&qi(e.cm,e.update)}function Ci(e){var t=e.cm,r=t.display;e.updatedDisplay&&_n(t);e.barMeasure=ui(t);if(r.maxLineChanged&&!t.options.lineWrapping){e.adjustWidthTo=rn(t,r.maxLine,r.maxLine.text.length).left+3;t.display.sizerWidth=e.adjustWidthTo;e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+$r(t)+t.display.barWidth);e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Zr(t))}(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection(e.focus))}function Si(e){var t=e.cm;if(null!=e.adjustWidthTo){t.display.sizer.style.minWidth=e.adjustWidthTo+"px";e.maxScrollLeft<t.doc.scrollLeft&&si(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),true);t.display.maxLineChanged=false}var r=e.focus&&e.focus==E()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r);(e.updatedDisplay||e.startHeight!=t.doc.height)&&hi(t,e.barMeasure);e.updatedDisplay&&Xi(t,e.barMeasure);e.selectionChanged&&Rn(t);t.state.focused&&e.updateInput&&t.display.input.reset(e.typing);r&&qn(e.cm)}function ki(e){var t=e.cm,r=t.display,n=t.doc;e.updatedDisplay&&Gi(t,e.update);null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null);null!=e.scrollTop&&li(t,e.scrollTop,e.forceScroll);null!=e.scrollLeft&&si(t,e.scrollLeft,true,true);if(e.scrollToPos){var i=Zn(t,ke(n,e.scrollToPos.from),ke(n,e.scrollToPos.to),e.scrollToPos.margin);$n(t,i)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var l=0;l<o.length;++l)o[l].lines.length||yt(o[l],"hide");if(a)for(var s=0;s<a.length;++s)a[s].lines.length&&yt(a[s],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop);e.changeObjs&&yt(t,"changes",t,e.changeObjs);e.update&&e.update.finish()}function Ti(e,t){if(e.curOp)return t();mi(e);try{return t()}finally{yi(e)}}function Li(e,t){return function(){if(e.curOp)return t.apply(e,arguments);mi(e);try{return t.apply(e,arguments)}finally{yi(e)}}}function Mi(e){return function(){if(this.curOp)return e.apply(this,arguments);mi(this);try{return e.apply(this,arguments)}finally{yi(this)}}}function Ai(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);mi(t);try{return e.apply(this,arguments)}finally{yi(t)}}}function Ni(e,t,r,n){null==t&&(t=e.doc.first);null==r&&(r=e.doc.first+e.doc.size);n||(n=0);var i=e.display;n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t);e.curOp.viewChanged=true;if(t>=i.viewTo)Ae&&Qe(e.doc,t)<i.viewTo&&Di(e);else if(r<=i.viewFrom)if(Ae&&Je(e.doc,r+n)>i.viewFrom)Di(e);else{i.viewFrom+=n;i.viewTo+=n}else if(t<=i.viewFrom&&r>=i.viewTo)Di(e);else if(t<=i.viewFrom){var o=Ei(e,r,r+n,1);if(o){i.view=i.view.slice(o.index);i.viewFrom=o.lineN;i.viewTo+=n}else Di(e)}else if(r>=i.viewTo){var a=Ei(e,t,t,-1);if(a){i.view=i.view.slice(0,a.index);i.viewTo=a.lineN}else Di(e)}else{var l=Ei(e,t,t,-1);var s=Ei(e,r,r+n,1);if(l&&s){i.view=i.view.slice(0,l.index).concat(Tr(e,l.lineN,s.lineN)).concat(i.view.slice(s.index));i.viewTo+=n}else Di(e)}var u=i.externalMeasured;u&&(r<u.lineN?u.lineN+=n:t<u.lineN+u.size&&(i.externalMeasured=null))}function Oi(e,t,r){e.curOp.viewChanged=true;var n=e.display,i=e.display.externalMeasured;i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null);if(t<n.viewFrom||t>=n.viewTo)return;var o=n.view[In(e,t)];if(null==o.node)return;var a=o.changes||(o.changes=[]);-1==R(a,r)&&a.push(r)}function Di(e){e.display.viewFrom=e.display.viewTo=e.doc.first;e.display.view=[];e.display.viewOffset=0}function Ei(e,t,r,n){var i=In(e,t),o,a=e.display.view;if(!Ae||r==e.doc.first+e.doc.size)return{index:i,lineN:r};var l=e.display.viewFrom;for(var s=0;s<i;s++)l+=a[s].size;if(l!=t){if(n>0){if(i==a.length-1)return null;o=l+a[i].size-t;i++}else o=l-t;t+=o;r+=o}while(Qe(e.doc,r)!=r){if(i==(n<0?0:a.length-1))return null;r+=n*a[i-(n<0?1:0)].size;i+=n}return{index:i,lineN:r}}function Wi(e,t,r){var n=e.display,i=n.view;if(0==i.length||t>=n.viewTo||r<=n.viewFrom){n.view=Tr(e,t,r);n.viewFrom=t}else{n.viewFrom>t?n.view=Tr(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(In(e,t)));n.viewFrom=t;n.viewTo<r?n.view=n.view.concat(Tr(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,In(e,r)))}n.viewTo=r}function Hi(e){var t=e.display.view,r=0;for(var n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function Ii(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,P(Pi,e))}function Pi(e){var t=e.doc;if(t.highlightFrontier>=e.display.viewTo)return;var r=+new Date+e.options.workTime;var n=tr(e,t.highlightFrontier);var i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(n.line>=e.display.viewFrom){var a=o.styles;var l=o.text.length>e.options.maxHighlightLength?Yt(t.mode,n.state):null;var s=Jt(e,o,n,true);l&&(n.state=l);o.styles=s.styles;var u=o.styleClasses,c=s.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);var f=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass);for(var h=0;!f&&h<a.length;++h)f=a[h]!=o.styles[h];f&&i.push(n.line);o.stateAfter=n.save();n.nextLine()}else{o.text.length<=e.options.maxHighlightLength&&rr(e,o.text,n);o.stateAfter=n.line%5==0?n.save():null;n.nextLine()}if(+new Date>r){Ii(e,e.options.workDelay);return true}});t.highlightFrontier=n.line;t.modeFrontier=Math.max(t.modeFrontier,n.line);i.length&&Ti(e,function(){for(var t=0;t<i.length;t++)Oi(e,i[t],"text")})}var zi=function(e,t,r){var n=e.display;this.viewport=t;this.visible=Yn(n,e.doc,t);this.editorIsHidden=!n.wrapper.offsetWidth;this.wrapperHeight=n.wrapper.clientHeight;this.wrapperWidth=n.wrapper.clientWidth;this.oldDisplayWidth=Zr(e);this.force=r;this.dims=On(e);this.events=[]};zi.prototype.signal=function(e,t){xt(e,t)&&this.events.push(arguments)};zi.prototype.finish=function(){var e=this;for(var t=0;t<this.events.length;t++)yt.apply(null,e.events[t])};function Fi(e){var t=e.display;if(!t.scrollbarsClipped&&t.scroller.offsetWidth){t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth;t.heightForcer.style.height=$r(e)+"px";t.sizer.style.marginBottom=-t.nativeBarWidth+"px";t.sizer.style.borderRightWidth=$r(e)+"px";t.scrollbarsClipped=true}}function Bi(e){if(e.hasFocus())return null;var t=E();if(!t||!D(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();if(n.anchorNode&&n.extend&&D(e.display.lineDiv,n.anchorNode)){r.anchorNode=n.anchorNode;r.anchorOffset=n.anchorOffset;r.focusNode=n.focusNode;r.focusOffset=n.focusOffset}}return r}function Ri(e){if(!e||!e.activeElt||e.activeElt==E())return;e.activeElt.focus();if(e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode)){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset);r.collapse(false);t.removeAllRanges();t.addRange(r);t.extend(e.focusNode,e.focusOffset)}}function qi(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden){Di(e);return false}if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==Hi(e))return false;if(jn(e)){Di(e);t.dims=On(e)}var i=n.first+n.size;var o=Math.max(t.visible.from-e.options.viewportMargin,n.first);var a=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom));r.viewTo>a&&r.viewTo-a<20&&(a=Math.min(i,r.viewTo));if(Ae){o=Qe(e.doc,o);a=Je(e.doc,a)}var l=o!=r.viewFrom||a!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;Wi(e,o,a);r.viewOffset=rt(ue(e.doc,r.viewFrom));e.display.mover.style.top=r.viewOffset+"px";var s=Hi(e);if(!l&&0==s&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return false;var u=Bi(e);s>4&&(r.lineDiv.style.display="none");Ui(e,r.updateLineNumbers,t.dims);s>4&&(r.lineDiv.style.display="");r.renderedView=r.view;Ri(u);L(r.cursorDiv);L(r.selectionDiv);r.gutters.style.height=r.sizer.style.minHeight=0;if(l){r.lastWrapHeight=t.wrapperHeight;r.lastWrapWidth=t.wrapperWidth;Ii(e,400)}r.updateLineNumbers=null;return true}function Gi(e,t){var r=t.viewport;for(var n=true;;n=false){if(!n||!e.options.lineWrapping||t.oldDisplayWidth==Zr(e)){r&&null!=r.top&&(r={top:Math.min(e.doc.height+Kr(e.display)-Qr(e),r.top)});t.visible=Yn(e.display,e.doc,r);if(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}if(!qi(e,t))break;_n(e);var i=ui(e);Pn(e);hi(e,i);Xi(e,i);t.force=false}t.signal(e,"update",e);if(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo){t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo);e.display.reportedViewFrom=e.display.viewFrom;e.display.reportedViewTo=e.display.viewTo}}function Vi(e,t){var r=new zi(e,t);if(qi(e,r)){_n(e);Gi(e,r);var n=ui(e);Pn(e);hi(e,n);Xi(e,n);r.finish()}}function Ui(e,t,r){var n=e.display,i=e.options.lineNumbers;var o=n.lineDiv,a=o.firstChild;function l(t){var r=t.nextSibling;s&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t);return r}var u=n.view,c=n.viewFrom;for(var f=0;f<u.length;f++){var h=u[f];if(h.hidden);else if(h.node&&h.node.parentNode==o){while(a!=h.node)a=l(a);var d=i&&null!=t&&t<=c&&h.lineNumber;if(h.changes){R(h.changes,"gutter")>-1&&(d=false);Wr(e,h,c,r)}if(d){L(h.lineNumber);h.lineNumber.appendChild(document.createTextNode(ge(e.options,c)))}a=h.node.nextSibling}else{var p=qr(e,h,c,r);o.insertBefore(p,a)}c+=h.size}while(a)a=l(a)}function _i(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function Xi(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";e.display.heightForcer.style.top=t.docHeight+"px";e.display.gutters.style.height=t.docHeight+e.display.barHeight+$r(e)+"px"}function Yi(e){var t=e.display.gutters,r=e.options.gutters;L(t);var n=0;for(;n<r.length;++n){var i=r[n];var o=t.appendChild(A("div",null,"CodeMirror-gutter "+i));if("CodeMirror-linenumbers"==i){e.display.lineGutter=o;o.style.width=(e.display.lineNumWidth||1)+"px"}}t.style.display=n?"":"none";_i(e)}function Ki(e){var t=R(e.gutters,"CodeMirror-linenumbers");if(-1==t&&e.lineNumbers)e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]);else if(t>-1&&!e.lineNumbers){e.gutters=e.gutters.slice(0);e.gutters.splice(t,1)}}var ji=0;var $i=null;a?$i=-.53:r?$i=15:c?$i=-.7:h&&($i=-1/3);function Zi(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail);null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta);return{x:t,y:r}}function Qi(e){var t=Zi(e);t.x*=$i;t.y*=$i;return t}function Ji(e,t){var n=Zi(t),i=n.x,o=n.y;var a=e.display,l=a.scroller;var u=l.scrollWidth>l.clientWidth;var c=l.scrollHeight>l.clientHeight;if(!(i&&u||o&&c))return;if(o&&y&&s)e:for(var h=t.target,d=a.view;h!=l;h=h.parentNode)for(var p=0;p<d.length;p++)if(d[p].node==h){e.display.currentWheelTarget=h;break e}if(i&&!r&&!f&&null!=$i){o&&c&&ai(e,Math.max(0,l.scrollTop+o*$i));si(e,Math.max(0,l.scrollLeft+i*$i));(!o||o&&c)&&St(t);a.wheelStartX=null;return}if(o&&null!=$i){var v=o*$i;var g=e.doc.scrollTop,m=g+a.wrapper.clientHeight;v<0?g=Math.max(0,g+v-50):m=Math.min(e.doc.height,m+v+50);Vi(e,{top:g,bottom:m})}if(ji<20)if(null==a.wheelStartX){a.wheelStartX=l.scrollLeft;a.wheelStartY=l.scrollTop;a.wheelDX=i;a.wheelDY=o;setTimeout(function(){if(null==a.wheelStartX)return;var e=l.scrollLeft-a.wheelStartX;var t=l.scrollTop-a.wheelStartY;var r=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null;if(!r)return;$i=($i*ji+r)/(ji+1);++ji},200)}else{a.wheelDX+=i;a.wheelDY+=o}}var eo=function(e,t){this.ranges=e;this.primIndex=t};eo.prototype.primary=function(){return this.ranges[this.primIndex]};eo.prototype.equals=function(e){var t=this;if(e==this)return true;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return false;for(var r=0;r<this.ranges.length;r++){var n=t.ranges[r],i=e.ranges[r];if(!be(n.anchor,i.anchor)||!be(n.head,i.head))return false}return true};eo.prototype.deepCopy=function(){var e=this;var t=[];for(var r=0;r<this.ranges.length;r++)t[r]=new to(we(e.ranges[r].anchor),we(e.ranges[r].head));return new eo(t,this.primIndex)};eo.prototype.somethingSelected=function(){var e=this;for(var t=0;t<this.ranges.length;t++)if(!e.ranges[t].empty())return true;return false};eo.prototype.contains=function(e,t){var r=this;t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=r.ranges[n];if(ye(t,i.from())>=0&&ye(e,i.to())<=0)return n}return-1};var to=function(e,t){this.anchor=e;this.head=t};to.prototype.from=function(){return Ce(this.anchor,this.head)};to.prototype.to=function(){return xe(this.anchor,this.head)};to.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ro(e,t){var r=e[t];e.sort(function(e,t){return ye(e.from(),t.from())});t=R(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(ye(o.to(),i.from())>=0){var a=Ce(o.from(),i.from()),l=xe(o.to(),i.to());var s=o.empty()?i.from()==i.head:o.from()==o.head;n<=t&&--t;e.splice(--n,2,new to(s?l:a,s?a:l))}}return new eo(e,t)}function no(e,t){return new eo([new to(e,t||e)],0)}function io(e){if(!e.text)return e.to;return me(e.from.line+e.text.length-1,j(e.text).length+(1==e.text.length?e.from.ch:0))}function oo(e,t){if(ye(e,t.from)<0)return e;if(ye(e,t.to)<=0)return io(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;e.line==t.to.line&&(n+=io(t).ch-t.to.ch);return me(r,n)}function ao(e,t){var r=[];for(var n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new to(oo(i.anchor,t),oo(i.head,t)))}return ro(r,e.sel.primIndex)}function lo(e,t,r){return e.line==t.line?me(r.line,e.ch-t.ch+r.ch):me(r.line+(e.line-t.line),e.ch)}function so(e,t,r){var n=[];var i=me(e.first,0),o=i;for(var a=0;a<t.length;a++){var l=t[a];var s=lo(l.from,i,o);var u=lo(io(l),i,o);i=l.to;o=u;if("around"==r){var c=e.sel.ranges[a],f=ye(c.head,c.anchor)<0;n[a]=new to(f?u:s,f?s:u)}else n[a]=new to(s,s)}return new eo(n,e.sel.primIndex)}function uo(e){e.doc.mode=Ut(e.options,e.doc.modeOption);co(e)}function co(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null);e.styles&&(e.styles=null)});e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first;Ii(e,100);e.state.modeGen++;e.curOp&&Ni(e)}function fo(e,t){return 0==t.from.ch&&0==t.to.ch&&""==j(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ho(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){hr(e,r,i,n);Dr(e,"change",e,t)}function a(e,t){var r=[];for(var o=e;o<t;++o)r.push(new fr(u[o],i(o),n));return r}var l=t.from,s=t.to,u=t.text;var c=ue(e,l.line),f=ue(e,s.line);var h=j(u),d=i(u.length-1),p=s.line-l.line;if(t.full){e.insert(0,a(0,u.length));e.remove(u.length,e.size-u.length)}else if(fo(e,t)){var v=a(0,u.length-1);o(f,f.text,d);p&&e.remove(l.line,p);v.length&&e.insert(l.line,v)}else if(c==f)if(1==u.length)o(c,c.text.slice(0,l.ch)+h+c.text.slice(s.ch),d);else{var g=a(1,u.length-1);g.push(new fr(h+c.text.slice(s.ch),d,n));o(c,c.text.slice(0,l.ch)+u[0],i(0));e.insert(l.line+1,g)}else if(1==u.length){o(c,c.text.slice(0,l.ch)+u[0]+f.text.slice(s.ch),i(0));e.remove(l.line+1,p)}else{o(c,c.text.slice(0,l.ch)+u[0],i(0));o(f,h+f.text.slice(s.ch),d);var m=a(1,u.length-1);p>1&&e.remove(l.line+1,p-1);e.insert(l.line+1,m)}Dr(e,"change",e,t)}function po(e,t,r){function n(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var l=e.linked[a];if(l.doc==i)continue;var s=o&&l.sharedHist;if(r&&!s)continue;t(l.doc,s);n(l.doc,e,s)}}n(e,null,true)}function vo(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t;t.cm=e;Wn(e);uo(e);go(e);e.options.lineWrapping||it(e);e.options.mode=t.modeOption;Ni(e)}function go(e){("rtl"==e.doc.direction?W:T)(e.display.lineDiv,"CodeMirror-rtl")}function mo(e){Ti(e,function(){go(e);Ni(e)})}function yo(e){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=e||1}function bo(e,t){var r={from:we(t.from),to:io(t),text:ce(e,t.from,t.to)};Lo(e,r,t.from.line,t.to.line+1);po(e,function(e){return Lo(e,r,t.from.line,t.to.line+1)},true);return r}function wo(e){while(e.length){var t=j(e);if(!t.ranges)break;e.pop()}}function xo(e,t){if(t){wo(e.done);return j(e.done)}if(e.done.length&&!j(e.done).ranges)return j(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges){e.done.pop();return j(e.done)}}function Co(e,t,r,n){var i=e.history;i.undone.length=0;var o=+new Date,a;var l;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(a=xo(i,i.lastOp==n))){l=j(a.changes);0==ye(t.from,t.to)&&0==ye(t.from,l.to)?l.to=io(t):a.changes.push(bo(e,t))}else{var s=j(i.done);s&&s.ranges||To(e.sel,i.done);a={changes:[bo(e,t)],generation:i.generation};i.done.push(a);while(i.done.length>i.undoDepth){i.done.shift();i.done[0].ranges||i.done.shift()}}i.done.push(r);i.generation=++i.maxGeneration;i.lastModTime=i.lastSelTime=o;i.lastOp=i.lastSelOp=n;i.lastOrigin=i.lastSelOrigin=t.origin;l||yt(e,"historyAdded")}function So(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function ko(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||So(e,o,j(i.done),t))?i.done[i.done.length-1]=t:To(t,i.done);i.lastSelTime=+new Date;i.lastSelOrigin=o;i.lastSelOp=r;n&&false!==n.clearRedo&&wo(i.undone)}function To(e,t){var r=j(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Lo(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans);++o})}function Mo(e){if(!e)return null;var t;for(var r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Ao(e,t){var r=t["spans_"+e.id];if(!r)return null;var n=[];for(var i=0;i<t.text.length;++i)n.push(Mo(r[i]));return n}function No(e,t){var r=Ao(e,t);var n=ze(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],a=n[i];if(o&&a)e:for(var l=0;l<a.length;++l){var s=a[l];for(var u=0;u<o.length;++u)if(o[u].marker==s.marker)continue e;o.push(s)}else a&&(r[i]=a)}return r}function Oo(e,t,r){var n=[];for(var i=0;i<e.length;++i){var o=e[i];if(o.ranges){n.push(r?eo.prototype.deepCopy.call(o):o);continue}var a=o.changes,l=[];n.push({changes:l});for(var s=0;s<a.length;++s){var u=a[s],c=void 0;l.push({from:u.from,to:u.to,text:u.text});if(t)for(var f in u)if((c=f.match(/^spans_(\d+)$/))&&R(t,Number(c[1]))>-1){j(l)[f]=u[f];delete u[f]}}}return n}function Do(e,t,r,n){if(n){var i=e.anchor;if(r){var o=ye(t,i)<0;if(o!=ye(r,i)<0){i=t;t=r}else o!=ye(t,r)<0&&(t=r)}return new to(i,t)}return new to(r||t,t)}function Eo(e,t,r,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend));Fo(e,new eo([Do(e.sel.primary(),t,r,i)],0),n)}function Wo(e,t,r){var n=[];var i=e.cm&&(e.cm.display.shift||e.extend);for(var o=0;o<e.sel.ranges.length;o++)n[o]=Do(e.sel.ranges[o],t[o],null,i);var a=ro(n,e.sel.primIndex);Fo(e,a,r)}function Ho(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r;Fo(e,ro(i,e.sel.primIndex),n)}function Io(e,t,r,n){Fo(e,no(t,r),n)}function Po(e,t,r){var n={ranges:t.ranges,update:function(t){var r=this;this.ranges=[];for(var n=0;n<t.length;n++)r.ranges[n]=new to(ke(e,t[n].anchor),ke(e,t[n].head))},origin:r&&r.origin};yt(e,"beforeSelectionChange",e,n);e.cm&&yt(e.cm,"beforeSelectionChange",e.cm,n);return n.ranges!=t.ranges?ro(n.ranges,n.ranges.length-1):t}function zo(e,t,r){var n=e.history.done,i=j(n);if(i&&i.ranges){n[n.length-1]=t;Bo(e,t,r)}else Fo(e,t,r)}function Fo(e,t,r){Bo(e,t,r);ko(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Bo(e,t,r){(xt(e,"beforeSelectionChange")||e.cm&&xt(e.cm,"beforeSelectionChange"))&&(t=Po(e,t,r));var n=r&&r.bias||(ye(t.primary().head,e.sel.primary().head)<0?-1:1);Ro(e,Go(e,t,n,true));r&&false===r.scroll||!e.cm||ti(e.cm)}function Ro(e,t){if(t.equals(e.sel))return;e.sel=t;if(e.cm){e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=true;wt(e.cm)}Dr(e,"cursorActivity",e)}function qo(e){Ro(e,Go(e,e.sel,null,false))}function Go(e,t,r,n){var i;for(var o=0;o<t.ranges.length;o++){var a=t.ranges[o];var l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o];var s=Uo(e,a.anchor,l&&l.anchor,r,n);var u=Uo(e,a.head,l&&l.head,r,n);if(i||s!=a.anchor||u!=a.head){i||(i=t.ranges.slice(0,o));i[o]=new to(s,u)}}return i?ro(i,t.primIndex):t}function Vo(e,t,r,n,i){var o=ue(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker;if((null==l.from||(s.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(s.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(i){yt(s,"beforeCursorEnter");if(s.explicitlyCleared){if(o.markedSpans){--a;continue}break}}if(!s.atomic)continue;if(r){var u=s.find(n<0?1:-1),c=void 0;(n<0?s.inclusiveRight:s.inclusiveLeft)&&(u=_o(e,u,-n,u&&u.line==t.line?o:null));if(u&&u.line==t.line&&(c=ye(u,r))&&(n<0?c<0:c>0))return Vo(e,u,t,n,i)}var f=s.find(n<0?-1:1);(n<0?s.inclusiveLeft:s.inclusiveRight)&&(f=_o(e,f,n,f.line==t.line?o:null));return f?Vo(e,f,t,n,i):null}}return t}function Uo(e,t,r,n,i){var o=n||1;var a=Vo(e,t,r,o,i)||!i&&Vo(e,t,r,o,true)||Vo(e,t,r,-o,i)||!i&&Vo(e,t,r,-o,true);if(!a){e.cantEdit=true;return me(e.first,0)}return a}function _o(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?ke(e,me(t.line-1)):null:r>0&&t.ch==(n||ue(e,t.line)).text.length?t.line<e.first+e.size-1?me(t.line+1,0):null:new me(t.line,t.ch+r)}function Xo(e){e.setSelection(me(e.firstLine(),0),me(e.lastLine()),V)}function Yo(e,t,r){var n={canceled:false,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=true}};r&&(n.update=function(t,r,i,o){t&&(n.from=ke(e,t));r&&(n.to=ke(e,r));i&&(n.text=i);void 0!==o&&(n.origin=o)});yt(e,"beforeChange",e,n);e.cm&&yt(e.cm,"beforeChange",e.cm,n);if(n.canceled)return null;return{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Ko(e,t,r){if(e.cm){if(!e.cm.curOp)return Li(e.cm,Ko)(e,t,r);if(e.cm.state.suppressEdits)return}if(xt(e,"beforeChange")||e.cm&&xt(e.cm,"beforeChange")){t=Yo(e,t,true);if(!t)return}var n=Me&&!r&&Be(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)jo(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text});else jo(e,t)}function jo(e,t){if(1==t.text.length&&""==t.text[0]&&0==ye(t.from,t.to))return;var r=ao(e,t);Co(e,t,r,e.cm?e.cm.curOp.id:NaN);Qo(e,t,r,ze(e,t));var n=[];po(e,function(e,r){if(!r&&-1==R(n,e.history)){na(e.history,t);n.push(e.history)}Qo(e,t,null,ze(e,t))})}function $o(e,t,r){if(e.cm&&e.cm.state.suppressEdits&&!r)return;var n=e.history,i,o=e.sel;var a="undo"==t?n.done:n.undone,l="undo"==t?n.undone:n.done;var s=0;for(;s<a.length;s++){i=a[s];if(r?i.ranges&&!i.equals(e.sel):!i.ranges)break}if(s==a.length)return;n.lastOrigin=n.lastSelOrigin=null;for(;;){i=a.pop();if(!i.ranges)break;To(i,l);if(r&&!i.equals(e.sel)){Fo(e,i,{clearRedo:false});return}o=i}var u=[];To(o,l);l.push({changes:u,generation:n.generation});n.generation=i.generation||++n.maxGeneration;var c=xt(e,"beforeChange")||e.cm&&xt(e.cm,"beforeChange");var f=function(r){var n=i.changes[r];n.origin=t;if(c&&!Yo(e,n,false)){a.length=0;return{}}u.push(bo(e,n));var o=r?ao(e,n):j(a);Qo(e,n,o,No(e,n));!r&&e.cm&&e.cm.scrollIntoView({from:n.from,to:io(n)});var l=[];po(e,function(e,t){if(!t&&-1==R(l,e.history)){na(e.history,n);l.push(e.history)}Qo(e,n,null,No(e,n))})};for(var h=i.changes.length-1;h>=0;--h){var d=f(h);if(d)return d.v}}function Zo(e,t){if(0==t)return;e.first+=t;e.sel=new eo($(e.sel.ranges,function(e){return new to(me(e.anchor.line+t,e.anchor.ch),me(e.head.line+t,e.head.ch))}),e.sel.primIndex);if(e.cm){Ni(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)Oi(e.cm,n,"gutter")}}function Qo(e,t,r,n){if(e.cm&&!e.cm.curOp)return Li(e.cm,Qo)(e,t,r,n);if(t.to.line<e.first){Zo(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Zo(e,i);t={from:me(e.first,0),to:me(t.to.line+i,t.to.ch),text:[j(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:me(o,ue(e,o).text.length),text:[t.text[0]],origin:t.origin});t.removed=ce(e,t.from,t.to);r||(r=ao(e,t));e.cm?Jo(e.cm,t,n):ho(e,t,n);Bo(e,r,V)}function Jo(e,t,r){var n=e.doc,i=e.display,o=t.from,a=t.to;var l=false,s=o.line;if(!e.options.lineWrapping){s=de(je(ue(n,o.line)));n.iter(s,a.line+1,function(e){if(e==i.maxLine){l=true;return true}})}n.sel.contains(t.from,t.to)>-1&&wt(e);ho(n,t,r,En(e));if(!e.options.lineWrapping){n.iter(s,o.line+t.text.length,function(e){var t=nt(e);if(t>i.maxLineLength){i.maxLine=e;i.maxLineLength=t;i.maxLineChanged=true;l=false}});l&&(e.curOp.updateMaxLine=true)}cr(n,o.line);Ii(e,400);var u=t.text.length-(a.line-o.line)-1;t.full?Ni(e):o.line!=a.line||1!=t.text.length||fo(e.doc,t)?Ni(e,o.line,a.line+1,u):Oi(e,o.line,"text");var c=xt(e,"changes"),f=xt(e,"change");if(f||c){var h={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};f&&Dr(e,"change",e,h);c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function ea(e,t,r,n,i){n||(n=r);if(ye(n,r)<0){var o=n;n=r;r=o}"string"==typeof t&&(t=e.splitLines(t));Ko(e,{from:r,to:n,text:t,origin:i})}function ta(e,t,r,n){if(r<e.line)e.line+=n;else if(t<e.line){e.line=t;e.ch=0}}function ra(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],a=true;if(o.ranges){if(!o.copied){o=e[i]=o.deepCopy();o.copied=true}for(var l=0;l<o.ranges.length;l++){ta(o.ranges[l].anchor,t,r,n);ta(o.ranges[l].head,t,r,n)}continue}for(var s=0;s<o.changes.length;++s){var u=o.changes[s];if(r<u.from.line){u.from=me(u.from.line+n,u.from.ch);u.to=me(u.to.line+n,u.to.ch)}else if(t<=u.to.line){a=false;break}}if(!a){e.splice(0,i+1);i=0}}}function na(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;ra(e.done,r,n,i);ra(e.undone,r,n,i)}function ia(e,t,r,n){var i=t,o=t;"number"==typeof t?o=ue(e,Se(e,t)):i=de(t);if(null==i)return null;n(o,i)&&e.cm&&Oi(e.cm,i,r);return o}function oa(e){var t=this;this.lines=e;this.parent=null;var r=0;for(var n=0;n<e.length;++n){e[n].parent=t;r+=e[n].height}this.height=r}oa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){var r=this;for(var n=e,i=e+t;n<i;++n){var o=r.lines[n];r.height-=o.height;dr(o);Dr(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){var n=this;this.height+=r;this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=n},iterN:function(e,t,r){var n=this;for(var i=e+t;e<i;++e)if(r(n.lines[e]))return true}};function aa(e){var t=this;this.children=e;var r=0,n=0;for(var i=0;i<e.length;++i){var o=e[i];r+=o.chunkSize();n+=o.height;o.parent=t}this.size=r;this.height=n;this.parent=null}aa.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){var r=this;this.size-=t;for(var n=0;n<this.children.length;++n){var i=r.children[n],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e),l=i.height;i.removeInner(e,a);r.height-=l-i.height;if(o==a){r.children.splice(n--,1);i.parent=null}if(0==(t-=a))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof oa))){var s=[];this.collapse(s);this.children=[new oa(s)];this.children[0].parent=this}},collapse:function(e){var t=this;for(var r=0;r<this.children.length;++r)t.children[r].collapse(e)},insertInner:function(e,t,r){var n=this;this.size+=t.length;this.height+=r;for(var i=0;i<this.children.length;++i){var o=n.children[i],a=o.chunkSize();if(e<=a){o.insertInner(e,t,r);if(o.lines&&o.lines.length>50){var l=o.lines.length%25+25;for(var s=l;s<o.lines.length;){var u=new oa(o.lines.slice(s,s+=25));o.height-=u.height;n.children.splice(++i,0,u);u.parent=n}o.lines=o.lines.slice(0,l);n.maybeSpill()}break}e-=a}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5);var r=new aa(t);if(e.parent){e.size-=r.size;e.height-=r.height;var n=R(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new aa(e.children);i.parent=e;e.children=[i,r];e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,r){var n=this;for(var i=0;i<this.children.length;++i){var o=n.children[i],a=o.chunkSize();if(e<a){var l=Math.min(t,a-e);if(o.iterN(e,l,r))return true;if(0==(t-=l))break;e=0}else e-=a}}};var la=function(e,t,r){var n=this;if(r)for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);this.doc=e;this.node=t};la.prototype.clear=function(){var e=this;var t=this.doc.cm,r=this.line.widgets,n=this.line,i=de(n);if(null==i||!r)return;for(var o=0;o<r.length;++o)r[o]==e&&r.splice(o--,1);r.length||(n.widgets=null);var a=_r(this);he(n,Math.max(0,n.height-a));if(t){Ti(t,function(){sa(t,n,-a);Oi(t,i,"widget")});Dr(t,"lineWidgetCleared",t,this,i)}};la.prototype.changed=function(){var e=this;var t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=_r(this)-t;if(!i)return;he(n,n.height+i);r&&Ti(r,function(){r.curOp.forceUpdate=true;sa(r,n,i);Dr(r,"lineWidgetChanged",r,e,de(n))})};Ct(la);function sa(e,t,r){rt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ei(e,r)}function ua(e,t,r,n){var i=new la(e,r,n);var o=e.cm;o&&i.noHScroll&&(o.display.alignWidgets=true);ia(e,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i);i.line=t;if(o&&!et(e,t)){var n=rt(t)<e.scrollTop;he(t,t.height+_r(i));n&&ei(o,i.height);o.curOp.forceUpdate=true}return true});Dr(o,"lineWidgetAdded",o,i,"number"==typeof t?t:de(t));return i}var ca=0;var fa=function(e,t){this.lines=[];this.type=t;this.doc=e;this.id=++ca};fa.prototype.clear=function(){var e=this;if(this.explicitlyCleared)return;var t=this.doc.cm,r=t&&!t.curOp;r&&mi(t);if(xt(this,"clear")){var n=this.find();n&&Dr(this,"clear",n.from,n.to)}var i=null,o=null;for(var a=0;a<this.lines.length;++a){var l=e.lines[a];var s=Ee(l.markedSpans,e);if(t&&!e.collapsed)Oi(t,de(l),"text");else if(t){null!=s.to&&(o=de(l));null!=s.from&&(i=de(l))}l.markedSpans=We(l.markedSpans,s);null==s.from&&e.collapsed&&!et(e.doc,l)&&t&&he(l,An(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=je(e.lines[u]),f=nt(c);if(f>t.display.maxLineLength){t.display.maxLine=c;t.display.maxLineLength=f;t.display.maxLineChanged=true}}null!=i&&t&&this.collapsed&&Ni(t,i,o+1);this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;t&&qo(t.doc)}t&&Dr(t,"markerCleared",t,this,i,o);r&&yi(t);this.parent&&this.parent.clear()};fa.prototype.find=function(e,t){var r=this;null==e&&"bookmark"==this.type&&(e=1);var n,i;for(var o=0;o<this.lines.length;++o){var a=r.lines[o];var l=Ee(a.markedSpans,r);if(null!=l.from){n=me(t?a:de(a),l.from);if(-1==e)return n}if(null!=l.to){i=me(t?a:de(a),l.to);if(1==e)return i}}return n&&{from:n,to:i}};fa.prototype.changed=function(){var e=this;var t=this.find(-1,true),r=this,n=this.doc.cm;if(!t||!n)return;Ti(n,function(){var i=t.line,o=de(t.line);var a=nn(n,o);if(a){hn(a);n.curOp.selectionChanged=n.curOp.forceUpdate=true}n.curOp.updateMaxLine=true;if(!et(r.doc,i)&&null!=r.height){var l=r.height;r.height=null;var s=_r(r)-l;s&&he(i,i.height+s)}Dr(n,"markerChanged",n,e)})};fa.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=R(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)};fa.prototype.detachLine=function(e){this.lines.splice(R(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};Ct(fa);function ha(e,t,r,n,i){if(n&&n.shared)return pa(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return Li(e.cm,ha)(e,t,r,n,i);var o=new fa(e,i),a=ye(t,r);n&&z(n,o,false);if(a>0||0==a&&false!==o.clearWhenEmpty)return o;if(o.replacedWith){o.collapsed=true;o.widgetNode=N("span",[o.replacedWith],"CodeMirror-widget");n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true");n.insertLeft&&(o.widgetNode.insertLeft=true)}if(o.collapsed){if(Ke(e,t.line,t,r,o)||t.line!=r.line&&Ke(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Oe()}o.addToHistory&&Co(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var l=t.line,s=e.cm,u;e.iter(l,r.line+1,function(e){s&&o.collapsed&&!s.options.lineWrapping&&je(e)==s.display.maxLine&&(u=true);o.collapsed&&l!=t.line&&he(e,0);He(e,new De(o,l==t.line?t.ch:null,l==r.line?r.ch:null));++l});o.collapsed&&e.iter(t.line,r.line+1,function(t){et(e,t)&&he(t,0)});o.clearOnEnter&&vt(o,"beforeCursorEnter",function(){return o.clear()});if(o.readOnly){Ne();(e.history.done.length||e.history.undone.length)&&e.clearHistory()}if(o.collapsed){o.id=++ca;o.atomic=true}if(s){u&&(s.curOp.updateMaxLine=true);if(o.collapsed)Ni(s,t.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var c=t.line;c<=r.line;c++)Oi(s,c,"text");o.atomic&&qo(s.doc);Dr(s,"markerAdded",s,o)}return o}var da=function(e,t){var r=this;this.markers=e;this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=r};da.prototype.clear=function(){var e=this;if(this.explicitlyCleared)return;this.explicitlyCleared=true;for(var t=0;t<this.markers.length;++t)e.markers[t].clear();Dr(this,"clear")};da.prototype.find=function(e,t){return this.primary.find(e,t)};Ct(da);function pa(e,t,r,n,i){n=z(n);n.shared=false;var o=[ha(e,t,r,n,i)],a=o[0];var l=n.widgetNode;po(e,function(e){l&&(n.widgetNode=l.cloneNode(true));o.push(ha(e,ke(e,t),ke(e,r),n,i));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;a=j(o)});return new da(o,a)}function va(e){return e.findMarks(me(e.first,0),e.clipPos(me(e.lastLine())),function(e){return e.parent})}function ga(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find();var o=e.clipPos(i.from),a=e.clipPos(i.to);if(ye(o,a)){var l=ha(e,o,a,n.primary,n.primary.type);n.markers.push(l);l.parent=n}}}function ma(e){var t=function(t){var r=e[t],n=[r.primary.doc];po(r.primary.doc,function(e){return n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];if(-1==R(n,o.doc)){o.parent=null;r.markers.splice(i--,1)}}};for(var r=0;r<e.length;r++)t(r)}var ya=0;var ba=function(e,t,r,n,i){if(!(this instanceof ba))return new ba(e,t,r,n,i);null==r&&(r=0);aa.call(this,[new oa([new fr("",null)])]);this.first=r;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=r;var o=me(r,0);this.sel=no(o);this.history=new yo(null);this.id=++ya;this.modeOption=t;this.lineSep=n;this.direction="rtl"==i?"rtl":"ltr";this.extend=false;"string"==typeof e&&(e=this.splitLines(e));ho(this,{from:o,to:o,text:e});Fo(this,no(o),V)};ba.prototype=J(aa.prototype,{constructor:ba,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var r=0;for(var n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=fe(this,this.first,this.first+this.size);if(false===e)return t;return t.join(e||this.lineSeparator())},setValue:Ai(function(e){var t=me(this.first,0),r=this.first+this.size-1;Ko(this,{from:t,to:me(r,ue(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:true},true);this.cm&&ri(this.cm,0,0);Fo(this,no(t),V)}),replaceRange:function(e,t,r,n){t=ke(this,t);r=r?ke(this,r):t;ea(this,e,t,r,n)},getRange:function(e,t,r){var n=ce(this,ke(this,e),ke(this,t));if(false===r)return n;return n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ve(this,e))return ue(this,e)},getLineNumber:function(e){return de(e)},getLineHandleVisualStart:function(e){"number"==typeof e&&(e=ue(this,e));return je(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ke(this,e)},getCursor:function(e){var t=this.sel.primary(),r;r=null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||false===e?t.to():t.from();return r},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ai(function(e,t,r){Io(this,ke(this,"number"==typeof e?me(e,t||0):e),null,r)}),setSelection:Ai(function(e,t,r){Io(this,ke(this,e),ke(this,t||e),r)}),extendSelection:Ai(function(e,t,r){Eo(this,ke(this,e),t&&ke(this,t),r)}),extendSelections:Ai(function(e,t){Wo(this,Le(this,e),t)}),extendSelectionsBy:Ai(function(e,t){var r=$(this.sel.ranges,e);Wo(this,Le(this,r),t)}),setSelections:Ai(function(e,t,r){var n=this;if(!e.length)return;var i=[];for(var o=0;o<e.length;o++)i[o]=new to(ke(n,e[o].anchor),ke(n,e[o].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex));Fo(this,ro(i,t),r)}),addSelection:Ai(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new to(ke(this,e),ke(this,t||e)));Fo(this,ro(n,n.length-1),r)}),getSelection:function(e){var t=this;var r=this.sel.ranges,n;for(var i=0;i<r.length;i++){var o=ce(t,r[i].from(),r[i].to());n=n?n.concat(o):o}return false===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){var t=this;var r=[],n=this.sel.ranges;for(var i=0;i<n.length;i++){var o=ce(t,n[i].from(),n[i].to());false!==e&&(o=o.join(e||t.lineSeparator()));r[i]=o}return r},replaceSelection:function(e,t,r){var n=[];for(var i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Ai(function(e,t,r){var n=this;var i=[],o=this.sel;for(var a=0;a<o.ranges.length;a++){var l=o.ranges[a];i[a]={from:l.from(),to:l.to(),text:n.splitLines(e[a]),origin:r}}var s=t&&"end"!=t&&so(this,i,t);for(var u=i.length-1;u>=0;u--)Ko(n,i[u]);s?zo(this,s):this.cm&&ti(this.cm)}),undo:Ai(function(){$o(this,"undo")}),redo:Ai(function(){$o(this,"redo")}),undoSelection:Ai(function(){$o(this,"undo",true)}),redoSelection:Ai(function(){$o(this,"redo",true)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){var e=this.history,t=0,r=0;for(var n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new yo(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(e){e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Oo(this.history.done),undone:Oo(this.history.undone)}},setHistory:function(e){var t=this.history=new yo(this.history.maxGeneration);t.done=Oo(e.done.slice(0),null,true);t.undone=Oo(e.undone.slice(0),null,true)},setGutterMarker:Ai(function(e,t,r){return ia(this,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});n[t]=r;!r&&ne(n)&&(e.gutterMarkers=null);return true})}),clearGutter:Ai(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&ia(t,r,"gutter",function(){r.gutterMarkers[e]=null;ne(r.gutterMarkers)&&(r.gutterMarkers=null);return true})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!ve(this,e))return null;t=e;e=ue(this,e);if(!e)return null}else{t=de(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Ai(function(e,t,r){return ia(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(k(r).test(e[n]))return false;e[n]+=" "+r}else e[n]=r;return true})}),removeLineClass:Ai(function(e,t,r){return ia(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";var i=e[n];if(!i)return false;if(null==r)e[n]=null;else{var o=i.match(k(r));if(!o)return false;var a=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return true})}),addLineWidget:Ai(function(e,t,r){return ua(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return ha(this,ke(this,e),ke(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:false,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};e=ke(this,e);return ha(this,e,e,r,"bookmark")},findMarksAt:function(e){e=ke(this,e);var t=[],r=ue(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=ke(this,e);t=ke(this,t);var n=[],i=e.line;this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var l=0;l<a.length;l++){var s=a[l];null!=s.to&&i==e.line&&e.ch>=s.to||null==s.from&&i!=e.line||null!=s.from&&i==t.line&&s.from>=t.ch||r&&!r(s.marker)||n.push(s.marker.parent||s.marker)}++i});return n},getAllMarks:function(){var e=[];this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)});return e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;this.iter(function(i){var o=i.text.length+n;if(o>e){t=e;return true}e-=o;++r});return ke(this,me(r,t))},indexFromPos:function(e){e=ke(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;this.iter(this.first,e.line,function(e){t+=e.text.length+r});return t},copy:function(e){var t=new ba(fe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);t.scrollTop=this.scrollTop;t.scrollLeft=this.scrollLeft;t.sel=this.sel;t.extend=false;if(e){t.history.undoDepth=this.history.undoDepth;t.setHistory(this.getHistory())}return t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from);null!=e.to&&e.to<r&&(r=e.to);var n=new ba(fe(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);e.sharedHist&&(n.history=this.history);(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist});n.linked=[{doc:this,isParent:true,sharedHist:e.sharedHist}];ga(n,va(this));return n},unlinkDoc:function(e){var t=this;e instanceof Al&&(e=e.doc);if(this.linked)for(var r=0;r<this.linked.length;++r){var n=t.linked[r];if(n.doc!=e)continue;t.linked.splice(r,1);e.unlinkDoc(t);ma(va(t));break}if(e.history==this.history){var i=[e.id];po(e,function(e){return i.push(e.id)},true);e.history=new yo(null);e.history.done=Oo(this.history.done,i);e.history.undone=Oo(this.history.undone,i)}},iterLinkedDocs:function(e){po(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){if(this.lineSep)return e.split(this.lineSep);return Ht(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Ai(function(e){"rtl"!=e&&(e="ltr");if(e==this.direction)return;this.direction=e;this.iter(function(e){return e.order=null});this.cm&&mo(this.cm)})});ba.prototype.eachLine=ba.prototype.iter;var wa=0;function xa(e){var t=this;ka(t);if(bt(t,e)||Xr(t.display,e))return;St(e);a&&(wa=+new Date);var r=Hn(t,e,true),n=e.dataTransfer.files;if(!r||t.isReadOnly())return;if(n&&n.length&&window.FileReader&&window.File){var i=n.length,o=Array(i),l=0;var s=function(e,n){if(t.options.allowDropFileTypes&&-1==R(t.options.allowDropFileTypes,e.type))return;var a=new FileReader;a.onload=Li(t,function(){var e=a.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e="");o[n]=e;if(++l==i){r=ke(t.doc,r);var s={from:r,to:r,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Ko(t.doc,s);zo(t.doc,no(r,io(s)))}});a.readAsText(e)};for(var u=0;u<i;++u)s(n[u],u)}else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1){t.state.draggingText(e);setTimeout(function(){return t.display.input.focus()},20);return}try{var c=e.dataTransfer.getData("Text");if(c){var f;t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections());Bo(t.doc,no(r,r));if(f)for(var h=0;h<f.length;++h)ea(t.doc,"",f[h].anchor,f[h].head,"drag");t.replaceSelection(c,"around","paste");t.display.input.focus()}}catch(e){}}}function Ca(e,t){if(a&&(!e.state.draggingText||+new Date-wa<100)){Lt(t);return}if(bt(e,t)||Xr(e.display,t))return;t.dataTransfer.setData("Text",e.getSelection());t.dataTransfer.effectAllowed="copyMove";if(t.dataTransfer.setDragImage&&!h){var r=A("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(f){r.width=r.height=1;e.display.wrapper.appendChild(r);r._top=r.offsetTop}t.dataTransfer.setDragImage(r,0,0);f&&r.parentNode.removeChild(r)}}function Sa(e,t){var r=Hn(e,t);if(!r)return;var n=document.createDocumentFragment();Fn(e,r,n);if(!e.display.dragCursor){e.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors");e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)}M(e.display.dragCursor,n)}function ka(e){if(e.display.dragCursor){e.display.lineSpace.removeChild(e.display.dragCursor);e.display.dragCursor=null}}function Ta(e){if(!document.getElementsByClassName)return;var t=document.getElementsByClassName("CodeMirror");for(var r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}var La=false;function Ma(){if(La)return;Aa();La=true}function Aa(){var e;vt(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null;Ta(Na)},100))});vt(window,"blur",function(){return Ta(Un)})}function Na(e){var t=e.display;if(t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth)return;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null;t.scrollbarsClipped=false;e.setSize()}var Oa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var Da=0;Da<10;Da++)Oa[Da+48]=Oa[Da+96]=String(Da);for(var Ea=65;Ea<=90;Ea++)Oa[Ea]=String.fromCharCode(Ea);for(var Wa=1;Wa<=12;Wa++)Oa[Wa+111]=Oa[Wa+63235]="F"+Wa;var Ha={};Ha.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};Ha.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Ha.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};Ha.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};Ha["default"]=y?Ha.macDefault:Ha.pcDefault;function Ia(e){var t=e.split(/-(?!$)/);e=t[t.length-1];var r,n,i,o;for(var a=0;a<t.length-1;a++){var l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=true;else if(/^a(lt)?$/i.test(l))r=true;else if(/^(c|ctrl|control)$/i.test(l))n=true;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);i=true}}r&&(e="Alt-"+e);n&&(e="Ctrl-"+e);o&&(e="Cmd-"+e);i&&(e="Shift-"+e);return e}function Pa(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}var i=$(r.split(" "),Ia);for(var o=0;o<i.length;o++){var a=void 0,l=void 0;if(o==i.length-1){l=i.join(" ");a=n}else{l=i.slice(0,o+1).join(" ");a="..."}var s=t[l];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+l)}else t[l]=a}delete e[r]}for(var u in t)e[u]=t[u];return e}function za(e,t,r,n){t=qa(t);var i=t.call?t.call(e,n):t[e];if(false===i)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return za(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var a=za(e,t.fallthrough[o],r,n);if(a)return a}}}function Fa(e){var t="string"==typeof e?e:Oa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ba(e,t,r){var n=e;t.altKey&&"Alt"!=n&&(e="Alt-"+e);(C?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e);(C?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(e="Cmd-"+e);!r&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e);return e}function Ra(e,t){if(f&&34==e.keyCode&&e["char"])return false;var r=Oa[e.keyCode];if(null==r||e.altGraphKey)return false;return Ba(r,e,t)}function qa(e){return"string"==typeof e?Ha[e]:e}function Ga(e,t){var r=e.doc.sel.ranges,n=[];for(var i=0;i<r.length;i++){var o=t(r[i]);while(n.length&&ye(o.from,j(n).to)<=0){var a=n.pop();if(ye(a.from,o.from)<0){o.from=a.from;break}}n.push(o)}Ti(e,function(){for(var t=n.length-1;t>=0;t--)ea(e.doc,"",n[t].from,n[t].to,"+delete");ti(e)})}var Va={selectAll:Xo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),V)},killLine:function(e){return Ga(e,function(t){if(t.empty()){var r=ue(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:me(t.head.line+1,0)}:{from:t.head,to:me(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Ga(e,function(t){return{from:me(t.from().line,0),to:ke(e.doc,me(t.to().line+1,0))}})},delLineLeft:function(e){return Ga(e,function(e){return{from:me(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Ga(e,function(t){var r=e.charCoords(t.head,"div").top+5;var n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){return Ga(e,function(t){var r=e.charCoords(t.head,"div").top+5;var n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(me(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(me(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Ua(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Xa(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return _a(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},_)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},_)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;var n=e.coordsChar({left:0,top:r},"div");if(n.ch<e.getLine(n.line).search(/\S/))return Xa(e,t.head);return n},_)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){var t=[],r=e.listSelections(),n=e.options.tabSize;for(var i=0;i<r.length;i++){var o=r[i].from();var a=F(e.getLine(o.line),o.ch,n);t.push(K(n-a%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Ti(e,function(){var t=e.listSelections(),r=[];for(var n=0;n<t.length;n++){if(!t[n].empty())continue;var i=t[n].head,o=ue(e.doc,i.line).text;if(o){i.ch==o.length&&(i=new me(i.line,i.ch-1));if(i.ch>0){i=new me(i.line,i.ch+1);e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),me(i.line,i.ch-2),i,"+transpose")}else if(i.line>e.doc.first){var a=ue(e.doc,i.line-1).text;if(a){i=new me(i.line,1);e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),me(i.line-1,a.length-1),i,"+transpose")}}}r.push(new to(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){return Ti(e,function(){var t=e.listSelections();for(var r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,true);ti(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Ua(e,t){var r=ue(e.doc,t);var n=je(r);n!=r&&(t=de(n));return ht(true,e,n,t,1)}function _a(e,t){var r=ue(e.doc,t);var n=$e(r);n!=r&&(t=de(n));return ht(true,e,r,t,-1)}function Xa(e,t){var r=Ua(e,t.line);var n=ue(e.doc,r.line);var i=ut(n,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/));var a=t.line==r.line&&t.ch<=o&&t.ch;return me(r.line,a?0:o,r.sticky)}return r}function Ya(e,t,r){if("string"==typeof t){t=Va[t];if(!t)return false}e.display.input.ensurePolled();var n=e.display.shift,i=false;try{e.isReadOnly()&&(e.state.suppressEdits=true);r&&(e.display.shift=false);i=t(e)!=G}finally{e.display.shift=n;e.state.suppressEdits=false}return i}function Ka(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=za(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&za(t,e.options.extraKeys,r,e)||za(t,e.options.keyMap,r,e)}var ja=new B;function $a(e,t,r,n){var i=e.state.keySeq;if(i){if(Fa(t))return"handled";ja.set(50,function(){if(e.state.keySeq==i){e.state.keySeq=null;e.display.input.reset()}});t=i+" "+t}var o=Ka(e,t,n);"multi"==o&&(e.state.keySeq=t);"handled"==o&&Dr(e,"keyHandled",e,t,r);if("handled"==o||"multi"==o){St(r);Rn(e)}if(i&&!o&&/\'$/.test(t)){St(r);return true}return!!o}function Za(e,t){var r=Ra(t,true);if(!r)return false;return t.shiftKey&&!e.state.keySeq?$a(e,"Shift-"+r,t,function(t){return Ya(e,t,true)})||$a(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Ya(e,t)}):$a(e,r,t,function(t){return Ya(e,t)})}function Qa(e,t,r){return $a(e,"'"+r+"'",t,function(t){return Ya(e,t,true)})}var Ja=null;function el(e){var t=this;t.curOp.focus=E();if(bt(t,e))return;a&&l<11&&27==e.keyCode&&(e.returnValue=false);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=Za(t,e);if(f){Ja=n?r:null;!n&&88==r&&!Pt&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")}18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||tl(t)}function tl(e){var t=e.display.lineDiv;W(t,"CodeMirror-crosshair");function r(e){if(18==e.keyCode||!e.altKey){T(t,"CodeMirror-crosshair");mt(document,"keyup",r);mt(document,"mouseover",r)}}vt(document,"keyup",r);vt(document,"mouseover",r)}function rl(e){16==e.keyCode&&(this.doc.sel.shift=false);bt(this,e)}function nl(e){var t=this;if(Xr(t.display,e)||bt(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)return;var r=e.keyCode,n=e.charCode;if(f&&r==Ja){Ja=null;St(e);return}if(f&&(!e.which||e.which<10)&&Za(t,e))return;var i=String.fromCharCode(null==n?r:n);if("\b"==i)return;if(Qa(t,e,i))return;t.display.input.onKeyPress(e)}var il=400;var ol=function(e,t,r){this.time=e;this.pos=t;this.button=r};ol.prototype.compare=function(e,t,r){return this.time+il>e&&0==ye(t,this.pos)&&r==this.button};var al;var ll;function sl(e,t){var r=+new Date;if(ll&&ll.compare(r,e,t)){al=ll=null;return"triple"}if(al&&al.compare(r,e,t)){ll=new ol(r,e,t);al=null;return"double"}al=new ol(r,e,t);ll=null;return"single"}function ul(e){var t=this,r=t.display;if(bt(t,e)||r.activeTouch&&r.input.supportsTouch())return;r.input.ensurePolled();r.shift=e.shiftKey;if(Xr(r,e)){if(!s){r.scroller.draggable=false;setTimeout(function(){return r.scroller.draggable=true},100)}return}if(ml(t,e))return;var n=Hn(t,e),i=At(e),o=n?sl(n,i):"single";window.focus();1==i&&t.state.selectingText&&t.state.selectingText(e);if(n&&cl(t,i,n,o,e))return;if(1==i)n?hl(t,n,o,e):Mt(e)==r.scroller&&St(e);else if(2==i){n&&Eo(t.doc,n);setTimeout(function(){return r.input.focus()},20)}else 3==i&&(S?yl(t,e):Gn(t))}function cl(e,t,r,n,i){var o="Click";"double"==n?o="Double"+o:"triple"==n&&(o="Triple"+o);o=(1==t?"Left":2==t?"Middle":"Right")+o;return $a(e,Ba(o,i),i,function(t){"string"==typeof t&&(t=Va[t]);if(!t)return false;var n=false;try{e.isReadOnly()&&(e.state.suppressEdits=true);n=t(e,r)!=G}finally{e.state.suppressEdits=false}return n})}function fl(e,t,r){var n=e.getOption("configureMouse");var i=n?n(e,t,r):{};if(null==i.unit){var o=b?r.shiftKey&&r.metaKey:r.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey);null==i.addNew&&(i.addNew=y?r.metaKey:r.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(y?r.altKey:r.ctrlKey));return i}function hl(e,t,r,n){a?setTimeout(P(qn,e),0):e.curOp.focus=E();var i=fl(e,r,n);var o=e.doc.sel,l;e.options.dragDrop&&Nt&&!e.isReadOnly()&&"single"==r&&(l=o.contains(t))>-1&&(ye((l=o.ranges[l]).from(),t)<0||t.xRel>0)&&(ye(l.to(),t)>0||t.xRel<0)?dl(e,n,t,i):vl(e,n,t,i)}function dl(e,t,r,n){var i=e.display,o=false;var u=Li(e,function(t){s&&(i.scroller.draggable=false);e.state.draggingText=false;mt(document,"mouseup",u);mt(document,"mousemove",c);mt(i.scroller,"dragstart",f);mt(i.scroller,"drop",u);if(!o){St(t);n.addNew||Eo(e.doc,r,null,null,n.extend);s||a&&9==l?setTimeout(function(){document.body.focus();i.input.focus()},20):i.input.focus()}});var c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10};var f=function(){return o=true};s&&(i.scroller.draggable=true);e.state.draggingText=u;u.copy=!n.moveOnDrag;i.scroller.dragDrop&&i.scroller.dragDrop();vt(document,"mouseup",u);vt(document,"mousemove",c);vt(i.scroller,"dragstart",f);vt(i.scroller,"drop",u);Gn(e);setTimeout(function(){return i.input.focus()},20)}function pl(e,t,r){if("char"==r)return new to(t,t);if("word"==r)return e.findWordAt(t);if("line"==r)return new to(me(t.line,0),ke(e.doc,me(t.line+1,0)));var n=r(e,t);return new to(n.from,n.to)}function vl(e,t,r,n){var i=e.display,o=e.doc;St(t);var a,l,s=o.sel,u=s.ranges;if(n.addNew&&!n.extend){l=o.sel.contains(r);a=l>-1?u[l]:new to(r,r)}else{a=o.sel.primary();l=o.sel.primIndex}if("rectangle"==n.unit){n.addNew||(a=new to(r,r));r=Hn(e,t,true,true);l=-1}else{var c=pl(e,r,n.unit);a=n.extend?Do(a,c.anchor,c.head,n.extend):c}if(n.addNew)if(-1==l){l=u.length;Fo(o,ro(u.concat([a]),l),{scroll:false,origin:"*mouse"})}else if(u.length>1&&u[l].empty()&&"char"==n.unit&&!n.extend){Fo(o,ro(u.slice(0,l).concat(u.slice(l+1)),0),{scroll:false,origin:"*mouse"});s=o.sel}else Ho(o,l,a,U);else{l=0;Fo(o,new eo([a],0),U);s=o.sel}var f=r;function h(t){if(0==ye(f,t))return;f=t;if("rectangle"==n.unit){var i=[],u=e.options.tabSize;var c=F(ue(o,r.line).text,r.ch,u);var h=F(ue(o,t.line).text,t.ch,u);var d=Math.min(c,h),p=Math.max(c,h);for(var v=Math.min(r.line,t.line),g=Math.min(e.lastLine(),Math.max(r.line,t.line));v<=g;v++){var m=ue(o,v).text,y=X(m,d,u);d==p?i.push(new to(me(v,y),me(v,y))):m.length>y&&i.push(new to(me(v,y),me(v,X(m,p,u))))}i.length||i.push(new to(r,r));Fo(o,ro(s.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:false});e.scrollIntoView(t)}else{var b=a;var w=pl(e,t,n.unit);var x=b.anchor,C;if(ye(w.anchor,x)>0){C=w.head;x=Ce(b.from(),w.anchor)}else{C=w.anchor;x=xe(b.to(),w.head)}var S=s.ranges.slice(0);S[l]=new to(ke(o,x),C);Fo(o,ro(S,l),U)}}var d=i.wrapper.getBoundingClientRect();var p=0;function v(t){var r=++p;var a=Hn(e,t,true,"rectangle"==n.unit);if(!a)return;if(0!=ye(a,f)){e.curOp.focus=E();h(a);var l=Yn(i,o);(a.line>=l.to||a.line<l.from)&&setTimeout(Li(e,function(){p==r&&v(t)}),150)}else{var s=t.clientY<d.top?-20:t.clientY>d.bottom?20:0;s&&setTimeout(Li(e,function(){if(p!=r)return;i.scroller.scrollTop+=s;v(t)}),50)}}function g(t){e.state.selectingText=false;p=Infinity;St(t);i.input.focus();mt(document,"mousemove",m);mt(document,"mouseup",y);o.history.lastSelOrigin=null}var m=Li(e,function(e){At(e)?v(e):g(e)});var y=Li(e,g);e.state.selectingText=y;vt(document,"mousemove",m);vt(document,"mouseup",y)}function gl(e,t,r,n){var i,o;try{i=t.clientX;o=t.clientY}catch(t){return false}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return false;n&&St(t);var a=e.display;var l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!xt(e,r))return Tt(t);o-=l.top-a.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var u=a.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=i){var c=pe(e.doc,o);var f=e.options.gutters[s];yt(e,r,e,c,f,t);return Tt(t)}}}function ml(e,t){return gl(e,t,"gutterClick",true)}function yl(e,t){if(Xr(e.display,t)||bl(e,t))return;if(bt(e,t,"contextmenu"))return;e.display.input.onContextMenu(t)}function bl(e,t){if(!xt(e,"gutterContextMenu"))return false;return gl(e,t,"gutterContextMenu",false)}function wl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-");pn(e)}var xl={toString:function(){return"CodeMirror.Init"}};var Cl={};var Sl={};function kl(e){var t=e.optionHandlers;function r(r,n,i,o){e.defaults[r]=n;i&&(t[r]=o?function(e,t,r){r!=xl&&i(e,t,r)}:i)}e.defineOption=r;e.Init=xl;r("value","",function(e,t){return e.setValue(t)},true);r("mode",null,function(e,t){e.doc.modeOption=t;uo(e)},true);r("indentUnit",2,uo,true);r("indentWithTabs",false);r("smartIndent",true);r("tabSize",4,function(e){co(e);pn(e);Ni(e)},true);r("lineSeparator",null,function(e,t){e.doc.lineSep=t;if(!t)return;var r=[],n=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length;r.push(me(n,o))}n++});for(var i=r.length-1;i>=0;i--)ea(e.doc,t,r[i],me(r[i].line,r[i].ch+t.length))});r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g");r!=xl&&e.refresh()});r("specialCharPlaceholder",yr,function(e){return e.refresh()},true);r("electricChars",true);r("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);r("spellcheck",false,function(e,t){return e.getInputField().spellcheck=t},true);r("rtlMoveVisually",!w);r("wholeLineUpdateBefore",true);r("theme","default",function(e){wl(e);Tl(e)},true);r("keyMap","default",function(e,t,r){var n=qa(t);var i=r!=xl&&qa(r);i&&i.detach&&i.detach(e,n);n.attach&&n.attach(e,i||null)});r("extraKeys",null);r("configureMouse",null);r("lineWrapping",false,Ml,true);r("gutters",[],function(e){Ki(e.options);Tl(e)},true);r("fixedGutter",true,function(e,t){e.display.gutters.style.left=t?Dn(e.display)+"px":"0";e.refresh()},true);r("coverGutterNextToScrollbar",false,function(e){return hi(e)},true);r("scrollbarStyle","native",function(e){vi(e);hi(e);e.display.scrollbars.setScrollTop(e.doc.scrollTop);e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},true);r("lineNumbers",false,function(e){Ki(e.options);Tl(e)},true);r("firstLineNumber",1,Tl,true);r("lineNumberFormatter",function(e){return e},Tl,true);r("showCursorWhenSelecting",false,Pn,true);r("resetSelectionOnContextMenu",true);r("lineWiseCopyCut",true);r("pasteLinesPerSelection",true);r("readOnly",false,function(e,t){if("nocursor"==t){Un(e);e.display.input.blur()}e.display.input.readOnlyChanged(t)});r("disableInput",false,function(e,t){t||e.display.input.reset()},true);r("dragDrop",true,Ll);r("allowDropFileTypes",null);r("cursorBlinkRate",530);r("cursorScrollMargin",0);r("cursorHeight",1,Pn,true);r("singleCursorHeightPerLine",true,Pn,true);r("workTime",100);r("workDelay",100);r("flattenSpans",true,co,true);r("addModeClass",false,co,true);r("pollInterval",100);r("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t});r("historyEventDelay",1250);r("viewportMargin",10,function(e){return e.refresh()},true);r("maxHighlightLength",1e4,co,true);r("moveInputWithCursor",true,function(e,t){t||e.display.input.resetPosition()});r("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""});r("autofocus",null);r("direction","ltr",function(e,t){return e.doc.setDirection(t)},true)}function Tl(e){Yi(e);Ni(e);Kn(e)}function Ll(e,t,r){var n=r&&r!=xl;if(!t!=!n){var i=e.display.dragFunctions;var o=t?vt:mt;o(e.display.scroller,"dragstart",i.start);o(e.display.scroller,"dragenter",i.enter);o(e.display.scroller,"dragover",i.over);o(e.display.scroller,"dragleave",i.leave);o(e.display.scroller,"drop",i.drop)}}function Ml(e){if(e.options.lineWrapping){W(e.display.wrapper,"CodeMirror-wrap");e.display.sizer.style.minWidth="";e.display.sizerWidth=null}else{T(e.display.wrapper,"CodeMirror-wrap");it(e)}Wn(e);Ni(e);pn(e);setTimeout(function(){return hi(e)},100)}function Al(e,t){var r=this;if(!(this instanceof Al))return new Al(e,t);this.options=t=t?z(t):{};z(Cl,t,false);Ki(t);var n=t.value;"string"==typeof n&&(n=new ba(n,t.mode,null,t.lineSeparator,t.direction));this.doc=n;var i=new Al.inputStyles[t.inputStyle](this);var o=this.display=new se(e,n,i);o.wrapper.CodeMirror=this;Yi(this);wl(this);t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");vi(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new B,keySeq:null,specialChars:null};t.autofocus&&!m&&o.input.focus();a&&l<11&&setTimeout(function(){return r.display.input.reset(true)},20);Nl(this);Ma();mi(this);this.curOp.forceUpdate=true;vo(this,n);t.autofocus&&!m||this.hasFocus()?setTimeout(P(Vn,this),20):Un(this);for(var u in Sl)Sl.hasOwnProperty(u)&&Sl[u](r,t[u],xl);jn(this);t.finishInit&&t.finishInit(this);for(var c=0;c<Ol.length;++c)Ol[c](r);yi(this);s&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Al.defaults=Cl;Al.optionHandlers=Sl;function Nl(e){var t=e.display;vt(t.scroller,"mousedown",Li(e,ul));vt(t.scroller,"dblclick",a&&l<11?Li(e,function(t){if(bt(e,t))return;var r=Hn(e,t);if(!r||ml(e,t)||Xr(e.display,t))return;St(t);var n=e.findWordAt(r);Eo(e.doc,n.anchor,n.head)}):function(t){return bt(e,t)||St(t)});S||vt(t.scroller,"contextmenu",function(t){return yl(e,t)});var r,n={end:0};function i(){if(t.activeTouch){r=setTimeout(function(){return t.activeTouch=null},1e3);n=t.activeTouch;n.end=+new Date}}function o(e){if(1!=e.touches.length)return false;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function s(e,t){if(null==t.left)return true;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}vt(t.scroller,"touchstart",function(i){if(!bt(e,i)&&!o(i)){t.input.ensurePolled();clearTimeout(r);var a=+new Date;t.activeTouch={start:a,moved:false,prev:a-n.end<=300?n:null};if(1==i.touches.length){t.activeTouch.left=i.touches[0].pageX;t.activeTouch.top=i.touches[0].pageY}}});vt(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=true)});vt(t.scroller,"touchend",function(r){var n=t.activeTouch;if(n&&!Xr(t,r)&&null!=n.left&&!n.moved&&new Date-n.start<300){var o=e.coordsChar(t.activeTouch,"page"),a;a=!n.prev||s(n,n.prev)?new to(o,o):!n.prev.prev||s(n,n.prev.prev)?e.findWordAt(o):new to(me(o.line,0),ke(e.doc,me(o.line+1,0)));e.setSelection(a.anchor,a.head);e.focus();St(r)}i()});vt(t.scroller,"touchcancel",i);vt(t.scroller,"scroll",function(){if(t.scroller.clientHeight){ai(e,t.scroller.scrollTop);si(e,t.scroller.scrollLeft,true);yt(e,"scroll",e)}});vt(t.scroller,"mousewheel",function(t){return Ji(e,t)});vt(t.scroller,"DOMMouseScroll",function(t){return Ji(e,t)});vt(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0});t.dragFunctions={enter:function(t){bt(e,t)||Lt(t)},over:function(t){if(!bt(e,t)){Sa(e,t);Lt(t)}},start:function(t){return Ca(e,t)},drop:Li(e,xa),leave:function(t){bt(e,t)||ka(e)}};var u=t.input.getField();vt(u,"keyup",function(t){return rl.call(e,t)});vt(u,"keydown",Li(e,el));vt(u,"keypress",Li(e,nl));vt(u,"focus",function(t){return Vn(e,t)});vt(u,"blur",function(t){return Un(e,t)})}var Ol=[];Al.defineInitHook=function(e){return Ol.push(e)};function Dl(e,t,r,n){var i=e.doc,o;null==r&&(r="add");"smart"==r&&(i.mode.indent?o=tr(e,t).state:r="prev");var a=e.options.tabSize;var l=ue(i,t),s=F(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var u=l.text.match(/^\s*/)[0],c;if(n||/\S/.test(l.text)){if("smart"==r){c=i.mode.indent(o,l.text.slice(u.length),l.text);if(c==G||c>150){if(!n)return;r="prev"}}}else{c=0;r="not"}"prev"==r?c=t>i.first?F(ue(i,t-1).text,null,a):0:"add"==r?c=s+e.options.indentUnit:"subtract"==r?c=s-e.options.indentUnit:"number"==typeof r&&(c=s+r);c=Math.max(0,c);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/a);d;--d){h+=a;f+="\t"}h<c&&(f+=K(c-h));if(f!=u){ea(i,f,me(t,0),me(t,u.length),"+input");l.stateAfter=null;return true}for(var p=0;p<i.sel.ranges.length;p++){var v=i.sel.ranges[p];if(v.head.line==t&&v.head.ch<u.length){var g=me(t,u.length);Ho(i,p,new to(g,g));break}}}var El=null;function Wl(e){El=e}function Hl(e,t,r,n,i){var o=e.doc;e.display.shift=false;n||(n=o.sel);var a=e.state.pasteIncoming||"paste"==i;var l=Ht(t),s=null;if(a&&n.ranges.length>1)if(El&&El.text.join("\n")==t){if(n.ranges.length%El.text.length==0){s=[];for(var u=0;u<El.text.length;u++)s.push(o.splitLines(El.text[u]))}}else l.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(s=$(l,function(e){return[e]}));var c;for(var f=n.ranges.length-1;f>=0;f--){var h=n.ranges[f];var d=h.from(),p=h.to();h.empty()&&(r&&r>0?d=me(d.line,d.ch-r):e.state.overwrite&&!a?p=me(p.line,Math.min(ue(o,p.line).text.length,p.ch+j(l).length)):El&&El.lineWise&&El.text.join("\n")==t&&(d=p=me(d.line,0)));c=e.curOp.updateInput;var v={from:d,to:p,text:s?s[f%s.length]:l,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};Ko(e.doc,v);Dr(e,"inputRead",e,v)}t&&!a&&Pl(e,t);ti(e);e.curOp.updateInput=c;e.curOp.typing=true;e.state.pasteIncoming=e.state.cutIncoming=false}function Il(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r){e.preventDefault();t.isReadOnly()||t.options.disableInput||Ti(t,function(){return Hl(t,r,0,null,"paste")});return true}}function Pl(e,t){if(!e.options.electricChars||!e.options.smartIndent)return;var r=e.doc.sel;for(var n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)continue;var o=e.getModeAt(i.head);var a=false;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(t.indexOf(o.electricChars.charAt(l))>-1){a=Dl(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(ue(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Dl(e,i.head.line,"smart"));a&&Dr(e,"electricInput",e,i.head.line)}}function zl(e){var t=[],r=[];for(var n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line;var o={anchor:me(i,0),head:me(i+1,0)};r.push(o);t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function Fl(e,t){e.setAttribute("autocorrect","off");e.setAttribute("autocapitalize","off");e.setAttribute("spellcheck",!!t)}function Bl(){var e=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var t=A("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");s?e.style.width="1000px":e.setAttribute("wrap","off");v&&(e.style.border="1px solid black");Fl(e);return t}var Rl=function(e){var t=e.optionHandlers;var r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus();this.display.input.focus()},setOption:function(e,r){var n=this.options,i=n[e];if(n[e]==r&&"mode"!=e)return;n[e]=r;t.hasOwnProperty(e)&&Li(this,t[e])(this,r,i);yt(this,"optionChange",this,e)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](qa(e))},removeKeyMap:function(e){var t=this.state.keyMaps;for(var r=0;r<t.length;++r)if(t[r]==e||t[r].name==e){t.splice(r,1);return true}},addOverlay:Mi(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");Z(this.state.overlays,{mode:n,modeSpec:t,opaque:r&&r.opaque,priority:r&&r.priority||0},function(e){return e.priority});this.state.modeGen++;Ni(this)}),removeOverlay:Mi(function(e){var t=this;var r=this.state.overlays;for(var n=0;n<r.length;++n){var i=r[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e){r.splice(n,1);t.state.modeGen++;Ni(t);return}}}),indentLine:Mi(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract");ve(this.doc,e)&&Dl(this,e,t,r)}),indentSelection:Mi(function(e){var t=this;var r=this.doc.sel.ranges,n=-1;for(var i=0;i<r.length;i++){var o=r[i];if(o.empty()){if(o.head.line>n){Dl(t,o.head.line,e,true);n=o.head.line;i==t.doc.sel.primIndex&&ti(t)}}else{var a=o.from(),l=o.to();var s=Math.max(n,a.line);n=Math.min(t.lastLine(),l.line-(l.ch?0:1))+1;for(var u=s;u<n;++u)Dl(t,u,e);var c=t.doc.sel.ranges;0==a.ch&&r.length==c.length&&c[i].from().ch>0&&Ho(t.doc,i,new to(a,c[i].to()),V)}}}),getTokenAt:function(e,t){return ar(this,e,t)},getLineTokens:function(e,t){return ar(this,me(e),t,true)},getTokenTypeAt:function(e){e=ke(this.doc,e);var t=er(this,ue(this.doc,e.line));var r=0,n=(t.length-1)/2,i=e.ch;var o;if(0==i)o=t[2];else for(;;){var a=r+n>>1;if((a?t[2*a-1]:0)>=i)n=a;else{if(!(t[2*a+1]<i)){o=t[2*a+2];break}r=a+1}}var l=o?o.indexOf("overlay "):-1;return l<0?o:0==l?null:o.slice(0,l-1)},getModeAt:function(t){var r=this.doc.mode;if(!r.innerMode)return r;return e.innerMode(r,this.getTokenAt(t).state).mode},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=this;var i=[];if(!r.hasOwnProperty(t))return i;var o=r[t],a=this.getModeAt(e);if("string"==typeof a[t])o[a[t]]&&i.push(o[a[t]]);else if(a[t])for(var l=0;l<a[t].length;l++){var s=o[a[t][l]];s&&i.push(s)}else a.helperType&&o[a.helperType]?i.push(o[a.helperType]):o[a.name]&&i.push(o[a.name]);for(var u=0;u<o._global.length;u++){var c=o._global[u];c.pred(a,n)&&-1==R(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(e,t){var r=this.doc;e=Se(r,null==e?r.first+r.size-1:e);return tr(this,e+1,t).state},cursorCoords:function(e,t){var r,n=this.doc.sel.primary();r=null==e?n.head:"object"==typeof e?ke(this.doc,e):e?n.from():n.to();return wn(this,r,t||"page")},charCoords:function(e,t){return bn(this,ke(this.doc,e),t||"page")},coordsChar:function(e,t){e=yn(this,e,t||"page");return Sn(this,e.left,e.top)},lineAtHeight:function(e,t){e=yn(this,{top:e,left:0},t||"page").top;return pe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n=false,i;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;if(e<this.doc.first)e=this.doc.first;else if(e>o){e=o;n=true}i=ue(this.doc,e)}else i=e;return mn(this,i,{top:0,left:0},t||"page",r||n).top+(n?this.doc.height-rt(i):0)},defaultTextHeight:function(){return An(this.display)},defaultCharWidth:function(){return Nn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=wn(this,ke(this.doc,e));var a=e.bottom,l=e.left;t.style.position="absolute";t.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(t);o.sizer.appendChild(t);if("over"==n)a=e.top;else if("above"==n||"near"==n){var s=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>s)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=s&&(a=e.bottom);l+t.offsetWidth>u&&(l=u-t.offsetWidth)}t.style.top=a+"px";t.style.left=t.style.right="";if("right"==i){l=o.sizer.clientWidth-t.offsetWidth;t.style.right="0px"}else{"left"==i?l=0:"middle"==i&&(l=(o.sizer.clientWidth-t.offsetWidth)/2);t.style.left=l+"px"}r&&Qn(this,{left:l,top:a,right:l+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:Mi(el),triggerOnKeyPress:Mi(nl),triggerOnKeyUp:rl,triggerOnMouseDown:Mi(ul),execCommand:function(e){if(Va.hasOwnProperty(e))return Va[e].call(null,this)},triggerElectric:Mi(function(e){Pl(this,e)}),findPosH:function(e,t,r,n){var i=this;var o=1;if(t<0){o=-1;t=-t}var a=ke(this.doc,e);for(var l=0;l<t;++l){a=ql(i.doc,a,o,r,n);if(a.hitSide)break}return a},moveH:Mi(function(e,t){var r=this;this.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?ql(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},_)}),deleteH:Mi(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Ga(this,function(r){var i=ql(n,r.head,e,t,false);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=this;var o=1,a=n;if(t<0){o=-1;t=-t}var l=ke(this.doc,e);for(var s=0;s<t;++s){var u=wn(i,l,"div");null==a?a=u.left:u.left=a;l=Gl(i,u,o,r);if(l.hitSide)break}return l},moveV:Mi(function(e,t){var r=this;var n=this.doc,i=[];var o=!this.display.shift&&!n.extend&&n.sel.somethingSelected();n.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var l=wn(r,a.head,"div");null!=a.goalColumn&&(l.left=a.goalColumn);i.push(l.left);var s=Gl(r,l,e,t);"page"==t&&a==n.sel.primary()&&ei(r,bn(r,s,"div").top-l.top);return s},_);if(i.length)for(var a=0;a<n.sel.ranges.length;a++)n.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=this.doc,r=ue(t,e.line).text;var n=e.ch,i=e.ch;if(r){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=r.length||!n?++i:--n;var a=r.charAt(n);var l=re(a,o)?function(e){return re(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!re(e)};while(n>0&&l(r.charAt(n-1)))--n;while(i<r.length&&l(r.charAt(i)))++i}return new to(me(e.line,n),me(e.line,i))},toggleOverwrite:function(e){if(null!=e&&e==this.state.overwrite)return;(this.state.overwrite=!this.state.overwrite)?W(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite");yt(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==E()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Mi(function(e,t){ri(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-$r(this)-this.display.barHeight,width:e.scrollWidth-$r(this)-this.display.barWidth,clientHeight:Qr(this),clientWidth:Zr(this)}},scrollIntoView:Mi(function(e,t){if(null==e){e={from:this.doc.sel.primary().head,to:null};null==t&&(t=this.options.cursorScrollMargin)}else"number"==typeof e?e={from:me(e,0),to:null}:null==e.from&&(e={from:e,to:null});e.to||(e.to=e.from);e.margin=t||0;null!=e.from.line?ni(this,e):oi(this,e.from,e.to,e.margin)}),setSize:Mi(function(e,t){var r=this;var n=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=n(e));null!=t&&(this.display.wrapper.style.height=n(t));this.options.lineWrapping&&dn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Oi(r,i,"widget");break}++i});this.curOp.forceUpdate=true;yt(this,"refresh",this)}),operation:function(e){return Ti(this,e)},startOperation:function(){return mi(this)},endOperation:function(){return yi(this)},refresh:Mi(function(){var e=this.display.cachedTextHeight;Ni(this);this.curOp.forceUpdate=true;pn(this);ri(this,this.doc.scrollLeft,this.doc.scrollTop);_i(this);(null==e||Math.abs(e-An(this.display))>.5)&&Wn(this);yt(this,"refresh",this)}),swapDoc:Mi(function(e){var t=this.doc;t.cm=null;vo(this,e);pn(this);this.display.input.reset();ri(this,e.scrollLeft,e.scrollTop);this.curOp.forceScroll=true;Dr(this,"swapDoc",this,t);return t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Ct(e);e.registerHelper=function(t,n,i){r.hasOwnProperty(t)||(r[t]=e[t]={_global:[]});r[t][n]=i};e.registerGlobalHelper=function(t,n,i,o){e.registerHelper(t,n,o);r[t]._global.push({pred:i,val:o})}};function ql(e,t,r,n,i){var o=t;var a=r;var l=ue(e,t.line);function s(){var n=t.line+r;if(n<e.first||n>=e.first+e.size)return false;t=new me(n,t.ch,t.sticky);return l=ue(e,n)}function u(n){var o;o=i?dt(e.cm,l,t,r):ft(l,t,r);if(null==o){if(n||!s())return false;t=ht(i,e.cm,l,t.line,r)}else t=o;return true}if("char"==n)u();else if("column"==n)u(true);else if("word"==n||"group"==n){var c=null,f="group"==n;var h=e.cm&&e.cm.getHelper(t,"wordChars");for(var d=true;;d=false){if(r<0&&!u(!d))break;var p=l.text.charAt(t.ch)||"\n";var v=re(p,h)?"w":f&&"\n"==p?"n":!f||/\s/.test(p)?null:"p";!f||d||v||(v="s");if(c&&c!=v){if(r<0){r=1;u();t.sticky="after"}break}v&&(c=v);if(r>0&&!u(!d))break}}var g=Uo(e,t,o,a,true);be(o,g)&&(g.hitSide=true);return g}function Gl(e,t,r,n){var i=e.doc,o=t.left,a;if("page"==n){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var s=Math.max(l-.5*An(e.display),3);a=(r>0?t.bottom:t.top)+r*s}else"line"==n&&(a=r>0?t.bottom+3:t.top-3);var u;for(;;){u=Sn(e,o,a);if(!u.outside)break;if(r<0?a<=0:a>=i.height){u.hitSide=true;break}a+=5*r}return u}var Vl=function(e){this.cm=e;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new B;this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};Vl.prototype.init=function(e){var t=this;var r=this,n=r.cm;var i=r.div=e.lineDiv;Fl(i,n.options.spellcheck);vt(i,"paste",function(e){if(bt(n,e)||Il(e,n))return;l<=11&&setTimeout(Li(n,function(){return t.updateFromDOM()}),20)});vt(i,"compositionstart",function(e){t.composing={data:e.data,done:false}});vt(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:false})});vt(i,"compositionend",function(e){if(t.composing){e.data!=t.composing.data&&t.readFromDOMSoon();t.composing.done=true}});vt(i,"touchstart",function(){return r.forceCompositionEnd()});vt(i,"input",function(){t.composing||t.readFromDOMSoon()});function o(e){if(bt(n,e))return;if(n.somethingSelected()){Wl({lineWise:false,text:n.getSelections()});"cut"==e.type&&n.replaceSelection("",null,"cut")}else{if(!n.options.lineWiseCopyCut)return;var t=zl(n);Wl({lineWise:true,text:t.text});"cut"==e.type&&n.operation(function(){n.setSelections(t.ranges,0,V);n.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=El.text.join("\n");e.clipboardData.setData("Text",o);if(e.clipboardData.getData("Text")==o){e.preventDefault();return}}var a=Bl(),l=a.firstChild;n.display.lineSpace.insertBefore(a,n.display.lineSpace.firstChild);l.value=El.text.join("\n");var s=document.activeElement;I(l);setTimeout(function(){n.display.lineSpace.removeChild(a);s.focus();s==i&&r.showPrimarySelection()},50)}vt(i,"copy",o);vt(i,"cut",o)};Vl.prototype.prepareSelection=function(){var e=zn(this.cm,false);e.focus=this.cm.state.focused;return e};Vl.prototype.showSelection=function(e,t){if(!e||!this.cm.display.view.length)return;(e.focus||t)&&this.showPrimarySelection();this.showMultipleSelections(e)};Vl.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm,n=t.doc.sel.primary();var i=n.from(),o=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom){e.removeAllRanges();return}var a=Kl(t,e.anchorNode,e.anchorOffset);var l=Kl(t,e.focusNode,e.focusOffset);if(a&&!a.bad&&l&&!l.bad&&0==ye(Ce(a,l),i)&&0==ye(xe(a,l),o))return;var s=t.display.view;var u=i.line>=t.display.viewFrom&&Ul(t,i)||{node:s[0].measure.map[2],offset:0};var c=o.line<t.display.viewTo&&Ul(t,o);if(!c){var f=s[s.length-1].measure;var h=f.maps?f.maps[f.maps.length-1]:f.map;c={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(!u||!c){e.removeAllRanges();return}var d=e.rangeCount&&e.getRangeAt(0),p;try{p=O(u.node,u.offset,c.offset,c.node)}catch(e){}if(p){if(!r&&t.state.focused){e.collapse(u.node,u.offset);if(!p.collapsed){e.removeAllRanges();e.addRange(p)}}else{e.removeAllRanges();e.addRange(p)}d&&null==e.anchorNode?e.addRange(d):r&&this.startGracePeriod()}this.rememberSelection()};Vl.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){e.gracePeriod=false;e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=true})},20)};Vl.prototype.showMultipleSelections=function(e){M(this.cm.display.cursorDiv,e.cursors);M(this.cm.display.selectionDiv,e.selection)};Vl.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode;this.lastAnchorOffset=e.anchorOffset;this.lastFocusNode=e.focusNode;this.lastFocusOffset=e.focusOffset};Vl.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return false;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)};Vl.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly){this.selectionInEditor()||this.showSelection(this.prepareSelection(),true);this.div.focus()}};Vl.prototype.blur=function(){this.div.blur()};Vl.prototype.getField=function(){return this.div};Vl.prototype.supportsTouch=function(){return true};Vl.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Ti(this.cm,function(){return e.cm.curOp.selectionChanged=true});function t(){if(e.cm.state.focused){e.pollSelection();e.polling.set(e.cm.options.pollInterval,t)}}this.polling.set(this.cm.options.pollInterval,t)};Vl.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset};Vl.prototype.pollSelection=function(){if(null!=this.readDOMTimeout||this.gracePeriod||!this.selectionChanged())return;var e=window.getSelection(),t=this.cm;if(g&&c&&this.cm.options.gutters.length&&_l(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing)return;this.rememberSelection();var r=Kl(t,e.anchorNode,e.anchorOffset);var n=Kl(t,e.focusNode,e.focusOffset);r&&n&&Ti(t,function(){Fo(t.doc,no(r,n),V);(r.bad||n.bad)&&(t.curOp.selectionChanged=true)})};Vl.prototype.pollContent=function(){if(null!=this.readDOMTimeout){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var e=this.cm,t=e.display,r=e.doc.sel.primary();var n=r.from(),i=r.to();0==n.ch&&n.line>e.firstLine()&&(n=me(n.line-1,ue(e.doc,n.line-1).length));i.ch==ue(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=me(i.line+1,0));if(n.line<t.viewFrom||i.line>t.viewTo-1)return false;var o,a,l;if(n.line==t.viewFrom||0==(o=In(e,n.line))){a=de(t.view[0].line);l=t.view[0].node}else{a=de(t.view[o].line);l=t.view[o-1].node.nextSibling}var s=In(e,i.line);var u,c;if(s==t.view.length-1){u=t.viewTo-1;c=t.lineDiv.lastChild}else{u=de(t.view[s+1].line)-1;c=t.view[s+1].node.previousSibling}if(!l)return false;var f=e.doc.splitLines(Yl(e,l,c,a,u));var h=ce(e.doc,me(a,0),me(u,ue(e.doc,u).text.length));while(f.length>1&&h.length>1)if(j(f)==j(h)){f.pop();h.pop();u--}else{if(f[0]!=h[0])break;f.shift();h.shift();a++}var d=0,p=0;var v=f[0],g=h[0],m=Math.min(v.length,g.length);while(d<m&&v.charCodeAt(d)==g.charCodeAt(d))++d;var y=j(f),b=j(h);var w=Math.min(y.length-(1==f.length?d:0),b.length-(1==h.length?d:0));while(p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1))++p;if(1==f.length&&1==h.length&&a==n.line)while(d&&d>n.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1)){d--;p++}f[f.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,"");f[0]=f[0].slice(d).replace(/\u200b+$/,"");var x=me(a,d);var C=me(u,h.length?j(h).length-p:0);if(f.length>1||f[0]||ye(x,C)){ea(e.doc,f,x,C,"+input");return true}};Vl.prototype.ensurePolled=function(){this.forceCompositionEnd()};Vl.prototype.reset=function(){this.forceCompositionEnd()};Vl.prototype.forceCompositionEnd=function(){if(!this.composing)return;clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};Vl.prototype.readFromDOMSoon=function(){var e=this;if(null!=this.readDOMTimeout)return;this.readDOMTimeout=setTimeout(function(){e.readDOMTimeout=null;if(e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80)};Vl.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Ti(this.cm,function(){return Ni(e.cm)})};Vl.prototype.setUneditable=function(e){e.contentEditable="false"};Vl.prototype.onKeyPress=function(e){if(0==e.charCode)return;e.preventDefault();this.cm.isReadOnly()||Li(this.cm,Hl)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)};Vl.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)};Vl.prototype.onContextMenu=function(){};Vl.prototype.resetPosition=function(){};Vl.prototype.needsContentAttribute=true;function Ul(e,t){var r=nn(e,t.line);if(!r||r.hidden)return null;var n=ue(e.doc,t.line);var i=en(r,n,t.line);var o=ut(n,e.doc.direction),a="left";if(o){var l=lt(o,t.ch);a=l%2?"right":"left"}var s=sn(i.map,t.ch,a);s.offset="right"==s.collapse?s.end:s.start;return s}function _l(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return true;return false}function Xl(e,t){t&&(e.bad=true);return e}function Yl(e,t,r,n,i){var o="",a=false,l=e.doc.lineSeparator();function s(e){return function(t){return t.id==e}}function u(){if(a){o+=l;a=false}}function c(e){if(e){u();o+=e}}function f(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(null!=r){c(r||t.textContent.replace(/\u200b/g,""));return}var o=t.getAttribute("cm-marker"),h;if(o){var d=e.findMarks(me(n,0),me(i+1,0),s(+o));d.length&&(h=d[0].find())&&c(ce(e.doc,h.from,h.to).join(l));return}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p)$/i.test(t.nodeName);p&&u();for(var v=0;v<t.childNodes.length;v++)f(t.childNodes[v]);p&&(a=true)}else 3==t.nodeType&&c(t.nodeValue)}for(;;){f(t);if(t==r)break;t=t.nextSibling}return o}function Kl(e,t,r){var n;if(t==e.display.lineDiv){n=e.display.lineDiv.childNodes[r];if(!n)return Xl(e.clipPos(me(e.display.viewTo-1)),true);t=null;r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return jl(o,t,r)}}function jl(e,t,r){var n=e.text.firstChild,i=false;if(!t||!D(n,t))return Xl(me(de(e.line),0),true);if(t==n){i=true;t=n.childNodes[r];r=0;if(!t){var o=e.rest?j(e.rest):e.line;return Xl(me(de(o),o.text.length),i)}}var a=3==t.nodeType?t:null,l=t;if(!a&&1==t.childNodes.length&&3==t.firstChild.nodeType){a=t.firstChild;r&&(r=a.nodeValue.length)}while(l.parentNode!=n)l=l.parentNode;var s=e.measure,u=s.maps;function c(t,r,n){for(var i=-1;i<(u?u.length:0);i++){var o=i<0?s.map:u[i];for(var a=0;a<o.length;a+=3){var l=o[a+2];if(l==t||l==r){var c=de(i<0?e.line:e.rest[i]);var f=o[a]+n;(n<0||l!=t)&&(f=o[a+(n?1:0)]);return me(c,f)}}}}var f=c(a,l,r);if(f)return Xl(f,i);for(var h=l.nextSibling,d=a?a.nodeValue.length-r:0;h;h=h.nextSibling){f=c(h,h.firstChild,0);if(f)return Xl(me(f.line,f.ch-d),i);d+=h.textContent.length}for(var p=l.previousSibling,v=r;p;p=p.previousSibling){f=c(p,p.firstChild,-1);if(f)return Xl(me(f.line,f.ch+v),i);v+=p.textContent.length}}var $l=function(e){this.cm=e;this.prevInput="";this.pollingFast=false;this.polling=new B;this.hasSelection=false;this.composing=null};$l.prototype.init=function(e){var t=this;var r=this,n=this.cm;var i=this.wrapper=Bl();var o=this.textarea=i.firstChild;e.wrapper.insertBefore(i,e.wrapper.firstChild);v&&(o.style.width="0px");vt(o,"input",function(){a&&l>=9&&t.hasSelection&&(t.hasSelection=null);r.poll()});vt(o,"paste",function(e){if(bt(n,e)||Il(e,n))return;n.state.pasteIncoming=true;r.fastPoll()});function s(e){if(bt(n,e))return;if(n.somethingSelected())Wl({lineWise:false,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=zl(n);Wl({lineWise:true,text:t.text});if("cut"==e.type)n.setSelections(t.ranges,null,V);else{r.prevInput="";o.value=t.text.join("\n");I(o)}}"cut"==e.type&&(n.state.cutIncoming=true)}vt(o,"cut",s);vt(o,"copy",s);vt(e.scroller,"paste",function(t){if(Xr(e,t)||bt(n,t))return;n.state.pasteIncoming=true;r.focus()});vt(e.lineSpace,"selectstart",function(t){Xr(e,t)||St(t)});vt(o,"compositionstart",function(){var e=n.getCursor("from");r.composing&&r.composing.range.clear();r.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}});vt(o,"compositionend",function(){if(r.composing){r.poll();r.composing.range.clear();r.composing=null}})};$l.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc;var n=zn(e);if(e.options.moveInputWithCursor){var i=wn(e,r.sel.primary().head,"div");var o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top));n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return n};$l.prototype.showSelection=function(e){var t=this.cm,r=t.display;M(r.cursorDiv,e.cursors);M(r.selectionDiv,e.selection);if(null!=e.teTop){this.wrapper.style.top=e.teTop+"px";this.wrapper.style.left=e.teLeft+"px"}};$l.prototype.reset=function(e){if(this.contextMenuPending||this.composing)return;var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r;t.state.focused&&I(this.textarea);a&&l>=9&&(this.hasSelection=r)}else if(!e){this.prevInput=this.textarea.value="";a&&l>=9&&(this.hasSelection=null)}};$l.prototype.getField=function(){return this.textarea};$l.prototype.supportsTouch=function(){return false};$l.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||E()!=this.textarea))try{this.textarea.focus()}catch(e){}};$l.prototype.blur=function(){this.textarea.blur()};$l.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};$l.prototype.receivedFocus=function(){this.slowPoll()};$l.prototype.slowPoll=function(){var e=this;if(this.pollingFast)return;this.polling.set(this.cm.options.pollInterval,function(){e.poll();e.cm.state.focused&&e.slowPoll()})};$l.prototype.fastPoll=function(){var e=false,t=this;t.pollingFast=true;function r(){var n=t.poll();if(n||e){t.pollingFast=false;t.slowPoll()}else{e=true;t.polling.set(60,r)}}t.polling.set(20,r)};$l.prototype.poll=function(){var e=this;var t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||It(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return false;var i=r.value;if(i==n&&!t.somethingSelected())return false;if(a&&l>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i)){t.display.input.reset();return false}if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);8203!=o||n||(n="​");if(8666==o){this.reset();return this.cm.execCommand("undo")}}var s=0,u=Math.min(n.length,i.length);while(s<u&&n.charCodeAt(s)==i.charCodeAt(s))++s;Ti(t,function(){Hl(t,i.slice(s),n.length-s,null,e.composing?"*compose":null);i.length>1e3||i.indexOf("\n")>-1?r.value=e.prevInput="":e.prevInput=i;if(e.composing){e.composing.range.clear();e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"})}});return true};$l.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=false)};$l.prototype.onKeyPress=function(){a&&l>=9&&(this.hasSelection=null);this.fastPoll()};$l.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,i=t.textarea;var o=Hn(r,e),u=n.scroller.scrollTop;if(!o||f)return;var c=r.options.resetSelectionOnContextMenu;c&&-1==r.doc.sel.contains(o)&&Li(r,Fo)(r.doc,no(o),V);var h=i.style.cssText,d=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var p=t.wrapper.getBoundingClientRect();i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var v;s&&(v=window.scrollY);n.input.focus();s&&window.scrollTo(null,v);n.input.reset();r.somethingSelected()||(i.value=t.prevInput=" ");t.contextMenuPending=true;n.selForContextMenu=r.doc.sel;clearTimeout(n.detectingSelectAll);function g(){if(null!=i.selectionStart){var e=r.somethingSelected();var o="​"+(e?i.value:"");i.value="⇚";i.value=o;t.prevInput=e?"":"​";i.selectionStart=1;i.selectionEnd=o.length;n.selForContextMenu=r.doc.sel}}function m(){t.contextMenuPending=false;t.wrapper.style.cssText=d;i.style.cssText=h;a&&l<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=u);if(null!=i.selectionStart){(!a||a&&l<9)&&g();var e=0,o=function(){if(n.selForContextMenu==r.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput)Li(r,Xo)(r);else if(e++<10)n.detectingSelectAll=setTimeout(o,500);else{n.selForContextMenu=null;n.input.reset()}};n.detectingSelectAll=setTimeout(o,200)}}a&&l>=9&&g();if(S){Lt(e);var y=function(){mt(window,"mouseup",y);setTimeout(m,20)};vt(window,"mouseup",y)}else setTimeout(m,50)};$l.prototype.readOnlyChanged=function(e){e||this.reset();this.textarea.disabled="nocursor"==e};$l.prototype.setUneditable=function(){};$l.prototype.needsContentAttribute=false;function Zl(e,t){t=t?z(t):{};t.value=e.value;!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex);!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(null==t.autofocus){var r=E();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function n(){e.value=l.getValue()}var i;if(e.form){vt(e.form,"submit",n);if(!t.leaveSubmitMethodAlone){var o=e.form;i=o.submit;try{var a=o.submit=function(){n();o.submit=i;o.submit();o.submit=a}}catch(e){}}}t.finishInit=function(t){t.save=n;t.getTextArea=function(){return e};t.toTextArea=function(){t.toTextArea=isNaN;n();e.parentNode.removeChild(t.getWrapperElement());e.style.display="";if(e.form){mt(e.form,"submit",n);"function"==typeof e.form.submit&&(e.form.submit=i)}}};e.style.display="none";var l=Al(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return l}function Ql(e){e.off=mt;e.on=vt;e.wheelEventPixels=Qi;e.Doc=ba;e.splitLines=Ht;e.countColumn=F;e.findColumn=X;e.isWordChar=te;e.Pass=G;e.signal=yt;e.Line=fr;e.changeEnd=io;e.scrollbarModel=pi;e.Pos=me;e.cmpPos=ye;e.modes=Bt;e.mimeModes=Rt;e.resolveMode=Vt;e.getMode=Ut;e.modeExtensions=_t;e.extendMode=Xt;e.copyState=Yt;e.startState=jt;e.innerMode=Kt;e.commands=Va;e.keyMap=Ha;e.keyName=Ra;e.isModifierKey=Fa;e.lookupKey=za;e.normalizeKeyMap=Pa;e.StringStream=$t;e.SharedTextMarker=da;e.TextMarker=fa;e.LineWidget=la;e.e_preventDefault=St;e.e_stopPropagation=kt;e.e_stop=Lt;e.addClass=W;e.contains=D;e.rmClass=T;e.keyNames=Oa}kl(Al);Rl(Al);var Jl="iter insert remove copy getEditor constructor".split(" ");for(var es in ba.prototype)ba.prototype.hasOwnProperty(es)&&R(Jl,es)<0&&(Al.prototype[es]=function(e){return function(){return e.apply(this.doc,arguments)}}(ba.prototype[es]));Ct(ba);Al.inputStyles={textarea:$l,contenteditable:Vl};Al.defineMode=function(e){Al.defaults.mode||"null"==e||(Al.defaults.mode=e);qt.apply(this,arguments)};Al.defineMIME=Gt;Al.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}});Al.defineMIME("text/plain","null");Al.defineExtension=function(e,t){Al.prototype[e]=t};Al.defineDocExtension=function(e,t){ba.prototype[e]=t};Al.fromTextArea=Zl;Ql(Al);Al.version="5.28.0-qlik.1";return Al})},448:function(e,t,r){var n;(function(i,o,a,l){"use strict";var s=["","webkit","Moz","MS","ms","o"];var u=o.createElement("div");var c="function";var f=Math.round;var h=Math.abs;var d=Date.now;function p(e,t,r){return setTimeout(C(e,r),t)}function v(e,t,r){if(Array.isArray(e)){g(e,r[t],r);return true}return false}function g(e,t,r){var n;if(!e)return;if(e.forEach)e.forEach(t,r);else if(e.length!==l){n=0;while(n<e.length){t.call(r,e[n],n,e);n++}}else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function m(e,t,r){var n="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace");var r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var o=i.console&&(i.console.warn||i.console.log);o&&o.call(i.console,n,r);return e.apply(this,arguments)}}var y;y="function"!==typeof Object.assign?function e(t){if(t===l||null===t)throw new TypeError("Cannot convert undefined or null to object");var r=Object(t);for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i!==l&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])}return r}:Object.assign;var b=m(function e(t,r,n){var i=Object.keys(r);var o=0;while(o<i.length){(!n||n&&t[i[o]]===l)&&(t[i[o]]=r[i[o]]);o++}return t},"extend","Use `assign`.");var w=m(function e(t,r){return b(t,r,true)},"merge","Use `assign`.");function x(e,t,r){var n=t.prototype,i;i=e.prototype=Object.create(n);i.constructor=e;i._super=n;r&&y(i,r)}function C(e,t){return function r(){return e.apply(t,arguments)}}function S(e,t){if(typeof e==c)return e.apply(t&&t[0]||l,t);return e}function k(e,t){return e===l?t:e}function T(e,t,r){g(N(t),function(t){e.addEventListener(t,r,false)})}function L(e,t,r){g(N(t),function(t){e.removeEventListener(t,r,false)})}function M(e,t){while(e){if(e==t)return true;e=e.parentNode}return false}function A(e,t){return e.indexOf(t)>-1}function N(e){return e.trim().split(/\s+/g)}function O(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);var n=0;while(n<e.length){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function D(e){return Array.prototype.slice.call(e,0)}function E(e,t,r){var n=[];var i=[];var o=0;while(o<e.length){var a=t?e[o][t]:e[o];O(i,a)<0&&n.push(e[o]);i[o]=a;o++}r&&(n=t?n.sort(function e(r,n){return r[t]>n[t]}):n.sort());return n}function W(e,t){var r,n;var i=t[0].toUpperCase()+t.slice(1);var o=0;while(o<s.length){r=s[o];n=r?r+i:t;if(n in e)return n;o++}return l}var H=1;function I(){return H++}function P(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var z=/mobile|tablet|ip(ad|hone|od)|android/i;var F="ontouchstart"in i;var B=W(i,"PointerEvent")!==l;var R=F&&z.test(navigator.userAgent);var q="touch";var G="pen";var V="mouse";var U="kinect";var _=25;var X=1;var Y=2;var K=4;var j=8;var $=1;var Z=2;var Q=4;var J=8;var ee=16;var te=Z|Q;var re=J|ee;var ne=te|re;var ie=["x","y"];var oe=["clientX","clientY"];function ae(e,t){var r=this;this.manager=e;this.callback=t;this.element=e.element;this.target=e.options.inputTarget;this.domHandler=function(t){S(e.options.enable,[e])&&r.handler(t)};this.init()}ae.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler);this.evTarget&&T(this.target,this.evTarget,this.domHandler);this.evWin&&T(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&L(this.element,this.evEl,this.domHandler);this.evTarget&&L(this.target,this.evTarget,this.domHandler);this.evWin&&L(P(this.element),this.evWin,this.domHandler)}};function le(e){var t;var r=e.options.inputClass;t=r||(B?Ae:R?Pe:F?Re:Se);return new t(e,se)}function se(e,t,r){var n=r.pointers.length;var i=r.changedPointers.length;var o=t&X&&n-i===0;var a=t&(K|j)&&n-i===0;r.isFirst=!!o;r.isFinal=!!a;o&&(e.session={});r.eventType=t;ue(e,r);e.emit("hammer.input",r);e.recognize(r);e.session.prevInput=r}function ue(e,t){var r=e.session;var n=t.pointers;var i=n.length;r.firstInput||(r.firstInput=he(t));i>1&&!r.firstMultiple?r.firstMultiple=he(t):1===i&&(r.firstMultiple=false);var o=r.firstInput;var a=r.firstMultiple;var l=a?a.center:o.center;var s=t.center=de(n);t.timeStamp=d();t.deltaTime=t.timeStamp-o.timeStamp;t.angle=me(l,s);t.distance=ge(l,s);ce(r,t);t.offsetDirection=ve(t.deltaX,t.deltaY);var u=pe(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x;t.overallVelocityY=u.y;t.overallVelocity=h(u.x)>h(u.y)?u.x:u.y;t.scale=a?be(a.pointers,n):1;t.rotation=a?ye(a.pointers,n):0;t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length;fe(r,t);var c=e.element;M(t.srcEvent.target,c)&&(c=t.srcEvent.target);t.target=c}function ce(e,t){var r=t.center;var n=e.offsetDelta||{};var i=e.prevDelta||{};var o=e.prevInput||{};if(t.eventType===X||o.eventType===K){i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0};n=e.offsetDelta={x:r.x,y:r.y}}t.deltaX=i.x+(r.x-n.x);t.deltaY=i.y+(r.y-n.y)}function fe(e,t){var r=e.lastInterval||t,n=t.timeStamp-r.timeStamp,i,o,a,s;if(t.eventType!=j&&(n>_||r.velocity===l)){var u=t.deltaX-r.deltaX;var c=t.deltaY-r.deltaY;var f=pe(n,u,c);o=f.x;a=f.y;i=h(f.x)>h(f.y)?f.x:f.y;s=ve(u,c);e.lastInterval=t}else{i=r.velocity;o=r.velocityX;a=r.velocityY;s=r.direction}t.velocity=i;t.velocityX=o;t.velocityY=a;t.direction=s}function he(e){var t=[];var r=0;while(r<e.pointers.length){t[r]={clientX:f(e.pointers[r].clientX),clientY:f(e.pointers[r].clientY)};r++}return{timeStamp:d(),pointers:t,center:de(t),deltaX:e.deltaX,deltaY:e.deltaY}}function de(e){var t=e.length;if(1===t)return{x:f(e[0].clientX),y:f(e[0].clientY)};var r=0,n=0,i=0;while(i<t){r+=e[i].clientX;n+=e[i].clientY;i++}return{x:f(r/t),y:f(n/t)}}function pe(e,t,r){return{x:t/e||0,y:r/e||0}}function ve(e,t){if(e===t)return $;if(h(e)>=h(t))return e<0?Z:Q;return t<0?J:ee}function ge(e,t,r){r||(r=ie);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return Math.sqrt(n*n+i*i)}function me(e,t,r){r||(r=ie);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return 180*Math.atan2(i,n)/Math.PI}function ye(e,t){return me(t[1],t[0],oe)+me(e[1],e[0],oe)}function be(e,t){return ge(t[0],t[1],oe)/ge(e[0],e[1],oe)}var we={mousedown:X,mousemove:Y,mouseup:K};var xe="mousedown";var Ce="mousemove mouseup";function Se(){this.evEl=xe;this.evWin=Ce;this.pressed=false;ae.apply(this,arguments)}x(Se,ae,{handler:function e(t){var r=we[t.type];r&X&&0===t.button&&(this.pressed=true);r&Y&&1!==t.which&&(r=K);if(!this.pressed)return;r&K&&(this.pressed=false);this.callback(this.manager,r,{pointers:[t],changedPointers:[t],pointerType:V,srcEvent:t})}});var ke={pointerdown:X,pointermove:Y,pointerup:K,pointercancel:j,pointerout:j};var Te={2:q,3:G,4:V,5:U};var Le="pointerdown";var Me="pointermove pointerup pointercancel";if(i.MSPointerEvent&&!i.PointerEvent){Le="MSPointerDown";Me="MSPointerMove MSPointerUp MSPointerCancel"}function Ae(){this.evEl=Le;this.evWin=Me;ae.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}x(Ae,ae,{handler:function e(t){var r=this.store;var n=false;var i=t.type.toLowerCase().replace("ms","");var o=ke[i];var a=Te[t.pointerType]||t.pointerType;var l=a==q;var s=O(r,t.pointerId,"pointerId");if(o&X&&(0===t.button||l)){if(s<0){r.push(t);s=r.length-1}}else o&(K|j)&&(n=true);if(s<0)return;r[s]=t;this.callback(this.manager,o,{pointers:r,changedPointers:[t],pointerType:a,srcEvent:t});n&&r.splice(s,1)}});var Ne={touchstart:X,touchmove:Y,touchend:K,touchcancel:j};var Oe="touchstart";var De="touchstart touchmove touchend touchcancel";function Ee(){this.evTarget=Oe;this.evWin=De;this.started=false;ae.apply(this,arguments)}x(Ee,ae,{handler:function e(t){var r=Ne[t.type];r===X&&(this.started=true);if(!this.started)return;var n=We.call(this,t,r);r&(K|j)&&n[0].length-n[1].length===0&&(this.started=false);this.callback(this.manager,r,{pointers:n[0],changedPointers:n[1],pointerType:q,srcEvent:t})}});function We(e,t){var r=D(e.touches);var n=D(e.changedTouches);t&(K|j)&&(r=E(r.concat(n),"identifier",true));return[r,n]}var He={touchstart:X,touchmove:Y,touchend:K,touchcancel:j};var Ie="touchstart touchmove touchend touchcancel";function Pe(){this.evTarget=Ie;this.targetIds={};ae.apply(this,arguments)}x(Pe,ae,{handler:function e(t){var r=He[t.type];var n=ze.call(this,t,r);if(!n)return;this.callback(this.manager,r,{pointers:n[0],changedPointers:n[1],pointerType:q,srcEvent:t})}});function ze(e,t){var r=D(e.touches);var n=this.targetIds;if(t&(X|Y)&&1===r.length){n[r[0].identifier]=true;return[r,r]}var i,o,a=D(e.changedTouches),l=[],s=this.target;o=r.filter(function(e){return M(e.target,s)});if(t===X){i=0;while(i<o.length){n[o[i].identifier]=true;i++}}i=0;while(i<a.length){n[a[i].identifier]&&l.push(a[i]);t&(K|j)&&delete n[a[i].identifier];i++}if(!l.length)return;return[E(o.concat(l),"identifier",true),l]}var Fe=2500;var Be=25;function Re(){ae.apply(this,arguments);var e=C(this.handler,this);this.touch=new Pe(this.manager,e);this.mouse=new Se(this.manager,e);this.primaryTouch=null;this.lastTouches=[]}x(Re,ae,{handler:function e(t,r,n){var i=n.pointerType==q,o=n.pointerType==V;if(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)return;if(i)qe.call(this,r,n);else if(o&&Ve.call(this,n))return;this.callback(t,r,n)},destroy:function e(){this.touch.destroy();this.mouse.destroy()}});function qe(e,t){if(e&X){this.primaryTouch=t.changedPointers[0].identifier;Ge.call(this,t)}else e&(K|j)&&Ge.call(this,t)}function Ge(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;var i=function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)};setTimeout(i,Fe)}}function Ve(e){var t=e.srcEvent.clientX,r=e.srcEvent.clientY;for(var n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n];var o=Math.abs(t-i.x),a=Math.abs(r-i.y);if(o<=Be&&a<=Be)return true}return false}var Ue=W(u.style,"touchAction");var _e=Ue!==l;var Xe="compute";var Ye="auto";var Ke="manipulation";var je="none";var $e="pan-x";var Ze="pan-y";var Qe=tt();function Je(e,t){this.manager=e;this.set(t)}Je.prototype={set:function(e){e==Xe&&(e=this.compute());_e&&this.manager.element.style&&Qe[e]&&(this.manager.element.style[Ue]=e);this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];g(this.manager.recognizers,function(t){S(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))});return et(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent;var r=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var n=this.actions;var i=A(n,je)&&!Qe[je];var o=A(n,Ze)&&!Qe[Ze];var a=A(n,$e)&&!Qe[$e];if(i){var l=1===e.pointers.length;var s=e.distance<2;var u=e.deltaTime<250;if(l&&s&&u)return}if(a&&o)return;if(i||o&&r&te||a&&r&re)return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=true;e.preventDefault()}};function et(e){if(A(e,je))return je;var t=A(e,$e);var r=A(e,Ze);if(t&&r)return je;if(t||r)return t?$e:Ze;if(A(e,Ke))return Ke;return Ye}function tt(){if(!_e)return false;var e={};var t=i.CSS&&i.CSS.supports;["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){e[r]=!t||i.CSS.supports("touch-action",r)});return e}var rt=1;var nt=2;var it=4;var ot=8;var at=ot;var lt=16;var st=32;function ut(e){this.options=y({},this.defaults,e||{});this.id=I();this.manager=null;this.options.enable=k(this.options.enable,true);this.state=rt;this.simultaneous={};this.requireFail=[]}ut.prototype={defaults:{},set:function(e){y(this.options,e);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;e=ht(e,this);if(!t[e.id]){t[e.id]=e;e.recognizeWith(this)}return this},dropRecognizeWith:function(e){if(v(e,"dropRecognizeWith",this))return this;e=ht(e,this);delete this.simultaneous[e.id];return this},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;e=ht(e,this);if(-1===O(t,e)){t.push(e);e.requireFailure(this)}return this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=ht(e,this);var t=O(this.requireFail,e);t>-1&&this.requireFail.splice(t,1);return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this;var r=this.state;function n(r){t.manager.emit(r,e)}r<ot&&n(t.options.event+ct(r));n(t.options.event);e.additionalEvent&&n(e.additionalEvent);r>=ot&&n(t.options.event+ct(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=st},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(st|rt)))return false;e++}return true},recognize:function(e){var t=y({},e);if(!S(this.options.enable,[this,t])){this.reset();this.state=st;return}this.state&(at|lt|st)&&(this.state=rt);this.state=this.process(t);this.state&(nt|it|ot|lt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function ct(e){if(e&lt)return"cancel";if(e&ot)return"end";if(e&it)return"move";if(e&nt)return"start";return""}function ft(e){if(e==ee)return"down";if(e==J)return"up";if(e==Z)return"left";if(e==Q)return"right";return""}function ht(e,t){var r=t.manager;if(r)return r.get(e);return e}function dt(){ut.apply(this,arguments)}x(dt,ut,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state;var r=e.eventType;var n=t&(nt|it);var i=this.attrTest(e);if(n&&(r&j||!i))return t|lt;if(n||i){if(r&K)return t|ot;if(!(t&nt))return nt;return t|it}return st}});function pt(){dt.apply(this,arguments);this.pX=null;this.pY=null}x(pt,dt,{defaults:{event:"pan",threshold:10,pointers:1,direction:ne},getTouchAction:function(){var e=this.options.direction;var t=[];e&te&&t.push(Ze);e&re&&t.push($e);return t},directionTest:function(e){var t=this.options;var r=true;var n=e.distance;var i=e.direction;var o=e.deltaX;var a=e.deltaY;if(!(i&t.direction))if(t.direction&te){i=0===o?$:o<0?Z:Q;r=o!=this.pX;n=Math.abs(e.deltaX)}else{i=0===a?$:a<0?J:ee;r=a!=this.pY;n=Math.abs(e.deltaY)}e.direction=i;return r&&n>t.threshold&&i&t.direction},attrTest:function(e){return dt.prototype.attrTest.call(this,e)&&(this.state&nt||!(this.state&nt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX;this.pY=e.deltaY;var t=ft(e.direction);t&&(e.additionalEvent=this.options.event+t);this._super.emit.call(this,e)}});function vt(){dt.apply(this,arguments)}x(vt,dt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[je]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&nt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function gt(){ut.apply(this,arguments);this._timer=null;this._input=null}x(gt,ut,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ye]},process:function(e){var t=this.options;var r=e.pointers.length===t.pointers;var n=e.distance<t.threshold;var i=e.deltaTime>t.time;this._input=e;if(!n||!r||e.eventType&(K|j)&&!i)this.reset();else if(e.eventType&X){this.reset();this._timer=p(function(){this.state=at;this.tryEmit()},t.time,this)}else if(e.eventType&K)return at;return st},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==at)return;if(e&&e.eventType&K)this.manager.emit(this.options.event+"up",e);else{this._input.timeStamp=d();this.manager.emit(this.options.event,this._input)}}});function mt(){dt.apply(this,arguments)}x(mt,dt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[je]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&nt)}});function yt(){dt.apply(this,arguments)}x(yt,dt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:te|re,pointers:1},getTouchAction:function(){return pt.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction;var r;t&(te|re)?r=e.overallVelocity:t&te?r=e.overallVelocityX:t&re&&(r=e.overallVelocityY);return this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(r)>this.options.velocity&&e.eventType&K},emit:function(e){var t=ft(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e);this.manager.emit(this.options.event,e)}});function bt(){ut.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}x(bt,ut,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ke]},process:function(e){var t=this.options;var r=e.pointers.length===t.pointers;var n=e.distance<t.threshold;var i=e.deltaTime<t.time;this.reset();if(e.eventType&X&&0===this.count)return this.failTimeout();if(n&&i&&r){if(e.eventType!=K)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval;var a=!this.pCenter||ge(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp;this.pCenter=e.center;a&&o?this.count+=1:this.count=1;this._input=e;var l=this.count%t.taps;if(0===l){if(this.hasRequireFailures()){this._timer=p(function(){this.state=at;this.tryEmit()},t.interval,this);return nt}return at}}return st},failTimeout:function(){this._timer=p(function(){this.state=st},this.options.interval,this);return st},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==at){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function wt(e,t){t=t||{};t.recognizers=k(t.recognizers,wt.defaults.preset);return new St(e,t)}wt.VERSION="2.0.7";wt.defaults={domEvents:false,touchAction:Xe,enable:true,inputTarget:null,inputClass:null,preset:[[mt,{enable:false}],[vt,{enable:false},["rotate"]],[yt,{direction:te}],[pt,{direction:te},["swipe"]],[bt],[bt,{event:"doubletap",taps:2},["tap"]],[gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var xt=1;var Ct=2;function St(e,t){this.options=y({},wt.defaults,t||{});this.options.inputTarget=this.options.inputTarget||e;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=e;this.input=le(this);this.touchAction=new Je(this,this.options.touchAction);kt(this,true);g(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]);e[3]&&t.requireFailure(e[3])},this)}St.prototype={set:function(e){y(this.options,e);e.touchAction&&this.touchAction.update();if(e.inputTarget){this.input.destroy();this.input.target=e.inputTarget;this.input.init()}return this},stop:function(e){this.session.stopped=e?Ct:xt},recognize:function(e){var t=this.session;if(t.stopped)return;this.touchAction.preventDefaults(e);var r;var n=this.recognizers;var i=t.curRecognizer;(!i||i&&i.state&at)&&(i=t.curRecognizer=null);var o=0;while(o<n.length){r=n[o];t.stopped===Ct||i&&r!=i&&!r.canRecognizeWith(i)?r.reset():r.recognize(e);!i&&r.state&(nt|it|ot)&&(i=t.curRecognizer=r);o++}},get:function(e){if(e instanceof ut)return e;var t=this.recognizers;for(var r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);t&&this.remove(t);this.recognizers.push(e);e.manager=this;this.touchAction.update();return e},remove:function(e){if(v(e,"remove",this))return this;e=this.get(e);if(e){var t=this.recognizers;var r=O(t,e);if(-1!==r){t.splice(r,1);this.touchAction.update()}}return this},on:function(e,t){if(e===l)return;if(t===l)return;var r=this.handlers;g(N(e),function(e){r[e]=r[e]||[];r[e].push(t)});return this},off:function(e,t){if(e===l)return;var r=this.handlers;g(N(e),function(e){t?r[e]&&r[e].splice(O(r[e],t),1):delete r[e]});return this},emit:function(e,t){this.options.domEvents&&Tt(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(!r||!r.length)return;t.type=e;t.preventDefault=function(){t.srcEvent.preventDefault()};var n=0;while(n<r.length){r[n](t);n++}},destroy:function(){this.element&&kt(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function kt(e,t){var r=e.element;if(!r.style)return;var n;g(e.options.cssProps,function(i,o){n=W(r.style,o);if(t){e.oldCssProps[n]=r.style[n];r.style[n]=i}else r.style[n]=e.oldCssProps[n]||""});t||(e.oldCssProps={})}function Tt(e,t){var r=o.createEvent("Event");r.initEvent(e,true,true);r.gesture=t;t.target.dispatchEvent(r)}y(wt,{INPUT_START:X,INPUT_MOVE:Y,INPUT_END:K,INPUT_CANCEL:j,STATE_POSSIBLE:rt,STATE_BEGAN:nt,STATE_CHANGED:it,STATE_ENDED:ot,STATE_RECOGNIZED:at,STATE_CANCELLED:lt,STATE_FAILED:st,DIRECTION_NONE:$,DIRECTION_LEFT:Z,DIRECTION_RIGHT:Q,DIRECTION_UP:J,DIRECTION_DOWN:ee,DIRECTION_HORIZONTAL:te,DIRECTION_VERTICAL:re,DIRECTION_ALL:ne,Manager:St,Input:ae,TouchAction:Je,TouchInput:Pe,MouseInput:Se,PointerEventInput:Ae,TouchMouseInput:Re,SingleTouchInput:Ee,Recognizer:ut,AttrRecognizer:dt,Tap:bt,Pan:pt,Swipe:yt,Pinch:vt,Rotate:mt,Press:gt,on:T,off:L,each:g,merge:w,extend:b,assign:y,inherit:x,bindFn:C,prefixed:W});var Lt="undefined"!==typeof i?i:"undefined"!==typeof self?self:{};Lt.Hammer=wt;true;!(n=function(){return wt}.call(t,r,t,e),n!==l&&(e.exports=n))})(window,document,"Hammer")}}]);